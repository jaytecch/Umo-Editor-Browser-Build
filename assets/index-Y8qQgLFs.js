const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/c4Diagram-dc8f04df-CjoxkToM.js","assets/svgDrawCommon-9d162435-CzpNL_A4.js","assets/flowDiagram-622f9fc1-BQgGSfrq.js","assets/flowDb-0da60e67-ClNr7UL4.js","assets/graph-B4hc7_-g.js","assets/layout-B4QX29av.js","assets/styles-422bd1c9-FNSfTVEn.js","assets/index-9620d214-DHDmei3P.js","assets/clone-l7b1yN_E.js","assets/edges-5962ec63-N0QYqaDA.js","assets/createText-4a4f35c9-DguGiP28.js","assets/line-Z9RpTcAT.js","assets/array-BKyUJesY.js","assets/path-CbwjOpE9.js","assets/channel-SayeJ26I.js","assets/flowDiagram-v2-a33b4996-COwcicgD.js","assets/erDiagram-51d2b61e-BODi7okq.js","assets/ganttDiagram-a649f789-CTk5Hccb.js","assets/linear-DY5p_iki.js","assets/init-Gi6I4Gst.js","assets/pieDiagram-31d824a1-CrFiKv2I.js","assets/arc-BkGiLIz2.js","assets/ordinal-Cboi1Yqb.js","assets/quadrantDiagram-a712a7d9-HlXdTUR1.js","assets/xychartDiagram-4a8b8217-DklRcreq.js","assets/requirementDiagram-eb878fee-dOZAoh-X.js","assets/sequenceDiagram-66748113-DdQAnHTY.js","assets/classDiagram-8298e144-CtcOagNY.js","assets/styles-e2b9d258-TACDivJI.js","assets/classDiagram-v2-296fb1cd-Cs3AXTPy.js","assets/stateDiagram-35d39939-BQXLevSg.js","assets/styles-de3becd0-Bl0BQw-Z.js","assets/stateDiagram-v2-6c43c13a-s82FF4HG.js","assets/journeyDiagram-de0d04b7-CwnJROOO.js","assets/flowchart-elk-definition-930acc39-tBqqFQgv.js","assets/timeline-definition-6eaa3543-Cw-MdEkN.js","assets/mindmap-definition-b08d3ac4-C_z7lbbY.js","assets/sankeyDiagram-c599f8ec-B8jJ4hi0.js","assets/Tableau10-B-NsZVaP.js","assets/blockDiagram-a8a0820c-BsMkmp39.js"])))=>i.map(i=>d[i]);
var O3e=s=>{throw TypeError(s)};var t6e=(s,l,c)=>l.has(s)||O3e("Cannot "+c);var D_e=(s,l,c)=>(t6e(s,l,"read from private field"),c?c.call(s):l.get(s)),OSe=(s,l,c)=>l.has(s)?O3e("Cannot add the same private member more than once"):l instanceof WeakSet?l.add(s):l.set(s,c);(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))d(f);new MutationObserver(f=>{for(const g of f)if(g.type==="childList")for(const v of g.addedNodes)v.tagName==="LINK"&&v.rel==="modulepreload"&&d(v)}).observe(document,{childList:!0,subtree:!0});function c(f){const g={};return f.integrity&&(g.integrity=f.integrity),f.referrerPolicy&&(g.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?g.credentials="include":f.crossOrigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function d(f){if(f.ep)return;f.ep=!0;const g=c(f);fetch(f.href,g)}})();/**
* @vue/shared v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function makeMap(s){const l=Object.create(null);for(const c of s.split(","))l[c]=1;return c=>c in l}const EMPTY_OBJ={},EMPTY_ARR=[],NOOP=()=>{},NO$1=()=>!1,isOn=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&(s.charCodeAt(2)>122||s.charCodeAt(2)<97),isModelListener=s=>s.startsWith("onUpdate:"),extend$3=Object.assign,remove$1=(s,l)=>{const c=s.indexOf(l);c>-1&&s.splice(c,1)},hasOwnProperty$e=Object.prototype.hasOwnProperty,hasOwn$2=(s,l)=>hasOwnProperty$e.call(s,l),isArray$4=Array.isArray,isMap=s=>toTypeString$1(s)==="[object Map]",isSet=s=>toTypeString$1(s)==="[object Set]",isFunction$6=s=>typeof s=="function",isString$4=s=>typeof s=="string",isSymbol=s=>typeof s=="symbol",isObject$8=s=>s!==null&&typeof s=="object",isPromise$2=s=>(isObject$8(s)||isFunction$6(s))&&isFunction$6(s.then)&&isFunction$6(s.catch),objectToString$2=Object.prototype.toString,toTypeString$1=s=>objectToString$2.call(s),toRawType=s=>toTypeString$1(s).slice(8,-1),isPlainObject$3=s=>toTypeString$1(s)==="[object Object]",isIntegerKey=s=>isString$4(s)&&s!=="NaN"&&s[0]!=="-"&&""+parseInt(s,10)===s,isReservedProp=makeMap(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),cacheStringFunction=s=>{const l=Object.create(null);return c=>l[c]||(l[c]=s(c))},camelizeRE=/-(\w)/g,camelize=cacheStringFunction(s=>s.replace(camelizeRE,(l,c)=>c?c.toUpperCase():"")),hyphenateRE=/\B([A-Z])/g,hyphenate$1=cacheStringFunction(s=>s.replace(hyphenateRE,"-$1").toLowerCase()),capitalize$1=cacheStringFunction(s=>s.charAt(0).toUpperCase()+s.slice(1)),toHandlerKey=cacheStringFunction(s=>s?`on${capitalize$1(s)}`:""),hasChanged=(s,l)=>!Object.is(s,l),invokeArrayFns=(s,...l)=>{for(let c=0;c<s.length;c++)s[c](...l)},def=(s,l,c,d=!1)=>{Object.defineProperty(s,l,{configurable:!0,enumerable:!1,writable:d,value:c})},looseToNumber=s=>{const l=parseFloat(s);return isNaN(l)?s:l},toNumber=s=>{const l=isString$4(s)?Number(s):NaN;return isNaN(l)?s:l};let _globalThis$1;const getGlobalThis$1=()=>_globalThis$1||(_globalThis$1=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function normalizeStyle(s){if(isArray$4(s)){const l={};for(let c=0;c<s.length;c++){const d=s[c],f=isString$4(d)?parseStringStyle(d):normalizeStyle(d);if(f)for(const g in f)l[g]=f[g]}return l}else if(isString$4(s)||isObject$8(s))return s}const listDelimiterRE=/;(?![^(]*\))/g,propertyDelimiterRE=/:([^]+)/,styleCommentRE=/\/\*[^]*?\*\//g;function parseStringStyle(s){const l={};return s.replace(styleCommentRE,"").split(listDelimiterRE).forEach(c=>{if(c){const d=c.split(propertyDelimiterRE);d.length>1&&(l[d[0].trim()]=d[1].trim())}}),l}function normalizeClass(s){let l="";if(isString$4(s))l=s;else if(isArray$4(s))for(let c=0;c<s.length;c++){const d=normalizeClass(s[c]);d&&(l+=d+" ")}else if(isObject$8(s))for(const c in s)s[c]&&(l+=c+" ");return l.trim()}function normalizeProps(s){if(!s)return null;let{class:l,style:c}=s;return l&&!isString$4(l)&&(s.class=normalizeClass(l)),c&&(s.style=normalizeStyle(c)),s}const specialBooleanAttrs="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",isSpecialBooleanAttr=makeMap(specialBooleanAttrs);function includeBooleanAttr(s){return!!s||s===""}const isRef$1=s=>!!(s&&s.__v_isRef===!0),toDisplayString$1=s=>isString$4(s)?s:s==null?"":isArray$4(s)||isObject$8(s)&&(s.toString===objectToString$2||!isFunction$6(s.toString))?isRef$1(s)?toDisplayString$1(s.value):JSON.stringify(s,replacer,2):String(s),replacer=(s,l)=>isRef$1(l)?replacer(s,l.value):isMap(l)?{[`Map(${l.size})`]:[...l.entries()].reduce((c,[d,f],g)=>(c[stringifySymbol(d,g)+" =>"]=f,c),{})}:isSet(l)?{[`Set(${l.size})`]:[...l.values()].map(c=>stringifySymbol(c))}:isSymbol(l)?stringifySymbol(l):isObject$8(l)&&!isArray$4(l)&&!isPlainObject$3(l)?String(l):l,stringifySymbol=(s,l="")=>{var c;return isSymbol(s)?`Symbol(${(c=s.description)!=null?c:l})`:s};/**
* @vue/reactivity v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let activeEffectScope;class EffectScope{constructor(l=!1){this.detached=l,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=activeEffectScope,!l&&activeEffectScope&&(this.index=(activeEffectScope.scopes||(activeEffectScope.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let l,c;if(this.scopes)for(l=0,c=this.scopes.length;l<c;l++)this.scopes[l].pause();for(l=0,c=this.effects.length;l<c;l++)this.effects[l].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let l,c;if(this.scopes)for(l=0,c=this.scopes.length;l<c;l++)this.scopes[l].resume();for(l=0,c=this.effects.length;l<c;l++)this.effects[l].resume()}}run(l){if(this._active){const c=activeEffectScope;try{return activeEffectScope=this,l()}finally{activeEffectScope=c}}}on(){activeEffectScope=this}off(){activeEffectScope=this.parent}stop(l){if(this._active){let c,d;for(c=0,d=this.effects.length;c<d;c++)this.effects[c].stop();for(c=0,d=this.cleanups.length;c<d;c++)this.cleanups[c]();if(this.scopes)for(c=0,d=this.scopes.length;c<d;c++)this.scopes[c].stop(!0);if(!this.detached&&this.parent&&!l){const f=this.parent.scopes.pop();f&&f!==this&&(this.parent.scopes[this.index]=f,f.index=this.index)}this.parent=void 0,this._active=!1}}}function effectScope(s){return new EffectScope(s)}function getCurrentScope(){return activeEffectScope}function onScopeDispose(s,l=!1){activeEffectScope&&activeEffectScope.cleanups.push(s)}let activeSub;const pausedQueueEffects=new WeakSet;class ReactiveEffect{constructor(l){this.fn=l,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,activeEffectScope&&activeEffectScope.active&&activeEffectScope.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,pausedQueueEffects.has(this)&&(pausedQueueEffects.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||batch(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,cleanupEffect(this),prepareDeps(this);const l=activeSub,c=shouldTrack;activeSub=this,shouldTrack=!0;try{return this.fn()}finally{cleanupDeps(this),activeSub=l,shouldTrack=c,this.flags&=-3}}stop(){if(this.flags&1){for(let l=this.deps;l;l=l.nextDep)removeSub(l);this.deps=this.depsTail=void 0,cleanupEffect(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?pausedQueueEffects.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){isDirty$1(this)&&this.run()}get dirty(){return isDirty$1(this)}}let batchDepth=0,batchedSub,batchedComputed;function batch(s,l=!1){if(s.flags|=8,l){s.next=batchedComputed,batchedComputed=s;return}s.next=batchedSub,batchedSub=s}function startBatch(){batchDepth++}function endBatch(){if(--batchDepth>0)return;if(batchedComputed){let l=batchedComputed;for(batchedComputed=void 0;l;){const c=l.next;l.next=void 0,l.flags&=-9,l=c}}let s;for(;batchedSub;){let l=batchedSub;for(batchedSub=void 0;l;){const c=l.next;if(l.next=void 0,l.flags&=-9,l.flags&1)try{l.trigger()}catch(d){s||(s=d)}l=c}}if(s)throw s}function prepareDeps(s){for(let l=s.deps;l;l=l.nextDep)l.version=-1,l.prevActiveLink=l.dep.activeLink,l.dep.activeLink=l}function cleanupDeps(s){let l,c=s.depsTail,d=c;for(;d;){const f=d.prevDep;d.version===-1?(d===c&&(c=f),removeSub(d),removeDep(d)):l=d,d.dep.activeLink=d.prevActiveLink,d.prevActiveLink=void 0,d=f}s.deps=l,s.depsTail=c}function isDirty$1(s){for(let l=s.deps;l;l=l.nextDep)if(l.dep.version!==l.version||l.dep.computed&&(refreshComputed(l.dep.computed)||l.dep.version!==l.version))return!0;return!!s._dirty}function refreshComputed(s){if(s.flags&4&&!(s.flags&16)||(s.flags&=-17,s.globalVersion===globalVersion))return;s.globalVersion=globalVersion;const l=s.dep;if(s.flags|=2,l.version>0&&!s.isSSR&&s.deps&&!isDirty$1(s)){s.flags&=-3;return}const c=activeSub,d=shouldTrack;activeSub=s,shouldTrack=!0;try{prepareDeps(s);const f=s.fn(s._value);(l.version===0||hasChanged(f,s._value))&&(s._value=f,l.version++)}catch(f){throw l.version++,f}finally{activeSub=c,shouldTrack=d,cleanupDeps(s),s.flags&=-3}}function removeSub(s,l=!1){const{dep:c,prevSub:d,nextSub:f}=s;if(d&&(d.nextSub=f,s.prevSub=void 0),f&&(f.prevSub=d,s.nextSub=void 0),c.subs===s&&(c.subs=d),!c.subs&&c.computed){c.computed.flags&=-5;for(let g=c.computed.deps;g;g=g.nextDep)removeSub(g,!0)}!l&&!--c.sc&&c.map&&c.map.delete(c.key)}function removeDep(s){const{prevDep:l,nextDep:c}=s;l&&(l.nextDep=c,s.prevDep=void 0),c&&(c.prevDep=l,s.nextDep=void 0)}let shouldTrack=!0;const trackStack=[];function pauseTracking(){trackStack.push(shouldTrack),shouldTrack=!1}function resetTracking(){const s=trackStack.pop();shouldTrack=s===void 0?!0:s}function cleanupEffect(s){const{cleanup:l}=s;if(s.cleanup=void 0,l){const c=activeSub;activeSub=void 0;try{l()}finally{activeSub=c}}}let globalVersion=0,Link$1=class{constructor(l,c){this.sub=l,this.dep=c,this.version=c.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Dep{constructor(l){this.computed=l,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(l){if(!activeSub||!shouldTrack||activeSub===this.computed)return;let c=this.activeLink;if(c===void 0||c.sub!==activeSub)c=this.activeLink=new Link$1(activeSub,this),activeSub.deps?(c.prevDep=activeSub.depsTail,activeSub.depsTail.nextDep=c,activeSub.depsTail=c):activeSub.deps=activeSub.depsTail=c,addSub(c);else if(c.version===-1&&(c.version=this.version,c.nextDep)){const d=c.nextDep;d.prevDep=c.prevDep,c.prevDep&&(c.prevDep.nextDep=d),c.prevDep=activeSub.depsTail,c.nextDep=void 0,activeSub.depsTail.nextDep=c,activeSub.depsTail=c,activeSub.deps===c&&(activeSub.deps=d)}return c}trigger(l){this.version++,globalVersion++,this.notify(l)}notify(l){startBatch();try{for(let c=this.subs;c;c=c.prevSub)c.sub.notify()&&c.sub.dep.notify()}finally{endBatch()}}}function addSub(s){if(s.dep.sc++,s.sub.flags&4){const l=s.dep.computed;if(l&&!s.dep.subs){l.flags|=20;for(let d=l.deps;d;d=d.nextDep)addSub(d)}const c=s.dep.subs;c!==s&&(s.prevSub=c,c&&(c.nextSub=s)),s.dep.subs=s}}const targetMap=new WeakMap,ITERATE_KEY=Symbol(""),MAP_KEY_ITERATE_KEY=Symbol(""),ARRAY_ITERATE_KEY=Symbol("");function track(s,l,c){if(shouldTrack&&activeSub){let d=targetMap.get(s);d||targetMap.set(s,d=new Map);let f=d.get(c);f||(d.set(c,f=new Dep),f.map=d,f.key=c),f.track()}}function trigger$2(s,l,c,d,f,g){const v=targetMap.get(s);if(!v){globalVersion++;return}const b=$=>{$&&$.trigger()};if(startBatch(),l==="clear")v.forEach(b);else{const $=isArray$4(s),y=$&&isIntegerKey(c);if($&&c==="length"){const x=Number(d);v.forEach((C,E)=>{(E==="length"||E===ARRAY_ITERATE_KEY||!isSymbol(E)&&E>=x)&&b(C)})}else switch(c!==void 0&&b(v.get(c)),y&&b(v.get(ARRAY_ITERATE_KEY)),l){case"add":$?y&&b(v.get("length")):(b(v.get(ITERATE_KEY)),isMap(s)&&b(v.get(MAP_KEY_ITERATE_KEY)));break;case"delete":$||(b(v.get(ITERATE_KEY)),isMap(s)&&b(v.get(MAP_KEY_ITERATE_KEY)));break;case"set":isMap(s)&&b(v.get(ITERATE_KEY));break}}endBatch()}function getDepFromReactive(s,l){const c=targetMap.get(s);return c&&c.get(l)}function reactiveReadArray(s){const l=toRaw(s);return l===s?l:(track(l,"iterate",ARRAY_ITERATE_KEY),isShallow(s)?l:l.map(toReactive))}function shallowReadArray(s){return track(s=toRaw(s),"iterate",ARRAY_ITERATE_KEY),s}const arrayInstrumentations={__proto__:null,[Symbol.iterator](){return iterator(this,Symbol.iterator,toReactive)},concat(...s){return reactiveReadArray(this).concat(...s.map(l=>isArray$4(l)?reactiveReadArray(l):l))},entries(){return iterator(this,"entries",s=>(s[1]=toReactive(s[1]),s))},every(s,l){return apply$4(this,"every",s,l,void 0,arguments)},filter(s,l){return apply$4(this,"filter",s,l,c=>c.map(toReactive),arguments)},find(s,l){return apply$4(this,"find",s,l,toReactive,arguments)},findIndex(s,l){return apply$4(this,"findIndex",s,l,void 0,arguments)},findLast(s,l){return apply$4(this,"findLast",s,l,toReactive,arguments)},findLastIndex(s,l){return apply$4(this,"findLastIndex",s,l,void 0,arguments)},forEach(s,l){return apply$4(this,"forEach",s,l,void 0,arguments)},includes(...s){return searchProxy(this,"includes",s)},indexOf(...s){return searchProxy(this,"indexOf",s)},join(s){return reactiveReadArray(this).join(s)},lastIndexOf(...s){return searchProxy(this,"lastIndexOf",s)},map(s,l){return apply$4(this,"map",s,l,void 0,arguments)},pop(){return noTracking(this,"pop")},push(...s){return noTracking(this,"push",s)},reduce(s,...l){return reduce(this,"reduce",s,l)},reduceRight(s,...l){return reduce(this,"reduceRight",s,l)},shift(){return noTracking(this,"shift")},some(s,l){return apply$4(this,"some",s,l,void 0,arguments)},splice(...s){return noTracking(this,"splice",s)},toReversed(){return reactiveReadArray(this).toReversed()},toSorted(s){return reactiveReadArray(this).toSorted(s)},toSpliced(...s){return reactiveReadArray(this).toSpliced(...s)},unshift(...s){return noTracking(this,"unshift",s)},values(){return iterator(this,"values",toReactive)}};function iterator(s,l,c){const d=shallowReadArray(s),f=d[l]();return d!==s&&!isShallow(s)&&(f._next=f.next,f.next=()=>{const g=f._next();return g.value&&(g.value=c(g.value)),g}),f}const arrayProto$1=Array.prototype;function apply$4(s,l,c,d,f,g){const v=shallowReadArray(s),b=v!==s&&!isShallow(s),$=v[l];if($!==arrayProto$1[l]){const C=$.apply(s,g);return b?toReactive(C):C}let y=c;v!==s&&(b?y=function(C,E){return c.call(this,toReactive(C),E,s)}:c.length>2&&(y=function(C,E){return c.call(this,C,E,s)}));const x=$.call(v,y,d);return b&&f?f(x):x}function reduce(s,l,c,d){const f=shallowReadArray(s);let g=c;return f!==s&&(isShallow(s)?c.length>3&&(g=function(v,b,$){return c.call(this,v,b,$,s)}):g=function(v,b,$){return c.call(this,v,toReactive(b),$,s)}),f[l](g,...d)}function searchProxy(s,l,c){const d=toRaw(s);track(d,"iterate",ARRAY_ITERATE_KEY);const f=d[l](...c);return(f===-1||f===!1)&&isProxy(c[0])?(c[0]=toRaw(c[0]),d[l](...c)):f}function noTracking(s,l,c=[]){pauseTracking(),startBatch();const d=toRaw(s)[l].apply(s,c);return endBatch(),resetTracking(),d}const isNonTrackableKeys=makeMap("__proto__,__v_isRef,__isVue"),builtInSymbols=new Set(Object.getOwnPropertyNames(Symbol).filter(s=>s!=="arguments"&&s!=="caller").map(s=>Symbol[s]).filter(isSymbol));function hasOwnProperty$d(s){isSymbol(s)||(s=String(s));const l=toRaw(this);return track(l,"has",s),l.hasOwnProperty(s)}class BaseReactiveHandler{constructor(l=!1,c=!1){this._isReadonly=l,this._isShallow=c}get(l,c,d){const f=this._isReadonly,g=this._isShallow;if(c==="__v_isReactive")return!f;if(c==="__v_isReadonly")return f;if(c==="__v_isShallow")return g;if(c==="__v_raw")return d===(f?g?shallowReadonlyMap:readonlyMap:g?shallowReactiveMap:reactiveMap).get(l)||Object.getPrototypeOf(l)===Object.getPrototypeOf(d)?l:void 0;const v=isArray$4(l);if(!f){let $;if(v&&($=arrayInstrumentations[c]))return $;if(c==="hasOwnProperty")return hasOwnProperty$d}const b=Reflect.get(l,c,isRef(l)?l:d);return(isSymbol(c)?builtInSymbols.has(c):isNonTrackableKeys(c))||(f||track(l,"get",c),g)?b:isRef(b)?v&&isIntegerKey(c)?b:b.value:isObject$8(b)?f?readonly(b):reactive(b):b}}class MutableReactiveHandler extends BaseReactiveHandler{constructor(l=!1){super(!1,l)}set(l,c,d,f){let g=l[c];if(!this._isShallow){const $=isReadonly(g);if(!isShallow(d)&&!isReadonly(d)&&(g=toRaw(g),d=toRaw(d)),!isArray$4(l)&&isRef(g)&&!isRef(d))return $?!1:(g.value=d,!0)}const v=isArray$4(l)&&isIntegerKey(c)?Number(c)<l.length:hasOwn$2(l,c),b=Reflect.set(l,c,d,isRef(l)?l:f);return l===toRaw(f)&&(v?hasChanged(d,g)&&trigger$2(l,"set",c,d):trigger$2(l,"add",c,d)),b}deleteProperty(l,c){const d=hasOwn$2(l,c);l[c];const f=Reflect.deleteProperty(l,c);return f&&d&&trigger$2(l,"delete",c,void 0),f}has(l,c){const d=Reflect.has(l,c);return(!isSymbol(c)||!builtInSymbols.has(c))&&track(l,"has",c),d}ownKeys(l){return track(l,"iterate",isArray$4(l)?"length":ITERATE_KEY),Reflect.ownKeys(l)}}class ReadonlyReactiveHandler extends BaseReactiveHandler{constructor(l=!1){super(!0,l)}set(l,c){return!0}deleteProperty(l,c){return!0}}const mutableHandlers=new MutableReactiveHandler,readonlyHandlers=new ReadonlyReactiveHandler,shallowReactiveHandlers=new MutableReactiveHandler(!0),shallowReadonlyHandlers=new ReadonlyReactiveHandler(!0),toShallow=s=>s,getProto=s=>Reflect.getPrototypeOf(s);function get$2(s,l,c=!1,d=!1){s=s.__v_raw;const f=toRaw(s),g=toRaw(l);c||(hasChanged(l,g)&&track(f,"get",l),track(f,"get",g));const{has:v}=getProto(f),b=d?toShallow:c?toReadonly:toReactive;if(v.call(f,l))return b(s.get(l));if(v.call(f,g))return b(s.get(g));s!==f&&s.get(l)}function has(s,l=!1){const c=this.__v_raw,d=toRaw(c),f=toRaw(s);return l||(hasChanged(s,f)&&track(d,"has",s),track(d,"has",f)),s===f?c.has(s):c.has(s)||c.has(f)}function size(s,l=!1){return s=s.__v_raw,!l&&track(toRaw(s),"iterate",ITERATE_KEY),Reflect.get(s,"size",s)}function add(s,l=!1){!l&&!isShallow(s)&&!isReadonly(s)&&(s=toRaw(s));const c=toRaw(this);return getProto(c).has.call(c,s)||(c.add(s),trigger$2(c,"add",s,s)),this}function set$3(s,l,c=!1){!c&&!isShallow(l)&&!isReadonly(l)&&(l=toRaw(l));const d=toRaw(this),{has:f,get:g}=getProto(d);let v=f.call(d,s);v||(s=toRaw(s),v=f.call(d,s));const b=g.call(d,s);return d.set(s,l),v?hasChanged(l,b)&&trigger$2(d,"set",s,l):trigger$2(d,"add",s,l),this}function deleteEntry(s){const l=toRaw(this),{has:c,get:d}=getProto(l);let f=c.call(l,s);f||(s=toRaw(s),f=c.call(l,s)),d&&d.call(l,s);const g=l.delete(s);return f&&trigger$2(l,"delete",s,void 0),g}function clear$1(){const s=toRaw(this),l=s.size!==0,c=s.clear();return l&&trigger$2(s,"clear",void 0,void 0),c}function createForEach(s,l){return function(d,f){const g=this,v=g.__v_raw,b=toRaw(v),$=l?toShallow:s?toReadonly:toReactive;return!s&&track(b,"iterate",ITERATE_KEY),v.forEach((y,x)=>d.call(f,$(y),$(x),g))}}function createIterableMethod(s,l,c){return function(...d){const f=this.__v_raw,g=toRaw(f),v=isMap(g),b=s==="entries"||s===Symbol.iterator&&v,$=s==="keys"&&v,y=f[s](...d),x=c?toShallow:l?toReadonly:toReactive;return!l&&track(g,"iterate",$?MAP_KEY_ITERATE_KEY:ITERATE_KEY),{next(){const{value:C,done:E}=y.next();return E?{value:C,done:E}:{value:b?[x(C[0]),x(C[1])]:x(C),done:E}},[Symbol.iterator](){return this}}}}function createReadonlyMethod(s){return function(...l){return s==="delete"?!1:s==="clear"?void 0:this}}function createInstrumentations(){const s={get(g){return get$2(this,g)},get size(){return size(this)},has,add,set:set$3,delete:deleteEntry,clear:clear$1,forEach:createForEach(!1,!1)},l={get(g){return get$2(this,g,!1,!0)},get size(){return size(this)},has,add(g){return add.call(this,g,!0)},set(g,v){return set$3.call(this,g,v,!0)},delete:deleteEntry,clear:clear$1,forEach:createForEach(!1,!0)},c={get(g){return get$2(this,g,!0)},get size(){return size(this,!0)},has(g){return has.call(this,g,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!1)},d={get(g){return get$2(this,g,!0,!0)},get size(){return size(this,!0)},has(g){return has.call(this,g,!0)},add:createReadonlyMethod("add"),set:createReadonlyMethod("set"),delete:createReadonlyMethod("delete"),clear:createReadonlyMethod("clear"),forEach:createForEach(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(g=>{s[g]=createIterableMethod(g,!1,!1),c[g]=createIterableMethod(g,!0,!1),l[g]=createIterableMethod(g,!1,!0),d[g]=createIterableMethod(g,!0,!0)}),[s,c,l,d]}const[mutableInstrumentations,readonlyInstrumentations,shallowInstrumentations,shallowReadonlyInstrumentations]=createInstrumentations();function createInstrumentationGetter(s,l){const c=l?s?shallowReadonlyInstrumentations:shallowInstrumentations:s?readonlyInstrumentations:mutableInstrumentations;return(d,f,g)=>f==="__v_isReactive"?!s:f==="__v_isReadonly"?s:f==="__v_raw"?d:Reflect.get(hasOwn$2(c,f)&&f in d?c:d,f,g)}const mutableCollectionHandlers={get:createInstrumentationGetter(!1,!1)},shallowCollectionHandlers={get:createInstrumentationGetter(!1,!0)},readonlyCollectionHandlers={get:createInstrumentationGetter(!0,!1)},shallowReadonlyCollectionHandlers={get:createInstrumentationGetter(!0,!0)},reactiveMap=new WeakMap,shallowReactiveMap=new WeakMap,readonlyMap=new WeakMap,shallowReadonlyMap=new WeakMap;function targetTypeMap(s){switch(s){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function getTargetType(s){return s.__v_skip||!Object.isExtensible(s)?0:targetTypeMap(toRawType(s))}function reactive(s){return isReadonly(s)?s:createReactiveObject(s,!1,mutableHandlers,mutableCollectionHandlers,reactiveMap)}function shallowReactive(s){return createReactiveObject(s,!1,shallowReactiveHandlers,shallowCollectionHandlers,shallowReactiveMap)}function readonly(s){return createReactiveObject(s,!0,readonlyHandlers,readonlyCollectionHandlers,readonlyMap)}function shallowReadonly(s){return createReactiveObject(s,!0,shallowReadonlyHandlers,shallowReadonlyCollectionHandlers,shallowReadonlyMap)}function createReactiveObject(s,l,c,d,f){if(!isObject$8(s)||s.__v_raw&&!(l&&s.__v_isReactive))return s;const g=f.get(s);if(g)return g;const v=getTargetType(s);if(v===0)return s;const b=new Proxy(s,v===2?d:c);return f.set(s,b),b}function isReactive(s){return isReadonly(s)?isReactive(s.__v_raw):!!(s&&s.__v_isReactive)}function isReadonly(s){return!!(s&&s.__v_isReadonly)}function isShallow(s){return!!(s&&s.__v_isShallow)}function isProxy(s){return s?!!s.__v_raw:!1}function toRaw(s){const l=s&&s.__v_raw;return l?toRaw(l):s}function markRaw(s){return!hasOwn$2(s,"__v_skip")&&Object.isExtensible(s)&&def(s,"__v_skip",!0),s}const toReactive=s=>isObject$8(s)?reactive(s):s,toReadonly=s=>isObject$8(s)?readonly(s):s;function isRef(s){return s?s.__v_isRef===!0:!1}function ref(s){return createRef(s,!1)}function shallowRef(s){return createRef(s,!0)}function createRef(s,l){return isRef(s)?s:new RefImpl(s,l)}class RefImpl{constructor(l,c){this.dep=new Dep,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=c?l:toRaw(l),this._value=c?l:toReactive(l),this.__v_isShallow=c}get value(){return this.dep.track(),this._value}set value(l){const c=this._rawValue,d=this.__v_isShallow||isShallow(l)||isReadonly(l);l=d?l:toRaw(l),hasChanged(l,c)&&(this._rawValue=l,this._value=d?l:toReactive(l),this.dep.trigger())}}function unref(s){return isRef(s)?s.value:s}const shallowUnwrapHandlers={get:(s,l,c)=>l==="__v_raw"?s:unref(Reflect.get(s,l,c)),set:(s,l,c,d)=>{const f=s[l];return isRef(f)&&!isRef(c)?(f.value=c,!0):Reflect.set(s,l,c,d)}};function proxyRefs(s){return isReactive(s)?s:new Proxy(s,shallowUnwrapHandlers)}class CustomRefImpl{constructor(l){this.__v_isRef=!0,this._value=void 0;const c=this.dep=new Dep,{get:d,set:f}=l(c.track.bind(c),c.trigger.bind(c));this._get=d,this._set=f}get value(){return this._value=this._get()}set value(l){this._set(l)}}function customRef(s){return new CustomRefImpl(s)}function toRefs(s){const l=isArray$4(s)?new Array(s.length):{};for(const c in s)l[c]=propertyToRef(s,c);return l}class ObjectRefImpl{constructor(l,c,d){this._object=l,this._key=c,this._defaultValue=d,this.__v_isRef=!0,this._value=void 0}get value(){const l=this._object[this._key];return this._value=l===void 0?this._defaultValue:l}set value(l){this._object[this._key]=l}get dep(){return getDepFromReactive(toRaw(this._object),this._key)}}function propertyToRef(s,l,c){const d=s[l];return isRef(d)?d:new ObjectRefImpl(s,l,c)}class ComputedRefImpl{constructor(l,c,d){this.fn=l,this.setter=c,this._value=void 0,this.dep=new Dep(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=globalVersion-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!c,this.isSSR=d}notify(){if(this.flags|=16,!(this.flags&8)&&activeSub!==this)return batch(this,!0),!0}get value(){const l=this.dep.track();return refreshComputed(this),l&&(l.version=this.dep.version),this._value}set value(l){this.setter&&this.setter(l)}}function computed$1(s,l,c=!1){let d,f;return isFunction$6(s)?d=s:(d=s.get,f=s.set),new ComputedRefImpl(d,f,c)}const INITIAL_WATCHER_VALUE={},cleanupMap=new WeakMap;let activeWatcher;function onWatcherCleanup(s,l=!1,c=activeWatcher){if(c){let d=cleanupMap.get(c);d||cleanupMap.set(c,d=[]),d.push(s)}}function watch$1(s,l,c=EMPTY_OBJ){const{immediate:d,deep:f,once:g,scheduler:v,augmentJob:b,call:$}=c,y=he=>f?he:isShallow(he)||f===!1||f===0?traverse(he,1):traverse(he);let x,C,E,N,W=!1,q=!1;if(isRef(s)?(C=()=>s.value,W=isShallow(s)):isReactive(s)?(C=()=>y(s),W=!0):isArray$4(s)?(q=!0,W=s.some(he=>isReactive(he)||isShallow(he)),C=()=>s.map(he=>{if(isRef(he))return he.value;if(isReactive(he))return y(he);if(isFunction$6(he))return $?$(he,2):he()})):isFunction$6(s)?l?C=$?()=>$(s,2):s:C=()=>{if(E){pauseTracking();try{E()}finally{resetTracking()}}const he=activeWatcher;activeWatcher=x;try{return $?$(s,3,[N]):s(N)}finally{activeWatcher=he}}:C=NOOP,l&&f){const he=C,ge=f===!0?1/0:f;C=()=>traverse(he(),ge)}const Y=getCurrentScope(),re=()=>{x.stop(),Y&&remove$1(Y.effects,x)};if(g&&l){const he=l;l=(...ge)=>{he(...ge),re()}}let se=q?new Array(s.length).fill(INITIAL_WATCHER_VALUE):INITIAL_WATCHER_VALUE;const de=he=>{if(!(!(x.flags&1)||!x.dirty&&!he))if(l){const ge=x.run();if(f||W||(q?ge.some((Se,Ae)=>hasChanged(Se,se[Ae])):hasChanged(ge,se))){E&&E();const Se=activeWatcher;activeWatcher=x;try{const Ae=[ge,se===INITIAL_WATCHER_VALUE?void 0:q&&se[0]===INITIAL_WATCHER_VALUE?[]:se,N];$?$(l,3,Ae):l(...Ae),se=ge}finally{activeWatcher=Se}}}else x.run()};return b&&b(de),x=new ReactiveEffect(C),x.scheduler=v?()=>v(de,!1):de,N=he=>onWatcherCleanup(he,!1,x),E=x.onStop=()=>{const he=cleanupMap.get(x);if(he){if($)$(he,4);else for(const ge of he)ge();cleanupMap.delete(x)}},l?d?de(!0):se=x.run():v?v(de.bind(null,!0),!0):x.run(),re.pause=x.pause.bind(x),re.resume=x.resume.bind(x),re.stop=re,re}function traverse(s,l=1/0,c){if(l<=0||!isObject$8(s)||s.__v_skip||(c=c||new Set,c.has(s)))return s;if(c.add(s),l--,isRef(s))traverse(s.value,l,c);else if(isArray$4(s))for(let d=0;d<s.length;d++)traverse(s[d],l,c);else if(isSet(s)||isMap(s))s.forEach(d=>{traverse(d,l,c)});else if(isPlainObject$3(s)){for(const d in s)traverse(s[d],l,c);for(const d of Object.getOwnPropertySymbols(s))Object.prototype.propertyIsEnumerable.call(s,d)&&traverse(s[d],l,c)}return s}/**
* @vue/runtime-core v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const stack=[];let isWarning=!1;function warn$1$1(s,...l){if(isWarning)return;isWarning=!0,pauseTracking();const c=stack.length?stack[stack.length-1].component:null,d=c&&c.appContext.config.warnHandler,f=getComponentTrace();if(d)callWithErrorHandling(d,c,11,[s+l.map(g=>{var v,b;return(b=(v=g.toString)==null?void 0:v.call(g))!=null?b:JSON.stringify(g)}).join(""),c&&c.proxy,f.map(({vnode:g})=>`at <${formatComponentName(c,g.type)}>`).join(`
`),f]);else{const g=[`[Vue warn]: ${s}`,...l];f.length&&g.push(`
`,...formatTrace(f)),console.warn(...g)}resetTracking(),isWarning=!1}function getComponentTrace(){let s=stack[stack.length-1];if(!s)return[];const l=[];for(;s;){const c=l[0];c&&c.vnode===s?c.recurseCount++:l.push({vnode:s,recurseCount:0});const d=s.component&&s.component.parent;s=d&&d.vnode}return l}function formatTrace(s){const l=[];return s.forEach((c,d)=>{l.push(...d===0?[]:[`
`],...formatTraceEntry(c))}),l}function formatTraceEntry({vnode:s,recurseCount:l}){const c=l>0?`... (${l} recursive calls)`:"",d=s.component?s.component.parent==null:!1,f=` at <${formatComponentName(s.component,s.type,d)}`,g=">"+c;return s.props?[f,...formatProps(s.props),g]:[f+g]}function formatProps(s){const l=[],c=Object.keys(s);return c.slice(0,3).forEach(d=>{l.push(...formatProp(d,s[d]))}),c.length>3&&l.push(" ..."),l}function formatProp(s,l,c){return isString$4(l)?(l=JSON.stringify(l),c?l:[`${s}=${l}`]):typeof l=="number"||typeof l=="boolean"||l==null?c?l:[`${s}=${l}`]:isRef(l)?(l=formatProp(s,toRaw(l.value),!0),c?l:[`${s}=Ref<`,l,">"]):isFunction$6(l)?[`${s}=fn${l.name?`<${l.name}>`:""}`]:(l=toRaw(l),c?l:[`${s}=`,l])}function callWithErrorHandling(s,l,c,d){try{return d?s(...d):s()}catch(f){handleError$1(f,l,c)}}function callWithAsyncErrorHandling(s,l,c,d){if(isFunction$6(s)){const f=callWithErrorHandling(s,l,c,d);return f&&isPromise$2(f)&&f.catch(g=>{handleError$1(g,l,c)}),f}if(isArray$4(s)){const f=[];for(let g=0;g<s.length;g++)f.push(callWithAsyncErrorHandling(s[g],l,c,d));return f}}function handleError$1(s,l,c,d=!0){const f=l?l.vnode:null,{errorHandler:g,throwUnhandledErrorInProduction:v}=l&&l.appContext.config||EMPTY_OBJ;if(l){let b=l.parent;const $=l.proxy,y=`https://vuejs.org/error-reference/#runtime-${c}`;for(;b;){const x=b.ec;if(x){for(let C=0;C<x.length;C++)if(x[C](s,$,y)===!1)return}b=b.parent}if(g){pauseTracking(),callWithErrorHandling(g,null,10,[s,$,y]),resetTracking();return}}logError(s,c,f,d,v)}function logError(s,l,c,d=!0,f=!1){if(f)throw s;console.error(s)}const queue=[];let flushIndex=-1;const pendingPostFlushCbs=[];let activePostFlushCbs=null,postFlushIndex=0;const resolvedPromise=Promise.resolve();let currentFlushPromise=null;function nextTick(s){const l=currentFlushPromise||resolvedPromise;return s?l.then(this?s.bind(this):s):l}function findInsertionIndex(s){let l=flushIndex+1,c=queue.length;for(;l<c;){const d=l+c>>>1,f=queue[d],g=getId(f);g<s||g===s&&f.flags&2?l=d+1:c=d}return l}function queueJob(s){if(!(s.flags&1)){const l=getId(s),c=queue[queue.length-1];!c||!(s.flags&2)&&l>=getId(c)?queue.push(s):queue.splice(findInsertionIndex(l),0,s),s.flags|=1,queueFlush()}}function queueFlush(){currentFlushPromise||(currentFlushPromise=resolvedPromise.then(flushJobs))}function queuePostFlushCb(s){isArray$4(s)?pendingPostFlushCbs.push(...s):activePostFlushCbs&&s.id===-1?activePostFlushCbs.splice(postFlushIndex+1,0,s):s.flags&1||(pendingPostFlushCbs.push(s),s.flags|=1),queueFlush()}function flushPreFlushCbs(s,l,c=flushIndex+1){for(;c<queue.length;c++){const d=queue[c];if(d&&d.flags&2){if(s&&d.id!==s.uid)continue;queue.splice(c,1),c--,d.flags&4&&(d.flags&=-2),d(),d.flags&4||(d.flags&=-2)}}}function flushPostFlushCbs(s){if(pendingPostFlushCbs.length){const l=[...new Set(pendingPostFlushCbs)].sort((c,d)=>getId(c)-getId(d));if(pendingPostFlushCbs.length=0,activePostFlushCbs){activePostFlushCbs.push(...l);return}for(activePostFlushCbs=l,postFlushIndex=0;postFlushIndex<activePostFlushCbs.length;postFlushIndex++){const c=activePostFlushCbs[postFlushIndex];c.flags&4&&(c.flags&=-2),c.flags&8||c(),c.flags&=-2}activePostFlushCbs=null,postFlushIndex=0}}const getId=s=>s.id==null?s.flags&2?-1:1/0:s.id;function flushJobs(s){try{for(flushIndex=0;flushIndex<queue.length;flushIndex++){const l=queue[flushIndex];l&&!(l.flags&8)&&(l.flags&4&&(l.flags&=-2),callWithErrorHandling(l,l.i,l.i?15:14),l.flags&4||(l.flags&=-2))}}finally{for(;flushIndex<queue.length;flushIndex++){const l=queue[flushIndex];l&&(l.flags&=-2)}flushIndex=-1,queue.length=0,flushPostFlushCbs(),currentFlushPromise=null,(queue.length||pendingPostFlushCbs.length)&&flushJobs()}}let currentRenderingInstance=null,currentScopeId=null;function setCurrentRenderingInstance(s){const l=currentRenderingInstance;return currentRenderingInstance=s,currentScopeId=s&&s.type.__scopeId||null,l}function pushScopeId(s){currentScopeId=s}function popScopeId(){currentScopeId=null}function withCtx(s,l=currentRenderingInstance,c){if(!l||s._n)return s;const d=(...f)=>{d._d&&setBlockTracking(-1);const g=setCurrentRenderingInstance(l);let v;try{v=s(...f)}finally{setCurrentRenderingInstance(g),d._d&&setBlockTracking(1)}return v};return d._n=!0,d._c=!0,d._d=!0,d}function withDirectives(s,l){if(currentRenderingInstance===null)return s;const c=getComponentPublicInstance(currentRenderingInstance),d=s.dirs||(s.dirs=[]);for(let f=0;f<l.length;f++){let[g,v,b,$=EMPTY_OBJ]=l[f];g&&(isFunction$6(g)&&(g={mounted:g,updated:g}),g.deep&&traverse(v),d.push({dir:g,instance:c,value:v,oldValue:void 0,arg:b,modifiers:$}))}return s}function invokeDirectiveHook(s,l,c,d){const f=s.dirs,g=l&&l.dirs;for(let v=0;v<f.length;v++){const b=f[v];g&&(b.oldValue=g[v].value);let $=b.dir[d];$&&(pauseTracking(),callWithAsyncErrorHandling($,c,8,[s.el,b,s,l]),resetTracking())}}const TeleportEndKey=Symbol("_vte"),isTeleport=s=>s.__isTeleport,isTeleportDisabled=s=>s&&(s.disabled||s.disabled===""),isTeleportDeferred=s=>s&&(s.defer||s.defer===""),isTargetSVG=s=>typeof SVGElement<"u"&&s instanceof SVGElement,isTargetMathML=s=>typeof MathMLElement=="function"&&s instanceof MathMLElement,resolveTarget=(s,l)=>{const c=s&&s.to;return isString$4(c)?l?l(c):null:c},TeleportImpl={name:"Teleport",__isTeleport:!0,process(s,l,c,d,f,g,v,b,$,y){const{mc:x,pc:C,pbc:E,o:{insert:N,querySelector:W,createText:q,createComment:Y}}=y,re=isTeleportDisabled(l.props);let{shapeFlag:se,children:de,dynamicChildren:he}=l;if(s==null){const ge=l.el=q(""),Se=l.anchor=q("");N(ge,c,d),N(Se,c,d);const Ae=(Be,Ke)=>{se&16&&(f&&f.isCE&&(f.ce._teleportTarget=Be),x(de,Be,Ke,f,g,v,b,$))},Re=()=>{const Be=l.target=resolveTarget(l.props,W),Ke=prepareAnchor(Be,l,q,N);Be&&(v!=="svg"&&isTargetSVG(Be)?v="svg":v!=="mathml"&&isTargetMathML(Be)&&(v="mathml"),re||(Ae(Be,Ke),updateCssVars(l)))};re&&(Ae(c,Se),updateCssVars(l)),isTeleportDeferred(l.props)?queuePostRenderEffect(Re,g):Re()}else{l.el=s.el,l.targetStart=s.targetStart;const ge=l.anchor=s.anchor,Se=l.target=s.target,Ae=l.targetAnchor=s.targetAnchor,Re=isTeleportDisabled(s.props),Be=Re?c:Se,Ke=Re?ge:Ae;if(v==="svg"||isTargetSVG(Se)?v="svg":(v==="mathml"||isTargetMathML(Se))&&(v="mathml"),he?(E(s.dynamicChildren,he,Be,f,g,v,b),traverseStaticChildren(s,l,!0)):$||C(s,l,Be,Ke,f,g,v,b,!1),re)Re?l.props&&s.props&&l.props.to!==s.props.to&&(l.props.to=s.props.to):moveTeleport(l,c,ge,y,1);else if((l.props&&l.props.to)!==(s.props&&s.props.to)){const Lr=l.target=resolveTarget(l.props,W);Lr&&moveTeleport(l,Lr,null,y,0)}else Re&&moveTeleport(l,Se,Ae,y,1);updateCssVars(l)}},remove(s,l,c,{um:d,o:{remove:f}},g){const{shapeFlag:v,children:b,anchor:$,targetStart:y,targetAnchor:x,target:C,props:E}=s;if(C&&(f(y),f(x)),g&&f($),v&16){const N=g||!isTeleportDisabled(E);for(let W=0;W<b.length;W++){const q=b[W];d(q,l,c,N,!!q.dynamicChildren)}}},move:moveTeleport,hydrate:hydrateTeleport};function moveTeleport(s,l,c,{o:{insert:d},m:f},g=2){g===0&&d(s.targetAnchor,l,c);const{el:v,anchor:b,shapeFlag:$,children:y,props:x}=s,C=g===2;if(C&&d(v,l,c),(!C||isTeleportDisabled(x))&&$&16)for(let E=0;E<y.length;E++)f(y[E],l,c,2);C&&d(b,l,c)}function hydrateTeleport(s,l,c,d,f,g,{o:{nextSibling:v,parentNode:b,querySelector:$,insert:y,createText:x}},C){const E=l.target=resolveTarget(l.props,$);if(E){const N=E._lpa||E.firstChild;if(l.shapeFlag&16)if(isTeleportDisabled(l.props))l.anchor=C(v(s),l,b(s),c,d,f,g),l.targetStart=N,l.targetAnchor=N&&v(N);else{l.anchor=v(s);let W=N;for(;W;){if(W&&W.nodeType===8){if(W.data==="teleport start anchor")l.targetStart=W;else if(W.data==="teleport anchor"){l.targetAnchor=W,E._lpa=l.targetAnchor&&v(l.targetAnchor);break}}W=v(W)}l.targetAnchor||prepareAnchor(E,l,x,y),C(N&&v(N),l,E,c,d,f,g)}updateCssVars(l)}return l.anchor&&v(l.anchor)}const Teleport=TeleportImpl;function updateCssVars(s){const l=s.ctx;if(l&&l.ut){let c=s.targetStart;for(;c&&c!==s.targetAnchor;)c.nodeType===1&&c.setAttribute("data-v-owner",l.uid),c=c.nextSibling;l.ut()}}function prepareAnchor(s,l,c,d){const f=l.targetStart=c(""),g=l.targetAnchor=c("");return f[TeleportEndKey]=g,s&&(d(f,s),d(g,s)),g}const leaveCbKey=Symbol("_leaveCb"),enterCbKey=Symbol("_enterCb");function useTransitionState(){const s={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return onMounted(()=>{s.isMounted=!0}),onBeforeUnmount(()=>{s.isUnmounting=!0}),s}const TransitionHookValidator=[Function,Array],BaseTransitionPropsValidators={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:TransitionHookValidator,onEnter:TransitionHookValidator,onAfterEnter:TransitionHookValidator,onEnterCancelled:TransitionHookValidator,onBeforeLeave:TransitionHookValidator,onLeave:TransitionHookValidator,onAfterLeave:TransitionHookValidator,onLeaveCancelled:TransitionHookValidator,onBeforeAppear:TransitionHookValidator,onAppear:TransitionHookValidator,onAfterAppear:TransitionHookValidator,onAppearCancelled:TransitionHookValidator},recursiveGetSubtree=s=>{const l=s.subTree;return l.component?recursiveGetSubtree(l.component):l},BaseTransitionImpl={name:"BaseTransition",props:BaseTransitionPropsValidators,setup(s,{slots:l}){const c=getCurrentInstance(),d=useTransitionState();return()=>{const f=l.default&&getTransitionRawChildren(l.default(),!0);if(!f||!f.length)return;const g=findNonCommentChild(f),v=toRaw(s),{mode:b}=v;if(d.isLeaving)return emptyPlaceholder(g);const $=getInnerChild$1(g);if(!$)return emptyPlaceholder(g);let y=resolveTransitionHooks($,v,d,c,E=>y=E);$.type!==Comment&&setTransitionHooks($,y);const x=c.subTree,C=x&&getInnerChild$1(x);if(C&&C.type!==Comment&&!isSameVNodeType($,C)&&recursiveGetSubtree(c).type!==Comment){const E=resolveTransitionHooks(C,v,d,c);if(setTransitionHooks(C,E),b==="out-in"&&$.type!==Comment)return d.isLeaving=!0,E.afterLeave=()=>{d.isLeaving=!1,c.job.flags&8||c.update(),delete E.afterLeave},emptyPlaceholder(g);b==="in-out"&&$.type!==Comment&&(E.delayLeave=(N,W,q)=>{const Y=getLeavingNodesForType(d,C);Y[String(C.key)]=C,N[leaveCbKey]=()=>{W(),N[leaveCbKey]=void 0,delete y.delayedLeave},y.delayedLeave=q})}return g}}};function findNonCommentChild(s){let l=s[0];if(s.length>1){for(const c of s)if(c.type!==Comment){l=c;break}}return l}const BaseTransition=BaseTransitionImpl;function getLeavingNodesForType(s,l){const{leavingVNodes:c}=s;let d=c.get(l.type);return d||(d=Object.create(null),c.set(l.type,d)),d}function resolveTransitionHooks(s,l,c,d,f){const{appear:g,mode:v,persisted:b=!1,onBeforeEnter:$,onEnter:y,onAfterEnter:x,onEnterCancelled:C,onBeforeLeave:E,onLeave:N,onAfterLeave:W,onLeaveCancelled:q,onBeforeAppear:Y,onAppear:re,onAfterAppear:se,onAppearCancelled:de}=l,he=String(s.key),ge=getLeavingNodesForType(c,s),Se=(Be,Ke)=>{Be&&callWithAsyncErrorHandling(Be,d,9,Ke)},Ae=(Be,Ke)=>{const Lr=Ke[1];Se(Be,Ke),isArray$4(Be)?Be.every(_y=>_y.length<=1)&&Lr():Be.length<=1&&Lr()},Re={mode:v,persisted:b,beforeEnter(Be){let Ke=$;if(!c.isMounted)if(g)Ke=Y||$;else return;Be[leaveCbKey]&&Be[leaveCbKey](!0);const Lr=ge[he];Lr&&isSameVNodeType(s,Lr)&&Lr.el[leaveCbKey]&&Lr.el[leaveCbKey](),Se(Ke,[Be])},enter(Be){let Ke=y,Lr=x,_y=C;if(!c.isMounted)if(g)Ke=re||y,Lr=se||x,_y=de||C;else return;let by=!1;const yy=Be[enterCbKey]=my=>{by||(by=!0,my?Se(_y,[Be]):Se(Lr,[Be]),Re.delayedLeave&&Re.delayedLeave(),Be[enterCbKey]=void 0)};Ke?Ae(Ke,[Be,yy]):yy()},leave(Be,Ke){const Lr=String(s.key);if(Be[enterCbKey]&&Be[enterCbKey](!0),c.isUnmounting)return Ke();Se(E,[Be]);let _y=!1;const by=Be[leaveCbKey]=yy=>{_y||(_y=!0,Ke(),yy?Se(q,[Be]):Se(W,[Be]),Be[leaveCbKey]=void 0,ge[Lr]===s&&delete ge[Lr])};ge[Lr]=s,N?Ae(N,[Be,by]):by()},clone(Be){const Ke=resolveTransitionHooks(Be,l,c,d,f);return f&&f(Ke),Ke}};return Re}function emptyPlaceholder(s){if(isKeepAlive(s))return s=cloneVNode(s),s.children=null,s}function getInnerChild$1(s){if(!isKeepAlive(s))return isTeleport(s.type)&&s.children?findNonCommentChild(s.children):s;const{shapeFlag:l,children:c}=s;if(c){if(l&16)return c[0];if(l&32&&isFunction$6(c.default))return c.default()}}function setTransitionHooks(s,l){s.shapeFlag&6&&s.component?(s.transition=l,setTransitionHooks(s.component.subTree,l)):s.shapeFlag&128?(s.ssContent.transition=l.clone(s.ssContent),s.ssFallback.transition=l.clone(s.ssFallback)):s.transition=l}function getTransitionRawChildren(s,l=!1,c){let d=[],f=0;for(let g=0;g<s.length;g++){let v=s[g];const b=c==null?v.key:String(c)+String(v.key!=null?v.key:g);v.type===Fragment$1?(v.patchFlag&128&&f++,d=d.concat(getTransitionRawChildren(v.children,l,b))):(l||v.type!==Comment)&&d.push(b!=null?cloneVNode(v,{key:b}):v)}if(f>1)for(let g=0;g<d.length;g++)d[g].patchFlag=-2;return d}/*! #__NO_SIDE_EFFECTS__ */function defineComponent(s,l){return isFunction$6(s)?extend$3({name:s.name},l,{setup:s}):s}function markAsyncBoundary(s){s.ids=[s.ids[0]+s.ids[2]+++"-",0,0]}function setRef(s,l,c,d,f=!1){if(isArray$4(s)){s.forEach((W,q)=>setRef(W,l&&(isArray$4(l)?l[q]:l),c,d,f));return}if(isAsyncWrapper(d)&&!f)return;const g=d.shapeFlag&4?getComponentPublicInstance(d.component):d.el,v=f?null:g,{i:b,r:$}=s,y=l&&l.r,x=b.refs===EMPTY_OBJ?b.refs={}:b.refs,C=b.setupState,E=toRaw(C),N=C===EMPTY_OBJ?()=>!1:W=>hasOwn$2(E,W);if(y!=null&&y!==$&&(isString$4(y)?(x[y]=null,N(y)&&(C[y]=null)):isRef(y)&&(y.value=null)),isFunction$6($))callWithErrorHandling($,b,12,[v,x]);else{const W=isString$4($),q=isRef($);if(W||q){const Y=()=>{if(s.f){const re=W?N($)?C[$]:x[$]:$.value;f?isArray$4(re)&&remove$1(re,g):isArray$4(re)?re.includes(g)||re.push(g):W?(x[$]=[g],N($)&&(C[$]=x[$])):($.value=[g],s.k&&(x[s.k]=$.value))}else W?(x[$]=v,N($)&&(C[$]=v)):q&&($.value=v,s.k&&(x[s.k]=v))};v?(Y.id=-1,queuePostRenderEffect(Y,c)):Y()}}}const isAsyncWrapper=s=>!!s.type.__asyncLoader,isKeepAlive=s=>s.type.__isKeepAlive;function onActivated(s,l){registerKeepAliveHook(s,"a",l)}function onDeactivated(s,l){registerKeepAliveHook(s,"da",l)}function registerKeepAliveHook(s,l,c=currentInstance){const d=s.__wdc||(s.__wdc=()=>{let f=c;for(;f;){if(f.isDeactivated)return;f=f.parent}return s()});if(injectHook(l,d,c),c){let f=c.parent;for(;f&&f.parent;)isKeepAlive(f.parent.vnode)&&injectToKeepAliveRoot(d,l,c,f),f=f.parent}}function injectToKeepAliveRoot(s,l,c,d){const f=injectHook(l,s,d,!0);onUnmounted(()=>{remove$1(d[l],f)},c)}function injectHook(s,l,c=currentInstance,d=!1){if(c){const f=c[s]||(c[s]=[]),g=l.__weh||(l.__weh=(...v)=>{pauseTracking();const b=setCurrentInstance(c),$=callWithAsyncErrorHandling(l,c,s,v);return b(),resetTracking(),$});return d?f.unshift(g):f.push(g),g}}const createHook=s=>(l,c=currentInstance)=>{(!isInSSRComponentSetup||s==="sp")&&injectHook(s,(...d)=>l(...d),c)},onBeforeMount=createHook("bm"),onMounted=createHook("m"),onBeforeUpdate=createHook("bu"),onUpdated=createHook("u"),onBeforeUnmount=createHook("bum"),onUnmounted=createHook("um"),onServerPrefetch=createHook("sp"),onRenderTriggered=createHook("rtg"),onRenderTracked=createHook("rtc");function onErrorCaptured(s,l=currentInstance){injectHook("ec",s,l)}const COMPONENTS="components",DIRECTIVES="directives",NULL_DYNAMIC_COMPONENT=Symbol.for("v-ndc");function resolveDynamicComponent(s){return isString$4(s)?resolveAsset(COMPONENTS,s,!1)||s:s||NULL_DYNAMIC_COMPONENT}function resolveDirective(s){return resolveAsset(DIRECTIVES,s)}function resolveAsset(s,l,c=!0,d=!1){const f=currentRenderingInstance||currentInstance;if(f){const g=f.type;if(s===COMPONENTS){const b=getComponentName(g,!1);if(b&&(b===l||b===camelize(l)||b===capitalize$1(camelize(l))))return g}const v=resolve(f[s]||g[s],l)||resolve(f.appContext[s],l);return!v&&d?g:v}}function resolve(s,l){return s&&(s[l]||s[camelize(l)]||s[capitalize$1(camelize(l))])}function renderList(s,l,c,d){let f;const g=c,v=isArray$4(s);if(v||isString$4(s)){const b=v&&isReactive(s);let $=!1;b&&($=!isShallow(s),s=shallowReadArray(s)),f=new Array(s.length);for(let y=0,x=s.length;y<x;y++)f[y]=l($?toReactive(s[y]):s[y],y,void 0,g)}else if(typeof s=="number"){f=new Array(s);for(let b=0;b<s;b++)f[b]=l(b+1,b,void 0,g)}else if(isObject$8(s))if(s[Symbol.iterator])f=Array.from(s,(b,$)=>l(b,$,void 0,g));else{const b=Object.keys(s);f=new Array(b.length);for(let $=0,y=b.length;$<y;$++){const x=b[$];f[$]=l(s[x],x,$,g)}}else f=[];return f}function createSlots(s,l){for(let c=0;c<l.length;c++){const d=l[c];if(isArray$4(d))for(let f=0;f<d.length;f++)s[d[f].name]=d[f].fn;else d&&(s[d.name]=d.key?(...f)=>{const g=d.fn(...f);return g&&(g.key=d.key),g}:d.fn)}return s}function renderSlot(s,l,c={},d,f){if(currentRenderingInstance.ce||currentRenderingInstance.parent&&isAsyncWrapper(currentRenderingInstance.parent)&&currentRenderingInstance.parent.ce)return l!=="default"&&(c.name=l),openBlock(),createBlock(Fragment$1,null,[createVNode("slot",c,d&&d())],64);let g=s[l];g&&g._c&&(g._d=!1),openBlock();const v=g&&ensureValidVNode(g(c)),b=createBlock(Fragment$1,{key:(c.key||v&&v.key||`_${l}`)+(!v&&d?"_fb":"")},v||(d?d():[]),v&&s._===1?64:-2);return!f&&b.scopeId&&(b.slotScopeIds=[b.scopeId+"-s"]),g&&g._c&&(g._d=!0),b}function ensureValidVNode(s){return s.some(l=>isVNode$1(l)?!(l.type===Comment||l.type===Fragment$1&&!ensureValidVNode(l.children)):!0)?s:null}const getPublicInstance=s=>s?isStatefulComponent(s)?getComponentPublicInstance(s):getPublicInstance(s.parent):null,publicPropertiesMap=extend$3(Object.create(null),{$:s=>s,$el:s=>s.vnode.el,$data:s=>s.data,$props:s=>s.props,$attrs:s=>s.attrs,$slots:s=>s.slots,$refs:s=>s.refs,$parent:s=>getPublicInstance(s.parent),$root:s=>getPublicInstance(s.root),$host:s=>s.ce,$emit:s=>s.emit,$options:s=>resolveMergedOptions(s),$forceUpdate:s=>s.f||(s.f=()=>{queueJob(s.update)}),$nextTick:s=>s.n||(s.n=nextTick.bind(s.proxy)),$watch:s=>instanceWatch.bind(s)}),hasSetupBinding=(s,l)=>s!==EMPTY_OBJ&&!s.__isScriptSetup&&hasOwn$2(s,l),PublicInstanceProxyHandlers={get({_:s},l){if(l==="__v_skip")return!0;const{ctx:c,setupState:d,data:f,props:g,accessCache:v,type:b,appContext:$}=s;let y;if(l[0]!=="$"){const N=v[l];if(N!==void 0)switch(N){case 1:return d[l];case 2:return f[l];case 4:return c[l];case 3:return g[l]}else{if(hasSetupBinding(d,l))return v[l]=1,d[l];if(f!==EMPTY_OBJ&&hasOwn$2(f,l))return v[l]=2,f[l];if((y=s.propsOptions[0])&&hasOwn$2(y,l))return v[l]=3,g[l];if(c!==EMPTY_OBJ&&hasOwn$2(c,l))return v[l]=4,c[l];shouldCacheAccess&&(v[l]=0)}}const x=publicPropertiesMap[l];let C,E;if(x)return l==="$attrs"&&track(s.attrs,"get",""),x(s);if((C=b.__cssModules)&&(C=C[l]))return C;if(c!==EMPTY_OBJ&&hasOwn$2(c,l))return v[l]=4,c[l];if(E=$.config.globalProperties,hasOwn$2(E,l))return E[l]},set({_:s},l,c){const{data:d,setupState:f,ctx:g}=s;return hasSetupBinding(f,l)?(f[l]=c,!0):d!==EMPTY_OBJ&&hasOwn$2(d,l)?(d[l]=c,!0):hasOwn$2(s.props,l)||l[0]==="$"&&l.slice(1)in s?!1:(g[l]=c,!0)},has({_:{data:s,setupState:l,accessCache:c,ctx:d,appContext:f,propsOptions:g}},v){let b;return!!c[v]||s!==EMPTY_OBJ&&hasOwn$2(s,v)||hasSetupBinding(l,v)||(b=g[0])&&hasOwn$2(b,v)||hasOwn$2(d,v)||hasOwn$2(publicPropertiesMap,v)||hasOwn$2(f.config.globalProperties,v)},defineProperty(s,l,c){return c.get!=null?s._.accessCache[l]=0:hasOwn$2(c,"value")&&this.set(s,l,c.value,null),Reflect.defineProperty(s,l,c)}};function useSlots(){return getContext().slots}function useAttrs(){return getContext().attrs}function getContext(){const s=getCurrentInstance();return s.setupContext||(s.setupContext=createSetupContext(s))}function normalizePropsOrEmits(s){return isArray$4(s)?s.reduce((l,c)=>(l[c]=null,l),{}):s}let shouldCacheAccess=!0;function applyOptions(s){const l=resolveMergedOptions(s),c=s.proxy,d=s.ctx;shouldCacheAccess=!1,l.beforeCreate&&callHook$1(l.beforeCreate,s,"bc");const{data:f,computed:g,methods:v,watch:b,provide:$,inject:y,created:x,beforeMount:C,mounted:E,beforeUpdate:N,updated:W,activated:q,deactivated:Y,beforeDestroy:re,beforeUnmount:se,destroyed:de,unmounted:he,render:ge,renderTracked:Se,renderTriggered:Ae,errorCaptured:Re,serverPrefetch:Be,expose:Ke,inheritAttrs:Lr,components:_y,directives:by,filters:yy}=l;if(y&&resolveInjections(y,d,null),v)for(const K$ in v){const Y$=v[K$];isFunction$6(Y$)&&(d[K$]=Y$.bind(c))}if(f){const K$=f.call(c,c);isObject$8(K$)&&(s.data=reactive(K$))}if(shouldCacheAccess=!0,g)for(const K$ in g){const Y$=g[K$],W$=isFunction$6(Y$)?Y$.bind(c,c):isFunction$6(Y$.get)?Y$.get.bind(c,c):NOOP,U$=!isFunction$6(Y$)&&isFunction$6(Y$.set)?Y$.set.bind(c):NOOP,hy=computed({get:W$,set:U$});Object.defineProperty(d,K$,{enumerable:!0,configurable:!0,get:()=>hy.value,set:G$=>hy.value=G$})}if(b)for(const K$ in b)createWatcher(b[K$],d,c,K$);if($){const K$=isFunction$6($)?$.call(c):$;Reflect.ownKeys(K$).forEach(Y$=>{provide(Y$,K$[Y$])})}x&&callHook$1(x,s,"c");function $t(K$,Y$){isArray$4(Y$)?Y$.forEach(W$=>K$(W$.bind(c))):Y$&&K$(Y$.bind(c))}if($t(onBeforeMount,C),$t(onMounted,E),$t(onBeforeUpdate,N),$t(onUpdated,W),$t(onActivated,q),$t(onDeactivated,Y),$t(onErrorCaptured,Re),$t(onRenderTracked,Se),$t(onRenderTriggered,Ae),$t(onBeforeUnmount,se),$t(onUnmounted,he),$t(onServerPrefetch,Be),isArray$4(Ke))if(Ke.length){const K$=s.exposed||(s.exposed={});Ke.forEach(Y$=>{Object.defineProperty(K$,Y$,{get:()=>c[Y$],set:W$=>c[Y$]=W$})})}else s.exposed||(s.exposed={});ge&&s.render===NOOP&&(s.render=ge),Lr!=null&&(s.inheritAttrs=Lr),_y&&(s.components=_y),by&&(s.directives=by),Be&&markAsyncBoundary(s)}function resolveInjections(s,l,c=NOOP){isArray$4(s)&&(s=normalizeInject(s));for(const d in s){const f=s[d];let g;isObject$8(f)?"default"in f?g=inject(f.from||d,f.default,!0):g=inject(f.from||d):g=inject(f),isRef(g)?Object.defineProperty(l,d,{enumerable:!0,configurable:!0,get:()=>g.value,set:v=>g.value=v}):l[d]=g}}function callHook$1(s,l,c){callWithAsyncErrorHandling(isArray$4(s)?s.map(d=>d.bind(l.proxy)):s.bind(l.proxy),l,c)}function createWatcher(s,l,c,d){let f=d.includes(".")?createPathGetter(c,d):()=>c[d];if(isString$4(s)){const g=l[s];isFunction$6(g)&&watch(f,g)}else if(isFunction$6(s))watch(f,s.bind(c));else if(isObject$8(s))if(isArray$4(s))s.forEach(g=>createWatcher(g,l,c,d));else{const g=isFunction$6(s.handler)?s.handler.bind(c):l[s.handler];isFunction$6(g)&&watch(f,g,s)}}function resolveMergedOptions(s){const l=s.type,{mixins:c,extends:d}=l,{mixins:f,optionsCache:g,config:{optionMergeStrategies:v}}=s.appContext,b=g.get(l);let $;return b?$=b:!f.length&&!c&&!d?$=l:($={},f.length&&f.forEach(y=>mergeOptions($,y,v,!0)),mergeOptions($,l,v)),isObject$8(l)&&g.set(l,$),$}function mergeOptions(s,l,c,d=!1){const{mixins:f,extends:g}=l;g&&mergeOptions(s,g,c,!0),f&&f.forEach(v=>mergeOptions(s,v,c,!0));for(const v in l)if(!(d&&v==="expose")){const b=internalOptionMergeStrats[v]||c&&c[v];s[v]=b?b(s[v],l[v]):l[v]}return s}const internalOptionMergeStrats={data:mergeDataFn,props:mergeEmitsOrPropsOptions,emits:mergeEmitsOrPropsOptions,methods:mergeObjectOptions,computed:mergeObjectOptions,beforeCreate:mergeAsArray,created:mergeAsArray,beforeMount:mergeAsArray,mounted:mergeAsArray,beforeUpdate:mergeAsArray,updated:mergeAsArray,beforeDestroy:mergeAsArray,beforeUnmount:mergeAsArray,destroyed:mergeAsArray,unmounted:mergeAsArray,activated:mergeAsArray,deactivated:mergeAsArray,errorCaptured:mergeAsArray,serverPrefetch:mergeAsArray,components:mergeObjectOptions,directives:mergeObjectOptions,watch:mergeWatchOptions,provide:mergeDataFn,inject:mergeInject};function mergeDataFn(s,l){return l?s?function(){return extend$3(isFunction$6(s)?s.call(this,this):s,isFunction$6(l)?l.call(this,this):l)}:l:s}function mergeInject(s,l){return mergeObjectOptions(normalizeInject(s),normalizeInject(l))}function normalizeInject(s){if(isArray$4(s)){const l={};for(let c=0;c<s.length;c++)l[s[c]]=s[c];return l}return s}function mergeAsArray(s,l){return s?[...new Set([].concat(s,l))]:l}function mergeObjectOptions(s,l){return s?extend$3(Object.create(null),s,l):l}function mergeEmitsOrPropsOptions(s,l){return s?isArray$4(s)&&isArray$4(l)?[...new Set([...s,...l])]:extend$3(Object.create(null),normalizePropsOrEmits(s),normalizePropsOrEmits(l??{})):l}function mergeWatchOptions(s,l){if(!s)return l;if(!l)return s;const c=extend$3(Object.create(null),s);for(const d in l)c[d]=mergeAsArray(s[d],l[d]);return c}function createAppContext(){return{app:null,config:{isNativeTag:NO$1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let uid$1=0;function createAppAPI(s,l){return function(d,f=null){isFunction$6(d)||(d=extend$3({},d)),f!=null&&!isObject$8(f)&&(f=null);const g=createAppContext(),v=new WeakSet,b=[];let $=!1;const y=g.app={_uid:uid$1++,_component:d,_props:f,_container:null,_context:g,_instance:null,version:version$1,get config(){return g.config},set config(x){},use(x,...C){return v.has(x)||(x&&isFunction$6(x.install)?(v.add(x),x.install(y,...C)):isFunction$6(x)&&(v.add(x),x(y,...C))),y},mixin(x){return g.mixins.includes(x)||g.mixins.push(x),y},component(x,C){return C?(g.components[x]=C,y):g.components[x]},directive(x,C){return C?(g.directives[x]=C,y):g.directives[x]},mount(x,C,E){if(!$){const N=y._ceVNode||createVNode(d,f);return N.appContext=g,E===!0?E="svg":E===!1&&(E=void 0),C&&l?l(N,x):s(N,x,E),$=!0,y._container=x,x.__vue_app__=y,getComponentPublicInstance(N.component)}},onUnmount(x){b.push(x)},unmount(){$&&(callWithAsyncErrorHandling(b,y._instance,16),s(null,y._container),delete y._container.__vue_app__)},provide(x,C){return g.provides[x]=C,y},runWithContext(x){const C=currentApp;currentApp=y;try{return x()}finally{currentApp=C}}};return y}}let currentApp=null;function provide(s,l){if(currentInstance){let c=currentInstance.provides;const d=currentInstance.parent&&currentInstance.parent.provides;d===c&&(c=currentInstance.provides=Object.create(d)),c[s]=l}}function inject(s,l,c=!1){const d=currentInstance||currentRenderingInstance;if(d||currentApp){const f=currentApp?currentApp._context.provides:d?d.parent==null?d.vnode.appContext&&d.vnode.appContext.provides:d.parent.provides:void 0;if(f&&s in f)return f[s];if(arguments.length>1)return c&&isFunction$6(l)?l.call(d&&d.proxy):l}}const internalObjectProto={},createInternalObject=()=>Object.create(internalObjectProto),isInternalObject=s=>Object.getPrototypeOf(s)===internalObjectProto;function initProps(s,l,c,d=!1){const f={},g=createInternalObject();s.propsDefaults=Object.create(null),setFullProps(s,l,f,g);for(const v in s.propsOptions[0])v in f||(f[v]=void 0);c?s.props=d?f:shallowReactive(f):s.type.props?s.props=f:s.props=g,s.attrs=g}function updateProps(s,l,c,d){const{props:f,attrs:g,vnode:{patchFlag:v}}=s,b=toRaw(f),[$]=s.propsOptions;let y=!1;if((d||v>0)&&!(v&16)){if(v&8){const x=s.vnode.dynamicProps;for(let C=0;C<x.length;C++){let E=x[C];if(isEmitListener(s.emitsOptions,E))continue;const N=l[E];if($)if(hasOwn$2(g,E))N!==g[E]&&(g[E]=N,y=!0);else{const W=camelize(E);f[W]=resolvePropValue($,b,W,N,s,!1)}else N!==g[E]&&(g[E]=N,y=!0)}}}else{setFullProps(s,l,f,g)&&(y=!0);let x;for(const C in b)(!l||!hasOwn$2(l,C)&&((x=hyphenate$1(C))===C||!hasOwn$2(l,x)))&&($?c&&(c[C]!==void 0||c[x]!==void 0)&&(f[C]=resolvePropValue($,b,C,void 0,s,!0)):delete f[C]);if(g!==b)for(const C in g)(!l||!hasOwn$2(l,C))&&(delete g[C],y=!0)}y&&trigger$2(s.attrs,"set","")}function setFullProps(s,l,c,d){const[f,g]=s.propsOptions;let v=!1,b;if(l)for(let $ in l){if(isReservedProp($))continue;const y=l[$];let x;f&&hasOwn$2(f,x=camelize($))?!g||!g.includes(x)?c[x]=y:(b||(b={}))[x]=y:isEmitListener(s.emitsOptions,$)||(!($ in d)||y!==d[$])&&(d[$]=y,v=!0)}if(g){const $=toRaw(c),y=b||EMPTY_OBJ;for(let x=0;x<g.length;x++){const C=g[x];c[C]=resolvePropValue(f,$,C,y[C],s,!hasOwn$2(y,C))}}return v}function resolvePropValue(s,l,c,d,f,g){const v=s[c];if(v!=null){const b=hasOwn$2(v,"default");if(b&&d===void 0){const $=v.default;if(v.type!==Function&&!v.skipFactory&&isFunction$6($)){const{propsDefaults:y}=f;if(c in y)d=y[c];else{const x=setCurrentInstance(f);d=y[c]=$.call(null,l),x()}}else d=$;f.ce&&f.ce._setProp(c,d)}v[0]&&(g&&!b?d=!1:v[1]&&(d===""||d===hyphenate$1(c))&&(d=!0))}return d}const mixinPropsCache=new WeakMap;function normalizePropsOptions(s,l,c=!1){const d=c?mixinPropsCache:l.propsCache,f=d.get(s);if(f)return f;const g=s.props,v={},b=[];let $=!1;if(!isFunction$6(s)){const x=C=>{$=!0;const[E,N]=normalizePropsOptions(C,l,!0);extend$3(v,E),N&&b.push(...N)};!c&&l.mixins.length&&l.mixins.forEach(x),s.extends&&x(s.extends),s.mixins&&s.mixins.forEach(x)}if(!g&&!$)return isObject$8(s)&&d.set(s,EMPTY_ARR),EMPTY_ARR;if(isArray$4(g))for(let x=0;x<g.length;x++){const C=camelize(g[x]);validatePropName(C)&&(v[C]=EMPTY_OBJ)}else if(g)for(const x in g){const C=camelize(x);if(validatePropName(C)){const E=g[x],N=v[C]=isArray$4(E)||isFunction$6(E)?{type:E}:extend$3({},E),W=N.type;let q=!1,Y=!0;if(isArray$4(W))for(let re=0;re<W.length;++re){const se=W[re],de=isFunction$6(se)&&se.name;if(de==="Boolean"){q=!0;break}else de==="String"&&(Y=!1)}else q=isFunction$6(W)&&W.name==="Boolean";N[0]=q,N[1]=Y,(q||hasOwn$2(N,"default"))&&b.push(C)}}const y=[v,b];return isObject$8(s)&&d.set(s,y),y}function validatePropName(s){return s[0]!=="$"&&!isReservedProp(s)}const isInternalKey=s=>s[0]==="_"||s==="$stable",normalizeSlotValue=s=>isArray$4(s)?s.map(normalizeVNode):[normalizeVNode(s)],normalizeSlot=(s,l,c)=>{if(l._n)return l;const d=withCtx((...f)=>normalizeSlotValue(l(...f)),c);return d._c=!1,d},normalizeObjectSlots=(s,l,c)=>{const d=s._ctx;for(const f in s){if(isInternalKey(f))continue;const g=s[f];if(isFunction$6(g))l[f]=normalizeSlot(f,g,d);else if(g!=null){const v=normalizeSlotValue(g);l[f]=()=>v}}},normalizeVNodeSlots=(s,l)=>{const c=normalizeSlotValue(l);s.slots.default=()=>c},assignSlots=(s,l,c)=>{for(const d in l)(c||d!=="_")&&(s[d]=l[d])},initSlots=(s,l,c)=>{const d=s.slots=createInternalObject();if(s.vnode.shapeFlag&32){const f=l._;f?(assignSlots(d,l,c),c&&def(d,"_",f,!0)):normalizeObjectSlots(l,d)}else l&&normalizeVNodeSlots(s,l)},updateSlots=(s,l,c)=>{const{vnode:d,slots:f}=s;let g=!0,v=EMPTY_OBJ;if(d.shapeFlag&32){const b=l._;b?c&&b===1?g=!1:assignSlots(f,l,c):(g=!l.$stable,normalizeObjectSlots(l,f)),v=l}else l&&(normalizeVNodeSlots(s,l),v={default:1});if(g)for(const b in f)!isInternalKey(b)&&v[b]==null&&delete f[b]},queuePostRenderEffect=queueEffectWithSuspense;function createRenderer(s){return baseCreateRenderer(s)}function baseCreateRenderer(s,l){const c=getGlobalThis$1();c.__VUE__=!0;const{insert:d,remove:f,patchProp:g,createElement:v,createText:b,createComment:$,setText:y,setElementText:x,parentNode:C,nextSibling:E,setScopeId:N=NOOP,insertStaticContent:W}=s,q=(nS,Z$,dS,ES=null,wy=null,tS=null,yS=void 0,Q$=null,eS=!!Z$.dynamicChildren)=>{if(nS===Z$)return;nS&&!isSameVNodeType(nS,Z$)&&(ES=bS(nS),G$(nS,wy,tS,!0),nS=null),Z$.patchFlag===-2&&(eS=!1,Z$.dynamicChildren=null);const{type:cS,ref:wS,shapeFlag:xS}=Z$;switch(cS){case Text$3:Y(nS,Z$,dS,ES);break;case Comment:re(nS,Z$,dS,ES);break;case Static:nS==null&&se(Z$,dS,ES,yS);break;case Fragment$1:_y(nS,Z$,dS,ES,wy,tS,yS,Q$,eS);break;default:xS&1?ge(nS,Z$,dS,ES,wy,tS,yS,Q$,eS):xS&6?by(nS,Z$,dS,ES,wy,tS,yS,Q$,eS):(xS&64||xS&128)&&cS.process(nS,Z$,dS,ES,wy,tS,yS,Q$,eS,MS)}wS!=null&&wy&&setRef(wS,nS&&nS.ref,tS,Z$||nS,!Z$)},Y=(nS,Z$,dS,ES)=>{if(nS==null)d(Z$.el=b(Z$.children),dS,ES);else{const wy=Z$.el=nS.el;Z$.children!==nS.children&&y(wy,Z$.children)}},re=(nS,Z$,dS,ES)=>{nS==null?d(Z$.el=$(Z$.children||""),dS,ES):Z$.el=nS.el},se=(nS,Z$,dS,ES)=>{[nS.el,nS.anchor]=W(nS.children,Z$,dS,ES,nS.el,nS.anchor)},de=({el:nS,anchor:Z$},dS,ES)=>{let wy;for(;nS&&nS!==Z$;)wy=E(nS),d(nS,dS,ES),nS=wy;d(Z$,dS,ES)},he=({el:nS,anchor:Z$})=>{let dS;for(;nS&&nS!==Z$;)dS=E(nS),f(nS),nS=dS;f(Z$)},ge=(nS,Z$,dS,ES,wy,tS,yS,Q$,eS)=>{Z$.type==="svg"?yS="svg":Z$.type==="math"&&(yS="mathml"),nS==null?Se(Z$,dS,ES,wy,tS,yS,Q$,eS):Be(nS,Z$,wy,tS,yS,Q$,eS)},Se=(nS,Z$,dS,ES,wy,tS,yS,Q$)=>{let eS,cS;const{props:wS,shapeFlag:xS,transition:OS,dirs:mS}=nS;if(eS=nS.el=v(nS.type,tS,wS&&wS.is,wS),xS&8?x(eS,nS.children):xS&16&&Re(nS.children,eS,null,ES,wy,resolveChildrenNamespace(nS,tS),yS,Q$),mS&&invokeDirectiveHook(nS,null,ES,"created"),Ae(eS,nS,nS.scopeId,yS,ES),wS){for(const fC in wS)fC!=="value"&&!isReservedProp(fC)&&g(eS,fC,null,wS[fC],tS,ES);"value"in wS&&g(eS,"value",null,wS.value,tS),(cS=wS.onVnodeBeforeMount)&&invokeVNodeHook(cS,ES,nS)}mS&&invokeDirectiveHook(nS,null,ES,"beforeMount");const pS=needTransition(wy,OS);pS&&OS.beforeEnter(eS),d(eS,Z$,dS),((cS=wS&&wS.onVnodeMounted)||pS||mS)&&queuePostRenderEffect(()=>{cS&&invokeVNodeHook(cS,ES,nS),pS&&OS.enter(eS),mS&&invokeDirectiveHook(nS,null,ES,"mounted")},wy)},Ae=(nS,Z$,dS,ES,wy)=>{if(dS&&N(nS,dS),ES)for(let tS=0;tS<ES.length;tS++)N(nS,ES[tS]);if(wy){let tS=wy.subTree;if(Z$===tS||isSuspense(tS.type)&&(tS.ssContent===Z$||tS.ssFallback===Z$)){const yS=wy.vnode;Ae(nS,yS,yS.scopeId,yS.slotScopeIds,wy.parent)}}},Re=(nS,Z$,dS,ES,wy,tS,yS,Q$,eS=0)=>{for(let cS=eS;cS<nS.length;cS++){const wS=nS[cS]=Q$?cloneIfMounted(nS[cS]):normalizeVNode(nS[cS]);q(null,wS,Z$,dS,ES,wy,tS,yS,Q$)}},Be=(nS,Z$,dS,ES,wy,tS,yS)=>{const Q$=Z$.el=nS.el;let{patchFlag:eS,dynamicChildren:cS,dirs:wS}=Z$;eS|=nS.patchFlag&16;const xS=nS.props||EMPTY_OBJ,OS=Z$.props||EMPTY_OBJ;let mS;if(dS&&toggleRecurse(dS,!1),(mS=OS.onVnodeBeforeUpdate)&&invokeVNodeHook(mS,dS,Z$,nS),wS&&invokeDirectiveHook(Z$,nS,dS,"beforeUpdate"),dS&&toggleRecurse(dS,!0),(xS.innerHTML&&OS.innerHTML==null||xS.textContent&&OS.textContent==null)&&x(Q$,""),cS?Ke(nS.dynamicChildren,cS,Q$,dS,ES,resolveChildrenNamespace(Z$,wy),tS):yS||Y$(nS,Z$,Q$,null,dS,ES,resolveChildrenNamespace(Z$,wy),tS,!1),eS>0){if(eS&16)Lr(Q$,xS,OS,dS,wy);else if(eS&2&&xS.class!==OS.class&&g(Q$,"class",null,OS.class,wy),eS&4&&g(Q$,"style",xS.style,OS.style,wy),eS&8){const pS=Z$.dynamicProps;for(let fC=0;fC<pS.length;fC++){const US=pS[fC],Iye=xS[US],$ye=OS[US];($ye!==Iye||US==="value")&&g(Q$,US,Iye,$ye,wy,dS)}}eS&1&&nS.children!==Z$.children&&x(Q$,Z$.children)}else!yS&&cS==null&&Lr(Q$,xS,OS,dS,wy);((mS=OS.onVnodeUpdated)||wS)&&queuePostRenderEffect(()=>{mS&&invokeVNodeHook(mS,dS,Z$,nS),wS&&invokeDirectiveHook(Z$,nS,dS,"updated")},ES)},Ke=(nS,Z$,dS,ES,wy,tS,yS)=>{for(let Q$=0;Q$<Z$.length;Q$++){const eS=nS[Q$],cS=Z$[Q$],wS=eS.el&&(eS.type===Fragment$1||!isSameVNodeType(eS,cS)||eS.shapeFlag&70)?C(eS.el):dS;q(eS,cS,wS,null,ES,wy,tS,yS,!0)}},Lr=(nS,Z$,dS,ES,wy)=>{if(Z$!==dS){if(Z$!==EMPTY_OBJ)for(const tS in Z$)!isReservedProp(tS)&&!(tS in dS)&&g(nS,tS,Z$[tS],null,wy,ES);for(const tS in dS){if(isReservedProp(tS))continue;const yS=dS[tS],Q$=Z$[tS];yS!==Q$&&tS!=="value"&&g(nS,tS,Q$,yS,wy,ES)}"value"in dS&&g(nS,"value",Z$.value,dS.value,wy)}},_y=(nS,Z$,dS,ES,wy,tS,yS,Q$,eS)=>{const cS=Z$.el=nS?nS.el:b(""),wS=Z$.anchor=nS?nS.anchor:b("");let{patchFlag:xS,dynamicChildren:OS,slotScopeIds:mS}=Z$;mS&&(Q$=Q$?Q$.concat(mS):mS),nS==null?(d(cS,dS,ES),d(wS,dS,ES),Re(Z$.children||[],dS,wS,wy,tS,yS,Q$,eS)):xS>0&&xS&64&&OS&&nS.dynamicChildren?(Ke(nS.dynamicChildren,OS,dS,wy,tS,yS,Q$),(Z$.key!=null||wy&&Z$===wy.subTree)&&traverseStaticChildren(nS,Z$,!0)):Y$(nS,Z$,dS,wS,wy,tS,yS,Q$,eS)},by=(nS,Z$,dS,ES,wy,tS,yS,Q$,eS)=>{Z$.slotScopeIds=Q$,nS==null?Z$.shapeFlag&512?wy.ctx.activate(Z$,dS,ES,yS,eS):yy(Z$,dS,ES,wy,tS,yS,eS):my(nS,Z$,eS)},yy=(nS,Z$,dS,ES,wy,tS,yS)=>{const Q$=nS.component=createComponentInstance(nS,ES,wy);if(isKeepAlive(nS)&&(Q$.ctx.renderer=MS),setupComponent(Q$,!1,yS),Q$.asyncDep){if(wy&&wy.registerDep(Q$,$t,yS),!nS.el){const eS=Q$.subTree=createVNode(Comment);re(null,eS,Z$,dS)}}else $t(Q$,nS,Z$,dS,wy,tS,yS)},my=(nS,Z$,dS)=>{const ES=Z$.component=nS.component;if(shouldUpdateComponent(nS,Z$,dS))if(ES.asyncDep&&!ES.asyncResolved){K$(ES,Z$,dS);return}else ES.next=Z$,ES.update();else Z$.el=nS.el,ES.vnode=Z$},$t=(nS,Z$,dS,ES,wy,tS,yS)=>{const Q$=()=>{if(nS.isMounted){let{next:xS,bu:OS,u:mS,parent:pS,vnode:fC}=nS;{const Uye=locateNonHydratedAsyncRoot(nS);if(Uye){xS&&(xS.el=fC.el,K$(nS,xS,yS)),Uye.asyncDep.then(()=>{nS.isUnmounted||Q$()});return}}let US=xS,Iye;toggleRecurse(nS,!1),xS?(xS.el=fC.el,K$(nS,xS,yS)):xS=fC,OS&&invokeArrayFns(OS),(Iye=xS.props&&xS.props.onVnodeBeforeUpdate)&&invokeVNodeHook(Iye,pS,xS,fC),toggleRecurse(nS,!0);const $ye=renderComponentRoot(nS),Rye=nS.subTree;nS.subTree=$ye,q(Rye,$ye,C(Rye.el),bS(Rye),nS,wy,tS),xS.el=$ye.el,US===null&&updateHOCHostEl(nS,$ye.el),mS&&queuePostRenderEffect(mS,wy),(Iye=xS.props&&xS.props.onVnodeUpdated)&&queuePostRenderEffect(()=>invokeVNodeHook(Iye,pS,xS,fC),wy)}else{let xS;const{el:OS,props:mS}=Z$,{bm:pS,m:fC,parent:US,root:Iye,type:$ye}=nS,Rye=isAsyncWrapper(Z$);if(toggleRecurse(nS,!1),pS&&invokeArrayFns(pS),!Rye&&(xS=mS&&mS.onVnodeBeforeMount)&&invokeVNodeHook(xS,US,Z$),toggleRecurse(nS,!0),OS&&LS){const Uye=()=>{nS.subTree=renderComponentRoot(nS),LS(OS,nS.subTree,nS,wy,null)};Rye&&$ye.__asyncHydrate?$ye.__asyncHydrate(OS,nS,Uye):Uye()}else{Iye.ce&&Iye.ce._injectChildStyle($ye);const Uye=nS.subTree=renderComponentRoot(nS);q(null,Uye,dS,ES,nS,wy,tS),Z$.el=Uye.el}if(fC&&queuePostRenderEffect(fC,wy),!Rye&&(xS=mS&&mS.onVnodeMounted)){const Uye=Z$;queuePostRenderEffect(()=>invokeVNodeHook(xS,US,Uye),wy)}(Z$.shapeFlag&256||US&&isAsyncWrapper(US.vnode)&&US.vnode.shapeFlag&256)&&nS.a&&queuePostRenderEffect(nS.a,wy),nS.isMounted=!0,Z$=dS=ES=null}};nS.scope.on();const eS=nS.effect=new ReactiveEffect(Q$);nS.scope.off();const cS=nS.update=eS.run.bind(eS),wS=nS.job=eS.runIfDirty.bind(eS);wS.i=nS,wS.id=nS.uid,eS.scheduler=()=>queueJob(wS),toggleRecurse(nS,!0),cS()},K$=(nS,Z$,dS)=>{Z$.component=nS;const ES=nS.vnode.props;nS.vnode=Z$,nS.next=null,updateProps(nS,Z$.props,ES,dS),updateSlots(nS,Z$.children,dS),pauseTracking(),flushPreFlushCbs(nS),resetTracking()},Y$=(nS,Z$,dS,ES,wy,tS,yS,Q$,eS=!1)=>{const cS=nS&&nS.children,wS=nS?nS.shapeFlag:0,xS=Z$.children,{patchFlag:OS,shapeFlag:mS}=Z$;if(OS>0){if(OS&128){U$(cS,xS,dS,ES,wy,tS,yS,Q$,eS);return}else if(OS&256){W$(cS,xS,dS,ES,wy,tS,yS,Q$,eS);return}}mS&8?(wS&16&&lS(cS,wy,tS),xS!==cS&&x(dS,xS)):wS&16?mS&16?U$(cS,xS,dS,ES,wy,tS,yS,Q$,eS):lS(cS,wy,tS,!0):(wS&8&&x(dS,""),mS&16&&Re(xS,dS,ES,wy,tS,yS,Q$,eS))},W$=(nS,Z$,dS,ES,wy,tS,yS,Q$,eS)=>{nS=nS||EMPTY_ARR,Z$=Z$||EMPTY_ARR;const cS=nS.length,wS=Z$.length,xS=Math.min(cS,wS);let OS;for(OS=0;OS<xS;OS++){const mS=Z$[OS]=eS?cloneIfMounted(Z$[OS]):normalizeVNode(Z$[OS]);q(nS[OS],mS,dS,null,wy,tS,yS,Q$,eS)}cS>wS?lS(nS,wy,tS,!0,!1,xS):Re(Z$,dS,ES,wy,tS,yS,Q$,eS,xS)},U$=(nS,Z$,dS,ES,wy,tS,yS,Q$,eS)=>{let cS=0;const wS=Z$.length;let xS=nS.length-1,OS=wS-1;for(;cS<=xS&&cS<=OS;){const mS=nS[cS],pS=Z$[cS]=eS?cloneIfMounted(Z$[cS]):normalizeVNode(Z$[cS]);if(isSameVNodeType(mS,pS))q(mS,pS,dS,null,wy,tS,yS,Q$,eS);else break;cS++}for(;cS<=xS&&cS<=OS;){const mS=nS[xS],pS=Z$[OS]=eS?cloneIfMounted(Z$[OS]):normalizeVNode(Z$[OS]);if(isSameVNodeType(mS,pS))q(mS,pS,dS,null,wy,tS,yS,Q$,eS);else break;xS--,OS--}if(cS>xS){if(cS<=OS){const mS=OS+1,pS=mS<wS?Z$[mS].el:ES;for(;cS<=OS;)q(null,Z$[cS]=eS?cloneIfMounted(Z$[cS]):normalizeVNode(Z$[cS]),dS,pS,wy,tS,yS,Q$,eS),cS++}}else if(cS>OS)for(;cS<=xS;)G$(nS[cS],wy,tS,!0),cS++;else{const mS=cS,pS=cS,fC=new Map;for(cS=pS;cS<=OS;cS++){const Aye=Z$[cS]=eS?cloneIfMounted(Z$[cS]):normalizeVNode(Z$[cS]);Aye.key!=null&&fC.set(Aye.key,cS)}let US,Iye=0;const $ye=OS-pS+1;let Rye=!1,Uye=0;const DS=new Array($ye);for(cS=0;cS<$ye;cS++)DS[cS]=0;for(cS=mS;cS<=xS;cS++){const Aye=nS[cS];if(Iye>=$ye){G$(Aye,wy,tS,!0);continue}let Tye;if(Aye.key!=null)Tye=fC.get(Aye.key);else for(US=pS;US<=OS;US++)if(DS[US-pS]===0&&isSameVNodeType(Aye,Z$[US])){Tye=US;break}Tye===void 0?G$(Aye,wy,tS,!0):(DS[Tye-pS]=cS+1,Tye>=Uye?Uye=Tye:Rye=!0,q(Aye,Z$[Tye],dS,null,wy,tS,yS,Q$,eS),Iye++)}const HS=Rye?getSequence(DS):EMPTY_ARR;for(US=HS.length-1,cS=$ye-1;cS>=0;cS--){const Aye=pS+cS,Tye=Z$[Aye],jye=Aye+1<wS?Z$[Aye+1].el:ES;DS[cS]===0?q(null,Tye,dS,jye,wy,tS,yS,Q$,eS):Rye&&(US<0||cS!==HS[US]?hy(Tye,dS,jye,2):US--)}}},hy=(nS,Z$,dS,ES,wy=null)=>{const{el:tS,type:yS,transition:Q$,children:eS,shapeFlag:cS}=nS;if(cS&6){hy(nS.component.subTree,Z$,dS,ES);return}if(cS&128){nS.suspense.move(Z$,dS,ES);return}if(cS&64){yS.move(nS,Z$,dS,MS);return}if(yS===Fragment$1){d(tS,Z$,dS);for(let xS=0;xS<eS.length;xS++)hy(eS[xS],Z$,dS,ES);d(nS.anchor,Z$,dS);return}if(yS===Static){de(nS,Z$,dS);return}if(ES!==2&&cS&1&&Q$)if(ES===0)Q$.beforeEnter(tS),d(tS,Z$,dS),queuePostRenderEffect(()=>Q$.enter(tS),wy);else{const{leave:xS,delayLeave:OS,afterLeave:mS}=Q$,pS=()=>d(tS,Z$,dS),fC=()=>{xS(tS,()=>{pS(),mS&&mS()})};OS?OS(tS,pS,fC):fC()}else d(tS,Z$,dS)},G$=(nS,Z$,dS,ES=!1,wy=!1)=>{const{type:tS,props:yS,ref:Q$,children:eS,dynamicChildren:cS,shapeFlag:wS,patchFlag:xS,dirs:OS,cacheIndex:mS}=nS;if(xS===-2&&(wy=!1),Q$!=null&&setRef(Q$,null,dS,nS,!0),mS!=null&&(Z$.renderCache[mS]=void 0),wS&256){Z$.ctx.deactivate(nS);return}const pS=wS&1&&OS,fC=!isAsyncWrapper(nS);let US;if(fC&&(US=yS&&yS.onVnodeBeforeUnmount)&&invokeVNodeHook(US,Z$,nS),wS&6)rS(nS.component,dS,ES);else{if(wS&128){nS.suspense.unmount(dS,ES);return}pS&&invokeDirectiveHook(nS,null,Z$,"beforeUnmount"),wS&64?nS.type.remove(nS,Z$,dS,MS,ES):cS&&!cS.hasOnce&&(tS!==Fragment$1||xS>0&&xS&64)?lS(cS,Z$,dS,!1,!0):(tS===Fragment$1&&xS&384||!wy&&wS&16)&&lS(eS,Z$,dS),ES&&ky(nS)}(fC&&(US=yS&&yS.onVnodeUnmounted)||pS)&&queuePostRenderEffect(()=>{US&&invokeVNodeHook(US,Z$,nS),pS&&invokeDirectiveHook(nS,null,Z$,"unmounted")},dS)},ky=nS=>{const{type:Z$,el:dS,anchor:ES,transition:wy}=nS;if(Z$===Fragment$1){$y(dS,ES);return}if(Z$===Static){he(nS);return}const tS=()=>{f(dS),wy&&!wy.persisted&&wy.afterLeave&&wy.afterLeave()};if(nS.shapeFlag&1&&wy&&!wy.persisted){const{leave:yS,delayLeave:Q$}=wy,eS=()=>yS(dS,tS);Q$?Q$(nS.el,tS,eS):eS()}else tS()},$y=(nS,Z$)=>{let dS;for(;nS!==Z$;)dS=E(nS),f(nS),nS=dS;f(Z$)},rS=(nS,Z$,dS)=>{const{bum:ES,scope:wy,job:tS,subTree:yS,um:Q$,m:eS,a:cS}=nS;invalidateMount(eS),invalidateMount(cS),ES&&invokeArrayFns(ES),wy.stop(),tS&&(tS.flags|=8,G$(yS,nS,Z$,dS)),Q$&&queuePostRenderEffect(Q$,Z$),queuePostRenderEffect(()=>{nS.isUnmounted=!0},Z$),Z$&&Z$.pendingBranch&&!Z$.isUnmounted&&nS.asyncDep&&!nS.asyncResolved&&nS.suspenseId===Z$.pendingId&&(Z$.deps--,Z$.deps===0&&Z$.resolve())},lS=(nS,Z$,dS,ES=!1,wy=!1,tS=0)=>{for(let yS=tS;yS<nS.length;yS++)G$(nS[yS],Z$,dS,ES,wy)},bS=nS=>{if(nS.shapeFlag&6)return bS(nS.component.subTree);if(nS.shapeFlag&128)return nS.suspense.next();const Z$=E(nS.anchor||nS.el),dS=Z$&&Z$[TeleportEndKey];return dS?E(dS):Z$};let IS=!1;const BS=(nS,Z$,dS)=>{nS==null?Z$._vnode&&G$(Z$._vnode,null,null,!0):q(Z$._vnode||null,nS,Z$,null,null,null,dS),Z$._vnode=nS,IS||(IS=!0,flushPreFlushCbs(),flushPostFlushCbs(),IS=!1)},MS={p:q,um:G$,m:hy,r:ky,mt:yy,mc:Re,pc:Y$,pbc:Ke,n:bS,o:s};let zS,LS;return{render:BS,hydrate:zS,createApp:createAppAPI(BS,zS)}}function resolveChildrenNamespace({type:s,props:l},c){return c==="svg"&&s==="foreignObject"||c==="mathml"&&s==="annotation-xml"&&l&&l.encoding&&l.encoding.includes("html")?void 0:c}function toggleRecurse({effect:s,job:l},c){c?(s.flags|=32,l.flags|=4):(s.flags&=-33,l.flags&=-5)}function needTransition(s,l){return(!s||s&&!s.pendingBranch)&&l&&!l.persisted}function traverseStaticChildren(s,l,c=!1){const d=s.children,f=l.children;if(isArray$4(d)&&isArray$4(f))for(let g=0;g<d.length;g++){const v=d[g];let b=f[g];b.shapeFlag&1&&!b.dynamicChildren&&((b.patchFlag<=0||b.patchFlag===32)&&(b=f[g]=cloneIfMounted(f[g]),b.el=v.el),!c&&b.patchFlag!==-2&&traverseStaticChildren(v,b)),b.type===Text$3&&(b.el=v.el)}}function getSequence(s){const l=s.slice(),c=[0];let d,f,g,v,b;const $=s.length;for(d=0;d<$;d++){const y=s[d];if(y!==0){if(f=c[c.length-1],s[f]<y){l[d]=f,c.push(d);continue}for(g=0,v=c.length-1;g<v;)b=g+v>>1,s[c[b]]<y?g=b+1:v=b;y<s[c[g]]&&(g>0&&(l[d]=c[g-1]),c[g]=d)}}for(g=c.length,v=c[g-1];g-- >0;)c[g]=v,v=l[v];return c}function locateNonHydratedAsyncRoot(s){const l=s.subTree.component;if(l)return l.asyncDep&&!l.asyncResolved?l:locateNonHydratedAsyncRoot(l)}function invalidateMount(s){if(s)for(let l=0;l<s.length;l++)s[l].flags|=8}const ssrContextKey=Symbol.for("v-scx"),useSSRContext=()=>inject(ssrContextKey);function watchEffect(s,l){return doWatch(s,null,l)}function watch(s,l,c){return doWatch(s,l,c)}function doWatch(s,l,c=EMPTY_OBJ){const{immediate:d,deep:f,flush:g,once:v}=c,b=extend$3({},c);let $;if(isInSSRComponentSetup)if(g==="sync"){const E=useSSRContext();$=E.__watcherHandles||(E.__watcherHandles=[])}else if(!l||d)b.once=!0;else{const E=()=>{};return E.stop=NOOP,E.resume=NOOP,E.pause=NOOP,E}const y=currentInstance;b.call=(E,N,W)=>callWithAsyncErrorHandling(E,y,N,W);let x=!1;g==="post"?b.scheduler=E=>{queuePostRenderEffect(E,y&&y.suspense)}:g!=="sync"&&(x=!0,b.scheduler=(E,N)=>{N?E():queueJob(E)}),b.augmentJob=E=>{l&&(E.flags|=4),x&&(E.flags|=2,y&&(E.id=y.uid,E.i=y))};const C=watch$1(s,l,b);return $&&$.push(C),C}function instanceWatch(s,l,c){const d=this.proxy,f=isString$4(s)?s.includes(".")?createPathGetter(d,s):()=>d[s]:s.bind(d,d);let g;isFunction$6(l)?g=l:(g=l.handler,c=l);const v=setCurrentInstance(this),b=doWatch(f,g.bind(d),c);return v(),b}function createPathGetter(s,l){const c=l.split(".");return()=>{let d=s;for(let f=0;f<c.length&&d;f++)d=d[c[f]];return d}}const getModelModifiers=(s,l)=>l==="modelValue"||l==="model-value"?s.modelModifiers:s[`${l}Modifiers`]||s[`${camelize(l)}Modifiers`]||s[`${hyphenate$1(l)}Modifiers`];function emit(s,l,...c){if(s.isUnmounted)return;const d=s.vnode.props||EMPTY_OBJ;let f=c;const g=l.startsWith("update:"),v=g&&getModelModifiers(d,l.slice(7));v&&(v.trim&&(f=c.map(x=>isString$4(x)?x.trim():x)),v.number&&(f=c.map(looseToNumber)));let b,$=d[b=toHandlerKey(l)]||d[b=toHandlerKey(camelize(l))];!$&&g&&($=d[b=toHandlerKey(hyphenate$1(l))]),$&&callWithAsyncErrorHandling($,s,6,f);const y=d[b+"Once"];if(y){if(!s.emitted)s.emitted={};else if(s.emitted[b])return;s.emitted[b]=!0,callWithAsyncErrorHandling(y,s,6,f)}}function normalizeEmitsOptions(s,l,c=!1){const d=l.emitsCache,f=d.get(s);if(f!==void 0)return f;const g=s.emits;let v={},b=!1;if(!isFunction$6(s)){const $=y=>{const x=normalizeEmitsOptions(y,l,!0);x&&(b=!0,extend$3(v,x))};!c&&l.mixins.length&&l.mixins.forEach($),s.extends&&$(s.extends),s.mixins&&s.mixins.forEach($)}return!g&&!b?(isObject$8(s)&&d.set(s,null),null):(isArray$4(g)?g.forEach($=>v[$]=null):extend$3(v,g),isObject$8(s)&&d.set(s,v),v)}function isEmitListener(s,l){return!s||!isOn(l)?!1:(l=l.slice(2).replace(/Once$/,""),hasOwn$2(s,l[0].toLowerCase()+l.slice(1))||hasOwn$2(s,hyphenate$1(l))||hasOwn$2(s,l))}function markAttrsAccessed(){}function renderComponentRoot(s){const{type:l,vnode:c,proxy:d,withProxy:f,propsOptions:[g],slots:v,attrs:b,emit:$,render:y,renderCache:x,props:C,data:E,setupState:N,ctx:W,inheritAttrs:q}=s,Y=setCurrentRenderingInstance(s);let re,se;try{if(c.shapeFlag&4){const he=f||d,ge=he;re=normalizeVNode(y.call(ge,he,x,C,N,E,W)),se=b}else{const he=l;re=normalizeVNode(he.length>1?he(C,{attrs:b,slots:v,emit:$}):he(C,null)),se=l.props?b:getFunctionalFallthrough(b)}}catch(he){blockStack.length=0,handleError$1(he,s,1),re=createVNode(Comment)}let de=re;if(se&&q!==!1){const he=Object.keys(se),{shapeFlag:ge}=de;he.length&&ge&7&&(g&&he.some(isModelListener)&&(se=filterModelListeners(se,g)),de=cloneVNode(de,se,!1,!0))}return c.dirs&&(de=cloneVNode(de,null,!1,!0),de.dirs=de.dirs?de.dirs.concat(c.dirs):c.dirs),c.transition&&setTransitionHooks(de,c.transition),re=de,setCurrentRenderingInstance(Y),re}const getFunctionalFallthrough=s=>{let l;for(const c in s)(c==="class"||c==="style"||isOn(c))&&((l||(l={}))[c]=s[c]);return l},filterModelListeners=(s,l)=>{const c={};for(const d in s)(!isModelListener(d)||!(d.slice(9)in l))&&(c[d]=s[d]);return c};function shouldUpdateComponent(s,l,c){const{props:d,children:f,component:g}=s,{props:v,children:b,patchFlag:$}=l,y=g.emitsOptions;if(l.dirs||l.transition)return!0;if(c&&$>=0){if($&1024)return!0;if($&16)return d?hasPropsChanged(d,v,y):!!v;if($&8){const x=l.dynamicProps;for(let C=0;C<x.length;C++){const E=x[C];if(v[E]!==d[E]&&!isEmitListener(y,E))return!0}}}else return(f||b)&&(!b||!b.$stable)?!0:d===v?!1:d?v?hasPropsChanged(d,v,y):!0:!!v;return!1}function hasPropsChanged(s,l,c){const d=Object.keys(l);if(d.length!==Object.keys(s).length)return!0;for(let f=0;f<d.length;f++){const g=d[f];if(l[g]!==s[g]&&!isEmitListener(c,g))return!0}return!1}function updateHOCHostEl({vnode:s,parent:l},c){for(;l;){const d=l.subTree;if(d.suspense&&d.suspense.activeBranch===s&&(d.el=s.el),d===s)(s=l.vnode).el=c,l=l.parent;else break}}const isSuspense=s=>s.__isSuspense;function queueEffectWithSuspense(s,l){l&&l.pendingBranch?isArray$4(s)?l.effects.push(...s):l.effects.push(s):queuePostFlushCb(s)}const Fragment$1=Symbol.for("v-fgt"),Text$3=Symbol.for("v-txt"),Comment=Symbol.for("v-cmt"),Static=Symbol.for("v-stc"),blockStack=[];let currentBlock=null;function openBlock(s=!1){blockStack.push(currentBlock=s?null:[])}function closeBlock(){blockStack.pop(),currentBlock=blockStack[blockStack.length-1]||null}let isBlockTreeEnabled=1;function setBlockTracking(s){isBlockTreeEnabled+=s,s<0&&currentBlock&&(currentBlock.hasOnce=!0)}function setupBlock(s){return s.dynamicChildren=isBlockTreeEnabled>0?currentBlock||EMPTY_ARR:null,closeBlock(),isBlockTreeEnabled>0&&currentBlock&&currentBlock.push(s),s}function createElementBlock(s,l,c,d,f,g){return setupBlock(createBaseVNode(s,l,c,d,f,g,!0))}function createBlock(s,l,c,d,f){return setupBlock(createVNode(s,l,c,d,f,!0))}function isVNode$1(s){return s?s.__v_isVNode===!0:!1}function isSameVNodeType(s,l){return s.type===l.type&&s.key===l.key}const normalizeKey=({key:s})=>s??null,normalizeRef=({ref:s,ref_key:l,ref_for:c})=>(typeof s=="number"&&(s=""+s),s!=null?isString$4(s)||isRef(s)||isFunction$6(s)?{i:currentRenderingInstance,r:s,k:l,f:!!c}:s:null);function createBaseVNode(s,l=null,c=null,d=0,f=null,g=s===Fragment$1?0:1,v=!1,b=!1){const $={__v_isVNode:!0,__v_skip:!0,type:s,props:l,key:l&&normalizeKey(l),ref:l&&normalizeRef(l),scopeId:currentScopeId,slotScopeIds:null,children:c,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:g,patchFlag:d,dynamicProps:f,dynamicChildren:null,appContext:null,ctx:currentRenderingInstance};return b?(normalizeChildren($,c),g&128&&s.normalize($)):c&&($.shapeFlag|=isString$4(c)?8:16),isBlockTreeEnabled>0&&!v&&currentBlock&&($.patchFlag>0||g&6)&&$.patchFlag!==32&&currentBlock.push($),$}const createVNode=_createVNode;function _createVNode(s,l=null,c=null,d=0,f=null,g=!1){if((!s||s===NULL_DYNAMIC_COMPONENT)&&(s=Comment),isVNode$1(s)){const b=cloneVNode(s,l,!0);return c&&normalizeChildren(b,c),isBlockTreeEnabled>0&&!g&&currentBlock&&(b.shapeFlag&6?currentBlock[currentBlock.indexOf(s)]=b:currentBlock.push(b)),b.patchFlag=-2,b}if(isClassComponent(s)&&(s=s.__vccOpts),l){l=guardReactiveProps(l);let{class:b,style:$}=l;b&&!isString$4(b)&&(l.class=normalizeClass(b)),isObject$8($)&&(isProxy($)&&!isArray$4($)&&($=extend$3({},$)),l.style=normalizeStyle($))}const v=isString$4(s)?1:isSuspense(s)?128:isTeleport(s)?64:isObject$8(s)?4:isFunction$6(s)?2:0;return createBaseVNode(s,l,c,d,f,v,g,!0)}function guardReactiveProps(s){return s?isProxy(s)||isInternalObject(s)?extend$3({},s):s:null}function cloneVNode(s,l,c=!1,d=!1){const{props:f,ref:g,patchFlag:v,children:b,transition:$}=s,y=l?mergeProps(f||{},l):f,x={__v_isVNode:!0,__v_skip:!0,type:s.type,props:y,key:y&&normalizeKey(y),ref:l&&l.ref?c&&g?isArray$4(g)?g.concat(normalizeRef(l)):[g,normalizeRef(l)]:normalizeRef(l):g,scopeId:s.scopeId,slotScopeIds:s.slotScopeIds,children:b,target:s.target,targetStart:s.targetStart,targetAnchor:s.targetAnchor,staticCount:s.staticCount,shapeFlag:s.shapeFlag,patchFlag:l&&s.type!==Fragment$1?v===-1?16:v|16:v,dynamicProps:s.dynamicProps,dynamicChildren:s.dynamicChildren,appContext:s.appContext,dirs:s.dirs,transition:$,component:s.component,suspense:s.suspense,ssContent:s.ssContent&&cloneVNode(s.ssContent),ssFallback:s.ssFallback&&cloneVNode(s.ssFallback),el:s.el,anchor:s.anchor,ctx:s.ctx,ce:s.ce};return $&&d&&setTransitionHooks(x,$.clone(x)),x}function createTextVNode(s=" ",l=0){return createVNode(Text$3,null,s,l)}function createCommentVNode(s="",l=!1){return l?(openBlock(),createBlock(Comment,null,s)):createVNode(Comment,null,s)}function normalizeVNode(s){return s==null||typeof s=="boolean"?createVNode(Comment):isArray$4(s)?createVNode(Fragment$1,null,s.slice()):isVNode$1(s)?cloneIfMounted(s):createVNode(Text$3,null,String(s))}function cloneIfMounted(s){return s.el===null&&s.patchFlag!==-1||s.memo?s:cloneVNode(s)}function normalizeChildren(s,l){let c=0;const{shapeFlag:d}=s;if(l==null)l=null;else if(isArray$4(l))c=16;else if(typeof l=="object")if(d&65){const f=l.default;f&&(f._c&&(f._d=!1),normalizeChildren(s,f()),f._c&&(f._d=!0));return}else{c=32;const f=l._;!f&&!isInternalObject(l)?l._ctx=currentRenderingInstance:f===3&&currentRenderingInstance&&(currentRenderingInstance.slots._===1?l._=1:(l._=2,s.patchFlag|=1024))}else isFunction$6(l)?(l={default:l,_ctx:currentRenderingInstance},c=32):(l=String(l),d&64?(c=16,l=[createTextVNode(l)]):c=8);s.children=l,s.shapeFlag|=c}function mergeProps(...s){const l={};for(let c=0;c<s.length;c++){const d=s[c];for(const f in d)if(f==="class")l.class!==d.class&&(l.class=normalizeClass([l.class,d.class]));else if(f==="style")l.style=normalizeStyle([l.style,d.style]);else if(isOn(f)){const g=l[f],v=d[f];v&&g!==v&&!(isArray$4(g)&&g.includes(v))&&(l[f]=g?[].concat(g,v):v)}else f!==""&&(l[f]=d[f])}return l}function invokeVNodeHook(s,l,c,d=null){callWithAsyncErrorHandling(s,l,7,[c,d])}const emptyAppContext=createAppContext();let uid=0;function createComponentInstance(s,l,c){const d=s.type,f=(l?l.appContext:s.appContext)||emptyAppContext,g={uid:uid++,vnode:s,type:d,parent:l,appContext:f,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new EffectScope(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:l?l.provides:Object.create(f.provides),ids:l?l.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:normalizePropsOptions(d,f),emitsOptions:normalizeEmitsOptions(d,f),emit:null,emitted:null,propsDefaults:EMPTY_OBJ,inheritAttrs:d.inheritAttrs,ctx:EMPTY_OBJ,data:EMPTY_OBJ,props:EMPTY_OBJ,attrs:EMPTY_OBJ,slots:EMPTY_OBJ,refs:EMPTY_OBJ,setupState:EMPTY_OBJ,setupContext:null,suspense:c,suspenseId:c?c.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return g.ctx={_:g},g.root=l?l.root:g,g.emit=emit.bind(null,g),s.ce&&s.ce(g),g}let currentInstance=null;const getCurrentInstance=()=>currentInstance||currentRenderingInstance;let internalSetCurrentInstance,setInSSRSetupState;{const s=getGlobalThis$1(),l=(c,d)=>{let f;return(f=s[c])||(f=s[c]=[]),f.push(d),g=>{f.length>1?f.forEach(v=>v(g)):f[0](g)}};internalSetCurrentInstance=l("__VUE_INSTANCE_SETTERS__",c=>currentInstance=c),setInSSRSetupState=l("__VUE_SSR_SETTERS__",c=>isInSSRComponentSetup=c)}const setCurrentInstance=s=>{const l=currentInstance;return internalSetCurrentInstance(s),s.scope.on(),()=>{s.scope.off(),internalSetCurrentInstance(l)}},unsetCurrentInstance=()=>{currentInstance&&currentInstance.scope.off(),internalSetCurrentInstance(null)};function isStatefulComponent(s){return s.vnode.shapeFlag&4}let isInSSRComponentSetup=!1;function setupComponent(s,l=!1,c=!1){l&&setInSSRSetupState(l);const{props:d,children:f}=s.vnode,g=isStatefulComponent(s);initProps(s,d,g,l),initSlots(s,f,c);const v=g?setupStatefulComponent(s,l):void 0;return l&&setInSSRSetupState(!1),v}function setupStatefulComponent(s,l){const c=s.type;s.accessCache=Object.create(null),s.proxy=new Proxy(s.ctx,PublicInstanceProxyHandlers);const{setup:d}=c;if(d){const f=s.setupContext=d.length>1?createSetupContext(s):null,g=setCurrentInstance(s);pauseTracking();const v=callWithErrorHandling(d,s,0,[s.props,f]);if(resetTracking(),g(),isPromise$2(v)){if(isAsyncWrapper(s)||markAsyncBoundary(s),v.then(unsetCurrentInstance,unsetCurrentInstance),l)return v.then(b=>{handleSetupResult(s,b,l)}).catch(b=>{handleError$1(b,s,0)});s.asyncDep=v}else handleSetupResult(s,v,l)}else finishComponentSetup(s,l)}function handleSetupResult(s,l,c){isFunction$6(l)?s.type.__ssrInlineRender?s.ssrRender=l:s.render=l:isObject$8(l)&&(s.setupState=proxyRefs(l)),finishComponentSetup(s,c)}let compile$2;function finishComponentSetup(s,l,c){const d=s.type;if(!s.render){if(!l&&compile$2&&!d.render){const f=d.template||resolveMergedOptions(s).template;if(f){const{isCustomElement:g,compilerOptions:v}=s.appContext.config,{delimiters:b,compilerOptions:$}=d,y=extend$3(extend$3({isCustomElement:g,delimiters:b},v),$);d.render=compile$2(f,y)}}s.render=d.render||NOOP}{const f=setCurrentInstance(s);pauseTracking();try{applyOptions(s)}finally{resetTracking(),f()}}}const attrsProxyHandlers={get(s,l){return track(s,"get",""),s[l]}};function createSetupContext(s){const l=c=>{s.exposed=c||{}};return{attrs:new Proxy(s.attrs,attrsProxyHandlers),slots:s.slots,emit:s.emit,expose:l}}function getComponentPublicInstance(s){return s.exposed?s.exposeProxy||(s.exposeProxy=new Proxy(proxyRefs(markRaw(s.exposed)),{get(l,c){if(c in l)return l[c];if(c in publicPropertiesMap)return publicPropertiesMap[c](s)},has(l,c){return c in l||c in publicPropertiesMap}})):s.proxy}const classifyRE=/(?:^|[-_])(\w)/g,classify=s=>s.replace(classifyRE,l=>l.toUpperCase()).replace(/[-_]/g,"");function getComponentName(s,l=!0){return isFunction$6(s)?s.displayName||s.name:s.name||l&&s.__name}function formatComponentName(s,l,c=!1){let d=getComponentName(l);if(!d&&l.__file){const f=l.__file.match(/([^/\\]+)\.\w+$/);f&&(d=f[1])}if(!d&&s&&s.parent){const f=g=>{for(const v in g)if(g[v]===l)return v};d=f(s.components||s.parent.type.components)||f(s.appContext.components)}return d?classify(d):c?"App":"Anonymous"}function isClassComponent(s){return isFunction$6(s)&&"__vccOpts"in s}const computed=(s,l)=>computed$1(s,l,isInSSRComponentSetup);function h(s,l,c){const d=arguments.length;return d===2?isObject$8(l)&&!isArray$4(l)?isVNode$1(l)?createVNode(s,null,[l]):createVNode(s,l):createVNode(s,null,l):(d>3?c=Array.prototype.slice.call(arguments,2):d===3&&isVNode$1(c)&&(c=[c]),createVNode(s,l,c))}const version$1="3.5.11";/**
* @vue/runtime-dom v3.5.11
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let policy;const tt$4=typeof window<"u"&&window.trustedTypes;if(tt$4)try{policy=tt$4.createPolicy("vue",{createHTML:s=>s})}catch{}const unsafeToTrustedHTML=policy?s=>policy.createHTML(s):s=>s,svgNS="http://www.w3.org/2000/svg",mathmlNS="http://www.w3.org/1998/Math/MathML",doc$2=typeof document<"u"?document:null,templateContainer=doc$2&&doc$2.createElement("template"),nodeOps={insert:(s,l,c)=>{l.insertBefore(s,c||null)},remove:s=>{const l=s.parentNode;l&&l.removeChild(s)},createElement:(s,l,c,d)=>{const f=l==="svg"?doc$2.createElementNS(svgNS,s):l==="mathml"?doc$2.createElementNS(mathmlNS,s):c?doc$2.createElement(s,{is:c}):doc$2.createElement(s);return s==="select"&&d&&d.multiple!=null&&f.setAttribute("multiple",d.multiple),f},createText:s=>doc$2.createTextNode(s),createComment:s=>doc$2.createComment(s),setText:(s,l)=>{s.nodeValue=l},setElementText:(s,l)=>{s.textContent=l},parentNode:s=>s.parentNode,nextSibling:s=>s.nextSibling,querySelector:s=>doc$2.querySelector(s),setScopeId(s,l){s.setAttribute(l,"")},insertStaticContent(s,l,c,d,f,g){const v=c?c.previousSibling:l.lastChild;if(f&&(f===g||f.nextSibling))for(;l.insertBefore(f.cloneNode(!0),c),!(f===g||!(f=f.nextSibling)););else{templateContainer.innerHTML=unsafeToTrustedHTML(d==="svg"?`<svg>${s}</svg>`:d==="mathml"?`<math>${s}</math>`:s);const b=templateContainer.content;if(d==="svg"||d==="mathml"){const $=b.firstChild;for(;$.firstChild;)b.appendChild($.firstChild);b.removeChild($)}l.insertBefore(b,c)}return[v?v.nextSibling:l.firstChild,c?c.previousSibling:l.lastChild]}},TRANSITION="transition",ANIMATION="animation",vtcKey=Symbol("_vtc"),DOMTransitionPropsValidators={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},TransitionPropsValidators=extend$3({},BaseTransitionPropsValidators,DOMTransitionPropsValidators),decorate$1=s=>(s.displayName="Transition",s.props=TransitionPropsValidators,s),Transition$1=decorate$1((s,{slots:l})=>h(BaseTransition,resolveTransitionProps(s),l)),callHook=(s,l=[])=>{isArray$4(s)?s.forEach(c=>c(...l)):s&&s(...l)},hasExplicitCallback=s=>s?isArray$4(s)?s.some(l=>l.length>1):s.length>1:!1;function resolveTransitionProps(s){const l={};for(const _y in s)_y in DOMTransitionPropsValidators||(l[_y]=s[_y]);if(s.css===!1)return l;const{name:c="v",type:d,duration:f,enterFromClass:g=`${c}-enter-from`,enterActiveClass:v=`${c}-enter-active`,enterToClass:b=`${c}-enter-to`,appearFromClass:$=g,appearActiveClass:y=v,appearToClass:x=b,leaveFromClass:C=`${c}-leave-from`,leaveActiveClass:E=`${c}-leave-active`,leaveToClass:N=`${c}-leave-to`}=s,W=normalizeDuration(f),q=W&&W[0],Y=W&&W[1],{onBeforeEnter:re,onEnter:se,onEnterCancelled:de,onLeave:he,onLeaveCancelled:ge,onBeforeAppear:Se=re,onAppear:Ae=se,onAppearCancelled:Re=de}=l,Be=(_y,by,yy)=>{removeTransitionClass(_y,by?x:b),removeTransitionClass(_y,by?y:v),yy&&yy()},Ke=(_y,by)=>{_y._isLeaving=!1,removeTransitionClass(_y,C),removeTransitionClass(_y,N),removeTransitionClass(_y,E),by&&by()},Lr=_y=>(by,yy)=>{const my=_y?Ae:se,$t=()=>Be(by,_y,yy);callHook(my,[by,$t]),nextFrame(()=>{removeTransitionClass(by,_y?$:g),addTransitionClass(by,_y?x:b),hasExplicitCallback(my)||whenTransitionEnds(by,d,q,$t)})};return extend$3(l,{onBeforeEnter(_y){callHook(re,[_y]),addTransitionClass(_y,g),addTransitionClass(_y,v)},onBeforeAppear(_y){callHook(Se,[_y]),addTransitionClass(_y,$),addTransitionClass(_y,y)},onEnter:Lr(!1),onAppear:Lr(!0),onLeave(_y,by){_y._isLeaving=!0;const yy=()=>Ke(_y,by);addTransitionClass(_y,C),addTransitionClass(_y,E),forceReflow(),nextFrame(()=>{_y._isLeaving&&(removeTransitionClass(_y,C),addTransitionClass(_y,N),hasExplicitCallback(he)||whenTransitionEnds(_y,d,Y,yy))}),callHook(he,[_y,yy])},onEnterCancelled(_y){Be(_y,!1),callHook(de,[_y])},onAppearCancelled(_y){Be(_y,!0),callHook(Re,[_y])},onLeaveCancelled(_y){Ke(_y),callHook(ge,[_y])}})}function normalizeDuration(s){if(s==null)return null;if(isObject$8(s))return[NumberOf(s.enter),NumberOf(s.leave)];{const l=NumberOf(s);return[l,l]}}function NumberOf(s){return toNumber(s)}function addTransitionClass(s,l){l.split(/\s+/).forEach(c=>c&&s.classList.add(c)),(s[vtcKey]||(s[vtcKey]=new Set)).add(l)}function removeTransitionClass(s,l){l.split(/\s+/).forEach(d=>d&&s.classList.remove(d));const c=s[vtcKey];c&&(c.delete(l),c.size||(s[vtcKey]=void 0))}function nextFrame(s){requestAnimationFrame(()=>{requestAnimationFrame(s)})}let endId=0;function whenTransitionEnds(s,l,c,d){const f=s._endId=++endId,g=()=>{f===s._endId&&d()};if(c!=null)return setTimeout(g,c);const{type:v,timeout:b,propCount:$}=getTransitionInfo(s,l);if(!v)return d();const y=v+"end";let x=0;const C=()=>{s.removeEventListener(y,E),g()},E=N=>{N.target===s&&++x>=$&&C()};setTimeout(()=>{x<$&&C()},b+1),s.addEventListener(y,E)}function getTransitionInfo(s,l){const c=window.getComputedStyle(s),d=W=>(c[W]||"").split(", "),f=d(`${TRANSITION}Delay`),g=d(`${TRANSITION}Duration`),v=getTimeout(f,g),b=d(`${ANIMATION}Delay`),$=d(`${ANIMATION}Duration`),y=getTimeout(b,$);let x=null,C=0,E=0;l===TRANSITION?v>0&&(x=TRANSITION,C=v,E=g.length):l===ANIMATION?y>0&&(x=ANIMATION,C=y,E=$.length):(C=Math.max(v,y),x=C>0?v>y?TRANSITION:ANIMATION:null,E=x?x===TRANSITION?g.length:$.length:0);const N=x===TRANSITION&&/\b(transform|all)(,|$)/.test(d(`${TRANSITION}Property`).toString());return{type:x,timeout:C,propCount:E,hasTransform:N}}function getTimeout(s,l){for(;s.length<l.length;)s=s.concat(s);return Math.max(...l.map((c,d)=>toMs(c)+toMs(s[d])))}function toMs(s){return s==="auto"?0:Number(s.slice(0,-1).replace(",","."))*1e3}function forceReflow(){return document.body.offsetHeight}function patchClass(s,l,c){const d=s[vtcKey];d&&(l=(l?[l,...d]:[...d]).join(" ")),l==null?s.removeAttribute("class"):c?s.setAttribute("class",l):s.className=l}const vShowOriginalDisplay=Symbol("_vod"),vShowHidden=Symbol("_vsh"),vShow={beforeMount(s,{value:l},{transition:c}){s[vShowOriginalDisplay]=s.style.display==="none"?"":s.style.display,c&&l?c.beforeEnter(s):setDisplay(s,l)},mounted(s,{value:l},{transition:c}){c&&l&&c.enter(s)},updated(s,{value:l,oldValue:c},{transition:d}){!l!=!c&&(d?l?(d.beforeEnter(s),setDisplay(s,!0),d.enter(s)):d.leave(s,()=>{setDisplay(s,!1)}):setDisplay(s,l))},beforeUnmount(s,{value:l}){setDisplay(s,l)}};function setDisplay(s,l){s.style.display=l?s[vShowOriginalDisplay]:"none",s[vShowHidden]=!l}const CSS_VAR_TEXT=Symbol(""),displayRE=/(^|;)\s*display\s*:/;function patchStyle(s,l,c){const d=s.style,f=isString$4(c);let g=!1;if(c&&!f){if(l)if(isString$4(l))for(const v of l.split(";")){const b=v.slice(0,v.indexOf(":")).trim();c[b]==null&&setStyle(d,b,"")}else for(const v in l)c[v]==null&&setStyle(d,v,"");for(const v in c)v==="display"&&(g=!0),setStyle(d,v,c[v])}else if(f){if(l!==c){const v=d[CSS_VAR_TEXT];v&&(c+=";"+v),d.cssText=c,g=displayRE.test(c)}}else l&&s.removeAttribute("style");vShowOriginalDisplay in s&&(s[vShowOriginalDisplay]=g?d.display:"",s[vShowHidden]&&(d.display="none"))}const importantRE=/\s*!important$/;function setStyle(s,l,c){if(isArray$4(c))c.forEach(d=>setStyle(s,l,d));else if(c==null&&(c=""),l.startsWith("--"))s.setProperty(l,c);else{const d=autoPrefix(s,l);importantRE.test(c)?s.setProperty(hyphenate$1(d),c.replace(importantRE,""),"important"):s[d]=c}}const prefixes=["Webkit","Moz","ms"],prefixCache={};function autoPrefix(s,l){const c=prefixCache[l];if(c)return c;let d=camelize(l);if(d!=="filter"&&d in s)return prefixCache[l]=d;d=capitalize$1(d);for(let f=0;f<prefixes.length;f++){const g=prefixes[f]+d;if(g in s)return prefixCache[l]=g}return l}const xlinkNS="http://www.w3.org/1999/xlink";function patchAttr(s,l,c,d,f,g=isSpecialBooleanAttr(l)){d&&l.startsWith("xlink:")?c==null?s.removeAttributeNS(xlinkNS,l.slice(6,l.length)):s.setAttributeNS(xlinkNS,l,c):c==null||g&&!includeBooleanAttr(c)?s.removeAttribute(l):s.setAttribute(l,g?"":isSymbol(c)?String(c):c)}function patchDOMProp(s,l,c,d){if(l==="innerHTML"||l==="textContent"){c!=null&&(s[l]=l==="innerHTML"?unsafeToTrustedHTML(c):c);return}const f=s.tagName;if(l==="value"&&f!=="PROGRESS"&&!f.includes("-")){const v=f==="OPTION"?s.getAttribute("value")||"":s.value,b=c==null?s.type==="checkbox"?"on":"":String(c);(v!==b||!("_value"in s))&&(s.value=b),c==null&&s.removeAttribute(l),s._value=c;return}let g=!1;if(c===""||c==null){const v=typeof s[l];v==="boolean"?c=includeBooleanAttr(c):c==null&&v==="string"?(c="",g=!0):v==="number"&&(c=0,g=!0)}try{s[l]=c}catch{}g&&s.removeAttribute(l)}function addEventListener(s,l,c,d){s.addEventListener(l,c,d)}function removeEventListener(s,l,c,d){s.removeEventListener(l,c,d)}const veiKey=Symbol("_vei");function patchEvent(s,l,c,d,f=null){const g=s[veiKey]||(s[veiKey]={}),v=g[l];if(d&&v)v.value=d;else{const[b,$]=parseName(l);if(d){const y=g[l]=createInvoker(d,f);addEventListener(s,b,y,$)}else v&&(removeEventListener(s,b,v,$),g[l]=void 0)}}const optionsModifierRE=/(?:Once|Passive|Capture)$/;function parseName(s){let l;if(optionsModifierRE.test(s)){l={};let d;for(;d=s.match(optionsModifierRE);)s=s.slice(0,s.length-d[0].length),l[d[0].toLowerCase()]=!0}return[s[2]===":"?s.slice(3):hyphenate$1(s.slice(2)),l]}let cachedNow=0;const p=Promise.resolve(),getNow=()=>cachedNow||(p.then(()=>cachedNow=0),cachedNow=Date.now());function createInvoker(s,l){const c=d=>{if(!d._vts)d._vts=Date.now();else if(d._vts<=c.attached)return;callWithAsyncErrorHandling(patchStopImmediatePropagation(d,c.value),l,5,[d])};return c.value=s,c.attached=getNow(),c}function patchStopImmediatePropagation(s,l){if(isArray$4(l)){const c=s.stopImmediatePropagation;return s.stopImmediatePropagation=()=>{c.call(s),s._stopped=!0},l.map(d=>f=>!f._stopped&&d&&d(f))}else return l}const isNativeOn=s=>s.charCodeAt(0)===111&&s.charCodeAt(1)===110&&s.charCodeAt(2)>96&&s.charCodeAt(2)<123,patchProp=(s,l,c,d,f,g)=>{const v=f==="svg";l==="class"?patchClass(s,d,v):l==="style"?patchStyle(s,c,d):isOn(l)?isModelListener(l)||patchEvent(s,l,c,d,g):(l[0]==="."?(l=l.slice(1),!0):l[0]==="^"?(l=l.slice(1),!1):shouldSetAsProp(s,l,d,v))?(patchDOMProp(s,l,d),!s.tagName.includes("-")&&(l==="value"||l==="checked"||l==="selected")&&patchAttr(s,l,d,v,g,l!=="value")):s._isVueCE&&(/[A-Z]/.test(l)||!isString$4(d))?patchDOMProp(s,camelize(l),d):(l==="true-value"?s._trueValue=d:l==="false-value"&&(s._falseValue=d),patchAttr(s,l,d,v))};function shouldSetAsProp(s,l,c,d){if(d)return!!(l==="innerHTML"||l==="textContent"||l in s&&isNativeOn(l)&&isFunction$6(c));if(l==="spellcheck"||l==="draggable"||l==="translate"||l==="form"||l==="list"&&s.tagName==="INPUT"||l==="type"&&s.tagName==="TEXTAREA")return!1;if(l==="width"||l==="height"){const f=s.tagName;if(f==="IMG"||f==="VIDEO"||f==="CANVAS"||f==="SOURCE")return!1}return isNativeOn(l)&&isString$4(c)?!1:l in s}const systemModifiers=["ctrl","shift","alt","meta"],modifierGuards={stop:s=>s.stopPropagation(),prevent:s=>s.preventDefault(),self:s=>s.target!==s.currentTarget,ctrl:s=>!s.ctrlKey,shift:s=>!s.shiftKey,alt:s=>!s.altKey,meta:s=>!s.metaKey,left:s=>"button"in s&&s.button!==0,middle:s=>"button"in s&&s.button!==1,right:s=>"button"in s&&s.button!==2,exact:(s,l)=>systemModifiers.some(c=>s[`${c}Key`]&&!l.includes(c))},withModifiers=(s,l)=>{const c=s._withMods||(s._withMods={}),d=l.join(".");return c[d]||(c[d]=(f,...g)=>{for(let v=0;v<l.length;v++){const b=modifierGuards[l[v]];if(b&&b(f,l))return}return s(f,...g)})},rendererOptions=extend$3({patchProp},nodeOps);let renderer$1;function ensureRenderer(){return renderer$1||(renderer$1=createRenderer(rendererOptions))}const render$4=(...s)=>{ensureRenderer().render(...s)},createApp=(...s)=>{const l=ensureRenderer().createApp(...s),{mount:c}=l;return l.mount=d=>{const f=normalizeContainer(d);if(!f)return;const g=l._component;!isFunction$6(g)&&!g.render&&!g.template&&(g.template=f.innerHTML),f.nodeType===1&&(f.textContent="");const v=c(f,!1,resolveRootNamespace(f));return f instanceof Element&&(f.removeAttribute("v-cloak"),f.setAttribute("data-v-app","")),v},l};function resolveRootNamespace(s){if(s instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&s instanceof MathMLElement)return"mathml"}function normalizeContainer(s){return isString$4(s)?document.querySelector(s):s}const _export_sfc=(s,l)=>{const c=s.__vccOpts||s;for(const[d,f]of l)c[d]=f;return c};/*!
  * shared v9.14.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const inBrowser=typeof window<"u",makeSymbol$1=(s,l=!1)=>l?Symbol.for(s):Symbol(s),generateFormatCacheKey=(s,l,c)=>friendlyJSONstringify({l:s,k:l,s:c}),friendlyJSONstringify=s=>JSON.stringify(s).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),isNumber$3=s=>typeof s=="number"&&isFinite(s),isDate=s=>toTypeString(s)==="[object Date]",isRegExp$1=s=>toTypeString(s)==="[object RegExp]",isEmptyObject$1=s=>isPlainObject$2(s)&&Object.keys(s).length===0,assign$2=Object.assign;let _globalThis;const getGlobalThis=()=>_globalThis||(_globalThis=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function escapeHtml(s){return s.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}const hasOwnProperty$c=Object.prototype.hasOwnProperty;function hasOwn$1(s,l){return hasOwnProperty$c.call(s,l)}const isArray$3=Array.isArray,isFunction$5=s=>typeof s=="function",isString$3=s=>typeof s=="string",isBoolean$3=s=>typeof s=="boolean",isObject$7=s=>s!==null&&typeof s=="object",isPromise$1=s=>isObject$7(s)&&isFunction$5(s.then)&&isFunction$5(s.catch),objectToString$1=Object.prototype.toString,toTypeString=s=>objectToString$1.call(s),isPlainObject$2=s=>{if(!isObject$7(s))return!1;const l=Object.getPrototypeOf(s);return l===null||l.constructor===Object},toDisplayString=s=>s==null?"":isArray$3(s)||isPlainObject$2(s)&&s.toString===objectToString$1?JSON.stringify(s,null,2):String(s);function join$2(s,l=""){return s.reduce((c,d,f)=>f===0?c+d:c+l+d,"")}function incrementer(s){let l=s;return()=>++l}function warn$1(s,l){typeof console<"u"&&(console.warn("[intlify] "+s),l&&console.warn(l.stack))}const isNotObjectOrIsArray=s=>!isObject$7(s)||isArray$3(s);function deepCopy(s,l){if(isNotObjectOrIsArray(s)||isNotObjectOrIsArray(l))throw new Error("Invalid value");const c=[{src:s,des:l}];for(;c.length;){const{src:d,des:f}=c.pop();Object.keys(d).forEach(g=>{isObject$7(d[g])&&!isObject$7(f[g])&&(f[g]=Array.isArray(d[g])?[]:{}),isNotObjectOrIsArray(f[g])||isNotObjectOrIsArray(d[g])?f[g]=d[g]:c.push({src:d[g],des:f[g]})})}}/*!
  * message-compiler v9.14.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function createPosition(s,l,c){return{line:s,column:l,offset:c}}function createLocation(s,l,c){return{start:s,end:l}}const RE_ARGS=/\{([0-9a-zA-Z]+)\}/g;function format$3(s,...l){return l.length===1&&isObject$6(l[0])&&(l=l[0]),(!l||!l.hasOwnProperty)&&(l={}),s.replace(RE_ARGS,(c,d)=>l.hasOwnProperty(d)?l[d]:"")}const assign$1=Object.assign,isString$2=s=>typeof s=="string",isObject$6=s=>s!==null&&typeof s=="object";function join$1(s,l=""){return s.reduce((c,d,f)=>f===0?c+d:c+l+d,"")}const CompileWarnCodes={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},warnMessages={[CompileWarnCodes.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function createCompileWarn(s,l,...c){const d=format$3(warnMessages[s],...c||[]),f={message:String(d),code:s};return l&&(f.location=l),f}const CompileErrorCodes={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},errorMessages$1={[CompileErrorCodes.EXPECTED_TOKEN]:"Expected token: '{0}'",[CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[CompileErrorCodes.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[CompileErrorCodes.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[CompileErrorCodes.EMPTY_PLACEHOLDER]:"Empty placeholder",[CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[CompileErrorCodes.INVALID_LINKED_FORMAT]:"Invalid linked format",[CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function createCompileError(s,l,c={}){const{domain:d,messages:f,args:g}=c,v=format$3((f||errorMessages$1)[s]||"",...g||[]),b=new SyntaxError(String(v));return b.code=s,l&&(b.location=l),b.domain=d,b}function defaultOnError(s){throw s}const CHAR_SP=" ",CHAR_CR="\r",CHAR_LF=`
`,CHAR_LS="\u2028",CHAR_PS="\u2029";function createScanner(s){const l=s;let c=0,d=1,f=1,g=0;const v=Ae=>l[Ae]===CHAR_CR&&l[Ae+1]===CHAR_LF,b=Ae=>l[Ae]===CHAR_LF,$=Ae=>l[Ae]===CHAR_PS,y=Ae=>l[Ae]===CHAR_LS,x=Ae=>v(Ae)||b(Ae)||$(Ae)||y(Ae),C=()=>c,E=()=>d,N=()=>f,W=()=>g,q=Ae=>v(Ae)||$(Ae)||y(Ae)?CHAR_LF:l[Ae],Y=()=>q(c),re=()=>q(c+g);function se(){return g=0,x(c)&&(d++,f=0),v(c)&&c++,c++,f++,l[c]}function de(){return v(c+g)&&g++,g++,l[c+g]}function he(){c=0,d=1,f=1,g=0}function ge(Ae=0){g=Ae}function Se(){const Ae=c+g;for(;Ae!==c;)se();g=0}return{index:C,line:E,column:N,peekOffset:W,charAt:q,currentChar:Y,currentPeek:re,next:se,peek:de,reset:he,resetPeek:ge,skipToPeek:Se}}const EOF=void 0,DOT$1=".",LITERAL_DELIMITER="'",ERROR_DOMAIN$3="tokenizer";function createTokenizer(s,l={}){const c=l.location!==!1,d=createScanner(s),f=()=>d.index(),g=()=>createPosition(d.line(),d.column(),d.index()),v=g(),b=f(),$={currentType:14,offset:b,startLoc:v,endLoc:v,lastType:14,lastOffset:b,lastStartLoc:v,lastEndLoc:v,braceNest:0,inLinked:!1,text:""},y=()=>$,{onError:x}=l;function C(Q$,eS,cS,...wS){const xS=y();if(eS.column+=cS,eS.offset+=cS,x){const OS=c?createLocation(xS.startLoc,eS):null,mS=createCompileError(Q$,OS,{domain:ERROR_DOMAIN$3,args:wS});x(mS)}}function E(Q$,eS,cS){Q$.endLoc=g(),Q$.currentType=eS;const wS={type:eS};return c&&(wS.loc=createLocation(Q$.startLoc,Q$.endLoc)),cS!=null&&(wS.value=cS),wS}const N=Q$=>E(Q$,14);function W(Q$,eS){return Q$.currentChar()===eS?(Q$.next(),eS):(C(CompileErrorCodes.EXPECTED_TOKEN,g(),0,eS),"")}function q(Q$){let eS="";for(;Q$.currentPeek()===CHAR_SP||Q$.currentPeek()===CHAR_LF;)eS+=Q$.currentPeek(),Q$.peek();return eS}function Y(Q$){const eS=q(Q$);return Q$.skipToPeek(),eS}function re(Q$){if(Q$===EOF)return!1;const eS=Q$.charCodeAt(0);return eS>=97&&eS<=122||eS>=65&&eS<=90||eS===95}function se(Q$){if(Q$===EOF)return!1;const eS=Q$.charCodeAt(0);return eS>=48&&eS<=57}function de(Q$,eS){const{currentType:cS}=eS;if(cS!==2)return!1;q(Q$);const wS=re(Q$.currentPeek());return Q$.resetPeek(),wS}function he(Q$,eS){const{currentType:cS}=eS;if(cS!==2)return!1;q(Q$);const wS=Q$.currentPeek()==="-"?Q$.peek():Q$.currentPeek(),xS=se(wS);return Q$.resetPeek(),xS}function ge(Q$,eS){const{currentType:cS}=eS;if(cS!==2)return!1;q(Q$);const wS=Q$.currentPeek()===LITERAL_DELIMITER;return Q$.resetPeek(),wS}function Se(Q$,eS){const{currentType:cS}=eS;if(cS!==8)return!1;q(Q$);const wS=Q$.currentPeek()===".";return Q$.resetPeek(),wS}function Ae(Q$,eS){const{currentType:cS}=eS;if(cS!==9)return!1;q(Q$);const wS=re(Q$.currentPeek());return Q$.resetPeek(),wS}function Re(Q$,eS){const{currentType:cS}=eS;if(!(cS===8||cS===12))return!1;q(Q$);const wS=Q$.currentPeek()===":";return Q$.resetPeek(),wS}function Be(Q$,eS){const{currentType:cS}=eS;if(cS!==10)return!1;const wS=()=>{const OS=Q$.currentPeek();return OS==="{"?re(Q$.peek()):OS==="@"||OS==="%"||OS==="|"||OS===":"||OS==="."||OS===CHAR_SP||!OS?!1:OS===CHAR_LF?(Q$.peek(),wS()):_y(Q$,!1)},xS=wS();return Q$.resetPeek(),xS}function Ke(Q$){q(Q$);const eS=Q$.currentPeek()==="|";return Q$.resetPeek(),eS}function Lr(Q$){const eS=q(Q$),cS=Q$.currentPeek()==="%"&&Q$.peek()==="{";return Q$.resetPeek(),{isModulo:cS,hasSpace:eS.length>0}}function _y(Q$,eS=!0){const cS=(xS=!1,OS="",mS=!1)=>{const pS=Q$.currentPeek();return pS==="{"?OS==="%"?!1:xS:pS==="@"||!pS?OS==="%"?!0:xS:pS==="%"?(Q$.peek(),cS(xS,"%",!0)):pS==="|"?OS==="%"||mS?!0:!(OS===CHAR_SP||OS===CHAR_LF):pS===CHAR_SP?(Q$.peek(),cS(!0,CHAR_SP,mS)):pS===CHAR_LF?(Q$.peek(),cS(!0,CHAR_LF,mS)):!0},wS=cS();return eS&&Q$.resetPeek(),wS}function by(Q$,eS){const cS=Q$.currentChar();return cS===EOF?EOF:eS(cS)?(Q$.next(),cS):null}function yy(Q$){const eS=Q$.charCodeAt(0);return eS>=97&&eS<=122||eS>=65&&eS<=90||eS>=48&&eS<=57||eS===95||eS===36}function my(Q$){return by(Q$,yy)}function $t(Q$){const eS=Q$.charCodeAt(0);return eS>=97&&eS<=122||eS>=65&&eS<=90||eS>=48&&eS<=57||eS===95||eS===36||eS===45}function K$(Q$){return by(Q$,$t)}function Y$(Q$){const eS=Q$.charCodeAt(0);return eS>=48&&eS<=57}function W$(Q$){return by(Q$,Y$)}function U$(Q$){const eS=Q$.charCodeAt(0);return eS>=48&&eS<=57||eS>=65&&eS<=70||eS>=97&&eS<=102}function hy(Q$){return by(Q$,U$)}function G$(Q$){let eS="",cS="";for(;eS=W$(Q$);)cS+=eS;return cS}function ky(Q$){Y(Q$);const eS=Q$.currentChar();return eS!=="%"&&C(CompileErrorCodes.EXPECTED_TOKEN,g(),0,eS),Q$.next(),"%"}function $y(Q$){let eS="";for(;;){const cS=Q$.currentChar();if(cS==="{"||cS==="}"||cS==="@"||cS==="|"||!cS)break;if(cS==="%")if(_y(Q$))eS+=cS,Q$.next();else break;else if(cS===CHAR_SP||cS===CHAR_LF)if(_y(Q$))eS+=cS,Q$.next();else{if(Ke(Q$))break;eS+=cS,Q$.next()}else eS+=cS,Q$.next()}return eS}function rS(Q$){Y(Q$);let eS="",cS="";for(;eS=K$(Q$);)cS+=eS;return Q$.currentChar()===EOF&&C(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,g(),0),cS}function lS(Q$){Y(Q$);let eS="";return Q$.currentChar()==="-"?(Q$.next(),eS+=`-${G$(Q$)}`):eS+=G$(Q$),Q$.currentChar()===EOF&&C(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,g(),0),eS}function bS(Q$){return Q$!==LITERAL_DELIMITER&&Q$!==CHAR_LF}function IS(Q$){Y(Q$),W(Q$,"'");let eS="",cS="";for(;eS=by(Q$,bS);)eS==="\\"?cS+=BS(Q$):cS+=eS;const wS=Q$.currentChar();return wS===CHAR_LF||wS===EOF?(C(CompileErrorCodes.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,g(),0),wS===CHAR_LF&&(Q$.next(),W(Q$,"'")),cS):(W(Q$,"'"),cS)}function BS(Q$){const eS=Q$.currentChar();switch(eS){case"\\":case"'":return Q$.next(),`\\${eS}`;case"u":return MS(Q$,eS,4);case"U":return MS(Q$,eS,6);default:return C(CompileErrorCodes.UNKNOWN_ESCAPE_SEQUENCE,g(),0,eS),""}}function MS(Q$,eS,cS){W(Q$,eS);let wS="";for(let xS=0;xS<cS;xS++){const OS=hy(Q$);if(!OS){C(CompileErrorCodes.INVALID_UNICODE_ESCAPE_SEQUENCE,g(),0,`\\${eS}${wS}${Q$.currentChar()}`);break}wS+=OS}return`\\${eS}${wS}`}function zS(Q$){return Q$!=="{"&&Q$!=="}"&&Q$!==CHAR_SP&&Q$!==CHAR_LF}function LS(Q$){Y(Q$);let eS="",cS="";for(;eS=by(Q$,zS);)cS+=eS;return cS}function nS(Q$){let eS="",cS="";for(;eS=my(Q$);)cS+=eS;return cS}function Z$(Q$){const eS=cS=>{const wS=Q$.currentChar();return wS==="{"||wS==="%"||wS==="@"||wS==="|"||wS==="("||wS===")"||!wS||wS===CHAR_SP?cS:(cS+=wS,Q$.next(),eS(cS))};return eS("")}function dS(Q$){Y(Q$);const eS=W(Q$,"|");return Y(Q$),eS}function ES(Q$,eS){let cS=null;switch(Q$.currentChar()){case"{":return eS.braceNest>=1&&C(CompileErrorCodes.NOT_ALLOW_NEST_PLACEHOLDER,g(),0),Q$.next(),cS=E(eS,2,"{"),Y(Q$),eS.braceNest++,cS;case"}":return eS.braceNest>0&&eS.currentType===2&&C(CompileErrorCodes.EMPTY_PLACEHOLDER,g(),0),Q$.next(),cS=E(eS,3,"}"),eS.braceNest--,eS.braceNest>0&&Y(Q$),eS.inLinked&&eS.braceNest===0&&(eS.inLinked=!1),cS;case"@":return eS.braceNest>0&&C(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,g(),0),cS=wy(Q$,eS)||N(eS),eS.braceNest=0,cS;default:{let xS=!0,OS=!0,mS=!0;if(Ke(Q$))return eS.braceNest>0&&C(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,g(),0),cS=E(eS,1,dS(Q$)),eS.braceNest=0,eS.inLinked=!1,cS;if(eS.braceNest>0&&(eS.currentType===5||eS.currentType===6||eS.currentType===7))return C(CompileErrorCodes.UNTERMINATED_CLOSING_BRACE,g(),0),eS.braceNest=0,tS(Q$,eS);if(xS=de(Q$,eS))return cS=E(eS,5,rS(Q$)),Y(Q$),cS;if(OS=he(Q$,eS))return cS=E(eS,6,lS(Q$)),Y(Q$),cS;if(mS=ge(Q$,eS))return cS=E(eS,7,IS(Q$)),Y(Q$),cS;if(!xS&&!OS&&!mS)return cS=E(eS,13,LS(Q$)),C(CompileErrorCodes.INVALID_TOKEN_IN_PLACEHOLDER,g(),0,cS.value),Y(Q$),cS;break}}return cS}function wy(Q$,eS){const{currentType:cS}=eS;let wS=null;const xS=Q$.currentChar();switch((cS===8||cS===9||cS===12||cS===10)&&(xS===CHAR_LF||xS===CHAR_SP)&&C(CompileErrorCodes.INVALID_LINKED_FORMAT,g(),0),xS){case"@":return Q$.next(),wS=E(eS,8,"@"),eS.inLinked=!0,wS;case".":return Y(Q$),Q$.next(),E(eS,9,".");case":":return Y(Q$),Q$.next(),E(eS,10,":");default:return Ke(Q$)?(wS=E(eS,1,dS(Q$)),eS.braceNest=0,eS.inLinked=!1,wS):Se(Q$,eS)||Re(Q$,eS)?(Y(Q$),wy(Q$,eS)):Ae(Q$,eS)?(Y(Q$),E(eS,12,nS(Q$))):Be(Q$,eS)?(Y(Q$),xS==="{"?ES(Q$,eS)||wS:E(eS,11,Z$(Q$))):(cS===8&&C(CompileErrorCodes.INVALID_LINKED_FORMAT,g(),0),eS.braceNest=0,eS.inLinked=!1,tS(Q$,eS))}}function tS(Q$,eS){let cS={type:14};if(eS.braceNest>0)return ES(Q$,eS)||N(eS);if(eS.inLinked)return wy(Q$,eS)||N(eS);switch(Q$.currentChar()){case"{":return ES(Q$,eS)||N(eS);case"}":return C(CompileErrorCodes.UNBALANCED_CLOSING_BRACE,g(),0),Q$.next(),E(eS,3,"}");case"@":return wy(Q$,eS)||N(eS);default:{if(Ke(Q$))return cS=E(eS,1,dS(Q$)),eS.braceNest=0,eS.inLinked=!1,cS;const{isModulo:xS,hasSpace:OS}=Lr(Q$);if(xS)return OS?E(eS,0,$y(Q$)):E(eS,4,ky(Q$));if(_y(Q$))return E(eS,0,$y(Q$));break}}return cS}function yS(){const{currentType:Q$,offset:eS,startLoc:cS,endLoc:wS}=$;return $.lastType=Q$,$.lastOffset=eS,$.lastStartLoc=cS,$.lastEndLoc=wS,$.offset=f(),$.startLoc=g(),d.currentChar()===EOF?E($,14):tS(d,$)}return{nextToken:yS,currentOffset:f,currentPosition:g,context:y}}const ERROR_DOMAIN$2="parser",KNOWN_ESCAPES=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function fromEscapeSequence(s,l,c){switch(s){case"\\\\":return"\\";case"\\'":return"'";default:{const d=parseInt(l||c,16);return d<=55295||d>=57344?String.fromCodePoint(d):""}}}function createParser(s={}){const l=s.location!==!1,{onError:c,onWarn:d}=s;function f(de,he,ge,Se,...Ae){const Re=de.currentPosition();if(Re.offset+=Se,Re.column+=Se,c){const Be=l?createLocation(ge,Re):null,Ke=createCompileError(he,Be,{domain:ERROR_DOMAIN$2,args:Ae});c(Ke)}}function g(de,he,ge,Se,...Ae){const Re=de.currentPosition();if(Re.offset+=Se,Re.column+=Se,d){const Be=l?createLocation(ge,Re):null;d(createCompileWarn(he,Be,Ae))}}function v(de,he,ge){const Se={type:de};return l&&(Se.start=he,Se.end=he,Se.loc={start:ge,end:ge}),Se}function b(de,he,ge,Se){l&&(de.end=he,de.loc&&(de.loc.end=ge))}function $(de,he){const ge=de.context(),Se=v(3,ge.offset,ge.startLoc);return Se.value=he,b(Se,de.currentOffset(),de.currentPosition()),Se}function y(de,he){const ge=de.context(),{lastOffset:Se,lastStartLoc:Ae}=ge,Re=v(5,Se,Ae);return Re.index=parseInt(he,10),de.nextToken(),b(Re,de.currentOffset(),de.currentPosition()),Re}function x(de,he,ge){const Se=de.context(),{lastOffset:Ae,lastStartLoc:Re}=Se,Be=v(4,Ae,Re);return Be.key=he,ge===!0&&(Be.modulo=!0),de.nextToken(),b(Be,de.currentOffset(),de.currentPosition()),Be}function C(de,he){const ge=de.context(),{lastOffset:Se,lastStartLoc:Ae}=ge,Re=v(9,Se,Ae);return Re.value=he.replace(KNOWN_ESCAPES,fromEscapeSequence),de.nextToken(),b(Re,de.currentOffset(),de.currentPosition()),Re}function E(de){const he=de.nextToken(),ge=de.context(),{lastOffset:Se,lastStartLoc:Ae}=ge,Re=v(8,Se,Ae);return he.type!==12?(f(de,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_MODIFIER,ge.lastStartLoc,0),Re.value="",b(Re,Se,Ae),{nextConsumeToken:he,node:Re}):(he.value==null&&f(de,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,ge.lastStartLoc,0,getTokenCaption(he)),Re.value=he.value||"",b(Re,de.currentOffset(),de.currentPosition()),{node:Re})}function N(de,he){const ge=de.context(),Se=v(7,ge.offset,ge.startLoc);return Se.value=he,b(Se,de.currentOffset(),de.currentPosition()),Se}function W(de){const he=de.context(),ge=v(6,he.offset,he.startLoc);let Se=de.nextToken();if(Se.type===9){const Ae=E(de);ge.modifier=Ae.node,Se=Ae.nextConsumeToken||de.nextToken()}switch(Se.type!==10&&f(de,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,he.lastStartLoc,0,getTokenCaption(Se)),Se=de.nextToken(),Se.type===2&&(Se=de.nextToken()),Se.type){case 11:Se.value==null&&f(de,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,he.lastStartLoc,0,getTokenCaption(Se)),ge.key=N(de,Se.value||"");break;case 5:Se.value==null&&f(de,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,he.lastStartLoc,0,getTokenCaption(Se)),ge.key=x(de,Se.value||"");break;case 6:Se.value==null&&f(de,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,he.lastStartLoc,0,getTokenCaption(Se)),ge.key=y(de,Se.value||"");break;case 7:Se.value==null&&f(de,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,he.lastStartLoc,0,getTokenCaption(Se)),ge.key=C(de,Se.value||"");break;default:{f(de,CompileErrorCodes.UNEXPECTED_EMPTY_LINKED_KEY,he.lastStartLoc,0);const Ae=de.context(),Re=v(7,Ae.offset,Ae.startLoc);return Re.value="",b(Re,Ae.offset,Ae.startLoc),ge.key=Re,b(ge,Ae.offset,Ae.startLoc),{nextConsumeToken:Se,node:ge}}}return b(ge,de.currentOffset(),de.currentPosition()),{node:ge}}function q(de){const he=de.context(),ge=he.currentType===1?de.currentOffset():he.offset,Se=he.currentType===1?he.endLoc:he.startLoc,Ae=v(2,ge,Se);Ae.items=[];let Re=null,Be=null;do{const _y=Re||de.nextToken();switch(Re=null,_y.type){case 0:_y.value==null&&f(de,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,he.lastStartLoc,0,getTokenCaption(_y)),Ae.items.push($(de,_y.value||""));break;case 6:_y.value==null&&f(de,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,he.lastStartLoc,0,getTokenCaption(_y)),Ae.items.push(y(de,_y.value||""));break;case 4:Be=!0;break;case 5:_y.value==null&&f(de,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,he.lastStartLoc,0,getTokenCaption(_y)),Ae.items.push(x(de,_y.value||"",!!Be)),Be&&(g(de,CompileWarnCodes.USE_MODULO_SYNTAX,he.lastStartLoc,0,getTokenCaption(_y)),Be=null);break;case 7:_y.value==null&&f(de,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,he.lastStartLoc,0,getTokenCaption(_y)),Ae.items.push(C(de,_y.value||""));break;case 8:{const by=W(de);Ae.items.push(by.node),Re=by.nextConsumeToken||null;break}}}while(he.currentType!==14&&he.currentType!==1);const Ke=he.currentType===1?he.lastOffset:de.currentOffset(),Lr=he.currentType===1?he.lastEndLoc:de.currentPosition();return b(Ae,Ke,Lr),Ae}function Y(de,he,ge,Se){const Ae=de.context();let Re=Se.items.length===0;const Be=v(1,he,ge);Be.cases=[],Be.cases.push(Se);do{const Ke=q(de);Re||(Re=Ke.items.length===0),Be.cases.push(Ke)}while(Ae.currentType!==14);return Re&&f(de,CompileErrorCodes.MUST_HAVE_MESSAGES_IN_PLURAL,ge,0),b(Be,de.currentOffset(),de.currentPosition()),Be}function re(de){const he=de.context(),{offset:ge,startLoc:Se}=he,Ae=q(de);return he.currentType===14?Ae:Y(de,ge,Se,Ae)}function se(de){const he=createTokenizer(de,assign$1({},s)),ge=he.context(),Se=v(0,ge.offset,ge.startLoc);return l&&Se.loc&&(Se.loc.source=de),Se.body=re(he),s.onCacheKey&&(Se.cacheKey=s.onCacheKey(de)),ge.currentType!==14&&f(he,CompileErrorCodes.UNEXPECTED_LEXICAL_ANALYSIS,ge.lastStartLoc,0,de[ge.offset]||""),b(Se,he.currentOffset(),he.currentPosition()),Se}return{parse:se}}function getTokenCaption(s){if(s.type===14)return"EOF";const l=(s.value||"").replace(/\r?\n/gu,"\\n");return l.length>10?l.slice(0,9)+"":l}function createTransformer(s,l={}){const c={ast:s,helpers:new Set};return{context:()=>c,helper:g=>(c.helpers.add(g),g)}}function traverseNodes(s,l){for(let c=0;c<s.length;c++)traverseNode(s[c],l)}function traverseNode(s,l){switch(s.type){case 1:traverseNodes(s.cases,l),l.helper("plural");break;case 2:traverseNodes(s.items,l);break;case 6:{traverseNode(s.key,l),l.helper("linked"),l.helper("type");break}case 5:l.helper("interpolate"),l.helper("list");break;case 4:l.helper("interpolate"),l.helper("named");break}}function transform(s,l={}){const c=createTransformer(s);c.helper("normalize"),s.body&&traverseNode(s.body,c);const d=c.context();s.helpers=Array.from(d.helpers)}function optimize(s){const l=s.body;return l.type===2?optimizeMessageNode(l):l.cases.forEach(c=>optimizeMessageNode(c)),s}function optimizeMessageNode(s){if(s.items.length===1){const l=s.items[0];(l.type===3||l.type===9)&&(s.static=l.value,delete l.value)}else{const l=[];for(let c=0;c<s.items.length;c++){const d=s.items[c];if(!(d.type===3||d.type===9)||d.value==null)break;l.push(d.value)}if(l.length===s.items.length){s.static=join$1(l);for(let c=0;c<s.items.length;c++){const d=s.items[c];(d.type===3||d.type===9)&&delete d.value}}}}const ERROR_DOMAIN$1="minifier";function minify(s){switch(s.t=s.type,s.type){case 0:{const l=s;minify(l.body),l.b=l.body,delete l.body;break}case 1:{const l=s,c=l.cases;for(let d=0;d<c.length;d++)minify(c[d]);l.c=c,delete l.cases;break}case 2:{const l=s,c=l.items;for(let d=0;d<c.length;d++)minify(c[d]);l.i=c,delete l.items,l.static&&(l.s=l.static,delete l.static);break}case 3:case 9:case 8:case 7:{const l=s;l.value&&(l.v=l.value,delete l.value);break}case 6:{const l=s;minify(l.key),l.k=l.key,delete l.key,l.modifier&&(minify(l.modifier),l.m=l.modifier,delete l.modifier);break}case 5:{const l=s;l.i=l.index,delete l.index;break}case 4:{const l=s;l.k=l.key,delete l.key;break}default:throw createCompileError(CompileErrorCodes.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:ERROR_DOMAIN$1,args:[s.type]})}delete s.type}const ERROR_DOMAIN="parser";function createCodeGenerator(s,l){const{sourceMap:c,filename:d,breakLineCode:f,needIndent:g}=l,v=l.location!==!1,b={filename:d,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:f,needIndent:g,indentLevel:0};v&&s.loc&&(b.source=s.loc.source);const $=()=>b;function y(Y,re){b.code+=Y}function x(Y,re=!0){const se=re?f:"";y(g?se+"  ".repeat(Y):se)}function C(Y=!0){const re=++b.indentLevel;Y&&x(re)}function E(Y=!0){const re=--b.indentLevel;Y&&x(re)}function N(){x(b.indentLevel)}return{context:$,push:y,indent:C,deindent:E,newline:N,helper:Y=>`_${Y}`,needIndent:()=>b.needIndent}}function generateLinkedNode(s,l){const{helper:c}=s;s.push(`${c("linked")}(`),generateNode(s,l.key),l.modifier?(s.push(", "),generateNode(s,l.modifier),s.push(", _type")):s.push(", undefined, _type"),s.push(")")}function generateMessageNode(s,l){const{helper:c,needIndent:d}=s;s.push(`${c("normalize")}([`),s.indent(d());const f=l.items.length;for(let g=0;g<f&&(generateNode(s,l.items[g]),g!==f-1);g++)s.push(", ");s.deindent(d()),s.push("])")}function generatePluralNode(s,l){const{helper:c,needIndent:d}=s;if(l.cases.length>1){s.push(`${c("plural")}([`),s.indent(d());const f=l.cases.length;for(let g=0;g<f&&(generateNode(s,l.cases[g]),g!==f-1);g++)s.push(", ");s.deindent(d()),s.push("])")}}function generateResource(s,l){l.body?generateNode(s,l.body):s.push("null")}function generateNode(s,l){const{helper:c}=s;switch(l.type){case 0:generateResource(s,l);break;case 1:generatePluralNode(s,l);break;case 2:generateMessageNode(s,l);break;case 6:generateLinkedNode(s,l);break;case 8:s.push(JSON.stringify(l.value),l);break;case 7:s.push(JSON.stringify(l.value),l);break;case 5:s.push(`${c("interpolate")}(${c("list")}(${l.index}))`,l);break;case 4:s.push(`${c("interpolate")}(${c("named")}(${JSON.stringify(l.key)}))`,l);break;case 9:s.push(JSON.stringify(l.value),l);break;case 3:s.push(JSON.stringify(l.value),l);break;default:throw createCompileError(CompileErrorCodes.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:ERROR_DOMAIN,args:[l.type]})}}const generate=(s,l={})=>{const c=isString$2(l.mode)?l.mode:"normal",d=isString$2(l.filename)?l.filename:"message.intl",f=!!l.sourceMap,g=l.breakLineCode!=null?l.breakLineCode:c==="arrow"?";":`
`,v=l.needIndent?l.needIndent:c!=="arrow",b=s.helpers||[],$=createCodeGenerator(s,{mode:c,filename:d,sourceMap:f,breakLineCode:g,needIndent:v});$.push(c==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),$.indent(v),b.length>0&&($.push(`const { ${join$1(b.map(C=>`${C}: _${C}`),", ")} } = ctx`),$.newline()),$.push("return "),generateNode($,s),$.deindent(v),$.push("}"),delete s.helpers;const{code:y,map:x}=$.context();return{ast:s,code:y,map:x?x.toJSON():void 0}};function baseCompile$1(s,l={}){const c=assign$1({},l),d=!!c.jit,f=!!c.minify,g=c.optimize==null?!0:c.optimize,b=createParser(c).parse(s);return d?(g&&optimize(b),f&&minify(b),{ast:b,code:""}):(transform(b,c),generate(b,c))}/*!
  * core-base v9.14.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */function initFeatureFlags$1(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}const pathStateMachine=[];pathStateMachine[0]={w:[0],i:[3,0],"[":[4],o:[7]};pathStateMachine[1]={w:[1],".":[2],"[":[4],o:[7]};pathStateMachine[2]={w:[2],i:[3,0],0:[3,0]};pathStateMachine[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};pathStateMachine[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};pathStateMachine[5]={"'":[4,0],o:8,l:[5,0]};pathStateMachine[6]={'"':[4,0],o:8,l:[6,0]};const literalValueRE=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function isLiteral(s){return literalValueRE.test(s)}function stripQuotes(s){const l=s.charCodeAt(0),c=s.charCodeAt(s.length-1);return l===c&&(l===34||l===39)?s.slice(1,-1):s}function getPathCharType(s){if(s==null)return"o";switch(s.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return s;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function formatSubPath(s){const l=s.trim();return s.charAt(0)==="0"&&isNaN(parseInt(s))?!1:isLiteral(l)?stripQuotes(l):"*"+l}function parse$3(s){const l=[];let c=-1,d=0,f=0,g,v,b,$,y,x,C;const E=[];E[0]=()=>{v===void 0?v=b:v+=b},E[1]=()=>{v!==void 0&&(l.push(v),v=void 0)},E[2]=()=>{E[0](),f++},E[3]=()=>{if(f>0)f--,d=4,E[0]();else{if(f=0,v===void 0||(v=formatSubPath(v),v===!1))return!1;E[1]()}};function N(){const W=s[c+1];if(d===5&&W==="'"||d===6&&W==='"')return c++,b="\\"+W,E[0](),!0}for(;d!==null;)if(c++,g=s[c],!(g==="\\"&&N())){if($=getPathCharType(g),C=pathStateMachine[d],y=C[$]||C.l||8,y===8||(d=y[0],y[1]!==void 0&&(x=E[y[1]],x&&(b=g,x()===!1))))return;if(d===7)return l}}const cache=new Map;function resolveWithKeyValue(s,l){return isObject$7(s)?s[l]:null}function resolveValue(s,l){if(!isObject$7(s))return null;let c=cache.get(l);if(c||(c=parse$3(l),c&&cache.set(l,c)),!c)return null;const d=c.length;let f=s,g=0;for(;g<d;){const v=f[c[g]];if(v===void 0||isFunction$5(f))return null;f=v,g++}return f}const DEFAULT_MODIFIER=s=>s,DEFAULT_MESSAGE=s=>"",DEFAULT_MESSAGE_DATA_TYPE="text",DEFAULT_NORMALIZE=s=>s.length===0?"":join$2(s),DEFAULT_INTERPOLATE=toDisplayString;function pluralDefault(s,l){return s=Math.abs(s),l===2?s?s>1?1:0:1:s?Math.min(s,2):0}function getPluralIndex(s){const l=isNumber$3(s.pluralIndex)?s.pluralIndex:-1;return s.named&&(isNumber$3(s.named.count)||isNumber$3(s.named.n))?isNumber$3(s.named.count)?s.named.count:isNumber$3(s.named.n)?s.named.n:l:l}function normalizeNamed(s,l){l.count||(l.count=s),l.n||(l.n=s)}function createMessageContext(s={}){const l=s.locale,c=getPluralIndex(s),d=isObject$7(s.pluralRules)&&isString$3(l)&&isFunction$5(s.pluralRules[l])?s.pluralRules[l]:pluralDefault,f=isObject$7(s.pluralRules)&&isString$3(l)&&isFunction$5(s.pluralRules[l])?pluralDefault:void 0,g=re=>re[d(c,re.length,f)],v=s.list||[],b=re=>v[re],$=s.named||{};isNumber$3(s.pluralIndex)&&normalizeNamed(c,$);const y=re=>$[re];function x(re){const se=isFunction$5(s.messages)?s.messages(re):isObject$7(s.messages)?s.messages[re]:!1;return se||(s.parent?s.parent.message(re):DEFAULT_MESSAGE)}const C=re=>s.modifiers?s.modifiers[re]:DEFAULT_MODIFIER,E=isPlainObject$2(s.processor)&&isFunction$5(s.processor.normalize)?s.processor.normalize:DEFAULT_NORMALIZE,N=isPlainObject$2(s.processor)&&isFunction$5(s.processor.interpolate)?s.processor.interpolate:DEFAULT_INTERPOLATE,W=isPlainObject$2(s.processor)&&isString$3(s.processor.type)?s.processor.type:DEFAULT_MESSAGE_DATA_TYPE,Y={list:b,named:y,plural:g,linked:(re,...se)=>{const[de,he]=se;let ge="text",Se="";se.length===1?isObject$7(de)?(Se=de.modifier||Se,ge=de.type||ge):isString$3(de)&&(Se=de||Se):se.length===2&&(isString$3(de)&&(Se=de||Se),isString$3(he)&&(ge=he||ge));const Ae=x(re)(Y),Re=ge==="vnode"&&isArray$3(Ae)&&Se?Ae[0]:Ae;return Se?C(Se)(Re,ge):Re},message:x,type:W,interpolate:N,normalize:E,values:assign$2({},v,$)};return Y}let devtools=null;function setDevToolsHook(s){devtools=s}function initI18nDevTools(s,l,c){devtools&&devtools.emit("i18n:init",{timestamp:Date.now(),i18n:s,version:l,meta:c})}const translateDevTools=createDevToolsHook("function:translate");function createDevToolsHook(s){return l=>devtools&&devtools.emit(s,l)}const code$1$2=CompileWarnCodes.__EXTEND_POINT__,inc$1$1=incrementer(code$1$2),CoreWarnCodes={NOT_FOUND_KEY:code$1$2,FALLBACK_TO_TRANSLATE:inc$1$1(),CANNOT_FORMAT_NUMBER:inc$1$1(),FALLBACK_TO_NUMBER_FORMAT:inc$1$1(),CANNOT_FORMAT_DATE:inc$1$1(),FALLBACK_TO_DATE_FORMAT:inc$1$1(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:inc$1$1(),__EXTEND_POINT__:inc$1$1()},code$3=CompileErrorCodes.__EXTEND_POINT__,inc$2=incrementer(code$3),CoreErrorCodes={INVALID_ARGUMENT:code$3,INVALID_DATE_ARGUMENT:inc$2(),INVALID_ISO_DATE_ARGUMENT:inc$2(),NOT_SUPPORT_NON_STRING_MESSAGE:inc$2(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:inc$2(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:inc$2(),NOT_SUPPORT_LOCALE_TYPE:inc$2(),__EXTEND_POINT__:inc$2()};function createCoreError(s){return createCompileError(s,null,void 0)}function getLocale(s,l){return l.locale!=null?resolveLocale(l.locale):resolveLocale(s.locale)}let _resolveLocale;function resolveLocale(s){if(isString$3(s))return s;if(isFunction$5(s)){if(s.resolvedOnce&&_resolveLocale!=null)return _resolveLocale;if(s.constructor.name==="Function"){const l=s();if(isPromise$1(l))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return _resolveLocale=l}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw createCoreError(CoreErrorCodes.NOT_SUPPORT_LOCALE_TYPE)}function fallbackWithSimple(s,l,c){return[...new Set([c,...isArray$3(l)?l:isObject$7(l)?Object.keys(l):isString$3(l)?[l]:[c]])]}function fallbackWithLocaleChain(s,l,c){const d=isString$3(c)?c:DEFAULT_LOCALE,f=s;f.__localeChainCache||(f.__localeChainCache=new Map);let g=f.__localeChainCache.get(d);if(!g){g=[];let v=[c];for(;isArray$3(v);)v=appendBlockToChain(g,v,l);const b=isArray$3(l)||!isPlainObject$2(l)?l:l.default?l.default:null;v=isString$3(b)?[b]:b,isArray$3(v)&&appendBlockToChain(g,v,!1),f.__localeChainCache.set(d,g)}return g}function appendBlockToChain(s,l,c){let d=!0;for(let f=0;f<l.length&&isBoolean$3(d);f++){const g=l[f];isString$3(g)&&(d=appendLocaleToChain(s,l[f],c))}return d}function appendLocaleToChain(s,l,c){let d;const f=l.split("-");do{const g=f.join("-");d=appendItemToChain(s,g,c),f.splice(-1,1)}while(f.length&&d===!0);return d}function appendItemToChain(s,l,c){let d=!1;if(!s.includes(l)&&(d=!0,l)){d=l[l.length-1]!=="!";const f=l.replace(/!/g,"");s.push(f),(isArray$3(c)||isPlainObject$2(c))&&c[f]&&(d=c[f])}return d}const VERSION$1="9.14.1",NOT_REOSLVED=-1,DEFAULT_LOCALE="en-US",MISSING_RESOLVE_VALUE="",capitalize=s=>`${s.charAt(0).toLocaleUpperCase()}${s.substr(1)}`;function getDefaultLinkedModifiers(){return{upper:(s,l)=>l==="text"&&isString$3(s)?s.toUpperCase():l==="vnode"&&isObject$7(s)&&"__v_isVNode"in s?s.children.toUpperCase():s,lower:(s,l)=>l==="text"&&isString$3(s)?s.toLowerCase():l==="vnode"&&isObject$7(s)&&"__v_isVNode"in s?s.children.toLowerCase():s,capitalize:(s,l)=>l==="text"&&isString$3(s)?capitalize(s):l==="vnode"&&isObject$7(s)&&"__v_isVNode"in s?capitalize(s.children):s}}let _compiler;function registerMessageCompiler(s){_compiler=s}let _resolver;function registerMessageResolver(s){_resolver=s}let _fallbacker;function registerLocaleFallbacker(s){_fallbacker=s}let _additionalMeta=null;const setAdditionalMeta=s=>{_additionalMeta=s},getAdditionalMeta=()=>_additionalMeta;let _fallbackContext=null;const setFallbackContext=s=>{_fallbackContext=s},getFallbackContext=()=>_fallbackContext;let _cid=0;function createCoreContext(s={}){const l=isFunction$5(s.onWarn)?s.onWarn:warn$1,c=isString$3(s.version)?s.version:VERSION$1,d=isString$3(s.locale)||isFunction$5(s.locale)?s.locale:DEFAULT_LOCALE,f=isFunction$5(d)?DEFAULT_LOCALE:d,g=isArray$3(s.fallbackLocale)||isPlainObject$2(s.fallbackLocale)||isString$3(s.fallbackLocale)||s.fallbackLocale===!1?s.fallbackLocale:f,v=isPlainObject$2(s.messages)?s.messages:{[f]:{}},b=isPlainObject$2(s.datetimeFormats)?s.datetimeFormats:{[f]:{}},$=isPlainObject$2(s.numberFormats)?s.numberFormats:{[f]:{}},y=assign$2({},s.modifiers||{},getDefaultLinkedModifiers()),x=s.pluralRules||{},C=isFunction$5(s.missing)?s.missing:null,E=isBoolean$3(s.missingWarn)||isRegExp$1(s.missingWarn)?s.missingWarn:!0,N=isBoolean$3(s.fallbackWarn)||isRegExp$1(s.fallbackWarn)?s.fallbackWarn:!0,W=!!s.fallbackFormat,q=!!s.unresolving,Y=isFunction$5(s.postTranslation)?s.postTranslation:null,re=isPlainObject$2(s.processor)?s.processor:null,se=isBoolean$3(s.warnHtmlMessage)?s.warnHtmlMessage:!0,de=!!s.escapeParameter,he=isFunction$5(s.messageCompiler)?s.messageCompiler:_compiler,ge=isFunction$5(s.messageResolver)?s.messageResolver:_resolver||resolveWithKeyValue,Se=isFunction$5(s.localeFallbacker)?s.localeFallbacker:_fallbacker||fallbackWithSimple,Ae=isObject$7(s.fallbackContext)?s.fallbackContext:void 0,Re=s,Be=isObject$7(Re.__datetimeFormatters)?Re.__datetimeFormatters:new Map,Ke=isObject$7(Re.__numberFormatters)?Re.__numberFormatters:new Map,Lr=isObject$7(Re.__meta)?Re.__meta:{};_cid++;const _y={version:c,cid:_cid,locale:d,fallbackLocale:g,messages:v,modifiers:y,pluralRules:x,missing:C,missingWarn:E,fallbackWarn:N,fallbackFormat:W,unresolving:q,postTranslation:Y,processor:re,warnHtmlMessage:se,escapeParameter:de,messageCompiler:he,messageResolver:ge,localeFallbacker:Se,fallbackContext:Ae,onWarn:l,__meta:Lr};return _y.datetimeFormats=b,_y.numberFormats=$,_y.__datetimeFormatters=Be,_y.__numberFormatters=Ke,__INTLIFY_PROD_DEVTOOLS__&&initI18nDevTools(_y,c,Lr),_y}function handleMissing(s,l,c,d,f){const{missing:g,onWarn:v}=s;if(g!==null){const b=g(s,c,l,f);return isString$3(b)?b:l}else return l}function updateFallbackLocale(s,l,c){const d=s;d.__localeChainCache=new Map,s.localeFallbacker(s,c,l)}function isAlmostSameLocale(s,l){return s===l?!1:s.split("-")[0]===l.split("-")[0]}function isImplicitFallback(s,l){const c=l.indexOf(s);if(c===-1)return!1;for(let d=c+1;d<l.length;d++)if(isAlmostSameLocale(s,l[d]))return!0;return!1}function format$2(s){return c=>formatParts(c,s)}function formatParts(s,l){const c=l.b||l.body;if((c.t||c.type)===1){const d=c,f=d.c||d.cases;return s.plural(f.reduce((g,v)=>[...g,formatMessageParts(s,v)],[]))}else return formatMessageParts(s,c)}function formatMessageParts(s,l){const c=l.s||l.static;if(c)return s.type==="text"?c:s.normalize([c]);{const d=(l.i||l.items).reduce((f,g)=>[...f,formatMessagePart(s,g)],[]);return s.normalize(d)}}function formatMessagePart(s,l){const c=l.t||l.type;switch(c){case 3:{const d=l;return d.v||d.value}case 9:{const d=l;return d.v||d.value}case 4:{const d=l;return s.interpolate(s.named(d.k||d.key))}case 5:{const d=l;return s.interpolate(s.list(d.i!=null?d.i:d.index))}case 6:{const d=l,f=d.m||d.modifier;return s.linked(formatMessagePart(s,d.k||d.key),f?formatMessagePart(s,f):void 0,s.type)}case 7:{const d=l;return d.v||d.value}case 8:{const d=l;return d.v||d.value}default:throw new Error(`unhandled node type on format message part: ${c}`)}}const defaultOnCacheKey=s=>s;let compileCache=Object.create(null);const isMessageAST=s=>isObject$7(s)&&(s.t===0||s.type===0)&&("b"in s||"body"in s);function baseCompile(s,l={}){let c=!1;const d=l.onError||defaultOnError;return l.onError=f=>{c=!0,d(f)},{...baseCompile$1(s,l),detectError:c}}const compileToFunction=(s,l)=>{if(!isString$3(s))throw createCoreError(CoreErrorCodes.NOT_SUPPORT_NON_STRING_MESSAGE);{isBoolean$3(l.warnHtmlMessage)&&l.warnHtmlMessage;const d=(l.onCacheKey||defaultOnCacheKey)(s),f=compileCache[d];if(f)return f;const{code:g,detectError:v}=baseCompile(s,l),b=new Function(`return ${g}`)();return v?b:compileCache[d]=b}};function compile$1(s,l){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&isString$3(s)){isBoolean$3(l.warnHtmlMessage)&&l.warnHtmlMessage;const d=(l.onCacheKey||defaultOnCacheKey)(s),f=compileCache[d];if(f)return f;const{ast:g,detectError:v}=baseCompile(s,{...l,location:!1,jit:!0}),b=format$2(g);return v?b:compileCache[d]=b}else{const c=s.cacheKey;if(c){const d=compileCache[c];return d||(compileCache[c]=format$2(s))}else return format$2(s)}}const NOOP_MESSAGE_FUNCTION=()=>"",isMessageFunction=s=>isFunction$5(s);function translate(s,...l){const{fallbackFormat:c,postTranslation:d,unresolving:f,messageCompiler:g,fallbackLocale:v,messages:b}=s,[$,y]=parseTranslateArgs(...l),x=isBoolean$3(y.missingWarn)?y.missingWarn:s.missingWarn,C=isBoolean$3(y.fallbackWarn)?y.fallbackWarn:s.fallbackWarn,E=isBoolean$3(y.escapeParameter)?y.escapeParameter:s.escapeParameter,N=!!y.resolvedMessage,W=isString$3(y.default)||isBoolean$3(y.default)?isBoolean$3(y.default)?g?$:()=>$:y.default:c?g?$:()=>$:"",q=c||W!=="",Y=getLocale(s,y);E&&escapeParams(y);let[re,se,de]=N?[$,Y,b[Y]||{}]:resolveMessageFormat(s,$,Y,v,C,x),he=re,ge=$;if(!N&&!(isString$3(he)||isMessageAST(he)||isMessageFunction(he))&&q&&(he=W,ge=he),!N&&(!(isString$3(he)||isMessageAST(he)||isMessageFunction(he))||!isString$3(se)))return f?NOT_REOSLVED:$;let Se=!1;const Ae=()=>{Se=!0},Re=isMessageFunction(he)?he:compileMessageFormat(s,$,se,he,ge,Ae);if(Se)return he;const Be=getMessageContextOptions(s,se,de,y),Ke=createMessageContext(Be),Lr=evaluateMessage(s,Re,Ke),_y=d?d(Lr,$):Lr;if(__INTLIFY_PROD_DEVTOOLS__){const by={timestamp:Date.now(),key:isString$3($)?$:isMessageFunction(he)?he.key:"",locale:se||(isMessageFunction(he)?he.locale:""),format:isString$3(he)?he:isMessageFunction(he)?he.source:"",message:_y};by.meta=assign$2({},s.__meta,getAdditionalMeta()||{}),translateDevTools(by)}return _y}function escapeParams(s){isArray$3(s.list)?s.list=s.list.map(l=>isString$3(l)?escapeHtml(l):l):isObject$7(s.named)&&Object.keys(s.named).forEach(l=>{isString$3(s.named[l])&&(s.named[l]=escapeHtml(s.named[l]))})}function resolveMessageFormat(s,l,c,d,f,g){const{messages:v,onWarn:b,messageResolver:$,localeFallbacker:y}=s,x=y(s,d,c);let C={},E,N=null;const W="translate";for(let q=0;q<x.length&&(E=x[q],C=v[E]||{},(N=$(C,l))===null&&(N=C[l]),!(isString$3(N)||isMessageAST(N)||isMessageFunction(N)));q++)if(!isImplicitFallback(E,x)){const Y=handleMissing(s,l,E,g,W);Y!==l&&(N=Y)}return[N,E,C]}function compileMessageFormat(s,l,c,d,f,g){const{messageCompiler:v,warnHtmlMessage:b}=s;if(isMessageFunction(d)){const y=d;return y.locale=y.locale||c,y.key=y.key||l,y}if(v==null){const y=()=>d;return y.locale=c,y.key=l,y}const $=v(d,getCompileContext(s,c,f,d,b,g));return $.locale=c,$.key=l,$.source=d,$}function evaluateMessage(s,l,c){return l(c)}function parseTranslateArgs(...s){const[l,c,d]=s,f={};if(!isString$3(l)&&!isNumber$3(l)&&!isMessageFunction(l)&&!isMessageAST(l))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const g=isNumber$3(l)?String(l):(isMessageFunction(l),l);return isNumber$3(c)?f.plural=c:isString$3(c)?f.default=c:isPlainObject$2(c)&&!isEmptyObject$1(c)?f.named=c:isArray$3(c)&&(f.list=c),isNumber$3(d)?f.plural=d:isString$3(d)?f.default=d:isPlainObject$2(d)&&assign$2(f,d),[g,f]}function getCompileContext(s,l,c,d,f,g){return{locale:l,key:c,warnHtmlMessage:f,onError:v=>{throw g&&g(v),v},onCacheKey:v=>generateFormatCacheKey(l,c,v)}}function getMessageContextOptions(s,l,c,d){const{modifiers:f,pluralRules:g,messageResolver:v,fallbackLocale:b,fallbackWarn:$,missingWarn:y,fallbackContext:x}=s,E={locale:l,modifiers:f,pluralRules:g,messages:N=>{let W=v(c,N);if(W==null&&x){const[,,q]=resolveMessageFormat(x,N,l,b,$,y);W=v(q,N)}if(isString$3(W)||isMessageAST(W)){let q=!1;const re=compileMessageFormat(s,N,l,W,N,()=>{q=!0});return q?NOOP_MESSAGE_FUNCTION:re}else return isMessageFunction(W)?W:NOOP_MESSAGE_FUNCTION}};return s.processor&&(E.processor=s.processor),d.list&&(E.list=d.list),d.named&&(E.named=d.named),isNumber$3(d.plural)&&(E.pluralIndex=d.plural),E}function datetime(s,...l){const{datetimeFormats:c,unresolving:d,fallbackLocale:f,onWarn:g,localeFallbacker:v}=s,{__datetimeFormatters:b}=s,[$,y,x,C]=parseDateTimeArgs(...l),E=isBoolean$3(x.missingWarn)?x.missingWarn:s.missingWarn;isBoolean$3(x.fallbackWarn)?x.fallbackWarn:s.fallbackWarn;const N=!!x.part,W=getLocale(s,x),q=v(s,f,W);if(!isString$3($)||$==="")return new Intl.DateTimeFormat(W,C).format(y);let Y={},re,se=null;const de="datetime format";for(let Se=0;Se<q.length&&(re=q[Se],Y=c[re]||{},se=Y[$],!isPlainObject$2(se));Se++)handleMissing(s,$,re,E,de);if(!isPlainObject$2(se)||!isString$3(re))return d?NOT_REOSLVED:$;let he=`${re}__${$}`;isEmptyObject$1(C)||(he=`${he}__${JSON.stringify(C)}`);let ge=b.get(he);return ge||(ge=new Intl.DateTimeFormat(re,assign$2({},se,C)),b.set(he,ge)),N?ge.formatToParts(y):ge.format(y)}const DATETIME_FORMAT_OPTIONS_KEYS=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function parseDateTimeArgs(...s){const[l,c,d,f]=s,g={};let v={},b;if(isString$3(l)){const $=l.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!$)throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT);const y=$[3]?$[3].trim().startsWith("T")?`${$[1].trim()}${$[3].trim()}`:`${$[1].trim()}T${$[3].trim()}`:$[1].trim();b=new Date(y);try{b.toISOString()}catch{throw createCoreError(CoreErrorCodes.INVALID_ISO_DATE_ARGUMENT)}}else if(isDate(l)){if(isNaN(l.getTime()))throw createCoreError(CoreErrorCodes.INVALID_DATE_ARGUMENT);b=l}else if(isNumber$3(l))b=l;else throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);return isString$3(c)?g.key=c:isPlainObject$2(c)&&Object.keys(c).forEach($=>{DATETIME_FORMAT_OPTIONS_KEYS.includes($)?v[$]=c[$]:g[$]=c[$]}),isString$3(d)?g.locale=d:isPlainObject$2(d)&&(v=d),isPlainObject$2(f)&&(v=f),[g.key||"",b,g,v]}function clearDateTimeFormat(s,l,c){const d=s;for(const f in c){const g=`${l}__${f}`;d.__datetimeFormatters.has(g)&&d.__datetimeFormatters.delete(g)}}function number(s,...l){const{numberFormats:c,unresolving:d,fallbackLocale:f,onWarn:g,localeFallbacker:v}=s,{__numberFormatters:b}=s,[$,y,x,C]=parseNumberArgs(...l),E=isBoolean$3(x.missingWarn)?x.missingWarn:s.missingWarn;isBoolean$3(x.fallbackWarn)?x.fallbackWarn:s.fallbackWarn;const N=!!x.part,W=getLocale(s,x),q=v(s,f,W);if(!isString$3($)||$==="")return new Intl.NumberFormat(W,C).format(y);let Y={},re,se=null;const de="number format";for(let Se=0;Se<q.length&&(re=q[Se],Y=c[re]||{},se=Y[$],!isPlainObject$2(se));Se++)handleMissing(s,$,re,E,de);if(!isPlainObject$2(se)||!isString$3(re))return d?NOT_REOSLVED:$;let he=`${re}__${$}`;isEmptyObject$1(C)||(he=`${he}__${JSON.stringify(C)}`);let ge=b.get(he);return ge||(ge=new Intl.NumberFormat(re,assign$2({},se,C)),b.set(he,ge)),N?ge.formatToParts(y):ge.format(y)}const NUMBER_FORMAT_OPTIONS_KEYS=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function parseNumberArgs(...s){const[l,c,d,f]=s,g={};let v={};if(!isNumber$3(l))throw createCoreError(CoreErrorCodes.INVALID_ARGUMENT);const b=l;return isString$3(c)?g.key=c:isPlainObject$2(c)&&Object.keys(c).forEach($=>{NUMBER_FORMAT_OPTIONS_KEYS.includes($)?v[$]=c[$]:g[$]=c[$]}),isString$3(d)?g.locale=d:isPlainObject$2(d)&&(v=d),isPlainObject$2(f)&&(v=f),[g.key||"",b,g,v]}function clearNumberFormat(s,l,c){const d=s;for(const f in c){const g=`${l}__${f}`;d.__numberFormatters.has(g)&&d.__numberFormatters.delete(g)}}initFeatureFlags$1();/*!
  * vue-i18n v9.14.1
  * (c) 2024 kazuya kawaguchi
  * Released under the MIT License.
  */const VERSION="9.14.1";function initFeatureFlags(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(getGlobalThis().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(getGlobalThis().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(getGlobalThis().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(getGlobalThis().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(getGlobalThis().__INTLIFY_PROD_DEVTOOLS__=!1)}const code$1$1=CoreWarnCodes.__EXTEND_POINT__,inc$1=incrementer(code$1$1);inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1(),inc$1();const code$2=CoreErrorCodes.__EXTEND_POINT__,inc=incrementer(code$2),I18nErrorCodes={UNEXPECTED_RETURN_TYPE:code$2,INVALID_ARGUMENT:inc(),MUST_BE_CALL_SETUP_TOP:inc(),NOT_INSTALLED:inc(),NOT_AVAILABLE_IN_LEGACY_MODE:inc(),REQUIRED_VALUE:inc(),INVALID_VALUE:inc(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:inc(),NOT_INSTALLED_WITH_PROVIDE:inc(),UNEXPECTED_ERROR:inc(),NOT_COMPATIBLE_LEGACY_VUE_I18N:inc(),BRIDGE_SUPPORT_VUE_2_ONLY:inc(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:inc(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:inc(),__EXTEND_POINT__:inc()};function createI18nError(s,...l){return createCompileError(s,null,void 0)}const TranslateVNodeSymbol=makeSymbol$1("__translateVNode"),DatetimePartsSymbol=makeSymbol$1("__datetimeParts"),NumberPartsSymbol=makeSymbol$1("__numberParts"),SetPluralRulesSymbol=makeSymbol$1("__setPluralRules"),InejctWithOptionSymbol=makeSymbol$1("__injectWithOption"),DisposeSymbol=makeSymbol$1("__dispose");function handleFlatJson(s){if(!isObject$7(s))return s;for(const l in s)if(hasOwn$1(s,l))if(!l.includes("."))isObject$7(s[l])&&handleFlatJson(s[l]);else{const c=l.split("."),d=c.length-1;let f=s,g=!1;for(let v=0;v<d;v++){if(c[v]in f||(f[c[v]]={}),!isObject$7(f[c[v]])){g=!0;break}f=f[c[v]]}g||(f[c[d]]=s[l],delete s[l]),isObject$7(f[c[d]])&&handleFlatJson(f[c[d]])}return s}function getLocaleMessages(s,l){const{messages:c,__i18n:d,messageResolver:f,flatJson:g}=l,v=isPlainObject$2(c)?c:isArray$3(d)?{}:{[s]:{}};if(isArray$3(d)&&d.forEach(b=>{if("locale"in b&&"resource"in b){const{locale:$,resource:y}=b;$?(v[$]=v[$]||{},deepCopy(y,v[$])):deepCopy(y,v)}else isString$3(b)&&deepCopy(JSON.parse(b),v)}),f==null&&g)for(const b in v)hasOwn$1(v,b)&&handleFlatJson(v[b]);return v}function getComponentOptions(s){return s.type}function adjustI18nResources(s,l,c){let d=isObject$7(l.messages)?l.messages:{};"__i18nGlobal"in c&&(d=getLocaleMessages(s.locale.value,{messages:d,__i18n:c.__i18nGlobal}));const f=Object.keys(d);f.length&&f.forEach(g=>{s.mergeLocaleMessage(g,d[g])});{if(isObject$7(l.datetimeFormats)){const g=Object.keys(l.datetimeFormats);g.length&&g.forEach(v=>{s.mergeDateTimeFormat(v,l.datetimeFormats[v])})}if(isObject$7(l.numberFormats)){const g=Object.keys(l.numberFormats);g.length&&g.forEach(v=>{s.mergeNumberFormat(v,l.numberFormats[v])})}}}function createTextNode(s){return createVNode(Text$3,null,s,0)}const DEVTOOLS_META="__INTLIFY_META__",NOOP_RETURN_ARRAY=()=>[],NOOP_RETURN_FALSE=()=>!1;let composerID=0;function defineCoreMissingHandler(s){return(l,c,d,f)=>s(c,d,getCurrentInstance()||void 0,f)}const getMetaInfo=()=>{const s=getCurrentInstance();let l=null;return s&&(l=getComponentOptions(s)[DEVTOOLS_META])?{[DEVTOOLS_META]:l}:null};function createComposer(s={},l){const{__root:c,__injectWithOption:d}=s,f=c===void 0,g=s.flatJson,v=inBrowser?ref:shallowRef,b=!!s.translateExistCompatible;let $=isBoolean$3(s.inheritLocale)?s.inheritLocale:!0;const y=v(c&&$?c.locale.value:isString$3(s.locale)?s.locale:DEFAULT_LOCALE),x=v(c&&$?c.fallbackLocale.value:isString$3(s.fallbackLocale)||isArray$3(s.fallbackLocale)||isPlainObject$2(s.fallbackLocale)||s.fallbackLocale===!1?s.fallbackLocale:y.value),C=v(getLocaleMessages(y.value,s)),E=v(isPlainObject$2(s.datetimeFormats)?s.datetimeFormats:{[y.value]:{}}),N=v(isPlainObject$2(s.numberFormats)?s.numberFormats:{[y.value]:{}});let W=c?c.missingWarn:isBoolean$3(s.missingWarn)||isRegExp$1(s.missingWarn)?s.missingWarn:!0,q=c?c.fallbackWarn:isBoolean$3(s.fallbackWarn)||isRegExp$1(s.fallbackWarn)?s.fallbackWarn:!0,Y=c?c.fallbackRoot:isBoolean$3(s.fallbackRoot)?s.fallbackRoot:!0,re=!!s.fallbackFormat,se=isFunction$5(s.missing)?s.missing:null,de=isFunction$5(s.missing)?defineCoreMissingHandler(s.missing):null,he=isFunction$5(s.postTranslation)?s.postTranslation:null,ge=c?c.warnHtmlMessage:isBoolean$3(s.warnHtmlMessage)?s.warnHtmlMessage:!0,Se=!!s.escapeParameter;const Ae=c?c.modifiers:isPlainObject$2(s.modifiers)?s.modifiers:{};let Re=s.pluralRules||c&&c.pluralRules,Be;Be=(()=>{f&&setFallbackContext(null);const mS={version:VERSION,locale:y.value,fallbackLocale:x.value,messages:C.value,modifiers:Ae,pluralRules:Re,missing:de===null?void 0:de,missingWarn:W,fallbackWarn:q,fallbackFormat:re,unresolving:!0,postTranslation:he===null?void 0:he,warnHtmlMessage:ge,escapeParameter:Se,messageResolver:s.messageResolver,messageCompiler:s.messageCompiler,__meta:{framework:"vue"}};mS.datetimeFormats=E.value,mS.numberFormats=N.value,mS.__datetimeFormatters=isPlainObject$2(Be)?Be.__datetimeFormatters:void 0,mS.__numberFormatters=isPlainObject$2(Be)?Be.__numberFormatters:void 0;const pS=createCoreContext(mS);return f&&setFallbackContext(pS),pS})(),updateFallbackLocale(Be,y.value,x.value);function Lr(){return[y.value,x.value,C.value,E.value,N.value]}const _y=computed({get:()=>y.value,set:mS=>{y.value=mS,Be.locale=y.value}}),by=computed({get:()=>x.value,set:mS=>{x.value=mS,Be.fallbackLocale=x.value,updateFallbackLocale(Be,y.value,mS)}}),yy=computed(()=>C.value),my=computed(()=>E.value),$t=computed(()=>N.value);function K$(){return isFunction$5(he)?he:null}function Y$(mS){he=mS,Be.postTranslation=mS}function W$(){return se}function U$(mS){mS!==null&&(de=defineCoreMissingHandler(mS)),se=mS,Be.missing=de}const hy=(mS,pS,fC,US,Iye,$ye)=>{Lr();let Rye;try{__INTLIFY_PROD_DEVTOOLS__,f||(Be.fallbackContext=c?getFallbackContext():void 0),Rye=mS(Be)}finally{__INTLIFY_PROD_DEVTOOLS__,f||(Be.fallbackContext=void 0)}if(fC!=="translate exists"&&isNumber$3(Rye)&&Rye===NOT_REOSLVED||fC==="translate exists"&&!Rye){const[Uye,DS]=pS();return c&&Y?US(c):Iye(Uye)}else{if($ye(Rye))return Rye;throw createI18nError(I18nErrorCodes.UNEXPECTED_RETURN_TYPE)}};function G$(...mS){return hy(pS=>Reflect.apply(translate,null,[pS,...mS]),()=>parseTranslateArgs(...mS),"translate",pS=>Reflect.apply(pS.t,pS,[...mS]),pS=>pS,pS=>isString$3(pS))}function ky(...mS){const[pS,fC,US]=mS;if(US&&!isObject$7(US))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);return G$(pS,fC,assign$2({resolvedMessage:!0},US||{}))}function $y(...mS){return hy(pS=>Reflect.apply(datetime,null,[pS,...mS]),()=>parseDateTimeArgs(...mS),"datetime format",pS=>Reflect.apply(pS.d,pS,[...mS]),()=>MISSING_RESOLVE_VALUE,pS=>isString$3(pS))}function rS(...mS){return hy(pS=>Reflect.apply(number,null,[pS,...mS]),()=>parseNumberArgs(...mS),"number format",pS=>Reflect.apply(pS.n,pS,[...mS]),()=>MISSING_RESOLVE_VALUE,pS=>isString$3(pS))}function lS(mS){return mS.map(pS=>isString$3(pS)||isNumber$3(pS)||isBoolean$3(pS)?createTextNode(String(pS)):pS)}const IS={normalize:lS,interpolate:mS=>mS,type:"vnode"};function BS(...mS){return hy(pS=>{let fC;const US=pS;try{US.processor=IS,fC=Reflect.apply(translate,null,[US,...mS])}finally{US.processor=null}return fC},()=>parseTranslateArgs(...mS),"translate",pS=>pS[TranslateVNodeSymbol](...mS),pS=>[createTextNode(pS)],pS=>isArray$3(pS))}function MS(...mS){return hy(pS=>Reflect.apply(number,null,[pS,...mS]),()=>parseNumberArgs(...mS),"number format",pS=>pS[NumberPartsSymbol](...mS),NOOP_RETURN_ARRAY,pS=>isString$3(pS)||isArray$3(pS))}function zS(...mS){return hy(pS=>Reflect.apply(datetime,null,[pS,...mS]),()=>parseDateTimeArgs(...mS),"datetime format",pS=>pS[DatetimePartsSymbol](...mS),NOOP_RETURN_ARRAY,pS=>isString$3(pS)||isArray$3(pS))}function LS(mS){Re=mS,Be.pluralRules=Re}function nS(mS,pS){return hy(()=>{if(!mS)return!1;const fC=isString$3(pS)?pS:y.value,US=ES(fC),Iye=Be.messageResolver(US,mS);return b?Iye!=null:isMessageAST(Iye)||isMessageFunction(Iye)||isString$3(Iye)},()=>[mS],"translate exists",fC=>Reflect.apply(fC.te,fC,[mS,pS]),NOOP_RETURN_FALSE,fC=>isBoolean$3(fC))}function Z$(mS){let pS=null;const fC=fallbackWithLocaleChain(Be,x.value,y.value);for(let US=0;US<fC.length;US++){const Iye=C.value[fC[US]]||{},$ye=Be.messageResolver(Iye,mS);if($ye!=null){pS=$ye;break}}return pS}function dS(mS){const pS=Z$(mS);return pS??(c?c.tm(mS)||{}:{})}function ES(mS){return C.value[mS]||{}}function wy(mS,pS){if(g){const fC={[mS]:pS};for(const US in fC)hasOwn$1(fC,US)&&handleFlatJson(fC[US]);pS=fC[mS]}C.value[mS]=pS,Be.messages=C.value}function tS(mS,pS){C.value[mS]=C.value[mS]||{};const fC={[mS]:pS};if(g)for(const US in fC)hasOwn$1(fC,US)&&handleFlatJson(fC[US]);pS=fC[mS],deepCopy(pS,C.value[mS]),Be.messages=C.value}function yS(mS){return E.value[mS]||{}}function Q$(mS,pS){E.value[mS]=pS,Be.datetimeFormats=E.value,clearDateTimeFormat(Be,mS,pS)}function eS(mS,pS){E.value[mS]=assign$2(E.value[mS]||{},pS),Be.datetimeFormats=E.value,clearDateTimeFormat(Be,mS,pS)}function cS(mS){return N.value[mS]||{}}function wS(mS,pS){N.value[mS]=pS,Be.numberFormats=N.value,clearNumberFormat(Be,mS,pS)}function xS(mS,pS){N.value[mS]=assign$2(N.value[mS]||{},pS),Be.numberFormats=N.value,clearNumberFormat(Be,mS,pS)}composerID++,c&&inBrowser&&(watch(c.locale,mS=>{$&&(y.value=mS,Be.locale=mS,updateFallbackLocale(Be,y.value,x.value))}),watch(c.fallbackLocale,mS=>{$&&(x.value=mS,Be.fallbackLocale=mS,updateFallbackLocale(Be,y.value,x.value))}));const OS={id:composerID,locale:_y,fallbackLocale:by,get inheritLocale(){return $},set inheritLocale(mS){$=mS,mS&&c&&(y.value=c.locale.value,x.value=c.fallbackLocale.value,updateFallbackLocale(Be,y.value,x.value))},get availableLocales(){return Object.keys(C.value).sort()},messages:yy,get modifiers(){return Ae},get pluralRules(){return Re||{}},get isGlobal(){return f},get missingWarn(){return W},set missingWarn(mS){W=mS,Be.missingWarn=W},get fallbackWarn(){return q},set fallbackWarn(mS){q=mS,Be.fallbackWarn=q},get fallbackRoot(){return Y},set fallbackRoot(mS){Y=mS},get fallbackFormat(){return re},set fallbackFormat(mS){re=mS,Be.fallbackFormat=re},get warnHtmlMessage(){return ge},set warnHtmlMessage(mS){ge=mS,Be.warnHtmlMessage=mS},get escapeParameter(){return Se},set escapeParameter(mS){Se=mS,Be.escapeParameter=mS},t:G$,getLocaleMessage:ES,setLocaleMessage:wy,mergeLocaleMessage:tS,getPostTranslationHandler:K$,setPostTranslationHandler:Y$,getMissingHandler:W$,setMissingHandler:U$,[SetPluralRulesSymbol]:LS};return OS.datetimeFormats=my,OS.numberFormats=$t,OS.rt=ky,OS.te=nS,OS.tm=dS,OS.d=$y,OS.n=rS,OS.getDateTimeFormat=yS,OS.setDateTimeFormat=Q$,OS.mergeDateTimeFormat=eS,OS.getNumberFormat=cS,OS.setNumberFormat=wS,OS.mergeNumberFormat=xS,OS[InejctWithOptionSymbol]=d,OS[TranslateVNodeSymbol]=BS,OS[DatetimePartsSymbol]=zS,OS[NumberPartsSymbol]=MS,OS}function convertComposerOptions(s){const l=isString$3(s.locale)?s.locale:DEFAULT_LOCALE,c=isString$3(s.fallbackLocale)||isArray$3(s.fallbackLocale)||isPlainObject$2(s.fallbackLocale)||s.fallbackLocale===!1?s.fallbackLocale:l,d=isFunction$5(s.missing)?s.missing:void 0,f=isBoolean$3(s.silentTranslationWarn)||isRegExp$1(s.silentTranslationWarn)?!s.silentTranslationWarn:!0,g=isBoolean$3(s.silentFallbackWarn)||isRegExp$1(s.silentFallbackWarn)?!s.silentFallbackWarn:!0,v=isBoolean$3(s.fallbackRoot)?s.fallbackRoot:!0,b=!!s.formatFallbackMessages,$=isPlainObject$2(s.modifiers)?s.modifiers:{},y=s.pluralizationRules,x=isFunction$5(s.postTranslation)?s.postTranslation:void 0,C=isString$3(s.warnHtmlInMessage)?s.warnHtmlInMessage!=="off":!0,E=!!s.escapeParameterHtml,N=isBoolean$3(s.sync)?s.sync:!0;let W=s.messages;if(isPlainObject$2(s.sharedMessages)){const Se=s.sharedMessages;W=Object.keys(Se).reduce((Re,Be)=>{const Ke=Re[Be]||(Re[Be]={});return assign$2(Ke,Se[Be]),Re},W||{})}const{__i18n:q,__root:Y,__injectWithOption:re}=s,se=s.datetimeFormats,de=s.numberFormats,he=s.flatJson,ge=s.translateExistCompatible;return{locale:l,fallbackLocale:c,messages:W,flatJson:he,datetimeFormats:se,numberFormats:de,missing:d,missingWarn:f,fallbackWarn:g,fallbackRoot:v,fallbackFormat:b,modifiers:$,pluralRules:y,postTranslation:x,warnHtmlMessage:C,escapeParameter:E,messageResolver:s.messageResolver,inheritLocale:N,translateExistCompatible:ge,__i18n:q,__root:Y,__injectWithOption:re}}function createVueI18n(s={},l){{const c=createComposer(convertComposerOptions(s)),{__extender:d}=s,f={id:c.id,get locale(){return c.locale.value},set locale(g){c.locale.value=g},get fallbackLocale(){return c.fallbackLocale.value},set fallbackLocale(g){c.fallbackLocale.value=g},get messages(){return c.messages.value},get datetimeFormats(){return c.datetimeFormats.value},get numberFormats(){return c.numberFormats.value},get availableLocales(){return c.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(g){},get missing(){return c.getMissingHandler()},set missing(g){c.setMissingHandler(g)},get silentTranslationWarn(){return isBoolean$3(c.missingWarn)?!c.missingWarn:c.missingWarn},set silentTranslationWarn(g){c.missingWarn=isBoolean$3(g)?!g:g},get silentFallbackWarn(){return isBoolean$3(c.fallbackWarn)?!c.fallbackWarn:c.fallbackWarn},set silentFallbackWarn(g){c.fallbackWarn=isBoolean$3(g)?!g:g},get modifiers(){return c.modifiers},get formatFallbackMessages(){return c.fallbackFormat},set formatFallbackMessages(g){c.fallbackFormat=g},get postTranslation(){return c.getPostTranslationHandler()},set postTranslation(g){c.setPostTranslationHandler(g)},get sync(){return c.inheritLocale},set sync(g){c.inheritLocale=g},get warnHtmlInMessage(){return c.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(g){c.warnHtmlMessage=g!=="off"},get escapeParameterHtml(){return c.escapeParameter},set escapeParameterHtml(g){c.escapeParameter=g},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(g){},get pluralizationRules(){return c.pluralRules||{}},__composer:c,t(...g){const[v,b,$]=g,y={};let x=null,C=null;if(!isString$3(v))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const E=v;return isString$3(b)?y.locale=b:isArray$3(b)?x=b:isPlainObject$2(b)&&(C=b),isArray$3($)?x=$:isPlainObject$2($)&&(C=$),Reflect.apply(c.t,c,[E,x||C||{},y])},rt(...g){return Reflect.apply(c.rt,c,[...g])},tc(...g){const[v,b,$]=g,y={plural:1};let x=null,C=null;if(!isString$3(v))throw createI18nError(I18nErrorCodes.INVALID_ARGUMENT);const E=v;return isString$3(b)?y.locale=b:isNumber$3(b)?y.plural=b:isArray$3(b)?x=b:isPlainObject$2(b)&&(C=b),isString$3($)?y.locale=$:isArray$3($)?x=$:isPlainObject$2($)&&(C=$),Reflect.apply(c.t,c,[E,x||C||{},y])},te(g,v){return c.te(g,v)},tm(g){return c.tm(g)},getLocaleMessage(g){return c.getLocaleMessage(g)},setLocaleMessage(g,v){c.setLocaleMessage(g,v)},mergeLocaleMessage(g,v){c.mergeLocaleMessage(g,v)},d(...g){return Reflect.apply(c.d,c,[...g])},getDateTimeFormat(g){return c.getDateTimeFormat(g)},setDateTimeFormat(g,v){c.setDateTimeFormat(g,v)},mergeDateTimeFormat(g,v){c.mergeDateTimeFormat(g,v)},n(...g){return Reflect.apply(c.n,c,[...g])},getNumberFormat(g){return c.getNumberFormat(g)},setNumberFormat(g,v){c.setNumberFormat(g,v)},mergeNumberFormat(g,v){c.mergeNumberFormat(g,v)},getChoiceIndex(g,v){return-1}};return f.__extender=d,f}}const baseFormatProps={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:s=>s==="parent"||s==="global",default:"parent"},i18n:{type:Object}};function getInterpolateArg({slots:s},l){return l.length===1&&l[0]==="default"?(s.default?s.default():[]).reduce((d,f)=>[...d,...f.type===Fragment$1?f.children:[f]],[]):l.reduce((c,d)=>{const f=s[d];return f&&(c[d]=f()),c},{})}function getFragmentableTag(s){return Fragment$1}const TranslationImpl=defineComponent({name:"i18n-t",props:assign$2({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:s=>isNumber$3(s)||!isNaN(s)}},baseFormatProps),setup(s,l){const{slots:c,attrs:d}=l,f=s.i18n||useI18n({useScope:s.scope,__useComponent:!0});return()=>{const g=Object.keys(c).filter(C=>C!=="_"),v={};s.locale&&(v.locale=s.locale),s.plural!==void 0&&(v.plural=isString$3(s.plural)?+s.plural:s.plural);const b=getInterpolateArg(l,g),$=f[TranslateVNodeSymbol](s.keypath,b,v),y=assign$2({},d),x=isString$3(s.tag)||isObject$7(s.tag)?s.tag:getFragmentableTag();return h(x,y,$)}}}),Translation=TranslationImpl;function isVNode(s){return isArray$3(s)&&!isString$3(s[0])}function renderFormatter(s,l,c,d){const{slots:f,attrs:g}=l;return()=>{const v={part:!0};let b={};s.locale&&(v.locale=s.locale),isString$3(s.format)?v.key=s.format:isObject$7(s.format)&&(isString$3(s.format.key)&&(v.key=s.format.key),b=Object.keys(s.format).reduce((E,N)=>c.includes(N)?assign$2({},E,{[N]:s.format[N]}):E,{}));const $=d(s.value,v,b);let y=[v.key];isArray$3($)?y=$.map((E,N)=>{const W=f[E.type],q=W?W({[E.type]:E.value,index:N,parts:$}):[E.value];return isVNode(q)&&(q[0].key=`${E.type}-${N}`),q}):isString$3($)&&(y=[$]);const x=assign$2({},g),C=isString$3(s.tag)||isObject$7(s.tag)?s.tag:getFragmentableTag();return h(C,x,y)}}const NumberFormatImpl=defineComponent({name:"i18n-n",props:assign$2({value:{type:Number,required:!0},format:{type:[String,Object]}},baseFormatProps),setup(s,l){const c=s.i18n||useI18n({useScope:s.scope,__useComponent:!0});return renderFormatter(s,l,NUMBER_FORMAT_OPTIONS_KEYS,(...d)=>c[NumberPartsSymbol](...d))}}),NumberFormat=NumberFormatImpl,DatetimeFormatImpl=defineComponent({name:"i18n-d",props:assign$2({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},baseFormatProps),setup(s,l){const c=s.i18n||useI18n({useScope:s.scope,__useComponent:!0});return renderFormatter(s,l,DATETIME_FORMAT_OPTIONS_KEYS,(...d)=>c[DatetimePartsSymbol](...d))}}),DatetimeFormat=DatetimeFormatImpl;function getComposer$2(s,l){const c=s;if(s.mode==="composition")return c.__getInstance(l)||s.global;{const d=c.__getInstance(l);return d!=null?d.__composer:s.global.__composer}}function vTDirective(s){const l=v=>{const{instance:b,modifiers:$,value:y}=v;if(!b||!b.$)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const x=getComposer$2(s,b.$),C=parseValue(y);return[Reflect.apply(x.t,x,[...makeParams(C)]),x]};return{created:(v,b)=>{const[$,y]=l(b);inBrowser&&s.global===y&&(v.__i18nWatcher=watch(y.locale,()=>{b.instance&&b.instance.$forceUpdate()})),v.__composer=y,v.textContent=$},unmounted:v=>{inBrowser&&v.__i18nWatcher&&(v.__i18nWatcher(),v.__i18nWatcher=void 0,delete v.__i18nWatcher),v.__composer&&(v.__composer=void 0,delete v.__composer)},beforeUpdate:(v,{value:b})=>{if(v.__composer){const $=v.__composer,y=parseValue(b);v.textContent=Reflect.apply($.t,$,[...makeParams(y)])}},getSSRProps:v=>{const[b]=l(v);return{textContent:b}}}}function parseValue(s){if(isString$3(s))return{path:s};if(isPlainObject$2(s)){if(!("path"in s))throw createI18nError(I18nErrorCodes.REQUIRED_VALUE,"path");return s}else throw createI18nError(I18nErrorCodes.INVALID_VALUE)}function makeParams(s){const{path:l,locale:c,args:d,choice:f,plural:g}=s,v={},b=d||{};return isString$3(c)&&(v.locale=c),isNumber$3(f)&&(v.plural=f),isNumber$3(g)&&(v.plural=g),[l,b,v]}function apply$3(s,l,...c){const d=isPlainObject$2(c[0])?c[0]:{},f=!!d.useI18nComponentName;(isBoolean$3(d.globalInstall)?d.globalInstall:!0)&&([f?"i18n":Translation.name,"I18nT"].forEach(v=>s.component(v,Translation)),[NumberFormat.name,"I18nN"].forEach(v=>s.component(v,NumberFormat)),[DatetimeFormat.name,"I18nD"].forEach(v=>s.component(v,DatetimeFormat))),s.directive("t",vTDirective(l))}function defineMixin(s,l,c){return{beforeCreate(){const d=getCurrentInstance();if(!d)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const f=this.$options;if(f.i18n){const g=f.i18n;if(f.__i18n&&(g.__i18n=f.__i18n),g.__root=l,this===this.$root)this.$i18n=mergeToGlobal(s,g);else{g.__injectWithOption=!0,g.__extender=c.__vueI18nExtend,this.$i18n=createVueI18n(g);const v=this.$i18n;v.__extender&&(v.__disposer=v.__extender(this.$i18n))}}else if(f.__i18n)if(this===this.$root)this.$i18n=mergeToGlobal(s,f);else{this.$i18n=createVueI18n({__i18n:f.__i18n,__injectWithOption:!0,__extender:c.__vueI18nExtend,__root:l});const g=this.$i18n;g.__extender&&(g.__disposer=g.__extender(this.$i18n))}else this.$i18n=s;f.__i18nGlobal&&adjustI18nResources(l,f,f),this.$t=(...g)=>this.$i18n.t(...g),this.$rt=(...g)=>this.$i18n.rt(...g),this.$tc=(...g)=>this.$i18n.tc(...g),this.$te=(g,v)=>this.$i18n.te(g,v),this.$d=(...g)=>this.$i18n.d(...g),this.$n=(...g)=>this.$i18n.n(...g),this.$tm=g=>this.$i18n.tm(g),c.__setInstance(d,this.$i18n)},mounted(){},unmounted(){const d=getCurrentInstance();if(!d)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const f=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,f.__disposer&&(f.__disposer(),delete f.__disposer,delete f.__extender),c.__deleteInstance(d),delete this.$i18n}}}function mergeToGlobal(s,l){s.locale=l.locale||s.locale,s.fallbackLocale=l.fallbackLocale||s.fallbackLocale,s.missing=l.missing||s.missing,s.silentTranslationWarn=l.silentTranslationWarn||s.silentFallbackWarn,s.silentFallbackWarn=l.silentFallbackWarn||s.silentFallbackWarn,s.formatFallbackMessages=l.formatFallbackMessages||s.formatFallbackMessages,s.postTranslation=l.postTranslation||s.postTranslation,s.warnHtmlInMessage=l.warnHtmlInMessage||s.warnHtmlInMessage,s.escapeParameterHtml=l.escapeParameterHtml||s.escapeParameterHtml,s.sync=l.sync||s.sync,s.__composer[SetPluralRulesSymbol](l.pluralizationRules||s.pluralizationRules);const c=getLocaleMessages(s.locale,{messages:l.messages,__i18n:l.__i18n});return Object.keys(c).forEach(d=>s.mergeLocaleMessage(d,c[d])),l.datetimeFormats&&Object.keys(l.datetimeFormats).forEach(d=>s.mergeDateTimeFormat(d,l.datetimeFormats[d])),l.numberFormats&&Object.keys(l.numberFormats).forEach(d=>s.mergeNumberFormat(d,l.numberFormats[d])),s}const I18nInjectionKey=makeSymbol$1("global-vue-i18n");function createI18n(s={},l){const c=__VUE_I18N_LEGACY_API__&&isBoolean$3(s.legacy)?s.legacy:__VUE_I18N_LEGACY_API__,d=isBoolean$3(s.globalInjection)?s.globalInjection:!0,f=__VUE_I18N_LEGACY_API__&&c?!!s.allowComposition:!0,g=new Map,[v,b]=createGlobal(s,c),$=makeSymbol$1("");function y(E){return g.get(E)||null}function x(E,N){g.set(E,N)}function C(E){g.delete(E)}{const E={get mode(){return __VUE_I18N_LEGACY_API__&&c?"legacy":"composition"},get allowComposition(){return f},async install(N,...W){if(N.__VUE_I18N_SYMBOL__=$,N.provide(N.__VUE_I18N_SYMBOL__,E),isPlainObject$2(W[0])){const re=W[0];E.__composerExtend=re.__composerExtend,E.__vueI18nExtend=re.__vueI18nExtend}let q=null;!c&&d&&(q=injectGlobalFields(N,E.global)),__VUE_I18N_FULL_INSTALL__&&apply$3(N,E,...W),__VUE_I18N_LEGACY_API__&&c&&N.mixin(defineMixin(b,b.__composer,E));const Y=N.unmount;N.unmount=()=>{q&&q(),E.dispose(),Y()}},get global(){return b},dispose(){v.stop()},__instances:g,__getInstance:y,__setInstance:x,__deleteInstance:C};return E}}function useI18n(s={}){const l=getCurrentInstance();if(l==null)throw createI18nError(I18nErrorCodes.MUST_BE_CALL_SETUP_TOP);if(!l.isCE&&l.appContext.app!=null&&!l.appContext.app.__VUE_I18N_SYMBOL__)throw createI18nError(I18nErrorCodes.NOT_INSTALLED);const c=getI18nInstance(l),d=getGlobalComposer(c),f=getComponentOptions(l),g=getScope$1(s,f);if(__VUE_I18N_LEGACY_API__&&c.mode==="legacy"&&!s.__useComponent){if(!c.allowComposition)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_IN_LEGACY_MODE);return useI18nForLegacy(l,g,d,s)}if(g==="global")return adjustI18nResources(d,s,f),d;if(g==="parent"){let $=getComposer(c,l,s.__useComponent);return $==null&&($=d),$}const v=c;let b=v.__getInstance(l);if(b==null){const $=assign$2({},s);"__i18n"in f&&($.__i18n=f.__i18n),d&&($.__root=d),b=createComposer($),v.__composerExtend&&(b[DisposeSymbol]=v.__composerExtend(b)),setupLifeCycle(v,l,b),v.__setInstance(l,b)}return b}function createGlobal(s,l,c){const d=effectScope();{const f=__VUE_I18N_LEGACY_API__&&l?d.run(()=>createVueI18n(s)):d.run(()=>createComposer(s));if(f==null)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);return[d,f]}}function getI18nInstance(s){{const l=inject(s.isCE?I18nInjectionKey:s.appContext.app.__VUE_I18N_SYMBOL__);if(!l)throw createI18nError(s.isCE?I18nErrorCodes.NOT_INSTALLED_WITH_PROVIDE:I18nErrorCodes.UNEXPECTED_ERROR);return l}}function getScope$1(s,l){return isEmptyObject$1(s)?"__i18n"in l?"local":"global":s.useScope?s.useScope:"local"}function getGlobalComposer(s){return s.mode==="composition"?s.global:s.global.__composer}function getComposer(s,l,c=!1){let d=null;const f=l.root;let g=getParentComponentInstance(l,c);for(;g!=null;){const v=s;if(s.mode==="composition")d=v.__getInstance(g);else if(__VUE_I18N_LEGACY_API__){const b=v.__getInstance(g);b!=null&&(d=b.__composer,c&&d&&!d[InejctWithOptionSymbol]&&(d=null))}if(d!=null||f===g)break;g=g.parent}return d}function getParentComponentInstance(s,l=!1){return s==null?null:l&&s.vnode.ctx||s.parent}function setupLifeCycle(s,l,c){onMounted(()=>{},l),onUnmounted(()=>{const d=c;s.__deleteInstance(l);const f=d[DisposeSymbol];f&&(f(),delete d[DisposeSymbol])},l)}function useI18nForLegacy(s,l,c,d={}){const f=l==="local",g=shallowRef(null);if(f&&s.proxy&&!(s.proxy.$options.i18n||s.proxy.$options.__i18n))throw createI18nError(I18nErrorCodes.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const v=isBoolean$3(d.inheritLocale)?d.inheritLocale:!isString$3(d.locale),b=ref(!f||v?c.locale.value:isString$3(d.locale)?d.locale:DEFAULT_LOCALE),$=ref(!f||v?c.fallbackLocale.value:isString$3(d.fallbackLocale)||isArray$3(d.fallbackLocale)||isPlainObject$2(d.fallbackLocale)||d.fallbackLocale===!1?d.fallbackLocale:b.value),y=ref(getLocaleMessages(b.value,d)),x=ref(isPlainObject$2(d.datetimeFormats)?d.datetimeFormats:{[b.value]:{}}),C=ref(isPlainObject$2(d.numberFormats)?d.numberFormats:{[b.value]:{}}),E=f?c.missingWarn:isBoolean$3(d.missingWarn)||isRegExp$1(d.missingWarn)?d.missingWarn:!0,N=f?c.fallbackWarn:isBoolean$3(d.fallbackWarn)||isRegExp$1(d.fallbackWarn)?d.fallbackWarn:!0,W=f?c.fallbackRoot:isBoolean$3(d.fallbackRoot)?d.fallbackRoot:!0,q=!!d.fallbackFormat,Y=isFunction$5(d.missing)?d.missing:null,re=isFunction$5(d.postTranslation)?d.postTranslation:null,se=f?c.warnHtmlMessage:isBoolean$3(d.warnHtmlMessage)?d.warnHtmlMessage:!0,de=!!d.escapeParameter,he=f?c.modifiers:isPlainObject$2(d.modifiers)?d.modifiers:{},ge=d.pluralRules||f&&c.pluralRules;function Se(){return[b.value,$.value,y.value,x.value,C.value]}const Ae=computed({get:()=>g.value?g.value.locale.value:b.value,set:Z$=>{g.value&&(g.value.locale.value=Z$),b.value=Z$}}),Re=computed({get:()=>g.value?g.value.fallbackLocale.value:$.value,set:Z$=>{g.value&&(g.value.fallbackLocale.value=Z$),$.value=Z$}}),Be=computed(()=>g.value?g.value.messages.value:y.value),Ke=computed(()=>x.value),Lr=computed(()=>C.value);function _y(){return g.value?g.value.getPostTranslationHandler():re}function by(Z$){g.value&&g.value.setPostTranslationHandler(Z$)}function yy(){return g.value?g.value.getMissingHandler():Y}function my(Z$){g.value&&g.value.setMissingHandler(Z$)}function $t(Z$){return Se(),Z$()}function K$(...Z$){return g.value?$t(()=>Reflect.apply(g.value.t,null,[...Z$])):$t(()=>"")}function Y$(...Z$){return g.value?Reflect.apply(g.value.rt,null,[...Z$]):""}function W$(...Z$){return g.value?$t(()=>Reflect.apply(g.value.d,null,[...Z$])):$t(()=>"")}function U$(...Z$){return g.value?$t(()=>Reflect.apply(g.value.n,null,[...Z$])):$t(()=>"")}function hy(Z$){return g.value?g.value.tm(Z$):{}}function G$(Z$,dS){return g.value?g.value.te(Z$,dS):!1}function ky(Z$){return g.value?g.value.getLocaleMessage(Z$):{}}function $y(Z$,dS){g.value&&(g.value.setLocaleMessage(Z$,dS),y.value[Z$]=dS)}function rS(Z$,dS){g.value&&g.value.mergeLocaleMessage(Z$,dS)}function lS(Z$){return g.value?g.value.getDateTimeFormat(Z$):{}}function bS(Z$,dS){g.value&&(g.value.setDateTimeFormat(Z$,dS),x.value[Z$]=dS)}function IS(Z$,dS){g.value&&g.value.mergeDateTimeFormat(Z$,dS)}function BS(Z$){return g.value?g.value.getNumberFormat(Z$):{}}function MS(Z$,dS){g.value&&(g.value.setNumberFormat(Z$,dS),C.value[Z$]=dS)}function zS(Z$,dS){g.value&&g.value.mergeNumberFormat(Z$,dS)}const LS={get id(){return g.value?g.value.id:-1},locale:Ae,fallbackLocale:Re,messages:Be,datetimeFormats:Ke,numberFormats:Lr,get inheritLocale(){return g.value?g.value.inheritLocale:v},set inheritLocale(Z$){g.value&&(g.value.inheritLocale=Z$)},get availableLocales(){return g.value?g.value.availableLocales:Object.keys(y.value)},get modifiers(){return g.value?g.value.modifiers:he},get pluralRules(){return g.value?g.value.pluralRules:ge},get isGlobal(){return g.value?g.value.isGlobal:!1},get missingWarn(){return g.value?g.value.missingWarn:E},set missingWarn(Z$){g.value&&(g.value.missingWarn=Z$)},get fallbackWarn(){return g.value?g.value.fallbackWarn:N},set fallbackWarn(Z$){g.value&&(g.value.missingWarn=Z$)},get fallbackRoot(){return g.value?g.value.fallbackRoot:W},set fallbackRoot(Z$){g.value&&(g.value.fallbackRoot=Z$)},get fallbackFormat(){return g.value?g.value.fallbackFormat:q},set fallbackFormat(Z$){g.value&&(g.value.fallbackFormat=Z$)},get warnHtmlMessage(){return g.value?g.value.warnHtmlMessage:se},set warnHtmlMessage(Z$){g.value&&(g.value.warnHtmlMessage=Z$)},get escapeParameter(){return g.value?g.value.escapeParameter:de},set escapeParameter(Z$){g.value&&(g.value.escapeParameter=Z$)},t:K$,getPostTranslationHandler:_y,setPostTranslationHandler:by,getMissingHandler:yy,setMissingHandler:my,rt:Y$,d:W$,n:U$,tm:hy,te:G$,getLocaleMessage:ky,setLocaleMessage:$y,mergeLocaleMessage:rS,getDateTimeFormat:lS,setDateTimeFormat:bS,mergeDateTimeFormat:IS,getNumberFormat:BS,setNumberFormat:MS,mergeNumberFormat:zS};function nS(Z$){Z$.locale.value=b.value,Z$.fallbackLocale.value=$.value,Object.keys(y.value).forEach(dS=>{Z$.mergeLocaleMessage(dS,y.value[dS])}),Object.keys(x.value).forEach(dS=>{Z$.mergeDateTimeFormat(dS,x.value[dS])}),Object.keys(C.value).forEach(dS=>{Z$.mergeNumberFormat(dS,C.value[dS])}),Z$.escapeParameter=de,Z$.fallbackFormat=q,Z$.fallbackRoot=W,Z$.fallbackWarn=N,Z$.missingWarn=E,Z$.warnHtmlMessage=se}return onBeforeMount(()=>{if(s.proxy==null||s.proxy.$i18n==null)throw createI18nError(I18nErrorCodes.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const Z$=g.value=s.proxy.$i18n.__composer;l==="global"?(b.value=Z$.locale.value,$.value=Z$.fallbackLocale.value,y.value=Z$.messages.value,x.value=Z$.datetimeFormats.value,C.value=Z$.numberFormats.value):f&&nS(Z$)}),LS}const globalExportProps=["locale","fallbackLocale","availableLocales"],globalExportMethods=["t","rt","d","n","tm","te"];function injectGlobalFields(s,l){const c=Object.create(null);return globalExportProps.forEach(f=>{const g=Object.getOwnPropertyDescriptor(l,f);if(!g)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);const v=isRef(g.value)?{get(){return g.value.value},set(b){g.value.value=b}}:{get(){return g.get&&g.get()}};Object.defineProperty(c,f,v)}),s.config.globalProperties.$i18n=c,globalExportMethods.forEach(f=>{const g=Object.getOwnPropertyDescriptor(l,f);if(!g||!g.value)throw createI18nError(I18nErrorCodes.UNEXPECTED_ERROR);Object.defineProperty(s.config.globalProperties,`$${f}`,g)}),()=>{delete s.config.globalProperties.$i18n,globalExportMethods.forEach(f=>{delete s.config.globalProperties[`$${f}`]})}}initFeatureFlags();__INTLIFY_JIT_COMPILATION__?registerMessageCompiler(compile$1):registerMessageCompiler(compileToFunction);registerMessageResolver(resolveValue);registerLocaleFallbacker(fallbackWithLocaleChain);if(__INTLIFY_PROD_DEVTOOLS__){const s=getGlobalThis();s.__INTLIFY__=!0,setDevToolsHook(s.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}class MergeStrategy{static overwrite(l,c){return c}static replace(l,c){return typeof c<"u"?c:l}static assign(l,c){return Object.assign({},l,c)}}class ValidationStrategy{static array(l){if(!Array.isArray(l))throw new TypeError("Expected an array.")}static boolean(l){if(typeof l!="boolean")throw new TypeError("Expected a Boolean.")}static number(l){if(typeof l!="number")throw new TypeError("Expected a number.")}static object(l){if(!l||typeof l!="object")throw new TypeError("Expected an object.")}static"object?"(l){if(typeof l!="object")throw new TypeError("Expected an object or null.")}static string(l){if(typeof l!="string")throw new TypeError("Expected a string.")}static"string!"(l){if(typeof l!="string"||l.length===0)throw new TypeError("Expected a non-empty string.")}}function validateDefinition(s,l){let c=!1;if(l.schema)if(typeof l.schema=="object")c=!0;else throw new TypeError("Schema must be an object.");if(typeof l.merge=="string"){if(!(l.merge in MergeStrategy))throw new TypeError(`Definition for key "${s}" missing valid merge strategy.`)}else if(!c&&typeof l.merge!="function")throw new TypeError(`Definition for key "${s}" must have a merge property.`);if(typeof l.validate=="string"){if(!(l.validate in ValidationStrategy))throw new TypeError(`Definition for key "${s}" missing valid validation strategy.`)}else if(!c&&typeof l.validate!="function")throw new TypeError(`Definition for key "${s}" must have a validate() method.`)}class UnexpectedKeyError extends Error{constructor(l){super(`Unexpected key "${l}" found.`)}}class MissingKeyError extends Error{constructor(l){super(`Missing required key "${l}".`)}}class MissingDependentKeysError extends Error{constructor(l,c){super(`Key "${l}" requires keys "${c.join('", "')}".`)}}class WrapperError extends Error{constructor(l,c){super(`Key "${l}": ${c.message}`,{cause:c});for(const d of Object.keys(c))d in this||(this[d]=c[d])}}var L_e,B$e;const LSe=class LSe{constructor(l){OSe(this,L_e,new Map);OSe(this,B$e,new Map);if(!l)throw new Error("Schema definitions missing.");for(const c of Object.keys(l)){if(validateDefinition(c,l[c]),typeof l[c].schema=="object"){const d=new LSe(l[c].schema);l[c]={...l[c],merge(f={},g={}){return d.merge(f,g)},validate(f){ValidationStrategy.object(f),d.validate(f)}}}typeof l[c].merge=="string"&&(l[c]={...l[c],merge:MergeStrategy[l[c].merge]}),typeof l[c].validate=="string"&&(l[c]={...l[c],validate:ValidationStrategy[l[c].validate]}),D_e(this,L_e).set(c,l[c]),l[c].required&&D_e(this,B$e).set(c,l[c])}}hasKey(l){return D_e(this,L_e).has(l)}merge(...l){if(l.length<2)throw new TypeError("merge() requires at least two arguments.");if(l.some(c=>c===null||typeof c!="object"))throw new TypeError("All arguments must be objects.");return l.reduce((c,d)=>{this.validate(d);for(const[f,g]of D_e(this,L_e))try{if(f in c||f in d){const b=g.merge.call(this,c[f],d[f]);b!==void 0&&(c[f]=b)}}catch(v){throw new WrapperError(f,v)}return c},{})}validate(l){for(const c of Object.keys(l)){if(!this.hasKey(c))throw new UnexpectedKeyError(c);const d=D_e(this,L_e).get(c);if(Array.isArray(d.requires)&&!d.requires.every(f=>f in l))throw new MissingDependentKeysError(c,d.requires);try{d.validate.call(d,l[c])}catch(f){throw new WrapperError(c,f)}}for(const[c]of D_e(this,B$e))if(!(c in l))throw new MissingKeyError(c)}};L_e=new WeakMap,B$e=new WeakMap;let ObjectSchema=LSe;function OrderedMap(s){this.content=s}OrderedMap.prototype={constructor:OrderedMap,find:function(s){for(var l=0;l<this.content.length;l+=2)if(this.content[l]===s)return l;return-1},get:function(s){var l=this.find(s);return l==-1?void 0:this.content[l+1]},update:function(s,l,c){var d=c&&c!=s?this.remove(c):this,f=d.find(s),g=d.content.slice();return f==-1?g.push(c||s,l):(g[f+1]=l,c&&(g[f]=c)),new OrderedMap(g)},remove:function(s){var l=this.find(s);if(l==-1)return this;var c=this.content.slice();return c.splice(l,2),new OrderedMap(c)},addToStart:function(s,l){return new OrderedMap([s,l].concat(this.remove(s).content))},addToEnd:function(s,l){var c=this.remove(s).content.slice();return c.push(s,l),new OrderedMap(c)},addBefore:function(s,l,c){var d=this.remove(l),f=d.content.slice(),g=d.find(s);return f.splice(g==-1?f.length:g,0,l,c),new OrderedMap(f)},forEach:function(s){for(var l=0;l<this.content.length;l+=2)s(this.content[l],this.content[l+1])},prepend:function(s){return s=OrderedMap.from(s),s.size?new OrderedMap(s.content.concat(this.subtract(s).content)):this},append:function(s){return s=OrderedMap.from(s),s.size?new OrderedMap(this.subtract(s).content.concat(s.content)):this},subtract:function(s){var l=this;s=OrderedMap.from(s);for(var c=0;c<s.content.length;c+=2)l=l.remove(s.content[c]);return l},toObject:function(){var s={};return this.forEach(function(l,c){s[l]=c}),s},get size(){return this.content.length>>1}};OrderedMap.from=function(s){if(s instanceof OrderedMap)return s;var l=[];if(s)for(var c in s)l.push(c,s[c]);return new OrderedMap(l)};function findDiffStart(s,l,c){for(let d=0;;d++){if(d==s.childCount||d==l.childCount)return s.childCount==l.childCount?null:c;let f=s.child(d),g=l.child(d);if(f==g){c+=f.nodeSize;continue}if(!f.sameMarkup(g))return c;if(f.isText&&f.text!=g.text){for(let v=0;f.text[v]==g.text[v];v++)c++;return c}if(f.content.size||g.content.size){let v=findDiffStart(f.content,g.content,c+1);if(v!=null)return v}c+=f.nodeSize}}function findDiffEnd(s,l,c,d){for(let f=s.childCount,g=l.childCount;;){if(f==0||g==0)return f==g?null:{a:c,b:d};let v=s.child(--f),b=l.child(--g),$=v.nodeSize;if(v==b){c-=$,d-=$;continue}if(!v.sameMarkup(b))return{a:c,b:d};if(v.isText&&v.text!=b.text){let y=0,x=Math.min(v.text.length,b.text.length);for(;y<x&&v.text[v.text.length-y-1]==b.text[b.text.length-y-1];)y++,c--,d--;return{a:c,b:d}}if(v.content.size||b.content.size){let y=findDiffEnd(v.content,b.content,c-1,d-1);if(y)return y}c-=$,d-=$}}class Fragment{constructor(l,c){if(this.content=l,this.size=c||0,c==null)for(let d=0;d<l.length;d++)this.size+=l[d].nodeSize}nodesBetween(l,c,d,f=0,g){for(let v=0,b=0;b<c;v++){let $=this.content[v],y=b+$.nodeSize;if(y>l&&d($,f+b,g||null,v)!==!1&&$.content.size){let x=b+1;$.nodesBetween(Math.max(0,l-x),Math.min($.content.size,c-x),d,f+x)}b=y}}descendants(l){this.nodesBetween(0,this.size,l)}textBetween(l,c,d,f){let g="",v=!0;return this.nodesBetween(l,c,(b,$)=>{let y=b.isText?b.text.slice(Math.max(l,$)-$,c-$):b.isLeaf?f?typeof f=="function"?f(b):f:b.type.spec.leafText?b.type.spec.leafText(b):"":"";b.isBlock&&(b.isLeaf&&y||b.isTextblock)&&d&&(v?v=!1:g+=d),g+=y},0),g}append(l){if(!l.size)return this;if(!this.size)return l;let c=this.lastChild,d=l.firstChild,f=this.content.slice(),g=0;for(c.isText&&c.sameMarkup(d)&&(f[f.length-1]=c.withText(c.text+d.text),g=1);g<l.content.length;g++)f.push(l.content[g]);return new Fragment(f,this.size+l.size)}cut(l,c=this.size){if(l==0&&c==this.size)return this;let d=[],f=0;if(c>l)for(let g=0,v=0;v<c;g++){let b=this.content[g],$=v+b.nodeSize;$>l&&((v<l||$>c)&&(b.isText?b=b.cut(Math.max(0,l-v),Math.min(b.text.length,c-v)):b=b.cut(Math.max(0,l-v-1),Math.min(b.content.size,c-v-1))),d.push(b),f+=b.nodeSize),v=$}return new Fragment(d,f)}cutByIndex(l,c){return l==c?Fragment.empty:l==0&&c==this.content.length?this:new Fragment(this.content.slice(l,c))}replaceChild(l,c){let d=this.content[l];if(d==c)return this;let f=this.content.slice(),g=this.size+c.nodeSize-d.nodeSize;return f[l]=c,new Fragment(f,g)}addToStart(l){return new Fragment([l].concat(this.content),this.size+l.nodeSize)}addToEnd(l){return new Fragment(this.content.concat(l),this.size+l.nodeSize)}eq(l){if(this.content.length!=l.content.length)return!1;for(let c=0;c<this.content.length;c++)if(!this.content[c].eq(l.content[c]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(l){let c=this.content[l];if(!c)throw new RangeError("Index "+l+" out of range for "+this);return c}maybeChild(l){return this.content[l]||null}forEach(l){for(let c=0,d=0;c<this.content.length;c++){let f=this.content[c];l(f,d,c),d+=f.nodeSize}}findDiffStart(l,c=0){return findDiffStart(this,l,c)}findDiffEnd(l,c=this.size,d=l.size){return findDiffEnd(this,l,c,d)}findIndex(l,c=-1){if(l==0)return retIndex(0,l);if(l==this.size)return retIndex(this.content.length,l);if(l>this.size||l<0)throw new RangeError(`Position ${l} outside of fragment (${this})`);for(let d=0,f=0;;d++){let g=this.child(d),v=f+g.nodeSize;if(v>=l)return v==l||c>0?retIndex(d+1,v):retIndex(d,f);f=v}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(l=>l.toJSON()):null}static fromJSON(l,c){if(!c)return Fragment.empty;if(!Array.isArray(c))throw new RangeError("Invalid input for Fragment.fromJSON");return new Fragment(c.map(l.nodeFromJSON))}static fromArray(l){if(!l.length)return Fragment.empty;let c,d=0;for(let f=0;f<l.length;f++){let g=l[f];d+=g.nodeSize,f&&g.isText&&l[f-1].sameMarkup(g)?(c||(c=l.slice(0,f)),c[c.length-1]=g.withText(c[c.length-1].text+g.text)):c&&c.push(g)}return new Fragment(c||l,d)}static from(l){if(!l)return Fragment.empty;if(l instanceof Fragment)return l;if(Array.isArray(l))return this.fromArray(l);if(l.attrs)return new Fragment([l],l.nodeSize);throw new RangeError("Can not convert "+l+" to a Fragment"+(l.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Fragment.empty=new Fragment([],0);const found={index:0,offset:0};function retIndex(s,l){return found.index=s,found.offset=l,found}function compareDeep(s,l){if(s===l)return!0;if(!(s&&typeof s=="object")||!(l&&typeof l=="object"))return!1;let c=Array.isArray(s);if(Array.isArray(l)!=c)return!1;if(c){if(s.length!=l.length)return!1;for(let d=0;d<s.length;d++)if(!compareDeep(s[d],l[d]))return!1}else{for(let d in s)if(!(d in l)||!compareDeep(s[d],l[d]))return!1;for(let d in l)if(!(d in s))return!1}return!0}let Mark$1=class ASe{constructor(l,c){this.type=l,this.attrs=c}addToSet(l){let c,d=!1;for(let f=0;f<l.length;f++){let g=l[f];if(this.eq(g))return l;if(this.type.excludes(g.type))c||(c=l.slice(0,f));else{if(g.type.excludes(this.type))return l;!d&&g.type.rank>this.type.rank&&(c||(c=l.slice(0,f)),c.push(this),d=!0),c&&c.push(g)}}return c||(c=l.slice()),d||c.push(this),c}removeFromSet(l){for(let c=0;c<l.length;c++)if(this.eq(l[c]))return l.slice(0,c).concat(l.slice(c+1));return l}isInSet(l){for(let c=0;c<l.length;c++)if(this.eq(l[c]))return!0;return!1}eq(l){return this==l||this.type==l.type&&compareDeep(this.attrs,l.attrs)}toJSON(){let l={type:this.type.name};for(let c in this.attrs){l.attrs=this.attrs;break}return l}static fromJSON(l,c){if(!c)throw new RangeError("Invalid input for Mark.fromJSON");let d=l.marks[c.type];if(!d)throw new RangeError(`There is no mark type ${c.type} in this schema`);let f=d.create(c.attrs);return d.checkAttrs(f.attrs),f}static sameSet(l,c){if(l==c)return!0;if(l.length!=c.length)return!1;for(let d=0;d<l.length;d++)if(!l[d].eq(c[d]))return!1;return!0}static setFrom(l){if(!l||Array.isArray(l)&&l.length==0)return ASe.none;if(l instanceof ASe)return[l];let c=l.slice();return c.sort((d,f)=>d.type.rank-f.type.rank),c}};Mark$1.none=[];class ReplaceError extends Error{}class Slice{constructor(l,c,d){this.content=l,this.openStart=c,this.openEnd=d}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(l,c){let d=insertInto(this.content,l+this.openStart,c);return d&&new Slice(d,this.openStart,this.openEnd)}removeBetween(l,c){return new Slice(removeRange(this.content,l+this.openStart,c+this.openStart),this.openStart,this.openEnd)}eq(l){return this.content.eq(l.content)&&this.openStart==l.openStart&&this.openEnd==l.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let l={content:this.content.toJSON()};return this.openStart>0&&(l.openStart=this.openStart),this.openEnd>0&&(l.openEnd=this.openEnd),l}static fromJSON(l,c){if(!c)return Slice.empty;let d=c.openStart||0,f=c.openEnd||0;if(typeof d!="number"||typeof f!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Slice(Fragment.fromJSON(l,c.content),d,f)}static maxOpen(l,c=!0){let d=0,f=0;for(let g=l.firstChild;g&&!g.isLeaf&&(c||!g.type.spec.isolating);g=g.firstChild)d++;for(let g=l.lastChild;g&&!g.isLeaf&&(c||!g.type.spec.isolating);g=g.lastChild)f++;return new Slice(l,d,f)}}Slice.empty=new Slice(Fragment.empty,0,0);function removeRange(s,l,c){let{index:d,offset:f}=s.findIndex(l),g=s.maybeChild(d),{index:v,offset:b}=s.findIndex(c);if(f==l||g.isText){if(b!=c&&!s.child(v).isText)throw new RangeError("Removing non-flat range");return s.cut(0,l).append(s.cut(c))}if(d!=v)throw new RangeError("Removing non-flat range");return s.replaceChild(d,g.copy(removeRange(g.content,l-f-1,c-f-1)))}function insertInto(s,l,c,d){let{index:f,offset:g}=s.findIndex(l),v=s.maybeChild(f);if(g==l||v.isText)return s.cut(0,l).append(c).append(s.cut(l));let b=insertInto(v.content,l-g-1,c);return b&&s.replaceChild(f,v.copy(b))}function replace$1(s,l,c){if(c.openStart>s.depth)throw new ReplaceError("Inserted content deeper than insertion position");if(s.depth-c.openStart!=l.depth-c.openEnd)throw new ReplaceError("Inconsistent open depths");return replaceOuter(s,l,c,0)}function replaceOuter(s,l,c,d){let f=s.index(d),g=s.node(d);if(f==l.index(d)&&d<s.depth-c.openStart){let v=replaceOuter(s,l,c,d+1);return g.copy(g.content.replaceChild(f,v))}else if(c.content.size)if(!c.openStart&&!c.openEnd&&s.depth==d&&l.depth==d){let v=s.parent,b=v.content;return close$1(v,b.cut(0,s.parentOffset).append(c.content).append(b.cut(l.parentOffset)))}else{let{start:v,end:b}=prepareSliceForReplace(c,s);return close$1(g,replaceThreeWay(s,v,b,l,d))}else return close$1(g,replaceTwoWay(s,l,d))}function checkJoin(s,l){if(!l.type.compatibleContent(s.type))throw new ReplaceError("Cannot join "+l.type.name+" onto "+s.type.name)}function joinable$1(s,l,c){let d=s.node(c);return checkJoin(d,l.node(c)),d}function addNode(s,l){let c=l.length-1;c>=0&&s.isText&&s.sameMarkup(l[c])?l[c]=s.withText(l[c].text+s.text):l.push(s)}function addRange(s,l,c,d){let f=(l||s).node(c),g=0,v=l?l.index(c):f.childCount;s&&(g=s.index(c),s.depth>c?g++:s.textOffset&&(addNode(s.nodeAfter,d),g++));for(let b=g;b<v;b++)addNode(f.child(b),d);l&&l.depth==c&&l.textOffset&&addNode(l.nodeBefore,d)}function close$1(s,l){return s.type.checkContent(l),s.copy(l)}function replaceThreeWay(s,l,c,d,f){let g=s.depth>f&&joinable$1(s,l,f+1),v=d.depth>f&&joinable$1(c,d,f+1),b=[];return addRange(null,s,f,b),g&&v&&l.index(f)==c.index(f)?(checkJoin(g,v),addNode(close$1(g,replaceThreeWay(s,l,c,d,f+1)),b)):(g&&addNode(close$1(g,replaceTwoWay(s,l,f+1)),b),addRange(l,c,f,b),v&&addNode(close$1(v,replaceTwoWay(c,d,f+1)),b)),addRange(d,null,f,b),new Fragment(b)}function replaceTwoWay(s,l,c){let d=[];if(addRange(null,s,c,d),s.depth>c){let f=joinable$1(s,l,c+1);addNode(close$1(f,replaceTwoWay(s,l,c+1)),d)}return addRange(l,null,c,d),new Fragment(d)}function prepareSliceForReplace(s,l){let c=l.depth-s.openStart,f=l.node(c).copy(s.content);for(let g=c-1;g>=0;g--)f=l.node(g).copy(Fragment.from(f));return{start:f.resolveNoCache(s.openStart+c),end:f.resolveNoCache(f.content.size-s.openEnd-c)}}class ResolvedPos{constructor(l,c,d){this.pos=l,this.path=c,this.parentOffset=d,this.depth=c.length/3-1}resolveDepth(l){return l==null?this.depth:l<0?this.depth+l:l}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(l){return this.path[this.resolveDepth(l)*3]}index(l){return this.path[this.resolveDepth(l)*3+1]}indexAfter(l){return l=this.resolveDepth(l),this.index(l)+(l==this.depth&&!this.textOffset?0:1)}start(l){return l=this.resolveDepth(l),l==0?0:this.path[l*3-1]+1}end(l){return l=this.resolveDepth(l),this.start(l)+this.node(l).content.size}before(l){if(l=this.resolveDepth(l),!l)throw new RangeError("There is no position before the top-level node");return l==this.depth+1?this.pos:this.path[l*3-1]}after(l){if(l=this.resolveDepth(l),!l)throw new RangeError("There is no position after the top-level node");return l==this.depth+1?this.pos:this.path[l*3-1]+this.path[l*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let l=this.parent,c=this.index(this.depth);if(c==l.childCount)return null;let d=this.pos-this.path[this.path.length-1],f=l.child(c);return d?l.child(c).cut(d):f}get nodeBefore(){let l=this.index(this.depth),c=this.pos-this.path[this.path.length-1];return c?this.parent.child(l).cut(0,c):l==0?null:this.parent.child(l-1)}posAtIndex(l,c){c=this.resolveDepth(c);let d=this.path[c*3],f=c==0?0:this.path[c*3-1]+1;for(let g=0;g<l;g++)f+=d.child(g).nodeSize;return f}marks(){let l=this.parent,c=this.index();if(l.content.size==0)return Mark$1.none;if(this.textOffset)return l.child(c).marks;let d=l.maybeChild(c-1),f=l.maybeChild(c);if(!d){let b=d;d=f,f=b}let g=d.marks;for(var v=0;v<g.length;v++)g[v].type.spec.inclusive===!1&&(!f||!g[v].isInSet(f.marks))&&(g=g[v--].removeFromSet(g));return g}marksAcross(l){let c=this.parent.maybeChild(this.index());if(!c||!c.isInline)return null;let d=c.marks,f=l.parent.maybeChild(l.index());for(var g=0;g<d.length;g++)d[g].type.spec.inclusive===!1&&(!f||!d[g].isInSet(f.marks))&&(d=d[g--].removeFromSet(d));return d}sharedDepth(l){for(let c=this.depth;c>0;c--)if(this.start(c)<=l&&this.end(c)>=l)return c;return 0}blockRange(l=this,c){if(l.pos<this.pos)return l.blockRange(this);for(let d=this.depth-(this.parent.inlineContent||this.pos==l.pos?1:0);d>=0;d--)if(l.pos<=this.end(d)&&(!c||c(this.node(d))))return new NodeRange(this,l,d);return null}sameParent(l){return this.pos-this.parentOffset==l.pos-l.parentOffset}max(l){return l.pos>this.pos?l:this}min(l){return l.pos<this.pos?l:this}toString(){let l="";for(let c=1;c<=this.depth;c++)l+=(l?"/":"")+this.node(c).type.name+"_"+this.index(c-1);return l+":"+this.parentOffset}static resolve(l,c){if(!(c>=0&&c<=l.content.size))throw new RangeError("Position "+c+" out of range");let d=[],f=0,g=c;for(let v=l;;){let{index:b,offset:$}=v.content.findIndex(g),y=g-$;if(d.push(v,b,f+$),!y||(v=v.child(b),v.isText))break;g=y-1,f+=$+1}return new ResolvedPos(c,d,g)}static resolveCached(l,c){let d=resolveCache.get(l);if(d)for(let g=0;g<d.elts.length;g++){let v=d.elts[g];if(v.pos==c)return v}else resolveCache.set(l,d=new ResolveCache);let f=d.elts[d.i]=ResolvedPos.resolve(l,c);return d.i=(d.i+1)%resolveCacheSize,f}}class ResolveCache{constructor(){this.elts=[],this.i=0}}const resolveCacheSize=12,resolveCache=new WeakMap;class NodeRange{constructor(l,c,d){this.$from=l,this.$to=c,this.depth=d}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const emptyAttrs=Object.create(null);let Node$2=class ISe{constructor(l,c,d,f=Mark$1.none){this.type=l,this.attrs=c,this.marks=f,this.content=d||Fragment.empty}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(l){return this.content.child(l)}maybeChild(l){return this.content.maybeChild(l)}forEach(l){this.content.forEach(l)}nodesBetween(l,c,d,f=0){this.content.nodesBetween(l,c,d,f,this)}descendants(l){this.nodesBetween(0,this.content.size,l)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(l,c,d,f){return this.content.textBetween(l,c,d,f)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(l){return this==l||this.sameMarkup(l)&&this.content.eq(l.content)}sameMarkup(l){return this.hasMarkup(l.type,l.attrs,l.marks)}hasMarkup(l,c,d){return this.type==l&&compareDeep(this.attrs,c||l.defaultAttrs||emptyAttrs)&&Mark$1.sameSet(this.marks,d||Mark$1.none)}copy(l=null){return l==this.content?this:new ISe(this.type,this.attrs,l,this.marks)}mark(l){return l==this.marks?this:new ISe(this.type,this.attrs,this.content,l)}cut(l,c=this.content.size){return l==0&&c==this.content.size?this:this.copy(this.content.cut(l,c))}slice(l,c=this.content.size,d=!1){if(l==c)return Slice.empty;let f=this.resolve(l),g=this.resolve(c),v=d?0:f.sharedDepth(c),b=f.start(v),y=f.node(v).content.cut(f.pos-b,g.pos-b);return new Slice(y,f.depth-v,g.depth-v)}replace(l,c,d){return replace$1(this.resolve(l),this.resolve(c),d)}nodeAt(l){for(let c=this;;){let{index:d,offset:f}=c.content.findIndex(l);if(c=c.maybeChild(d),!c)return null;if(f==l||c.isText)return c;l-=f+1}}childAfter(l){let{index:c,offset:d}=this.content.findIndex(l);return{node:this.content.maybeChild(c),index:c,offset:d}}childBefore(l){if(l==0)return{node:null,index:0,offset:0};let{index:c,offset:d}=this.content.findIndex(l);if(d<l)return{node:this.content.child(c),index:c,offset:d};let f=this.content.child(c-1);return{node:f,index:c-1,offset:d-f.nodeSize}}resolve(l){return ResolvedPos.resolveCached(this,l)}resolveNoCache(l){return ResolvedPos.resolve(this,l)}rangeHasMark(l,c,d){let f=!1;return c>l&&this.nodesBetween(l,c,g=>(d.isInSet(g.marks)&&(f=!0),!f)),f}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let l=this.type.name;return this.content.size&&(l+="("+this.content.toStringInner()+")"),wrapMarks(this.marks,l)}contentMatchAt(l){let c=this.type.contentMatch.matchFragment(this.content,0,l);if(!c)throw new Error("Called contentMatchAt on a node with invalid content");return c}canReplace(l,c,d=Fragment.empty,f=0,g=d.childCount){let v=this.contentMatchAt(l).matchFragment(d,f,g),b=v&&v.matchFragment(this.content,c);if(!b||!b.validEnd)return!1;for(let $=f;$<g;$++)if(!this.type.allowsMarks(d.child($).marks))return!1;return!0}canReplaceWith(l,c,d,f){if(f&&!this.type.allowsMarks(f))return!1;let g=this.contentMatchAt(l).matchType(d),v=g&&g.matchFragment(this.content,c);return v?v.validEnd:!1}canAppend(l){return l.content.size?this.canReplace(this.childCount,this.childCount,l.content):this.type.compatibleContent(l.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let l=Mark$1.none;for(let c=0;c<this.marks.length;c++){let d=this.marks[c];d.type.checkAttrs(d.attrs),l=d.addToSet(l)}if(!Mark$1.sameSet(l,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(c=>c.type.name)}`);this.content.forEach(c=>c.check())}toJSON(){let l={type:this.type.name};for(let c in this.attrs){l.attrs=this.attrs;break}return this.content.size&&(l.content=this.content.toJSON()),this.marks.length&&(l.marks=this.marks.map(c=>c.toJSON())),l}static fromJSON(l,c){if(!c)throw new RangeError("Invalid input for Node.fromJSON");let d;if(c.marks){if(!Array.isArray(c.marks))throw new RangeError("Invalid mark data for Node.fromJSON");d=c.marks.map(l.markFromJSON)}if(c.type=="text"){if(typeof c.text!="string")throw new RangeError("Invalid text node in JSON");return l.text(c.text,d)}let f=Fragment.fromJSON(l,c.content),g=l.nodeType(c.type).create(c.attrs,f,d);return g.type.checkAttrs(g.attrs),g}};Node$2.prototype.text=void 0;let TextNode$1=class MSe extends Node$2{constructor(l,c,d,f){if(super(l,c,null,f),!d)throw new RangeError("Empty text nodes are not allowed");this.text=d}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):wrapMarks(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(l,c){return this.text.slice(l,c)}get nodeSize(){return this.text.length}mark(l){return l==this.marks?this:new MSe(this.type,this.attrs,this.text,l)}withText(l){return l==this.text?this:new MSe(this.type,this.attrs,l,this.marks)}cut(l=0,c=this.text.length){return l==0&&c==this.text.length?this:this.withText(this.text.slice(l,c))}eq(l){return this.sameMarkup(l)&&this.text==l.text}toJSON(){let l=super.toJSON();return l.text=this.text,l}};function wrapMarks(s,l){for(let c=s.length-1;c>=0;c--)l=s[c].type.name+"("+l+")";return l}class ContentMatch{constructor(l){this.validEnd=l,this.next=[],this.wrapCache=[]}static parse(l,c){let d=new TokenStream(l,c);if(d.next==null)return ContentMatch.empty;let f=parseExpr(d);d.next&&d.err("Unexpected trailing text");let g=dfa(nfa(f));return checkForDeadEnds(g,d),g}matchType(l){for(let c=0;c<this.next.length;c++)if(this.next[c].type==l)return this.next[c].next;return null}matchFragment(l,c=0,d=l.childCount){let f=this;for(let g=c;f&&g<d;g++)f=f.matchType(l.child(g).type);return f}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let l=0;l<this.next.length;l++){let{type:c}=this.next[l];if(!(c.isText||c.hasRequiredAttrs()))return c}return null}compatible(l){for(let c=0;c<this.next.length;c++)for(let d=0;d<l.next.length;d++)if(this.next[c].type==l.next[d].type)return!0;return!1}fillBefore(l,c=!1,d=0){let f=[this];function g(v,b){let $=v.matchFragment(l,d);if($&&(!c||$.validEnd))return Fragment.from(b.map(y=>y.createAndFill()));for(let y=0;y<v.next.length;y++){let{type:x,next:C}=v.next[y];if(!(x.isText||x.hasRequiredAttrs())&&f.indexOf(C)==-1){f.push(C);let E=g(C,b.concat(x));if(E)return E}}return null}return g(this,[])}findWrapping(l){for(let d=0;d<this.wrapCache.length;d+=2)if(this.wrapCache[d]==l)return this.wrapCache[d+1];let c=this.computeWrapping(l);return this.wrapCache.push(l,c),c}computeWrapping(l){let c=Object.create(null),d=[{match:this,type:null,via:null}];for(;d.length;){let f=d.shift(),g=f.match;if(g.matchType(l)){let v=[];for(let b=f;b.type;b=b.via)v.push(b.type);return v.reverse()}for(let v=0;v<g.next.length;v++){let{type:b,next:$}=g.next[v];!b.isLeaf&&!b.hasRequiredAttrs()&&!(b.name in c)&&(!f.type||$.validEnd)&&(d.push({match:b.contentMatch,type:b,via:f}),c[b.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(l){if(l>=this.next.length)throw new RangeError(`There's no ${l}th edge in this content match`);return this.next[l]}toString(){let l=[];function c(d){l.push(d);for(let f=0;f<d.next.length;f++)l.indexOf(d.next[f].next)==-1&&c(d.next[f].next)}return c(this),l.map((d,f)=>{let g=f+(d.validEnd?"*":" ")+" ";for(let v=0;v<d.next.length;v++)g+=(v?", ":"")+d.next[v].type.name+"->"+l.indexOf(d.next[v].next);return g}).join(`
`)}}ContentMatch.empty=new ContentMatch(!0);class TokenStream{constructor(l,c){this.string=l,this.nodeTypes=c,this.inline=null,this.pos=0,this.tokens=l.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(l){return this.next==l&&(this.pos++||!0)}err(l){throw new SyntaxError(l+" (in content expression '"+this.string+"')")}}function parseExpr(s){let l=[];do l.push(parseExprSeq(s));while(s.eat("|"));return l.length==1?l[0]:{type:"choice",exprs:l}}function parseExprSeq(s){let l=[];do l.push(parseExprSubscript(s));while(s.next&&s.next!=")"&&s.next!="|");return l.length==1?l[0]:{type:"seq",exprs:l}}function parseExprSubscript(s){let l=parseExprAtom(s);for(;;)if(s.eat("+"))l={type:"plus",expr:l};else if(s.eat("*"))l={type:"star",expr:l};else if(s.eat("?"))l={type:"opt",expr:l};else if(s.eat("{"))l=parseExprRange(s,l);else break;return l}function parseNum(s){/\D/.test(s.next)&&s.err("Expected number, got '"+s.next+"'");let l=Number(s.next);return s.pos++,l}function parseExprRange(s,l){let c=parseNum(s),d=c;return s.eat(",")&&(s.next!="}"?d=parseNum(s):d=-1),s.eat("}")||s.err("Unclosed braced range"),{type:"range",min:c,max:d,expr:l}}function resolveName(s,l){let c=s.nodeTypes,d=c[l];if(d)return[d];let f=[];for(let g in c){let v=c[g];v.isInGroup(l)&&f.push(v)}return f.length==0&&s.err("No node type or group '"+l+"' found"),f}function parseExprAtom(s){if(s.eat("(")){let l=parseExpr(s);return s.eat(")")||s.err("Missing closing paren"),l}else if(/\W/.test(s.next))s.err("Unexpected token '"+s.next+"'");else{let l=resolveName(s,s.next).map(c=>(s.inline==null?s.inline=c.isInline:s.inline!=c.isInline&&s.err("Mixing inline and block content"),{type:"name",value:c}));return s.pos++,l.length==1?l[0]:{type:"choice",exprs:l}}}function nfa(s){let l=[[]];return f(g(s,0),c()),l;function c(){return l.push([])-1}function d(v,b,$){let y={term:$,to:b};return l[v].push(y),y}function f(v,b){v.forEach($=>$.to=b)}function g(v,b){if(v.type=="choice")return v.exprs.reduce(($,y)=>$.concat(g(y,b)),[]);if(v.type=="seq")for(let $=0;;$++){let y=g(v.exprs[$],b);if($==v.exprs.length-1)return y;f(y,b=c())}else if(v.type=="star"){let $=c();return d(b,$),f(g(v.expr,$),$),[d($)]}else if(v.type=="plus"){let $=c();return f(g(v.expr,b),$),f(g(v.expr,$),$),[d($)]}else{if(v.type=="opt")return[d(b)].concat(g(v.expr,b));if(v.type=="range"){let $=b;for(let y=0;y<v.min;y++){let x=c();f(g(v.expr,$),x),$=x}if(v.max==-1)f(g(v.expr,$),$);else for(let y=v.min;y<v.max;y++){let x=c();d($,x),f(g(v.expr,$),x),$=x}return[d($)]}else{if(v.type=="name")return[d(b,void 0,v.value)];throw new Error("Unknown expr type")}}}}function cmp(s,l){return l-s}function nullFrom(s,l){let c=[];return d(l),c.sort(cmp);function d(f){let g=s[f];if(g.length==1&&!g[0].term)return d(g[0].to);c.push(f);for(let v=0;v<g.length;v++){let{term:b,to:$}=g[v];!b&&c.indexOf($)==-1&&d($)}}}function dfa(s){let l=Object.create(null);return c(nullFrom(s,0));function c(d){let f=[];d.forEach(v=>{s[v].forEach(({term:b,to:$})=>{if(!b)return;let y;for(let x=0;x<f.length;x++)f[x][0]==b&&(y=f[x][1]);nullFrom(s,$).forEach(x=>{y||f.push([b,y=[]]),y.indexOf(x)==-1&&y.push(x)})})});let g=l[d.join(",")]=new ContentMatch(d.indexOf(s.length-1)>-1);for(let v=0;v<f.length;v++){let b=f[v][1].sort(cmp);g.next.push({type:f[v][0],next:l[b.join(",")]||c(b)})}return g}}function checkForDeadEnds(s,l){for(let c=0,d=[s];c<d.length;c++){let f=d[c],g=!f.validEnd,v=[];for(let b=0;b<f.next.length;b++){let{type:$,next:y}=f.next[b];v.push($.name),g&&!($.isText||$.hasRequiredAttrs())&&(g=!1),d.indexOf(y)==-1&&d.push(y)}g&&l.err("Only non-generatable nodes ("+v.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function defaultAttrs(s){let l=Object.create(null);for(let c in s){let d=s[c];if(!d.hasDefault)return null;l[c]=d.default}return l}function computeAttrs(s,l){let c=Object.create(null);for(let d in s){let f=l&&l[d];if(f===void 0){let g=s[d];if(g.hasDefault)f=g.default;else throw new RangeError("No value supplied for attribute "+d)}c[d]=f}return c}function checkAttrs(s,l,c,d){for(let f in l)if(!(f in s))throw new RangeError(`Unsupported attribute ${f} for ${c} of type ${f}`);for(let f in s){let g=s[f];g.validate&&g.validate(l[f])}}function initAttrs(s,l){let c=Object.create(null);if(l)for(let d in l)c[d]=new Attribute(s,d,l[d]);return c}let NodeType$1=class A3e{constructor(l,c,d){this.name=l,this.schema=c,this.spec=d,this.markSet=null,this.groups=d.group?d.group.split(" "):[],this.attrs=initAttrs(l,d.attrs),this.defaultAttrs=defaultAttrs(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(d.inline||l=="text"),this.isText=l=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==ContentMatch.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(l){return this.groups.indexOf(l)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let l in this.attrs)if(this.attrs[l].isRequired)return!0;return!1}compatibleContent(l){return this==l||this.contentMatch.compatible(l.contentMatch)}computeAttrs(l){return!l&&this.defaultAttrs?this.defaultAttrs:computeAttrs(this.attrs,l)}create(l=null,c,d){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Node$2(this,this.computeAttrs(l),Fragment.from(c),Mark$1.setFrom(d))}createChecked(l=null,c,d){return c=Fragment.from(c),this.checkContent(c),new Node$2(this,this.computeAttrs(l),c,Mark$1.setFrom(d))}createAndFill(l=null,c,d){if(l=this.computeAttrs(l),c=Fragment.from(c),c.size){let v=this.contentMatch.fillBefore(c);if(!v)return null;c=v.append(c)}let f=this.contentMatch.matchFragment(c),g=f&&f.fillBefore(Fragment.empty,!0);return g?new Node$2(this,l,c.append(g),Mark$1.setFrom(d)):null}validContent(l){let c=this.contentMatch.matchFragment(l);if(!c||!c.validEnd)return!1;for(let d=0;d<l.childCount;d++)if(!this.allowsMarks(l.child(d).marks))return!1;return!0}checkContent(l){if(!this.validContent(l))throw new RangeError(`Invalid content for node ${this.name}: ${l.toString().slice(0,50)}`)}checkAttrs(l){checkAttrs(this.attrs,l,"node",this.name)}allowsMarkType(l){return this.markSet==null||this.markSet.indexOf(l)>-1}allowsMarks(l){if(this.markSet==null)return!0;for(let c=0;c<l.length;c++)if(!this.allowsMarkType(l[c].type))return!1;return!0}allowedMarks(l){if(this.markSet==null)return l;let c;for(let d=0;d<l.length;d++)this.allowsMarkType(l[d].type)?c&&c.push(l[d]):c||(c=l.slice(0,d));return c?c.length?c:Mark$1.none:l}static compile(l,c){let d=Object.create(null);l.forEach((g,v)=>d[g]=new A3e(g,c,v));let f=c.spec.topNode||"doc";if(!d[f])throw new RangeError("Schema is missing its top node type ('"+f+"')");if(!d.text)throw new RangeError("Every schema needs a 'text' type");for(let g in d.text.attrs)throw new RangeError("The text node type should not have attributes");return d}};function validateType(s,l,c){let d=c.split("|");return f=>{let g=f===null?"null":typeof f;if(d.indexOf(g)<0)throw new RangeError(`Expected value of type ${d} for attribute ${l} on type ${s}, got ${g}`)}}class Attribute{constructor(l,c,d){this.hasDefault=Object.prototype.hasOwnProperty.call(d,"default"),this.default=d.default,this.validate=typeof d.validate=="string"?validateType(l,c,d.validate):d.validate}get isRequired(){return!this.hasDefault}}class MarkType{constructor(l,c,d,f){this.name=l,this.rank=c,this.schema=d,this.spec=f,this.attrs=initAttrs(l,f.attrs),this.excluded=null;let g=defaultAttrs(this.attrs);this.instance=g?new Mark$1(this,g):null}create(l=null){return!l&&this.instance?this.instance:new Mark$1(this,computeAttrs(this.attrs,l))}static compile(l,c){let d=Object.create(null),f=0;return l.forEach((g,v)=>d[g]=new MarkType(g,f++,c,v)),d}removeFromSet(l){for(var c=0;c<l.length;c++)l[c].type==this&&(l=l.slice(0,c).concat(l.slice(c+1)),c--);return l}isInSet(l){for(let c=0;c<l.length;c++)if(l[c].type==this)return l[c]}checkAttrs(l){checkAttrs(this.attrs,l,"mark",this.name)}excludes(l){return this.excluded.indexOf(l)>-1}}class Schema{constructor(l){this.linebreakReplacement=null,this.cached=Object.create(null);let c=this.spec={};for(let f in l)c[f]=l[f];c.nodes=OrderedMap.from(l.nodes),c.marks=OrderedMap.from(l.marks||{}),this.nodes=NodeType$1.compile(this.spec.nodes,this),this.marks=MarkType.compile(this.spec.marks,this);let d=Object.create(null);for(let f in this.nodes){if(f in this.marks)throw new RangeError(f+" can not be both a node and a mark");let g=this.nodes[f],v=g.spec.content||"",b=g.spec.marks;if(g.contentMatch=d[v]||(d[v]=ContentMatch.parse(v,this.nodes)),g.inlineContent=g.contentMatch.inlineContent,g.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!g.isInline||!g.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=g}g.markSet=b=="_"?null:b?gatherMarks(this,b.split(" ")):b==""||!g.inlineContent?[]:null}for(let f in this.marks){let g=this.marks[f],v=g.spec.excludes;g.excluded=v==null?[g]:v==""?[]:gatherMarks(this,v.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(l,c=null,d,f){if(typeof l=="string")l=this.nodeType(l);else if(l instanceof NodeType$1){if(l.schema!=this)throw new RangeError("Node type from different schema used ("+l.name+")")}else throw new RangeError("Invalid node type: "+l);return l.createChecked(c,d,f)}text(l,c){let d=this.nodes.text;return new TextNode$1(d,d.defaultAttrs,l,Mark$1.setFrom(c))}mark(l,c){return typeof l=="string"&&(l=this.marks[l]),l.create(c)}nodeFromJSON(l){return Node$2.fromJSON(this,l)}markFromJSON(l){return Mark$1.fromJSON(this,l)}nodeType(l){let c=this.nodes[l];if(!c)throw new RangeError("Unknown node type: "+l);return c}}function gatherMarks(s,l){let c=[];for(let d=0;d<l.length;d++){let f=l[d],g=s.marks[f],v=g;if(g)c.push(g);else for(let b in s.marks){let $=s.marks[b];(f=="_"||$.spec.group&&$.spec.group.split(" ").indexOf(f)>-1)&&c.push(v=$)}if(!v)throw new SyntaxError("Unknown mark type: '"+l[d]+"'")}return c}function isTagRule(s){return s.tag!=null}function isStyleRule(s){return s.style!=null}let DOMParser$1=class NSe{constructor(l,c){this.schema=l,this.rules=c,this.tags=[],this.styles=[];let d=this.matchedStyles=[];c.forEach(f=>{if(isTagRule(f))this.tags.push(f);else if(isStyleRule(f)){let g=/[^=]*/.exec(f.style)[0];d.indexOf(g)<0&&d.push(g),this.styles.push(f)}}),this.normalizeLists=!this.tags.some(f=>{if(!/^(ul|ol)\b/.test(f.tag)||!f.node)return!1;let g=l.nodes[f.node];return g.contentMatch.matchType(g)})}parse(l,c={}){let d=new ParseContext(this,c,!1);return d.addAll(l,Mark$1.none,c.from,c.to),d.finish()}parseSlice(l,c={}){let d=new ParseContext(this,c,!0);return d.addAll(l,Mark$1.none,c.from,c.to),Slice.maxOpen(d.finish())}matchTag(l,c,d){for(let f=d?this.tags.indexOf(d)+1:0;f<this.tags.length;f++){let g=this.tags[f];if(matches$2(l,g.tag)&&(g.namespace===void 0||l.namespaceURI==g.namespace)&&(!g.context||c.matchesContext(g.context))){if(g.getAttrs){let v=g.getAttrs(l);if(v===!1)continue;g.attrs=v||void 0}return g}}}matchStyle(l,c,d,f){for(let g=f?this.styles.indexOf(f)+1:0;g<this.styles.length;g++){let v=this.styles[g],b=v.style;if(!(b.indexOf(l)!=0||v.context&&!d.matchesContext(v.context)||b.length>l.length&&(b.charCodeAt(l.length)!=61||b.slice(l.length+1)!=c))){if(v.getAttrs){let $=v.getAttrs(c);if($===!1)continue;v.attrs=$||void 0}return v}}}static schemaRules(l){let c=[];function d(f){let g=f.priority==null?50:f.priority,v=0;for(;v<c.length;v++){let b=c[v];if((b.priority==null?50:b.priority)<g)break}c.splice(v,0,f)}for(let f in l.marks){let g=l.marks[f].spec.parseDOM;g&&g.forEach(v=>{d(v=copy(v)),v.mark||v.ignore||v.clearMark||(v.mark=f)})}for(let f in l.nodes){let g=l.nodes[f].spec.parseDOM;g&&g.forEach(v=>{d(v=copy(v)),v.node||v.ignore||v.mark||(v.node=f)})}return c}static fromSchema(l){return l.cached.domParser||(l.cached.domParser=new NSe(l,NSe.schemaRules(l)))}};const blockTags={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},ignoreTags={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},listTags={ol:!0,ul:!0},OPT_PRESERVE_WS=1,OPT_PRESERVE_WS_FULL=2,OPT_OPEN_LEFT=4;function wsOptionsFor(s,l,c){return l!=null?(l?OPT_PRESERVE_WS:0)|(l==="full"?OPT_PRESERVE_WS_FULL:0):s&&s.whitespace=="pre"?OPT_PRESERVE_WS|OPT_PRESERVE_WS_FULL:c&~OPT_OPEN_LEFT}class NodeContext{constructor(l,c,d,f,g,v){this.type=l,this.attrs=c,this.marks=d,this.solid=f,this.options=v,this.content=[],this.activeMarks=Mark$1.none,this.match=g||(v&OPT_OPEN_LEFT?null:l.contentMatch)}findWrapping(l){if(!this.match){if(!this.type)return[];let c=this.type.contentMatch.fillBefore(Fragment.from(l));if(c)this.match=this.type.contentMatch.matchFragment(c);else{let d=this.type.contentMatch,f;return(f=d.findWrapping(l.type))?(this.match=d,f):null}}return this.match.findWrapping(l.type)}finish(l){if(!(this.options&OPT_PRESERVE_WS)){let d=this.content[this.content.length-1],f;if(d&&d.isText&&(f=/[ \t\r\n\u000c]+$/.exec(d.text))){let g=d;d.text.length==f[0].length?this.content.pop():this.content[this.content.length-1]=g.withText(g.text.slice(0,g.text.length-f[0].length))}}let c=Fragment.from(this.content);return!l&&this.match&&(c=c.append(this.match.fillBefore(Fragment.empty,!0))),this.type?this.type.create(this.attrs,c,this.marks):c}inlineContext(l){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:l.parentNode&&!blockTags.hasOwnProperty(l.parentNode.nodeName.toLowerCase())}}class ParseContext{constructor(l,c,d){this.parser=l,this.options=c,this.isOpen=d,this.open=0;let f=c.topNode,g,v=wsOptionsFor(null,c.preserveWhitespace,0)|(d?OPT_OPEN_LEFT:0);f?g=new NodeContext(f.type,f.attrs,Mark$1.none,!0,c.topMatch||f.type.contentMatch,v):d?g=new NodeContext(null,null,Mark$1.none,!0,null,v):g=new NodeContext(l.schema.topNodeType,null,Mark$1.none,!0,null,v),this.nodes=[g],this.find=c.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(l,c){l.nodeType==3?this.addTextNode(l,c):l.nodeType==1&&this.addElement(l,c)}addTextNode(l,c){let d=l.nodeValue,f=this.top;if(f.options&OPT_PRESERVE_WS_FULL||f.inlineContext(l)||/[^ \t\r\n\u000c]/.test(d)){if(f.options&OPT_PRESERVE_WS)f.options&OPT_PRESERVE_WS_FULL?d=d.replace(/\r\n?/g,`
`):d=d.replace(/\r?\n|\r/g," ");else if(d=d.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(d)&&this.open==this.nodes.length-1){let g=f.content[f.content.length-1],v=l.previousSibling;(!g||v&&v.nodeName=="BR"||g.isText&&/[ \t\r\n\u000c]$/.test(g.text))&&(d=d.slice(1))}d&&this.insertNode(this.parser.schema.text(d),c),this.findInText(l)}else this.findInside(l)}addElement(l,c,d){let f=l.nodeName.toLowerCase(),g;listTags.hasOwnProperty(f)&&this.parser.normalizeLists&&normalizeList(l);let v=this.options.ruleFromNode&&this.options.ruleFromNode(l)||(g=this.parser.matchTag(l,this,d));if(v?v.ignore:ignoreTags.hasOwnProperty(f))this.findInside(l),this.ignoreFallback(l,c);else if(!v||v.skip||v.closeParent){v&&v.closeParent?this.open=Math.max(0,this.open-1):v&&v.skip.nodeType&&(l=v.skip);let b,$=this.top,y=this.needsBlock;if(blockTags.hasOwnProperty(f))$.content.length&&$.content[0].isInline&&this.open&&(this.open--,$=this.top),b=!0,$.type||(this.needsBlock=!0);else if(!l.firstChild){this.leafFallback(l,c);return}let x=v&&v.skip?c:this.readStyles(l,c);x&&this.addAll(l,x),b&&this.sync($),this.needsBlock=y}else{let b=this.readStyles(l,c);b&&this.addElementByRule(l,v,b,v.consuming===!1?g:void 0)}}leafFallback(l,c){l.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(l.ownerDocument.createTextNode(`
`),c)}ignoreFallback(l,c){l.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),c)}readStyles(l,c){let d=l.style;if(d&&d.length)for(let f=0;f<this.parser.matchedStyles.length;f++){let g=this.parser.matchedStyles[f],v=d.getPropertyValue(g);if(v)for(let b=void 0;;){let $=this.parser.matchStyle(g,v,this,b);if(!$)break;if($.ignore)return null;if($.clearMark?c=c.filter(y=>!$.clearMark(y)):c=c.concat(this.parser.schema.marks[$.mark].create($.attrs)),$.consuming===!1)b=$;else break}}return c}addElementByRule(l,c,d,f){let g,v;if(c.node)if(v=this.parser.schema.nodes[c.node],v.isLeaf)this.insertNode(v.create(c.attrs),d)||this.leafFallback(l,d);else{let $=this.enter(v,c.attrs||null,d,c.preserveWhitespace);$&&(g=!0,d=$)}else{let $=this.parser.schema.marks[c.mark];d=d.concat($.create(c.attrs))}let b=this.top;if(v&&v.isLeaf)this.findInside(l);else if(f)this.addElement(l,d,f);else if(c.getContent)this.findInside(l),c.getContent(l,this.parser.schema).forEach($=>this.insertNode($,d));else{let $=l;typeof c.contentElement=="string"?$=l.querySelector(c.contentElement):typeof c.contentElement=="function"?$=c.contentElement(l):c.contentElement&&($=c.contentElement),this.findAround(l,$,!0),this.addAll($,d),this.findAround(l,$,!1)}g&&this.sync(b)&&this.open--}addAll(l,c,d,f){let g=d||0;for(let v=d?l.childNodes[d]:l.firstChild,b=f==null?null:l.childNodes[f];v!=b;v=v.nextSibling,++g)this.findAtPoint(l,g),this.addDOM(v,c);this.findAtPoint(l,g)}findPlace(l,c){let d,f;for(let g=this.open;g>=0;g--){let v=this.nodes[g],b=v.findWrapping(l);if(b&&(!d||d.length>b.length)&&(d=b,f=v,!b.length)||v.solid)break}if(!d)return null;this.sync(f);for(let g=0;g<d.length;g++)c=this.enterInner(d[g],null,c,!1);return c}insertNode(l,c){if(l.isInline&&this.needsBlock&&!this.top.type){let f=this.textblockFromContext();f&&(c=this.enterInner(f,null,c))}let d=this.findPlace(l,c);if(d){this.closeExtra();let f=this.top;f.match&&(f.match=f.match.matchType(l.type));let g=Mark$1.none;for(let v of d.concat(l.marks))(f.type?f.type.allowsMarkType(v.type):markMayApply(v.type,l.type))&&(g=v.addToSet(g));return f.content.push(l.mark(g)),!0}return!1}enter(l,c,d,f){let g=this.findPlace(l.create(c),d);return g&&(g=this.enterInner(l,c,d,!0,f)),g}enterInner(l,c,d,f=!1,g){this.closeExtra();let v=this.top;v.match=v.match&&v.match.matchType(l);let b=wsOptionsFor(l,g,v.options);v.options&OPT_OPEN_LEFT&&v.content.length==0&&(b|=OPT_OPEN_LEFT);let $=Mark$1.none;return d=d.filter(y=>(v.type?v.type.allowsMarkType(y.type):markMayApply(y.type,l))?($=y.addToSet($),!1):!0),this.nodes.push(new NodeContext(l,c,$,f,null,b)),this.open++,d}closeExtra(l=!1){let c=this.nodes.length-1;if(c>this.open){for(;c>this.open;c--)this.nodes[c-1].content.push(this.nodes[c].finish(l));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)}sync(l){for(let c=this.open;c>=0;c--)if(this.nodes[c]==l)return this.open=c,!0;return!1}get currentPos(){this.closeExtra();let l=0;for(let c=this.open;c>=0;c--){let d=this.nodes[c].content;for(let f=d.length-1;f>=0;f--)l+=d[f].nodeSize;c&&l++}return l}findAtPoint(l,c){if(this.find)for(let d=0;d<this.find.length;d++)this.find[d].node==l&&this.find[d].offset==c&&(this.find[d].pos=this.currentPos)}findInside(l){if(this.find)for(let c=0;c<this.find.length;c++)this.find[c].pos==null&&l.nodeType==1&&l.contains(this.find[c].node)&&(this.find[c].pos=this.currentPos)}findAround(l,c,d){if(l!=c&&this.find)for(let f=0;f<this.find.length;f++)this.find[f].pos==null&&l.nodeType==1&&l.contains(this.find[f].node)&&c.compareDocumentPosition(this.find[f].node)&(d?2:4)&&(this.find[f].pos=this.currentPos)}findInText(l){if(this.find)for(let c=0;c<this.find.length;c++)this.find[c].node==l&&(this.find[c].pos=this.currentPos-(l.nodeValue.length-this.find[c].offset))}matchesContext(l){if(l.indexOf("|")>-1)return l.split(/\s*\|\s*/).some(this.matchesContext,this);let c=l.split("/"),d=this.options.context,f=!this.isOpen&&(!d||d.parent.type==this.nodes[0].type),g=-(d?d.depth+1:0)+(f?0:1),v=(b,$)=>{for(;b>=0;b--){let y=c[b];if(y==""){if(b==c.length-1||b==0)continue;for(;$>=g;$--)if(v(b-1,$))return!0;return!1}else{let x=$>0||$==0&&f?this.nodes[$].type:d&&$>=g?d.node($-g).type:null;if(!x||x.name!=y&&!x.isInGroup(y))return!1;$--}}return!0};return v(c.length-1,this.open)}textblockFromContext(){let l=this.options.context;if(l)for(let c=l.depth;c>=0;c--){let d=l.node(c).contentMatchAt(l.indexAfter(c)).defaultType;if(d&&d.isTextblock&&d.defaultAttrs)return d}for(let c in this.parser.schema.nodes){let d=this.parser.schema.nodes[c];if(d.isTextblock&&d.defaultAttrs)return d}}}function normalizeList(s){for(let l=s.firstChild,c=null;l;l=l.nextSibling){let d=l.nodeType==1?l.nodeName.toLowerCase():null;d&&listTags.hasOwnProperty(d)&&c?(c.appendChild(l),l=c):d=="li"?c=l:d&&(c=null)}}function matches$2(s,l){return(s.matches||s.msMatchesSelector||s.webkitMatchesSelector||s.mozMatchesSelector).call(s,l)}function copy(s){let l={};for(let c in s)l[c]=s[c];return l}function markMayApply(s,l){let c=l.schema.nodes;for(let d in c){let f=c[d];if(!f.allowsMarkType(s))continue;let g=[],v=b=>{g.push(b);for(let $=0;$<b.edgeCount;$++){let{type:y,next:x}=b.edge($);if(y==l||g.indexOf(x)<0&&v(x))return!0}};if(v(f.contentMatch))return!0}}class DOMSerializer{constructor(l,c){this.nodes=l,this.marks=c}serializeFragment(l,c={},d){d||(d=doc$1(c).createDocumentFragment());let f=d,g=[];return l.forEach(v=>{if(g.length||v.marks.length){let b=0,$=0;for(;b<g.length&&$<v.marks.length;){let y=v.marks[$];if(!this.marks[y.type.name]){$++;continue}if(!y.eq(g[b][0])||y.type.spec.spanning===!1)break;b++,$++}for(;b<g.length;)f=g.pop()[1];for(;$<v.marks.length;){let y=v.marks[$++],x=this.serializeMark(y,v.isInline,c);x&&(g.push([y,f]),f.appendChild(x.dom),f=x.contentDOM||x.dom)}}f.appendChild(this.serializeNodeInner(v,c))}),d}serializeNodeInner(l,c){let{dom:d,contentDOM:f}=renderSpec(doc$1(c),this.nodes[l.type.name](l),null,l.attrs);if(f){if(l.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(l.content,c,f)}return d}serializeNode(l,c={}){let d=this.serializeNodeInner(l,c);for(let f=l.marks.length-1;f>=0;f--){let g=this.serializeMark(l.marks[f],l.isInline,c);g&&((g.contentDOM||g.dom).appendChild(d),d=g.dom)}return d}serializeMark(l,c,d={}){let f=this.marks[l.type.name];return f&&renderSpec(doc$1(d),f(l,c),null,l.attrs)}static renderSpec(l,c,d=null,f){return renderSpec(l,c,d,f)}static fromSchema(l){return l.cached.domSerializer||(l.cached.domSerializer=new DOMSerializer(this.nodesFromSchema(l),this.marksFromSchema(l)))}static nodesFromSchema(l){let c=gatherToDOM(l.nodes);return c.text||(c.text=d=>d.text),c}static marksFromSchema(l){return gatherToDOM(l.marks)}}function gatherToDOM(s){let l={};for(let c in s){let d=s[c].spec.toDOM;d&&(l[c]=d)}return l}function doc$1(s){return s.document||window.document}const suspiciousAttributeCache=new WeakMap;function suspiciousAttributes(s){let l=suspiciousAttributeCache.get(s);return l===void 0&&suspiciousAttributeCache.set(s,l=suspiciousAttributesInner(s)),l}function suspiciousAttributesInner(s){let l=null;function c(d){if(d&&typeof d=="object")if(Array.isArray(d))if(typeof d[0]=="string")l||(l=[]),l.push(d);else for(let f=0;f<d.length;f++)c(d[f]);else for(let f in d)c(d[f])}return c(s),l}function renderSpec(s,l,c,d){if(typeof l=="string")return{dom:s.createTextNode(l)};if(l.nodeType!=null)return{dom:l};if(l.dom&&l.dom.nodeType!=null)return l;let f=l[0],g;if(typeof f!="string")throw new RangeError("Invalid array passed to renderSpec");if(d&&(g=suspiciousAttributes(d))&&g.indexOf(l)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let v=f.indexOf(" ");v>0&&(c=f.slice(0,v),f=f.slice(v+1));let b,$=c?s.createElementNS(c,f):s.createElement(f),y=l[1],x=1;if(y&&typeof y=="object"&&y.nodeType==null&&!Array.isArray(y)){x=2;for(let C in y)if(y[C]!=null){let E=C.indexOf(" ");E>0?$.setAttributeNS(C.slice(0,E),C.slice(E+1),y[C]):$.setAttribute(C,y[C])}}for(let C=x;C<l.length;C++){let E=l[C];if(E===0){if(C<l.length-1||C>x)throw new RangeError("Content hole must be the only child of its parent node");return{dom:$,contentDOM:$}}else{let{dom:N,contentDOM:W}=renderSpec(s,E,c,d);if($.appendChild(N),W){if(b)throw new RangeError("Multiple content holes");b=W}}}return{dom:$,contentDOM:b}}function tryOnScopeDispose(s){return getCurrentScope()?(onScopeDispose(s),!0):!1}function createEventHook(){const s=new Set,l=f=>{s.delete(f)};return{on:f=>{s.add(f);const g=()=>l(f);return tryOnScopeDispose(g),{off:g}},off:l,trigger:(...f)=>Promise.all(Array.from(s).map(g=>g(...f)))}}function createGlobalState(s){let l=!1,c;const d=effectScope(!0);return(...f)=>(l||(c=d.run(()=>s(...f)),l=!0),c)}function toValue(s){return typeof s=="function"?s():unref(s)}const isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const toString=Object.prototype.toString,isObject$5=s=>toString.call(s)==="[object Object]",timestamp$1=()=>+Date.now(),noop$5=()=>{},hasOwn=(s,l)=>Object.prototype.hasOwnProperty.call(s,l),isIOS=getIsIOS();function getIsIOS(){var s,l;return isClient&&((s=window==null?void 0:window.navigator)==null?void 0:s.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((l=window==null?void 0:window.navigator)==null?void 0:l.maxTouchPoints)>2&&/iPad|Macintosh/.test(window==null?void 0:window.navigator.userAgent))}function createFilterWrapper(s,l){function c(...d){return new Promise((f,g)=>{Promise.resolve(s(()=>l.apply(this,d),{fn:l,thisArg:this,args:d})).then(f).catch(g)})}return c}const bypassFilter=s=>s();function pausableFilter(s=bypassFilter){const l=ref(!0);function c(){l.value=!1}function d(){l.value=!0}const f=(...g)=>{l.value&&s(...g)};return{isActive:readonly(l),pause:c,resume:d,eventFilter:f}}function promiseTimeout(s,l=!1,c="Timeout"){return new Promise((d,f)=>{setTimeout(l?()=>f(c):d,s)})}function createSingletonPromise(s){let l;function c(){return l||(l=s()),l}return c.reset=async()=>{const d=l;l=void 0,d&&await d},c}function getLifeCycleTarget(s){return getCurrentInstance()}function watchWithFilter(s,l,c={}){const{eventFilter:d=bypassFilter,...f}=c;return watch(s,createFilterWrapper(d,l),f)}function watchPausable(s,l,c={}){const{eventFilter:d,...f}=c,{eventFilter:g,pause:v,resume:b,isActive:$}=pausableFilter(d);return{stop:watchWithFilter(s,l,{...f,eventFilter:g}),pause:v,resume:b,isActive:$}}function tryOnMounted(s,l=!0,c){getLifeCycleTarget()?onMounted(s,c):l?s():nextTick(s)}function createUntil(s,l=!1){function c(C,{flush:E="sync",deep:N=!1,timeout:W,throwOnTimeout:q}={}){let Y=null;const se=[new Promise(de=>{Y=watch(s,he=>{C(he)!==l&&(Y==null||Y(),de(he))},{flush:E,deep:N,immediate:!0})})];return W!=null&&se.push(promiseTimeout(W,q).then(()=>toValue(s)).finally(()=>Y==null?void 0:Y())),Promise.race(se)}function d(C,E){if(!isRef(C))return c(he=>he===C,E);const{flush:N="sync",deep:W=!1,timeout:q,throwOnTimeout:Y}=E??{};let re=null;const de=[new Promise(he=>{re=watch([s,C],([ge,Se])=>{l!==(ge===Se)&&(re==null||re(),he(ge))},{flush:N,deep:W,immediate:!0})})];return q!=null&&de.push(promiseTimeout(q,Y).then(()=>toValue(s)).finally(()=>(re==null||re(),toValue(s)))),Promise.race(de)}function f(C){return c(E=>!!E,C)}function g(C){return d(null,C)}function v(C){return d(void 0,C)}function b(C){return c(Number.isNaN,C)}function $(C,E){return c(N=>{const W=Array.from(N);return W.includes(C)||W.includes(toValue(C))},E)}function y(C){return x(1,C)}function x(C=1,E){let N=-1;return c(()=>(N+=1,N>=C),E)}return Array.isArray(toValue(s))?{toMatch:c,toContains:$,changed:y,changedTimes:x,get not(){return createUntil(s,!l)}}:{toMatch:c,toBe:d,toBeTruthy:f,toBeNull:g,toBeNaN:b,toBeUndefined:v,changed:y,changedTimes:x,get not(){return createUntil(s,!l)}}}function until(s){return createUntil(s)}const REGEX_PARSE=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[T\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/i,REGEX_FORMAT=/[YMDHhms]o|\[([^\]]+)\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|SSS/g;function defaultMeridiem(s,l,c,d){let f=s<12?"AM":"PM";return d&&(f=f.split("").reduce((g,v)=>g+=`${v}.`,"")),c?f.toLowerCase():f}function formatOrdinal(s){const l=["th","st","nd","rd"],c=s%100;return s+(l[(c-20)%10]||l[c]||l[0])}function formatDate(s,l,c={}){var d;const f=s.getFullYear(),g=s.getMonth(),v=s.getDate(),b=s.getHours(),$=s.getMinutes(),y=s.getSeconds(),x=s.getMilliseconds(),C=s.getDay(),E=(d=c.customMeridiem)!=null?d:defaultMeridiem,N={Yo:()=>formatOrdinal(f),YY:()=>String(f).slice(-2),YYYY:()=>f,M:()=>g+1,Mo:()=>formatOrdinal(g+1),MM:()=>`${g+1}`.padStart(2,"0"),MMM:()=>s.toLocaleDateString(c.locales,{month:"short"}),MMMM:()=>s.toLocaleDateString(c.locales,{month:"long"}),D:()=>String(v),Do:()=>formatOrdinal(v),DD:()=>`${v}`.padStart(2,"0"),H:()=>String(b),Ho:()=>formatOrdinal(b),HH:()=>`${b}`.padStart(2,"0"),h:()=>`${b%12||12}`.padStart(1,"0"),ho:()=>formatOrdinal(b%12||12),hh:()=>`${b%12||12}`.padStart(2,"0"),m:()=>String($),mo:()=>formatOrdinal($),mm:()=>`${$}`.padStart(2,"0"),s:()=>String(y),so:()=>formatOrdinal(y),ss:()=>`${y}`.padStart(2,"0"),SSS:()=>`${x}`.padStart(3,"0"),d:()=>C,dd:()=>s.toLocaleDateString(c.locales,{weekday:"narrow"}),ddd:()=>s.toLocaleDateString(c.locales,{weekday:"short"}),dddd:()=>s.toLocaleDateString(c.locales,{weekday:"long"}),A:()=>E(b,$),AA:()=>E(b,$,!1,!0),a:()=>E(b,$,!0),aa:()=>E(b,$,!0,!0)};return l.replace(REGEX_FORMAT,(W,q)=>{var Y,re;return(re=q??((Y=N[W])==null?void 0:Y.call(N)))!=null?re:W})}function normalizeDate(s){if(s===null)return new Date(Number.NaN);if(s===void 0)return new Date;if(s instanceof Date)return new Date(s);if(typeof s=="string"&&!/Z$/i.test(s)){const l=s.match(REGEX_PARSE);if(l){const c=l[2]-1||0,d=(l[7]||"0").substring(0,3);return new Date(l[1],c,l[3]||1,l[4]||0,l[5]||0,l[6]||0,d)}}return new Date(s)}function useDateFormat(s,l="HH:mm:ss",c={}){return computed(()=>formatDate(normalizeDate(toValue(s)),toValue(l),c))}function useIntervalFn(s,l=1e3,c={}){const{immediate:d=!0,immediateCallback:f=!1}=c;let g=null;const v=ref(!1);function b(){g&&(clearInterval(g),g=null)}function $(){v.value=!1,b()}function y(){const x=toValue(l);x<=0||(v.value=!0,f&&s(),b(),g=setInterval(s,x))}if(d&&isClient&&y(),isRef(l)||typeof l=="function"){const x=watch(l,()=>{v.value&&isClient&&y()});tryOnScopeDispose(x)}return tryOnScopeDispose($),{isActive:v,pause:$,resume:y}}function useTimeoutFn(s,l,c={}){const{immediate:d=!0}=c,f=ref(!1);let g=null;function v(){g&&(clearTimeout(g),g=null)}function b(){f.value=!1,v()}function $(...y){v(),f.value=!0,g=setTimeout(()=>{f.value=!1,g=null,s(...y)},toValue(l))}return d&&(f.value=!0,isClient&&$()),tryOnScopeDispose(b),{isPending:readonly(f),start:$,stop:b}}function unrefElement(s){var l;const c=toValue(s);return(l=c==null?void 0:c.$el)!=null?l:c}const defaultWindow=isClient?window:void 0,defaultDocument=isClient?window.document:void 0,defaultNavigator=isClient?window.navigator:void 0;function useEventListener(...s){let l,c,d,f;if(typeof s[0]=="string"||Array.isArray(s[0])?([c,d,f]=s,l=defaultWindow):[l,c,d,f]=s,!l)return noop$5;Array.isArray(c)||(c=[c]),Array.isArray(d)||(d=[d]);const g=[],v=()=>{g.forEach(x=>x()),g.length=0},b=(x,C,E,N)=>(x.addEventListener(C,E,N),()=>x.removeEventListener(C,E,N)),$=watch(()=>[unrefElement(l),toValue(f)],([x,C])=>{if(v(),!x)return;const E=isObject$5(C)?{...C}:C;g.push(...c.flatMap(N=>d.map(W=>b(x,N,W,E))))},{immediate:!0,flush:"post"}),y=()=>{$(),v()};return tryOnScopeDispose(y),y}let _iOSWorkaround=!1;function onClickOutside(s,l,c={}){const{window:d=defaultWindow,ignore:f=[],capture:g=!0,detectIframe:v=!1}=c;if(!d)return noop$5;isIOS&&!_iOSWorkaround&&(_iOSWorkaround=!0,Array.from(d.document.body.children).forEach(E=>E.addEventListener("click",noop$5)),d.document.documentElement.addEventListener("click",noop$5));let b=!0;const $=E=>f.some(N=>{if(typeof N=="string")return Array.from(d.document.querySelectorAll(N)).some(W=>W===E.target||E.composedPath().includes(W));{const W=unrefElement(N);return W&&(E.target===W||E.composedPath().includes(W))}}),x=[useEventListener(d,"click",E=>{const N=unrefElement(s);if(!(!N||N===E.target||E.composedPath().includes(N))){if(E.detail===0&&(b=!$(E)),!b){b=!0;return}l(E)}},{passive:!0,capture:g}),useEventListener(d,"pointerdown",E=>{const N=unrefElement(s);b=!$(E)&&!!(N&&!E.composedPath().includes(N))},{passive:!0}),v&&useEventListener(d,"blur",E=>{setTimeout(()=>{var N;const W=unrefElement(s);((N=d.document.activeElement)==null?void 0:N.tagName)==="IFRAME"&&!(W!=null&&W.contains(d.document.activeElement))&&l(E)},0)})].filter(Boolean);return()=>x.forEach(E=>E())}function useMounted(){const s=ref(!1),l=getCurrentInstance();return l&&onMounted(()=>{s.value=!0},l),s}function useSupported(s){const l=useMounted();return computed(()=>(l.value,!!s()))}function useRafFn(s,l={}){const{immediate:c=!0,fpsLimit:d=void 0,window:f=defaultWindow}=l,g=ref(!1),v=d?1e3/d:null;let b=0,$=null;function y(E){if(!g.value||!f)return;b||(b=E);const N=E-b;if(v&&N<v){$=f.requestAnimationFrame(y);return}b=E,s({delta:N,timestamp:E}),$=f.requestAnimationFrame(y)}function x(){!g.value&&f&&(g.value=!0,b=0,$=f.requestAnimationFrame(y))}function C(){g.value=!1,$!=null&&f&&(f.cancelAnimationFrame($),$=null)}return c&&x(),tryOnScopeDispose(C),{isActive:readonly(g),pause:C,resume:x}}function useAsyncState(s,l,c){const{immediate:d=!0,delay:f=0,onError:g=noop$5,onSuccess:v=noop$5,resetOnExecute:b=!0,shallow:$=!0,throwError:y}=c??{},x=$?shallowRef(l):ref(l),C=ref(!1),E=ref(!1),N=shallowRef(void 0);async function W(re=0,...se){b&&(x.value=l),N.value=void 0,C.value=!1,E.value=!0,re>0&&await promiseTimeout(re);const de=typeof s=="function"?s(...se):s;try{const he=await de;x.value=he,C.value=!0,v(he)}catch(he){if(N.value=he,g(he),y)throw he}finally{E.value=!1}return x.value}d&&W(f);const q={state:x,isReady:C,isLoading:E,error:N,execute:W};function Y(){return new Promise((re,se)=>{until(E).toBe(!1).then(()=>re(q)).catch(se)})}return{...q,then(re,se){return Y().then(re,se)}}}function usePermission(s,l={}){const{controls:c=!1,navigator:d=defaultNavigator}=l,f=useSupported(()=>d&&"permissions"in d);let g;const v=typeof s=="string"?{name:s}:s,b=ref(),$=()=>{g&&(b.value=g.state)},y=createSingletonPromise(async()=>{if(f.value){if(!g)try{g=await d.permissions.query(v),useEventListener(g,"change",$),$()}catch{b.value="prompt"}return g}});return y(),c?{state:b,isSupported:f,query:y}:b}function useClipboard(s={}){const{navigator:l=defaultNavigator,read:c=!1,source:d,copiedDuring:f=1500,legacy:g=!1}=s,v=useSupported(()=>l&&"clipboard"in l),b=usePermission("clipboard-read"),$=usePermission("clipboard-write"),y=computed(()=>v.value||g),x=ref(""),C=ref(!1),E=useTimeoutFn(()=>C.value=!1,f);function N(){v.value&&re(b.value)?l.clipboard.readText().then(se=>{x.value=se}):x.value=Y()}y.value&&c&&useEventListener(["copy","cut"],N);async function W(se=toValue(d)){y.value&&se!=null&&(v.value&&re($.value)?await l.clipboard.writeText(se):q(se),x.value=se,C.value=!0,E.start())}function q(se){const de=document.createElement("textarea");de.value=se??"",de.style.position="absolute",de.style.opacity="0",document.body.appendChild(de),de.select(),document.execCommand("copy"),de.remove()}function Y(){var se,de,he;return(he=(de=(se=document==null?void 0:document.getSelection)==null?void 0:se.call(document))==null?void 0:de.toString())!=null?he:""}function re(se){return se==="granted"||se==="prompt"}return{isSupported:y,text:x,copied:C,copy:W}}const _global=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},globalKey="__vueuse_ssr_handlers__",handlers$1=getHandlers();function getHandlers(){return globalKey in _global||(_global[globalKey]=_global[globalKey]||{}),_global[globalKey]}function getSSRHandler(s,l){return handlers$1[s]||l}function guessSerializerType(s){return s==null?"any":s instanceof Set?"set":s instanceof Map?"map":s instanceof Date?"date":typeof s=="boolean"?"boolean":typeof s=="string"?"string":typeof s=="object"?"object":Number.isNaN(s)?"any":"number"}const StorageSerializers={boolean:{read:s=>s==="true",write:s=>String(s)},object:{read:s=>JSON.parse(s),write:s=>JSON.stringify(s)},number:{read:s=>Number.parseFloat(s),write:s=>String(s)},any:{read:s=>s,write:s=>String(s)},string:{read:s=>s,write:s=>String(s)},map:{read:s=>new Map(JSON.parse(s)),write:s=>JSON.stringify(Array.from(s.entries()))},set:{read:s=>new Set(JSON.parse(s)),write:s=>JSON.stringify(Array.from(s))},date:{read:s=>new Date(s),write:s=>s.toISOString()}},customStorageEventName="vueuse-storage";function useStorage(s,l,c,d={}){var f;const{flush:g="pre",deep:v=!0,listenToStorageChanges:b=!0,writeDefaults:$=!0,mergeDefaults:y=!1,shallow:x,window:C=defaultWindow,eventFilter:E,onError:N=Ke=>{console.error(Ke)},initOnMounted:W}=d,q=(x?shallowRef:ref)(typeof l=="function"?l():l);if(!c)try{c=getSSRHandler("getDefaultStorage",()=>{var Ke;return(Ke=defaultWindow)==null?void 0:Ke.localStorage})()}catch(Ke){N(Ke)}if(!c)return q;const Y=toValue(l),re=guessSerializerType(Y),se=(f=d.serializer)!=null?f:StorageSerializers[re],{pause:de,resume:he}=watchPausable(q,()=>Se(q.value),{flush:g,deep:v,eventFilter:E});C&&b&&tryOnMounted(()=>{useEventListener(C,"storage",Re),useEventListener(C,customStorageEventName,Be),W&&Re()}),W||Re();function ge(Ke,Lr){C&&C.dispatchEvent(new CustomEvent(customStorageEventName,{detail:{key:s,oldValue:Ke,newValue:Lr,storageArea:c}}))}function Se(Ke){try{const Lr=c.getItem(s);if(Ke==null)ge(Lr,null),c.removeItem(s);else{const _y=se.write(Ke);Lr!==_y&&(c.setItem(s,_y),ge(Lr,_y))}}catch(Lr){N(Lr)}}function Ae(Ke){const Lr=Ke?Ke.newValue:c.getItem(s);if(Lr==null)return $&&Y!=null&&c.setItem(s,se.write(Y)),Y;if(!Ke&&y){const _y=se.read(Lr);return typeof y=="function"?y(_y,Y):re==="object"&&!Array.isArray(_y)?{...Y,..._y}:_y}else return typeof Lr!="string"?Lr:se.read(Lr)}function Re(Ke){if(!(Ke&&Ke.storageArea!==c)){if(Ke&&Ke.key==null){q.value=Y;return}if(!(Ke&&Ke.key!==s)){de();try{(Ke==null?void 0:Ke.newValue)!==se.write(q.value)&&(q.value=Ae(Ke))}catch(Lr){N(Lr)}finally{Ke?nextTick(he):he()}}}}function Be(Ke){Re(Ke.detail)}return q}function useResizeObserver(s,l,c={}){const{window:d=defaultWindow,...f}=c;let g;const v=useSupported(()=>d&&"ResizeObserver"in d),b=()=>{g&&(g.disconnect(),g=void 0)},$=computed(()=>Array.isArray(s)?s.map(C=>unrefElement(C)):[unrefElement(s)]),y=watch($,C=>{if(b(),v.value&&d){g=new ResizeObserver(l);for(const E of C)E&&g.observe(E,f)}},{immediate:!0,flush:"post"}),x=()=>{b(),y()};return tryOnScopeDispose(x),{isSupported:v,stop:x}}const DEFAULT_OPTIONS$1={multiple:!0,accept:"*",reset:!1,directory:!1};function useFileDialog(s={}){const{document:l=defaultDocument}=s,c=ref(null),{on:d,trigger:f}=createEventHook();let g;l&&(g=l.createElement("input"),g.type="file",g.onchange=$=>{const y=$.target;c.value=y.files,f(c.value)});const v=()=>{c.value=null,g&&g.value&&(g.value="",f(null))},b=$=>{if(!g)return;const y={...DEFAULT_OPTIONS$1,...s,...$};g.multiple=y.multiple,g.accept=y.accept,g.webkitdirectory=y.directory,hasOwn(y,"capture")&&(g.capture=y.capture),y.reset&&v(),g.click()};return{files:readonly(c),open:b,reset:v,onChange:d}}const eventHandlers=["fullscreenchange","webkitfullscreenchange","webkitendfullscreen","mozfullscreenchange","MSFullscreenChange"];function useFullscreen(s,l={}){const{document:c=defaultDocument,autoExit:d=!1}=l,f=computed(()=>{var re;return(re=unrefElement(s))!=null?re:c==null?void 0:c.querySelector("html")}),g=ref(!1),v=computed(()=>["requestFullscreen","webkitRequestFullscreen","webkitEnterFullscreen","webkitEnterFullScreen","webkitRequestFullScreen","mozRequestFullScreen","msRequestFullscreen"].find(re=>c&&re in c||f.value&&re in f.value)),b=computed(()=>["exitFullscreen","webkitExitFullscreen","webkitExitFullScreen","webkitCancelFullScreen","mozCancelFullScreen","msExitFullscreen"].find(re=>c&&re in c||f.value&&re in f.value)),$=computed(()=>["fullScreen","webkitIsFullScreen","webkitDisplayingFullscreen","mozFullScreen","msFullscreenElement"].find(re=>c&&re in c||f.value&&re in f.value)),y=["fullscreenElement","webkitFullscreenElement","mozFullScreenElement","msFullscreenElement"].find(re=>c&&re in c),x=useSupported(()=>f.value&&c&&v.value!==void 0&&b.value!==void 0&&$.value!==void 0),C=()=>y?(c==null?void 0:c[y])===f.value:!1,E=()=>{if($.value){if(c&&c[$.value]!=null)return c[$.value];{const re=f.value;if((re==null?void 0:re[$.value])!=null)return!!re[$.value]}}return!1};async function N(){if(!(!x.value||!g.value)){if(b.value)if((c==null?void 0:c[b.value])!=null)await c[b.value]();else{const re=f.value;(re==null?void 0:re[b.value])!=null&&await re[b.value]()}g.value=!1}}async function W(){if(!x.value||g.value)return;E()&&await N();const re=f.value;v.value&&(re==null?void 0:re[v.value])!=null&&(await re[v.value](),g.value=!0)}async function q(){await(g.value?N():W())}const Y=()=>{const re=E();(!re||re&&C())&&(g.value=re)};return useEventListener(c,eventHandlers,Y,!1),useEventListener(()=>unrefElement(f),eventHandlers,Y,!1),d&&tryOnScopeDispose(N),{isSupported:x,isFullscreen:g,enter:W,exit:N,toggle:q}}async function loadImage$1(s){return new Promise((l,c)=>{const d=new Image,{src:f,srcset:g,sizes:v,class:b,loading:$,crossorigin:y,referrerPolicy:x}=s;d.src=f,g&&(d.srcset=g),v&&(d.sizes=v),b&&(d.className=b),$&&(d.loading=$),y&&(d.crossOrigin=y),x&&(d.referrerPolicy=x),d.onload=()=>l(d),d.onerror=c})}function useImage(s,l={}){const c=useAsyncState(()=>loadImage$1(toValue(s)),void 0,{resetOnExecute:!0,...l});return watch(()=>toValue(s),()=>c.execute(l.delay),{deep:!0}),c}function useNetwork(s={}){const{window:l=defaultWindow}=s,c=l==null?void 0:l.navigator,d=useSupported(()=>c&&"connection"in c),f=ref(!0),g=ref(!1),v=ref(void 0),b=ref(void 0),$=ref(void 0),y=ref(void 0),x=ref(void 0),C=ref(void 0),E=ref("unknown"),N=d.value&&c.connection;function W(){c&&(f.value=c.onLine,v.value=f.value?void 0:Date.now(),b.value=f.value?Date.now():void 0,N&&($.value=N.downlink,y.value=N.downlinkMax,C.value=N.effectiveType,x.value=N.rtt,g.value=N.saveData,E.value=N.type))}return l&&(useEventListener(l,"offline",()=>{f.value=!1,v.value=Date.now()}),useEventListener(l,"online",()=>{f.value=!0,b.value=Date.now()})),N&&useEventListener(N,"change",W,!1),W(),{isSupported:d,isOnline:f,saveData:g,offlineAt:v,onlineAt:b,downlink:$,downlinkMax:y,effectiveType:C,rtt:x,type:E}}function useNow(s={}){const{controls:l=!1,interval:c="requestAnimationFrame"}=s,d=ref(new Date),f=()=>d.value=new Date,g=c==="requestAnimationFrame"?useRafFn(f,{immediate:!0}):useIntervalFn(f,c,{immediate:!0});return l?{now:d,...g}:d}function useOnline(s={}){const{isOnline:l}=useNetwork(s);return l}const DEFAULT_UNITS=[{max:6e4,value:1e3,name:"second"},{max:276e4,value:6e4,name:"minute"},{max:72e6,value:36e5,name:"hour"},{max:5184e5,value:864e5,name:"day"},{max:24192e5,value:6048e5,name:"week"},{max:28512e6,value:2592e6,name:"month"},{max:Number.POSITIVE_INFINITY,value:31536e6,name:"year"}],DEFAULT_MESSAGES={justNow:"just now",past:s=>s.match(/\d/)?`${s} ago`:s,future:s=>s.match(/\d/)?`in ${s}`:s,month:(s,l)=>s===1?l?"last month":"next month":`${s} month${s>1?"s":""}`,year:(s,l)=>s===1?l?"last year":"next year":`${s} year${s>1?"s":""}`,day:(s,l)=>s===1?l?"yesterday":"tomorrow":`${s} day${s>1?"s":""}`,week:(s,l)=>s===1?l?"last week":"next week":`${s} week${s>1?"s":""}`,hour:s=>`${s} hour${s>1?"s":""}`,minute:s=>`${s} minute${s>1?"s":""}`,second:s=>`${s} second${s>1?"s":""}`,invalid:""};function DEFAULT_FORMATTER(s){return s.toISOString().slice(0,10)}function useTimeAgo(s,l={}){const{controls:c=!1,updateInterval:d=3e4}=l,{now:f,...g}=useNow({interval:d,controls:!0}),v=computed(()=>formatTimeAgo(new Date(toValue(s)),l,toValue(f)));return c?{timeAgo:v,...g}:v}function formatTimeAgo(s,l={},c=Date.now()){var d;const{max:f,messages:g=DEFAULT_MESSAGES,fullDateFormatter:v=DEFAULT_FORMATTER,units:b=DEFAULT_UNITS,showSecond:$=!1,rounding:y="round"}=l,x=typeof y=="number"?Y=>+Y.toFixed(y):Math[y],C=+c-+s,E=Math.abs(C);function N(Y,re){return x(Math.abs(Y)/re.value)}function W(Y,re){const se=N(Y,re),de=Y>0,he=q(re.name,se,de);return q(de?"past":"future",he,de)}function q(Y,re,se){const de=g[Y];return typeof de=="function"?de(re,se):de.replace("{0}",re.toString())}if(E<6e4&&!$)return g.justNow;if(typeof f=="number"&&E>f)return v(new Date(s));if(typeof f=="string"){const Y=(d=b.find(re=>re.name===f))==null?void 0:d.max;if(Y&&E>Y)return v(new Date(s))}for(const[Y,re]of b.entries()){if(N(C,re)<=0&&b[Y-1])return W(C,b[Y-1]);if(E<re.max)return W(C,re)}return g.invalid}function useTimestamp(s={}){const{controls:l=!1,offset:c=0,immediate:d=!0,interval:f="requestAnimationFrame",callback:g}=s,v=ref(timestamp$1()+c),b=()=>v.value=timestamp$1()+c,$=g?()=>{b(),g(v.value)}:b,y=f==="requestAnimationFrame"?useRafFn($,{immediate:d}):useIntervalFn($,f,{immediate:d});return l?{timestamp:v,...y}:v}const isff=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function addEvent(s,l,c,d){s.addEventListener?s.addEventListener(l,c,d):s.attachEvent&&s.attachEvent("on".concat(l),c)}function removeEvent(s,l,c,d){s.removeEventListener?s.removeEventListener(l,c,d):s.detachEvent&&s.detachEvent("on".concat(l),c)}function getMods$1(s,l){const c=l.slice(0,l.length-1);for(let d=0;d<c.length;d++)c[d]=s[c[d].toLowerCase()];return c}function getKeys(s){typeof s!="string"&&(s=""),s=s.replace(/\s/g,"");const l=s.split(",");let c=l.lastIndexOf("");for(;c>=0;)l[c-1]+=",",l.splice(c,1),c=l.lastIndexOf("");return l}function compareArray(s,l){const c=s.length>=l.length?s:l,d=s.length>=l.length?l:s;let f=!0;for(let g=0;g<c.length;g++)d.indexOf(c[g])===-1&&(f=!1);return f}const _keyMap={backspace:8,"":8,tab:9,clear:12,enter:13,"":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"":20,",":188,".":190,"/":191,"`":192,"-":isff?173:189,"=":isff?61:187,";":isff?59:186,"'":222,"[":219,"]":221,"\\":220},_modifier={"":16,shift:16,"":18,alt:18,option:18,"":17,ctrl:17,control:17,"":91,cmd:91,command:91},modifierMap={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},_mods={16:!1,18:!1,17:!1,91:!1},_handlers={};for(let s=1;s<20;s++)_keyMap["f".concat(s)]=111+s;let _downKeys=[],winListendFocus=null,_scope="all";const elementEventMap=new Map,code$1=s=>_keyMap[s.toLowerCase()]||_modifier[s.toLowerCase()]||s.toUpperCase().charCodeAt(0),getKey=s=>Object.keys(_keyMap).find(l=>_keyMap[l]===s),getModifier=s=>Object.keys(_modifier).find(l=>_modifier[l]===s);function setScope(s){_scope=s||"all"}function getScope(){return _scope||"all"}function getPressedKeyCodes(){return _downKeys.slice(0)}function getPressedKeyString(){return _downKeys.map(s=>getKey(s)||getModifier(s)||String.fromCharCode(s))}function getAllKeyCodes(){const s=[];return Object.keys(_handlers).forEach(l=>{_handlers[l].forEach(c=>{let{key:d,scope:f,mods:g,shortcut:v}=c;s.push({scope:f,shortcut:v,mods:g,keys:d.split("+").map(b=>code$1(b))})})}),s}function filter$1(s){const l=s.target||s.srcElement,{tagName:c}=l;let d=!0;const f=c==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(l.type);return(l.isContentEditable||(f||c==="TEXTAREA"||c==="SELECT")&&!l.readOnly)&&(d=!1),d}function isPressed(s){return typeof s=="string"&&(s=code$1(s)),_downKeys.indexOf(s)!==-1}function deleteScope(s,l){let c,d;s||(s=getScope());for(const f in _handlers)if(Object.prototype.hasOwnProperty.call(_handlers,f))for(c=_handlers[f],d=0;d<c.length;)c[d].scope===s?c.splice(d,1).forEach(v=>{let{element:b}=v;return removeKeyEvent(b)}):d++;getScope()===s&&setScope(l||"all")}function clearModifier(s){let l=s.keyCode||s.which||s.charCode;const c=_downKeys.indexOf(l);if(c>=0&&_downKeys.splice(c,1),s.key&&s.key.toLowerCase()==="meta"&&_downKeys.splice(0,_downKeys.length),(l===93||l===224)&&(l=91),l in _mods){_mods[l]=!1;for(const d in _modifier)_modifier[d]===l&&(hotkeys[d]=!1)}}function unbind(s){if(typeof s>"u")Object.keys(_handlers).forEach(f=>{Array.isArray(_handlers[f])&&_handlers[f].forEach(g=>eachUnbind(g)),delete _handlers[f]}),removeKeyEvent(null);else if(Array.isArray(s))s.forEach(f=>{f.key&&eachUnbind(f)});else if(typeof s=="object")s.key&&eachUnbind(s);else if(typeof s=="string"){for(var l=arguments.length,c=new Array(l>1?l-1:0),d=1;d<l;d++)c[d-1]=arguments[d];let[f,g]=c;typeof f=="function"&&(g=f,f=""),eachUnbind({key:s,scope:f,method:g,splitKey:"+"})}}const eachUnbind=s=>{let{key:l,scope:c,method:d,splitKey:f="+"}=s;getKeys(l).forEach(v=>{const b=v.split(f),$=b.length,y=b[$-1],x=y==="*"?"*":code$1(y);if(!_handlers[x])return;c||(c=getScope());const C=$>1?getMods$1(_modifier,b):[],E=[];_handlers[x]=_handlers[x].filter(N=>{const q=(d?N.method===d:!0)&&N.scope===c&&compareArray(N.mods,C);return q&&E.push(N.element),!q}),E.forEach(N=>removeKeyEvent(N))})};function eventHandler(s,l,c,d){if(l.element!==d)return;let f;if(l.scope===c||l.scope==="all"){f=l.mods.length>0;for(const g in _mods)Object.prototype.hasOwnProperty.call(_mods,g)&&(!_mods[g]&&l.mods.indexOf(+g)>-1||_mods[g]&&l.mods.indexOf(+g)===-1)&&(f=!1);(l.mods.length===0&&!_mods[16]&&!_mods[18]&&!_mods[17]&&!_mods[91]||f||l.shortcut==="*")&&(l.keys=[],l.keys=l.keys.concat(_downKeys),l.method(s,l)===!1&&(s.preventDefault?s.preventDefault():s.returnValue=!1,s.stopPropagation&&s.stopPropagation(),s.cancelBubble&&(s.cancelBubble=!0)))}}function dispatch$1(s,l){const c=_handlers["*"];let d=s.keyCode||s.which||s.charCode;if(!hotkeys.filter.call(this,s))return;if((d===93||d===224)&&(d=91),_downKeys.indexOf(d)===-1&&d!==229&&_downKeys.push(d),["ctrlKey","altKey","shiftKey","metaKey"].forEach(b=>{const $=modifierMap[b];s[b]&&_downKeys.indexOf($)===-1?_downKeys.push($):!s[b]&&_downKeys.indexOf($)>-1?_downKeys.splice(_downKeys.indexOf($),1):b==="metaKey"&&s[b]&&_downKeys.length===3&&(s.ctrlKey||s.shiftKey||s.altKey||(_downKeys=_downKeys.slice(_downKeys.indexOf($))))}),d in _mods){_mods[d]=!0;for(const b in _modifier)_modifier[b]===d&&(hotkeys[b]=!0);if(!c)return}for(const b in _mods)Object.prototype.hasOwnProperty.call(_mods,b)&&(_mods[b]=s[modifierMap[b]]);s.getModifierState&&!(s.altKey&&!s.ctrlKey)&&s.getModifierState("AltGraph")&&(_downKeys.indexOf(17)===-1&&_downKeys.push(17),_downKeys.indexOf(18)===-1&&_downKeys.push(18),_mods[17]=!0,_mods[18]=!0);const f=getScope();if(c)for(let b=0;b<c.length;b++)c[b].scope===f&&(s.type==="keydown"&&c[b].keydown||s.type==="keyup"&&c[b].keyup)&&eventHandler(s,c[b],f,l);if(!(d in _handlers))return;const g=_handlers[d],v=g.length;for(let b=0;b<v;b++)if((s.type==="keydown"&&g[b].keydown||s.type==="keyup"&&g[b].keyup)&&g[b].key){const $=g[b],{splitKey:y}=$,x=$.key.split(y),C=[];for(let E=0;E<x.length;E++)C.push(code$1(x[E]));C.sort().join("")===_downKeys.sort().join("")&&eventHandler(s,$,f,l)}}function hotkeys(s,l,c){_downKeys=[];const d=getKeys(s);let f=[],g="all",v=document,b=0,$=!1,y=!0,x="+",C=!1,E=!1;for(c===void 0&&typeof l=="function"&&(c=l),Object.prototype.toString.call(l)==="[object Object]"&&(l.scope&&(g=l.scope),l.element&&(v=l.element),l.keyup&&($=l.keyup),l.keydown!==void 0&&(y=l.keydown),l.capture!==void 0&&(C=l.capture),typeof l.splitKey=="string"&&(x=l.splitKey),l.single===!0&&(E=!0)),typeof l=="string"&&(g=l),E&&unbind(s,g);b<d.length;b++)s=d[b].split(x),f=[],s.length>1&&(f=getMods$1(_modifier,s)),s=s[s.length-1],s=s==="*"?"*":code$1(s),s in _handlers||(_handlers[s]=[]),_handlers[s].push({keyup:$,keydown:y,scope:g,mods:f,shortcut:d[b],method:c,key:d[b],splitKey:x,element:v});if(typeof v<"u"&&window){if(!elementEventMap.has(v)){const N=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return dispatch$1(q,v)},W=function(){let q=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;dispatch$1(q,v),clearModifier(q)};elementEventMap.set(v,{keydownListener:N,keyupListenr:W,capture:C}),addEvent(v,"keydown",N,C),addEvent(v,"keyup",W,C)}if(!winListendFocus){const N=()=>{_downKeys=[]};winListendFocus={listener:N,capture:C},addEvent(window,"focus",N,C)}}}function trigger$1(s){let l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(_handlers).forEach(c=>{_handlers[c].filter(f=>f.scope===l&&f.shortcut===s).forEach(f=>{f&&f.method&&f.method()})})}function removeKeyEvent(s){const l=Object.values(_handlers).flat();if(l.findIndex(d=>{let{element:f}=d;return f===s})<0){const{keydownListener:d,keyupListenr:f,capture:g}=elementEventMap.get(s)||{};d&&f&&(removeEvent(s,"keyup",f,g),removeEvent(s,"keydown",d,g),elementEventMap.delete(s))}if((l.length<=0||elementEventMap.size<=0)&&(Object.keys(elementEventMap).forEach(f=>{const{keydownListener:g,keyupListenr:v,capture:b}=elementEventMap.get(f)||{};g&&v&&(removeEvent(f,"keyup",v,b),removeEvent(f,"keydown",g,b),elementEventMap.delete(f))}),elementEventMap.clear(),Object.keys(_handlers).forEach(f=>delete _handlers[f]),winListendFocus)){const{listener:f,capture:g}=winListendFocus;removeEvent(window,"focus",f,g),winListendFocus=null}}const _api={getPressedKeyString,setScope,getScope,deleteScope,getPressedKeyCodes,getAllKeyCodes,isPressed,filter:filter$1,trigger:trigger$1,unbind,keyMap:_keyMap,modifier:_modifier,modifierMap};for(const s in _api)Object.prototype.hasOwnProperty.call(_api,s)&&(hotkeys[s]=_api[s]);if(typeof window<"u"){const s=window.hotkeys;hotkeys.noConflict=l=>(l&&window.hotkeys===hotkeys&&(window.hotkeys=s),hotkeys),window.hotkeys=hotkeys}const config$2={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs"}};var __defProp$3=Object.defineProperty,__getOwnPropSymbols$3=Object.getOwnPropertySymbols,__hasOwnProp$4=Object.prototype.hasOwnProperty,__propIsEnum$3=Object.prototype.propertyIsEnumerable,__defNormalProp$2=(s,l,c)=>l in s?__defProp$3(s,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[l]=c,__spreadValues$2=(s,l)=>{for(var c in l||(l={}))__hasOwnProp$4.call(l,c)&&__defNormalProp$2(s,c,l[c]);if(__getOwnPropSymbols$3)for(var c of __getOwnPropSymbols$3(l))__propIsEnum$3.call(l,c)&&__defNormalProp$2(s,c,l[c]);return s};function compose(...s){return l=>s.reduceRight((c,d)=>d(c),l)}function curry(s){return function l(...c){return c.length>=s.length?s.apply(this,c):(...d)=>l.apply(this,[...c,...d])}}function deepMerge(s,l){return Object.keys(l).forEach(c=>{l[c]instanceof Object&&s[c]&&Object.assign(l[c],deepMerge(s[c],l[c]))}),__spreadValues$2(__spreadValues$2({},s),l)}function isObject$4(s){return Object.prototype.toString.call(s).includes("Object")}function isFunction$4(s){return typeof s=="function"}function isEmpty$4(s){return Reflect.ownKeys(s).length===0}function hasOwnProperty$b(s,l){return Object.prototype.hasOwnProperty.call(s,l)}const CANCELATION_MESSAGE={type:"cancelation",msg:"operation is manually canceled"};function makeCancelable(s){let l=!1;const c=new Promise((d,f)=>{s.then(g=>l?f(CANCELATION_MESSAGE):d(g)),s.catch(f)});return Object.assign(c,{cancel(){l=!0}}),c}const errorMessages={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"An unknown error occurred",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })
  `};function informAboutDeprecation(){console.warn(errorMessages.deprecation)}function throwError$1(s,l){throw new Error(s[l]||errorMessages.default)}const errorHandler=curry(throwError$1)(errorMessages);function validateConfig$1(s){return s||errorHandler("configIsRequired"),isObject$4(s)||errorHandler("configType"),s.urls?(informAboutDeprecation(),{paths:{vs:s.urls.monacoBase}}):s}function validateChanges(s,l){return isObject$4(l)||errorHandler("changeType"),Object.keys(l).some(c=>!hasOwnProperty$b(s,c))&&errorHandler("changeField"),l}function validateSelector(s){isFunction$4(s)||errorHandler("selectorType")}function validateHandler(s){isFunction$4(s)||isObject$4(s)||errorHandler("handlerType"),isObject$4(s)&&Object.values(s).some(l=>!isFunction$4(l))&&errorHandler("handlersType")}function validateInitial(s){s||errorHandler("initialIsRequired"),isObject$4(s)||errorHandler("initialType"),isEmpty$4(s)&&errorHandler("initialContent")}const validators={config:validateConfig$1,changes:validateChanges,selector:validateSelector,handler:validateHandler,initial:validateInitial};var __defProp$2=Object.defineProperty,__getOwnPropSymbols$2=Object.getOwnPropertySymbols,__hasOwnProp$3=Object.prototype.hasOwnProperty,__propIsEnum$2=Object.prototype.propertyIsEnumerable,__defNormalProp$1=(s,l,c)=>l in s?__defProp$2(s,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[l]=c,__spreadValues$1=(s,l)=>{for(var c in l||(l={}))__hasOwnProp$3.call(l,c)&&__defNormalProp$1(s,c,l[c]);if(__getOwnPropSymbols$2)for(var c of __getOwnPropSymbols$2(l))__propIsEnum$2.call(l,c)&&__defNormalProp$1(s,c,l[c]);return s};function extractChanges(s,l){return isFunction$4(l)?l(s.current):l}function updateState(s,l){return s.current=__spreadValues$1(__spreadValues$1({},s.current),l),l}function didStateUpdate(s,l,c){return isFunction$4(l)?l(s.current):Object.keys(c).forEach(d=>{var f;return(f=l[d])==null?void 0:f.call(l,s.current[d])}),c}function createState(s,l={}){validators.initial(s),validators.handler(l);const c={current:s},d=curry(didStateUpdate)(c,l),f=curry(updateState)(c),g=curry(validators.changes)(s),v=curry(extractChanges)(c);function b(y=x=>x){return validators.selector(y),y(c.current)}function $(y){compose(d,f,g,v)(y)}return[b,$]}var __getOwnPropSymbols$1=Object.getOwnPropertySymbols,__hasOwnProp$2=Object.prototype.hasOwnProperty,__propIsEnum$1=Object.prototype.propertyIsEnumerable,__objRest=(s,l)=>{var c={};for(var d in s)__hasOwnProp$2.call(s,d)&&l.indexOf(d)<0&&(c[d]=s[d]);if(s!=null&&__getOwnPropSymbols$1)for(var d of __getOwnPropSymbols$1(s))l.indexOf(d)<0&&__propIsEnum$1.call(s,d)&&(c[d]=s[d]);return c};const[getState,setState]=createState({config:config$2,isInitialized:!1,resolve:null,reject:null,monaco:null}),wrapperPromise=new Promise((s,l)=>setState({resolve:s,reject:l}));function config$1(s){const l=validators.config(s),{monaco:c}=l,d=__objRest(l,["monaco"]);setState(f=>({config:deepMerge(f.config,d),monaco:c}))}function init$6(){const s=getState(({monaco:l,isInitialized:c,resolve:d})=>({monaco:l,isInitialized:c,resolve:d}));if(!s.isInitialized){if(setState({isInitialized:!0}),s.monaco)return s.resolve(s.monaco),makeCancelable(wrapperPromise);if(window.monaco&&window.monaco.editor)return storeMonacoInstance(window.monaco),s.resolve(window.monaco),makeCancelable(wrapperPromise);compose(injectScripts,getMonacoLoaderScript)(configureLoader)}return makeCancelable(wrapperPromise)}function injectScripts(s){return document.body.appendChild(s)}function createScript(s){const l=document.createElement("script");return s&&(l.src=s),l}function getMonacoLoaderScript(s){const l=getState(({config:d,reject:f})=>({config:d,reject:f})),c=createScript(`${l.config.paths.vs}/loader.js`);return c.onload=()=>s(),c.onerror=l.reject,c}function configureLoader(){const s=getState(({config:c,resolve:d,reject:f})=>({config:c,resolve:d,reject:f})),l=window.require;l.config(s.config),l(["vs/editor/editor.main"],c=>{storeMonacoInstance(c),s.resolve(c)},c=>{s.reject(c)})}function storeMonacoInstance(s){getState().monaco||setState({monaco:s})}function getMonacoInstance(){return getState(({monaco:s})=>s)}var loader$n={config:config$1,init:init$6,getMonacoInstance};function noop$4(){}function processSize(s){return/^\d+$/.test(s)?`${s}px`:s}function getOrCreateModel(s,l,c,d){return getModel(s,d)||createModel(s,l,c,d)}function getModel(s,l){return s.editor.getModel(createModelUri(s,l))}function createModel(s,l,c,d){return s.editor.createModel(l,c,d?createModelUri(s,d):void 0)}function createModelUri(s,l){return s.Uri.parse(l)}function getSlotHelper(s){return typeof s=="function"?s():s}function useStyle(s,l){const c=computed(()=>({display:"flex",position:"relative",textAlign:"initial",width:processSize(s.width),height:processSize(s.height)})),d=computed(()=>{const g={width:"100%"};return l.value||(g.display="none"),g}),f=computed(()=>({display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}));return{getWrapperStyle:c,getContainerStyle:d,getLoadingStyle:f}}function useMonaco(){const s=shallowRef(loader$n.getMonacoInstance()),l=ref(!1);let c;return onMounted(async()=>{try{if(s.value)return;c=loader$n.init(),s.value=await c}catch(f){(f==null?void 0:f.type)!=="cancelation"?(l.value=!0,console.error("Monaco initialization error:",f)):l.value=!1}}),{monacoRef:s,unload:()=>c==null?void 0:c.cancel(),isLoadFailed:l}}function useEditor(s,l,c){const{monacoRef:d,unload:f,isLoadFailed:g}=useMonaco(),v=shallowRef(null),b=shallowRef(null),$=computed(()=>!!d.value&&!!v.value),{getWrapperStyle:y,getContainerStyle:x,getLoadingStyle:C}=useStyle({width:s.width,height:s.height},$);function E(W){return function(...q){$.value&&W.apply(this,q)}}return watch(()=>s.theme,E(W=>{var q;return(q=d.value)==null?void 0:q.editor.setTheme(W)})),watch(()=>s.options,W=>{var q;return(q=v.value)==null?void 0:q.updateOptions(W)},{deep:!0}),{render:()=>{var W,q,Y;return h("section",{style:y.value},[!$.value&&h("div",{style:C.value},g.value?l.slots.failure?getSlotHelper((W=l.slots)==null?void 0:W.failure):"load failed":(q=l.slots)!=null&&q.loading?getSlotHelper((Y=l.slots)==null?void 0:Y.loading):"loading..."),h("div",{ref:b,key:c,style:x.value,class:s.className})])},monacoRef:d,containerRef:b,editorRef:v,unload:f,whenMonacoIsReady:E}}function useValidator(s,l,c){const d=ref(noop$4),f=watch(()=>[l,c],()=>{if(l.value&&c.value){nextTick(()=>f());const g=l.value.editor.onDidChangeMarkers(v=>{var b,$;const y=($=(b=c.value)==null?void 0:b.getModel())==null?void 0:$.uri;if(y&&v.find(C=>C.path===y.path)){const C=l.value.editor.getModelMarkers({resource:y});s("validate",C)}});d.value=()=>g==null?void 0:g.dispose()}});return{disposeValidator:d}}const editorProps={defaultValue:{type:String},defaultLanguage:{type:String},defaultPath:{type:String},value:{type:String,value:""},language:{type:String,default:"javascript"},path:{type:String,default:""},theme:{type:String,default:"light"},line:{type:Number},options:{type:Object,default:()=>({})},overrideServices:{type:Object},saveViewState:{type:Boolean,default:!0},keepCurrentModel:{type:Boolean,default:!1},width:{type:[Number,String],default:"100%"},height:{type:[Number,String],default:"100%"},className:{type:String}};var __defProp$1=Object.defineProperty,__getOwnPropSymbols=Object.getOwnPropertySymbols,__hasOwnProp$1=Object.prototype.hasOwnProperty,__propIsEnum=Object.prototype.propertyIsEnumerable,__defNormalProp=(s,l,c)=>l in s?__defProp$1(s,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[l]=c,__spreadValues=(s,l)=>{for(var c in l||(l={}))__hasOwnProp$1.call(l,c)&&__defNormalProp(s,c,l[c]);if(__getOwnPropSymbols)for(var c of __getOwnPropSymbols(l))__propIsEnum.call(l,c)&&__defNormalProp(s,c,l[c]);return s};const viewStates=new Map;var MonacoEditor=defineComponent({name:"MonacoEditor",props:editorProps,emits:["update:value","beforeMount","mount","change","validate"],slots:Object,setup(s,l){const{emit:c}=l,{render:d,containerRef:f,editorRef:g,monacoRef:v,unload:b,whenMonacoIsReady:$}=useEditor(s,l,"vue-monaco-editor"),{disposeValidator:y}=useValidator(c,v,g),x=ref(!1);watch(()=>s.path,$((N,W)=>{var q,Y,re;const se=getOrCreateModel(v.value,s.defaultValue||s.value||"",s.defaultLanguage||s.language||"",s.path||s.defaultPath||"");se!==((q=g.value)==null?void 0:q.getModel())&&(s.saveViewState&&viewStates.set(W,g.value.saveViewState()),(Y=g.value)==null||Y.setModel(se),s.saveViewState&&((re=g.value)==null||re.restoreViewState(viewStates.get(N))))})),watch(()=>s.value,$(N=>{!g.value||N===void 0||(g.value.getOption(v.value.editor.EditorOption.readOnly)?g.value.setValue(N):N!==g.value.getValue()&&(x.value=!0,g.value.executeEdits("",[{range:g.value.getModel().getFullModelRange(),text:N,forceMoveMarkers:!0}]),g.value.pushUndoStop(),x.value=!1))})),watch(()=>s.language,$(N=>{var W,q;const Y=(W=g.value)==null?void 0:W.getModel();Y&&N&&((q=v.value)==null||q.editor.setModelLanguage(Y,N))})),watch(()=>s.line,$(N=>{var W;N!==void 0&&((W=g.value)==null||W.revealLine(N))}));const C=()=>{var N,W,q;if(!f.value||!v.value||g.value)return;c("beforeMount",v.value);const Y=s.path||s.defaultPath,re=getOrCreateModel(v.value,s.value||s.defaultValue||"",s.language||s.defaultLanguage||"",Y||"");if(g.value=(N=v.value)==null?void 0:N.editor.create(f.value,__spreadValues({model:re,theme:s.theme,automaticLayout:!0,autoIndent:"brackets",formatOnPaste:!0,formatOnType:!0},s.options),s.overrideServices),(W=g.value)==null||W.onDidChangeModelContent(se=>{if(!x.value){const de=g.value.getValue();c("update:value",de),c("change",de,se)}}),s.saveViewState){const se=viewStates.get(Y);se&&g.value.restoreViewState(se)}s.line!==void 0&&((q=g.value)==null||q.revealLine(s.line)),c("mount",g.value,v.value)};onMounted(()=>{const N=watch(()=>v.value,W=>{f.value&&W&&(nextTick(()=>N()),C())},{immediate:!0})}),onUnmounted(()=>{var N;(N=y.value)==null||N.call(y),g.value?E():b()});function E(){var N,W;s.keepCurrentModel&&(s.saveViewState?viewStates.set(s.path,g.value.saveViewState()):(N=g.value.getModel())==null||N.dispose()),(W=g.value)==null||W.dispose()}return d}});const lower16=65535,factor16=Math.pow(2,16);function makeRecover(s,l){return s+l*factor16}function recoverIndex(s){return s&lower16}function recoverOffset(s){return(s-(s&lower16))/factor16}const DEL_BEFORE=1,DEL_AFTER=2,DEL_ACROSS=4,DEL_SIDE=8;class MapResult{constructor(l,c,d){this.pos=l,this.delInfo=c,this.recover=d}get deleted(){return(this.delInfo&DEL_SIDE)>0}get deletedBefore(){return(this.delInfo&(DEL_BEFORE|DEL_ACROSS))>0}get deletedAfter(){return(this.delInfo&(DEL_AFTER|DEL_ACROSS))>0}get deletedAcross(){return(this.delInfo&DEL_ACROSS)>0}}class StepMap{constructor(l,c=!1){if(this.ranges=l,this.inverted=c,!l.length&&StepMap.empty)return StepMap.empty}recover(l){let c=0,d=recoverIndex(l);if(!this.inverted)for(let f=0;f<d;f++)c+=this.ranges[f*3+2]-this.ranges[f*3+1];return this.ranges[d*3]+c+recoverOffset(l)}mapResult(l,c=1){return this._map(l,c,!1)}map(l,c=1){return this._map(l,c,!0)}_map(l,c,d){let f=0,g=this.inverted?2:1,v=this.inverted?1:2;for(let b=0;b<this.ranges.length;b+=3){let $=this.ranges[b]-(this.inverted?f:0);if($>l)break;let y=this.ranges[b+g],x=this.ranges[b+v],C=$+y;if(l<=C){let E=y?l==$?-1:l==C?1:c:c,N=$+f+(E<0?0:x);if(d)return N;let W=l==(c<0?$:C)?null:makeRecover(b/3,l-$),q=l==$?DEL_AFTER:l==C?DEL_BEFORE:DEL_ACROSS;return(c<0?l!=$:l!=C)&&(q|=DEL_SIDE),new MapResult(N,q,W)}f+=x-y}return d?l+f:new MapResult(l+f,0,null)}touches(l,c){let d=0,f=recoverIndex(c),g=this.inverted?2:1,v=this.inverted?1:2;for(let b=0;b<this.ranges.length;b+=3){let $=this.ranges[b]-(this.inverted?d:0);if($>l)break;let y=this.ranges[b+g],x=$+y;if(l<=x&&b==f*3)return!0;d+=this.ranges[b+v]-y}return!1}forEach(l){let c=this.inverted?2:1,d=this.inverted?1:2;for(let f=0,g=0;f<this.ranges.length;f+=3){let v=this.ranges[f],b=v-(this.inverted?g:0),$=v+(this.inverted?0:g),y=this.ranges[f+c],x=this.ranges[f+d];l(b,b+y,$,$+x),g+=x-y}}invert(){return new StepMap(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(l){return l==0?StepMap.empty:new StepMap(l<0?[0,-l,0]:[0,0,l])}}StepMap.empty=new StepMap([]);class Mapping{constructor(l=[],c,d=0,f=l.length){this.maps=l,this.mirror=c,this.from=d,this.to=f}slice(l=0,c=this.maps.length){return new Mapping(this.maps,this.mirror,l,c)}copy(){return new Mapping(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)}appendMap(l,c){this.to=this.maps.push(l),c!=null&&this.setMirror(this.maps.length-1,c)}appendMapping(l){for(let c=0,d=this.maps.length;c<l.maps.length;c++){let f=l.getMirror(c);this.appendMap(l.maps[c],f!=null&&f<c?d+f:void 0)}}getMirror(l){if(this.mirror){for(let c=0;c<this.mirror.length;c++)if(this.mirror[c]==l)return this.mirror[c+(c%2?-1:1)]}}setMirror(l,c){this.mirror||(this.mirror=[]),this.mirror.push(l,c)}appendMappingInverted(l){for(let c=l.maps.length-1,d=this.maps.length+l.maps.length;c>=0;c--){let f=l.getMirror(c);this.appendMap(l.maps[c].invert(),f!=null&&f>c?d-f-1:void 0)}}invert(){let l=new Mapping;return l.appendMappingInverted(this),l}map(l,c=1){if(this.mirror)return this._map(l,c,!0);for(let d=this.from;d<this.to;d++)l=this.maps[d].map(l,c);return l}mapResult(l,c=1){return this._map(l,c,!1)}_map(l,c,d){let f=0;for(let g=this.from;g<this.to;g++){let v=this.maps[g],b=v.mapResult(l,c);if(b.recover!=null){let $=this.getMirror(g);if($!=null&&$>g&&$<this.to){g=$,l=this.maps[$].recover(b.recover);continue}}f|=b.delInfo,l=b.pos}return d?l:new MapResult(l,f,null)}}const stepsByID=Object.create(null);let Step$1=class{getMap(){return StepMap.empty}merge(l){return null}static fromJSON(l,c){if(!c||!c.stepType)throw new RangeError("Invalid input for Step.fromJSON");let d=stepsByID[c.stepType];if(!d)throw new RangeError(`No step type ${c.stepType} defined`);return d.fromJSON(l,c)}static jsonID(l,c){if(l in stepsByID)throw new RangeError("Duplicate use of step JSON ID "+l);return stepsByID[l]=c,c.prototype.jsonID=l,c}};class StepResult{constructor(l,c){this.doc=l,this.failed=c}static ok(l){return new StepResult(l,null)}static fail(l){return new StepResult(null,l)}static fromReplace(l,c,d,f){try{return StepResult.ok(l.replace(c,d,f))}catch(g){if(g instanceof ReplaceError)return StepResult.fail(g.message);throw g}}}function mapFragment(s,l,c){let d=[];for(let f=0;f<s.childCount;f++){let g=s.child(f);g.content.size&&(g=g.copy(mapFragment(g.content,l,g))),g.isInline&&(g=l(g,c,f)),d.push(g)}return Fragment.fromArray(d)}class AddMarkStep extends Step$1{constructor(l,c,d){super(),this.from=l,this.to=c,this.mark=d}apply(l){let c=l.slice(this.from,this.to),d=l.resolve(this.from),f=d.node(d.sharedDepth(this.to)),g=new Slice(mapFragment(c.content,(v,b)=>!v.isAtom||!b.type.allowsMarkType(this.mark.type)?v:v.mark(this.mark.addToSet(v.marks)),f),c.openStart,c.openEnd);return StepResult.fromReplace(l,this.from,this.to,g)}invert(){return new RemoveMarkStep(this.from,this.to,this.mark)}map(l){let c=l.mapResult(this.from,1),d=l.mapResult(this.to,-1);return c.deleted&&d.deleted||c.pos>=d.pos?null:new AddMarkStep(c.pos,d.pos,this.mark)}merge(l){return l instanceof AddMarkStep&&l.mark.eq(this.mark)&&this.from<=l.to&&this.to>=l.from?new AddMarkStep(Math.min(this.from,l.from),Math.max(this.to,l.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(l,c){if(typeof c.from!="number"||typeof c.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new AddMarkStep(c.from,c.to,l.markFromJSON(c.mark))}}Step$1.jsonID("addMark",AddMarkStep);class RemoveMarkStep extends Step$1{constructor(l,c,d){super(),this.from=l,this.to=c,this.mark=d}apply(l){let c=l.slice(this.from,this.to),d=new Slice(mapFragment(c.content,f=>f.mark(this.mark.removeFromSet(f.marks)),l),c.openStart,c.openEnd);return StepResult.fromReplace(l,this.from,this.to,d)}invert(){return new AddMarkStep(this.from,this.to,this.mark)}map(l){let c=l.mapResult(this.from,1),d=l.mapResult(this.to,-1);return c.deleted&&d.deleted||c.pos>=d.pos?null:new RemoveMarkStep(c.pos,d.pos,this.mark)}merge(l){return l instanceof RemoveMarkStep&&l.mark.eq(this.mark)&&this.from<=l.to&&this.to>=l.from?new RemoveMarkStep(Math.min(this.from,l.from),Math.max(this.to,l.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(l,c){if(typeof c.from!="number"||typeof c.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new RemoveMarkStep(c.from,c.to,l.markFromJSON(c.mark))}}Step$1.jsonID("removeMark",RemoveMarkStep);class AddNodeMarkStep extends Step$1{constructor(l,c){super(),this.pos=l,this.mark=c}apply(l){let c=l.nodeAt(this.pos);if(!c)return StepResult.fail("No node at mark step's position");let d=c.type.create(c.attrs,null,this.mark.addToSet(c.marks));return StepResult.fromReplace(l,this.pos,this.pos+1,new Slice(Fragment.from(d),0,c.isLeaf?0:1))}invert(l){let c=l.nodeAt(this.pos);if(c){let d=this.mark.addToSet(c.marks);if(d.length==c.marks.length){for(let f=0;f<c.marks.length;f++)if(!c.marks[f].isInSet(d))return new AddNodeMarkStep(this.pos,c.marks[f]);return new AddNodeMarkStep(this.pos,this.mark)}}return new RemoveNodeMarkStep(this.pos,this.mark)}map(l){let c=l.mapResult(this.pos,1);return c.deletedAfter?null:new AddNodeMarkStep(c.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(l,c){if(typeof c.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new AddNodeMarkStep(c.pos,l.markFromJSON(c.mark))}}Step$1.jsonID("addNodeMark",AddNodeMarkStep);class RemoveNodeMarkStep extends Step$1{constructor(l,c){super(),this.pos=l,this.mark=c}apply(l){let c=l.nodeAt(this.pos);if(!c)return StepResult.fail("No node at mark step's position");let d=c.type.create(c.attrs,null,this.mark.removeFromSet(c.marks));return StepResult.fromReplace(l,this.pos,this.pos+1,new Slice(Fragment.from(d),0,c.isLeaf?0:1))}invert(l){let c=l.nodeAt(this.pos);return!c||!this.mark.isInSet(c.marks)?this:new AddNodeMarkStep(this.pos,this.mark)}map(l){let c=l.mapResult(this.pos,1);return c.deletedAfter?null:new RemoveNodeMarkStep(c.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(l,c){if(typeof c.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new RemoveNodeMarkStep(c.pos,l.markFromJSON(c.mark))}}Step$1.jsonID("removeNodeMark",RemoveNodeMarkStep);class ReplaceStep extends Step$1{constructor(l,c,d,f=!1){super(),this.from=l,this.to=c,this.slice=d,this.structure=f}apply(l){return this.structure&&contentBetween(l,this.from,this.to)?StepResult.fail("Structure replace would overwrite content"):StepResult.fromReplace(l,this.from,this.to,this.slice)}getMap(){return new StepMap([this.from,this.to-this.from,this.slice.size])}invert(l){return new ReplaceStep(this.from,this.from+this.slice.size,l.slice(this.from,this.to))}map(l){let c=l.mapResult(this.from,1),d=l.mapResult(this.to,-1);return c.deletedAcross&&d.deletedAcross?null:new ReplaceStep(c.pos,Math.max(c.pos,d.pos),this.slice)}merge(l){if(!(l instanceof ReplaceStep)||l.structure||this.structure)return null;if(this.from+this.slice.size==l.from&&!this.slice.openEnd&&!l.slice.openStart){let c=this.slice.size+l.slice.size==0?Slice.empty:new Slice(this.slice.content.append(l.slice.content),this.slice.openStart,l.slice.openEnd);return new ReplaceStep(this.from,this.to+(l.to-l.from),c,this.structure)}else if(l.to==this.from&&!this.slice.openStart&&!l.slice.openEnd){let c=this.slice.size+l.slice.size==0?Slice.empty:new Slice(l.slice.content.append(this.slice.content),l.slice.openStart,this.slice.openEnd);return new ReplaceStep(l.from,this.to,c,this.structure)}else return null}toJSON(){let l={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(l.slice=this.slice.toJSON()),this.structure&&(l.structure=!0),l}static fromJSON(l,c){if(typeof c.from!="number"||typeof c.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new ReplaceStep(c.from,c.to,Slice.fromJSON(l,c.slice),!!c.structure)}}Step$1.jsonID("replace",ReplaceStep);class ReplaceAroundStep extends Step$1{constructor(l,c,d,f,g,v,b=!1){super(),this.from=l,this.to=c,this.gapFrom=d,this.gapTo=f,this.slice=g,this.insert=v,this.structure=b}apply(l){if(this.structure&&(contentBetween(l,this.from,this.gapFrom)||contentBetween(l,this.gapTo,this.to)))return StepResult.fail("Structure gap-replace would overwrite content");let c=l.slice(this.gapFrom,this.gapTo);if(c.openStart||c.openEnd)return StepResult.fail("Gap is not a flat range");let d=this.slice.insertAt(this.insert,c.content);return d?StepResult.fromReplace(l,this.from,this.to,d):StepResult.fail("Content does not fit in gap")}getMap(){return new StepMap([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(l){let c=this.gapTo-this.gapFrom;return new ReplaceAroundStep(this.from,this.from+this.slice.size+c,this.from+this.insert,this.from+this.insert+c,l.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(l){let c=l.mapResult(this.from,1),d=l.mapResult(this.to,-1),f=this.from==this.gapFrom?c.pos:l.map(this.gapFrom,-1),g=this.to==this.gapTo?d.pos:l.map(this.gapTo,1);return c.deletedAcross&&d.deletedAcross||f<c.pos||g>d.pos?null:new ReplaceAroundStep(c.pos,d.pos,f,g,this.slice,this.insert,this.structure)}toJSON(){let l={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(l.slice=this.slice.toJSON()),this.structure&&(l.structure=!0),l}static fromJSON(l,c){if(typeof c.from!="number"||typeof c.to!="number"||typeof c.gapFrom!="number"||typeof c.gapTo!="number"||typeof c.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ReplaceAroundStep(c.from,c.to,c.gapFrom,c.gapTo,Slice.fromJSON(l,c.slice),c.insert,!!c.structure)}}Step$1.jsonID("replaceAround",ReplaceAroundStep);function contentBetween(s,l,c){let d=s.resolve(l),f=c-l,g=d.depth;for(;f>0&&g>0&&d.indexAfter(g)==d.node(g).childCount;)g--,f--;if(f>0){let v=d.node(g).maybeChild(d.indexAfter(g));for(;f>0;){if(!v||v.isLeaf)return!0;v=v.firstChild,f--}}return!1}function addMark(s,l,c,d){let f=[],g=[],v,b;s.doc.nodesBetween(l,c,($,y,x)=>{if(!$.isInline)return;let C=$.marks;if(!d.isInSet(C)&&x.type.allowsMarkType(d.type)){let E=Math.max(y,l),N=Math.min(y+$.nodeSize,c),W=d.addToSet(C);for(let q=0;q<C.length;q++)C[q].isInSet(W)||(v&&v.to==E&&v.mark.eq(C[q])?v.to=N:f.push(v=new RemoveMarkStep(E,N,C[q])));b&&b.to==E?b.to=N:g.push(b=new AddMarkStep(E,N,d))}}),f.forEach($=>s.step($)),g.forEach($=>s.step($))}function removeMark(s,l,c,d){let f=[],g=0;s.doc.nodesBetween(l,c,(v,b)=>{if(!v.isInline)return;g++;let $=null;if(d instanceof MarkType){let y=v.marks,x;for(;x=d.isInSet(y);)($||($=[])).push(x),y=x.removeFromSet(y)}else d?d.isInSet(v.marks)&&($=[d]):$=v.marks;if($&&$.length){let y=Math.min(b+v.nodeSize,c);for(let x=0;x<$.length;x++){let C=$[x],E;for(let N=0;N<f.length;N++){let W=f[N];W.step==g-1&&C.eq(f[N].style)&&(E=W)}E?(E.to=y,E.step=g):f.push({style:C,from:Math.max(b,l),to:y,step:g})}}}),f.forEach(v=>s.step(new RemoveMarkStep(v.from,v.to,v.style)))}function clearIncompatible(s,l,c,d=c.contentMatch,f=!0){let g=s.doc.nodeAt(l),v=[],b=l+1;for(let $=0;$<g.childCount;$++){let y=g.child($),x=b+y.nodeSize,C=d.matchType(y.type);if(!C)v.push(new ReplaceStep(b,x,Slice.empty));else{d=C;for(let E=0;E<y.marks.length;E++)c.allowsMarkType(y.marks[E].type)||s.step(new RemoveMarkStep(b,x,y.marks[E]));if(f&&y.isText&&c.whitespace!="pre"){let E,N=/\r?\n|\r/g,W;for(;E=N.exec(y.text);)W||(W=new Slice(Fragment.from(c.schema.text(" ",c.allowedMarks(y.marks))),0,0)),v.push(new ReplaceStep(b+E.index,b+E.index+E[0].length,W))}}b=x}if(!d.validEnd){let $=d.fillBefore(Fragment.empty,!0);s.replace(b,b,new Slice($,0,0))}for(let $=v.length-1;$>=0;$--)s.step(v[$])}function canCut(s,l,c){return(l==0||s.canReplace(l,s.childCount))&&(c==s.childCount||s.canReplace(0,c))}function liftTarget(s){let c=s.parent.content.cutByIndex(s.startIndex,s.endIndex);for(let d=s.depth;;--d){let f=s.$from.node(d),g=s.$from.index(d),v=s.$to.indexAfter(d);if(d<s.depth&&f.canReplace(g,v,c))return d;if(d==0||f.type.spec.isolating||!canCut(f,g,v))break}return null}function lift$2(s,l,c){let{$from:d,$to:f,depth:g}=l,v=d.before(g+1),b=f.after(g+1),$=v,y=b,x=Fragment.empty,C=0;for(let W=g,q=!1;W>c;W--)q||d.index(W)>0?(q=!0,x=Fragment.from(d.node(W).copy(x)),C++):$--;let E=Fragment.empty,N=0;for(let W=g,q=!1;W>c;W--)q||f.after(W+1)<f.end(W)?(q=!0,E=Fragment.from(f.node(W).copy(E)),N++):y++;s.step(new ReplaceAroundStep($,y,v,b,new Slice(x.append(E),C,N),x.size-C,!0))}function findWrapping(s,l,c=null,d=s){let f=findWrappingOutside(s,l),g=f&&findWrappingInside(d,l);return g?f.map(withAttrs).concat({type:l,attrs:c}).concat(g.map(withAttrs)):null}function withAttrs(s){return{type:s,attrs:null}}function findWrappingOutside(s,l){let{parent:c,startIndex:d,endIndex:f}=s,g=c.contentMatchAt(d).findWrapping(l);if(!g)return null;let v=g.length?g[0]:l;return c.canReplaceWith(d,f,v)?g:null}function findWrappingInside(s,l){let{parent:c,startIndex:d,endIndex:f}=s,g=c.child(d),v=l.contentMatch.findWrapping(g.type);if(!v)return null;let $=(v.length?v[v.length-1]:l).contentMatch;for(let y=d;$&&y<f;y++)$=$.matchType(c.child(y).type);return!$||!$.validEnd?null:v}function wrap$1(s,l,c){let d=Fragment.empty;for(let v=c.length-1;v>=0;v--){if(d.size){let b=c[v].type.contentMatch.matchFragment(d);if(!b||!b.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}d=Fragment.from(c[v].type.create(c[v].attrs,d))}let f=l.start,g=l.end;s.step(new ReplaceAroundStep(f,g,f,g,new Slice(d,0,0),c.length,!0))}function setBlockType$1(s,l,c,d,f){if(!d.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let g=s.steps.length;s.doc.nodesBetween(l,c,(v,b)=>{let $=typeof f=="function"?f(v):f;if(v.isTextblock&&!v.hasMarkup(d,$)&&canChangeType(s.doc,s.mapping.slice(g).map(b),d)){let y=null;if(d.schema.linebreakReplacement){let N=d.whitespace=="pre",W=!!d.contentMatch.matchType(d.schema.linebreakReplacement);N&&!W?y=!1:!N&&W&&(y=!0)}y===!1&&replaceLinebreaks(s,v,b,g),clearIncompatible(s,s.mapping.slice(g).map(b,1),d,void 0,y===null);let x=s.mapping.slice(g),C=x.map(b,1),E=x.map(b+v.nodeSize,1);return s.step(new ReplaceAroundStep(C,E,C+1,E-1,new Slice(Fragment.from(d.create($,null,v.marks)),0,0),1,!0)),y===!0&&replaceNewlines(s,v,b,g),!1}})}function replaceNewlines(s,l,c,d){l.forEach((f,g)=>{if(f.isText){let v,b=/\r?\n|\r/g;for(;v=b.exec(f.text);){let $=s.mapping.slice(d).map(c+1+g+v.index);s.replaceWith($,$+1,l.type.schema.linebreakReplacement.create())}}})}function replaceLinebreaks(s,l,c,d){l.forEach((f,g)=>{if(f.type==f.type.schema.linebreakReplacement){let v=s.mapping.slice(d).map(c+1+g);s.replaceWith(v,v+1,l.type.schema.text(`
`))}})}function canChangeType(s,l,c){let d=s.resolve(l),f=d.index();return d.parent.canReplaceWith(f,f+1,c)}function setNodeMarkup(s,l,c,d,f){let g=s.doc.nodeAt(l);if(!g)throw new RangeError("No node at given position");c||(c=g.type);let v=c.create(d,null,f||g.marks);if(g.isLeaf)return s.replaceWith(l,l+g.nodeSize,v);if(!c.validContent(g.content))throw new RangeError("Invalid content for node type "+c.name);s.step(new ReplaceAroundStep(l,l+g.nodeSize,l+1,l+g.nodeSize-1,new Slice(Fragment.from(v),0,0),1,!0))}function canSplit(s,l,c=1,d){let f=s.resolve(l),g=f.depth-c,v=d&&d[d.length-1]||f.parent;if(g<0||f.parent.type.spec.isolating||!f.parent.canReplace(f.index(),f.parent.childCount)||!v.type.validContent(f.parent.content.cutByIndex(f.index(),f.parent.childCount)))return!1;for(let y=f.depth-1,x=c-2;y>g;y--,x--){let C=f.node(y),E=f.index(y);if(C.type.spec.isolating)return!1;let N=C.content.cutByIndex(E,C.childCount),W=d&&d[x+1];W&&(N=N.replaceChild(0,W.type.create(W.attrs)));let q=d&&d[x]||C;if(!C.canReplace(E+1,C.childCount)||!q.type.validContent(N))return!1}let b=f.indexAfter(g),$=d&&d[0];return f.node(g).canReplaceWith(b,b,$?$.type:f.node(g+1).type)}function split(s,l,c=1,d){let f=s.doc.resolve(l),g=Fragment.empty,v=Fragment.empty;for(let b=f.depth,$=f.depth-c,y=c-1;b>$;b--,y--){g=Fragment.from(f.node(b).copy(g));let x=d&&d[y];v=Fragment.from(x?x.type.create(x.attrs,v):f.node(b).copy(v))}s.step(new ReplaceStep(l,l,new Slice(g.append(v),c,c),!0))}function canJoin(s,l){let c=s.resolve(l),d=c.index();return joinable(c.nodeBefore,c.nodeAfter)&&c.parent.canReplace(d,d+1)}function joinable(s,l){return!!(s&&l&&!s.isLeaf&&s.canAppend(l))}function joinPoint(s,l,c=-1){let d=s.resolve(l);for(let f=d.depth;;f--){let g,v,b=d.index(f);if(f==d.depth?(g=d.nodeBefore,v=d.nodeAfter):c>0?(g=d.node(f+1),b++,v=d.node(f).maybeChild(b)):(g=d.node(f).maybeChild(b-1),v=d.node(f+1)),g&&!g.isTextblock&&joinable(g,v)&&d.node(f).canReplace(b,b+1))return l;if(f==0)break;l=c<0?d.before(f):d.after(f)}}function join(s,l,c){let d=new ReplaceStep(l-c,l+c,Slice.empty,!0);s.step(d)}function insertPoint(s,l,c){let d=s.resolve(l);if(d.parent.canReplaceWith(d.index(),d.index(),c))return l;if(d.parentOffset==0)for(let f=d.depth-1;f>=0;f--){let g=d.index(f);if(d.node(f).canReplaceWith(g,g,c))return d.before(f+1);if(g>0)return null}if(d.parentOffset==d.parent.content.size)for(let f=d.depth-1;f>=0;f--){let g=d.indexAfter(f);if(d.node(f).canReplaceWith(g,g,c))return d.after(f+1);if(g<d.node(f).childCount)return null}return null}function dropPoint(s,l,c){let d=s.resolve(l);if(!c.content.size)return l;let f=c.content;for(let g=0;g<c.openStart;g++)f=f.firstChild.content;for(let g=1;g<=(c.openStart==0&&c.size?2:1);g++)for(let v=d.depth;v>=0;v--){let b=v==d.depth?0:d.pos<=(d.start(v+1)+d.end(v+1))/2?-1:1,$=d.index(v)+(b>0?1:0),y=d.node(v),x=!1;if(g==1)x=y.canReplace($,$,f);else{let C=y.contentMatchAt($).findWrapping(f.firstChild.type);x=C&&y.canReplaceWith($,$,C[0])}if(x)return b==0?d.pos:b<0?d.before(v+1):d.after(v+1)}return null}function replaceStep(s,l,c=l,d=Slice.empty){if(l==c&&!d.size)return null;let f=s.resolve(l),g=s.resolve(c);return fitsTrivially(f,g,d)?new ReplaceStep(l,c,d):new Fitter(f,g,d).fit()}function fitsTrivially(s,l,c){return!c.openStart&&!c.openEnd&&s.start()==l.start()&&s.parent.canReplace(s.index(),l.index(),c.content)}class Fitter{constructor(l,c,d){this.$from=l,this.$to=c,this.unplaced=d,this.frontier=[],this.placed=Fragment.empty;for(let f=0;f<=l.depth;f++){let g=l.node(f);this.frontier.push({type:g.type,match:g.contentMatchAt(l.indexAfter(f))})}for(let f=l.depth;f>0;f--)this.placed=Fragment.from(l.node(f).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let y=this.findFittable();y?this.placeNodes(y):this.openMore()||this.dropNode()}let l=this.mustMoveInline(),c=this.placed.size-this.depth-this.$from.depth,d=this.$from,f=this.close(l<0?this.$to:d.doc.resolve(l));if(!f)return null;let g=this.placed,v=d.depth,b=f.depth;for(;v&&b&&g.childCount==1;)g=g.firstChild.content,v--,b--;let $=new Slice(g,v,b);return l>-1?new ReplaceAroundStep(d.pos,l,this.$to.pos,this.$to.end(),$,c):$.size||d.pos!=this.$to.pos?new ReplaceStep(d.pos,f.pos,$):null}findFittable(){let l=this.unplaced.openStart;for(let c=this.unplaced.content,d=0,f=this.unplaced.openEnd;d<l;d++){let g=c.firstChild;if(c.childCount>1&&(f=0),g.type.spec.isolating&&f<=d){l=d;break}c=g.content}for(let c=1;c<=2;c++)for(let d=c==1?l:this.unplaced.openStart;d>=0;d--){let f,g=null;d?(g=contentAt(this.unplaced.content,d-1).firstChild,f=g.content):f=this.unplaced.content;let v=f.firstChild;for(let b=this.depth;b>=0;b--){let{type:$,match:y}=this.frontier[b],x,C=null;if(c==1&&(v?y.matchType(v.type)||(C=y.fillBefore(Fragment.from(v),!1)):g&&$.compatibleContent(g.type)))return{sliceDepth:d,frontierDepth:b,parent:g,inject:C};if(c==2&&v&&(x=y.findWrapping(v.type)))return{sliceDepth:d,frontierDepth:b,parent:g,wrap:x};if(g&&y.matchType(g.type))break}}}openMore(){let{content:l,openStart:c,openEnd:d}=this.unplaced,f=contentAt(l,c);return!f.childCount||f.firstChild.isLeaf?!1:(this.unplaced=new Slice(l,c+1,Math.max(d,f.size+c>=l.size-d?c+1:0)),!0)}dropNode(){let{content:l,openStart:c,openEnd:d}=this.unplaced,f=contentAt(l,c);if(f.childCount<=1&&c>0){let g=l.size-c<=c+f.size;this.unplaced=new Slice(dropFromFragment(l,c-1,1),c-1,g?c-1:d)}else this.unplaced=new Slice(dropFromFragment(l,c,1),c,d)}placeNodes({sliceDepth:l,frontierDepth:c,parent:d,inject:f,wrap:g}){for(;this.depth>c;)this.closeFrontierNode();if(g)for(let q=0;q<g.length;q++)this.openFrontierNode(g[q]);let v=this.unplaced,b=d?d.content:v.content,$=v.openStart-l,y=0,x=[],{match:C,type:E}=this.frontier[c];if(f){for(let q=0;q<f.childCount;q++)x.push(f.child(q));C=C.matchFragment(f)}let N=b.size+l-(v.content.size-v.openEnd);for(;y<b.childCount;){let q=b.child(y),Y=C.matchType(q.type);if(!Y)break;y++,(y>1||$==0||q.content.size)&&(C=Y,x.push(closeNodeStart(q.mark(E.allowedMarks(q.marks)),y==1?$:0,y==b.childCount?N:-1)))}let W=y==b.childCount;W||(N=-1),this.placed=addToFragment(this.placed,c,Fragment.from(x)),this.frontier[c].match=C,W&&N<0&&d&&d.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let q=0,Y=b;q<N;q++){let re=Y.lastChild;this.frontier.push({type:re.type,match:re.contentMatchAt(re.childCount)}),Y=re.content}this.unplaced=W?l==0?Slice.empty:new Slice(dropFromFragment(v.content,l-1,1),l-1,N<0?v.openEnd:l-1):new Slice(dropFromFragment(v.content,l,y),v.openStart,v.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let l=this.frontier[this.depth],c;if(!l.type.isTextblock||!contentAfterFits(this.$to,this.$to.depth,l.type,l.match,!1)||this.$to.depth==this.depth&&(c=this.findCloseLevel(this.$to))&&c.depth==this.depth)return-1;let{depth:d}=this.$to,f=this.$to.after(d);for(;d>1&&f==this.$to.end(--d);)++f;return f}findCloseLevel(l){e:for(let c=Math.min(this.depth,l.depth);c>=0;c--){let{match:d,type:f}=this.frontier[c],g=c<l.depth&&l.end(c+1)==l.pos+(l.depth-(c+1)),v=contentAfterFits(l,c,f,d,g);if(v){for(let b=c-1;b>=0;b--){let{match:$,type:y}=this.frontier[b],x=contentAfterFits(l,b,y,$,!0);if(!x||x.childCount)continue e}return{depth:c,fit:v,move:g?l.doc.resolve(l.after(c+1)):l}}}}close(l){let c=this.findCloseLevel(l);if(!c)return null;for(;this.depth>c.depth;)this.closeFrontierNode();c.fit.childCount&&(this.placed=addToFragment(this.placed,c.depth,c.fit)),l=c.move;for(let d=c.depth+1;d<=l.depth;d++){let f=l.node(d),g=f.type.contentMatch.fillBefore(f.content,!0,l.index(d));this.openFrontierNode(f.type,f.attrs,g)}return l}openFrontierNode(l,c=null,d){let f=this.frontier[this.depth];f.match=f.match.matchType(l),this.placed=addToFragment(this.placed,this.depth,Fragment.from(l.create(c,d))),this.frontier.push({type:l,match:l.contentMatch})}closeFrontierNode(){let c=this.frontier.pop().match.fillBefore(Fragment.empty,!0);c.childCount&&(this.placed=addToFragment(this.placed,this.frontier.length,c))}}function dropFromFragment(s,l,c){return l==0?s.cutByIndex(c,s.childCount):s.replaceChild(0,s.firstChild.copy(dropFromFragment(s.firstChild.content,l-1,c)))}function addToFragment(s,l,c){return l==0?s.append(c):s.replaceChild(s.childCount-1,s.lastChild.copy(addToFragment(s.lastChild.content,l-1,c)))}function contentAt(s,l){for(let c=0;c<l;c++)s=s.firstChild.content;return s}function closeNodeStart(s,l,c){if(l<=0)return s;let d=s.content;return l>1&&(d=d.replaceChild(0,closeNodeStart(d.firstChild,l-1,d.childCount==1?c-1:0))),l>0&&(d=s.type.contentMatch.fillBefore(d).append(d),c<=0&&(d=d.append(s.type.contentMatch.matchFragment(d).fillBefore(Fragment.empty,!0)))),s.copy(d)}function contentAfterFits(s,l,c,d,f){let g=s.node(l),v=f?s.indexAfter(l):s.index(l);if(v==g.childCount&&!c.compatibleContent(g.type))return null;let b=d.fillBefore(g.content,!0,v);return b&&!invalidMarks(c,g.content,v)?b:null}function invalidMarks(s,l,c){for(let d=c;d<l.childCount;d++)if(!s.allowsMarks(l.child(d).marks))return!0;return!1}function definesContent(s){return s.spec.defining||s.spec.definingForContent}function replaceRange(s,l,c,d){if(!d.size)return s.deleteRange(l,c);let f=s.doc.resolve(l),g=s.doc.resolve(c);if(fitsTrivially(f,g,d))return s.step(new ReplaceStep(l,c,d));let v=coveredDepths(f,s.doc.resolve(c));v[v.length-1]==0&&v.pop();let b=-(f.depth+1);v.unshift(b);for(let E=f.depth,N=f.pos-1;E>0;E--,N--){let W=f.node(E).type.spec;if(W.defining||W.definingAsContext||W.isolating)break;v.indexOf(E)>-1?b=E:f.before(E)==N&&v.splice(1,0,-E)}let $=v.indexOf(b),y=[],x=d.openStart;for(let E=d.content,N=0;;N++){let W=E.firstChild;if(y.push(W),N==d.openStart)break;E=W.content}for(let E=x-1;E>=0;E--){let N=y[E],W=definesContent(N.type);if(W&&!N.sameMarkup(f.node(Math.abs(b)-1)))x=E;else if(W||!N.type.isTextblock)break}for(let E=d.openStart;E>=0;E--){let N=(E+x+1)%(d.openStart+1),W=y[N];if(W)for(let q=0;q<v.length;q++){let Y=v[(q+$)%v.length],re=!0;Y<0&&(re=!1,Y=-Y);let se=f.node(Y-1),de=f.index(Y-1);if(se.canReplaceWith(de,de,W.type,W.marks))return s.replace(f.before(Y),re?g.after(Y):c,new Slice(closeFragment(d.content,0,d.openStart,N),N,d.openEnd))}}let C=s.steps.length;for(let E=v.length-1;E>=0&&(s.replace(l,c,d),!(s.steps.length>C));E--){let N=v[E];N<0||(l=f.before(N),c=g.after(N))}}function closeFragment(s,l,c,d,f){if(l<c){let g=s.firstChild;s=s.replaceChild(0,g.copy(closeFragment(g.content,l+1,c,d,g)))}if(l>d){let g=f.contentMatchAt(0),v=g.fillBefore(s).append(s);s=v.append(g.matchFragment(v).fillBefore(Fragment.empty,!0))}return s}function replaceRangeWith(s,l,c,d){if(!d.isInline&&l==c&&s.doc.resolve(l).parent.content.size){let f=insertPoint(s.doc,l,d.type);f!=null&&(l=c=f)}s.replaceRange(l,c,new Slice(Fragment.from(d),0,0))}function deleteRange$1(s,l,c){let d=s.doc.resolve(l),f=s.doc.resolve(c),g=coveredDepths(d,f);for(let v=0;v<g.length;v++){let b=g[v],$=v==g.length-1;if($&&b==0||d.node(b).type.contentMatch.validEnd)return s.delete(d.start(b),f.end(b));if(b>0&&($||d.node(b-1).canReplace(d.index(b-1),f.indexAfter(b-1))))return s.delete(d.before(b),f.after(b))}for(let v=1;v<=d.depth&&v<=f.depth;v++)if(l-d.start(v)==d.depth-v&&c>d.end(v)&&f.end(v)-c!=f.depth-v)return s.delete(d.before(v),c);s.delete(l,c)}function coveredDepths(s,l){let c=[],d=Math.min(s.depth,l.depth);for(let f=d;f>=0;f--){let g=s.start(f);if(g<s.pos-(s.depth-f)||l.end(f)>l.pos+(l.depth-f)||s.node(f).type.spec.isolating||l.node(f).type.spec.isolating)break;(g==l.start(f)||f==s.depth&&f==l.depth&&s.parent.inlineContent&&l.parent.inlineContent&&f&&l.start(f-1)==g-1)&&c.push(f)}return c}class AttrStep extends Step$1{constructor(l,c,d){super(),this.pos=l,this.attr=c,this.value=d}apply(l){let c=l.nodeAt(this.pos);if(!c)return StepResult.fail("No node at attribute step's position");let d=Object.create(null);for(let g in c.attrs)d[g]=c.attrs[g];d[this.attr]=this.value;let f=c.type.create(d,null,c.marks);return StepResult.fromReplace(l,this.pos,this.pos+1,new Slice(Fragment.from(f),0,c.isLeaf?0:1))}getMap(){return StepMap.empty}invert(l){return new AttrStep(this.pos,this.attr,l.nodeAt(this.pos).attrs[this.attr])}map(l){let c=l.mapResult(this.pos,1);return c.deletedAfter?null:new AttrStep(c.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(l,c){if(typeof c.pos!="number"||typeof c.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new AttrStep(c.pos,c.attr,c.value)}}Step$1.jsonID("attr",AttrStep);class DocAttrStep extends Step$1{constructor(l,c){super(),this.attr=l,this.value=c}apply(l){let c=Object.create(null);for(let f in l.attrs)c[f]=l.attrs[f];c[this.attr]=this.value;let d=l.type.create(c,l.content,l.marks);return StepResult.ok(d)}getMap(){return StepMap.empty}invert(l){return new DocAttrStep(this.attr,l.attrs[this.attr])}map(l){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(l,c){if(typeof c.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new DocAttrStep(c.attr,c.value)}}Step$1.jsonID("docAttr",DocAttrStep);let TransformError=class extends Error{};TransformError=function s(l){let c=Error.call(this,l);return c.__proto__=s.prototype,c};TransformError.prototype=Object.create(Error.prototype);TransformError.prototype.constructor=TransformError;TransformError.prototype.name="TransformError";let Transform$1=class{constructor(l){this.doc=l,this.steps=[],this.docs=[],this.mapping=new Mapping}get before(){return this.docs.length?this.docs[0]:this.doc}step(l){let c=this.maybeStep(l);if(c.failed)throw new TransformError(c.failed);return this}maybeStep(l){let c=l.apply(this.doc);return c.failed||this.addStep(l,c.doc),c}get docChanged(){return this.steps.length>0}addStep(l,c){this.docs.push(this.doc),this.steps.push(l),this.mapping.appendMap(l.getMap()),this.doc=c}replace(l,c=l,d=Slice.empty){let f=replaceStep(this.doc,l,c,d);return f&&this.step(f),this}replaceWith(l,c,d){return this.replace(l,c,new Slice(Fragment.from(d),0,0))}delete(l,c){return this.replace(l,c,Slice.empty)}insert(l,c){return this.replaceWith(l,l,c)}replaceRange(l,c,d){return replaceRange(this,l,c,d),this}replaceRangeWith(l,c,d){return replaceRangeWith(this,l,c,d),this}deleteRange(l,c){return deleteRange$1(this,l,c),this}lift(l,c){return lift$2(this,l,c),this}join(l,c=1){return join(this,l,c),this}wrap(l,c){return wrap$1(this,l,c),this}setBlockType(l,c=l,d,f=null){return setBlockType$1(this,l,c,d,f),this}setNodeMarkup(l,c,d=null,f){return setNodeMarkup(this,l,c,d,f),this}setNodeAttribute(l,c,d){return this.step(new AttrStep(l,c,d)),this}setDocAttribute(l,c){return this.step(new DocAttrStep(l,c)),this}addNodeMark(l,c){return this.step(new AddNodeMarkStep(l,c)),this}removeNodeMark(l,c){if(!(c instanceof Mark$1)){let d=this.doc.nodeAt(l);if(!d)throw new RangeError("No node at position "+l);if(c=c.isInSet(d.marks),!c)return this}return this.step(new RemoveNodeMarkStep(l,c)),this}split(l,c=1,d){return split(this,l,c,d),this}addMark(l,c,d){return addMark(this,l,c,d),this}removeMark(l,c,d){return removeMark(this,l,c,d),this}clearIncompatible(l,c,d){return clearIncompatible(this,l,c,d),this}};const classesById=Object.create(null);let Selection$2=class{constructor(l,c,d){this.$anchor=l,this.$head=c,this.ranges=d||[new SelectionRange(l.min(c),l.max(c))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let l=this.ranges;for(let c=0;c<l.length;c++)if(l[c].$from.pos!=l[c].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(l,c=Slice.empty){let d=c.content.lastChild,f=null;for(let b=0;b<c.openEnd;b++)f=d,d=d.lastChild;let g=l.steps.length,v=this.ranges;for(let b=0;b<v.length;b++){let{$from:$,$to:y}=v[b],x=l.mapping.slice(g);l.replaceRange(x.map($.pos),x.map(y.pos),b?Slice.empty:c),b==0&&selectionToInsertionEnd$1(l,g,(d?d.isInline:f&&f.isTextblock)?-1:1)}}replaceWith(l,c){let d=l.steps.length,f=this.ranges;for(let g=0;g<f.length;g++){let{$from:v,$to:b}=f[g],$=l.mapping.slice(d),y=$.map(v.pos),x=$.map(b.pos);g?l.deleteRange(y,x):(l.replaceRangeWith(y,x,c),selectionToInsertionEnd$1(l,d,c.isInline?-1:1))}}static findFrom(l,c,d=!1){let f=l.parent.inlineContent?new TextSelection(l):findSelectionIn(l.node(0),l.parent,l.pos,l.index(),c,d);if(f)return f;for(let g=l.depth-1;g>=0;g--){let v=c<0?findSelectionIn(l.node(0),l.node(g),l.before(g+1),l.index(g),c,d):findSelectionIn(l.node(0),l.node(g),l.after(g+1),l.index(g)+1,c,d);if(v)return v}return null}static near(l,c=1){return this.findFrom(l,c)||this.findFrom(l,-c)||new AllSelection(l.node(0))}static atStart(l){return findSelectionIn(l,l,0,0,1)||new AllSelection(l)}static atEnd(l){return findSelectionIn(l,l,l.content.size,l.childCount,-1)||new AllSelection(l)}static fromJSON(l,c){if(!c||!c.type)throw new RangeError("Invalid input for Selection.fromJSON");let d=classesById[c.type];if(!d)throw new RangeError(`No selection type ${c.type} defined`);return d.fromJSON(l,c)}static jsonID(l,c){if(l in classesById)throw new RangeError("Duplicate use of selection JSON ID "+l);return classesById[l]=c,c.prototype.jsonID=l,c}getBookmark(){return TextSelection.between(this.$anchor,this.$head).getBookmark()}};Selection$2.prototype.visible=!0;class SelectionRange{constructor(l,c){this.$from=l,this.$to=c}}let warnedAboutTextSelection=!1;function checkTextSelection(s){!warnedAboutTextSelection&&!s.parent.inlineContent&&(warnedAboutTextSelection=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+s.parent.type.name+")"))}class TextSelection extends Selection$2{constructor(l,c=l){checkTextSelection(l),checkTextSelection(c),super(l,c)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(l,c){let d=l.resolve(c.map(this.head));if(!d.parent.inlineContent)return Selection$2.near(d);let f=l.resolve(c.map(this.anchor));return new TextSelection(f.parent.inlineContent?f:d,d)}replace(l,c=Slice.empty){if(super.replace(l,c),c==Slice.empty){let d=this.$from.marksAcross(this.$to);d&&l.ensureMarks(d)}}eq(l){return l instanceof TextSelection&&l.anchor==this.anchor&&l.head==this.head}getBookmark(){return new TextBookmark(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(l,c){if(typeof c.anchor!="number"||typeof c.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new TextSelection(l.resolve(c.anchor),l.resolve(c.head))}static create(l,c,d=c){let f=l.resolve(c);return new this(f,d==c?f:l.resolve(d))}static between(l,c,d){let f=l.pos-c.pos;if((!d||f)&&(d=f>=0?1:-1),!c.parent.inlineContent){let g=Selection$2.findFrom(c,d,!0)||Selection$2.findFrom(c,-d,!0);if(g)c=g.$head;else return Selection$2.near(c,d)}return l.parent.inlineContent||(f==0?l=c:(l=(Selection$2.findFrom(l,-d,!0)||Selection$2.findFrom(l,d,!0)).$anchor,l.pos<c.pos!=f<0&&(l=c))),new TextSelection(l,c)}}Selection$2.jsonID("text",TextSelection);class TextBookmark{constructor(l,c){this.anchor=l,this.head=c}map(l){return new TextBookmark(l.map(this.anchor),l.map(this.head))}resolve(l){return TextSelection.between(l.resolve(this.anchor),l.resolve(this.head))}}class NodeSelection extends Selection$2{constructor(l){let c=l.nodeAfter,d=l.node(0).resolve(l.pos+c.nodeSize);super(l,d),this.node=c}map(l,c){let{deleted:d,pos:f}=c.mapResult(this.anchor),g=l.resolve(f);return d?Selection$2.near(g):new NodeSelection(g)}content(){return new Slice(Fragment.from(this.node),0,0)}eq(l){return l instanceof NodeSelection&&l.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NodeBookmark(this.anchor)}static fromJSON(l,c){if(typeof c.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new NodeSelection(l.resolve(c.anchor))}static create(l,c){return new NodeSelection(l.resolve(c))}static isSelectable(l){return!l.isText&&l.type.spec.selectable!==!1}}NodeSelection.prototype.visible=!1;Selection$2.jsonID("node",NodeSelection);class NodeBookmark{constructor(l){this.anchor=l}map(l){let{deleted:c,pos:d}=l.mapResult(this.anchor);return c?new TextBookmark(d,d):new NodeBookmark(d)}resolve(l){let c=l.resolve(this.anchor),d=c.nodeAfter;return d&&NodeSelection.isSelectable(d)?new NodeSelection(c):Selection$2.near(c)}}class AllSelection extends Selection$2{constructor(l){super(l.resolve(0),l.resolve(l.content.size))}replace(l,c=Slice.empty){if(c==Slice.empty){l.delete(0,l.doc.content.size);let d=Selection$2.atStart(l.doc);d.eq(l.selection)||l.setSelection(d)}else super.replace(l,c)}toJSON(){return{type:"all"}}static fromJSON(l){return new AllSelection(l)}map(l){return new AllSelection(l)}eq(l){return l instanceof AllSelection}getBookmark(){return AllBookmark}}Selection$2.jsonID("all",AllSelection);const AllBookmark={map(){return this},resolve(s){return new AllSelection(s)}};function findSelectionIn(s,l,c,d,f,g=!1){if(l.inlineContent)return TextSelection.create(s,c);for(let v=d-(f>0?0:1);f>0?v<l.childCount:v>=0;v+=f){let b=l.child(v);if(b.isAtom){if(!g&&NodeSelection.isSelectable(b))return NodeSelection.create(s,c-(f<0?b.nodeSize:0))}else{let $=findSelectionIn(s,b,c+f,f<0?b.childCount:0,f,g);if($)return $}c+=b.nodeSize*f}return null}function selectionToInsertionEnd$1(s,l,c){let d=s.steps.length-1;if(d<l)return;let f=s.steps[d];if(!(f instanceof ReplaceStep||f instanceof ReplaceAroundStep))return;let g=s.mapping.maps[d],v;g.forEach((b,$,y,x)=>{v==null&&(v=x)}),s.setSelection(Selection$2.near(s.doc.resolve(v),c))}const UPDATED_SEL=1,UPDATED_MARKS=2,UPDATED_SCROLL=4;class Transaction extends Transform$1{constructor(l){super(l.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=l.selection,this.storedMarks=l.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(l){if(l.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=l,this.curSelectionFor=this.steps.length,this.updated=(this.updated|UPDATED_SEL)&~UPDATED_MARKS,this.storedMarks=null,this}get selectionSet(){return(this.updated&UPDATED_SEL)>0}setStoredMarks(l){return this.storedMarks=l,this.updated|=UPDATED_MARKS,this}ensureMarks(l){return Mark$1.sameSet(this.storedMarks||this.selection.$from.marks(),l)||this.setStoredMarks(l),this}addStoredMark(l){return this.ensureMarks(l.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(l){return this.ensureMarks(l.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&UPDATED_MARKS)>0}addStep(l,c){super.addStep(l,c),this.updated=this.updated&~UPDATED_MARKS,this.storedMarks=null}setTime(l){return this.time=l,this}replaceSelection(l){return this.selection.replace(this,l),this}replaceSelectionWith(l,c=!0){let d=this.selection;return c&&(l=l.mark(this.storedMarks||(d.empty?d.$from.marks():d.$from.marksAcross(d.$to)||Mark$1.none))),d.replaceWith(this,l),this}deleteSelection(){return this.selection.replace(this),this}insertText(l,c,d){let f=this.doc.type.schema;if(c==null)return l?this.replaceSelectionWith(f.text(l),!0):this.deleteSelection();{if(d==null&&(d=c),d=d??c,!l)return this.deleteRange(c,d);let g=this.storedMarks;if(!g){let v=this.doc.resolve(c);g=d==c?v.marks():v.marksAcross(this.doc.resolve(d))}return this.replaceRangeWith(c,d,f.text(l,g)),this.selection.empty||this.setSelection(Selection$2.near(this.selection.$to)),this}}setMeta(l,c){return this.meta[typeof l=="string"?l:l.key]=c,this}getMeta(l){return this.meta[typeof l=="string"?l:l.key]}get isGeneric(){for(let l in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=UPDATED_SCROLL,this}get scrolledIntoView(){return(this.updated&UPDATED_SCROLL)>0}}function bind(s,l){return!l||!s?s:s.bind(l)}class FieldDesc{constructor(l,c,d){this.name=l,this.init=bind(c.init,d),this.apply=bind(c.apply,d)}}const baseFields=[new FieldDesc("doc",{init(s){return s.doc||s.schema.topNodeType.createAndFill()},apply(s){return s.doc}}),new FieldDesc("selection",{init(s,l){return s.selection||Selection$2.atStart(l.doc)},apply(s){return s.selection}}),new FieldDesc("storedMarks",{init(s){return s.storedMarks||null},apply(s,l,c,d){return d.selection.$cursor?s.storedMarks:null}}),new FieldDesc("scrollToSelection",{init(){return 0},apply(s,l){return s.scrolledIntoView?l+1:l}})];class Configuration{constructor(l,c){this.schema=l,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=baseFields.slice(),c&&c.forEach(d=>{if(this.pluginsByKey[d.key])throw new RangeError("Adding different instances of a keyed plugin ("+d.key+")");this.plugins.push(d),this.pluginsByKey[d.key]=d,d.spec.state&&this.fields.push(new FieldDesc(d.key,d.spec.state,d))})}}class EditorState{constructor(l){this.config=l}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(l){return this.applyTransaction(l).state}filterTransaction(l,c=-1){for(let d=0;d<this.config.plugins.length;d++)if(d!=c){let f=this.config.plugins[d];if(f.spec.filterTransaction&&!f.spec.filterTransaction.call(f,l,this))return!1}return!0}applyTransaction(l){if(!this.filterTransaction(l))return{state:this,transactions:[]};let c=[l],d=this.applyInner(l),f=null;for(;;){let g=!1;for(let v=0;v<this.config.plugins.length;v++){let b=this.config.plugins[v];if(b.spec.appendTransaction){let $=f?f[v].n:0,y=f?f[v].state:this,x=$<c.length&&b.spec.appendTransaction.call(b,$?c.slice($):c,y,d);if(x&&d.filterTransaction(x,v)){if(x.setMeta("appendedTransaction",l),!f){f=[];for(let C=0;C<this.config.plugins.length;C++)f.push(C<v?{state:d,n:c.length}:{state:this,n:0})}c.push(x),d=d.applyInner(x),g=!0}f&&(f[v]={state:d,n:c.length})}}if(!g)return{state:d,transactions:c}}}applyInner(l){if(!l.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let c=new EditorState(this.config),d=this.config.fields;for(let f=0;f<d.length;f++){let g=d[f];c[g.name]=g.apply(l,this[g.name],this,c)}return c}get tr(){return new Transaction(this)}static create(l){let c=new Configuration(l.doc?l.doc.type.schema:l.schema,l.plugins),d=new EditorState(c);for(let f=0;f<c.fields.length;f++)d[c.fields[f].name]=c.fields[f].init(l,d);return d}reconfigure(l){let c=new Configuration(this.schema,l.plugins),d=c.fields,f=new EditorState(c);for(let g=0;g<d.length;g++){let v=d[g].name;f[v]=this.hasOwnProperty(v)?this[v]:d[g].init(l,f)}return f}toJSON(l){let c={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(c.storedMarks=this.storedMarks.map(d=>d.toJSON())),l&&typeof l=="object")for(let d in l){if(d=="doc"||d=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let f=l[d],g=f.spec.state;g&&g.toJSON&&(c[d]=g.toJSON.call(f,this[f.key]))}return c}static fromJSON(l,c,d){if(!c)throw new RangeError("Invalid input for EditorState.fromJSON");if(!l.schema)throw new RangeError("Required config field 'schema' missing");let f=new Configuration(l.schema,l.plugins),g=new EditorState(f);return f.fields.forEach(v=>{if(v.name=="doc")g.doc=Node$2.fromJSON(l.schema,c.doc);else if(v.name=="selection")g.selection=Selection$2.fromJSON(g.doc,c.selection);else if(v.name=="storedMarks")c.storedMarks&&(g.storedMarks=c.storedMarks.map(l.schema.markFromJSON));else{if(d)for(let b in d){let $=d[b],y=$.spec.state;if($.key==v.name&&y&&y.fromJSON&&Object.prototype.hasOwnProperty.call(c,b)){g[v.name]=y.fromJSON.call($,l,c[b],g);return}}g[v.name]=v.init(l,g)}}),g}}function bindProps(s,l,c){for(let d in s){let f=s[d];f instanceof Function?f=f.bind(l):d=="handleDOMEvents"&&(f=bindProps(f,l,{})),c[d]=f}return c}class Plugin{constructor(l){this.spec=l,this.props={},l.props&&bindProps(l.props,this,this.props),this.key=l.key?l.key.key:createKey("plugin")}getState(l){return l[this.key]}}const keys=Object.create(null);function createKey(s){return s in keys?s+"$"+ ++keys[s]:(keys[s]=0,s+"$")}class PluginKey{constructor(l="key"){this.key=createKey(l)}get(l){return l.config.pluginsByKey[this.key]}getState(l){return l[this.key]}}const domIndex=function(s){for(var l=0;;l++)if(s=s.previousSibling,!s)return l},parentNode=function(s){let l=s.assignedSlot||s.parentNode;return l&&l.nodeType==11?l.host:l};let reusedRange=null;const textRange=function(s,l,c){let d=reusedRange||(reusedRange=document.createRange());return d.setEnd(s,c??s.nodeValue.length),d.setStart(s,l||0),d},clearReusedRange=function(){reusedRange=null},isEquivalentPosition=function(s,l,c,d){return c&&(scanFor(s,l,c,d,-1)||scanFor(s,l,c,d,1))},atomElements=/^(img|br|input|textarea|hr)$/i;function scanFor(s,l,c,d,f){for(;;){if(s==c&&l==d)return!0;if(l==(f<0?0:nodeSize(s))){let g=s.parentNode;if(!g||g.nodeType!=1||hasBlockDesc(s)||atomElements.test(s.nodeName)||s.contentEditable=="false")return!1;l=domIndex(s)+(f<0?0:1),s=g}else if(s.nodeType==1){if(s=s.childNodes[l+(f<0?-1:0)],s.contentEditable=="false")return!1;l=f<0?nodeSize(s):0}else return!1}}function nodeSize(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function textNodeBefore$1(s,l){for(;;){if(s.nodeType==3&&l)return s;if(s.nodeType==1&&l>0){if(s.contentEditable=="false")return null;s=s.childNodes[l-1],l=nodeSize(s)}else if(s.parentNode&&!hasBlockDesc(s))l=domIndex(s),s=s.parentNode;else return null}}function textNodeAfter$1(s,l){for(;;){if(s.nodeType==3&&l<s.nodeValue.length)return s;if(s.nodeType==1&&l<s.childNodes.length){if(s.contentEditable=="false")return null;s=s.childNodes[l],l=0}else if(s.parentNode&&!hasBlockDesc(s))l=domIndex(s)+1,s=s.parentNode;else return null}}function isOnEdge(s,l,c){for(let d=l==0,f=l==nodeSize(s);d||f;){if(s==c)return!0;let g=domIndex(s);if(s=s.parentNode,!s)return!1;d=d&&g==0,f=f&&g==nodeSize(s)}}function hasBlockDesc(s){let l;for(let c=s;c&&!(l=c.pmViewDesc);c=c.parentNode);return l&&l.node&&l.node.isBlock&&(l.dom==s||l.contentDOM==s)}const selectionCollapsed=function(s){return s.focusNode&&isEquivalentPosition(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)};function keyEvent(s,l){let c=document.createEvent("Event");return c.initEvent("keydown",!0,!0),c.keyCode=s,c.key=c.code=l,c}function deepActiveElement(s){let l=s.activeElement;for(;l&&l.shadowRoot;)l=l.shadowRoot.activeElement;return l}function caretFromPoint(s,l,c){if(s.caretPositionFromPoint)try{let d=s.caretPositionFromPoint(l,c);if(d)return{node:d.offsetNode,offset:Math.min(nodeSize(d.offsetNode),d.offset)}}catch{}if(s.caretRangeFromPoint){let d=s.caretRangeFromPoint(l,c);if(d)return{node:d.startContainer,offset:Math.min(nodeSize(d.startContainer),d.startOffset)}}}const nav=typeof navigator<"u"?navigator:null,doc=typeof document<"u"?document:null,agent=nav&&nav.userAgent||"",ie_edge=/Edge\/(\d+)/.exec(agent),ie_upto10=/MSIE \d/.exec(agent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(agent),ie$2=!!(ie_upto10||ie_11up||ie_edge),ie_version=ie_upto10?document.documentMode:ie_11up?+ie_11up[1]:ie_edge?+ie_edge[1]:0,gecko=!ie$2&&/gecko\/(\d+)/i.test(agent);gecko&&+(/Firefox\/(\d+)/.exec(agent)||[0,0])[1];const _chrome=!ie$2&&/Chrome\/(\d+)/.exec(agent),chrome=!!_chrome,chrome_version=_chrome?+_chrome[1]:0,safari=!ie$2&&!!nav&&/Apple Computer/.test(nav.vendor),ios=safari&&(/Mobile\/\w+/.test(agent)||!!nav&&nav.maxTouchPoints>2),mac$2=ios||(nav?/Mac/.test(nav.platform):!1),windows=nav?/Win/.test(nav.platform):!1,android=/Android \d/.test(agent),webkit=!!doc&&"webkitFontSmoothing"in doc.documentElement.style,webkit_version=webkit?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function windowRect(s){let l=s.defaultView&&s.defaultView.visualViewport;return l?{left:0,right:l.width,top:0,bottom:l.height}:{left:0,right:s.documentElement.clientWidth,top:0,bottom:s.documentElement.clientHeight}}function getSide(s,l){return typeof s=="number"?s:s[l]}function clientRect(s){let l=s.getBoundingClientRect(),c=l.width/s.offsetWidth||1,d=l.height/s.offsetHeight||1;return{left:l.left,right:l.left+s.clientWidth*c,top:l.top,bottom:l.top+s.clientHeight*d}}function scrollRectIntoView(s,l,c){let d=s.someProp("scrollThreshold")||0,f=s.someProp("scrollMargin")||5,g=s.dom.ownerDocument;for(let v=c||s.dom;v;v=parentNode(v)){if(v.nodeType!=1)continue;let b=v,$=b==g.body,y=$?windowRect(g):clientRect(b),x=0,C=0;if(l.top<y.top+getSide(d,"top")?C=-(y.top-l.top+getSide(f,"top")):l.bottom>y.bottom-getSide(d,"bottom")&&(C=l.bottom-l.top>y.bottom-y.top?l.top+getSide(f,"top")-y.top:l.bottom-y.bottom+getSide(f,"bottom")),l.left<y.left+getSide(d,"left")?x=-(y.left-l.left+getSide(f,"left")):l.right>y.right-getSide(d,"right")&&(x=l.right-y.right+getSide(f,"right")),x||C)if($)g.defaultView.scrollBy(x,C);else{let E=b.scrollLeft,N=b.scrollTop;C&&(b.scrollTop+=C),x&&(b.scrollLeft+=x);let W=b.scrollLeft-E,q=b.scrollTop-N;l={left:l.left-W,top:l.top-q,right:l.right-W,bottom:l.bottom-q}}if($||/^(fixed|sticky)$/.test(getComputedStyle(v).position))break}}function storeScrollPos(s){let l=s.dom.getBoundingClientRect(),c=Math.max(0,l.top),d,f;for(let g=(l.left+l.right)/2,v=c+1;v<Math.min(innerHeight,l.bottom);v+=5){let b=s.root.elementFromPoint(g,v);if(!b||b==s.dom||!s.dom.contains(b))continue;let $=b.getBoundingClientRect();if($.top>=c-20){d=b,f=$.top;break}}return{refDOM:d,refTop:f,stack:scrollStack(s.dom)}}function scrollStack(s){let l=[],c=s.ownerDocument;for(let d=s;d&&(l.push({dom:d,top:d.scrollTop,left:d.scrollLeft}),s!=c);d=parentNode(d));return l}function resetScrollPos({refDOM:s,refTop:l,stack:c}){let d=s?s.getBoundingClientRect().top:0;restoreScrollStack(c,d==0?0:d-l)}function restoreScrollStack(s,l){for(let c=0;c<s.length;c++){let{dom:d,top:f,left:g}=s[c];d.scrollTop!=f+l&&(d.scrollTop=f+l),d.scrollLeft!=g&&(d.scrollLeft=g)}}let preventScrollSupported=null;function focusPreventScroll(s){if(s.setActive)return s.setActive();if(preventScrollSupported)return s.focus(preventScrollSupported);let l=scrollStack(s);s.focus(preventScrollSupported==null?{get preventScroll(){return preventScrollSupported={preventScroll:!0},!0}}:void 0),preventScrollSupported||(preventScrollSupported=!1,restoreScrollStack(l,0))}function findOffsetInNode(s,l){let c,d=2e8,f,g=0,v=l.top,b=l.top,$,y;for(let x=s.firstChild,C=0;x;x=x.nextSibling,C++){let E;if(x.nodeType==1)E=x.getClientRects();else if(x.nodeType==3)E=textRange(x).getClientRects();else continue;for(let N=0;N<E.length;N++){let W=E[N];if(W.top<=v&&W.bottom>=b){v=Math.max(W.bottom,v),b=Math.min(W.top,b);let q=W.left>l.left?W.left-l.left:W.right<l.left?l.left-W.right:0;if(q<d){c=x,d=q,f=q&&c.nodeType==3?{left:W.right<l.left?W.right:W.left,top:l.top}:l,x.nodeType==1&&q&&(g=C+(l.left>=(W.left+W.right)/2?1:0));continue}}else W.top>l.top&&!$&&W.left<=l.left&&W.right>=l.left&&($=x,y={left:Math.max(W.left,Math.min(W.right,l.left)),top:W.top});!c&&(l.left>=W.right&&l.top>=W.top||l.left>=W.left&&l.top>=W.bottom)&&(g=C+1)}}return!c&&$&&(c=$,f=y,d=0),c&&c.nodeType==3?findOffsetInText(c,f):!c||d&&c.nodeType==1?{node:s,offset:g}:findOffsetInNode(c,f)}function findOffsetInText(s,l){let c=s.nodeValue.length,d=document.createRange();for(let f=0;f<c;f++){d.setEnd(s,f+1),d.setStart(s,f);let g=singleRect(d,1);if(g.top!=g.bottom&&inRect(l,g))return{node:s,offset:f+(l.left>=(g.left+g.right)/2?1:0)}}return{node:s,offset:0}}function inRect(s,l){return s.left>=l.left-1&&s.left<=l.right+1&&s.top>=l.top-1&&s.top<=l.bottom+1}function targetKludge(s,l){let c=s.parentNode;return c&&/^li$/i.test(c.nodeName)&&l.left<s.getBoundingClientRect().left?c:s}function posFromElement(s,l,c){let{node:d,offset:f}=findOffsetInNode(l,c),g=-1;if(d.nodeType==1&&!d.firstChild){let v=d.getBoundingClientRect();g=v.left!=v.right&&c.left>(v.left+v.right)/2?1:-1}return s.docView.posFromDOM(d,f,g)}function posFromCaret(s,l,c,d){let f=-1;for(let g=l,v=!1;g!=s.dom;){let b=s.docView.nearestDesc(g,!0);if(!b)return null;if(b.dom.nodeType==1&&(b.node.isBlock&&b.parent||!b.contentDOM)){let $=b.dom.getBoundingClientRect();if(b.node.isBlock&&b.parent&&(!v&&$.left>d.left||$.top>d.top?f=b.posBefore:(!v&&$.right<d.left||$.bottom<d.top)&&(f=b.posAfter),v=!0),!b.contentDOM&&f<0&&!b.node.isText)return(b.node.isBlock?d.top<($.top+$.bottom)/2:d.left<($.left+$.right)/2)?b.posBefore:b.posAfter}g=b.dom.parentNode}return f>-1?f:s.docView.posFromDOM(l,c,-1)}function elementFromPoint(s,l,c){let d=s.childNodes.length;if(d&&c.top<c.bottom)for(let f=Math.max(0,Math.min(d-1,Math.floor(d*(l.top-c.top)/(c.bottom-c.top))-2)),g=f;;){let v=s.childNodes[g];if(v.nodeType==1){let b=v.getClientRects();for(let $=0;$<b.length;$++){let y=b[$];if(inRect(l,y))return elementFromPoint(v,l,y)}}if((g=(g+1)%d)==f)break}return s}function posAtCoords(s,l){let c=s.dom.ownerDocument,d,f=0,g=caretFromPoint(c,l.left,l.top);g&&({node:d,offset:f}=g);let v=(s.root.elementFromPoint?s.root:c).elementFromPoint(l.left,l.top),b;if(!v||!s.dom.contains(v.nodeType!=1?v.parentNode:v)){let y=s.dom.getBoundingClientRect();if(!inRect(l,y)||(v=elementFromPoint(s.dom,l,y),!v))return null}if(safari)for(let y=v;d&&y;y=parentNode(y))y.draggable&&(d=void 0);if(v=targetKludge(v,l),d){if(gecko&&d.nodeType==1&&(f=Math.min(f,d.childNodes.length),f<d.childNodes.length)){let x=d.childNodes[f],C;x.nodeName=="IMG"&&(C=x.getBoundingClientRect()).right<=l.left&&C.bottom>l.top&&f++}let y;webkit&&f&&d.nodeType==1&&(y=d.childNodes[f-1]).nodeType==1&&y.contentEditable=="false"&&y.getBoundingClientRect().top>=l.top&&f--,d==s.dom&&f==d.childNodes.length-1&&d.lastChild.nodeType==1&&l.top>d.lastChild.getBoundingClientRect().bottom?b=s.state.doc.content.size:(f==0||d.nodeType!=1||d.childNodes[f-1].nodeName!="BR")&&(b=posFromCaret(s,d,f,l))}b==null&&(b=posFromElement(s,v,l));let $=s.docView.nearestDesc(v,!0);return{pos:b,inside:$?$.posAtStart-$.border:-1}}function nonZero(s){return s.top<s.bottom||s.left<s.right}function singleRect(s,l){let c=s.getClientRects();if(c.length){let d=c[l<0?0:c.length-1];if(nonZero(d))return d}return Array.prototype.find.call(c,nonZero)||s.getBoundingClientRect()}const BIDI=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function coordsAtPos(s,l,c){let{node:d,offset:f,atom:g}=s.docView.domFromPos(l,c<0?-1:1),v=webkit||gecko;if(d.nodeType==3)if(v&&(BIDI.test(d.nodeValue)||(c<0?!f:f==d.nodeValue.length))){let $=singleRect(textRange(d,f,f),c);if(gecko&&f&&/\s/.test(d.nodeValue[f-1])&&f<d.nodeValue.length){let y=singleRect(textRange(d,f-1,f-1),-1);if(y.top==$.top){let x=singleRect(textRange(d,f,f+1),-1);if(x.top!=$.top)return flattenV(x,x.left<y.left)}}return $}else{let $=f,y=f,x=c<0?1:-1;return c<0&&!f?(y++,x=-1):c>=0&&f==d.nodeValue.length?($--,x=1):c<0?$--:y++,flattenV(singleRect(textRange(d,$,y),x),x<0)}if(!s.state.doc.resolve(l-(g||0)).parent.inlineContent){if(g==null&&f&&(c<0||f==nodeSize(d))){let $=d.childNodes[f-1];if($.nodeType==1)return flattenH($.getBoundingClientRect(),!1)}if(g==null&&f<nodeSize(d)){let $=d.childNodes[f];if($.nodeType==1)return flattenH($.getBoundingClientRect(),!0)}return flattenH(d.getBoundingClientRect(),c>=0)}if(g==null&&f&&(c<0||f==nodeSize(d))){let $=d.childNodes[f-1],y=$.nodeType==3?textRange($,nodeSize($)-(v?0:1)):$.nodeType==1&&($.nodeName!="BR"||!$.nextSibling)?$:null;if(y)return flattenV(singleRect(y,1),!1)}if(g==null&&f<nodeSize(d)){let $=d.childNodes[f];for(;$.pmViewDesc&&$.pmViewDesc.ignoreForCoords;)$=$.nextSibling;let y=$?$.nodeType==3?textRange($,0,v?0:1):$.nodeType==1?$:null:null;if(y)return flattenV(singleRect(y,-1),!0)}return flattenV(singleRect(d.nodeType==3?textRange(d):d,-c),c>=0)}function flattenV(s,l){if(s.width==0)return s;let c=l?s.left:s.right;return{top:s.top,bottom:s.bottom,left:c,right:c}}function flattenH(s,l){if(s.height==0)return s;let c=l?s.top:s.bottom;return{top:c,bottom:c,left:s.left,right:s.right}}function withFlushedState(s,l,c){let d=s.state,f=s.root.activeElement;d!=l&&s.updateState(l),f!=s.dom&&s.focus();try{return c()}finally{d!=l&&s.updateState(d),f!=s.dom&&f&&f.focus()}}function endOfTextblockVertical(s,l,c){let d=l.selection,f=c=="up"?d.$from:d.$to;return withFlushedState(s,l,()=>{let{node:g}=s.docView.domFromPos(f.pos,c=="up"?-1:1);for(;;){let b=s.docView.nearestDesc(g,!0);if(!b)break;if(b.node.isBlock){g=b.contentDOM||b.dom;break}g=b.dom.parentNode}let v=coordsAtPos(s,f.pos,1);for(let b=g.firstChild;b;b=b.nextSibling){let $;if(b.nodeType==1)$=b.getClientRects();else if(b.nodeType==3)$=textRange(b,0,b.nodeValue.length).getClientRects();else continue;for(let y=0;y<$.length;y++){let x=$[y];if(x.bottom>x.top+1&&(c=="up"?v.top-x.top>(x.bottom-v.top)*2:x.bottom-v.bottom>(v.bottom-x.top)*2))return!1}}return!0})}const maybeRTL=/[\u0590-\u08ac]/;function endOfTextblockHorizontal(s,l,c){let{$head:d}=l.selection;if(!d.parent.isTextblock)return!1;let f=d.parentOffset,g=!f,v=f==d.parent.content.size,b=s.domSelection();return b?!maybeRTL.test(d.parent.textContent)||!b.modify?c=="left"||c=="backward"?g:v:withFlushedState(s,l,()=>{let{focusNode:$,focusOffset:y,anchorNode:x,anchorOffset:C}=s.domSelectionRange(),E=b.caretBidiLevel;b.modify("move",c,"character");let N=d.depth?s.docView.domAfterPos(d.before()):s.dom,{focusNode:W,focusOffset:q}=s.domSelectionRange(),Y=W&&!N.contains(W.nodeType==1?W:W.parentNode)||$==W&&y==q;try{b.collapse(x,C),$&&($!=x||y!=C)&&b.extend&&b.extend($,y)}catch{}return E!=null&&(b.caretBidiLevel=E),Y}):d.pos==d.start()||d.pos==d.end()}let cachedState=null,cachedDir=null,cachedResult=!1;function endOfTextblock(s,l,c){return cachedState==l&&cachedDir==c?cachedResult:(cachedState=l,cachedDir=c,cachedResult=c=="up"||c=="down"?endOfTextblockVertical(s,l,c):endOfTextblockHorizontal(s,l,c))}const NOT_DIRTY=0,CHILD_DIRTY=1,CONTENT_DIRTY=2,NODE_DIRTY=3;class ViewDesc{constructor(l,c,d,f){this.parent=l,this.children=c,this.dom=d,this.contentDOM=f,this.dirty=NOT_DIRTY,d.pmViewDesc=this}matchesWidget(l){return!1}matchesMark(l){return!1}matchesNode(l,c,d){return!1}matchesHack(l){return!1}parseRule(){return null}stopEvent(l){return!1}get size(){let l=0;for(let c=0;c<this.children.length;c++)l+=this.children[c].size;return l}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let l=0;l<this.children.length;l++)this.children[l].destroy()}posBeforeChild(l){for(let c=0,d=this.posAtStart;;c++){let f=this.children[c];if(f==l)return d;d+=f.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(l,c,d){if(this.contentDOM&&this.contentDOM.contains(l.nodeType==1?l:l.parentNode))if(d<0){let g,v;if(l==this.contentDOM)g=l.childNodes[c-1];else{for(;l.parentNode!=this.contentDOM;)l=l.parentNode;g=l.previousSibling}for(;g&&!((v=g.pmViewDesc)&&v.parent==this);)g=g.previousSibling;return g?this.posBeforeChild(v)+v.size:this.posAtStart}else{let g,v;if(l==this.contentDOM)g=l.childNodes[c];else{for(;l.parentNode!=this.contentDOM;)l=l.parentNode;g=l.nextSibling}for(;g&&!((v=g.pmViewDesc)&&v.parent==this);)g=g.nextSibling;return g?this.posBeforeChild(v):this.posAtEnd}let f;if(l==this.dom&&this.contentDOM)f=c>domIndex(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))f=l.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(c==0)for(let g=l;;g=g.parentNode){if(g==this.dom){f=!1;break}if(g.previousSibling)break}if(f==null&&c==l.childNodes.length)for(let g=l;;g=g.parentNode){if(g==this.dom){f=!0;break}if(g.nextSibling)break}}return f??d>0?this.posAtEnd:this.posAtStart}nearestDesc(l,c=!1){for(let d=!0,f=l;f;f=f.parentNode){let g=this.getDesc(f),v;if(g&&(!c||g.node))if(d&&(v=g.nodeDOM)&&!(v.nodeType==1?v.contains(l.nodeType==1?l:l.parentNode):v==l))d=!1;else return g}}getDesc(l){let c=l.pmViewDesc;for(let d=c;d;d=d.parent)if(d==this)return c}posFromDOM(l,c,d){for(let f=l;f;f=f.parentNode){let g=this.getDesc(f);if(g)return g.localPosFromDOM(l,c,d)}return-1}descAt(l){for(let c=0,d=0;c<this.children.length;c++){let f=this.children[c],g=d+f.size;if(d==l&&g!=d){for(;!f.border&&f.children.length;)f=f.children[0];return f}if(l<g)return f.descAt(l-d-f.border);d=g}}domFromPos(l,c){if(!this.contentDOM)return{node:this.dom,offset:0,atom:l+1};let d=0,f=0;for(let g=0;d<this.children.length;d++){let v=this.children[d],b=g+v.size;if(b>l||v instanceof TrailingHackViewDesc){f=l-g;break}g=b}if(f)return this.children[d].domFromPos(f-this.children[d].border,c);for(let g;d&&!(g=this.children[d-1]).size&&g instanceof WidgetViewDesc&&g.side>=0;d--);if(c<=0){let g,v=!0;for(;g=d?this.children[d-1]:null,!(!g||g.dom.parentNode==this.contentDOM);d--,v=!1);return g&&c&&v&&!g.border&&!g.domAtom?g.domFromPos(g.size,c):{node:this.contentDOM,offset:g?domIndex(g.dom)+1:0}}else{let g,v=!0;for(;g=d<this.children.length?this.children[d]:null,!(!g||g.dom.parentNode==this.contentDOM);d++,v=!1);return g&&v&&!g.border&&!g.domAtom?g.domFromPos(0,c):{node:this.contentDOM,offset:g?domIndex(g.dom):this.contentDOM.childNodes.length}}}parseRange(l,c,d=0){if(this.children.length==0)return{node:this.contentDOM,from:l,to:c,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let f=-1,g=-1;for(let v=d,b=0;;b++){let $=this.children[b],y=v+$.size;if(f==-1&&l<=y){let x=v+$.border;if(l>=x&&c<=y-$.border&&$.node&&$.contentDOM&&this.contentDOM.contains($.contentDOM))return $.parseRange(l,c,x);l=v;for(let C=b;C>0;C--){let E=this.children[C-1];if(E.size&&E.dom.parentNode==this.contentDOM&&!E.emptyChildAt(1)){f=domIndex(E.dom)+1;break}l-=E.size}f==-1&&(f=0)}if(f>-1&&(y>c||b==this.children.length-1)){c=y;for(let x=b+1;x<this.children.length;x++){let C=this.children[x];if(C.size&&C.dom.parentNode==this.contentDOM&&!C.emptyChildAt(-1)){g=domIndex(C.dom);break}c+=C.size}g==-1&&(g=this.contentDOM.childNodes.length);break}v=y}return{node:this.contentDOM,from:l,to:c,fromOffset:f,toOffset:g}}emptyChildAt(l){if(this.border||!this.contentDOM||!this.children.length)return!1;let c=this.children[l<0?0:this.children.length-1];return c.size==0||c.emptyChildAt(l)}domAfterPos(l){let{node:c,offset:d}=this.domFromPos(l,0);if(c.nodeType!=1||d==c.childNodes.length)throw new RangeError("No node after pos "+l);return c.childNodes[d]}setSelection(l,c,d,f=!1){let g=Math.min(l,c),v=Math.max(l,c);for(let E=0,N=0;E<this.children.length;E++){let W=this.children[E],q=N+W.size;if(g>N&&v<q)return W.setSelection(l-N-W.border,c-N-W.border,d,f);N=q}let b=this.domFromPos(l,l?-1:1),$=c==l?b:this.domFromPos(c,c?-1:1),y=d.getSelection(),x=!1;if((gecko||safari)&&l==c){let{node:E,offset:N}=b;if(E.nodeType==3){if(x=!!(N&&E.nodeValue[N-1]==`
`),x&&N==E.nodeValue.length)for(let W=E,q;W;W=W.parentNode){if(q=W.nextSibling){q.nodeName=="BR"&&(b=$={node:q.parentNode,offset:domIndex(q)+1});break}let Y=W.pmViewDesc;if(Y&&Y.node&&Y.node.isBlock)break}}else{let W=E.childNodes[N-1];x=W&&(W.nodeName=="BR"||W.contentEditable=="false")}}if(gecko&&y.focusNode&&y.focusNode!=$.node&&y.focusNode.nodeType==1){let E=y.focusNode.childNodes[y.focusOffset];E&&E.contentEditable=="false"&&(f=!0)}if(!(f||x&&safari)&&isEquivalentPosition(b.node,b.offset,y.anchorNode,y.anchorOffset)&&isEquivalentPosition($.node,$.offset,y.focusNode,y.focusOffset))return;let C=!1;if((y.extend||l==c)&&!x){y.collapse(b.node,b.offset);try{l!=c&&y.extend($.node,$.offset),C=!0}catch{}}if(!C){if(l>c){let N=b;b=$,$=N}let E=document.createRange();E.setEnd($.node,$.offset),E.setStart(b.node,b.offset),y.removeAllRanges(),y.addRange(E)}}ignoreMutation(l){return!this.contentDOM&&l.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(l,c){for(let d=0,f=0;f<this.children.length;f++){let g=this.children[f],v=d+g.size;if(d==v?l<=v&&c>=d:l<v&&c>d){let b=d+g.border,$=v-g.border;if(l>=b&&c<=$){this.dirty=l==d||c==v?CONTENT_DIRTY:CHILD_DIRTY,l==b&&c==$&&(g.contentLost||g.dom.parentNode!=this.contentDOM)?g.dirty=NODE_DIRTY:g.markDirty(l-b,c-b);return}else g.dirty=g.dom==g.contentDOM&&g.dom.parentNode==this.contentDOM&&!g.children.length?CONTENT_DIRTY:NODE_DIRTY}d=v}this.dirty=CONTENT_DIRTY}markParentsDirty(){let l=1;for(let c=this.parent;c;c=c.parent,l++){let d=l==1?CONTENT_DIRTY:CHILD_DIRTY;c.dirty<d&&(c.dirty=d)}}get domAtom(){return!1}get ignoreForCoords(){return!1}isText(l){return!1}}class WidgetViewDesc extends ViewDesc{constructor(l,c,d,f){let g,v=c.type.toDOM;if(typeof v=="function"&&(v=v(d,()=>{if(!g)return f;if(g.parent)return g.parent.posBeforeChild(g)})),!c.type.spec.raw){if(v.nodeType!=1){let b=document.createElement("span");b.appendChild(v),v=b}v.contentEditable="false",v.classList.add("ProseMirror-widget")}super(l,[],v,null),this.widget=c,this.widget=c,g=this}matchesWidget(l){return this.dirty==NOT_DIRTY&&l.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(l){let c=this.widget.spec.stopEvent;return c?c(l):!1}ignoreMutation(l){return l.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get side(){return this.widget.type.side}}class CompositionViewDesc extends ViewDesc{constructor(l,c,d,f){super(l,[],c,null),this.textDOM=d,this.text=f}get size(){return this.text.length}localPosFromDOM(l,c){return l!=this.textDOM?this.posAtStart+(c?this.size:0):this.posAtStart+c}domFromPos(l){return{node:this.textDOM,offset:l}}ignoreMutation(l){return l.type==="characterData"&&l.target.nodeValue==l.oldValue}}class MarkViewDesc extends ViewDesc{constructor(l,c,d,f){super(l,[],d,f),this.mark=c}static create(l,c,d,f){let g=f.nodeViews[c.type.name],v=g&&g(c,f,d);return(!v||!v.dom)&&(v=DOMSerializer.renderSpec(document,c.type.spec.toDOM(c,d),null,c.attrs)),new MarkViewDesc(l,c,v.dom,v.contentDOM||v.dom)}parseRule(){return this.dirty&NODE_DIRTY||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(l){return this.dirty!=NODE_DIRTY&&this.mark.eq(l)}markDirty(l,c){if(super.markDirty(l,c),this.dirty!=NOT_DIRTY){let d=this.parent;for(;!d.node;)d=d.parent;d.dirty<this.dirty&&(d.dirty=this.dirty),this.dirty=NOT_DIRTY}}slice(l,c,d){let f=MarkViewDesc.create(this.parent,this.mark,!0,d),g=this.children,v=this.size;c<v&&(g=replaceNodes(g,c,v,d)),l>0&&(g=replaceNodes(g,0,l,d));for(let b=0;b<g.length;b++)g[b].parent=f;return f.children=g,f}}class NodeViewDesc extends ViewDesc{constructor(l,c,d,f,g,v,b,$,y){super(l,[],g,v),this.node=c,this.outerDeco=d,this.innerDeco=f,this.nodeDOM=b}static create(l,c,d,f,g,v){let b=g.nodeViews[c.type.name],$,y=b&&b(c,g,()=>{if(!$)return v;if($.parent)return $.parent.posBeforeChild($)},d,f),x=y&&y.dom,C=y&&y.contentDOM;if(c.isText){if(!x)x=document.createTextNode(c.text);else if(x.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else x||({dom:x,contentDOM:C}=DOMSerializer.renderSpec(document,c.type.spec.toDOM(c),null,c.attrs));!C&&!c.isText&&x.nodeName!="BR"&&(x.hasAttribute("contenteditable")||(x.contentEditable="false"),c.type.spec.draggable&&(x.draggable=!0));let E=x;return x=applyOuterDeco(x,d,c),y?$=new CustomNodeViewDesc(l,c,d,f,x,C||null,E,y,g,v+1):c.isText?new TextViewDesc(l,c,d,f,x,E,g):new NodeViewDesc(l,c,d,f,x,C||null,E,g,v+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let l={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(l.preserveWhitespace="full"),!this.contentDOM)l.getContent=()=>this.node.content;else if(!this.contentLost)l.contentElement=this.contentDOM;else{for(let c=this.children.length-1;c>=0;c--){let d=this.children[c];if(this.dom.contains(d.dom.parentNode)){l.contentElement=d.dom.parentNode;break}}l.contentElement||(l.getContent=()=>Fragment.empty)}return l}matchesNode(l,c,d){return this.dirty==NOT_DIRTY&&l.eq(this.node)&&sameOuterDeco(c,this.outerDeco)&&d.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(l,c){let d=this.node.inlineContent,f=c,g=l.composing?this.localCompositionInfo(l,c):null,v=g&&g.pos>-1?g:null,b=g&&g.pos<0,$=new ViewTreeUpdater(this,v&&v.node,l);iterDeco(this.node,this.innerDeco,(y,x,C)=>{y.spec.marks?$.syncToMarks(y.spec.marks,d,l):y.type.side>=0&&!C&&$.syncToMarks(x==this.node.childCount?Mark$1.none:this.node.child(x).marks,d,l),$.placeWidget(y,l,f)},(y,x,C,E)=>{$.syncToMarks(y.marks,d,l);let N;$.findNodeMatch(y,x,C,E)||b&&l.state.selection.from>f&&l.state.selection.to<f+y.nodeSize&&(N=$.findIndexWithChild(g.node))>-1&&$.updateNodeAt(y,x,C,N,l)||$.updateNextNode(y,x,C,l,E,f)||$.addNode(y,x,C,l,f),f+=y.nodeSize}),$.syncToMarks([],d,l),this.node.isTextblock&&$.addTextblockHacks(),$.destroyRest(),($.changed||this.dirty==CONTENT_DIRTY)&&(v&&this.protectLocalComposition(l,v),renderDescs(this.contentDOM,this.children,l),ios&&iosHacks(this.dom))}localCompositionInfo(l,c){let{from:d,to:f}=l.state.selection;if(!(l.state.selection instanceof TextSelection)||d<c||f>c+this.node.content.size)return null;let g=l.input.compositionNode;if(!g||!this.dom.contains(g.parentNode))return null;if(this.node.inlineContent){let v=g.nodeValue,b=findTextInFragment(this.node.content,v,d-c,f-c);return b<0?null:{node:g,pos:b,text:v}}else return{node:g,pos:-1,text:""}}protectLocalComposition(l,{node:c,pos:d,text:f}){if(this.getDesc(c))return;let g=c;for(;g.parentNode!=this.contentDOM;g=g.parentNode){for(;g.previousSibling;)g.parentNode.removeChild(g.previousSibling);for(;g.nextSibling;)g.parentNode.removeChild(g.nextSibling);g.pmViewDesc&&(g.pmViewDesc=void 0)}let v=new CompositionViewDesc(this,g,c,f);l.input.compositionNodes.push(v),this.children=replaceNodes(this.children,d,d+f.length,l,v)}update(l,c,d,f){return this.dirty==NODE_DIRTY||!l.sameMarkup(this.node)?!1:(this.updateInner(l,c,d,f),!0)}updateInner(l,c,d,f){this.updateOuterDeco(c),this.node=l,this.innerDeco=d,this.contentDOM&&this.updateChildren(f,this.posAtStart),this.dirty=NOT_DIRTY}updateOuterDeco(l){if(sameOuterDeco(l,this.outerDeco))return;let c=this.nodeDOM.nodeType!=1,d=this.dom;this.dom=patchOuterDeco(this.dom,this.nodeDOM,computeOuterDeco(this.outerDeco,this.node,c),computeOuterDeco(l,this.node,c)),this.dom!=d&&(d.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=l}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function docViewDesc(s,l,c,d,f){applyOuterDeco(d,l,s);let g=new NodeViewDesc(void 0,s,l,c,d,d,d,f,0);return g.contentDOM&&g.updateChildren(f,0),g}class TextViewDesc extends NodeViewDesc{constructor(l,c,d,f,g,v,b){super(l,c,d,f,g,null,v,b,0)}parseRule(){let l=this.nodeDOM.parentNode;for(;l&&l!=this.dom&&!l.pmIsDeco;)l=l.parentNode;return{skip:l||!0}}update(l,c,d,f){return this.dirty==NODE_DIRTY||this.dirty!=NOT_DIRTY&&!this.inParent()||!l.sameMarkup(this.node)?!1:(this.updateOuterDeco(c),(this.dirty!=NOT_DIRTY||l.text!=this.node.text)&&l.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=l.text,f.trackWrites==this.nodeDOM&&(f.trackWrites=null)),this.node=l,this.dirty=NOT_DIRTY,!0)}inParent(){let l=this.parent.contentDOM;for(let c=this.nodeDOM;c;c=c.parentNode)if(c==l)return!0;return!1}domFromPos(l){return{node:this.nodeDOM,offset:l}}localPosFromDOM(l,c,d){return l==this.nodeDOM?this.posAtStart+Math.min(c,this.node.text.length):super.localPosFromDOM(l,c,d)}ignoreMutation(l){return l.type!="characterData"&&l.type!="selection"}slice(l,c,d){let f=this.node.cut(l,c),g=document.createTextNode(f.text);return new TextViewDesc(this.parent,f,this.outerDeco,this.innerDeco,g,g,d)}markDirty(l,c){super.markDirty(l,c),this.dom!=this.nodeDOM&&(l==0||c==this.nodeDOM.nodeValue.length)&&(this.dirty=NODE_DIRTY)}get domAtom(){return!1}isText(l){return this.node.text==l}}class TrailingHackViewDesc extends ViewDesc{parseRule(){return{ignore:!0}}matchesHack(l){return this.dirty==NOT_DIRTY&&this.dom.nodeName==l}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class CustomNodeViewDesc extends NodeViewDesc{constructor(l,c,d,f,g,v,b,$,y,x){super(l,c,d,f,g,v,b,y,x),this.spec=$}update(l,c,d,f){if(this.dirty==NODE_DIRTY)return!1;if(this.spec.update){let g=this.spec.update(l,c,d);return g&&this.updateInner(l,c,d,f),g}else return!this.contentDOM&&!l.isLeaf?!1:super.update(l,c,d,f)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(l,c,d,f){this.spec.setSelection?this.spec.setSelection(l,c,d):super.setSelection(l,c,d,f)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(l){return this.spec.stopEvent?this.spec.stopEvent(l):!1}ignoreMutation(l){return this.spec.ignoreMutation?this.spec.ignoreMutation(l):super.ignoreMutation(l)}}function renderDescs(s,l,c){let d=s.firstChild,f=!1;for(let g=0;g<l.length;g++){let v=l[g],b=v.dom;if(b.parentNode==s){for(;b!=d;)d=rm$2(d),f=!0;d=d.nextSibling}else f=!0,s.insertBefore(b,d);if(v instanceof MarkViewDesc){let $=d?d.previousSibling:s.lastChild;renderDescs(v.contentDOM,v.children,c),d=$?$.nextSibling:s.firstChild}}for(;d;)d=rm$2(d),f=!0;f&&c.trackWrites==s&&(c.trackWrites=null)}const OuterDecoLevel=function(s){s&&(this.nodeName=s)};OuterDecoLevel.prototype=Object.create(null);const noDeco=[new OuterDecoLevel];function computeOuterDeco(s,l,c){if(s.length==0)return noDeco;let d=c?noDeco[0]:new OuterDecoLevel,f=[d];for(let g=0;g<s.length;g++){let v=s[g].type.attrs;if(v){v.nodeName&&f.push(d=new OuterDecoLevel(v.nodeName));for(let b in v){let $=v[b];$!=null&&(c&&f.length==1&&f.push(d=new OuterDecoLevel(l.isInline?"span":"div")),b=="class"?d.class=(d.class?d.class+" ":"")+$:b=="style"?d.style=(d.style?d.style+";":"")+$:b!="nodeName"&&(d[b]=$))}}}return f}function patchOuterDeco(s,l,c,d){if(c==noDeco&&d==noDeco)return l;let f=l;for(let g=0;g<d.length;g++){let v=d[g],b=c[g];if(g){let $;b&&b.nodeName==v.nodeName&&f!=s&&($=f.parentNode)&&$.nodeName.toLowerCase()==v.nodeName||($=document.createElement(v.nodeName),$.pmIsDeco=!0,$.appendChild(f),b=noDeco[0]),f=$}patchAttributes(f,b||noDeco[0],v)}return f}function patchAttributes(s,l,c){for(let d in l)d!="class"&&d!="style"&&d!="nodeName"&&!(d in c)&&s.removeAttribute(d);for(let d in c)d!="class"&&d!="style"&&d!="nodeName"&&c[d]!=l[d]&&s.setAttribute(d,c[d]);if(l.class!=c.class){let d=l.class?l.class.split(" ").filter(Boolean):[],f=c.class?c.class.split(" ").filter(Boolean):[];for(let g=0;g<d.length;g++)f.indexOf(d[g])==-1&&s.classList.remove(d[g]);for(let g=0;g<f.length;g++)d.indexOf(f[g])==-1&&s.classList.add(f[g]);s.classList.length==0&&s.removeAttribute("class")}if(l.style!=c.style){if(l.style){let d=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,f;for(;f=d.exec(l.style);)s.style.removeProperty(f[1])}c.style&&(s.style.cssText+=c.style)}}function applyOuterDeco(s,l,c){return patchOuterDeco(s,s,noDeco,computeOuterDeco(l,c,s.nodeType!=1))}function sameOuterDeco(s,l){if(s.length!=l.length)return!1;for(let c=0;c<s.length;c++)if(!s[c].type.eq(l[c].type))return!1;return!0}function rm$2(s){let l=s.nextSibling;return s.parentNode.removeChild(s),l}class ViewTreeUpdater{constructor(l,c,d){this.lock=c,this.view=d,this.index=0,this.stack=[],this.changed=!1,this.top=l,this.preMatch=preMatch(l.node.content,l)}destroyBetween(l,c){if(l!=c){for(let d=l;d<c;d++)this.top.children[d].destroy();this.top.children.splice(l,c-l),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(l,c,d){let f=0,g=this.stack.length>>1,v=Math.min(g,l.length);for(;f<v&&(f==g-1?this.top:this.stack[f+1<<1]).matchesMark(l[f])&&l[f].type.spec.spanning!==!1;)f++;for(;f<g;)this.destroyRest(),this.top.dirty=NOT_DIRTY,this.index=this.stack.pop(),this.top=this.stack.pop(),g--;for(;g<l.length;){this.stack.push(this.top,this.index+1);let b=-1;for(let $=this.index;$<Math.min(this.index+3,this.top.children.length);$++){let y=this.top.children[$];if(y.matchesMark(l[g])&&!this.isLocked(y.dom)){b=$;break}}if(b>-1)b>this.index&&(this.changed=!0,this.destroyBetween(this.index,b)),this.top=this.top.children[this.index];else{let $=MarkViewDesc.create(this.top,l[g],c,d);this.top.children.splice(this.index,0,$),this.top=$,this.changed=!0}this.index=0,g++}}findNodeMatch(l,c,d,f){let g=-1,v;if(f>=this.preMatch.index&&(v=this.preMatch.matches[f-this.preMatch.index]).parent==this.top&&v.matchesNode(l,c,d))g=this.top.children.indexOf(v,this.index);else for(let b=this.index,$=Math.min(this.top.children.length,b+5);b<$;b++){let y=this.top.children[b];if(y.matchesNode(l,c,d)&&!this.preMatch.matched.has(y)){g=b;break}}return g<0?!1:(this.destroyBetween(this.index,g),this.index++,!0)}updateNodeAt(l,c,d,f,g){let v=this.top.children[f];return v.dirty==NODE_DIRTY&&v.dom==v.contentDOM&&(v.dirty=CONTENT_DIRTY),v.update(l,c,d,g)?(this.destroyBetween(this.index,f),this.index++,!0):!1}findIndexWithChild(l){for(;;){let c=l.parentNode;if(!c)return-1;if(c==this.top.contentDOM){let d=l.pmViewDesc;if(d){for(let f=this.index;f<this.top.children.length;f++)if(this.top.children[f]==d)return f}return-1}l=c}}updateNextNode(l,c,d,f,g,v){for(let b=this.index;b<this.top.children.length;b++){let $=this.top.children[b];if($ instanceof NodeViewDesc){let y=this.preMatch.matched.get($);if(y!=null&&y!=g)return!1;let x=$.dom,C,E=this.isLocked(x)&&!(l.isText&&$.node&&$.node.isText&&$.nodeDOM.nodeValue==l.text&&$.dirty!=NODE_DIRTY&&sameOuterDeco(c,$.outerDeco));if(!E&&$.update(l,c,d,f))return this.destroyBetween(this.index,b),$.dom!=x&&(this.changed=!0),this.index++,!0;if(!E&&(C=this.recreateWrapper($,l,c,d,f,v)))return this.destroyBetween(this.index,b),this.top.children[this.index]=C,C.contentDOM&&(C.dirty=CONTENT_DIRTY,C.updateChildren(f,v+1),C.dirty=NOT_DIRTY),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(l,c,d,f,g,v){if(l.dirty||c.isAtom||!l.children.length||!l.node.content.eq(c.content)||!sameOuterDeco(d,l.outerDeco)||!f.eq(l.innerDeco))return null;let b=NodeViewDesc.create(this.top,c,d,f,g,v);if(b.contentDOM){b.children=l.children,l.children=[];for(let $ of b.children)$.parent=b}return l.destroy(),b}addNode(l,c,d,f,g){let v=NodeViewDesc.create(this.top,l,c,d,f,g);v.contentDOM&&v.updateChildren(f,g+1),this.top.children.splice(this.index++,0,v),this.changed=!0}placeWidget(l,c,d){let f=this.index<this.top.children.length?this.top.children[this.index]:null;if(f&&f.matchesWidget(l)&&(l==f.widget||!f.widget.type.toDOM.parentNode))this.index++;else{let g=new WidgetViewDesc(this.top,l,c,d);this.top.children.splice(this.index++,0,g),this.changed=!0}}addTextblockHacks(){let l=this.top.children[this.index-1],c=this.top;for(;l instanceof MarkViewDesc;)c=l,l=c.children[c.children.length-1];(!l||!(l instanceof TextViewDesc)||/\n$/.test(l.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(l.node.text))&&((safari||chrome)&&l&&l.dom.contentEditable=="false"&&this.addHackNode("IMG",c),this.addHackNode("BR",this.top))}addHackNode(l,c){if(c==this.top&&this.index<c.children.length&&c.children[this.index].matchesHack(l))this.index++;else{let d=document.createElement(l);l=="IMG"&&(d.className="ProseMirror-separator",d.alt=""),l=="BR"&&(d.className="ProseMirror-trailingBreak");let f=new TrailingHackViewDesc(this.top,[],d,null);c!=this.top?c.children.push(f):c.children.splice(this.index++,0,f),this.changed=!0}}isLocked(l){return this.lock&&(l==this.lock||l.nodeType==1&&l.contains(this.lock.parentNode))}}function preMatch(s,l){let c=l,d=c.children.length,f=s.childCount,g=new Map,v=[];e:for(;f>0;){let b;for(;;)if(d){let y=c.children[d-1];if(y instanceof MarkViewDesc)c=y,d=y.children.length;else{b=y,d--;break}}else{if(c==l)break e;d=c.parent.children.indexOf(c),c=c.parent}let $=b.node;if($){if($!=s.child(f-1))break;--f,g.set(b,f),v.push(b)}}return{index:f,matched:g,matches:v.reverse()}}function compareSide(s,l){return s.type.side-l.type.side}function iterDeco(s,l,c,d){let f=l.locals(s),g=0;if(f.length==0){for(let y=0;y<s.childCount;y++){let x=s.child(y);d(x,f,l.forChild(g,x),y),g+=x.nodeSize}return}let v=0,b=[],$=null;for(let y=0;;){let x,C;for(;v<f.length&&f[v].to==g;){let Y=f[v++];Y.widget&&(x?(C||(C=[x])).push(Y):x=Y)}if(x)if(C){C.sort(compareSide);for(let Y=0;Y<C.length;Y++)c(C[Y],y,!!$)}else c(x,y,!!$);let E,N;if($)N=-1,E=$,$=null;else if(y<s.childCount)N=y,E=s.child(y++);else break;for(let Y=0;Y<b.length;Y++)b[Y].to<=g&&b.splice(Y--,1);for(;v<f.length&&f[v].from<=g&&f[v].to>g;)b.push(f[v++]);let W=g+E.nodeSize;if(E.isText){let Y=W;v<f.length&&f[v].from<Y&&(Y=f[v].from);for(let re=0;re<b.length;re++)b[re].to<Y&&(Y=b[re].to);Y<W&&($=E.cut(Y-g),E=E.cut(0,Y-g),W=Y,N=-1)}else for(;v<f.length&&f[v].to<W;)v++;let q=E.isInline&&!E.isLeaf?b.filter(Y=>!Y.inline):b.slice();d(E,q,l.forChild(g,E),N),g=W}}function iosHacks(s){if(s.nodeName=="UL"||s.nodeName=="OL"){let l=s.style.cssText;s.style.cssText=l+"; list-style: square !important",window.getComputedStyle(s).listStyle,s.style.cssText=l}}function findTextInFragment(s,l,c,d){for(let f=0,g=0;f<s.childCount&&g<=d;){let v=s.child(f++),b=g;if(g+=v.nodeSize,!v.isText)continue;let $=v.text;for(;f<s.childCount;){let y=s.child(f++);if(g+=y.nodeSize,!y.isText)break;$+=y.text}if(g>=c){if(g>=d&&$.slice(d-l.length-b,d-b)==l)return d-l.length;let y=b<d?$.lastIndexOf(l,d-b-1):-1;if(y>=0&&y+l.length+b>=c)return b+y;if(c==d&&$.length>=d+l.length-b&&$.slice(d-b,d-b+l.length)==l)return d}}return-1}function replaceNodes(s,l,c,d,f){let g=[];for(let v=0,b=0;v<s.length;v++){let $=s[v],y=b,x=b+=$.size;y>=c||x<=l?g.push($):(y<l&&g.push($.slice(0,l-y,d)),f&&(g.push(f),f=void 0),x>c&&g.push($.slice(c-y,$.size,d)))}return g}function selectionFromDOM(s,l=null){let c=s.domSelectionRange(),d=s.state.doc;if(!c.focusNode)return null;let f=s.docView.nearestDesc(c.focusNode),g=f&&f.size==0,v=s.docView.posFromDOM(c.focusNode,c.focusOffset,1);if(v<0)return null;let b=d.resolve(v),$,y;if(selectionCollapsed(c)){for($=v;f&&!f.node;)f=f.parent;let C=f.node;if(f&&C.isAtom&&NodeSelection.isSelectable(C)&&f.parent&&!(C.isInline&&isOnEdge(c.focusNode,c.focusOffset,f.dom))){let E=f.posBefore;y=new NodeSelection(v==E?b:d.resolve(E))}}else{if(c instanceof s.dom.ownerDocument.defaultView.Selection&&c.rangeCount>1){let C=v,E=v;for(let N=0;N<c.rangeCount;N++){let W=c.getRangeAt(N);C=Math.min(C,s.docView.posFromDOM(W.startContainer,W.startOffset,1)),E=Math.max(E,s.docView.posFromDOM(W.endContainer,W.endOffset,-1))}if(C<0)return null;[$,v]=E==s.state.selection.anchor?[E,C]:[C,E],b=d.resolve(v)}else $=s.docView.posFromDOM(c.anchorNode,c.anchorOffset,1);if($<0)return null}let x=d.resolve($);if(!y){let C=l=="pointer"||s.state.selection.head<b.pos&&!g?1:-1;y=selectionBetween(s,x,b,C)}return y}function editorOwnsSelection(s){return s.editable?s.hasFocus():hasSelection(s)&&document.activeElement&&document.activeElement.contains(s.dom)}function selectionToDOM(s,l=!1){let c=s.state.selection;if(syncNodeSelection(s,c),!!editorOwnsSelection(s)){if(!l&&s.input.mouseDown&&s.input.mouseDown.allowDefault&&chrome){let d=s.domSelectionRange(),f=s.domObserver.currentSelection;if(d.anchorNode&&f.anchorNode&&isEquivalentPosition(d.anchorNode,d.anchorOffset,f.anchorNode,f.anchorOffset)){s.input.mouseDown.delayedSelectionSync=!0,s.domObserver.setCurSelection();return}}if(s.domObserver.disconnectSelection(),s.cursorWrapper)selectCursorWrapper(s);else{let{anchor:d,head:f}=c,g,v;brokenSelectBetweenUneditable&&!(c instanceof TextSelection)&&(c.$from.parent.inlineContent||(g=temporarilyEditableNear(s,c.from)),!c.empty&&!c.$from.parent.inlineContent&&(v=temporarilyEditableNear(s,c.to))),s.docView.setSelection(d,f,s.root,l),brokenSelectBetweenUneditable&&(g&&resetEditable(g),v&&resetEditable(v)),c.visible?s.dom.classList.remove("ProseMirror-hideselection"):(s.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&removeClassOnSelectionChange(s))}s.domObserver.setCurSelection(),s.domObserver.connectSelection()}}const brokenSelectBetweenUneditable=safari||chrome&&chrome_version<63;function temporarilyEditableNear(s,l){let{node:c,offset:d}=s.docView.domFromPos(l,0),f=d<c.childNodes.length?c.childNodes[d]:null,g=d?c.childNodes[d-1]:null;if(safari&&f&&f.contentEditable=="false")return setEditable(f);if((!f||f.contentEditable=="false")&&(!g||g.contentEditable=="false")){if(f)return setEditable(f);if(g)return setEditable(g)}}function setEditable(s){return s.contentEditable="true",safari&&s.draggable&&(s.draggable=!1,s.wasDraggable=!0),s}function resetEditable(s){s.contentEditable="false",s.wasDraggable&&(s.draggable=!0,s.wasDraggable=null)}function removeClassOnSelectionChange(s){let l=s.dom.ownerDocument;l.removeEventListener("selectionchange",s.input.hideSelectionGuard);let c=s.domSelectionRange(),d=c.anchorNode,f=c.anchorOffset;l.addEventListener("selectionchange",s.input.hideSelectionGuard=()=>{(c.anchorNode!=d||c.anchorOffset!=f)&&(l.removeEventListener("selectionchange",s.input.hideSelectionGuard),setTimeout(()=>{(!editorOwnsSelection(s)||s.state.selection.visible)&&s.dom.classList.remove("ProseMirror-hideselection")},20))})}function selectCursorWrapper(s){let l=s.domSelection(),c=document.createRange();if(!l)return;let d=s.cursorWrapper.dom,f=d.nodeName=="IMG";f?c.setStart(d.parentNode,domIndex(d)+1):c.setStart(d,0),c.collapse(!0),l.removeAllRanges(),l.addRange(c),!f&&!s.state.selection.visible&&ie$2&&ie_version<=11&&(d.disabled=!0,d.disabled=!1)}function syncNodeSelection(s,l){if(l instanceof NodeSelection){let c=s.docView.descAt(l.from);c!=s.lastSelectedViewDesc&&(clearNodeSelection(s),c&&c.selectNode(),s.lastSelectedViewDesc=c)}else clearNodeSelection(s)}function clearNodeSelection(s){s.lastSelectedViewDesc&&(s.lastSelectedViewDesc.parent&&s.lastSelectedViewDesc.deselectNode(),s.lastSelectedViewDesc=void 0)}function selectionBetween(s,l,c,d){return s.someProp("createSelectionBetween",f=>f(s,l,c))||TextSelection.between(l,c,d)}function hasFocusAndSelection(s){return s.editable&&!s.hasFocus()?!1:hasSelection(s)}function hasSelection(s){let l=s.domSelectionRange();if(!l.anchorNode)return!1;try{return s.dom.contains(l.anchorNode.nodeType==3?l.anchorNode.parentNode:l.anchorNode)&&(s.editable||s.dom.contains(l.focusNode.nodeType==3?l.focusNode.parentNode:l.focusNode))}catch{return!1}}function anchorInRightPlace(s){let l=s.docView.domFromPos(s.state.selection.anchor,0),c=s.domSelectionRange();return isEquivalentPosition(l.node,l.offset,c.anchorNode,c.anchorOffset)}function moveSelectionBlock(s,l){let{$anchor:c,$head:d}=s.selection,f=l>0?c.max(d):c.min(d),g=f.parent.inlineContent?f.depth?s.doc.resolve(l>0?f.after():f.before()):null:f;return g&&Selection$2.findFrom(g,l)}function apply$2(s,l){return s.dispatch(s.state.tr.setSelection(l).scrollIntoView()),!0}function selectHorizontally(s,l,c){let d=s.state.selection;if(d instanceof TextSelection)if(c.indexOf("s")>-1){let{$head:f}=d,g=f.textOffset?null:l<0?f.nodeBefore:f.nodeAfter;if(!g||g.isText||!g.isLeaf)return!1;let v=s.state.doc.resolve(f.pos+g.nodeSize*(l<0?-1:1));return apply$2(s,new TextSelection(d.$anchor,v))}else if(d.empty){if(s.endOfTextblock(l>0?"forward":"backward")){let f=moveSelectionBlock(s.state,l);return f&&f instanceof NodeSelection?apply$2(s,f):!1}else if(!(mac$2&&c.indexOf("m")>-1)){let f=d.$head,g=f.textOffset?null:l<0?f.nodeBefore:f.nodeAfter,v;if(!g||g.isText)return!1;let b=l<0?f.pos-g.nodeSize:f.pos;return g.isAtom||(v=s.docView.descAt(b))&&!v.contentDOM?NodeSelection.isSelectable(g)?apply$2(s,new NodeSelection(l<0?s.state.doc.resolve(f.pos-g.nodeSize):f)):webkit?apply$2(s,new TextSelection(s.state.doc.resolve(l<0?b:b+g.nodeSize))):!1:!1}}else return!1;else{if(d instanceof NodeSelection&&d.node.isInline)return apply$2(s,new TextSelection(l>0?d.$to:d.$from));{let f=moveSelectionBlock(s.state,l);return f?apply$2(s,f):!1}}}function nodeLen(s){return s.nodeType==3?s.nodeValue.length:s.childNodes.length}function isIgnorable(s,l){let c=s.pmViewDesc;return c&&c.size==0&&(l<0||s.nextSibling||s.nodeName!="BR")}function skipIgnoredNodes(s,l){return l<0?skipIgnoredNodesBefore(s):skipIgnoredNodesAfter(s)}function skipIgnoredNodesBefore(s){let l=s.domSelectionRange(),c=l.focusNode,d=l.focusOffset;if(!c)return;let f,g,v=!1;for(gecko&&c.nodeType==1&&d<nodeLen(c)&&isIgnorable(c.childNodes[d],-1)&&(v=!0);;)if(d>0){if(c.nodeType!=1)break;{let b=c.childNodes[d-1];if(isIgnorable(b,-1))f=c,g=--d;else if(b.nodeType==3)c=b,d=c.nodeValue.length;else break}}else{if(isBlockNode(c))break;{let b=c.previousSibling;for(;b&&isIgnorable(b,-1);)f=c.parentNode,g=domIndex(b),b=b.previousSibling;if(b)c=b,d=nodeLen(c);else{if(c=c.parentNode,c==s.dom)break;d=0}}}v?setSelFocus(s,c,d):f&&setSelFocus(s,f,g)}function skipIgnoredNodesAfter(s){let l=s.domSelectionRange(),c=l.focusNode,d=l.focusOffset;if(!c)return;let f=nodeLen(c),g,v;for(;;)if(d<f){if(c.nodeType!=1)break;let b=c.childNodes[d];if(isIgnorable(b,1))g=c,v=++d;else break}else{if(isBlockNode(c))break;{let b=c.nextSibling;for(;b&&isIgnorable(b,1);)g=b.parentNode,v=domIndex(b)+1,b=b.nextSibling;if(b)c=b,d=0,f=nodeLen(c);else{if(c=c.parentNode,c==s.dom)break;d=f=0}}}g&&setSelFocus(s,g,v)}function isBlockNode(s){let l=s.pmViewDesc;return l&&l.node&&l.node.isBlock}function textNodeAfter(s,l){for(;s&&l==s.childNodes.length&&!hasBlockDesc(s);)l=domIndex(s)+1,s=s.parentNode;for(;s&&l<s.childNodes.length;){let c=s.childNodes[l];if(c.nodeType==3)return c;if(c.nodeType==1&&c.contentEditable=="false")break;s=c,l=0}}function textNodeBefore(s,l){for(;s&&!l&&!hasBlockDesc(s);)l=domIndex(s),s=s.parentNode;for(;s&&l;){let c=s.childNodes[l-1];if(c.nodeType==3)return c;if(c.nodeType==1&&c.contentEditable=="false")break;s=c,l=s.childNodes.length}}function setSelFocus(s,l,c){if(l.nodeType!=3){let g,v;(v=textNodeAfter(l,c))?(l=v,c=0):(g=textNodeBefore(l,c))&&(l=g,c=g.nodeValue.length)}let d=s.domSelection();if(!d)return;if(selectionCollapsed(d)){let g=document.createRange();g.setEnd(l,c),g.setStart(l,c),d.removeAllRanges(),d.addRange(g)}else d.extend&&d.extend(l,c);s.domObserver.setCurSelection();let{state:f}=s;setTimeout(()=>{s.state==f&&selectionToDOM(s)},50)}function findDirection(s,l){let c=s.state.doc.resolve(l);if(!(chrome||windows)&&c.parent.inlineContent){let f=s.coordsAtPos(l);if(l>c.start()){let g=s.coordsAtPos(l-1),v=(g.top+g.bottom)/2;if(v>f.top&&v<f.bottom&&Math.abs(g.left-f.left)>1)return g.left<f.left?"ltr":"rtl"}if(l<c.end()){let g=s.coordsAtPos(l+1),v=(g.top+g.bottom)/2;if(v>f.top&&v<f.bottom&&Math.abs(g.left-f.left)>1)return g.left>f.left?"ltr":"rtl"}}return getComputedStyle(s.dom).direction=="rtl"?"rtl":"ltr"}function selectVertically(s,l,c){let d=s.state.selection;if(d instanceof TextSelection&&!d.empty||c.indexOf("s")>-1||mac$2&&c.indexOf("m")>-1)return!1;let{$from:f,$to:g}=d;if(!f.parent.inlineContent||s.endOfTextblock(l<0?"up":"down")){let v=moveSelectionBlock(s.state,l);if(v&&v instanceof NodeSelection)return apply$2(s,v)}if(!f.parent.inlineContent){let v=l<0?f:g,b=d instanceof AllSelection?Selection$2.near(v,l):Selection$2.findFrom(v,l);return b?apply$2(s,b):!1}return!1}function stopNativeHorizontalDelete(s,l){if(!(s.state.selection instanceof TextSelection))return!0;let{$head:c,$anchor:d,empty:f}=s.state.selection;if(!c.sameParent(d))return!0;if(!f)return!1;if(s.endOfTextblock(l>0?"forward":"backward"))return!0;let g=!c.textOffset&&(l<0?c.nodeBefore:c.nodeAfter);if(g&&!g.isText){let v=s.state.tr;return l<0?v.delete(c.pos-g.nodeSize,c.pos):v.delete(c.pos,c.pos+g.nodeSize),s.dispatch(v),!0}return!1}function switchEditable(s,l,c){s.domObserver.stop(),l.contentEditable=c,s.domObserver.start()}function safariDownArrowBug(s){if(!safari||s.state.selection.$head.parentOffset>0)return!1;let{focusNode:l,focusOffset:c}=s.domSelectionRange();if(l&&l.nodeType==1&&c==0&&l.firstChild&&l.firstChild.contentEditable=="false"){let d=l.firstChild;switchEditable(s,d,"true"),setTimeout(()=>switchEditable(s,d,"false"),20)}return!1}function getMods(s){let l="";return s.ctrlKey&&(l+="c"),s.metaKey&&(l+="m"),s.altKey&&(l+="a"),s.shiftKey&&(l+="s"),l}function captureKeyDown(s,l){let c=l.keyCode,d=getMods(l);if(c==8||mac$2&&c==72&&d=="c")return stopNativeHorizontalDelete(s,-1)||skipIgnoredNodes(s,-1);if(c==46&&!l.shiftKey||mac$2&&c==68&&d=="c")return stopNativeHorizontalDelete(s,1)||skipIgnoredNodes(s,1);if(c==13||c==27)return!0;if(c==37||mac$2&&c==66&&d=="c"){let f=c==37?findDirection(s,s.state.selection.from)=="ltr"?-1:1:-1;return selectHorizontally(s,f,d)||skipIgnoredNodes(s,f)}else if(c==39||mac$2&&c==70&&d=="c"){let f=c==39?findDirection(s,s.state.selection.from)=="ltr"?1:-1:1;return selectHorizontally(s,f,d)||skipIgnoredNodes(s,f)}else{if(c==38||mac$2&&c==80&&d=="c")return selectVertically(s,-1,d)||skipIgnoredNodes(s,-1);if(c==40||mac$2&&c==78&&d=="c")return safariDownArrowBug(s)||selectVertically(s,1,d)||skipIgnoredNodes(s,1);if(d==(mac$2?"m":"c")&&(c==66||c==73||c==89||c==90))return!0}return!1}function serializeForClipboard(s,l){s.someProp("transformCopied",N=>{l=N(l,s)});let c=[],{content:d,openStart:f,openEnd:g}=l;for(;f>1&&g>1&&d.childCount==1&&d.firstChild.childCount==1;){f--,g--;let N=d.firstChild;c.push(N.type.name,N.attrs!=N.type.defaultAttrs?N.attrs:null),d=N.content}let v=s.someProp("clipboardSerializer")||DOMSerializer.fromSchema(s.state.schema),b=detachedDoc(),$=b.createElement("div");$.appendChild(v.serializeFragment(d,{document:b}));let y=$.firstChild,x,C=0;for(;y&&y.nodeType==1&&(x=wrapMap[y.nodeName.toLowerCase()]);){for(let N=x.length-1;N>=0;N--){let W=b.createElement(x[N]);for(;$.firstChild;)W.appendChild($.firstChild);$.appendChild(W),C++}y=$.firstChild}y&&y.nodeType==1&&y.setAttribute("data-pm-slice",`${f} ${g}${C?` -${C}`:""} ${JSON.stringify(c)}`);let E=s.someProp("clipboardTextSerializer",N=>N(l,s))||l.content.textBetween(0,l.content.size,`

`);return{dom:$,text:E,slice:l}}function parseFromClipboard(s,l,c,d,f){let g=f.parent.type.spec.code,v,b;if(!c&&!l)return null;let $=l&&(d||g||!c);if($){if(s.someProp("transformPastedText",E=>{l=E(l,g||d,s)}),g)return l?new Slice(Fragment.from(s.state.schema.text(l.replace(/\r\n?/g,`
`))),0,0):Slice.empty;let C=s.someProp("clipboardTextParser",E=>E(l,f,d,s));if(C)b=C;else{let E=f.marks(),{schema:N}=s.state,W=DOMSerializer.fromSchema(N);v=document.createElement("div"),l.split(/(?:\r\n?|\n)+/).forEach(q=>{let Y=v.appendChild(document.createElement("p"));q&&Y.appendChild(W.serializeNode(N.text(q,E)))})}}else s.someProp("transformPastedHTML",C=>{c=C(c,s)}),v=readHTML(c),webkit&&restoreReplacedSpaces(v);let y=v&&v.querySelector("[data-pm-slice]"),x=y&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(y.getAttribute("data-pm-slice")||"");if(x&&x[3])for(let C=+x[3];C>0;C--){let E=v.firstChild;for(;E&&E.nodeType!=1;)E=E.nextSibling;if(!E)break;v=E}if(b||(b=(s.someProp("clipboardParser")||s.someProp("domParser")||DOMParser$1.fromSchema(s.state.schema)).parseSlice(v,{preserveWhitespace:!!($||x),context:f,ruleFromNode(E){return E.nodeName=="BR"&&!E.nextSibling&&E.parentNode&&!inlineParents.test(E.parentNode.nodeName)?{ignore:!0}:null}})),x)b=addContext(closeSlice(b,+x[1],+x[2]),x[4]);else if(b=Slice.maxOpen(normalizeSiblings(b.content,f),!0),b.openStart||b.openEnd){let C=0,E=0;for(let N=b.content.firstChild;C<b.openStart&&!N.type.spec.isolating;C++,N=N.firstChild);for(let N=b.content.lastChild;E<b.openEnd&&!N.type.spec.isolating;E++,N=N.lastChild);b=closeSlice(b,C,E)}return s.someProp("transformPasted",C=>{b=C(b,s)}),b}const inlineParents=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function normalizeSiblings(s,l){if(s.childCount<2)return s;for(let c=l.depth;c>=0;c--){let f=l.node(c).contentMatchAt(l.index(c)),g,v=[];if(s.forEach(b=>{if(!v)return;let $=f.findWrapping(b.type),y;if(!$)return v=null;if(y=v.length&&g.length&&addToSibling($,g,b,v[v.length-1],0))v[v.length-1]=y;else{v.length&&(v[v.length-1]=closeRight(v[v.length-1],g.length));let x=withWrappers(b,$);v.push(x),f=f.matchType(x.type),g=$}}),v)return Fragment.from(v)}return s}function withWrappers(s,l,c=0){for(let d=l.length-1;d>=c;d--)s=l[d].create(null,Fragment.from(s));return s}function addToSibling(s,l,c,d,f){if(f<s.length&&f<l.length&&s[f]==l[f]){let g=addToSibling(s,l,c,d.lastChild,f+1);if(g)return d.copy(d.content.replaceChild(d.childCount-1,g));if(d.contentMatchAt(d.childCount).matchType(f==s.length-1?c.type:s[f+1]))return d.copy(d.content.append(Fragment.from(withWrappers(c,s,f+1))))}}function closeRight(s,l){if(l==0)return s;let c=s.content.replaceChild(s.childCount-1,closeRight(s.lastChild,l-1)),d=s.contentMatchAt(s.childCount).fillBefore(Fragment.empty,!0);return s.copy(c.append(d))}function closeRange(s,l,c,d,f,g){let v=l<0?s.firstChild:s.lastChild,b=v.content;return s.childCount>1&&(g=0),f<d-1&&(b=closeRange(b,l,c,d,f+1,g)),f>=c&&(b=l<0?v.contentMatchAt(0).fillBefore(b,g<=f).append(b):b.append(v.contentMatchAt(v.childCount).fillBefore(Fragment.empty,!0))),s.replaceChild(l<0?0:s.childCount-1,v.copy(b))}function closeSlice(s,l,c){return l<s.openStart&&(s=new Slice(closeRange(s.content,-1,l,s.openStart,0,s.openEnd),l,s.openEnd)),c<s.openEnd&&(s=new Slice(closeRange(s.content,1,c,s.openEnd,0,0),s.openStart,c)),s}const wrapMap={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _detachedDoc=null;function detachedDoc(){return _detachedDoc||(_detachedDoc=document.implementation.createHTMLDocument("title"))}function maybeWrapTrusted(s){let l=window.trustedTypes;return l?l.createPolicy("detachedDocument",{createHTML:c=>c}).createHTML(s):s}function readHTML(s){let l=/^(\s*<meta [^>]*>)*/.exec(s);l&&(s=s.slice(l[0].length));let c=detachedDoc().createElement("div"),d=/<([a-z][^>\s]+)/i.exec(s),f;if((f=d&&wrapMap[d[1].toLowerCase()])&&(s=f.map(g=>"<"+g+">").join("")+s+f.map(g=>"</"+g+">").reverse().join("")),c.innerHTML=maybeWrapTrusted(s),f)for(let g=0;g<f.length;g++)c=c.querySelector(f[g])||c;return c}function restoreReplacedSpaces(s){let l=s.querySelectorAll(chrome?"span:not([class]):not([style])":"span.Apple-converted-space");for(let c=0;c<l.length;c++){let d=l[c];d.childNodes.length==1&&d.textContent==""&&d.parentNode&&d.parentNode.replaceChild(s.ownerDocument.createTextNode(" "),d)}}function addContext(s,l){if(!s.size)return s;let c=s.content.firstChild.type.schema,d;try{d=JSON.parse(l)}catch{return s}let{content:f,openStart:g,openEnd:v}=s;for(let b=d.length-2;b>=0;b-=2){let $=c.nodes[d[b]];if(!$||$.hasRequiredAttrs())break;f=Fragment.from($.create(d[b+1],f)),g++,v++}return new Slice(f,g,v)}const handlers={},editHandlers={},passiveHandlers={touchstart:!0,touchmove:!0};class InputState{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:""},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastAndroidDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function initInput(s){for(let l in handlers){let c=handlers[l];s.dom.addEventListener(l,s.input.eventHandlers[l]=d=>{eventBelongsToView(s,d)&&!runCustomHandler(s,d)&&(s.editable||!(d.type in editHandlers))&&c(s,d)},passiveHandlers[l]?{passive:!0}:void 0)}safari&&s.dom.addEventListener("input",()=>null),ensureListeners(s)}function setSelectionOrigin(s,l){s.input.lastSelectionOrigin=l,s.input.lastSelectionTime=Date.now()}function destroyInput(s){s.domObserver.stop();for(let l in s.input.eventHandlers)s.dom.removeEventListener(l,s.input.eventHandlers[l]);clearTimeout(s.input.composingTimeout),clearTimeout(s.input.lastIOSEnterFallbackTimeout)}function ensureListeners(s){s.someProp("handleDOMEvents",l=>{for(let c in l)s.input.eventHandlers[c]||s.dom.addEventListener(c,s.input.eventHandlers[c]=d=>runCustomHandler(s,d))})}function runCustomHandler(s,l){return s.someProp("handleDOMEvents",c=>{let d=c[l.type];return d?d(s,l)||l.defaultPrevented:!1})}function eventBelongsToView(s,l){if(!l.bubbles)return!0;if(l.defaultPrevented)return!1;for(let c=l.target;c!=s.dom;c=c.parentNode)if(!c||c.nodeType==11||c.pmViewDesc&&c.pmViewDesc.stopEvent(l))return!1;return!0}function dispatchEvent$1(s,l){!runCustomHandler(s,l)&&handlers[l.type]&&(s.editable||!(l.type in editHandlers))&&handlers[l.type](s,l)}editHandlers.keydown=(s,l)=>{let c=l;if(s.input.shiftKey=c.keyCode==16||c.shiftKey,!inOrNearComposition(s,c)&&(s.input.lastKeyCode=c.keyCode,s.input.lastKeyCodeTime=Date.now(),!(android&&chrome&&c.keyCode==13)))if(s.domObserver.selectionChanged(s.domSelectionRange())?s.domObserver.flush():c.keyCode!=229&&s.domObserver.forceFlush(),ios&&c.keyCode==13&&!c.ctrlKey&&!c.altKey&&!c.metaKey){let d=Date.now();s.input.lastIOSEnter=d,s.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{s.input.lastIOSEnter==d&&(s.someProp("handleKeyDown",f=>f(s,keyEvent(13,"Enter"))),s.input.lastIOSEnter=0)},200)}else s.someProp("handleKeyDown",d=>d(s,c))||captureKeyDown(s,c)?c.preventDefault():setSelectionOrigin(s,"key")};editHandlers.keyup=(s,l)=>{l.keyCode==16&&(s.input.shiftKey=!1)};editHandlers.keypress=(s,l)=>{let c=l;if(inOrNearComposition(s,c)||!c.charCode||c.ctrlKey&&!c.altKey||mac$2&&c.metaKey)return;if(s.someProp("handleKeyPress",f=>f(s,c))){c.preventDefault();return}let d=s.state.selection;if(!(d instanceof TextSelection)||!d.$from.sameParent(d.$to)){let f=String.fromCharCode(c.charCode);!/[\r\n]/.test(f)&&!s.someProp("handleTextInput",g=>g(s,d.$from.pos,d.$to.pos,f))&&s.dispatch(s.state.tr.insertText(f).scrollIntoView()),c.preventDefault()}};function eventCoords(s){return{left:s.clientX,top:s.clientY}}function isNear(s,l){let c=l.x-s.clientX,d=l.y-s.clientY;return c*c+d*d<100}function runHandlerOnContext(s,l,c,d,f){if(d==-1)return!1;let g=s.state.doc.resolve(d);for(let v=g.depth+1;v>0;v--)if(s.someProp(l,b=>v>g.depth?b(s,c,g.nodeAfter,g.before(v),f,!0):b(s,c,g.node(v),g.before(v),f,!1)))return!0;return!1}function updateSelection(s,l,c){if(s.focused||s.focus(),s.state.selection.eq(l))return;let d=s.state.tr.setSelection(l);d.setMeta("pointer",!0),s.dispatch(d)}function selectClickedLeaf(s,l){if(l==-1)return!1;let c=s.state.doc.resolve(l),d=c.nodeAfter;return d&&d.isAtom&&NodeSelection.isSelectable(d)?(updateSelection(s,new NodeSelection(c)),!0):!1}function selectClickedNode(s,l){if(l==-1)return!1;let c=s.state.selection,d,f;c instanceof NodeSelection&&(d=c.node);let g=s.state.doc.resolve(l);for(let v=g.depth+1;v>0;v--){let b=v>g.depth?g.nodeAfter:g.node(v);if(NodeSelection.isSelectable(b)){d&&c.$from.depth>0&&v>=c.$from.depth&&g.before(c.$from.depth+1)==c.$from.pos?f=g.before(c.$from.depth):f=g.before(v);break}}return f!=null?(updateSelection(s,NodeSelection.create(s.state.doc,f)),!0):!1}function handleSingleClick(s,l,c,d,f){return runHandlerOnContext(s,"handleClickOn",l,c,d)||s.someProp("handleClick",g=>g(s,l,d))||(f?selectClickedNode(s,c):selectClickedLeaf(s,c))}function handleDoubleClick(s,l,c,d){return runHandlerOnContext(s,"handleDoubleClickOn",l,c,d)||s.someProp("handleDoubleClick",f=>f(s,l,d))}function handleTripleClick$1(s,l,c,d){return runHandlerOnContext(s,"handleTripleClickOn",l,c,d)||s.someProp("handleTripleClick",f=>f(s,l,d))||defaultTripleClick(s,c,d)}function defaultTripleClick(s,l,c){if(c.button!=0)return!1;let d=s.state.doc;if(l==-1)return d.inlineContent?(updateSelection(s,TextSelection.create(d,0,d.content.size)),!0):!1;let f=d.resolve(l);for(let g=f.depth+1;g>0;g--){let v=g>f.depth?f.nodeAfter:f.node(g),b=f.before(g);if(v.inlineContent)updateSelection(s,TextSelection.create(d,b+1,b+1+v.content.size));else if(NodeSelection.isSelectable(v))updateSelection(s,NodeSelection.create(d,b));else continue;return!0}}function forceDOMFlush(s){return endComposition(s)}const selectNodeModifier=mac$2?"metaKey":"ctrlKey";handlers.mousedown=(s,l)=>{let c=l;s.input.shiftKey=c.shiftKey;let d=forceDOMFlush(s),f=Date.now(),g="singleClick";f-s.input.lastClick.time<500&&isNear(c,s.input.lastClick)&&!c[selectNodeModifier]&&(s.input.lastClick.type=="singleClick"?g="doubleClick":s.input.lastClick.type=="doubleClick"&&(g="tripleClick")),s.input.lastClick={time:f,x:c.clientX,y:c.clientY,type:g};let v=s.posAtCoords(eventCoords(c));v&&(g=="singleClick"?(s.input.mouseDown&&s.input.mouseDown.done(),s.input.mouseDown=new MouseDown(s,v,c,!!d)):(g=="doubleClick"?handleDoubleClick:handleTripleClick$1)(s,v.pos,v.inside,c)?c.preventDefault():setSelectionOrigin(s,"pointer"))};class MouseDown{constructor(l,c,d,f){this.view=l,this.pos=c,this.event=d,this.flushed=f,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=l.state.doc,this.selectNode=!!d[selectNodeModifier],this.allowDefault=d.shiftKey;let g,v;if(c.inside>-1)g=l.state.doc.nodeAt(c.inside),v=c.inside;else{let x=l.state.doc.resolve(c.pos);g=x.parent,v=x.depth?x.before():0}const b=f?null:d.target,$=b?l.docView.nearestDesc(b,!0):null;this.target=$&&$.dom.nodeType==1?$.dom:null;let{selection:y}=l.state;(d.button==0&&g.type.spec.draggable&&g.type.spec.selectable!==!1||y instanceof NodeSelection&&y.from<=v&&y.to>v)&&(this.mightDrag={node:g,pos:v,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&gecko&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),l.root.addEventListener("mouseup",this.up=this.up.bind(this)),l.root.addEventListener("mousemove",this.move=this.move.bind(this)),setSelectionOrigin(l,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>selectionToDOM(this.view)),this.view.input.mouseDown=null}up(l){if(this.done(),!this.view.dom.contains(l.target))return;let c=this.pos;this.view.state.doc!=this.startDoc&&(c=this.view.posAtCoords(eventCoords(l))),this.updateAllowDefault(l),this.allowDefault||!c?setSelectionOrigin(this.view,"pointer"):handleSingleClick(this.view,c.pos,c.inside,l,this.selectNode)?l.preventDefault():l.button==0&&(this.flushed||safari&&this.mightDrag&&!this.mightDrag.node.isAtom||chrome&&!this.view.state.selection.visible&&Math.min(Math.abs(c.pos-this.view.state.selection.from),Math.abs(c.pos-this.view.state.selection.to))<=2)?(updateSelection(this.view,Selection$2.near(this.view.state.doc.resolve(c.pos))),l.preventDefault()):setSelectionOrigin(this.view,"pointer")}move(l){this.updateAllowDefault(l),setSelectionOrigin(this.view,"pointer"),l.buttons==0&&this.done()}updateAllowDefault(l){!this.allowDefault&&(Math.abs(this.event.x-l.clientX)>4||Math.abs(this.event.y-l.clientY)>4)&&(this.allowDefault=!0)}}handlers.touchstart=s=>{s.input.lastTouch=Date.now(),forceDOMFlush(s),setSelectionOrigin(s,"pointer")};handlers.touchmove=s=>{s.input.lastTouch=Date.now(),setSelectionOrigin(s,"pointer")};handlers.contextmenu=s=>forceDOMFlush(s);function inOrNearComposition(s,l){return s.composing?!0:safari&&Math.abs(l.timeStamp-s.input.compositionEndedAt)<500?(s.input.compositionEndedAt=-2e8,!0):!1}const timeoutComposition=android?5e3:-1;editHandlers.compositionstart=editHandlers.compositionupdate=s=>{if(!s.composing){s.domObserver.flush();let{state:l}=s,c=l.selection.$to;if(l.selection instanceof TextSelection&&(l.storedMarks||!c.textOffset&&c.parentOffset&&c.nodeBefore.marks.some(d=>d.type.spec.inclusive===!1)))s.markCursor=s.state.storedMarks||c.marks(),endComposition(s,!0),s.markCursor=null;else if(endComposition(s,!l.selection.empty),gecko&&l.selection.empty&&c.parentOffset&&!c.textOffset&&c.nodeBefore.marks.length){let d=s.domSelectionRange();for(let f=d.focusNode,g=d.focusOffset;f&&f.nodeType==1&&g!=0;){let v=g<0?f.lastChild:f.childNodes[g-1];if(!v)break;if(v.nodeType==3){let b=s.domSelection();b&&b.collapse(v,v.nodeValue.length);break}else f=v,g=-1}}s.input.composing=!0}scheduleComposeEnd(s,timeoutComposition)};editHandlers.compositionend=(s,l)=>{s.composing&&(s.input.composing=!1,s.input.compositionEndedAt=l.timeStamp,s.input.compositionPendingChanges=s.domObserver.pendingRecords().length?s.input.compositionID:0,s.input.compositionNode=null,s.input.compositionPendingChanges&&Promise.resolve().then(()=>s.domObserver.flush()),s.input.compositionID++,scheduleComposeEnd(s,20))};function scheduleComposeEnd(s,l){clearTimeout(s.input.composingTimeout),l>-1&&(s.input.composingTimeout=setTimeout(()=>endComposition(s),l))}function clearComposition(s){for(s.composing&&(s.input.composing=!1,s.input.compositionEndedAt=timestampFromCustomEvent());s.input.compositionNodes.length>0;)s.input.compositionNodes.pop().markParentsDirty()}function findCompositionNode(s){let l=s.domSelectionRange();if(!l.focusNode)return null;let c=textNodeBefore$1(l.focusNode,l.focusOffset),d=textNodeAfter$1(l.focusNode,l.focusOffset);if(c&&d&&c!=d){let f=d.pmViewDesc,g=s.domObserver.lastChangedTextNode;if(c==g||d==g)return g;if(!f||!f.isText(d.nodeValue))return d;if(s.input.compositionNode==d){let v=c.pmViewDesc;if(!(!v||!v.isText(c.nodeValue)))return d}}return c||d}function timestampFromCustomEvent(){let s=document.createEvent("Event");return s.initEvent("event",!0,!0),s.timeStamp}function endComposition(s,l=!1){if(!(android&&s.domObserver.flushingSoon>=0)){if(s.domObserver.forceFlush(),clearComposition(s),l||s.docView&&s.docView.dirty){let c=selectionFromDOM(s);return c&&!c.eq(s.state.selection)?s.dispatch(s.state.tr.setSelection(c)):(s.markCursor||l)&&!s.state.selection.empty?s.dispatch(s.state.tr.deleteSelection()):s.updateState(s.state),!0}return!1}}function captureCopy(s,l){if(!s.dom.parentNode)return;let c=s.dom.parentNode.appendChild(document.createElement("div"));c.appendChild(l),c.style.cssText="position: fixed; left: -10000px; top: 10px";let d=getSelection(),f=document.createRange();f.selectNodeContents(l),s.dom.blur(),d.removeAllRanges(),d.addRange(f),setTimeout(()=>{c.parentNode&&c.parentNode.removeChild(c),s.focus()},50)}const brokenClipboardAPI=ie$2&&ie_version<15||ios&&webkit_version<604;handlers.copy=editHandlers.cut=(s,l)=>{let c=l,d=s.state.selection,f=c.type=="cut";if(d.empty)return;let g=brokenClipboardAPI?null:c.clipboardData,v=d.content(),{dom:b,text:$}=serializeForClipboard(s,v);g?(c.preventDefault(),g.clearData(),g.setData("text/html",b.innerHTML),g.setData("text/plain",$)):captureCopy(s,b),f&&s.dispatch(s.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function sliceSingleNode(s){return s.openStart==0&&s.openEnd==0&&s.content.childCount==1?s.content.firstChild:null}function capturePaste(s,l){if(!s.dom.parentNode)return;let c=s.input.shiftKey||s.state.selection.$from.parent.type.spec.code,d=s.dom.parentNode.appendChild(document.createElement(c?"textarea":"div"));c||(d.contentEditable="true"),d.style.cssText="position: fixed; left: -10000px; top: 10px",d.focus();let f=s.input.shiftKey&&s.input.lastKeyCode!=45;setTimeout(()=>{s.focus(),d.parentNode&&d.parentNode.removeChild(d),c?doPaste(s,d.value,null,f,l):doPaste(s,d.textContent,d.innerHTML,f,l)},50)}function doPaste(s,l,c,d,f){let g=parseFromClipboard(s,l,c,d,s.state.selection.$from);if(s.someProp("handlePaste",$=>$(s,f,g||Slice.empty)))return!0;if(!g)return!1;let v=sliceSingleNode(g),b=v?s.state.tr.replaceSelectionWith(v,d):s.state.tr.replaceSelection(g);return s.dispatch(b.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function getText$1(s){let l=s.getData("text/plain")||s.getData("Text");if(l)return l;let c=s.getData("text/uri-list");return c?c.replace(/\r?\n/g," "):""}editHandlers.paste=(s,l)=>{let c=l;if(s.composing&&!android)return;let d=brokenClipboardAPI?null:c.clipboardData,f=s.input.shiftKey&&s.input.lastKeyCode!=45;d&&doPaste(s,getText$1(d),d.getData("text/html"),f,c)?c.preventDefault():capturePaste(s,c)};class Dragging{constructor(l,c,d){this.slice=l,this.move=c,this.node=d}}const dragCopyModifier=mac$2?"altKey":"ctrlKey";handlers.dragstart=(s,l)=>{let c=l,d=s.input.mouseDown;if(d&&d.done(),!c.dataTransfer)return;let f=s.state.selection,g=f.empty?null:s.posAtCoords(eventCoords(c)),v;if(!(g&&g.pos>=f.from&&g.pos<=(f instanceof NodeSelection?f.to-1:f.to))){if(d&&d.mightDrag)v=NodeSelection.create(s.state.doc,d.mightDrag.pos);else if(c.target&&c.target.nodeType==1){let C=s.docView.nearestDesc(c.target,!0);C&&C.node.type.spec.draggable&&C!=s.docView&&(v=NodeSelection.create(s.state.doc,C.posBefore))}}let b=(v||s.state.selection).content(),{dom:$,text:y,slice:x}=serializeForClipboard(s,b);(!c.dataTransfer.files.length||!chrome||chrome_version>120)&&c.dataTransfer.clearData(),c.dataTransfer.setData(brokenClipboardAPI?"Text":"text/html",$.innerHTML),c.dataTransfer.effectAllowed="copyMove",brokenClipboardAPI||c.dataTransfer.setData("text/plain",y),s.dragging=new Dragging(x,!c[dragCopyModifier],v)};handlers.dragend=s=>{let l=s.dragging;window.setTimeout(()=>{s.dragging==l&&(s.dragging=null)},50)};editHandlers.dragover=editHandlers.dragenter=(s,l)=>l.preventDefault();editHandlers.drop=(s,l)=>{let c=l,d=s.dragging;if(s.dragging=null,!c.dataTransfer)return;let f=s.posAtCoords(eventCoords(c));if(!f)return;let g=s.state.doc.resolve(f.pos),v=d&&d.slice;v?s.someProp("transformPasted",W=>{v=W(v,s)}):v=parseFromClipboard(s,getText$1(c.dataTransfer),brokenClipboardAPI?null:c.dataTransfer.getData("text/html"),!1,g);let b=!!(d&&!c[dragCopyModifier]);if(s.someProp("handleDrop",W=>W(s,c,v||Slice.empty,b))){c.preventDefault();return}if(!v)return;c.preventDefault();let $=v?dropPoint(s.state.doc,g.pos,v):g.pos;$==null&&($=g.pos);let y=s.state.tr;if(b){let{node:W}=d;W?W.replace(y):y.deleteSelection()}let x=y.mapping.map($),C=v.openStart==0&&v.openEnd==0&&v.content.childCount==1,E=y.doc;if(C?y.replaceRangeWith(x,x,v.content.firstChild):y.replaceRange(x,x,v),y.doc.eq(E))return;let N=y.doc.resolve(x);if(C&&NodeSelection.isSelectable(v.content.firstChild)&&N.nodeAfter&&N.nodeAfter.sameMarkup(v.content.firstChild))y.setSelection(new NodeSelection(N));else{let W=y.mapping.map($);y.mapping.maps[y.mapping.maps.length-1].forEach((q,Y,re,se)=>W=se),y.setSelection(selectionBetween(s,N,y.doc.resolve(W)))}s.focus(),s.dispatch(y.setMeta("uiEvent","drop"))};handlers.focus=s=>{s.input.lastFocus=Date.now(),s.focused||(s.domObserver.stop(),s.dom.classList.add("ProseMirror-focused"),s.domObserver.start(),s.focused=!0,setTimeout(()=>{s.docView&&s.hasFocus()&&!s.domObserver.currentSelection.eq(s.domSelectionRange())&&selectionToDOM(s)},20))};handlers.blur=(s,l)=>{let c=l;s.focused&&(s.domObserver.stop(),s.dom.classList.remove("ProseMirror-focused"),s.domObserver.start(),c.relatedTarget&&s.dom.contains(c.relatedTarget)&&s.domObserver.currentSelection.clear(),s.focused=!1)};handlers.beforeinput=(s,l)=>{if(chrome&&android&&l.inputType=="deleteContentBackward"){s.domObserver.flushSoon();let{domChangeCount:d}=s.input;setTimeout(()=>{if(s.input.domChangeCount!=d||(s.dom.blur(),s.focus(),s.someProp("handleKeyDown",g=>g(s,keyEvent(8,"Backspace")))))return;let{$cursor:f}=s.state.selection;f&&f.pos>0&&s.dispatch(s.state.tr.delete(f.pos-1,f.pos).scrollIntoView())},50)}};for(let s in editHandlers)handlers[s]=editHandlers[s];function compareObjs(s,l){if(s==l)return!0;for(let c in s)if(s[c]!==l[c])return!1;for(let c in l)if(!(c in s))return!1;return!0}class WidgetType{constructor(l,c){this.toDOM=l,this.spec=c||noSpec,this.side=this.spec.side||0}map(l,c,d,f){let{pos:g,deleted:v}=l.mapResult(c.from+f,this.side<0?-1:1);return v?null:new Decoration(g-d,g-d,this)}valid(){return!0}eq(l){return this==l||l instanceof WidgetType&&(this.spec.key&&this.spec.key==l.spec.key||this.toDOM==l.toDOM&&compareObjs(this.spec,l.spec))}destroy(l){this.spec.destroy&&this.spec.destroy(l)}}class InlineType{constructor(l,c){this.attrs=l,this.spec=c||noSpec}map(l,c,d,f){let g=l.map(c.from+f,this.spec.inclusiveStart?-1:1)-d,v=l.map(c.to+f,this.spec.inclusiveEnd?1:-1)-d;return g>=v?null:new Decoration(g,v,this)}valid(l,c){return c.from<c.to}eq(l){return this==l||l instanceof InlineType&&compareObjs(this.attrs,l.attrs)&&compareObjs(this.spec,l.spec)}static is(l){return l.type instanceof InlineType}destroy(){}}class NodeType{constructor(l,c){this.attrs=l,this.spec=c||noSpec}map(l,c,d,f){let g=l.mapResult(c.from+f,1);if(g.deleted)return null;let v=l.mapResult(c.to+f,-1);return v.deleted||v.pos<=g.pos?null:new Decoration(g.pos-d,v.pos-d,this)}valid(l,c){let{index:d,offset:f}=l.content.findIndex(c.from),g;return f==c.from&&!(g=l.child(d)).isText&&f+g.nodeSize==c.to}eq(l){return this==l||l instanceof NodeType&&compareObjs(this.attrs,l.attrs)&&compareObjs(this.spec,l.spec)}destroy(){}}class Decoration{constructor(l,c,d){this.from=l,this.to=c,this.type=d}copy(l,c){return new Decoration(l,c,this.type)}eq(l,c=0){return this.type.eq(l.type)&&this.from+c==l.from&&this.to+c==l.to}map(l,c,d){return this.type.map(l,this,c,d)}static widget(l,c,d){return new Decoration(l,l,new WidgetType(c,d))}static inline(l,c,d,f){return new Decoration(l,c,new InlineType(d,f))}static node(l,c,d,f){return new Decoration(l,c,new NodeType(d,f))}get spec(){return this.type.spec}get inline(){return this.type instanceof InlineType}get widget(){return this.type instanceof WidgetType}}const none$1=[],noSpec={};class DecorationSet{constructor(l,c){this.local=l.length?l:none$1,this.children=c.length?c:none$1}static create(l,c){return c.length?buildTree$1(c,l,0,noSpec):empty$1}find(l,c,d){let f=[];return this.findInner(l??0,c??1e9,f,0,d),f}findInner(l,c,d,f,g){for(let v=0;v<this.local.length;v++){let b=this.local[v];b.from<=c&&b.to>=l&&(!g||g(b.spec))&&d.push(b.copy(b.from+f,b.to+f))}for(let v=0;v<this.children.length;v+=3)if(this.children[v]<c&&this.children[v+1]>l){let b=this.children[v]+1;this.children[v+2].findInner(l-b,c-b,d,f+b,g)}}map(l,c,d){return this==empty$1||l.maps.length==0?this:this.mapInner(l,c,0,0,d||noSpec)}mapInner(l,c,d,f,g){let v;for(let b=0;b<this.local.length;b++){let $=this.local[b].map(l,d,f);$&&$.type.valid(c,$)?(v||(v=[])).push($):g.onRemove&&g.onRemove(this.local[b].spec)}return this.children.length?mapChildren(this.children,v||[],l,c,d,f,g):v?new DecorationSet(v.sort(byPos),none$1):empty$1}add(l,c){return c.length?this==empty$1?DecorationSet.create(l,c):this.addInner(l,c,0):this}addInner(l,c,d){let f,g=0;l.forEach((b,$)=>{let y=$+d,x;if(x=takeSpansForNode(c,b,y)){for(f||(f=this.children.slice());g<f.length&&f[g]<$;)g+=3;f[g]==$?f[g+2]=f[g+2].addInner(b,x,y+1):f.splice(g,0,$,$+b.nodeSize,buildTree$1(x,b,y+1,noSpec)),g+=3}});let v=moveSpans(g?withoutNulls(c):c,-d);for(let b=0;b<v.length;b++)v[b].type.valid(l,v[b])||v.splice(b--,1);return new DecorationSet(v.length?this.local.concat(v).sort(byPos):this.local,f||this.children)}remove(l){return l.length==0||this==empty$1?this:this.removeInner(l,0)}removeInner(l,c){let d=this.children,f=this.local;for(let g=0;g<d.length;g+=3){let v,b=d[g]+c,$=d[g+1]+c;for(let x=0,C;x<l.length;x++)(C=l[x])&&C.from>b&&C.to<$&&(l[x]=null,(v||(v=[])).push(C));if(!v)continue;d==this.children&&(d=this.children.slice());let y=d[g+2].removeInner(v,b+1);y!=empty$1?d[g+2]=y:(d.splice(g,3),g-=3)}if(f.length){for(let g=0,v;g<l.length;g++)if(v=l[g])for(let b=0;b<f.length;b++)f[b].eq(v,c)&&(f==this.local&&(f=this.local.slice()),f.splice(b--,1))}return d==this.children&&f==this.local?this:f.length||d.length?new DecorationSet(f,d):empty$1}forChild(l,c){if(this==empty$1)return this;if(c.isLeaf)return DecorationSet.empty;let d,f;for(let b=0;b<this.children.length;b+=3)if(this.children[b]>=l){this.children[b]==l&&(d=this.children[b+2]);break}let g=l+1,v=g+c.content.size;for(let b=0;b<this.local.length;b++){let $=this.local[b];if($.from<v&&$.to>g&&$.type instanceof InlineType){let y=Math.max(g,$.from)-g,x=Math.min(v,$.to)-g;y<x&&(f||(f=[])).push($.copy(y,x))}}if(f){let b=new DecorationSet(f.sort(byPos),none$1);return d?new DecorationGroup([b,d]):b}return d||empty$1}eq(l){if(this==l)return!0;if(!(l instanceof DecorationSet)||this.local.length!=l.local.length||this.children.length!=l.children.length)return!1;for(let c=0;c<this.local.length;c++)if(!this.local[c].eq(l.local[c]))return!1;for(let c=0;c<this.children.length;c+=3)if(this.children[c]!=l.children[c]||this.children[c+1]!=l.children[c+1]||!this.children[c+2].eq(l.children[c+2]))return!1;return!0}locals(l){return removeOverlap(this.localsInner(l))}localsInner(l){if(this==empty$1)return none$1;if(l.inlineContent||!this.local.some(InlineType.is))return this.local;let c=[];for(let d=0;d<this.local.length;d++)this.local[d].type instanceof InlineType||c.push(this.local[d]);return c}forEachSet(l){l(this)}}DecorationSet.empty=new DecorationSet([],[]);DecorationSet.removeOverlap=removeOverlap;const empty$1=DecorationSet.empty;class DecorationGroup{constructor(l){this.members=l}map(l,c){const d=this.members.map(f=>f.map(l,c,noSpec));return DecorationGroup.from(d)}forChild(l,c){if(c.isLeaf)return DecorationSet.empty;let d=[];for(let f=0;f<this.members.length;f++){let g=this.members[f].forChild(l,c);g!=empty$1&&(g instanceof DecorationGroup?d=d.concat(g.members):d.push(g))}return DecorationGroup.from(d)}eq(l){if(!(l instanceof DecorationGroup)||l.members.length!=this.members.length)return!1;for(let c=0;c<this.members.length;c++)if(!this.members[c].eq(l.members[c]))return!1;return!0}locals(l){let c,d=!0;for(let f=0;f<this.members.length;f++){let g=this.members[f].localsInner(l);if(g.length)if(!c)c=g;else{d&&(c=c.slice(),d=!1);for(let v=0;v<g.length;v++)c.push(g[v])}}return c?removeOverlap(d?c:c.sort(byPos)):none$1}static from(l){switch(l.length){case 0:return empty$1;case 1:return l[0];default:return new DecorationGroup(l.every(c=>c instanceof DecorationSet)?l:l.reduce((c,d)=>c.concat(d instanceof DecorationSet?d:d.members),[]))}}forEachSet(l){for(let c=0;c<this.members.length;c++)this.members[c].forEachSet(l)}}function mapChildren(s,l,c,d,f,g,v){let b=s.slice();for(let y=0,x=g;y<c.maps.length;y++){let C=0;c.maps[y].forEach((E,N,W,q)=>{let Y=q-W-(N-E);for(let re=0;re<b.length;re+=3){let se=b[re+1];if(se<0||E>se+x-C)continue;let de=b[re]+x-C;N>=de?b[re+1]=E<=de?-2:-1:E>=x&&Y&&(b[re]+=Y,b[re+1]+=Y)}C+=Y}),x=c.maps[y].map(x,-1)}let $=!1;for(let y=0;y<b.length;y+=3)if(b[y+1]<0){if(b[y+1]==-2){$=!0,b[y+1]=-1;continue}let x=c.map(s[y]+g),C=x-f;if(C<0||C>=d.content.size){$=!0;continue}let E=c.map(s[y+1]+g,-1),N=E-f,{index:W,offset:q}=d.content.findIndex(C),Y=d.maybeChild(W);if(Y&&q==C&&q+Y.nodeSize==N){let re=b[y+2].mapInner(c,Y,x+1,s[y]+g+1,v);re!=empty$1?(b[y]=C,b[y+1]=N,b[y+2]=re):(b[y+1]=-2,$=!0)}else $=!0}if($){let y=mapAndGatherRemainingDecorations(b,s,l,c,f,g,v),x=buildTree$1(y,d,0,v);l=x.local;for(let C=0;C<b.length;C+=3)b[C+1]<0&&(b.splice(C,3),C-=3);for(let C=0,E=0;C<x.children.length;C+=3){let N=x.children[C];for(;E<b.length&&b[E]<N;)E+=3;b.splice(E,0,x.children[C],x.children[C+1],x.children[C+2])}}return new DecorationSet(l.sort(byPos),b)}function moveSpans(s,l){if(!l||!s.length)return s;let c=[];for(let d=0;d<s.length;d++){let f=s[d];c.push(new Decoration(f.from+l,f.to+l,f.type))}return c}function mapAndGatherRemainingDecorations(s,l,c,d,f,g,v){function b($,y){for(let x=0;x<$.local.length;x++){let C=$.local[x].map(d,f,y);C?c.push(C):v.onRemove&&v.onRemove($.local[x].spec)}for(let x=0;x<$.children.length;x+=3)b($.children[x+2],$.children[x]+y+1)}for(let $=0;$<s.length;$+=3)s[$+1]==-1&&b(s[$+2],l[$]+g+1);return c}function takeSpansForNode(s,l,c){if(l.isLeaf)return null;let d=c+l.nodeSize,f=null;for(let g=0,v;g<s.length;g++)(v=s[g])&&v.from>c&&v.to<d&&((f||(f=[])).push(v),s[g]=null);return f}function withoutNulls(s){let l=[];for(let c=0;c<s.length;c++)s[c]!=null&&l.push(s[c]);return l}function buildTree$1(s,l,c,d){let f=[],g=!1;l.forEach((b,$)=>{let y=takeSpansForNode(s,b,$+c);if(y){g=!0;let x=buildTree$1(y,b,c+$+1,d);x!=empty$1&&f.push($,$+b.nodeSize,x)}});let v=moveSpans(g?withoutNulls(s):s,-c).sort(byPos);for(let b=0;b<v.length;b++)v[b].type.valid(l,v[b])||(d.onRemove&&d.onRemove(v[b].spec),v.splice(b--,1));return v.length||f.length?new DecorationSet(v,f):empty$1}function byPos(s,l){return s.from-l.from||s.to-l.to}function removeOverlap(s){let l=s;for(let c=0;c<l.length-1;c++){let d=l[c];if(d.from!=d.to)for(let f=c+1;f<l.length;f++){let g=l[f];if(g.from==d.from){g.to!=d.to&&(l==s&&(l=s.slice()),l[f]=g.copy(g.from,d.to),insertAhead(l,f+1,g.copy(d.to,g.to)));continue}else{g.from<d.to&&(l==s&&(l=s.slice()),l[c]=d.copy(d.from,g.from),insertAhead(l,f,d.copy(g.from,d.to)));break}}}return l}function insertAhead(s,l,c){for(;l<s.length&&byPos(c,s[l])>0;)l++;s.splice(l,0,c)}function viewDecorations(s){let l=[];return s.someProp("decorations",c=>{let d=c(s.state);d&&d!=empty$1&&l.push(d)}),s.cursorWrapper&&l.push(DecorationSet.create(s.state.doc,[s.cursorWrapper.deco])),DecorationGroup.from(l)}const observeOptions={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},useCharData=ie$2&&ie_version<=11;class SelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(l){this.anchorNode=l.anchorNode,this.anchorOffset=l.anchorOffset,this.focusNode=l.focusNode,this.focusOffset=l.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(l){return l.anchorNode==this.anchorNode&&l.anchorOffset==this.anchorOffset&&l.focusNode==this.focusNode&&l.focusOffset==this.focusOffset}}class DOMObserver{constructor(l,c){this.view=l,this.handleDOMChange=c,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new SelectionState,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(d=>{for(let f=0;f<d.length;f++)this.queue.push(d[f]);ie$2&&ie_version<=11&&d.some(f=>f.type=="childList"&&f.removedNodes.length||f.type=="characterData"&&f.oldValue.length>f.target.nodeValue.length)?this.flushSoon():this.flush()}),useCharData&&(this.onCharData=d=>{this.queue.push({target:d.target,type:"characterData",oldValue:d.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,observeOptions)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let l=this.observer.takeRecords();if(l.length){for(let c=0;c<l.length;c++)this.queue.push(l[c]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(hasFocusAndSelection(this.view)){if(this.suppressingSelectionUpdates)return selectionToDOM(this.view);if(ie$2&&ie_version<=11&&!this.view.state.selection.empty){let l=this.view.domSelectionRange();if(l.focusNode&&isEquivalentPosition(l.focusNode,l.focusOffset,l.anchorNode,l.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(l){if(!l.focusNode)return!0;let c=new Set,d;for(let g=l.focusNode;g;g=parentNode(g))c.add(g);for(let g=l.anchorNode;g;g=parentNode(g))if(c.has(g)){d=g;break}let f=d&&this.view.docView.nearestDesc(d);if(f&&f.ignoreMutation({type:"selection",target:d.nodeType==3?d.parentNode:d}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let l of this.observer.takeRecords())this.queue.push(l);return this.queue}selectionChanged(l){return!this.suppressingSelectionUpdates&&!this.currentSelection.eq(l)&&hasFocusAndSelection(this.view)&&!this.ignoreSelectionChange(l)}flush(){let{view:l}=this;if(!l.docView||this.flushingSoon>-1)return;let c=this.pendingRecords();c.length&&(this.queue=[]);let d=l.domSelectionRange(),f=this.selectionChanged(d),g=-1,v=-1,b=!1,$=[];if(l.editable)for(let x=0;x<c.length;x++){let C=this.registerMutation(c[x],$);C&&(g=g<0?C.from:Math.min(C.from,g),v=v<0?C.to:Math.max(C.to,v),C.typeOver&&(b=!0))}if(gecko&&$.length){let x=$.filter(C=>C.nodeName=="BR");if(x.length==2){let[C,E]=x;C.parentNode&&C.parentNode.parentNode==E.parentNode?E.remove():C.remove()}else{let{focusNode:C}=this.currentSelection;for(let E of x){let N=E.parentNode;N&&N.nodeName=="LI"&&(!C||blockParent(l,C)!=N)&&E.remove()}}}let y=null;g<0&&f&&l.input.lastFocus>Date.now()-200&&Math.max(l.input.lastTouch,l.input.lastClick.time)<Date.now()-300&&selectionCollapsed(d)&&(y=selectionFromDOM(l))&&y.eq(Selection$2.near(l.state.doc.resolve(0),1))?(l.input.lastFocus=0,selectionToDOM(l),this.currentSelection.set(d),l.scrollToSelection()):(g>-1||f)&&(g>-1&&(l.docView.markDirty(g,v),checkCSS(l)),this.handleDOMChange(g,v,b,$),l.docView&&l.docView.dirty?l.updateState(l.state):this.currentSelection.eq(d)||selectionToDOM(l),this.currentSelection.set(d))}registerMutation(l,c){if(c.indexOf(l.target)>-1)return null;let d=this.view.docView.nearestDesc(l.target);if(l.type=="attributes"&&(d==this.view.docView||l.attributeName=="contenteditable"||l.attributeName=="style"&&!l.oldValue&&!l.target.getAttribute("style"))||!d||d.ignoreMutation(l))return null;if(l.type=="childList"){for(let x=0;x<l.addedNodes.length;x++){let C=l.addedNodes[x];c.push(C),C.nodeType==3&&(this.lastChangedTextNode=C)}if(d.contentDOM&&d.contentDOM!=d.dom&&!d.contentDOM.contains(l.target))return{from:d.posBefore,to:d.posAfter};let f=l.previousSibling,g=l.nextSibling;if(ie$2&&ie_version<=11&&l.addedNodes.length)for(let x=0;x<l.addedNodes.length;x++){let{previousSibling:C,nextSibling:E}=l.addedNodes[x];(!C||Array.prototype.indexOf.call(l.addedNodes,C)<0)&&(f=C),(!E||Array.prototype.indexOf.call(l.addedNodes,E)<0)&&(g=E)}let v=f&&f.parentNode==l.target?domIndex(f)+1:0,b=d.localPosFromDOM(l.target,v,-1),$=g&&g.parentNode==l.target?domIndex(g):l.target.childNodes.length,y=d.localPosFromDOM(l.target,$,1);return{from:b,to:y}}else return l.type=="attributes"?{from:d.posAtStart-d.border,to:d.posAtEnd+d.border}:(this.lastChangedTextNode=l.target,{from:d.posAtStart,to:d.posAtEnd,typeOver:l.target.nodeValue==l.oldValue})}}let cssChecked=new WeakMap,cssCheckWarned=!1;function checkCSS(s){if(!cssChecked.has(s)&&(cssChecked.set(s,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(s.dom).whiteSpace)!==-1)){if(s.requiresGeckoHackNode=gecko,cssCheckWarned)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),cssCheckWarned=!0}}function rangeToSelectionRange(s,l){let c=l.startContainer,d=l.startOffset,f=l.endContainer,g=l.endOffset,v=s.domAtPos(s.state.selection.anchor);return isEquivalentPosition(v.node,v.offset,f,g)&&([c,d,f,g]=[f,g,c,d]),{anchorNode:c,anchorOffset:d,focusNode:f,focusOffset:g}}function safariShadowSelectionRange(s,l){if(l.getComposedRanges){let f=l.getComposedRanges(s.root)[0];if(f)return rangeToSelectionRange(s,f)}let c;function d(f){f.preventDefault(),f.stopImmediatePropagation(),c=f.getTargetRanges()[0]}return s.dom.addEventListener("beforeinput",d,!0),document.execCommand("indent"),s.dom.removeEventListener("beforeinput",d,!0),c?rangeToSelectionRange(s,c):null}function blockParent(s,l){for(let c=l.parentNode;c&&c!=s.dom;c=c.parentNode){let d=s.docView.nearestDesc(c,!0);if(d&&d.node.isBlock)return c}return null}function parseBetween(s,l,c){let{node:d,fromOffset:f,toOffset:g,from:v,to:b}=s.docView.parseRange(l,c),$=s.domSelectionRange(),y,x=$.anchorNode;if(x&&s.dom.contains(x.nodeType==1?x:x.parentNode)&&(y=[{node:x,offset:$.anchorOffset}],selectionCollapsed($)||y.push({node:$.focusNode,offset:$.focusOffset})),chrome&&s.input.lastKeyCode===8)for(let Y=g;Y>f;Y--){let re=d.childNodes[Y-1],se=re.pmViewDesc;if(re.nodeName=="BR"&&!se){g=Y;break}if(!se||se.size)break}let C=s.state.doc,E=s.someProp("domParser")||DOMParser$1.fromSchema(s.state.schema),N=C.resolve(v),W=null,q=E.parse(d,{topNode:N.parent,topMatch:N.parent.contentMatchAt(N.index()),topOpen:!0,from:f,to:g,preserveWhitespace:N.parent.type.whitespace=="pre"?"full":!0,findPositions:y,ruleFromNode,context:N});if(y&&y[0].pos!=null){let Y=y[0].pos,re=y[1]&&y[1].pos;re==null&&(re=Y),W={anchor:Y+v,head:re+v}}return{doc:q,sel:W,from:v,to:b}}function ruleFromNode(s){let l=s.pmViewDesc;if(l)return l.parseRule();if(s.nodeName=="BR"&&s.parentNode){if(safari&&/^(ul|ol)$/i.test(s.parentNode.nodeName)){let c=document.createElement("div");return c.appendChild(document.createElement("li")),{skip:c}}else if(s.parentNode.lastChild==s||safari&&/^(tr|table)$/i.test(s.parentNode.nodeName))return{ignore:!0}}else if(s.nodeName=="IMG"&&s.getAttribute("mark-placeholder"))return{ignore:!0};return null}const isInline=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function readDOMChange(s,l,c,d,f){let g=s.input.compositionPendingChanges||(s.composing?s.input.compositionID:0);if(s.input.compositionPendingChanges=0,l<0){let Be=s.input.lastSelectionTime>Date.now()-50?s.input.lastSelectionOrigin:null,Ke=selectionFromDOM(s,Be);if(Ke&&!s.state.selection.eq(Ke)){if(chrome&&android&&s.input.lastKeyCode===13&&Date.now()-100<s.input.lastKeyCodeTime&&s.someProp("handleKeyDown",_y=>_y(s,keyEvent(13,"Enter"))))return;let Lr=s.state.tr.setSelection(Ke);Be=="pointer"?Lr.setMeta("pointer",!0):Be=="key"&&Lr.scrollIntoView(),g&&Lr.setMeta("composition",g),s.dispatch(Lr)}return}let v=s.state.doc.resolve(l),b=v.sharedDepth(c);l=v.before(b+1),c=s.state.doc.resolve(c).after(b+1);let $=s.state.selection,y=parseBetween(s,l,c),x=s.state.doc,C=x.slice(y.from,y.to),E,N;s.input.lastKeyCode===8&&Date.now()-100<s.input.lastKeyCodeTime?(E=s.state.selection.to,N="end"):(E=s.state.selection.from,N="start"),s.input.lastKeyCode=null;let W=findDiff(C.content,y.doc.content,y.from,E,N);if(W&&s.input.domChangeCount++,(ios&&s.input.lastIOSEnter>Date.now()-225||android)&&f.some(Be=>Be.nodeType==1&&!isInline.test(Be.nodeName))&&(!W||W.endA>=W.endB)&&s.someProp("handleKeyDown",Be=>Be(s,keyEvent(13,"Enter")))){s.input.lastIOSEnter=0;return}if(!W)if(d&&$ instanceof TextSelection&&!$.empty&&$.$head.sameParent($.$anchor)&&!s.composing&&!(y.sel&&y.sel.anchor!=y.sel.head))W={start:$.from,endA:$.to,endB:$.to};else{if(y.sel){let Be=resolveSelection(s,s.state.doc,y.sel);if(Be&&!Be.eq(s.state.selection)){let Ke=s.state.tr.setSelection(Be);g&&Ke.setMeta("composition",g),s.dispatch(Ke)}}return}s.state.selection.from<s.state.selection.to&&W.start==W.endB&&s.state.selection instanceof TextSelection&&(W.start>s.state.selection.from&&W.start<=s.state.selection.from+2&&s.state.selection.from>=y.from?W.start=s.state.selection.from:W.endA<s.state.selection.to&&W.endA>=s.state.selection.to-2&&s.state.selection.to<=y.to&&(W.endB+=s.state.selection.to-W.endA,W.endA=s.state.selection.to)),ie$2&&ie_version<=11&&W.endB==W.start+1&&W.endA==W.start&&W.start>y.from&&y.doc.textBetween(W.start-y.from-1,W.start-y.from+1)==" "&&(W.start--,W.endA--,W.endB--);let q=y.doc.resolveNoCache(W.start-y.from),Y=y.doc.resolveNoCache(W.endB-y.from),re=x.resolve(W.start),se=q.sameParent(Y)&&q.parent.inlineContent&&re.end()>=W.endA,de;if((ios&&s.input.lastIOSEnter>Date.now()-225&&(!se||f.some(Be=>Be.nodeName=="DIV"||Be.nodeName=="P"))||!se&&q.pos<y.doc.content.size&&!q.sameParent(Y)&&(de=Selection$2.findFrom(y.doc.resolve(q.pos+1),1,!0))&&de.head==Y.pos)&&s.someProp("handleKeyDown",Be=>Be(s,keyEvent(13,"Enter")))){s.input.lastIOSEnter=0;return}if(s.state.selection.anchor>W.start&&looksLikeBackspace(x,W.start,W.endA,q,Y)&&s.someProp("handleKeyDown",Be=>Be(s,keyEvent(8,"Backspace")))){android&&chrome&&s.domObserver.suppressSelectionUpdates();return}chrome&&android&&W.endB==W.start&&(s.input.lastAndroidDelete=Date.now()),android&&!se&&q.start()!=Y.start()&&Y.parentOffset==0&&q.depth==Y.depth&&y.sel&&y.sel.anchor==y.sel.head&&y.sel.head==W.endA&&(W.endB-=2,Y=y.doc.resolveNoCache(W.endB-y.from),setTimeout(()=>{s.someProp("handleKeyDown",function(Be){return Be(s,keyEvent(13,"Enter"))})},20));let he=W.start,ge=W.endA,Se,Ae,Re;if(se){if(q.pos==Y.pos)ie$2&&ie_version<=11&&q.parentOffset==0&&(s.domObserver.suppressSelectionUpdates(),setTimeout(()=>selectionToDOM(s),20)),Se=s.state.tr.delete(he,ge),Ae=x.resolve(W.start).marksAcross(x.resolve(W.endA));else if(W.endA==W.endB&&(Re=isMarkChange(q.parent.content.cut(q.parentOffset,Y.parentOffset),re.parent.content.cut(re.parentOffset,W.endA-re.start()))))Se=s.state.tr,Re.type=="add"?Se.addMark(he,ge,Re.mark):Se.removeMark(he,ge,Re.mark);else if(q.parent.child(q.index()).isText&&q.index()==Y.index()-(Y.textOffset?0:1)){let Be=q.parent.textBetween(q.parentOffset,Y.parentOffset);if(s.someProp("handleTextInput",Ke=>Ke(s,he,ge,Be)))return;Se=s.state.tr.insertText(Be,he,ge)}}if(Se||(Se=s.state.tr.replace(he,ge,y.doc.slice(W.start-y.from,W.endB-y.from))),y.sel){let Be=resolveSelection(s,Se.doc,y.sel);Be&&!(chrome&&android&&s.composing&&Be.empty&&(W.start!=W.endB||s.input.lastAndroidDelete<Date.now()-100)&&(Be.head==he||Be.head==Se.mapping.map(ge)-1)||ie$2&&Be.empty&&Be.head==he)&&Se.setSelection(Be)}Ae&&Se.ensureMarks(Ae),g&&Se.setMeta("composition",g),s.dispatch(Se.scrollIntoView())}function resolveSelection(s,l,c){return Math.max(c.anchor,c.head)>l.content.size?null:selectionBetween(s,l.resolve(c.anchor),l.resolve(c.head))}function isMarkChange(s,l){let c=s.firstChild.marks,d=l.firstChild.marks,f=c,g=d,v,b,$;for(let x=0;x<d.length;x++)f=d[x].removeFromSet(f);for(let x=0;x<c.length;x++)g=c[x].removeFromSet(g);if(f.length==1&&g.length==0)b=f[0],v="add",$=x=>x.mark(b.addToSet(x.marks));else if(f.length==0&&g.length==1)b=g[0],v="remove",$=x=>x.mark(b.removeFromSet(x.marks));else return null;let y=[];for(let x=0;x<l.childCount;x++)y.push($(l.child(x)));if(Fragment.from(y).eq(s))return{mark:b,type:v}}function looksLikeBackspace(s,l,c,d,f){if(c-l<=f.pos-d.pos||skipClosingAndOpening(d,!0,!1)<f.pos)return!1;let g=s.resolve(l);if(!d.parent.isTextblock){let b=g.nodeAfter;return b!=null&&c==l+b.nodeSize}if(g.parentOffset<g.parent.content.size||!g.parent.isTextblock)return!1;let v=s.resolve(skipClosingAndOpening(g,!0,!0));return!v.parent.isTextblock||v.pos>c||skipClosingAndOpening(v,!0,!1)<c?!1:d.parent.content.cut(d.parentOffset).eq(v.parent.content)}function skipClosingAndOpening(s,l,c){let d=s.depth,f=l?s.end():s.pos;for(;d>0&&(l||s.indexAfter(d)==s.node(d).childCount);)d--,f++,l=!1;if(c){let g=s.node(d).maybeChild(s.indexAfter(d));for(;g&&!g.isLeaf;)g=g.firstChild,f++}return f}function findDiff(s,l,c,d,f){let g=s.findDiffStart(l,c);if(g==null)return null;let{a:v,b}=s.findDiffEnd(l,c+s.size,c+l.size);if(f=="end"){let $=Math.max(0,g-Math.min(v,b));d-=v+$-g}if(v<g&&s.size<l.size){let $=d<=g&&d>=v?g-d:0;g-=$,g&&g<l.size&&isSurrogatePair(l.textBetween(g-1,g+1))&&(g+=$?1:-1),b=g+(b-v),v=g}else if(b<g){let $=d<=g&&d>=b?g-d:0;g-=$,g&&g<s.size&&isSurrogatePair(s.textBetween(g-1,g+1))&&(g+=$?1:-1),v=g+(v-b),b=g}return{start:g,endA:v,endB:b}}function isSurrogatePair(s){if(s.length!=2)return!1;let l=s.charCodeAt(0),c=s.charCodeAt(1);return l>=56320&&l<=57343&&c>=55296&&c<=56319}class EditorView{constructor(l,c){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new InputState,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=c,this.state=c.state,this.directPlugins=c.plugins||[],this.directPlugins.forEach(checkStateComponent),this.dispatch=this.dispatch.bind(this),this.dom=l&&l.mount||document.createElement("div"),l&&(l.appendChild?l.appendChild(this.dom):typeof l=="function"?l(this.dom):l.mount&&(this.mounted=!0)),this.editable=getEditable(this),updateCursorWrapper(this),this.nodeViews=buildNodeViews(this),this.docView=docViewDesc(this.state.doc,computeDocDeco(this),viewDecorations(this),this.dom,this),this.domObserver=new DOMObserver(this,(d,f,g,v)=>readDOMChange(this,d,f,g,v)),this.domObserver.start(),initInput(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let l=this._props;this._props={};for(let c in l)this._props[c]=l[c];this._props.state=this.state}return this._props}update(l){l.handleDOMEvents!=this._props.handleDOMEvents&&ensureListeners(this);let c=this._props;this._props=l,l.plugins&&(l.plugins.forEach(checkStateComponent),this.directPlugins=l.plugins),this.updateStateInner(l.state,c)}setProps(l){let c={};for(let d in this._props)c[d]=this._props[d];c.state=this.state;for(let d in l)c[d]=l[d];this.update(c)}updateState(l){this.updateStateInner(l,this._props)}updateStateInner(l,c){var d;let f=this.state,g=!1,v=!1;l.storedMarks&&this.composing&&(clearComposition(this),v=!0),this.state=l;let b=f.plugins!=l.plugins||this._props.plugins!=c.plugins;if(b||this._props.plugins!=c.plugins||this._props.nodeViews!=c.nodeViews){let N=buildNodeViews(this);changedNodeViews(N,this.nodeViews)&&(this.nodeViews=N,g=!0)}(b||c.handleDOMEvents!=this._props.handleDOMEvents)&&ensureListeners(this),this.editable=getEditable(this),updateCursorWrapper(this);let $=viewDecorations(this),y=computeDocDeco(this),x=f.plugins!=l.plugins&&!f.doc.eq(l.doc)?"reset":l.scrollToSelection>f.scrollToSelection?"to selection":"preserve",C=g||!this.docView.matchesNode(l.doc,y,$);(C||!l.selection.eq(f.selection))&&(v=!0);let E=x=="preserve"&&v&&this.dom.style.overflowAnchor==null&&storeScrollPos(this);if(v){this.domObserver.stop();let N=C&&(ie$2||chrome)&&!this.composing&&!f.selection.empty&&!l.selection.empty&&selectionContextChanged(f.selection,l.selection);if(C){let W=chrome?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=findCompositionNode(this)),(g||!this.docView.update(l.doc,y,$,this))&&(this.docView.updateOuterDeco(y),this.docView.destroy(),this.docView=docViewDesc(l.doc,y,$,this.dom,this)),W&&!this.trackWrites&&(N=!0)}N||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&anchorInRightPlace(this))?selectionToDOM(this,N):(syncNodeSelection(this,l.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(f),!((d=this.dragging)===null||d===void 0)&&d.node&&!f.doc.eq(l.doc)&&this.updateDraggedNode(this.dragging,f),x=="reset"?this.dom.scrollTop=0:x=="to selection"?this.scrollToSelection():E&&resetScrollPos(E)}scrollToSelection(){let l=this.domSelectionRange().focusNode;if(!this.someProp("handleScrollToSelection",c=>c(this)))if(this.state.selection instanceof NodeSelection){let c=this.docView.domAfterPos(this.state.selection.from);c.nodeType==1&&scrollRectIntoView(this,c.getBoundingClientRect(),l)}else scrollRectIntoView(this,this.coordsAtPos(this.state.selection.head,1),l)}destroyPluginViews(){let l;for(;l=this.pluginViews.pop();)l.destroy&&l.destroy()}updatePluginViews(l){if(!l||l.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let c=0;c<this.directPlugins.length;c++){let d=this.directPlugins[c];d.spec.view&&this.pluginViews.push(d.spec.view(this))}for(let c=0;c<this.state.plugins.length;c++){let d=this.state.plugins[c];d.spec.view&&this.pluginViews.push(d.spec.view(this))}}else for(let c=0;c<this.pluginViews.length;c++){let d=this.pluginViews[c];d.update&&d.update(this,l)}}updateDraggedNode(l,c){let d=l.node,f=-1;if(this.state.doc.nodeAt(d.from)==d.node)f=d.from;else{let g=d.from+(this.state.doc.content.size-c.doc.content.size);(g>0&&this.state.doc.nodeAt(g))==d.node&&(f=g)}this.dragging=new Dragging(l.slice,l.move,f<0?void 0:NodeSelection.create(this.state.doc,f))}someProp(l,c){let d=this._props&&this._props[l],f;if(d!=null&&(f=c?c(d):d))return f;for(let v=0;v<this.directPlugins.length;v++){let b=this.directPlugins[v].props[l];if(b!=null&&(f=c?c(b):b))return f}let g=this.state.plugins;if(g)for(let v=0;v<g.length;v++){let b=g[v].props[l];if(b!=null&&(f=c?c(b):b))return f}}hasFocus(){if(ie$2){let l=this.root.activeElement;if(l==this.dom)return!0;if(!l||!this.dom.contains(l))return!1;for(;l&&this.dom!=l&&this.dom.contains(l);){if(l.contentEditable=="false")return!1;l=l.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&focusPreventScroll(this.dom),selectionToDOM(this),this.domObserver.start()}get root(){let l=this._root;if(l==null){for(let c=this.dom.parentNode;c;c=c.parentNode)if(c.nodeType==9||c.nodeType==11&&c.host)return c.getSelection||(Object.getPrototypeOf(c).getSelection=()=>c.ownerDocument.getSelection()),this._root=c}return l||document}updateRoot(){this._root=null}posAtCoords(l){return posAtCoords(this,l)}coordsAtPos(l,c=1){return coordsAtPos(this,l,c)}domAtPos(l,c=0){return this.docView.domFromPos(l,c)}nodeDOM(l){let c=this.docView.descAt(l);return c?c.nodeDOM:null}posAtDOM(l,c,d=-1){let f=this.docView.posFromDOM(l,c,d);if(f==null)throw new RangeError("DOM position not inside the editor");return f}endOfTextblock(l,c){return endOfTextblock(this,c||this.state,l)}pasteHTML(l,c){return doPaste(this,"",l,!1,c||new ClipboardEvent("paste"))}pasteText(l,c){return doPaste(this,l,null,!0,c||new ClipboardEvent("paste"))}destroy(){this.docView&&(destroyInput(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],viewDecorations(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,clearReusedRange())}get isDestroyed(){return this.docView==null}dispatchEvent(l){return dispatchEvent$1(this,l)}dispatch(l){let c=this._props.dispatchTransaction;c?c.call(this,l):this.updateState(this.state.apply(l))}domSelectionRange(){let l=this.domSelection();return l?safari&&this.root.nodeType===11&&deepActiveElement(this.dom.ownerDocument)==this.dom&&safariShadowSelectionRange(this,l)||l:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}function computeDocDeco(s){let l=Object.create(null);return l.class="ProseMirror",l.contenteditable=String(s.editable),s.someProp("attributes",c=>{if(typeof c=="function"&&(c=c(s.state)),c)for(let d in c)d=="class"?l.class+=" "+c[d]:d=="style"?l.style=(l.style?l.style+";":"")+c[d]:!l[d]&&d!="contenteditable"&&d!="nodeName"&&(l[d]=String(c[d]))}),l.translate||(l.translate="no"),[Decoration.node(0,s.state.doc.content.size,l)]}function updateCursorWrapper(s){if(s.markCursor){let l=document.createElement("img");l.className="ProseMirror-separator",l.setAttribute("mark-placeholder","true"),l.setAttribute("alt",""),s.cursorWrapper={dom:l,deco:Decoration.widget(s.state.selection.from,l,{raw:!0,marks:s.markCursor})}}else s.cursorWrapper=null}function getEditable(s){return!s.someProp("editable",l=>l(s.state)===!1)}function selectionContextChanged(s,l){let c=Math.min(s.$anchor.sharedDepth(s.head),l.$anchor.sharedDepth(l.head));return s.$anchor.start(c)!=l.$anchor.start(c)}function buildNodeViews(s){let l=Object.create(null);function c(d){for(let f in d)Object.prototype.hasOwnProperty.call(l,f)||(l[f]=d[f])}return s.someProp("nodeViews",c),s.someProp("markViews",c),l}function changedNodeViews(s,l){let c=0,d=0;for(let f in s){if(s[f]!=l[f])return!0;c++}for(let f in l)d++;return c!=d}function checkStateComponent(s){if(s.spec.state||s.spec.filterTransaction||s.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var base={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},shift={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},mac$1=typeof navigator<"u"&&/Mac/.test(navigator.platform),ie$1=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var i$3=0;i$3<10;i$3++)base[48+i$3]=base[96+i$3]=String(i$3);for(var i$3=1;i$3<=24;i$3++)base[i$3+111]="F"+i$3;for(var i$3=65;i$3<=90;i$3++)base[i$3]=String.fromCharCode(i$3+32),shift[i$3]=String.fromCharCode(i$3);for(var code in base)shift.hasOwnProperty(code)||(shift[code]=base[code]);function keyName(s){var l=mac$1&&s.metaKey&&s.shiftKey&&!s.ctrlKey&&!s.altKey||ie$1&&s.shiftKey&&s.key&&s.key.length==1||s.key=="Unidentified",c=!l&&s.key||(s.shiftKey?shift:base)[s.keyCode]||s.key||"Unidentified";return c=="Esc"&&(c="Escape"),c=="Del"&&(c="Delete"),c=="Left"&&(c="ArrowLeft"),c=="Up"&&(c="ArrowUp"),c=="Right"&&(c="ArrowRight"),c=="Down"&&(c="ArrowDown"),c}const mac=typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):!1;function normalizeKeyName$1(s){let l=s.split(/-(?!$)/),c=l[l.length-1];c=="Space"&&(c=" ");let d,f,g,v;for(let b=0;b<l.length-1;b++){let $=l[b];if(/^(cmd|meta|m)$/i.test($))v=!0;else if(/^a(lt)?$/i.test($))d=!0;else if(/^(c|ctrl|control)$/i.test($))f=!0;else if(/^s(hift)?$/i.test($))g=!0;else if(/^mod$/i.test($))mac?v=!0:f=!0;else throw new Error("Unrecognized modifier name: "+$)}return d&&(c="Alt-"+c),f&&(c="Ctrl-"+c),v&&(c="Meta-"+c),g&&(c="Shift-"+c),c}function normalize(s){let l=Object.create(null);for(let c in s)l[normalizeKeyName$1(c)]=s[c];return l}function modifiers(s,l,c=!0){return l.altKey&&(s="Alt-"+s),l.ctrlKey&&(s="Ctrl-"+s),l.metaKey&&(s="Meta-"+s),c&&l.shiftKey&&(s="Shift-"+s),s}function keymap(s){return new Plugin({props:{handleKeyDown:keydownHandler(s)}})}function keydownHandler(s){let l=normalize(s);return function(c,d){let f=keyName(d),g,v=l[modifiers(f,d)];if(v&&v(c.state,c.dispatch,c))return!0;if(f.length==1&&f!=" "){if(d.shiftKey){let b=l[modifiers(f,d,!1)];if(b&&b(c.state,c.dispatch,c))return!0}if((d.shiftKey||d.altKey||d.metaKey||f.charCodeAt(0)>127)&&(g=base[d.keyCode])&&g!=f){let b=l[modifiers(g,d)];if(b&&b(c.state,c.dispatch,c))return!0}}return!1}}const deleteSelection$1=(s,l)=>s.selection.empty?!1:(l&&l(s.tr.deleteSelection().scrollIntoView()),!0);function atBlockStart(s,l){let{$cursor:c}=s.selection;return!c||(l?!l.endOfTextblock("backward",s):c.parentOffset>0)?null:c}const joinBackward$1=(s,l,c)=>{let d=atBlockStart(s,c);if(!d)return!1;let f=findCutBefore(d);if(!f){let v=d.blockRange(),b=v&&liftTarget(v);return b==null?!1:(l&&l(s.tr.lift(v,b).scrollIntoView()),!0)}let g=f.nodeBefore;if(deleteBarrier(s,f,l,-1))return!0;if(d.parent.content.size==0&&(textblockAt(g,"end")||NodeSelection.isSelectable(g)))for(let v=d.depth;;v--){let b=replaceStep(s.doc,d.before(v),d.after(v),Slice.empty);if(b&&b.slice.size<b.to-b.from){if(l){let $=s.tr.step(b);$.setSelection(textblockAt(g,"end")?Selection$2.findFrom($.doc.resolve($.mapping.map(f.pos,-1)),-1):NodeSelection.create($.doc,f.pos-g.nodeSize)),l($.scrollIntoView())}return!0}if(v==1||d.node(v-1).childCount>1)break}return g.isAtom&&f.depth==d.depth-1?(l&&l(s.tr.delete(f.pos-g.nodeSize,f.pos).scrollIntoView()),!0):!1},joinTextblockBackward$1=(s,l,c)=>{let d=atBlockStart(s,c);if(!d)return!1;let f=findCutBefore(d);return f?joinTextblocksAround(s,f,l):!1},joinTextblockForward$1=(s,l,c)=>{let d=atBlockEnd(s,c);if(!d)return!1;let f=findCutAfter(d);return f?joinTextblocksAround(s,f,l):!1};function joinTextblocksAround(s,l,c){let d=l.nodeBefore,f=d,g=l.pos-1;for(;!f.isTextblock;g--){if(f.type.spec.isolating)return!1;let x=f.lastChild;if(!x)return!1;f=x}let v=l.nodeAfter,b=v,$=l.pos+1;for(;!b.isTextblock;$++){if(b.type.spec.isolating)return!1;let x=b.firstChild;if(!x)return!1;b=x}let y=replaceStep(s.doc,g,$,Slice.empty);if(!y||y.from!=g||y instanceof ReplaceStep&&y.slice.size>=$-g)return!1;if(c){let x=s.tr.step(y);x.setSelection(TextSelection.create(x.doc,g)),c(x.scrollIntoView())}return!0}function textblockAt(s,l,c=!1){for(let d=s;d;d=l=="start"?d.firstChild:d.lastChild){if(d.isTextblock)return!0;if(c&&d.childCount!=1)return!1}return!1}const selectNodeBackward$1=(s,l,c)=>{let{$head:d,empty:f}=s.selection,g=d;if(!f)return!1;if(d.parent.isTextblock){if(c?!c.endOfTextblock("backward",s):d.parentOffset>0)return!1;g=findCutBefore(d)}let v=g&&g.nodeBefore;return!v||!NodeSelection.isSelectable(v)?!1:(l&&l(s.tr.setSelection(NodeSelection.create(s.doc,g.pos-v.nodeSize)).scrollIntoView()),!0)};function findCutBefore(s){if(!s.parent.type.spec.isolating)for(let l=s.depth-1;l>=0;l--){if(s.index(l)>0)return s.doc.resolve(s.before(l+1));if(s.node(l).type.spec.isolating)break}return null}function atBlockEnd(s,l){let{$cursor:c}=s.selection;return!c||(l?!l.endOfTextblock("forward",s):c.parentOffset<c.parent.content.size)?null:c}const joinForward$1=(s,l,c)=>{let d=atBlockEnd(s,c);if(!d)return!1;let f=findCutAfter(d);if(!f)return!1;let g=f.nodeAfter;if(deleteBarrier(s,f,l,1))return!0;if(d.parent.content.size==0&&(textblockAt(g,"start")||NodeSelection.isSelectable(g))){let v=replaceStep(s.doc,d.before(),d.after(),Slice.empty);if(v&&v.slice.size<v.to-v.from){if(l){let b=s.tr.step(v);b.setSelection(textblockAt(g,"start")?Selection$2.findFrom(b.doc.resolve(b.mapping.map(f.pos)),1):NodeSelection.create(b.doc,b.mapping.map(f.pos))),l(b.scrollIntoView())}return!0}}return g.isAtom&&f.depth==d.depth-1?(l&&l(s.tr.delete(f.pos,f.pos+g.nodeSize).scrollIntoView()),!0):!1},selectNodeForward$1=(s,l,c)=>{let{$head:d,empty:f}=s.selection,g=d;if(!f)return!1;if(d.parent.isTextblock){if(c?!c.endOfTextblock("forward",s):d.parentOffset<d.parent.content.size)return!1;g=findCutAfter(d)}let v=g&&g.nodeAfter;return!v||!NodeSelection.isSelectable(v)?!1:(l&&l(s.tr.setSelection(NodeSelection.create(s.doc,g.pos)).scrollIntoView()),!0)};function findCutAfter(s){if(!s.parent.type.spec.isolating)for(let l=s.depth-1;l>=0;l--){let c=s.node(l);if(s.index(l)+1<c.childCount)return s.doc.resolve(s.after(l+1));if(c.type.spec.isolating)break}return null}const joinUp$1=(s,l)=>{let c=s.selection,d=c instanceof NodeSelection,f;if(d){if(c.node.isTextblock||!canJoin(s.doc,c.from))return!1;f=c.from}else if(f=joinPoint(s.doc,c.from,-1),f==null)return!1;if(l){let g=s.tr.join(f);d&&g.setSelection(NodeSelection.create(g.doc,f-s.doc.resolve(f).nodeBefore.nodeSize)),l(g.scrollIntoView())}return!0},joinDown$1=(s,l)=>{let c=s.selection,d;if(c instanceof NodeSelection){if(c.node.isTextblock||!canJoin(s.doc,c.to))return!1;d=c.to}else if(d=joinPoint(s.doc,c.to,1),d==null)return!1;return l&&l(s.tr.join(d).scrollIntoView()),!0},lift$1=(s,l)=>{let{$from:c,$to:d}=s.selection,f=c.blockRange(d),g=f&&liftTarget(f);return g==null?!1:(l&&l(s.tr.lift(f,g).scrollIntoView()),!0)},newlineInCode$1=(s,l)=>{let{$head:c,$anchor:d}=s.selection;return!c.parent.type.spec.code||!c.sameParent(d)?!1:(l&&l(s.tr.insertText(`
`).scrollIntoView()),!0)};function defaultBlockAt$1(s){for(let l=0;l<s.edgeCount;l++){let{type:c}=s.edge(l);if(c.isTextblock&&!c.hasRequiredAttrs())return c}return null}const exitCode$1=(s,l)=>{let{$head:c,$anchor:d}=s.selection;if(!c.parent.type.spec.code||!c.sameParent(d))return!1;let f=c.node(-1),g=c.indexAfter(-1),v=defaultBlockAt$1(f.contentMatchAt(g));if(!v||!f.canReplaceWith(g,g,v))return!1;if(l){let b=c.after(),$=s.tr.replaceWith(b,b,v.createAndFill());$.setSelection(Selection$2.near($.doc.resolve(b),1)),l($.scrollIntoView())}return!0},createParagraphNear$1=(s,l)=>{let c=s.selection,{$from:d,$to:f}=c;if(c instanceof AllSelection||d.parent.inlineContent||f.parent.inlineContent)return!1;let g=defaultBlockAt$1(f.parent.contentMatchAt(f.indexAfter()));if(!g||!g.isTextblock)return!1;if(l){let v=(!d.parentOffset&&f.index()<f.parent.childCount?d:f).pos,b=s.tr.insert(v,g.createAndFill());b.setSelection(TextSelection.create(b.doc,v+1)),l(b.scrollIntoView())}return!0},liftEmptyBlock$1=(s,l)=>{let{$cursor:c}=s.selection;if(!c||c.parent.content.size)return!1;if(c.depth>1&&c.after()!=c.end(-1)){let g=c.before();if(canSplit(s.doc,g))return l&&l(s.tr.split(g).scrollIntoView()),!0}let d=c.blockRange(),f=d&&liftTarget(d);return f==null?!1:(l&&l(s.tr.lift(d,f).scrollIntoView()),!0)},selectParentNode$1=(s,l)=>{let{$from:c,to:d}=s.selection,f,g=c.sharedDepth(d);return g==0?!1:(f=c.before(g),l&&l(s.tr.setSelection(NodeSelection.create(s.doc,f))),!0)};function joinMaybeClear(s,l,c){let d=l.nodeBefore,f=l.nodeAfter,g=l.index();return!d||!f||!d.type.compatibleContent(f.type)?!1:!d.content.size&&l.parent.canReplace(g-1,g)?(c&&c(s.tr.delete(l.pos-d.nodeSize,l.pos).scrollIntoView()),!0):!l.parent.canReplace(g,g+1)||!(f.isTextblock||canJoin(s.doc,l.pos))?!1:(c&&c(s.tr.clearIncompatible(l.pos,d.type,d.contentMatchAt(d.childCount)).join(l.pos).scrollIntoView()),!0)}function deleteBarrier(s,l,c,d){let f=l.nodeBefore,g=l.nodeAfter,v,b,$=f.type.spec.isolating||g.type.spec.isolating;if(!$&&joinMaybeClear(s,l,c))return!0;let y=!$&&l.parent.canReplace(l.index(),l.index()+1);if(y&&(v=(b=f.contentMatchAt(f.childCount)).findWrapping(g.type))&&b.matchType(v[0]||g.type).validEnd){if(c){let N=l.pos+g.nodeSize,W=Fragment.empty;for(let re=v.length-1;re>=0;re--)W=Fragment.from(v[re].create(null,W));W=Fragment.from(f.copy(W));let q=s.tr.step(new ReplaceAroundStep(l.pos-1,N,l.pos,N,new Slice(W,1,0),v.length,!0)),Y=N+2*v.length;canJoin(q.doc,Y)&&q.join(Y),c(q.scrollIntoView())}return!0}let x=g.type.spec.isolating||d>0&&$?null:Selection$2.findFrom(l,1),C=x&&x.$from.blockRange(x.$to),E=C&&liftTarget(C);if(E!=null&&E>=l.depth)return c&&c(s.tr.lift(C,E).scrollIntoView()),!0;if(y&&textblockAt(g,"start",!0)&&textblockAt(f,"end")){let N=f,W=[];for(;W.push(N),!N.isTextblock;)N=N.lastChild;let q=g,Y=1;for(;!q.isTextblock;q=q.firstChild)Y++;if(N.canReplace(N.childCount,N.childCount,q.content)){if(c){let re=Fragment.empty;for(let de=W.length-1;de>=0;de--)re=Fragment.from(W[de].copy(re));let se=s.tr.step(new ReplaceAroundStep(l.pos-W.length,l.pos+g.nodeSize,l.pos+Y,l.pos+g.nodeSize-Y,new Slice(re,W.length,0),0,!0));c(se.scrollIntoView())}return!0}}return!1}function selectTextblockSide(s){return function(l,c){let d=l.selection,f=s<0?d.$from:d.$to,g=f.depth;for(;f.node(g).isInline;){if(!g)return!1;g--}return f.node(g).isTextblock?(c&&c(l.tr.setSelection(TextSelection.create(l.doc,s<0?f.start(g):f.end(g)))),!0):!1}}const selectTextblockStart$1=selectTextblockSide(-1),selectTextblockEnd$1=selectTextblockSide(1);function wrapIn$1(s,l=null){return function(c,d){let{$from:f,$to:g}=c.selection,v=f.blockRange(g),b=v&&findWrapping(v,s,l);return b?(d&&d(c.tr.wrap(v,b).scrollIntoView()),!0):!1}}function setBlockType(s,l=null){return function(c,d){let f=!1;for(let g=0;g<c.selection.ranges.length&&!f;g++){let{$from:{pos:v},$to:{pos:b}}=c.selection.ranges[g];c.doc.nodesBetween(v,b,($,y)=>{if(f)return!1;if(!(!$.isTextblock||$.hasMarkup(s,l)))if($.type==s)f=!0;else{let x=c.doc.resolve(y),C=x.index();f=x.parent.canReplaceWith(C,C+1,s)}})}if(!f)return!1;if(d){let g=c.tr;for(let v=0;v<c.selection.ranges.length;v++){let{$from:{pos:b},$to:{pos:$}}=c.selection.ranges[v];g.setBlockType(b,$,s,l)}d(g.scrollIntoView())}return!0}}typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function wrapInList$1(s,l=null){return function(c,d){let{$from:f,$to:g}=c.selection,v=f.blockRange(g),b=!1,$=v;if(!v)return!1;if(v.depth>=2&&f.node(v.depth-1).type.compatibleContent(s)&&v.startIndex==0){if(f.index(v.depth-1)==0)return!1;let x=c.doc.resolve(v.start-2);$=new NodeRange(x,x,v.depth),v.endIndex<v.parent.childCount&&(v=new NodeRange(f,c.doc.resolve(g.end(v.depth)),v.depth)),b=!0}let y=findWrapping($,s,l,v);return y?(d&&d(doWrapInList(c.tr,v,y,b,s).scrollIntoView()),!0):!1}}function doWrapInList(s,l,c,d,f){let g=Fragment.empty;for(let x=c.length-1;x>=0;x--)g=Fragment.from(c[x].type.create(c[x].attrs,g));s.step(new ReplaceAroundStep(l.start-(d?2:0),l.end,l.start,l.end,new Slice(g,0,0),c.length,!0));let v=0;for(let x=0;x<c.length;x++)c[x].type==f&&(v=x+1);let b=c.length-v,$=l.start+c.length-(d?2:0),y=l.parent;for(let x=l.startIndex,C=l.endIndex,E=!0;x<C;x++,E=!1)!E&&canSplit(s.doc,$,b)&&(s.split($,b),$+=2*b),$+=y.child(x).nodeSize;return s}function liftListItem$1(s){return function(l,c){let{$from:d,$to:f}=l.selection,g=d.blockRange(f,v=>v.childCount>0&&v.firstChild.type==s);return g?c?d.node(g.depth-1).type==s?liftToOuterList(l,c,s,g):liftOutOfList(l,c,g):!0:!1}}function liftToOuterList(s,l,c,d){let f=s.tr,g=d.end,v=d.$to.end(d.depth);g<v&&(f.step(new ReplaceAroundStep(g-1,v,g,v,new Slice(Fragment.from(c.create(null,d.parent.copy())),1,0),1,!0)),d=new NodeRange(f.doc.resolve(d.$from.pos),f.doc.resolve(v),d.depth));const b=liftTarget(d);if(b==null)return!1;f.lift(d,b);let $=f.mapping.map(g,-1)-1;return canJoin(f.doc,$)&&f.join($),l(f.scrollIntoView()),!0}function liftOutOfList(s,l,c){let d=s.tr,f=c.parent;for(let N=c.end,W=c.endIndex-1,q=c.startIndex;W>q;W--)N-=f.child(W).nodeSize,d.delete(N-1,N+1);let g=d.doc.resolve(c.start),v=g.nodeAfter;if(d.mapping.map(c.end)!=c.start+g.nodeAfter.nodeSize)return!1;let b=c.startIndex==0,$=c.endIndex==f.childCount,y=g.node(-1),x=g.index(-1);if(!y.canReplace(x+(b?0:1),x+1,v.content.append($?Fragment.empty:Fragment.from(f))))return!1;let C=g.pos,E=C+v.nodeSize;return d.step(new ReplaceAroundStep(C-(b?1:0),E+($?1:0),C+1,E-1,new Slice((b?Fragment.empty:Fragment.from(f.copy(Fragment.empty))).append($?Fragment.empty:Fragment.from(f.copy(Fragment.empty))),b?0:1,$?0:1),b?0:1)),l(d.scrollIntoView()),!0}function sinkListItem$1(s){return function(l,c){let{$from:d,$to:f}=l.selection,g=d.blockRange(f,y=>y.childCount>0&&y.firstChild.type==s);if(!g)return!1;let v=g.startIndex;if(v==0)return!1;let b=g.parent,$=b.child(v-1);if($.type!=s)return!1;if(c){let y=$.lastChild&&$.lastChild.type==b.type,x=Fragment.from(y?s.create():null),C=new Slice(Fragment.from(s.create(null,Fragment.from(b.type.create(null,x)))),y?3:1,0),E=g.start,N=g.end;c(l.tr.step(new ReplaceAroundStep(E-(y?3:1),N,E,N,C,1,!0)).scrollIntoView())}return!0}}function createChainableState(s){const{state:l,transaction:c}=s;let{selection:d}=c,{doc:f}=c,{storedMarks:g}=c;return{...l,apply:l.apply.bind(l),applyTransaction:l.applyTransaction.bind(l),plugins:l.plugins,schema:l.schema,reconfigure:l.reconfigure.bind(l),toJSON:l.toJSON.bind(l),get storedMarks(){return g},get selection(){return d},get doc(){return f},get tr(){return d=c.selection,f=c.doc,g=c.storedMarks,c}}}class CommandManager{constructor(l){this.editor=l.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=l.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:l,editor:c,state:d}=this,{view:f}=c,{tr:g}=d,v=this.buildProps(g);return Object.fromEntries(Object.entries(l).map(([b,$])=>[b,(...x)=>{const C=$(...x)(v);return!g.getMeta("preventDispatch")&&!this.hasCustomState&&f.dispatch(g),C}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(l,c=!0){const{rawCommands:d,editor:f,state:g}=this,{view:v}=f,b=[],$=!!l,y=l||g.tr,x=()=>(!$&&c&&!y.getMeta("preventDispatch")&&!this.hasCustomState&&v.dispatch(y),b.every(E=>E===!0)),C={...Object.fromEntries(Object.entries(d).map(([E,N])=>[E,(...q)=>{const Y=this.buildProps(y,c),re=N(...q)(Y);return b.push(re),C}])),run:x};return C}createCan(l){const{rawCommands:c,state:d}=this,f=!1,g=l||d.tr,v=this.buildProps(g,f);return{...Object.fromEntries(Object.entries(c).map(([$,y])=>[$,(...x)=>y(...x)({...v,dispatch:void 0})])),chain:()=>this.createChain(g,f)}}buildProps(l,c=!0){const{rawCommands:d,editor:f,state:g}=this,{view:v}=f,b={tr:l,editor:f,view:v,state:createChainableState({state:g,transaction:l}),dispatch:c?()=>{}:void 0,chain:()=>this.createChain(l,c),can:()=>this.createCan(l),get commands(){return Object.fromEntries(Object.entries(d).map(([$,y])=>[$,(...x)=>y(...x)(b)]))}};return b}}class EventEmitter{constructor(){this.callbacks={}}on(l,c){return this.callbacks[l]||(this.callbacks[l]=[]),this.callbacks[l].push(c),this}emit(l,...c){const d=this.callbacks[l];return d&&d.forEach(f=>f.apply(this,c)),this}off(l,c){const d=this.callbacks[l];return d&&(c?this.callbacks[l]=d.filter(f=>f!==c):delete this.callbacks[l]),this}removeAllListeners(){this.callbacks={}}}function getExtensionField(s,l,c){return s.config[l]===void 0&&s.parent?getExtensionField(s.parent,l,c):typeof s.config[l]=="function"?s.config[l].bind({...c,parent:s.parent?getExtensionField(s.parent,l,c):null}):s.config[l]}function splitExtensions(s){const l=s.filter(f=>f.type==="extension"),c=s.filter(f=>f.type==="node"),d=s.filter(f=>f.type==="mark");return{baseExtensions:l,nodeExtensions:c,markExtensions:d}}function getAttributesFromExtensions(s){const l=[],{nodeExtensions:c,markExtensions:d}=splitExtensions(s),f=[...c,...d],g={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return s.forEach(v=>{const b={name:v.name,options:v.options,storage:v.storage,extensions:f},$=getExtensionField(v,"addGlobalAttributes",b);if(!$)return;$().forEach(x=>{x.types.forEach(C=>{Object.entries(x.attributes).forEach(([E,N])=>{l.push({type:C,name:E,attribute:{...g,...N}})})})})}),f.forEach(v=>{const b={name:v.name,options:v.options,storage:v.storage},$=getExtensionField(v,"addAttributes",b);if(!$)return;const y=$();Object.entries(y).forEach(([x,C])=>{const E={...g,...C};typeof(E==null?void 0:E.default)=="function"&&(E.default=E.default()),E!=null&&E.isRequired&&(E==null?void 0:E.default)===void 0&&delete E.default,l.push({type:v.name,name:x,attribute:E})})}),l}function getNodeType(s,l){if(typeof s=="string"){if(!l.nodes[s])throw Error(`There is no node type named '${s}'. Maybe you forgot to add the extension?`);return l.nodes[s]}return s}function mergeAttributes(...s){return s.filter(l=>!!l).reduce((l,c)=>{const d={...l};return Object.entries(c).forEach(([f,g])=>{if(!d[f]){d[f]=g;return}if(f==="class"){const b=g?g.split(" "):[],$=d[f]?d[f].split(" "):[],y=b.filter(x=>!$.includes(x));d[f]=[...$,...y].join(" ")}else if(f==="style"){const b=g?g.split(";").map(x=>x.trim()).filter(Boolean):[],$=d[f]?d[f].split(";").map(x=>x.trim()).filter(Boolean):[],y=new Map;$.forEach(x=>{const[C,E]=x.split(":").map(N=>N.trim());y.set(C,E)}),b.forEach(x=>{const[C,E]=x.split(":").map(N=>N.trim());y.set(C,E)}),d[f]=Array.from(y.entries()).map(([x,C])=>`${x}: ${C}`).join("; ")}else d[f]=g}),d},{})}function getRenderedAttributes(s,l){return l.filter(c=>c.type===s.type.name).filter(c=>c.attribute.rendered).map(c=>c.attribute.renderHTML?c.attribute.renderHTML(s.attrs)||{}:{[c.name]:s.attrs[c.name]}).reduce((c,d)=>mergeAttributes(c,d),{})}function isFunction$3(s){return typeof s=="function"}function callOrReturn(s,l=void 0,...c){return isFunction$3(s)?l?s.bind(l)(...c):s(...c):s}function isEmptyObject(s={}){return Object.keys(s).length===0&&s.constructor===Object}function fromString(s){return typeof s!="string"?s:s.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(s):s==="true"?!0:s==="false"?!1:s}function injectExtensionAttributesToParseRule(s,l){return"style"in s?s:{...s,getAttrs:c=>{const d=s.getAttrs?s.getAttrs(c):s.attrs;if(d===!1)return!1;const f=l.reduce((g,v)=>{const b=v.attribute.parseHTML?v.attribute.parseHTML(c):fromString(c.getAttribute(v.name));return b==null?g:{...g,[v.name]:b}},{});return{...d,...f}}}}function cleanUpSchemaItem(s){return Object.fromEntries(Object.entries(s).filter(([l,c])=>l==="attrs"&&isEmptyObject(c)?!1:c!=null))}function getSchemaByResolvedExtensions(s,l){var c;const d=getAttributesFromExtensions(s),{nodeExtensions:f,markExtensions:g}=splitExtensions(s),v=(c=f.find(y=>getExtensionField(y,"topNode")))===null||c===void 0?void 0:c.name,b=Object.fromEntries(f.map(y=>{const x=d.filter(re=>re.type===y.name),C={name:y.name,options:y.options,storage:y.storage,editor:l},E=s.reduce((re,se)=>{const de=getExtensionField(se,"extendNodeSchema",C);return{...re,...de?de(y):{}}},{}),N=cleanUpSchemaItem({...E,content:callOrReturn(getExtensionField(y,"content",C)),marks:callOrReturn(getExtensionField(y,"marks",C)),group:callOrReturn(getExtensionField(y,"group",C)),inline:callOrReturn(getExtensionField(y,"inline",C)),atom:callOrReturn(getExtensionField(y,"atom",C)),selectable:callOrReturn(getExtensionField(y,"selectable",C)),draggable:callOrReturn(getExtensionField(y,"draggable",C)),code:callOrReturn(getExtensionField(y,"code",C)),whitespace:callOrReturn(getExtensionField(y,"whitespace",C)),defining:callOrReturn(getExtensionField(y,"defining",C)),isolating:callOrReturn(getExtensionField(y,"isolating",C)),attrs:Object.fromEntries(x.map(re=>{var se;return[re.name,{default:(se=re==null?void 0:re.attribute)===null||se===void 0?void 0:se.default}]}))}),W=callOrReturn(getExtensionField(y,"parseHTML",C));W&&(N.parseDOM=W.map(re=>injectExtensionAttributesToParseRule(re,x)));const q=getExtensionField(y,"renderHTML",C);q&&(N.toDOM=re=>q({node:re,HTMLAttributes:getRenderedAttributes(re,x)}));const Y=getExtensionField(y,"renderText",C);return Y&&(N.toText=Y),[y.name,N]})),$=Object.fromEntries(g.map(y=>{const x=d.filter(Y=>Y.type===y.name),C={name:y.name,options:y.options,storage:y.storage,editor:l},E=s.reduce((Y,re)=>{const se=getExtensionField(re,"extendMarkSchema",C);return{...Y,...se?se(y):{}}},{}),N=cleanUpSchemaItem({...E,inclusive:callOrReturn(getExtensionField(y,"inclusive",C)),excludes:callOrReturn(getExtensionField(y,"excludes",C)),group:callOrReturn(getExtensionField(y,"group",C)),spanning:callOrReturn(getExtensionField(y,"spanning",C)),code:callOrReturn(getExtensionField(y,"code",C)),attrs:Object.fromEntries(x.map(Y=>{var re;return[Y.name,{default:(re=Y==null?void 0:Y.attribute)===null||re===void 0?void 0:re.default}]}))}),W=callOrReturn(getExtensionField(y,"parseHTML",C));W&&(N.parseDOM=W.map(Y=>injectExtensionAttributesToParseRule(Y,x)));const q=getExtensionField(y,"renderHTML",C);return q&&(N.toDOM=Y=>q({mark:Y,HTMLAttributes:getRenderedAttributes(Y,x)})),[y.name,N]}));return new Schema({topNode:v,nodes:b,marks:$})}function getSchemaTypeByName(s,l){return l.nodes[s]||l.marks[s]||null}function isExtensionRulesEnabled(s,l){return Array.isArray(l)?l.some(c=>(typeof c=="string"?c:c.name)===s.name):l}const getTextContentFromNodes=(s,l=500)=>{let c="";const d=s.parentOffset;return s.parent.nodesBetween(Math.max(0,d-l),d,(f,g,v,b)=>{var $,y;const x=((y=($=f.type.spec).toText)===null||y===void 0?void 0:y.call($,{node:f,pos:g,parent:v,index:b}))||f.textContent||"%leaf%";c+=f.isAtom&&!f.isText?x:x.slice(0,Math.max(0,d-g))}),c};function isRegExp(s){return Object.prototype.toString.call(s)==="[object RegExp]"}class InputRule{constructor(l){this.find=l.find,this.handler=l.handler}}const inputRuleMatcherHandler=(s,l)=>{if(isRegExp(l))return l.exec(s);const c=l(s);if(!c)return null;const d=[c.text];return d.index=c.index,d.input=s,d.data=c.data,c.replaceWith&&(c.text.includes(c.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),d.push(c.replaceWith)),d};function run$1$1(s){var l;const{editor:c,from:d,to:f,text:g,rules:v,plugin:b}=s,{view:$}=c;if($.composing)return!1;const y=$.state.doc.resolve(d);if(y.parent.type.spec.code||!((l=y.nodeBefore||y.nodeAfter)===null||l===void 0)&&l.marks.find(E=>E.type.spec.code))return!1;let x=!1;const C=getTextContentFromNodes(y)+g;return v.forEach(E=>{if(x)return;const N=inputRuleMatcherHandler(C,E.find);if(!N)return;const W=$.state.tr,q=createChainableState({state:$.state,transaction:W}),Y={from:d-(N[0].length-g.length),to:f},{commands:re,chain:se,can:de}=new CommandManager({editor:c,state:q});E.handler({state:q,range:Y,match:N,commands:re,chain:se,can:de})===null||!W.steps.length||(W.setMeta(b,{transform:W,from:d,to:f,text:g}),$.dispatch(W),x=!0)}),x}function inputRulesPlugin(s){const{editor:l,rules:c}=s,d=new Plugin({state:{init(){return null},apply(f,g){const v=f.getMeta(d);if(v)return v;const b=f.getMeta("applyInputRules");return!!b&&setTimeout(()=>{const{from:y,text:x}=b,C=y+x.length;run$1$1({editor:l,from:y,to:C,text:x,rules:c,plugin:d})}),f.selectionSet||f.docChanged?null:g}},props:{handleTextInput(f,g,v,b){return run$1$1({editor:l,from:g,to:v,text:b,rules:c,plugin:d})},handleDOMEvents:{compositionend:f=>(setTimeout(()=>{const{$cursor:g}=f.state.selection;g&&run$1$1({editor:l,from:g.pos,to:g.pos,text:"",rules:c,plugin:d})}),!1)},handleKeyDown(f,g){if(g.key!=="Enter")return!1;const{$cursor:v}=f.state.selection;return v?run$1$1({editor:l,from:v.pos,to:v.pos,text:`
`,rules:c,plugin:d}):!1}},isInputRules:!0});return d}function getType(s){return Object.prototype.toString.call(s).slice(8,-1)}function isPlainObject$1(s){return getType(s)!=="Object"?!1:s.constructor===Object&&Object.getPrototypeOf(s)===Object.prototype}function mergeDeep(s,l){const c={...s};return isPlainObject$1(s)&&isPlainObject$1(l)&&Object.keys(l).forEach(d=>{isPlainObject$1(l[d])&&isPlainObject$1(s[d])?c[d]=mergeDeep(s[d],l[d]):c[d]=l[d]}),c}class Mark{constructor(l={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...l},this.name=this.config.name,l.defaultOptions&&Object.keys(l.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(l={}){return new Mark(l)}configure(l={}){const c=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,l)});return c.name=this.name,c.parent=this.parent,c}extend(l={}){const c=new Mark(l);return c.parent=this,this.child=c,c.name=l.name?l.name:c.parent.name,l.defaultOptions&&Object.keys(l.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${c.name}".`),c.options=callOrReturn(getExtensionField(c,"addOptions",{name:c.name})),c.storage=callOrReturn(getExtensionField(c,"addStorage",{name:c.name,options:c.options})),c}static handleExit({editor:l,mark:c}){const{tr:d}=l.state,f=l.state.selection.$from;if(f.pos===f.end()){const v=f.marks();if(!!!v.find(y=>(y==null?void 0:y.type.name)===c.name))return!1;const $=v.find(y=>(y==null?void 0:y.type.name)===c.name);return $&&d.removeStoredMark($),d.insertText(" ",f.pos),l.view.dispatch(d),!0}return!1}}function isNumber$2(s){return typeof s=="number"}class PasteRule{constructor(l){this.find=l.find,this.handler=l.handler}}const pasteRuleMatcherHandler=(s,l,c)=>{if(isRegExp(l))return[...s.matchAll(l)];const d=l(s,c);return d?d.map(f=>{const g=[f.text];return g.index=f.index,g.input=s,g.data=f.data,f.replaceWith&&(f.text.includes(f.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),g.push(f.replaceWith)),g}):[]};function run$3(s){const{editor:l,state:c,from:d,to:f,rule:g,pasteEvent:v,dropEvent:b}=s,{commands:$,chain:y,can:x}=new CommandManager({editor:l,state:c}),C=[];return c.doc.nodesBetween(d,f,(N,W)=>{if(!N.isTextblock||N.type.spec.code)return;const q=Math.max(d,W),Y=Math.min(f,W+N.content.size),re=N.textBetween(q-W,Y-W,void 0,"");pasteRuleMatcherHandler(re,g.find,v).forEach(de=>{if(de.index===void 0)return;const he=q+de.index+1,ge=he+de[0].length,Se={from:c.tr.mapping.map(he),to:c.tr.mapping.map(ge)},Ae=g.handler({state:c,range:Se,match:de,commands:$,chain:y,can:x,pasteEvent:v,dropEvent:b});C.push(Ae)})}),C.every(N=>N!==null)}const createClipboardPasteEvent=s=>{var l;const c=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(l=c.clipboardData)===null||l===void 0||l.setData("text/html",s),c};function pasteRulesPlugin(s){const{editor:l,rules:c}=s;let d=null,f=!1,g=!1,v=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,b=typeof DragEvent<"u"?new DragEvent("drop"):null;const $=({state:x,from:C,to:E,rule:N,pasteEvt:W})=>{const q=x.tr,Y=createChainableState({state:x,transaction:q});if(!(!run$3({editor:l,state:Y,from:Math.max(C-1,0),to:E.b-1,rule:N,pasteEvent:W,dropEvent:b})||!q.steps.length))return b=typeof DragEvent<"u"?new DragEvent("drop"):null,v=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,q};return c.map(x=>new Plugin({view(C){const E=N=>{var W;d=!((W=C.dom.parentElement)===null||W===void 0)&&W.contains(N.target)?C.dom.parentElement:null};return window.addEventListener("dragstart",E),{destroy(){window.removeEventListener("dragstart",E)}}},props:{handleDOMEvents:{drop:(C,E)=>(g=d===C.dom.parentElement,b=E,!1),paste:(C,E)=>{var N;const W=(N=E.clipboardData)===null||N===void 0?void 0:N.getData("text/html");return v=E,f=!!(W!=null&&W.includes("data-pm-slice")),!1}}},appendTransaction:(C,E,N)=>{const W=C[0],q=W.getMeta("uiEvent")==="paste"&&!f,Y=W.getMeta("uiEvent")==="drop"&&!g,re=W.getMeta("applyPasteRules"),se=!!re;if(!q&&!Y&&!se)return;if(se){const{from:ge,text:Se}=re,Ae=ge+Se.length,Re=createClipboardPasteEvent(Se);return $({rule:x,state:N,from:ge,to:{b:Ae},pasteEvt:Re})}const de=E.doc.content.findDiffStart(N.doc.content),he=E.doc.content.findDiffEnd(N.doc.content);if(!(!isNumber$2(de)||!he||de===he.b))return $({rule:x,state:N,from:de,to:he,pasteEvt:v})}}))}function findDuplicates(s){const l=s.filter((c,d)=>s.indexOf(c)!==d);return Array.from(new Set(l))}class ExtensionManager{constructor(l,c){this.splittableMarks=[],this.editor=c,this.extensions=ExtensionManager.resolve(l),this.schema=getSchemaByResolvedExtensions(this.extensions,c),this.setupExtensions()}static resolve(l){const c=ExtensionManager.sort(ExtensionManager.flatten(l)),d=findDuplicates(c.map(f=>f.name));return d.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${d.map(f=>`'${f}'`).join(", ")}]. This can lead to issues.`),c}static flatten(l){return l.map(c=>{const d={name:c.name,options:c.options,storage:c.storage},f=getExtensionField(c,"addExtensions",d);return f?[c,...this.flatten(f())]:c}).flat(10)}static sort(l){return l.sort((d,f)=>{const g=getExtensionField(d,"priority")||100,v=getExtensionField(f,"priority")||100;return g>v?-1:g<v?1:0})}get commands(){return this.extensions.reduce((l,c)=>{const d={name:c.name,options:c.options,storage:c.storage,editor:this.editor,type:getSchemaTypeByName(c.name,this.schema)},f=getExtensionField(c,"addCommands",d);return f?{...l,...f()}:l},{})}get plugins(){const{editor:l}=this,c=ExtensionManager.sort([...this.extensions].reverse()),d=[],f=[],g=c.map(v=>{const b={name:v.name,options:v.options,storage:v.storage,editor:l,type:getSchemaTypeByName(v.name,this.schema)},$=[],y=getExtensionField(v,"addKeyboardShortcuts",b);let x={};if(v.type==="mark"&&getExtensionField(v,"exitable",b)&&(x.ArrowRight=()=>Mark.handleExit({editor:l,mark:v})),y){const q=Object.fromEntries(Object.entries(y()).map(([Y,re])=>[Y,()=>re({editor:l})]));x={...x,...q}}const C=keymap(x);$.push(C);const E=getExtensionField(v,"addInputRules",b);isExtensionRulesEnabled(v,l.options.enableInputRules)&&E&&d.push(...E());const N=getExtensionField(v,"addPasteRules",b);isExtensionRulesEnabled(v,l.options.enablePasteRules)&&N&&f.push(...N());const W=getExtensionField(v,"addProseMirrorPlugins",b);if(W){const q=W();$.push(...q)}return $}).flat();return[inputRulesPlugin({editor:l,rules:d}),...pasteRulesPlugin({editor:l,rules:f}),...g]}get attributes(){return getAttributesFromExtensions(this.extensions)}get nodeViews(){const{editor:l}=this,{nodeExtensions:c}=splitExtensions(this.extensions);return Object.fromEntries(c.filter(d=>!!getExtensionField(d,"addNodeView")).map(d=>{const f=this.attributes.filter($=>$.type===d.name),g={name:d.name,options:d.options,storage:d.storage,editor:l,type:getNodeType(d.name,this.schema)},v=getExtensionField(d,"addNodeView",g);if(!v)return[];const b=($,y,x,C,E)=>{const N=getRenderedAttributes($,f);return v()({node:$,view:y,getPos:x,decorations:C,innerDecorations:E,editor:l,extension:d,HTMLAttributes:N})};return[d.name,b]}))}setupExtensions(){this.extensions.forEach(l=>{var c;this.editor.extensionStorage[l.name]=l.storage;const d={name:l.name,options:l.options,storage:l.storage,editor:this.editor,type:getSchemaTypeByName(l.name,this.schema)};l.type==="mark"&&(!((c=callOrReturn(getExtensionField(l,"keepOnSplit",d)))!==null&&c!==void 0)||c)&&this.splittableMarks.push(l.name);const f=getExtensionField(l,"onBeforeCreate",d),g=getExtensionField(l,"onCreate",d),v=getExtensionField(l,"onUpdate",d),b=getExtensionField(l,"onSelectionUpdate",d),$=getExtensionField(l,"onTransaction",d),y=getExtensionField(l,"onFocus",d),x=getExtensionField(l,"onBlur",d),C=getExtensionField(l,"onDestroy",d);f&&this.editor.on("beforeCreate",f),g&&this.editor.on("create",g),v&&this.editor.on("update",v),b&&this.editor.on("selectionUpdate",b),$&&this.editor.on("transaction",$),y&&this.editor.on("focus",y),x&&this.editor.on("blur",x),C&&this.editor.on("destroy",C)})}}class Extension{constructor(l={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...l},this.name=this.config.name,l.defaultOptions&&Object.keys(l.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(l={}){return new Extension(l)}configure(l={}){const c=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,l)});return c.name=this.name,c.parent=this.parent,c}extend(l={}){const c=new Extension({...this.config,...l});return c.parent=this,this.child=c,c.name=l.name?l.name:c.parent.name,l.defaultOptions&&Object.keys(l.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${c.name}".`),c.options=callOrReturn(getExtensionField(c,"addOptions",{name:c.name})),c.storage=callOrReturn(getExtensionField(c,"addStorage",{name:c.name,options:c.options})),c}}function getTextBetween(s,l,c){const{from:d,to:f}=l,{blockSeparator:g=`

`,textSerializers:v={}}=c||{};let b="";return s.nodesBetween(d,f,($,y,x,C)=>{var E;$.isBlock&&y>d&&(b+=g);const N=v==null?void 0:v[$.type.name];if(N)return x&&(b+=N({node:$,pos:y,parent:x,index:C,range:l})),!1;$.isText&&(b+=(E=$==null?void 0:$.text)===null||E===void 0?void 0:E.slice(Math.max(d,y)-y,f-y))}),b}function getTextSerializersFromSchema(s){return Object.fromEntries(Object.entries(s.nodes).filter(([,l])=>l.spec.toText).map(([l,c])=>[l,c.spec.toText]))}const ClipboardTextSerializer=Extension.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:s}=this,{state:l,schema:c}=s,{doc:d,selection:f}=l,{ranges:g}=f,v=Math.min(...g.map(x=>x.$from.pos)),b=Math.max(...g.map(x=>x.$to.pos)),$=getTextSerializersFromSchema(c);return getTextBetween(d,{from:v,to:b},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:$})}}})]}}),blur=()=>({editor:s,view:l})=>(requestAnimationFrame(()=>{var c;s.isDestroyed||(l.dom.blur(),(c=window==null?void 0:window.getSelection())===null||c===void 0||c.removeAllRanges())}),!0),clearContent=(s=!1)=>({commands:l})=>l.setContent("",s),clearNodes=()=>({state:s,tr:l,dispatch:c})=>{const{selection:d}=l,{ranges:f}=d;return c&&f.forEach(({$from:g,$to:v})=>{s.doc.nodesBetween(g.pos,v.pos,(b,$)=>{if(b.type.isText)return;const{doc:y,mapping:x}=l,C=y.resolve(x.map($)),E=y.resolve(x.map($+b.nodeSize)),N=C.blockRange(E);if(!N)return;const W=liftTarget(N);if(b.type.isTextblock){const{defaultType:q}=C.parent.contentMatchAt(C.index());l.setNodeMarkup(N.start,q)}(W||W===0)&&l.lift(N,W)})}),!0},command=s=>l=>s(l),createParagraphNear=()=>({state:s,dispatch:l})=>createParagraphNear$1(s,l),cut=(s,l)=>({editor:c,tr:d})=>{const{state:f}=c,g=f.doc.slice(s.from,s.to);d.deleteRange(s.from,s.to);const v=d.mapping.map(l);return d.insert(v,g.content),d.setSelection(new TextSelection(d.doc.resolve(v-1))),!0},deleteCurrentNode=()=>({tr:s,dispatch:l})=>{const{selection:c}=s,d=c.$anchor.node();if(d.content.size>0)return!1;const f=s.selection.$anchor;for(let g=f.depth;g>0;g-=1)if(f.node(g).type===d.type){if(l){const b=f.before(g),$=f.after(g);s.delete(b,$).scrollIntoView()}return!0}return!1},deleteNode=s=>({tr:l,state:c,dispatch:d})=>{const f=getNodeType(s,c.schema),g=l.selection.$anchor;for(let v=g.depth;v>0;v-=1)if(g.node(v).type===f){if(d){const $=g.before(v),y=g.after(v);l.delete($,y).scrollIntoView()}return!0}return!1},deleteRange=s=>({tr:l,dispatch:c})=>{const{from:d,to:f}=s;return c&&l.delete(d,f),!0},deleteSelection=()=>({state:s,dispatch:l})=>deleteSelection$1(s,l),enter=()=>({commands:s})=>s.keyboardShortcut("Enter"),exitCode=()=>({state:s,dispatch:l})=>exitCode$1(s,l);function objectIncludes(s,l,c={strict:!0}){const d=Object.keys(l);return d.length?d.every(f=>c.strict?l[f]===s[f]:isRegExp(l[f])?l[f].test(s[f]):l[f]===s[f]):!0}function findMarkInSet(s,l,c={}){return s.find(d=>d.type===l&&objectIncludes(d.attrs,c))}function isMarkInSet(s,l,c={}){return!!findMarkInSet(s,l,c)}function getMarkRange(s,l,c={}){if(!s||!l)return;let d=s.parent.childAfter(s.parentOffset);if(s.parentOffset===d.offset&&d.offset!==0&&(d=s.parent.childBefore(s.parentOffset)),!d.node)return;const f=findMarkInSet([...d.node.marks],l,c);if(!f)return;let g=d.index,v=s.start()+d.offset,b=g+1,$=v+d.node.nodeSize;for(findMarkInSet([...d.node.marks],l,c);g>0&&f.isInSet(s.parent.child(g-1).marks);)g-=1,v-=s.parent.child(g).nodeSize;for(;b<s.parent.childCount&&isMarkInSet([...s.parent.child(b).marks],l,c);)$+=s.parent.child(b).nodeSize,b+=1;return{from:v,to:$}}function getMarkType(s,l){if(typeof s=="string"){if(!l.marks[s])throw Error(`There is no mark type named '${s}'. Maybe you forgot to add the extension?`);return l.marks[s]}return s}const extendMarkRange=(s,l={})=>({tr:c,state:d,dispatch:f})=>{const g=getMarkType(s,d.schema),{doc:v,selection:b}=c,{$from:$,from:y,to:x}=b;if(f){const C=getMarkRange($,g,l);if(C&&C.from<=y&&C.to>=x){const E=TextSelection.create(v,C.from,C.to);c.setSelection(E)}}return!0},first=s=>l=>{const c=typeof s=="function"?s(l):s;for(let d=0;d<c.length;d+=1)if(c[d](l))return!0;return!1};function isTextSelection(s){return s instanceof TextSelection}function minMax(s=0,l=0,c=0){return Math.min(Math.max(s,l),c)}function resolveFocusPosition(s,l=null){if(!l)return null;const c=Selection$2.atStart(s),d=Selection$2.atEnd(s);if(l==="start"||l===!0)return c;if(l==="end")return d;const f=c.from,g=d.to;return l==="all"?TextSelection.create(s,minMax(0,f,g),minMax(s.content.size,f,g)):TextSelection.create(s,minMax(l,f,g),minMax(l,f,g))}function isiOS(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const focus=(s=null,l={})=>({editor:c,view:d,tr:f,dispatch:g})=>{l={scrollIntoView:!0,...l};const v=()=>{isiOS()&&d.dom.focus(),requestAnimationFrame(()=>{c.isDestroyed||(d.focus(),l!=null&&l.scrollIntoView&&c.commands.scrollIntoView())})};if(d.hasFocus()&&s===null||s===!1)return!0;if(g&&s===null&&!isTextSelection(c.state.selection))return v(),!0;const b=resolveFocusPosition(f.doc,s)||c.state.selection,$=c.state.selection.eq(b);return g&&($||f.setSelection(b),$&&f.storedMarks&&f.setStoredMarks(f.storedMarks),v()),!0},forEach=(s,l)=>c=>s.every((d,f)=>l(d,{...c,index:f})),insertContent=(s,l)=>({tr:c,commands:d})=>d.insertContentAt({from:c.selection.from,to:c.selection.to},s,l),removeWhitespaces=s=>{const l=s.childNodes;for(let c=l.length-1;c>=0;c-=1){const d=l[c];d.nodeType===3&&d.nodeValue&&/^(\n\s\s|\n)$/.test(d.nodeValue)?s.removeChild(d):d.nodeType===1&&removeWhitespaces(d)}return s};function elementFromString(s){const l=`<body>${s}</body>`,c=new window.DOMParser().parseFromString(l,"text/html").body;return removeWhitespaces(c)}function createNodeFromContent(s,l,c){c={slice:!0,parseOptions:{},...c};const d=typeof s=="object"&&s!==null,f=typeof s=="string";if(d)try{if(Array.isArray(s)&&s.length>0)return Fragment.fromArray(s.map(b=>l.nodeFromJSON(b)));const v=l.nodeFromJSON(s);return c.errorOnInvalidContent&&v.check(),v}catch(g){if(c.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:g});return console.warn("[tiptap warn]: Invalid content.","Passed value:",s,"Error:",g),createNodeFromContent("",l,c)}if(f){if(c.errorOnInvalidContent){let v=!1,b="";const $=new Schema({topNode:l.spec.topNode,marks:l.spec.marks,nodes:l.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:y=>(v=!0,b=typeof y=="string"?y:y.outerHTML,null)}]}})});if(c.slice?DOMParser$1.fromSchema($).parseSlice(elementFromString(s),c.parseOptions):DOMParser$1.fromSchema($).parse(elementFromString(s),c.parseOptions),c.errorOnInvalidContent&&v)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${b}`)})}const g=DOMParser$1.fromSchema(l);return c.slice?g.parseSlice(elementFromString(s),c.parseOptions).content:g.parse(elementFromString(s),c.parseOptions)}return createNodeFromContent("",l,c)}function selectionToInsertionEnd(s,l,c){const d=s.steps.length-1;if(d<l)return;const f=s.steps[d];if(!(f instanceof ReplaceStep||f instanceof ReplaceAroundStep))return;const g=s.mapping.maps[d];let v=0;g.forEach((b,$,y,x)=>{v===0&&(v=x)}),s.setSelection(Selection$2.near(s.doc.resolve(v),c))}const isFragment=s=>!("type"in s),insertContentAt=(s,l,c)=>({tr:d,dispatch:f,editor:g})=>{var v;if(f){c={parseOptions:{},updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...c};let b;try{b=createNodeFromContent(l,g.schema,{parseOptions:{preserveWhitespace:"full",...c.parseOptions},errorOnInvalidContent:(v=c.errorOnInvalidContent)!==null&&v!==void 0?v:g.options.enableContentCheck})}catch(W){return g.emit("contentError",{editor:g,error:W,disableCollaboration:()=>{console.error("[tiptap error]: Unable to disable collaboration at this point in time")}}),!1}let{from:$,to:y}=typeof s=="number"?{from:s,to:s}:{from:s.from,to:s.to},x=!0,C=!0;if((isFragment(b)?b:[b]).forEach(W=>{W.check(),x=x?W.isText&&W.marks.length===0:!1,C=C?W.isBlock:!1}),$===y&&C){const{parent:W}=d.doc.resolve($);W.isTextblock&&!W.type.spec.code&&!W.childCount&&($-=1,y+=1)}let N;x?(Array.isArray(l)?N=l.map(W=>W.text||"").join(""):typeof l=="object"&&l&&l.text?N=l.text:N=l,d.insertText(N,$,y)):(N=b,d.replaceWith($,y,N)),c.updateSelection&&selectionToInsertionEnd(d,d.steps.length-1,-1),c.applyInputRules&&d.setMeta("applyInputRules",{from:$,text:N}),c.applyPasteRules&&d.setMeta("applyPasteRules",{from:$,text:N})}return!0},joinUp=()=>({state:s,dispatch:l})=>joinUp$1(s,l),joinDown=()=>({state:s,dispatch:l})=>joinDown$1(s,l),joinBackward=()=>({state:s,dispatch:l})=>joinBackward$1(s,l),joinForward=()=>({state:s,dispatch:l})=>joinForward$1(s,l),joinItemBackward=()=>({state:s,dispatch:l,tr:c})=>{try{const d=joinPoint(s.doc,s.selection.$from.pos,-1);return d==null?!1:(c.join(d,2),l&&l(c),!0)}catch{return!1}},joinItemForward=()=>({state:s,dispatch:l,tr:c})=>{try{const d=joinPoint(s.doc,s.selection.$from.pos,1);return d==null?!1:(c.join(d,2),l&&l(c),!0)}catch{return!1}},joinTextblockBackward=()=>({state:s,dispatch:l})=>joinTextblockBackward$1(s,l),joinTextblockForward=()=>({state:s,dispatch:l})=>joinTextblockForward$1(s,l);function isMacOS(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function normalizeKeyName(s){const l=s.split(/-(?!$)/);let c=l[l.length-1];c==="Space"&&(c=" ");let d,f,g,v;for(let b=0;b<l.length-1;b+=1){const $=l[b];if(/^(cmd|meta|m)$/i.test($))v=!0;else if(/^a(lt)?$/i.test($))d=!0;else if(/^(c|ctrl|control)$/i.test($))f=!0;else if(/^s(hift)?$/i.test($))g=!0;else if(/^mod$/i.test($))isiOS()||isMacOS()?v=!0:f=!0;else throw new Error(`Unrecognized modifier name: ${$}`)}return d&&(c=`Alt-${c}`),f&&(c=`Ctrl-${c}`),v&&(c=`Meta-${c}`),g&&(c=`Shift-${c}`),c}const keyboardShortcut=s=>({editor:l,view:c,tr:d,dispatch:f})=>{const g=normalizeKeyName(s).split(/-(?!$)/),v=g.find(y=>!["Alt","Ctrl","Meta","Shift"].includes(y)),b=new KeyboardEvent("keydown",{key:v==="Space"?" ":v,altKey:g.includes("Alt"),ctrlKey:g.includes("Ctrl"),metaKey:g.includes("Meta"),shiftKey:g.includes("Shift"),bubbles:!0,cancelable:!0}),$=l.captureTransaction(()=>{c.someProp("handleKeyDown",y=>y(c,b))});return $==null||$.steps.forEach(y=>{const x=y.map(d.mapping);x&&f&&d.maybeStep(x)}),!0};function isNodeActive(s,l,c={}){const{from:d,to:f,empty:g}=s.selection,v=l?getNodeType(l,s.schema):null,b=[];s.doc.nodesBetween(d,f,(C,E)=>{if(C.isText)return;const N=Math.max(d,E),W=Math.min(f,E+C.nodeSize);b.push({node:C,from:N,to:W})});const $=f-d,y=b.filter(C=>v?v.name===C.node.type.name:!0).filter(C=>objectIncludes(C.node.attrs,c,{strict:!1}));return g?!!y.length:y.reduce((C,E)=>C+E.to-E.from,0)>=$}const lift=(s,l={})=>({state:c,dispatch:d})=>{const f=getNodeType(s,c.schema);return isNodeActive(c,f,l)?lift$1(c,d):!1},liftEmptyBlock=()=>({state:s,dispatch:l})=>liftEmptyBlock$1(s,l),liftListItem=s=>({state:l,dispatch:c})=>{const d=getNodeType(s,l.schema);return liftListItem$1(d)(l,c)},newlineInCode=()=>({state:s,dispatch:l})=>newlineInCode$1(s,l);function getSchemaTypeNameByName(s,l){return l.nodes[s]?"node":l.marks[s]?"mark":null}function deleteProps(s,l){const c=typeof l=="string"?[l]:l;return Object.keys(s).reduce((d,f)=>(c.includes(f)||(d[f]=s[f]),d),{})}const resetAttributes=(s,l)=>({tr:c,state:d,dispatch:f})=>{let g=null,v=null;const b=getSchemaTypeNameByName(typeof s=="string"?s:s.name,d.schema);return b?(b==="node"&&(g=getNodeType(s,d.schema)),b==="mark"&&(v=getMarkType(s,d.schema)),f&&c.selection.ranges.forEach($=>{d.doc.nodesBetween($.$from.pos,$.$to.pos,(y,x)=>{g&&g===y.type&&c.setNodeMarkup(x,void 0,deleteProps(y.attrs,l)),v&&y.marks.length&&y.marks.forEach(C=>{v===C.type&&c.addMark(x,x+y.nodeSize,v.create(deleteProps(C.attrs,l)))})})}),!0):!1},scrollIntoView=()=>({tr:s,dispatch:l})=>(l&&s.scrollIntoView(),!0),selectAll=()=>({tr:s,commands:l})=>l.setTextSelection({from:0,to:s.doc.content.size}),selectNodeBackward=()=>({state:s,dispatch:l})=>selectNodeBackward$1(s,l),selectNodeForward=()=>({state:s,dispatch:l})=>selectNodeForward$1(s,l),selectParentNode=()=>({state:s,dispatch:l})=>selectParentNode$1(s,l),selectTextblockEnd=()=>({state:s,dispatch:l})=>selectTextblockEnd$1(s,l),selectTextblockStart=()=>({state:s,dispatch:l})=>selectTextblockStart$1(s,l);function createDocument(s,l,c={},d={}){return createNodeFromContent(s,l,{slice:!1,parseOptions:c,errorOnInvalidContent:d.errorOnInvalidContent})}const setContent$1=(s,l=!1,c={},d={})=>({editor:f,tr:g,dispatch:v,commands:b})=>{var $,y;const{doc:x}=g;if(c.preserveWhitespace!=="full"){const C=createDocument(s,f.schema,c,{errorOnInvalidContent:($=d.errorOnInvalidContent)!==null&&$!==void 0?$:f.options.enableContentCheck});return v&&g.replaceWith(0,x.content.size,C).setMeta("preventUpdate",!l),!0}return v&&g.setMeta("preventUpdate",!l),b.insertContentAt({from:0,to:x.content.size},s,{parseOptions:c,errorOnInvalidContent:(y=d.errorOnInvalidContent)!==null&&y!==void 0?y:f.options.enableContentCheck})};function getMarkAttributes(s,l){const c=getMarkType(l,s.schema),{from:d,to:f,empty:g}=s.selection,v=[];g?(s.storedMarks&&v.push(...s.storedMarks),v.push(...s.selection.$head.marks())):s.doc.nodesBetween(d,f,$=>{v.push(...$.marks)});const b=v.find($=>$.type.name===c.name);return b?{...b.attrs}:{}}function combineTransactionSteps(s,l){const c=new Transform$1(s);return l.forEach(d=>{d.steps.forEach(f=>{c.step(f)})}),c}function defaultBlockAt(s){for(let l=0;l<s.edgeCount;l+=1){const{type:c}=s.edge(l);if(c.isTextblock&&!c.hasRequiredAttrs())return c}return null}function findChildrenInRange(s,l,c){const d=[];return s.nodesBetween(l.from,l.to,(f,g)=>{c(f)&&d.push({node:f,pos:g})}),d}function findParentNodeClosestToPos(s,l){for(let c=s.depth;c>0;c-=1){const d=s.node(c);if(l(d))return{pos:c>0?s.before(c):0,start:s.start(c),depth:c,node:d}}}function findParentNode(s){return l=>findParentNodeClosestToPos(l.$from,s)}function getHTMLFromFragment(s,l){const c=DOMSerializer.fromSchema(l).serializeFragment(s),f=document.implementation.createHTMLDocument().createElement("div");return f.appendChild(c),f.innerHTML}function getText(s,l){const c={from:0,to:s.content.size};return getTextBetween(s,c,l)}function getNodeAttributes(s,l){const c=getNodeType(l,s.schema),{from:d,to:f}=s.selection,g=[];s.doc.nodesBetween(d,f,b=>{g.push(b)});const v=g.reverse().find(b=>b.type.name===c.name);return v?{...v.attrs}:{}}function getAttributes(s,l){const c=getSchemaTypeNameByName(typeof l=="string"?l:l.name,s.schema);return c==="node"?getNodeAttributes(s,l):c==="mark"?getMarkAttributes(s,l):{}}function removeDuplicates(s,l=JSON.stringify){const c={};return s.filter(d=>{const f=l(d);return Object.prototype.hasOwnProperty.call(c,f)?!1:c[f]=!0})}function simplifyChangedRanges(s){const l=removeDuplicates(s);return l.length===1?l:l.filter((c,d)=>!l.filter((g,v)=>v!==d).some(g=>c.oldRange.from>=g.oldRange.from&&c.oldRange.to<=g.oldRange.to&&c.newRange.from>=g.newRange.from&&c.newRange.to<=g.newRange.to))}function getChangedRanges(s){const{mapping:l,steps:c}=s,d=[];return l.maps.forEach((f,g)=>{const v=[];if(f.ranges.length)f.forEach((b,$)=>{v.push({from:b,to:$})});else{const{from:b,to:$}=c[g];if(b===void 0||$===void 0)return;v.push({from:b,to:$})}v.forEach(({from:b,to:$})=>{const y=l.slice(g).map(b,-1),x=l.slice(g).map($),C=l.invert().map(y,-1),E=l.invert().map(x);d.push({oldRange:{from:C,to:E},newRange:{from:y,to:x}})})}),simplifyChangedRanges(d)}function getMarksBetween(s,l,c){const d=[];return s===l?c.resolve(s).marks().forEach(f=>{const g=c.resolve(s),v=getMarkRange(g,f.type);v&&d.push({mark:f,...v})}):c.nodesBetween(s,l,(f,g)=>{!f||(f==null?void 0:f.nodeSize)===void 0||d.push(...f.marks.map(v=>({from:g,to:g+f.nodeSize,mark:v})))}),d}function getSplittedAttributes(s,l,c){return Object.fromEntries(Object.entries(c).filter(([d])=>{const f=s.find(g=>g.type===l&&g.name===d);return f?f.attribute.keepOnSplit:!1}))}function isMarkActive(s,l,c={}){const{empty:d,ranges:f}=s.selection,g=l?getMarkType(l,s.schema):null;if(d)return!!(s.storedMarks||s.selection.$from.marks()).filter(C=>g?g.name===C.type.name:!0).find(C=>objectIncludes(C.attrs,c,{strict:!1}));let v=0;const b=[];if(f.forEach(({$from:C,$to:E})=>{const N=C.pos,W=E.pos;s.doc.nodesBetween(N,W,(q,Y)=>{if(!q.isText&&!q.marks.length)return;const re=Math.max(N,Y),se=Math.min(W,Y+q.nodeSize),de=se-re;v+=de,b.push(...q.marks.map(he=>({mark:he,from:re,to:se})))})}),v===0)return!1;const $=b.filter(C=>g?g.name===C.mark.type.name:!0).filter(C=>objectIncludes(C.mark.attrs,c,{strict:!1})).reduce((C,E)=>C+E.to-E.from,0),y=b.filter(C=>g?C.mark.type!==g&&C.mark.type.excludes(g):!0).reduce((C,E)=>C+E.to-E.from,0);return($>0?$+y:$)>=v}function isActive(s,l,c={}){if(!l)return isNodeActive(s,null,c)||isMarkActive(s,null,c);const d=getSchemaTypeNameByName(l,s.schema);return d==="node"?isNodeActive(s,l,c):d==="mark"?isMarkActive(s,l,c):!1}function isList(s,l){const{nodeExtensions:c}=splitExtensions(l),d=c.find(v=>v.name===s);if(!d)return!1;const f={name:d.name,options:d.options,storage:d.storage},g=callOrReturn(getExtensionField(d,"group",f));return typeof g!="string"?!1:g.split(" ").includes("list")}function isNodeEmpty(s,{checkChildren:l=!0,ignoreWhitespace:c=!1}={}){var d;if(c){if(s.type.name==="hardBreak")return!0;if(s.isText)return/^\s*$/m.test((d=s.text)!==null&&d!==void 0?d:"")}if(s.isText)return!s.text;if(s.isAtom||s.isLeaf)return!1;if(s.content.childCount===0)return!0;if(l){let f=!0;return s.content.forEach(g=>{f!==!1&&(isNodeEmpty(g,{ignoreWhitespace:c,checkChildren:l})||(f=!1))}),f}return!1}function isNodeSelection(s){return s instanceof NodeSelection}function posToDOMRect(s,l,c){const f=s.state.doc.content.size,g=minMax(l,0,f),v=minMax(c,0,f),b=s.coordsAtPos(g),$=s.coordsAtPos(v,-1),y=Math.min(b.top,$.top),x=Math.max(b.bottom,$.bottom),C=Math.min(b.left,$.left),E=Math.max(b.right,$.right),N=E-C,W=x-y,re={top:y,bottom:x,left:C,right:E,width:N,height:W,x:C,y};return{...re,toJSON:()=>re}}function canSetMark(s,l,c){var d;const{selection:f}=l;let g=null;if(isTextSelection(f)&&(g=f.$cursor),g){const b=(d=s.storedMarks)!==null&&d!==void 0?d:g.marks();return!!c.isInSet(b)||!b.some($=>$.type.excludes(c))}const{ranges:v}=f;return v.some(({$from:b,$to:$})=>{let y=b.depth===0?s.doc.inlineContent&&s.doc.type.allowsMarkType(c):!1;return s.doc.nodesBetween(b.pos,$.pos,(x,C,E)=>{if(y)return!1;if(x.isInline){const N=!E||E.type.allowsMarkType(c),W=!!c.isInSet(x.marks)||!x.marks.some(q=>q.type.excludes(c));y=N&&W}return!y}),y})}const setMark=(s,l={})=>({tr:c,state:d,dispatch:f})=>{const{selection:g}=c,{empty:v,ranges:b}=g,$=getMarkType(s,d.schema);if(f)if(v){const y=getMarkAttributes(d,$);c.addStoredMark($.create({...y,...l}))}else b.forEach(y=>{const x=y.$from.pos,C=y.$to.pos;d.doc.nodesBetween(x,C,(E,N)=>{const W=Math.max(N,x),q=Math.min(N+E.nodeSize,C);E.marks.find(re=>re.type===$)?E.marks.forEach(re=>{$===re.type&&c.addMark(W,q,$.create({...re.attrs,...l}))}):c.addMark(W,q,$.create(l))})});return canSetMark(d,c,$)},setMeta=(s,l)=>({tr:c})=>(c.setMeta(s,l),!0),setNode=(s,l={})=>({state:c,dispatch:d,chain:f})=>{const g=getNodeType(s,c.schema);return g.isTextblock?f().command(({commands:v})=>setBlockType(g,l)(c)?!0:v.clearNodes()).command(({state:v})=>setBlockType(g,l)(v,d)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},setNodeSelection=s=>({tr:l,dispatch:c})=>{if(c){const{doc:d}=l,f=minMax(s,0,d.content.size),g=NodeSelection.create(d,f);l.setSelection(g)}return!0},setTextSelection=s=>({tr:l,dispatch:c})=>{if(c){const{doc:d}=l,{from:f,to:g}=typeof s=="number"?{from:s,to:s}:s,v=TextSelection.atStart(d).from,b=TextSelection.atEnd(d).to,$=minMax(f,v,b),y=minMax(g,v,b),x=TextSelection.create(d,$,y);l.setSelection(x)}return!0},sinkListItem=s=>({state:l,dispatch:c})=>{const d=getNodeType(s,l.schema);return sinkListItem$1(d)(l,c)};function ensureMarks(s,l){const c=s.storedMarks||s.selection.$to.parentOffset&&s.selection.$from.marks();if(c){const d=c.filter(f=>l==null?void 0:l.includes(f.type.name));s.tr.ensureMarks(d)}}const splitBlock=({keepMarks:s=!0}={})=>({tr:l,state:c,dispatch:d,editor:f})=>{const{selection:g,doc:v}=l,{$from:b,$to:$}=g,y=f.extensionManager.attributes,x=getSplittedAttributes(y,b.node().type.name,b.node().attrs);if(g instanceof NodeSelection&&g.node.isBlock)return!b.parentOffset||!canSplit(v,b.pos)?!1:(d&&(s&&ensureMarks(c,f.extensionManager.splittableMarks),l.split(b.pos).scrollIntoView()),!0);if(!b.parent.isBlock)return!1;const C=$.parentOffset===$.parent.content.size,E=b.depth===0?void 0:defaultBlockAt(b.node(-1).contentMatchAt(b.indexAfter(-1)));let N=C&&E?[{type:E,attrs:x}]:void 0,W=canSplit(l.doc,l.mapping.map(b.pos),1,N);if(!N&&!W&&canSplit(l.doc,l.mapping.map(b.pos),1,E?[{type:E}]:void 0)&&(W=!0,N=E?[{type:E,attrs:x}]:void 0),d){if(W&&(g instanceof TextSelection&&l.deleteSelection(),l.split(l.mapping.map(b.pos),1,N),E&&!C&&!b.parentOffset&&b.parent.type!==E)){const q=l.mapping.map(b.before()),Y=l.doc.resolve(q);b.node(-1).canReplaceWith(Y.index(),Y.index()+1,E)&&l.setNodeMarkup(l.mapping.map(b.before()),E)}s&&ensureMarks(c,f.extensionManager.splittableMarks),l.scrollIntoView()}return W},splitListItem=(s,l={})=>({tr:c,state:d,dispatch:f,editor:g})=>{var v;const b=getNodeType(s,d.schema),{$from:$,$to:y}=d.selection,x=d.selection.node;if(x&&x.isBlock||$.depth<2||!$.sameParent(y))return!1;const C=$.node(-1);if(C.type!==b)return!1;const E=g.extensionManager.attributes;if($.parent.content.size===0&&$.node(-1).childCount===$.indexAfter(-1)){if($.depth===2||$.node(-3).type!==b||$.index(-2)!==$.node(-2).childCount-1)return!1;if(f){let re=Fragment.empty;const se=$.index(-1)?1:$.index(-2)?2:3;for(let Re=$.depth-se;Re>=$.depth-3;Re-=1)re=Fragment.from($.node(Re).copy(re));const de=$.indexAfter(-1)<$.node(-2).childCount?1:$.indexAfter(-2)<$.node(-3).childCount?2:3,he={...getSplittedAttributes(E,$.node().type.name,$.node().attrs),...l},ge=((v=b.contentMatch.defaultType)===null||v===void 0?void 0:v.createAndFill(he))||void 0;re=re.append(Fragment.from(b.createAndFill(null,ge)||void 0));const Se=$.before($.depth-(se-1));c.replace(Se,$.after(-de),new Slice(re,4-se,0));let Ae=-1;c.doc.nodesBetween(Se,c.doc.content.size,(Re,Be)=>{if(Ae>-1)return!1;Re.isTextblock&&Re.content.size===0&&(Ae=Be+1)}),Ae>-1&&c.setSelection(TextSelection.near(c.doc.resolve(Ae))),c.scrollIntoView()}return!0}const N=y.pos===$.end()?C.contentMatchAt(0).defaultType:null,W={...getSplittedAttributes(E,C.type.name,C.attrs),...l},q={...getSplittedAttributes(E,$.node().type.name,$.node().attrs),...l};c.delete($.pos,y.pos);const Y=N?[{type:b,attrs:W},{type:N,attrs:q}]:[{type:b,attrs:W}];if(!canSplit(c.doc,$.pos,2))return!1;if(f){const{selection:re,storedMarks:se}=d,{splittableMarks:de}=g.extensionManager,he=se||re.$to.parentOffset&&re.$from.marks();if(c.split($.pos,2,Y).scrollIntoView(),!he||!f)return!0;const ge=he.filter(Se=>de.includes(Se.type.name));c.ensureMarks(ge)}return!0},joinListBackwards=(s,l)=>{const c=findParentNode(v=>v.type===l)(s.selection);if(!c)return!0;const d=s.doc.resolve(Math.max(0,c.pos-1)).before(c.depth);if(d===void 0)return!0;const f=s.doc.nodeAt(d);return c.node.type===(f==null?void 0:f.type)&&canJoin(s.doc,c.pos)&&s.join(c.pos),!0},joinListForwards=(s,l)=>{const c=findParentNode(v=>v.type===l)(s.selection);if(!c)return!0;const d=s.doc.resolve(c.start).after(c.depth);if(d===void 0)return!0;const f=s.doc.nodeAt(d);return c.node.type===(f==null?void 0:f.type)&&canJoin(s.doc,d)&&s.join(d),!0},toggleList=(s,l,c,d={})=>({editor:f,tr:g,state:v,dispatch:b,chain:$,commands:y,can:x})=>{const{extensions:C,splittableMarks:E}=f.extensionManager,N=getNodeType(s,v.schema),W=getNodeType(l,v.schema),{selection:q,storedMarks:Y}=v,{$from:re,$to:se}=q,de=re.blockRange(se),he=Y||q.$to.parentOffset&&q.$from.marks();if(!de)return!1;const ge=findParentNode(Se=>isList(Se.type.name,C))(q);if(de.depth>=1&&ge&&de.depth-ge.depth<=1){if(ge.node.type===N)return y.liftListItem(W);if(isList(ge.node.type.name,C)&&N.validContent(ge.node.content)&&b)return $().command(()=>(g.setNodeMarkup(ge.pos,N),!0)).command(()=>joinListBackwards(g,N)).command(()=>joinListForwards(g,N)).run()}return!c||!he||!b?$().command(()=>x().wrapInList(N,d)?!0:y.clearNodes()).wrapInList(N,d).command(()=>joinListBackwards(g,N)).command(()=>joinListForwards(g,N)).run():$().command(()=>{const Se=x().wrapInList(N,d),Ae=he.filter(Re=>E.includes(Re.type.name));return g.ensureMarks(Ae),Se?!0:y.clearNodes()}).wrapInList(N,d).command(()=>joinListBackwards(g,N)).command(()=>joinListForwards(g,N)).run()},toggleMark=(s,l={},c={})=>({state:d,commands:f})=>{const{extendEmptyMarkRange:g=!1}=c,v=getMarkType(s,d.schema);return isMarkActive(d,v,l)?f.unsetMark(v,{extendEmptyMarkRange:g}):f.setMark(v,l)},toggleNode=(s,l,c={})=>({state:d,commands:f})=>{const g=getNodeType(s,d.schema),v=getNodeType(l,d.schema),b=isNodeActive(d,g,c);let $;return d.selection.$anchor.sameParent(d.selection.$head)&&($=d.selection.$anchor.parent.attrs),b?f.setNode(v,$):f.setNode(g,{...$,...c})},toggleWrap=(s,l={})=>({state:c,commands:d})=>{const f=getNodeType(s,c.schema);return isNodeActive(c,f,l)?d.lift(f):d.wrapIn(f,l)},undoInputRule=()=>({state:s,dispatch:l})=>{const c=s.plugins;for(let d=0;d<c.length;d+=1){const f=c[d];let g;if(f.spec.isInputRules&&(g=f.getState(s))){if(l){const v=s.tr,b=g.transform;for(let $=b.steps.length-1;$>=0;$-=1)v.step(b.steps[$].invert(b.docs[$]));if(g.text){const $=v.doc.resolve(g.from).marks();v.replaceWith(g.from,g.to,s.schema.text(g.text,$))}else v.delete(g.from,g.to)}return!0}}return!1},unsetAllMarks=()=>({tr:s,dispatch:l})=>{const{selection:c}=s,{empty:d,ranges:f}=c;return d||l&&f.forEach(g=>{s.removeMark(g.$from.pos,g.$to.pos)}),!0},unsetMark=(s,l={})=>({tr:c,state:d,dispatch:f})=>{var g;const{extendEmptyMarkRange:v=!1}=l,{selection:b}=c,$=getMarkType(s,d.schema),{$from:y,empty:x,ranges:C}=b;if(!f)return!0;if(x&&v){let{from:E,to:N}=b;const W=(g=y.marks().find(Y=>Y.type===$))===null||g===void 0?void 0:g.attrs,q=getMarkRange(y,$,W);q&&(E=q.from,N=q.to),c.removeMark(E,N,$)}else C.forEach(E=>{c.removeMark(E.$from.pos,E.$to.pos,$)});return c.removeStoredMark($),!0},updateAttributes=(s,l={})=>({tr:c,state:d,dispatch:f})=>{let g=null,v=null;const b=getSchemaTypeNameByName(typeof s=="string"?s:s.name,d.schema);return b?(b==="node"&&(g=getNodeType(s,d.schema)),b==="mark"&&(v=getMarkType(s,d.schema)),f&&c.selection.ranges.forEach($=>{const y=$.$from.pos,x=$.$to.pos;d.doc.nodesBetween(y,x,(C,E)=>{g&&g===C.type&&c.setNodeMarkup(E,void 0,{...C.attrs,...l}),v&&C.marks.length&&C.marks.forEach(N=>{if(v===N.type){const W=Math.max(E,y),q=Math.min(E+C.nodeSize,x);c.addMark(W,q,v.create({...N.attrs,...l}))}})})}),!0):!1},wrapIn=(s,l={})=>({state:c,dispatch:d})=>{const f=getNodeType(s,c.schema);return wrapIn$1(f,l)(c,d)},wrapInList=(s,l={})=>({state:c,dispatch:d})=>{const f=getNodeType(s,c.schema);return wrapInList$1(f,l)(c,d)};var commands=Object.freeze({__proto__:null,blur,clearContent,clearNodes,command,createParagraphNear,cut,deleteCurrentNode,deleteNode,deleteRange,deleteSelection,enter,exitCode,extendMarkRange,first,focus,forEach,insertContent,insertContentAt,joinBackward,joinDown,joinForward,joinItemBackward,joinItemForward,joinTextblockBackward,joinTextblockForward,joinUp,keyboardShortcut,lift,liftEmptyBlock,liftListItem,newlineInCode,resetAttributes,scrollIntoView,selectAll,selectNodeBackward,selectNodeForward,selectParentNode,selectTextblockEnd,selectTextblockStart,setContent:setContent$1,setMark,setMeta,setNode,setNodeSelection,setTextSelection,sinkListItem,splitBlock,splitListItem,toggleList,toggleMark,toggleNode,toggleWrap,undoInputRule,unsetAllMarks,unsetMark,updateAttributes,wrapIn,wrapInList});const Commands=Extension.create({name:"commands",addCommands(){return{...commands}}}),Drop=Extension.create({name:"drop",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapDrop"),props:{handleDrop:(s,l,c,d)=>{this.editor.emit("drop",{editor:this.editor,event:l,slice:c,moved:d})}}})]}}),Editable=Extension.create({name:"editable",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("editable"),props:{editable:()=>this.editor.options.editable}})]}}),FocusEvents=Extension.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:s}=this;return[new Plugin({key:new PluginKey("focusEvents"),props:{handleDOMEvents:{focus:(l,c)=>{s.isFocused=!0;const d=s.state.tr.setMeta("focus",{event:c}).setMeta("addToHistory",!1);return l.dispatch(d),!1},blur:(l,c)=>{s.isFocused=!1;const d=s.state.tr.setMeta("blur",{event:c}).setMeta("addToHistory",!1);return l.dispatch(d),!1}}}})]}}),Keymap=Extension.create({name:"keymap",addKeyboardShortcuts(){const s=()=>this.editor.commands.first(({commands:v})=>[()=>v.undoInputRule(),()=>v.command(({tr:b})=>{const{selection:$,doc:y}=b,{empty:x,$anchor:C}=$,{pos:E,parent:N}=C,W=C.parent.isTextblock&&E>0?b.doc.resolve(E-1):C,q=W.parent.type.spec.isolating,Y=C.pos-C.parentOffset,re=q&&W.parent.childCount===1?Y===C.pos:Selection$2.atStart(y).from===E;return!x||!N.type.isTextblock||N.textContent.length||!re||re&&C.parent.type.name==="paragraph"?!1:v.clearNodes()}),()=>v.deleteSelection(),()=>v.joinBackward(),()=>v.selectNodeBackward()]),l=()=>this.editor.commands.first(({commands:v})=>[()=>v.deleteSelection(),()=>v.deleteCurrentNode(),()=>v.joinForward(),()=>v.selectNodeForward()]),d={Enter:()=>this.editor.commands.first(({commands:v})=>[()=>v.newlineInCode(),()=>v.createParagraphNear(),()=>v.liftEmptyBlock(),()=>v.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:s,"Mod-Backspace":s,"Shift-Backspace":s,Delete:l,"Mod-Delete":l,"Mod-a":()=>this.editor.commands.selectAll()},f={...d},g={...d,"Ctrl-h":s,"Alt-Backspace":s,"Ctrl-d":l,"Ctrl-Alt-Backspace":l,"Alt-Delete":l,"Alt-d":l,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return isiOS()||isMacOS()?g:f},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("clearDocument"),appendTransaction:(s,l,c)=>{const d=s.some(q=>q.docChanged)&&!l.doc.eq(c.doc),f=s.some(q=>q.getMeta("preventClearDocument"));if(!d||f)return;const{empty:g,from:v,to:b}=l.selection,$=Selection$2.atStart(l.doc).from,y=Selection$2.atEnd(l.doc).to;if(g||!(v===$&&b===y)||!isNodeEmpty(c.doc))return;const E=c.tr,N=createChainableState({state:c,transaction:E}),{commands:W}=new CommandManager({editor:this.editor,state:N});if(W.clearNodes(),!!E.steps.length)return E}})]}}),Paste=Extension.create({name:"paste",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tiptapPaste"),props:{handlePaste:(s,l,c)=>{this.editor.emit("paste",{editor:this.editor,event:l,slice:c})}}})]}}),Tabindex=Extension.create({name:"tabindex",addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class NodePos{get name(){return this.node.type.name}constructor(l,c,d=!1,f=null){this.currentNode=null,this.actualDepth=null,this.isBlock=d,this.resolvedPos=l,this.editor=c,this.currentNode=f}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var l;return(l=this.actualDepth)!==null&&l!==void 0?l:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(l){let c=this.from,d=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}c=this.from+1,d=this.to-1}this.editor.commands.insertContentAt({from:c,to:d},l)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const l=this.resolvedPos.start(this.resolvedPos.depth-1),c=this.resolvedPos.doc.resolve(l);return new NodePos(c,this.editor)}get before(){let l=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return l.depth!==this.depth&&(l=this.resolvedPos.doc.resolve(this.from-3)),new NodePos(l,this.editor)}get after(){let l=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return l.depth!==this.depth&&(l=this.resolvedPos.doc.resolve(this.to+3)),new NodePos(l,this.editor)}get children(){const l=[];return this.node.content.forEach((c,d)=>{const f=c.isBlock&&!c.isTextblock,g=this.pos+d+1,v=this.resolvedPos.doc.resolve(g);if(!f&&v.depth<=this.depth)return;const b=new NodePos(v,this.editor,f,f?c:null);f&&(b.actualDepth=this.depth+1),l.push(new NodePos(v,this.editor,f,f?c:null))}),l}get firstChild(){return this.children[0]||null}get lastChild(){const l=this.children;return l[l.length-1]||null}closest(l,c={}){let d=null,f=this.parent;for(;f&&!d;){if(f.node.type.name===l)if(Object.keys(c).length>0){const g=f.node.attrs,v=Object.keys(c);for(let b=0;b<v.length;b+=1){const $=v[b];if(g[$]!==c[$])break}}else d=f;f=f.parent}return d}querySelector(l,c={}){return this.querySelectorAll(l,c,!0)[0]||null}querySelectorAll(l,c={},d=!1){let f=[];if(!this.children||this.children.length===0)return f;const g=Object.keys(c);return this.children.forEach(v=>{d&&f.length>0||(v.node.type.name===l&&g.every($=>c[$]===v.node.attrs[$])&&f.push(v),!(d&&f.length>0)&&(f=f.concat(v.querySelectorAll(l,c,d))))}),f}setAttribute(l){const c=this.editor.state.selection;this.editor.chain().setTextSelection(this.from).updateAttributes(this.node.type.name,l).setTextSelection(c.from).run()}}const style=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function createStyleTag(s,l,c){const d=document.querySelector("style[data-tiptap-style]");if(d!==null)return d;const f=document.createElement("style");return l&&f.setAttribute("nonce",l),f.setAttribute("data-tiptap-style",""),f.innerHTML=s,document.getElementsByTagName("head")[0].appendChild(f),f}let Editor$1=class extends EventEmitter{constructor(l={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:c})=>{throw c},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(l),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:c,slice:d,moved:f})=>this.options.onDrop(c,d,f)),this.on("paste",({event:c,slice:d})=>this.options.onPaste(c,d)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=createStyleTag(style,this.options.injectNonce))}setOptions(l={}){this.options={...this.options,...l},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(l,c=!0){this.setOptions({editable:l}),c&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(l,c){const d=isFunction$3(c)?c(l,[...this.state.plugins]):[...this.state.plugins,l],f=this.state.reconfigure({plugins:d});return this.view.updateState(f),f}unregisterPlugin(l){if(this.isDestroyed)return;const c=typeof l=="string"?`${l}$`:l.key,d=this.state.reconfigure({plugins:this.state.plugins.filter(f=>!f.key.startsWith(c))});return this.view.updateState(d),d}createExtensionManager(){var l,c;const f=[...this.options.enableCoreExtensions?[Editable,ClipboardTextSerializer.configure({blockSeparator:(c=(l=this.options.coreExtensionOptions)===null||l===void 0?void 0:l.clipboardTextSerializer)===null||c===void 0?void 0:c.blockSeparator}),Commands,FocusEvents,Keymap,Tabindex,Drop,Paste].filter(g=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[g.name]!==!1:!0):[],...this.options.extensions].filter(g=>["extension","node","mark"].includes(g==null?void 0:g.type));this.extensionManager=new ExtensionManager(f,this)}createCommandManager(){this.commandManager=new CommandManager({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){let l;try{l=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(g){if(!(g instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(g.message))throw g;this.emit("contentError",{editor:this,error:g,disableCollaboration:()=>{this.options.extensions=this.options.extensions.filter(v=>v.name!=="collaboration"),this.createExtensionManager()}}),l=createDocument(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const c=resolveFocusPosition(l,this.options.autofocus);this.view=new EditorView(this.options.element,{...this.options.editorProps,dispatchTransaction:this.dispatchTransaction.bind(this),state:EditorState.create({doc:l,selection:c||void 0})});const d=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(d),this.createNodeViews(),this.prependClass();const f=this.view.dom;f.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(l){this.isCapturingTransaction=!0,l(),this.isCapturingTransaction=!1;const c=this.capturedTransaction;return this.capturedTransaction=null,c}dispatchTransaction(l){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=l;return}l.steps.forEach(v=>{var b;return(b=this.capturedTransaction)===null||b===void 0?void 0:b.step(v)});return}const c=this.state.apply(l),d=!this.state.selection.eq(c.selection);this.emit("beforeTransaction",{editor:this,transaction:l,nextState:c}),this.view.updateState(c),this.emit("transaction",{editor:this,transaction:l}),d&&this.emit("selectionUpdate",{editor:this,transaction:l});const f=l.getMeta("focus"),g=l.getMeta("blur");f&&this.emit("focus",{editor:this,event:f.event,transaction:l}),g&&this.emit("blur",{editor:this,event:g.event,transaction:l}),!(!l.docChanged||l.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:l})}getAttributes(l){return getAttributes(this.state,l)}isActive(l,c){const d=typeof l=="string"?l:null,f=typeof l=="string"?c:l;return isActive(this.state,d,f)}getJSON(){return this.state.doc.toJSON()}getHTML(){return getHTMLFromFragment(this.state.doc.content,this.schema)}getText(l){const{blockSeparator:c=`

`,textSerializers:d={}}=l||{};return getText(this.state.doc,{blockSeparator:c,textSerializers:{...getTextSerializersFromSchema(this.schema),...d}})}get isEmpty(){return isNodeEmpty(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const l=this.view.dom;l&&l.editor&&delete l.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var l;return!(!((l=this.view)===null||l===void 0)&&l.docView)}$node(l,c){var d;return((d=this.$doc)===null||d===void 0?void 0:d.querySelector(l,c))||null}$nodes(l,c){var d;return((d=this.$doc)===null||d===void 0?void 0:d.querySelectorAll(l,c))||null}$pos(l){const c=this.state.doc.resolve(l);return new NodePos(c,this)}get $doc(){return this.$pos(0)}};function markInputRule(s){return new InputRule({find:s.find,handler:({state:l,range:c,match:d})=>{const f=callOrReturn(s.getAttributes,void 0,d);if(f===!1||f===null)return null;const{tr:g}=l,v=d[d.length-1],b=d[0];if(v){const $=b.search(/\S/),y=c.from+b.indexOf(v),x=y+v.length;if(getMarksBetween(c.from,c.to,l.doc).filter(N=>N.mark.type.excluded.find(q=>q===s.type&&q!==N.mark.type)).filter(N=>N.to>y).length)return null;x<c.to&&g.delete(x,c.to),y>c.from&&g.delete(c.from+$,y);const E=c.from+$+v.length;g.addMark(c.from+$,E,s.type.create(f||{})),g.removeStoredMark(s.type)}}})}function nodeInputRule(s){return new InputRule({find:s.find,handler:({state:l,range:c,match:d})=>{const f=callOrReturn(s.getAttributes,void 0,d)||{},{tr:g}=l,v=c.from;let b=c.to;const $=s.type.create(f);if(d[1]){const y=d[0].lastIndexOf(d[1]);let x=v+y;x>b?x=b:b=x+d[1].length;const C=d[0][d[0].length-1];g.insertText(C,v+d[0].length-1),g.replaceWith(x,b,$)}else if(d[0]){const y=s.type.isInline?v:v-1;g.insert(y,s.type.create(f)).delete(g.mapping.map(v),g.mapping.map(b))}g.scrollIntoView()}})}function textblockTypeInputRule(s){return new InputRule({find:s.find,handler:({state:l,range:c,match:d})=>{const f=l.doc.resolve(c.from),g=callOrReturn(s.getAttributes,void 0,d)||{};if(!f.node(-1).canReplaceWith(f.index(-1),f.indexAfter(-1),s.type))return null;l.tr.delete(c.from,c.to).setBlockType(c.from,c.from,s.type,g)}})}function textInputRule(s){return new InputRule({find:s.find,handler:({state:l,range:c,match:d})=>{let f=s.replace,g=c.from;const v=c.to;if(d[1]){const b=d[0].lastIndexOf(d[1]);f+=d[0].slice(b+d[1].length),g+=b;const $=g-v;$>0&&(f=d[0].slice(b-$,b)+f,g=v)}l.tr.insertText(f,g,v)}})}function wrappingInputRule(s){return new InputRule({find:s.find,handler:({state:l,range:c,match:d,chain:f})=>{const g=callOrReturn(s.getAttributes,void 0,d)||{},v=l.tr.delete(c.from,c.to),$=v.doc.resolve(c.from).blockRange(),y=$&&findWrapping($,s.type,g);if(!y)return null;if(v.wrap($,y),s.keepMarks&&s.editor){const{selection:C,storedMarks:E}=l,{splittableMarks:N}=s.editor.extensionManager,W=E||C.$to.parentOffset&&C.$from.marks();if(W){const q=W.filter(Y=>N.includes(Y.type.name));v.ensureMarks(q)}}if(s.keepAttributes){const C=s.type.name==="bulletList"||s.type.name==="orderedList"?"listItem":"taskList";f().updateAttributes(C,g).run()}const x=v.doc.resolve(c.from-1).nodeBefore;x&&x.type===s.type&&canJoin(v.doc,c.from-1)&&(!s.joinPredicate||s.joinPredicate(d,x))&&v.join(c.from-1)}})}let Node$1=class PSe{constructor(l={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...l},this.name=this.config.name,l.defaultOptions&&Object.keys(l.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=callOrReturn(getExtensionField(this,"addOptions",{name:this.name}))),this.storage=callOrReturn(getExtensionField(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(l={}){return new PSe(l)}configure(l={}){const c=this.extend({...this.config,addOptions:()=>mergeDeep(this.options,l)});return c.name=this.name,c.parent=this.parent,c}extend(l={}){const c=new PSe(l);return c.parent=this,this.child=c,c.name=l.name?l.name:c.parent.name,l.defaultOptions&&Object.keys(l.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${c.name}".`),c.options=callOrReturn(getExtensionField(c,"addOptions",{name:c.name})),c.storage=callOrReturn(getExtensionField(c,"addStorage",{name:c.name,options:c.options})),c}};function isAndroid(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}class NodeView{constructor(l,c,d){this.isDragging=!1,this.component=l,this.editor=c.editor,this.options={stopEvent:null,ignoreMutation:null,...d},this.extension=c.extension,this.node=c.node,this.decorations=c.decorations,this.innerDecorations=c.innerDecorations,this.view=c.view,this.HTMLAttributes=c.HTMLAttributes,this.getPos=c.getPos,this.mount()}mount(){}get dom(){return this.editor.view.dom}get contentDOM(){return null}onDragStart(l){var c,d,f,g,v,b,$;const{view:y}=this.editor,x=l.target,C=x.nodeType===3?(c=x.parentElement)===null||c===void 0?void 0:c.closest("[data-drag-handle]"):x.closest("[data-drag-handle]");if(!this.dom||!((d=this.contentDOM)===null||d===void 0)&&d.contains(x)||!C)return;let E=0,N=0;if(this.dom!==C){const re=this.dom.getBoundingClientRect(),se=C.getBoundingClientRect(),de=(f=l.offsetX)!==null&&f!==void 0?f:(g=l.nativeEvent)===null||g===void 0?void 0:g.offsetX,he=(v=l.offsetY)!==null&&v!==void 0?v:(b=l.nativeEvent)===null||b===void 0?void 0:b.offsetY;E=se.x-re.x+de,N=se.y-re.y+he}($=l.dataTransfer)===null||$===void 0||$.setDragImage(this.dom,E,N);const W=this.getPos();if(typeof W!="number")return;const q=NodeSelection.create(y.state.doc,W),Y=y.state.tr.setSelection(q);y.dispatch(Y)}stopEvent(l){var c;if(!this.dom)return!1;if(typeof this.options.stopEvent=="function")return this.options.stopEvent({event:l});const d=l.target;if(!(this.dom.contains(d)&&!(!((c=this.contentDOM)===null||c===void 0)&&c.contains(d))))return!1;const g=l.type.startsWith("drag"),v=l.type==="drop";if((["INPUT","BUTTON","SELECT","TEXTAREA"].includes(d.tagName)||d.isContentEditable)&&!v&&!g)return!0;const{isEditable:$}=this.editor,{isDragging:y}=this,x=!!this.node.type.spec.draggable,C=NodeSelection.isSelectable(this.node),E=l.type==="copy",N=l.type==="paste",W=l.type==="cut",q=l.type==="mousedown";if(!x&&C&&g&&l.preventDefault(),x&&g&&!y)return l.preventDefault(),!1;if(x&&$&&!y&&q){const Y=d.closest("[data-drag-handle]");Y&&(this.dom===Y||this.dom.contains(Y))&&(this.isDragging=!0,document.addEventListener("dragend",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("drop",()=>{this.isDragging=!1},{once:!0}),document.addEventListener("mouseup",()=>{this.isDragging=!1},{once:!0}))}return!(y||v||E||N||W||q&&C)}ignoreMutation(l){return!this.dom||!this.contentDOM?!0:typeof this.options.ignoreMutation=="function"?this.options.ignoreMutation({mutation:l}):this.node.isLeaf||this.node.isAtom?!0:l.type==="selection"||this.dom.contains(l.target)&&l.type==="childList"&&(isiOS()||isAndroid())&&this.editor.isFocused&&[...Array.from(l.addedNodes),...Array.from(l.removedNodes)].every(d=>d.isContentEditable)?!1:this.contentDOM===l.target&&l.type==="attributes"?!0:!this.contentDOM.contains(l.target)}updateAttributes(l){this.editor.commands.command(({tr:c})=>{const d=this.getPos();return typeof d!="number"?!1:(c.setNodeMarkup(d,void 0,{...this.node.attrs,...l}),!0)})}deleteNode(){const l=this.getPos();if(typeof l!="number")return;const c=l+this.node.nodeSize;this.editor.commands.deleteRange({from:l,to:c})}}function markPasteRule(s){return new PasteRule({find:s.find,handler:({state:l,range:c,match:d,pasteEvent:f})=>{const g=callOrReturn(s.getAttributes,void 0,d,f);if(g===!1||g===null)return null;const{tr:v}=l,b=d[d.length-1],$=d[0];let y=c.to;if(b){const x=$.search(/\S/),C=c.from+$.indexOf(b),E=C+b.length;if(getMarksBetween(c.from,c.to,l.doc).filter(W=>W.mark.type.excluded.find(Y=>Y===s.type&&Y!==W.mark.type)).filter(W=>W.to>C).length)return null;E<c.to&&v.delete(E,c.to),C>c.from&&v.delete(c.from+x,C),y=c.from+x+b.length,v.addMark(c.from+x,y,s.type.create(g||{})),v.removeStoredMark(s.type)}}})}function dedent(s){for(var l=[],c=1;c<arguments.length;c++)l[c-1]=arguments[c];var d=Array.from(typeof s=="string"?[s]:s);d[d.length-1]=d[d.length-1].replace(/\r?\n([\t ]*)$/,"");var f=d.reduce(function(b,$){var y=$.match(/\n([\t ]+|(?!\s).)/g);return y?b.concat(y.map(function(x){var C,E;return(E=(C=x.match(/[\t ]/g))===null||C===void 0?void 0:C.length)!==null&&E!==void 0?E:0})):b},[]);if(f.length){var g=new RegExp(`
[	 ]{`+Math.min.apply(Math,f)+"}","g");d=d.map(function(b){return b.replace(g,`
`)})}d[0]=d[0].replace(/^\r?\n/,"");var v=d[0];return l.forEach(function(b,$){var y=v.match(/(?:^|\n)( *)$/),x=y?y[1]:"",C=b;typeof b=="string"&&b.includes(`
`)&&(C=String(b).split(`
`).map(function(E,N){return N===0?E:""+x+E}).join(`
`)),v+=C+d[$+1]}),v}const scriptRel="modulepreload",assetsURL=function(s){return"/"+s},seen={},__vitePreload=function(l,c,d){let f=Promise.resolve();if(c&&c.length>0){document.getElementsByTagName("link");const v=document.querySelector("meta[property=csp-nonce]"),b=(v==null?void 0:v.nonce)||(v==null?void 0:v.getAttribute("nonce"));f=Promise.allSettled(c.map($=>{if($=assetsURL($),$ in seen)return;seen[$]=!0;const y=$.endsWith(".css"),x=y?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${$}"]${x}`))return;const C=document.createElement("link");if(C.rel=y?"stylesheet":scriptRel,y||(C.as="script"),C.crossOrigin="",C.href=$,b&&C.setAttribute("nonce",b),document.head.appendChild(C),y)return new Promise((E,N)=>{C.addEventListener("load",E),C.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${$}`)))})}))}function g(v){const b=new Event("vite:preloadError",{cancelable:!0});if(b.payload=v,window.dispatchEvent(b),!b.defaultPrevented)throw v}return f.then(v=>{for(const b of v||[])b.status==="rejected"&&g(b.reason);return l().catch(g)})};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function getAugmentedNamespace(s){if(s.__esModule)return s;var l=s.default;if(typeof l=="function"){var c=function d(){return this instanceof d?Reflect.construct(l,arguments,this.constructor):l.apply(this,arguments)};c.prototype=l.prototype}else c={};return Object.defineProperty(c,"__esModule",{value:!0}),Object.keys(s).forEach(function(d){var f=Object.getOwnPropertyDescriptor(s,d);Object.defineProperty(c,d,f.get?f:{enumerable:!0,get:function(){return s[d]}})}),c}var dayjs_min={exports:{}};(function(s,l){(function(c,d){s.exports=d()})(commonjsGlobal,function(){var c=1e3,d=6e4,f=36e5,g="millisecond",v="second",b="minute",$="hour",y="day",x="week",C="month",E="quarter",N="year",W="date",q="Invalid Date",Y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,re=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,se={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(yy){var my=["th","st","nd","rd"],$t=yy%100;return"["+yy+(my[($t-20)%10]||my[$t]||my[0])+"]"}},de=function(yy,my,$t){var K$=String(yy);return!K$||K$.length>=my?yy:""+Array(my+1-K$.length).join($t)+yy},he={s:de,z:function(yy){var my=-yy.utcOffset(),$t=Math.abs(my),K$=Math.floor($t/60),Y$=$t%60;return(my<=0?"+":"-")+de(K$,2,"0")+":"+de(Y$,2,"0")},m:function yy(my,$t){if(my.date()<$t.date())return-yy($t,my);var K$=12*($t.year()-my.year())+($t.month()-my.month()),Y$=my.clone().add(K$,C),W$=$t-Y$<0,U$=my.clone().add(K$+(W$?-1:1),C);return+(-(K$+($t-Y$)/(W$?Y$-U$:U$-Y$))||0)},a:function(yy){return yy<0?Math.ceil(yy)||0:Math.floor(yy)},p:function(yy){return{M:C,y:N,w:x,d:y,D:W,h:$,m:b,s:v,ms:g,Q:E}[yy]||String(yy||"").toLowerCase().replace(/s$/,"")},u:function(yy){return yy===void 0}},ge="en",Se={};Se[ge]=se;var Ae="$isDayjsObject",Re=function(yy){return yy instanceof _y||!(!yy||!yy[Ae])},Be=function yy(my,$t,K$){var Y$;if(!my)return ge;if(typeof my=="string"){var W$=my.toLowerCase();Se[W$]&&(Y$=W$),$t&&(Se[W$]=$t,Y$=W$);var U$=my.split("-");if(!Y$&&U$.length>1)return yy(U$[0])}else{var hy=my.name;Se[hy]=my,Y$=hy}return!K$&&Y$&&(ge=Y$),Y$||!K$&&ge},Ke=function(yy,my){if(Re(yy))return yy.clone();var $t=typeof my=="object"?my:{};return $t.date=yy,$t.args=arguments,new _y($t)},Lr=he;Lr.l=Be,Lr.i=Re,Lr.w=function(yy,my){return Ke(yy,{locale:my.$L,utc:my.$u,x:my.$x,$offset:my.$offset})};var _y=function(){function yy($t){this.$L=Be($t.locale,null,!0),this.parse($t),this.$x=this.$x||$t.x||{},this[Ae]=!0}var my=yy.prototype;return my.parse=function($t){this.$d=function(K$){var Y$=K$.date,W$=K$.utc;if(Y$===null)return new Date(NaN);if(Lr.u(Y$))return new Date;if(Y$ instanceof Date)return new Date(Y$);if(typeof Y$=="string"&&!/Z$/i.test(Y$)){var U$=Y$.match(Y);if(U$){var hy=U$[2]-1||0,G$=(U$[7]||"0").substring(0,3);return W$?new Date(Date.UTC(U$[1],hy,U$[3]||1,U$[4]||0,U$[5]||0,U$[6]||0,G$)):new Date(U$[1],hy,U$[3]||1,U$[4]||0,U$[5]||0,U$[6]||0,G$)}}return new Date(Y$)}($t),this.init()},my.init=function(){var $t=this.$d;this.$y=$t.getFullYear(),this.$M=$t.getMonth(),this.$D=$t.getDate(),this.$W=$t.getDay(),this.$H=$t.getHours(),this.$m=$t.getMinutes(),this.$s=$t.getSeconds(),this.$ms=$t.getMilliseconds()},my.$utils=function(){return Lr},my.isValid=function(){return this.$d.toString()!==q},my.isSame=function($t,K$){var Y$=Ke($t);return this.startOf(K$)<=Y$&&Y$<=this.endOf(K$)},my.isAfter=function($t,K$){return Ke($t)<this.startOf(K$)},my.isBefore=function($t,K$){return this.endOf(K$)<Ke($t)},my.$g=function($t,K$,Y$){return Lr.u($t)?this[K$]:this.set(Y$,$t)},my.unix=function(){return Math.floor(this.valueOf()/1e3)},my.valueOf=function(){return this.$d.getTime()},my.startOf=function($t,K$){var Y$=this,W$=!!Lr.u(K$)||K$,U$=Lr.p($t),hy=function(BS,MS){var zS=Lr.w(Y$.$u?Date.UTC(Y$.$y,MS,BS):new Date(Y$.$y,MS,BS),Y$);return W$?zS:zS.endOf(y)},G$=function(BS,MS){return Lr.w(Y$.toDate()[BS].apply(Y$.toDate("s"),(W$?[0,0,0,0]:[23,59,59,999]).slice(MS)),Y$)},ky=this.$W,$y=this.$M,rS=this.$D,lS="set"+(this.$u?"UTC":"");switch(U$){case N:return W$?hy(1,0):hy(31,11);case C:return W$?hy(1,$y):hy(0,$y+1);case x:var bS=this.$locale().weekStart||0,IS=(ky<bS?ky+7:ky)-bS;return hy(W$?rS-IS:rS+(6-IS),$y);case y:case W:return G$(lS+"Hours",0);case $:return G$(lS+"Minutes",1);case b:return G$(lS+"Seconds",2);case v:return G$(lS+"Milliseconds",3);default:return this.clone()}},my.endOf=function($t){return this.startOf($t,!1)},my.$set=function($t,K$){var Y$,W$=Lr.p($t),U$="set"+(this.$u?"UTC":""),hy=(Y$={},Y$[y]=U$+"Date",Y$[W]=U$+"Date",Y$[C]=U$+"Month",Y$[N]=U$+"FullYear",Y$[$]=U$+"Hours",Y$[b]=U$+"Minutes",Y$[v]=U$+"Seconds",Y$[g]=U$+"Milliseconds",Y$)[W$],G$=W$===y?this.$D+(K$-this.$W):K$;if(W$===C||W$===N){var ky=this.clone().set(W,1);ky.$d[hy](G$),ky.init(),this.$d=ky.set(W,Math.min(this.$D,ky.daysInMonth())).$d}else hy&&this.$d[hy](G$);return this.init(),this},my.set=function($t,K$){return this.clone().$set($t,K$)},my.get=function($t){return this[Lr.p($t)]()},my.add=function($t,K$){var Y$,W$=this;$t=Number($t);var U$=Lr.p(K$),hy=function($y){var rS=Ke(W$);return Lr.w(rS.date(rS.date()+Math.round($y*$t)),W$)};if(U$===C)return this.set(C,this.$M+$t);if(U$===N)return this.set(N,this.$y+$t);if(U$===y)return hy(1);if(U$===x)return hy(7);var G$=(Y$={},Y$[b]=d,Y$[$]=f,Y$[v]=c,Y$)[U$]||1,ky=this.$d.getTime()+$t*G$;return Lr.w(ky,this)},my.subtract=function($t,K$){return this.add(-1*$t,K$)},my.format=function($t){var K$=this,Y$=this.$locale();if(!this.isValid())return Y$.invalidDate||q;var W$=$t||"YYYY-MM-DDTHH:mm:ssZ",U$=Lr.z(this),hy=this.$H,G$=this.$m,ky=this.$M,$y=Y$.weekdays,rS=Y$.months,lS=Y$.meridiem,bS=function(MS,zS,LS,nS){return MS&&(MS[zS]||MS(K$,W$))||LS[zS].slice(0,nS)},IS=function(MS){return Lr.s(hy%12||12,MS,"0")},BS=lS||function(MS,zS,LS){var nS=MS<12?"AM":"PM";return LS?nS.toLowerCase():nS};return W$.replace(re,function(MS,zS){return zS||function(LS){switch(LS){case"YY":return String(K$.$y).slice(-2);case"YYYY":return Lr.s(K$.$y,4,"0");case"M":return ky+1;case"MM":return Lr.s(ky+1,2,"0");case"MMM":return bS(Y$.monthsShort,ky,rS,3);case"MMMM":return bS(rS,ky);case"D":return K$.$D;case"DD":return Lr.s(K$.$D,2,"0");case"d":return String(K$.$W);case"dd":return bS(Y$.weekdaysMin,K$.$W,$y,2);case"ddd":return bS(Y$.weekdaysShort,K$.$W,$y,3);case"dddd":return $y[K$.$W];case"H":return String(hy);case"HH":return Lr.s(hy,2,"0");case"h":return IS(1);case"hh":return IS(2);case"a":return BS(hy,G$,!0);case"A":return BS(hy,G$,!1);case"m":return String(G$);case"mm":return Lr.s(G$,2,"0");case"s":return String(K$.$s);case"ss":return Lr.s(K$.$s,2,"0");case"SSS":return Lr.s(K$.$ms,3,"0");case"Z":return U$}return null}(MS)||U$.replace(":","")})},my.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},my.diff=function($t,K$,Y$){var W$,U$=this,hy=Lr.p(K$),G$=Ke($t),ky=(G$.utcOffset()-this.utcOffset())*d,$y=this-G$,rS=function(){return Lr.m(U$,G$)};switch(hy){case N:W$=rS()/12;break;case C:W$=rS();break;case E:W$=rS()/3;break;case x:W$=($y-ky)/6048e5;break;case y:W$=($y-ky)/864e5;break;case $:W$=$y/f;break;case b:W$=$y/d;break;case v:W$=$y/c;break;default:W$=$y}return Y$?W$:Lr.a(W$)},my.daysInMonth=function(){return this.endOf(C).$D},my.$locale=function(){return Se[this.$L]},my.locale=function($t,K$){if(!$t)return this.$L;var Y$=this.clone(),W$=Be($t,K$,!0);return W$&&(Y$.$L=W$),Y$},my.clone=function(){return Lr.w(this.$d,this)},my.toDate=function(){return new Date(this.valueOf())},my.toJSON=function(){return this.isValid()?this.toISOString():null},my.toISOString=function(){return this.$d.toISOString()},my.toString=function(){return this.$d.toUTCString()},yy}(),by=_y.prototype;return Ke.prototype=by,[["$ms",g],["$s",v],["$m",b],["$H",$],["$W",y],["$M",C],["$y",N],["$D",W]].forEach(function(yy){by[yy[1]]=function(my){return this.$g(my,yy[0],yy[1])}}),Ke.extend=function(yy,my){return yy.$i||(yy(my,_y,Ke),yy.$i=!0),Ke},Ke.locale=Be,Ke.isDayjs=Re,Ke.unix=function(yy){return Ke(1e3*yy)},Ke.en=Se[ge],Ke.Ls=Se,Ke.p={},Ke})})(dayjs_min);var dayjs_minExports=dayjs_min.exports;const dayjs=getDefaultExportFromCjs(dayjs_minExports);var dist={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.sanitizeUrl=s.BLANK_URL=void 0;var l=/^([^\w]*)(javascript|data|vbscript)/im,c=/&#(\w+)(^\w|;)?/g,d=/&(newline|tab);/gi,f=/[\u0000-\u001F\u007F-\u009F\u2000-\u200D\uFEFF]/gim,g=/^.+(:|&colon;)/gim,v=[".","/"];s.BLANK_URL="about:blank";function b(x){return v.indexOf(x[0])>-1}function $(x){var C=x.replace(f,"");return C.replace(c,function(E,N){return String.fromCharCode(N)})}function y(x){if(!x)return s.BLANK_URL;var C=$(x).replace(d,"").replace(f,"").trim();if(!C)return s.BLANK_URL;if(b(C))return C;var E=C.match(g);if(!E)return C;var N=E[0];return l.test(N)?s.BLANK_URL:C}s.sanitizeUrl=y})(dist);var noop$3={value:()=>{}};function dispatch(){for(var s=0,l=arguments.length,c={},d;s<l;++s){if(!(d=arguments[s]+"")||d in c||/[\s.]/.test(d))throw new Error("illegal type: "+d);c[d]=[]}return new Dispatch(c)}function Dispatch(s){this._=s}function parseTypenames$1(s,l){return s.trim().split(/^|\s+/).map(function(c){var d="",f=c.indexOf(".");if(f>=0&&(d=c.slice(f+1),c=c.slice(0,f)),c&&!l.hasOwnProperty(c))throw new Error("unknown type: "+c);return{type:c,name:d}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(s,l){var c=this._,d=parseTypenames$1(s+"",c),f,g=-1,v=d.length;if(arguments.length<2){for(;++g<v;)if((f=(s=d[g]).type)&&(f=get$1(c[f],s.name)))return f;return}if(l!=null&&typeof l!="function")throw new Error("invalid callback: "+l);for(;++g<v;)if(f=(s=d[g]).type)c[f]=set$2(c[f],s.name,l);else if(l==null)for(f in c)c[f]=set$2(c[f],s.name,null);return this},copy:function(){var s={},l=this._;for(var c in l)s[c]=l[c].slice();return new Dispatch(s)},call:function(s,l){if((f=arguments.length-2)>0)for(var c=new Array(f),d=0,f,g;d<f;++d)c[d]=arguments[d+2];if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(g=this._[s],d=0,f=g.length;d<f;++d)g[d].value.apply(l,c)},apply:function(s,l,c){if(!this._.hasOwnProperty(s))throw new Error("unknown type: "+s);for(var d=this._[s],f=0,g=d.length;f<g;++f)d[f].value.apply(l,c)}};function get$1(s,l){for(var c=0,d=s.length,f;c<d;++c)if((f=s[c]).name===l)return f.value}function set$2(s,l,c){for(var d=0,f=s.length;d<f;++d)if(s[d].name===l){s[d]=noop$3,s=s.slice(0,d).concat(s.slice(d+1));break}return c!=null&&s.push({name:l,value:c}),s}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(s){var l=s+="",c=l.indexOf(":");return c>=0&&(l=s.slice(0,c))!=="xmlns"&&(s=s.slice(c+1)),namespaces.hasOwnProperty(l)?{space:namespaces[l],local:s}:s}function creatorInherit(s){return function(){var l=this.ownerDocument,c=this.namespaceURI;return c===xhtml&&l.documentElement.namespaceURI===xhtml?l.createElement(s):l.createElementNS(c,s)}}function creatorFixed(s){return function(){return this.ownerDocument.createElementNS(s.space,s.local)}}function creator(s){var l=namespace(s);return(l.local?creatorFixed:creatorInherit)(l)}function none(){}function selector(s){return s==null?none:function(){return this.querySelector(s)}}function selection_select(s){typeof s!="function"&&(s=selector(s));for(var l=this._groups,c=l.length,d=new Array(c),f=0;f<c;++f)for(var g=l[f],v=g.length,b=d[f]=new Array(v),$,y,x=0;x<v;++x)($=g[x])&&(y=s.call($,$.__data__,x,g))&&("__data__"in $&&(y.__data__=$.__data__),b[x]=y);return new Selection$1(d,this._parents)}function array(s){return s==null?[]:Array.isArray(s)?s:Array.from(s)}function empty(){return[]}function selectorAll(s){return s==null?empty:function(){return this.querySelectorAll(s)}}function arrayAll(s){return function(){return array(s.apply(this,arguments))}}function selection_selectAll(s){typeof s=="function"?s=arrayAll(s):s=selectorAll(s);for(var l=this._groups,c=l.length,d=[],f=[],g=0;g<c;++g)for(var v=l[g],b=v.length,$,y=0;y<b;++y)($=v[y])&&(d.push(s.call($,$.__data__,y,v)),f.push($));return new Selection$1(d,f)}function matcher(s){return function(){return this.matches(s)}}function childMatcher(s){return function(l){return l.matches(s)}}var find$1=Array.prototype.find;function childFind(s){return function(){return find$1.call(this.children,s)}}function childFirst(){return this.firstElementChild}function selection_selectChild(s){return this.select(s==null?childFirst:childFind(typeof s=="function"?s:childMatcher(s)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(s){return function(){return filter.call(this.children,s)}}function selection_selectChildren(s){return this.selectAll(s==null?children:childrenFilter(typeof s=="function"?s:childMatcher(s)))}function selection_filter(s){typeof s!="function"&&(s=matcher(s));for(var l=this._groups,c=l.length,d=new Array(c),f=0;f<c;++f)for(var g=l[f],v=g.length,b=d[f]=[],$,y=0;y<v;++y)($=g[y])&&s.call($,$.__data__,y,g)&&b.push($);return new Selection$1(d,this._parents)}function sparse(s){return new Array(s.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(s,l){this.ownerDocument=s.ownerDocument,this.namespaceURI=s.namespaceURI,this._next=null,this._parent=s,this.__data__=l}EnterNode.prototype={constructor:EnterNode,appendChild:function(s){return this._parent.insertBefore(s,this._next)},insertBefore:function(s,l){return this._parent.insertBefore(s,l)},querySelector:function(s){return this._parent.querySelector(s)},querySelectorAll:function(s){return this._parent.querySelectorAll(s)}};function constant$2(s){return function(){return s}}function bindIndex(s,l,c,d,f,g){for(var v=0,b,$=l.length,y=g.length;v<y;++v)(b=l[v])?(b.__data__=g[v],d[v]=b):c[v]=new EnterNode(s,g[v]);for(;v<$;++v)(b=l[v])&&(f[v]=b)}function bindKey(s,l,c,d,f,g,v){var b,$,y=new Map,x=l.length,C=g.length,E=new Array(x),N;for(b=0;b<x;++b)($=l[b])&&(E[b]=N=v.call($,$.__data__,b,l)+"",y.has(N)?f[b]=$:y.set(N,$));for(b=0;b<C;++b)N=v.call(s,g[b],b,g)+"",($=y.get(N))?(d[b]=$,$.__data__=g[b],y.delete(N)):c[b]=new EnterNode(s,g[b]);for(b=0;b<x;++b)($=l[b])&&y.get(E[b])===$&&(f[b]=$)}function datum(s){return s.__data__}function selection_data(s,l){if(!arguments.length)return Array.from(this,datum);var c=l?bindKey:bindIndex,d=this._parents,f=this._groups;typeof s!="function"&&(s=constant$2(s));for(var g=f.length,v=new Array(g),b=new Array(g),$=new Array(g),y=0;y<g;++y){var x=d[y],C=f[y],E=C.length,N=arraylike(s.call(x,x&&x.__data__,y,d)),W=N.length,q=b[y]=new Array(W),Y=v[y]=new Array(W),re=$[y]=new Array(E);c(x,C,q,Y,re,N,l);for(var se=0,de=0,he,ge;se<W;++se)if(he=q[se]){for(se>=de&&(de=se+1);!(ge=Y[de])&&++de<W;);he._next=ge||null}}return v=new Selection$1(v,d),v._enter=b,v._exit=$,v}function arraylike(s){return typeof s=="object"&&"length"in s?s:Array.from(s)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(s,l,c){var d=this.enter(),f=this,g=this.exit();return typeof s=="function"?(d=s(d),d&&(d=d.selection())):d=d.append(s+""),l!=null&&(f=l(f),f&&(f=f.selection())),c==null?g.remove():c(g),d&&f?d.merge(f).order():f}function selection_merge(s){for(var l=s.selection?s.selection():s,c=this._groups,d=l._groups,f=c.length,g=d.length,v=Math.min(f,g),b=new Array(f),$=0;$<v;++$)for(var y=c[$],x=d[$],C=y.length,E=b[$]=new Array(C),N,W=0;W<C;++W)(N=y[W]||x[W])&&(E[W]=N);for(;$<f;++$)b[$]=c[$];return new Selection$1(b,this._parents)}function selection_order(){for(var s=this._groups,l=-1,c=s.length;++l<c;)for(var d=s[l],f=d.length-1,g=d[f],v;--f>=0;)(v=d[f])&&(g&&v.compareDocumentPosition(g)^4&&g.parentNode.insertBefore(v,g),g=v);return this}function selection_sort(s){s||(s=ascending);function l(C,E){return C&&E?s(C.__data__,E.__data__):!C-!E}for(var c=this._groups,d=c.length,f=new Array(d),g=0;g<d;++g){for(var v=c[g],b=v.length,$=f[g]=new Array(b),y,x=0;x<b;++x)(y=v[x])&&($[x]=y);$.sort(l)}return new Selection$1(f,this._parents).order()}function ascending(s,l){return s<l?-1:s>l?1:s>=l?0:NaN}function selection_call(){var s=arguments[0];return arguments[0]=this,s.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var s=this._groups,l=0,c=s.length;l<c;++l)for(var d=s[l],f=0,g=d.length;f<g;++f){var v=d[f];if(v)return v}return null}function selection_size(){let s=0;for(const l of this)++s;return s}function selection_empty(){return!this.node()}function selection_each(s){for(var l=this._groups,c=0,d=l.length;c<d;++c)for(var f=l[c],g=0,v=f.length,b;g<v;++g)(b=f[g])&&s.call(b,b.__data__,g,f);return this}function attrRemove$1(s){return function(){this.removeAttribute(s)}}function attrRemoveNS$1(s){return function(){this.removeAttributeNS(s.space,s.local)}}function attrConstant$1(s,l){return function(){this.setAttribute(s,l)}}function attrConstantNS$1(s,l){return function(){this.setAttributeNS(s.space,s.local,l)}}function attrFunction$1(s,l){return function(){var c=l.apply(this,arguments);c==null?this.removeAttribute(s):this.setAttribute(s,c)}}function attrFunctionNS$1(s,l){return function(){var c=l.apply(this,arguments);c==null?this.removeAttributeNS(s.space,s.local):this.setAttributeNS(s.space,s.local,c)}}function selection_attr(s,l){var c=namespace(s);if(arguments.length<2){var d=this.node();return c.local?d.getAttributeNS(c.space,c.local):d.getAttribute(c)}return this.each((l==null?c.local?attrRemoveNS$1:attrRemove$1:typeof l=="function"?c.local?attrFunctionNS$1:attrFunction$1:c.local?attrConstantNS$1:attrConstant$1)(c,l))}function defaultView(s){return s.ownerDocument&&s.ownerDocument.defaultView||s.document&&s||s.defaultView}function styleRemove$1(s){return function(){this.style.removeProperty(s)}}function styleConstant$1(s,l,c){return function(){this.style.setProperty(s,l,c)}}function styleFunction$1(s,l,c){return function(){var d=l.apply(this,arguments);d==null?this.style.removeProperty(s):this.style.setProperty(s,d,c)}}function selection_style(s,l,c){return arguments.length>1?this.each((l==null?styleRemove$1:typeof l=="function"?styleFunction$1:styleConstant$1)(s,l,c??"")):styleValue(this.node(),s)}function styleValue(s,l){return s.style.getPropertyValue(l)||defaultView(s).getComputedStyle(s,null).getPropertyValue(l)}function propertyRemove(s){return function(){delete this[s]}}function propertyConstant(s,l){return function(){this[s]=l}}function propertyFunction(s,l){return function(){var c=l.apply(this,arguments);c==null?delete this[s]:this[s]=c}}function selection_property(s,l){return arguments.length>1?this.each((l==null?propertyRemove:typeof l=="function"?propertyFunction:propertyConstant)(s,l)):this.node()[s]}function classArray(s){return s.trim().split(/^|\s+/)}function classList(s){return s.classList||new ClassList(s)}function ClassList(s){this._node=s,this._names=classArray(s.getAttribute("class")||"")}ClassList.prototype={add:function(s){var l=this._names.indexOf(s);l<0&&(this._names.push(s),this._node.setAttribute("class",this._names.join(" ")))},remove:function(s){var l=this._names.indexOf(s);l>=0&&(this._names.splice(l,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(s){return this._names.indexOf(s)>=0}};function classedAdd(s,l){for(var c=classList(s),d=-1,f=l.length;++d<f;)c.add(l[d])}function classedRemove(s,l){for(var c=classList(s),d=-1,f=l.length;++d<f;)c.remove(l[d])}function classedTrue(s){return function(){classedAdd(this,s)}}function classedFalse(s){return function(){classedRemove(this,s)}}function classedFunction(s,l){return function(){(l.apply(this,arguments)?classedAdd:classedRemove)(this,s)}}function selection_classed(s,l){var c=classArray(s+"");if(arguments.length<2){for(var d=classList(this.node()),f=-1,g=c.length;++f<g;)if(!d.contains(c[f]))return!1;return!0}return this.each((typeof l=="function"?classedFunction:l?classedTrue:classedFalse)(c,l))}function textRemove(){this.textContent=""}function textConstant$1(s){return function(){this.textContent=s}}function textFunction$1(s){return function(){var l=s.apply(this,arguments);this.textContent=l??""}}function selection_text(s){return arguments.length?this.each(s==null?textRemove:(typeof s=="function"?textFunction$1:textConstant$1)(s)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(s){return function(){this.innerHTML=s}}function htmlFunction(s){return function(){var l=s.apply(this,arguments);this.innerHTML=l??""}}function selection_html(s){return arguments.length?this.each(s==null?htmlRemove:(typeof s=="function"?htmlFunction:htmlConstant)(s)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(s){var l=typeof s=="function"?s:creator(s);return this.select(function(){return this.appendChild(l.apply(this,arguments))})}function constantNull(){return null}function selection_insert(s,l){var c=typeof s=="function"?s:creator(s),d=l==null?constantNull:typeof l=="function"?l:selector(l);return this.select(function(){return this.insertBefore(c.apply(this,arguments),d.apply(this,arguments)||null)})}function remove(){var s=this.parentNode;s&&s.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var s=this.cloneNode(!1),l=this.parentNode;return l?l.insertBefore(s,this.nextSibling):s}function selection_cloneDeep(){var s=this.cloneNode(!0),l=this.parentNode;return l?l.insertBefore(s,this.nextSibling):s}function selection_clone(s){return this.select(s?selection_cloneDeep:selection_cloneShallow)}function selection_datum(s){return arguments.length?this.property("__data__",s):this.node().__data__}function contextListener(s){return function(l){s.call(this,l,this.__data__)}}function parseTypenames(s){return s.trim().split(/^|\s+/).map(function(l){var c="",d=l.indexOf(".");return d>=0&&(c=l.slice(d+1),l=l.slice(0,d)),{type:l,name:c}})}function onRemove(s){return function(){var l=this.__on;if(l){for(var c=0,d=-1,f=l.length,g;c<f;++c)g=l[c],(!s.type||g.type===s.type)&&g.name===s.name?this.removeEventListener(g.type,g.listener,g.options):l[++d]=g;++d?l.length=d:delete this.__on}}}function onAdd(s,l,c){return function(){var d=this.__on,f,g=contextListener(l);if(d){for(var v=0,b=d.length;v<b;++v)if((f=d[v]).type===s.type&&f.name===s.name){this.removeEventListener(f.type,f.listener,f.options),this.addEventListener(f.type,f.listener=g,f.options=c),f.value=l;return}}this.addEventListener(s.type,g,c),f={type:s.type,name:s.name,value:l,listener:g,options:c},d?d.push(f):this.__on=[f]}}function selection_on(s,l,c){var d=parseTypenames(s+""),f,g=d.length,v;if(arguments.length<2){var b=this.node().__on;if(b){for(var $=0,y=b.length,x;$<y;++$)for(f=0,x=b[$];f<g;++f)if((v=d[f]).type===x.type&&v.name===x.name)return x.value}return}for(b=l?onAdd:onRemove,f=0;f<g;++f)this.each(b(d[f],l,c));return this}function dispatchEvent(s,l,c){var d=defaultView(s),f=d.CustomEvent;typeof f=="function"?f=new f(l,c):(f=d.document.createEvent("Event"),c?(f.initEvent(l,c.bubbles,c.cancelable),f.detail=c.detail):f.initEvent(l,!1,!1)),s.dispatchEvent(f)}function dispatchConstant(s,l){return function(){return dispatchEvent(this,s,l)}}function dispatchFunction(s,l){return function(){return dispatchEvent(this,s,l.apply(this,arguments))}}function selection_dispatch(s,l){return this.each((typeof l=="function"?dispatchFunction:dispatchConstant)(s,l))}function*selection_iterator(){for(var s=this._groups,l=0,c=s.length;l<c;++l)for(var d=s[l],f=0,g=d.length,v;f<g;++f)(v=d[f])&&(yield v)}var root$1=[null];function Selection$1(s,l){this._groups=s,this._parents=l}function selection(){return new Selection$1([[document.documentElement]],root$1)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(s){return typeof s=="string"?new Selection$1([[document.querySelector(s)]],[document.documentElement]):new Selection$1([[s]],root$1)}function define$1(s,l,c){s.prototype=l.prototype=c,c.constructor=s}function extend$2(s,l){var c=Object.create(s.prototype);for(var d in l)c[d]=l[d];return c}function Color$2(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define$1(Color$2,color,{copy(s){return Object.assign(new this.constructor,this,s)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(s){var l,c;return s=(s+"").trim().toLowerCase(),(l=reHex.exec(s))?(c=l[1].length,l=parseInt(l[1],16),c===6?rgbn(l):c===3?new Rgb(l>>8&15|l>>4&240,l>>4&15|l&240,(l&15)<<4|l&15,1):c===8?rgba$1(l>>24&255,l>>16&255,l>>8&255,(l&255)/255):c===4?rgba$1(l>>12&15|l>>8&240,l>>8&15|l>>4&240,l>>4&15|l&240,((l&15)<<4|l&15)/255):null):(l=reRgbInteger.exec(s))?new Rgb(l[1],l[2],l[3],1):(l=reRgbPercent.exec(s))?new Rgb(l[1]*255/100,l[2]*255/100,l[3]*255/100,1):(l=reRgbaInteger.exec(s))?rgba$1(l[1],l[2],l[3],l[4]):(l=reRgbaPercent.exec(s))?rgba$1(l[1]*255/100,l[2]*255/100,l[3]*255/100,l[4]):(l=reHslPercent.exec(s))?hsla(l[1],l[2]/100,l[3]/100,1):(l=reHslaPercent.exec(s))?hsla(l[1],l[2]/100,l[3]/100,l[4]):named.hasOwnProperty(s)?rgbn(named[s]):s==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(s){return new Rgb(s>>16&255,s>>8&255,s&255,1)}function rgba$1(s,l,c,d){return d<=0&&(s=l=c=NaN),new Rgb(s,l,c,d)}function rgbConvert(s){return s instanceof Color$2||(s=color(s)),s?(s=s.rgb(),new Rgb(s.r,s.g,s.b,s.opacity)):new Rgb}function rgb(s,l,c,d){return arguments.length===1?rgbConvert(s):new Rgb(s,l,c,d??1)}function Rgb(s,l,c,d){this.r=+s,this.g=+l,this.b=+c,this.opacity=+d}define$1(Rgb,rgb,extend$2(Color$2,{brighter(s){return s=s==null?brighter:Math.pow(brighter,s),new Rgb(this.r*s,this.g*s,this.b*s,this.opacity)},darker(s){return s=s==null?darker:Math.pow(darker,s),new Rgb(this.r*s,this.g*s,this.b*s,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const s=clampa(this.opacity);return`${s===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${s===1?")":`, ${s})`}`}function clampa(s){return isNaN(s)?1:Math.max(0,Math.min(1,s))}function clampi(s){return Math.max(0,Math.min(255,Math.round(s)||0))}function hex(s){return s=clampi(s),(s<16?"0":"")+s.toString(16)}function hsla(s,l,c,d){return d<=0?s=l=c=NaN:c<=0||c>=1?s=l=NaN:l<=0&&(s=NaN),new Hsl(s,l,c,d)}function hslConvert(s){if(s instanceof Hsl)return new Hsl(s.h,s.s,s.l,s.opacity);if(s instanceof Color$2||(s=color(s)),!s)return new Hsl;if(s instanceof Hsl)return s;s=s.rgb();var l=s.r/255,c=s.g/255,d=s.b/255,f=Math.min(l,c,d),g=Math.max(l,c,d),v=NaN,b=g-f,$=(g+f)/2;return b?(l===g?v=(c-d)/b+(c<d)*6:c===g?v=(d-l)/b+2:v=(l-c)/b+4,b/=$<.5?g+f:2-g-f,v*=60):b=$>0&&$<1?0:v,new Hsl(v,b,$,s.opacity)}function hsl(s,l,c,d){return arguments.length===1?hslConvert(s):new Hsl(s,l,c,d??1)}function Hsl(s,l,c,d){this.h=+s,this.s=+l,this.l=+c,this.opacity=+d}define$1(Hsl,hsl,extend$2(Color$2,{brighter(s){return s=s==null?brighter:Math.pow(brighter,s),new Hsl(this.h,this.s,this.l*s,this.opacity)},darker(s){return s=s==null?darker:Math.pow(darker,s),new Hsl(this.h,this.s,this.l*s,this.opacity)},rgb(){var s=this.h%360+(this.h<0)*360,l=isNaN(s)||isNaN(this.s)?0:this.s,c=this.l,d=c+(c<.5?c:1-c)*l,f=2*c-d;return new Rgb(hsl2rgb(s>=240?s-240:s+120,f,d),hsl2rgb(s,f,d),hsl2rgb(s<120?s+240:s-120,f,d),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const s=clampa(this.opacity);return`${s===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${s===1?")":`, ${s})`}`}}));function clamph(s){return s=(s||0)%360,s<0?s+360:s}function clampt(s){return Math.max(0,Math.min(1,s||0))}function hsl2rgb(s,l,c){return(s<60?l+(c-l)*s/60:s<180?c:s<240?l+(c-l)*(240-s)/60:l)*255}const constant$1=s=>()=>s;function linear(s,l){return function(c){return s+c*l}}function exponential(s,l,c){return s=Math.pow(s,c),l=Math.pow(l,c)-s,c=1/c,function(d){return Math.pow(s+d*l,c)}}function hue$1(s,l){var c=l-s;return c?linear(s,c>180||c<-180?c-360*Math.round(c/360):c):constant$1(isNaN(s)?l:s)}function gamma(s){return(s=+s)==1?nogamma:function(l,c){return c-l?exponential(l,c,s):constant$1(isNaN(l)?c:l)}}function nogamma(s,l){var c=l-s;return c?linear(s,c):constant$1(isNaN(s)?l:s)}const interpolateRgb=function s(l){var c=gamma(l);function d(f,g){var v=c((f=rgb(f)).r,(g=rgb(g)).r),b=c(f.g,g.g),$=c(f.b,g.b),y=nogamma(f.opacity,g.opacity);return function(x){return f.r=v(x),f.g=b(x),f.b=$(x),f.opacity=y(x),f+""}}return d.gamma=s,d}(1);function interpolateNumber(s,l){return s=+s,l=+l,function(c){return s*(1-c)+l*c}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(s){return function(){return s}}function one$1(s){return function(l){return s(l)+""}}function interpolateString(s,l){var c=reA.lastIndex=reB.lastIndex=0,d,f,g,v=-1,b=[],$=[];for(s=s+"",l=l+"";(d=reA.exec(s))&&(f=reB.exec(l));)(g=f.index)>c&&(g=l.slice(c,g),b[v]?b[v]+=g:b[++v]=g),(d=d[0])===(f=f[0])?b[v]?b[v]+=f:b[++v]=f:(b[++v]=null,$.push({i:v,x:interpolateNumber(d,f)})),c=reB.lastIndex;return c<l.length&&(g=l.slice(c),b[v]?b[v]+=g:b[++v]=g),b.length<2?$[0]?one$1($[0].x):zero(l):(l=$.length,function(y){for(var x=0,C;x<l;++x)b[(C=$[x]).i]=C.x(y);return b.join("")})}var degrees=180/Math.PI,identity$1={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(s,l,c,d,f,g){var v,b,$;return(v=Math.sqrt(s*s+l*l))&&(s/=v,l/=v),($=s*c+l*d)&&(c-=s*$,d-=l*$),(b=Math.sqrt(c*c+d*d))&&(c/=b,d/=b,$/=b),s*d<l*c&&(s=-s,l=-l,$=-$,v=-v),{translateX:f,translateY:g,rotate:Math.atan2(l,s)*degrees,skewX:Math.atan($)*degrees,scaleX:v,scaleY:b}}var svgNode;function parseCss(s){const l=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(s+"");return l.isIdentity?identity$1:decompose(l.a,l.b,l.c,l.d,l.e,l.f)}function parseSvg(s){return s==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",s),!(s=svgNode.transform.baseVal.consolidate()))?identity$1:(s=s.matrix,decompose(s.a,s.b,s.c,s.d,s.e,s.f))}function interpolateTransform(s,l,c,d){function f(y){return y.length?y.pop()+" ":""}function g(y,x,C,E,N,W){if(y!==C||x!==E){var q=N.push("translate(",null,l,null,c);W.push({i:q-4,x:interpolateNumber(y,C)},{i:q-2,x:interpolateNumber(x,E)})}else(C||E)&&N.push("translate("+C+l+E+c)}function v(y,x,C,E){y!==x?(y-x>180?x+=360:x-y>180&&(y+=360),E.push({i:C.push(f(C)+"rotate(",null,d)-2,x:interpolateNumber(y,x)})):x&&C.push(f(C)+"rotate("+x+d)}function b(y,x,C,E){y!==x?E.push({i:C.push(f(C)+"skewX(",null,d)-2,x:interpolateNumber(y,x)}):x&&C.push(f(C)+"skewX("+x+d)}function $(y,x,C,E,N,W){if(y!==C||x!==E){var q=N.push(f(N)+"scale(",null,",",null,")");W.push({i:q-4,x:interpolateNumber(y,C)},{i:q-2,x:interpolateNumber(x,E)})}else(C!==1||E!==1)&&N.push(f(N)+"scale("+C+","+E+")")}return function(y,x){var C=[],E=[];return y=s(y),x=s(x),g(y.translateX,y.translateY,x.translateX,x.translateY,C,E),v(y.rotate,x.rotate,C,E),b(y.skewX,x.skewX,C,E),$(y.scaleX,y.scaleY,x.scaleX,x.scaleY,C,E),y=x=null,function(N){for(var W=-1,q=E.length,Y;++W<q;)C[(Y=E[W]).i]=Y.x(N);return C.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(s){setTimeout(s,17)};function now(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(s,l,c){if(typeof s!="function")throw new TypeError("callback is not a function");c=(c==null?now():+c)+(l==null?0:+l),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=s,this._time=c,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(s,l,c){var d=new Timer;return d.restart(s,l,c),d}function timerFlush(){now(),++frame;for(var s=taskHead,l;s;)(l=clockNow-s._time)>=0&&s._call.call(void 0,l),s=s._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var s=clock.now(),l=s-clockLast;l>pokeDelay&&(clockSkew-=l,clockLast=s)}function nap(){for(var s,l=taskHead,c,d=1/0;l;)l._call?(d>l._time&&(d=l._time),s=l,l=l._next):(c=l._next,l._next=null,l=s?s._next=c:taskHead=c);taskTail=s,sleep(d)}function sleep(s){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var l=s-clockNow;l>24?(s<1/0&&(timeout$1=setTimeout(wake,s-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(s,l,c){var d=new Timer;return l=l==null?0:+l,d.restart(f=>{d.stop(),s(f+l)},l,c),d}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(s,l,c,d,f,g){var v=s.__transition;if(!v)s.__transition={};else if(c in v)return;create$1(s,c,{name:l,index:d,group:f,on:emptyOn,tween:emptyTween,time:g.time,delay:g.delay,duration:g.duration,ease:g.ease,timer:null,state:CREATED})}function init$5(s,l){var c=get(s,l);if(c.state>CREATED)throw new Error("too late; already scheduled");return c}function set$1(s,l){var c=get(s,l);if(c.state>STARTED)throw new Error("too late; already running");return c}function get(s,l){var c=s.__transition;if(!c||!(c=c[l]))throw new Error("transition not found");return c}function create$1(s,l,c){var d=s.__transition,f;d[l]=c,c.timer=timer(g,0,c.time);function g(y){c.state=SCHEDULED,c.timer.restart(v,c.delay,c.time),c.delay<=y&&v(y-c.delay)}function v(y){var x,C,E,N;if(c.state!==SCHEDULED)return $();for(x in d)if(N=d[x],N.name===c.name){if(N.state===STARTED)return timeout(v);N.state===RUNNING?(N.state=ENDED,N.timer.stop(),N.on.call("interrupt",s,s.__data__,N.index,N.group),delete d[x]):+x<l&&(N.state=ENDED,N.timer.stop(),N.on.call("cancel",s,s.__data__,N.index,N.group),delete d[x])}if(timeout(function(){c.state===STARTED&&(c.state=RUNNING,c.timer.restart(b,c.delay,c.time),b(y))}),c.state=STARTING,c.on.call("start",s,s.__data__,c.index,c.group),c.state===STARTING){for(c.state=STARTED,f=new Array(E=c.tween.length),x=0,C=-1;x<E;++x)(N=c.tween[x].value.call(s,s.__data__,c.index,c.group))&&(f[++C]=N);f.length=C+1}}function b(y){for(var x=y<c.duration?c.ease.call(null,y/c.duration):(c.timer.restart($),c.state=ENDING,1),C=-1,E=f.length;++C<E;)f[C].call(s,x);c.state===ENDING&&(c.on.call("end",s,s.__data__,c.index,c.group),$())}function $(){c.state=ENDED,c.timer.stop(),delete d[l];for(var y in d)return;delete s.__transition}}function interrupt(s,l){var c=s.__transition,d,f,g=!0,v;if(c){l=l==null?null:l+"";for(v in c){if((d=c[v]).name!==l){g=!1;continue}f=d.state>STARTING&&d.state<ENDING,d.state=ENDED,d.timer.stop(),d.on.call(f?"interrupt":"cancel",s,s.__data__,d.index,d.group),delete c[v]}g&&delete s.__transition}}function selection_interrupt(s){return this.each(function(){interrupt(this,s)})}function tweenRemove(s,l){var c,d;return function(){var f=set$1(this,s),g=f.tween;if(g!==c){d=c=g;for(var v=0,b=d.length;v<b;++v)if(d[v].name===l){d=d.slice(),d.splice(v,1);break}}f.tween=d}}function tweenFunction(s,l,c){var d,f;if(typeof c!="function")throw new Error;return function(){var g=set$1(this,s),v=g.tween;if(v!==d){f=(d=v).slice();for(var b={name:l,value:c},$=0,y=f.length;$<y;++$)if(f[$].name===l){f[$]=b;break}$===y&&f.push(b)}g.tween=f}}function transition_tween(s,l){var c=this._id;if(s+="",arguments.length<2){for(var d=get(this.node(),c).tween,f=0,g=d.length,v;f<g;++f)if((v=d[f]).name===s)return v.value;return null}return this.each((l==null?tweenRemove:tweenFunction)(c,s,l))}function tweenValue(s,l,c){var d=s._id;return s.each(function(){var f=set$1(this,d);(f.value||(f.value={}))[l]=c.apply(this,arguments)}),function(f){return get(f,d).value[l]}}function interpolate(s,l){var c;return(typeof l=="number"?interpolateNumber:l instanceof color?interpolateRgb:(c=color(l))?(l=c,interpolateRgb):interpolateString)(s,l)}function attrRemove(s){return function(){this.removeAttribute(s)}}function attrRemoveNS(s){return function(){this.removeAttributeNS(s.space,s.local)}}function attrConstant(s,l,c){var d,f=c+"",g;return function(){var v=this.getAttribute(s);return v===f?null:v===d?g:g=l(d=v,c)}}function attrConstantNS(s,l,c){var d,f=c+"",g;return function(){var v=this.getAttributeNS(s.space,s.local);return v===f?null:v===d?g:g=l(d=v,c)}}function attrFunction(s,l,c){var d,f,g;return function(){var v,b=c(this),$;return b==null?void this.removeAttribute(s):(v=this.getAttribute(s),$=b+"",v===$?null:v===d&&$===f?g:(f=$,g=l(d=v,b)))}}function attrFunctionNS(s,l,c){var d,f,g;return function(){var v,b=c(this),$;return b==null?void this.removeAttributeNS(s.space,s.local):(v=this.getAttributeNS(s.space,s.local),$=b+"",v===$?null:v===d&&$===f?g:(f=$,g=l(d=v,b)))}}function transition_attr(s,l){var c=namespace(s),d=c==="transform"?interpolateTransformSvg:interpolate;return this.attrTween(s,typeof l=="function"?(c.local?attrFunctionNS:attrFunction)(c,d,tweenValue(this,"attr."+s,l)):l==null?(c.local?attrRemoveNS:attrRemove)(c):(c.local?attrConstantNS:attrConstant)(c,d,l))}function attrInterpolate(s,l){return function(c){this.setAttribute(s,l.call(this,c))}}function attrInterpolateNS(s,l){return function(c){this.setAttributeNS(s.space,s.local,l.call(this,c))}}function attrTweenNS(s,l){var c,d;function f(){var g=l.apply(this,arguments);return g!==d&&(c=(d=g)&&attrInterpolateNS(s,g)),c}return f._value=l,f}function attrTween(s,l){var c,d;function f(){var g=l.apply(this,arguments);return g!==d&&(c=(d=g)&&attrInterpolate(s,g)),c}return f._value=l,f}function transition_attrTween(s,l){var c="attr."+s;if(arguments.length<2)return(c=this.tween(c))&&c._value;if(l==null)return this.tween(c,null);if(typeof l!="function")throw new Error;var d=namespace(s);return this.tween(c,(d.local?attrTweenNS:attrTween)(d,l))}function delayFunction(s,l){return function(){init$5(this,s).delay=+l.apply(this,arguments)}}function delayConstant(s,l){return l=+l,function(){init$5(this,s).delay=l}}function transition_delay(s){var l=this._id;return arguments.length?this.each((typeof s=="function"?delayFunction:delayConstant)(l,s)):get(this.node(),l).delay}function durationFunction(s,l){return function(){set$1(this,s).duration=+l.apply(this,arguments)}}function durationConstant(s,l){return l=+l,function(){set$1(this,s).duration=l}}function transition_duration(s){var l=this._id;return arguments.length?this.each((typeof s=="function"?durationFunction:durationConstant)(l,s)):get(this.node(),l).duration}function easeConstant(s,l){if(typeof l!="function")throw new Error;return function(){set$1(this,s).ease=l}}function transition_ease(s){var l=this._id;return arguments.length?this.each(easeConstant(l,s)):get(this.node(),l).ease}function easeVarying(s,l){return function(){var c=l.apply(this,arguments);if(typeof c!="function")throw new Error;set$1(this,s).ease=c}}function transition_easeVarying(s){if(typeof s!="function")throw new Error;return this.each(easeVarying(this._id,s))}function transition_filter(s){typeof s!="function"&&(s=matcher(s));for(var l=this._groups,c=l.length,d=new Array(c),f=0;f<c;++f)for(var g=l[f],v=g.length,b=d[f]=[],$,y=0;y<v;++y)($=g[y])&&s.call($,$.__data__,y,g)&&b.push($);return new Transition(d,this._parents,this._name,this._id)}function transition_merge(s){if(s._id!==this._id)throw new Error;for(var l=this._groups,c=s._groups,d=l.length,f=c.length,g=Math.min(d,f),v=new Array(d),b=0;b<g;++b)for(var $=l[b],y=c[b],x=$.length,C=v[b]=new Array(x),E,N=0;N<x;++N)(E=$[N]||y[N])&&(C[N]=E);for(;b<d;++b)v[b]=l[b];return new Transition(v,this._parents,this._name,this._id)}function start$1(s){return(s+"").trim().split(/^|\s+/).every(function(l){var c=l.indexOf(".");return c>=0&&(l=l.slice(0,c)),!l||l==="start"})}function onFunction(s,l,c){var d,f,g=start$1(l)?init$5:set$1;return function(){var v=g(this,s),b=v.on;b!==d&&(f=(d=b).copy()).on(l,c),v.on=f}}function transition_on(s,l){var c=this._id;return arguments.length<2?get(this.node(),c).on.on(s):this.each(onFunction(c,s,l))}function removeFunction(s){return function(){var l=this.parentNode;for(var c in this.__transition)if(+c!==s)return;l&&l.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(s){var l=this._name,c=this._id;typeof s!="function"&&(s=selector(s));for(var d=this._groups,f=d.length,g=new Array(f),v=0;v<f;++v)for(var b=d[v],$=b.length,y=g[v]=new Array($),x,C,E=0;E<$;++E)(x=b[E])&&(C=s.call(x,x.__data__,E,b))&&("__data__"in x&&(C.__data__=x.__data__),y[E]=C,schedule(y[E],l,c,E,y,get(x,c)));return new Transition(g,this._parents,l,c)}function transition_selectAll(s){var l=this._name,c=this._id;typeof s!="function"&&(s=selectorAll(s));for(var d=this._groups,f=d.length,g=[],v=[],b=0;b<f;++b)for(var $=d[b],y=$.length,x,C=0;C<y;++C)if(x=$[C]){for(var E=s.call(x,x.__data__,C,$),N,W=get(x,c),q=0,Y=E.length;q<Y;++q)(N=E[q])&&schedule(N,l,c,q,E,W);g.push(E),v.push(x)}return new Transition(g,v,l,c)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(s,l){var c,d,f;return function(){var g=styleValue(this,s),v=(this.style.removeProperty(s),styleValue(this,s));return g===v?null:g===c&&v===d?f:f=l(c=g,d=v)}}function styleRemove(s){return function(){this.style.removeProperty(s)}}function styleConstant(s,l,c){var d,f=c+"",g;return function(){var v=styleValue(this,s);return v===f?null:v===d?g:g=l(d=v,c)}}function styleFunction(s,l,c){var d,f,g;return function(){var v=styleValue(this,s),b=c(this),$=b+"";return b==null&&($=b=(this.style.removeProperty(s),styleValue(this,s))),v===$?null:v===d&&$===f?g:(f=$,g=l(d=v,b))}}function styleMaybeRemove(s,l){var c,d,f,g="style."+l,v="end."+g,b;return function(){var $=set$1(this,s),y=$.on,x=$.value[g]==null?b||(b=styleRemove(l)):void 0;(y!==c||f!==x)&&(d=(c=y).copy()).on(v,f=x),$.on=d}}function transition_style(s,l,c){var d=(s+="")=="transform"?interpolateTransformCss:interpolate;return l==null?this.styleTween(s,styleNull(s,d)).on("end.style."+s,styleRemove(s)):typeof l=="function"?this.styleTween(s,styleFunction(s,d,tweenValue(this,"style."+s,l))).each(styleMaybeRemove(this._id,s)):this.styleTween(s,styleConstant(s,d,l),c).on("end.style."+s,null)}function styleInterpolate(s,l,c){return function(d){this.style.setProperty(s,l.call(this,d),c)}}function styleTween(s,l,c){var d,f;function g(){var v=l.apply(this,arguments);return v!==f&&(d=(f=v)&&styleInterpolate(s,v,c)),d}return g._value=l,g}function transition_styleTween(s,l,c){var d="style."+(s+="");if(arguments.length<2)return(d=this.tween(d))&&d._value;if(l==null)return this.tween(d,null);if(typeof l!="function")throw new Error;return this.tween(d,styleTween(s,l,c??""))}function textConstant(s){return function(){this.textContent=s}}function textFunction(s){return function(){var l=s(this);this.textContent=l??""}}function transition_text(s){return this.tween("text",typeof s=="function"?textFunction(tweenValue(this,"text",s)):textConstant(s==null?"":s+""))}function textInterpolate(s){return function(l){this.textContent=s.call(this,l)}}function textTween(s){var l,c;function d(){var f=s.apply(this,arguments);return f!==c&&(l=(c=f)&&textInterpolate(f)),l}return d._value=s,d}function transition_textTween(s){var l="text";if(arguments.length<1)return(l=this.tween(l))&&l._value;if(s==null)return this.tween(l,null);if(typeof s!="function")throw new Error;return this.tween(l,textTween(s))}function transition_transition(){for(var s=this._name,l=this._id,c=newId(),d=this._groups,f=d.length,g=0;g<f;++g)for(var v=d[g],b=v.length,$,y=0;y<b;++y)if($=v[y]){var x=get($,l);schedule($,s,c,y,v,{time:x.time+x.delay+x.duration,delay:0,duration:x.duration,ease:x.ease})}return new Transition(d,this._parents,s,c)}function transition_end(){var s,l,c=this,d=c._id,f=c.size();return new Promise(function(g,v){var b={value:v},$={value:function(){--f===0&&g()}};c.each(function(){var y=set$1(this,d),x=y.on;x!==s&&(l=(s=x).copy(),l._.cancel.push(b),l._.interrupt.push(b),l._.end.push($)),y.on=l}),f===0&&g()})}var id$n=0;function Transition(s,l,c,d){this._groups=s,this._parents=l,this._name=c,this._id=d}function newId(){return++id$n}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function cubicInOut(s){return((s*=2)<=1?s*s*s:(s-=2)*s*s+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(s,l){for(var c;!(c=s.__transition)||!(c=c[l]);)if(!(s=s.parentNode))throw new Error(`transition ${l} not found`);return c}function selection_transition(s){var l,c;s instanceof Transition?(l=s._id,s=s._name):(l=newId(),(c=defaultTiming).time=now(),s=s==null?null:s+"");for(var d=this._groups,f=d.length,g=0;g<f;++g)for(var v=d[g],b=v.length,$,y=0;y<b;++y)($=v[y])&&schedule($,s,l,y,v,c||inherit($,l));return new Transition(d,this._parents,s,l)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;const abs$1=Math.abs,atan2=Math.atan2,cos=Math.cos,max$1=Math.max,min$1=Math.min,sin=Math.sin,sqrt=Math.sqrt,epsilon=1e-12,pi$3=Math.PI,halfPi=pi$3/2,tau=2*pi$3;function acos(s){return s>1?0:s<-1?pi$3:Math.acos(s)}function asin(s){return s>=1?halfPi:s<=-1?-halfPi:Math.asin(s)}function Linear(s){this._context=s}Linear.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(s,l):this._context.moveTo(s,l);break;case 1:this._point=2;default:this._context.lineTo(s,l);break}}};function curveLinear(s){return new Linear(s)}class Bump{constructor(l,c){this._context=l,this._x=c}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(l,c){switch(l=+l,c=+c,this._point){case 0:{this._point=1,this._line?this._context.lineTo(l,c):this._context.moveTo(l,c);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+l)/2,this._y0,this._x0,c,l,c):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+c)/2,l,this._y0,l,c);break}}this._x0=l,this._y0=c}}function bumpX(s){return new Bump(s,!0)}function bumpY(s){return new Bump(s,!1)}function noop$2(){}function point$3(s,l,c){s._context.bezierCurveTo((2*s._x0+s._x1)/3,(2*s._y0+s._y1)/3,(s._x0+2*s._x1)/3,(s._y0+2*s._y1)/3,(s._x0+4*s._x1+l)/6,(s._y0+4*s._y1+c)/6)}function Basis(s){this._context=s}Basis.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:point$3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(s,l):this._context.moveTo(s,l);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:point$3(this,s,l);break}this._x0=this._x1,this._x1=s,this._y0=this._y1,this._y1=l}};function curveBasis(s){return new Basis(s)}function BasisClosed(s){this._context=s}BasisClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1,this._x2=s,this._y2=l;break;case 1:this._point=2,this._x3=s,this._y3=l;break;case 2:this._point=3,this._x4=s,this._y4=l,this._context.moveTo((this._x0+4*this._x1+s)/6,(this._y0+4*this._y1+l)/6);break;default:point$3(this,s,l);break}this._x0=this._x1,this._x1=s,this._y0=this._y1,this._y1=l}};function curveBasisClosed(s){return new BasisClosed(s)}function BasisOpen(s){this._context=s}BasisOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var c=(this._x0+4*this._x1+s)/6,d=(this._y0+4*this._y1+l)/6;this._line?this._context.lineTo(c,d):this._context.moveTo(c,d);break;case 3:this._point=4;default:point$3(this,s,l);break}this._x0=this._x1,this._x1=s,this._y0=this._y1,this._y1=l}};function curveBasisOpen(s){return new BasisOpen(s)}function Bundle(s,l){this._basis=new Basis(s),this._beta=l}Bundle.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var s=this._x,l=this._y,c=s.length-1;if(c>0)for(var d=s[0],f=l[0],g=s[c]-d,v=l[c]-f,b=-1,$;++b<=c;)$=b/c,this._basis.point(this._beta*s[b]+(1-this._beta)*(d+$*g),this._beta*l[b]+(1-this._beta)*(f+$*v));this._x=this._y=null,this._basis.lineEnd()},point:function(s,l){this._x.push(+s),this._y.push(+l)}};const curveBundle=function s(l){function c(d){return l===1?new Basis(d):new Bundle(d,l)}return c.beta=function(d){return s(+d)},c}(.85);function point$2(s,l,c){s._context.bezierCurveTo(s._x1+s._k*(s._x2-s._x0),s._y1+s._k*(s._y2-s._y0),s._x2+s._k*(s._x1-l),s._y2+s._k*(s._y1-c),s._x2,s._y2)}function Cardinal(s,l){this._context=s,this._k=(1-l)/6}Cardinal.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:point$2(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(s,l):this._context.moveTo(s,l);break;case 1:this._point=2,this._x1=s,this._y1=l;break;case 2:this._point=3;default:point$2(this,s,l);break}this._x0=this._x1,this._x1=this._x2,this._x2=s,this._y0=this._y1,this._y1=this._y2,this._y2=l}};const curveCardinal=function s(l){function c(d){return new Cardinal(d,l)}return c.tension=function(d){return s(+d)},c}(0);function CardinalClosed(s,l){this._context=s,this._k=(1-l)/6}CardinalClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1,this._x3=s,this._y3=l;break;case 1:this._point=2,this._context.moveTo(this._x4=s,this._y4=l);break;case 2:this._point=3,this._x5=s,this._y5=l;break;default:point$2(this,s,l);break}this._x0=this._x1,this._x1=this._x2,this._x2=s,this._y0=this._y1,this._y1=this._y2,this._y2=l}};const curveCardinalClosed=function s(l){function c(d){return new CardinalClosed(d,l)}return c.tension=function(d){return s(+d)},c}(0);function CardinalOpen(s,l){this._context=s,this._k=(1-l)/6}CardinalOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$2(this,s,l);break}this._x0=this._x1,this._x1=this._x2,this._x2=s,this._y0=this._y1,this._y1=this._y2,this._y2=l}};const curveCardinalOpen=function s(l){function c(d){return new CardinalOpen(d,l)}return c.tension=function(d){return s(+d)},c}(0);function point$1(s,l,c){var d=s._x1,f=s._y1,g=s._x2,v=s._y2;if(s._l01_a>epsilon){var b=2*s._l01_2a+3*s._l01_a*s._l12_a+s._l12_2a,$=3*s._l01_a*(s._l01_a+s._l12_a);d=(d*b-s._x0*s._l12_2a+s._x2*s._l01_2a)/$,f=(f*b-s._y0*s._l12_2a+s._y2*s._l01_2a)/$}if(s._l23_a>epsilon){var y=2*s._l23_2a+3*s._l23_a*s._l12_a+s._l12_2a,x=3*s._l23_a*(s._l23_a+s._l12_a);g=(g*y+s._x1*s._l23_2a-l*s._l12_2a)/x,v=(v*y+s._y1*s._l23_2a-c*s._l12_2a)/x}s._context.bezierCurveTo(d,f,g,v,s._x2,s._y2)}function CatmullRom(s,l){this._context=s,this._alpha=l}CatmullRom.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){if(s=+s,l=+l,this._point){var c=this._x2-s,d=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(s,l):this._context.moveTo(s,l);break;case 1:this._point=2;break;case 2:this._point=3;default:point$1(this,s,l);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=s,this._y0=this._y1,this._y1=this._y2,this._y2=l}};const curveCatmullRom=function s(l){function c(d){return l?new CatmullRom(d,l):new Cardinal(d,0)}return c.alpha=function(d){return s(+d)},c}(.5);function CatmullRomClosed(s,l){this._context=s,this._alpha=l}CatmullRomClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(s,l){if(s=+s,l=+l,this._point){var c=this._x2-s,d=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=s,this._y3=l;break;case 1:this._point=2,this._context.moveTo(this._x4=s,this._y4=l);break;case 2:this._point=3,this._x5=s,this._y5=l;break;default:point$1(this,s,l);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=s,this._y0=this._y1,this._y1=this._y2,this._y2=l}};const curveCatmullRomClosed=function s(l){function c(d){return l?new CatmullRomClosed(d,l):new CardinalClosed(d,0)}return c.alpha=function(d){return s(+d)},c}(.5);function CatmullRomOpen(s,l){this._context=s,this._alpha=l}CatmullRomOpen.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){if(s=+s,l=+l,this._point){var c=this._x2-s,d=this._y2-l;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:point$1(this,s,l);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=s,this._y0=this._y1,this._y1=this._y2,this._y2=l}};const curveCatmullRomOpen=function s(l){function c(d){return l?new CatmullRomOpen(d,l):new CardinalOpen(d,0)}return c.alpha=function(d){return s(+d)},c}(.5);function LinearClosed(s){this._context=s}LinearClosed.prototype={areaStart:noop$2,areaEnd:noop$2,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(s,l){s=+s,l=+l,this._point?this._context.lineTo(s,l):(this._point=1,this._context.moveTo(s,l))}};function curveLinearClosed(s){return new LinearClosed(s)}function sign(s){return s<0?-1:1}function slope3(s,l,c){var d=s._x1-s._x0,f=l-s._x1,g=(s._y1-s._y0)/(d||f<0&&-0),v=(c-s._y1)/(f||d<0&&-0),b=(g*f+v*d)/(d+f);return(sign(g)+sign(v))*Math.min(Math.abs(g),Math.abs(v),.5*Math.abs(b))||0}function slope2(s,l){var c=s._x1-s._x0;return c?(3*(s._y1-s._y0)/c-l)/2:l}function point(s,l,c){var d=s._x0,f=s._y0,g=s._x1,v=s._y1,b=(g-d)/3;s._context.bezierCurveTo(d+b,f+b*l,g-b,v-b*c,g,v)}function MonotoneX(s){this._context=s}MonotoneX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:point(this,this._t0,slope2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(s,l){var c=NaN;if(s=+s,l=+l,!(s===this._x1&&l===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(s,l):this._context.moveTo(s,l);break;case 1:this._point=2;break;case 2:this._point=3,point(this,slope2(this,c=slope3(this,s,l)),c);break;default:point(this,this._t0,c=slope3(this,s,l));break}this._x0=this._x1,this._x1=s,this._y0=this._y1,this._y1=l,this._t0=c}}};function MonotoneY(s){this._context=new ReflectContext(s)}(MonotoneY.prototype=Object.create(MonotoneX.prototype)).point=function(s,l){MonotoneX.prototype.point.call(this,l,s)};function ReflectContext(s){this._context=s}ReflectContext.prototype={moveTo:function(s,l){this._context.moveTo(l,s)},closePath:function(){this._context.closePath()},lineTo:function(s,l){this._context.lineTo(l,s)},bezierCurveTo:function(s,l,c,d,f,g){this._context.bezierCurveTo(l,s,d,c,g,f)}};function monotoneX(s){return new MonotoneX(s)}function monotoneY(s){return new MonotoneY(s)}function Natural(s){this._context=s}Natural.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var s=this._x,l=this._y,c=s.length;if(c)if(this._line?this._context.lineTo(s[0],l[0]):this._context.moveTo(s[0],l[0]),c===2)this._context.lineTo(s[1],l[1]);else for(var d=controlPoints(s),f=controlPoints(l),g=0,v=1;v<c;++g,++v)this._context.bezierCurveTo(d[0][g],f[0][g],d[1][g],f[1][g],s[v],l[v]);(this._line||this._line!==0&&c===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(s,l){this._x.push(+s),this._y.push(+l)}};function controlPoints(s){var l,c=s.length-1,d,f=new Array(c),g=new Array(c),v=new Array(c);for(f[0]=0,g[0]=2,v[0]=s[0]+2*s[1],l=1;l<c-1;++l)f[l]=1,g[l]=4,v[l]=4*s[l]+2*s[l+1];for(f[c-1]=2,g[c-1]=7,v[c-1]=8*s[c-1]+s[c],l=1;l<c;++l)d=f[l]/g[l-1],g[l]-=d,v[l]-=d*v[l-1];for(f[c-1]=v[c-1]/g[c-1],l=c-2;l>=0;--l)f[l]=(v[l]-f[l+1])/g[l];for(g[c-1]=(s[c]+f[c-1])/2,l=0;l<c-1;++l)g[l]=2*s[l+1]-f[l+1];return[f,g]}function curveNatural(s){return new Natural(s)}function Step(s,l){this._context=s,this._t=l}Step.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(s,l){switch(s=+s,l=+l,this._point){case 0:this._point=1,this._line?this._context.lineTo(s,l):this._context.moveTo(s,l);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,l),this._context.lineTo(s,l);else{var c=this._x*(1-this._t)+s*this._t;this._context.lineTo(c,this._y),this._context.lineTo(c,l)}break}}this._x=s,this._y=l}};function curveStep(s){return new Step(s,.5)}function stepBefore(s){return new Step(s,0)}function stepAfter(s){return new Step(s,1)}function Transform(s,l,c){this.k=s,this.x=l,this.y=c}Transform.prototype={constructor:Transform,scale:function(s){return s===1?this:new Transform(this.k*s,this.x,this.y)},translate:function(s,l){return s===0&l===0?this:new Transform(this.k,this.x+this.k*s,this.y+this.k*l)},apply:function(s){return[s[0]*this.k+this.x,s[1]*this.k+this.y]},applyX:function(s){return s*this.k+this.x},applyY:function(s){return s*this.k+this.y},invert:function(s){return[(s[0]-this.x)/this.k,(s[1]-this.y)/this.k]},invertX:function(s){return(s-this.x)/this.k},invertY:function(s){return(s-this.y)/this.k},rescaleX:function(s){return s.copy().domain(s.range().map(this.invertX,this).map(s.invert,s))},rescaleY:function(s){return s.copy().domain(s.range().map(this.invertY,this).map(s.invert,s))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Transform.prototype;/*! @license DOMPurify 3.1.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.6/LICENSE */const{entries,setPrototypeOf,isFrozen,getPrototypeOf,getOwnPropertyDescriptor}=Object;let{freeze,seal,create}=Object,{apply:apply$1,construct}=typeof Reflect<"u"&&Reflect;freeze||(freeze=function(l){return l});seal||(seal=function(l){return l});apply$1||(apply$1=function(l,c,d){return l.apply(c,d)});construct||(construct=function(l,c){return new l(...c)});const arrayForEach=unapply(Array.prototype.forEach),arrayPop=unapply(Array.prototype.pop),arrayPush=unapply(Array.prototype.push),stringToLowerCase=unapply(String.prototype.toLowerCase),stringToString=unapply(String.prototype.toString),stringMatch=unapply(String.prototype.match),stringReplace=unapply(String.prototype.replace),stringIndexOf=unapply(String.prototype.indexOf),stringTrim=unapply(String.prototype.trim),objectHasOwnProperty=unapply(Object.prototype.hasOwnProperty),regExpTest=unapply(RegExp.prototype.test),typeErrorCreate=unconstruct(TypeError);function unapply(s){return function(l){for(var c=arguments.length,d=new Array(c>1?c-1:0),f=1;f<c;f++)d[f-1]=arguments[f];return apply$1(s,l,d)}}function unconstruct(s){return function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];return construct(s,c)}}function addToSet(s,l){let c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:stringToLowerCase;setPrototypeOf&&setPrototypeOf(s,null);let d=l.length;for(;d--;){let f=l[d];if(typeof f=="string"){const g=c(f);g!==f&&(isFrozen(l)||(l[d]=g),f=g)}s[f]=!0}return s}function cleanArray(s){for(let l=0;l<s.length;l++)objectHasOwnProperty(s,l)||(s[l]=null);return s}function clone(s){const l=create(null);for(const[c,d]of entries(s))objectHasOwnProperty(s,c)&&(Array.isArray(d)?l[c]=cleanArray(d):d&&typeof d=="object"&&d.constructor===Object?l[c]=clone(d):l[c]=d);return l}function lookupGetter(s,l){for(;s!==null;){const d=getOwnPropertyDescriptor(s,l);if(d){if(d.get)return unapply(d.get);if(typeof d.value=="function")return unapply(d.value)}s=getPrototypeOf(s)}function c(){return null}return c}const html$1=freeze(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),svg$1=freeze(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),svgFilters=freeze(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),svgDisallowed=freeze(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),mathMl$1=freeze(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),mathMlDisallowed=freeze(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),text$2=freeze(["#text"]),html=freeze(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),svg$2=freeze(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),mathMl=freeze(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),xml=freeze(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),MUSTACHE_EXPR=seal(/\{\{[\w\W]*|[\w\W]*\}\}/gm),ERB_EXPR=seal(/<%[\w\W]*|[\w\W]*%>/gm),TMPLIT_EXPR=seal(/\${[\w\W]*}/gm),DATA_ATTR=seal(/^data-[\-\w.\u00B7-\uFFFF]/),ARIA_ATTR=seal(/^aria-[\-\w]+$/),IS_ALLOWED_URI=seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),IS_SCRIPT_OR_DATA=seal(/^(?:\w+script|data):/i),ATTR_WHITESPACE$1=seal(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),DOCTYPE_NAME=seal(/^html$/i),CUSTOM_ELEMENT=seal(/^[a-z][.\w]*(-[.\w]+)+$/i);var EXPRESSIONS=Object.freeze({__proto__:null,MUSTACHE_EXPR,ERB_EXPR,TMPLIT_EXPR,DATA_ATTR,ARIA_ATTR,IS_ALLOWED_URI,IS_SCRIPT_OR_DATA,ATTR_WHITESPACE:ATTR_WHITESPACE$1,DOCTYPE_NAME,CUSTOM_ELEMENT});const NODE_TYPE={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},getGlobal=function(){return typeof window>"u"?null:window},_createTrustedTypesPolicy=function(l,c){if(typeof l!="object"||typeof l.createPolicy!="function")return null;let d=null;const f="data-tt-policy-suffix";c&&c.hasAttribute(f)&&(d=c.getAttribute(f));const g="dompurify"+(d?"#"+d:"");try{return l.createPolicy(g,{createHTML(v){return v},createScriptURL(v){return v}})}catch{return console.warn("TrustedTypes policy "+g+" could not be created."),null}};function createDOMPurify(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:getGlobal();const l=Dye=>createDOMPurify(Dye);if(l.version="3.1.6",l.removed=[],!s||!s.document||s.document.nodeType!==NODE_TYPE.document)return l.isSupported=!1,l;let{document:c}=s;const d=c,f=d.currentScript,{DocumentFragment:g,HTMLTemplateElement:v,Node:b,Element:$,NodeFilter:y,NamedNodeMap:x=s.NamedNodeMap||s.MozNamedAttrMap,HTMLFormElement:C,DOMParser:E,trustedTypes:N}=s,W=$.prototype,q=lookupGetter(W,"cloneNode"),Y=lookupGetter(W,"remove"),re=lookupGetter(W,"nextSibling"),se=lookupGetter(W,"childNodes"),de=lookupGetter(W,"parentNode");if(typeof v=="function"){const Dye=c.createElement("template");Dye.content&&Dye.content.ownerDocument&&(c=Dye.content.ownerDocument)}let he,ge="";const{implementation:Se,createNodeIterator:Ae,createDocumentFragment:Re,getElementsByTagName:Be}=c,{importNode:Ke}=d;let Lr={};l.isSupported=typeof entries=="function"&&typeof de=="function"&&Se&&Se.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:_y,ERB_EXPR:by,TMPLIT_EXPR:yy,DATA_ATTR:my,ARIA_ATTR:$t,IS_SCRIPT_OR_DATA:K$,ATTR_WHITESPACE:Y$,CUSTOM_ELEMENT:W$}=EXPRESSIONS;let{IS_ALLOWED_URI:U$}=EXPRESSIONS,hy=null;const G$=addToSet({},[...html$1,...svg$1,...svgFilters,...mathMl$1,...text$2]);let ky=null;const $y=addToSet({},[...html,...svg$2,...mathMl,...xml]);let rS=Object.seal(create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),lS=null,bS=null,IS=!0,BS=!0,MS=!1,zS=!0,LS=!1,nS=!0,Z$=!1,dS=!1,ES=!1,wy=!1,tS=!1,yS=!1,Q$=!0,eS=!1;const cS="user-content-";let wS=!0,xS=!1,OS={},mS=null;const pS=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let fC=null;const US=addToSet({},["audio","video","img","source","image","track"]);let Iye=null;const $ye=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Rye="http://www.w3.org/1998/Math/MathML",Uye="http://www.w3.org/2000/svg",DS="http://www.w3.org/1999/xhtml";let HS=DS,Aye=!1,Tye=null;const jye=addToSet({},[Rye,Uye,DS],stringToString);let sS=null;const TS=["application/xhtml+xml","text/html"],AS="text/html";let jS=null,KS=null;const Bye=c.createElement("form"),Kye=function(CS){return CS instanceof RegExp||CS instanceof Function},swe=function(){let CS=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(KS&&KS===CS)){if((!CS||typeof CS!="object")&&(CS={}),CS=clone(CS),sS=TS.indexOf(CS.PARSER_MEDIA_TYPE)===-1?AS:CS.PARSER_MEDIA_TYPE,jS=sS==="application/xhtml+xml"?stringToString:stringToLowerCase,hy=objectHasOwnProperty(CS,"ALLOWED_TAGS")?addToSet({},CS.ALLOWED_TAGS,jS):G$,ky=objectHasOwnProperty(CS,"ALLOWED_ATTR")?addToSet({},CS.ALLOWED_ATTR,jS):$y,Tye=objectHasOwnProperty(CS,"ALLOWED_NAMESPACES")?addToSet({},CS.ALLOWED_NAMESPACES,stringToString):jye,Iye=objectHasOwnProperty(CS,"ADD_URI_SAFE_ATTR")?addToSet(clone($ye),CS.ADD_URI_SAFE_ATTR,jS):$ye,fC=objectHasOwnProperty(CS,"ADD_DATA_URI_TAGS")?addToSet(clone(US),CS.ADD_DATA_URI_TAGS,jS):US,mS=objectHasOwnProperty(CS,"FORBID_CONTENTS")?addToSet({},CS.FORBID_CONTENTS,jS):pS,lS=objectHasOwnProperty(CS,"FORBID_TAGS")?addToSet({},CS.FORBID_TAGS,jS):{},bS=objectHasOwnProperty(CS,"FORBID_ATTR")?addToSet({},CS.FORBID_ATTR,jS):{},OS=objectHasOwnProperty(CS,"USE_PROFILES")?CS.USE_PROFILES:!1,IS=CS.ALLOW_ARIA_ATTR!==!1,BS=CS.ALLOW_DATA_ATTR!==!1,MS=CS.ALLOW_UNKNOWN_PROTOCOLS||!1,zS=CS.ALLOW_SELF_CLOSE_IN_ATTR!==!1,LS=CS.SAFE_FOR_TEMPLATES||!1,nS=CS.SAFE_FOR_XML!==!1,Z$=CS.WHOLE_DOCUMENT||!1,wy=CS.RETURN_DOM||!1,tS=CS.RETURN_DOM_FRAGMENT||!1,yS=CS.RETURN_TRUSTED_TYPE||!1,ES=CS.FORCE_BODY||!1,Q$=CS.SANITIZE_DOM!==!1,eS=CS.SANITIZE_NAMED_PROPS||!1,wS=CS.KEEP_CONTENT!==!1,xS=CS.IN_PLACE||!1,U$=CS.ALLOWED_URI_REGEXP||IS_ALLOWED_URI,HS=CS.NAMESPACE||DS,rS=CS.CUSTOM_ELEMENT_HANDLING||{},CS.CUSTOM_ELEMENT_HANDLING&&Kye(CS.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(rS.tagNameCheck=CS.CUSTOM_ELEMENT_HANDLING.tagNameCheck),CS.CUSTOM_ELEMENT_HANDLING&&Kye(CS.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(rS.attributeNameCheck=CS.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),CS.CUSTOM_ELEMENT_HANDLING&&typeof CS.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(rS.allowCustomizedBuiltInElements=CS.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),LS&&(BS=!1),tS&&(wy=!0),OS&&(hy=addToSet({},text$2),ky=[],OS.html===!0&&(addToSet(hy,html$1),addToSet(ky,html)),OS.svg===!0&&(addToSet(hy,svg$1),addToSet(ky,svg$2),addToSet(ky,xml)),OS.svgFilters===!0&&(addToSet(hy,svgFilters),addToSet(ky,svg$2),addToSet(ky,xml)),OS.mathMl===!0&&(addToSet(hy,mathMl$1),addToSet(ky,mathMl),addToSet(ky,xml))),CS.ADD_TAGS&&(hy===G$&&(hy=clone(hy)),addToSet(hy,CS.ADD_TAGS,jS)),CS.ADD_ATTR&&(ky===$y&&(ky=clone(ky)),addToSet(ky,CS.ADD_ATTR,jS)),CS.ADD_URI_SAFE_ATTR&&addToSet(Iye,CS.ADD_URI_SAFE_ATTR,jS),CS.FORBID_CONTENTS&&(mS===pS&&(mS=clone(mS)),addToSet(mS,CS.FORBID_CONTENTS,jS)),wS&&(hy["#text"]=!0),Z$&&addToSet(hy,["html","head","body"]),hy.table&&(addToSet(hy,["tbody"]),delete lS.tbody),CS.TRUSTED_TYPES_POLICY){if(typeof CS.TRUSTED_TYPES_POLICY.createHTML!="function")throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof CS.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');he=CS.TRUSTED_TYPES_POLICY,ge=he.createHTML("")}else he===void 0&&(he=_createTrustedTypesPolicy(N,f)),he!==null&&typeof ge=="string"&&(ge=he.createHTML(""));freeze&&freeze(CS),KS=CS}},Cwe=addToSet({},["mi","mo","mn","ms","mtext"]),ywe=addToSet({},["foreignobject","annotation-xml"]),hwe=addToSet({},["title","style","font","a","script"]),Vwe=addToSet({},[...svg$1,...svgFilters,...svgDisallowed]),Owe=addToSet({},[...mathMl$1,...mathMlDisallowed]),VS=function(CS){let Sye=de(CS);(!Sye||!Sye.tagName)&&(Sye={namespaceURI:HS,tagName:"template"});const Mye=stringToLowerCase(CS.tagName),rwe=stringToLowerCase(Sye.tagName);return Tye[CS.namespaceURI]?CS.namespaceURI===Uye?Sye.namespaceURI===DS?Mye==="svg":Sye.namespaceURI===Rye?Mye==="svg"&&(rwe==="annotation-xml"||Cwe[rwe]):!!Vwe[Mye]:CS.namespaceURI===Rye?Sye.namespaceURI===DS?Mye==="math":Sye.namespaceURI===Uye?Mye==="math"&&ywe[rwe]:!!Owe[Mye]:CS.namespaceURI===DS?Sye.namespaceURI===Uye&&!ywe[rwe]||Sye.namespaceURI===Rye&&!Cwe[rwe]?!1:!Owe[Mye]&&(hwe[Mye]||!Vwe[Mye]):!!(sS==="application/xhtml+xml"&&Tye[CS.namespaceURI]):!1},Zye=function(CS){arrayPush(l.removed,{element:CS});try{de(CS).removeChild(CS)}catch{Y(CS)}},twe=function(CS,Sye){try{arrayPush(l.removed,{attribute:Sye.getAttributeNode(CS),from:Sye})}catch{arrayPush(l.removed,{attribute:null,from:Sye})}if(Sye.removeAttribute(CS),CS==="is"&&!ky[CS])if(wy||tS)try{Zye(Sye)}catch{}else try{Sye.setAttribute(CS,"")}catch{}},_we=function(CS){let Sye=null,Mye=null;if(ES)CS="<remove></remove>"+CS;else{const $we=stringMatch(CS,/^[\r\n\t ]+/);Mye=$we&&$we[0]}sS==="application/xhtml+xml"&&HS===DS&&(CS='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+CS+"</body></html>");const rwe=he?he.createHTML(CS):CS;if(HS===DS)try{Sye=new E().parseFromString(rwe,sS)}catch{}if(!Sye||!Sye.documentElement){Sye=Se.createDocument(HS,"template",null);try{Sye.documentElement.innerHTML=Aye?ge:rwe}catch{}}const awe=Sye.body||Sye.documentElement;return CS&&Mye&&awe.insertBefore(c.createTextNode(Mye),awe.childNodes[0]||null),HS===DS?Be.call(Sye,Z$?"html":"body")[0]:Z$?Sye.documentElement:awe},Hwe=function(CS){return Ae.call(CS.ownerDocument||CS,CS,y.SHOW_ELEMENT|y.SHOW_COMMENT|y.SHOW_TEXT|y.SHOW_PROCESSING_INSTRUCTION|y.SHOW_CDATA_SECTION,null)},Pwe=function(CS){return CS instanceof C&&(typeof CS.nodeName!="string"||typeof CS.textContent!="string"||typeof CS.removeChild!="function"||!(CS.attributes instanceof x)||typeof CS.removeAttribute!="function"||typeof CS.setAttribute!="function"||typeof CS.namespaceURI!="string"||typeof CS.insertBefore!="function"||typeof CS.hasChildNodes!="function")},Jwe=function(CS){return typeof b=="function"&&CS instanceof b},Nwe=function(CS,Sye,Mye){Lr[CS]&&arrayForEach(Lr[CS],rwe=>{rwe.call(l,Sye,Mye,KS)})},i2e=function(CS){let Sye=null;if(Nwe("beforeSanitizeElements",CS,null),Pwe(CS))return Zye(CS),!0;const Mye=jS(CS.nodeName);if(Nwe("uponSanitizeElement",CS,{tagName:Mye,allowedTags:hy}),CS.hasChildNodes()&&!Jwe(CS.firstElementChild)&&regExpTest(/<[/\w]/g,CS.innerHTML)&&regExpTest(/<[/\w]/g,CS.textContent)||CS.nodeType===NODE_TYPE.progressingInstruction||nS&&CS.nodeType===NODE_TYPE.comment&&regExpTest(/<[/\w]/g,CS.data))return Zye(CS),!0;if(!hy[Mye]||lS[Mye]){if(!lS[Mye]&&Qwe(Mye)&&(rS.tagNameCheck instanceof RegExp&&regExpTest(rS.tagNameCheck,Mye)||rS.tagNameCheck instanceof Function&&rS.tagNameCheck(Mye)))return!1;if(wS&&!mS[Mye]){const rwe=de(CS)||CS.parentNode,awe=se(CS)||CS.childNodes;if(awe&&rwe){const $we=awe.length;for(let Mwe=$we-1;Mwe>=0;--Mwe){const Awe=q(awe[Mwe],!0);Awe.__removalCount=(CS.__removalCount||0)+1,rwe.insertBefore(Awe,re(CS))}}}return Zye(CS),!0}return CS instanceof $&&!VS(CS)||(Mye==="noscript"||Mye==="noembed"||Mye==="noframes")&&regExpTest(/<\/no(script|embed|frames)/i,CS.innerHTML)?(Zye(CS),!0):(LS&&CS.nodeType===NODE_TYPE.text&&(Sye=CS.textContent,arrayForEach([_y,by,yy],rwe=>{Sye=stringReplace(Sye,rwe," ")}),CS.textContent!==Sye&&(arrayPush(l.removed,{element:CS.cloneNode()}),CS.textContent=Sye)),Nwe("afterSanitizeElements",CS,null),!1)},Kwe=function(CS,Sye,Mye){if(Q$&&(Sye==="id"||Sye==="name")&&(Mye in c||Mye in Bye))return!1;if(!(BS&&!bS[Sye]&&regExpTest(my,Sye))){if(!(IS&&regExpTest($t,Sye))){if(!ky[Sye]||bS[Sye]){if(!(Qwe(CS)&&(rS.tagNameCheck instanceof RegExp&&regExpTest(rS.tagNameCheck,CS)||rS.tagNameCheck instanceof Function&&rS.tagNameCheck(CS))&&(rS.attributeNameCheck instanceof RegExp&&regExpTest(rS.attributeNameCheck,Sye)||rS.attributeNameCheck instanceof Function&&rS.attributeNameCheck(Sye))||Sye==="is"&&rS.allowCustomizedBuiltInElements&&(rS.tagNameCheck instanceof RegExp&&regExpTest(rS.tagNameCheck,Mye)||rS.tagNameCheck instanceof Function&&rS.tagNameCheck(Mye))))return!1}else if(!Iye[Sye]){if(!regExpTest(U$,stringReplace(Mye,Y$,""))){if(!((Sye==="src"||Sye==="xlink:href"||Sye==="href")&&CS!=="script"&&stringIndexOf(Mye,"data:")===0&&fC[CS])){if(!(MS&&!regExpTest(K$,stringReplace(Mye,Y$,"")))){if(Mye)return!1}}}}}}return!0},Qwe=function(CS){return CS!=="annotation-xml"&&stringMatch(CS,W$)},e2e=function(CS){Nwe("beforeSanitizeAttributes",CS,null);const{attributes:Sye}=CS;if(!Sye)return;const Mye={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ky};let rwe=Sye.length;for(;rwe--;){const awe=Sye[rwe],{name:$we,namespaceURI:Mwe,value:Awe}=awe,l2e=jS($we);let pwe=$we==="value"?Awe:stringTrim(Awe);if(Mye.attrName=l2e,Mye.attrValue=pwe,Mye.keepAttr=!0,Mye.forceKeepAttr=void 0,Nwe("uponSanitizeAttribute",CS,Mye),pwe=Mye.attrValue,nS&&regExpTest(/((--!?|])>)|<\/(style|title)/i,pwe)){twe($we,CS);continue}if(Mye.forceKeepAttr||(twe($we,CS),!Mye.keepAttr))continue;if(!zS&&regExpTest(/\/>/i,pwe)){twe($we,CS);continue}LS&&arrayForEach([_y,by,yy],u2e=>{pwe=stringReplace(pwe,u2e," ")});const v2e=jS(CS.nodeName);if(Kwe(v2e,l2e,pwe)){if(eS&&(l2e==="id"||l2e==="name")&&(twe($we,CS),pwe=cS+pwe),he&&typeof N=="object"&&typeof N.getAttributeType=="function"&&!Mwe)switch(N.getAttributeType(v2e,l2e)){case"TrustedHTML":{pwe=he.createHTML(pwe);break}case"TrustedScriptURL":{pwe=he.createScriptURL(pwe);break}}try{Mwe?CS.setAttributeNS(Mwe,$we,pwe):CS.setAttribute($we,pwe),Pwe(CS)?Zye(CS):arrayPop(l.removed)}catch{}}}Nwe("afterSanitizeAttributes",CS,null)},t2e=function Dye(CS){let Sye=null;const Mye=Hwe(CS);for(Nwe("beforeSanitizeShadowDOM",CS,null);Sye=Mye.nextNode();)Nwe("uponSanitizeShadowNode",Sye,null),!i2e(Sye)&&(Sye.content instanceof g&&Dye(Sye.content),e2e(Sye));Nwe("afterSanitizeShadowDOM",CS,null)};return l.sanitize=function(Dye){let CS=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Sye=null,Mye=null,rwe=null,awe=null;if(Aye=!Dye,Aye&&(Dye="<!-->"),typeof Dye!="string"&&!Jwe(Dye))if(typeof Dye.toString=="function"){if(Dye=Dye.toString(),typeof Dye!="string")throw typeErrorCreate("dirty is not a string, aborting")}else throw typeErrorCreate("toString is not a function");if(!l.isSupported)return Dye;if(dS||swe(CS),l.removed=[],typeof Dye=="string"&&(xS=!1),xS){if(Dye.nodeName){const Awe=jS(Dye.nodeName);if(!hy[Awe]||lS[Awe])throw typeErrorCreate("root node is forbidden and cannot be sanitized in-place")}}else if(Dye instanceof b)Sye=_we("<!---->"),Mye=Sye.ownerDocument.importNode(Dye,!0),Mye.nodeType===NODE_TYPE.element&&Mye.nodeName==="BODY"||Mye.nodeName==="HTML"?Sye=Mye:Sye.appendChild(Mye);else{if(!wy&&!LS&&!Z$&&Dye.indexOf("<")===-1)return he&&yS?he.createHTML(Dye):Dye;if(Sye=_we(Dye),!Sye)return wy?null:yS?ge:""}Sye&&ES&&Zye(Sye.firstChild);const $we=Hwe(xS?Dye:Sye);for(;rwe=$we.nextNode();)i2e(rwe)||(rwe.content instanceof g&&t2e(rwe.content),e2e(rwe));if(xS)return Dye;if(wy){if(tS)for(awe=Re.call(Sye.ownerDocument);Sye.firstChild;)awe.appendChild(Sye.firstChild);else awe=Sye;return(ky.shadowroot||ky.shadowrootmode)&&(awe=Ke.call(d,awe,!0)),awe}let Mwe=Z$?Sye.outerHTML:Sye.innerHTML;return Z$&&hy["!doctype"]&&Sye.ownerDocument&&Sye.ownerDocument.doctype&&Sye.ownerDocument.doctype.name&&regExpTest(DOCTYPE_NAME,Sye.ownerDocument.doctype.name)&&(Mwe="<!DOCTYPE "+Sye.ownerDocument.doctype.name+`>
`+Mwe),LS&&arrayForEach([_y,by,yy],Awe=>{Mwe=stringReplace(Mwe,Awe," ")}),he&&yS?he.createHTML(Mwe):Mwe},l.setConfig=function(){let Dye=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};swe(Dye),dS=!0},l.clearConfig=function(){KS=null,dS=!1},l.isValidAttribute=function(Dye,CS,Sye){KS||swe({});const Mye=jS(Dye),rwe=jS(CS);return Kwe(Mye,rwe,Sye)},l.addHook=function(Dye,CS){typeof CS=="function"&&(Lr[Dye]=Lr[Dye]||[],arrayPush(Lr[Dye],CS))},l.removeHook=function(Dye){if(Lr[Dye])return arrayPop(Lr[Dye])},l.removeHooks=function(Dye){Lr[Dye]&&(Lr[Dye]=[])},l.removeAllHooks=function(){Lr={}},l}var purify=createDOMPurify();const Channel={min:{r:0,g:0,b:0,s:0,l:0,a:0},max:{r:255,g:255,b:255,h:360,s:100,l:100,a:1},clamp:{r:s=>s>=255?255:s<0?0:s,g:s=>s>=255?255:s<0?0:s,b:s=>s>=255?255:s<0?0:s,h:s=>s%360,s:s=>s>=100?100:s<0?0:s,l:s=>s>=100?100:s<0?0:s,a:s=>s>=1?1:s<0?0:s},toLinear:s=>{const l=s/255;return s>.03928?Math.pow((l+.055)/1.055,2.4):l/12.92},hue2rgb:(s,l,c)=>(c<0&&(c+=1),c>1&&(c-=1),c<1/6?s+(l-s)*6*c:c<1/2?l:c<2/3?s+(l-s)*(2/3-c)*6:s),hsl2rgb:({h:s,s:l,l:c},d)=>{if(!l)return c*2.55;s/=360,l/=100,c/=100;const f=c<.5?c*(1+l):c+l-c*l,g=2*c-f;switch(d){case"r":return Channel.hue2rgb(g,f,s+1/3)*255;case"g":return Channel.hue2rgb(g,f,s)*255;case"b":return Channel.hue2rgb(g,f,s-1/3)*255}},rgb2hsl:({r:s,g:l,b:c},d)=>{s/=255,l/=255,c/=255;const f=Math.max(s,l,c),g=Math.min(s,l,c),v=(f+g)/2;if(d==="l")return v*100;if(f===g)return 0;const b=f-g,$=v>.5?b/(2-f-g):b/(f+g);if(d==="s")return $*100;switch(f){case s:return((l-c)/b+(l<c?6:0))*60;case l:return((c-s)/b+2)*60;case c:return((s-l)/b+4)*60;default:return-1}}},Lang={clamp:(s,l,c)=>l>c?Math.min(l,Math.max(c,s)):Math.min(c,Math.max(l,s)),round:s=>Math.round(s*1e10)/1e10},Unit={dec2hex:s=>{const l=Math.round(s).toString(16);return l.length>1?l:`0${l}`}},Utils={channel:Channel,lang:Lang,unit:Unit},DEC2HEX={};for(let s=0;s<=255;s++)DEC2HEX[s]=Utils.unit.dec2hex(s);const TYPE={ALL:0,RGB:1,HSL:2};class Type{constructor(){this.type=TYPE.ALL}get(){return this.type}set(l){if(this.type&&this.type!==l)throw new Error("Cannot change both RGB and HSL channels at the same time");this.type=l}reset(){this.type=TYPE.ALL}is(l){return this.type===l}}class Channels{constructor(l,c){this.color=c,this.changed=!1,this.data=l,this.type=new Type}set(l,c){return this.color=c,this.changed=!1,this.data=l,this.type.type=TYPE.ALL,this}_ensureHSL(){const l=this.data,{h:c,s:d,l:f}=l;c===void 0&&(l.h=Utils.channel.rgb2hsl(l,"h")),d===void 0&&(l.s=Utils.channel.rgb2hsl(l,"s")),f===void 0&&(l.l=Utils.channel.rgb2hsl(l,"l"))}_ensureRGB(){const l=this.data,{r:c,g:d,b:f}=l;c===void 0&&(l.r=Utils.channel.hsl2rgb(l,"r")),d===void 0&&(l.g=Utils.channel.hsl2rgb(l,"g")),f===void 0&&(l.b=Utils.channel.hsl2rgb(l,"b"))}get r(){const l=this.data,c=l.r;return!this.type.is(TYPE.HSL)&&c!==void 0?c:(this._ensureHSL(),Utils.channel.hsl2rgb(l,"r"))}get g(){const l=this.data,c=l.g;return!this.type.is(TYPE.HSL)&&c!==void 0?c:(this._ensureHSL(),Utils.channel.hsl2rgb(l,"g"))}get b(){const l=this.data,c=l.b;return!this.type.is(TYPE.HSL)&&c!==void 0?c:(this._ensureHSL(),Utils.channel.hsl2rgb(l,"b"))}get h(){const l=this.data,c=l.h;return!this.type.is(TYPE.RGB)&&c!==void 0?c:(this._ensureRGB(),Utils.channel.rgb2hsl(l,"h"))}get s(){const l=this.data,c=l.s;return!this.type.is(TYPE.RGB)&&c!==void 0?c:(this._ensureRGB(),Utils.channel.rgb2hsl(l,"s"))}get l(){const l=this.data,c=l.l;return!this.type.is(TYPE.RGB)&&c!==void 0?c:(this._ensureRGB(),Utils.channel.rgb2hsl(l,"l"))}get a(){return this.data.a}set r(l){this.type.set(TYPE.RGB),this.changed=!0,this.data.r=l}set g(l){this.type.set(TYPE.RGB),this.changed=!0,this.data.g=l}set b(l){this.type.set(TYPE.RGB),this.changed=!0,this.data.b=l}set h(l){this.type.set(TYPE.HSL),this.changed=!0,this.data.h=l}set s(l){this.type.set(TYPE.HSL),this.changed=!0,this.data.s=l}set l(l){this.type.set(TYPE.HSL),this.changed=!0,this.data.l=l}set a(l){this.changed=!0,this.data.a=l}}const channels=new Channels({r:0,g:0,b:0,a:0},"transparent"),Hex={re:/^#((?:[a-f0-9]{2}){2,4}|[a-f0-9]{3})$/i,parse:s=>{if(s.charCodeAt(0)!==35)return;const l=s.match(Hex.re);if(!l)return;const c=l[1],d=parseInt(c,16),f=c.length,g=f%4===0,v=f>4,b=v?1:17,$=v?8:4,y=g?0:-1,x=v?255:15;return channels.set({r:(d>>$*(y+3)&x)*b,g:(d>>$*(y+2)&x)*b,b:(d>>$*(y+1)&x)*b,a:g?(d&x)*b/255:1},s)},stringify:s=>{const{r:l,g:c,b:d,a:f}=s;return f<1?`#${DEC2HEX[Math.round(l)]}${DEC2HEX[Math.round(c)]}${DEC2HEX[Math.round(d)]}${DEC2HEX[Math.round(f*255)]}`:`#${DEC2HEX[Math.round(l)]}${DEC2HEX[Math.round(c)]}${DEC2HEX[Math.round(d)]}`}},HSL={re:/^hsla?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(?:deg|grad|rad|turn)?)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?%)(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e-?\d+)?(%)?))?\s*?\)$/i,hueRe:/^(.+?)(deg|grad|rad|turn)$/i,_hue2deg:s=>{const l=s.match(HSL.hueRe);if(l){const[,c,d]=l;switch(d){case"grad":return Utils.channel.clamp.h(parseFloat(c)*.9);case"rad":return Utils.channel.clamp.h(parseFloat(c)*180/Math.PI);case"turn":return Utils.channel.clamp.h(parseFloat(c)*360)}}return Utils.channel.clamp.h(parseFloat(s))},parse:s=>{const l=s.charCodeAt(0);if(l!==104&&l!==72)return;const c=s.match(HSL.re);if(!c)return;const[,d,f,g,v,b]=c;return channels.set({h:HSL._hue2deg(d),s:Utils.channel.clamp.s(parseFloat(f)),l:Utils.channel.clamp.l(parseFloat(g)),a:v?Utils.channel.clamp.a(b?parseFloat(v)/100:parseFloat(v)):1},s)},stringify:s=>{const{h:l,s:c,l:d,a:f}=s;return f<1?`hsla(${Utils.lang.round(l)}, ${Utils.lang.round(c)}%, ${Utils.lang.round(d)}%, ${f})`:`hsl(${Utils.lang.round(l)}, ${Utils.lang.round(c)}%, ${Utils.lang.round(d)}%)`}},Keyword={colors:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyanaqua:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",transparent:"#00000000",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},parse:s=>{s=s.toLowerCase();const l=Keyword.colors[s];if(l)return Hex.parse(l)},stringify:s=>{const l=Hex.stringify(s);for(const c in Keyword.colors)if(Keyword.colors[c]===l)return c}},RGB={re:/^rgba?\(\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))\s*?(?:,|\s)\s*?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?))(?:\s*?(?:,|\/)\s*?\+?(-?(?:\d+(?:\.\d+)?|(?:\.\d+))(?:e\d+)?(%?)))?\s*?\)$/i,parse:s=>{const l=s.charCodeAt(0);if(l!==114&&l!==82)return;const c=s.match(RGB.re);if(!c)return;const[,d,f,g,v,b,$,y,x]=c;return channels.set({r:Utils.channel.clamp.r(f?parseFloat(d)*2.55:parseFloat(d)),g:Utils.channel.clamp.g(v?parseFloat(g)*2.55:parseFloat(g)),b:Utils.channel.clamp.b($?parseFloat(b)*2.55:parseFloat(b)),a:y?Utils.channel.clamp.a(x?parseFloat(y)/100:parseFloat(y)):1},s)},stringify:s=>{const{r:l,g:c,b:d,a:f}=s;return f<1?`rgba(${Utils.lang.round(l)}, ${Utils.lang.round(c)}, ${Utils.lang.round(d)}, ${Utils.lang.round(f)})`:`rgb(${Utils.lang.round(l)}, ${Utils.lang.round(c)}, ${Utils.lang.round(d)})`}},Color$1={format:{keyword:Keyword,hex:Hex,rgb:RGB,rgba:RGB,hsl:HSL,hsla:HSL},parse:s=>{if(typeof s!="string")return s;const l=Hex.parse(s)||RGB.parse(s)||HSL.parse(s)||Keyword.parse(s);if(l)return l;throw new Error(`Unsupported color format: "${s}"`)},stringify:s=>!s.changed&&s.color?s.color:s.type.is(TYPE.HSL)||s.data.r===void 0?HSL.stringify(s):s.a<1||!Number.isInteger(s.r)||!Number.isInteger(s.g)||!Number.isInteger(s.b)?RGB.stringify(s):Hex.stringify(s)},change=(s,l)=>{const c=Color$1.parse(s);for(const d in l)c[d]=Utils.channel.clamp[d](l[d]);return Color$1.stringify(c)},rgba=(s,l,c=0,d=1)=>{if(typeof s!="number")return change(s,{a:l});const f=channels.set({r:Utils.channel.clamp.r(s),g:Utils.channel.clamp.g(l),b:Utils.channel.clamp.b(c),a:Utils.channel.clamp.a(d)});return Color$1.stringify(f)},luminance=s=>{const{r:l,g:c,b:d}=Color$1.parse(s),f=.2126*Utils.channel.toLinear(l)+.7152*Utils.channel.toLinear(c)+.0722*Utils.channel.toLinear(d);return Utils.lang.round(f)},isLight=s=>luminance(s)>=.5,isDark=s=>!isLight(s),adjustChannel=(s,l,c)=>{const d=Color$1.parse(s),f=d[l],g=Utils.channel.clamp[l](f+c);return f!==g&&(d[l]=g),Color$1.stringify(d)},lighten=(s,l)=>adjustChannel(s,"l",l),darken=(s,l)=>adjustChannel(s,"l",-l),adjust=(s,l)=>{const c=Color$1.parse(s),d={};for(const f in l)l[f]&&(d[f]=c[f]+l[f]);return change(s,d)},mix=(s,l,c=50)=>{const{r:d,g:f,b:g,a:v}=Color$1.parse(s),{r:b,g:$,b:y,a:x}=Color$1.parse(l),C=c/100,E=C*2-1,N=v-x,q=((E*N===-1?E:(E+N)/(1+E*N))+1)/2,Y=1-q,re=d*q+b*Y,se=f*q+$*Y,de=g*q+y*Y,he=v*C+x*(1-C);return rgba(re,se,de,he)},invert=(s,l=100)=>{const c=Color$1.parse(s);return c.r=255-c.r,c.g=255-c.g,c.b=255-c.b,mix(c,s,l)};var freeGlobal=typeof global=="object"&&global&&global.Object===Object&&global,freeSelf=typeof self=="object"&&self&&self.Object===Object&&self,root=freeGlobal||freeSelf||Function("return this")(),Symbol$1=root.Symbol,objectProto$c=Object.prototype,hasOwnProperty$a=objectProto$c.hasOwnProperty,nativeObjectToString$1=objectProto$c.toString,symToStringTag$1=Symbol$1?Symbol$1.toStringTag:void 0;function getRawTag(s){var l=hasOwnProperty$a.call(s,symToStringTag$1),c=s[symToStringTag$1];try{s[symToStringTag$1]=void 0;var d=!0}catch{}var f=nativeObjectToString$1.call(s);return d&&(l?s[symToStringTag$1]=c:delete s[symToStringTag$1]),f}var objectProto$b=Object.prototype,nativeObjectToString=objectProto$b.toString;function objectToString(s){return nativeObjectToString.call(s)}var nullTag="[object Null]",undefinedTag="[object Undefined]",symToStringTag=Symbol$1?Symbol$1.toStringTag:void 0;function baseGetTag(s){return s==null?s===void 0?undefinedTag:nullTag:symToStringTag&&symToStringTag in Object(s)?getRawTag(s):objectToString(s)}function isObject$3(s){var l=typeof s;return s!=null&&(l=="object"||l=="function")}var asyncTag="[object AsyncFunction]",funcTag$1="[object Function]",genTag="[object GeneratorFunction]",proxyTag="[object Proxy]";function isFunction$2(s){if(!isObject$3(s))return!1;var l=baseGetTag(s);return l==funcTag$1||l==genTag||l==asyncTag||l==proxyTag}var coreJsData=root["__core-js_shared__"],maskSrcKey=function(){var s=/[^.]+$/.exec(coreJsData&&coreJsData.keys&&coreJsData.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function isMasked(s){return!!maskSrcKey&&maskSrcKey in s}var funcProto$2=Function.prototype,funcToString$2=funcProto$2.toString;function toSource(s){if(s!=null){try{return funcToString$2.call(s)}catch{}try{return s+""}catch{}}return""}var reRegExpChar=/[\\^$.*+?()[\]{}|]/g,reIsHostCtor=/^\[object .+?Constructor\]$/,funcProto$1=Function.prototype,objectProto$a=Object.prototype,funcToString$1=funcProto$1.toString,hasOwnProperty$9=objectProto$a.hasOwnProperty,reIsNative=RegExp("^"+funcToString$1.call(hasOwnProperty$9).replace(reRegExpChar,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function baseIsNative(s){if(!isObject$3(s)||isMasked(s))return!1;var l=isFunction$2(s)?reIsNative:reIsHostCtor;return l.test(toSource(s))}function getValue(s,l){return s==null?void 0:s[l]}function getNative(s,l){var c=getValue(s,l);return baseIsNative(c)?c:void 0}var nativeCreate=getNative(Object,"create");function hashClear(){this.__data__=nativeCreate?nativeCreate(null):{},this.size=0}function hashDelete(s){var l=this.has(s)&&delete this.__data__[s];return this.size-=l?1:0,l}var HASH_UNDEFINED$1="__lodash_hash_undefined__",objectProto$9=Object.prototype,hasOwnProperty$8=objectProto$9.hasOwnProperty;function hashGet(s){var l=this.__data__;if(nativeCreate){var c=l[s];return c===HASH_UNDEFINED$1?void 0:c}return hasOwnProperty$8.call(l,s)?l[s]:void 0}var objectProto$8=Object.prototype,hasOwnProperty$7=objectProto$8.hasOwnProperty;function hashHas(s){var l=this.__data__;return nativeCreate?l[s]!==void 0:hasOwnProperty$7.call(l,s)}var HASH_UNDEFINED="__lodash_hash_undefined__";function hashSet(s,l){var c=this.__data__;return this.size+=this.has(s)?0:1,c[s]=nativeCreate&&l===void 0?HASH_UNDEFINED:l,this}function Hash(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var d=s[l];this.set(d[0],d[1])}}Hash.prototype.clear=hashClear;Hash.prototype.delete=hashDelete;Hash.prototype.get=hashGet;Hash.prototype.has=hashHas;Hash.prototype.set=hashSet;function listCacheClear(){this.__data__=[],this.size=0}function eq$1(s,l){return s===l||s!==s&&l!==l}function assocIndexOf(s,l){for(var c=s.length;c--;)if(eq$1(s[c][0],l))return c;return-1}var arrayProto=Array.prototype,splice=arrayProto.splice;function listCacheDelete(s){var l=this.__data__,c=assocIndexOf(l,s);if(c<0)return!1;var d=l.length-1;return c==d?l.pop():splice.call(l,c,1),--this.size,!0}function listCacheGet(s){var l=this.__data__,c=assocIndexOf(l,s);return c<0?void 0:l[c][1]}function listCacheHas(s){return assocIndexOf(this.__data__,s)>-1}function listCacheSet(s,l){var c=this.__data__,d=assocIndexOf(c,s);return d<0?(++this.size,c.push([s,l])):c[d][1]=l,this}function ListCache(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var d=s[l];this.set(d[0],d[1])}}ListCache.prototype.clear=listCacheClear;ListCache.prototype.delete=listCacheDelete;ListCache.prototype.get=listCacheGet;ListCache.prototype.has=listCacheHas;ListCache.prototype.set=listCacheSet;var Map$1=getNative(root,"Map");function mapCacheClear(){this.size=0,this.__data__={hash:new Hash,map:new(Map$1||ListCache),string:new Hash}}function isKeyable(s){var l=typeof s;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?s!=="__proto__":s===null}function getMapData(s,l){var c=s.__data__;return isKeyable(l)?c[typeof l=="string"?"string":"hash"]:c.map}function mapCacheDelete(s){var l=getMapData(this,s).delete(s);return this.size-=l?1:0,l}function mapCacheGet(s){return getMapData(this,s).get(s)}function mapCacheHas(s){return getMapData(this,s).has(s)}function mapCacheSet(s,l){var c=getMapData(this,s),d=c.size;return c.set(s,l),this.size+=c.size==d?0:1,this}function MapCache(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var d=s[l];this.set(d[0],d[1])}}MapCache.prototype.clear=mapCacheClear;MapCache.prototype.delete=mapCacheDelete;MapCache.prototype.get=mapCacheGet;MapCache.prototype.has=mapCacheHas;MapCache.prototype.set=mapCacheSet;var FUNC_ERROR_TEXT="Expected a function";function memoize(s,l){if(typeof s!="function"||l!=null&&typeof l!="function")throw new TypeError(FUNC_ERROR_TEXT);var c=function(){var d=arguments,f=l?l.apply(this,d):d[0],g=c.cache;if(g.has(f))return g.get(f);var v=s.apply(this,d);return c.cache=g.set(f,v)||g,v};return c.cache=new(memoize.Cache||MapCache),c}memoize.Cache=MapCache;function stackClear(){this.__data__=new ListCache,this.size=0}function stackDelete(s){var l=this.__data__,c=l.delete(s);return this.size=l.size,c}function stackGet(s){return this.__data__.get(s)}function stackHas(s){return this.__data__.has(s)}var LARGE_ARRAY_SIZE=200;function stackSet(s,l){var c=this.__data__;if(c instanceof ListCache){var d=c.__data__;if(!Map$1||d.length<LARGE_ARRAY_SIZE-1)return d.push([s,l]),this.size=++c.size,this;c=this.__data__=new MapCache(d)}return c.set(s,l),this.size=c.size,this}function Stack(s){var l=this.__data__=new ListCache(s);this.size=l.size}Stack.prototype.clear=stackClear;Stack.prototype.delete=stackDelete;Stack.prototype.get=stackGet;Stack.prototype.has=stackHas;Stack.prototype.set=stackSet;var defineProperty=function(){try{var s=getNative(Object,"defineProperty");return s({},"",{}),s}catch{}}();function baseAssignValue(s,l,c){l=="__proto__"&&defineProperty?defineProperty(s,l,{configurable:!0,enumerable:!0,value:c,writable:!0}):s[l]=c}function assignMergeValue(s,l,c){(c!==void 0&&!eq$1(s[l],c)||c===void 0&&!(l in s))&&baseAssignValue(s,l,c)}function createBaseFor(s){return function(l,c,d){for(var f=-1,g=Object(l),v=d(l),b=v.length;b--;){var $=v[++f];if(c(g[$],$,g)===!1)break}return l}}var baseFor=createBaseFor(),freeExports$2=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$2=freeExports$2&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$2=freeModule$2&&freeModule$2.exports===freeExports$2,Buffer$2=moduleExports$2?root.Buffer:void 0,allocUnsafe=Buffer$2?Buffer$2.allocUnsafe:void 0;function cloneBuffer(s,l){if(l)return s.slice();var c=s.length,d=allocUnsafe?allocUnsafe(c):new s.constructor(c);return s.copy(d),d}var Uint8Array$1=root.Uint8Array;function cloneArrayBuffer(s){var l=new s.constructor(s.byteLength);return new Uint8Array$1(l).set(new Uint8Array$1(s)),l}function cloneTypedArray(s,l){var c=l?cloneArrayBuffer(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.length)}function copyArray(s,l){var c=-1,d=s.length;for(l||(l=Array(d));++c<d;)l[c]=s[c];return l}var objectCreate=Object.create,baseCreate=function(){function s(){}return function(l){if(!isObject$3(l))return{};if(objectCreate)return objectCreate(l);s.prototype=l;var c=new s;return s.prototype=void 0,c}}();function overArg(s,l){return function(c){return s(l(c))}}var getPrototype=overArg(Object.getPrototypeOf,Object),objectProto$7=Object.prototype;function isPrototype(s){var l=s&&s.constructor,c=typeof l=="function"&&l.prototype||objectProto$7;return s===c}function initCloneObject(s){return typeof s.constructor=="function"&&!isPrototype(s)?baseCreate(getPrototype(s)):{}}function isObjectLike(s){return s!=null&&typeof s=="object"}var argsTag$1="[object Arguments]";function baseIsArguments(s){return isObjectLike(s)&&baseGetTag(s)==argsTag$1}var objectProto$6=Object.prototype,hasOwnProperty$6=objectProto$6.hasOwnProperty,propertyIsEnumerable=objectProto$6.propertyIsEnumerable,isArguments=baseIsArguments(function(){return arguments}())?baseIsArguments:function(s){return isObjectLike(s)&&hasOwnProperty$6.call(s,"callee")&&!propertyIsEnumerable.call(s,"callee")},isArray$2=Array.isArray,MAX_SAFE_INTEGER$1=9007199254740991;function isLength(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=MAX_SAFE_INTEGER$1}function isArrayLike(s){return s!=null&&isLength(s.length)&&!isFunction$2(s)}function isArrayLikeObject(s){return isObjectLike(s)&&isArrayLike(s)}function stubFalse(){return!1}var freeExports$1=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule$1=freeExports$1&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports$1=freeModule$1&&freeModule$1.exports===freeExports$1,Buffer$1=moduleExports$1?root.Buffer:void 0,nativeIsBuffer=Buffer$1?Buffer$1.isBuffer:void 0,isBuffer$2=nativeIsBuffer||stubFalse,objectTag$2="[object Object]",funcProto=Function.prototype,objectProto$5=Object.prototype,funcToString=funcProto.toString,hasOwnProperty$5=objectProto$5.hasOwnProperty,objectCtorString=funcToString.call(Object);function isPlainObject(s){if(!isObjectLike(s)||baseGetTag(s)!=objectTag$2)return!1;var l=getPrototype(s);if(l===null)return!0;var c=hasOwnProperty$5.call(l,"constructor")&&l.constructor;return typeof c=="function"&&c instanceof c&&funcToString.call(c)==objectCtorString}var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag$2="[object Map]",numberTag="[object Number]",objectTag$1="[object Object]",regexpTag="[object RegExp]",setTag$2="[object Set]",stringTag="[object String]",weakMapTag$1="[object WeakMap]",arrayBufferTag="[object ArrayBuffer]",dataViewTag$1="[object DataView]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]",typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=!0;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dataViewTag$1]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag$2]=typedArrayTags[numberTag]=typedArrayTags[objectTag$1]=typedArrayTags[regexpTag]=typedArrayTags[setTag$2]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag$1]=!1;function baseIsTypedArray(s){return isObjectLike(s)&&isLength(s.length)&&!!typedArrayTags[baseGetTag(s)]}function baseUnary(s){return function(l){return s(l)}}var freeExports=typeof exports=="object"&&exports&&!exports.nodeType&&exports,freeModule=freeExports&&typeof module=="object"&&module&&!module.nodeType&&module,moduleExports=freeModule&&freeModule.exports===freeExports,freeProcess=moduleExports&&freeGlobal.process,nodeUtil=function(){try{var s=freeModule&&freeModule.require&&freeModule.require("util").types;return s||freeProcess&&freeProcess.binding&&freeProcess.binding("util")}catch{}}(),nodeIsTypedArray=nodeUtil&&nodeUtil.isTypedArray,isTypedArray=nodeIsTypedArray?baseUnary(nodeIsTypedArray):baseIsTypedArray;function safeGet(s,l){if(!(l==="constructor"&&typeof s[l]=="function")&&l!="__proto__")return s[l]}var objectProto$4=Object.prototype,hasOwnProperty$4=objectProto$4.hasOwnProperty;function assignValue(s,l,c){var d=s[l];(!(hasOwnProperty$4.call(s,l)&&eq$1(d,c))||c===void 0&&!(l in s))&&baseAssignValue(s,l,c)}function copyObject(s,l,c,d){var f=!c;c||(c={});for(var g=-1,v=l.length;++g<v;){var b=l[g],$=void 0;$===void 0&&($=s[b]),f?baseAssignValue(c,b,$):assignValue(c,b,$)}return c}function baseTimes(s,l){for(var c=-1,d=Array(s);++c<s;)d[c]=l(c);return d}var MAX_SAFE_INTEGER=9007199254740991,reIsUint=/^(?:0|[1-9]\d*)$/;function isIndex(s,l){var c=typeof s;return l=l??MAX_SAFE_INTEGER,!!l&&(c=="number"||c!="symbol"&&reIsUint.test(s))&&s>-1&&s%1==0&&s<l}var objectProto$3=Object.prototype,hasOwnProperty$3=objectProto$3.hasOwnProperty;function arrayLikeKeys(s,l){var c=isArray$2(s),d=!c&&isArguments(s),f=!c&&!d&&isBuffer$2(s),g=!c&&!d&&!f&&isTypedArray(s),v=c||d||f||g,b=v?baseTimes(s.length,String):[],$=b.length;for(var y in s)(l||hasOwnProperty$3.call(s,y))&&!(v&&(y=="length"||f&&(y=="offset"||y=="parent")||g&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||isIndex(y,$)))&&b.push(y);return b}function nativeKeysIn(s){var l=[];if(s!=null)for(var c in Object(s))l.push(c);return l}var objectProto$2=Object.prototype,hasOwnProperty$2=objectProto$2.hasOwnProperty;function baseKeysIn(s){if(!isObject$3(s))return nativeKeysIn(s);var l=isPrototype(s),c=[];for(var d in s)d=="constructor"&&(l||!hasOwnProperty$2.call(s,d))||c.push(d);return c}function keysIn(s){return isArrayLike(s)?arrayLikeKeys(s,!0):baseKeysIn(s)}function toPlainObject(s){return copyObject(s,keysIn(s))}function baseMergeDeep(s,l,c,d,f,g,v){var b=safeGet(s,c),$=safeGet(l,c),y=v.get($);if(y){assignMergeValue(s,c,y);return}var x=g?g(b,$,c+"",s,l,v):void 0,C=x===void 0;if(C){var E=isArray$2($),N=!E&&isBuffer$2($),W=!E&&!N&&isTypedArray($);x=$,E||N||W?isArray$2(b)?x=b:isArrayLikeObject(b)?x=copyArray(b):N?(C=!1,x=cloneBuffer($,!0)):W?(C=!1,x=cloneTypedArray($,!0)):x=[]:isPlainObject($)||isArguments($)?(x=b,isArguments(b)?x=toPlainObject(b):(!isObject$3(b)||isFunction$2(b))&&(x=initCloneObject($))):C=!1}C&&(v.set($,x),f(x,$,d,g,v),v.delete($)),assignMergeValue(s,c,x)}function baseMerge(s,l,c,d,f){s!==l&&baseFor(l,function(g,v){if(f||(f=new Stack),isObject$3(g))baseMergeDeep(s,l,v,c,baseMerge,d,f);else{var b=d?d(safeGet(s,v),g,v+"",s,l,f):void 0;b===void 0&&(b=g),assignMergeValue(s,v,b)}},keysIn)}function identity(s){return s}function apply(s,l,c){switch(c.length){case 0:return s.call(l);case 1:return s.call(l,c[0]);case 2:return s.call(l,c[0],c[1]);case 3:return s.call(l,c[0],c[1],c[2])}return s.apply(l,c)}var nativeMax=Math.max;function overRest(s,l,c){return l=nativeMax(l===void 0?s.length-1:l,0),function(){for(var d=arguments,f=-1,g=nativeMax(d.length-l,0),v=Array(g);++f<g;)v[f]=d[l+f];f=-1;for(var b=Array(l+1);++f<l;)b[f]=d[f];return b[l]=c(v),apply(s,this,b)}}function constant(s){return function(){return s}}var baseSetToString=defineProperty?function(s,l){return defineProperty(s,"toString",{configurable:!0,enumerable:!1,value:constant(l),writable:!0})}:identity,HOT_COUNT=800,HOT_SPAN=16,nativeNow=Date.now;function shortOut(s){var l=0,c=0;return function(){var d=nativeNow(),f=HOT_SPAN-(d-c);if(c=d,f>0){if(++l>=HOT_COUNT)return arguments[0]}else l=0;return s.apply(void 0,arguments)}}var setToString=shortOut(baseSetToString);function baseRest(s,l){return setToString(overRest(s,l,identity),s+"")}function isIterateeCall(s,l,c){if(!isObject$3(c))return!1;var d=typeof l;return(d=="number"?isArrayLike(c)&&isIndex(l,c.length):d=="string"&&l in c)?eq$1(c[l],s):!1}function createAssigner(s){return baseRest(function(l,c){var d=-1,f=c.length,g=f>1?c[f-1]:void 0,v=f>2?c[2]:void 0;for(g=s.length>3&&typeof g=="function"?(f--,g):void 0,v&&isIterateeCall(c[0],c[1],v)&&(g=f<3?void 0:g,f=1),l=Object(l);++d<f;){var b=c[d];b&&s(l,b,d,g)}return l})}var merge$2=createAssigner(function(s,l,c){baseMerge(s,l,c)}),COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode;function trim(s){return s.trim()}function replace(s,l,c){return s.replace(l,c)}function indexof(s,l,c){return s.indexOf(l,c)}function charat(s,l){return s.charCodeAt(l)|0}function substr(s,l,c){return s.slice(l,c)}function strlen(s){return s.length}function sizeof(s){return s.length}function append(s,l){return l.push(s),s}var line=1,column=1,length=0,position=0,character=0,characters$1="";function node(s,l,c,d,f,g,v,b){return{value:s,root:l,parent:c,type:d,props:f,children:g,line,column,length:v,return:"",siblings:b}}function char(){return character}function prev(){return character=position>0?charat(characters$1,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters$1,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters$1,position)}function caret(){return position}function slice(s,l){return substr(characters$1,s,l)}function token(s){switch(s){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(s){return line=column=1,length=strlen(characters$1=s),position=0,[]}function dealloc(s){return characters$1="",s}function delimit(s){return trim(slice(position-1,delimiter$1(s===91?s+2:s===40?s+1:s)))}function whitespace$1(s){for(;(character=peek())&&character<33;)next();return token(s)>2||token(character)>3?"":" "}function escaping(s,l){for(;--l&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(s,caret()+(l<6&&peek()==32&&next()==32))}function delimiter$1(s){for(;next();)switch(character){case s:return position;case 34:case 39:s!==34&&s!==39&&delimiter$1(character);break;case 40:s===41&&delimiter$1(s);break;case 92:next();break}return position}function commenter(s,l){for(;next()&&s+character!==57;)if(s+character===84&&peek()===47)break;return"/*"+slice(l,position-1)+"*"+from(s===47?s:next())}function identifier(s){for(;!token(peek());)next();return slice(s,position)}function compile(s){return dealloc(parse$2("",null,null,null,[""],s=alloc(s),0,[0],s))}function parse$2(s,l,c,d,f,g,v,b,$){for(var y=0,x=0,C=v,E=0,N=0,W=0,q=1,Y=1,re=1,se=0,de="",he=f,ge=g,Se=d,Ae=de;Y;)switch(W=se,se=next()){case 40:if(W!=108&&charat(Ae,C-1)==58){indexof(Ae+=replace(delimit(se),"&","&\f"),"&\f",abs(y?b[y-1]:0))!=-1&&(re=-1);break}case 34:case 39:case 91:Ae+=delimit(se);break;case 9:case 10:case 13:case 32:Ae+=whitespace$1(W);break;case 92:Ae+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),l,c,$),$),(token(W||1)==5||token(peek()||1)==5)&&strlen(Ae)&&substr(Ae,-1,void 0)!==" "&&(Ae+=" ");break;default:Ae+="/"}break;case 123*q:b[y++]=strlen(Ae)*re;case 125*q:case 59:case 0:switch(se){case 0:case 125:Y=0;case 59+x:re==-1&&(Ae=replace(Ae,/\f/g,"")),N>0&&(strlen(Ae)-C||q===0&&W===47)&&append(N>32?declaration(Ae+";",d,c,C-1,$):declaration(replace(Ae," ","")+";",d,c,C-2,$),$);break;case 59:Ae+=";";default:if(append(Se=ruleset(Ae,l,c,y,x,f,b,de,he=[],ge=[],C,g),g),se===123)if(x===0)parse$2(Ae,l,Se,Se,he,g,C,b,ge);else switch(E===99&&charat(Ae,3)===110?100:E){case 100:case 108:case 109:case 115:parse$2(s,Se,Se,d&&append(ruleset(s,Se,Se,0,0,f,b,de,f,he=[],C,ge),ge),f,ge,C,b,d?he:ge);break;default:parse$2(Ae,Se,Se,Se,[""],ge,0,b,ge)}}y=x=N=0,q=re=1,de=Ae="",C=v;break;case 58:C=1+strlen(Ae),N=W;default:if(q<1){if(se==123)--q;else if(se==125&&q++==0&&prev()==125)continue}switch(Ae+=from(se),se*q){case 38:re=x>0?1:(Ae+="\f",-1);break;case 44:b[y++]=(strlen(Ae)-1)*re,re=1;break;case 64:peek()===45&&(Ae+=delimit(next())),E=peek(),x=C=strlen(de=Ae+=identifier(caret())),se++;break;case 45:W===45&&strlen(Ae)==2&&(q=0)}}return g}function ruleset(s,l,c,d,f,g,v,b,$,y,x,C){for(var E=f-1,N=f===0?g:[""],W=sizeof(N),q=0,Y=0,re=0;q<d;++q)for(var se=0,de=substr(s,E+1,E=abs(Y=v[q])),he=s;se<W;++se)(he=trim(Y>0?N[se]+" "+de:replace(de,/&\f/g,N[se])))&&($[re++]=he);return node(s,l,c,f===0?RULESET:b,$,y,x,C)}function comment(s,l,c,d){return node(s,l,c,COMMENT,from(char()),substr(s,2,-2),0,d)}function declaration(s,l,c,d,f){return node(s,l,c,DECLARATION,substr(s,0,d),substr(s,d+1,-1),d,f)}function serialize(s,l){for(var c="",d=0;d<s.length;d++)c+=l(s[d],d,s,l)||"";return c}function stringify(s,l,c,d){switch(s.type){case LAYER:if(s.children.length)break;case IMPORT:case DECLARATION:return s.return=s.return||s.value;case COMMENT:return"";case KEYFRAMES:return s.return=s.value+"{"+serialize(s.children,d)+"}";case RULESET:if(!strlen(s.value=s.props.join(",")))return""}return strlen(c=serialize(s.children,d))?s.return=s.value+"{"+c+"}":""}var nativeKeys=overArg(Object.keys,Object),objectProto$1=Object.prototype,hasOwnProperty$1=objectProto$1.hasOwnProperty;function baseKeys(s){if(!isPrototype(s))return nativeKeys(s);var l=[];for(var c in Object(s))hasOwnProperty$1.call(s,c)&&c!="constructor"&&l.push(c);return l}var DataView$1=getNative(root,"DataView"),Promise$1=getNative(root,"Promise"),Set$1=getNative(root,"Set"),WeakMap$1=getNative(root,"WeakMap"),mapTag$1="[object Map]",objectTag="[object Object]",promiseTag="[object Promise]",setTag$1="[object Set]",weakMapTag="[object WeakMap]",dataViewTag="[object DataView]",dataViewCtorString=toSource(DataView$1),mapCtorString=toSource(Map$1),promiseCtorString=toSource(Promise$1),setCtorString=toSource(Set$1),weakMapCtorString=toSource(WeakMap$1),getTag=baseGetTag;(DataView$1&&getTag(new DataView$1(new ArrayBuffer(1)))!=dataViewTag||Map$1&&getTag(new Map$1)!=mapTag$1||Promise$1&&getTag(Promise$1.resolve())!=promiseTag||Set$1&&getTag(new Set$1)!=setTag$1||WeakMap$1&&getTag(new WeakMap$1)!=weakMapTag)&&(getTag=function(s){var l=baseGetTag(s),c=l==objectTag?s.constructor:void 0,d=c?toSource(c):"";if(d)switch(d){case dataViewCtorString:return dataViewTag;case mapCtorString:return mapTag$1;case promiseCtorString:return promiseTag;case setCtorString:return setTag$1;case weakMapCtorString:return weakMapTag}return l});var mapTag="[object Map]",setTag="[object Set]",objectProto=Object.prototype,hasOwnProperty=objectProto.hasOwnProperty;function isEmpty$3(s){if(s==null)return!0;if(isArrayLike(s)&&(isArray$2(s)||typeof s=="string"||typeof s.splice=="function"||isBuffer$2(s)||isTypedArray(s)||isArguments(s)))return!s.length;var l=getTag(s);if(l==mapTag||l==setTag)return!s.size;if(isPrototype(s))return!baseKeys(s).length;for(var c in s)if(hasOwnProperty.call(s,c))return!1;return!0}const LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},log$1={trace:(...s)=>{},debug:(...s)=>{},info:(...s)=>{},warn:(...s)=>{},error:(...s)=>{},fatal:(...s)=>{}},setLogLevel$1=function(s="fatal"){let l=LEVELS.fatal;typeof s=="string"?(s=s.toLowerCase(),s in LEVELS&&(l=LEVELS[s])):typeof s=="number"&&(l=s),log$1.trace=()=>{},log$1.debug=()=>{},log$1.info=()=>{},log$1.warn=()=>{},log$1.error=()=>{},log$1.fatal=()=>{},l<=LEVELS.fatal&&(log$1.fatal=console.error?console.error.bind(console,format$1("FATAL"),"color: orange"):console.log.bind(console,"\x1B[35m",format$1("FATAL"))),l<=LEVELS.error&&(log$1.error=console.error?console.error.bind(console,format$1("ERROR"),"color: orange"):console.log.bind(console,"\x1B[31m",format$1("ERROR"))),l<=LEVELS.warn&&(log$1.warn=console.warn?console.warn.bind(console,format$1("WARN"),"color: orange"):console.log.bind(console,"\x1B[33m",format$1("WARN"))),l<=LEVELS.info&&(log$1.info=console.info?console.info.bind(console,format$1("INFO"),"color: lightblue"):console.log.bind(console,"\x1B[34m",format$1("INFO"))),l<=LEVELS.debug&&(log$1.debug=console.debug?console.debug.bind(console,format$1("DEBUG"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format$1("DEBUG"))),l<=LEVELS.trace&&(log$1.trace=console.debug?console.debug.bind(console,format$1("TRACE"),"color: lightgreen"):console.log.bind(console,"\x1B[32m",format$1("TRACE")))},format$1=s=>`%c${dayjs().format("ss.SSS")} : ${s} : `,lineBreakRegex=/<br\s*\/?>/gi,getRows=s=>s?breakToPlaceholder(s).replace(/\\n/g,"#br#").split("#br#"):[""],setupDompurifyHooksIfNotSetup=(()=>{let s=!1;return()=>{s||(setupDompurifyHooks(),s=!0)}})();function setupDompurifyHooks(){const s="data-temp-href-target";purify.addHook("beforeSanitizeAttributes",l=>{l.tagName==="A"&&l.hasAttribute("target")&&l.setAttribute(s,l.getAttribute("target")||"")}),purify.addHook("afterSanitizeAttributes",l=>{l.tagName==="A"&&l.hasAttribute(s)&&(l.setAttribute("target",l.getAttribute(s)||""),l.removeAttribute(s),l.getAttribute("target")==="_blank"&&l.setAttribute("rel","noopener"))})}const removeScript=s=>(setupDompurifyHooksIfNotSetup(),purify.sanitize(s)),sanitizeMore=(s,l)=>{var c;if(((c=l.flowchart)==null?void 0:c.htmlLabels)!==!1){const d=l.securityLevel;d==="antiscript"||d==="strict"?s=removeScript(s):d!=="loose"&&(s=breakToPlaceholder(s),s=s.replace(/</g,"&lt;").replace(/>/g,"&gt;"),s=s.replace(/=/g,"&equals;"),s=placeholderToBreak(s))}return s},sanitizeText$2=(s,l)=>s&&(l.dompurifyConfig?s=purify.sanitize(sanitizeMore(s,l),l.dompurifyConfig).toString():s=purify.sanitize(sanitizeMore(s,l),{FORBID_TAGS:["style"]}).toString(),s),sanitizeTextOrArray=(s,l)=>typeof s=="string"?sanitizeText$2(s,l):s.flat().map(c=>sanitizeText$2(c,l)),hasBreaks=s=>lineBreakRegex.test(s),splitBreaks=s=>s.split(lineBreakRegex),placeholderToBreak=s=>s.replace(/#br#/g,"<br/>"),breakToPlaceholder=s=>s.replace(lineBreakRegex,"#br#"),getUrl=s=>{let l="";return s&&(l=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,l=l.replaceAll(/\(/g,"\\("),l=l.replaceAll(/\)/g,"\\)")),l},evaluate=s=>!(s===!1||["false","null","0"].includes(String(s).trim().toLowerCase())),getMax=function(...s){const l=s.filter(c=>!isNaN(c));return Math.max(...l)},getMin=function(...s){const l=s.filter(c=>!isNaN(c));return Math.min(...l)},parseGenericTypes=function(s){const l=s.split(/(,)/),c=[];for(let d=0;d<l.length;d++){let f=l[d];if(f===","&&d>0&&d+1<l.length){const g=l[d-1],v=l[d+1];shouldCombineSets(g,v)&&(f=g+","+v,d++,c.pop())}c.push(processSet(f))}return c.join("")},countOccurrence=(s,l)=>Math.max(0,s.split(l).length-1),shouldCombineSets=(s,l)=>{const c=countOccurrence(s,"~"),d=countOccurrence(l,"~");return c===1&&d===1},processSet=s=>{const l=countOccurrence(s,"~");let c=!1;if(l<=1)return s;l%2!==0&&s.startsWith("~")&&(s=s.substring(1),c=!0);const d=[...s];let f=d.indexOf("~"),g=d.lastIndexOf("~");for(;f!==-1&&g!==-1&&f!==g;)d[f]="<",d[g]=">",f=d.indexOf("~"),g=d.lastIndexOf("~");return c&&d.unshift("~"),d.join("")},isMathMLSupported=()=>window.MathMLElement!==void 0,katexRegex=/\$\$(.*)\$\$/g,hasKatex=s=>{var l;return(((l=s.match(katexRegex))==null?void 0:l.length)??0)>0},calculateMathMLDimensions=async(s,l)=>{s=await renderKatex(s,l);const c=document.createElement("div");c.innerHTML=s,c.id="katex-temp",c.style.visibility="hidden",c.style.position="absolute",c.style.top="0";const d=document.querySelector("body");d==null||d.insertAdjacentElement("beforeend",c);const f={width:c.clientWidth,height:c.clientHeight};return c.remove(),f},renderKatex=async(s,l)=>{if(!hasKatex(s))return s;if(!isMathMLSupported()&&!l.legacyMathML)return s.replace(katexRegex,"MathML is unsupported in this environment.");const{default:c}=await __vitePreload(async()=>{const{default:d}=await Promise.resolve().then(()=>katex$1);return{default:d}},void 0);return s.split(lineBreakRegex).map(d=>hasKatex(d)?`
            <div style="display: flex; align-items: center; justify-content: center; white-space: nowrap;">
              ${d}
            </div>
          `:`<div>${d}</div>`).join("").replace(katexRegex,(d,f)=>c.renderToString(f,{throwOnError:!0,displayMode:!0,output:isMathMLSupported()?"mathml":"htmlAndMathml"}).replace(/\n/g," ").replace(/<annotation.*<\/annotation>/g,""))},common$1={getRows,sanitizeText:sanitizeText$2,sanitizeTextOrArray,hasBreaks,splitBreaks,lineBreakRegex,removeScript,getUrl,evaluate,getMax,getMin},mkBorder=(s,l)=>l?adjust(s,{s:-40,l:10}):adjust(s,{s:-40,l:-10}),oldAttributeBackgroundColorOdd="#ffffff",oldAttributeBackgroundColorEven="#f2f2f2";let Theme$4=class{constructor(){this.background="#f4f4f4",this.primaryColor="#fff4dd",this.noteBkgColor="#fff5ad",this.noteTextColor="#333",this.THEME_COLOR_LIMIT=12,this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px"}updateColors(){var l,c,d,f,g,v,b,$,y,x,C;if(this.primaryTextColor=this.primaryTextColor||(this.darkMode?"#eee":"#333"),this.secondaryColor=this.secondaryColor||adjust(this.primaryColor,{h:-120}),this.tertiaryColor=this.tertiaryColor||adjust(this.primaryColor,{h:180,l:5}),this.primaryBorderColor=this.primaryBorderColor||mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=this.secondaryBorderColor||mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=this.tertiaryBorderColor||mkBorder(this.tertiaryColor,this.darkMode),this.noteBorderColor=this.noteBorderColor||mkBorder(this.noteBkgColor,this.darkMode),this.noteBkgColor=this.noteBkgColor||"#fff5ad",this.noteTextColor=this.noteTextColor||"#333",this.secondaryTextColor=this.secondaryTextColor||invert(this.secondaryColor),this.tertiaryTextColor=this.tertiaryTextColor||invert(this.tertiaryColor),this.lineColor=this.lineColor||invert(this.background),this.arrowheadColor=this.arrowheadColor||invert(this.background),this.textColor=this.textColor||this.primaryTextColor,this.border2=this.border2||this.tertiaryBorderColor,this.nodeBkg=this.nodeBkg||this.primaryColor,this.mainBkg=this.mainBkg||this.primaryColor,this.nodeBorder=this.nodeBorder||this.primaryBorderColor,this.clusterBkg=this.clusterBkg||this.tertiaryColor,this.clusterBorder=this.clusterBorder||this.tertiaryBorderColor,this.defaultLinkColor=this.defaultLinkColor||this.lineColor,this.titleColor=this.titleColor||this.tertiaryTextColor,this.edgeLabelBackground=this.edgeLabelBackground||(this.darkMode?darken(this.secondaryColor,30):this.secondaryColor),this.nodeTextColor=this.nodeTextColor||this.primaryTextColor,this.actorBorder=this.actorBorder||this.primaryBorderColor,this.actorBkg=this.actorBkg||this.mainBkg,this.actorTextColor=this.actorTextColor||this.primaryTextColor,this.actorLineColor=this.actorLineColor||"grey",this.labelBoxBkgColor=this.labelBoxBkgColor||this.actorBkg,this.signalColor=this.signalColor||this.textColor,this.signalTextColor=this.signalTextColor||this.textColor,this.labelBoxBorderColor=this.labelBoxBorderColor||this.actorBorder,this.labelTextColor=this.labelTextColor||this.actorTextColor,this.loopTextColor=this.loopTextColor||this.actorTextColor,this.activationBorderColor=this.activationBorderColor||darken(this.secondaryColor,10),this.activationBkgColor=this.activationBkgColor||this.secondaryColor,this.sequenceNumberColor=this.sequenceNumberColor||invert(this.lineColor),this.sectionBkgColor=this.sectionBkgColor||this.tertiaryColor,this.altSectionBkgColor=this.altSectionBkgColor||"white",this.sectionBkgColor=this.sectionBkgColor||this.secondaryColor,this.sectionBkgColor2=this.sectionBkgColor2||this.primaryColor,this.excludeBkgColor=this.excludeBkgColor||"#eeeeee",this.taskBorderColor=this.taskBorderColor||this.primaryBorderColor,this.taskBkgColor=this.taskBkgColor||this.primaryColor,this.activeTaskBorderColor=this.activeTaskBorderColor||this.primaryColor,this.activeTaskBkgColor=this.activeTaskBkgColor||lighten(this.primaryColor,23),this.gridColor=this.gridColor||"lightgrey",this.doneTaskBkgColor=this.doneTaskBkgColor||"lightgrey",this.doneTaskBorderColor=this.doneTaskBorderColor||"grey",this.critBorderColor=this.critBorderColor||"#ff8888",this.critBkgColor=this.critBkgColor||"red",this.todayLineColor=this.todayLineColor||"red",this.taskTextColor=this.taskTextColor||this.textColor,this.taskTextOutsideColor=this.taskTextOutsideColor||this.textColor,this.taskTextLightColor=this.taskTextLightColor||this.textColor,this.taskTextColor=this.taskTextColor||this.primaryTextColor,this.taskTextDarkColor=this.taskTextDarkColor||this.textColor,this.taskTextClickableColor=this.taskTextClickableColor||"#003163",this.personBorder=this.personBorder||this.primaryBorderColor,this.personBkg=this.personBkg||this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||this.tertiaryColor,this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.specialStateColor=this.lineColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust(this.primaryColor,{h:210,l:150}),this.cScale9=this.cScale9||adjust(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust(this.primaryColor,{h:330}),this.darkMode)for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScale"+N]=darken(this["cScale"+N],75);else for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScale"+N]=darken(this["cScale"+N],25);for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScaleInv"+N]=this["cScaleInv"+N]||invert(this["cScale"+N]);for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this.darkMode?this["cScalePeer"+N]=this["cScalePeer"+N]||lighten(this["cScale"+N],10):this["cScalePeer"+N]=this["cScalePeer"+N]||darken(this["cScale"+N],10);this.scaleLabelColor=this.scaleLabelColor||this.labelTextColor;for(let N=0;N<this.THEME_COLOR_LIMIT;N++)this["cScaleLabel"+N]=this["cScaleLabel"+N]||this.scaleLabelColor;const E=this.darkMode?-4:-1;for(let N=0;N<5;N++)this["surface"+N]=this["surface"+N]||adjust(this.mainBkg,{h:180,s:-15,l:E*(5+N*3)}),this["surfacePeer"+N]=this["surfacePeer"+N]||adjust(this.mainBkg,{h:180,s:-15,l:E*(8+N*3)});this.classText=this.classText||this.textColor,this.fillType0=this.fillType0||this.primaryColor,this.fillType1=this.fillType1||this.secondaryColor,this.fillType2=this.fillType2||adjust(this.primaryColor,{h:64}),this.fillType3=this.fillType3||adjust(this.secondaryColor,{h:64}),this.fillType4=this.fillType4||adjust(this.primaryColor,{h:-64}),this.fillType5=this.fillType5||adjust(this.secondaryColor,{h:-64}),this.fillType6=this.fillType6||adjust(this.primaryColor,{h:128}),this.fillType7=this.fillType7||adjust(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust(this.secondaryColor,{l:-10}),this.pie6=this.pie6||adjust(this.tertiaryColor,{l:-10}),this.pie7=this.pie7||adjust(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust(this.primaryColor,{h:60,l:-20}),this.pie11=this.pie11||adjust(this.primaryColor,{h:-60,l:-20}),this.pie12=this.pie12||adjust(this.primaryColor,{h:120,l:-10}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark(this.quadrant1Fill)?lighten(this.quadrant1Fill):darken(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((l=this.xyChart)==null?void 0:l.backgroundColor)||this.background,titleColor:((c=this.xyChart)==null?void 0:c.titleColor)||this.primaryTextColor,xAxisTitleColor:((d=this.xyChart)==null?void 0:d.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((f=this.xyChart)==null?void 0:f.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((v=this.xyChart)==null?void 0:v.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(($=this.xyChart)==null?void 0:$.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((y=this.xyChart)==null?void 0:y.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((x=this.xyChart)==null?void 0:x.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((C=this.xyChart)==null?void 0:C.plotColorPalette)||"#FFF4DD,#FFD8B1,#FFA07A,#ECEFF1,#D6DBDF,#C3E0A8,#FFB6A4,#FFD74D,#738FA7,#FFFFF0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust(this.primaryColor,{h:-30}),this.git4=this.git4||adjust(this.primaryColor,{h:-60}),this.git5=this.git5||adjust(this.primaryColor,{h:-90}),this.git6=this.git6||adjust(this.primaryColor,{h:60}),this.git7=this.git7||adjust(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten(this.git0,25),this.git1=lighten(this.git1,25),this.git2=lighten(this.git2,25),this.git3=lighten(this.git3,25),this.git4=lighten(this.git4,25),this.git5=lighten(this.git5,25),this.git6=lighten(this.git6,25),this.git7=lighten(this.git7,25)):(this.git0=darken(this.git0,25),this.git1=darken(this.git1,25),this.git2=darken(this.git2,25),this.git3=darken(this.git3,25),this.git4=darken(this.git4,25),this.git5=darken(this.git5,25),this.git6=darken(this.git6,25),this.git7=darken(this.git7,25)),this.gitInv0=this.gitInv0||invert(this.git0),this.gitInv1=this.gitInv1||invert(this.git1),this.gitInv2=this.gitInv2||invert(this.git2),this.gitInv3=this.gitInv3||invert(this.git3),this.gitInv4=this.gitInv4||invert(this.git4),this.gitInv5=this.gitInv5||invert(this.git5),this.gitInv6=this.gitInv6||invert(this.git6),this.gitInv7=this.gitInv7||invert(this.git7),this.branchLabelColor=this.branchLabelColor||(this.darkMode?"black":this.labelTextColor),this.gitBranchLabel0=this.gitBranchLabel0||this.branchLabelColor,this.gitBranchLabel1=this.gitBranchLabel1||this.branchLabelColor,this.gitBranchLabel2=this.gitBranchLabel2||this.branchLabelColor,this.gitBranchLabel3=this.gitBranchLabel3||this.branchLabelColor,this.gitBranchLabel4=this.gitBranchLabel4||this.branchLabelColor,this.gitBranchLabel5=this.gitBranchLabel5||this.branchLabelColor,this.gitBranchLabel6=this.gitBranchLabel6||this.branchLabelColor,this.gitBranchLabel7=this.gitBranchLabel7||this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(l){if(typeof l!="object"){this.updateColors();return}const c=Object.keys(l);c.forEach(d=>{this[d]=l[d]}),this.updateColors(),c.forEach(d=>{this[d]=l[d]})}};const getThemeVariables$4=s=>{const l=new Theme$4;return l.calculate(s),l};let Theme$3=class{constructor(){this.background="#333",this.primaryColor="#1f2020",this.secondaryColor=lighten(this.primaryColor,16),this.tertiaryColor=adjust(this.primaryColor,{h:-160}),this.primaryBorderColor=invert(this.background),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert(this.primaryColor),this.secondaryTextColor=invert(this.secondaryColor),this.tertiaryTextColor=invert(this.tertiaryColor),this.lineColor=invert(this.background),this.textColor=invert(this.background),this.mainBkg="#1f2020",this.secondBkg="calculated",this.mainContrastColor="lightgrey",this.darkTextColor=lighten(invert("#323D47"),10),this.lineColor="calculated",this.border1="#81B1DB",this.border2=rgba(255,255,255,.25),this.arrowheadColor="calculated",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#181818",this.textColor="#ccc",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#F9FFFE",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="calculated",this.activationBkgColor="calculated",this.sequenceNumberColor="black",this.sectionBkgColor=darken("#EAE8D9",30),this.altSectionBkgColor="calculated",this.sectionBkgColor2="#EAE8D9",this.excludeBkgColor=darken(this.sectionBkgColor,10),this.taskBorderColor=rgba(255,255,255,70),this.taskBkgColor="calculated",this.taskTextColor="calculated",this.taskTextLightColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor=rgba(255,255,255,50),this.activeTaskBkgColor="#81B1DB",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="grey",this.critBorderColor="#E83737",this.critBkgColor="#E83737",this.taskTextDarkColor="calculated",this.todayLineColor="#DB5757",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="calculated",this.errorBkgColor="#a44141",this.errorTextColor="#ddd"}updateColors(){var l,c,d,f,g,v,b,$,y,x,C;this.secondBkg=lighten(this.mainBkg,16),this.lineColor=this.mainContrastColor,this.arrowheadColor=this.mainContrastColor,this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.edgeLabelBackground=lighten(this.labelBackground,25),this.actorBorder=this.border1,this.actorBkg=this.mainBkg,this.actorTextColor=this.mainContrastColor,this.actorLineColor=this.mainContrastColor,this.signalColor=this.mainContrastColor,this.signalTextColor=this.mainContrastColor,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.mainContrastColor,this.loopTextColor=this.mainContrastColor,this.noteBorderColor=this.secondaryBorderColor,this.noteBkgColor=this.secondBkg,this.noteTextColor=this.secondaryTextColor,this.activationBorderColor=this.border1,this.activationBkgColor=this.secondBkg,this.altSectionBkgColor=this.background,this.taskBkgColor=lighten(this.mainBkg,23),this.taskTextColor=this.darkTextColor,this.taskTextLightColor=this.mainContrastColor,this.taskTextOutsideColor=this.taskTextLightColor,this.gridColor=this.mainContrastColor,this.doneTaskBkgColor=this.mainContrastColor,this.taskTextDarkColor=this.darkTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#555",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#f4f4f4",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust(this.primaryColor,{h:64}),this.fillType3=adjust(this.secondaryColor,{h:64}),this.fillType4=adjust(this.primaryColor,{h:-64}),this.fillType5=adjust(this.secondaryColor,{h:-64}),this.fillType6=adjust(this.primaryColor,{h:128}),this.fillType7=adjust(this.secondaryColor,{h:128}),this.cScale1=this.cScale1||"#0b0000",this.cScale2=this.cScale2||"#4d1037",this.cScale3=this.cScale3||"#3f5258",this.cScale4=this.cScale4||"#4f2f1b",this.cScale5=this.cScale5||"#6e0a0a",this.cScale6=this.cScale6||"#3b0048",this.cScale7=this.cScale7||"#995a01",this.cScale8=this.cScale8||"#154706",this.cScale9=this.cScale9||"#161722",this.cScale10=this.cScale10||"#00296f",this.cScale11=this.cScale11||"#01629c",this.cScale12=this.cScale12||"#010029",this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust(this.primaryColor,{h:330});for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScaleInv"+E]=this["cScaleInv"+E]||invert(this["cScale"+E]);for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScalePeer"+E]=this["cScalePeer"+E]||lighten(this["cScale"+E],10);for(let E=0;E<5;E++)this["surface"+E]=this["surface"+E]||adjust(this.mainBkg,{h:30,s:-30,l:-(-10+E*4)}),this["surfacePeer"+E]=this["surfacePeer"+E]||adjust(this.mainBkg,{h:30,s:-30,l:-(-7+E*4)});this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor);for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScaleLabel"+E]=this["cScaleLabel"+E]||this.scaleLabelColor;for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["pie"+E]=this["cScale"+E];this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark(this.quadrant1Fill)?lighten(this.quadrant1Fill):darken(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((l=this.xyChart)==null?void 0:l.backgroundColor)||this.background,titleColor:((c=this.xyChart)==null?void 0:c.titleColor)||this.primaryTextColor,xAxisTitleColor:((d=this.xyChart)==null?void 0:d.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((f=this.xyChart)==null?void 0:f.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((v=this.xyChart)==null?void 0:v.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(($=this.xyChart)==null?void 0:$.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((y=this.xyChart)==null?void 0:y.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((x=this.xyChart)==null?void 0:x.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((C=this.xyChart)==null?void 0:C.plotColorPalette)||"#3498db,#2ecc71,#e74c3c,#f1c40f,#bdc3c7,#ffffff,#34495e,#9b59b6,#1abc9c,#e67e22"},this.classText=this.primaryTextColor,this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||(this.darkMode?darken(this.secondaryColor,30):this.secondaryColor),this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=lighten(this.secondaryColor,20),this.git1=lighten(this.pie2||this.secondaryColor,20),this.git2=lighten(this.pie3||this.tertiaryColor,20),this.git3=lighten(this.pie4||adjust(this.primaryColor,{h:-30}),20),this.git4=lighten(this.pie5||adjust(this.primaryColor,{h:-60}),20),this.git5=lighten(this.pie6||adjust(this.primaryColor,{h:-90}),10),this.git6=lighten(this.pie7||adjust(this.primaryColor,{h:60}),10),this.git7=lighten(this.pie8||adjust(this.primaryColor,{h:120}),20),this.gitInv0=this.gitInv0||invert(this.git0),this.gitInv1=this.gitInv1||invert(this.git1),this.gitInv2=this.gitInv2||invert(this.git2),this.gitInv3=this.gitInv3||invert(this.git3),this.gitInv4=this.gitInv4||invert(this.git4),this.gitInv5=this.gitInv5||invert(this.git5),this.gitInv6=this.gitInv6||invert(this.git6),this.gitInv7=this.gitInv7||invert(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||lighten(this.background,12),this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||lighten(this.background,2)}calculate(l){if(typeof l!="object"){this.updateColors();return}const c=Object.keys(l);c.forEach(d=>{this[d]=l[d]}),this.updateColors(),c.forEach(d=>{this[d]=l[d]})}};const getThemeVariables$3=s=>{const l=new Theme$3;return l.calculate(s),l};let Theme$2=class{constructor(){this.background="#f4f4f4",this.primaryColor="#ECECFF",this.secondaryColor=adjust(this.primaryColor,{h:120}),this.secondaryColor="#ffffde",this.tertiaryColor=adjust(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert(this.primaryColor),this.secondaryTextColor=invert(this.secondaryColor),this.tertiaryTextColor=invert(this.tertiaryColor),this.lineColor=invert(this.background),this.textColor=invert(this.background),this.background="white",this.mainBkg="#ECECFF",this.secondBkg="#ffffde",this.lineColor="#333333",this.border1="#9370DB",this.border2="#aaaa33",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.labelBackground="#e8e8e8",this.textColor="#333",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="calculated",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="calculated",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="calculated",this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor="calculated",this.taskTextOutsideColor=this.taskTextDarkColor,this.taskTextClickableColor="calculated",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBorderColor="calculated",this.critBkgColor="calculated",this.todayLineColor="calculated",this.sectionBkgColor=rgba(102,102,255,.49),this.altSectionBkgColor="white",this.sectionBkgColor2="#fff400",this.taskBorderColor="#534fbc",this.taskBkgColor="#8a90dd",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="#534fbc",this.activeTaskBkgColor="#bfc7ff",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222",this.updateColors()}updateColors(){var l,c,d,f,g,v,b,$,y,x,C;this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||darken(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||darken(this.tertiaryColor,40);for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScale"+E]=darken(this["cScale"+E],10),this["cScalePeer"+E]=this["cScalePeer"+E]||darken(this["cScale"+E],25);for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScaleInv"+E]=this["cScaleInv"+E]||adjust(this["cScale"+E],{h:180});for(let E=0;E<5;E++)this["surface"+E]=this["surface"+E]||adjust(this.mainBkg,{h:30,l:-(5+E*5)}),this["surfacePeer"+E]=this["surfacePeer"+E]||adjust(this.mainBkg,{h:30,l:-(7+E*5)});if(this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor,this.labelTextColor!=="calculated"){this.cScaleLabel0=this.cScaleLabel0||invert(this.labelTextColor),this.cScaleLabel3=this.cScaleLabel3||invert(this.labelTextColor);for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScaleLabel"+E]=this["cScaleLabel"+E]||this.labelTextColor}this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.textColor,this.edgeLabelBackground=this.labelBackground,this.actorBorder=lighten(this.border1,23),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.signalColor=this.textColor,this.signalTextColor=this.textColor,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.nodeBorder,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust(this.primaryColor,{h:64}),this.fillType3=adjust(this.secondaryColor,{h:64}),this.fillType4=adjust(this.primaryColor,{h:-64}),this.fillType5=adjust(this.secondaryColor,{h:-64}),this.fillType6=adjust(this.primaryColor,{h:128}),this.fillType7=adjust(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||adjust(this.tertiaryColor,{l:-40}),this.pie4=this.pie4||adjust(this.primaryColor,{l:-10}),this.pie5=this.pie5||adjust(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust(this.tertiaryColor,{l:-20}),this.pie7=this.pie7||adjust(this.primaryColor,{h:60,l:-20}),this.pie8=this.pie8||adjust(this.primaryColor,{h:-60,l:-40}),this.pie9=this.pie9||adjust(this.primaryColor,{h:120,l:-40}),this.pie10=this.pie10||adjust(this.primaryColor,{h:60,l:-40}),this.pie11=this.pie11||adjust(this.primaryColor,{h:-90,l:-40}),this.pie12=this.pie12||adjust(this.primaryColor,{h:120,l:-30}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark(this.quadrant1Fill)?lighten(this.quadrant1Fill):darken(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((l=this.xyChart)==null?void 0:l.backgroundColor)||this.background,titleColor:((c=this.xyChart)==null?void 0:c.titleColor)||this.primaryTextColor,xAxisTitleColor:((d=this.xyChart)==null?void 0:d.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((f=this.xyChart)==null?void 0:f.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((v=this.xyChart)==null?void 0:v.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(($=this.xyChart)==null?void 0:$.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((y=this.xyChart)==null?void 0:y.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((x=this.xyChart)==null?void 0:x.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((C=this.xyChart)==null?void 0:C.plotColorPalette)||"#ECECFF,#8493A6,#FFC3A0,#DCDDE1,#B8E994,#D1A36F,#C3CDE6,#FFB6C1,#496078,#F8F3E3"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.labelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust(this.primaryColor,{h:-30}),this.git4=this.git4||adjust(this.primaryColor,{h:-60}),this.git5=this.git5||adjust(this.primaryColor,{h:-90}),this.git6=this.git6||adjust(this.primaryColor,{h:60}),this.git7=this.git7||adjust(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten(this.git0,25),this.git1=lighten(this.git1,25),this.git2=lighten(this.git2,25),this.git3=lighten(this.git3,25),this.git4=lighten(this.git4,25),this.git5=lighten(this.git5,25),this.git6=lighten(this.git6,25),this.git7=lighten(this.git7,25)):(this.git0=darken(this.git0,25),this.git1=darken(this.git1,25),this.git2=darken(this.git2,25),this.git3=darken(this.git3,25),this.git4=darken(this.git4,25),this.git5=darken(this.git5,25),this.git6=darken(this.git6,25),this.git7=darken(this.git7,25)),this.gitInv0=this.gitInv0||darken(invert(this.git0),25),this.gitInv1=this.gitInv1||invert(this.git1),this.gitInv2=this.gitInv2||invert(this.git2),this.gitInv3=this.gitInv3||invert(this.git3),this.gitInv4=this.gitInv4||invert(this.git4),this.gitInv5=this.gitInv5||invert(this.git5),this.gitInv6=this.gitInv6||invert(this.git6),this.gitInv7=this.gitInv7||invert(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(l){if(typeof l!="object"){this.updateColors();return}const c=Object.keys(l);c.forEach(d=>{this[d]=l[d]}),this.updateColors(),c.forEach(d=>{this[d]=l[d]})}};const getThemeVariables$2=s=>{const l=new Theme$2;return l.calculate(s),l};let Theme$1=class{constructor(){this.background="#f4f4f4",this.primaryColor="#cde498",this.secondaryColor="#cdffb2",this.background="white",this.mainBkg="#cde498",this.secondBkg="#cdffb2",this.lineColor="green",this.border1="#13540c",this.border2="#6eaa49",this.arrowheadColor="green",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.tertiaryColor=lighten("#cde498",10),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert(this.primaryColor),this.secondaryTextColor=invert(this.secondaryColor),this.tertiaryTextColor=invert(this.primaryColor),this.lineColor=invert(this.background),this.textColor=invert(this.background),this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="#333",this.edgeLabelBackground="#e8e8e8",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="black",this.actorLineColor="grey",this.signalColor="#333",this.signalTextColor="#333",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="#326932",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="#fff5ad",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="#6eaa49",this.altSectionBkgColor="white",this.sectionBkgColor2="#6eaa49",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="#487e3a",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="black",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="lightgrey",this.doneTaskBkgColor="lightgrey",this.doneTaskBorderColor="grey",this.critBorderColor="#ff8888",this.critBkgColor="red",this.todayLineColor="red",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var l,c,d,f,g,v,b,$,y,x,C;this.actorBorder=darken(this.mainBkg,20),this.actorBkg=this.mainBkg,this.labelBoxBkgColor=this.actorBkg,this.labelTextColor=this.actorTextColor,this.loopTextColor=this.actorTextColor,this.noteBorderColor=this.border2,this.noteTextColor=this.actorTextColor,this.cScale0=this.cScale0||this.primaryColor,this.cScale1=this.cScale1||this.secondaryColor,this.cScale2=this.cScale2||this.tertiaryColor,this.cScale3=this.cScale3||adjust(this.primaryColor,{h:30}),this.cScale4=this.cScale4||adjust(this.primaryColor,{h:60}),this.cScale5=this.cScale5||adjust(this.primaryColor,{h:90}),this.cScale6=this.cScale6||adjust(this.primaryColor,{h:120}),this.cScale7=this.cScale7||adjust(this.primaryColor,{h:150}),this.cScale8=this.cScale8||adjust(this.primaryColor,{h:210}),this.cScale9=this.cScale9||adjust(this.primaryColor,{h:270}),this.cScale10=this.cScale10||adjust(this.primaryColor,{h:300}),this.cScale11=this.cScale11||adjust(this.primaryColor,{h:330}),this.cScalePeer1=this.cScalePeer1||darken(this.secondaryColor,45),this.cScalePeer2=this.cScalePeer2||darken(this.tertiaryColor,40);for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScale"+E]=darken(this["cScale"+E],10),this["cScalePeer"+E]=this["cScalePeer"+E]||darken(this["cScale"+E],25);for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScaleInv"+E]=this["cScaleInv"+E]||adjust(this["cScale"+E],{h:180});this.scaleLabelColor=this.scaleLabelColor!=="calculated"&&this.scaleLabelColor?this.scaleLabelColor:this.labelTextColor;for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScaleLabel"+E]=this["cScaleLabel"+E]||this.scaleLabelColor;for(let E=0;E<5;E++)this["surface"+E]=this["surface"+E]||adjust(this.mainBkg,{h:30,s:-30,l:-(5+E*5)}),this["surfacePeer"+E]=this["surfacePeer"+E]||adjust(this.mainBkg,{h:30,s:-30,l:-(8+E*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.taskBorderColor=this.border1,this.taskTextColor=this.taskTextLightColor,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.transitionColor=this.transitionColor||this.lineColor,this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f0f0f0",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.compositeBorder=this.compositeBorder||this.nodeBorder,this.innerEndBackground=this.primaryBorderColor,this.specialStateColor=this.lineColor,this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.transitionColor=this.transitionColor||this.lineColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust(this.primaryColor,{h:64}),this.fillType3=adjust(this.secondaryColor,{h:64}),this.fillType4=adjust(this.primaryColor,{h:-64}),this.fillType5=adjust(this.secondaryColor,{h:-64}),this.fillType6=adjust(this.primaryColor,{h:128}),this.fillType7=adjust(this.secondaryColor,{h:128}),this.pie1=this.pie1||this.primaryColor,this.pie2=this.pie2||this.secondaryColor,this.pie3=this.pie3||this.tertiaryColor,this.pie4=this.pie4||adjust(this.primaryColor,{l:-30}),this.pie5=this.pie5||adjust(this.secondaryColor,{l:-30}),this.pie6=this.pie6||adjust(this.tertiaryColor,{h:40,l:-40}),this.pie7=this.pie7||adjust(this.primaryColor,{h:60,l:-10}),this.pie8=this.pie8||adjust(this.primaryColor,{h:-60,l:-10}),this.pie9=this.pie9||adjust(this.primaryColor,{h:120,l:0}),this.pie10=this.pie10||adjust(this.primaryColor,{h:60,l:-50}),this.pie11=this.pie11||adjust(this.primaryColor,{h:-60,l:-50}),this.pie12=this.pie12||adjust(this.primaryColor,{h:120,l:-50}),this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark(this.quadrant1Fill)?lighten(this.quadrant1Fill):darken(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((l=this.xyChart)==null?void 0:l.backgroundColor)||this.background,titleColor:((c=this.xyChart)==null?void 0:c.titleColor)||this.primaryTextColor,xAxisTitleColor:((d=this.xyChart)==null?void 0:d.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((f=this.xyChart)==null?void 0:f.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((v=this.xyChart)==null?void 0:v.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(($=this.xyChart)==null?void 0:$.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((y=this.xyChart)==null?void 0:y.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((x=this.xyChart)==null?void 0:x.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((C=this.xyChart)==null?void 0:C.plotColorPalette)||"#CDE498,#FF6B6B,#A0D2DB,#D7BDE2,#F0F0F0,#FFC3A0,#7FD8BE,#FF9A8B,#FAF3E0,#FFF176"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=this.git0||this.primaryColor,this.git1=this.git1||this.secondaryColor,this.git2=this.git2||this.tertiaryColor,this.git3=this.git3||adjust(this.primaryColor,{h:-30}),this.git4=this.git4||adjust(this.primaryColor,{h:-60}),this.git5=this.git5||adjust(this.primaryColor,{h:-90}),this.git6=this.git6||adjust(this.primaryColor,{h:60}),this.git7=this.git7||adjust(this.primaryColor,{h:120}),this.darkMode?(this.git0=lighten(this.git0,25),this.git1=lighten(this.git1,25),this.git2=lighten(this.git2,25),this.git3=lighten(this.git3,25),this.git4=lighten(this.git4,25),this.git5=lighten(this.git5,25),this.git6=lighten(this.git6,25),this.git7=lighten(this.git7,25)):(this.git0=darken(this.git0,25),this.git1=darken(this.git1,25),this.git2=darken(this.git2,25),this.git3=darken(this.git3,25),this.git4=darken(this.git4,25),this.git5=darken(this.git5,25),this.git6=darken(this.git6,25),this.git7=darken(this.git7,25)),this.gitInv0=this.gitInv0||invert(this.git0),this.gitInv1=this.gitInv1||invert(this.git1),this.gitInv2=this.gitInv2||invert(this.git2),this.gitInv3=this.gitInv3||invert(this.git3),this.gitInv4=this.gitInv4||invert(this.git4),this.gitInv5=this.gitInv5||invert(this.git5),this.gitInv6=this.gitInv6||invert(this.git6),this.gitInv7=this.gitInv7||invert(this.git7),this.gitBranchLabel0=this.gitBranchLabel0||invert(this.labelTextColor),this.gitBranchLabel1=this.gitBranchLabel1||this.labelTextColor,this.gitBranchLabel2=this.gitBranchLabel2||this.labelTextColor,this.gitBranchLabel3=this.gitBranchLabel3||invert(this.labelTextColor),this.gitBranchLabel4=this.gitBranchLabel4||this.labelTextColor,this.gitBranchLabel5=this.gitBranchLabel5||this.labelTextColor,this.gitBranchLabel6=this.gitBranchLabel6||this.labelTextColor,this.gitBranchLabel7=this.gitBranchLabel7||this.labelTextColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(l){if(typeof l!="object"){this.updateColors();return}const c=Object.keys(l);c.forEach(d=>{this[d]=l[d]}),this.updateColors(),c.forEach(d=>{this[d]=l[d]})}};const getThemeVariables$1=s=>{const l=new Theme$1;return l.calculate(s),l};class Theme5{constructor(){this.primaryColor="#eee",this.contrast="#707070",this.secondaryColor=lighten(this.contrast,55),this.background="#ffffff",this.tertiaryColor=adjust(this.primaryColor,{h:-160}),this.primaryBorderColor=mkBorder(this.primaryColor,this.darkMode),this.secondaryBorderColor=mkBorder(this.secondaryColor,this.darkMode),this.tertiaryBorderColor=mkBorder(this.tertiaryColor,this.darkMode),this.primaryTextColor=invert(this.primaryColor),this.secondaryTextColor=invert(this.secondaryColor),this.tertiaryTextColor=invert(this.tertiaryColor),this.lineColor=invert(this.background),this.textColor=invert(this.background),this.mainBkg="#eee",this.secondBkg="calculated",this.lineColor="#666",this.border1="#999",this.border2="calculated",this.note="#ffa",this.text="#333",this.critical="#d42",this.done="#bbb",this.arrowheadColor="#333333",this.fontFamily='"trebuchet ms", verdana, arial, sans-serif',this.fontSize="16px",this.THEME_COLOR_LIMIT=12,this.nodeBkg="calculated",this.nodeBorder="calculated",this.clusterBkg="calculated",this.clusterBorder="calculated",this.defaultLinkColor="calculated",this.titleColor="calculated",this.edgeLabelBackground="white",this.actorBorder="calculated",this.actorBkg="calculated",this.actorTextColor="calculated",this.actorLineColor="calculated",this.signalColor="calculated",this.signalTextColor="calculated",this.labelBoxBkgColor="calculated",this.labelBoxBorderColor="calculated",this.labelTextColor="calculated",this.loopTextColor="calculated",this.noteBorderColor="calculated",this.noteBkgColor="calculated",this.noteTextColor="calculated",this.activationBorderColor="#666",this.activationBkgColor="#f4f4f4",this.sequenceNumberColor="white",this.sectionBkgColor="calculated",this.altSectionBkgColor="white",this.sectionBkgColor2="calculated",this.excludeBkgColor="#eeeeee",this.taskBorderColor="calculated",this.taskBkgColor="calculated",this.taskTextLightColor="white",this.taskTextColor="calculated",this.taskTextDarkColor="calculated",this.taskTextOutsideColor="calculated",this.taskTextClickableColor="#003163",this.activeTaskBorderColor="calculated",this.activeTaskBkgColor="calculated",this.gridColor="calculated",this.doneTaskBkgColor="calculated",this.doneTaskBorderColor="calculated",this.critBkgColor="calculated",this.critBorderColor="calculated",this.todayLineColor="calculated",this.personBorder=this.primaryBorderColor,this.personBkg=this.mainBkg,this.labelColor="black",this.errorBkgColor="#552222",this.errorTextColor="#552222"}updateColors(){var l,c,d,f,g,v,b,$,y,x,C;this.secondBkg=lighten(this.contrast,55),this.border2=this.contrast,this.actorBorder=lighten(this.border1,23),this.actorBkg=this.mainBkg,this.actorTextColor=this.text,this.actorLineColor=this.lineColor,this.signalColor=this.text,this.signalTextColor=this.text,this.labelBoxBkgColor=this.actorBkg,this.labelBoxBorderColor=this.actorBorder,this.labelTextColor=this.text,this.loopTextColor=this.text,this.noteBorderColor="#999",this.noteBkgColor="#666",this.noteTextColor="#fff",this.cScale0=this.cScale0||"#555",this.cScale1=this.cScale1||"#F4F4F4",this.cScale2=this.cScale2||"#555",this.cScale3=this.cScale3||"#BBB",this.cScale4=this.cScale4||"#777",this.cScale5=this.cScale5||"#999",this.cScale6=this.cScale6||"#DDD",this.cScale7=this.cScale7||"#FFF",this.cScale8=this.cScale8||"#DDD",this.cScale9=this.cScale9||"#BBB",this.cScale10=this.cScale10||"#999",this.cScale11=this.cScale11||"#777";for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScaleInv"+E]=this["cScaleInv"+E]||invert(this["cScale"+E]);for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this.darkMode?this["cScalePeer"+E]=this["cScalePeer"+E]||lighten(this["cScale"+E],10):this["cScalePeer"+E]=this["cScalePeer"+E]||darken(this["cScale"+E],10);this.scaleLabelColor=this.scaleLabelColor||(this.darkMode?"black":this.labelTextColor),this.cScaleLabel0=this.cScaleLabel0||this.cScale1,this.cScaleLabel2=this.cScaleLabel2||this.cScale1;for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["cScaleLabel"+E]=this["cScaleLabel"+E]||this.scaleLabelColor;for(let E=0;E<5;E++)this["surface"+E]=this["surface"+E]||adjust(this.mainBkg,{l:-(5+E*5)}),this["surfacePeer"+E]=this["surfacePeer"+E]||adjust(this.mainBkg,{l:-(8+E*5)});this.nodeBkg=this.mainBkg,this.nodeBorder=this.border1,this.clusterBkg=this.secondBkg,this.clusterBorder=this.border2,this.defaultLinkColor=this.lineColor,this.titleColor=this.text,this.sectionBkgColor=lighten(this.contrast,30),this.sectionBkgColor2=lighten(this.contrast,30),this.taskBorderColor=darken(this.contrast,10),this.taskBkgColor=this.contrast,this.taskTextColor=this.taskTextLightColor,this.taskTextDarkColor=this.text,this.taskTextOutsideColor=this.taskTextDarkColor,this.activeTaskBorderColor=this.taskBorderColor,this.activeTaskBkgColor=this.mainBkg,this.gridColor=lighten(this.border1,30),this.doneTaskBkgColor=this.done,this.doneTaskBorderColor=this.lineColor,this.critBkgColor=this.critical,this.critBorderColor=darken(this.critBkgColor,10),this.todayLineColor=this.critBkgColor,this.transitionColor=this.transitionColor||"#000",this.transitionLabelColor=this.transitionLabelColor||this.textColor,this.stateLabelColor=this.stateLabelColor||this.stateBkg||this.primaryTextColor,this.stateBkg=this.stateBkg||this.mainBkg,this.labelBackgroundColor=this.labelBackgroundColor||this.stateBkg,this.compositeBackground=this.compositeBackground||this.background||this.tertiaryColor,this.altBackground=this.altBackground||"#f4f4f4",this.compositeTitleBackground=this.compositeTitleBackground||this.mainBkg,this.stateBorder=this.stateBorder||"#000",this.innerEndBackground=this.primaryBorderColor,this.specialStateColor="#222",this.errorBkgColor=this.errorBkgColor||this.tertiaryColor,this.errorTextColor=this.errorTextColor||this.tertiaryTextColor,this.classText=this.primaryTextColor,this.fillType0=this.primaryColor,this.fillType1=this.secondaryColor,this.fillType2=adjust(this.primaryColor,{h:64}),this.fillType3=adjust(this.secondaryColor,{h:64}),this.fillType4=adjust(this.primaryColor,{h:-64}),this.fillType5=adjust(this.secondaryColor,{h:-64}),this.fillType6=adjust(this.primaryColor,{h:128}),this.fillType7=adjust(this.secondaryColor,{h:128});for(let E=0;E<this.THEME_COLOR_LIMIT;E++)this["pie"+E]=this["cScale"+E];this.pie12=this.pie0,this.pieTitleTextSize=this.pieTitleTextSize||"25px",this.pieTitleTextColor=this.pieTitleTextColor||this.taskTextDarkColor,this.pieSectionTextSize=this.pieSectionTextSize||"17px",this.pieSectionTextColor=this.pieSectionTextColor||this.textColor,this.pieLegendTextSize=this.pieLegendTextSize||"17px",this.pieLegendTextColor=this.pieLegendTextColor||this.taskTextDarkColor,this.pieStrokeColor=this.pieStrokeColor||"black",this.pieStrokeWidth=this.pieStrokeWidth||"2px",this.pieOuterStrokeWidth=this.pieOuterStrokeWidth||"2px",this.pieOuterStrokeColor=this.pieOuterStrokeColor||"black",this.pieOpacity=this.pieOpacity||"0.7",this.quadrant1Fill=this.quadrant1Fill||this.primaryColor,this.quadrant2Fill=this.quadrant2Fill||adjust(this.primaryColor,{r:5,g:5,b:5}),this.quadrant3Fill=this.quadrant3Fill||adjust(this.primaryColor,{r:10,g:10,b:10}),this.quadrant4Fill=this.quadrant4Fill||adjust(this.primaryColor,{r:15,g:15,b:15}),this.quadrant1TextFill=this.quadrant1TextFill||this.primaryTextColor,this.quadrant2TextFill=this.quadrant2TextFill||adjust(this.primaryTextColor,{r:-5,g:-5,b:-5}),this.quadrant3TextFill=this.quadrant3TextFill||adjust(this.primaryTextColor,{r:-10,g:-10,b:-10}),this.quadrant4TextFill=this.quadrant4TextFill||adjust(this.primaryTextColor,{r:-15,g:-15,b:-15}),this.quadrantPointFill=this.quadrantPointFill||isDark(this.quadrant1Fill)?lighten(this.quadrant1Fill):darken(this.quadrant1Fill),this.quadrantPointTextFill=this.quadrantPointTextFill||this.primaryTextColor,this.quadrantXAxisTextFill=this.quadrantXAxisTextFill||this.primaryTextColor,this.quadrantYAxisTextFill=this.quadrantYAxisTextFill||this.primaryTextColor,this.quadrantInternalBorderStrokeFill=this.quadrantInternalBorderStrokeFill||this.primaryBorderColor,this.quadrantExternalBorderStrokeFill=this.quadrantExternalBorderStrokeFill||this.primaryBorderColor,this.quadrantTitleFill=this.quadrantTitleFill||this.primaryTextColor,this.xyChart={backgroundColor:((l=this.xyChart)==null?void 0:l.backgroundColor)||this.background,titleColor:((c=this.xyChart)==null?void 0:c.titleColor)||this.primaryTextColor,xAxisTitleColor:((d=this.xyChart)==null?void 0:d.xAxisTitleColor)||this.primaryTextColor,xAxisLabelColor:((f=this.xyChart)==null?void 0:f.xAxisLabelColor)||this.primaryTextColor,xAxisTickColor:((g=this.xyChart)==null?void 0:g.xAxisTickColor)||this.primaryTextColor,xAxisLineColor:((v=this.xyChart)==null?void 0:v.xAxisLineColor)||this.primaryTextColor,yAxisTitleColor:((b=this.xyChart)==null?void 0:b.yAxisTitleColor)||this.primaryTextColor,yAxisLabelColor:(($=this.xyChart)==null?void 0:$.yAxisLabelColor)||this.primaryTextColor,yAxisTickColor:((y=this.xyChart)==null?void 0:y.yAxisTickColor)||this.primaryTextColor,yAxisLineColor:((x=this.xyChart)==null?void 0:x.yAxisLineColor)||this.primaryTextColor,plotColorPalette:((C=this.xyChart)==null?void 0:C.plotColorPalette)||"#EEE,#6BB8E4,#8ACB88,#C7ACD6,#E8DCC2,#FFB2A8,#FFF380,#7E8D91,#FFD8B1,#FAF3E0"},this.requirementBackground=this.requirementBackground||this.primaryColor,this.requirementBorderColor=this.requirementBorderColor||this.primaryBorderColor,this.requirementBorderSize=this.requirementBorderSize||"1",this.requirementTextColor=this.requirementTextColor||this.primaryTextColor,this.relationColor=this.relationColor||this.lineColor,this.relationLabelBackground=this.relationLabelBackground||this.edgeLabelBackground,this.relationLabelColor=this.relationLabelColor||this.actorTextColor,this.git0=darken(this.pie1,25)||this.primaryColor,this.git1=this.pie2||this.secondaryColor,this.git2=this.pie3||this.tertiaryColor,this.git3=this.pie4||adjust(this.primaryColor,{h:-30}),this.git4=this.pie5||adjust(this.primaryColor,{h:-60}),this.git5=this.pie6||adjust(this.primaryColor,{h:-90}),this.git6=this.pie7||adjust(this.primaryColor,{h:60}),this.git7=this.pie8||adjust(this.primaryColor,{h:120}),this.gitInv0=this.gitInv0||invert(this.git0),this.gitInv1=this.gitInv1||invert(this.git1),this.gitInv2=this.gitInv2||invert(this.git2),this.gitInv3=this.gitInv3||invert(this.git3),this.gitInv4=this.gitInv4||invert(this.git4),this.gitInv5=this.gitInv5||invert(this.git5),this.gitInv6=this.gitInv6||invert(this.git6),this.gitInv7=this.gitInv7||invert(this.git7),this.branchLabelColor=this.branchLabelColor||this.labelTextColor,this.gitBranchLabel0=this.branchLabelColor,this.gitBranchLabel1="white",this.gitBranchLabel2=this.branchLabelColor,this.gitBranchLabel3="white",this.gitBranchLabel4=this.branchLabelColor,this.gitBranchLabel5=this.branchLabelColor,this.gitBranchLabel6=this.branchLabelColor,this.gitBranchLabel7=this.branchLabelColor,this.tagLabelColor=this.tagLabelColor||this.primaryTextColor,this.tagLabelBackground=this.tagLabelBackground||this.primaryColor,this.tagLabelBorder=this.tagBorder||this.primaryBorderColor,this.tagLabelFontSize=this.tagLabelFontSize||"10px",this.commitLabelColor=this.commitLabelColor||this.secondaryTextColor,this.commitLabelBackground=this.commitLabelBackground||this.secondaryColor,this.commitLabelFontSize=this.commitLabelFontSize||"10px",this.attributeBackgroundColorOdd=this.attributeBackgroundColorOdd||oldAttributeBackgroundColorOdd,this.attributeBackgroundColorEven=this.attributeBackgroundColorEven||oldAttributeBackgroundColorEven}calculate(l){if(typeof l!="object"){this.updateColors();return}const c=Object.keys(l);c.forEach(d=>{this[d]=l[d]}),this.updateColors(),c.forEach(d=>{this[d]=l[d]})}}const getThemeVariables=s=>{const l=new Theme5;return l.calculate(s),l},theme={base:{getThemeVariables:getThemeVariables$4},dark:{getThemeVariables:getThemeVariables$3},default:{getThemeVariables:getThemeVariables$2},forest:{getThemeVariables:getThemeVariables$1},neutral:{getThemeVariables}},defaultConfigJson={flowchart:{useMaxWidth:!0,titleTopMargin:25,subGraphTitleMargin:{top:0,bottom:0},diagramPadding:8,htmlLabels:!0,nodeSpacing:50,rankSpacing:50,curve:"basis",padding:15,defaultRenderer:"dagre-wrapper",wrappingWidth:200},sequence:{useMaxWidth:!0,hideUnusedParticipants:!1,activationWidth:10,diagramMarginX:50,diagramMarginY:10,actorMargin:50,width:150,height:65,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",mirrorActors:!0,forceMenus:!1,bottomMarginAdj:1,rightAngles:!1,showSequenceNumbers:!1,actorFontSize:14,actorFontFamily:'"Open Sans", sans-serif',actorFontWeight:400,noteFontSize:14,noteFontFamily:'"trebuchet ms", verdana, arial, sans-serif',noteFontWeight:400,noteAlign:"center",messageFontSize:16,messageFontFamily:'"trebuchet ms", verdana, arial, sans-serif',messageFontWeight:400,wrap:!1,wrapPadding:10,labelBoxWidth:50,labelBoxHeight:20},gantt:{useMaxWidth:!0,titleTopMargin:25,barHeight:20,barGap:4,topPadding:50,rightPadding:75,leftPadding:75,gridLineStartPadding:35,fontSize:11,sectionFontSize:11,numberSectionStyles:4,axisFormat:"%Y-%m-%d",topAxis:!1,displayMode:"",weekday:"sunday"},journey:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"]},class:{useMaxWidth:!0,titleTopMargin:25,arrowMarkerAbsolute:!1,dividerMargin:10,padding:5,textHeight:10,defaultRenderer:"dagre-wrapper",htmlLabels:!1},state:{useMaxWidth:!0,titleTopMargin:25,dividerMargin:10,sizeUnit:5,padding:8,textHeight:10,titleShift:-15,noteMargin:10,forkWidth:70,forkHeight:7,miniPadding:2,fontSizeFactor:5.02,fontSize:24,labelHeight:16,edgeLengthFactor:"20",compositTitleSize:35,radius:5,defaultRenderer:"dagre-wrapper"},er:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:20,layoutDirection:"TB",minEntityWidth:100,minEntityHeight:75,entityPadding:15,stroke:"gray",fill:"honeydew",fontSize:12},pie:{useMaxWidth:!0,textPosition:.75},quadrantChart:{useMaxWidth:!0,chartWidth:500,chartHeight:500,titleFontSize:20,titlePadding:10,quadrantPadding:5,xAxisLabelPadding:5,yAxisLabelPadding:5,xAxisLabelFontSize:16,yAxisLabelFontSize:16,quadrantLabelFontSize:16,quadrantTextTopPadding:5,pointTextPadding:5,pointLabelFontSize:12,pointRadius:5,xAxisPosition:"top",yAxisPosition:"left",quadrantInternalBorderStrokeWidth:1,quadrantExternalBorderStrokeWidth:2},xyChart:{useMaxWidth:!0,width:700,height:500,titleFontSize:20,titlePadding:10,showTitle:!0,xAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},yAxis:{$ref:"#/$defs/XYChartAxisConfig",showLabel:!0,labelFontSize:14,labelPadding:5,showTitle:!0,titleFontSize:16,titlePadding:5,showTick:!0,tickLength:5,tickWidth:2,showAxisLine:!0,axisLineWidth:2},chartOrientation:"vertical",plotReservedSpacePercent:50},requirement:{useMaxWidth:!0,rect_fill:"#f9f9f9",text_color:"#333",rect_border_size:"0.5px",rect_border_color:"#bbb",rect_min_width:200,rect_min_height:200,fontSize:14,rect_padding:10,line_height:20},mindmap:{useMaxWidth:!0,padding:10,maxNodeWidth:200},timeline:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,leftMargin:150,width:150,height:50,boxMargin:10,boxTextMargin:5,noteMargin:10,messageMargin:35,messageAlign:"center",bottomMarginAdj:1,rightAngles:!1,taskFontSize:14,taskFontFamily:'"Open Sans", sans-serif',taskMargin:50,activationWidth:10,textPlacement:"fo",actorColours:["#8FBC8F","#7CFC00","#00FFFF","#20B2AA","#B0E0E6","#FFFFE0"],sectionFills:["#191970","#8B008B","#4B0082","#2F4F4F","#800000","#8B4513","#00008B"],sectionColours:["#fff"],disableMulticolor:!1},gitGraph:{useMaxWidth:!0,titleTopMargin:25,diagramPadding:8,nodeLabel:{width:75,height:100,x:-25,y:0},mainBranchName:"main",mainBranchOrder:0,showCommitLabel:!0,showBranches:!0,rotateCommitLabel:!0,parallelCommits:!1,arrowMarkerAbsolute:!1},c4:{useMaxWidth:!0,diagramMarginX:50,diagramMarginY:10,c4ShapeMargin:50,c4ShapePadding:20,width:216,height:60,boxMargin:10,c4ShapeInRow:4,nextLinePaddingX:0,c4BoundaryInRow:2,personFontSize:14,personFontFamily:'"Open Sans", sans-serif',personFontWeight:"normal",external_personFontSize:14,external_personFontFamily:'"Open Sans", sans-serif',external_personFontWeight:"normal",systemFontSize:14,systemFontFamily:'"Open Sans", sans-serif',systemFontWeight:"normal",external_systemFontSize:14,external_systemFontFamily:'"Open Sans", sans-serif',external_systemFontWeight:"normal",system_dbFontSize:14,system_dbFontFamily:'"Open Sans", sans-serif',system_dbFontWeight:"normal",external_system_dbFontSize:14,external_system_dbFontFamily:'"Open Sans", sans-serif',external_system_dbFontWeight:"normal",system_queueFontSize:14,system_queueFontFamily:'"Open Sans", sans-serif',system_queueFontWeight:"normal",external_system_queueFontSize:14,external_system_queueFontFamily:'"Open Sans", sans-serif',external_system_queueFontWeight:"normal",boundaryFontSize:14,boundaryFontFamily:'"Open Sans", sans-serif',boundaryFontWeight:"normal",messageFontSize:12,messageFontFamily:'"Open Sans", sans-serif',messageFontWeight:"normal",containerFontSize:14,containerFontFamily:'"Open Sans", sans-serif',containerFontWeight:"normal",external_containerFontSize:14,external_containerFontFamily:'"Open Sans", sans-serif',external_containerFontWeight:"normal",container_dbFontSize:14,container_dbFontFamily:'"Open Sans", sans-serif',container_dbFontWeight:"normal",external_container_dbFontSize:14,external_container_dbFontFamily:'"Open Sans", sans-serif',external_container_dbFontWeight:"normal",container_queueFontSize:14,container_queueFontFamily:'"Open Sans", sans-serif',container_queueFontWeight:"normal",external_container_queueFontSize:14,external_container_queueFontFamily:'"Open Sans", sans-serif',external_container_queueFontWeight:"normal",componentFontSize:14,componentFontFamily:'"Open Sans", sans-serif',componentFontWeight:"normal",external_componentFontSize:14,external_componentFontFamily:'"Open Sans", sans-serif',external_componentFontWeight:"normal",component_dbFontSize:14,component_dbFontFamily:'"Open Sans", sans-serif',component_dbFontWeight:"normal",external_component_dbFontSize:14,external_component_dbFontFamily:'"Open Sans", sans-serif',external_component_dbFontWeight:"normal",component_queueFontSize:14,component_queueFontFamily:'"Open Sans", sans-serif',component_queueFontWeight:"normal",external_component_queueFontSize:14,external_component_queueFontFamily:'"Open Sans", sans-serif',external_component_queueFontWeight:"normal",wrap:!0,wrapPadding:10,person_bg_color:"#08427B",person_border_color:"#073B6F",external_person_bg_color:"#686868",external_person_border_color:"#8A8A8A",system_bg_color:"#1168BD",system_border_color:"#3C7FC0",system_db_bg_color:"#1168BD",system_db_border_color:"#3C7FC0",system_queue_bg_color:"#1168BD",system_queue_border_color:"#3C7FC0",external_system_bg_color:"#999999",external_system_border_color:"#8A8A8A",external_system_db_bg_color:"#999999",external_system_db_border_color:"#8A8A8A",external_system_queue_bg_color:"#999999",external_system_queue_border_color:"#8A8A8A",container_bg_color:"#438DD5",container_border_color:"#3C7FC0",container_db_bg_color:"#438DD5",container_db_border_color:"#3C7FC0",container_queue_bg_color:"#438DD5",container_queue_border_color:"#3C7FC0",external_container_bg_color:"#B3B3B3",external_container_border_color:"#A6A6A6",external_container_db_bg_color:"#B3B3B3",external_container_db_border_color:"#A6A6A6",external_container_queue_bg_color:"#B3B3B3",external_container_queue_border_color:"#A6A6A6",component_bg_color:"#85BBF0",component_border_color:"#78A8D8",component_db_bg_color:"#85BBF0",component_db_border_color:"#78A8D8",component_queue_bg_color:"#85BBF0",component_queue_border_color:"#78A8D8",external_component_bg_color:"#CCCCCC",external_component_border_color:"#BFBFBF",external_component_db_bg_color:"#CCCCCC",external_component_db_border_color:"#BFBFBF",external_component_queue_bg_color:"#CCCCCC",external_component_queue_border_color:"#BFBFBF"},sankey:{useMaxWidth:!0,width:600,height:400,linkColor:"gradient",nodeAlignment:"justify",showValues:!0,prefix:"",suffix:""},block:{useMaxWidth:!0,padding:8},theme:"default",maxTextSize:5e4,maxEdges:500,darkMode:!1,fontFamily:'"trebuchet ms", verdana, arial, sans-serif;',logLevel:5,securityLevel:"strict",startOnLoad:!0,arrowMarkerAbsolute:!1,secure:["secure","securityLevel","startOnLoad","maxTextSize","maxEdges"],legacyMathML:!1,deterministicIds:!1,fontSize:16},config={...defaultConfigJson,deterministicIDSeed:void 0,themeCSS:void 0,themeVariables:theme.default.getThemeVariables(),sequence:{...defaultConfigJson.sequence,messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}},noteFont:function(){return{fontFamily:this.noteFontFamily,fontSize:this.noteFontSize,fontWeight:this.noteFontWeight}},actorFont:function(){return{fontFamily:this.actorFontFamily,fontSize:this.actorFontSize,fontWeight:this.actorFontWeight}}},gantt:{...defaultConfigJson.gantt,tickInterval:void 0,useWidth:void 0},c4:{...defaultConfigJson.c4,useWidth:void 0,personFont:function(){return{fontFamily:this.personFontFamily,fontSize:this.personFontSize,fontWeight:this.personFontWeight}},external_personFont:function(){return{fontFamily:this.external_personFontFamily,fontSize:this.external_personFontSize,fontWeight:this.external_personFontWeight}},systemFont:function(){return{fontFamily:this.systemFontFamily,fontSize:this.systemFontSize,fontWeight:this.systemFontWeight}},external_systemFont:function(){return{fontFamily:this.external_systemFontFamily,fontSize:this.external_systemFontSize,fontWeight:this.external_systemFontWeight}},system_dbFont:function(){return{fontFamily:this.system_dbFontFamily,fontSize:this.system_dbFontSize,fontWeight:this.system_dbFontWeight}},external_system_dbFont:function(){return{fontFamily:this.external_system_dbFontFamily,fontSize:this.external_system_dbFontSize,fontWeight:this.external_system_dbFontWeight}},system_queueFont:function(){return{fontFamily:this.system_queueFontFamily,fontSize:this.system_queueFontSize,fontWeight:this.system_queueFontWeight}},external_system_queueFont:function(){return{fontFamily:this.external_system_queueFontFamily,fontSize:this.external_system_queueFontSize,fontWeight:this.external_system_queueFontWeight}},containerFont:function(){return{fontFamily:this.containerFontFamily,fontSize:this.containerFontSize,fontWeight:this.containerFontWeight}},external_containerFont:function(){return{fontFamily:this.external_containerFontFamily,fontSize:this.external_containerFontSize,fontWeight:this.external_containerFontWeight}},container_dbFont:function(){return{fontFamily:this.container_dbFontFamily,fontSize:this.container_dbFontSize,fontWeight:this.container_dbFontWeight}},external_container_dbFont:function(){return{fontFamily:this.external_container_dbFontFamily,fontSize:this.external_container_dbFontSize,fontWeight:this.external_container_dbFontWeight}},container_queueFont:function(){return{fontFamily:this.container_queueFontFamily,fontSize:this.container_queueFontSize,fontWeight:this.container_queueFontWeight}},external_container_queueFont:function(){return{fontFamily:this.external_container_queueFontFamily,fontSize:this.external_container_queueFontSize,fontWeight:this.external_container_queueFontWeight}},componentFont:function(){return{fontFamily:this.componentFontFamily,fontSize:this.componentFontSize,fontWeight:this.componentFontWeight}},external_componentFont:function(){return{fontFamily:this.external_componentFontFamily,fontSize:this.external_componentFontSize,fontWeight:this.external_componentFontWeight}},component_dbFont:function(){return{fontFamily:this.component_dbFontFamily,fontSize:this.component_dbFontSize,fontWeight:this.component_dbFontWeight}},external_component_dbFont:function(){return{fontFamily:this.external_component_dbFontFamily,fontSize:this.external_component_dbFontSize,fontWeight:this.external_component_dbFontWeight}},component_queueFont:function(){return{fontFamily:this.component_queueFontFamily,fontSize:this.component_queueFontSize,fontWeight:this.component_queueFontWeight}},external_component_queueFont:function(){return{fontFamily:this.external_component_queueFontFamily,fontSize:this.external_component_queueFontSize,fontWeight:this.external_component_queueFontWeight}},boundaryFont:function(){return{fontFamily:this.boundaryFontFamily,fontSize:this.boundaryFontSize,fontWeight:this.boundaryFontWeight}},messageFont:function(){return{fontFamily:this.messageFontFamily,fontSize:this.messageFontSize,fontWeight:this.messageFontWeight}}},pie:{...defaultConfigJson.pie,useWidth:984},xyChart:{...defaultConfigJson.xyChart,useWidth:void 0},requirement:{...defaultConfigJson.requirement,useWidth:void 0},gitGraph:{...defaultConfigJson.gitGraph,useMaxWidth:!1},sankey:{...defaultConfigJson.sankey,useMaxWidth:!1}},keyify=(s,l="")=>Object.keys(s).reduce((c,d)=>Array.isArray(s[d])?c:typeof s[d]=="object"&&s[d]!==null?[...c,l+d,...keyify(s[d],"")]:[...c,l+d],[]),configKeys=new Set(keyify(config,"")),defaultConfig$2=config,sanitizeDirective=s=>{if(log$1.debug("sanitizeDirective called with",s),!(typeof s!="object"||s==null)){if(Array.isArray(s)){s.forEach(l=>sanitizeDirective(l));return}for(const l of Object.keys(s)){if(log$1.debug("Checking key",l),l.startsWith("__")||l.includes("proto")||l.includes("constr")||!configKeys.has(l)||s[l]==null){log$1.debug("sanitize deleting key: ",l),delete s[l];continue}if(typeof s[l]=="object"){log$1.debug("sanitizing object",l),sanitizeDirective(s[l]);continue}const c=["themeCSS","fontFamily","altFontFamily"];for(const d of c)l.includes(d)&&(log$1.debug("sanitizing css option",l),s[l]=sanitizeCss(s[l]))}if(s.themeVariables)for(const l of Object.keys(s.themeVariables)){const c=s.themeVariables[l];c!=null&&c.match&&!c.match(/^[\d "#%(),.;A-Za-z]+$/)&&(s.themeVariables[l]="")}log$1.debug("After sanitization",s)}},sanitizeCss=s=>{let l=0,c=0;for(const d of s){if(l<c)return"{ /* ERROR: Unbalanced CSS */ }";d==="{"?l++:d==="}"&&c++}return l!==c?"{ /* ERROR: Unbalanced CSS */ }":s},frontMatterRegex=/^-{3}\s*[\n\r](.*?)[\n\r]-{3}\s*[\n\r]+/s,directiveRegex=/%{2}{\s*(?:(\w+)\s*:|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,anyCommentRegex=/\s*%%.*\n/gm;class UnknownDiagramError extends Error{constructor(l){super(l),this.name="UnknownDiagramError"}}const detectors={},detectType=function(s,l){s=s.replace(frontMatterRegex,"").replace(directiveRegex,"").replace(anyCommentRegex,`
`);for(const[c,{detector:d}]of Object.entries(detectors))if(d(s,l))return c;throw new UnknownDiagramError(`No diagram type detected matching given configuration for text: ${s}`)},registerLazyLoadedDiagrams=(...s)=>{for(const{id:l,detector:c,loader:d}of s)addDetector(l,c,d)},addDetector=(s,l,c)=>{detectors[s]?log$1.error(`Detector with key ${s} already exists`):detectors[s]={detector:l,loader:c},log$1.debug(`Detector with key ${s} added${c?" with loader":""}`)},getDiagramLoader=s=>detectors[s].loader,assignWithDepth=(s,l,{depth:c=2,clobber:d=!1}={})=>{const f={depth:c,clobber:d};return Array.isArray(l)&&!Array.isArray(s)?(l.forEach(g=>assignWithDepth(s,g,f)),s):Array.isArray(l)&&Array.isArray(s)?(l.forEach(g=>{s.includes(g)||s.push(g)}),s):s===void 0||c<=0?s!=null&&typeof s=="object"&&typeof l=="object"?Object.assign(s,l):l:(l!==void 0&&typeof s=="object"&&typeof l=="object"&&Object.keys(l).forEach(g=>{typeof l[g]=="object"&&(s[g]===void 0||typeof s[g]=="object")?(s[g]===void 0&&(s[g]=Array.isArray(l[g])?[]:{}),s[g]=assignWithDepth(s[g],l[g],{depth:c-1,clobber:d})):(d||typeof s[g]!="object"&&typeof l[g]!="object")&&(s[g]=l[g])}),s)},assignWithDepth$1=assignWithDepth,ZERO_WIDTH_SPACE="",d3CurveTypes={curveBasis,curveBasisClosed,curveBasisOpen,curveBumpX:bumpX,curveBumpY:bumpY,curveBundle,curveCardinalClosed,curveCardinalOpen,curveCardinal,curveCatmullRomClosed,curveCatmullRomOpen,curveCatmullRom,curveLinear,curveLinearClosed,curveMonotoneX:monotoneX,curveMonotoneY:monotoneY,curveNatural,curveStep,curveStepAfter:stepAfter,curveStepBefore:stepBefore},directiveWithoutOpen=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,detectInit=function(s,l){const c=detectDirective(s,/(?:init\b)|(?:initialize\b)/);let d={};if(Array.isArray(c)){const v=c.map(b=>b.args);sanitizeDirective(v),d=assignWithDepth$1(d,[...v])}else d=c.args;if(!d)return;let f=detectType(s,l);const g="config";return d[g]!==void 0&&(f==="flowchart-v2"&&(f="flowchart"),d[f]=d[g],delete d[g]),d},detectDirective=function(s,l=null){try{const c=new RegExp(`[%]{2}(?![{]${directiveWithoutOpen.source})(?=[}][%]{2}).*
`,"ig");s=s.trim().replace(c,"").replace(/'/gm,'"'),log$1.debug(`Detecting diagram directive${l!==null?" type:"+l:""} based on the text:${s}`);let d;const f=[];for(;(d=directiveRegex.exec(s))!==null;)if(d.index===directiveRegex.lastIndex&&directiveRegex.lastIndex++,d&&!l||l&&d[1]&&d[1].match(l)||l&&d[2]&&d[2].match(l)){const g=d[1]?d[1]:d[2],v=d[3]?d[3].trim():d[4]?JSON.parse(d[4].trim()):null;f.push({type:g,args:v})}return f.length===0?{type:s,args:null}:f.length===1?f[0]:f}catch(c){return log$1.error(`ERROR: ${c.message} - Unable to parse directive type: '${l}' based on the text: '${s}'`),{type:void 0,args:null}}},removeDirectives=function(s){return s.replace(directiveRegex,"")},isSubstringInArray=function(s,l){for(const[c,d]of l.entries())if(d.match(s))return c;return-1};function interpolateToCurve(s,l){if(!s)return l;const c=`curve${s.charAt(0).toUpperCase()+s.slice(1)}`;return d3CurveTypes[c]??l}function formatUrl(s,l){const c=s.trim();if(c)return l.securityLevel!=="loose"?dist.sanitizeUrl(c):c}const runFunc=(s,...l)=>{const c=s.split("."),d=c.length-1,f=c[d];let g=window;for(let v=0;v<d;v++)if(g=g[c[v]],!g){log$1.error(`Function name: ${s} not found in window`);return}g[f](...l)};function distance(s,l){return!s||!l?0:Math.sqrt(Math.pow(l.x-s.x,2)+Math.pow(l.y-s.y,2))}function traverseEdge(s){let l,c=0;s.forEach(f=>{c+=distance(f,l),l=f});const d=c/2;return calculatePoint(s,d)}function calcLabelPosition(s){return s.length===1?s[0]:traverseEdge(s)}const roundNumber=(s,l=2)=>{const c=Math.pow(10,l);return Math.round(s*c)/c},calculatePoint=(s,l)=>{let c,d=l;for(const f of s){if(c){const g=distance(f,c);if(g<d)d-=g;else{const v=d/g;if(v<=0)return c;if(v>=1)return{x:f.x,y:f.y};if(v>0&&v<1)return{x:roundNumber((1-v)*c.x+v*f.x,5),y:roundNumber((1-v)*c.y+v*f.y,5)}}}c=f}throw new Error("Could not find a suitable point for the given distance")},calcCardinalityPosition=(s,l,c)=>{log$1.info(`our points ${JSON.stringify(l)}`),l[0]!==c&&(l=l.reverse());const f=calculatePoint(l,25),g=s?10:5,v=Math.atan2(l[0].y-f.y,l[0].x-f.x),b={x:0,y:0};return b.x=Math.sin(v)*g+(l[0].x+f.x)/2,b.y=-Math.cos(v)*g+(l[0].y+f.y)/2,b};function calcTerminalLabelPosition(s,l,c){const d=structuredClone(c);log$1.info("our points",d),l!=="start_left"&&l!=="start_right"&&d.reverse();const f=25+s,g=calculatePoint(d,f),v=10+s*.5,b=Math.atan2(d[0].y-g.y,d[0].x-g.x),$={x:0,y:0};return l==="start_left"?($.x=Math.sin(b+Math.PI)*v+(d[0].x+g.x)/2,$.y=-Math.cos(b+Math.PI)*v+(d[0].y+g.y)/2):l==="end_right"?($.x=Math.sin(b-Math.PI)*v+(d[0].x+g.x)/2-5,$.y=-Math.cos(b-Math.PI)*v+(d[0].y+g.y)/2-5):l==="end_left"?($.x=Math.sin(b)*v+(d[0].x+g.x)/2-5,$.y=-Math.cos(b)*v+(d[0].y+g.y)/2-5):($.x=Math.sin(b)*v+(d[0].x+g.x)/2,$.y=-Math.cos(b)*v+(d[0].y+g.y)/2),$}function getStylesFromArray(s){let l="",c="";for(const d of s)d!==void 0&&(d.startsWith("color:")||d.startsWith("text-align:")?c=c+d+";":l=l+d+";");return{style:l,labelStyle:c}}let cnt=0;const generateId$1=()=>(cnt++,"id-"+Math.random().toString(36).substr(2,12)+"-"+cnt);function makeRandomHex(s){let l="";const c="0123456789abcdef",d=c.length;for(let f=0;f<s;f++)l+=c.charAt(Math.floor(Math.random()*d));return l}const random=s=>makeRandomHex(s.length),getTextObj=function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},drawSimpleText=function(s,l){const c=l.text.replace(common$1.lineBreakRegex," "),[,d]=parseFontSize(l.fontSize),f=s.append("text");f.attr("x",l.x),f.attr("y",l.y),f.style("text-anchor",l.anchor),f.style("font-family",l.fontFamily),f.style("font-size",d),f.style("font-weight",l.fontWeight),f.attr("fill",l.fill),l.class!==void 0&&f.attr("class",l.class);const g=f.append("tspan");return g.attr("x",l.x+l.textMargin*2),g.attr("fill",l.fill),g.text(c),f},wrapLabel=memoize((s,l,c)=>{if(!s||(c=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},c),common$1.lineBreakRegex.test(s)))return s;const d=s.split(" "),f=[];let g="";return d.forEach((v,b)=>{const $=calculateTextWidth(`${v} `,c),y=calculateTextWidth(g,c);if($>l){const{hyphenatedStrings:E,remainingWord:N}=breakString(v,l,"-",c);f.push(g,...E),g=N}else y+$>=l?(f.push(g),g=v):g=[g,v].filter(Boolean).join(" ");b+1===d.length&&f.push(g)}),f.filter(v=>v!=="").join(c.joinWith)},(s,l,c)=>`${s}${l}${c.fontSize}${c.fontWeight}${c.fontFamily}${c.joinWith}`),breakString=memoize((s,l,c="-",d)=>{d=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},d);const f=[...s],g=[];let v="";return f.forEach((b,$)=>{const y=`${v}${b}`;if(calculateTextWidth(y,d)>=l){const C=$+1,E=f.length===C,N=`${y}${c}`;g.push(E?y:N),v=""}else v=y}),{hyphenatedStrings:g,remainingWord:v}},(s,l,c="-",d)=>`${s}${l}${c}${d.fontSize}${d.fontWeight}${d.fontFamily}`);function calculateTextHeight(s,l){return calculateTextDimensions(s,l).height}function calculateTextWidth(s,l){return calculateTextDimensions(s,l).width}const calculateTextDimensions=memoize((s,l)=>{const{fontSize:c=12,fontFamily:d="Arial",fontWeight:f=400}=l;if(!s)return{width:0,height:0};const[,g]=parseFontSize(c),v=["sans-serif",d],b=s.split(common$1.lineBreakRegex),$=[],y=select("body");if(!y.remove)return{width:0,height:0,lineHeight:0};const x=y.append("svg");for(const E of v){let N=0;const W={width:0,height:0,lineHeight:0};for(const q of b){const Y=getTextObj();Y.text=q||ZERO_WIDTH_SPACE;const re=drawSimpleText(x,Y).style("font-size",g).style("font-weight",f).style("font-family",E),se=(re._groups||re)[0][0].getBBox();if(se.width===0&&se.height===0)throw new Error("svg element not in render tree");W.width=Math.round(Math.max(W.width,se.width)),N=Math.round(se.height),W.height+=N,W.lineHeight=Math.round(Math.max(W.lineHeight,N))}$.push(W)}x.remove();const C=isNaN($[1].height)||isNaN($[1].width)||isNaN($[1].lineHeight)||$[0].height>$[1].height&&$[0].width>$[1].width&&$[0].lineHeight>$[1].lineHeight?0:1;return $[C]},(s,l)=>`${s}${l.fontSize}${l.fontWeight}${l.fontFamily}`);class InitIDGenerator{constructor(l=!1,c){this.count=0,this.count=c?c.length:0,this.next=l?()=>this.count++:()=>Date.now()}}let decoder;const entityDecode=function(s){return decoder=decoder||document.createElement("div"),s=escape(s).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),decoder.innerHTML=s,unescape(decoder.textContent)};function isDetailedError(s){return"str"in s}const insertTitle=(s,l,c,d)=>{var f;if(!d)return;const g=(f=s.node())==null?void 0:f.getBBox();g&&s.append("text").text(d).attr("x",g.x+g.width/2).attr("y",-c).attr("class",l)},parseFontSize=s=>{if(typeof s=="number")return[s,s+"px"];const l=parseInt(s??"",10);return Number.isNaN(l)?[void 0,void 0]:s===String(l)?[l,s+"px"]:[l,s]};function cleanAndMerge(s,l){return merge$2({},s,l)}const utils$4={assignWithDepth:assignWithDepth$1,wrapLabel,calculateTextHeight,calculateTextWidth,calculateTextDimensions,cleanAndMerge,detectInit,detectDirective,isSubstringInArray,interpolateToCurve,calcLabelPosition,calcCardinalityPosition,calcTerminalLabelPosition,formatUrl,getStylesFromArray,generateId:generateId$1,random,runFunc,entityDecode,insertTitle,parseFontSize,InitIDGenerator},encodeEntities=function(s){let l=s;return l=l.replace(/style.*:\S*#.*;/g,function(c){return c.substring(0,c.length-1)}),l=l.replace(/classDef.*:\S*#.*;/g,function(c){return c.substring(0,c.length-1)}),l=l.replace(/#\w+;/g,function(c){const d=c.substring(1,c.length-1);return/^\+?\d+$/.test(d)?""+d+"":""+d+""}),l},decodeEntities=function(s){return s.replace(//g,"&#").replace(//g,"&").replace(//g,";")},version="10.9.2",defaultConfig$1=Object.freeze(defaultConfig$2);let siteConfig=assignWithDepth$1({},defaultConfig$1),configFromInitialize,directives=[],currentConfig=assignWithDepth$1({},defaultConfig$1);const updateCurrentConfig=(s,l)=>{let c=assignWithDepth$1({},s),d={};for(const f of l)sanitize(f),d=assignWithDepth$1(d,f);if(c=assignWithDepth$1(c,d),d.theme&&d.theme in theme){const f=assignWithDepth$1({},configFromInitialize),g=assignWithDepth$1(f.themeVariables||{},d.themeVariables);c.theme&&c.theme in theme&&(c.themeVariables=theme[c.theme].getThemeVariables(g))}return currentConfig=c,checkConfig(currentConfig),currentConfig},setSiteConfig=s=>(siteConfig=assignWithDepth$1({},defaultConfig$1),siteConfig=assignWithDepth$1(siteConfig,s),s.theme&&theme[s.theme]&&(siteConfig.themeVariables=theme[s.theme].getThemeVariables(s.themeVariables)),updateCurrentConfig(siteConfig,directives),siteConfig),saveConfigFromInitialize=s=>{configFromInitialize=assignWithDepth$1({},s)},updateSiteConfig=s=>(siteConfig=assignWithDepth$1(siteConfig,s),updateCurrentConfig(siteConfig,directives),siteConfig),getSiteConfig=()=>assignWithDepth$1({},siteConfig),setConfig$1=s=>(checkConfig(s),assignWithDepth$1(currentConfig,s),getConfig$1()),getConfig$1=()=>assignWithDepth$1({},currentConfig),sanitize=s=>{s&&(["secure",...siteConfig.secure??[]].forEach(l=>{Object.hasOwn(s,l)&&(log$1.debug(`Denied attempt to modify a secure key ${l}`,s[l]),delete s[l])}),Object.keys(s).forEach(l=>{l.startsWith("__")&&delete s[l]}),Object.keys(s).forEach(l=>{typeof s[l]=="string"&&(s[l].includes("<")||s[l].includes(">")||s[l].includes("url(data:"))&&delete s[l],typeof s[l]=="object"&&sanitize(s[l])}))},addDirective=s=>{sanitizeDirective(s),s.fontFamily&&(!s.themeVariables||!s.themeVariables.fontFamily)&&(s.themeVariables={fontFamily:s.fontFamily}),directives.push(s),updateCurrentConfig(siteConfig,directives)},reset$1=(s=siteConfig)=>{directives=[],updateCurrentConfig(s,directives)},ConfigWarning={LAZY_LOAD_DEPRECATED:"The configuration options lazyLoadedDiagrams and loadExternalDiagramsAtStartup are deprecated. Please use registerExternalDiagrams instead."},issuedWarnings={},issueWarning=s=>{issuedWarnings[s]||(log$1.warn(ConfigWarning[s]),issuedWarnings[s]=!0)},checkConfig=s=>{s&&(s.lazyLoadedDiagrams||s.loadExternalDiagramsAtStartup)&&issueWarning("LAZY_LOAD_DEPRECATED")},id$l="c4",detector$l=s=>/^\s*C4Context|C4Container|C4Component|C4Dynamic|C4Deployment/.test(s),loader$m=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./c4Diagram-dc8f04df-CjoxkToM.js");return{diagram:l}},__vite__mapDeps([0,1]));return{id:id$l,diagram:s}},plugin$j={id:id$l,detector:detector$l,loader:loader$m},c4$1=plugin$j,id$k="flowchart",detector$k=(s,l)=>{var c,d;return((c=l==null?void 0:l.flowchart)==null?void 0:c.defaultRenderer)==="dagre-wrapper"||((d=l==null?void 0:l.flowchart)==null?void 0:d.defaultRenderer)==="elk"?!1:/^\s*graph/.test(s)},loader$l=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./flowDiagram-622f9fc1-BQgGSfrq.js");return{diagram:l}},__vite__mapDeps([2,3,4,5,6,7,8,9,10,11,12,13,14]));return{id:id$k,diagram:s}},plugin$i={id:id$k,detector:detector$k,loader:loader$l},flowchart=plugin$i,id$j="flowchart-v2",detector$j=(s,l)=>{var c,d,f;return((c=l==null?void 0:l.flowchart)==null?void 0:c.defaultRenderer)==="dagre-d3"||((d=l==null?void 0:l.flowchart)==null?void 0:d.defaultRenderer)==="elk"?!1:/^\s*graph/.test(s)&&((f=l==null?void 0:l.flowchart)==null?void 0:f.defaultRenderer)==="dagre-wrapper"?!0:/^\s*flowchart/.test(s)},loader$k=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./flowDiagram-v2-a33b4996-COwcicgD.js");return{diagram:l}},__vite__mapDeps([15,3,6,4,7,5,8,9,10,11,12,13,14]));return{id:id$j,diagram:s}},plugin$h={id:id$j,detector:detector$j,loader:loader$k},flowchartV2=plugin$h,id$i="er",detector$i=s=>/^\s*erDiagram/.test(s),loader$j=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./erDiagram-51d2b61e-BODi7okq.js");return{diagram:l}},__vite__mapDeps([16,4,5,11,12,13]));return{id:id$i,diagram:s}},plugin$g={id:id$i,detector:detector$i,loader:loader$j},er$2=plugin$g,id$h="gitGraph",detector$h=s=>/^\s*gitGraph/.test(s),loader$i=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./gitGraphDiagram-23af1bdb-ME7mrhU4.js");return{diagram:l}},[]);return{id:id$h,diagram:s}},plugin$f={id:id$h,detector:detector$h,loader:loader$i},git=plugin$f,id$g="gantt",detector$g=s=>/^\s*gantt/.test(s),loader$h=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./ganttDiagram-a649f789-CTk5Hccb.js");return{diagram:l}},__vite__mapDeps([17,18,19]));return{id:id$g,diagram:s}},plugin$e={id:id$g,detector:detector$g,loader:loader$h},gantt=plugin$e,id$f="info",detector$f=s=>/^\s*info/.test(s),loader$g=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./infoDiagram-f86e0131-DXBgGoxm.js");return{diagram:l}},[]);return{id:id$f,diagram:s}},info={id:id$f,detector:detector$f,loader:loader$g},id$e="pie",detector$e=s=>/^\s*pie/.test(s),loader$f=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./pieDiagram-31d824a1-CrFiKv2I.js");return{diagram:l}},__vite__mapDeps([20,21,13,22,19,12]));return{id:id$e,diagram:s}},pie$1={id:id$e,detector:detector$e,loader:loader$f},id$d="quadrantChart",detector$d=s=>/^\s*quadrantChart/.test(s),loader$e=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./quadrantDiagram-a712a7d9-HlXdTUR1.js");return{diagram:l}},__vite__mapDeps([23,18,19]));return{id:id$d,diagram:s}},plugin$d={id:id$d,detector:detector$d,loader:loader$e},quadrantChart=plugin$d,id$c="xychart",detector$c=s=>/^\s*xychart-beta/.test(s),loader$d=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./xychartDiagram-4a8b8217-DklRcreq.js");return{diagram:l}},__vite__mapDeps([24,10,19,22,18,11,12,13]));return{id:id$c,diagram:s}},plugin$c={id:id$c,detector:detector$c,loader:loader$d},xychart=plugin$c,id$b="requirement",detector$b=s=>/^\s*requirement(Diagram)?/.test(s),loader$c=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./requirementDiagram-eb878fee-dOZAoh-X.js");return{diagram:l}},__vite__mapDeps([25,4,5,11,12,13]));return{id:id$b,diagram:s}},plugin$b={id:id$b,detector:detector$b,loader:loader$c},requirement=plugin$b,id$a="sequence",detector$a=s=>/^\s*sequenceDiagram/.test(s),loader$b=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./sequenceDiagram-66748113-DdQAnHTY.js");return{diagram:l}},__vite__mapDeps([26,1]));return{id:id$a,diagram:s}},plugin$a={id:id$a,detector:detector$a,loader:loader$b},sequence=plugin$a,id$9="class",detector$9=(s,l)=>{var c;return((c=l==null?void 0:l.class)==null?void 0:c.defaultRenderer)==="dagre-wrapper"?!1:/^\s*classDiagram/.test(s)},loader$a=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./classDiagram-8298e144-CtcOagNY.js");return{diagram:l}},__vite__mapDeps([27,28,4,5,11,12,13]));return{id:id$9,diagram:s}},plugin$9={id:id$9,detector:detector$9,loader:loader$a},classDiagram=plugin$9,id$8="classDiagram",detector$8=(s,l)=>{var c;return/^\s*classDiagram/.test(s)&&((c=l==null?void 0:l.class)==null?void 0:c.defaultRenderer)==="dagre-wrapper"?!0:/^\s*classDiagram-v2/.test(s)},loader$9=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./classDiagram-v2-296fb1cd-Cs3AXTPy.js");return{diagram:l}},__vite__mapDeps([29,28,4,7,5,8,9,10,11,12,13]));return{id:id$8,diagram:s}},plugin$8={id:id$8,detector:detector$8,loader:loader$9},classDiagramV2=plugin$8,id$7="state",detector$7=(s,l)=>{var c;return((c=l==null?void 0:l.state)==null?void 0:c.defaultRenderer)==="dagre-wrapper"?!1:/^\s*stateDiagram/.test(s)},loader$8=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./stateDiagram-35d39939-BQXLevSg.js");return{diagram:l}},__vite__mapDeps([30,31,4,5,11,12,13]));return{id:id$7,diagram:s}},plugin$7={id:id$7,detector:detector$7,loader:loader$8},state=plugin$7,id$6="stateDiagram",detector$6=(s,l)=>{var c;return!!(/^\s*stateDiagram-v2/.test(s)||/^\s*stateDiagram/.test(s)&&((c=l==null?void 0:l.state)==null?void 0:c.defaultRenderer)==="dagre-wrapper")},loader$7=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./stateDiagram-v2-6c43c13a-s82FF4HG.js");return{diagram:l}},__vite__mapDeps([32,31,4,7,5,8,9,10,11,12,13]));return{id:id$6,diagram:s}},plugin$6={id:id$6,detector:detector$6,loader:loader$7},stateV2=plugin$6,id$5="journey",detector$5=s=>/^\s*journey/.test(s),loader$6=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./journeyDiagram-de0d04b7-CwnJROOO.js");return{diagram:l}},__vite__mapDeps([33,1,21,13]));return{id:id$5,diagram:s}},plugin$5={id:id$5,detector:detector$5,loader:loader$6},journey=plugin$5,d3Attrs=function(s,l){for(let c of l)s.attr(c[0],c[1])},calculateSvgSizeAttrs=function(s,l,c){let d=new Map;return c?(d.set("width","100%"),d.set("style",`max-width: ${l}px;`)):(d.set("height",s),d.set("width",l)),d},configureSvgSize=function(s,l,c,d){const f=calculateSvgSizeAttrs(l,c,d);d3Attrs(s,f)},setupGraphViewbox$1=function(s,l,c,d){const f=l.node().getBBox(),g=f.width,v=f.height;log$1.info(`SVG bounds: ${g}x${v}`,f);let b=0,$=0;log$1.info(`Graph bounds: ${b}x${$}`,s),b=g+c*2,$=v+c*2,log$1.info(`Calculated bounds: ${b}x${$}`),configureSvgSize(l,$,b,d);const y=`${f.x-c} ${f.y-c} ${f.width+2*c} ${f.height+2*c}`;l.attr("viewBox",y)},themes={},getStyles=(s,l,c)=>{let d="";return s in themes&&themes[s]?d=themes[s](c):log$1.warn(`No theme found for ${s}`),` & {
    font-family: ${c.fontFamily};
    font-size: ${c.fontSize};
    fill: ${c.textColor}
  }

  /* Classes common for multiple diagrams */

  & .error-icon {
    fill: ${c.errorBkgColor};
  }
  & .error-text {
    fill: ${c.errorTextColor};
    stroke: ${c.errorTextColor};
  }

  & .edge-thickness-normal {
    stroke-width: 2px;
  }
  & .edge-thickness-thick {
    stroke-width: 3.5px
  }
  & .edge-pattern-solid {
    stroke-dasharray: 0;
  }

  & .edge-pattern-dashed{
    stroke-dasharray: 3;
  }
  .edge-pattern-dotted {
    stroke-dasharray: 2;
  }

  & .marker {
    fill: ${c.lineColor};
    stroke: ${c.lineColor};
  }
  & .marker.cross {
    stroke: ${c.lineColor};
  }

  & svg {
    font-family: ${c.fontFamily};
    font-size: ${c.fontSize};
  }

  ${d}

  ${l}
`},addStylesForDiagram=(s,l)=>{l!==void 0&&(themes[s]=l)},getStyles$1=getStyles;let accTitle="",diagramTitle="",accDescription="";const sanitizeText$1=s=>sanitizeText$2(s,getConfig$1()),clear=()=>{accTitle="",accDescription="",diagramTitle=""},setAccTitle=s=>{accTitle=sanitizeText$1(s).replace(/^\s+/g,"")},getAccTitle=()=>accTitle,setAccDescription=s=>{accDescription=sanitizeText$1(s).replace(/\n\s+/g,`
`)},getAccDescription=()=>accDescription,setDiagramTitle=s=>{diagramTitle=sanitizeText$1(s)},getDiagramTitle=()=>diagramTitle,commonDb=Object.freeze(Object.defineProperty({__proto__:null,clear,getAccDescription,getAccTitle,getDiagramTitle,setAccDescription,setAccTitle,setDiagramTitle},Symbol.toStringTag,{value:"Module"})),log=log$1,setLogLevel=setLogLevel$1,getConfig=getConfig$1,setConfig=setConfig$1,defaultConfig=defaultConfig$1,sanitizeText=s=>sanitizeText$2(s,getConfig()),setupGraphViewbox=setupGraphViewbox$1,getCommonDb=()=>commonDb,diagrams={},registerDiagram=(s,l,c)=>{var d;if(diagrams[s])throw new Error(`Diagram ${s} already registered.`);diagrams[s]=l,c&&addDetector(s,c),addStylesForDiagram(s,l.styles),(d=l.injectUtils)==null||d.call(l,log,setLogLevel,getConfig,sanitizeText,setupGraphViewbox,getCommonDb(),()=>{})},getDiagram=s=>{if(s in diagrams)return diagrams[s];throw new DiagramNotFoundError(s)};class DiagramNotFoundError extends Error{constructor(l){super(`Diagram ${l} not found.`)}}const selectSvgElement=s=>{var l;const{securityLevel:c}=getConfig();let d=select("body");if(c==="sandbox"){const v=((l=select(`#i${s}`).node())==null?void 0:l.contentDocument)??document;d=select(v.body)}return d.select(`#${s}`)},draw=(s,l,c)=>{log$1.debug(`rendering svg for syntax error
`);const d=selectSvgElement(l),f=d.append("g");d.attr("viewBox","0 0 2412 512"),configureSvgSize(d,100,512,!0),f.append("path").attr("class","error-icon").attr("d","m411.313,123.313c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32-9.375,9.375-20.688-20.688c-12.484-12.5-32.766-12.5-45.25,0l-16,16c-1.261,1.261-2.304,2.648-3.31,4.051-21.739-8.561-45.324-13.426-70.065-13.426-105.867,0-192,86.133-192,192s86.133,192 192,192 192-86.133 192-192c0-24.741-4.864-48.327-13.426-70.065 1.402-1.007 2.79-2.049 4.051-3.31l16-16c12.5-12.492 12.5-32.758 0-45.25l-20.688-20.688 9.375-9.375 32.001-31.999zm-219.313,100.687c-52.938,0-96,43.063-96,96 0,8.836-7.164,16-16,16s-16-7.164-16-16c0-70.578 57.422-128 128-128 8.836,0 16,7.164 16,16s-7.164,16-16,16z"),f.append("path").attr("class","error-icon").attr("d","m459.02,148.98c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l16,16c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16.001-16z"),f.append("path").attr("class","error-icon").attr("d","m340.395,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688 6.25-6.25 6.25-16.375 0-22.625l-16-16c-6.25-6.25-16.375-6.25-22.625,0s-6.25,16.375 0,22.625l15.999,16z"),f.append("path").attr("class","error-icon").attr("d","m400,64c8.844,0 16-7.164 16-16v-32c0-8.836-7.156-16-16-16-8.844,0-16,7.164-16,16v32c0,8.836 7.156,16 16,16z"),f.append("path").attr("class","error-icon").attr("d","m496,96.586h-32c-8.844,0-16,7.164-16,16 0,8.836 7.156,16 16,16h32c8.844,0 16-7.164 16-16 0-8.836-7.156-16-16-16z"),f.append("path").attr("class","error-icon").attr("d","m436.98,75.605c3.125,3.125 7.219,4.688 11.313,4.688 4.094,0 8.188-1.563 11.313-4.688l32-32c6.25-6.25 6.25-16.375 0-22.625s-16.375-6.25-22.625,0l-32,32c-6.251,6.25-6.251,16.375-0.001,22.625z"),f.append("text").attr("class","error-text").attr("x",1440).attr("y",250).attr("font-size","150px").style("text-anchor","middle").text("Syntax error in text"),f.append("text").attr("class","error-text").attr("x",1250).attr("y",400).attr("font-size","100px").style("text-anchor","middle").text(`mermaid version ${c}`)},renderer={draw},errorRenderer=renderer,diagram={db:{},renderer,parser:{parser:{yy:{}},parse:()=>{}}},errorDiagram=diagram,id$4="flowchart-elk",detector$4=(s,l)=>{var c;return!!(/^\s*flowchart-elk/.test(s)||/^\s*flowchart|graph/.test(s)&&((c=l==null?void 0:l.flowchart)==null?void 0:c.defaultRenderer)==="elk")},loader$5=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./flowchart-elk-definition-930acc39-tBqqFQgv.js");return{diagram:l}},__vite__mapDeps([34,3,9,10,11,12,13]));return{id:id$4,diagram:s}},plugin$4={id:id$4,detector:detector$4,loader:loader$5},flowchartElk=plugin$4,id$3="timeline",detector$3=s=>/^\s*timeline/.test(s),loader$4=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./timeline-definition-6eaa3543-Cw-MdEkN.js");return{diagram:l}},__vite__mapDeps([35,21,13]));return{id:id$3,diagram:s}},plugin$3={id:id$3,detector:detector$3,loader:loader$4},timeline=plugin$3,id$2$1="mindmap",detector$2=s=>/^\s*mindmap/.test(s),loader$3=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./mindmap-definition-b08d3ac4-C_z7lbbY.js");return{diagram:l}},__vite__mapDeps([36,10]));return{id:id$2$1,diagram:s}},plugin$2={id:id$2$1,detector:detector$2,loader:loader$3},mindmap=plugin$2,id$1$1="sankey",detector$1=s=>/^\s*sankey-beta/.test(s),loader$2=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./sankeyDiagram-c599f8ec-B8jJ4hi0.js");return{diagram:l}},__vite__mapDeps([37,22,19,38]));return{id:id$1$1,diagram:s}},plugin$1={id:id$1$1,detector:detector$1,loader:loader$2},sankey=plugin$1,id$m="block",detector=s=>/^\s*block-beta/.test(s),loader$1=async()=>{const{diagram:s}=await __vitePreload(async()=>{const{diagram:l}=await import("./blockDiagram-a8a0820c-BsMkmp39.js");return{diagram:l}},__vite__mapDeps([39,8,4,9,10,11,12,13,22,19,14,38]));return{id:id$m,diagram:s}},plugin={id:id$m,detector,loader:loader$1},block=plugin;let hasLoadedDiagrams=!1;const addDiagrams=()=>{hasLoadedDiagrams||(hasLoadedDiagrams=!0,registerDiagram("error",errorDiagram,s=>s.toLowerCase().trim()==="error"),registerDiagram("---",{db:{clear:()=>{}},styles:{},renderer:{draw:()=>{}},parser:{parser:{yy:{}},parse:()=>{throw new Error("Diagrams beginning with --- are not valid. If you were trying to use a YAML front-matter, please ensure that you've correctly opened and closed the YAML front-matter with un-indented `---` blocks")}},init:()=>null},s=>s.toLowerCase().trimStart().startsWith("---")),registerLazyLoadedDiagrams(c4$1,classDiagramV2,classDiagram,er$2,gantt,info,pie$1,requirement,sequence,flowchartElk,flowchartV2,flowchart,mindmap,timeline,git,stateV2,state,journey,quadrantChart,sankey,xychart,block))};class Diagram{constructor(l,c={}){this.text=l,this.metadata=c,this.type="graph",this.text=encodeEntities(l),this.text+=`
`;const d=getConfig$1();try{this.type=detectType(l,d)}catch(g){this.type="error",this.detectError=g}const f=getDiagram(this.type);log$1.debug("Type "+this.type),this.db=f.db,this.renderer=f.renderer,this.parser=f.parser,this.parser.parser.yy=this.db,this.init=f.init,this.parse()}parse(){var l,c,d,f,g;if(this.detectError)throw this.detectError;(c=(l=this.db).clear)==null||c.call(l);const v=getConfig$1();(d=this.init)==null||d.call(this,v),this.metadata.title&&((g=(f=this.db).setDiagramTitle)==null||g.call(f,this.metadata.title)),this.parser.parse(this.text)}async render(l,c){await this.renderer.draw(this.text,l,c,this)}getParser(){return this.parser}getType(){return this.type}}const getDiagramFromText$1=async(s,l={})=>{const c=detectType(s,getConfig$1());try{getDiagram(c)}catch{const f=getDiagramLoader(c);if(!f)throw new UnknownDiagramError(`Diagram ${c} not found.`);const{id:g,diagram:v}=await f();registerDiagram(g,v)}return new Diagram(s,l)};let interactionFunctions=[];const attachFunctions=()=>{interactionFunctions.forEach(s=>{s()}),interactionFunctions=[]},SVG_ROLE="graphics-document document";function setA11yDiagramInfo(s,l){s.attr("role",SVG_ROLE),l!==""&&s.attr("aria-roledescription",l)}function addSVGa11yTitleDescription(s,l,c,d){if(s.insert!==void 0){if(c){const f=`chart-desc-${d}`;s.attr("aria-describedby",f),s.insert("desc",":first-child").attr("id",f).text(c)}if(l){const f=`chart-title-${d}`;s.attr("aria-labelledby",f),s.insert("title",":first-child").attr("id",f).text(l)}}}const cleanupComments=s=>s.replace(/^\s*%%(?!{)[^\n]+\n?/gm,"").trimStart();/*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT */function isNothing(s){return typeof s>"u"||s===null}function isObject$2(s){return typeof s=="object"&&s!==null}function toArray(s){return Array.isArray(s)?s:isNothing(s)?[]:[s]}function extend$1(s,l){var c,d,f,g;if(l)for(g=Object.keys(l),c=0,d=g.length;c<d;c+=1)f=g[c],s[f]=l[f];return s}function repeat(s,l){var c="",d;for(d=0;d<l;d+=1)c+=s;return c}function isNegativeZero(s){return s===0&&Number.NEGATIVE_INFINITY===1/s}var isNothing_1=isNothing,isObject_1=isObject$2,toArray_1=toArray,repeat_1=repeat,isNegativeZero_1=isNegativeZero,extend_1=extend$1,common={isNothing:isNothing_1,isObject:isObject_1,toArray:toArray_1,repeat:repeat_1,isNegativeZero:isNegativeZero_1,extend:extend_1};function formatError(s,l){var c="",d=s.reason||"(unknown reason)";return s.mark?(s.mark.name&&(c+='in "'+s.mark.name+'" '),c+="("+(s.mark.line+1)+":"+(s.mark.column+1)+")",!l&&s.mark.snippet&&(c+=`

`+s.mark.snippet),d+" "+c):d}function YAMLException$1(s,l){Error.call(this),this.name="YAMLException",this.reason=s,this.mark=l,this.message=formatError(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$1.prototype=Object.create(Error.prototype);YAMLException$1.prototype.constructor=YAMLException$1;YAMLException$1.prototype.toString=function(l){return this.name+": "+formatError(this,l)};var exception=YAMLException$1;function getLine(s,l,c,d,f){var g="",v="",b=Math.floor(f/2)-1;return d-l>b&&(g=" ... ",l=d-b+g.length),c-d>b&&(v=" ...",c=d+b-v.length),{str:g+s.slice(l,c).replace(/\t/g,"")+v,pos:d-l+g.length}}function padStart(s,l){return common.repeat(" ",l-s.length)+s}function makeSnippet(s,l){if(l=Object.create(l||null),!s.buffer)return null;l.maxLength||(l.maxLength=79),typeof l.indent!="number"&&(l.indent=1),typeof l.linesBefore!="number"&&(l.linesBefore=3),typeof l.linesAfter!="number"&&(l.linesAfter=2);for(var c=/\r?\n|\r|\0/g,d=[0],f=[],g,v=-1;g=c.exec(s.buffer);)f.push(g.index),d.push(g.index+g[0].length),s.position<=g.index&&v<0&&(v=d.length-2);v<0&&(v=d.length-1);var b="",$,y,x=Math.min(s.line+l.linesAfter,f.length).toString().length,C=l.maxLength-(l.indent+x+3);for($=1;$<=l.linesBefore&&!(v-$<0);$++)y=getLine(s.buffer,d[v-$],f[v-$],s.position-(d[v]-d[v-$]),C),b=common.repeat(" ",l.indent)+padStart((s.line-$+1).toString(),x)+" | "+y.str+`
`+b;for(y=getLine(s.buffer,d[v],f[v],s.position,C),b+=common.repeat(" ",l.indent)+padStart((s.line+1).toString(),x)+" | "+y.str+`
`,b+=common.repeat("-",l.indent+x+3+y.pos)+`^
`,$=1;$<=l.linesAfter&&!(v+$>=f.length);$++)y=getLine(s.buffer,d[v+$],f[v+$],s.position-(d[v]-d[v+$]),C),b+=common.repeat(" ",l.indent)+padStart((s.line+$+1).toString(),x)+" | "+y.str+`
`;return b.replace(/\n$/,"")}var snippet=makeSnippet,TYPE_CONSTRUCTOR_OPTIONS=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(s){var l={};return s!==null&&Object.keys(s).forEach(function(c){s[c].forEach(function(d){l[String(d)]=c})}),l}function Type$1(s,l){if(l=l||{},Object.keys(l).forEach(function(c){if(TYPE_CONSTRUCTOR_OPTIONS.indexOf(c)===-1)throw new exception('Unknown option "'+c+'" is met in definition of "'+s+'" YAML type.')}),this.options=l,this.tag=s,this.kind=l.kind||null,this.resolve=l.resolve||function(){return!0},this.construct=l.construct||function(c){return c},this.instanceOf=l.instanceOf||null,this.predicate=l.predicate||null,this.represent=l.represent||null,this.representName=l.representName||null,this.defaultStyle=l.defaultStyle||null,this.multi=l.multi||!1,this.styleAliases=compileStyleAliases(l.styleAliases||null),YAML_NODE_KINDS.indexOf(this.kind)===-1)throw new exception('Unknown kind "'+this.kind+'" is specified for "'+s+'" YAML type.')}var type=Type$1;function compileList(s,l){var c=[];return s[l].forEach(function(d){var f=c.length;c.forEach(function(g,v){g.tag===d.tag&&g.kind===d.kind&&g.multi===d.multi&&(f=v)}),c[f]=d}),c}function compileMap(){var s={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},l,c;function d(f){f.multi?(s.multi[f.kind].push(f),s.multi.fallback.push(f)):s[f.kind][f.tag]=s.fallback[f.tag]=f}for(l=0,c=arguments.length;l<c;l+=1)arguments[l].forEach(d);return s}function Schema$1(s){return this.extend(s)}Schema$1.prototype.extend=function(l){var c=[],d=[];if(l instanceof type)d.push(l);else if(Array.isArray(l))d=d.concat(l);else if(l&&(Array.isArray(l.implicit)||Array.isArray(l.explicit)))l.implicit&&(c=c.concat(l.implicit)),l.explicit&&(d=d.concat(l.explicit));else throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");c.forEach(function(g){if(!(g instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(g.loadKind&&g.loadKind!=="scalar")throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(g.multi)throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),d.forEach(function(g){if(!(g instanceof type))throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var f=Object.create(Schema$1.prototype);return f.implicit=(this.implicit||[]).concat(c),f.explicit=(this.explicit||[]).concat(d),f.compiledImplicit=compileList(f,"implicit"),f.compiledExplicit=compileList(f,"explicit"),f.compiledTypeMap=compileMap(f.compiledImplicit,f.compiledExplicit),f};var schema=Schema$1,str=new type("tag:yaml.org,2002:str",{kind:"scalar",construct:function(s){return s!==null?s:""}}),seq=new type("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(s){return s!==null?s:[]}}),map=new type("tag:yaml.org,2002:map",{kind:"mapping",construct:function(s){return s!==null?s:{}}}),failsafe=new schema({explicit:[str,seq,map]});function resolveYamlNull(s){if(s===null)return!0;var l=s.length;return l===1&&s==="~"||l===4&&(s==="null"||s==="Null"||s==="NULL")}function constructYamlNull(){return null}function isNull(s){return s===null}var _null=new type("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"},empty:function(){return""}},defaultStyle:"lowercase"});function resolveYamlBoolean(s){if(s===null)return!1;var l=s.length;return l===4&&(s==="true"||s==="True"||s==="TRUE")||l===5&&(s==="false"||s==="False"||s==="FALSE")}function constructYamlBoolean(s){return s==="true"||s==="True"||s==="TRUE"}function isBoolean$2(s){return Object.prototype.toString.call(s)==="[object Boolean]"}var bool=new type("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean$2,represent:{lowercase:function(s){return s?"true":"false"},uppercase:function(s){return s?"TRUE":"FALSE"},camelcase:function(s){return s?"True":"False"}},defaultStyle:"lowercase"});function isHexCode(s){return 48<=s&&s<=57||65<=s&&s<=70||97<=s&&s<=102}function isOctCode(s){return 48<=s&&s<=55}function isDecCode(s){return 48<=s&&s<=57}function resolveYamlInteger(s){if(s===null)return!1;var l=s.length,c=0,d=!1,f;if(!l)return!1;if(f=s[c],(f==="-"||f==="+")&&(f=s[++c]),f==="0"){if(c+1===l)return!0;if(f=s[++c],f==="b"){for(c++;c<l;c++)if(f=s[c],f!=="_"){if(f!=="0"&&f!=="1")return!1;d=!0}return d&&f!=="_"}if(f==="x"){for(c++;c<l;c++)if(f=s[c],f!=="_"){if(!isHexCode(s.charCodeAt(c)))return!1;d=!0}return d&&f!=="_"}if(f==="o"){for(c++;c<l;c++)if(f=s[c],f!=="_"){if(!isOctCode(s.charCodeAt(c)))return!1;d=!0}return d&&f!=="_"}}if(f==="_")return!1;for(;c<l;c++)if(f=s[c],f!=="_"){if(!isDecCode(s.charCodeAt(c)))return!1;d=!0}return!(!d||f==="_")}function constructYamlInteger(s){var l=s,c=1,d;if(l.indexOf("_")!==-1&&(l=l.replace(/_/g,"")),d=l[0],(d==="-"||d==="+")&&(d==="-"&&(c=-1),l=l.slice(1),d=l[0]),l==="0")return 0;if(d==="0"){if(l[1]==="b")return c*parseInt(l.slice(2),2);if(l[1]==="x")return c*parseInt(l.slice(2),16);if(l[1]==="o")return c*parseInt(l.slice(2),8)}return c*parseInt(l,10)}function isInteger(s){return Object.prototype.toString.call(s)==="[object Number]"&&s%1===0&&!common.isNegativeZero(s)}var int=new type("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:function(s){return s>=0?"0b"+s.toString(2):"-0b"+s.toString(2).slice(1)},octal:function(s){return s>=0?"0o"+s.toString(8):"-0o"+s.toString(8).slice(1)},decimal:function(s){return s.toString(10)},hexadecimal:function(s){return s>=0?"0x"+s.toString(16).toUpperCase():"-0x"+s.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(s){return!(s===null||!YAML_FLOAT_PATTERN.test(s)||s[s.length-1]==="_")}function constructYamlFloat(s){var l,c;return l=s.replace(/_/g,"").toLowerCase(),c=l[0]==="-"?-1:1,"+-".indexOf(l[0])>=0&&(l=l.slice(1)),l===".inf"?c===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:l===".nan"?NaN:c*parseFloat(l,10)}var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(s,l){var c;if(isNaN(s))switch(l){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===s)switch(l){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===s)switch(l){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common.isNegativeZero(s))return"-0.0";return c=s.toString(10),SCIENTIFIC_WITHOUT_DOT.test(c)?c.replace("e",".e"):c}function isFloat(s){return Object.prototype.toString.call(s)==="[object Number]"&&(s%1!==0||common.isNegativeZero(s))}var float=new type("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),json=failsafe.extend({implicit:[_null,bool,int,float]}),core=json,YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp(s){return s===null?!1:YAML_DATE_REGEXP.exec(s)!==null||YAML_TIMESTAMP_REGEXP.exec(s)!==null}function constructYamlTimestamp(s){var l,c,d,f,g,v,b,$=0,y=null,x,C,E;if(l=YAML_DATE_REGEXP.exec(s),l===null&&(l=YAML_TIMESTAMP_REGEXP.exec(s)),l===null)throw new Error("Date resolve error");if(c=+l[1],d=+l[2]-1,f=+l[3],!l[4])return new Date(Date.UTC(c,d,f));if(g=+l[4],v=+l[5],b=+l[6],l[7]){for($=l[7].slice(0,3);$.length<3;)$+="0";$=+$}return l[9]&&(x=+l[10],C=+(l[11]||0),y=(x*60+C)*6e4,l[9]==="-"&&(y=-y)),E=new Date(Date.UTC(c,d,f,g,v,b,$)),y&&E.setTime(E.getTime()-y),E}function representYamlTimestamp(s){return s.toISOString()}var timestamp=new type("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp});function resolveYamlMerge(s){return s==="<<"||s===null}var merge$1=new type("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),BASE64_MAP=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary(s){if(s===null)return!1;var l,c,d=0,f=s.length,g=BASE64_MAP;for(c=0;c<f;c++)if(l=g.indexOf(s.charAt(c)),!(l>64)){if(l<0)return!1;d+=6}return d%8===0}function constructYamlBinary(s){var l,c,d=s.replace(/[\r\n=]/g,""),f=d.length,g=BASE64_MAP,v=0,b=[];for(l=0;l<f;l++)l%4===0&&l&&(b.push(v>>16&255),b.push(v>>8&255),b.push(v&255)),v=v<<6|g.indexOf(d.charAt(l));return c=f%4*6,c===0?(b.push(v>>16&255),b.push(v>>8&255),b.push(v&255)):c===18?(b.push(v>>10&255),b.push(v>>2&255)):c===12&&b.push(v>>4&255),new Uint8Array(b)}function representYamlBinary(s){var l="",c=0,d,f,g=s.length,v=BASE64_MAP;for(d=0;d<g;d++)d%3===0&&d&&(l+=v[c>>18&63],l+=v[c>>12&63],l+=v[c>>6&63],l+=v[c&63]),c=(c<<8)+s[d];return f=g%3,f===0?(l+=v[c>>18&63],l+=v[c>>12&63],l+=v[c>>6&63],l+=v[c&63]):f===2?(l+=v[c>>10&63],l+=v[c>>4&63],l+=v[c<<2&63],l+=v[64]):f===1&&(l+=v[c>>2&63],l+=v[c<<4&63],l+=v[64],l+=v[64]),l}function isBinary(s){return Object.prototype.toString.call(s)==="[object Uint8Array]"}var binary=new type("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),_hasOwnProperty$3=Object.prototype.hasOwnProperty,_toString$2=Object.prototype.toString;function resolveYamlOmap(s){if(s===null)return!0;var l=[],c,d,f,g,v,b=s;for(c=0,d=b.length;c<d;c+=1){if(f=b[c],v=!1,_toString$2.call(f)!=="[object Object]")return!1;for(g in f)if(_hasOwnProperty$3.call(f,g))if(!v)v=!0;else return!1;if(!v)return!1;if(l.indexOf(g)===-1)l.push(g);else return!1}return!0}function constructYamlOmap(s){return s!==null?s:[]}var omap=new type("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),_toString$1=Object.prototype.toString;function resolveYamlPairs(s){if(s===null)return!0;var l,c,d,f,g,v=s;for(g=new Array(v.length),l=0,c=v.length;l<c;l+=1){if(d=v[l],_toString$1.call(d)!=="[object Object]"||(f=Object.keys(d),f.length!==1))return!1;g[l]=[f[0],d[f[0]]]}return!0}function constructYamlPairs(s){if(s===null)return[];var l,c,d,f,g,v=s;for(g=new Array(v.length),l=0,c=v.length;l<c;l+=1)d=v[l],f=Object.keys(d),g[l]=[f[0],d[f[0]]];return g}var pairs=new type("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),_hasOwnProperty$2=Object.prototype.hasOwnProperty;function resolveYamlSet(s){if(s===null)return!0;var l,c=s;for(l in c)if(_hasOwnProperty$2.call(c,l)&&c[l]!==null)return!1;return!0}function constructYamlSet(s){return s!==null?s:{}}var set=new type("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),_default=core.extend({implicit:[timestamp,merge$1],explicit:[binary,omap,pairs,set]}),_hasOwnProperty$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(s){return Object.prototype.toString.call(s)}function is_EOL(s){return s===10||s===13}function is_WHITE_SPACE(s){return s===9||s===32}function is_WS_OR_EOL(s){return s===9||s===32||s===10||s===13}function is_FLOW_INDICATOR(s){return s===44||s===91||s===93||s===123||s===125}function fromHexCode(s){var l;return 48<=s&&s<=57?s-48:(l=s|32,97<=l&&l<=102?l-97+10:-1)}function escapedHexLen(s){return s===120?2:s===117?4:s===85?8:0}function fromDecimalCode(s){return 48<=s&&s<=57?s-48:-1}function simpleEscapeSequence(s){return s===48?"\0":s===97?"\x07":s===98?"\b":s===116||s===9?"	":s===110?`
`:s===118?"\v":s===102?"\f":s===114?"\r":s===101?"\x1B":s===32?" ":s===34?'"':s===47?"/":s===92?"\\":s===78?"":s===95?"":s===76?"\u2028":s===80?"\u2029":""}function charFromCodepoint(s){return s<=65535?String.fromCharCode(s):String.fromCharCode((s-65536>>10)+55296,(s-65536&1023)+56320)}var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256);for(var i$2=0;i$2<256;i$2++)simpleEscapeCheck[i$2]=simpleEscapeSequence(i$2)?1:0,simpleEscapeMap[i$2]=simpleEscapeSequence(i$2);function State$1(s,l){this.input=s,this.filename=l.filename||null,this.schema=l.schema||_default,this.onWarning=l.onWarning||null,this.legacy=l.legacy||!1,this.json=l.json||!1,this.listener=l.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=s.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}function generateError(s,l){var c={name:s.filename,buffer:s.input.slice(0,-1),position:s.position,line:s.line,column:s.position-s.lineStart};return c.snippet=snippet(c),new exception(l,c)}function throwError(s,l){throw generateError(s,l)}function throwWarning(s,l){s.onWarning&&s.onWarning.call(null,generateError(s,l))}var directiveHandlers={YAML:function(l,c,d){var f,g,v;l.version!==null&&throwError(l,"duplication of %YAML directive"),d.length!==1&&throwError(l,"YAML directive accepts exactly one argument"),f=/^([0-9]+)\.([0-9]+)$/.exec(d[0]),f===null&&throwError(l,"ill-formed argument of the YAML directive"),g=parseInt(f[1],10),v=parseInt(f[2],10),g!==1&&throwError(l,"unacceptable YAML version of the document"),l.version=d[0],l.checkLineBreaks=v<2,v!==1&&v!==2&&throwWarning(l,"unsupported YAML version of the document")},TAG:function(l,c,d){var f,g;d.length!==2&&throwError(l,"TAG directive accepts exactly two arguments"),f=d[0],g=d[1],PATTERN_TAG_HANDLE.test(f)||throwError(l,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1.call(l.tagMap,f)&&throwError(l,'there is a previously declared suffix for "'+f+'" tag handle'),PATTERN_TAG_URI.test(g)||throwError(l,"ill-formed tag prefix (second argument) of the TAG directive");try{g=decodeURIComponent(g)}catch{throwError(l,"tag prefix is malformed: "+g)}l.tagMap[f]=g}};function captureSegment(s,l,c,d){var f,g,v,b;if(l<c){if(b=s.input.slice(l,c),d)for(f=0,g=b.length;f<g;f+=1)v=b.charCodeAt(f),v===9||32<=v&&v<=1114111||throwError(s,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(b)&&throwError(s,"the stream contains non-printable characters");s.result+=b}}function mergeMappings(s,l,c,d){var f,g,v,b;for(common.isObject(c)||throwError(s,"cannot merge mappings; the provided source object is unacceptable"),f=Object.keys(c),v=0,b=f.length;v<b;v+=1)g=f[v],_hasOwnProperty$1.call(l,g)||(l[g]=c[g],d[g]=!0)}function storeMappingPair(s,l,c,d,f,g,v,b,$){var y,x;if(Array.isArray(f))for(f=Array.prototype.slice.call(f),y=0,x=f.length;y<x;y+=1)Array.isArray(f[y])&&throwError(s,"nested arrays are not supported inside keys"),typeof f=="object"&&_class(f[y])==="[object Object]"&&(f[y]="[object Object]");if(typeof f=="object"&&_class(f)==="[object Object]"&&(f="[object Object]"),f=String(f),l===null&&(l={}),d==="tag:yaml.org,2002:merge")if(Array.isArray(g))for(y=0,x=g.length;y<x;y+=1)mergeMappings(s,l,g[y],c);else mergeMappings(s,l,g,c);else!s.json&&!_hasOwnProperty$1.call(c,f)&&_hasOwnProperty$1.call(l,f)&&(s.line=v||s.line,s.lineStart=b||s.lineStart,s.position=$||s.position,throwError(s,"duplicated mapping key")),f==="__proto__"?Object.defineProperty(l,f,{configurable:!0,enumerable:!0,writable:!0,value:g}):l[f]=g,delete c[f];return l}function readLineBreak(s){var l;l=s.input.charCodeAt(s.position),l===10?s.position++:l===13?(s.position++,s.input.charCodeAt(s.position)===10&&s.position++):throwError(s,"a line break is expected"),s.line+=1,s.lineStart=s.position,s.firstTabInLine=-1}function skipSeparationSpace(s,l,c){for(var d=0,f=s.input.charCodeAt(s.position);f!==0;){for(;is_WHITE_SPACE(f);)f===9&&s.firstTabInLine===-1&&(s.firstTabInLine=s.position),f=s.input.charCodeAt(++s.position);if(l&&f===35)do f=s.input.charCodeAt(++s.position);while(f!==10&&f!==13&&f!==0);if(is_EOL(f))for(readLineBreak(s),f=s.input.charCodeAt(s.position),d++,s.lineIndent=0;f===32;)s.lineIndent++,f=s.input.charCodeAt(++s.position);else break}return c!==-1&&d!==0&&s.lineIndent<c&&throwWarning(s,"deficient indentation"),d}function testDocumentSeparator(s){var l=s.position,c;return c=s.input.charCodeAt(l),!!((c===45||c===46)&&c===s.input.charCodeAt(l+1)&&c===s.input.charCodeAt(l+2)&&(l+=3,c=s.input.charCodeAt(l),c===0||is_WS_OR_EOL(c)))}function writeFoldedLines(s,l){l===1?s.result+=" ":l>1&&(s.result+=common.repeat(`
`,l-1))}function readPlainScalar(s,l,c){var d,f,g,v,b,$,y,x,C=s.kind,E=s.result,N;if(N=s.input.charCodeAt(s.position),is_WS_OR_EOL(N)||is_FLOW_INDICATOR(N)||N===35||N===38||N===42||N===33||N===124||N===62||N===39||N===34||N===37||N===64||N===96||(N===63||N===45)&&(f=s.input.charCodeAt(s.position+1),is_WS_OR_EOL(f)||c&&is_FLOW_INDICATOR(f)))return!1;for(s.kind="scalar",s.result="",g=v=s.position,b=!1;N!==0;){if(N===58){if(f=s.input.charCodeAt(s.position+1),is_WS_OR_EOL(f)||c&&is_FLOW_INDICATOR(f))break}else if(N===35){if(d=s.input.charCodeAt(s.position-1),is_WS_OR_EOL(d))break}else{if(s.position===s.lineStart&&testDocumentSeparator(s)||c&&is_FLOW_INDICATOR(N))break;if(is_EOL(N))if($=s.line,y=s.lineStart,x=s.lineIndent,skipSeparationSpace(s,!1,-1),s.lineIndent>=l){b=!0,N=s.input.charCodeAt(s.position);continue}else{s.position=v,s.line=$,s.lineStart=y,s.lineIndent=x;break}}b&&(captureSegment(s,g,v,!1),writeFoldedLines(s,s.line-$),g=v=s.position,b=!1),is_WHITE_SPACE(N)||(v=s.position+1),N=s.input.charCodeAt(++s.position)}return captureSegment(s,g,v,!1),s.result?!0:(s.kind=C,s.result=E,!1)}function readSingleQuotedScalar(s,l){var c,d,f;if(c=s.input.charCodeAt(s.position),c!==39)return!1;for(s.kind="scalar",s.result="",s.position++,d=f=s.position;(c=s.input.charCodeAt(s.position))!==0;)if(c===39)if(captureSegment(s,d,s.position,!0),c=s.input.charCodeAt(++s.position),c===39)d=s.position,s.position++,f=s.position;else return!0;else is_EOL(c)?(captureSegment(s,d,f,!0),writeFoldedLines(s,skipSeparationSpace(s,!1,l)),d=f=s.position):s.position===s.lineStart&&testDocumentSeparator(s)?throwError(s,"unexpected end of the document within a single quoted scalar"):(s.position++,f=s.position);throwError(s,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar(s,l){var c,d,f,g,v,b;if(b=s.input.charCodeAt(s.position),b!==34)return!1;for(s.kind="scalar",s.result="",s.position++,c=d=s.position;(b=s.input.charCodeAt(s.position))!==0;){if(b===34)return captureSegment(s,c,s.position,!0),s.position++,!0;if(b===92){if(captureSegment(s,c,s.position,!0),b=s.input.charCodeAt(++s.position),is_EOL(b))skipSeparationSpace(s,!1,l);else if(b<256&&simpleEscapeCheck[b])s.result+=simpleEscapeMap[b],s.position++;else if((v=escapedHexLen(b))>0){for(f=v,g=0;f>0;f--)b=s.input.charCodeAt(++s.position),(v=fromHexCode(b))>=0?g=(g<<4)+v:throwError(s,"expected hexadecimal character");s.result+=charFromCodepoint(g),s.position++}else throwError(s,"unknown escape sequence");c=d=s.position}else is_EOL(b)?(captureSegment(s,c,d,!0),writeFoldedLines(s,skipSeparationSpace(s,!1,l)),c=d=s.position):s.position===s.lineStart&&testDocumentSeparator(s)?throwError(s,"unexpected end of the document within a double quoted scalar"):(s.position++,d=s.position)}throwError(s,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection(s,l){var c=!0,d,f,g,v=s.tag,b,$=s.anchor,y,x,C,E,N,W=Object.create(null),q,Y,re,se;if(se=s.input.charCodeAt(s.position),se===91)x=93,N=!1,b=[];else if(se===123)x=125,N=!0,b={};else return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=b),se=s.input.charCodeAt(++s.position);se!==0;){if(skipSeparationSpace(s,!0,l),se=s.input.charCodeAt(s.position),se===x)return s.position++,s.tag=v,s.anchor=$,s.kind=N?"mapping":"sequence",s.result=b,!0;c?se===44&&throwError(s,"expected the node content, but found ','"):throwError(s,"missed comma between flow collection entries"),Y=q=re=null,C=E=!1,se===63&&(y=s.input.charCodeAt(s.position+1),is_WS_OR_EOL(y)&&(C=E=!0,s.position++,skipSeparationSpace(s,!0,l))),d=s.line,f=s.lineStart,g=s.position,composeNode(s,l,CONTEXT_FLOW_IN,!1,!0),Y=s.tag,q=s.result,skipSeparationSpace(s,!0,l),se=s.input.charCodeAt(s.position),(E||s.line===d)&&se===58&&(C=!0,se=s.input.charCodeAt(++s.position),skipSeparationSpace(s,!0,l),composeNode(s,l,CONTEXT_FLOW_IN,!1,!0),re=s.result),N?storeMappingPair(s,b,W,Y,q,re,d,f,g):C?b.push(storeMappingPair(s,null,W,Y,q,re,d,f,g)):b.push(q),skipSeparationSpace(s,!0,l),se=s.input.charCodeAt(s.position),se===44?(c=!0,se=s.input.charCodeAt(++s.position)):c=!1}throwError(s,"unexpected end of the stream within a flow collection")}function readBlockScalar(s,l){var c,d,f=CHOMPING_CLIP,g=!1,v=!1,b=l,$=0,y=!1,x,C;if(C=s.input.charCodeAt(s.position),C===124)d=!1;else if(C===62)d=!0;else return!1;for(s.kind="scalar",s.result="";C!==0;)if(C=s.input.charCodeAt(++s.position),C===43||C===45)CHOMPING_CLIP===f?f=C===43?CHOMPING_KEEP:CHOMPING_STRIP:throwError(s,"repeat of a chomping mode identifier");else if((x=fromDecimalCode(C))>=0)x===0?throwError(s,"bad explicit indentation width of a block scalar; it cannot be less than one"):v?throwError(s,"repeat of an indentation width identifier"):(b=l+x-1,v=!0);else break;if(is_WHITE_SPACE(C)){do C=s.input.charCodeAt(++s.position);while(is_WHITE_SPACE(C));if(C===35)do C=s.input.charCodeAt(++s.position);while(!is_EOL(C)&&C!==0)}for(;C!==0;){for(readLineBreak(s),s.lineIndent=0,C=s.input.charCodeAt(s.position);(!v||s.lineIndent<b)&&C===32;)s.lineIndent++,C=s.input.charCodeAt(++s.position);if(!v&&s.lineIndent>b&&(b=s.lineIndent),is_EOL(C)){$++;continue}if(s.lineIndent<b){f===CHOMPING_KEEP?s.result+=common.repeat(`
`,g?1+$:$):f===CHOMPING_CLIP&&g&&(s.result+=`
`);break}for(d?is_WHITE_SPACE(C)?(y=!0,s.result+=common.repeat(`
`,g?1+$:$)):y?(y=!1,s.result+=common.repeat(`
`,$+1)):$===0?g&&(s.result+=" "):s.result+=common.repeat(`
`,$):s.result+=common.repeat(`
`,g?1+$:$),g=!0,v=!0,$=0,c=s.position;!is_EOL(C)&&C!==0;)C=s.input.charCodeAt(++s.position);captureSegment(s,c,s.position,!1)}return!0}function readBlockSequence(s,l){var c,d=s.tag,f=s.anchor,g=[],v,b=!1,$;if(s.firstTabInLine!==-1)return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=g),$=s.input.charCodeAt(s.position);$!==0&&(s.firstTabInLine!==-1&&(s.position=s.firstTabInLine,throwError(s,"tab characters must not be used in indentation")),!($!==45||(v=s.input.charCodeAt(s.position+1),!is_WS_OR_EOL(v))));){if(b=!0,s.position++,skipSeparationSpace(s,!0,-1)&&s.lineIndent<=l){g.push(null),$=s.input.charCodeAt(s.position);continue}if(c=s.line,composeNode(s,l,CONTEXT_BLOCK_IN,!1,!0),g.push(s.result),skipSeparationSpace(s,!0,-1),$=s.input.charCodeAt(s.position),(s.line===c||s.lineIndent>l)&&$!==0)throwError(s,"bad indentation of a sequence entry");else if(s.lineIndent<l)break}return b?(s.tag=d,s.anchor=f,s.kind="sequence",s.result=g,!0):!1}function readBlockMapping(s,l,c){var d,f,g,v,b,$,y=s.tag,x=s.anchor,C={},E=Object.create(null),N=null,W=null,q=null,Y=!1,re=!1,se;if(s.firstTabInLine!==-1)return!1;for(s.anchor!==null&&(s.anchorMap[s.anchor]=C),se=s.input.charCodeAt(s.position);se!==0;){if(!Y&&s.firstTabInLine!==-1&&(s.position=s.firstTabInLine,throwError(s,"tab characters must not be used in indentation")),d=s.input.charCodeAt(s.position+1),g=s.line,(se===63||se===58)&&is_WS_OR_EOL(d))se===63?(Y&&(storeMappingPair(s,C,E,N,W,null,v,b,$),N=W=q=null),re=!0,Y=!0,f=!0):Y?(Y=!1,f=!0):throwError(s,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),s.position+=1,se=d;else{if(v=s.line,b=s.lineStart,$=s.position,!composeNode(s,c,CONTEXT_FLOW_OUT,!1,!0))break;if(s.line===g){for(se=s.input.charCodeAt(s.position);is_WHITE_SPACE(se);)se=s.input.charCodeAt(++s.position);if(se===58)se=s.input.charCodeAt(++s.position),is_WS_OR_EOL(se)||throwError(s,"a whitespace character is expected after the key-value separator within a block mapping"),Y&&(storeMappingPair(s,C,E,N,W,null,v,b,$),N=W=q=null),re=!0,Y=!1,f=!1,N=s.tag,W=s.result;else if(re)throwError(s,"can not read an implicit mapping pair; a colon is missed");else return s.tag=y,s.anchor=x,!0}else if(re)throwError(s,"can not read a block mapping entry; a multiline key may not be an implicit key");else return s.tag=y,s.anchor=x,!0}if((s.line===g||s.lineIndent>l)&&(Y&&(v=s.line,b=s.lineStart,$=s.position),composeNode(s,l,CONTEXT_BLOCK_OUT,!0,f)&&(Y?W=s.result:q=s.result),Y||(storeMappingPair(s,C,E,N,W,q,v,b,$),N=W=q=null),skipSeparationSpace(s,!0,-1),se=s.input.charCodeAt(s.position)),(s.line===g||s.lineIndent>l)&&se!==0)throwError(s,"bad indentation of a mapping entry");else if(s.lineIndent<l)break}return Y&&storeMappingPair(s,C,E,N,W,null,v,b,$),re&&(s.tag=y,s.anchor=x,s.kind="mapping",s.result=C),re}function readTagProperty(s){var l,c=!1,d=!1,f,g,v;if(v=s.input.charCodeAt(s.position),v!==33)return!1;if(s.tag!==null&&throwError(s,"duplication of a tag property"),v=s.input.charCodeAt(++s.position),v===60?(c=!0,v=s.input.charCodeAt(++s.position)):v===33?(d=!0,f="!!",v=s.input.charCodeAt(++s.position)):f="!",l=s.position,c){do v=s.input.charCodeAt(++s.position);while(v!==0&&v!==62);s.position<s.length?(g=s.input.slice(l,s.position),v=s.input.charCodeAt(++s.position)):throwError(s,"unexpected end of the stream within a verbatim tag")}else{for(;v!==0&&!is_WS_OR_EOL(v);)v===33&&(d?throwError(s,"tag suffix cannot contain exclamation marks"):(f=s.input.slice(l-1,s.position+1),PATTERN_TAG_HANDLE.test(f)||throwError(s,"named tag handle cannot contain such characters"),d=!0,l=s.position+1)),v=s.input.charCodeAt(++s.position);g=s.input.slice(l,s.position),PATTERN_FLOW_INDICATORS.test(g)&&throwError(s,"tag suffix cannot contain flow indicator characters")}g&&!PATTERN_TAG_URI.test(g)&&throwError(s,"tag name cannot contain such characters: "+g);try{g=decodeURIComponent(g)}catch{throwError(s,"tag name is malformed: "+g)}return c?s.tag=g:_hasOwnProperty$1.call(s.tagMap,f)?s.tag=s.tagMap[f]+g:f==="!"?s.tag="!"+g:f==="!!"?s.tag="tag:yaml.org,2002:"+g:throwError(s,'undeclared tag handle "'+f+'"'),!0}function readAnchorProperty(s){var l,c;if(c=s.input.charCodeAt(s.position),c!==38)return!1;for(s.anchor!==null&&throwError(s,"duplication of an anchor property"),c=s.input.charCodeAt(++s.position),l=s.position;c!==0&&!is_WS_OR_EOL(c)&&!is_FLOW_INDICATOR(c);)c=s.input.charCodeAt(++s.position);return s.position===l&&throwError(s,"name of an anchor node must contain at least one character"),s.anchor=s.input.slice(l,s.position),!0}function readAlias(s){var l,c,d;if(d=s.input.charCodeAt(s.position),d!==42)return!1;for(d=s.input.charCodeAt(++s.position),l=s.position;d!==0&&!is_WS_OR_EOL(d)&&!is_FLOW_INDICATOR(d);)d=s.input.charCodeAt(++s.position);return s.position===l&&throwError(s,"name of an alias node must contain at least one character"),c=s.input.slice(l,s.position),_hasOwnProperty$1.call(s.anchorMap,c)||throwError(s,'unidentified alias "'+c+'"'),s.result=s.anchorMap[c],skipSeparationSpace(s,!0,-1),!0}function composeNode(s,l,c,d,f){var g,v,b,$=1,y=!1,x=!1,C,E,N,W,q,Y;if(s.listener!==null&&s.listener("open",s),s.tag=null,s.anchor=null,s.kind=null,s.result=null,g=v=b=CONTEXT_BLOCK_OUT===c||CONTEXT_BLOCK_IN===c,d&&skipSeparationSpace(s,!0,-1)&&(y=!0,s.lineIndent>l?$=1:s.lineIndent===l?$=0:s.lineIndent<l&&($=-1)),$===1)for(;readTagProperty(s)||readAnchorProperty(s);)skipSeparationSpace(s,!0,-1)?(y=!0,b=g,s.lineIndent>l?$=1:s.lineIndent===l?$=0:s.lineIndent<l&&($=-1)):b=!1;if(b&&(b=y||f),($===1||CONTEXT_BLOCK_OUT===c)&&(CONTEXT_FLOW_IN===c||CONTEXT_FLOW_OUT===c?q=l:q=l+1,Y=s.position-s.lineStart,$===1?b&&(readBlockSequence(s,Y)||readBlockMapping(s,Y,q))||readFlowCollection(s,q)?x=!0:(v&&readBlockScalar(s,q)||readSingleQuotedScalar(s,q)||readDoubleQuotedScalar(s,q)?x=!0:readAlias(s)?(x=!0,(s.tag!==null||s.anchor!==null)&&throwError(s,"alias node should not have any properties")):readPlainScalar(s,q,CONTEXT_FLOW_IN===c)&&(x=!0,s.tag===null&&(s.tag="?")),s.anchor!==null&&(s.anchorMap[s.anchor]=s.result)):$===0&&(x=b&&readBlockSequence(s,Y))),s.tag===null)s.anchor!==null&&(s.anchorMap[s.anchor]=s.result);else if(s.tag==="?"){for(s.result!==null&&s.kind!=="scalar"&&throwError(s,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+s.kind+'"'),C=0,E=s.implicitTypes.length;C<E;C+=1)if(W=s.implicitTypes[C],W.resolve(s.result)){s.result=W.construct(s.result),s.tag=W.tag,s.anchor!==null&&(s.anchorMap[s.anchor]=s.result);break}}else if(s.tag!=="!"){if(_hasOwnProperty$1.call(s.typeMap[s.kind||"fallback"],s.tag))W=s.typeMap[s.kind||"fallback"][s.tag];else for(W=null,N=s.typeMap.multi[s.kind||"fallback"],C=0,E=N.length;C<E;C+=1)if(s.tag.slice(0,N[C].tag.length)===N[C].tag){W=N[C];break}W||throwError(s,"unknown tag !<"+s.tag+">"),s.result!==null&&W.kind!==s.kind&&throwError(s,"unacceptable node kind for !<"+s.tag+'> tag; it should be "'+W.kind+'", not "'+s.kind+'"'),W.resolve(s.result,s.tag)?(s.result=W.construct(s.result,s.tag),s.anchor!==null&&(s.anchorMap[s.anchor]=s.result)):throwError(s,"cannot resolve a node with !<"+s.tag+"> explicit tag")}return s.listener!==null&&s.listener("close",s),s.tag!==null||s.anchor!==null||x}function readDocument(s){var l=s.position,c,d,f,g=!1,v;for(s.version=null,s.checkLineBreaks=s.legacy,s.tagMap=Object.create(null),s.anchorMap=Object.create(null);(v=s.input.charCodeAt(s.position))!==0&&(skipSeparationSpace(s,!0,-1),v=s.input.charCodeAt(s.position),!(s.lineIndent>0||v!==37));){for(g=!0,v=s.input.charCodeAt(++s.position),c=s.position;v!==0&&!is_WS_OR_EOL(v);)v=s.input.charCodeAt(++s.position);for(d=s.input.slice(c,s.position),f=[],d.length<1&&throwError(s,"directive name must not be less than one character in length");v!==0;){for(;is_WHITE_SPACE(v);)v=s.input.charCodeAt(++s.position);if(v===35){do v=s.input.charCodeAt(++s.position);while(v!==0&&!is_EOL(v));break}if(is_EOL(v))break;for(c=s.position;v!==0&&!is_WS_OR_EOL(v);)v=s.input.charCodeAt(++s.position);f.push(s.input.slice(c,s.position))}v!==0&&readLineBreak(s),_hasOwnProperty$1.call(directiveHandlers,d)?directiveHandlers[d](s,d,f):throwWarning(s,'unknown document directive "'+d+'"')}if(skipSeparationSpace(s,!0,-1),s.lineIndent===0&&s.input.charCodeAt(s.position)===45&&s.input.charCodeAt(s.position+1)===45&&s.input.charCodeAt(s.position+2)===45?(s.position+=3,skipSeparationSpace(s,!0,-1)):g&&throwError(s,"directives end mark is expected"),composeNode(s,s.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(s,!0,-1),s.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(s.input.slice(l,s.position))&&throwWarning(s,"non-ASCII line breaks are interpreted as content"),s.documents.push(s.result),s.position===s.lineStart&&testDocumentSeparator(s)){s.input.charCodeAt(s.position)===46&&(s.position+=3,skipSeparationSpace(s,!0,-1));return}if(s.position<s.length-1)throwError(s,"end of the stream or a document separator is expected");else return}function loadDocuments(s,l){s=String(s),l=l||{},s.length!==0&&(s.charCodeAt(s.length-1)!==10&&s.charCodeAt(s.length-1)!==13&&(s+=`
`),s.charCodeAt(0)===65279&&(s=s.slice(1)));var c=new State$1(s,l),d=s.indexOf("\0");for(d!==-1&&(c.position=d,throwError(c,"null byte is not allowed in input")),c.input+="\0";c.input.charCodeAt(c.position)===32;)c.lineIndent+=1,c.position+=1;for(;c.position<c.length-1;)readDocument(c);return c.documents}function loadAll$1(s,l,c){l!==null&&typeof l=="object"&&typeof c>"u"&&(c=l,l=null);var d=loadDocuments(s,c);if(typeof l!="function")return d;for(var f=0,g=d.length;f<g;f+=1)l(d[f])}function load$1(s,l){var c=loadDocuments(s,l);if(c.length!==0){if(c.length===1)return c[0];throw new exception("expected a single document in the stream, but found more")}}var loadAll_1=loadAll$1,load_1=load$1,loader={loadAll:loadAll_1,load:load_1},JSON_SCHEMA=json,load=loader.load;function extractFrontMatter(s){const l=s.match(frontMatterRegex);if(!l)return{text:s,metadata:{}};let c=load(l[1],{schema:JSON_SCHEMA})??{};c=typeof c=="object"&&!Array.isArray(c)?c:{};const d={};return c.displayMode&&(d.displayMode=c.displayMode.toString()),c.title&&(d.title=c.title.toString()),c.config&&(d.config=c.config),{text:s.slice(l[0].length),metadata:d}}const cleanupText=s=>s.replace(/\r\n?/g,`
`).replace(/<(\w+)([^>]*)>/g,(l,c,d)=>"<"+c+d.replace(/="([^"]*)"/g,"='$1'")+">"),processFrontmatter=s=>{const{text:l,metadata:c}=extractFrontMatter(s),{displayMode:d,title:f,config:g={}}=c;return d&&(g.gantt||(g.gantt={}),g.gantt.displayMode=d),{title:f,config:g,text:l}},processDirectives=s=>{const l=utils$4.detectInit(s)??{},c=utils$4.detectDirective(s,"wrap");return Array.isArray(c)?l.wrap=c.some(({type:d})=>{}):(c==null?void 0:c.type)==="wrap"&&(l.wrap=!0),{text:removeDirectives(s),directive:l}};function preprocessDiagram(s){const l=cleanupText(s),c=processFrontmatter(l),d=processDirectives(c.text),f=cleanAndMerge(c.config,d.directive);return s=cleanupComments(d.text),{code:s,title:c.title,config:f}}const MAX_TEXTLENGTH=5e4,MAX_TEXTLENGTH_EXCEEDED_MSG="graph TB;a[Maximum text size in diagram exceeded];style a fill:#faa",SECURITY_LVL_SANDBOX="sandbox",SECURITY_LVL_LOOSE="loose",XMLNS_SVG_STD="http://www.w3.org/2000/svg",XMLNS_XLINK_STD="http://www.w3.org/1999/xlink",XMLNS_XHTML_STD="http://www.w3.org/1999/xhtml",IFRAME_WIDTH="100%",IFRAME_HEIGHT="100%",IFRAME_STYLES="border:0;margin:0;",IFRAME_BODY_STYLE="margin:0",IFRAME_SANDBOX_OPTS="allow-top-navigation-by-user-activation allow-popups",IFRAME_NOT_SUPPORTED_MSG='The "iframe" tag is not supported by your browser.',DOMPURIFY_TAGS=["foreignobject"],DOMPURIFY_ATTR=["dominant-baseline"];function processAndSetConfigs(s){const l=preprocessDiagram(s);return reset$1(),addDirective(l.config??{}),l}async function parse$1(s,l){addDiagrams(),s=processAndSetConfigs(s).code;try{await getDiagramFromText(s)}catch(c){if(l!=null&&l.suppressErrors)return!1;throw c}return!0}const cssImportantStyles=(s,l,c=[])=>`
.${s} ${l} { ${c.join(" !important; ")} !important; }`,createCssStyles=(s,l={})=>{var c;let d="";if(s.themeCSS!==void 0&&(d+=`
${s.themeCSS}`),s.fontFamily!==void 0&&(d+=`
:root { --mermaid-font-family: ${s.fontFamily}}`),s.altFontFamily!==void 0&&(d+=`
:root { --mermaid-alt-font-family: ${s.altFontFamily}}`),!isEmpty$3(l)){const b=s.htmlLabels||((c=s.flowchart)==null?void 0:c.htmlLabels)?["> *","span"]:["rect","polygon","ellipse","circle","path"];for(const $ in l){const y=l[$];isEmpty$3(y.styles)||b.forEach(x=>{d+=cssImportantStyles(y.id,x,y.styles)}),isEmpty$3(y.textStyles)||(d+=cssImportantStyles(y.id,"tspan",y.textStyles))}}return d},createUserStyles=(s,l,c,d)=>{const f=createCssStyles(s,c),g=getStyles$1(l,f,s.themeVariables);return serialize(compile(`${d}{${g}}`),stringify)},cleanUpSvgCode=(s="",l,c)=>{let d=s;return!c&&!l&&(d=d.replace(/marker-end="url\([\d+./:=?A-Za-z-]*?#/g,'marker-end="url(#')),d=decodeEntities(d),d=d.replace(/<br>/g,"<br/>"),d},putIntoIFrame=(s="",l)=>{var c,d;const f=(d=(c=l==null?void 0:l.viewBox)==null?void 0:c.baseVal)!=null&&d.height?l.viewBox.baseVal.height+"px":IFRAME_HEIGHT,g=btoa('<body style="'+IFRAME_BODY_STYLE+'">'+s+"</body>");return`<iframe style="width:${IFRAME_WIDTH};height:${f};${IFRAME_STYLES}" src="data:text/html;base64,${g}" sandbox="${IFRAME_SANDBOX_OPTS}">
  ${IFRAME_NOT_SUPPORTED_MSG}
</iframe>`},appendDivSvgG=(s,l,c,d,f)=>{const g=s.append("div");g.attr("id",c),d&&g.attr("style",d);const v=g.append("svg").attr("id",l).attr("width","100%").attr("xmlns",XMLNS_SVG_STD);return f&&v.attr("xmlns:xlink",f),v.append("g"),s};function sandboxedIframe(s,l){return s.append("iframe").attr("id",l).attr("style","width: 100%; height: 100%;").attr("sandbox","")}const removeExistingElements=(s,l,c,d)=>{var f,g,v;(f=s.getElementById(l))==null||f.remove(),(g=s.getElementById(c))==null||g.remove(),(v=s.getElementById(d))==null||v.remove()},render$1$1=async function(s,l,c){var d,f,g,v,b,$;addDiagrams();const y=processAndSetConfigs(l);l=y.code;const x=getConfig$1();log$1.debug(x),l.length>((x==null?void 0:x.maxTextSize)??MAX_TEXTLENGTH)&&(l=MAX_TEXTLENGTH_EXCEEDED_MSG);const C="#"+s,E="i"+s,N="#"+E,W="d"+s,q="#"+W;let Y=select("body");const re=x.securityLevel===SECURITY_LVL_SANDBOX,se=x.securityLevel===SECURITY_LVL_LOOSE,de=x.fontFamily;if(c!==void 0){if(c&&(c.innerHTML=""),re){const W$=sandboxedIframe(select(c),E);Y=select(W$.nodes()[0].contentDocument.body),Y.node().style.margin=0}else Y=select(c);appendDivSvgG(Y,s,W,`font-family: ${de}`,XMLNS_XLINK_STD)}else{if(removeExistingElements(document,s,W,E),re){const W$=sandboxedIframe(select("body"),E);Y=select(W$.nodes()[0].contentDocument.body),Y.node().style.margin=0}else Y=select("body");appendDivSvgG(Y,s,W)}let he,ge;try{he=await getDiagramFromText(l,{title:y.title})}catch(W$){he=new Diagram("error"),ge=W$}const Se=Y.select(q).node(),Ae=he.type,Re=Se.firstChild,Be=Re.firstChild,Ke=(f=(d=he.renderer).getClasses)==null?void 0:f.call(d,l,he),Lr=createUserStyles(x,Ae,Ke,C),_y=document.createElement("style");_y.innerHTML=Lr,Re.insertBefore(_y,Be);try{await he.renderer.draw(l,s,version,he)}catch(W$){throw errorRenderer.draw(l,s,version),W$}const by=Y.select(`${q} svg`),yy=(v=(g=he.db).getAccTitle)==null?void 0:v.call(g),my=($=(b=he.db).getAccDescription)==null?void 0:$.call(b);addA11yInfo(Ae,by,yy,my),Y.select(`[id="${s}"]`).selectAll("foreignobject > *").attr("xmlns",XMLNS_XHTML_STD);let $t=Y.select(q).node().innerHTML;if(log$1.debug("config.arrowMarkerAbsolute",x.arrowMarkerAbsolute),$t=cleanUpSvgCode($t,re,evaluate(x.arrowMarkerAbsolute)),re){const W$=Y.select(q+" svg").node();$t=putIntoIFrame($t,W$)}else se||($t=purify.sanitize($t,{ADD_TAGS:DOMPURIFY_TAGS,ADD_ATTR:DOMPURIFY_ATTR}));if(attachFunctions(),ge)throw ge;const Y$=select(re?N:q).node();return Y$&&"remove"in Y$&&Y$.remove(),{svg:$t,bindFunctions:he.db.bindFunctions}};function initialize$1(s={}){var l;s!=null&&s.fontFamily&&!((l=s.themeVariables)!=null&&l.fontFamily)&&(s.themeVariables||(s.themeVariables={}),s.themeVariables.fontFamily=s.fontFamily),saveConfigFromInitialize(s),s!=null&&s.theme&&s.theme in theme?s.themeVariables=theme[s.theme].getThemeVariables(s.themeVariables):s&&(s.themeVariables=theme.default.getThemeVariables(s.themeVariables));const c=typeof s=="object"?setSiteConfig(s):getSiteConfig();setLogLevel$1(c.logLevel),addDiagrams()}const getDiagramFromText=(s,l={})=>{const{code:c}=preprocessDiagram(s);return getDiagramFromText$1(c,l)};function addA11yInfo(s,l,c,d){setA11yDiagramInfo(l,s),addSVGa11yTitleDescription(l,c,d,l.attr("id"))}const mermaidAPI=Object.freeze({render:render$1$1,parse:parse$1,getDiagramFromText,initialize:initialize$1,getConfig:getConfig$1,setConfig:setConfig$1,getSiteConfig,updateSiteConfig,reset:()=>{reset$1()},globalReset:()=>{reset$1(defaultConfig$1)},defaultConfig:defaultConfig$1});setLogLevel$1(getConfig$1().logLevel);reset$1(getConfig$1());const loadRegisteredDiagrams=async()=>{log$1.debug("Loading registered diagrams");const l=(await Promise.allSettled(Object.entries(detectors).map(async([c,{detector:d,loader:f}])=>{if(f)try{getDiagram(c)}catch{try{const{diagram:v,id:b}=await f();registerDiagram(b,v,d)}catch(v){throw log$1.error(`Failed to load external diagram with key ${c}. Removing from detectors.`),delete detectors[c],v}}}))).filter(c=>c.status==="rejected");if(l.length>0){log$1.error(`Failed to load ${l.length} external diagrams`);for(const c of l)log$1.error(c);throw new Error(`Failed to load ${l.length} external diagrams`)}},handleError=(s,l,c)=>{log$1.warn(s),isDetailedError(s)?(c&&c(s.str,s.hash),l.push({...s,message:s.str,error:s})):(c&&c(s),s instanceof Error&&l.push({str:s.message,message:s.message,hash:s.name,error:s}))},run$2=async function(s={querySelector:".mermaid"}){try{await runThrowsErrors(s)}catch(l){if(isDetailedError(l)&&log$1.error(l.str),mermaid.parseError&&mermaid.parseError(l),!s.suppressErrors)throw log$1.error("Use the suppressErrors option to suppress these errors"),l}},runThrowsErrors=async function({postRenderCallback:s,querySelector:l,nodes:c}={querySelector:".mermaid"}){const d=mermaidAPI.getConfig();log$1.debug(`${s?"":"No "}Callback function found`);let f;if(c)f=c;else if(l)f=document.querySelectorAll(l);else throw new Error("Nodes and querySelector are both undefined");log$1.debug(`Found ${f.length} diagrams`),(d==null?void 0:d.startOnLoad)!==void 0&&(log$1.debug("Start On Load: "+(d==null?void 0:d.startOnLoad)),mermaidAPI.updateSiteConfig({startOnLoad:d==null?void 0:d.startOnLoad}));const g=new utils$4.InitIDGenerator(d.deterministicIds,d.deterministicIDSeed);let v;const b=[];for(const $ of Array.from(f)){log$1.info("Rendering diagram: "+$.id);/*! Check if previously processed */if($.getAttribute("data-processed"))continue;$.setAttribute("data-processed","true");const y=`mermaid-${g.next()}`;v=$.innerHTML,v=dedent(utils$4.entityDecode(v)).trim().replace(/<br\s*\/?>/gi,"<br/>");const x=utils$4.detectInit(v);x&&log$1.debug("Detected early reinit: ",x);try{const{svg:C,bindFunctions:E}=await render$3(y,v,$);$.innerHTML=C,s&&await s(y),E&&E($)}catch(C){handleError(C,b,mermaid.parseError)}}if(b.length>0)throw b[0]},initialize=function(s){mermaidAPI.initialize(s)},init$4=async function(s,l,c){log$1.warn("mermaid.init is deprecated. Please use run instead."),s&&initialize(s);const d={postRenderCallback:c,querySelector:".mermaid"};typeof l=="string"?d.querySelector=l:l&&(l instanceof HTMLElement?d.nodes=[l]:d.nodes=l),await run$2(d)},registerExternalDiagrams=async(s,{lazyLoad:l=!0}={})=>{registerLazyLoadedDiagrams(...s),l===!1&&await loadRegisteredDiagrams()},contentLoaded=function(){if(mermaid.startOnLoad){const{startOnLoad:s}=mermaidAPI.getConfig();s&&mermaid.run().catch(l=>log$1.error("Mermaid failed to initialize",l))}};if(typeof document<"u"){/*!
 * Wait for document loaded before starting the execution
 */window.addEventListener("load",contentLoaded,!1)}const setParseErrorHandler=function(s){mermaid.parseError=s},executionQueue=[];let executionQueueRunning=!1;const executeQueue=async()=>{if(!executionQueueRunning){for(executionQueueRunning=!0;executionQueue.length>0;){const s=executionQueue.shift();if(s)try{await s()}catch(l){log$1.error("Error executing queue",l)}}executionQueueRunning=!1}},parse=async(s,l)=>new Promise((c,d)=>{const f=()=>new Promise((g,v)=>{mermaidAPI.parse(s,l).then(b=>{g(b),c(b)},b=>{var $;log$1.error("Error parsing",b),($=mermaid.parseError)==null||$.call(mermaid,b),v(b),d(b)})});executionQueue.push(f),executeQueue().catch(d)}),render$3=(s,l,c)=>new Promise((d,f)=>{const g=()=>new Promise((v,b)=>{mermaidAPI.render(s,l,c).then($=>{v($),d($)},$=>{var y;log$1.error("Error parsing",$),(y=mermaid.parseError)==null||y.call(mermaid,$),b($),f($)})});executionQueue.push(g),executeQueue().catch(f)}),mermaid={startOnLoad:!0,mermaidAPI,parse,render:render$3,init:init$4,run:run$2,registerExternalDiagrams,initialize,parseError:void 0,contentLoaded,setParseErrorHandler,detectType},e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",r=s=>{s=s.replace(/\r\n/g,`
`);let l=0,c="";for(;l<s.length;l++){const d=s.charCodeAt(l);d<128?c+=String.fromCharCode(d):d>127&&d<2048?(c+=String.fromCharCode(d>>6|192),c+=String.fromCharCode(63&d|128)):(c+=String.fromCharCode(d>>12|224),c+=String.fromCharCode(d>>6&63|128),c+=String.fromCharCode(63&d|128))}return c},t=s=>{let l,c,d,f,g,v,b,$=0,y="";for(s=r(s);$<s.length;)l=s.charCodeAt($++),c=s.charCodeAt($++),d=s.charCodeAt($++),f=l>>2,g=(3&l)<<4|c>>4,v=(15&c)<<2|d>>6,b=63&d,isNaN(c)?v=b=64:isNaN(d)&&(b=64),y=y+e.charAt(f)+e.charAt(g)+e.charAt(v)+e.charAt(b);return y},n=s=>typeof s=="string"?"string":typeof SVGElement<"u"&&s instanceof SVGElement?"element":void 0,a=s=>"data:image/svg+xml;base64,"+t(s),o=s=>a(new XMLSerializer().serializeToString(s)),i$1=s=>{switch(n(s)){case"string":return a(s);case"element":return o(s);default:return s}};function iota$1(s){for(var l=new Array(s),c=0;c<s;++c)l[c]=c;return l}var iota_1=iota$1;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var isBuffer_1=function(s){return s!=null&&(isBuffer$1(s)||isSlowBuffer(s)||!!s._isBuffer)};function isBuffer$1(s){return!!s.constructor&&typeof s.constructor.isBuffer=="function"&&s.constructor.isBuffer(s)}function isSlowBuffer(s){return typeof s.readFloatLE=="function"&&typeof s.slice=="function"&&isBuffer$1(s.slice(0,0))}var iota=iota_1,isBuffer=isBuffer_1,hasTypedArrays=typeof Float64Array<"u";function compare1st(s,l){return s[0]-l[0]}function order$1(){var s=this.stride,l=new Array(s.length),c;for(c=0;c<l.length;++c)l[c]=[Math.abs(s[c]),c];l.sort(compare1st);var d=new Array(l.length);for(c=0;c<d.length;++c)d[c]=l[c][1];return d}function compileConstructor(s,l){var c=["View",l,"d",s].join("");l<0&&(c="View_Nil"+s);var d=s==="generic";if(l===-1){var f="function "+c+"(a){this.data=a;};var proto="+c+".prototype;proto.dtype='"+s+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+c+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+c+"(a){return new "+c+"(a);}",q=new Function(f);return q()}else if(l===0){var f="function "+c+"(a,d) {this.data = a;this.offset = d};var proto="+c+".prototype;proto.dtype='"+s+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+c+"_copy() {return new "+c+"(this.data,this.offset)};proto.pick=function "+c+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+c+"_get(){return "+(d?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+c+"_set(v){return "+(d?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+c+"(a,b,c,d){return new "+c+"(a,d)}",q=new Function("TrivialArray",f);return q(CACHED_CONSTRUCTORS[s][0])}var f=["'use strict'"],g=iota(l),v=g.map(function(Y){return"i"+Y}),b="this.offset+"+g.map(function(Y){return"this.stride["+Y+"]*i"+Y}).join("+"),$=g.map(function(Y){return"b"+Y}).join(","),y=g.map(function(Y){return"c"+Y}).join(",");f.push("function "+c+"(a,"+$+","+y+",d){this.data=a","this.shape=["+$+"]","this.stride=["+y+"]","this.offset=d|0}","var proto="+c+".prototype","proto.dtype='"+s+"'","proto.dimension="+l),f.push("Object.defineProperty(proto,'size',{get:function "+c+"_size(){return "+g.map(function(Y){return"this.shape["+Y+"]"}).join("*"),"}})"),l===1?f.push("proto.order=[0]"):(f.push("Object.defineProperty(proto,'order',{get:"),l<4?(f.push("function "+c+"_order(){"),l===2?f.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):l===3&&f.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):f.push("ORDER})")),f.push("proto.set=function "+c+"_set("+v.join(",")+",v){"),d?f.push("return this.data.set("+b+",v)}"):f.push("return this.data["+b+"]=v}"),f.push("proto.get=function "+c+"_get("+v.join(",")+"){"),d?f.push("return this.data.get("+b+")}"):f.push("return this.data["+b+"]}"),f.push("proto.index=function "+c+"_index(",v.join(),"){return "+b+"}"),f.push("proto.hi=function "+c+"_hi("+v.join(",")+"){return new "+c+"(this.data,"+g.map(function(Y){return["(typeof i",Y,"!=='number'||i",Y,"<0)?this.shape[",Y,"]:i",Y,"|0"].join("")}).join(",")+","+g.map(function(Y){return"this.stride["+Y+"]"}).join(",")+",this.offset)}");var x=g.map(function(Y){return"a"+Y+"=this.shape["+Y+"]"}),C=g.map(function(Y){return"c"+Y+"=this.stride["+Y+"]"});f.push("proto.lo=function "+c+"_lo("+v.join(",")+"){var b=this.offset,d=0,"+x.join(",")+","+C.join(","));for(var E=0;E<l;++E)f.push("if(typeof i"+E+"==='number'&&i"+E+">=0){d=i"+E+"|0;b+=c"+E+"*d;a"+E+"-=d}");f.push("return new "+c+"(this.data,"+g.map(function(Y){return"a"+Y}).join(",")+","+g.map(function(Y){return"c"+Y}).join(",")+",b)}"),f.push("proto.step=function "+c+"_step("+v.join(",")+"){var "+g.map(function(Y){return"a"+Y+"=this.shape["+Y+"]"}).join(",")+","+g.map(function(Y){return"b"+Y+"=this.stride["+Y+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var E=0;E<l;++E)f.push("if(typeof i"+E+"==='number'){d=i"+E+"|0;if(d<0){c+=b"+E+"*(a"+E+"-1);a"+E+"=ceil(-a"+E+"/d)}else{a"+E+"=ceil(a"+E+"/d)}b"+E+"*=d}");f.push("return new "+c+"(this.data,"+g.map(function(Y){return"a"+Y}).join(",")+","+g.map(function(Y){return"b"+Y}).join(",")+",c)}");for(var N=new Array(l),W=new Array(l),E=0;E<l;++E)N[E]="a[i"+E+"]",W[E]="b[i"+E+"]";f.push("proto.transpose=function "+c+"_transpose("+v+"){"+v.map(function(Y,re){return Y+"=("+Y+"===undefined?"+re+":"+Y+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+c+"(this.data,"+N.join(",")+","+W.join(",")+",this.offset)}"),f.push("proto.pick=function "+c+"_pick("+v+"){var a=[],b=[],c=this.offset");for(var E=0;E<l;++E)f.push("if(typeof i"+E+"==='number'&&i"+E+">=0){c=(c+this.stride["+E+"]*i"+E+")|0}else{a.push(this.shape["+E+"]);b.push(this.stride["+E+"])}");f.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),f.push("return function construct_"+c+"(data,shape,stride,offset){return new "+c+"(data,"+g.map(function(Y){return"shape["+Y+"]"}).join(",")+","+g.map(function(Y){return"stride["+Y+"]"}).join(",")+",offset)}");var q=new Function("CTOR_LIST","ORDER",f.join(`
`));return q(CACHED_CONSTRUCTORS[s],order$1)}function arrayDType(s){if(isBuffer(s))return"buffer";if(hasTypedArrays)switch(Object.prototype.toString.call(s)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(s)?"array":"generic"}var CACHED_CONSTRUCTORS={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function wrappedNDArrayCtor(s,l,c,d){if(s===void 0){var y=CACHED_CONSTRUCTORS.array[0];return y([])}else typeof s=="number"&&(s=[s]);l===void 0&&(l=[s.length]);var f=l.length;if(c===void 0){c=new Array(f);for(var g=f-1,v=1;g>=0;--g)c[g]=v,v*=l[g]}if(d===void 0){d=0;for(var g=0;g<f;++g)c[g]<0&&(d-=(l[g]-1)*c[g])}for(var b=arrayDType(s),$=CACHED_CONSTRUCTORS[b];$.length<=f+1;)$.push(compileConstructor(b,$.length-1));var y=$[f+1];return y(s,l,c,d)}var ndarray=wrappedNDArrayCtor;const ndarray4=getDefaultExportFromCjs(ndarray);/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var vd$2=Object.create,Pn$2=Object.defineProperty,_d$2=Object.getOwnPropertyDescriptor,Od$2=Object.getOwnPropertyNames,Id$2=Object.getPrototypeOf,Sd$2=Object.prototype.hasOwnProperty,L$1=(s,l)=>()=>(s&&(l=s(s=0)),l),me=(s,l)=>()=>(l||s((l={exports:{}}).exports,l),l.exports),Sr$1=(s,l)=>{for(var c in l)Pn$2(s,c,{get:l[c],enumerable:!0})},Va$2=(s,l,c,d)=>{if(l&&typeof l=="object"||typeof l=="function")for(let f of Od$2(l))!Sd$2.call(s,f)&&f!==c&&Pn$2(s,f,{get:()=>l[f],enumerable:!(d=_d$2(l,f))||d.enumerable});return s},Ar$1=(s,l,c)=>(c=s!=null?vd$2(Id$2(s)):{},Va$2(!s||!s.__esModule?Pn$2(c,"default",{value:s,enumerable:!0}):c,s)),ar$1=s=>Va$2(Pn$2({},"__esModule",{value:!0}),s),En,sr$2,Pr$2,Ad$2,Dn$2,Ln$2=L$1(()=>{En=new Map,sr$2=[],Pr$2=(s,l,c)=>{if(l&&typeof l.init=="function"&&typeof l.createInferenceSessionHandler=="function"){let d=En.get(s);if(d===void 0)En.set(s,{backend:l,priority:c});else{if(d.priority>c)return;if(d.priority===c&&d.backend!==l)throw new Error(`cannot register backend "${s}" using priority ${c}`)}if(c>=0){let f=sr$2.indexOf(s);f!==-1&&sr$2.splice(f,1);for(let g=0;g<sr$2.length;g++)if(En.get(sr$2[g]).priority<=c){sr$2.splice(g,0,s);return}sr$2.push(s)}return}throw new TypeError("not a valid backend")},Ad$2=async s=>{let l=En.get(s);if(!l)return"backend not found.";if(l.initialized)return l.backend;if(l.aborted)return l.error;{let c=!!l.initPromise;try{return c||(l.initPromise=l.backend.init(s)),await l.initPromise,l.initialized=!0,l.backend}catch(d){return c||(l.error=`${d}`,l.aborted=!0),l.error}finally{delete l.initPromise}}},Dn$2=async s=>{let l=s.executionProviders||[],c=l.map($=>typeof $=="string"?$:$.name),d=c.length===0?sr$2:c,f,g=[],v=new Set;for(let $ of d){let y=await Ad$2($);typeof y=="string"?g.push({name:$,err:y}):(f||(f=y),f===y&&v.add($))}if(!f)throw new Error(`no available backend found. ERR: ${g.map($=>`[${$.name}] ${$.err}`).join(", ")}`);for(let{name:$,err:y}of g)c.includes($)&&console.warn(`removing requested execution provider "${$}" from session options because it is not available: ${y}`);let b=l.filter($=>v.has(typeof $=="string"?$:$.name));return[f,new Proxy(s,{get:($,y)=>y==="executionProviders"?b:Reflect.get($,y)})]}}),Wa$1=L$1(()=>{Ln$2()}),Ha$2,qa$2=L$1(()=>{Ha$2="1.18.0"}),ja$2,ut$2,Vo$1=L$1(()=>{qa$2(),ja$2="warning",ut$2={wasm:{},webgl:{},webgpu:{},versions:{common:Ha$2},set logLevel(s){if(s!==void 0){if(typeof s!="string"||["verbose","info","warning","error","fatal"].indexOf(s)===-1)throw new Error(`Unsupported logging level: ${s}`);ja$2=s}},get logLevel(){return ja$2}},Object.defineProperty(ut$2,"logLevel",{enumerable:!0})}),Z,Ya$2=L$1(()=>{Vo$1(),Z=ut$2}),Xa$2,Ka$2,Ja$2=L$1(()=>{Xa$2=(s,l)=>{let c=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);c.width=s.dims[3],c.height=s.dims[2];let d=c.getContext("2d");if(d!=null){let f,g;(l==null?void 0:l.tensorLayout)!==void 0&&l.tensorLayout==="NHWC"?(f=s.dims[2],g=s.dims[3]):(f=s.dims[3],g=s.dims[2]);let v=(l==null?void 0:l.format)!==void 0?l.format:"RGB",b=l==null?void 0:l.norm,$,y;b===void 0||b.mean===void 0?$=[255,255,255,255]:typeof b.mean=="number"?$=[b.mean,b.mean,b.mean,b.mean]:($=[b.mean[0],b.mean[1],b.mean[2],0],b.mean[3]!==void 0&&($[3]=b.mean[3])),b===void 0||b.bias===void 0?y=[0,0,0,0]:typeof b.bias=="number"?y=[b.bias,b.bias,b.bias,b.bias]:(y=[b.bias[0],b.bias[1],b.bias[2],0],b.bias[3]!==void 0&&(y[3]=b.bias[3]));let x=g*f,C=0,E=x,N=x*2,W=-1;v==="RGBA"?(C=0,E=x,N=x*2,W=x*3):v==="RGB"?(C=0,E=x,N=x*2):v==="RBG"&&(C=0,N=x,E=x*2);for(let q=0;q<g;q++)for(let Y=0;Y<f;Y++){let re=(s.data[C++]-y[0])*$[0],se=(s.data[E++]-y[1])*$[1],de=(s.data[N++]-y[2])*$[2],he=W===-1?255:(s.data[W++]-y[3])*$[3];d.fillStyle="rgba("+re+","+se+","+de+","+he+")",d.fillRect(Y,q,1,1)}if("toDataURL"in c)return c.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},Ka$2=(s,l)=>{let c=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),d;if(c!=null){let f,g,v;(l==null?void 0:l.tensorLayout)!==void 0&&l.tensorLayout==="NHWC"?(f=s.dims[2],g=s.dims[1],v=s.dims[3]):(f=s.dims[3],g=s.dims[2],v=s.dims[1]);let b=l!==void 0&&l.format!==void 0?l.format:"RGB",$=l==null?void 0:l.norm,y,x;$===void 0||$.mean===void 0?y=[255,255,255,255]:typeof $.mean=="number"?y=[$.mean,$.mean,$.mean,$.mean]:(y=[$.mean[0],$.mean[1],$.mean[2],255],$.mean[3]!==void 0&&(y[3]=$.mean[3])),$===void 0||$.bias===void 0?x=[0,0,0,0]:typeof $.bias=="number"?x=[$.bias,$.bias,$.bias,$.bias]:(x=[$.bias[0],$.bias[1],$.bias[2],0],$.bias[3]!==void 0&&(x[3]=$.bias[3]));let C=g*f;if(l!==void 0&&(l.format!==void 0&&v===4&&l.format!=="RGBA"||v===3&&l.format!=="RGB"&&l.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let E=4,N=0,W=1,q=2,Y=3,re=0,se=C,de=C*2,he=-1;b==="RGBA"?(re=0,se=C,de=C*2,he=C*3):b==="RGB"?(re=0,se=C,de=C*2):b==="RBG"&&(re=0,de=C,se=C*2),d=c.createImageData(f,g);for(let ge=0;ge<g*f;N+=E,W+=E,q+=E,Y+=E,ge++)d.data[N]=(s.data[re++]-x[0])*y[0],d.data[W]=(s.data[se++]-x[1])*y[1],d.data[q]=(s.data[de++]-x[2])*y[2],d.data[Y]=he===-1?255:(s.data[he++]-x[3])*y[3]}else throw new Error("Can not access image data");return d}}),Wo$1,Za$2,Qa$2,es$2,ts$3,rs$2=L$1(()=>{Cn$1(),Wo$1=(s,l)=>{if(s===void 0)throw new Error("Image buffer must be defined");if(l.height===void 0||l.width===void 0)throw new Error("Image height and width must be defined");if(l.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:c,width:d}=l,f=l.norm??{mean:255,bias:0},g,v;typeof f.mean=="number"?g=[f.mean,f.mean,f.mean,f.mean]:g=[f.mean[0],f.mean[1],f.mean[2],f.mean[3]??255],typeof f.bias=="number"?v=[f.bias,f.bias,f.bias,f.bias]:v=[f.bias[0],f.bias[1],f.bias[2],f.bias[3]??0];let b=l.format!==void 0?l.format:"RGBA",$=l.tensorFormat!==void 0&&l.tensorFormat!==void 0?l.tensorFormat:"RGB",y=c*d,x=$==="RGBA"?new Float32Array(y*4):new Float32Array(y*3),C=4,E=0,N=1,W=2,q=3,Y=0,re=y,se=y*2,de=-1;b==="RGB"&&(C=3,E=0,N=1,W=2,q=-1),$==="RGBA"?de=y*3:$==="RBG"?(Y=0,se=y,re=y*2):$==="BGR"&&(se=0,re=y,Y=y*2);for(let he=0;he<y;he++,E+=C,W+=C,N+=C,q+=C)x[Y++]=(s[E]+v[0])/g[0],x[re++]=(s[N]+v[1])/g[1],x[se++]=(s[W]+v[2])/g[2],de!==-1&&q!==-1&&(x[de++]=(s[q]+v[3])/g[3]);return $==="RGBA"?new Je$2("float32",x,[1,4,c,d]):new Je$2("float32",x,[1,3,c,d])},Za$2=async(s,l)=>{let c=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,d=typeof ImageData<"u"&&s instanceof ImageData,f=typeof ImageBitmap<"u"&&s instanceof ImageBitmap,g=typeof s=="string",v,b=l??{},$=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},y=x=>x instanceof HTMLCanvasElement||x instanceof OffscreenCanvas?x.getContext("2d"):null;if(c){let x=$();x.width=s.width,x.height=s.height;let C=y(x);if(C!=null){let E=s.height,N=s.width;if(l!==void 0&&l.resizedHeight!==void 0&&l.resizedWidth!==void 0&&(E=l.resizedHeight,N=l.resizedWidth),l!==void 0){if(b=l,l.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");b.tensorFormat="RGBA",b.height=E,b.width=N}else b.tensorFormat="RGBA",b.height=E,b.width=N;C.drawImage(s,0,0),v=C.getImageData(0,0,N,E).data}else throw new Error("Can not access image data")}else if(d){let x,C;if(l!==void 0&&l.resizedWidth!==void 0&&l.resizedHeight!==void 0?(x=l.resizedHeight,C=l.resizedWidth):(x=s.height,C=s.width),l!==void 0&&(b=l),b.format="RGBA",b.height=x,b.width=C,l!==void 0){let E=$();E.width=C,E.height=x;let N=y(E);if(N!=null)N.putImageData(s,0,0),v=N.getImageData(0,0,C,x).data;else throw new Error("Can not access image data")}else v=s.data}else if(f){if(l===void 0)throw new Error("Please provide image config with format for Imagebitmap");let x=$();x.width=s.width,x.height=s.height;let C=y(x);if(C!=null){let E=s.height,N=s.width;return C.drawImage(s,0,0,N,E),v=C.getImageData(0,0,N,E).data,b.height=E,b.width=N,Wo$1(v,b)}else throw new Error("Can not access image data")}else{if(g)return new Promise((x,C)=>{let E=$(),N=y(E);if(!s||!N)return C();let W=new Image;W.crossOrigin="Anonymous",W.src=s,W.onload=()=>{E.width=W.width,E.height=W.height,N.drawImage(W,0,0,E.width,E.height);let q=N.getImageData(0,0,E.width,E.height);b.height=E.height,b.width=E.width,x(Wo$1(q.data,b))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(v!==void 0)return Wo$1(v,b);throw new Error("Input data provided is not supported - aborted tensor creation")},Qa$2=(s,l)=>{let{width:c,height:d,download:f,dispose:g}=l,v=[1,d,c,4];return new Je$2({location:"texture",type:"float32",texture:s,dims:v,download:f,dispose:g})},es$2=(s,l)=>{let{dataType:c,dims:d,download:f,dispose:g}=l;return new Je$2({location:"gpu-buffer",type:c??"float32",gpuBuffer:s,dims:d,download:f,dispose:g})},ts$3=(s,l,c)=>new Je$2({location:"cpu-pinned",type:s,data:l,dims:c??[l.length]})}),ur$2,Qr$2,ns$1,os$3,is$4=L$1(()=>{ur$2=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Qr$2=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ns$1=!1,os$3=()=>{if(!ns$1){ns$1=!0;let s=typeof BigInt64Array<"u"&&BigInt64Array.from,l=typeof BigUint64Array<"u"&&BigUint64Array.from,c=typeof Float16Array<"u"&&Float16Array.from;s&&(ur$2.set("int64",BigInt64Array),Qr$2.set(BigInt64Array,"int64")),l&&(ur$2.set("uint64",BigUint64Array),Qr$2.set(BigUint64Array,"uint64")),c?(ur$2.set("float16",Float16Array),Qr$2.set(Float16Array,"float16")):ur$2.set("float16",Uint16Array)}}}),as$2,ss$2,us$2=L$1(()=>{Cn$1(),as$2=s=>{let l=1;for(let c=0;c<s.length;c++){let d=s[c];if(typeof d!="number"||!Number.isSafeInteger(d))throw new TypeError(`dims[${c}] must be an integer, got: ${d}`);if(d<0)throw new RangeError(`dims[${c}] must be a non-negative integer, got: ${d}`);l*=d}return l},ss$2=(s,l)=>{switch(s.location){case"cpu":return new Je$2(s.type,s.data,l);case"cpu-pinned":return new Je$2({location:"cpu-pinned",data:s.data,type:s.type,dims:l});case"texture":return new Je$2({location:"texture",texture:s.texture,type:s.type,dims:l});case"gpu-buffer":return new Je$2({location:"gpu-buffer",gpuBuffer:s.gpuBuffer,type:s.type,dims:l});default:throw new Error(`tensorReshape: tensor location ${s.location} is not supported`)}}}),Je$2,Cn$1=L$1(()=>{Ja$2(),rs$2(),is$4(),us$2(),Je$2=class{constructor(s,l,c){os$3();let d,f;if(typeof s=="object"&&"location"in s)switch(this.dataLocation=s.location,d=s.type,f=s.dims,s.location){case"cpu-pinned":{let v=ur$2.get(d);if(!v)throw new TypeError(`unsupported type "${d}" to create tensor from pinned buffer`);if(!(s.data instanceof v))throw new TypeError(`buffer should be of type ${v.name}`);this.cpuData=s.data;break}case"texture":{if(d!=="float32")throw new TypeError(`unsupported type "${d}" to create tensor from texture`);this.gpuTextureData=s.texture,this.downloader=s.download,this.disposer=s.dispose;break}case"gpu-buffer":{if(d!=="float32"&&d!=="float16"&&d!=="int32"&&d!=="int64"&&d!=="uint32"&&d!=="uint8"&&d!=="bool")throw new TypeError(`unsupported type "${d}" to create tensor from gpu buffer`);this.gpuBufferData=s.gpuBuffer,this.downloader=s.download,this.disposer=s.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let v,b;if(typeof s=="string")if(d=s,b=c,s==="string"){if(!Array.isArray(l))throw new TypeError("A string tensor's data must be a string array.");v=l}else{let $=ur$2.get(s);if($===void 0)throw new TypeError(`Unsupported tensor type: ${s}.`);if(Array.isArray(l)){if(s==="float16"&&$===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");s==="uint64"||s==="int64"?v=$.from(l,BigInt):v=$.from(l)}else if(l instanceof $)v=l;else throw new TypeError(`A ${d} tensor's data must be type of ${$}`)}else if(b=l,Array.isArray(s)){if(s.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let $=typeof s[0];if($==="string")d="string",v=s;else if($==="boolean")d="bool",v=Uint8Array.from(s);else throw new TypeError(`Invalid element type of data array: ${$}.`)}else{let $=Qr$2.get(s.constructor);if($===void 0)throw new TypeError(`Unsupported type for tensor data: ${s.constructor}.`);d=$,v=s}if(b===void 0)b=[v.length];else if(!Array.isArray(b))throw new TypeError("A tensor's dims must be a number array");f=b,this.cpuData=v,this.dataLocation="cpu"}let g=as$2(f);if(this.cpuData&&g!==this.cpuData.length)throw new Error(`Tensor's size(${g}) does not match data length(${this.cpuData.length}).`);this.type=d,this.dims=f,this.size=g}static async fromImage(s,l){return Za$2(s,l)}static fromTexture(s,l){return Qa$2(s,l)}static fromGpuBuffer(s,l){return es$2(s,l)}static fromPinnedBuffer(s,l,c){return ts$3(s,l,c)}toDataURL(s){return Xa$2(this,s)}toImageData(s){return Ka$2(this,s)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(s){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let l=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=l,s&&this.disposer&&(this.disposer(),this.disposer=void 0),l}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(s){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return ss$2(this,s)}}}),Me,Fn$2=L$1(()=>{Cn$1(),Me=Je$2}),ls$2,fs$2,lr$2,fr$1,Ho$1=L$1(()=>{Vo$1(),ls$2=(s,l)=>{(typeof ut$2.trace>"u"?!ut$2.wasm.trace:!ut$2.trace)||console.timeStamp(`${s}::ORT::${l}`)},fs$2=(s,l)=>{var f;let c=((f=new Error().stack)==null?void 0:f.split(/\r\n|\r|\n/g))||[],d=!1;for(let g=0;g<c.length;g++){if(d&&!c[g].includes("TRACE_FUNC")){let v=`FUNC_${s}::${c[g].trim().split(" ")[1]}`;l&&(v+=`::${l}`),ls$2("CPU",v);return}c[g].includes("TRACE_FUNC")&&(d=!0)}},lr$2=s=>{(typeof ut$2.trace>"u"?!ut$2.wasm.trace:!ut$2.trace)||fs$2("BEGIN",s)},fr$1=s=>{(typeof ut$2.trace>"u"?!ut$2.wasm.trace:!ut$2.trace)||fs$2("END",s)}}),$n,cs$2=L$1(()=>{Ln$2(),Fn$2(),Ho$1(),$n=class I3e{constructor(l){this.handler=l}async run(l,c,d){lr$2();let f={},g={};if(typeof l!="object"||l===null||l instanceof Me||Array.isArray(l))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let v=!0;if(typeof c=="object"){if(c===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(c instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(c)){if(c.length===0)throw new TypeError("'fetches' cannot be an empty array.");v=!1;for(let y of c){if(typeof y!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(y)===-1)throw new RangeError(`'fetches' contains invalid output name: ${y}.`);f[y]=null}if(typeof d=="object"&&d!==null)g=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else{let y=!1,x=Object.getOwnPropertyNames(c);for(let C of this.outputNames)if(x.indexOf(C)!==-1){let E=c[C];(E===null||E instanceof Me)&&(y=!0,v=!1,f[C]=E)}if(y){if(typeof d=="object"&&d!==null)g=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else g=c}}else if(typeof c<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let y of this.inputNames)if(typeof l[y]>"u")throw new Error(`input '${y}' is missing in 'feeds'.`);if(v)for(let y of this.outputNames)f[y]=null;let b=await this.handler.run(l,f,g),$={};for(let y in b)if(Object.hasOwnProperty.call(b,y)){let x=b[y];x instanceof Me?$[y]=x:$[y]=new Me(x.type,x.data,x.dims)}return fr$1(),$}async release(){return this.handler.dispose()}static async create(l,c,d,f){lr$2();let g,v={};if(typeof l=="string"){if(g=l,typeof c=="object"&&c!==null)v=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(l instanceof Uint8Array){if(g=l,typeof c=="object"&&c!==null)v=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(l instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&l instanceof SharedArrayBuffer){let x=l,C=0,E=l.byteLength;if(typeof c=="object"&&c!==null)v=c;else if(typeof c=="number"){if(C=c,!Number.isSafeInteger(C))throw new RangeError("'byteOffset' must be an integer.");if(C<0||C>=x.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${x.byteLength}).`);if(E=l.byteLength-C,typeof d=="number"){if(E=d,!Number.isSafeInteger(E))throw new RangeError("'byteLength' must be an integer.");if(E<=0||C+E>x.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${x.byteLength-C}].`);if(typeof f=="object"&&f!==null)v=f;else if(typeof f<"u")throw new TypeError("'options' must be an object.")}else if(typeof d<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof c<"u")throw new TypeError("'options' must be an object.");g=new Uint8Array(x,C,E)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[b,$]=await Dn$2(v),y=await b.createInferenceSessionHandler(g,$);return fr$1(),new I3e(y)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),Pd$2,ps$2=L$1(()=>{cs$2(),Pd$2=$n}),ds$2=L$1(()=>{}),hs$2=L$1(()=>{}),ms$2=L$1(()=>{}),bs$2=L$1(()=>{}),Ed$2,kn$2,gs$2=L$1(()=>{Ln$2(),Fn$2(),Ed$2="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",kn$2=class M3e{constructor(l,c,d){this.handler=l,this.hasOptimizerModel=c,this.hasEvalModel=d}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(l,c){let d=l.evalModel||"",f=l.optimizerModel||"",g=c||{},[v,b]=await Dn$2(g);if(v.createTrainingSessionHandler){let $=await v.createTrainingSessionHandler(l.checkpointState,l.trainModel,d,f,b);return new M3e($,!!l.optimizerModel,!!l.evalModel)}else throw new Error(Ed$2)}typeNarrowingForRunStep(l,c,d,f,g){let v={},b={};if(typeof d!="object"||d===null||d instanceof Me||Array.isArray(d))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let $=!0;if(typeof f=="object"){if(f===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(f instanceof Me)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(f)){if(f.length===0)throw new TypeError("'fetches' cannot be an empty array.");$=!1;for(let y of f){if(typeof y!="string")throw new TypeError("'fetches' must be a string array or an object.");if(c.indexOf(y)===-1)throw new RangeError(`'fetches' contains invalid output name: ${y}.`);v[y]=null}if(typeof g=="object"&&g!==null)b=g;else if(typeof g<"u")throw new TypeError("'options' must be an object.")}else{let y=!1,x=Object.getOwnPropertyNames(f);for(let C of c)if(x.indexOf(C)!==-1){let E=f[C];(E===null||E instanceof Me)&&(y=!0,$=!1,v[C]=E)}if(y){if(typeof g=="object"&&g!==null)b=g;else if(typeof g<"u")throw new TypeError("'options' must be an object.")}else b=f}}else if(typeof f<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let y of l)if(typeof d[y]>"u")throw new Error(`input '${y}' is missing in 'feeds'.`);if($)for(let y of c)v[y]=null;return[v,b]}convertHandlerReturnTypeToMapOfTensors(l){let c={};for(let d in l)if(Object.hasOwnProperty.call(l,d)){let f=l[d];f instanceof Me?c[d]=f:c[d]=new Me(f.type,f.data,f.dims)}return c}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(l,c,d){let[f,g]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,l,c,d),v=await this.handler.runTrainStep(l,f,g);return this.convertHandlerReturnTypeToMapOfTensors(v)}async runOptimizerStep(l){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(l||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(l,c,d){if(this.hasEvalModel){let[f,g]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,l,c,d),v=await this.handler.runEvalStep(l,f,g);return this.convertHandlerReturnTypeToMapOfTensors(v)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(l=!0){return this.handler.getParametersSize(l)}async loadParametersBuffer(l,c=!0){let d=await this.getParametersSize(c);if(l.length!==4*d)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(l,c)}async getContiguousParameters(l=!0){return this.handler.getContiguousParameters(l)}async release(){return this.handler.dispose()}}}),Dd$2,ys$2=L$1(()=>{gs$2(),Dd$2=kn$2}),qo$1={};Sr$1(qo$1,{InferenceSession:()=>Pd$2,TRACE:()=>ls$2,TRACE_FUNC_BEGIN:()=>lr$2,TRACE_FUNC_END:()=>fr$1,Tensor:()=>Me,TrainingSession:()=>Dd$2,env:()=>Z,registerBackend:()=>Pr$2});var Ot$2=L$1(()=>{Wa$1(),Ya$2(),ps$2(),Fn$2(),ds$2(),hs$2(),Ho$1(),ms$2(),bs$2(),ys$2()});function Xt$2(s,l,c,d){if(l===void 0)return Cd$2(s);if(c===void 0)Bn$2(s,l);else if(typeof c=="number"&&d===void 0)Bn$2(s,l);else if(typeof c=="string"&&d===void 0)Bn$2(s,c,1,l);else if(typeof c=="string"&&typeof d=="number")Bn$2(s,c,d,l);else throw new TypeError("input is valid")}function Cd$2(s){return{verbose:Xt$2.verbose.bind(null,s),info:Xt$2.info.bind(null,s),warning:Xt$2.warning.bind(null,s),error:Xt$2.error.bind(null,s),fatal:Xt$2.fatal.bind(null,s)}}function Bn$2(s,l,c,d){let f=en$2[d||""]||en$2[""];xs$2[s]<xs$2[f.minimalSeverity]||(f.logDateTime&&(l=`${new Date().toISOString()}|${l}`),f.logSourceLocation,Ld$2[f.provider].log(s,l,d))}var jo$1,Yo$1,xs$2,Ld$2,ws$2,en$2,ce$1,Rn$2,Mn$2,Gn$1,Nn$2,lt$2=L$1(()=>{jo$1=class{log(s,l,c){}},Yo$1=class{log(s,l,c){console.log(`${this.color(s)} ${c?"\x1B[35m"+c+"\x1B[0m ":""}${l}`)}color(s){switch(s){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${s}`)}}},xs$2={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},Ld$2={none:new jo$1,console:new Yo$1},ws$2={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},en$2={"":ws$2},(s=>{function l(y,x){s("verbose",y,x)}s.verbose=l;function c(y,x){s("info",y,x)}s.info=c;function d(y,x){s("warning",y,x)}s.warning=d;function f(y,x){s("error",y,x)}s.error=f;function g(y,x){s("fatal",y,x)}s.fatal=g;function v(y){en$2={},b("",y||{})}s.reset=v;function b(y,x){if(y==="*")v(x);else{let C=en$2[y]||ws$2;en$2[y]={provider:x.provider||C.provider,minimalSeverity:x.minimalSeverity||C.minimalSeverity,logDateTime:x.logDateTime===void 0?C.logDateTime:x.logDateTime,logSourceLocation:x.logSourceLocation===void 0?C.logSourceLocation:x.logSourceLocation}}}s.set=b;function $(y){let x={};y.logLevel&&(x.minimalSeverity=y.logLevel),b("",x)}s.setWithEnv=$})(Xt$2||(Xt$2={})),ce$1=Xt$2,Rn$2=class{constructor(s,l,c,d,f,g){this.category=s,this.name=l,this.startTime=c,this.endCallback=d,this.timer=f,this.ctx=g}async end(){return this.endCallback(this)}async checkTimer(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)}},Mn$2=class{constructor(s,l,c,d){this.category=s,this.name=l,this.startTime=c,this.endTime=d}},Gn$1=class{constructor(s,l,c){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=s===void 0?1e4:s,this._flushBatchSize=l===void 0?10:l,this._flushIntervalInMilliseconds=c===void 0?5e3:c}static create(s){return s===void 0?new this:new this(s.maxNumberEvents,s.flushBatchSize,s.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=Nn$2(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(s,l,c,d){let f=this._started?this.begin(s,l,d):void 0,g=!1,v=c();if(v&&typeof v.then=="function")return g=!0,new Promise((b,$)=>{v.then(async y=>{f&&await f.end(),b(y)},async y=>{f&&await f.end(),$(y)})});if(!g&&f){let b=f.end();if(b&&typeof b.then=="function")return new Promise(($,y)=>{b.then(()=>{$(v)},x=>{y(x)})})}return v}begin(s,l,c){if(!this._started)throw new Error("profiler is not started yet");if(c===void 0){let d=Nn$2();return this.flush(d),new Rn$2(s,l,d,f=>this.endSync(f))}else{let d=c.beginTimer();return new Rn$2(s,l,0,async f=>this.end(f),d,c)}}async end(s){let l=await s.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn$2(s.category,s.name,s.startTime,l)),this.flush(l))}endSync(s){let l=Nn$2();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Mn$2(s.category,s.name,s.startTime,l)),this.flush(l))}logOneEvent(s){ce$1.verbose(`Profiler.${s.category}`,`${(s.endTime-s.startTime).toFixed(2)}ms on event '${s.name}' at ${s.endTime.toFixed(2)}`)}flush(s){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||s-this._flushTime>=this._flushIntervalInMilliseconds){for(let l=this._flushPointer;this._flushPointer<l+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=Nn$2()}}get started(){return this._started}},Nn$2=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function vs$2(s,l,c){for(let d of c){let f=d[0],g=d[1],v=d[2],b=d[3],$=d[4];if(s.opType===f){for(let y of l)if((y.domain===g||y.domain==="ai.onnx"&&g==="")&&Fd$2(y.version,v))return{opImpl:b,opInit:$}}}throw new TypeError(`cannot resolve operator '${s.opType}' with opsets: ${l.map(d=>`${d.domain||"ai.onnx"} v${d.version}`).join(", ")}`)}function Fd$2(s,l){if(l.endsWith("+")){let c=Number.parseInt(l.substring(0,l.length-1),10);return!isNaN(c)&&c<=s}else if(l.split("-").length===2){let c=l.split("-"),d=Number.parseInt(c[0],10),f=Number.parseInt(c[1],10);return!isNaN(d)&&!isNaN(f)&&d<=s&&s<=f}else return Number.parseInt(l,10)===s}var _s$2=L$1(()=>{}),Os$2=me(s=>{s.__esModule=!0;var l=function(){function c(d){if(!d)throw new TypeError("Invalid argument; `value` has no value.");this.value=c.EMPTY,d&&c.isGuid(d)&&(this.value=d)}return c.isGuid=function(d){var f=d.toString();return d&&(d instanceof c||c.validator.test(f))},c.create=function(){return new c([c.gen(2),c.gen(1),c.gen(1),c.gen(1),c.gen(3)].join("-"))},c.createEmpty=function(){return new c("emptyguid")},c.parse=function(d){return new c(d)},c.raw=function(){return[c.gen(2),c.gen(1),c.gen(1),c.gen(1),c.gen(3)].join("-")},c.gen=function(d){for(var f="",g=0;g<d;g++)f+=((1+Math.random())*65536|0).toString(16).substring(1);return f},c.prototype.equals=function(d){return c.isGuid(d)&&this.value===d.toString()},c.prototype.isEmpty=function(){return this.value===c.EMPTY},c.prototype.toString=function(){return this.value},c.prototype.toJSON=function(){return{value:this.value}},c.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),c.EMPTY="00000000-0000-0000-0000-000000000000",c}();s.Guid=l});function be$1(s,l,c){this.low=s|0,this.high=l|0,this.unsigned=!!c}function Xe$1(s){return(s&&s.__isLong__)===!0}function Is$1(s){var l=Math.clz32(s&-s);return s?31-l:l}function cr$2(s,l){var c,d,f;return l?(s>>>=0,(f=0<=s&&s<256)&&(d=As$1[s],d)?d:(c=le(s,0,!0),f&&(As$1[s]=c),c)):(s|=0,(f=-128<=s&&s<128)&&(d=Ss$2[s],d)?d:(c=le(s,s<0?-1:0,!1),f&&(Ss$2[s]=c),c))}function ct$1(s,l){if(isNaN(s))return l?zt$2:It$1;if(l){if(s<0)return zt$2;if(s>=Ls$2)return $s$2}else{if(s<=-Es$2)return nt$3;if(s+1>=Es$2)return Fs$2}return s<0?ct$1(-s,l).neg():le(s%Dr|0,s/Dr|0,l)}function le(s,l,c){return new be$1(s,l,c)}function Jo$1(s,l,c){if(s.length===0)throw Error("empty string");if(typeof l=="number"?(c=l,l=!1):l=!!l,s==="NaN"||s==="Infinity"||s==="+Infinity"||s==="-Infinity")return l?zt$2:It$1;if(c=c||10,c<2||36<c)throw RangeError("radix");var d;if((d=s.indexOf("-"))>0)throw Error("interior hyphen");if(d===0)return Jo$1(s.substring(1),l,c).neg();for(var f=ct$1(Un$2(c,8)),g=It$1,v=0;v<s.length;v+=8){var b=Math.min(8,s.length-v),$=parseInt(s.substring(v,v+b),c);if(b<8){var y=ct$1(Un$2(c,b));g=g.mul(y).add(ct$1($))}else g=g.mul(f),g=g.add(ct$1($))}return g.unsigned=l,g}function St$1(s,l){return typeof s=="number"?ct$1(s,l):typeof s=="string"?Jo$1(s,l):le(s.low,s.high,typeof l=="boolean"?l:s.unsigned)}var ft$1,Ss$2,As$1,Un$2,Ps$1,kd$2,Dr,Ls$2,Es$2,Ds$2,It$1,zt$2,Er$2,Cs$2,Ko$1,Fs$2,$s$2,nt$3,B,Vt$1,Zo$1=L$1(()=>{ft$1=null;try{ft$1=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}be$1.prototype.__isLong__,Object.defineProperty(be$1.prototype,"__isLong__",{value:!0}),be$1.isLong=Xe$1,Ss$2={},As$1={},be$1.fromInt=cr$2,be$1.fromNumber=ct$1,be$1.fromBits=le,Un$2=Math.pow,be$1.fromString=Jo$1,be$1.fromValue=St$1,Ps$1=65536,kd$2=1<<24,Dr=Ps$1*Ps$1,Ls$2=Dr*Dr,Es$2=Ls$2/2,Ds$2=cr$2(kd$2),It$1=cr$2(0),be$1.ZERO=It$1,zt$2=cr$2(0,!0),be$1.UZERO=zt$2,Er$2=cr$2(1),be$1.ONE=Er$2,Cs$2=cr$2(1,!0),be$1.UONE=Cs$2,Ko$1=cr$2(-1),be$1.NEG_ONE=Ko$1,Fs$2=le(-1,2147483647,!1),be$1.MAX_VALUE=Fs$2,$s$2=le(-1,-1,!0),be$1.MAX_UNSIGNED_VALUE=$s$2,nt$3=le(0,-2147483648,!1),be$1.MIN_VALUE=nt$3,B=be$1.prototype,B.toInt=function(){return this.unsigned?this.low>>>0:this.low},B.toNumber=function(){return this.unsigned?(this.high>>>0)*Dr+(this.low>>>0):this.high*Dr+(this.low>>>0)},B.toString=function(s){if(s=s||10,s<2||36<s)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(nt$3)){var l=ct$1(s),c=this.div(l),d=c.mul(l).sub(this);return c.toString(s)+d.toInt().toString(s)}else return"-"+this.neg().toString(s);for(var f=ct$1(Un$2(s,6),this.unsigned),g=this,v="";;){var b=g.div(f),$=g.sub(b.mul(f)).toInt()>>>0,y=$.toString(s);if(g=b,g.isZero())return y+v;for(;y.length<6;)y="0"+y;v=""+y+v}},B.getHighBits=function(){return this.high},B.getHighBitsUnsigned=function(){return this.high>>>0},B.getLowBits=function(){return this.low},B.getLowBitsUnsigned=function(){return this.low>>>0},B.getNumBitsAbs=function(){if(this.isNegative())return this.eq(nt$3)?64:this.neg().getNumBitsAbs();for(var s=this.high!=0?this.high:this.low,l=31;l>0&&!(s&1<<l);l--);return this.high!=0?l+33:l+1},B.isZero=function(){return this.high===0&&this.low===0},B.eqz=B.isZero,B.isNegative=function(){return!this.unsigned&&this.high<0},B.isPositive=function(){return this.unsigned||this.high>=0},B.isOdd=function(){return(this.low&1)===1},B.isEven=function(){return(this.low&1)===0},B.equals=function(s){return Xe$1(s)||(s=St$1(s)),this.unsigned!==s.unsigned&&this.high>>>31===1&&s.high>>>31===1?!1:this.high===s.high&&this.low===s.low},B.eq=B.equals,B.notEquals=function(s){return!this.eq(s)},B.neq=B.notEquals,B.ne=B.notEquals,B.lessThan=function(s){return this.comp(s)<0},B.lt=B.lessThan,B.lessThanOrEqual=function(s){return this.comp(s)<=0},B.lte=B.lessThanOrEqual,B.le=B.lessThanOrEqual,B.greaterThan=function(s){return this.comp(s)>0},B.gt=B.greaterThan,B.greaterThanOrEqual=function(s){return this.comp(s)>=0},B.gte=B.greaterThanOrEqual,B.ge=B.greaterThanOrEqual,B.compare=function(s){if(Xe$1(s)||(s=St$1(s)),this.eq(s))return 0;var l=this.isNegative(),c=s.isNegative();return l&&!c?-1:!l&&c?1:this.unsigned?s.high>>>0>this.high>>>0||s.high===this.high&&s.low>>>0>this.low>>>0?-1:1:this.sub(s).isNegative()?-1:1},B.comp=B.compare,B.negate=function(){return!this.unsigned&&this.eq(nt$3)?nt$3:this.not().add(Er$2)},B.neg=B.negate,B.add=function(s){Xe$1(s)||(s=St$1(s));var l=this.high>>>16,c=this.high&65535,d=this.low>>>16,f=this.low&65535,g=s.high>>>16,v=s.high&65535,b=s.low>>>16,$=s.low&65535,y=0,x=0,C=0,E=0;return E+=f+$,C+=E>>>16,E&=65535,C+=d+b,x+=C>>>16,C&=65535,x+=c+v,y+=x>>>16,x&=65535,y+=l+g,y&=65535,le(C<<16|E,y<<16|x,this.unsigned)},B.subtract=function(s){return Xe$1(s)||(s=St$1(s)),this.add(s.neg())},B.sub=B.subtract,B.multiply=function(s){if(this.isZero())return this;if(Xe$1(s)||(s=St$1(s)),ft$1){var l=ft$1.mul(this.low,this.high,s.low,s.high);return le(l,ft$1.get_high(),this.unsigned)}if(s.isZero())return this.unsigned?zt$2:It$1;if(this.eq(nt$3))return s.isOdd()?nt$3:It$1;if(s.eq(nt$3))return this.isOdd()?nt$3:It$1;if(this.isNegative())return s.isNegative()?this.neg().mul(s.neg()):this.neg().mul(s).neg();if(s.isNegative())return this.mul(s.neg()).neg();if(this.lt(Ds$2)&&s.lt(Ds$2))return ct$1(this.toNumber()*s.toNumber(),this.unsigned);var c=this.high>>>16,d=this.high&65535,f=this.low>>>16,g=this.low&65535,v=s.high>>>16,b=s.high&65535,$=s.low>>>16,y=s.low&65535,x=0,C=0,E=0,N=0;return N+=g*y,E+=N>>>16,N&=65535,E+=f*y,C+=E>>>16,E&=65535,E+=g*$,C+=E>>>16,E&=65535,C+=d*y,x+=C>>>16,C&=65535,C+=f*$,x+=C>>>16,C&=65535,C+=g*b,x+=C>>>16,C&=65535,x+=c*y+d*$+f*b+g*v,x&=65535,le(E<<16|N,x<<16|C,this.unsigned)},B.mul=B.multiply,B.divide=function(s){if(Xe$1(s)||(s=St$1(s)),s.isZero())throw Error("division by zero");if(ft$1){if(!this.unsigned&&this.high===-2147483648&&s.low===-1&&s.high===-1)return this;var l=(this.unsigned?ft$1.div_u:ft$1.div_s)(this.low,this.high,s.low,s.high);return le(l,ft$1.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?zt$2:It$1;var c,d,f;if(this.unsigned){if(s.unsigned||(s=s.toUnsigned()),s.gt(this))return zt$2;if(s.gt(this.shru(1)))return Cs$2;f=zt$2}else{if(this.eq(nt$3)){if(s.eq(Er$2)||s.eq(Ko$1))return nt$3;if(s.eq(nt$3))return Er$2;var g=this.shr(1);return c=g.div(s).shl(1),c.eq(It$1)?s.isNegative()?Er$2:Ko$1:(d=this.sub(s.mul(c)),f=c.add(d.div(s)),f)}else if(s.eq(nt$3))return this.unsigned?zt$2:It$1;if(this.isNegative())return s.isNegative()?this.neg().div(s.neg()):this.neg().div(s).neg();if(s.isNegative())return this.div(s.neg()).neg();f=It$1}for(d=this;d.gte(s);){c=Math.max(1,Math.floor(d.toNumber()/s.toNumber()));for(var v=Math.ceil(Math.log(c)/Math.LN2),b=v<=48?1:Un$2(2,v-48),$=ct$1(c),y=$.mul(s);y.isNegative()||y.gt(d);)c-=b,$=ct$1(c,this.unsigned),y=$.mul(s);$.isZero()&&($=Er$2),f=f.add($),d=d.sub(y)}return f},B.div=B.divide,B.modulo=function(s){if(Xe$1(s)||(s=St$1(s)),ft$1){var l=(this.unsigned?ft$1.rem_u:ft$1.rem_s)(this.low,this.high,s.low,s.high);return le(l,ft$1.get_high(),this.unsigned)}return this.sub(this.div(s).mul(s))},B.mod=B.modulo,B.rem=B.modulo,B.not=function(){return le(~this.low,~this.high,this.unsigned)},B.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},B.clz=B.countLeadingZeros,B.countTrailingZeros=function(){return this.low?Is$1(this.low):Is$1(this.high)+32},B.ctz=B.countTrailingZeros,B.and=function(s){return Xe$1(s)||(s=St$1(s)),le(this.low&s.low,this.high&s.high,this.unsigned)},B.or=function(s){return Xe$1(s)||(s=St$1(s)),le(this.low|s.low,this.high|s.high,this.unsigned)},B.xor=function(s){return Xe$1(s)||(s=St$1(s)),le(this.low^s.low,this.high^s.high,this.unsigned)},B.shiftLeft=function(s){return Xe$1(s)&&(s=s.toInt()),(s&=63)===0?this:s<32?le(this.low<<s,this.high<<s|this.low>>>32-s,this.unsigned):le(0,this.low<<s-32,this.unsigned)},B.shl=B.shiftLeft,B.shiftRight=function(s){return Xe$1(s)&&(s=s.toInt()),(s&=63)===0?this:s<32?le(this.low>>>s|this.high<<32-s,this.high>>s,this.unsigned):le(this.high>>s-32,this.high>=0?0:-1,this.unsigned)},B.shr=B.shiftRight,B.shiftRightUnsigned=function(s){return Xe$1(s)&&(s=s.toInt()),(s&=63)===0?this:s<32?le(this.low>>>s|this.high<<32-s,this.high>>>s,this.unsigned):s===32?le(this.high,0,this.unsigned):le(this.high>>>s-32,0,this.unsigned)},B.shru=B.shiftRightUnsigned,B.shr_u=B.shiftRightUnsigned,B.rotateLeft=function(s){var l;return Xe$1(s)&&(s=s.toInt()),(s&=63)===0?this:s===32?le(this.high,this.low,this.unsigned):s<32?(l=32-s,le(this.low<<s|this.high>>>l,this.high<<s|this.low>>>l,this.unsigned)):(s-=32,l=32-s,le(this.high<<s|this.low>>>l,this.low<<s|this.high>>>l,this.unsigned))},B.rotl=B.rotateLeft,B.rotateRight=function(s){var l;return Xe$1(s)&&(s=s.toInt()),(s&=63)===0?this:s===32?le(this.high,this.low,this.unsigned):s<32?(l=32-s,le(this.high<<l|this.low>>>s,this.low<<l|this.high>>>s,this.unsigned)):(s-=32,l=32-s,le(this.low<<l|this.high>>>s,this.high<<l|this.low>>>s,this.unsigned))},B.rotr=B.rotateRight,B.toSigned=function(){return this.unsigned?le(this.low,this.high,!1):this},B.toUnsigned=function(){return this.unsigned?this:le(this.low,this.high,!0)},B.toBytes=function(s){return s?this.toBytesLE():this.toBytesBE()},B.toBytesLE=function(){var s=this.high,l=this.low;return[l&255,l>>>8&255,l>>>16&255,l>>>24,s&255,s>>>8&255,s>>>16&255,s>>>24]},B.toBytesBE=function(){var s=this.high,l=this.low;return[s>>>24,s>>>16&255,s>>>8&255,s&255,l>>>24,l>>>16&255,l>>>8&255,l&255]},be$1.fromBytes=function(s,l,c){return c?be$1.fromBytesLE(s,l):be$1.fromBytesBE(s,l)},be$1.fromBytesLE=function(s,l){return new be$1(s[0]|s[1]<<8|s[2]<<16|s[3]<<24,s[4]|s[5]<<8|s[6]<<16|s[7]<<24,l)},be$1.fromBytesBE=function(s,l){return new be$1(s[4]<<24|s[5]<<16|s[6]<<8|s[7],s[0]<<24|s[1]<<16|s[2]<<8|s[3],l)},Vt$1=be$1}),_,zn$2=L$1(()=>{_={},_.Offset,_.Table,_.SIZEOF_SHORT=2,_.SIZEOF_INT=4,_.FILE_IDENTIFIER_LENGTH=4,_.SIZE_PREFIX_LENGTH=4,_.Encoding={UTF8_BYTES:1,UTF16_STRING:2},_.int32=new Int32Array(2),_.float32=new Float32Array(_.int32.buffer),_.float64=new Float64Array(_.int32.buffer),_.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,_.Long=function(s,l){this.low=s|0,this.high=l|0},_.Long.create=function(s,l){return s==0&&l==0?_.Long.ZERO:new _.Long(s,l)},_.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296},_.Long.prototype.equals=function(s){return this.low==s.low&&this.high==s.high},_.Long.ZERO=new _.Long(0,0),_.Builder=function(s){if(s)var l=s;else var l=1024;this.bb=_.ByteBuffer.allocate(l),this.space=l,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},_.Builder.prototype.forceDefaults=function(s){this.force_defaults=s},_.Builder.prototype.dataBuffer=function(){return this.bb},_.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},_.Builder.prototype.prep=function(s,l){s>this.minalign&&(this.minalign=s);for(var c=~(this.bb.capacity()-this.space+l)+1&s-1;this.space<c+s+l;){var d=this.bb.capacity();this.bb=_.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-d}this.pad(c)},_.Builder.prototype.pad=function(s){for(var l=0;l<s;l++)this.bb.writeInt8(--this.space,0)},_.Builder.prototype.writeInt8=function(s){this.bb.writeInt8(this.space-=1,s)},_.Builder.prototype.writeInt16=function(s){this.bb.writeInt16(this.space-=2,s)},_.Builder.prototype.writeInt32=function(s){this.bb.writeInt32(this.space-=4,s)},_.Builder.prototype.writeInt64=function(s){this.bb.writeInt64(this.space-=8,s)},_.Builder.prototype.writeFloat32=function(s){this.bb.writeFloat32(this.space-=4,s)},_.Builder.prototype.writeFloat64=function(s){this.bb.writeFloat64(this.space-=8,s)},_.Builder.prototype.addInt8=function(s){this.prep(1,0),this.writeInt8(s)},_.Builder.prototype.addInt16=function(s){this.prep(2,0),this.writeInt16(s)},_.Builder.prototype.addInt32=function(s){this.prep(4,0),this.writeInt32(s)},_.Builder.prototype.addInt64=function(s){this.prep(8,0),this.writeInt64(s)},_.Builder.prototype.addFloat32=function(s){this.prep(4,0),this.writeFloat32(s)},_.Builder.prototype.addFloat64=function(s){this.prep(8,0),this.writeFloat64(s)},_.Builder.prototype.addFieldInt8=function(s,l,c){(this.force_defaults||l!=c)&&(this.addInt8(l),this.slot(s))},_.Builder.prototype.addFieldInt16=function(s,l,c){(this.force_defaults||l!=c)&&(this.addInt16(l),this.slot(s))},_.Builder.prototype.addFieldInt32=function(s,l,c){(this.force_defaults||l!=c)&&(this.addInt32(l),this.slot(s))},_.Builder.prototype.addFieldInt64=function(s,l,c){(this.force_defaults||!l.equals(c))&&(this.addInt64(l),this.slot(s))},_.Builder.prototype.addFieldFloat32=function(s,l,c){(this.force_defaults||l!=c)&&(this.addFloat32(l),this.slot(s))},_.Builder.prototype.addFieldFloat64=function(s,l,c){(this.force_defaults||l!=c)&&(this.addFloat64(l),this.slot(s))},_.Builder.prototype.addFieldOffset=function(s,l,c){(this.force_defaults||l!=c)&&(this.addOffset(l),this.slot(s))},_.Builder.prototype.addFieldStruct=function(s,l,c){l!=c&&(this.nested(l),this.slot(s))},_.Builder.prototype.nested=function(s){if(s!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},_.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},_.Builder.prototype.slot=function(s){this.vtable[s]=this.offset()},_.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},_.Builder.growByteBuffer=function(s){var l=s.capacity();if(l&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var c=l<<1,d=_.ByteBuffer.allocate(c);return d.setPosition(c-l),d.bytes().set(s.bytes(),c-l),d},_.Builder.prototype.addOffset=function(s){this.prep(_.SIZEOF_INT,0),this.writeInt32(this.offset()-s+_.SIZEOF_INT)},_.Builder.prototype.startObject=function(s){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=s;for(var l=0;l<s;l++)this.vtable[l]=0;this.isNested=!0,this.object_start=this.offset()},_.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var s=this.offset(),l=this.vtable_in_use-1;l>=0&&this.vtable[l]==0;l--);for(var c=l+1;l>=0;l--)this.addInt16(this.vtable[l]!=0?s-this.vtable[l]:0);var d=2;this.addInt16(s-this.object_start);var f=(c+d)*_.SIZEOF_SHORT;this.addInt16(f);var g=0,v=this.space;e:for(l=0;l<this.vtables.length;l++){var b=this.bb.capacity()-this.vtables[l];if(f==this.bb.readInt16(b)){for(var $=_.SIZEOF_SHORT;$<f;$+=_.SIZEOF_SHORT)if(this.bb.readInt16(v+$)!=this.bb.readInt16(b+$))continue e;g=this.vtables[l];break}}return g?(this.space=this.bb.capacity()-s,this.bb.writeInt32(this.space,g-s)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-s,this.offset()-s)),this.isNested=!1,s},_.Builder.prototype.finish=function(s,l,c){var d=c?_.SIZE_PREFIX_LENGTH:0;if(l){var f=l;if(this.prep(this.minalign,_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH+d),f.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var g=_.FILE_IDENTIFIER_LENGTH-1;g>=0;g--)this.writeInt8(f.charCodeAt(g))}this.prep(this.minalign,_.SIZEOF_INT+d),this.addOffset(s),d&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},_.Builder.prototype.finishSizePrefixed=function(s,l){this.finish(s,l,!0)},_.Builder.prototype.requiredField=function(s,l){var c=this.bb.capacity()-s,d=c-this.bb.readInt32(c),f=this.bb.readInt16(d+l)!=0;if(!f)throw new Error("FlatBuffers: field "+l+" must be set")},_.Builder.prototype.startVector=function(s,l,c){this.notNested(),this.vector_num_elems=l,this.prep(_.SIZEOF_INT,s*l),this.prep(c,s*l)},_.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},_.Builder.prototype.createString=function(s){if(s instanceof Uint8Array)var l=s;else for(var l=[],c=0;c<s.length;){var d,f=s.charCodeAt(c++);if(f<55296||f>=56320)d=f;else{var g=s.charCodeAt(c++);d=(f<<10)+g+-56613888}d<128?l.push(d):(d<2048?l.push(d>>6&31|192):(d<65536?l.push(d>>12&15|224):l.push(d>>18&7|240,d>>12&63|128),l.push(d>>6&63|128)),l.push(d&63|128))}this.addInt8(0),this.startVector(1,l.length,1),this.bb.setPosition(this.space-=l.length);for(var c=0,v=this.space,b=this.bb.bytes();c<l.length;c++)b[v++]=l[c];return this.endVector()},_.Builder.prototype.createLong=function(s,l){return _.Long.create(s,l)},_.ByteBuffer=function(s){this.bytes_=s,this.position_=0},_.ByteBuffer.allocate=function(s){return new _.ByteBuffer(new Uint8Array(s))},_.ByteBuffer.prototype.clear=function(){this.position_=0},_.ByteBuffer.prototype.bytes=function(){return this.bytes_},_.ByteBuffer.prototype.position=function(){return this.position_},_.ByteBuffer.prototype.setPosition=function(s){this.position_=s},_.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},_.ByteBuffer.prototype.readInt8=function(s){return this.readUint8(s)<<24>>24},_.ByteBuffer.prototype.readUint8=function(s){return this.bytes_[s]},_.ByteBuffer.prototype.readInt16=function(s){return this.readUint16(s)<<16>>16},_.ByteBuffer.prototype.readUint16=function(s){return this.bytes_[s]|this.bytes_[s+1]<<8},_.ByteBuffer.prototype.readInt32=function(s){return this.bytes_[s]|this.bytes_[s+1]<<8|this.bytes_[s+2]<<16|this.bytes_[s+3]<<24},_.ByteBuffer.prototype.readUint32=function(s){return this.readInt32(s)>>>0},_.ByteBuffer.prototype.readInt64=function(s){return new _.Long(this.readInt32(s),this.readInt32(s+4))},_.ByteBuffer.prototype.readUint64=function(s){return new _.Long(this.readUint32(s),this.readUint32(s+4))},_.ByteBuffer.prototype.readFloat32=function(s){return _.int32[0]=this.readInt32(s),_.float32[0]},_.ByteBuffer.prototype.readFloat64=function(s){return _.int32[_.isLittleEndian?0:1]=this.readInt32(s),_.int32[_.isLittleEndian?1:0]=this.readInt32(s+4),_.float64[0]},_.ByteBuffer.prototype.writeInt8=function(s,l){this.bytes_[s]=l},_.ByteBuffer.prototype.writeUint8=function(s,l){this.bytes_[s]=l},_.ByteBuffer.prototype.writeInt16=function(s,l){this.bytes_[s]=l,this.bytes_[s+1]=l>>8},_.ByteBuffer.prototype.writeUint16=function(s,l){this.bytes_[s]=l,this.bytes_[s+1]=l>>8},_.ByteBuffer.prototype.writeInt32=function(s,l){this.bytes_[s]=l,this.bytes_[s+1]=l>>8,this.bytes_[s+2]=l>>16,this.bytes_[s+3]=l>>24},_.ByteBuffer.prototype.writeUint32=function(s,l){this.bytes_[s]=l,this.bytes_[s+1]=l>>8,this.bytes_[s+2]=l>>16,this.bytes_[s+3]=l>>24},_.ByteBuffer.prototype.writeInt64=function(s,l){this.writeInt32(s,l.low),this.writeInt32(s+4,l.high)},_.ByteBuffer.prototype.writeUint64=function(s,l){this.writeUint32(s,l.low),this.writeUint32(s+4,l.high)},_.ByteBuffer.prototype.writeFloat32=function(s,l){_.float32[0]=l,this.writeInt32(s,_.int32[0])},_.ByteBuffer.prototype.writeFloat64=function(s,l){_.float64[0]=l,this.writeInt32(s,_.int32[_.isLittleEndian?0:1]),this.writeInt32(s+4,_.int32[_.isLittleEndian?1:0])},_.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+_.SIZEOF_INT+_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var s="",l=0;l<_.FILE_IDENTIFIER_LENGTH;l++)s+=String.fromCharCode(this.readInt8(this.position_+_.SIZEOF_INT+l));return s},_.ByteBuffer.prototype.__offset=function(s,l){var c=s-this.readInt32(s);return l<this.readInt16(c)?this.readInt16(c+l):0},_.ByteBuffer.prototype.__union=function(s,l){return s.bb_pos=l+this.readInt32(l),s.bb=this,s},_.ByteBuffer.prototype.__string=function(s,l){s+=this.readInt32(s);var c=this.readInt32(s),d="",f=0;if(s+=_.SIZEOF_INT,l===_.Encoding.UTF8_BYTES)return this.bytes_.subarray(s,s+c);for(;f<c;){var g,v=this.readUint8(s+f++);if(v<192)g=v;else{var b=this.readUint8(s+f++);if(v<224)g=(v&31)<<6|b&63;else{var $=this.readUint8(s+f++);if(v<240)g=(v&15)<<12|(b&63)<<6|$&63;else{var y=this.readUint8(s+f++);g=(v&7)<<18|(b&63)<<12|($&63)<<6|y&63}}}g<65536?d+=String.fromCharCode(g):(g-=65536,d+=String.fromCharCode((g>>10)+55296,(g&1023)+56320))}return d},_.ByteBuffer.prototype.__indirect=function(s){return s+this.readInt32(s)},_.ByteBuffer.prototype.__vector=function(s){return s+this.readInt32(s)+_.SIZEOF_INT},_.ByteBuffer.prototype.__vector_len=function(s){return this.readInt32(s+this.readInt32(s))},_.ByteBuffer.prototype.__has_identifier=function(s){if(s.length!=_.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+_.FILE_IDENTIFIER_LENGTH);for(var l=0;l<_.FILE_IDENTIFIER_LENGTH;l++)if(s.charCodeAt(l)!=this.readInt8(this.position_+_.SIZEOF_INT+l))return!1;return!0},_.ByteBuffer.prototype.createLong=function(s,l){return _.Long.create(s,l)}}),V$1,tn$2=L$1(()=>{zn$2(),(s=>{(l=>{(c=>{(d=>(d[d.UNDEFINED=0]="UNDEFINED",d[d.FLOAT=1]="FLOAT",d[d.INT=2]="INT",d[d.STRING=3]="STRING",d[d.TENSOR=4]="TENSOR",d[d.GRAPH=5]="GRAPH",d[d.FLOATS=6]="FLOATS",d[d.INTS=7]="INTS",d[d.STRINGS=8]="STRINGS",d[d.TENSORS=9]="TENSORS",d[d.GRAPHS=10]="GRAPHS",d[d.SPARSE_TENSOR=11]="SPARSE_TENSOR",d[d.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(c.AttributeType||(c.AttributeType={}))})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{(d=>(d[d.UNKNOWN=0]="UNKNOWN",d[d.VALUE=1]="VALUE",d[d.PARAM=2]="PARAM"))(c.DimensionValueType||(c.DimensionValueType={}))})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{(d=>(d[d.UNDEFINED=0]="UNDEFINED",d[d.FLOAT=1]="FLOAT",d[d.UINT8=2]="UINT8",d[d.INT8=3]="INT8",d[d.UINT16=4]="UINT16",d[d.INT16=5]="INT16",d[d.INT32=6]="INT32",d[d.INT64=7]="INT64",d[d.STRING=8]="STRING",d[d.BOOL=9]="BOOL",d[d.FLOAT16=10]="FLOAT16",d[d.DOUBLE=11]="DOUBLE",d[d.UINT32=12]="UINT32",d[d.UINT64=13]="UINT64",d[d.COMPLEX64=14]="COMPLEX64",d[d.COMPLEX128=15]="COMPLEX128",d[d.BFLOAT16=16]="BFLOAT16",d[d.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",d[d.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",d[d.FLOAT8E5M2=19]="FLOAT8E5M2",d[d.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(c.TensorDataType||(c.TensorDataType={}))})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{(d=>(d[d.Primitive=0]="Primitive",d[d.Fused=1]="Fused"))(c.NodeType||(c.NodeType={}))})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{(d=>(d[d.NONE=0]="NONE",d[d.tensor_type=1]="tensor_type",d[d.sequence_type=2]="sequence_type",d[d.map_type=3]="map_type"))(c.TypeInfoValue||(c.TypeInfoValue={}))})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsShape(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsShape(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}dim(g,v){let b=this.bb.__offset(this.bb_pos,4);return b?(v||new s.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+b)+g*4),this.bb):null}dimLength(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.__vector_len(this.bb_pos+g):0}static startShape(g){g.startObject(1)}static addDim(g,v){g.addFieldOffset(0,v,0)}static createDimVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startDimVector(g,v){g.startVector(4,v,4)}static endShape(g){return g.endObject()}static createShape(g,v){return d.startShape(g),d.addDim(g,v),d.endShape(g)}}c.Shape=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsDimension(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsDimension(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}value(g){let v=this.bb.__offset(this.bb_pos,4);return v?(g||new s.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}denotation(g){let v=this.bb.__offset(this.bb_pos,6);return v?this.bb.__string(this.bb_pos+v,g):null}static startDimension(g){g.startObject(2)}static addValue(g,v){g.addFieldOffset(0,v,0)}static addDenotation(g,v){g.addFieldOffset(1,v,0)}static endDimension(g){return g.endObject()}static createDimension(g,v,b){return d.startDimension(g),d.addValue(g,v),d.addDenotation(g,b),d.endDimension(g)}}c.Dimension=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsDimensionValue(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsDimensionValue(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}dimType(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readInt8(this.bb_pos+g):0}dimValue(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}dimParam(g){let v=this.bb.__offset(this.bb_pos,8);return v?this.bb.__string(this.bb_pos+v,g):null}static startDimensionValue(g){g.startObject(3)}static addDimType(g,v){g.addFieldInt8(0,v,0)}static addDimValue(g,v){g.addFieldInt64(1,v,g.createLong(0,0))}static addDimParam(g,v){g.addFieldOffset(2,v,0)}static endDimensionValue(g){return g.endObject()}static createDimensionValue(g,v,b,$){return d.startDimensionValue(g),d.addDimType(g,v),d.addDimValue(g,b),d.addDimParam(g,$),d.endDimensionValue(g)}}c.DimensionValue=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsTensorTypeAndShape(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsTensorTypeAndShape(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}elemType(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readInt32(this.bb_pos+g):0}shape(g){let v=this.bb.__offset(this.bb_pos,6);return v?(g||new s.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}static startTensorTypeAndShape(g){g.startObject(2)}static addElemType(g,v){g.addFieldInt32(0,v,0)}static addShape(g,v){g.addFieldOffset(1,v,0)}static endTensorTypeAndShape(g){return g.endObject()}static createTensorTypeAndShape(g,v,b){return d.startTensorTypeAndShape(g),d.addElemType(g,v),d.addShape(g,b),d.endTensorTypeAndShape(g)}}c.TensorTypeAndShape=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsMapType(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsMapType(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}keyType(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readInt32(this.bb_pos+g):0}valueType(g){let v=this.bb.__offset(this.bb_pos,6);return v?(g||new s.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}static startMapType(g){g.startObject(2)}static addKeyType(g,v){g.addFieldInt32(0,v,0)}static addValueType(g,v){g.addFieldOffset(1,v,0)}static endMapType(g){return g.endObject()}static createMapType(g,v,b){return d.startMapType(g),d.addKeyType(g,v),d.addValueType(g,b),d.endMapType(g)}}c.MapType=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsSequenceType(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsSequenceType(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}elemType(g){let v=this.bb.__offset(this.bb_pos,4);return v?(g||new s.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}static startSequenceType(g){g.startObject(1)}static addElemType(g,v){g.addFieldOffset(0,v,0)}static endSequenceType(g){return g.endObject()}static createSequenceType(g,v){return d.startSequenceType(g),d.addElemType(g,v),d.endSequenceType(g)}}c.SequenceType=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(g,v,b,$){return g.prep(4,12),g.writeInt32($),g.writeInt32(b),g.writeInt32(v),g.offset()}}c.EdgeEnd=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsNodeEdge(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsNodeEdge(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}nodeIndex(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readUint32(this.bb_pos+g):0}inputEdges(g,v){let b=this.bb.__offset(this.bb_pos,6);return b?(v||new s.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+b)+g*12,this.bb):null}inputEdgesLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}outputEdges(g,v){let b=this.bb.__offset(this.bb_pos,8);return b?(v||new s.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+b)+g*12,this.bb):null}outputEdgesLength(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.__vector_len(this.bb_pos+g):0}static startNodeEdge(g){g.startObject(3)}static addNodeIndex(g,v){g.addFieldInt32(0,v,0)}static addInputEdges(g,v){g.addFieldOffset(1,v,0)}static startInputEdgesVector(g,v){g.startVector(12,v,4)}static addOutputEdges(g,v){g.addFieldOffset(2,v,0)}static startOutputEdgesVector(g,v){g.startVector(12,v,4)}static endNodeEdge(g){return g.endObject()}static createNodeEdge(g,v,b,$){return d.startNodeEdge(g),d.addNodeIndex(g,v),d.addInputEdges(g,b),d.addOutputEdges(g,$),d.endNodeEdge(g)}}c.NodeEdge=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsNode(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsNode(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}name(g){let v=this.bb.__offset(this.bb_pos,4);return v?this.bb.__string(this.bb_pos+v,g):null}docString(g){let v=this.bb.__offset(this.bb_pos,6);return v?this.bb.__string(this.bb_pos+v,g):null}domain(g){let v=this.bb.__offset(this.bb_pos,8);return v?this.bb.__string(this.bb_pos+v,g):null}sinceVersion(){let g=this.bb.__offset(this.bb_pos,10);return g?this.bb.readInt32(this.bb_pos+g):0}index(){let g=this.bb.__offset(this.bb_pos,12);return g?this.bb.readUint32(this.bb_pos+g):0}opType(g){let v=this.bb.__offset(this.bb_pos,14);return v?this.bb.__string(this.bb_pos+v,g):null}type(){let g=this.bb.__offset(this.bb_pos,16);return g?this.bb.readInt32(this.bb_pos+g):0}executionProviderType(g){let v=this.bb.__offset(this.bb_pos,18);return v?this.bb.__string(this.bb_pos+v,g):null}inputs(g,v){let b=this.bb.__offset(this.bb_pos,20);return b?this.bb.__string(this.bb.__vector(this.bb_pos+b)+g*4,v):null}inputsLength(){let g=this.bb.__offset(this.bb_pos,20);return g?this.bb.__vector_len(this.bb_pos+g):0}outputs(g,v){let b=this.bb.__offset(this.bb_pos,22);return b?this.bb.__string(this.bb.__vector(this.bb_pos+b)+g*4,v):null}outputsLength(){let g=this.bb.__offset(this.bb_pos,22);return g?this.bb.__vector_len(this.bb_pos+g):0}attributes(g,v){let b=this.bb.__offset(this.bb_pos,24);return b?(v||new s.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+b)+g*4),this.bb):null}attributesLength(){let g=this.bb.__offset(this.bb_pos,24);return g?this.bb.__vector_len(this.bb_pos+g):0}inputArgCounts(g){let v=this.bb.__offset(this.bb_pos,26);return v?this.bb.readInt32(this.bb.__vector(this.bb_pos+v)+g*4):0}inputArgCountsLength(){let g=this.bb.__offset(this.bb_pos,26);return g?this.bb.__vector_len(this.bb_pos+g):0}inputArgCountsArray(){let g=this.bb.__offset(this.bb_pos,26);return g?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+g),this.bb.__vector_len(this.bb_pos+g)):null}implicitInputs(g,v){let b=this.bb.__offset(this.bb_pos,28);return b?this.bb.__string(this.bb.__vector(this.bb_pos+b)+g*4,v):null}implicitInputsLength(){let g=this.bb.__offset(this.bb_pos,28);return g?this.bb.__vector_len(this.bb_pos+g):0}static startNode(g){g.startObject(13)}static addName(g,v){g.addFieldOffset(0,v,0)}static addDocString(g,v){g.addFieldOffset(1,v,0)}static addDomain(g,v){g.addFieldOffset(2,v,0)}static addSinceVersion(g,v){g.addFieldInt32(3,v,0)}static addIndex(g,v){g.addFieldInt32(4,v,0)}static addOpType(g,v){g.addFieldOffset(5,v,0)}static addType(g,v){g.addFieldInt32(6,v,0)}static addExecutionProviderType(g,v){g.addFieldOffset(7,v,0)}static addInputs(g,v){g.addFieldOffset(8,v,0)}static createInputsVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startInputsVector(g,v){g.startVector(4,v,4)}static addOutputs(g,v){g.addFieldOffset(9,v,0)}static createOutputsVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startOutputsVector(g,v){g.startVector(4,v,4)}static addAttributes(g,v){g.addFieldOffset(10,v,0)}static createAttributesVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startAttributesVector(g,v){g.startVector(4,v,4)}static addInputArgCounts(g,v){g.addFieldOffset(11,v,0)}static createInputArgCountsVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addInt32(v[b]);return g.endVector()}static startInputArgCountsVector(g,v){g.startVector(4,v,4)}static addImplicitInputs(g,v){g.addFieldOffset(12,v,0)}static createImplicitInputsVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startImplicitInputsVector(g,v){g.startVector(4,v,4)}static endNode(g){return g.endObject()}static createNode(g,v,b,$,y,x,C,E,N,W,q,Y,re,se){return d.startNode(g),d.addName(g,v),d.addDocString(g,b),d.addDomain(g,$),d.addSinceVersion(g,y),d.addIndex(g,x),d.addOpType(g,C),d.addType(g,E),d.addExecutionProviderType(g,N),d.addInputs(g,W),d.addOutputs(g,q),d.addAttributes(g,Y),d.addInputArgCounts(g,re),d.addImplicitInputs(g,se),d.endNode(g)}}c.Node=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsValueInfo(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsValueInfo(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}name(g){let v=this.bb.__offset(this.bb_pos,4);return v?this.bb.__string(this.bb_pos+v,g):null}docString(g){let v=this.bb.__offset(this.bb_pos,6);return v?this.bb.__string(this.bb_pos+v,g):null}type(g){let v=this.bb.__offset(this.bb_pos,8);return v?(g||new s.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}static startValueInfo(g){g.startObject(3)}static addName(g,v){g.addFieldOffset(0,v,0)}static addDocString(g,v){g.addFieldOffset(1,v,0)}static addType(g,v){g.addFieldOffset(2,v,0)}static endValueInfo(g){return g.endObject()}static createValueInfo(g,v,b,$){return d.startValueInfo(g),d.addName(g,v),d.addDocString(g,b),d.addType(g,$),d.endValueInfo(g)}}c.ValueInfo=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsTypeInfo(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsTypeInfo(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}denotation(g){let v=this.bb.__offset(this.bb_pos,4);return v?this.bb.__string(this.bb_pos+v,g):null}valueType(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.readUint8(this.bb_pos+g):0}value(g){let v=this.bb.__offset(this.bb_pos,8);return v?this.bb.__union(g,this.bb_pos+v):null}static startTypeInfo(g){g.startObject(3)}static addDenotation(g,v){g.addFieldOffset(0,v,0)}static addValueType(g,v){g.addFieldInt8(1,v,0)}static addValue(g,v){g.addFieldOffset(2,v,0)}static endTypeInfo(g){return g.endObject()}static createTypeInfo(g,v,b,$){return d.startTypeInfo(g),d.addDenotation(g,v),d.addValueType(g,b),d.addValue(g,$),d.endTypeInfo(g)}}c.TypeInfo=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsOperatorSetId(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsOperatorSetId(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}domain(g){let v=this.bb.__offset(this.bb_pos,4);return v?this.bb.__string(this.bb_pos+v,g):null}version(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}static startOperatorSetId(g){g.startObject(2)}static addDomain(g,v){g.addFieldOffset(0,v,0)}static addVersion(g,v){g.addFieldInt64(1,v,g.createLong(0,0))}static endOperatorSetId(g){return g.endObject()}static createOperatorSetId(g,v,b){return d.startOperatorSetId(g),d.addDomain(g,v),d.addVersion(g,b),d.endOperatorSetId(g)}}c.OperatorSetId=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsTensor(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsTensor(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}name(g){let v=this.bb.__offset(this.bb_pos,4);return v?this.bb.__string(this.bb_pos+v,g):null}docString(g){let v=this.bb.__offset(this.bb_pos,6);return v?this.bb.__string(this.bb_pos+v,g):null}dims(g){let v=this.bb.__offset(this.bb_pos,8);return v?this.bb.readInt64(this.bb.__vector(this.bb_pos+v)+g*8):this.bb.createLong(0,0)}dimsLength(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.__vector_len(this.bb_pos+g):0}dataType(){let g=this.bb.__offset(this.bb_pos,10);return g?this.bb.readInt32(this.bb_pos+g):0}rawData(g){let v=this.bb.__offset(this.bb_pos,12);return v?this.bb.readUint8(this.bb.__vector(this.bb_pos+v)+g):0}rawDataLength(){let g=this.bb.__offset(this.bb_pos,12);return g?this.bb.__vector_len(this.bb_pos+g):0}rawDataArray(){let g=this.bb.__offset(this.bb_pos,12);return g?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+g),this.bb.__vector_len(this.bb_pos+g)):null}stringData(g,v){let b=this.bb.__offset(this.bb_pos,14);return b?this.bb.__string(this.bb.__vector(this.bb_pos+b)+g*4,v):null}stringDataLength(){let g=this.bb.__offset(this.bb_pos,14);return g?this.bb.__vector_len(this.bb_pos+g):0}static startTensor(g){g.startObject(6)}static addName(g,v){g.addFieldOffset(0,v,0)}static addDocString(g,v){g.addFieldOffset(1,v,0)}static addDims(g,v){g.addFieldOffset(2,v,0)}static createDimsVector(g,v){g.startVector(8,v.length,8);for(let b=v.length-1;b>=0;b--)g.addInt64(v[b]);return g.endVector()}static startDimsVector(g,v){g.startVector(8,v,8)}static addDataType(g,v){g.addFieldInt32(3,v,0)}static addRawData(g,v){g.addFieldOffset(4,v,0)}static createRawDataVector(g,v){g.startVector(1,v.length,1);for(let b=v.length-1;b>=0;b--)g.addInt8(v[b]);return g.endVector()}static startRawDataVector(g,v){g.startVector(1,v,1)}static addStringData(g,v){g.addFieldOffset(5,v,0)}static createStringDataVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startStringDataVector(g,v){g.startVector(4,v,4)}static endTensor(g){return g.endObject()}static createTensor(g,v,b,$,y,x,C){return d.startTensor(g),d.addName(g,v),d.addDocString(g,b),d.addDims(g,$),d.addDataType(g,y),d.addRawData(g,x),d.addStringData(g,C),d.endTensor(g)}}c.Tensor=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsSparseTensor(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsSparseTensor(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}values(g){let v=this.bb.__offset(this.bb_pos,4);return v?(g||new s.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}indices(g){let v=this.bb.__offset(this.bb_pos,6);return v?(g||new s.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}dims(g){let v=this.bb.__offset(this.bb_pos,8);return v?this.bb.readInt64(this.bb.__vector(this.bb_pos+v)+g*8):this.bb.createLong(0,0)}dimsLength(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.__vector_len(this.bb_pos+g):0}static startSparseTensor(g){g.startObject(3)}static addValues(g,v){g.addFieldOffset(0,v,0)}static addIndices(g,v){g.addFieldOffset(1,v,0)}static addDims(g,v){g.addFieldOffset(2,v,0)}static createDimsVector(g,v){g.startVector(8,v.length,8);for(let b=v.length-1;b>=0;b--)g.addInt64(v[b]);return g.endVector()}static startDimsVector(g,v){g.startVector(8,v,8)}static endSparseTensor(g){return g.endObject()}static createSparseTensor(g,v,b,$){return d.startSparseTensor(g),d.addValues(g,v),d.addIndices(g,b),d.addDims(g,$),d.endSparseTensor(g)}}c.SparseTensor=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsAttribute(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsAttribute(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}name(g){let v=this.bb.__offset(this.bb_pos,4);return v?this.bb.__string(this.bb_pos+v,g):null}docString(g){let v=this.bb.__offset(this.bb_pos,6);return v?this.bb.__string(this.bb_pos+v,g):null}type(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.readInt32(this.bb_pos+g):0}f(){let g=this.bb.__offset(this.bb_pos,10);return g?this.bb.readFloat32(this.bb_pos+g):0}i(){let g=this.bb.__offset(this.bb_pos,12);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}s(g){let v=this.bb.__offset(this.bb_pos,14);return v?this.bb.__string(this.bb_pos+v,g):null}t(g){let v=this.bb.__offset(this.bb_pos,16);return v?(g||new s.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}g(g){let v=this.bb.__offset(this.bb_pos,18);return v?(g||new s.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}floats(g){let v=this.bb.__offset(this.bb_pos,20);return v?this.bb.readFloat32(this.bb.__vector(this.bb_pos+v)+g*4):0}floatsLength(){let g=this.bb.__offset(this.bb_pos,20);return g?this.bb.__vector_len(this.bb_pos+g):0}floatsArray(){let g=this.bb.__offset(this.bb_pos,20);return g?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+g),this.bb.__vector_len(this.bb_pos+g)):null}ints(g){let v=this.bb.__offset(this.bb_pos,22);return v?this.bb.readInt64(this.bb.__vector(this.bb_pos+v)+g*8):this.bb.createLong(0,0)}intsLength(){let g=this.bb.__offset(this.bb_pos,22);return g?this.bb.__vector_len(this.bb_pos+g):0}strings(g,v){let b=this.bb.__offset(this.bb_pos,24);return b?this.bb.__string(this.bb.__vector(this.bb_pos+b)+g*4,v):null}stringsLength(){let g=this.bb.__offset(this.bb_pos,24);return g?this.bb.__vector_len(this.bb_pos+g):0}tensors(g,v){let b=this.bb.__offset(this.bb_pos,26);return b?(v||new s.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+b)+g*4),this.bb):null}tensorsLength(){let g=this.bb.__offset(this.bb_pos,26);return g?this.bb.__vector_len(this.bb_pos+g):0}graphs(g,v){let b=this.bb.__offset(this.bb_pos,28);return b?(v||new s.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+b)+g*4),this.bb):null}graphsLength(){let g=this.bb.__offset(this.bb_pos,28);return g?this.bb.__vector_len(this.bb_pos+g):0}static startAttribute(g){g.startObject(13)}static addName(g,v){g.addFieldOffset(0,v,0)}static addDocString(g,v){g.addFieldOffset(1,v,0)}static addType(g,v){g.addFieldInt32(2,v,0)}static addF(g,v){g.addFieldFloat32(3,v,0)}static addI(g,v){g.addFieldInt64(4,v,g.createLong(0,0))}static addS(g,v){g.addFieldOffset(5,v,0)}static addT(g,v){g.addFieldOffset(6,v,0)}static addG(g,v){g.addFieldOffset(7,v,0)}static addFloats(g,v){g.addFieldOffset(8,v,0)}static createFloatsVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addFloat32(v[b]);return g.endVector()}static startFloatsVector(g,v){g.startVector(4,v,4)}static addInts(g,v){g.addFieldOffset(9,v,0)}static createIntsVector(g,v){g.startVector(8,v.length,8);for(let b=v.length-1;b>=0;b--)g.addInt64(v[b]);return g.endVector()}static startIntsVector(g,v){g.startVector(8,v,8)}static addStrings(g,v){g.addFieldOffset(10,v,0)}static createStringsVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startStringsVector(g,v){g.startVector(4,v,4)}static addTensors(g,v){g.addFieldOffset(11,v,0)}static createTensorsVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startTensorsVector(g,v){g.startVector(4,v,4)}static addGraphs(g,v){g.addFieldOffset(12,v,0)}static createGraphsVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startGraphsVector(g,v){g.startVector(4,v,4)}static endAttribute(g){return g.endObject()}static createAttribute(g,v,b,$,y,x,C,E,N,W,q,Y,re,se){return d.startAttribute(g),d.addName(g,v),d.addDocString(g,b),d.addType(g,$),d.addF(g,y),d.addI(g,x),d.addS(g,C),d.addT(g,E),d.addG(g,N),d.addFloats(g,W),d.addInts(g,q),d.addStrings(g,Y),d.addTensors(g,re),d.addGraphs(g,se),d.endAttribute(g)}}c.Attribute=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsGraph(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsGraph(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}initializers(g,v){let b=this.bb.__offset(this.bb_pos,4);return b?(v||new s.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+b)+g*4),this.bb):null}initializersLength(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.__vector_len(this.bb_pos+g):0}nodeArgs(g,v){let b=this.bb.__offset(this.bb_pos,6);return b?(v||new s.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+b)+g*4),this.bb):null}nodeArgsLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}nodes(g,v){let b=this.bb.__offset(this.bb_pos,8);return b?(v||new s.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+b)+g*4),this.bb):null}nodesLength(){let g=this.bb.__offset(this.bb_pos,8);return g?this.bb.__vector_len(this.bb_pos+g):0}maxNodeIndex(){let g=this.bb.__offset(this.bb_pos,10);return g?this.bb.readUint32(this.bb_pos+g):0}nodeEdges(g,v){let b=this.bb.__offset(this.bb_pos,12);return b?(v||new s.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+b)+g*4),this.bb):null}nodeEdgesLength(){let g=this.bb.__offset(this.bb_pos,12);return g?this.bb.__vector_len(this.bb_pos+g):0}inputs(g,v){let b=this.bb.__offset(this.bb_pos,14);return b?this.bb.__string(this.bb.__vector(this.bb_pos+b)+g*4,v):null}inputsLength(){let g=this.bb.__offset(this.bb_pos,14);return g?this.bb.__vector_len(this.bb_pos+g):0}outputs(g,v){let b=this.bb.__offset(this.bb_pos,16);return b?this.bb.__string(this.bb.__vector(this.bb_pos+b)+g*4,v):null}outputsLength(){let g=this.bb.__offset(this.bb_pos,16);return g?this.bb.__vector_len(this.bb_pos+g):0}sparseInitializers(g,v){let b=this.bb.__offset(this.bb_pos,18);return b?(v||new s.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+b)+g*4),this.bb):null}sparseInitializersLength(){let g=this.bb.__offset(this.bb_pos,18);return g?this.bb.__vector_len(this.bb_pos+g):0}static startGraph(g){g.startObject(8)}static addInitializers(g,v){g.addFieldOffset(0,v,0)}static createInitializersVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startInitializersVector(g,v){g.startVector(4,v,4)}static addNodeArgs(g,v){g.addFieldOffset(1,v,0)}static createNodeArgsVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startNodeArgsVector(g,v){g.startVector(4,v,4)}static addNodes(g,v){g.addFieldOffset(2,v,0)}static createNodesVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startNodesVector(g,v){g.startVector(4,v,4)}static addMaxNodeIndex(g,v){g.addFieldInt32(3,v,0)}static addNodeEdges(g,v){g.addFieldOffset(4,v,0)}static createNodeEdgesVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startNodeEdgesVector(g,v){g.startVector(4,v,4)}static addInputs(g,v){g.addFieldOffset(5,v,0)}static createInputsVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startInputsVector(g,v){g.startVector(4,v,4)}static addOutputs(g,v){g.addFieldOffset(6,v,0)}static createOutputsVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startOutputsVector(g,v){g.startVector(4,v,4)}static addSparseInitializers(g,v){g.addFieldOffset(7,v,0)}static createSparseInitializersVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startSparseInitializersVector(g,v){g.startVector(4,v,4)}static endGraph(g){return g.endObject()}static createGraph(g,v,b,$,y,x,C,E,N){return d.startGraph(g),d.addInitializers(g,v),d.addNodeArgs(g,b),d.addNodes(g,$),d.addMaxNodeIndex(g,y),d.addNodeEdges(g,x),d.addInputs(g,C),d.addOutputs(g,E),d.addSparseInitializers(g,N),d.endGraph(g)}}c.Graph=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsModel(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsModel(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}irVersion(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}opsetImport(g,v){let b=this.bb.__offset(this.bb_pos,6);return b?(v||new s.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+b)+g*4),this.bb):null}opsetImportLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}producerName(g){let v=this.bb.__offset(this.bb_pos,8);return v?this.bb.__string(this.bb_pos+v,g):null}producerVersion(g){let v=this.bb.__offset(this.bb_pos,10);return v?this.bb.__string(this.bb_pos+v,g):null}domain(g){let v=this.bb.__offset(this.bb_pos,12);return v?this.bb.__string(this.bb_pos+v,g):null}modelVersion(){let g=this.bb.__offset(this.bb_pos,14);return g?this.bb.readInt64(this.bb_pos+g):this.bb.createLong(0,0)}docString(g){let v=this.bb.__offset(this.bb_pos,16);return v?this.bb.__string(this.bb_pos+v,g):null}graph(g){let v=this.bb.__offset(this.bb_pos,18);return v?(g||new s.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}graphDocString(g){let v=this.bb.__offset(this.bb_pos,20);return v?this.bb.__string(this.bb_pos+v,g):null}static startModel(g){g.startObject(9)}static addIrVersion(g,v){g.addFieldInt64(0,v,g.createLong(0,0))}static addOpsetImport(g,v){g.addFieldOffset(1,v,0)}static createOpsetImportVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startOpsetImportVector(g,v){g.startVector(4,v,4)}static addProducerName(g,v){g.addFieldOffset(2,v,0)}static addProducerVersion(g,v){g.addFieldOffset(3,v,0)}static addDomain(g,v){g.addFieldOffset(4,v,0)}static addModelVersion(g,v){g.addFieldInt64(5,v,g.createLong(0,0))}static addDocString(g,v){g.addFieldOffset(6,v,0)}static addGraph(g,v){g.addFieldOffset(7,v,0)}static addGraphDocString(g,v){g.addFieldOffset(8,v,0)}static endModel(g){return g.endObject()}static createModel(g,v,b,$,y,x,C,E,N,W){return d.startModel(g),d.addIrVersion(g,v),d.addOpsetImport(g,b),d.addProducerName(g,$),d.addProducerVersion(g,y),d.addDomain(g,x),d.addModelVersion(g,C),d.addDocString(g,E),d.addGraph(g,N),d.addGraphDocString(g,W),d.endModel(g)}}c.Model=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsKernelCreateInfos(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsKernelCreateInfos(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}nodeIndices(g){let v=this.bb.__offset(this.bb_pos,4);return v?this.bb.readUint32(this.bb.__vector(this.bb_pos+v)+g*4):0}nodeIndicesLength(){let g=this.bb.__offset(this.bb_pos,4);return g?this.bb.__vector_len(this.bb_pos+g):0}nodeIndicesArray(){let g=this.bb.__offset(this.bb_pos,4);return g?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+g),this.bb.__vector_len(this.bb_pos+g)):null}kernelDefHashes(g){let v=this.bb.__offset(this.bb_pos,6);return v?this.bb.readUint64(this.bb.__vector(this.bb_pos+v)+g*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}static startKernelCreateInfos(g){g.startObject(2)}static addNodeIndices(g,v){g.addFieldOffset(0,v,0)}static createNodeIndicesVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addInt32(v[b]);return g.endVector()}static startNodeIndicesVector(g,v){g.startVector(4,v,4)}static addKernelDefHashes(g,v){g.addFieldOffset(1,v,0)}static createKernelDefHashesVector(g,v){g.startVector(8,v.length,8);for(let b=v.length-1;b>=0;b--)g.addInt64(v[b]);return g.endVector()}static startKernelDefHashesVector(g,v){g.startVector(8,v,8)}static endKernelCreateInfos(g){return g.endObject()}static createKernelCreateInfos(g,v,b){return d.startKernelCreateInfos(g),d.addNodeIndices(g,v),d.addKernelDefHashes(g,b),d.endKernelCreateInfos(g)}}c.KernelCreateInfos=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsSubGraphSessionState(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsSubGraphSessionState(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}graphId(g){let v=this.bb.__offset(this.bb_pos,4);return v?this.bb.__string(this.bb_pos+v,g):null}sessionState(g){let v=this.bb.__offset(this.bb_pos,6);return v?(g||new s.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}static startSubGraphSessionState(g){g.startObject(2)}static addGraphId(g,v){g.addFieldOffset(0,v,0)}static addSessionState(g,v){g.addFieldOffset(1,v,0)}static endSubGraphSessionState(g){let v=g.endObject();return g.requiredField(v,4),v}static createSubGraphSessionState(g,v,b){return d.startSubGraphSessionState(g),d.addGraphId(g,v),d.addSessionState(g,b),d.endSubGraphSessionState(g)}}c.SubGraphSessionState=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsSessionState(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsSessionState(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}kernels(g){let v=this.bb.__offset(this.bb_pos,4);return v?(g||new s.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}subGraphSessionStates(g,v){let b=this.bb.__offset(this.bb_pos,6);return b?(v||new s.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+b)+g*4),this.bb):null}subGraphSessionStatesLength(){let g=this.bb.__offset(this.bb_pos,6);return g?this.bb.__vector_len(this.bb_pos+g):0}static startSessionState(g){g.startObject(2)}static addKernels(g,v){g.addFieldOffset(0,v,0)}static addSubGraphSessionStates(g,v){g.addFieldOffset(1,v,0)}static createSubGraphSessionStatesVector(g,v){g.startVector(4,v.length,4);for(let b=v.length-1;b>=0;b--)g.addOffset(v[b]);return g.endVector()}static startSubGraphSessionStatesVector(g,v){g.startVector(4,v,4)}static endSessionState(g){return g.endObject()}static createSessionState(g,v,b){return d.startSessionState(g),d.addKernels(g,v),d.addSubGraphSessionStates(g,b),d.endSessionState(g)}}c.SessionState=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={})),(s=>{(l=>{(c=>{class d{constructor(){this.bb=null,this.bb_pos=0}__init(g,v){return this.bb_pos=g,this.bb=v,this}static getRootAsInferenceSession(g,v){return(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static getSizePrefixedRootAsInferenceSession(g,v){return g.setPosition(g.position()+_.SIZE_PREFIX_LENGTH),(v||new d).__init(g.readInt32(g.position())+g.position(),g)}static bufferHasIdentifier(g){return g.__has_identifier("ORTM")}ortVersion(g){let v=this.bb.__offset(this.bb_pos,4);return v?this.bb.__string(this.bb_pos+v,g):null}model(g){let v=this.bb.__offset(this.bb_pos,6);return v?(g||new s.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}sessionState(g){let v=this.bb.__offset(this.bb_pos,8);return v?(g||new s.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+v),this.bb):null}static startInferenceSession(g){g.startObject(3)}static addOrtVersion(g,v){g.addFieldOffset(0,v,0)}static addModel(g,v){g.addFieldOffset(1,v,0)}static addSessionState(g,v){g.addFieldOffset(2,v,0)}static endInferenceSession(g){return g.endObject()}static finishInferenceSessionBuffer(g,v){g.finish(v,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(g,v){g.finish(v,"ORTM",!0)}static createInferenceSession(g,v,b,$){return d.startInferenceSession(g),d.addOrtVersion(g,v),d.addModel(g,b),d.addSessionState(g,$),d.endInferenceSession(g)}}c.InferenceSession=d})(l.fbs||(l.fbs={}))})(s.experimental||(s.experimental={}))})(V$1||(V$1={}))}),Bs$2=me((s,l)=>{l.exports=c;function c(d,f){for(var g=new Array(arguments.length-1),v=0,b=2,$=!0;b<arguments.length;)g[v++]=arguments[b++];return new Promise(function(y,x){g[v]=function(C){if($)if($=!1,C)x(C);else{for(var E=new Array(arguments.length-1),N=0;N<E.length;)E[N++]=arguments[N];y.apply(null,E)}};try{d.apply(f||null,g)}catch(C){$&&($=!1,x(C))}})}}),Gs$2=me(s=>{var l=s;l.length=function(v){var b=v.length;if(!b)return 0;for(var $=0;--b%4>1&&v.charAt(b)==="=";)++$;return Math.ceil(v.length*3)/4-$};var c=new Array(64),d=new Array(123);for(f=0;f<64;)d[c[f]=f<26?f+65:f<52?f+71:f<62?f-4:f-59|43]=f++;var f;l.encode=function(v,b,$){for(var y=null,x=[],C=0,E=0,N;b<$;){var W=v[b++];switch(E){case 0:x[C++]=c[W>>2],N=(W&3)<<4,E=1;break;case 1:x[C++]=c[N|W>>4],N=(W&15)<<2,E=2;break;case 2:x[C++]=c[N|W>>6],x[C++]=c[W&63],E=0;break}C>8191&&((y||(y=[])).push(String.fromCharCode.apply(String,x)),C=0)}return E&&(x[C++]=c[N],x[C++]=61,E===1&&(x[C++]=61)),y?(C&&y.push(String.fromCharCode.apply(String,x.slice(0,C))),y.join("")):String.fromCharCode.apply(String,x.slice(0,C))};var g="invalid encoding";l.decode=function(v,b,$){for(var y=$,x=0,C,E=0;E<v.length;){var N=v.charCodeAt(E++);if(N===61&&x>1)break;if((N=d[N])===void 0)throw Error(g);switch(x){case 0:C=N,x=1;break;case 1:b[$++]=C<<2|(N&48)>>4,C=N,x=2;break;case 2:b[$++]=(C&15)<<4|(N&60)>>2,C=N,x=3;break;case 3:b[$++]=(C&3)<<6|N,x=0;break}}if(x===1)throw Error(g);return $-y},l.test=function(v){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(v)}}),zs$2=me((s,l)=>{l.exports=c;function c(){this._listeners={}}c.prototype.on=function(d,f,g){return(this._listeners[d]||(this._listeners[d]=[])).push({fn:f,ctx:g||this}),this},c.prototype.off=function(d,f){if(d===void 0)this._listeners={};else if(f===void 0)this._listeners[d]=[];else for(var g=this._listeners[d],v=0;v<g.length;)g[v].fn===f?g.splice(v,1):++v;return this},c.prototype.emit=function(d){var f=this._listeners[d];if(f){for(var g=[],v=1;v<arguments.length;)g.push(arguments[v++]);for(v=0;v<f.length;)f[v].fn.apply(f[v++].ctx,g)}return this}}),Xs$2=me((s,l)=>{l.exports=c(c);function c(b){return typeof Float32Array<"u"?function(){var $=new Float32Array([-0]),y=new Uint8Array($.buffer),x=y[3]===128;function C(q,Y,re){$[0]=q,Y[re]=y[0],Y[re+1]=y[1],Y[re+2]=y[2],Y[re+3]=y[3]}function E(q,Y,re){$[0]=q,Y[re]=y[3],Y[re+1]=y[2],Y[re+2]=y[1],Y[re+3]=y[0]}b.writeFloatLE=x?C:E,b.writeFloatBE=x?E:C;function N(q,Y){return y[0]=q[Y],y[1]=q[Y+1],y[2]=q[Y+2],y[3]=q[Y+3],$[0]}function W(q,Y){return y[3]=q[Y],y[2]=q[Y+1],y[1]=q[Y+2],y[0]=q[Y+3],$[0]}b.readFloatLE=x?N:W,b.readFloatBE=x?W:N}():function(){function $(x,C,E,N){var W=C<0?1:0;if(W&&(C=-C),C===0)x(1/C>0?0:2147483648,E,N);else if(isNaN(C))x(2143289344,E,N);else if(C>34028234663852886e22)x((W<<31|2139095040)>>>0,E,N);else if(C<11754943508222875e-54)x((W<<31|Math.round(C/1401298464324817e-60))>>>0,E,N);else{var q=Math.floor(Math.log(C)/Math.LN2),Y=Math.round(C*Math.pow(2,-q)*8388608)&8388607;x((W<<31|q+127<<23|Y)>>>0,E,N)}}b.writeFloatLE=$.bind(null,d),b.writeFloatBE=$.bind(null,f);function y(x,C,E){var N=x(C,E),W=(N>>31)*2+1,q=N>>>23&255,Y=N&8388607;return q===255?Y?NaN:W*(1/0):q===0?W*1401298464324817e-60*Y:W*Math.pow(2,q-150)*(Y+8388608)}b.readFloatLE=y.bind(null,g),b.readFloatBE=y.bind(null,v)}(),typeof Float64Array<"u"?function(){var $=new Float64Array([-0]),y=new Uint8Array($.buffer),x=y[7]===128;function C(q,Y,re){$[0]=q,Y[re]=y[0],Y[re+1]=y[1],Y[re+2]=y[2],Y[re+3]=y[3],Y[re+4]=y[4],Y[re+5]=y[5],Y[re+6]=y[6],Y[re+7]=y[7]}function E(q,Y,re){$[0]=q,Y[re]=y[7],Y[re+1]=y[6],Y[re+2]=y[5],Y[re+3]=y[4],Y[re+4]=y[3],Y[re+5]=y[2],Y[re+6]=y[1],Y[re+7]=y[0]}b.writeDoubleLE=x?C:E,b.writeDoubleBE=x?E:C;function N(q,Y){return y[0]=q[Y],y[1]=q[Y+1],y[2]=q[Y+2],y[3]=q[Y+3],y[4]=q[Y+4],y[5]=q[Y+5],y[6]=q[Y+6],y[7]=q[Y+7],$[0]}function W(q,Y){return y[7]=q[Y],y[6]=q[Y+1],y[5]=q[Y+2],y[4]=q[Y+3],y[3]=q[Y+4],y[2]=q[Y+5],y[1]=q[Y+6],y[0]=q[Y+7],$[0]}b.readDoubleLE=x?N:W,b.readDoubleBE=x?W:N}():function(){function $(x,C,E,N,W,q){var Y=N<0?1:0;if(Y&&(N=-N),N===0)x(0,W,q+C),x(1/N>0?0:2147483648,W,q+E);else if(isNaN(N))x(0,W,q+C),x(2146959360,W,q+E);else if(N>17976931348623157e292)x(0,W,q+C),x((Y<<31|2146435072)>>>0,W,q+E);else{var re;if(N<22250738585072014e-324)re=N/5e-324,x(re>>>0,W,q+C),x((Y<<31|re/4294967296)>>>0,W,q+E);else{var se=Math.floor(Math.log(N)/Math.LN2);se===1024&&(se=1023),re=N*Math.pow(2,-se),x(re*4503599627370496>>>0,W,q+C),x((Y<<31|se+1023<<20|re*1048576&1048575)>>>0,W,q+E)}}}b.writeDoubleLE=$.bind(null,d,0,4),b.writeDoubleBE=$.bind(null,f,4,0);function y(x,C,E,N,W){var q=x(N,W+C),Y=x(N,W+E),re=(Y>>31)*2+1,se=Y>>>20&2047,de=4294967296*(Y&1048575)+q;return se===2047?de?NaN:re*(1/0):se===0?re*5e-324*de:re*Math.pow(2,se-1075)*(de+4503599627370496)}b.readDoubleLE=y.bind(null,g,0,4),b.readDoubleBE=y.bind(null,v,4,0)}(),b}function d(b,$,y){$[y]=b&255,$[y+1]=b>>>8&255,$[y+2]=b>>>16&255,$[y+3]=b>>>24}function f(b,$,y){$[y]=b>>>24,$[y+1]=b>>>16&255,$[y+2]=b>>>8&255,$[y+3]=b&255}function g(b,$){return(b[$]|b[$+1]<<8|b[$+2]<<16|b[$+3]<<24)>>>0}function v(b,$){return(b[$]<<24|b[$+1]<<16|b[$+2]<<8|b[$+3])>>>0}}),Ks$2=me((exports,module)=>{module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(s){}return null}}),Zs$2=me(s=>{var l=s;l.length=function(c){for(var d=0,f=0,g=0;g<c.length;++g)f=c.charCodeAt(g),f<128?d+=1:f<2048?d+=2:(f&64512)===55296&&(c.charCodeAt(g+1)&64512)===56320?(++g,d+=4):d+=3;return d},l.read=function(c,d,f){var g=f-d;if(g<1)return"";for(var v=null,b=[],$=0,y;d<f;)y=c[d++],y<128?b[$++]=y:y>191&&y<224?b[$++]=(y&31)<<6|c[d++]&63:y>239&&y<365?(y=((y&7)<<18|(c[d++]&63)<<12|(c[d++]&63)<<6|c[d++]&63)-65536,b[$++]=55296+(y>>10),b[$++]=56320+(y&1023)):b[$++]=(y&15)<<12|(c[d++]&63)<<6|c[d++]&63,$>8191&&((v||(v=[])).push(String.fromCharCode.apply(String,b)),$=0);return v?($&&v.push(String.fromCharCode.apply(String,b.slice(0,$))),v.join("")):String.fromCharCode.apply(String,b.slice(0,$))},l.write=function(c,d,f){for(var g=f,v,b,$=0;$<c.length;++$)v=c.charCodeAt($),v<128?d[f++]=v:v<2048?(d[f++]=v>>6|192,d[f++]=v&63|128):(v&64512)===55296&&((b=c.charCodeAt($+1))&64512)===56320?(v=65536+((v&1023)<<10)+(b&1023),++$,d[f++]=v>>18|240,d[f++]=v>>12&63|128,d[f++]=v>>6&63|128,d[f++]=v&63|128):(d[f++]=v>>12|224,d[f++]=v>>6&63|128,d[f++]=v&63|128);return f-g}}),eu$2=me((s,l)=>{l.exports=c;function c(d,f,g){var v=g||8192,b=v>>>1,$=null,y=v;return function(x){if(x<1||x>b)return d(x);y+x>v&&($=d(v),y=0);var C=f.call($,y,y+=x);return y&7&&(y=(y|7)+1),C}}}),ru$2=me((s,l)=>{l.exports=d;var c=Jt$1();function d(b,$){this.lo=b>>>0,this.hi=$>>>0}var f=d.zero=new d(0,0);f.toNumber=function(){return 0},f.zzEncode=f.zzDecode=function(){return this},f.length=function(){return 1};var g=d.zeroHash="\0\0\0\0\0\0\0\0";d.fromNumber=function(b){if(b===0)return f;var $=b<0;$&&(b=-b);var y=b>>>0,x=(b-y)/4294967296>>>0;return $&&(x=~x>>>0,y=~y>>>0,++y>4294967295&&(y=0,++x>4294967295&&(x=0))),new d(y,x)},d.from=function(b){if(typeof b=="number")return d.fromNumber(b);if(c.isString(b))if(c.Long)b=c.Long.fromString(b);else return d.fromNumber(parseInt(b,10));return b.low||b.high?new d(b.low>>>0,b.high>>>0):f},d.prototype.toNumber=function(b){if(!b&&this.hi>>>31){var $=~this.lo+1>>>0,y=~this.hi>>>0;return $||(y=y+1>>>0),-($+y*4294967296)}return this.lo+this.hi*4294967296},d.prototype.toLong=function(b){return c.Long?new c.Long(this.lo|0,this.hi|0,!!b):{low:this.lo|0,high:this.hi|0,unsigned:!!b}};var v=String.prototype.charCodeAt;d.fromHash=function(b){return b===g?f:new d((v.call(b,0)|v.call(b,1)<<8|v.call(b,2)<<16|v.call(b,3)<<24)>>>0,(v.call(b,4)|v.call(b,5)<<8|v.call(b,6)<<16|v.call(b,7)<<24)>>>0)},d.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},d.prototype.zzEncode=function(){var b=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^b)>>>0,this.lo=(this.lo<<1^b)>>>0,this},d.prototype.zzDecode=function(){var b=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^b)>>>0,this.hi=(this.hi>>>1^b)>>>0,this},d.prototype.length=function(){var b=this.lo,$=(this.lo>>>28|this.hi<<4)>>>0,y=this.hi>>>24;return y===0?$===0?b<16384?b<128?1:2:b<2097152?3:4:$<16384?$<128?5:6:$<2097152?7:8:y<128?9:10}}),Jt$1=me(s=>{var l=s;l.asPromise=Bs$2(),l.base64=Gs$2(),l.EventEmitter=zs$2(),l.float=Xs$2(),l.inquire=Ks$2(),l.utf8=Zs$2(),l.pool=eu$2(),l.LongBits=ru$2(),l.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),l.global=l.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||s,l.emptyArray=Object.freeze?Object.freeze([]):[],l.emptyObject=Object.freeze?Object.freeze({}):{},l.isInteger=Number.isInteger||function(f){return typeof f=="number"&&isFinite(f)&&Math.floor(f)===f},l.isString=function(f){return typeof f=="string"||f instanceof String},l.isObject=function(f){return f&&typeof f=="object"},l.isset=l.isSet=function(f,g){var v=f[g];return v!=null&&f.hasOwnProperty(g)?typeof v!="object"||(Array.isArray(v)?v.length:Object.keys(v).length)>0:!1},l.Buffer=function(){try{var f=l.inquire("buffer").Buffer;return f.prototype.utf8Write?f:null}catch{return null}}(),l._Buffer_from=null,l._Buffer_allocUnsafe=null,l.newBuffer=function(f){return typeof f=="number"?l.Buffer?l._Buffer_allocUnsafe(f):new l.Array(f):l.Buffer?l._Buffer_from(f):typeof Uint8Array>"u"?f:new Uint8Array(f)},l.Array=typeof Uint8Array<"u"?Uint8Array:Array,l.Long=l.global.dcodeIO&&l.global.dcodeIO.Long||l.global.Long||l.inquire("long"),l.key2Re=/^true|false|0|1$/,l.key32Re=/^-?(?:0|[1-9][0-9]*)$/,l.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,l.longToHash=function(f){return f?l.LongBits.from(f).toHash():l.LongBits.zeroHash},l.longFromHash=function(f,g){var v=l.LongBits.fromHash(f);return l.Long?l.Long.fromBits(v.lo,v.hi,g):v.toNumber(!!g)};function c(f,g,v){for(var b=Object.keys(g),$=0;$<b.length;++$)(f[b[$]]===void 0||!v)&&(f[b[$]]=g[b[$]]);return f}l.merge=c,l.lcFirst=function(f){return f.charAt(0).toLowerCase()+f.substring(1)};function d(f){function g(v,b){if(!(this instanceof g))return new g(v,b);Object.defineProperty(this,"message",{get:function(){return v}}),Error.captureStackTrace?Error.captureStackTrace(this,g):Object.defineProperty(this,"stack",{value:new Error().stack||""}),b&&c(this,b)}return g.prototype=Object.create(Error.prototype,{constructor:{value:g,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return f},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),g}l.newError=d,l.ProtocolError=d("ProtocolError"),l.oneOfGetter=function(f){for(var g={},v=0;v<f.length;++v)g[f[v]]=1;return function(){for(var b=Object.keys(this),$=b.length-1;$>-1;--$)if(g[b[$]]===1&&this[b[$]]!==void 0&&this[b[$]]!==null)return b[$]}},l.oneOfSetter=function(f){return function(g){for(var v=0;v<f.length;++v)f[v]!==g&&delete this[f[v]]}},l.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},l._configure=function(){var f=l.Buffer;if(!f){l._Buffer_from=l._Buffer_allocUnsafe=null;return}l._Buffer_from=f.from!==Uint8Array.from&&f.from||function(g,v){return new f(g,v)},l._Buffer_allocUnsafe=f.allocUnsafe||function(g){return new f(g)}}}),si$2=me((s,l)=>{l.exports=x;var c=Jt$1(),d,f=c.LongBits,g=c.base64,v=c.utf8;function b(se,de,he){this.fn=se,this.len=de,this.next=void 0,this.val=he}function $(){}function y(se){this.head=se.head,this.tail=se.tail,this.len=se.len,this.next=se.states}function x(){this.len=0,this.head=new b($,0,0),this.tail=this.head,this.states=null}var C=function(){return c.Buffer?function(){return(x.create=function(){return new d})()}:function(){return new x}};x.create=C(),x.alloc=function(se){return new c.Array(se)},c.Array!==Array&&(x.alloc=c.pool(x.alloc,c.Array.prototype.subarray)),x.prototype._push=function(se,de,he){return this.tail=this.tail.next=new b(se,de,he),this.len+=de,this};function E(se,de,he){de[he]=se&255}function N(se,de,he){for(;se>127;)de[he++]=se&127|128,se>>>=7;de[he]=se}function W(se,de){this.len=se,this.next=void 0,this.val=de}W.prototype=Object.create(b.prototype),W.prototype.fn=N,x.prototype.uint32=function(se){return this.len+=(this.tail=this.tail.next=new W((se=se>>>0)<128?1:se<16384?2:se<2097152?3:se<268435456?4:5,se)).len,this},x.prototype.int32=function(se){return se<0?this._push(q,10,f.fromNumber(se)):this.uint32(se)},x.prototype.sint32=function(se){return this.uint32((se<<1^se>>31)>>>0)};function q(se,de,he){for(;se.hi;)de[he++]=se.lo&127|128,se.lo=(se.lo>>>7|se.hi<<25)>>>0,se.hi>>>=7;for(;se.lo>127;)de[he++]=se.lo&127|128,se.lo=se.lo>>>7;de[he++]=se.lo}x.prototype.uint64=function(se){var de=f.from(se);return this._push(q,de.length(),de)},x.prototype.int64=x.prototype.uint64,x.prototype.sint64=function(se){var de=f.from(se).zzEncode();return this._push(q,de.length(),de)},x.prototype.bool=function(se){return this._push(E,1,se?1:0)};function Y(se,de,he){de[he]=se&255,de[he+1]=se>>>8&255,de[he+2]=se>>>16&255,de[he+3]=se>>>24}x.prototype.fixed32=function(se){return this._push(Y,4,se>>>0)},x.prototype.sfixed32=x.prototype.fixed32,x.prototype.fixed64=function(se){var de=f.from(se);return this._push(Y,4,de.lo)._push(Y,4,de.hi)},x.prototype.sfixed64=x.prototype.fixed64,x.prototype.float=function(se){return this._push(c.float.writeFloatLE,4,se)},x.prototype.double=function(se){return this._push(c.float.writeDoubleLE,8,se)};var re=c.Array.prototype.set?function(se,de,he){de.set(se,he)}:function(se,de,he){for(var ge=0;ge<se.length;++ge)de[he+ge]=se[ge]};x.prototype.bytes=function(se){var de=se.length>>>0;if(!de)return this._push(E,1,0);if(c.isString(se)){var he=x.alloc(de=g.length(se));g.decode(se,he,0),se=he}return this.uint32(de)._push(re,de,se)},x.prototype.string=function(se){var de=v.length(se);return de?this.uint32(de)._push(v.write,de,se):this._push(E,1,0)},x.prototype.fork=function(){return this.states=new y(this),this.head=this.tail=new b($,0,0),this.len=0,this},x.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new b($,0,0),this.len=0),this},x.prototype.ldelim=function(){var se=this.head,de=this.tail,he=this.len;return this.reset().uint32(he),he&&(this.tail.next=se.next,this.tail=de,this.len+=he),this},x.prototype.finish=function(){for(var se=this.head.next,de=this.constructor.alloc(this.len),he=0;se;)se.fn(se.val,de,he),he+=se.len,se=se.next;return de},x._configure=function(se){d=se,x.create=C(),d._configure()}}),cu$2=me((s,l)=>{l.exports=f;var c=si$2();(f.prototype=Object.create(c.prototype)).constructor=f;var d=Jt$1();function f(){c.call(this)}f._configure=function(){f.alloc=d._Buffer_allocUnsafe,f.writeBytesBuffer=d.Buffer&&d.Buffer.prototype instanceof Uint8Array&&d.Buffer.prototype.set.name==="set"?function(v,b,$){b.set(v,$)}:function(v,b,$){if(v.copy)v.copy(b,$,0,v.length);else for(var y=0;y<v.length;)b[$++]=v[y++]}},f.prototype.bytes=function(v){d.isString(v)&&(v=d._Buffer_from(v,"base64"));var b=v.length>>>0;return this.uint32(b),b&&this._push(f.writeBytesBuffer,b,v),this};function g(v,b,$){v.length<40?d.utf8.write(v,b,$):b.utf8Write?b.utf8Write(v,$):b.write(v,$)}f.prototype.string=function(v){var b=d.Buffer.byteLength(v);return this.uint32(b),b&&this._push(g,b,v),this},f._configure()}),fi$2=me((s,l)=>{l.exports=b;var c=Jt$1(),d,f=c.LongBits,g=c.utf8;function v(N,W){return RangeError("index out of range: "+N.pos+" + "+(W||1)+" > "+N.len)}function b(N){this.buf=N,this.pos=0,this.len=N.length}var $=typeof Uint8Array<"u"?function(N){if(N instanceof Uint8Array||Array.isArray(N))return new b(N);throw Error("illegal buffer")}:function(N){if(Array.isArray(N))return new b(N);throw Error("illegal buffer")},y=function(){return c.Buffer?function(N){return(b.create=function(W){return c.Buffer.isBuffer(W)?new d(W):$(W)})(N)}:$};b.create=y(),b.prototype._slice=c.Array.prototype.subarray||c.Array.prototype.slice,b.prototype.uint32=function(){var N=4294967295;return function(){if(N=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(N=(N|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(N=(N|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(N=(N|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(N=(N|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return N;if((this.pos+=5)>this.len)throw this.pos=this.len,v(this,10);return N}}(),b.prototype.int32=function(){return this.uint32()|0},b.prototype.sint32=function(){var N=this.uint32();return N>>>1^-(N&1)|0};function x(){var N=new f(0,0),W=0;if(this.len-this.pos>4){for(;W<4;++W)if(N.lo=(N.lo|(this.buf[this.pos]&127)<<W*7)>>>0,this.buf[this.pos++]<128)return N;if(N.lo=(N.lo|(this.buf[this.pos]&127)<<28)>>>0,N.hi=(N.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return N;W=0}else{for(;W<3;++W){if(this.pos>=this.len)throw v(this);if(N.lo=(N.lo|(this.buf[this.pos]&127)<<W*7)>>>0,this.buf[this.pos++]<128)return N}return N.lo=(N.lo|(this.buf[this.pos++]&127)<<W*7)>>>0,N}if(this.len-this.pos>4){for(;W<5;++W)if(N.hi=(N.hi|(this.buf[this.pos]&127)<<W*7+3)>>>0,this.buf[this.pos++]<128)return N}else for(;W<5;++W){if(this.pos>=this.len)throw v(this);if(N.hi=(N.hi|(this.buf[this.pos]&127)<<W*7+3)>>>0,this.buf[this.pos++]<128)return N}throw Error("invalid varint encoding")}b.prototype.bool=function(){return this.uint32()!==0};function C(N,W){return(N[W-4]|N[W-3]<<8|N[W-2]<<16|N[W-1]<<24)>>>0}b.prototype.fixed32=function(){if(this.pos+4>this.len)throw v(this,4);return C(this.buf,this.pos+=4)},b.prototype.sfixed32=function(){if(this.pos+4>this.len)throw v(this,4);return C(this.buf,this.pos+=4)|0};function E(){if(this.pos+8>this.len)throw v(this,8);return new f(C(this.buf,this.pos+=4),C(this.buf,this.pos+=4))}b.prototype.float=function(){if(this.pos+4>this.len)throw v(this,4);var N=c.float.readFloatLE(this.buf,this.pos);return this.pos+=4,N},b.prototype.double=function(){if(this.pos+8>this.len)throw v(this,4);var N=c.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,N},b.prototype.bytes=function(){var N=this.uint32(),W=this.pos,q=this.pos+N;if(q>this.len)throw v(this,N);if(this.pos+=N,Array.isArray(this.buf))return this.buf.slice(W,q);if(W===q){var Y=c.Buffer;return Y?Y.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,W,q)},b.prototype.string=function(){var N=this.bytes();return g.read(N,0,N.length)},b.prototype.skip=function(N){if(typeof N=="number"){if(this.pos+N>this.len)throw v(this,N);this.pos+=N}else do if(this.pos>=this.len)throw v(this);while(this.buf[this.pos++]&128);return this},b.prototype.skipType=function(N){switch(N){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(N=this.uint32()&7)!==4;)this.skipType(N);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+N+" at offset "+this.pos)}return this},b._configure=function(N){d=N,b.create=y(),d._configure();var W=c.Long?"toLong":"toNumber";c.merge(b.prototype,{int64:function(){return x.call(this)[W](!1)},uint64:function(){return x.call(this)[W](!0)},sint64:function(){return x.call(this).zzDecode()[W](!1)},fixed64:function(){return E.call(this)[W](!0)},sfixed64:function(){return E.call(this)[W](!1)}})}}),xu$1=me((s,l)=>{l.exports=f;var c=fi$2();(f.prototype=Object.create(c.prototype)).constructor=f;var d=Jt$1();function f(g){c.call(this,g)}f._configure=function(){d.Buffer&&(f.prototype._slice=d.Buffer.prototype.slice)},f.prototype.string=function(){var g=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+g,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+g,this.len))},f._configure()}),vu$2=me((s,l)=>{l.exports=d;var c=Jt$1();(d.prototype=Object.create(c.EventEmitter.prototype)).constructor=d;function d(f,g,v){if(typeof f!="function")throw TypeError("rpcImpl must be a function");c.EventEmitter.call(this),this.rpcImpl=f,this.requestDelimited=!!g,this.responseDelimited=!!v}d.prototype.rpcCall=function f(g,v,b,$,y){if(!$)throw TypeError("request must be specified");var x=this;if(!y)return c.asPromise(f,x,g,v,b,$);if(!x.rpcImpl){setTimeout(function(){y(Error("already ended"))},0);return}try{return x.rpcImpl(g,v[x.requestDelimited?"encodeDelimited":"encode"]($).finish(),function(C,E){if(C)return x.emit("error",C,g),y(C);if(E===null){x.end(!0);return}if(!(E instanceof b))try{E=b[x.responseDelimited?"decodeDelimited":"decode"](E)}catch(N){return x.emit("error",N,g),y(N)}return x.emit("data",E,g),y(null,E)})}catch(C){x.emit("error",C,g),setTimeout(function(){y(C)},0);return}},d.prototype.end=function(f){return this.rpcImpl&&(f||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),Ou$2=me(s=>{var l=s;l.Service=vu$2()}),Su$2=me((s,l)=>{l.exports={}}),Eu$2=me(s=>{var l=s;l.build="minimal",l.Writer=si$2(),l.BufferWriter=cu$2(),l.Reader=fi$2(),l.BufferReader=xu$1(),l.util=Jt$1(),l.rpc=Ou$2(),l.roots=Su$2(),l.configure=c;function c(){l.util._configure(),l.Writer._configure(l.BufferWriter),l.Reader._configure(l.BufferReader)}c()}),Lu$2=me((s,l)=>{l.exports=Eu$2()}),Cr$1=me((s,l)=>{var c=Lu$2(),d=c.Reader,f=c.Writer,g=c.util,v=c.roots.default||(c.roots.default={});v.onnx=function(){var b={};return b.Version=function(){var $={},y=Object.create($);return y[$[0]="_START_VERSION"]=0,y[$[1]="IR_VERSION_2017_10_10"]=1,y[$[2]="IR_VERSION_2017_10_30"]=2,y[$[3]="IR_VERSION_2017_11_3"]=3,y[$[4]="IR_VERSION_2019_1_22"]=4,y[$[5]="IR_VERSION_2019_3_18"]=5,y[$[6]="IR_VERSION_2019_9_19"]=6,y[$[7]="IR_VERSION_2020_5_8"]=7,y[$[8]="IR_VERSION_2021_7_30"]=8,y[$[9]="IR_VERSION"]=9,y}(),b.AttributeProto=function(){function $(y){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],y)for(var x=Object.keys(y),C=0;C<x.length;++C)y[x[C]]!=null&&(this[x[C]]=y[x[C]])}return $.prototype.name="",$.prototype.refAttrName="",$.prototype.docString="",$.prototype.type=0,$.prototype.f=0,$.prototype.i=g.Long?g.Long.fromBits(0,0,!1):0,$.prototype.s=g.newBuffer([]),$.prototype.t=null,$.prototype.g=null,$.prototype.sparseTensor=null,$.prototype.tp=null,$.prototype.floats=g.emptyArray,$.prototype.ints=g.emptyArray,$.prototype.strings=g.emptyArray,$.prototype.tensors=g.emptyArray,$.prototype.graphs=g.emptyArray,$.prototype.sparseTensors=g.emptyArray,$.prototype.typeProtos=g.emptyArray,$.create=function(y){return new $(y)},$.encode=function(y,x){if(x||(x=f.create()),y.name!=null&&Object.hasOwnProperty.call(y,"name")&&x.uint32(10).string(y.name),y.f!=null&&Object.hasOwnProperty.call(y,"f")&&x.uint32(21).float(y.f),y.i!=null&&Object.hasOwnProperty.call(y,"i")&&x.uint32(24).int64(y.i),y.s!=null&&Object.hasOwnProperty.call(y,"s")&&x.uint32(34).bytes(y.s),y.t!=null&&Object.hasOwnProperty.call(y,"t")&&v.onnx.TensorProto.encode(y.t,x.uint32(42).fork()).ldelim(),y.g!=null&&Object.hasOwnProperty.call(y,"g")&&v.onnx.GraphProto.encode(y.g,x.uint32(50).fork()).ldelim(),y.floats!=null&&y.floats.length){x.uint32(58).fork();for(var C=0;C<y.floats.length;++C)x.float(y.floats[C]);x.ldelim()}if(y.ints!=null&&y.ints.length){x.uint32(66).fork();for(var C=0;C<y.ints.length;++C)x.int64(y.ints[C]);x.ldelim()}if(y.strings!=null&&y.strings.length)for(var C=0;C<y.strings.length;++C)x.uint32(74).bytes(y.strings[C]);if(y.tensors!=null&&y.tensors.length)for(var C=0;C<y.tensors.length;++C)v.onnx.TensorProto.encode(y.tensors[C],x.uint32(82).fork()).ldelim();if(y.graphs!=null&&y.graphs.length)for(var C=0;C<y.graphs.length;++C)v.onnx.GraphProto.encode(y.graphs[C],x.uint32(90).fork()).ldelim();if(y.docString!=null&&Object.hasOwnProperty.call(y,"docString")&&x.uint32(106).string(y.docString),y.tp!=null&&Object.hasOwnProperty.call(y,"tp")&&v.onnx.TypeProto.encode(y.tp,x.uint32(114).fork()).ldelim(),y.typeProtos!=null&&y.typeProtos.length)for(var C=0;C<y.typeProtos.length;++C)v.onnx.TypeProto.encode(y.typeProtos[C],x.uint32(122).fork()).ldelim();if(y.type!=null&&Object.hasOwnProperty.call(y,"type")&&x.uint32(160).int32(y.type),y.refAttrName!=null&&Object.hasOwnProperty.call(y,"refAttrName")&&x.uint32(170).string(y.refAttrName),y.sparseTensor!=null&&Object.hasOwnProperty.call(y,"sparseTensor")&&v.onnx.SparseTensorProto.encode(y.sparseTensor,x.uint32(178).fork()).ldelim(),y.sparseTensors!=null&&y.sparseTensors.length)for(var C=0;C<y.sparseTensors.length;++C)v.onnx.SparseTensorProto.encode(y.sparseTensors[C],x.uint32(186).fork()).ldelim();return x},$.encodeDelimited=function(y,x){return this.encode(y,x).ldelim()},$.decode=function(y,x){y instanceof d||(y=d.create(y));for(var C=x===void 0?y.len:y.pos+x,E=new v.onnx.AttributeProto;y.pos<C;){var N=y.uint32();switch(N>>>3){case 1:{E.name=y.string();break}case 21:{E.refAttrName=y.string();break}case 13:{E.docString=y.string();break}case 20:{E.type=y.int32();break}case 2:{E.f=y.float();break}case 3:{E.i=y.int64();break}case 4:{E.s=y.bytes();break}case 5:{E.t=v.onnx.TensorProto.decode(y,y.uint32());break}case 6:{E.g=v.onnx.GraphProto.decode(y,y.uint32());break}case 22:{E.sparseTensor=v.onnx.SparseTensorProto.decode(y,y.uint32());break}case 14:{E.tp=v.onnx.TypeProto.decode(y,y.uint32());break}case 7:{if(E.floats&&E.floats.length||(E.floats=[]),(N&7)===2)for(var W=y.uint32()+y.pos;y.pos<W;)E.floats.push(y.float());else E.floats.push(y.float());break}case 8:{if(E.ints&&E.ints.length||(E.ints=[]),(N&7)===2)for(var W=y.uint32()+y.pos;y.pos<W;)E.ints.push(y.int64());else E.ints.push(y.int64());break}case 9:{E.strings&&E.strings.length||(E.strings=[]),E.strings.push(y.bytes());break}case 10:{E.tensors&&E.tensors.length||(E.tensors=[]),E.tensors.push(v.onnx.TensorProto.decode(y,y.uint32()));break}case 11:{E.graphs&&E.graphs.length||(E.graphs=[]),E.graphs.push(v.onnx.GraphProto.decode(y,y.uint32()));break}case 23:{E.sparseTensors&&E.sparseTensors.length||(E.sparseTensors=[]),E.sparseTensors.push(v.onnx.SparseTensorProto.decode(y,y.uint32()));break}case 15:{E.typeProtos&&E.typeProtos.length||(E.typeProtos=[]),E.typeProtos.push(v.onnx.TypeProto.decode(y,y.uint32()));break}default:y.skipType(N&7);break}}return E},$.decodeDelimited=function(y){return y instanceof d||(y=new d(y)),this.decode(y,y.uint32())},$.verify=function(y){if(typeof y!="object"||y===null)return"object expected";if(y.name!=null&&y.hasOwnProperty("name")&&!g.isString(y.name))return"name: string expected";if(y.refAttrName!=null&&y.hasOwnProperty("refAttrName")&&!g.isString(y.refAttrName))return"refAttrName: string expected";if(y.docString!=null&&y.hasOwnProperty("docString")&&!g.isString(y.docString))return"docString: string expected";if(y.type!=null&&y.hasOwnProperty("type"))switch(y.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(y.f!=null&&y.hasOwnProperty("f")&&typeof y.f!="number")return"f: number expected";if(y.i!=null&&y.hasOwnProperty("i")&&!g.isInteger(y.i)&&!(y.i&&g.isInteger(y.i.low)&&g.isInteger(y.i.high)))return"i: integer|Long expected";if(y.s!=null&&y.hasOwnProperty("s")&&!(y.s&&typeof y.s.length=="number"||g.isString(y.s)))return"s: buffer expected";if(y.t!=null&&y.hasOwnProperty("t")){var x=v.onnx.TensorProto.verify(y.t);if(x)return"t."+x}if(y.g!=null&&y.hasOwnProperty("g")){var x=v.onnx.GraphProto.verify(y.g);if(x)return"g."+x}if(y.sparseTensor!=null&&y.hasOwnProperty("sparseTensor")){var x=v.onnx.SparseTensorProto.verify(y.sparseTensor);if(x)return"sparseTensor."+x}if(y.tp!=null&&y.hasOwnProperty("tp")){var x=v.onnx.TypeProto.verify(y.tp);if(x)return"tp."+x}if(y.floats!=null&&y.hasOwnProperty("floats")){if(!Array.isArray(y.floats))return"floats: array expected";for(var C=0;C<y.floats.length;++C)if(typeof y.floats[C]!="number")return"floats: number[] expected"}if(y.ints!=null&&y.hasOwnProperty("ints")){if(!Array.isArray(y.ints))return"ints: array expected";for(var C=0;C<y.ints.length;++C)if(!g.isInteger(y.ints[C])&&!(y.ints[C]&&g.isInteger(y.ints[C].low)&&g.isInteger(y.ints[C].high)))return"ints: integer|Long[] expected"}if(y.strings!=null&&y.hasOwnProperty("strings")){if(!Array.isArray(y.strings))return"strings: array expected";for(var C=0;C<y.strings.length;++C)if(!(y.strings[C]&&typeof y.strings[C].length=="number"||g.isString(y.strings[C])))return"strings: buffer[] expected"}if(y.tensors!=null&&y.hasOwnProperty("tensors")){if(!Array.isArray(y.tensors))return"tensors: array expected";for(var C=0;C<y.tensors.length;++C){var x=v.onnx.TensorProto.verify(y.tensors[C]);if(x)return"tensors."+x}}if(y.graphs!=null&&y.hasOwnProperty("graphs")){if(!Array.isArray(y.graphs))return"graphs: array expected";for(var C=0;C<y.graphs.length;++C){var x=v.onnx.GraphProto.verify(y.graphs[C]);if(x)return"graphs."+x}}if(y.sparseTensors!=null&&y.hasOwnProperty("sparseTensors")){if(!Array.isArray(y.sparseTensors))return"sparseTensors: array expected";for(var C=0;C<y.sparseTensors.length;++C){var x=v.onnx.SparseTensorProto.verify(y.sparseTensors[C]);if(x)return"sparseTensors."+x}}if(y.typeProtos!=null&&y.hasOwnProperty("typeProtos")){if(!Array.isArray(y.typeProtos))return"typeProtos: array expected";for(var C=0;C<y.typeProtos.length;++C){var x=v.onnx.TypeProto.verify(y.typeProtos[C]);if(x)return"typeProtos."+x}}return null},$.fromObject=function(y){if(y instanceof v.onnx.AttributeProto)return y;var x=new v.onnx.AttributeProto;switch(y.name!=null&&(x.name=String(y.name)),y.refAttrName!=null&&(x.refAttrName=String(y.refAttrName)),y.docString!=null&&(x.docString=String(y.docString)),y.type){default:if(typeof y.type=="number"){x.type=y.type;break}break;case"UNDEFINED":case 0:x.type=0;break;case"FLOAT":case 1:x.type=1;break;case"INT":case 2:x.type=2;break;case"STRING":case 3:x.type=3;break;case"TENSOR":case 4:x.type=4;break;case"GRAPH":case 5:x.type=5;break;case"SPARSE_TENSOR":case 11:x.type=11;break;case"TYPE_PROTO":case 13:x.type=13;break;case"FLOATS":case 6:x.type=6;break;case"INTS":case 7:x.type=7;break;case"STRINGS":case 8:x.type=8;break;case"TENSORS":case 9:x.type=9;break;case"GRAPHS":case 10:x.type=10;break;case"SPARSE_TENSORS":case 12:x.type=12;break;case"TYPE_PROTOS":case 14:x.type=14;break}if(y.f!=null&&(x.f=Number(y.f)),y.i!=null&&(g.Long?(x.i=g.Long.fromValue(y.i)).unsigned=!1:typeof y.i=="string"?x.i=parseInt(y.i,10):typeof y.i=="number"?x.i=y.i:typeof y.i=="object"&&(x.i=new g.LongBits(y.i.low>>>0,y.i.high>>>0).toNumber())),y.s!=null&&(typeof y.s=="string"?g.base64.decode(y.s,x.s=g.newBuffer(g.base64.length(y.s)),0):y.s.length>=0&&(x.s=y.s)),y.t!=null){if(typeof y.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");x.t=v.onnx.TensorProto.fromObject(y.t)}if(y.g!=null){if(typeof y.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");x.g=v.onnx.GraphProto.fromObject(y.g)}if(y.sparseTensor!=null){if(typeof y.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");x.sparseTensor=v.onnx.SparseTensorProto.fromObject(y.sparseTensor)}if(y.tp!=null){if(typeof y.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");x.tp=v.onnx.TypeProto.fromObject(y.tp)}if(y.floats){if(!Array.isArray(y.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");x.floats=[];for(var C=0;C<y.floats.length;++C)x.floats[C]=Number(y.floats[C])}if(y.ints){if(!Array.isArray(y.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");x.ints=[];for(var C=0;C<y.ints.length;++C)g.Long?(x.ints[C]=g.Long.fromValue(y.ints[C])).unsigned=!1:typeof y.ints[C]=="string"?x.ints[C]=parseInt(y.ints[C],10):typeof y.ints[C]=="number"?x.ints[C]=y.ints[C]:typeof y.ints[C]=="object"&&(x.ints[C]=new g.LongBits(y.ints[C].low>>>0,y.ints[C].high>>>0).toNumber())}if(y.strings){if(!Array.isArray(y.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");x.strings=[];for(var C=0;C<y.strings.length;++C)typeof y.strings[C]=="string"?g.base64.decode(y.strings[C],x.strings[C]=g.newBuffer(g.base64.length(y.strings[C])),0):y.strings[C].length>=0&&(x.strings[C]=y.strings[C])}if(y.tensors){if(!Array.isArray(y.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");x.tensors=[];for(var C=0;C<y.tensors.length;++C){if(typeof y.tensors[C]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");x.tensors[C]=v.onnx.TensorProto.fromObject(y.tensors[C])}}if(y.graphs){if(!Array.isArray(y.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");x.graphs=[];for(var C=0;C<y.graphs.length;++C){if(typeof y.graphs[C]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");x.graphs[C]=v.onnx.GraphProto.fromObject(y.graphs[C])}}if(y.sparseTensors){if(!Array.isArray(y.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");x.sparseTensors=[];for(var C=0;C<y.sparseTensors.length;++C){if(typeof y.sparseTensors[C]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");x.sparseTensors[C]=v.onnx.SparseTensorProto.fromObject(y.sparseTensors[C])}}if(y.typeProtos){if(!Array.isArray(y.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");x.typeProtos=[];for(var C=0;C<y.typeProtos.length;++C){if(typeof y.typeProtos[C]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");x.typeProtos[C]=v.onnx.TypeProto.fromObject(y.typeProtos[C])}}return x},$.toObject=function(y,x){x||(x={});var C={};if((x.arrays||x.defaults)&&(C.floats=[],C.ints=[],C.strings=[],C.tensors=[],C.graphs=[],C.typeProtos=[],C.sparseTensors=[]),x.defaults){if(C.name="",C.f=0,g.Long){var E=new g.Long(0,0,!1);C.i=x.longs===String?E.toString():x.longs===Number?E.toNumber():E}else C.i=x.longs===String?"0":0;x.bytes===String?C.s="":(C.s=[],x.bytes!==Array&&(C.s=g.newBuffer(C.s))),C.t=null,C.g=null,C.docString="",C.tp=null,C.type=x.enums===String?"UNDEFINED":0,C.refAttrName="",C.sparseTensor=null}if(y.name!=null&&y.hasOwnProperty("name")&&(C.name=y.name),y.f!=null&&y.hasOwnProperty("f")&&(C.f=x.json&&!isFinite(y.f)?String(y.f):y.f),y.i!=null&&y.hasOwnProperty("i")&&(typeof y.i=="number"?C.i=x.longs===String?String(y.i):y.i:C.i=x.longs===String?g.Long.prototype.toString.call(y.i):x.longs===Number?new g.LongBits(y.i.low>>>0,y.i.high>>>0).toNumber():y.i),y.s!=null&&y.hasOwnProperty("s")&&(C.s=x.bytes===String?g.base64.encode(y.s,0,y.s.length):x.bytes===Array?Array.prototype.slice.call(y.s):y.s),y.t!=null&&y.hasOwnProperty("t")&&(C.t=v.onnx.TensorProto.toObject(y.t,x)),y.g!=null&&y.hasOwnProperty("g")&&(C.g=v.onnx.GraphProto.toObject(y.g,x)),y.floats&&y.floats.length){C.floats=[];for(var N=0;N<y.floats.length;++N)C.floats[N]=x.json&&!isFinite(y.floats[N])?String(y.floats[N]):y.floats[N]}if(y.ints&&y.ints.length){C.ints=[];for(var N=0;N<y.ints.length;++N)typeof y.ints[N]=="number"?C.ints[N]=x.longs===String?String(y.ints[N]):y.ints[N]:C.ints[N]=x.longs===String?g.Long.prototype.toString.call(y.ints[N]):x.longs===Number?new g.LongBits(y.ints[N].low>>>0,y.ints[N].high>>>0).toNumber():y.ints[N]}if(y.strings&&y.strings.length){C.strings=[];for(var N=0;N<y.strings.length;++N)C.strings[N]=x.bytes===String?g.base64.encode(y.strings[N],0,y.strings[N].length):x.bytes===Array?Array.prototype.slice.call(y.strings[N]):y.strings[N]}if(y.tensors&&y.tensors.length){C.tensors=[];for(var N=0;N<y.tensors.length;++N)C.tensors[N]=v.onnx.TensorProto.toObject(y.tensors[N],x)}if(y.graphs&&y.graphs.length){C.graphs=[];for(var N=0;N<y.graphs.length;++N)C.graphs[N]=v.onnx.GraphProto.toObject(y.graphs[N],x)}if(y.docString!=null&&y.hasOwnProperty("docString")&&(C.docString=y.docString),y.tp!=null&&y.hasOwnProperty("tp")&&(C.tp=v.onnx.TypeProto.toObject(y.tp,x)),y.typeProtos&&y.typeProtos.length){C.typeProtos=[];for(var N=0;N<y.typeProtos.length;++N)C.typeProtos[N]=v.onnx.TypeProto.toObject(y.typeProtos[N],x)}if(y.type!=null&&y.hasOwnProperty("type")&&(C.type=x.enums===String?v.onnx.AttributeProto.AttributeType[y.type]===void 0?y.type:v.onnx.AttributeProto.AttributeType[y.type]:y.type),y.refAttrName!=null&&y.hasOwnProperty("refAttrName")&&(C.refAttrName=y.refAttrName),y.sparseTensor!=null&&y.hasOwnProperty("sparseTensor")&&(C.sparseTensor=v.onnx.SparseTensorProto.toObject(y.sparseTensor,x)),y.sparseTensors&&y.sparseTensors.length){C.sparseTensors=[];for(var N=0;N<y.sparseTensors.length;++N)C.sparseTensors[N]=v.onnx.SparseTensorProto.toObject(y.sparseTensors[N],x)}return C},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(y){return y===void 0&&(y="type.googleapis.com"),y+"/onnx.AttributeProto"},$.AttributeType=function(){var y={},x=Object.create(y);return x[y[0]="UNDEFINED"]=0,x[y[1]="FLOAT"]=1,x[y[2]="INT"]=2,x[y[3]="STRING"]=3,x[y[4]="TENSOR"]=4,x[y[5]="GRAPH"]=5,x[y[11]="SPARSE_TENSOR"]=11,x[y[13]="TYPE_PROTO"]=13,x[y[6]="FLOATS"]=6,x[y[7]="INTS"]=7,x[y[8]="STRINGS"]=8,x[y[9]="TENSORS"]=9,x[y[10]="GRAPHS"]=10,x[y[12]="SPARSE_TENSORS"]=12,x[y[14]="TYPE_PROTOS"]=14,x}(),$}(),b.ValueInfoProto=function(){function $(y){if(y)for(var x=Object.keys(y),C=0;C<x.length;++C)y[x[C]]!=null&&(this[x[C]]=y[x[C]])}return $.prototype.name="",$.prototype.type=null,$.prototype.docString="",$.create=function(y){return new $(y)},$.encode=function(y,x){return x||(x=f.create()),y.name!=null&&Object.hasOwnProperty.call(y,"name")&&x.uint32(10).string(y.name),y.type!=null&&Object.hasOwnProperty.call(y,"type")&&v.onnx.TypeProto.encode(y.type,x.uint32(18).fork()).ldelim(),y.docString!=null&&Object.hasOwnProperty.call(y,"docString")&&x.uint32(26).string(y.docString),x},$.encodeDelimited=function(y,x){return this.encode(y,x).ldelim()},$.decode=function(y,x){y instanceof d||(y=d.create(y));for(var C=x===void 0?y.len:y.pos+x,E=new v.onnx.ValueInfoProto;y.pos<C;){var N=y.uint32();switch(N>>>3){case 1:{E.name=y.string();break}case 2:{E.type=v.onnx.TypeProto.decode(y,y.uint32());break}case 3:{E.docString=y.string();break}default:y.skipType(N&7);break}}return E},$.decodeDelimited=function(y){return y instanceof d||(y=new d(y)),this.decode(y,y.uint32())},$.verify=function(y){if(typeof y!="object"||y===null)return"object expected";if(y.name!=null&&y.hasOwnProperty("name")&&!g.isString(y.name))return"name: string expected";if(y.type!=null&&y.hasOwnProperty("type")){var x=v.onnx.TypeProto.verify(y.type);if(x)return"type."+x}return y.docString!=null&&y.hasOwnProperty("docString")&&!g.isString(y.docString)?"docString: string expected":null},$.fromObject=function(y){if(y instanceof v.onnx.ValueInfoProto)return y;var x=new v.onnx.ValueInfoProto;if(y.name!=null&&(x.name=String(y.name)),y.type!=null){if(typeof y.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");x.type=v.onnx.TypeProto.fromObject(y.type)}return y.docString!=null&&(x.docString=String(y.docString)),x},$.toObject=function(y,x){x||(x={});var C={};return x.defaults&&(C.name="",C.type=null,C.docString=""),y.name!=null&&y.hasOwnProperty("name")&&(C.name=y.name),y.type!=null&&y.hasOwnProperty("type")&&(C.type=v.onnx.TypeProto.toObject(y.type,x)),y.docString!=null&&y.hasOwnProperty("docString")&&(C.docString=y.docString),C},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(y){return y===void 0&&(y="type.googleapis.com"),y+"/onnx.ValueInfoProto"},$}(),b.NodeProto=function(){function $(y){if(this.input=[],this.output=[],this.attribute=[],y)for(var x=Object.keys(y),C=0;C<x.length;++C)y[x[C]]!=null&&(this[x[C]]=y[x[C]])}return $.prototype.input=g.emptyArray,$.prototype.output=g.emptyArray,$.prototype.name="",$.prototype.opType="",$.prototype.domain="",$.prototype.attribute=g.emptyArray,$.prototype.docString="",$.create=function(y){return new $(y)},$.encode=function(y,x){if(x||(x=f.create()),y.input!=null&&y.input.length)for(var C=0;C<y.input.length;++C)x.uint32(10).string(y.input[C]);if(y.output!=null&&y.output.length)for(var C=0;C<y.output.length;++C)x.uint32(18).string(y.output[C]);if(y.name!=null&&Object.hasOwnProperty.call(y,"name")&&x.uint32(26).string(y.name),y.opType!=null&&Object.hasOwnProperty.call(y,"opType")&&x.uint32(34).string(y.opType),y.attribute!=null&&y.attribute.length)for(var C=0;C<y.attribute.length;++C)v.onnx.AttributeProto.encode(y.attribute[C],x.uint32(42).fork()).ldelim();return y.docString!=null&&Object.hasOwnProperty.call(y,"docString")&&x.uint32(50).string(y.docString),y.domain!=null&&Object.hasOwnProperty.call(y,"domain")&&x.uint32(58).string(y.domain),x},$.encodeDelimited=function(y,x){return this.encode(y,x).ldelim()},$.decode=function(y,x){y instanceof d||(y=d.create(y));for(var C=x===void 0?y.len:y.pos+x,E=new v.onnx.NodeProto;y.pos<C;){var N=y.uint32();switch(N>>>3){case 1:{E.input&&E.input.length||(E.input=[]),E.input.push(y.string());break}case 2:{E.output&&E.output.length||(E.output=[]),E.output.push(y.string());break}case 3:{E.name=y.string();break}case 4:{E.opType=y.string();break}case 7:{E.domain=y.string();break}case 5:{E.attribute&&E.attribute.length||(E.attribute=[]),E.attribute.push(v.onnx.AttributeProto.decode(y,y.uint32()));break}case 6:{E.docString=y.string();break}default:y.skipType(N&7);break}}return E},$.decodeDelimited=function(y){return y instanceof d||(y=new d(y)),this.decode(y,y.uint32())},$.verify=function(y){if(typeof y!="object"||y===null)return"object expected";if(y.input!=null&&y.hasOwnProperty("input")){if(!Array.isArray(y.input))return"input: array expected";for(var x=0;x<y.input.length;++x)if(!g.isString(y.input[x]))return"input: string[] expected"}if(y.output!=null&&y.hasOwnProperty("output")){if(!Array.isArray(y.output))return"output: array expected";for(var x=0;x<y.output.length;++x)if(!g.isString(y.output[x]))return"output: string[] expected"}if(y.name!=null&&y.hasOwnProperty("name")&&!g.isString(y.name))return"name: string expected";if(y.opType!=null&&y.hasOwnProperty("opType")&&!g.isString(y.opType))return"opType: string expected";if(y.domain!=null&&y.hasOwnProperty("domain")&&!g.isString(y.domain))return"domain: string expected";if(y.attribute!=null&&y.hasOwnProperty("attribute")){if(!Array.isArray(y.attribute))return"attribute: array expected";for(var x=0;x<y.attribute.length;++x){var C=v.onnx.AttributeProto.verify(y.attribute[x]);if(C)return"attribute."+C}}return y.docString!=null&&y.hasOwnProperty("docString")&&!g.isString(y.docString)?"docString: string expected":null},$.fromObject=function(y){if(y instanceof v.onnx.NodeProto)return y;var x=new v.onnx.NodeProto;if(y.input){if(!Array.isArray(y.input))throw TypeError(".onnx.NodeProto.input: array expected");x.input=[];for(var C=0;C<y.input.length;++C)x.input[C]=String(y.input[C])}if(y.output){if(!Array.isArray(y.output))throw TypeError(".onnx.NodeProto.output: array expected");x.output=[];for(var C=0;C<y.output.length;++C)x.output[C]=String(y.output[C])}if(y.name!=null&&(x.name=String(y.name)),y.opType!=null&&(x.opType=String(y.opType)),y.domain!=null&&(x.domain=String(y.domain)),y.attribute){if(!Array.isArray(y.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");x.attribute=[];for(var C=0;C<y.attribute.length;++C){if(typeof y.attribute[C]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");x.attribute[C]=v.onnx.AttributeProto.fromObject(y.attribute[C])}}return y.docString!=null&&(x.docString=String(y.docString)),x},$.toObject=function(y,x){x||(x={});var C={};if((x.arrays||x.defaults)&&(C.input=[],C.output=[],C.attribute=[]),x.defaults&&(C.name="",C.opType="",C.docString="",C.domain=""),y.input&&y.input.length){C.input=[];for(var E=0;E<y.input.length;++E)C.input[E]=y.input[E]}if(y.output&&y.output.length){C.output=[];for(var E=0;E<y.output.length;++E)C.output[E]=y.output[E]}if(y.name!=null&&y.hasOwnProperty("name")&&(C.name=y.name),y.opType!=null&&y.hasOwnProperty("opType")&&(C.opType=y.opType),y.attribute&&y.attribute.length){C.attribute=[];for(var E=0;E<y.attribute.length;++E)C.attribute[E]=v.onnx.AttributeProto.toObject(y.attribute[E],x)}return y.docString!=null&&y.hasOwnProperty("docString")&&(C.docString=y.docString),y.domain!=null&&y.hasOwnProperty("domain")&&(C.domain=y.domain),C},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(y){return y===void 0&&(y="type.googleapis.com"),y+"/onnx.NodeProto"},$}(),b.TrainingInfoProto=function(){function $(y){if(this.initializationBinding=[],this.updateBinding=[],y)for(var x=Object.keys(y),C=0;C<x.length;++C)y[x[C]]!=null&&(this[x[C]]=y[x[C]])}return $.prototype.initialization=null,$.prototype.algorithm=null,$.prototype.initializationBinding=g.emptyArray,$.prototype.updateBinding=g.emptyArray,$.create=function(y){return new $(y)},$.encode=function(y,x){if(x||(x=f.create()),y.initialization!=null&&Object.hasOwnProperty.call(y,"initialization")&&v.onnx.GraphProto.encode(y.initialization,x.uint32(10).fork()).ldelim(),y.algorithm!=null&&Object.hasOwnProperty.call(y,"algorithm")&&v.onnx.GraphProto.encode(y.algorithm,x.uint32(18).fork()).ldelim(),y.initializationBinding!=null&&y.initializationBinding.length)for(var C=0;C<y.initializationBinding.length;++C)v.onnx.StringStringEntryProto.encode(y.initializationBinding[C],x.uint32(26).fork()).ldelim();if(y.updateBinding!=null&&y.updateBinding.length)for(var C=0;C<y.updateBinding.length;++C)v.onnx.StringStringEntryProto.encode(y.updateBinding[C],x.uint32(34).fork()).ldelim();return x},$.encodeDelimited=function(y,x){return this.encode(y,x).ldelim()},$.decode=function(y,x){y instanceof d||(y=d.create(y));for(var C=x===void 0?y.len:y.pos+x,E=new v.onnx.TrainingInfoProto;y.pos<C;){var N=y.uint32();switch(N>>>3){case 1:{E.initialization=v.onnx.GraphProto.decode(y,y.uint32());break}case 2:{E.algorithm=v.onnx.GraphProto.decode(y,y.uint32());break}case 3:{E.initializationBinding&&E.initializationBinding.length||(E.initializationBinding=[]),E.initializationBinding.push(v.onnx.StringStringEntryProto.decode(y,y.uint32()));break}case 4:{E.updateBinding&&E.updateBinding.length||(E.updateBinding=[]),E.updateBinding.push(v.onnx.StringStringEntryProto.decode(y,y.uint32()));break}default:y.skipType(N&7);break}}return E},$.decodeDelimited=function(y){return y instanceof d||(y=new d(y)),this.decode(y,y.uint32())},$.verify=function(y){if(typeof y!="object"||y===null)return"object expected";if(y.initialization!=null&&y.hasOwnProperty("initialization")){var x=v.onnx.GraphProto.verify(y.initialization);if(x)return"initialization."+x}if(y.algorithm!=null&&y.hasOwnProperty("algorithm")){var x=v.onnx.GraphProto.verify(y.algorithm);if(x)return"algorithm."+x}if(y.initializationBinding!=null&&y.hasOwnProperty("initializationBinding")){if(!Array.isArray(y.initializationBinding))return"initializationBinding: array expected";for(var C=0;C<y.initializationBinding.length;++C){var x=v.onnx.StringStringEntryProto.verify(y.initializationBinding[C]);if(x)return"initializationBinding."+x}}if(y.updateBinding!=null&&y.hasOwnProperty("updateBinding")){if(!Array.isArray(y.updateBinding))return"updateBinding: array expected";for(var C=0;C<y.updateBinding.length;++C){var x=v.onnx.StringStringEntryProto.verify(y.updateBinding[C]);if(x)return"updateBinding."+x}}return null},$.fromObject=function(y){if(y instanceof v.onnx.TrainingInfoProto)return y;var x=new v.onnx.TrainingInfoProto;if(y.initialization!=null){if(typeof y.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");x.initialization=v.onnx.GraphProto.fromObject(y.initialization)}if(y.algorithm!=null){if(typeof y.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");x.algorithm=v.onnx.GraphProto.fromObject(y.algorithm)}if(y.initializationBinding){if(!Array.isArray(y.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");x.initializationBinding=[];for(var C=0;C<y.initializationBinding.length;++C){if(typeof y.initializationBinding[C]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");x.initializationBinding[C]=v.onnx.StringStringEntryProto.fromObject(y.initializationBinding[C])}}if(y.updateBinding){if(!Array.isArray(y.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");x.updateBinding=[];for(var C=0;C<y.updateBinding.length;++C){if(typeof y.updateBinding[C]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");x.updateBinding[C]=v.onnx.StringStringEntryProto.fromObject(y.updateBinding[C])}}return x},$.toObject=function(y,x){x||(x={});var C={};if((x.arrays||x.defaults)&&(C.initializationBinding=[],C.updateBinding=[]),x.defaults&&(C.initialization=null,C.algorithm=null),y.initialization!=null&&y.hasOwnProperty("initialization")&&(C.initialization=v.onnx.GraphProto.toObject(y.initialization,x)),y.algorithm!=null&&y.hasOwnProperty("algorithm")&&(C.algorithm=v.onnx.GraphProto.toObject(y.algorithm,x)),y.initializationBinding&&y.initializationBinding.length){C.initializationBinding=[];for(var E=0;E<y.initializationBinding.length;++E)C.initializationBinding[E]=v.onnx.StringStringEntryProto.toObject(y.initializationBinding[E],x)}if(y.updateBinding&&y.updateBinding.length){C.updateBinding=[];for(var E=0;E<y.updateBinding.length;++E)C.updateBinding[E]=v.onnx.StringStringEntryProto.toObject(y.updateBinding[E],x)}return C},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(y){return y===void 0&&(y="type.googleapis.com"),y+"/onnx.TrainingInfoProto"},$}(),b.ModelProto=function(){function $(y){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],y)for(var x=Object.keys(y),C=0;C<x.length;++C)y[x[C]]!=null&&(this[x[C]]=y[x[C]])}return $.prototype.irVersion=g.Long?g.Long.fromBits(0,0,!1):0,$.prototype.opsetImport=g.emptyArray,$.prototype.producerName="",$.prototype.producerVersion="",$.prototype.domain="",$.prototype.modelVersion=g.Long?g.Long.fromBits(0,0,!1):0,$.prototype.docString="",$.prototype.graph=null,$.prototype.metadataProps=g.emptyArray,$.prototype.trainingInfo=g.emptyArray,$.prototype.functions=g.emptyArray,$.create=function(y){return new $(y)},$.encode=function(y,x){if(x||(x=f.create()),y.irVersion!=null&&Object.hasOwnProperty.call(y,"irVersion")&&x.uint32(8).int64(y.irVersion),y.producerName!=null&&Object.hasOwnProperty.call(y,"producerName")&&x.uint32(18).string(y.producerName),y.producerVersion!=null&&Object.hasOwnProperty.call(y,"producerVersion")&&x.uint32(26).string(y.producerVersion),y.domain!=null&&Object.hasOwnProperty.call(y,"domain")&&x.uint32(34).string(y.domain),y.modelVersion!=null&&Object.hasOwnProperty.call(y,"modelVersion")&&x.uint32(40).int64(y.modelVersion),y.docString!=null&&Object.hasOwnProperty.call(y,"docString")&&x.uint32(50).string(y.docString),y.graph!=null&&Object.hasOwnProperty.call(y,"graph")&&v.onnx.GraphProto.encode(y.graph,x.uint32(58).fork()).ldelim(),y.opsetImport!=null&&y.opsetImport.length)for(var C=0;C<y.opsetImport.length;++C)v.onnx.OperatorSetIdProto.encode(y.opsetImport[C],x.uint32(66).fork()).ldelim();if(y.metadataProps!=null&&y.metadataProps.length)for(var C=0;C<y.metadataProps.length;++C)v.onnx.StringStringEntryProto.encode(y.metadataProps[C],x.uint32(114).fork()).ldelim();if(y.trainingInfo!=null&&y.trainingInfo.length)for(var C=0;C<y.trainingInfo.length;++C)v.onnx.TrainingInfoProto.encode(y.trainingInfo[C],x.uint32(162).fork()).ldelim();if(y.functions!=null&&y.functions.length)for(var C=0;C<y.functions.length;++C)v.onnx.FunctionProto.encode(y.functions[C],x.uint32(202).fork()).ldelim();return x},$.encodeDelimited=function(y,x){return this.encode(y,x).ldelim()},$.decode=function(y,x){y instanceof d||(y=d.create(y));for(var C=x===void 0?y.len:y.pos+x,E=new v.onnx.ModelProto;y.pos<C;){var N=y.uint32();switch(N>>>3){case 1:{E.irVersion=y.int64();break}case 8:{E.opsetImport&&E.opsetImport.length||(E.opsetImport=[]),E.opsetImport.push(v.onnx.OperatorSetIdProto.decode(y,y.uint32()));break}case 2:{E.producerName=y.string();break}case 3:{E.producerVersion=y.string();break}case 4:{E.domain=y.string();break}case 5:{E.modelVersion=y.int64();break}case 6:{E.docString=y.string();break}case 7:{E.graph=v.onnx.GraphProto.decode(y,y.uint32());break}case 14:{E.metadataProps&&E.metadataProps.length||(E.metadataProps=[]),E.metadataProps.push(v.onnx.StringStringEntryProto.decode(y,y.uint32()));break}case 20:{E.trainingInfo&&E.trainingInfo.length||(E.trainingInfo=[]),E.trainingInfo.push(v.onnx.TrainingInfoProto.decode(y,y.uint32()));break}case 25:{E.functions&&E.functions.length||(E.functions=[]),E.functions.push(v.onnx.FunctionProto.decode(y,y.uint32()));break}default:y.skipType(N&7);break}}return E},$.decodeDelimited=function(y){return y instanceof d||(y=new d(y)),this.decode(y,y.uint32())},$.verify=function(y){if(typeof y!="object"||y===null)return"object expected";if(y.irVersion!=null&&y.hasOwnProperty("irVersion")&&!g.isInteger(y.irVersion)&&!(y.irVersion&&g.isInteger(y.irVersion.low)&&g.isInteger(y.irVersion.high)))return"irVersion: integer|Long expected";if(y.opsetImport!=null&&y.hasOwnProperty("opsetImport")){if(!Array.isArray(y.opsetImport))return"opsetImport: array expected";for(var x=0;x<y.opsetImport.length;++x){var C=v.onnx.OperatorSetIdProto.verify(y.opsetImport[x]);if(C)return"opsetImport."+C}}if(y.producerName!=null&&y.hasOwnProperty("producerName")&&!g.isString(y.producerName))return"producerName: string expected";if(y.producerVersion!=null&&y.hasOwnProperty("producerVersion")&&!g.isString(y.producerVersion))return"producerVersion: string expected";if(y.domain!=null&&y.hasOwnProperty("domain")&&!g.isString(y.domain))return"domain: string expected";if(y.modelVersion!=null&&y.hasOwnProperty("modelVersion")&&!g.isInteger(y.modelVersion)&&!(y.modelVersion&&g.isInteger(y.modelVersion.low)&&g.isInteger(y.modelVersion.high)))return"modelVersion: integer|Long expected";if(y.docString!=null&&y.hasOwnProperty("docString")&&!g.isString(y.docString))return"docString: string expected";if(y.graph!=null&&y.hasOwnProperty("graph")){var C=v.onnx.GraphProto.verify(y.graph);if(C)return"graph."+C}if(y.metadataProps!=null&&y.hasOwnProperty("metadataProps")){if(!Array.isArray(y.metadataProps))return"metadataProps: array expected";for(var x=0;x<y.metadataProps.length;++x){var C=v.onnx.StringStringEntryProto.verify(y.metadataProps[x]);if(C)return"metadataProps."+C}}if(y.trainingInfo!=null&&y.hasOwnProperty("trainingInfo")){if(!Array.isArray(y.trainingInfo))return"trainingInfo: array expected";for(var x=0;x<y.trainingInfo.length;++x){var C=v.onnx.TrainingInfoProto.verify(y.trainingInfo[x]);if(C)return"trainingInfo."+C}}if(y.functions!=null&&y.hasOwnProperty("functions")){if(!Array.isArray(y.functions))return"functions: array expected";for(var x=0;x<y.functions.length;++x){var C=v.onnx.FunctionProto.verify(y.functions[x]);if(C)return"functions."+C}}return null},$.fromObject=function(y){if(y instanceof v.onnx.ModelProto)return y;var x=new v.onnx.ModelProto;if(y.irVersion!=null&&(g.Long?(x.irVersion=g.Long.fromValue(y.irVersion)).unsigned=!1:typeof y.irVersion=="string"?x.irVersion=parseInt(y.irVersion,10):typeof y.irVersion=="number"?x.irVersion=y.irVersion:typeof y.irVersion=="object"&&(x.irVersion=new g.LongBits(y.irVersion.low>>>0,y.irVersion.high>>>0).toNumber())),y.opsetImport){if(!Array.isArray(y.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");x.opsetImport=[];for(var C=0;C<y.opsetImport.length;++C){if(typeof y.opsetImport[C]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");x.opsetImport[C]=v.onnx.OperatorSetIdProto.fromObject(y.opsetImport[C])}}if(y.producerName!=null&&(x.producerName=String(y.producerName)),y.producerVersion!=null&&(x.producerVersion=String(y.producerVersion)),y.domain!=null&&(x.domain=String(y.domain)),y.modelVersion!=null&&(g.Long?(x.modelVersion=g.Long.fromValue(y.modelVersion)).unsigned=!1:typeof y.modelVersion=="string"?x.modelVersion=parseInt(y.modelVersion,10):typeof y.modelVersion=="number"?x.modelVersion=y.modelVersion:typeof y.modelVersion=="object"&&(x.modelVersion=new g.LongBits(y.modelVersion.low>>>0,y.modelVersion.high>>>0).toNumber())),y.docString!=null&&(x.docString=String(y.docString)),y.graph!=null){if(typeof y.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");x.graph=v.onnx.GraphProto.fromObject(y.graph)}if(y.metadataProps){if(!Array.isArray(y.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");x.metadataProps=[];for(var C=0;C<y.metadataProps.length;++C){if(typeof y.metadataProps[C]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");x.metadataProps[C]=v.onnx.StringStringEntryProto.fromObject(y.metadataProps[C])}}if(y.trainingInfo){if(!Array.isArray(y.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");x.trainingInfo=[];for(var C=0;C<y.trainingInfo.length;++C){if(typeof y.trainingInfo[C]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");x.trainingInfo[C]=v.onnx.TrainingInfoProto.fromObject(y.trainingInfo[C])}}if(y.functions){if(!Array.isArray(y.functions))throw TypeError(".onnx.ModelProto.functions: array expected");x.functions=[];for(var C=0;C<y.functions.length;++C){if(typeof y.functions[C]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");x.functions[C]=v.onnx.FunctionProto.fromObject(y.functions[C])}}return x},$.toObject=function(y,x){x||(x={});var C={};if((x.arrays||x.defaults)&&(C.opsetImport=[],C.metadataProps=[],C.trainingInfo=[],C.functions=[]),x.defaults){if(g.Long){var E=new g.Long(0,0,!1);C.irVersion=x.longs===String?E.toString():x.longs===Number?E.toNumber():E}else C.irVersion=x.longs===String?"0":0;if(C.producerName="",C.producerVersion="",C.domain="",g.Long){var E=new g.Long(0,0,!1);C.modelVersion=x.longs===String?E.toString():x.longs===Number?E.toNumber():E}else C.modelVersion=x.longs===String?"0":0;C.docString="",C.graph=null}if(y.irVersion!=null&&y.hasOwnProperty("irVersion")&&(typeof y.irVersion=="number"?C.irVersion=x.longs===String?String(y.irVersion):y.irVersion:C.irVersion=x.longs===String?g.Long.prototype.toString.call(y.irVersion):x.longs===Number?new g.LongBits(y.irVersion.low>>>0,y.irVersion.high>>>0).toNumber():y.irVersion),y.producerName!=null&&y.hasOwnProperty("producerName")&&(C.producerName=y.producerName),y.producerVersion!=null&&y.hasOwnProperty("producerVersion")&&(C.producerVersion=y.producerVersion),y.domain!=null&&y.hasOwnProperty("domain")&&(C.domain=y.domain),y.modelVersion!=null&&y.hasOwnProperty("modelVersion")&&(typeof y.modelVersion=="number"?C.modelVersion=x.longs===String?String(y.modelVersion):y.modelVersion:C.modelVersion=x.longs===String?g.Long.prototype.toString.call(y.modelVersion):x.longs===Number?new g.LongBits(y.modelVersion.low>>>0,y.modelVersion.high>>>0).toNumber():y.modelVersion),y.docString!=null&&y.hasOwnProperty("docString")&&(C.docString=y.docString),y.graph!=null&&y.hasOwnProperty("graph")&&(C.graph=v.onnx.GraphProto.toObject(y.graph,x)),y.opsetImport&&y.opsetImport.length){C.opsetImport=[];for(var N=0;N<y.opsetImport.length;++N)C.opsetImport[N]=v.onnx.OperatorSetIdProto.toObject(y.opsetImport[N],x)}if(y.metadataProps&&y.metadataProps.length){C.metadataProps=[];for(var N=0;N<y.metadataProps.length;++N)C.metadataProps[N]=v.onnx.StringStringEntryProto.toObject(y.metadataProps[N],x)}if(y.trainingInfo&&y.trainingInfo.length){C.trainingInfo=[];for(var N=0;N<y.trainingInfo.length;++N)C.trainingInfo[N]=v.onnx.TrainingInfoProto.toObject(y.trainingInfo[N],x)}if(y.functions&&y.functions.length){C.functions=[];for(var N=0;N<y.functions.length;++N)C.functions[N]=v.onnx.FunctionProto.toObject(y.functions[N],x)}return C},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(y){return y===void 0&&(y="type.googleapis.com"),y+"/onnx.ModelProto"},$}(),b.StringStringEntryProto=function(){function $(y){if(y)for(var x=Object.keys(y),C=0;C<x.length;++C)y[x[C]]!=null&&(this[x[C]]=y[x[C]])}return $.prototype.key="",$.prototype.value="",$.create=function(y){return new $(y)},$.encode=function(y,x){return x||(x=f.create()),y.key!=null&&Object.hasOwnProperty.call(y,"key")&&x.uint32(10).string(y.key),y.value!=null&&Object.hasOwnProperty.call(y,"value")&&x.uint32(18).string(y.value),x},$.encodeDelimited=function(y,x){return this.encode(y,x).ldelim()},$.decode=function(y,x){y instanceof d||(y=d.create(y));for(var C=x===void 0?y.len:y.pos+x,E=new v.onnx.StringStringEntryProto;y.pos<C;){var N=y.uint32();switch(N>>>3){case 1:{E.key=y.string();break}case 2:{E.value=y.string();break}default:y.skipType(N&7);break}}return E},$.decodeDelimited=function(y){return y instanceof d||(y=new d(y)),this.decode(y,y.uint32())},$.verify=function(y){return typeof y!="object"||y===null?"object expected":y.key!=null&&y.hasOwnProperty("key")&&!g.isString(y.key)?"key: string expected":y.value!=null&&y.hasOwnProperty("value")&&!g.isString(y.value)?"value: string expected":null},$.fromObject=function(y){if(y instanceof v.onnx.StringStringEntryProto)return y;var x=new v.onnx.StringStringEntryProto;return y.key!=null&&(x.key=String(y.key)),y.value!=null&&(x.value=String(y.value)),x},$.toObject=function(y,x){x||(x={});var C={};return x.defaults&&(C.key="",C.value=""),y.key!=null&&y.hasOwnProperty("key")&&(C.key=y.key),y.value!=null&&y.hasOwnProperty("value")&&(C.value=y.value),C},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(y){return y===void 0&&(y="type.googleapis.com"),y+"/onnx.StringStringEntryProto"},$}(),b.TensorAnnotation=function(){function $(y){if(this.quantParameterTensorNames=[],y)for(var x=Object.keys(y),C=0;C<x.length;++C)y[x[C]]!=null&&(this[x[C]]=y[x[C]])}return $.prototype.tensorName="",$.prototype.quantParameterTensorNames=g.emptyArray,$.create=function(y){return new $(y)},$.encode=function(y,x){if(x||(x=f.create()),y.tensorName!=null&&Object.hasOwnProperty.call(y,"tensorName")&&x.uint32(10).string(y.tensorName),y.quantParameterTensorNames!=null&&y.quantParameterTensorNames.length)for(var C=0;C<y.quantParameterTensorNames.length;++C)v.onnx.StringStringEntryProto.encode(y.quantParameterTensorNames[C],x.uint32(18).fork()).ldelim();return x},$.encodeDelimited=function(y,x){return this.encode(y,x).ldelim()},$.decode=function(y,x){y instanceof d||(y=d.create(y));for(var C=x===void 0?y.len:y.pos+x,E=new v.onnx.TensorAnnotation;y.pos<C;){var N=y.uint32();switch(N>>>3){case 1:{E.tensorName=y.string();break}case 2:{E.quantParameterTensorNames&&E.quantParameterTensorNames.length||(E.quantParameterTensorNames=[]),E.quantParameterTensorNames.push(v.onnx.StringStringEntryProto.decode(y,y.uint32()));break}default:y.skipType(N&7);break}}return E},$.decodeDelimited=function(y){return y instanceof d||(y=new d(y)),this.decode(y,y.uint32())},$.verify=function(y){if(typeof y!="object"||y===null)return"object expected";if(y.tensorName!=null&&y.hasOwnProperty("tensorName")&&!g.isString(y.tensorName))return"tensorName: string expected";if(y.quantParameterTensorNames!=null&&y.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(y.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var x=0;x<y.quantParameterTensorNames.length;++x){var C=v.onnx.StringStringEntryProto.verify(y.quantParameterTensorNames[x]);if(C)return"quantParameterTensorNames."+C}}return null},$.fromObject=function(y){if(y instanceof v.onnx.TensorAnnotation)return y;var x=new v.onnx.TensorAnnotation;if(y.tensorName!=null&&(x.tensorName=String(y.tensorName)),y.quantParameterTensorNames){if(!Array.isArray(y.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");x.quantParameterTensorNames=[];for(var C=0;C<y.quantParameterTensorNames.length;++C){if(typeof y.quantParameterTensorNames[C]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");x.quantParameterTensorNames[C]=v.onnx.StringStringEntryProto.fromObject(y.quantParameterTensorNames[C])}}return x},$.toObject=function(y,x){x||(x={});var C={};if((x.arrays||x.defaults)&&(C.quantParameterTensorNames=[]),x.defaults&&(C.tensorName=""),y.tensorName!=null&&y.hasOwnProperty("tensorName")&&(C.tensorName=y.tensorName),y.quantParameterTensorNames&&y.quantParameterTensorNames.length){C.quantParameterTensorNames=[];for(var E=0;E<y.quantParameterTensorNames.length;++E)C.quantParameterTensorNames[E]=v.onnx.StringStringEntryProto.toObject(y.quantParameterTensorNames[E],x)}return C},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(y){return y===void 0&&(y="type.googleapis.com"),y+"/onnx.TensorAnnotation"},$}(),b.GraphProto=function(){function $(y){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],y)for(var x=Object.keys(y),C=0;C<x.length;++C)y[x[C]]!=null&&(this[x[C]]=y[x[C]])}return $.prototype.node=g.emptyArray,$.prototype.name="",$.prototype.initializer=g.emptyArray,$.prototype.sparseInitializer=g.emptyArray,$.prototype.docString="",$.prototype.input=g.emptyArray,$.prototype.output=g.emptyArray,$.prototype.valueInfo=g.emptyArray,$.prototype.quantizationAnnotation=g.emptyArray,$.create=function(y){return new $(y)},$.encode=function(y,x){if(x||(x=f.create()),y.node!=null&&y.node.length)for(var C=0;C<y.node.length;++C)v.onnx.NodeProto.encode(y.node[C],x.uint32(10).fork()).ldelim();if(y.name!=null&&Object.hasOwnProperty.call(y,"name")&&x.uint32(18).string(y.name),y.initializer!=null&&y.initializer.length)for(var C=0;C<y.initializer.length;++C)v.onnx.TensorProto.encode(y.initializer[C],x.uint32(42).fork()).ldelim();if(y.docString!=null&&Object.hasOwnProperty.call(y,"docString")&&x.uint32(82).string(y.docString),y.input!=null&&y.input.length)for(var C=0;C<y.input.length;++C)v.onnx.ValueInfoProto.encode(y.input[C],x.uint32(90).fork()).ldelim();if(y.output!=null&&y.output.length)for(var C=0;C<y.output.length;++C)v.onnx.ValueInfoProto.encode(y.output[C],x.uint32(98).fork()).ldelim();if(y.valueInfo!=null&&y.valueInfo.length)for(var C=0;C<y.valueInfo.length;++C)v.onnx.ValueInfoProto.encode(y.valueInfo[C],x.uint32(106).fork()).ldelim();if(y.quantizationAnnotation!=null&&y.quantizationAnnotation.length)for(var C=0;C<y.quantizationAnnotation.length;++C)v.onnx.TensorAnnotation.encode(y.quantizationAnnotation[C],x.uint32(114).fork()).ldelim();if(y.sparseInitializer!=null&&y.sparseInitializer.length)for(var C=0;C<y.sparseInitializer.length;++C)v.onnx.SparseTensorProto.encode(y.sparseInitializer[C],x.uint32(122).fork()).ldelim();return x},$.encodeDelimited=function(y,x){return this.encode(y,x).ldelim()},$.decode=function(y,x){y instanceof d||(y=d.create(y));for(var C=x===void 0?y.len:y.pos+x,E=new v.onnx.GraphProto;y.pos<C;){var N=y.uint32();switch(N>>>3){case 1:{E.node&&E.node.length||(E.node=[]),E.node.push(v.onnx.NodeProto.decode(y,y.uint32()));break}case 2:{E.name=y.string();break}case 5:{E.initializer&&E.initializer.length||(E.initializer=[]),E.initializer.push(v.onnx.TensorProto.decode(y,y.uint32()));break}case 15:{E.sparseInitializer&&E.sparseInitializer.length||(E.sparseInitializer=[]),E.sparseInitializer.push(v.onnx.SparseTensorProto.decode(y,y.uint32()));break}case 10:{E.docString=y.string();break}case 11:{E.input&&E.input.length||(E.input=[]),E.input.push(v.onnx.ValueInfoProto.decode(y,y.uint32()));break}case 12:{E.output&&E.output.length||(E.output=[]),E.output.push(v.onnx.ValueInfoProto.decode(y,y.uint32()));break}case 13:{E.valueInfo&&E.valueInfo.length||(E.valueInfo=[]),E.valueInfo.push(v.onnx.ValueInfoProto.decode(y,y.uint32()));break}case 14:{E.quantizationAnnotation&&E.quantizationAnnotation.length||(E.quantizationAnnotation=[]),E.quantizationAnnotation.push(v.onnx.TensorAnnotation.decode(y,y.uint32()));break}default:y.skipType(N&7);break}}return E},$.decodeDelimited=function(y){return y instanceof d||(y=new d(y)),this.decode(y,y.uint32())},$.verify=function(y){if(typeof y!="object"||y===null)return"object expected";if(y.node!=null&&y.hasOwnProperty("node")){if(!Array.isArray(y.node))return"node: array expected";for(var x=0;x<y.node.length;++x){var C=v.onnx.NodeProto.verify(y.node[x]);if(C)return"node."+C}}if(y.name!=null&&y.hasOwnProperty("name")&&!g.isString(y.name))return"name: string expected";if(y.initializer!=null&&y.hasOwnProperty("initializer")){if(!Array.isArray(y.initializer))return"initializer: array expected";for(var x=0;x<y.initializer.length;++x){var C=v.onnx.TensorProto.verify(y.initializer[x]);if(C)return"initializer."+C}}if(y.sparseInitializer!=null&&y.hasOwnProperty("sparseInitializer")){if(!Array.isArray(y.sparseInitializer))return"sparseInitializer: array expected";for(var x=0;x<y.sparseInitializer.length;++x){var C=v.onnx.SparseTensorProto.verify(y.sparseInitializer[x]);if(C)return"sparseInitializer."+C}}if(y.docString!=null&&y.hasOwnProperty("docString")&&!g.isString(y.docString))return"docString: string expected";if(y.input!=null&&y.hasOwnProperty("input")){if(!Array.isArray(y.input))return"input: array expected";for(var x=0;x<y.input.length;++x){var C=v.onnx.ValueInfoProto.verify(y.input[x]);if(C)return"input."+C}}if(y.output!=null&&y.hasOwnProperty("output")){if(!Array.isArray(y.output))return"output: array expected";for(var x=0;x<y.output.length;++x){var C=v.onnx.ValueInfoProto.verify(y.output[x]);if(C)return"output."+C}}if(y.valueInfo!=null&&y.hasOwnProperty("valueInfo")){if(!Array.isArray(y.valueInfo))return"valueInfo: array expected";for(var x=0;x<y.valueInfo.length;++x){var C=v.onnx.ValueInfoProto.verify(y.valueInfo[x]);if(C)return"valueInfo."+C}}if(y.quantizationAnnotation!=null&&y.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(y.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var x=0;x<y.quantizationAnnotation.length;++x){var C=v.onnx.TensorAnnotation.verify(y.quantizationAnnotation[x]);if(C)return"quantizationAnnotation."+C}}return null},$.fromObject=function(y){if(y instanceof v.onnx.GraphProto)return y;var x=new v.onnx.GraphProto;if(y.node){if(!Array.isArray(y.node))throw TypeError(".onnx.GraphProto.node: array expected");x.node=[];for(var C=0;C<y.node.length;++C){if(typeof y.node[C]!="object")throw TypeError(".onnx.GraphProto.node: object expected");x.node[C]=v.onnx.NodeProto.fromObject(y.node[C])}}if(y.name!=null&&(x.name=String(y.name)),y.initializer){if(!Array.isArray(y.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");x.initializer=[];for(var C=0;C<y.initializer.length;++C){if(typeof y.initializer[C]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");x.initializer[C]=v.onnx.TensorProto.fromObject(y.initializer[C])}}if(y.sparseInitializer){if(!Array.isArray(y.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");x.sparseInitializer=[];for(var C=0;C<y.sparseInitializer.length;++C){if(typeof y.sparseInitializer[C]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");x.sparseInitializer[C]=v.onnx.SparseTensorProto.fromObject(y.sparseInitializer[C])}}if(y.docString!=null&&(x.docString=String(y.docString)),y.input){if(!Array.isArray(y.input))throw TypeError(".onnx.GraphProto.input: array expected");x.input=[];for(var C=0;C<y.input.length;++C){if(typeof y.input[C]!="object")throw TypeError(".onnx.GraphProto.input: object expected");x.input[C]=v.onnx.ValueInfoProto.fromObject(y.input[C])}}if(y.output){if(!Array.isArray(y.output))throw TypeError(".onnx.GraphProto.output: array expected");x.output=[];for(var C=0;C<y.output.length;++C){if(typeof y.output[C]!="object")throw TypeError(".onnx.GraphProto.output: object expected");x.output[C]=v.onnx.ValueInfoProto.fromObject(y.output[C])}}if(y.valueInfo){if(!Array.isArray(y.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");x.valueInfo=[];for(var C=0;C<y.valueInfo.length;++C){if(typeof y.valueInfo[C]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");x.valueInfo[C]=v.onnx.ValueInfoProto.fromObject(y.valueInfo[C])}}if(y.quantizationAnnotation){if(!Array.isArray(y.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");x.quantizationAnnotation=[];for(var C=0;C<y.quantizationAnnotation.length;++C){if(typeof y.quantizationAnnotation[C]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");x.quantizationAnnotation[C]=v.onnx.TensorAnnotation.fromObject(y.quantizationAnnotation[C])}}return x},$.toObject=function(y,x){x||(x={});var C={};if((x.arrays||x.defaults)&&(C.node=[],C.initializer=[],C.input=[],C.output=[],C.valueInfo=[],C.quantizationAnnotation=[],C.sparseInitializer=[]),x.defaults&&(C.name="",C.docString=""),y.node&&y.node.length){C.node=[];for(var E=0;E<y.node.length;++E)C.node[E]=v.onnx.NodeProto.toObject(y.node[E],x)}if(y.name!=null&&y.hasOwnProperty("name")&&(C.name=y.name),y.initializer&&y.initializer.length){C.initializer=[];for(var E=0;E<y.initializer.length;++E)C.initializer[E]=v.onnx.TensorProto.toObject(y.initializer[E],x)}if(y.docString!=null&&y.hasOwnProperty("docString")&&(C.docString=y.docString),y.input&&y.input.length){C.input=[];for(var E=0;E<y.input.length;++E)C.input[E]=v.onnx.ValueInfoProto.toObject(y.input[E],x)}if(y.output&&y.output.length){C.output=[];for(var E=0;E<y.output.length;++E)C.output[E]=v.onnx.ValueInfoProto.toObject(y.output[E],x)}if(y.valueInfo&&y.valueInfo.length){C.valueInfo=[];for(var E=0;E<y.valueInfo.length;++E)C.valueInfo[E]=v.onnx.ValueInfoProto.toObject(y.valueInfo[E],x)}if(y.quantizationAnnotation&&y.quantizationAnnotation.length){C.quantizationAnnotation=[];for(var E=0;E<y.quantizationAnnotation.length;++E)C.quantizationAnnotation[E]=v.onnx.TensorAnnotation.toObject(y.quantizationAnnotation[E],x)}if(y.sparseInitializer&&y.sparseInitializer.length){C.sparseInitializer=[];for(var E=0;E<y.sparseInitializer.length;++E)C.sparseInitializer[E]=v.onnx.SparseTensorProto.toObject(y.sparseInitializer[E],x)}return C},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(y){return y===void 0&&(y="type.googleapis.com"),y+"/onnx.GraphProto"},$}(),b.TensorProto=function(){function $(y){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],y)for(var x=Object.keys(y),C=0;C<x.length;++C)y[x[C]]!=null&&(this[x[C]]=y[x[C]])}return $.prototype.dims=g.emptyArray,$.prototype.dataType=0,$.prototype.segment=null,$.prototype.floatData=g.emptyArray,$.prototype.int32Data=g.emptyArray,$.prototype.stringData=g.emptyArray,$.prototype.int64Data=g.emptyArray,$.prototype.name="",$.prototype.docString="",$.prototype.rawData=g.newBuffer([]),$.prototype.externalData=g.emptyArray,$.prototype.dataLocation=0,$.prototype.doubleData=g.emptyArray,$.prototype.uint64Data=g.emptyArray,$.create=function(y){return new $(y)},$.encode=function(y,x){if(x||(x=f.create()),y.dims!=null&&y.dims.length){x.uint32(10).fork();for(var C=0;C<y.dims.length;++C)x.int64(y.dims[C]);x.ldelim()}if(y.dataType!=null&&Object.hasOwnProperty.call(y,"dataType")&&x.uint32(16).int32(y.dataType),y.segment!=null&&Object.hasOwnProperty.call(y,"segment")&&v.onnx.TensorProto.Segment.encode(y.segment,x.uint32(26).fork()).ldelim(),y.floatData!=null&&y.floatData.length){x.uint32(34).fork();for(var C=0;C<y.floatData.length;++C)x.float(y.floatData[C]);x.ldelim()}if(y.int32Data!=null&&y.int32Data.length){x.uint32(42).fork();for(var C=0;C<y.int32Data.length;++C)x.int32(y.int32Data[C]);x.ldelim()}if(y.stringData!=null&&y.stringData.length)for(var C=0;C<y.stringData.length;++C)x.uint32(50).bytes(y.stringData[C]);if(y.int64Data!=null&&y.int64Data.length){x.uint32(58).fork();for(var C=0;C<y.int64Data.length;++C)x.int64(y.int64Data[C]);x.ldelim()}if(y.name!=null&&Object.hasOwnProperty.call(y,"name")&&x.uint32(66).string(y.name),y.rawData!=null&&Object.hasOwnProperty.call(y,"rawData")&&x.uint32(74).bytes(y.rawData),y.doubleData!=null&&y.doubleData.length){x.uint32(82).fork();for(var C=0;C<y.doubleData.length;++C)x.double(y.doubleData[C]);x.ldelim()}if(y.uint64Data!=null&&y.uint64Data.length){x.uint32(90).fork();for(var C=0;C<y.uint64Data.length;++C)x.uint64(y.uint64Data[C]);x.ldelim()}if(y.docString!=null&&Object.hasOwnProperty.call(y,"docString")&&x.uint32(98).string(y.docString),y.externalData!=null&&y.externalData.length)for(var C=0;C<y.externalData.length;++C)v.onnx.StringStringEntryProto.encode(y.externalData[C],x.uint32(106).fork()).ldelim();return y.dataLocation!=null&&Object.hasOwnProperty.call(y,"dataLocation")&&x.uint32(112).int32(y.dataLocation),x},$.encodeDelimited=function(y,x){return this.encode(y,x).ldelim()},$.decode=function(y,x){y instanceof d||(y=d.create(y));for(var C=x===void 0?y.len:y.pos+x,E=new v.onnx.TensorProto;y.pos<C;){var N=y.uint32();switch(N>>>3){case 1:{if(E.dims&&E.dims.length||(E.dims=[]),(N&7)===2)for(var W=y.uint32()+y.pos;y.pos<W;)E.dims.push(y.int64());else E.dims.push(y.int64());break}case 2:{E.dataType=y.int32();break}case 3:{E.segment=v.onnx.TensorProto.Segment.decode(y,y.uint32());break}case 4:{if(E.floatData&&E.floatData.length||(E.floatData=[]),(N&7)===2)for(var W=y.uint32()+y.pos;y.pos<W;)E.floatData.push(y.float());else E.floatData.push(y.float());break}case 5:{if(E.int32Data&&E.int32Data.length||(E.int32Data=[]),(N&7)===2)for(var W=y.uint32()+y.pos;y.pos<W;)E.int32Data.push(y.int32());else E.int32Data.push(y.int32());break}case 6:{E.stringData&&E.stringData.length||(E.stringData=[]),E.stringData.push(y.bytes());break}case 7:{if(E.int64Data&&E.int64Data.length||(E.int64Data=[]),(N&7)===2)for(var W=y.uint32()+y.pos;y.pos<W;)E.int64Data.push(y.int64());else E.int64Data.push(y.int64());break}case 8:{E.name=y.string();break}case 12:{E.docString=y.string();break}case 9:{E.rawData=y.bytes();break}case 13:{E.externalData&&E.externalData.length||(E.externalData=[]),E.externalData.push(v.onnx.StringStringEntryProto.decode(y,y.uint32()));break}case 14:{E.dataLocation=y.int32();break}case 10:{if(E.doubleData&&E.doubleData.length||(E.doubleData=[]),(N&7)===2)for(var W=y.uint32()+y.pos;y.pos<W;)E.doubleData.push(y.double());else E.doubleData.push(y.double());break}case 11:{if(E.uint64Data&&E.uint64Data.length||(E.uint64Data=[]),(N&7)===2)for(var W=y.uint32()+y.pos;y.pos<W;)E.uint64Data.push(y.uint64());else E.uint64Data.push(y.uint64());break}default:y.skipType(N&7);break}}return E},$.decodeDelimited=function(y){return y instanceof d||(y=new d(y)),this.decode(y,y.uint32())},$.verify=function(y){if(typeof y!="object"||y===null)return"object expected";if(y.dims!=null&&y.hasOwnProperty("dims")){if(!Array.isArray(y.dims))return"dims: array expected";for(var x=0;x<y.dims.length;++x)if(!g.isInteger(y.dims[x])&&!(y.dims[x]&&g.isInteger(y.dims[x].low)&&g.isInteger(y.dims[x].high)))return"dims: integer|Long[] expected"}if(y.dataType!=null&&y.hasOwnProperty("dataType")&&!g.isInteger(y.dataType))return"dataType: integer expected";if(y.segment!=null&&y.hasOwnProperty("segment")){var C=v.onnx.TensorProto.Segment.verify(y.segment);if(C)return"segment."+C}if(y.floatData!=null&&y.hasOwnProperty("floatData")){if(!Array.isArray(y.floatData))return"floatData: array expected";for(var x=0;x<y.floatData.length;++x)if(typeof y.floatData[x]!="number")return"floatData: number[] expected"}if(y.int32Data!=null&&y.hasOwnProperty("int32Data")){if(!Array.isArray(y.int32Data))return"int32Data: array expected";for(var x=0;x<y.int32Data.length;++x)if(!g.isInteger(y.int32Data[x]))return"int32Data: integer[] expected"}if(y.stringData!=null&&y.hasOwnProperty("stringData")){if(!Array.isArray(y.stringData))return"stringData: array expected";for(var x=0;x<y.stringData.length;++x)if(!(y.stringData[x]&&typeof y.stringData[x].length=="number"||g.isString(y.stringData[x])))return"stringData: buffer[] expected"}if(y.int64Data!=null&&y.hasOwnProperty("int64Data")){if(!Array.isArray(y.int64Data))return"int64Data: array expected";for(var x=0;x<y.int64Data.length;++x)if(!g.isInteger(y.int64Data[x])&&!(y.int64Data[x]&&g.isInteger(y.int64Data[x].low)&&g.isInteger(y.int64Data[x].high)))return"int64Data: integer|Long[] expected"}if(y.name!=null&&y.hasOwnProperty("name")&&!g.isString(y.name))return"name: string expected";if(y.docString!=null&&y.hasOwnProperty("docString")&&!g.isString(y.docString))return"docString: string expected";if(y.rawData!=null&&y.hasOwnProperty("rawData")&&!(y.rawData&&typeof y.rawData.length=="number"||g.isString(y.rawData)))return"rawData: buffer expected";if(y.externalData!=null&&y.hasOwnProperty("externalData")){if(!Array.isArray(y.externalData))return"externalData: array expected";for(var x=0;x<y.externalData.length;++x){var C=v.onnx.StringStringEntryProto.verify(y.externalData[x]);if(C)return"externalData."+C}}if(y.dataLocation!=null&&y.hasOwnProperty("dataLocation"))switch(y.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(y.doubleData!=null&&y.hasOwnProperty("doubleData")){if(!Array.isArray(y.doubleData))return"doubleData: array expected";for(var x=0;x<y.doubleData.length;++x)if(typeof y.doubleData[x]!="number")return"doubleData: number[] expected"}if(y.uint64Data!=null&&y.hasOwnProperty("uint64Data")){if(!Array.isArray(y.uint64Data))return"uint64Data: array expected";for(var x=0;x<y.uint64Data.length;++x)if(!g.isInteger(y.uint64Data[x])&&!(y.uint64Data[x]&&g.isInteger(y.uint64Data[x].low)&&g.isInteger(y.uint64Data[x].high)))return"uint64Data: integer|Long[] expected"}return null},$.fromObject=function(y){if(y instanceof v.onnx.TensorProto)return y;var x=new v.onnx.TensorProto;if(y.dims){if(!Array.isArray(y.dims))throw TypeError(".onnx.TensorProto.dims: array expected");x.dims=[];for(var C=0;C<y.dims.length;++C)g.Long?(x.dims[C]=g.Long.fromValue(y.dims[C])).unsigned=!1:typeof y.dims[C]=="string"?x.dims[C]=parseInt(y.dims[C],10):typeof y.dims[C]=="number"?x.dims[C]=y.dims[C]:typeof y.dims[C]=="object"&&(x.dims[C]=new g.LongBits(y.dims[C].low>>>0,y.dims[C].high>>>0).toNumber())}if(y.dataType!=null&&(x.dataType=y.dataType|0),y.segment!=null){if(typeof y.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");x.segment=v.onnx.TensorProto.Segment.fromObject(y.segment)}if(y.floatData){if(!Array.isArray(y.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");x.floatData=[];for(var C=0;C<y.floatData.length;++C)x.floatData[C]=Number(y.floatData[C])}if(y.int32Data){if(!Array.isArray(y.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");x.int32Data=[];for(var C=0;C<y.int32Data.length;++C)x.int32Data[C]=y.int32Data[C]|0}if(y.stringData){if(!Array.isArray(y.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");x.stringData=[];for(var C=0;C<y.stringData.length;++C)typeof y.stringData[C]=="string"?g.base64.decode(y.stringData[C],x.stringData[C]=g.newBuffer(g.base64.length(y.stringData[C])),0):y.stringData[C].length>=0&&(x.stringData[C]=y.stringData[C])}if(y.int64Data){if(!Array.isArray(y.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");x.int64Data=[];for(var C=0;C<y.int64Data.length;++C)g.Long?(x.int64Data[C]=g.Long.fromValue(y.int64Data[C])).unsigned=!1:typeof y.int64Data[C]=="string"?x.int64Data[C]=parseInt(y.int64Data[C],10):typeof y.int64Data[C]=="number"?x.int64Data[C]=y.int64Data[C]:typeof y.int64Data[C]=="object"&&(x.int64Data[C]=new g.LongBits(y.int64Data[C].low>>>0,y.int64Data[C].high>>>0).toNumber())}if(y.name!=null&&(x.name=String(y.name)),y.docString!=null&&(x.docString=String(y.docString)),y.rawData!=null&&(typeof y.rawData=="string"?g.base64.decode(y.rawData,x.rawData=g.newBuffer(g.base64.length(y.rawData)),0):y.rawData.length>=0&&(x.rawData=y.rawData)),y.externalData){if(!Array.isArray(y.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");x.externalData=[];for(var C=0;C<y.externalData.length;++C){if(typeof y.externalData[C]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");x.externalData[C]=v.onnx.StringStringEntryProto.fromObject(y.externalData[C])}}switch(y.dataLocation){default:if(typeof y.dataLocation=="number"){x.dataLocation=y.dataLocation;break}break;case"DEFAULT":case 0:x.dataLocation=0;break;case"EXTERNAL":case 1:x.dataLocation=1;break}if(y.doubleData){if(!Array.isArray(y.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");x.doubleData=[];for(var C=0;C<y.doubleData.length;++C)x.doubleData[C]=Number(y.doubleData[C])}if(y.uint64Data){if(!Array.isArray(y.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");x.uint64Data=[];for(var C=0;C<y.uint64Data.length;++C)g.Long?(x.uint64Data[C]=g.Long.fromValue(y.uint64Data[C])).unsigned=!0:typeof y.uint64Data[C]=="string"?x.uint64Data[C]=parseInt(y.uint64Data[C],10):typeof y.uint64Data[C]=="number"?x.uint64Data[C]=y.uint64Data[C]:typeof y.uint64Data[C]=="object"&&(x.uint64Data[C]=new g.LongBits(y.uint64Data[C].low>>>0,y.uint64Data[C].high>>>0).toNumber(!0))}return x},$.toObject=function(y,x){x||(x={});var C={};if((x.arrays||x.defaults)&&(C.dims=[],C.floatData=[],C.int32Data=[],C.stringData=[],C.int64Data=[],C.doubleData=[],C.uint64Data=[],C.externalData=[]),x.defaults&&(C.dataType=0,C.segment=null,C.name="",x.bytes===String?C.rawData="":(C.rawData=[],x.bytes!==Array&&(C.rawData=g.newBuffer(C.rawData))),C.docString="",C.dataLocation=x.enums===String?"DEFAULT":0),y.dims&&y.dims.length){C.dims=[];for(var E=0;E<y.dims.length;++E)typeof y.dims[E]=="number"?C.dims[E]=x.longs===String?String(y.dims[E]):y.dims[E]:C.dims[E]=x.longs===String?g.Long.prototype.toString.call(y.dims[E]):x.longs===Number?new g.LongBits(y.dims[E].low>>>0,y.dims[E].high>>>0).toNumber():y.dims[E]}if(y.dataType!=null&&y.hasOwnProperty("dataType")&&(C.dataType=y.dataType),y.segment!=null&&y.hasOwnProperty("segment")&&(C.segment=v.onnx.TensorProto.Segment.toObject(y.segment,x)),y.floatData&&y.floatData.length){C.floatData=[];for(var E=0;E<y.floatData.length;++E)C.floatData[E]=x.json&&!isFinite(y.floatData[E])?String(y.floatData[E]):y.floatData[E]}if(y.int32Data&&y.int32Data.length){C.int32Data=[];for(var E=0;E<y.int32Data.length;++E)C.int32Data[E]=y.int32Data[E]}if(y.stringData&&y.stringData.length){C.stringData=[];for(var E=0;E<y.stringData.length;++E)C.stringData[E]=x.bytes===String?g.base64.encode(y.stringData[E],0,y.stringData[E].length):x.bytes===Array?Array.prototype.slice.call(y.stringData[E]):y.stringData[E]}if(y.int64Data&&y.int64Data.length){C.int64Data=[];for(var E=0;E<y.int64Data.length;++E)typeof y.int64Data[E]=="number"?C.int64Data[E]=x.longs===String?String(y.int64Data[E]):y.int64Data[E]:C.int64Data[E]=x.longs===String?g.Long.prototype.toString.call(y.int64Data[E]):x.longs===Number?new g.LongBits(y.int64Data[E].low>>>0,y.int64Data[E].high>>>0).toNumber():y.int64Data[E]}if(y.name!=null&&y.hasOwnProperty("name")&&(C.name=y.name),y.rawData!=null&&y.hasOwnProperty("rawData")&&(C.rawData=x.bytes===String?g.base64.encode(y.rawData,0,y.rawData.length):x.bytes===Array?Array.prototype.slice.call(y.rawData):y.rawData),y.doubleData&&y.doubleData.length){C.doubleData=[];for(var E=0;E<y.doubleData.length;++E)C.doubleData[E]=x.json&&!isFinite(y.doubleData[E])?String(y.doubleData[E]):y.doubleData[E]}if(y.uint64Data&&y.uint64Data.length){C.uint64Data=[];for(var E=0;E<y.uint64Data.length;++E)typeof y.uint64Data[E]=="number"?C.uint64Data[E]=x.longs===String?String(y.uint64Data[E]):y.uint64Data[E]:C.uint64Data[E]=x.longs===String?g.Long.prototype.toString.call(y.uint64Data[E]):x.longs===Number?new g.LongBits(y.uint64Data[E].low>>>0,y.uint64Data[E].high>>>0).toNumber(!0):y.uint64Data[E]}if(y.docString!=null&&y.hasOwnProperty("docString")&&(C.docString=y.docString),y.externalData&&y.externalData.length){C.externalData=[];for(var E=0;E<y.externalData.length;++E)C.externalData[E]=v.onnx.StringStringEntryProto.toObject(y.externalData[E],x)}return y.dataLocation!=null&&y.hasOwnProperty("dataLocation")&&(C.dataLocation=x.enums===String?v.onnx.TensorProto.DataLocation[y.dataLocation]===void 0?y.dataLocation:v.onnx.TensorProto.DataLocation[y.dataLocation]:y.dataLocation),C},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(y){return y===void 0&&(y="type.googleapis.com"),y+"/onnx.TensorProto"},$.DataType=function(){var y={},x=Object.create(y);return x[y[0]="UNDEFINED"]=0,x[y[1]="FLOAT"]=1,x[y[2]="UINT8"]=2,x[y[3]="INT8"]=3,x[y[4]="UINT16"]=4,x[y[5]="INT16"]=5,x[y[6]="INT32"]=6,x[y[7]="INT64"]=7,x[y[8]="STRING"]=8,x[y[9]="BOOL"]=9,x[y[10]="FLOAT16"]=10,x[y[11]="DOUBLE"]=11,x[y[12]="UINT32"]=12,x[y[13]="UINT64"]=13,x[y[14]="COMPLEX64"]=14,x[y[15]="COMPLEX128"]=15,x[y[16]="BFLOAT16"]=16,x[y[17]="FLOAT8E4M3FN"]=17,x[y[18]="FLOAT8E4M3FNUZ"]=18,x[y[19]="FLOAT8E5M2"]=19,x[y[20]="FLOAT8E5M2FNUZ"]=20,x}(),$.Segment=function(){function y(x){if(x)for(var C=Object.keys(x),E=0;E<C.length;++E)x[C[E]]!=null&&(this[C[E]]=x[C[E]])}return y.prototype.begin=g.Long?g.Long.fromBits(0,0,!1):0,y.prototype.end=g.Long?g.Long.fromBits(0,0,!1):0,y.create=function(x){return new y(x)},y.encode=function(x,C){return C||(C=f.create()),x.begin!=null&&Object.hasOwnProperty.call(x,"begin")&&C.uint32(8).int64(x.begin),x.end!=null&&Object.hasOwnProperty.call(x,"end")&&C.uint32(16).int64(x.end),C},y.encodeDelimited=function(x,C){return this.encode(x,C).ldelim()},y.decode=function(x,C){x instanceof d||(x=d.create(x));for(var E=C===void 0?x.len:x.pos+C,N=new v.onnx.TensorProto.Segment;x.pos<E;){var W=x.uint32();switch(W>>>3){case 1:{N.begin=x.int64();break}case 2:{N.end=x.int64();break}default:x.skipType(W&7);break}}return N},y.decodeDelimited=function(x){return x instanceof d||(x=new d(x)),this.decode(x,x.uint32())},y.verify=function(x){return typeof x!="object"||x===null?"object expected":x.begin!=null&&x.hasOwnProperty("begin")&&!g.isInteger(x.begin)&&!(x.begin&&g.isInteger(x.begin.low)&&g.isInteger(x.begin.high))?"begin: integer|Long expected":x.end!=null&&x.hasOwnProperty("end")&&!g.isInteger(x.end)&&!(x.end&&g.isInteger(x.end.low)&&g.isInteger(x.end.high))?"end: integer|Long expected":null},y.fromObject=function(x){if(x instanceof v.onnx.TensorProto.Segment)return x;var C=new v.onnx.TensorProto.Segment;return x.begin!=null&&(g.Long?(C.begin=g.Long.fromValue(x.begin)).unsigned=!1:typeof x.begin=="string"?C.begin=parseInt(x.begin,10):typeof x.begin=="number"?C.begin=x.begin:typeof x.begin=="object"&&(C.begin=new g.LongBits(x.begin.low>>>0,x.begin.high>>>0).toNumber())),x.end!=null&&(g.Long?(C.end=g.Long.fromValue(x.end)).unsigned=!1:typeof x.end=="string"?C.end=parseInt(x.end,10):typeof x.end=="number"?C.end=x.end:typeof x.end=="object"&&(C.end=new g.LongBits(x.end.low>>>0,x.end.high>>>0).toNumber())),C},y.toObject=function(x,C){C||(C={});var E={};if(C.defaults){if(g.Long){var N=new g.Long(0,0,!1);E.begin=C.longs===String?N.toString():C.longs===Number?N.toNumber():N}else E.begin=C.longs===String?"0":0;if(g.Long){var N=new g.Long(0,0,!1);E.end=C.longs===String?N.toString():C.longs===Number?N.toNumber():N}else E.end=C.longs===String?"0":0}return x.begin!=null&&x.hasOwnProperty("begin")&&(typeof x.begin=="number"?E.begin=C.longs===String?String(x.begin):x.begin:E.begin=C.longs===String?g.Long.prototype.toString.call(x.begin):C.longs===Number?new g.LongBits(x.begin.low>>>0,x.begin.high>>>0).toNumber():x.begin),x.end!=null&&x.hasOwnProperty("end")&&(typeof x.end=="number"?E.end=C.longs===String?String(x.end):x.end:E.end=C.longs===String?g.Long.prototype.toString.call(x.end):C.longs===Number?new g.LongBits(x.end.low>>>0,x.end.high>>>0).toNumber():x.end),E},y.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},y.getTypeUrl=function(x){return x===void 0&&(x="type.googleapis.com"),x+"/onnx.TensorProto.Segment"},y}(),$.DataLocation=function(){var y={},x=Object.create(y);return x[y[0]="DEFAULT"]=0,x[y[1]="EXTERNAL"]=1,x}(),$}(),b.SparseTensorProto=function(){function $(y){if(this.dims=[],y)for(var x=Object.keys(y),C=0;C<x.length;++C)y[x[C]]!=null&&(this[x[C]]=y[x[C]])}return $.prototype.values=null,$.prototype.indices=null,$.prototype.dims=g.emptyArray,$.create=function(y){return new $(y)},$.encode=function(y,x){if(x||(x=f.create()),y.values!=null&&Object.hasOwnProperty.call(y,"values")&&v.onnx.TensorProto.encode(y.values,x.uint32(10).fork()).ldelim(),y.indices!=null&&Object.hasOwnProperty.call(y,"indices")&&v.onnx.TensorProto.encode(y.indices,x.uint32(18).fork()).ldelim(),y.dims!=null&&y.dims.length){x.uint32(26).fork();for(var C=0;C<y.dims.length;++C)x.int64(y.dims[C]);x.ldelim()}return x},$.encodeDelimited=function(y,x){return this.encode(y,x).ldelim()},$.decode=function(y,x){y instanceof d||(y=d.create(y));for(var C=x===void 0?y.len:y.pos+x,E=new v.onnx.SparseTensorProto;y.pos<C;){var N=y.uint32();switch(N>>>3){case 1:{E.values=v.onnx.TensorProto.decode(y,y.uint32());break}case 2:{E.indices=v.onnx.TensorProto.decode(y,y.uint32());break}case 3:{if(E.dims&&E.dims.length||(E.dims=[]),(N&7)===2)for(var W=y.uint32()+y.pos;y.pos<W;)E.dims.push(y.int64());else E.dims.push(y.int64());break}default:y.skipType(N&7);break}}return E},$.decodeDelimited=function(y){return y instanceof d||(y=new d(y)),this.decode(y,y.uint32())},$.verify=function(y){if(typeof y!="object"||y===null)return"object expected";if(y.values!=null&&y.hasOwnProperty("values")){var x=v.onnx.TensorProto.verify(y.values);if(x)return"values."+x}if(y.indices!=null&&y.hasOwnProperty("indices")){var x=v.onnx.TensorProto.verify(y.indices);if(x)return"indices."+x}if(y.dims!=null&&y.hasOwnProperty("dims")){if(!Array.isArray(y.dims))return"dims: array expected";for(var C=0;C<y.dims.length;++C)if(!g.isInteger(y.dims[C])&&!(y.dims[C]&&g.isInteger(y.dims[C].low)&&g.isInteger(y.dims[C].high)))return"dims: integer|Long[] expected"}return null},$.fromObject=function(y){if(y instanceof v.onnx.SparseTensorProto)return y;var x=new v.onnx.SparseTensorProto;if(y.values!=null){if(typeof y.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");x.values=v.onnx.TensorProto.fromObject(y.values)}if(y.indices!=null){if(typeof y.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");x.indices=v.onnx.TensorProto.fromObject(y.indices)}if(y.dims){if(!Array.isArray(y.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");x.dims=[];for(var C=0;C<y.dims.length;++C)g.Long?(x.dims[C]=g.Long.fromValue(y.dims[C])).unsigned=!1:typeof y.dims[C]=="string"?x.dims[C]=parseInt(y.dims[C],10):typeof y.dims[C]=="number"?x.dims[C]=y.dims[C]:typeof y.dims[C]=="object"&&(x.dims[C]=new g.LongBits(y.dims[C].low>>>0,y.dims[C].high>>>0).toNumber())}return x},$.toObject=function(y,x){x||(x={});var C={};if((x.arrays||x.defaults)&&(C.dims=[]),x.defaults&&(C.values=null,C.indices=null),y.values!=null&&y.hasOwnProperty("values")&&(C.values=v.onnx.TensorProto.toObject(y.values,x)),y.indices!=null&&y.hasOwnProperty("indices")&&(C.indices=v.onnx.TensorProto.toObject(y.indices,x)),y.dims&&y.dims.length){C.dims=[];for(var E=0;E<y.dims.length;++E)typeof y.dims[E]=="number"?C.dims[E]=x.longs===String?String(y.dims[E]):y.dims[E]:C.dims[E]=x.longs===String?g.Long.prototype.toString.call(y.dims[E]):x.longs===Number?new g.LongBits(y.dims[E].low>>>0,y.dims[E].high>>>0).toNumber():y.dims[E]}return C},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(y){return y===void 0&&(y="type.googleapis.com"),y+"/onnx.SparseTensorProto"},$}(),b.TensorShapeProto=function(){function $(y){if(this.dim=[],y)for(var x=Object.keys(y),C=0;C<x.length;++C)y[x[C]]!=null&&(this[x[C]]=y[x[C]])}return $.prototype.dim=g.emptyArray,$.create=function(y){return new $(y)},$.encode=function(y,x){if(x||(x=f.create()),y.dim!=null&&y.dim.length)for(var C=0;C<y.dim.length;++C)v.onnx.TensorShapeProto.Dimension.encode(y.dim[C],x.uint32(10).fork()).ldelim();return x},$.encodeDelimited=function(y,x){return this.encode(y,x).ldelim()},$.decode=function(y,x){y instanceof d||(y=d.create(y));for(var C=x===void 0?y.len:y.pos+x,E=new v.onnx.TensorShapeProto;y.pos<C;){var N=y.uint32();switch(N>>>3){case 1:{E.dim&&E.dim.length||(E.dim=[]),E.dim.push(v.onnx.TensorShapeProto.Dimension.decode(y,y.uint32()));break}default:y.skipType(N&7);break}}return E},$.decodeDelimited=function(y){return y instanceof d||(y=new d(y)),this.decode(y,y.uint32())},$.verify=function(y){if(typeof y!="object"||y===null)return"object expected";if(y.dim!=null&&y.hasOwnProperty("dim")){if(!Array.isArray(y.dim))return"dim: array expected";for(var x=0;x<y.dim.length;++x){var C=v.onnx.TensorShapeProto.Dimension.verify(y.dim[x]);if(C)return"dim."+C}}return null},$.fromObject=function(y){if(y instanceof v.onnx.TensorShapeProto)return y;var x=new v.onnx.TensorShapeProto;if(y.dim){if(!Array.isArray(y.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");x.dim=[];for(var C=0;C<y.dim.length;++C){if(typeof y.dim[C]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");x.dim[C]=v.onnx.TensorShapeProto.Dimension.fromObject(y.dim[C])}}return x},$.toObject=function(y,x){x||(x={});var C={};if((x.arrays||x.defaults)&&(C.dim=[]),y.dim&&y.dim.length){C.dim=[];for(var E=0;E<y.dim.length;++E)C.dim[E]=v.onnx.TensorShapeProto.Dimension.toObject(y.dim[E],x)}return C},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(y){return y===void 0&&(y="type.googleapis.com"),y+"/onnx.TensorShapeProto"},$.Dimension=function(){function y(C){if(C)for(var E=Object.keys(C),N=0;N<E.length;++N)C[E[N]]!=null&&(this[E[N]]=C[E[N]])}y.prototype.dimValue=null,y.prototype.dimParam=null,y.prototype.denotation="";var x;return Object.defineProperty(y.prototype,"value",{get:g.oneOfGetter(x=["dimValue","dimParam"]),set:g.oneOfSetter(x)}),y.create=function(C){return new y(C)},y.encode=function(C,E){return E||(E=f.create()),C.dimValue!=null&&Object.hasOwnProperty.call(C,"dimValue")&&E.uint32(8).int64(C.dimValue),C.dimParam!=null&&Object.hasOwnProperty.call(C,"dimParam")&&E.uint32(18).string(C.dimParam),C.denotation!=null&&Object.hasOwnProperty.call(C,"denotation")&&E.uint32(26).string(C.denotation),E},y.encodeDelimited=function(C,E){return this.encode(C,E).ldelim()},y.decode=function(C,E){C instanceof d||(C=d.create(C));for(var N=E===void 0?C.len:C.pos+E,W=new v.onnx.TensorShapeProto.Dimension;C.pos<N;){var q=C.uint32();switch(q>>>3){case 1:{W.dimValue=C.int64();break}case 2:{W.dimParam=C.string();break}case 3:{W.denotation=C.string();break}default:C.skipType(q&7);break}}return W},y.decodeDelimited=function(C){return C instanceof d||(C=new d(C)),this.decode(C,C.uint32())},y.verify=function(C){if(typeof C!="object"||C===null)return"object expected";var E={};if(C.dimValue!=null&&C.hasOwnProperty("dimValue")&&(E.value=1,!g.isInteger(C.dimValue)&&!(C.dimValue&&g.isInteger(C.dimValue.low)&&g.isInteger(C.dimValue.high))))return"dimValue: integer|Long expected";if(C.dimParam!=null&&C.hasOwnProperty("dimParam")){if(E.value===1)return"value: multiple values";if(E.value=1,!g.isString(C.dimParam))return"dimParam: string expected"}return C.denotation!=null&&C.hasOwnProperty("denotation")&&!g.isString(C.denotation)?"denotation: string expected":null},y.fromObject=function(C){if(C instanceof v.onnx.TensorShapeProto.Dimension)return C;var E=new v.onnx.TensorShapeProto.Dimension;return C.dimValue!=null&&(g.Long?(E.dimValue=g.Long.fromValue(C.dimValue)).unsigned=!1:typeof C.dimValue=="string"?E.dimValue=parseInt(C.dimValue,10):typeof C.dimValue=="number"?E.dimValue=C.dimValue:typeof C.dimValue=="object"&&(E.dimValue=new g.LongBits(C.dimValue.low>>>0,C.dimValue.high>>>0).toNumber())),C.dimParam!=null&&(E.dimParam=String(C.dimParam)),C.denotation!=null&&(E.denotation=String(C.denotation)),E},y.toObject=function(C,E){E||(E={});var N={};return E.defaults&&(N.denotation=""),C.dimValue!=null&&C.hasOwnProperty("dimValue")&&(typeof C.dimValue=="number"?N.dimValue=E.longs===String?String(C.dimValue):C.dimValue:N.dimValue=E.longs===String?g.Long.prototype.toString.call(C.dimValue):E.longs===Number?new g.LongBits(C.dimValue.low>>>0,C.dimValue.high>>>0).toNumber():C.dimValue,E.oneofs&&(N.value="dimValue")),C.dimParam!=null&&C.hasOwnProperty("dimParam")&&(N.dimParam=C.dimParam,E.oneofs&&(N.value="dimParam")),C.denotation!=null&&C.hasOwnProperty("denotation")&&(N.denotation=C.denotation),N},y.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},y.getTypeUrl=function(C){return C===void 0&&(C="type.googleapis.com"),C+"/onnx.TensorShapeProto.Dimension"},y}(),$}(),b.TypeProto=function(){function $(x){if(x)for(var C=Object.keys(x),E=0;E<C.length;++E)x[C[E]]!=null&&(this[C[E]]=x[C[E]])}$.prototype.tensorType=null,$.prototype.sequenceType=null,$.prototype.mapType=null,$.prototype.optionalType=null,$.prototype.sparseTensorType=null,$.prototype.denotation="";var y;return Object.defineProperty($.prototype,"value",{get:g.oneOfGetter(y=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:g.oneOfSetter(y)}),$.create=function(x){return new $(x)},$.encode=function(x,C){return C||(C=f.create()),x.tensorType!=null&&Object.hasOwnProperty.call(x,"tensorType")&&v.onnx.TypeProto.Tensor.encode(x.tensorType,C.uint32(10).fork()).ldelim(),x.sequenceType!=null&&Object.hasOwnProperty.call(x,"sequenceType")&&v.onnx.TypeProto.Sequence.encode(x.sequenceType,C.uint32(34).fork()).ldelim(),x.mapType!=null&&Object.hasOwnProperty.call(x,"mapType")&&v.onnx.TypeProto.Map.encode(x.mapType,C.uint32(42).fork()).ldelim(),x.denotation!=null&&Object.hasOwnProperty.call(x,"denotation")&&C.uint32(50).string(x.denotation),x.sparseTensorType!=null&&Object.hasOwnProperty.call(x,"sparseTensorType")&&v.onnx.TypeProto.SparseTensor.encode(x.sparseTensorType,C.uint32(66).fork()).ldelim(),x.optionalType!=null&&Object.hasOwnProperty.call(x,"optionalType")&&v.onnx.TypeProto.Optional.encode(x.optionalType,C.uint32(74).fork()).ldelim(),C},$.encodeDelimited=function(x,C){return this.encode(x,C).ldelim()},$.decode=function(x,C){x instanceof d||(x=d.create(x));for(var E=C===void 0?x.len:x.pos+C,N=new v.onnx.TypeProto;x.pos<E;){var W=x.uint32();switch(W>>>3){case 1:{N.tensorType=v.onnx.TypeProto.Tensor.decode(x,x.uint32());break}case 4:{N.sequenceType=v.onnx.TypeProto.Sequence.decode(x,x.uint32());break}case 5:{N.mapType=v.onnx.TypeProto.Map.decode(x,x.uint32());break}case 9:{N.optionalType=v.onnx.TypeProto.Optional.decode(x,x.uint32());break}case 8:{N.sparseTensorType=v.onnx.TypeProto.SparseTensor.decode(x,x.uint32());break}case 6:{N.denotation=x.string();break}default:x.skipType(W&7);break}}return N},$.decodeDelimited=function(x){return x instanceof d||(x=new d(x)),this.decode(x,x.uint32())},$.verify=function(x){if(typeof x!="object"||x===null)return"object expected";var C={};if(x.tensorType!=null&&x.hasOwnProperty("tensorType")){C.value=1;{var E=v.onnx.TypeProto.Tensor.verify(x.tensorType);if(E)return"tensorType."+E}}if(x.sequenceType!=null&&x.hasOwnProperty("sequenceType")){if(C.value===1)return"value: multiple values";C.value=1;{var E=v.onnx.TypeProto.Sequence.verify(x.sequenceType);if(E)return"sequenceType."+E}}if(x.mapType!=null&&x.hasOwnProperty("mapType")){if(C.value===1)return"value: multiple values";C.value=1;{var E=v.onnx.TypeProto.Map.verify(x.mapType);if(E)return"mapType."+E}}if(x.optionalType!=null&&x.hasOwnProperty("optionalType")){if(C.value===1)return"value: multiple values";C.value=1;{var E=v.onnx.TypeProto.Optional.verify(x.optionalType);if(E)return"optionalType."+E}}if(x.sparseTensorType!=null&&x.hasOwnProperty("sparseTensorType")){if(C.value===1)return"value: multiple values";C.value=1;{var E=v.onnx.TypeProto.SparseTensor.verify(x.sparseTensorType);if(E)return"sparseTensorType."+E}}return x.denotation!=null&&x.hasOwnProperty("denotation")&&!g.isString(x.denotation)?"denotation: string expected":null},$.fromObject=function(x){if(x instanceof v.onnx.TypeProto)return x;var C=new v.onnx.TypeProto;if(x.tensorType!=null){if(typeof x.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");C.tensorType=v.onnx.TypeProto.Tensor.fromObject(x.tensorType)}if(x.sequenceType!=null){if(typeof x.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");C.sequenceType=v.onnx.TypeProto.Sequence.fromObject(x.sequenceType)}if(x.mapType!=null){if(typeof x.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");C.mapType=v.onnx.TypeProto.Map.fromObject(x.mapType)}if(x.optionalType!=null){if(typeof x.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");C.optionalType=v.onnx.TypeProto.Optional.fromObject(x.optionalType)}if(x.sparseTensorType!=null){if(typeof x.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");C.sparseTensorType=v.onnx.TypeProto.SparseTensor.fromObject(x.sparseTensorType)}return x.denotation!=null&&(C.denotation=String(x.denotation)),C},$.toObject=function(x,C){C||(C={});var E={};return C.defaults&&(E.denotation=""),x.tensorType!=null&&x.hasOwnProperty("tensorType")&&(E.tensorType=v.onnx.TypeProto.Tensor.toObject(x.tensorType,C),C.oneofs&&(E.value="tensorType")),x.sequenceType!=null&&x.hasOwnProperty("sequenceType")&&(E.sequenceType=v.onnx.TypeProto.Sequence.toObject(x.sequenceType,C),C.oneofs&&(E.value="sequenceType")),x.mapType!=null&&x.hasOwnProperty("mapType")&&(E.mapType=v.onnx.TypeProto.Map.toObject(x.mapType,C),C.oneofs&&(E.value="mapType")),x.denotation!=null&&x.hasOwnProperty("denotation")&&(E.denotation=x.denotation),x.sparseTensorType!=null&&x.hasOwnProperty("sparseTensorType")&&(E.sparseTensorType=v.onnx.TypeProto.SparseTensor.toObject(x.sparseTensorType,C),C.oneofs&&(E.value="sparseTensorType")),x.optionalType!=null&&x.hasOwnProperty("optionalType")&&(E.optionalType=v.onnx.TypeProto.Optional.toObject(x.optionalType,C),C.oneofs&&(E.value="optionalType")),E},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(x){return x===void 0&&(x="type.googleapis.com"),x+"/onnx.TypeProto"},$.Tensor=function(){function x(C){if(C)for(var E=Object.keys(C),N=0;N<E.length;++N)C[E[N]]!=null&&(this[E[N]]=C[E[N]])}return x.prototype.elemType=0,x.prototype.shape=null,x.create=function(C){return new x(C)},x.encode=function(C,E){return E||(E=f.create()),C.elemType!=null&&Object.hasOwnProperty.call(C,"elemType")&&E.uint32(8).int32(C.elemType),C.shape!=null&&Object.hasOwnProperty.call(C,"shape")&&v.onnx.TensorShapeProto.encode(C.shape,E.uint32(18).fork()).ldelim(),E},x.encodeDelimited=function(C,E){return this.encode(C,E).ldelim()},x.decode=function(C,E){C instanceof d||(C=d.create(C));for(var N=E===void 0?C.len:C.pos+E,W=new v.onnx.TypeProto.Tensor;C.pos<N;){var q=C.uint32();switch(q>>>3){case 1:{W.elemType=C.int32();break}case 2:{W.shape=v.onnx.TensorShapeProto.decode(C,C.uint32());break}default:C.skipType(q&7);break}}return W},x.decodeDelimited=function(C){return C instanceof d||(C=new d(C)),this.decode(C,C.uint32())},x.verify=function(C){if(typeof C!="object"||C===null)return"object expected";if(C.elemType!=null&&C.hasOwnProperty("elemType")&&!g.isInteger(C.elemType))return"elemType: integer expected";if(C.shape!=null&&C.hasOwnProperty("shape")){var E=v.onnx.TensorShapeProto.verify(C.shape);if(E)return"shape."+E}return null},x.fromObject=function(C){if(C instanceof v.onnx.TypeProto.Tensor)return C;var E=new v.onnx.TypeProto.Tensor;if(C.elemType!=null&&(E.elemType=C.elemType|0),C.shape!=null){if(typeof C.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");E.shape=v.onnx.TensorShapeProto.fromObject(C.shape)}return E},x.toObject=function(C,E){E||(E={});var N={};return E.defaults&&(N.elemType=0,N.shape=null),C.elemType!=null&&C.hasOwnProperty("elemType")&&(N.elemType=C.elemType),C.shape!=null&&C.hasOwnProperty("shape")&&(N.shape=v.onnx.TensorShapeProto.toObject(C.shape,E)),N},x.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},x.getTypeUrl=function(C){return C===void 0&&(C="type.googleapis.com"),C+"/onnx.TypeProto.Tensor"},x}(),$.Sequence=function(){function x(C){if(C)for(var E=Object.keys(C),N=0;N<E.length;++N)C[E[N]]!=null&&(this[E[N]]=C[E[N]])}return x.prototype.elemType=null,x.create=function(C){return new x(C)},x.encode=function(C,E){return E||(E=f.create()),C.elemType!=null&&Object.hasOwnProperty.call(C,"elemType")&&v.onnx.TypeProto.encode(C.elemType,E.uint32(10).fork()).ldelim(),E},x.encodeDelimited=function(C,E){return this.encode(C,E).ldelim()},x.decode=function(C,E){C instanceof d||(C=d.create(C));for(var N=E===void 0?C.len:C.pos+E,W=new v.onnx.TypeProto.Sequence;C.pos<N;){var q=C.uint32();switch(q>>>3){case 1:{W.elemType=v.onnx.TypeProto.decode(C,C.uint32());break}default:C.skipType(q&7);break}}return W},x.decodeDelimited=function(C){return C instanceof d||(C=new d(C)),this.decode(C,C.uint32())},x.verify=function(C){if(typeof C!="object"||C===null)return"object expected";if(C.elemType!=null&&C.hasOwnProperty("elemType")){var E=v.onnx.TypeProto.verify(C.elemType);if(E)return"elemType."+E}return null},x.fromObject=function(C){if(C instanceof v.onnx.TypeProto.Sequence)return C;var E=new v.onnx.TypeProto.Sequence;if(C.elemType!=null){if(typeof C.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");E.elemType=v.onnx.TypeProto.fromObject(C.elemType)}return E},x.toObject=function(C,E){E||(E={});var N={};return E.defaults&&(N.elemType=null),C.elemType!=null&&C.hasOwnProperty("elemType")&&(N.elemType=v.onnx.TypeProto.toObject(C.elemType,E)),N},x.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},x.getTypeUrl=function(C){return C===void 0&&(C="type.googleapis.com"),C+"/onnx.TypeProto.Sequence"},x}(),$.Map=function(){function x(C){if(C)for(var E=Object.keys(C),N=0;N<E.length;++N)C[E[N]]!=null&&(this[E[N]]=C[E[N]])}return x.prototype.keyType=0,x.prototype.valueType=null,x.create=function(C){return new x(C)},x.encode=function(C,E){return E||(E=f.create()),C.keyType!=null&&Object.hasOwnProperty.call(C,"keyType")&&E.uint32(8).int32(C.keyType),C.valueType!=null&&Object.hasOwnProperty.call(C,"valueType")&&v.onnx.TypeProto.encode(C.valueType,E.uint32(18).fork()).ldelim(),E},x.encodeDelimited=function(C,E){return this.encode(C,E).ldelim()},x.decode=function(C,E){C instanceof d||(C=d.create(C));for(var N=E===void 0?C.len:C.pos+E,W=new v.onnx.TypeProto.Map;C.pos<N;){var q=C.uint32();switch(q>>>3){case 1:{W.keyType=C.int32();break}case 2:{W.valueType=v.onnx.TypeProto.decode(C,C.uint32());break}default:C.skipType(q&7);break}}return W},x.decodeDelimited=function(C){return C instanceof d||(C=new d(C)),this.decode(C,C.uint32())},x.verify=function(C){if(typeof C!="object"||C===null)return"object expected";if(C.keyType!=null&&C.hasOwnProperty("keyType")&&!g.isInteger(C.keyType))return"keyType: integer expected";if(C.valueType!=null&&C.hasOwnProperty("valueType")){var E=v.onnx.TypeProto.verify(C.valueType);if(E)return"valueType."+E}return null},x.fromObject=function(C){if(C instanceof v.onnx.TypeProto.Map)return C;var E=new v.onnx.TypeProto.Map;if(C.keyType!=null&&(E.keyType=C.keyType|0),C.valueType!=null){if(typeof C.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");E.valueType=v.onnx.TypeProto.fromObject(C.valueType)}return E},x.toObject=function(C,E){E||(E={});var N={};return E.defaults&&(N.keyType=0,N.valueType=null),C.keyType!=null&&C.hasOwnProperty("keyType")&&(N.keyType=C.keyType),C.valueType!=null&&C.hasOwnProperty("valueType")&&(N.valueType=v.onnx.TypeProto.toObject(C.valueType,E)),N},x.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},x.getTypeUrl=function(C){return C===void 0&&(C="type.googleapis.com"),C+"/onnx.TypeProto.Map"},x}(),$.Optional=function(){function x(C){if(C)for(var E=Object.keys(C),N=0;N<E.length;++N)C[E[N]]!=null&&(this[E[N]]=C[E[N]])}return x.prototype.elemType=null,x.create=function(C){return new x(C)},x.encode=function(C,E){return E||(E=f.create()),C.elemType!=null&&Object.hasOwnProperty.call(C,"elemType")&&v.onnx.TypeProto.encode(C.elemType,E.uint32(10).fork()).ldelim(),E},x.encodeDelimited=function(C,E){return this.encode(C,E).ldelim()},x.decode=function(C,E){C instanceof d||(C=d.create(C));for(var N=E===void 0?C.len:C.pos+E,W=new v.onnx.TypeProto.Optional;C.pos<N;){var q=C.uint32();switch(q>>>3){case 1:{W.elemType=v.onnx.TypeProto.decode(C,C.uint32());break}default:C.skipType(q&7);break}}return W},x.decodeDelimited=function(C){return C instanceof d||(C=new d(C)),this.decode(C,C.uint32())},x.verify=function(C){if(typeof C!="object"||C===null)return"object expected";if(C.elemType!=null&&C.hasOwnProperty("elemType")){var E=v.onnx.TypeProto.verify(C.elemType);if(E)return"elemType."+E}return null},x.fromObject=function(C){if(C instanceof v.onnx.TypeProto.Optional)return C;var E=new v.onnx.TypeProto.Optional;if(C.elemType!=null){if(typeof C.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");E.elemType=v.onnx.TypeProto.fromObject(C.elemType)}return E},x.toObject=function(C,E){E||(E={});var N={};return E.defaults&&(N.elemType=null),C.elemType!=null&&C.hasOwnProperty("elemType")&&(N.elemType=v.onnx.TypeProto.toObject(C.elemType,E)),N},x.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},x.getTypeUrl=function(C){return C===void 0&&(C="type.googleapis.com"),C+"/onnx.TypeProto.Optional"},x}(),$.SparseTensor=function(){function x(C){if(C)for(var E=Object.keys(C),N=0;N<E.length;++N)C[E[N]]!=null&&(this[E[N]]=C[E[N]])}return x.prototype.elemType=0,x.prototype.shape=null,x.create=function(C){return new x(C)},x.encode=function(C,E){return E||(E=f.create()),C.elemType!=null&&Object.hasOwnProperty.call(C,"elemType")&&E.uint32(8).int32(C.elemType),C.shape!=null&&Object.hasOwnProperty.call(C,"shape")&&v.onnx.TensorShapeProto.encode(C.shape,E.uint32(18).fork()).ldelim(),E},x.encodeDelimited=function(C,E){return this.encode(C,E).ldelim()},x.decode=function(C,E){C instanceof d||(C=d.create(C));for(var N=E===void 0?C.len:C.pos+E,W=new v.onnx.TypeProto.SparseTensor;C.pos<N;){var q=C.uint32();switch(q>>>3){case 1:{W.elemType=C.int32();break}case 2:{W.shape=v.onnx.TensorShapeProto.decode(C,C.uint32());break}default:C.skipType(q&7);break}}return W},x.decodeDelimited=function(C){return C instanceof d||(C=new d(C)),this.decode(C,C.uint32())},x.verify=function(C){if(typeof C!="object"||C===null)return"object expected";if(C.elemType!=null&&C.hasOwnProperty("elemType")&&!g.isInteger(C.elemType))return"elemType: integer expected";if(C.shape!=null&&C.hasOwnProperty("shape")){var E=v.onnx.TensorShapeProto.verify(C.shape);if(E)return"shape."+E}return null},x.fromObject=function(C){if(C instanceof v.onnx.TypeProto.SparseTensor)return C;var E=new v.onnx.TypeProto.SparseTensor;if(C.elemType!=null&&(E.elemType=C.elemType|0),C.shape!=null){if(typeof C.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");E.shape=v.onnx.TensorShapeProto.fromObject(C.shape)}return E},x.toObject=function(C,E){E||(E={});var N={};return E.defaults&&(N.elemType=0,N.shape=null),C.elemType!=null&&C.hasOwnProperty("elemType")&&(N.elemType=C.elemType),C.shape!=null&&C.hasOwnProperty("shape")&&(N.shape=v.onnx.TensorShapeProto.toObject(C.shape,E)),N},x.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},x.getTypeUrl=function(C){return C===void 0&&(C="type.googleapis.com"),C+"/onnx.TypeProto.SparseTensor"},x}(),$}(),b.OperatorSetIdProto=function(){function $(y){if(y)for(var x=Object.keys(y),C=0;C<x.length;++C)y[x[C]]!=null&&(this[x[C]]=y[x[C]])}return $.prototype.domain="",$.prototype.version=g.Long?g.Long.fromBits(0,0,!1):0,$.create=function(y){return new $(y)},$.encode=function(y,x){return x||(x=f.create()),y.domain!=null&&Object.hasOwnProperty.call(y,"domain")&&x.uint32(10).string(y.domain),y.version!=null&&Object.hasOwnProperty.call(y,"version")&&x.uint32(16).int64(y.version),x},$.encodeDelimited=function(y,x){return this.encode(y,x).ldelim()},$.decode=function(y,x){y instanceof d||(y=d.create(y));for(var C=x===void 0?y.len:y.pos+x,E=new v.onnx.OperatorSetIdProto;y.pos<C;){var N=y.uint32();switch(N>>>3){case 1:{E.domain=y.string();break}case 2:{E.version=y.int64();break}default:y.skipType(N&7);break}}return E},$.decodeDelimited=function(y){return y instanceof d||(y=new d(y)),this.decode(y,y.uint32())},$.verify=function(y){return typeof y!="object"||y===null?"object expected":y.domain!=null&&y.hasOwnProperty("domain")&&!g.isString(y.domain)?"domain: string expected":y.version!=null&&y.hasOwnProperty("version")&&!g.isInteger(y.version)&&!(y.version&&g.isInteger(y.version.low)&&g.isInteger(y.version.high))?"version: integer|Long expected":null},$.fromObject=function(y){if(y instanceof v.onnx.OperatorSetIdProto)return y;var x=new v.onnx.OperatorSetIdProto;return y.domain!=null&&(x.domain=String(y.domain)),y.version!=null&&(g.Long?(x.version=g.Long.fromValue(y.version)).unsigned=!1:typeof y.version=="string"?x.version=parseInt(y.version,10):typeof y.version=="number"?x.version=y.version:typeof y.version=="object"&&(x.version=new g.LongBits(y.version.low>>>0,y.version.high>>>0).toNumber())),x},$.toObject=function(y,x){x||(x={});var C={};if(x.defaults)if(C.domain="",g.Long){var E=new g.Long(0,0,!1);C.version=x.longs===String?E.toString():x.longs===Number?E.toNumber():E}else C.version=x.longs===String?"0":0;return y.domain!=null&&y.hasOwnProperty("domain")&&(C.domain=y.domain),y.version!=null&&y.hasOwnProperty("version")&&(typeof y.version=="number"?C.version=x.longs===String?String(y.version):y.version:C.version=x.longs===String?g.Long.prototype.toString.call(y.version):x.longs===Number?new g.LongBits(y.version.low>>>0,y.version.high>>>0).toNumber():y.version),C},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(y){return y===void 0&&(y="type.googleapis.com"),y+"/onnx.OperatorSetIdProto"},$}(),b.OperatorStatus=function(){var $={},y=Object.create($);return y[$[0]="EXPERIMENTAL"]=0,y[$[1]="STABLE"]=1,y}(),b.FunctionProto=function(){function $(y){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],y)for(var x=Object.keys(y),C=0;C<x.length;++C)y[x[C]]!=null&&(this[x[C]]=y[x[C]])}return $.prototype.name="",$.prototype.input=g.emptyArray,$.prototype.output=g.emptyArray,$.prototype.attribute=g.emptyArray,$.prototype.attributeProto=g.emptyArray,$.prototype.node=g.emptyArray,$.prototype.docString="",$.prototype.opsetImport=g.emptyArray,$.prototype.domain="",$.create=function(y){return new $(y)},$.encode=function(y,x){if(x||(x=f.create()),y.name!=null&&Object.hasOwnProperty.call(y,"name")&&x.uint32(10).string(y.name),y.input!=null&&y.input.length)for(var C=0;C<y.input.length;++C)x.uint32(34).string(y.input[C]);if(y.output!=null&&y.output.length)for(var C=0;C<y.output.length;++C)x.uint32(42).string(y.output[C]);if(y.attribute!=null&&y.attribute.length)for(var C=0;C<y.attribute.length;++C)x.uint32(50).string(y.attribute[C]);if(y.node!=null&&y.node.length)for(var C=0;C<y.node.length;++C)v.onnx.NodeProto.encode(y.node[C],x.uint32(58).fork()).ldelim();if(y.docString!=null&&Object.hasOwnProperty.call(y,"docString")&&x.uint32(66).string(y.docString),y.opsetImport!=null&&y.opsetImport.length)for(var C=0;C<y.opsetImport.length;++C)v.onnx.OperatorSetIdProto.encode(y.opsetImport[C],x.uint32(74).fork()).ldelim();if(y.domain!=null&&Object.hasOwnProperty.call(y,"domain")&&x.uint32(82).string(y.domain),y.attributeProto!=null&&y.attributeProto.length)for(var C=0;C<y.attributeProto.length;++C)v.onnx.AttributeProto.encode(y.attributeProto[C],x.uint32(90).fork()).ldelim();return x},$.encodeDelimited=function(y,x){return this.encode(y,x).ldelim()},$.decode=function(y,x){y instanceof d||(y=d.create(y));for(var C=x===void 0?y.len:y.pos+x,E=new v.onnx.FunctionProto;y.pos<C;){var N=y.uint32();switch(N>>>3){case 1:{E.name=y.string();break}case 4:{E.input&&E.input.length||(E.input=[]),E.input.push(y.string());break}case 5:{E.output&&E.output.length||(E.output=[]),E.output.push(y.string());break}case 6:{E.attribute&&E.attribute.length||(E.attribute=[]),E.attribute.push(y.string());break}case 11:{E.attributeProto&&E.attributeProto.length||(E.attributeProto=[]),E.attributeProto.push(v.onnx.AttributeProto.decode(y,y.uint32()));break}case 7:{E.node&&E.node.length||(E.node=[]),E.node.push(v.onnx.NodeProto.decode(y,y.uint32()));break}case 8:{E.docString=y.string();break}case 9:{E.opsetImport&&E.opsetImport.length||(E.opsetImport=[]),E.opsetImport.push(v.onnx.OperatorSetIdProto.decode(y,y.uint32()));break}case 10:{E.domain=y.string();break}default:y.skipType(N&7);break}}return E},$.decodeDelimited=function(y){return y instanceof d||(y=new d(y)),this.decode(y,y.uint32())},$.verify=function(y){if(typeof y!="object"||y===null)return"object expected";if(y.name!=null&&y.hasOwnProperty("name")&&!g.isString(y.name))return"name: string expected";if(y.input!=null&&y.hasOwnProperty("input")){if(!Array.isArray(y.input))return"input: array expected";for(var x=0;x<y.input.length;++x)if(!g.isString(y.input[x]))return"input: string[] expected"}if(y.output!=null&&y.hasOwnProperty("output")){if(!Array.isArray(y.output))return"output: array expected";for(var x=0;x<y.output.length;++x)if(!g.isString(y.output[x]))return"output: string[] expected"}if(y.attribute!=null&&y.hasOwnProperty("attribute")){if(!Array.isArray(y.attribute))return"attribute: array expected";for(var x=0;x<y.attribute.length;++x)if(!g.isString(y.attribute[x]))return"attribute: string[] expected"}if(y.attributeProto!=null&&y.hasOwnProperty("attributeProto")){if(!Array.isArray(y.attributeProto))return"attributeProto: array expected";for(var x=0;x<y.attributeProto.length;++x){var C=v.onnx.AttributeProto.verify(y.attributeProto[x]);if(C)return"attributeProto."+C}}if(y.node!=null&&y.hasOwnProperty("node")){if(!Array.isArray(y.node))return"node: array expected";for(var x=0;x<y.node.length;++x){var C=v.onnx.NodeProto.verify(y.node[x]);if(C)return"node."+C}}if(y.docString!=null&&y.hasOwnProperty("docString")&&!g.isString(y.docString))return"docString: string expected";if(y.opsetImport!=null&&y.hasOwnProperty("opsetImport")){if(!Array.isArray(y.opsetImport))return"opsetImport: array expected";for(var x=0;x<y.opsetImport.length;++x){var C=v.onnx.OperatorSetIdProto.verify(y.opsetImport[x]);if(C)return"opsetImport."+C}}return y.domain!=null&&y.hasOwnProperty("domain")&&!g.isString(y.domain)?"domain: string expected":null},$.fromObject=function(y){if(y instanceof v.onnx.FunctionProto)return y;var x=new v.onnx.FunctionProto;if(y.name!=null&&(x.name=String(y.name)),y.input){if(!Array.isArray(y.input))throw TypeError(".onnx.FunctionProto.input: array expected");x.input=[];for(var C=0;C<y.input.length;++C)x.input[C]=String(y.input[C])}if(y.output){if(!Array.isArray(y.output))throw TypeError(".onnx.FunctionProto.output: array expected");x.output=[];for(var C=0;C<y.output.length;++C)x.output[C]=String(y.output[C])}if(y.attribute){if(!Array.isArray(y.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");x.attribute=[];for(var C=0;C<y.attribute.length;++C)x.attribute[C]=String(y.attribute[C])}if(y.attributeProto){if(!Array.isArray(y.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");x.attributeProto=[];for(var C=0;C<y.attributeProto.length;++C){if(typeof y.attributeProto[C]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");x.attributeProto[C]=v.onnx.AttributeProto.fromObject(y.attributeProto[C])}}if(y.node){if(!Array.isArray(y.node))throw TypeError(".onnx.FunctionProto.node: array expected");x.node=[];for(var C=0;C<y.node.length;++C){if(typeof y.node[C]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");x.node[C]=v.onnx.NodeProto.fromObject(y.node[C])}}if(y.docString!=null&&(x.docString=String(y.docString)),y.opsetImport){if(!Array.isArray(y.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");x.opsetImport=[];for(var C=0;C<y.opsetImport.length;++C){if(typeof y.opsetImport[C]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");x.opsetImport[C]=v.onnx.OperatorSetIdProto.fromObject(y.opsetImport[C])}}return y.domain!=null&&(x.domain=String(y.domain)),x},$.toObject=function(y,x){x||(x={});var C={};if((x.arrays||x.defaults)&&(C.input=[],C.output=[],C.attribute=[],C.node=[],C.opsetImport=[],C.attributeProto=[]),x.defaults&&(C.name="",C.docString="",C.domain=""),y.name!=null&&y.hasOwnProperty("name")&&(C.name=y.name),y.input&&y.input.length){C.input=[];for(var E=0;E<y.input.length;++E)C.input[E]=y.input[E]}if(y.output&&y.output.length){C.output=[];for(var E=0;E<y.output.length;++E)C.output[E]=y.output[E]}if(y.attribute&&y.attribute.length){C.attribute=[];for(var E=0;E<y.attribute.length;++E)C.attribute[E]=y.attribute[E]}if(y.node&&y.node.length){C.node=[];for(var E=0;E<y.node.length;++E)C.node[E]=v.onnx.NodeProto.toObject(y.node[E],x)}if(y.docString!=null&&y.hasOwnProperty("docString")&&(C.docString=y.docString),y.opsetImport&&y.opsetImport.length){C.opsetImport=[];for(var E=0;E<y.opsetImport.length;++E)C.opsetImport[E]=v.onnx.OperatorSetIdProto.toObject(y.opsetImport[E],x)}if(y.domain!=null&&y.hasOwnProperty("domain")&&(C.domain=y.domain),y.attributeProto&&y.attributeProto.length){C.attributeProto=[];for(var E=0;E<y.attributeProto.length;++E)C.attributeProto[E]=v.onnx.AttributeProto.toObject(y.attributeProto[E],x)}return C},$.prototype.toJSON=function(){return this.constructor.toObject(this,c.util.toJSONOptions)},$.getTypeUrl=function(y){return y===void 0&&(y="type.googleapis.com"),y+"/onnx.FunctionProto"},$}(),b}(),l.exports=v});function Fr(s,l){if(!s)throw new Error(typeof l=="string"?l:l())}function sn$2(s){return new TextDecoder().decode(s)}var ye$2,hr$1,pi$2,Ze$2,jn$2,We$2,it$2,U$2,an$2,mr$2,br,gr$1,fe$1=L$1(()=>{zn$2(),Zo$1(),ye$2=Ar$1(Cr$1()),yr(),hr$1=class{static arraysEqual(s,l){if(s.length!==l.length)return!1;for(let c=0;c<s.length;c++)if(s[c]!==l[c])return!1;return!0}},pi$2=class{static preprocessInputShapes(s,l){let c=s.length===1?[1,s[0]]:s,d=l.length===1?[l[0],1]:l;return[c,d]}static postprocessOutputShape(s,l,c){l===1&&s.splice(s.length-2,1),c===1&&s.pop()}static calcMatMulShape(s,l){return s[1]!==l[0]?void 0:[s[0],l[1]]}},Ze$2=class I$e{static calcShape(l,c,d=!1){let f=l.length,g=c.length;if(f===0)return c;if(g===0)return l;let v=Math.max(l.length,c.length),b=new Array(v);if(d){if(f<2||g<2)return;let $=pi$2.calcMatMulShape([l[f-2],l[f-1]],[c[g-2],c[g-1]]);if($===void 0)return;[b[v-2],b[v-1]]=$}for(let $=d?3:1;$<=v;$++){let y=f-$<0?1:l[f-$],x=g-$<0?1:c[g-$];if(y!==x&&y>1&&x>1)return;b[v-$]=Math.max(y,x)}return b}static index(l,c){let d=new Array(c.length);return I$e.fillIndex(l,c,d),d}static fillIndex(l,c,d){let f=l.length-c.length;for(let g=0;g<c.length;g++)d[g]=l[f+g]%c[g]}static calc(l,c,d,f,g){let v=I$e.calcShape(l.dims,c.dims);if(v){if(f&&!U$2.areEqual(v,l.dims))return;let b=U$2.size(v),$=f?l:new $e$2(v,g||l.type);if(v.length===0)$.set([],d(l.get([]),c.get([])));else{let y=new Array(v.length),x=new Array(l.dims.length),C=new Array(c.dims.length),E=0,N=0,W=!1,q=!1;l.dims.length===0&&(E=l.get([]),W=!0),c.dims.length===0&&(N=c.get([]),q=!0);let Y;for(let re=0;re<b;re++){Y=re;for(let se=v.length-1;se>=0;se--)y[se]=Y%v[se],Y=Math.floor(Y/v[se]);W||(I$e.fillIndex(y,l.dims,x),E=l.get(x)),q||(I$e.fillIndex(y,c.dims,C),N=c.get(C)),$.set(y,d(E,N))}}return $}}static isValidBroadcast(l,c){let d=l.length,f=c.length;if(d>f)return!1;for(let g=1;g<=d;g++)if(l[d-g]!==1&&l[d-g]!==c[f-g])return!1;return!0}static getBroadcastDims(l,c){let d=l.length,f=[];for(let g=0;g<d;g++){let v=d-1-g,b=l[v]||1;(c[c.length-1-g]||1)>1&&b===1&&f.unshift(v)}return f}},jn$2=class{static getShapeOfGemmResult(s,l,c,d,f){if(s.length!==2||c.length!==2)throw new Error("shape need to be of size 2");let g,v,b;l?(g=s[1],v=s[0]):(g=s[0],v=s[1]);let $=-1;if(d?(b=c[0],$=1):(b=c[1],$=0),c[$]!==v)throw new Error("dimension mismatch");if(g<=0||b<=0||v<=0)throw new Error("invalid shape specified");if(f&&!Ze$2.isValidBroadcast(f,[g,b]))throw new Error("gemm: invalid bias shape for broadcast");return[g,b,v]}},We$2=class RSe{static tensorDataTypeFromProto(l){switch(l){case ye$2.onnx.TensorProto.DataType.INT8:return"int8";case ye$2.onnx.TensorProto.DataType.UINT8:return"uint8";case ye$2.onnx.TensorProto.DataType.BOOL:return"bool";case ye$2.onnx.TensorProto.DataType.INT16:return"int16";case ye$2.onnx.TensorProto.DataType.UINT16:return"uint16";case ye$2.onnx.TensorProto.DataType.INT32:return"int32";case ye$2.onnx.TensorProto.DataType.UINT32:return"uint32";case ye$2.onnx.TensorProto.DataType.FLOAT:return"float32";case ye$2.onnx.TensorProto.DataType.DOUBLE:return"float64";case ye$2.onnx.TensorProto.DataType.STRING:return"string";case ye$2.onnx.TensorProto.DataType.INT64:return"int32";case ye$2.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${ye$2.onnx.TensorProto.DataType[l]}`)}}static tensorDataTypeStringToEnum(l){switch(l){case"int8":return ye$2.onnx.TensorProto.DataType.INT8;case"uint8":return ye$2.onnx.TensorProto.DataType.UINT8;case"bool":return ye$2.onnx.TensorProto.DataType.BOOL;case"int16":return ye$2.onnx.TensorProto.DataType.INT16;case"uint16":return ye$2.onnx.TensorProto.DataType.UINT16;case"int32":return ye$2.onnx.TensorProto.DataType.INT32;case"uint32":return ye$2.onnx.TensorProto.DataType.UINT32;case"float32":return ye$2.onnx.TensorProto.DataType.FLOAT;case"float64":return ye$2.onnx.TensorProto.DataType.DOUBLE;case"string":return ye$2.onnx.TensorProto.DataType.STRING;case"int64":return ye$2.onnx.TensorProto.DataType.INT64;case"uint64":return ye$2.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${l}`)}}static tensorDimsFromProto(l){return l.map(c=>Vt$1.isLong(c)?c.toNumber():c)}static tensorValueTypeFromProto(l){return{tensorType:RSe.tensorDataTypeFromProto(l.elemType),shape:{dims:RSe.tensorDimsFromProto(l.shape.dim.map(c=>c.dimValue))}}}static tensorDimsFromORTFormat(l){let c=[];for(let d=0;d<l.dimsLength();d++)c.push(it$2.longToNumber(l.dims(d)));return c}static tensorAttributesFromORTFormat(l){let c=[];for(let d=0;d<l.attributesLength();d++)c.push(l.attributes(d));return c}},it$2=class{static longToNumber(s,l){return Vt$1.isLong(s)?s.toNumber():s instanceof _.Long?Vt$1.fromValue({low:s.low,high:s.high,unsigned:l??!1}).toNumber():s}static isLong(s){return Vt$1.isLong(s)||s instanceof _.Long}},U$2=class k_e{static size(l){return k_e.getSizeFromDimensionRange(l,0,l.length)}static sizeFromDimension(l,c){if(c<0||c>l.length)throw new Error(`invalid dimension of ${c} for sizeFromDimension as Tensor has ${l.length} dimensions.`);return k_e.getSizeFromDimensionRange(l,c,l.length)}static sizeToDimension(l,c){if(c<0||c>l.length)throw new Error(`invalid dimension of ${c} for sizeToDimension as Tensor has ${l.length} dimensions.`);return k_e.getSizeFromDimensionRange(l,0,c)}static getSizeFromDimensionRange(l,c,d){let f=1;for(let g=c;g<d;g++){if(l[g]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");f*=l[g]}return f}static computeStrides(l){let c=l.length;if(c===0)return[];if(c===1)return[1];let d=new Array(c);d[c-1]=1,d[c-2]=l[c-1];for(let f=c-3;f>=0;--f)d[f]=d[f+1]*l[f+1];return d}static transpose(l){return l.slice().reverse()}static indicesToOffset(l,c,d){d===void 0&&(d=l.length);let f=0;for(let g=0;g<d;++g)f+=c[g]*l[g];return f}static offsetToIndices(l,c){let d=c.length;if(d===0)return[];if(d===1)return[l*c[0]];let f=new Array(c.length);for(let g=0;g<f.length-1;++g)f[g]=Math.floor(l/c[g]),l-=f[g]*c[g];return f[f.length-1]=l,f}static normalizeAxis(l,c){if(l<-c&&l>=c)throw new Error("unsupported axis for this operation.");return l<0?l+c:l}static normalizeAxes(l,c){return l.map(d=>this.normalizeAxis(d,c))}static incrementIndex(l,c,d){if(c.length===0||l.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(d===void 0)d=c.length;else if(d<=0||d>c.length)throw new Error("Incorrect axis to increment on");for(let f=d-1;f>=0&&(l[f]++,!(l[f]<c[f]));--f)l[f]=0}static calculateReshapedDims(l,c){if(c.length===0){if(l.length===0||k_e.size(l)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let d=c.length,f=new Array(d),g=-1,v=1;for(let $=0;$<d;$++){if(c[$]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(c[$]===-1){if(g!==-1)throw new Error("at most one dimension in shape hints can be -1");g=$}else{if(c[$]===0){if($>=l.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");f[$]=l[$]}else f[$]=c[$];v*=f[$]}}let b=k_e.size(l);if(g!==-1){if(b%v!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${l}] Output shape: [${c}]`);f[g]=b/v}else if(v!==b)throw new Error("reshapedDims and originalDims don't have matching sizes");return f}static sortBasedOnPerm(l,c){return c?c.map(d=>l[d]):l.slice().reverse()}static padShape(l,c){let d=l.length;return l.map((f,g)=>f+c[g]+c[g+d])}static areEqual(l,c){return l.length!==c.length?!1:l.every((d,f)=>d===c[f])}static validateDimsAndCalcSize(l){if(l.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let c=1;for(let d of l){if(!Number.isInteger(d))throw new TypeError(`Invalid shape: ${d} is not an integer`);if(d<0||d>2147483647)throw new TypeError(`Invalid shape: length ${d} is not allowed`);c*=d}return c}static flattenShape(l,c){c<0&&(c+=l.length);let d=l.reduce((g,v)=>g*v,1),f=l.slice(c).reduce((g,v)=>g*v,1);return[d/f,f]}static squeezeShape(l,c){let d=new Array;c=k_e.normalizeAxes(c,l.length);for(let f=0;f<l.length;f++){let g=c.indexOf(f)>=0;if(g&&l[f]!==1)throw new Error("squeeze an axis of size different than 1");(c.length===0&&l[f]>1||c.length>0&&!g)&&d.push(l[f])}return d}static unsqueezeShape(l,c){let d=new Array(l.length+c.length);d.fill(0);for(let g=0;g<c.length;g++){let v=k_e.normalizeAxis(c[g],d.length);if(v>=d.length)throw new Error("'axes' has an out of range axis");if(d[v]!==0)throw new Error("'axes' has a duplicate axis");d[v]=1}let f=0;for(let g=0;g<d.length;g++)d[g]===0&&(d[g]=l[f++]);if(f!==l.length)throw new Error("the unsqueezed dimension could not be established");return d}},an$2=class N3e{static splitShape(l,c,d,f){if(d.length===0){if(!f)throw new Error("need to know number of outputs when the 'split' attribute is not specified");N3e.determineSplit(l[c],f,d)}let g=[],v=[0];for(let b=0;b<d.length;++b){b!==0&&v.push(v[b-1]+d[b-1]);let $=l.slice();$[c]=d[b],g.push($)}return[g,v]}static determineSplit(l,c,d){if(l%c!==0)throw new Error("cannot split tensor to equal sized parts");for(let f=0;f<c;++f)d.push(l/c)}},mr$2=class M$e{static adjustPoolAttributes(l,c,d,f,g,v){if(!l&&d.length!==c.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(l)for(let b=0;b<c.length-2;b++)b>=d.length?d.push(c[b+2]):d[b]=c[b+2];for(let b=0;b<d.length;b++)if(b<f.length){if(f[b]<0)throw new Error("strides should be greater than or equal to 1")}else f.push(1);for(let b=0;b<d.length;b++)if(b<g.length){if(g[b]<0)throw new Error("dilations should be greater than or equal to 1")}else g.push(1);for(let b=0;b<d.length*2;b++)if(b<v.length){if(v[b]<0)throw new Error("pad should be greater than or equal to 1")}else v.push(0);for(let b=0;b<d.length;b++){if(d[b]<=0)throw new Error("kernel shapes need to be greater than 0");if(v[b]>=d[b]||v[b+d.length]>=d[b])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(l,c,d,f,g,v){if(v){if(g.length!==2*(l.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(c.length!==l.length-2)throw new Error("length of strides should be the length of data dimensions");if(f.length!==l.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let b=0;b<l.length-2;b++)M$e.adjustPadAndReturnShape(l[b+2],c[b],d[b],f[b],g,b,b+l.length-2,v)}}static computePoolOutputShape(l,c,d,f,g,v,b){if(c.length<=0)throw new Error("input shape must be of size greater than 0");let $=[c[0],c[1]];return M$e.computeShapeHelper(l,c,$,d,f,g,v,b),$}static computeConvOutputShape(l,c,d,f,g,v,b){if(l.length<=0||c.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let $=[l[0],c[0]];return M$e.computeShapeHelper(!1,l,$,d,f,g,v,b),$}static computeShapeHelper(l,c,d,f,g,v,b,$){if(l)for(let y=0;y<c.length-2;y++)d.push(1);else for(let y=0;y<c.length-2;y++)d.push(M$e.adjustPadAndReturnShape(c[y+2],f[y],g[y],v[y],b,y,y+c.length-2,$))}static adjustPadAndReturnShape(l,c,d,f,g,v,b,$){let y=d*(f-1)+1;if($&&$!=="NOTSET")switch($){case"VALID":return g[v]=0,g[b]=0,Math.floor((l-y)/c+1);case"SAME_LOWER":case"SAME_UPPER":if(d!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let x=((l+c-1)/c-1)*c+f-l;return g[v]=Math.floor($==="SAME_LOWER"?(x+1)/2:x/2),g[b]=x-g[v],Math.floor((l+x-f)/c+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((l+g[v]+g[b]-y)/c+1)}},br=-34028234663852886e22,gr$1=34028234663852886e22});function Hd$2(s){switch(s){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${s}`)}}function Fu$2(s){switch(s){case ne$2.onnx.TensorProto.DataType.UINT8:case ne$2.onnx.TensorProto.DataType.INT8:case ne$2.onnx.TensorProto.DataType.BOOL:return 1;case ne$2.onnx.TensorProto.DataType.UINT16:case ne$2.onnx.TensorProto.DataType.INT16:return 2;case ne$2.onnx.TensorProto.DataType.FLOAT:case ne$2.onnx.TensorProto.DataType.INT32:case ne$2.onnx.TensorProto.DataType.UINT32:return 4;case ne$2.onnx.TensorProto.DataType.INT64:case ne$2.onnx.TensorProto.DataType.DOUBLE:case ne$2.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${ne$2.onnx.TensorProto.DataType[s]}`)}}function qd$2(s,l){return new(Bu$2(l))(s)}function Bu$2(s){switch(s){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function hi$1(s,l){if(l===ne$2.onnx.TensorProto.DataType.INT64||l===di$2.TensorDataType.INT64){if(s.greaterThanOrEqual(2147483648)||s.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(l===ne$2.onnx.TensorProto.DataType.UINT32||l===di$2.TensorDataType.UINT32||l===ne$2.onnx.TensorProto.DataType.UINT64||l===di$2.TensorDataType.UINT64){if(s.greaterThanOrEqual(4294967296)||s.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${ne$2.onnx.TensorProto.DataType[l]}`);return s.toNumber()}function $u$2(s,l,c){switch(l){case ne$2.onnx.TensorProto.DataType.BOOL:case ne$2.onnx.TensorProto.DataType.UINT8:return s.getUint8(c);case ne$2.onnx.TensorProto.DataType.INT8:return s.getInt8(c);case ne$2.onnx.TensorProto.DataType.UINT16:return s.getUint16(c,!0);case ne$2.onnx.TensorProto.DataType.INT16:return s.getInt16(c,!0);case ne$2.onnx.TensorProto.DataType.FLOAT:return s.getFloat32(c,!0);case ne$2.onnx.TensorProto.DataType.INT32:return s.getInt32(c,!0);case ne$2.onnx.TensorProto.DataType.UINT32:return s.getUint32(c,!0);case ne$2.onnx.TensorProto.DataType.INT64:return hi$1(Vt$1.fromBits(s.getUint32(c,!0),s.getUint32(c+4,!0),!1),l);case ne$2.onnx.TensorProto.DataType.DOUBLE:return s.getFloat64(c,!0);case ne$2.onnx.TensorProto.DataType.UINT64:return hi$1(Vt$1.fromBits(s.getUint32(c,!0),s.getUint32(c+4,!0),!0),l);default:throw new Error(`cannot read from DataView for type ${ne$2.onnx.TensorProto.DataType[l]}`)}}var ku$2,ne$2,di$2,$e$2,yr=L$1(()=>{ku$2=Ar$1(Os$2()),Zo$1(),tn$2(),ne$2=Ar$1(Cr$1()),fe$1(),di$2=V$1.experimental.fbs,$e$2=class Axe{constructor(l,c,d,f,g,v=ku$2.Guid.create()){this.dims=l,this.type=c,this.dataProvider=d,this.asyncDataProvider=f,this.cache=g,this.dataId=v,this.size=U$2.validateDimsAndCalcSize(l);let b=this.size,$=d===void 0&&f===void 0&&g===void 0;if(g!==void 0&&g.length!==b)throw new RangeError("Input dims doesn't match data length.");if(c==="string"){if(g!==void 0&&(!Array.isArray(g)||!g.every(y=>typeof y=="string")))throw new TypeError("cache should be a string array");$&&(this.cache=new Array(b))}else{if(g!==void 0){let y=Bu$2(c);if(!(g instanceof y))throw new TypeError(`cache should be type ${y.name}`)}if($){let y=new ArrayBuffer(b*Hd$2(c));this.cache=qd$2(y,c)}}}get data(){if(this.cache===void 0){let l=this.dataProvider(this.dataId);if(l.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=l}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(l){return this.data[U$2.indicesToOffset(l,this.strides)]}set(l,c){this.data[U$2.indicesToOffset(l,this.strides)]=c}async getData(){return this.cache===void 0&&(this.cache=await this.asyncDataProvider(this.dataId)),this.cache}get strides(){return this._strides||(this._strides=U$2.computeStrides(this.dims)),this._strides}static fromProto(l){if(!l)throw new Error("cannot construct Value from an empty tensor");let c=We$2.tensorDataTypeFromProto(l.dataType),d=We$2.tensorDimsFromProto(l.dims),f=new Axe(d,c);if(c==="string")l.stringData.forEach((g,v)=>{f.data[v]=sn$2(g)});else if(l.rawData&&typeof l.rawData.byteLength=="number"&&l.rawData.byteLength>0){let g=f.data,v=new DataView(l.rawData.buffer,l.rawData.byteOffset,l.rawData.byteLength),b=Fu$2(l.dataType),$=l.rawData.byteLength/b;if(l.rawData.byteLength%b!==0)throw new Error("invalid buffer length");if(g.length!==$)throw new Error("buffer length mismatch");for(let y=0;y<$;y++){let x=$u$2(v,l.dataType,y*b);g[y]=x}}else{let g;switch(l.dataType){case ne$2.onnx.TensorProto.DataType.FLOAT:g=l.floatData;break;case ne$2.onnx.TensorProto.DataType.INT32:case ne$2.onnx.TensorProto.DataType.INT16:case ne$2.onnx.TensorProto.DataType.UINT16:case ne$2.onnx.TensorProto.DataType.INT8:case ne$2.onnx.TensorProto.DataType.UINT8:case ne$2.onnx.TensorProto.DataType.BOOL:g=l.int32Data;break;case ne$2.onnx.TensorProto.DataType.INT64:g=l.int64Data;break;case ne$2.onnx.TensorProto.DataType.DOUBLE:g=l.doubleData;break;case ne$2.onnx.TensorProto.DataType.UINT32:case ne$2.onnx.TensorProto.DataType.UINT64:g=l.uint64Data;break;default:throw new Error("unspecific error")}if(g==null)throw new Error("failed to populate data from a tensorproto value");let v=f.data;if(v.length!==g.length)throw new Error("array length mismatch");for(let b=0;b<g.length;b++){let $=g[b];Vt$1.isLong($)?v[b]=hi$1($,l.dataType):v[b]=$}}return f}static fromData(l,c,d){return new Axe(c,d,void 0,void 0,l)}static fromOrtTensor(l){if(!l)throw new Error("cannot construct Value from an empty tensor");let c=We$2.tensorDimsFromORTFormat(l),d=We$2.tensorDataTypeFromProto(l.dataType()),f=new Axe(c,d);if(d==="string")for(let g=0;g<l.stringDataLength();g++)f.data[g]=l.stringData(g);else if(l.rawDataArray()&&typeof l.rawDataLength()=="number"&&l.rawDataLength()>0){let g=f.data,v=new DataView(l.rawDataArray().buffer,l.rawDataArray().byteOffset,l.rawDataLength()),b=Fu$2(l.dataType()),$=l.rawDataLength()/b;if(l.rawDataLength()%b!==0)throw new Error("invalid buffer length");if(g.length!==$)throw new Error("buffer length mismatch");for(let y=0;y<$;y++){let x=$u$2(v,l.dataType(),y*b);g[y]=x}}return f}}});function H$1(s){return s===1?jd$2:Yd$2}function Nu$2(s){let l=H$1(s);return`${l.version}
      precision highp float;
      ${l.attribute} vec3 position;
      ${l.attribute} vec2 textureCoord;

      ${l.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function Ru$2(s){let l=H$1(s);return`${l.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${l.varyingFrag} vec2 TexCoords;
    ${l.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function Mu$2(s,l){let c=H$1(s);return`
  void main() {
    int indices[${l}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${c.output} = result;
  }
  `}var jd$2,Yd$2,we$2=L$1(()=>{jd$2={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},Yd$2={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),ae=L$1(()=>{});async function mi$2(s,l=d=>0,c){return new Promise((d,f)=>{let g=0,v=()=>{if(s()){d();return}g++;let b=l(g);setTimeout(v,b)};v()})}function Yn$2(s){return Fr(typeof s<"u"&&s.length!==0,()=>"empty string found for sampler name"),"get"+s.charAt(0).toUpperCase()+s.slice(1)}function Gu$1(s){return Fr(typeof s<"u"&&s.length!==0,()=>"empty string found for sampler name"),"get"+s.charAt(0).toUpperCase()+s.slice(1)+"AtOutCoords"}function $r(s,l){let c=JSON.parse(JSON.stringify(s));return c=l,c}function kr$2(s,l){return l.map(c=>s[c]).join(", ")}function Qe$2(s){if(s<=1)return"int";if(s===2)return"ivec2";if(s===3)return"ivec3";if(s===4)return"ivec4";if(s===5)return"ivec5";if(s===6)return"ivec6";throw Error(`GPU for rank ${s} is not yet supported`)}function Dt$2(s=6){return["x","y","z","w","u","v"].slice(0,s)}var Bt$2=L$1(()=>{fe$1()});function Xd$2(s,l){return Dt$2(l).map(c=>`${s}.${c}`)}function Br$1(s,l){return l===1?[s]:Xd$2(s,l)}function Nt(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var Tr=L$1(()=>{Bt$2()});function Jd$1(s,l,c){if(s===0)return"false";if(s===1)return`rc > ${l[0]}`;let d="";for(let f=s-2;f<s;f++)d+=`${c[f]} >= ${l[f-s+2]}`,f<s-1&&(d+="||");return d}function Zd$1(s,l){let c=s.length;if(c===0)return"getA(), 0, 0, 0";if(c===1)return`getA(rc),
            rc + 1 >= ${s[0]} ? 0. : getA(rc + 1),
            0, 0`;let d="r, c",f="r, cp1",g="rp1, c",v="rp1, cp1",b="";if(c>2)for(let $=0;$<c-2;++$)b=b+`${l[$]},`;return`getA(${b}${d}),
          rEdge ? 0. : getA(${b}${g}),
          cEdge ? 0. : getA(${b}${f}),
          rEdge || cEdge ? 0. : getA(${b}${v})`}function Qd$1(s,l,c,d){return s===0||s===1?"":`
    int r = ${l[s-2]};
    int c = ${l[s-1]};
    int rp1 = ${l[s-2]} + 1;
    int cp1 = ${l[s-1]} + 1;
    bool rEdge = rp1 >= ${d};
    bool cEdge = cp1 >= ${c};
    `}var Uu$2,Kd$2,zu$2,Vu$2=L$1(()=>{we$2(),ae(),Bt$2(),Tr(),Uu$2={name:"pack",inputNames:["A"],inputTypes:[1]},Kd$2=(s,l)=>{let c=H$1(s.session.backend.glContext.version),d=l.dims,f=d.length,g=l.dims.length,v=Qe$2(g),b=Br$1("rc",g),$=Qd$1(g,b,d[d.length-2],d[d.length-1]),y;f===0?y=[1,1]:f===1?y=[d[0],1]:y=[d[g-1],d[g-2]];let x=Jd$1(g,y,b),C=Zd$1(d,b),E=`
        void main() {
          ${v} rc = getOutputCoords();

          if(${x}) {
            ${c.output} = vec4(0);
          } else {
            ${$}

            ${c.output} = vec4(${C});
          }
        }
      `;return{...Uu$2,hasMain:!0,output:{dims:l.dims,type:l.type,textureType:2},shaderSource:E}},zu$2=(s,l)=>({...Uu$2,get:()=>Kd$2(s,l)})});function bi$1(s){if(s.length===0)return[1,1,1];let l=1;for(let c=0;c<s.length-2;++c)l*=s[c];return[l,s.length>1?s[s.length-2]:1,s[s.length-1]]}function Hu$2(s,l){let c=!1;return s.length===0||l.length===0?c=!0:s.length<2||l.length<2?c=s[s.length-1]===l[l.length-1]:c=s[s.length-1]===l[l.length-1]&&s[s.length-2]===l[l.length-2],c}function rh$1(s){let l=U$2.computeStrides(s),c=["b","r","c"],d="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${l.map((f,g)=>{let v=`int ${c[g]} = ${d} / ${f}`,b=g===l.length-1?`int ${c[g+1]} = ${d} - ${c[g]} * ${f}`:`index -= ${c[g]} * ${f}`;return`${v}; ${b};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function nh$1(s){let l=U$2.computeStrides(s);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${l[0]} + coords.z * ${l[1]} + coords.y;
  }
`}var eh$1,th$1,Wu$1,qu$1=L$1(()=>{fe$1(),we$2(),ae(),Tr(),eh$1=s=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${s}`}),th$1=(s,l,c,d)=>{let f=l.dims,g=d,v="";for(let y=0;y<4;y++){let x="";switch(y){case 0:x="outputCoords = rc;";break;case 1:x="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:x="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:x="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}v+=`
        ${x}
        ${y>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${y}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${y>0?"}":""}
      `}let b=H$1(s.session.backend.glContext.version),$=`
      ${rh$1(f)}
      ${nh$1(g)}
      ${Nt()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${g[2]};
        int cols = ${g[1]};

        ${v}
        ${b.output} = result;
      }
    `;return{...c,output:{dims:g,type:l.type,textureType:2},shaderSource:$,hasMain:!0}},Wu$1=(s,l,c)=>{let d=eh$1(c);return{...d,get:()=>th$1(s,l,d,c)}}}),gi$1,ju$2=L$1(()=>{we$2(),ae(),gi$1=(s,l)=>{let c=l.shape,d=H$1(s.session.backend.glContext.version),f=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${d.texture2D}(X,TexCoords).r;
      ${d.output} = encodeAsUint8(value);
    }`,g={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:c,type:l.tensor.type,textureType:3},shaderSource:f,hasMain:!0};return s.executeProgram(g,[l.tensor])}});function ih$1(s,l){if(s===1)return"rc";let c="";for(let d=0;d<s;d++)c+=l[d],d<s-1&&(c+=",");return c}var Yu$1,oh$1,Xu$1,Ku$1=L$1(()=>{we$2(),ae(),Bt$2(),Tr(),Yu$1={name:"unpack",inputNames:["A"],inputTypes:[2]},oh$1=(s,l)=>{let c=l.dims.length,d=Br$1("rc",c),f=d.slice(-2),g=Qe$2(c),v=Nt(),b=l.dims.length===0?"":ih$1(c,d),$=c<=1?"rc":`vec2(${f.join(",")})`,y=H$1(s.session.backend.glContext.version),x=`
    ${v}
    void main() {
      ${g} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${b});

       ${y.output} = vec4(getChannel(packedInput, ${$}), 0, 0, 0);
     }
   `;return{...Yu$1,hasMain:!0,output:{dims:l.dims,type:l.type,textureType:0},shaderSource:x}},Xu$1=(s,l)=>({...Yu$1,get:()=>oh$1(s,l)})}),Xn$2,un$1,Kn$1,ln$1=L$1(()=>{lt$2(),Xn$2=class{constructor(s,l=1){if(l===1)this.internalFormat=s.R32F,this.format=s.RED,this.textureType=s.FLOAT,this.channelSize=l;else if(l===4)this.internalFormat=s.RGBA32F,this.format=s.RGBA,this.textureType=s.FLOAT,this.channelSize=l;else throw new Error(`Invalid number of channels: ${l}`)}encode(s,l){let c,d;return s.constructor!==Float32Array&&(ce$1.warning("Encoder","data was not of type Float32; creating new Float32Array"),d=new Float32Array(s)),l*this.channelSize>s.length?(ce$1.warning("Encoder","Source data too small. Allocating larger array"),d=s,c=this.allocate(l*this.channelSize),d.forEach((f,g)=>c[g]=f)):(d=s,c=d),c}allocate(s){return new Float32Array(s*4)}decode(s,l){return this.channelSize===1?s.filter((c,d)=>d%4===0).subarray(0,l):s.subarray(0,l)}},un$1=class{constructor(s,l=1,c){if(l!==1&&l!==4)throw new Error(`Invalid number of channels: ${l}`);this.internalFormat=s.RGBA,this.format=s.RGBA,this.channelSize=l,this.textureType=c||s.FLOAT}encode(s,l){let c=s;return this.channelSize===1&&(ce$1.verbose("Encoder","Exploding into a larger array"),c=this.allocate(l),s.forEach((d,f)=>c[f*4]=d)),c}allocate(s){return new Float32Array(s*4)}decode(s,l){return this.channelSize===1?s.filter((c,d)=>d%4===0).subarray(0,l):s.subarray(0,l)}},Kn$1=class{constructor(s,l=1){if(this.channelSize=4,l===1)this.internalFormat=s.ALPHA,this.format=s.ALPHA,this.textureType=s.UNSIGNED_BYTE,this.channelSize=l;else if(l===4)this.internalFormat=s.RGBA,this.format=s.RGBA,this.textureType=s.UNSIGNED_BYTE,this.channelSize=l;else throw new Error(`Invalid number of channels: ${l}`)}encode(s,l){return new Uint8Array(s.buffer,s.byteOffset,s.byteLength)}allocate(s){return new Uint8Array(s*this.channelSize)}decode(s,l){if(s instanceof Uint8Array)return s.subarray(0,l);throw new Error(`Invalid array type: ${s.constructor}`)}}}),fn$1,Ju$1,yi$1,Zu$1=L$1(()=>{fe$1(),ae(),fn$1=(s,l,c)=>{let d=c===0||c===1?1:4,f=c===2,g=c===1||c===2,v=c===4?l.length-1:void 0,b=c===4?l.map(($,y)=>y===l.length-1?$*4:$):void 0;return yi$1(s,l,d,b,{isPacked:f,reverseWH:g,breakAxis:v})},Ju$1=(s,l,c)=>{let d=fn$1(s,l,c);return[d.width,d.height]},yi$1=(s,l,c=1,d,f)=>{let g=!!(f&&f.isPacked),[v,b]=s.computeTextureWH(g&&d||l,f),$=l.length,y=l.slice(0);if($===0&&(y=[1]),c===1)d=l;else if(g){if(c!==4)throw new Error("a packed texture must be 4-channel");d=l,$>0&&(y[$-1]=Math.ceil(y[$-1]/2)),$>1&&(y[$-2]=Math.ceil(y[$-2]/2))}else if(!d)throw new Error("Unpacked shape is needed when using channels > 1");return{width:v,height:b,channels:c,isPacked:g,shape:y,strides:U$2.computeStrides(y),unpackedShape:d,reversedWH:f&&f.reverseWH}}}),sh$1,Jn$2,el$2=L$1(()=>{lt$2(),yr(),fe$1(),Vu$2(),qu$1(),ju$2(),Ku$1(),ln$1(),Zu$1(),ae(),sh$1=(s,l)=>{let c=l.map(f=>`${f.unpackedShape.join(",")};${f.width}x${f.height}`).join("_"),d=s.name;return s.cacheHint&&(d+="["+s.cacheHint+"]"),d+=":"+c,d},Jn$2=class{constructor(s){this.session=s,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(s,l){return Ju$1(this.session.layoutStrategy,s,l)}executeProgram(s,l){if(l.length<s.inputNames.length)throw new Error(`Input size mustn't be less than ${s.inputNames.length}.`);if(s.inputNames.length!==s.inputTypes.length)throw new Error("input names size does not match input types");let c=[];for(let $=0;$<s.inputNames.length;++$)c[$]=this.getOrCreateTextureData(l[$],s.inputTypes[$]);let d=sh$1(s,c),f=this.session.programManager.getArtifact(d),g=f?f.programInfo:typeof s.get=="function"?s.get():s,v=fn$1(this.session.layoutStrategy,g.output.dims,g.output.textureType),b=this.createTextureData(v,g.output.type);return f||(f=this.session.programManager.build(g,c,b),this.session.programManager.setArtifact(d,f)),this.runProgram(f,c,b),b}run(s,l){return this.executeProgram(s,l).tensor}runProgram(s,l,c){for(let d=0;d<l.length;++d)if(!!l[d].isPacked!=(s.programInfo.inputTypes[d]===2))throw new Error(`input[${d}] property packed inconsistent`);if(!!c.isPacked!=(s.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(s,l,c)}getOrCreateTextureData(s,l){let c=this.getTextureData(s.dataId,l===2);if(!c&&(c=this.getTextureData(s.dataId,l!==2),c))return l===2?this.pack(c):this.unpack(c);if(!c){let d=fn$1(this.session.layoutStrategy,s.dims,l);if(l===4){let f=s.dims;if(f.length===4){let g=[f[0],Math.ceil(f[1]*f[2]*f[3]/4)],v=fn$1(this.session.layoutStrategy,g,l),b=s.numberData;if(f[1]*f[2]*f[3]%4!==0){let $=f[0],y=f[1]*f[2]*f[3],x=Math.ceil(y*1/4)*4,C=$*x;b=new Float32Array(C);for(let E=0;E<$;++E){let N=E*y,W=E*x+E%1*y;b.set(s.numberData.subarray(N,N+y),W)}}return this.createTextureData(v,s.type,b,s,1)}}if(l===2){let f=yi$1(this.session.layoutStrategy,s.dims,1,[],{reverseWH:!0}),g=this.createTextureData(f,s.type,s.numberData,s,1);c=this.pack(g)}else c=this.createTextureData(d,s.type,s.numberData,s,1)}return c}createTextureDataFromLayoutBindTensor(s,l,c,d){return this.createTextureData(s,l,c,d,1)}createTextureData(s,l,c,d,f){ce$1.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(s)}]`);let g=this.session.textureManager.createTextureFromLayout(l,s,c,f);return this.createTextureDataFromTexture(s,l,g,d)}reshapeUnpacked(s,l){let c=this.getOrCreateTextureData(s,0),d={channels:c.channels,height:c.height,width:c.width,shape:l.length!==0?l:[1],strides:U$2.computeStrides(l),unpackedShape:l};return this.createTextureDataFromTexture(d,s.type,c.texture).tensor}reshapePacked(s,l){let c=this.getOrCreateTextureData(s,2);if(Hu$2(s.dims,l)){let b={channels:c.channels,height:c.height,width:c.width,shape:l.length!==0?l:[1],strides:U$2.computeStrides(l),unpackedShape:l,isPacked:!0};return this.createTextureDataFromTexture(b,s.type,c.texture).tensor}let d=bi$1(s.dims),f=bi$1(l),g=this.reshapePacked(s,d),v=this.run(Wu$1(this,g,f),[g]);return this.reshapePacked(v,l)}cast(s,l){let c=this.getOrCreateTextureData(s,0);return this.createTextureDataFromTexture(c,l,c.texture).tensor}createTextureDataFromTexture(s,l,c,d,f){let g={...s,tensor:d||new $e$2(s.unpackedShape,l,v=>this.readTexture(g),async v=>this.readTextureAsync(g),void 0,f),texture:c};return this.setTextureData(g.tensor.dataId,g,s.isPacked),g}getTextureData(s,l=!1){return this.session.isInitializer(s)?this.session.getTextureData(s,l):l?this.packedTextureDataCache.get(s):this.unpackedTextureDataCache.get(s)}setTextureData(s,l,c=!1){this.session.isInitializer(s)?this.session.setTextureData(s,l,c):(c?this.packedTextureDataCache:this.unpackedTextureDataCache).set(s,l)}isTextureLayoutCached(s,l=!1){return!!this.getTextureData(s.dataId,l)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(s=>this.session.textureManager.releaseTexture(s)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(s=>this.session.textureManager.releaseTexture(s)),this.unpackedTextureDataCache=new Map}readTexture(s){return s.isPacked?this.readTexture(this.unpack(s)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(s,s.tensor.type,s.channels):this.session.textureManager.readUint8TextureAsFloat(gi$1(this,s))}async readTextureAsync(s){return s.isPacked?this.readTextureAsync(this.unpack(s)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(s,s.tensor.type,s.channels):this.session.textureManager.readUint8TextureAsFloat(gi$1(this,s))}pack(s){return this.executeProgram(zu$2(this,s.tensor),[s.tensor])}unpack(s){return this.executeProgram(Xu$1(this,s.tensor),[s.tensor])}}}),Ti$1,Q,Ue$2=L$1(()=>{Ti$1=class{constructor(s){Object.assign(this,s)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(s=>`${this[s]}`).join(";")),this.key}},Q=s=>new Ti$1(s)}),tl$2,rl$2,nl$2,uh$1,lh$1,ol$2=L$1(()=>{Ue$2(),we$2(),ae(),tl$2={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},rl$2=(s,l,c)=>(lh$1(l),[s.run({...tl$2,cacheHint:c.cacheKey,get:()=>uh$1(s,l,c)},l)]),nl$2=s=>{let l=s.attributes.getFloat("epsilon",1e-5),c=s.attributes.getFloat("momentum",.9),d=s.attributes.getInt("spatial",1);return Q({epsilon:l,momentum:c,spatial:d})},uh$1=(s,l,c)=>{let d=H$1(s.session.backend.glContext.version),f=l[0].dims.length,[g,v]=s.calculateTextureWidthAndHeight(l[1].dims,0),b=`
  float process(int[${f}] indices) {
    vec2 position = offsetToCoords(indices[1], ${g}, ${v});
    float scale = getColorAsFloat(${d.texture2D}(Scale, position));
    float mean = getColorAsFloat(${d.texture2D}(Mean, position));
    float variance = getColorAsFloat(${d.texture2D}(Variance, position));
    float b = getColorAsFloat(${d.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${c.epsilon})) ) + b;
  }`;return{...tl$2,output:{dims:l[0].dims,type:l[0].type,textureType:0},shaderSource:b}},lh$1=s=>{if(!s||s.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let l=s[0],c=s[1],d=s[2],f=s[3],g=s[4];if(l.dims.length<3||c.dims.length!==1||d.dims.length!==1||f.dims.length!==1||g.dims.length!==1)throw new Error("invalid input shape.");if(c.dims[0]!==l.dims[1]||d.dims[0]!==l.dims[1]||f.dims[0]!==l.dims[1]||g.dims[0]!==l.dims[1])throw new Error("invalid input shape.");if(l.type!=="float32"&&l.type!=="float64"||c.type!=="float32"&&c.type!=="float64"||d.type!=="float32"&&d.type!=="float64"||f.type!=="float32"&&f.type!=="float64"||g.type!=="float32"&&g.type!=="float64")throw new Error("invalid input tensor types.")}}),Zn$2,dt,R$1,cn$2,Qn$2,Wt$2=L$1(()=>{Zn$2=class{constructor(s,l,c,d){this.glContext=s,this.programInfo=l,this.inputTextureLayouts=c,this.outputTextureLayout=d}},dt=class{constructor(s){this.context=s}},R$1=class{constructor(s,l){this.routineBody=s,this.dependencies=l}},cn$2=class{constructor(s,l,c){this.name=s,c?this.dependencies=c:this.dependencies=[],l&&(this.routineBody=l)}addDependency(s){s&&this.dependencies.push(s)}},Qn$2=class{static returnOrderedNodes(s){if(!s||s.length===0)return[];if(s.length===1)return s;let l=new Set,c=new Set,d=new Array;return this.createOrderedNodes(s,l,c,d),d}static createOrderedNodes(s,l,c,d){for(let f=0;f<s.length;++f)this.dfsTraverse(s[f],l,c,d)}static dfsTraverse(s,l,c,d){if(!s||c.has(s.name))return;if(l.has(s.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");l.add(s.name);let f=s.dependencies;if(f&&f.length>0)for(let g=0;g<f.length;++g)this.dfsTraverse(f[g],l,c,d);d.push(s),c.add(s.name),l.delete(s.name)}}});function ch$2(){let s="add_";return{body:`
  float ${s}(float a, float b) {
    return a + b;
  }
  vec4 ${s}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:s,type:0}}function ph$1(){let s="div_";return{body:`
  float ${s}(float a, float b) {
    return a / b;
  }
  vec4 ${s}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:s,type:0}}function dh$1(){let s="mul_";return{body:`
  float ${s}(float a, float b) {
    return a * b;
  }
  vec4 ${s}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:s,type:0}}function hh$1(){let s="sub_";return{body:`
  float ${s}(float a, float b) {
    return a - b;
  }
  vec4 ${s}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:s,type:0}}function mh$1(){let s="equal_";return{body:`
  float ${s}(float a, float b) {
    return float(a == b);
  }
  vec4 ${s}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:s,type:0}}function bh$1(){let s="greater_";return{body:`
  float ${s}(float a, float b) {
    return float(a > b);
  }
  vec4 ${s}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:s,type:0}}function gh$1(){let s="less_";return{body:`
  float ${s}(float a, float b) {
    return float(a < b);
  }
  vec4 ${s}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:s,type:0}}function yh$1(){let s="and_";return{body:`
  float ${s}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${s}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:s,type:0}}function Th$1(){let s="or_";return{body:`
  float ${s}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${s}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:s,type:0}}function xh$1(){let s="xor_";return{body:`
  float ${s}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${s}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:s,type:0}}function wh$1(){return _h$1("pow")}function vh$1(){let s="prelu_";return{body:`
  float ${s}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${s}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:s,type:0}}function _h$1(s){let l=`${s}_`;return{body:`
  float ${l}(float a, float b) {
    return ${s}(a, b);
  }
  vec4 ${l}(vec4 v1, vec4 v2) {
    return ${s}(v1, v2);
  }
  `,name:l,type:0}}var ht$1,Oh$1,il$2,al$2,sl$2,ul$2,ll$2,fl$2,cl$2,pl$2,dl$2,hl$2,ml$2,bl$2,gl$2=L$1(()=>{fe$1(),Wt$2(),we$2(),ae(),ht$1=(s,l,c,d=l[0].type,f)=>{let g=s.session.pack?2:0;return{name:c.name,inputNames:["A","B"],inputTypes:[g,g],cacheHint:f,get:()=>Oh$1(s,l,c,d)}},Oh$1=(s,l,c,d=l[0].type)=>{let f=s.session.pack?2:0,g=!U$2.areEqual(l[0].dims,l[1].dims),v=l[0].dims,b=s.session.pack;if(g){let x=Ze$2.calcShape(l[0].dims,l[1].dims,!1);if(!x)throw new Error("Can't perform binary op on the given tensors");v=x;let C=v.length,E=l[0].dims.length!==0?l[0].dims.length:1,N=l[1].dims.length!==0?l[1].dims.length:1,W=l[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",q=l[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",Y=H$1(s.session.backend.glContext.version),re=b?`
      ${c.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${c.name}(a, b);
        ${Y.output} = result;
      }`:`
      ${c.body}
      float process(int indices[${C}]) {
        int aindices[${E}];
        int bindices[${N}];
        ${W}
        ${q}
        return ${c.name}(_A(aindices), _B(bindices));
      }`;return{name:c.name,inputNames:["A","B"],inputTypes:[f,f],output:{dims:v,type:d,textureType:f},shaderSource:re,hasMain:b}}let $=H$1(s.session.backend.glContext.version),y=`
    ${c.body}
    void main() {
      vec4 v1 = ${$.texture2D}(A, TexCoords);
      vec4 v2 = ${$.texture2D}(B, TexCoords);
      vec4 result = ${c.name}(v1, v2);
      ${$.output} = result;
    }
    `;return{name:c.name,inputNames:["A","B"],inputTypes:[f,f],output:{dims:l[0].dims,type:d,textureType:f},shaderSource:y,hasMain:!0}},il$2=(s,l)=>[s.run(ht$1(s,l,ch$2()),l)],al$2=(s,l)=>[s.run(ht$1(s,l,yh$1(),"bool"),l)],sl$2=(s,l)=>[s.run(ht$1(s,l,ph$1()),l)],ul$2=(s,l)=>[s.run(ht$1(s,l,mh$1(),"bool"),l)],ll$2=(s,l)=>[s.run(ht$1(s,l,bh$1(),"bool"),l)],fl$2=(s,l)=>[s.run(ht$1(s,l,gh$1(),"bool"),l)],cl$2=(s,l)=>[s.run(ht$1(s,l,dh$1()),l)],pl$2=(s,l)=>[s.run(ht$1(s,l,Th$1(),"bool"),l)],dl$2=(s,l)=>[s.run(ht$1(s,l,wh$1()),l)],hl$2=(s,l)=>[s.run(ht$1(s,l,vh$1()),l)],ml$2=(s,l)=>[s.run(ht$1(s,l,hh$1()),l)],bl$2=(s,l)=>[s.run(ht$1(s,l,xh$1(),"bool"),l)]}),yl$2,Tl$2,Sh$1,xl$2=L$1(()=>{fe$1(),yl$2=(s,l,c)=>(Sh$1(l),[s.cast(l[0],c)]),Tl$2=s=>We$2.tensorDataTypeFromProto(s.attributes.getInt("to")),Sh$1=s=>{if(!s||s.length!==1)throw new Error("Cast requires 1 input.");if(s[0].type==="string")throw new Error("Invalid input type.")}}),Ah$1,Ph$1,wl$2,eo$2,vl$2=L$1(()=>{we$2(),ae(),Bt$2(),Tr(),Ah$1=(s,l)=>({name:"Concat (packed)",inputNames:Array.from({length:s},(c,d)=>`X${d}`),inputTypes:Array(s).fill(2),cacheHint:l}),Ph$1=(s,l,c,d)=>{let f=c[0].dims.slice();if(d>=f.length||d<-1*f.length)throw new Error("axis specified for concat doesn't match input dimensionality");d<0&&(d=f.length+d);let g=f.slice(0);for(let ge=1;ge<c.length;ge++){let Se=c[ge].dims.slice();for(let Ae=0;Ae<f.length;Ae++)if(Ae===d)g[d]+=Se[Ae];else if(f[Ae]!==Se[Ae])throw new Error("non concat dimensions must match")}let v=g.length,b=Br$1("coords",v),$=Qe$2(v),y=Nt(),x=c.map(ge=>ge.dims),C=Dt$2(v),E=new Array(x.length-1);E[0]=x[0][d];for(let ge=1;ge<E.length;ge++)E[ge]=E[ge-1]+x[ge][d];let N=C[d],W=C.slice(-2),q=C.join(),Y=`if (${N} < ${E[0]}) {
        return getChannel(
            getX0(${q}), vec2(${W.join()}));
        }`;for(let ge=1;ge<E.length;ge++){let Se=E[ge-1];Y+=`
            if (${N} < ${E[ge]}  && ${N} >= ${E[ge-1]}) {
              return getChannel(
                getX${ge}(${eo$2(C,N,Se)}),
                vec2(${eo$2(W,N,Se)}));
            }`}let re=E.length,se=E[E.length-1];Y+=`
            return getChannel(
              getX${re}(${eo$2(C,N,se)}),
              vec2(${eo$2(W,N,se)}));`;let de=H$1(s.session.backend.glContext.version),he=`
          ${y}
          float getValue(${C.map(ge=>"int "+ge)}) {
            ${Y}
          }

          void main() {
            ${$} coords = getOutputCoords();
            int lastDim = coords.${C[v-1]};
            coords.${C[v-1]} = coords.${C[v-2]};
            coords.${C[v-2]} = lastDim;

            vec4 result = vec4(getValue(${b}), 0., 0., 0.);

            ${b[v-1]} = ${b[v-1]} + 1;
            if (${b[v-1]} < ${g[v-1]}) {
              result.g = getValue(${b});
            }

            ${b[v-2]} = ${b[v-2]} + 1;
            if (${b[v-2]} < ${g[v-2]}) {
              result.a = getValue(${b});
            }

            ${b[v-1]} = ${b[v-1]} - 1;
            if (${b[v-2]} < ${g[v-2]} &&
                ${b[v-1]} < ${g[v-1]}) {
              result.b = getValue(${b});
            }
            ${de.output} = result;
          }
        `;return{...l,output:{dims:g,type:c[0].type,textureType:2},shaderSource:he,hasMain:!0}},wl$2=(s,l,c)=>{let d=Ah$1(l.length,c.cacheKey);return{...d,get:()=>Ph$1(s,d,l,c.axis)}},eo$2=(s,l,c)=>{let d=s.indexOf(l);return s.map((f,g)=>g===d?`${f} - ${c}`:f).join()}}),_l$2,Eh$1,Dh$1,Lh$1,Ol$2,Ch$1,Fh$1,$h$1,Il$2,kh$1,Sl$2=L$1(()=>{Ue$2(),ae(),vl$2(),_l$2=(s,l,c)=>(kh$1(l),s.session.pack&&l[0].dims.length>1?[s.run(wl$2(s,l,c),l)]:[s.run(Lh$1(s,l,c),l)]),Eh$1=(s,l)=>({name:"Concat",inputNames:Array.from({length:s},(c,d)=>`X${d}`),inputTypes:Array(s).fill(0),cacheHint:l}),Dh$1=(s,l,c,d)=>{let f=c[0].dims.slice();if(d>=f.length||d<-1*f.length)throw new Error("axis specified for concat doesn't match input dimensionality");d<0&&(d=f.length+d);let g=f.slice(0);for(let N=1;N<c.length;N++){let W=c[N].dims.slice();for(let q=0;q<f.length;q++)if(q===d)g[d]+=W[q];else if(f[q]!==W[q])throw new Error("non concat dimensions must match")}let v=g.length,b=new Array(c.length),$=0;for(let N=0;N<b.length;++N)$+=c[N].dims[d],b[N]=$;let y="";c.length<5?y=Ol$2(b):y=Ch$1(b);let x=Fh$1(c.length,v),C=$h$1(b),E=`
        ${x}
        ${C}
        ${y}
        float process(int indices[${v}]) {
          int textureIndex = getTextureWhereDataResides (indices[${d}]);

          if(textureIndex != 0) {
            indices[${d}] = indices[${d}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return{...l,output:{dims:g,type:c[0].type,textureType:0},shaderSource:E}},Lh$1=(s,l,c)=>{let d=Eh$1(l.length,c.cacheKey);return{...d,get:()=>Dh$1(s,d,l,c.axis)}},Ol$2=s=>`int getTextureWhereDataResides(int index) {
      ${s.map((l,c)=>`if(index<${l}) {return ${c};}
`).join("")}
    }`,Ch$1=s=>Ol$2(s),Fh$1=(s,l)=>{let c=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${l}]) {`];for(let d=0;d<s;++d)d===0?c.push(`	if (textureIndex == ${d}) { return _X${d}(indices); }`):d===s-1?c.push(`	else { return _X${d}(indices); }`):c.push(`	else if (textureIndex == ${d}) { return _X${d}(indices); }`);return c.push("	}"),c.join(`
`)},$h$1=s=>{let l=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let c=0;c<s.length;++c)c===0?l.push(`	if (index == ${c}) { return ${s[c]}; }`):c===s.length-1?l.push(`	else { return ${s[c]}; }`):l.push(`	else if (index == ${c}) { return ${s[c]}; }`);return l.push("	}"),l.join(`
`)},Il$2=s=>Q({axis:s.attributes.getInt("axis")}),kh$1=s=>{if(!s||s.length<1)throw new Error("too few inputs");let l=s[0].type,c=s[0].dims.length;if(l==="string")throw new Error("string tensor is not supported yet");for(let d of s){if(d.type!==l)throw new Error("input tensors should be one type");if(d.dims.length!==c)throw new Error("input tensors should have the same shape")}}});function Bh$1(){return mt$1("abs")}function Nh$1(){return mt$1("acos")}function Rh$1(){return mt$1("asin")}function Mh$1(){return mt$1("atan")}function Gh$1(){return mt$1("ceil")}function Uh$1(){return mt$1("cos")}function zh$1(s){let l="elu";return{body:`
  const float alpha = float(${s});

  float ${l}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${l}_(vec4 v) {
    return vec4(${l}_(v.x), ${l}_(v.y), ${l}_(v.z), ${l}_(v.w));
  }
  `,name:l,type:0}}function Vh$1(){return mt$1("exp")}function Wh$1(){return mt$1("floor")}function xi$1(s,l){let c="clip";return{body:`
  const float min = float(${s});
  const float max = float(${l});

  float ${c}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${c}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:c,type:0}}function Hh$1(){let s="indentity";return{body:`
  float ${s}_(float a) {
    return a;
  }
  vec4 ${s}_(vec4 v) {
    return v;
  }
  `,name:s,type:0}}function qh$1(s){let l="leakyRelu";return{body:`
  const float alpha = float(${s});

  float ${l}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${l}_(vec4 v) {
    return vec4(${l}_(v.x), ${l}_(v.y), ${l}_(v.z), ${l}_(v.w));
  }
  `,name:l,type:0}}function jh$1(){return mt$1("log")}function Yh$1(){let s="neg";return{body:`
  float ${s}_(float a) {
    return -a;
  }
  vec4 ${s}_(vec4 v) {
    return -v;
  }
  `,name:s,type:0}}function Xh$1(){let s="not";return{body:`
  float ${s}_(float a) {
    return float( ! bool(a) );
  }
  bool ${s}_(bool a) {
    return !a;
  }
  vec4 ${s}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${s}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:s,type:0}}function Kh$1(){return mt$1("sin")}function wi$1(){let s="relu";return{body:`
  float ${s}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${s}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:s,type:0}}function vi$1(){let s="sigmoid";return{body:`
  float ${s}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${s}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:s,type:0}}function Jh$1(){return mt$1("sqrt")}function Zh$1(){return mt$1("tan")}function Qh$1(){let s="tanh";return{body:`
  float ${s}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${s}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:s,type:0}}function mt$1(s){return{body:`
  float ${s}_(float a) {
    return ${s}(a);
  }
  vec4 ${s}_(vec4 v) {
    return ${s}(v);
  }
  `,name:s,type:0}}var em$2,Ee,Al$2,Pl$1,El$2,Dl$2,_i$2,Ll$2,Cl$2,tm$2,Fl$2,$l$2,kl$2,Bl$1,Nl$3,Rl$2,Oi$2,Ml$2,Gl$1,Ul$2,zl$2,Vl$2,Wl$1,Hl$2,ql$1,jl$2,Yl$2,Xl$2,Ii$1=L$1(()=>{Ue$2(),fe$1(),Wt$2(),we$2(),ae(),em$2=(s,l,c,d)=>{let f=s.session.pack?2:0,g=H$1(s.session.backend.glContext.version);return{...l,output:{dims:c.dims,type:c.type,textureType:f},shaderSource:`
     ${d.body}
     void main() {
       vec4 v = ${g.texture2D}(A, TexCoords);
       v = ${d.name}_(v);
       ${g.output} = v;
     }
     `,hasMain:!0}},Ee=(s,l,c,d)=>{let f=s.session.pack?2:0,g={name:c.name,inputTypes:[f],inputNames:["A"],cacheHint:d};return{...g,get:()=>em$2(s,g,l,c)}},Al$2=(s,l)=>[s.run(Ee(s,l[0],Bh$1()),l)],Pl$1=(s,l)=>[s.run(Ee(s,l[0],Nh$1()),l)],El$2=(s,l)=>[s.run(Ee(s,l[0],Rh$1()),l)],Dl$2=(s,l)=>[s.run(Ee(s,l[0],Mh$1()),l)],_i$2=(s,l,c)=>[s.run(Ee(s,l[0],xi$1(c.min,c.max),c.cacheKey),l)],Ll$2=s=>Q({min:s.attributes.getFloat("min",br),max:s.attributes.getFloat("max",gr$1)}),Cl$2=(s,l)=>{let c=tm$2(s,l);return _i$2(s,[l[0]],c)},tm$2=(s,l)=>{if(l.length>=3&&(!s.session.isInitializer(l[1].dataId)||!s.session.isInitializer(l[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let c=l.length>=3?l[1].numberData[0]:br,d=l.length>=3?l[2].numberData[0]:gr$1;return Q({min:c,max:d})},Fl$2=(s,l)=>[s.run(Ee(s,l[0],Gh$1()),l)],$l$2=(s,l)=>[s.run(Ee(s,l[0],Uh$1()),l)],kl$2=(s,l,c)=>[s.run(Ee(s,l[0],zh$1(c.alpha),c.cacheKey),l)],Bl$1=s=>Q({alpha:s.attributes.getFloat("alpha",1)}),Nl$3=(s,l)=>[s.run(Ee(s,l[0],Vh$1()),l)],Rl$2=(s,l)=>[s.run(Ee(s,l[0],Wh$1()),l)],Oi$2=(s,l)=>[s.run(Ee(s,l[0],Hh$1()),l)],Ml$2=(s,l,c)=>[s.run(Ee(s,l[0],qh$1(c.alpha),c.cacheKey),l)],Gl$1=s=>Q({alpha:s.attributes.getFloat("alpha",.01)}),Ul$2=(s,l)=>[s.run(Ee(s,l[0],jh$1()),l)],zl$2=(s,l)=>[s.run(Ee(s,l[0],Yh$1()),l)],Vl$2=(s,l)=>[s.run(Ee(s,l[0],Xh$1()),l)],Wl$1=(s,l)=>[s.run(Ee(s,l[0],wi$1()),l)],Hl$2=(s,l)=>[s.run(Ee(s,l[0],vi$1()),l)],ql$1=(s,l)=>[s.run(Ee(s,l[0],Kh$1()),l)],jl$2=(s,l)=>[s.run(Ee(s,l[0],Jh$1()),l)],Yl$2=(s,l)=>[s.run(Ee(s,l[0],Zh$1()),l)],Xl$2=(s,l)=>[s.run(Ee(s,l[0],Qh$1()),l)]});function Rt$1(s){let l;switch(s.activation){case"Relu":l=wi$1();break;case"Sigmoid":l=vi$1();break;case"Clip":l=xi$1(s.clipMin,s.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let c=l.name,d=l.body,f=`value = ${c}_(value);`;return{activationFunction:d,applyActivation:f}}var Nr$1,xr=L$1(()=>{fe$1(),Ii$1(),Nr$1=s=>{let l=s.getString("activation","");if(l==="Clip"){let[c,d]=s.getFloats("activation_params",[br,gr$1]);return{activation:l,clipMax:d,clipMin:c,activationCacheKey:`${l}:${c},${d}`}}return{activation:l,activationCacheKey:l}}}),nm$2,om$2,Kl$2,Jl$2=L$1(()=>{lt$2(),we$2(),ae(),to$2(),xr(),nm$2=(s,l)=>({name:"GroupedConv",inputNames:s?["X","W","Bias"]:["X","W"],inputTypes:s?[0,0,0]:[0,0],cacheHint:l}),om$2=(s,l,c,d)=>{let f=l.length>2?"value += getBias(output_channel);":"",g=l[0].dims.slice(),v=l[1].dims.slice(),b=v[0]/d.group;ce$1.verbose("GroupedConv",`autpPad:${d.autoPad}, dilations:${d.dilations}, group:${d.group}, kernelShape:${d.kernelShape}, pads:${d.pads}, strides:${d.strides}`);let $=Rr$1(g,v,d.dilations,d.pads,d.strides),y=H$1(s.session.backend.glContext.version),{activationFunction:x,applyActivation:C}=Rt$1(d),E=`
  const ivec2 strides = ivec2(${d.strides[0]}, ${d.strides[1]});
  const ivec2 pads = ivec2(${d.pads[0]}, ${d.pads[1]});
  ${x}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${b};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${v[1]}; wInChannel++) {
      int input_channel = group_id * ${v[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${v[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${d.dilations[0]};

        if (xHeight < 0 || xHeight >= ${g[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${v[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${d.dilations[1]};
          if (xWidth < 0 || xWidth >= ${g[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${f}
    ${C}
    ${y.output} = vec4(value, .0, .0, .0);
  }
`;return{...c,output:{dims:$,type:l[0].type,textureType:0},shaderSource:E,hasMain:!0}},Kl$2=(s,l,c)=>{let d=nm$2(l.length>2,c.cacheKey);return{...d,get:()=>om$2(s,l,d,c)}}}),im$2,am$2,Zl$2,Ql$2=L$1(()=>{we$2(),ae(),Tr(),im$2=s=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:s}),am$2=(s,l,c,d,f,g)=>{let v=c.dims,b=d.dims,$=2,y=3,x=f.length,C=[b[1]*b[2]*b[3],f[2]*f[3]],E=b[2]*b[3],N=Nt(),W=H$1(s.session.backend.glContext.version),q="";for(let re=0;re<=1;re++)for(let se=0;se<=1;se++)q+=`
            blockIndex = rc.x + ${se};
            pos = rc.y + ${re};

            if(blockIndex < ${C[1]} && pos < ${C[0]}) {
              offsetY = int(blockIndex / (${f[x-1]})) * ${g.strides[0]} -
                ${g.pads[0]};
              d0 = offsetY + ${g.dilations[0]} * (imod(pos, ${E}) / ${b[2]});

              if(d0 < ${v[$]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${f[x-1]}) * ${g.strides[1]} -
                  ${g.pads[1]};
                d1 = offsetX + ${g.dilations[1]} * imod(imod(pos, ${E}), ${b[2]});

                if(d1 < ${v[y]} && d1 >= 0) {

                  ch = int(float(pos)/ ${E}.);
                    innerDims = vec2(d0, d1);
                    result[${re*2+se}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let Y=`
      ${N}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${q}
          ${W.output} = result;
      }
            `;return{...l,output:{dims:C,type:c.type,textureType:2},shaderSource:Y,hasMain:!0}},Zl$2=(s,l,c,d,f)=>{let g=im$2(f.cacheKey);return{...g,get:()=>am$2(s,g,l,c,d,f)}}});function um$2(s,l,c){let d=l[0].dims,f=l[1].dims,g=Ze$2.calcShape(d,f,!0);if(!g)throw new Error("Can't use matmul on the given tensors");let v=Qe$2(g.length),b=Dt$2(),{activationFunction:$,applyActivation:y}=Rt$1(c),x=l.length>2,C=x?"value += getBiasForMatmul();":"",E=x?`${Ai$1(v,b,l[2].dims,g,!1)}`:"",N=g.length,W=d.length,q=f.length,Y=d[d.length-1],re=`
    ${$}
    ${E}
    float process(int indices[${N}]) {
        int a[${W}];
        int b[${q}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${Y}; ++k) {
            a[${W-1}] = k;
            b[${q-2}] = k;
            value += _A(a) * _B(b);
        }
        ${C}
        ${y}
        return value;
    }`;return{...s,output:{dims:g,type:l[0].type,textureType:0},shaderSource:re}}function Si$1(s,l){let c=sm$2(s.length>2,l.activationCacheKey);return{...c,get:()=>um$2(c,s,l)}}function Ai$1(s,l,c,d,f){let g="",v=c.length,b=d.length,$=b-v;b<2&&v>0?g="coords":g=c.map((E,N)=>`coords.${l[N+$]}`).join(", ");let y=Ze$2.getBroadcastDims(c,d).map(E=>`coords.${l[E+$]} = 0;`).join(`
`),x=U$2.size(c)===1,C="vec4(outputValue.xx, outputValue.yy)";return x&&(C="vec4(outputValue.x)"),f?`
vec4 getBiasForMatmul() {
  ${s} coords = getOutputCoords();
  ${y}
  vec4 outputValue = getBias(${g});
  return ${C};
}`:`
float getBiasForMatmul() {
  ${s} coords = getOutputCoords();
  ${y}
  return getBias(coords.x);
}`}var ef$2,tf$2,sm$2,lm$2,ro$2=L$1(()=>{fe$1(),ae(),Bt$2(),xr(),Pi$2(),ef$2=(s,l,c)=>(lm$2(l),s.session.pack?[s.run(no$2(s,l,c),l)]:[s.run(Si$1(l,c),l)]),tf$2=s=>Nr$1(s.attributes),sm$2=(s,l)=>({name:"MatMul",inputNames:s?["A","B","Bias"]:["A","B"],inputTypes:s?[0,0,0]:[0,0],cacheHint:l}),lm$2=s=>{if(!s||s.length!==2)throw new Error("MatMul requires 2 inputs.");if(s[0].dims[s[0].dims.length-1]!==s[1].dims[s[1].dims.length-2])throw new Error("shared dimension does not match.");if(s[0].type!=="float32"&&s[0].type!=="float64"||s[1].type!=="float32"&&s[1].type!=="float64")throw new Error("inputs should be float type");if(s[0].type!==s[1].type)throw new Error("inputs types should match")}});function pm$2(s,l,c,d){let f=[],g=[],v=c[0].dims,b=c[1].dims,$=v.length,y=b.length,x=d.length,C=x-$,E=x-y;f=v.map((se,de)=>`coords.${l[de+C]}`),f[$-1]="i*2",f.join(", "),g=b.map((se,de)=>`coords.${l[de+E]}`),g[y-2]="i*2",g.join(", ");let N=Ze$2.getBroadcastDims(v,d),W=Ze$2.getBroadcastDims(b,d),q=N.map(se=>`coords.${l[se+C]} = 0;`).join(`
`),Y=W.map(se=>`coords.${l[se+E]} = 0;`).join(`
`),re=`int lastDim = coords.${l[x-1]};
  coords.${l[x-1]} = coords.${l[x-2]};
  coords.${l[x-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${s} coords = getOutputCoords();
  ${re}
  ${q}
  vec4 outputValue = getA(${f});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${s} coords = getOutputCoords();
  ${re}
  ${Y}
  vec4 outputValue = getB(${g});
  return outputValue;
}`}function dm$2(s,l){let c="";for(let d=0;d<l-2;d++)c+=`rc.${s[d]}, `;return c+=`rc.${s[l-2]}, i*2`,c}function hm$2(s,l){let c="";for(let d=0;d<l-2;d++)c+=`rc.${s[d]}, `;return c+=`i*2, rc.${s[l-1]}`,c}var fm$2,cm$2,no$2,Pi$2=L$1(()=>{fe$1(),we$2(),ae(),Bt$2(),xr(),ro$2(),fm$2=(s,l)=>({name:"MatMul (packed)",inputNames:s?["A","B","Bias"]:["A","B"],inputTypes:s?[2,2,2]:[2,2],cacheHint:l}),cm$2=(s,l,c,d)=>{let f=c.length>2,g=f?"value += getBiasForMatmul();":"",v=c[0].dims,b=c[1].dims,$=Ze$2.calcShape(v,b,!0),y=!U$2.areEqual(c[0].dims,c[1].dims);if(!$)throw new Error("Can't use matmul on the given tensors");let x=v[v.length-1],C=Math.ceil(x/2),E=v.length,N=b.length,W=H$1(s.session.backend.glContext.version),q=Qe$2($.length),Y=$.length,re=Dt$2(),{activationFunction:se,applyActivation:de}=Rt$1(d),he=f?`${Ai$1(q,re,c[2].dims,$,!0)}`:"",ge=y?`${pm$2(q,re,c,$)}`:"",Se=y?"getAAtOutCoordsMatmul(i)":`getA(${dm$2(re,E)})`,Ae=y?"getBAtOutCoordsMatmul(i)":`getB(${hm$2(re,N)})`,Re=y?"":`${q} rc =
          getOutputCoords(); int lastDim = rc.${re[Y-1]}; rc.${re[Y-1]} =
          rc.${re[Y-2]}; rc.${re[Y-2]} = lastDim;
      `,Be=`
            ${ge}
            ${he}
            ${se}
            void main() {
              ${Re}

              vec4 value = vec4(0);
              for (int i = 0; i < ${C}; i++) {
                vec4 a = ${Se};
                vec4 b = ${Ae};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${g}
              ${de}
              ${W.output} = value;
            }`;return{...l,output:{dims:$,type:c[0].type,textureType:2},shaderSource:Be,hasMain:!0}},no$2=(s,l,c)=>{let d=fm$2(l.length>2,c.activationCacheKey);return{...d,get:()=>cm$2(s,d,l,c)}}}),rf$2,nf$2=L$1(()=>{to$2(),Ql$2(),Pi$2(),rf$2=(s,l,c)=>{let d=l[0].dims,f=l[1].dims,g=Rr$1(d,f,c.dilations,c.pads,c.strides),v=s.run(Zl$2(s,l[0],l[1],g,c),[l[0]]),b=s.reshapePacked(l[1],[f[0],f[1]*f[2]*f[3]]),$=l.length===3?[b,v,l[2]]:[b,v],y=s.run(no$2(s,$,c),$);return s.reshapePacked(y,g)}}),mm$2,bm$2,of$2,Ei$1,Di$2=L$1(()=>{ae(),mm$2=s=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:s}),bm$2=(s,l,c,d,f,g)=>{let v=c.dims,b=d.dims,$=f.length,y=Ei$1(v,b,f,4),x=`
        const int XC = ${v[1]};
        const int XH = ${v[2]};
        const int XW = ${v[3]};
        const int KH = ${g.kernelShape[0]};
        const int KW = ${g.kernelShape[1]};
        const int dilationH = ${g.dilations[0]};
        const int dilationW = ${g.dilations[1]};
        const int strideH = ${g.strides[0]};
        const int strideW = ${g.strides[1]};
        const int padH = ${g.pads[0]};
        const int padW = ${g.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${$}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${v.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return{...l,output:{dims:y,type:c.type,textureType:4},shaderSource:x}},of$2=(s,l,c,d,f)=>{let g=mm$2(f.cacheKey);return{...g,get:()=>bm$2(s,g,l,c,d,f)}},Ei$1=(s,l,c,d=4)=>[c[0],c[2],c[3],Math.ceil(s[1]*l[2]*l[3]/d)]}),gm$2,ym$2,af$2,sf$2=L$1(()=>{fe$1(),we$2(),ae(),xr(),Di$2(),gm$2=(s,l)=>({name:"ConvDotProduct",inputNames:s?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:s?[0,4,0]:[0,4],cacheKey:l.activationCacheKey}),ym$2=(s,l,c,d,f)=>{let g=c[0].dims,v=c[1].dims,b=[v[0],Math.ceil(g[1]*v[2]*v[3]/4)],$=Ei$1(g,v,d),[y,x]=s.calculateTextureWidthAndHeight(b,4),C=U$2.computeStrides($),[E,N]=s.calculateTextureWidthAndHeight($,4),W=d.length,q=c.length<3?"0.0":"_B(b)",Y=Math.ceil(g[1]*v[2]*v[3]/4),{activationFunction:re,applyActivation:se}=Rt$1(f),de=H$1(s.session.backend.glContext.version),he=`
${re}
float process(int indices[${W}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${C[0]} + im2col[1] * ${C[1]} + im2col[2] * ${C[2]};
  int kernelOffset = indices[1] * ${b[1]};
  float value = ${q};
  for (int i = 0; i < ${Y}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${E}, ${N});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${y}, ${x});
    value += dot(${de.texture2D}(Im2Col, im2colCoords), ${de.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${se}
  return value;
}`;return{...l,output:{dims:d,type:c[0].type,textureType:0},shaderSource:he}},af$2=(s,l,c,d)=>{let f=gm$2(l.length>2,d);return{...f,get:()=>ym$2(s,f,l,c,d)}}}),Rr$1,Li$2,Tm$2,xm$2,wm$2,vm$1,Ci$1,_m$2,to$2=L$1(()=>{Ue$2(),fe$1(),Jl$2(),nf$2(),sf$2(),xr(),Di$2(),ro$2(),Rr$1=(s,l,c,d,f)=>{let g=s[0],v=s.slice(2),b=v.length,$=l[0],y=l.slice(2).map((C,E)=>C+(C-1)*(c[E]-1)),x=v.map((C,E)=>C+d[E]+d[E+b]).map((C,E)=>Math.floor((C-y[E]+f[E])/f[E]));return[g,$].concat(...x)},Li$2=(s,l,c)=>(_m$2(l,c),Tm$2(s,l,c)),Tm$2=(s,l,c)=>{let d=vm$1(c,l),f=s.session.pack,g=d.kernelShape[0]===1&&d.kernelShape[1]===1;return d.group>1?[s.run(Kl$2(s,l,d),l)]:g&&f?[xm$2(s,l,d)]:f&&l[0].dims.length===4&&l[0].dims[0]===1&&!g?[rf$2(s,l,d)]:[wm$2(s,l,d)]},xm$2=(s,l,c)=>{let d=l[0].dims,f=l[1].dims,g=Rr$1(d,f,c.dilations,c.pads,c.strides),v=s.reshapeUnpacked(l[0],[d[1],d[2]*d[3]]),b=s.reshapeUnpacked(l[1],[f[0],f[1]]),$=l.length>2?[b,v,l[2]]:[b,v],y=s.run(Si$1($,c),$);return s.reshapeUnpacked(y,g)},wm$2=(s,l,c)=>{let d=l[0].dims,f=l[1].dims,g=Rr$1(d,f,c.dilations,c.pads,c.strides),v=s.run(of$2(s,l[0],l[1],g,c),[l[0]]),b=l.length===3?[v,l[1],l[2]]:[v,l[1]];return s.run(af$2(s,l,g,c),b)},vm$1=(s,l)=>{let c=s.kernelShape.slice();if(s.kernelShape.length===0)for(let g=2;g<l[1].dims.length;++g)c.push(l[1].dims[g]);let d=s.pads.slice();mr$2.adjustPadsBasedOnAutoPad(l[0].dims,s.strides,s.dilations,c,d,s.autoPad);let f=Object.assign({},s);return Object.assign(f,{kernelShape:c,pads:d,cacheKey:s.cacheKey}),f},Ci$1=s=>{let l=s.attributes,c=Nr$1(l),d=l.getString("auto_pad","NOTSET"),f=l.getInts("dilations",[1,1]),g=l.getInt("group",1),v=l.getInts("kernel_shape",[]),b=l.getInts("pads",[0,0,0,0]),$=l.getInts("strides",[1,1]);return Q({autoPad:d,dilations:f,group:g,kernelShape:v,pads:b,strides:$,...c})},_m$2=(s,l)=>{if(!s||s.length!==2&&s.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(s[0].dims.length!==4||s[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let c=s[0].dims[1],d=s[1].dims[1]*l.group;if(c!==d)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(s.length===3&&(s[2].dims.length!==1||s[1].dims[0]!==s[2].dims[0]))throw new Error("invalid bias");let f=s[0].dims.length-2;if(l.dilations.length!==f)throw new Error(`dilations should be ${f}D`);if(l.strides.length!==f)throw new Error(`strides should be ${f}D`);if(l.pads.length!==f*2)throw new Error(`pads should be ${f*2}D`);if(l.kernelShape.length!==0&&l.kernelShape.length!==s[1].dims.length-2)throw new Error("invalid kernel shape");if(s[0].type!=="float32"||s[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(s.length===3&&s[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}}),Om$2,Im$2,Sm$2,uf$2,Am$2,Pm$2,Em$2,Dm$2,Lm$2,Cm$2,lf$2,Fm$2,ff$2=L$1(()=>{Ue$2(),we$2(),ae(),xr(),Om$2=(s,l,c,d,f,g)=>(s-1)*l+c+(d-1)*f+1-g,Im$2=(s,l,c,d,f)=>{let g=Math.floor(s/2);l==="SAME_UPPER"?(c[d]=g,c[f]=s-g):l==="SAME_LOWER"&&(c[d]=s-g,c[f]=g)},Sm$2=(s,l,c,d,f,g,v,b)=>{let $=s.length-2,y=b.length===0;for(let x=0;x<$;++x){let C=y?s[x+2]*g[x]:b[x],E=Om$2(s[x+2],g[x],f[x],l[x],c[x],C);Im$2(E,d,f,x,x+$),y&&b.push(g[x]*(s[x+2]-1)+v[x]+(l[x]-1)*c[x]+1-f[x]-f[x+$])}},uf$2=(s,l,c)=>(Fm$2(l,c),Am$2(s,l,c)),Am$2=(s,l,c)=>{let d=Cm$2(c,l);return[Lm$2(s,l,d)]},Pm$2=(s,l)=>({name:"ConvTranspose",inputNames:s?["X","W","B"]:["X","W"],inputTypes:s?[0,0,0]:[0,0],cacheHint:l}),Em$2=(s,l,c,d)=>{let f=l.length>2?"getB(output_channel)":"0.0",g=l[0].dims,v=l[1].dims,b=v[1],$=v[0]/d.group,y=[l[0].dims[0],l[1].dims[1]*d.group,...d.outputShape],x=H$1(s.session.backend.glContext.version),{activationFunction:C,applyActivation:E}=Rt$1(d),N=`
  const ivec2 strides = ivec2(${d.strides[0]}, ${d.strides[1]});
  const ivec2 pads = ivec2(${d.pads[0]}, ${d.pads[1]});
  ${C}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${b};
    int wOutChannel = output_channel - group_id * ${b};

    float value = ${f};
    for (int inChannelOffset = 0; inChannelOffset < ${$}; inChannelOffset++) {
      int input_channel = group_id * ${$} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${v[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${v[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${d.dilations[0]}, wHOff * ${d.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${g[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${g[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${E}
    ${x.output} = vec4(value, .0, .0, .0);
  }
`;return{...c,output:{dims:y,type:l[0].type,textureType:0},shaderSource:N,hasMain:!0}},Dm$2=(s,l,c)=>{let d=Pm$2(l.length>2,c.cacheKey);return{...d,get:()=>Em$2(s,l,d,c)}},Lm$2=(s,l,c)=>s.run(Dm$2(s,l,c),l),Cm$2=(s,l)=>{let c=s.kernelShape.slice();if(s.kernelShape.length===0)for(let b=2;b<l[1].dims.length;++b)c.push(l[1].dims[b]);let d=s.pads.slice(),f=s.outputShape.slice(),g=l[0].dims;Sm$2(g,c,s.dilations,s.autoPad,d,s.strides,s.outputPadding,f);let v=Object.assign({},s);return Object.assign(v,{kernelShape:c,pads:d,outputShape:f,cacheKey:s.cacheKey}),v},lf$2=s=>{let l=s.attributes,c=Nr$1(l),d=l.getString("auto_pad","NOTSET"),f=l.getInts("dilations",[1,1]),g=l.getInt("group",1),v=l.getInts("kernel_shape",[]),b=l.getInts("output_padding",[0,0]),$=l.getInts("output_shape",[]),y=l.getInts("pads",[0,0,0,0]),x=l.getInts("strides",[1,1]);return Q({autoPad:d,dilations:f,group:g,kernelShape:v,outputPadding:b,outputShape:$,pads:y,strides:x,...c})},Fm$2=(s,l)=>{if(!s||s.length!==2&&s.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(s[0].dims.length!==4||s[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let c=s[0].dims[1],d=s[1].dims[0];if(c!==d)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let f=s[1].dims[1]*l.group;if(s.length===3&&(s[2].dims.length!==1||s[2].dims[0]!==f))throw new Error("invalid bias");let g=s[0].dims.length-2;if(l.dilations.length!==g)throw new Error(`dilations should be ${g}D`);if(l.strides.length!==g)throw new Error(`strides should be ${g}D`);if(l.pads.length!==g*2)throw new Error(`pads should be ${g*2}D`);if(l.outputPadding.length!==g)throw new Error(`output_padding should be ${g}D`);if(l.kernelShape.length!==0&&l.kernelShape.length!==s[1].dims.length-2)throw new Error("invalid kernel shape");if(l.outputShape.length!==0&&l.outputShape.length!==s[0].dims.length-2)throw new Error("invalid output shape");if(s[0].type!=="float32"||s[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(s.length===3&&s[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}}),cf$1,wr$1,pf$2,$m$2,df$1,km$2,Bm$2,Nm$2,oo$2=L$1(()=>{Ue$2(),fe$1(),ae(),cf$1={name:"Transpose",inputNames:["A"],inputTypes:[0]},wr$1=(s,l,c)=>(Nm$2(l),[s.run({...cf$1,cacheHint:c.cacheKey,get:()=>$m$2(s,l[0],c.perm)},l)]),pf$2=s=>Q({perm:s.attributes.getInts("perm",[])}),$m$2=(s,l,c)=>{let d=l.dims;c=df$1(d,c);let f=km$2(d,c),g=d.length,v=`
      ${Bm$2("perm",c,g)}
      float process(int indices[${g}]) {
        int a[${g}];
        perm(a, indices);
        return _A(a);
      }`;return{...cf$1,output:{dims:f,type:l.type,textureType:0},shaderSource:v}},df$1=(s,l)=>(l&&l.length!==s.length&&(l=[...s.keys()].reverse()),l),km$2=(s,l)=>(l=df$1(s,l),U$2.sortBasedOnPerm(s,l)),Bm$2=(s,l,c)=>{let d=[];d.push(`void ${s}(out int a[${c}], int src[${c}]) {`);for(let f=0;f<c;++f)d.push(`	a[${l[f]}]=src[${f}];`);return d.push("	}"),d.join(`
`)},Nm$2=s=>{if(!s||s.length!==1)throw new Error("Transpose requires 1 input.");if(s[0].type!=="float32"&&s[0].type!=="float64")throw new Error("input should be float tensor")}}),hf$2,mf$2,Rm$2,bf$1=L$1(()=>{oo$2(),hf$2=(s,l,c)=>{Rm$2(l);let d=c.blocksize,f=d*d,g=c.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],v=c.mode==="DCR"?[l[0].dims[0],d,d,l[0].dims[1]/f,l[0].dims[2],l[0].dims[3]]:[l[0].dims[0],l[0].dims[1]/f,d,d,l[0].dims[2],l[0].dims[3]],b=s.reshapeUnpacked(l[0],v),$={perm:g,cacheKey:`${g}`},[y]=wr$1(s,[b],$),x=[l[0].dims[0],l[0].dims[1]/f,l[0].dims[2]*d,l[0].dims[3]*d];return[s.reshapeUnpacked(y,x)]},mf$2=s=>{let l=s.attributes.getInt("blocksize");if(l<1)throw new Error(`blocksize must be >= 1, but got : ${l} for DepthToSpace`);let c=s.attributes.getString("mode","DCR");if(c!=="DCR"&&c!=="CRD")throw new Error(`unrecognized mode: ${c} for DepthToSpace`);return{mode:c,blocksize:l}},Rm$2=s=>{if(s.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${s.length}`);if(s[0].type==="string"||s[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),gf$1,yf$1,Mm$2,Tf$1=L$1(()=>{fe$1(),gf$1=(s,l,c)=>{Mm$2(l,c);let d=U$2.flattenShape(l[0].dims,c);return[s.reshapeUnpacked(l[0],d)]},yf$1=s=>s.attributes.getInt("axis",1),Mm$2=(s,l)=>{if(!s||s.length!==1)throw new Error("Flatten requires 1 input.");let c=s[0].dims.length;if(c===0)throw new Error("scalar tensor is not supported.");if(l<-c||l>c)throw new Error("Invalid axis");if(s[0].type==="string")throw new Error("string tensor is not supported.")}}),Qt$1,pn$1=L$1(()=>{Qt$1=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),xf$1,wf$1,Gm$2,Um$2,zm$2,Vm$2,vf$1=L$1(()=>{Ue$2(),pn$1(),fe$1(),ae(),xf$1=(s,l,c)=>(Vm$2(l,c.axis),[s.run(zm$2(s,l,c),l)]),wf$1=s=>Q({axis:s.attributes.getInt("axis",0)}),Gm$2={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},Um$2=(s,l,c,d)=>{let f=c[0].dims.slice(),g=c[1].dims.slice(),v=new Array(f.length+g.length-1);d=U$2.normalizeAxis(d,f.length);let b=[];for(let E=0;E<v.length;E++)E<d?(v[E]=f[E],b.push(`inputIdx[${E}] = outputIdx[${E}];`)):E<d+g.length?(v[E]=g[E-d],b.push(`indexDataIdx[${E-d}] = outputIdx[${E}];`)):(v[E]=f[E-g.length+1],b.push(`inputIdx[${E-g.length+1}] = outputIdx[${E}];`));let $=v.length||1,y=f.length,x=g.length||1,C=`
      float process(int outputIdx[${$}]) {
        int inputIdx[${y}];
        int indexDataIdx[${x}];
        indexDataIdx[0] = 0;
        ${b.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${d}] = idx < 0 ? idx + ${f[d]} : idx;
        return _A(inputIdx);
      }`;return{...l,output:{dims:v,type:c[0].type,textureType:0},shaderSource:C}},zm$2=(s,l,c)=>{let d={...Gm$2,cacheHint:c.cacheKey};return{...d,get:()=>Um$2(s,d,l,c.axis)}},Vm$2=(s,l)=>{if(!s||s.length!==2)throw new Error("Gather requires 2 inputs.");let c=s[0].dims.length;if(c<1)throw new Error("Invalid input shape.");if(l<-c||l>c-1)throw new Error("Invalid axis.");if(Qt$1.indexOf(s[0].type)===-1)throw new Error("Invaid input type.");if(s[1].type!=="int32"&&s[1].type!=="int16")throw new Error("Invaid input type.")}}),Fi$2,_f$1,Of$1,If,Wm$2,Hm$2,qm$2,Sf$1=L$1(()=>{Ue$2(),fe$1(),ae(),Fi$2=(s,l,c)=>(qm$2(l,c),[s.run(Wm$2(l,c),l)]),_f$1=(s,l)=>{let c=s.attributes.getInt("transA",0)!==0,d=s.attributes.getInt("transB",0)!==0,f=s.attributes.getFloat("alpha",1),g=s.attributes.getFloat("beta",1);return Q({transA:c,transB:d,alpha:f,beta:g,isOptionalC:l})},Of$1=s=>_f$1(s,!1),If=s=>_f$1(s,!0),Wm$2=(s,l)=>{let c={name:"Gemm",inputNames:s.length===3?["A","B","C"]:["A","B"],inputTypes:s.length===3?[0,0,0]:[0,0],key:l.cacheKey};return{...c,get:()=>Hm$2(c,s,l)}},Hm$2=(s,l,c)=>{let d=l[0].dims.slice(),f=l[1].dims.slice(),[g,v]=jn$2.getShapeOfGemmResult(d,c.transA,f,c.transB,l.length===3?l[2].dims:void 0),b=[g,v];if(!b)throw new Error("Can't use gemm on the given tensors");let $=d[d.length-1],y="";c.transA&&($=d[0]),c.transA&&c.transB?y="value += _A_T(a) * _B_T(b);":c.transA&&!c.transB?y="value += _A_T(a) * _B(b);":!c.transA&&c.transB?y="value += _A(a) * _B_T(b);":!c.transA&&!c.transB&&(y="value += _A(a) * _B(b);");let x=b.length,C=l.length===3?`int c[${l[2].dims.length}];`:"",E=l.length===3?"bcastIndices_C(indices, c);":"",N=l.length===3?"value += beta * _C(c);":"",W=`
      float process(int indices[${x}]) {
          int a[${x}];
          int b[${x}];
          ${C}

          copyVec(indices, a);
          copyVec(indices, b);
          ${E}

          float value = 0.0;
          for (int k=0; k<${$}; ++k) {
              a[${x-1}] = k;
              b[${x-2}] = k;
              ${y}
          }

          value = value * alpha;
          ${N}
          return value;
      }`;return{...s,output:{dims:b,type:l[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:c.alpha},{name:"beta",type:"float",data:c.beta}],shaderSource:W}},qm$2=(s,l)=>{if(!s)throw new Error("Input is missing");if(l.isOptionalC&&(s.length<2||s.length>3))throw new Error("Invaid input shape.");if(!l.isOptionalC&&s.length!==3)throw new Error("Gemm requires 3 inputs");if(s.length===3&&s[2].dims.length!==1&&s[2].dims.length!==2)throw new Error("Invalid input shape of C");if(s[0].type!=="float32"&&s[0].type!=="float64"||s[1].type!=="float32"&&s[1].type!=="float64"||s.length===3&&s[2].type!=="float32"&&s[2].type!=="float64")throw new Error("Invalid input type.");if(s[0].type!==s[1].type||s.length===3&&s[0].type!==s[2].type)throw new Error("Input types are mismatched")}}),Af$1,Pf$1,jm$2,Ym$2,Xm$2,Km$2,Jm$2,Ef$1=L$1(()=>{Ue$2(),ae(),Af$1=(s,l,c)=>(Jm$2(l),[s.run(Xm$2(s,l,c),l)]),Pf$1=s=>{let l=s.attributes.getFloat("scale"),c=s.attributes.getFloats("bias");return Q({scale:l,bias:c})},jm$2={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},Ym$2=(s,l,c,d)=>{let f=c[0].dims.slice(),g=f.length,v=`
      ${Km$2(d.bias.length)}
      float process(int indices[${g}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return{...l,output:{dims:f,type:c[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:d.bias.length,data:d.bias},{name:"scale",type:"float",data:d.scale}],shaderSource:v}},Xm$2=(s,l,c)=>{let d={...jm$2,cacheHint:c.cacheKey};return{...d,get:()=>Ym$2(s,d,l,c)}},Km$2=s=>{let l=[`float getBias(float bias[${s}], int channel) {`];for(let c=0;c<s;++c)c===0?l.push(`	if (channel == ${c}) { return bias[${c}]; }`):c===s-1?l.push(`	else { return bias[${c}]; }`):l.push(`	else if (channel == ${c}) { return bias[${c}]; }`);return l.push("	}"),l.join(`
`)},Jm$2=s=>{if(!s||s.length!==1)throw new Error("ImageScaler requires 1 input.");if(s[0].dims.length!==4)throw new Error("Invalid input shape.");if(s[0].type!=="float32"&&s[0].type!=="float64")throw new Error("Invalid input type.")}}),Lf$1,Cf$1,Df$1,Zm$2,Qm$2,eb$1,tb$1,rb$1,nb$1,Ff$1=L$1(()=>{we$2(),ae(),Lf$1=(s,l,c)=>{nb$1(l);let d=s.run(Qm$2(l[0]),l);return[s.run(rb$1(s,l[0],c,d.dims),[l[0],d,l[1],l[2]])]},Cf$1=s=>s.attributes.getFloat("epsilon",1e-5),Df$1={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},Zm$2=(s,l)=>{let c=l.dims.slice(),d=c[1],f=c[2]*c[3],g=[c[0],d],v=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${c[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${c[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${f});
        temp = 0.0;
        for(int a2=0; a2<${c[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${c[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${f});

        return v;
      }`;return{...s,output:{dims:g,type:l.type,textureType:4},shaderSource:v}},Qm$2=s=>({...Df$1,get:()=>Zm$2(Df$1,s)}),eb$1={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},tb$1=(s,l,c,d,f)=>{let g=H$1(s.session.backend.glContext.version),[v,b]=s.calculateTextureWidthAndHeight(f,4),[$,y]=[v/4,b],x=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${$}, ${y});
        return ${g.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return{...l,output:{dims:c.dims,type:c.type,textureType:0},variables:[{name:"epsilon",type:"float",data:d}],shaderSource:x}},rb$1=(s,l,c,d)=>{let f={...eb$1,cacheHint:`${c}`};return{...f,get:()=>tb$1(s,f,l,c,d)}},nb$1=s=>{if(!s||s.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let l=s[0],c=s[1],d=s[2];if(l.dims.length<3||c.dims.length!==1||d.dims.length!==1)throw new Error("Invalid input shape.");if(c.dims[0]!==l.dims[1]||d.dims[0]!==l.dims[1])throw new Error("Input shapes are mismatched.");if(l.type!=="float32"&&l.type!=="float64"||c.type!=="float32"&&c.type!=="float64"||d.type!=="float32"&&d.type!=="float64")throw new Error("Invalid input type.");if(s[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function ob$1(s,l){let c=s[0].dims[1],d=s[0].dims.length,f=-Math.floor((l.size-1)/2),g=Math.ceil((l.size-1)/2),v=`float(${l.alpha}) / float(${l.size})`,b=`float(${l.bias})`,$=`float(${l.beta})`,y=`
    float process(int indices[${d}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${f}; i <= ${g}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${c}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${b} + ${v} * square_sum, ${$});
    }`;return{...Bf$1,cacheHint:l.cacheKey,output:{dims:s[0].dims,type:s[0].type,textureType:0},shaderSource:y}}function ib$1(s,l){return{...Bf$1,cacheHint:l.cacheKey,get:()=>ob$1(s,l)}}var $f$1,kf$1,Bf$1,ab$1,Nf=L$1(()=>{Ue$2(),ae(),$f$1=(s,l,c)=>(ab$1(l),[s.run(ib$1(l,c),l)]),kf$1=s=>{let l=s.attributes.getFloat("alpha",1e-4),c=s.attributes.getFloat("beta",.75),d=s.attributes.getFloat("bias",1),f=s.attributes.getInt("size");return Q({alpha:l,beta:c,bias:d,size:f})},Bf$1={name:"LRN",inputNames:["X"],inputTypes:[0]},ab$1=s=>{if(!s||s.length!==1)throw new Error("LRN requires 1 input.");if(s[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(s[0].type!=="float32")throw new Error("input should be float type")}}),sb$1,$i$1,Rf$1,Mf$1,Gf$1,ub$1,lb$1,fb$1,cb$1,pb$1,db$1,hb$1,mb$1,Uf$1=L$1(()=>{Ue$2(),fe$1(),we$2(),ae(),sb$1={name:"Pad",inputNames:["A"],inputTypes:[0]},$i$1=(s,l,c)=>(fb$1(l),[s.run({...sb$1,cacheHint:c.cacheKey,get:()=>lb$1(s,l[0],c)},l)]),Rf$1=s=>{let l=s.attributes.getString("mode","constant"),c=s.attributes.getFloat("value",0),d=s.attributes.getInts("pads");return Q({mode:l,value:c,pads:d})},Mf$1=(s,l,c)=>{cb$1(l);let d=ub$1(s,l,c);return $i$1(s,[l[0]],d)},Gf$1=s=>s.attributes.getString("mode","constant"),ub$1=(s,l,c)=>{if(!s.session.isInitializer(l[1].dataId)||l.length>=3&&!s.session.isInitializer(l[2].dataId))throw new Error("dynamic pad attributes are not allowed");let d=Array.from(l[1].integerData),f=l.length>=3?l[2].floatData[0]:0;return Q({mode:c,pads:d,value:f})},lb$1=(s,l,c)=>{let d=U$2.padShape(l.dims.slice(),c.pads),f=d.length,g=`
      ${pb$1(s,l,c)}
      float process(int[${f}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:d,type:l.type,textureType:0},shaderSource:g}},fb$1=s=>{if(!s||s.length!==1)throw new Error("Pad requires 1 input");if(s[0].type!=="float32"&&s[0].type!=="float64")throw new Error("Invalid input type.")},cb$1=s=>{if(!s||s.length!==2&&s.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(s[1].type!=="int32")throw new Error("Invalid input type.");if(s.length>=3&&s[2].type==="string")throw new Error("Invalid input type.")},pb$1=(s,l,c)=>{let d=H$1(s.session.backend.glContext.version),[f,g]=s.calculateTextureWidthAndHeight(l.dims,0),v=U$2.computeStrides(l.dims);switch(c.mode){case"constant":return db$1(d,l.dims,v,f,g,c.pads,c.value);case"reflect":return hb$1(d,l.dims,v,f,g,c.pads);case"edge":return mb$1(d,l.dims,v,f,g,c.pads);default:throw new Error("Invalid mode")}},db$1=(s,l,c,d,f,g,v)=>{let b=l.length,$="";for(let y=b-1;y>=0;--y)$+=`
        k = m[${y}] - ${g[y]};
        if (k < 0)  return constant;
        if (k >= ${l[y]}) return constant;
        offset += k * ${c[y]};
        `;return`
      float padA(int m[${b}]) {
        const float constant = float(${v});
        int offset = 0;
        int k = 0;
        ${$}
        vec2 coords = offsetToCoords(offset, ${d}, ${f});
        float value = getColorAsFloat(${s.texture2D}(A, coords));
        return value;
      }
      `},hb$1=(s,l,c,d,f,g)=>{let v=l.length,b="";for(let $=v-1;$>=0;--$)b+=`
        k = m[${$}] - ${g[$]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(l[$]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${l[$]}) { k = _2n_1 - k; }
        }
        offset += k * ${c[$]};
        `;return`
      float padA(int m[${v}]) {
        int offset = 0;
        int k = 0;
        ${b}
        vec2 coords = offsetToCoords(offset, ${d}, ${f});
        float value = getColorAsFloat(${s.texture2D}(A, coords));
        return value;
      }
      `},mb$1=(s,l,c,d,f,g)=>{let v=l.length,b="";for(let $=v-1;$>=0;--$)b+=`
        k = m[${$}] - ${g[$]};
        if (k < 0)  k = 0;
        if (k >= ${l[$]}) k = ${l[$]-1};
        offset += k * ${c[$]};
      `;return`
      float padA(int m[${v}]) {
        int offset = 0;
        int k = 0;
        ${b}
        vec2 coords = offsetToCoords(offset, ${d}, ${f});
        float value = getColorAsFloat(${s.texture2D}(A, coords));
        return value;
      }
      `}}),Vf$1,Wf$1,Hf$1,qf$1,jf$1,Yf$1,Xf$1,Kf$1,Jf$1,bb$1,zf$1,Zf$1,ao$2,Qf$1,io$2,gb$1,ec=L$1(()=>{Ue$2(),fe$1(),ae(),Vf$1=(s,l,c)=>{ao$2(l);let d={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:c.cacheKey};return[s.run({...d,get:()=>Hf$1(l,d,!1,c)},l)]},Wf$1=s=>{let l=s.attributes.getString("auto_pad","NOTSET"),c=s.attributes.getInt("ceil_mode",0),d=s.attributes.getInt("count_include_pad",0)!==0,f=s.attributes.getInts("kernel_shape"),g=s.attributes.getInts("strides",[]),v=s.attributes.getInts("pads",[]);if(c!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return Q({autoPad:l,ceilMode:c,countIncludePad:d,kernelShape:f,strides:g,pads:v})},Hf$1=(s,l,c,d)=>{let[f,g]=Jf$1(s,d,c),v=U$2.size(f.kernelShape),b="value += _X(x);",$="";f.countIncludePad?$+=`value /= float(${v});`:$+=`value /= float(${v} - pad);`;let y=`
        ${Qf$1(s[0].dims,f,b,$,"0.0")}
      `;return{...l,output:{dims:g,type:s[0].type,textureType:0},shaderSource:y}},qf$1=(s,l,c)=>{ao$2(l);let d={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${c.countIncludePad}`};return[s.run({...d,get:()=>Hf$1(l,d,!0,c)},l)]},jf$1=s=>{let l=s.attributes.getInt("count_include_pad",0)!==0;return Q({autoPad:"",ceilMode:0,countIncludePad:l,kernelShape:[],strides:[],pads:[]})},Yf$1=(s,l,c)=>{ao$2(l);let d={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:c.cacheKey};return[s.run({...d,get:()=>Kf$1(l,d,!1,c)},l)]},Xf$1=s=>{let l=s.attributes.getString("auto_pad","NOTSET"),c=s.attributes.getInt("ceil_mode",0),d=s.attributes.getInts("kernel_shape"),f=s.attributes.getInts("strides",[]),g=s.attributes.getInts("pads",[]),v=s.attributes.getInt("storage_order",0),b=s.attributes.getInts("dilations",[]);if(v!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(c!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return Q({autoPad:l,ceilMode:c,countIncludePad:!1,kernelShape:d,strides:f,pads:g,storageOrder:v,dilations:b})},Kf$1=(s,l,c,d)=>{let[f,g]=Jf$1(s,d,c),v=`
      value = max(_X(x), value);
    `,b="",$=`
      ${Qf$1(s[0].dims,f,v,b,"-1e5")}
    `;return{...l,output:{dims:g,type:s[0].type,textureType:0},shaderSource:$}},Jf$1=(s,l,c)=>{let d=s[0].dims.slice(),f=Object.hasOwnProperty.call(l,"dilations"),g=l.kernelShape.slice(),v=l.strides.slice(),b=f?l.dilations.slice():[],$=l.pads.slice();mr$2.adjustPoolAttributes(c,d,g,v,b,$);let y=mr$2.computePoolOutputShape(c,d,v,b,g,$,l.autoPad),x=Object.assign({},l);return f?Object.assign(x,{kernelShape:g,strides:v,pads:$,dilations:b,cacheKey:l.cacheKey}):Object.assign(x,{kernelShape:g,strides:v,pads:$,cacheKey:l.cacheKey}),[x,y]},bb$1={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},zf$1={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},Zf$1=(s,l)=>(ao$2(l),[s.run({...zf$1,get:()=>Kf$1(l,zf$1,!0,bb$1)},l)]),ao$2=s=>{if(!s||s.length!==1)throw new Error("Pool ops requires 1 input.");if(s[0].type!=="float32"&&s[0].type!=="float64")throw new Error("Invalid input type.")},Qf$1=(s,l,c,d,f)=>{let g=s.length;if(l.kernelShape.length<=2){let v=l.kernelShape[l.kernelShape.length-1],b=l.strides[l.strides.length-1],$=l.pads[l.pads.length/2-1],y=l.pads[l.pads.length-1],x=s[g-1],C="",E="",N="";if($+y!==0?C=`
          for (int i = 0; i < ${v}; i++) {
            x[${g} - 1] = indices[${g} - 1] * ${b} - ${$} + i;
            if (x[${g} - 1] < 0 || x[${g} - 1] >= ${x}) {
              pad++;
              continue;
            }
            ${c}
          }`:C=`
          for (int i = 0; i < ${v}; i++) {
            x[${g} - 1] = indices[${g} - 1] * ${b} - ${$} + i;
            ${c}
          }`,l.kernelShape.length===2){let W=l.kernelShape[l.kernelShape.length-2],q=l.strides[l.strides.length-2],Y=l.pads[l.pads.length/2-2],re=l.pads[l.pads.length-2],se=s[g-2];Y+re!==0?E=`
            for (int j = 0; j < ${W}; j++) {
              x[${g} - 2] = indices[${g} - 2] * ${q} - ${Y} + j;
              if (x[${g} - 2] < 0 || x[${g} - 2] >= ${se}) {
                pad+= ${v};
                continue;
              }
          `:E=`
            for (int j = 0; j < ${W}; j++) {
              x[${g} - 2] = indices[${g} - 2] * ${q} - ${Y} + j;
            `,N=`
          }
        `}return`
        float process(int indices[${g}]) {
          int x[${g}];
          copyVec(indices, x);

          float value = ${f};
          int pad = 0;
          ${E}
          ${C}
          ${N}
          ${d}
          return value;
        }
      `}else{let v=U$2.size(l.kernelShape),b=U$2.computeStrides(l.kernelShape),$=b.length,y=l.pads.length,x=gb$1($),C=io$2(s,"inputDims"),E=io$2(l.pads,"pads"),N=io$2(b,"kernelStrides"),W=io$2(l.strides,"strides"),q=l.pads.reduce((re,se)=>re+se),Y="";return q?Y=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${c}
          }`:Y=`
          }
          ${c}
        `,`
        ${x}
        float process(int indices[${g}]) {
          int x[${g}];
          copyVec(indices, x);
          int offset[${$}];
          int pads[${y}];
          int inputDims[${g}];
          int kernelStrides[${$}];
          int strides[${$}];
          ${E}
          ${C}
          ${W}
          ${N}

          float value = ${f};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${v}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${g} - ${$}; j < ${g}; j++) {
              x[j] = indices[j] * strides[j - ${g} + ${$}]
                + offset[j - ${g} + ${$}] - pads[j - 2];
              ${Y}
          }
          ${d}

          return value;
        }
      `}},io$2=(s,l)=>{let c="";for(let d=0;d<s.length;d++)c+=`
      ${l}[${d}] = ${s[d]};
    `;return c},gb$1=s=>`
  void offsetToIndices(int offset, int[${s}] strides, out int[${s}] indices) {
    if (${s} == 0) {
      return;
    }
    for (int i = 0; i < ${s} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${s} - 1] = offset;
  }`}),vr,er$1,yb$1,Tb$1,tc,rc,nc$1,oc$1,ic$1,ac$1,sc$1,uc$1=L$1(()=>{Ue$2(),pn$1(),fe$1(),ae(),vr=(s,l,c,d,f)=>{Tb$1(l);let g={name:d,inputNames:["A"],inputTypes:[0]};return[s.run({...g,cacheHint:c.cacheKey,get:()=>yb$1(s,l,c,d,f,g)},l)]},er$1=s=>{let l=s.attributes.getInts("axes",[]),c=s.attributes.getInt("keepdims",1)===1;return Q({axes:l,keepDims:c})},yb$1=(s,l,c,d,f,g)=>{let v=[],b=l[0].dims.length||1,$=[],y=U$2.normalizeAxes(c.axes,l[0].dims.length),x=f(l,y),C=x[1];for(let N=0;N<l[0].dims.length;N++)y.indexOf(N)>=0||y.length===0?(c.keepDims&&v.push(1),C=`
          for(int j${N} = 0; j${N} < ${l[0].dims[N]}; j${N}++) {
            inputIdx[${N}] = j${N};
            ${C}
          }`):($.push(`inputIdx[${N}] = outputIdx[${v.length}];`),v.push(l[0].dims[N]));let E=`
      float process(int outputIdx[${v.length||1}]) {
        float value;                 // final result
        int inputIdx[${b}];      // addressing input data
        ${$.join(`
`)}
        ${x[0]}       // init ops for reduce max/min
        ${C}
        ${x[2]}       // final computation for reduce mean
        return value;
      }`;return{...g,output:{dims:v,type:l[0].type,textureType:0},shaderSource:E}},Tb$1=s=>{if(!s||s.length!==1)throw new Error("Reduce op requires 1 input.");if(Qt$1.indexOf(s[0].type)===-1)throw new Error("Invalid input type.")},tc=(s,l,c)=>vr(s,l,c,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),rc=(s,l,c)=>vr(s,l,c,"ReduceMean",(d,f)=>{let g=1;for(let v=0;v<d[0].dims.length;v++)(f.indexOf(v)>=0||f.length===0)&&(g*=d[0].dims[v]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${g}.;`]}),nc$1=(s,l,c)=>vr(s,l,c,"ReduceMax",(d,f)=>{let g=[];for(let v=0;v<d[0].dims.length;v++)(f.indexOf(v)>=0||f.length===0)&&g.push(`inputIdx[${v}] = 0;`);return[`${g.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),oc$1=(s,l,c)=>vr(s,l,c,"ReduceMin",(d,f)=>{let g=[];for(let v=0;v<d[0].dims.length;v++)(f.indexOf(v)>=0||f.length===0)&&g.push(`inputIdx[${v}] = 0;`);return[`${g.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),ic$1=(s,l,c)=>vr(s,l,c,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),ac$1=(s,l,c)=>vr(s,l,c,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),sc$1=(s,l,c)=>vr(s,l,c,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),lc$1,fc$1=L$1(()=>{fe$1(),lc$1=(s,l)=>{let c=U$2.calculateReshapedDims(l[0].dims,l[1].integerData);return s.session.pack?[s.reshapePacked(l[0],c)]:[s.reshapeUnpacked(l[0],c)]}}),cc$1,ki$1,pc$1,dc$1,dn$1,xb$1,Bi$2,so$2,Ni$1=L$1(()=>{Ue$2(),we$2(),ae(),cc$1={name:"Upsample",inputNames:["X"],inputTypes:[0]},ki$1=(s,l,c)=>(Bi$2(l,c),[s.run({...cc$1,cacheHint:c.cacheKey,get:()=>xb$1(s,l,c)},l)]),pc$1=s=>dn$1(s,7),dc$1=s=>dn$1(s,9),dn$1=(s,l)=>{let c=l>=10,d=s.attributes.getString("mode","nearest");if(d!=="nearest"&&d!=="linear"&&(l<11||d!=="cubic"))throw new Error(`unrecognized mode: ${d}`);let f=[];l<9&&(f=s.attributes.getFloats("scales"),so$2(f,d,c));let g=s.attributes.getFloat("extrapolation_value",0),v=l>10?s.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(v)===-1)throw new Error(`coordinate_transform_mode '${v}' is not supported`);let b=v==="tf_crop_and_resize",$=b,y=d==="nearest"&&l>=11?s.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(y)===-1)throw new Error(`nearest_mode '${y}' is not supported`);let x=s.attributes.getFloat("cubic_coeff_a",-.75),C=s.attributes.getInt("exclude_outside",0)!==0;if(C&&d!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let E=l<11?!0:d==="nearest"&&v==="asymmetric"&&y==="floor",N=0,W=0,q=0;return l>10?s.inputs.length>2?(N=1,W=2,q=3):(W=1,q=2):l===9&&(W=1),Q({opset:l,isResize:c,mode:d,scales:f,extrapolationValue:g,coordinateTransformMode:v,useExtrapolation:$,needRoiInput:b,nearestMode:y,cubicCoefficientA:x,excludeOutside:C,useNearest2xOptimization:E,roiInputIdx:N,scalesInputIdx:W,sizesInputIdx:q})},xb$1=(s,l,c)=>{let d=H$1(s.session.backend.glContext.version),[f,g]=s.calculateTextureWidthAndHeight(l[0].dims,0),v=l[0].dims.map((q,Y)=>Math.floor(q*c.scales[Y])),[b,$]=s.calculateTextureWidthAndHeight(v,0),y=v.length,x=new Array(y),C=new Array(y),E=`
      int output_pitches[${y}];
      int input_pitches[${y}];
      `;for(let q=y-1;q>=0;q--)x[q]=q===y-1?1:x[q+1]*v[q+1],C[q]=q===y-1?1:C[q+1]*l[0].dims[q+1],E+=`
        output_pitches[${q}] = ${x[q]};
        input_pitches[${q}] = ${C[q]};
        `;let N=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${f}, ${g});
        float value = getColorAsFloat(${d.texture2D}(X, coords));
        return value;
      }
      `,W=c.mode==="nearest"?`
    ${N}
    float process(int indices[${y}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${b}, ${$});

      ${E}

      int d, m;
      for (int dim = 0; dim < ${y}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:y===4?`
    ${N}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${b}, ${$});

      ${E}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${l[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${N}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${b}, ${$});

      ${E}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${l[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return{...cc$1,output:{dims:v,type:l[0].type,textureType:0},shaderSource:W,variables:[{name:"scales",type:"int",arrayLength:c.scales.length,data:c.scales.map(q=>Math.ceil(q))}]}},Bi$2=(s,l)=>{if(!s||l.opset<9&&s.length!==1||l.opset>=9&&l.opset<11&&s.length!==2||l.opset>=11&&s.length<2)throw new Error("invalid inputs.");if(l.scales.length>0&&s[0].dims.length!==l.scales.length)throw new Error("Invalid input shape.");if(s[0].type==="string")throw new Error("Invalid input tensor types.")},so$2=(s,l,c)=>{if(c){for(let d of s)if(d<=0)throw new Error("Scale value should be greater than 0.")}else for(let d of s)if(d<1)throw new Error("Scale value should be greater than or equal to 1.");if((l==="linear"||l==="cubic")&&s.length!==2&&(s.length!==4||s[0]!==1||s[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${c?"Resize":"Upsample"} opeartor.`)}}),Ri$2,Mi$2,hc,mc$1,wb$1,vb$1,_b$1,Ob$1,bc$1=L$1(()=>{we$2(),ae(),Bt$2(),Tr(),Ni$1(),Ri$2={name:"Resize",inputNames:["A"],inputTypes:[2]},Mi$2=(s,l,c)=>(Bi$2(l,c),[s.run({...Ri$2,cacheHint:c.cacheKey,get:()=>wb$1(s,l,c)},l)]),hc=s=>dn$1(s,10),mc$1=s=>dn$1(s,11),wb$1=(s,l,c)=>{let d=H$1(s.session.backend.glContext.version),[f,g]=vb$1(l,c);if(f.every(se=>se===1)&&c.coordinateTransformMode!=="tf_crop_and_resize")return{...Ri$2,output:{dims:g,type:l[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${d.texture2D}(X, TexCoords);
                    ${d.output} = v;
                }`};let v=g.length;if(v<2)throw new Error(`output dimension should be at least 2, but got ${v}`);let b=g[v-2],$=g[v-1],y=l[0].dims;if(v!==y.length)throw new Error(`output dimension should match input ${y.length}, but got ${v}`);let x=y[v-2],C=y[v-1],E=f[v-2],N=f[v-1],W="";if(c.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${c.mode}'`);switch(c.coordinateTransformMode){case"asymmetric":W=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":W=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":W=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${$}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${b}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${$}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${b}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":W=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${$}.0 - 1.0, ${b}.0 - 1.0, ${$}.0 - 1.0,
                            ${b}.0 - 1.0);
                        vec4 original = vec4(${C}.0 - 1.0, ${x}.0 - 1.0, ${C}.0 - 1.0,
                            ${x}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${c.coordinateTransformMode}'`)}let q=Qe$2(v),Y=Nt(),re=`
            const vec2 inputWH = vec2(${x}.0, ${C}.0);
            const vec4 scaleWHWH = vec4(float(${E}), float(${N}), float(${E}), float(${N}));
            ${Y}
            ${W}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${q} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${b-1};
                bool hasNextCol = rc.z < ${$-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${d.output} = vec4(newValue);
            }
        `;return{...Ri$2,output:{dims:g,type:l[0].type,textureType:2},hasMain:!0,shaderSource:re}},vb$1=(s,l)=>{let c=s[0].dims,d=l.scales,f;if(d.length===0){let v=s[l.scalesInputIdx];if(v&&v.size!==0){if(s[l.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");d=_b$1(v,l.mode,l.isResize)}else{let b=s[l.sizesInputIdx];if(!b||b.size===0)throw new Error("Either scales or sizes MUST be provided as input.");f=Array.from(b.integerData),d=Ob$1(f,c,l.mode,l.isResize)}}else if(s[l.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let g=f||c.map((v,b)=>Math.floor(v*d[b]));return[d,g]},_b$1=(s,l,c)=>{let d=Array.from(s.floatData);return so$2(d,l,c),d},Ob$1=(s,l,c,d)=>{let f=l.length,g=new Array(f);for(let v=0,b=f;v<b;v++)if(l[v]===0){if(s[v]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");g[v]=1}else g[v]=s[v]/l[v];return so$2(g,c,d),g}}),gc$1,Ib$1,yc$1=L$1(()=>{yr(),gc$1=(s,l)=>(Ib$1(l),[new $e$2([l[0].dims.length],"int32",void 0,void 0,new Int32Array(l[0].dims))]),Ib$1=s=>{if(!s||s.length!==1)throw new Error("Shape requires 1 input.")}}),Gi$2,Tc$3,xc$2,wc$2,Sb$1,vc$1,Ab$1,Pb$1,_c$1=L$1(()=>{Ue$2(),pn$1(),fe$1(),ae(),Gi$2={name:"Slice",inputNames:["A"],inputTypes:[0]},Tc$3=(s,l,c)=>(Sb$1(l),[s.run({...Gi$2,cacheHint:c.cacheKey,get:()=>wc$2(s,l[0],c)},l)]),xc$2=s=>{let l=s.attributes.getInts("starts"),c=s.attributes.getInts("ends"),d=s.attributes.getInts("axes",[]);return Q({starts:l,ends:c,axes:d})},wc$2=(s,l,c)=>{let d=c.axes.length===0?l.dims.slice(0).map((x,C)=>C):c.axes,f=U$2.normalizeAxes(d,l.dims.length),g=c.starts.map((x,C)=>x>l.dims[f[C]]-1?l.dims[f[C]]:U$2.normalizeAxis(x,l.dims[f[C]])),v=c.ends.map((x,C)=>x>l.dims[f[C]]-1?l.dims[f[C]]:U$2.normalizeAxis(x,l.dims[f[C]])),b=l.dims.slice(),$=[];for(let x=0;x<f.length;x++)b[f[x]]=v[x]-g[x],g[x]>0&&$.push(`outputIdx[${f[x]}] += ${g[x]};`);let y=`
      float process(int outputIdx[${b.length}]) {
        ${$.join(`
      `)}
        return _A(outputIdx);
      }`;return{...Gi$2,output:{dims:b,type:l.type,textureType:0},shaderSource:y}},Sb$1=s=>{if(!s||s.length!==1)throw new Error("Slice requires 1 input.");if(Qt$1.indexOf(s[0].type)===-1)throw new Error("Invalid input type.")},vc$1=(s,l)=>{Pb$1(l);let c=Ab$1(s,l);return[s.run({...Gi$2,cacheHint:c.cacheKey,get:()=>wc$2(s,l[0],c)},[l[0]])]},Ab$1=(s,l)=>{if(!s.session.isInitializer(l[1].dataId)||!s.session.isInitializer(l[2].dataId)||l.length>=4&&!s.session.isInitializer(l[3].dataId)||l.length>=5&&!s.session.isInitializer(l[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(l.length>=5&&l[4].integerData.some(v=>v!==1))throw new Error("currently non-1 steps is not supported for Slice");let c=Array.from(l[1].integerData),d=Array.from(l[2].integerData),f=l.length>=4?Array.from(l[3].integerData):[],g=`${f};${c};${d}`;return{starts:c,ends:d,axes:f,cacheKey:g}},Pb$1=s=>{if(!s||s.length<3||s.length>5)throw new Error("Invalid input number.");if(s[1].type!=="int32"||s[1].dims.length!==1)throw new Error("Invalid input type.");if(s[2].type!=="int32"||s[2].dims.length!==1)throw new Error("Invalid input type.");if(s.length>=4&&(s[3].type!=="int32"||s[3].dims.length!==1))throw new Error("Invalid input type.");if(s.length>=5&&(s[4].type!=="int32"||s[4].dims.length!==1))throw new Error("Invalid input type.")}}),Oc$2,Ic$2,Sc$3,Ac$2,Pc$2,Ec$2,Dc$3,Lc$2,Eb$1,Db$1,Lb$1,Cc$2,Fc$2=L$1(()=>{Ue$2(),fe$1(),we$2(),ae(),oo$2(),Oc$2={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Ic$2={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Sc$3={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},Ac$2=(s,l,c)=>{Cc$2(l);let d=l[0].dims.slice(),f=U$2.normalizeAxis(c.axis,d.length),g=U$2.sizeToDimension(d,f),v=U$2.sizeFromDimension(d,f);return Lc$2(s,l,c,g,v)},Pc$2=s=>Q({axis:s.attributes.getInt("axis",1)}),Ec$2=s=>Q({axis:s.attributes.getInt("axis",-1)}),Dc$3=(s,l,c)=>{Cc$2(l);let d=l[0].dims.slice(),f=U$2.normalizeAxis(c.axis,d.length),g=d.length,v=f!==g-1,b=[],$=[],y=[],x;v&&($=Array.from({length:g}).map((W,q)=>q),$[f]=g-1,$[g-1]=f,$.map(W=>b.push(d[W])),x=Q({perm:$}),y=wr$1(s,l,x));let C=v?U$2.sizeToDimension(b,g-1):U$2.sizeToDimension(d,g-1),E=v?U$2.sizeFromDimension(b,g-1):U$2.sizeFromDimension(d,g-1),N=Lc$2(s,v?y:l,c,C,E);return v?wr$1(s,N,x):N},Lc$2=(s,l,c,d,f)=>{let g=Eb$1(s,l[0],d,f,[d]),v=s.run({...Oc$2,cacheHint:c.cacheKey,get:()=>g},l),b=Db$1(s,l[0],d,f,g.output.dims,[d]),$=s.run({...Ic$2,cacheHint:c.cacheKey,get:()=>b},[l[0],v]),y=Lb$1(s,l[0],d,f,g.output.dims,b.output.dims);return[s.run({...Sc$3,cacheHint:c.cacheKey,get:()=>y},[l[0],v,$])]},Eb$1=(s,l,c,d,f)=>{let[g,v]=s.calculateTextureWidthAndHeight(l.dims,0),b=f.length;if(c<1||d<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(f.length!==1)throw new Error("Dimensionality of the output should be 1");if(f[0]!==c)throw new Error("Shape of the output should be equal to logical row count");let $=H$1(s.session.backend.glContext.version),y=`
      float process(int[${b}] indices) {
        int logical_row_start_offset = indices[0] * ${d};

        float max = getColorAsFloat(${$.texture2D}(A, offsetToCoords(logical_row_start_offset, ${g},
        ${v} )));
        for(int i=1; i<${d}; ++i)
        {
          float current = getColorAsFloat(${$.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${g}, ${v})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return{...Oc$2,output:{dims:f,type:l.type,textureType:0},shaderSource:y}},Db$1=(s,l,c,d,f,g)=>{let[v,b]=s.calculateTextureWidthAndHeight(l.dims,0),$=g.length;if(c<1||d<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(g.length!==1)throw new Error("Dimensionality of the output should be 1");if(g[0]!==c)throw new Error("Shape of the output should be equal to logical row count");if(f.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(f[0]!==c)throw new Error("Shape of the intermediate results should be equal to logical row count");let y=H$1(s.session.backend.glContext.version),x=`
      float process(int[${$}] indices) {
        int logical_row_start_offset = indices[0] * ${d};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${d}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${y.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${v}, ${b}))) - max);
        }

        return norm_factor;
      }`;return{...Ic$2,output:{dims:g,type:l.type,textureType:0},shaderSource:x}},Lb$1=(s,l,c,d,f,g)=>{let[v,b]=s.calculateTextureWidthAndHeight(l.dims,0),$=l.dims.length;if(c<1||d<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(f.length!==1||g.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(f[0]!==c||g[0]!==c)throw new Error("Shape of the intermediate results should be equal to logical row count");let y=`
      float process(int[${$}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${v}, ${b});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${d};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return{...Sc$3,output:{dims:l.dims,type:l.type,textureType:0},shaderSource:y}},Cc$2=s=>{if(!s||s.length!==1)throw new Error("Softmax requires 1 input.");if(s[0].type!=="float32"&&s[0].type!=="float64")throw new Error("Invalid input type")}}),$c$2,kc$2,Bc$2,Cb$1,Fb$1,$b$1,Nc$2=L$1(()=>{Ue$2(),fe$1(),ae(),$c$2={name:"Split",inputNames:["A"],inputTypes:[0]},kc$2=(s,l,c)=>{$b$1(l);let d=U$2.normalizeAxis(c.axis,l[0].dims.length),f=Cb$1(s,l,d,c),g=[];for(let v=0;v<f;++v)g.push(s.run({...$c$2,cacheHint:`${c.cacheKey};${v}`,get:()=>Fb$1(s,l[0],c,d,v)},l));return g},Bc$2=s=>{let l=s.attributes.getInt("axis",0),c=s.attributes.getInts("split",[]),d=s.outputs.length;return Q({axis:l,split:c,numOutputs:d})},Cb$1=(s,l,c,d)=>{let[,f]=an$2.splitShape(l[0].dims,c,d.split,d.numOutputs);return f.length},Fb$1=(s,l,c,d,f)=>{let[g,v]=an$2.splitShape(l.dims,d,c.split,c.numOutputs),b=v[f],$=g[f],y=`
      float process(int indices[${$.length}]) {
        indices[${d}] += ${b};
        return _A(indices);
      }
    `;return{...$c$2,cacheHint:`${c.cacheKey}:${f}`,output:{dims:$,type:l.type,textureType:0},shaderSource:y}},$b$1=s=>{if(!s||s.length!==1)throw new Error("Split requires one input.");if(s[0].type!=="int8"&&s[0].type!=="uint8"&&s[0].type!=="int16"&&s[0].type!=="uint16"&&s[0].type!=="int32"&&s[0].type!=="uint32"&&s[0].type!=="float32"&&s[0].type!=="float64"&&s[0].type!=="bool")throw new Error("Invalid input type.")}}),Ui$2,Rc$2,Mc$2,kb$1,Bb$1,Gc$2=L$1(()=>{fe$1(),Ui$2=(s,l,c)=>{kb$1(l);let d=U$2.squeezeShape(l[0].dims,c);return[s.reshapeUnpacked(l[0],d)]},Rc$2=(s,l)=>(Bb$1(l),Ui$2(s,[l[0]],Array.from(l[1].integerData))),Mc$2=s=>s.attributes.getInts("axes"),kb$1=s=>{if(!s||s.length!==1)throw new Error("Squeeze requires 1 input.");if(s[0].type==="string")throw new Error("invalid input tensor types.")},Bb$1=s=>{if(!s||s.length!==2)throw new Error("Squeeze requires 2 inputs.");if(s[1].type!=="int32")throw new Error("Invalid input type.")}}),Uc$2,Nb$1,Rb$1,zc$2=L$1(()=>{we$2(),ae(),Uc$2=(s,l)=>{Rb$1(l);let c={name:"Sum",inputNames:l.map((d,f)=>`X${f}`),inputTypes:new Array(l.length).fill(0)};return[s.run({...c,get:()=>Nb$1(s,l,c)},l)]},Nb$1=(s,l,c)=>{let d=H$1(s.session.backend.glContext.version),f=l[0].dims.slice(),g=`
      void main() {
        vec4 result = ${l.map((v,b)=>`${d.texture2D}(X${b},TexCoords)`).join(" + ")};
        ${d.output} = result;
      }
    `;return{...c,output:{dims:f,type:l[0].type,textureType:0},hasMain:!0,shaderSource:g}},Rb$1=s=>{if(!s||s.length===0)throw new Error("Sum requires inputs.");let l=s[0].dims.length;for(let c=1;c<s.length;c++){if(l!==s[c].dims.length)throw new Error("Input shapes are mismatched.");for(let d=0;d<l;d++)if(s[0].dims[d]!==s[c].dims[d])throw new Error("Input shapes are not matched.")}if(s[0].type!=="float32"&&s[0].type!=="float64")throw new Error("Invalid input type.");for(let c=1;c<s.length;c++)if(s[0].type!==s[c].type)throw new Error("Input types are not matched.")}}),Vc$2,Mb$1,Gb$1,Wc$2=L$1(()=>{pn$1(),ae(),Vc$2=(s,l)=>{Gb$1(l);let c={name:"Tile",inputNames:["A"],inputTypes:[0]};return[s.run({...c,get:()=>Mb$1(s,l,c)},l)]},Mb$1=(s,l,c)=>{let d=l[0].dims.slice(),f=new Array(d.length),g=[];for(let $=0;$<d.length;$++)f[$]=d[$]*l[1].numberData[$],g.push(`inputIdx[${$}] = int(mod(float(outputIdx[${$}]), ${d[$]}.));`);let v=f.length,b=`
      float process(int outputIdx[${v}]) {
        int inputIdx[${v}];
        ${g.join(`
`)}
        return _A(inputIdx);
      }
    `;return{...c,output:{dims:f,type:l[0].type,textureType:0},shaderSource:b}},Gb$1=s=>{if(!s||s.length!==2)throw new Error("Tile requires 2 input.");if(s[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(s[1].dims[0]!==s[0].dims.length)throw new Error("Invalid input shape.");if(Qt$1.indexOf(s[0].type)===-1)throw new Error("Invalid input type.");if(s[1].type!=="int32"&&s[1].type!=="int16")throw new Error("Invalid repeat type.")}}),zi$2,Hc$2,qc$2,Ub$1,zb$1,jc$2=L$1(()=>{fe$1(),zi$2=(s,l,c)=>{Ub$1(l);let d=U$2.unsqueezeShape(l[0].dims,c);return[s.reshapeUnpacked(l[0],d)]},Hc$2=(s,l)=>(zb$1(l),zi$2(s,[l[0]],Array.from(l[1].integerData))),qc$2=s=>s.attributes.getInts("axes"),Ub$1=s=>{if(!s||s.length!==1)throw new Error("Unsqueeze requires 1 input.");if(s[0].type==="string")throw new Error("invalid input tensor types.")},zb$1=s=>{if(!s||s.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(s[1].type!=="int32")throw new Error("Invalid input type.")}}),Yc$2,Xc$2=L$1(()=>{ol$2(),gl$2(),xl$2(),Sl$2(),to$2(),ff$2(),bf$1(),Tf$1(),vf$1(),Sf$1(),Ef$1(),Ff$1(),Nf(),ro$2(),Uf$1(),ec(),uc$1(),fc$1(),bc$1(),yc$1(),_c$1(),Fc$2(),Nc$2(),Gc$2(),zc$2(),Wc$2(),oo$2(),Ii$1(),jc$2(),Ni$1(),Yc$2=[["Abs","","6+",Al$2],["Acos","","7+",Pl$1],["Add","","7+",il$2],["And","","7+",al$2],["Asin","","7+",El$2],["Atan","","7+",Dl$2],["AveragePool","","7+",Vf$1,Wf$1],["BatchNormalization","","7+",rl$2,nl$2],["Cast","","6+",yl$2,Tl$2],["Ceil","","6+",Fl$2],["Clip","","6-10",_i$2,Ll$2],["Clip","","11+",Cl$2],["Concat","","4+",_l$2,Il$2],["Conv","","1+",Li$2,Ci$1],["ConvTranspose","","1+",uf$2,lf$2],["Cos","","7+",$l$2],["Div","","7+",sl$2],["Dropout","","7+",Oi$2],["DepthToSpace","","1+",hf$2,mf$2],["Equal","","7+",ul$2],["Elu","","6+",kl$2,Bl$1],["Exp","","6+",Nl$3],["Flatten","","1+",gf$1,yf$1],["Floor","","6+",Rl$2],["FusedConv","com.microsoft","1+",Li$2,Ci$1],["Gather","","1+",xf$1,wf$1],["Gemm","","7-10",Fi$2,Of$1],["Gemm","","11+",Fi$2,If],["GlobalAveragePool","","1+",qf$1,jf$1],["GlobalMaxPool","","1+",Zf$1],["Greater","","7+",ll$2],["Identity","","1+",Oi$2],["ImageScaler","","1+",Af$1,Pf$1],["InstanceNormalization","","6+",Lf$1,Cf$1],["LeakyRelu","","6+",Ml$2,Gl$1],["Less","","7+",fl$2],["LRN","","1+",$f$1,kf$1],["Log","","6+",Ul$2],["MatMul","","1+",ef$2,tf$2],["MaxPool","","1+",Yf$1,Xf$1],["Mul","","7+",cl$2],["Neg","","6+",zl$2],["Not","","1+",Vl$2],["Or","","7+",pl$2],["Pad","","2-10",$i$1,Rf$1],["Pad","","11+",Mf$1,Gf$1],["Pow","","7+",dl$2],["PRelu","","7+",hl$2],["ReduceLogSum","","1+",ac$1,er$1],["ReduceMax","","1+",nc$1,er$1],["ReduceMean","","1+",rc,er$1],["ReduceMin","","1+",oc$1,er$1],["ReduceProd","","1+",ic$1,er$1],["ReduceSum","","1-12",tc,er$1],["ReduceSumSquare","","1+",sc$1,er$1],["Relu","","6+",Wl$1],["Reshape","","5+",lc$1],["Resize","","10",Mi$2,hc],["Resize","","11+",Mi$2,mc$1],["Shape","","1+",gc$1],["Sigmoid","","6+",Hl$2],["Sin","","7+",ql$1],["Slice","","10+",vc$1],["Slice","","1-9",Tc$3,xc$2],["Softmax","","1-12",Ac$2,Pc$2],["Softmax","","13+",Dc$3,Ec$2],["Split","","2-12",kc$2,Bc$2],["Sqrt","","6+",jl$2],["Squeeze","","1-12",Ui$2,Mc$2],["Squeeze","","13+",Rc$2],["Sub","","7+",ml$2],["Sum","","6+",Uc$2],["Tan","","7+",Yl$2],["Tanh","","6+",Xl$2],["Tile","","6+",Vc$2],["Transpose","","1+",wr$1,pf$2],["Upsample","","7-8",ki$1,pc$1],["Upsample","","9",ki$1,dc$1],["Unsqueeze","","1-12",zi$2,qc$2],["Unsqueeze","","13+",Hc$2],["Xor","","7+",bl$2]]});function Jc$2(s){let l={},c;for(;(c=Kc$2.exec(s))!==null;){let d=c[3].split(",").map(f=>{let g=f.trim().split(" ");return g&&g.length===2?{type:g[0],name:g[1]}:null}).filter(f=>f!==null);l[c[2]]={params:d,body:c[4]}}for(let d in l){let f=Vb$1.replace("__FUNC__",d),g=new RegExp(f,"gm");for(;(c=g.exec(s))!==null;){let v=c[1],b=c[2],$=c[3].split(","),y=v?`${v} ${b};`:"",x=l[d].body,C="";l[d].params.forEach((N,W)=>{N&&(C+=`${N.type} ${N.name} = ${$[W]};
`)}),x=`${C}
 ${x}`,x=x.replace("return",`${b} = `);let E=`
      ${y}
      {
        ${x}
      }
      `;s=s.replace(c[0],E)}}return s=s.replace(Kc$2,""),s}var Kc$2,Vb$1,Zc$2=L$1(()=>{Kc$2=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,Vb$1="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function Mr$1(s,l){let c=[],d=[];for(let f=0;f<s.length;++f)s[f]!==1&&(c.push(s[f]),d.push(f));return{newShape:c,keptDims:d}}function qb$1(s){if(s.length===0)return 1;let l=s[0];for(let c=1;c<s.length;c++)l*=s[c];return l}function Qc$2(s){let l=Math.ceil(Math.sqrt(s));return[l,Math.ceil(s/l)]}var uo$2,Vi$1=L$1(()=>{lt$2(),fe$1(),uo$2=class{constructor(s){this.maxTextureSize=s}computeTextureWH(s,l){let c=this.computeTexture(s,l);return l&&l.isPacked&&(c[0]/=2,c[1]/=2),l&&l.reverseWH?[c[1],c[0]]:c}computeTexture(s,l){let c=l&&l.isPacked;if(s.length===0)return c?[2,2]:[1,1];let d=this.maxTextureSize;if(l&&l.breakAxis!==void 0){let v=l.breakAxis>=s.length?1:s.slice(l.breakAxis).reduce(($,y)=>$*y),b=l.breakAxis<=0?1:s.slice(0,l.breakAxis).reduce(($,y)=>$*y);if(v>d||b>d)ce$1.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${s}, breakAxis:${l.breakAxis}`);else return[v,b]}let f=s.slice(0);c&&(d=d*2,f=f.map((v,b)=>b>=f.length-2?f[b]%2===0?f[b]:f[b]+1:f[b]),f.length===1&&(f=[2,f[0]])),f.length!==2&&(f=Mr$1(f).newShape);let g=qb$1(f);return f.length<=1&&g<=d?[1,g]:f.length===2&&f[0]<=d&&f[1]<=d?f:f.length===3&&f[0]*f[1]<=d&&f[2]<=d?[f[0]*f[1],f[2]]:f.length===3&&f[0]<=d&&f[1]*f[2]<=d?[f[0],f[1]*f[2]]:f.length===4&&f[0]*f[1]*f[2]<=d&&f[3]<=d?[f[0]*f[1]*f[2],f[3]]:f.length===4&&f[0]<=d&&f[1]*f[2]*f[3]<=d?[f[0],f[1]*f[2]*f[3]]:c?Qc$2(g/4).map(v=>v*2):Qc$2(g)}}}),lo$2,ep$2=L$1(()=>{fe$1(),Wt$2(),we$2(),Vi$1(),Bt$2(),lo$2=class extends dt{constructor(s){super(s)}getFunctions(){return{...this.offsetToCoords(),...this.coordsToOffset(),...this.toVec(),...this.valueFrom(),...this.getCommonUtilFuncs(),...this.getInputsSamplingSnippets(),...this.getOutputSamplingSnippet()}}getCustomTypes(){return{}}offsetToCoords(){let s="offsetToCoords";return{offsetToCoords:new R$1(`
      vec2 ${s}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let s="coordsToOffset";return{coordsToOffset:new R$1(`
      int ${s}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let s=this.context.outputTextureLayout;return s.isPacked?this.getPackedOutputSamplingSnippet(s):this.getUnpackedOutputSamplingSnippet(s)}getPackedOutputSamplingSnippet(s){let l=s.unpackedShape,c=[s.width,s.height],d={},f="getOutputCoords";switch(l.length){case 0:d[f]=this.getOutputScalarCoords();break;case 1:d[f]=this.getOutputPacked1DCoords(l,c);break;case 2:d[f]=this.getOutputPacked2DCoords(l,c);break;case 3:d[f]=this.getOutputPacked3DCoords(l,c);break;default:d[f]=this.getOutputPackedNDCoords(l,c)}let g=`
      void setOutput(vec4 val) {
        ${H$1(this.context.glContext.version).output} = val;
      }
    `,v="floatTextureSetRGBA";return d[v]=new R$1(g),d}getUnpackedOutputSamplingSnippet(s){let l=s.unpackedShape,c=[s.width,s.height],d={},f="getOutputCoords";switch(l.length){case 0:d[f]=this.getOutputScalarCoords();break;case 1:d[f]=this.getOutputUnpacked1DCoords(l,c);break;case 2:d[f]=this.getOutputUnpacked2DCoords(l,c);break;case 3:d[f]=this.getOutputUnpacked3DCoords(l,c);break;case 4:d[f]=this.getOutputUnpacked4DCoords(l,c);break;case 5:d[f]=this.getOutputUnpacked5DCoords(l,c);break;case 6:d[f]=this.getOutputUnpacked6DCoords(l,c);break;default:throw new Error(`Unsupported output dimensionality: ${l.length}`)}let g=`
        void setOutput(float val) {
          ${H$1(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,v="floatTextureSetR";return d[v]=new R$1(g),d}getOutputScalarCoords(){return new R$1(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(s,l){let c=l,d="";return c[0]===1?(d=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${c[1]}.0);
          }
        `,new R$1(d)):c[1]===1?(d=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${c[0]}.0);
          }
        `,new R$1(d)):(d=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${c[0]}, ${c[1]}));
          return 2 * (resTexRC.y * ${c[0]} + resTexRC.x);
        }
      `,new R$1(d))}getOutputPacked2DCoords(s,l){let c="";if(hr$1.arraysEqual(s,l))return c=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${l[0]}, ${l[1]}));
        }
      `,new R$1(c);let d=l,f=Math.ceil(s[1]/2);return c=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${d[0]}, ${d[1]}));

          int index = resTexRC.y * ${d[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${f}) * 2;
          int c = 2 * (index / ${f});

          return ivec2(r, c);
        }
      `,new R$1(c)}getOutputPacked3DCoords(s,l){let c=[l[0],l[1]],d=Math.ceil(s[2]/2),f=d*Math.ceil(s[1]/2),g=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${c[0]}, ${c[1]}));
          int index = resTexRC.y * ${c[0]} + resTexRC.x;

          int b = index / ${f};
          index -= b * ${f};

          // reverse r and c order for packed texture
          int r = imod(index, ${d}) * 2;
          int c = 2 * (index / ${d});

          return ivec3(b, r, c);
        }
      `;return new R$1(g)}getOutputPackedNDCoords(s,l){let c=[l[0],l[1]],d=Math.ceil(s[s.length-1]/2),f=d*Math.ceil(s[s.length-2]/2),g=f,v="",b="b, r, c";for(let y=2;y<s.length-1;y++)g*=s[s.length-y-1],v=`
      int b${y} = index / ${g};
      index -= b${y} * ${g};
    `+v,b=`b${y}, `+b;let $=`
      ivec${s.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${c[0]}, ${c[1]}));
        int index = resTexRC.y * ${c[0]} + resTexRC.x;

        ${v}

        int b = index / ${f};
        index -= b * ${f};

        // reverse r and c order for packed texture
        int r = imod(index, ${d}) * 2;
        int c = 2 * (index / ${d});

        return ivec${s.length}(${b});
      }
    `;return new R$1($)}getOutputUnpacked1DCoords(s,l){let c=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${l[0]}, ${l[1]}));
          return resTexRC.y * ${l[0]} + resTexRC.x;
        }
      `;return new R$1(c)}getOutputUnpacked2DCoords(s,l){let c=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${l[0]}, ${l[1]}));
          int index = resTexRC.y * ${l[0]} + resTexRC.x;
          int r = index / ${s[1]};
          int c = index - r * ${s[1]};
          return ivec2(r, c);
        }
      `;return new R$1(c)}getOutputUnpacked3DCoords(s,l){let c="",d=s.length,f=null;d<2&&(f=[]),f=new Array(d-1),f[d-2]=s[d-1];for(let b=d-3;b>=0;--b)f[b]=f[b+1]*s[b+1];let g=["r","c","d"],v=f.map((b,$)=>{let y=`int ${g[$]} = index / ${b}`,x=$===f.length-1?`int ${g[$+1]} = index - ${g[$]} * ${b}`:`index -= ${g[$]} * ${b}`;return`${y}; ${x};`}).join("");return c=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${l[0]}, ${l[1]}));
          int index = resTexRC.y * ${l[0]} + resTexRC.x;
          ${v}
          return ivec3(r, c, d);
        }
      `,new R$1(c)}getOutputUnpacked4DCoords(s,l){let c="",d=s.length,f=null;d<2&&(f=[]),f=new Array(d-1),f[d-2]=s[d-1];for(let b=d-3;b>=0;--b)f[b]=f[b+1]*s[b+1];let g=["r","c","d","d2"],v=f.map((b,$)=>{let y=`int ${g[$]} = index / ${b}`,x=$===f.length-1?`int ${g[$+1]} = index - ${g[$]} * ${b}`:`index -= ${g[$]} * ${b}`;return`${y}; ${x};`}).join("");return c=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${l[0]}, ${l[1]}));
          int index = resTexRC.y * ${l[0]} + resTexRC.x;
          ${v}
          return ivec4(r, c, d, d2);
        }
      `,new R$1(c)}getOutputUnpacked5DCoords(s,l){let c="",d=s.length,f=null;d<2&&(f=[]),f=new Array(d-1),f[d-2]=s[d-1];for(let b=d-3;b>=0;--b)f[b]=f[b+1]*s[b+1];let g=["r","c","d","d2","d3"],v=f.map((b,$)=>{let y=`int ${g[$]} = index / ${b}`,x=$===f.length-1?`int ${g[$+1]} = index - ${g[$]} * ${b}`:`index -= ${g[$]} * ${b}`;return`${y}; ${x};`}).join("");return c=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${l[0]}, ${l[1]}));
          int index = resTexRC.y * ${l[0]} + resTexRC.x;
          ${v}
          return ivec5(r, c, d, d2, d3);
        }
      `,new R$1(c)}getOutputUnpacked6DCoords(s,l){let c="",d=s.length,f=null;d<2&&(f=[]),f=new Array(d-1),f[d-2]=s[d-1];for(let b=d-3;b>=0;--b)f[b]=f[b+1]*s[b+1];let g=["r","c","d","d2","d3","d4"],v=f.map((b,$)=>{let y=`int ${g[$]} = index / ${b}`,x=$===f.length-1?`int ${g[$+1]} = index - ${g[$]} * ${b}`:`index -= ${g[$]} * ${b}`;return`${y}; ${x};`}).join("");return c=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${l[0]}, ${l[1]}));
         int index = resTexRC.y * ${l[0]} + resTexRC.x;
         ${v}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new R$1(c)}getCommonUtilFuncs(){let s={},l="uvFromFlat";s[l]=new R$1(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),l="packedUVfrom1D",s[l]=new R$1(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),l="packedUVfrom2D",s[l]=new R$1(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),l="packedUVfrom3D",s[l]=new R$1(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),l="sampleTexture";let c=H$1(this.context.glContext.version);return s[l]=new R$1(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${c.texture2D}(textureSampler, uv).r;
        }`),s}getInputsSamplingSnippets(){let s={},l=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((c,d)=>{let f=this.context.inputTextureLayouts[d],g=Yn$2(c);f.isPacked?s[g]=this.getPackedSamplerFromInput(g,c,f):s[g]=this.getUnpackedSamplerFromInput(g,c,f);let v=Gu$1(c);f.unpackedShape.length<=l.unpackedShape.length&&(f.isPacked?s[v]=this.getPackedSamplerAtOutputCoords(v,f,l,c):s[v]=this.getUnpackedSamplerAtOutputCoords(v,f,l,c))}),s}getPackedSamplerAtOutputCoords(s,l,c,d){let f=l.unpackedShape,g=c.unpackedShape,v=Yn$2(d),b=f.length,$=g.length,y=Ze$2.getBroadcastDims(f,g),x=Qe$2($),C=$-b,E,N=Dt$2();b===0?E="":$<2&&y.length>=1?E="coords = 0;":E=y.map(he=>`coords.${N[he+C]} = 0;`).join(`
`);let W="";$<2&&b>0?W="coords":W=f.map((he,ge)=>`coords.${N[ge+C]}`).join(", ");let q="return outputValue;",Y=U$2.size(f)===1,re=U$2.size(g)===1;if(b===1&&!Y&&!re)q=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(Y&&!re)$===1?q=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:q=`
          return vec4(outputValue.x);
        `;else if(y.length){let he=b-2,ge=b-1;y.indexOf(he)>-1&&y.indexOf(ge)>-1?q="return vec4(outputValue.x);":y.indexOf(he)>-1?q="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":y.indexOf(ge)>-1&&(q="return vec4(outputValue.xx, outputValue.zz);")}let se=`
        int lastDim = coords.${N[$-1]};
        coords.${N[$-1]} = coords.${N[$-2]};
        coords.${N[$-2]} = lastDim;
      `,de=`
      vec4 ${s}() {
        ${x} coords = getOutputCoords();
        ${se}
        ${E}
        vec4 outputValue = ${v}(${W});
        ${q}
      }
    `;return new R$1(de,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(s,l,c,d){let f=[c.width,c.height],g=[l.width,l.height],v=l.unpackedShape.length,b=c.unpackedShape.length,$=l.unpackedShape,y=c.unpackedShape,x=Yn$2(d);if(v===b&&hr$1.arraysEqual(g,f)){let se=`
          float ${s}() {
            return sampleTexture(${d}, TexCoords);
          }
        `;return new R$1(se,["coordinates.sampleTexture"])}let C=Qe$2(b),E=Ze$2.getBroadcastDims($,y),N=b-v,W,q=Dt$2();v===0?W="":b<2&&E.length>=1?W="coords = 0;":W=E.map(se=>`coords.${q[se+N]} = 0;`).join(`
`);let Y="";b<2&&v>0?Y="coords":Y=l.unpackedShape.map((se,de)=>`coords.${q[de+N]}`).join(", ");let re=`
        float ${s}() {
          ${C} coords = getOutputCoords();
          ${W}
          return ${x}(${Y});
        }
      `;return new R$1(re,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(s,l,c){switch(c.unpackedShape.length){case 0:return this.getPackedSamplerScalar(s,l);case 1:return this.getPackedSampler1D(s,l,c);case 2:return this.getPackedSampler2D(s,l,c);case 3:return this.getPackedSampler3D(s,l,c);default:return this.getPackedSamplerND(s,l,c)}}getUnpackedSamplerFromInput(s,l,c){let d=c.unpackedShape;switch(d.length){case 0:return this.getUnpackedSamplerScalar(s,l,c);case 1:return this.getUnpackedSampler1D(s,l,c);case 2:return this.getUnpackedSampler2D(s,l,c);case 3:return this.getUnpackedSampler3D(s,l,c);case 4:return this.getUnpackedSampler4D(s,l,c);case 5:return this.getUnpackedSampler5D(s,l,c);case 6:return this.getUnpackedSampler6D(s,l,c);default:throw new Error(`Unsupported dimension ${d.length}-D`)}}getPackedSamplerScalar(s,l){let c=H$1(this.context.glContext.version),d=`
          vec4 ${s}() {
            return ${c.texture2D}(${l}, halfCR);
          }
        `;return new R$1(d)}getPackedSampler1D(s,l,c){let d=[c.width,c.height],f=[d[1],d[0]],g=H$1(this.context.glContext.version),v=`vec4 ${s}(int index) {
      vec2 uv = packedUVfrom1D(
      ${f[0]}, ${f[1]}, index);
      return ${g.texture2D}(${l}, uv);
    }`;return new R$1(v,["coordinates.packedUVfrom1D"])}getPackedSampler2D(s,l,c){let d=c.unpackedShape,f=[c.width,c.height],g=H$1(this.context.glContext.version),v=f[0],b=f[1];if(f!=null&&hr$1.arraysEqual(d,f)){let C=`vec4 ${s}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${b}.0, ${v}.0);
        return ${g.texture2D}(${l}, uv);
      }`;return new R$1(C)}let $=f,y=Math.ceil(d[1]/2),x=`vec4 ${s}(int row, int col) {
      vec2 uv = packedUVfrom2D(${$[1]}, ${$[0]}, ${y}, row, col);
      return ${g.texture2D}(${l}, uv);
    }`;return new R$1(x,["coordinates.packedUVfrom2D"])}getPackedSampler3D(s,l,c){let d=c.unpackedShape,f=[c.width,c.height],g=[f[0],f[1]],v=H$1(this.context.glContext.version);if(d[0]===1){let E=d.slice(1),N=[1,2],W=$r(d,E),q=["b","row","col"],Y=JSON.parse(JSON.stringify(c));Y.unpackedShape=W;let re=this.getPackedSamplerFromInput(s,l,Y),se=`${re.routineBody}
      vec4 ${s}(int b, int row, int col) {
        return ${s}(${kr$2(q,N)});
      } `;return new R$1(se,re.dependencies)}let b=g[0],$=g[1],y=Math.ceil(d[2]/2),x=y*Math.ceil(d[1]/2),C=`vec4 ${s}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${$}, ${b}, ${x}, ${y}, b, row, col);
      return ${v.texture2D}(${l}, uv);}`;return new R$1(C,["coordinates.packedUVfrom3D"])}getPackedSamplerND(s,l,c){let d=c.unpackedShape,f=d.length,g=[c.width,c.height],v=H$1(this.context.glContext.version),b=[g[0],g[1]],$=b[1],y=b[0],x=Math.ceil(d[f-1]/2),C=x*Math.ceil(d[f-2]/2),E="int b, int row, int col",N=`b * ${C} + (row / 2) * ${x} + (col / 2)`;for(let q=2;q<f-1;q++)E=`int b${q}, `+E,C*=d[f-q-1],N=`b${q} * ${C} + `+N;let W=`vec4 ${s}(${E}) {
      int index = ${N};
      int texR = index / ${y};
      int texC = index - texR * ${y};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${y}, ${$});
      return ${v.texture2D}(${l}, uv);
    }`;return new R$1(W)}getUnpackedSamplerScalar(s,l,c){let[d,f]=[c.width,c.height];if(d===1&&f===1){let v=`
          float ${s}() {
            return sampleTexture(${l}, halfCR);
          }
        `;return new R$1(v,["coordinates.sampleTexture"])}let g=`
        float ${s}() {
          int offset_${l} = coordsToOffset(TexCoords, ${d}, ${f});
          vec2 uv = uvFromFlat(${d}, ${f}, offset_${l});
          return sampleTexture(${l}, uv);
        }
      `;return new R$1(g,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(s,l,c){let d=c.width,f=c.height;if(f===1&&d===1){let v=`
        float ${s}(int index) {
          return sampleTexture(${l}, halfCR);
        }
      `;return new R$1(v,["coordinates.sampleTexture"])}if(f===1){let v=`
          float ${s}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${d}.0, 0.5);
            return sampleTexture(${l}, uv);
          }
        `;return new R$1(v,["coordinates.sampleTexture"])}if(d===1){let v=`
          float ${s}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${f}.0);
            return sampleTexture(${l}, uv);
          }
        `;return new R$1(v,["coordinates.sampleTexture"])}let g=`
        float ${s}(int index) {
          vec2 uv = uvFromFlat(${d}, ${f}, index);
          return sampleTexture(${l}, uv);
        }
      `;return new R$1(g,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(s,l,c){let d=c.unpackedShape,f=[c.height,c.width];if(f!=null&&hr$1.arraysEqual(d,f)){let C=f[1],E=f[0],N=`
          float ${s}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${C}.0, ${E}.0);
            return sampleTexture(${l}, uv);
          }
        `;return new R$1(N,["coordinates.sampleTexture"])}let{newShape:g,keptDims:v}=Mr$1(d),b=g;if(b.length<d.length){let C=$r(d,b),E=JSON.parse(JSON.stringify(c));E.unpackedShape=C;let N=["col","row"],W=`
          ${this.getUnpackedSamplerFromInput(s,l,E).routineBody}
          float ${s}(int row, int col) {
            return ${s}(${kr$2(N,v)});
          }
        `;return new R$1(W,["coordinates.sampleTexture"])}let $=f[1],y=f[0];if(y===1){let C=`
          float ${s}(int row, int col) {
            int offset_${l} = coordsToOffset(TexCoords, ${$}, ${y});
            float index = dot(vec3(row, col, offset_${l}), vec3(${d[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${$}.0);
            return sampleTexture(${l}, uv);
          }
        `;return new R$1(C,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if($===1){let C=`
          float ${s}(int row, int col) {
            int offset_${l} = coordsToOffset(TexCoords, ${$}, ${y});
            float index = dot(vec3(row, col, offset_${l}), vec3(${d[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${y}.0, 0.5);
            return sampleTexture(${l}, uv);
          }
        `;return new R$1(C,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let x=`
        float ${s}(int row, int col) {
          int index = col * ${d[1]} + row;
          vec2 uv = uvFromFlat(${$}, ${y}, index);
          return sampleTexture(${l}, uv);
        }
      `;return new R$1(x,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(s,l,c){let d=c.unpackedShape,f=d[1]*d[2],g=d[2],{newShape:v,keptDims:b}=Mr$1(d),$=v;if($.length<d.length){let E=$r(d,$),N=["batch","col","row"],W=JSON.parse(JSON.stringify(c));W.unpackedShape=E;let q=this.getUnpackedSamplerFromInput(s,l,W),Y=b.reverse(),re=`
          ${q.routineBody}
          float ${s}(int batch, int row, int col) {
            return ${s}(${kr$2(N,Y)});
          }
        `;return new R$1(re,q.dependencies)}let y=c.width,x=c.height,C=`
          float ${s}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${f} + col * ${g} + row;
            vec2 uv = uvFromFlat(${y}, ${x}, index);
            return sampleTexture(${l}, uv);
          }
      `;return new R$1(C,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(s,l,c){let d=c.unpackedShape,f=d[3],g=d[2]*f,v=d[1]*g,b=c.width,$=c.height,y=`
        float ${s}(int row, int col, int depth, int depth2) {
          int index = row * ${v} + col * ${g} +
              depth2 * ${f} + depth;
          vec2 uv = uvFromFlat(${b}, ${$}, index);
          return sampleTexture(${l}, uv);
        }
      `;return new R$1(y,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(s,l,c){let d=c.unpackedShape,f=d[4],g=d[3]*f,v=d[2]*g,b=d[1]*v,{newShape:$,keptDims:y}=Mr$1(d);if($.length<d.length){let N=$r(d,$),W=["row","col","depth","depth2","depth3"],q=JSON.parse(JSON.stringify(c));q.unpackedShape=N;let Y=`
          ${this.getUnpackedSamplerFromInput(s,l,q).routineBody}
          float ${s}(int row, int col, int depth, int depth2, int depth3) {
            return ${s}(${kr$2(W,y)});
          }
        `;return new R$1(Y,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let x=c.width,C=c.height,E=`
        float ${s}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${b} + col * ${v} + depth * ${g} +
          depth3 * ${f} + depth2;
          vec2 uv = uvFromFlat(${x}, ${C}, index);
          return sampleTexture(${l}, uv);
        }
      `;return new R$1(E,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(s,l,c){let d=c.unpackedShape,f=d[5],g=d[4]*f,v=d[3]*g,b=d[2]*v,$=d[1]*b,{newShape:y,keptDims:x}=Mr$1(d);if(y.length<d.length){let W=$r(d,y),q=["row","col","depth","depth2","depth3","depth4"],Y=JSON.parse(JSON.stringify(c));Y.unpackedShape=W;let re=`
            ${this.getUnpackedSamplerFromInput(s,l,Y).routineBody}
            float ${s}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${s}(${kr$2(q,x)});
            }
          `;return new R$1(re,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let C=c.width,E=c.height,N=`
          float ${s}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${$} + col * ${b} + depth * ${v} +
            depth2 * ${g} + depth3 * ${f} + depth4;
            vec2 uv = uvFromFlat(${C}, ${E}, index);
            return sampleTexture(${l}, uv);
          }
        `;return new R$1(N,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let s=this.context.outputTextureLayout,l=s.shape.length,c=s.strides,d=s.width,f=s.height,g=[];for(let b=0;b<l-1;++b)g.push(`
        c[${b}] = offset / ${c[b]};`),g.push(`
        offset -= c[${b}] * ${c[b]};`);g.push(`
        c[${l-1}] = offset;`);let v=`
      void toVec(vec2 texCoords, out int c[${l}]) {
        int offset = coordsToOffset(texCoords, ${d}, ${f});
        ${g.join("")}
      }
      void toVec(int offset, out int c[${l}]) {
        ${g.join("")}
      }
    `;return{toVec:new R$1(v,["coordinates.coordsToOffset"])}}valueFrom(){let s={};return this.context.programInfo.inputNames.forEach((l,c)=>{let d=this.context.inputTextureLayouts[c],f=(d.unpackedShape.length>0?d.unpackedShape:d.shape).length,g=`_${l}`;s[g]=new R$1(this.getValueFromSingle(l,f,d.width,d.height,!1),[`shapeUtils.indicesToOffset${g}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),g=g+"_T",s[g]=new R$1(this.getValueFromSingle(l,f,d.width,d.height,!0),[`shapeUtils.indicesToOffset${g}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),s}getValueFromSingle(s,l,c,d,f){let g=`_${s}`;f&&(g=g+"_T");let v=H$1(this.context.glContext.version);return`
        float ${g}(int m[${l}]) {
          int offset = indicesToOffset${g}(m);
          vec2 coords = offsetToCoords(offset, ${c}, ${d});
          float value = getColorAsFloat(${v.texture2D}(${s}, coords));
          return value;
        }
        `}getPackedValueFrom(s,l,c,d,f){let g=`_${s}_Pack`;f&&(g=g+"_T");let v=H$1(this.context.glContext.version);return`
        vec4 ${g}(int m[${l}]) {
          int offset = indicesToOffset_${s}(m);
          vec2 coords = offsetToCoords(offset, ${c}, ${d});
          return ${v.texture2D}(${s}, coords);
        }
        `}}}),fo$2,tp$2=L$1(()=>{Wt$2(),fo$2=class BSe extends dt{constructor(l){super(l)}getFunctions(){return{...this.encodeFloat32(),...this.decodeFloat32()}}getCustomTypes(){return{}}encodeFloat32(){return{encode:new R$1(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new R$1(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let l=BSe.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new R$1(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${l}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let l=BSe.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new R$1(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${l}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let l=new ArrayBuffer(4),c=new Uint32Array(l),d=new Uint8Array(l);if(c[0]=3735928559,d[0]===239)return!0;if(d[0]===222)return!1;throw new Error("unknown endianness")}}}),co$2,rp$2=L$1(()=>{Wt$2(),we$2(),co$2=class extends dt{constructor(s){super(s)}getFunctions(){return{...this.setFragColor(),...this.getColorAsFloat()}}getCustomTypes(){return{}}setFragColor(){let s=H$1(this.context.glContext.version);return{setFragColor:new R$1(`
        void setFragColor(float value) {
            ${s.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new R$1(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}),po$2,np$2=L$1(()=>{Wt$2(),po$2=class N$e extends dt{constructor(l){super(l)}getFunctions(){return{...this.bcastIndex(),...this.bcastMatmulIndex(),...this.offsetToIndices(),...this.indicesToOffset(),...this.incrementIndices()}}getCustomTypes(){return{}}bcastIndex(){let l=this.context.outputTextureLayout.shape.length,c={};return this.context.programInfo.inputNames.forEach((d,f)=>{let g=this.context.inputTextureLayouts[f].unpackedShape;if(g.length<=l){let v=g.length,b=l-v,$=`bcastIndices_${d}`,y="";for(let C=0;C<v;++C)y+=`
          realIndices[${C}] = int( mod(float(bcastedIndices[${b+C}]), ${g[C]}.0) );
          `;let x=`
        void ${$} (int bcastedIndices[${l}], out int realIndices[${v}]) {
          ${y}
        }
        `;c[$]=new R$1(x)}}),c}bcastMatmulIndex(){let l=this.context.outputTextureLayout.shape.length,c={};return this.context.programInfo.inputNames.forEach((d,f)=>{let g=this.context.inputTextureLayouts[f].shape;if(!(g.length<2||g.length>l)){let v=g.length,b=l-v,$=`bcastMatmulIndices_${d}`,y="";for(let C=0;C<v-2;++C)y+=`
          realIndices[${C}] = int( mod(float(bcastedIndices[${b+C}]), ${g[C]}.0) );
          `;let x=`
        void ${$}(int bcastedIndices[${l}], out int realIndices[${v}]) {
          ${y}
          realIndices[${v-1}] = bcastedIndices[${l-1}];
          realIndices[${v-2}] = bcastedIndices[${l-2}];
        }
        `;c[$]=new R$1(x)}}),c}indicesToOffset(){let l={};return this.context.programInfo.inputNames.forEach((c,d)=>{let f=this.context.inputTextureLayouts[d].shape,g=this.context.inputTextureLayouts[d].strides,v=f.length,b=`indicesToOffset_${c}`;l[b]=new R$1(N$e.indexToOffsetSingle(b,v,g)),b=`indicesToOffset_${c}_T`,l[b]=new R$1(N$e.indexToOffsetSingle(b,v,g.slice().reverse()))}),l}static indexToOffsetSingle(l,c,d){let f="";for(let g=c-1;g>=0;--g)f+=`
        offset += indices[${g}] * ${d[g]};
        `;return`
      int ${l}(int indices[${c}]) {
        int offset = 0;
        ${f}
        return offset;
      }
      `}offsetToIndices(){let l={};return this.context.programInfo.inputNames.forEach((c,d)=>{let f=this.context.inputTextureLayouts[d].shape,g=this.context.inputTextureLayouts[d].strides,v=f.length,b=`offsetToIndices_${c}`;l[b]=new R$1(N$e.offsetToIndicesSingle(b,v,g)),b=`offsetToIndices_${c}_T`,l[b]=new R$1(N$e.offsetToIndicesSingle(b,v,g.slice().reverse()))}),l}static offsetToIndicesSingle(l,c,d){let f=[];for(let g=0;g<c-1;++g)f.push(`
      indices[${g}] = offset / ${d[g]};`),f.push(`
        offset -= indices[${g}] * ${d[g]};`);return f.push(`
      indices[${c-1}] = offset;`),`
      void ${l}(int offset, out int indices[${c}]) {
        ${f.join("")}
      }
      `}incrementIndices(){let l={};return this.context.programInfo.inputNames.forEach((c,d)=>{let f=this.context.inputTextureLayouts[d].shape,g=f.length,v=`incrementIndices_${c}`,b="";for(let y=0;y<g;++y)b+=`
        shape[${y}] = ${f[y]};`;let $=`
        void ${v}(int axis, out int indices[${g}]) {
          int shape[${g}];
          ${b};
          for(int i = ${g} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;l[v]=new R$1($)}),l}}}),ho$2,op$3=L$1(()=>{Wt$2(),ho$2=class extends dt{constructor(s){super(s)}getCustomTypes(){return{}}getFunctions(){return{...this.binaryVecFunctions(),...this.copyVec(),...this.setVecItem(),...this.getVecItem()}}binaryVecFunctions(){let s=this.context.outputTextureLayout.shape.length,l={add:"+=",sub:"-=",mul:"*=",div:"/="},c={};for(let d in l){let f=`${d}Vec`,g="";for(let b=0;b<s;++b)g+=`
          dest[${b}] ${l[d]} src[${b}];
          `;let v=`
        void ${f}(int src[${s}], out int dest[${s}]) {
          ${g}
        }
        `;c[f]=new R$1(v)}return c}copyVec(){let s=this.context.outputTextureLayout.shape.length,l="";for(let d=0;d<s;++d)l+=`
        dest[${d}] = src[${d}];
        `;let c=`
      void copyVec(int src[${s}], out int dest[${s}]) {
        ${l}
      }
      `;return{copyVec:new R$1(c)}}setVecItem(){let s=this.context.outputTextureLayout.shape.length,l=`
        if(index < 0)
            index =${s} + index;
        if (index == 0)
            m[0] = value;
        `;for(let d=1;d<s-1;++d)l+=`
        else if (index == ${d})
            m[${d}] = value;
            `;l+=`
        else
            m[${s-1}] = value;
        `;let c=`
      void setVecItem(out int m[${s}], int index, int value) {
        ${l}
      }
        `;return{setVecItem:new R$1(c)}}getVecItem(){let s=this.context.outputTextureLayout.shape.length,l=`
        if(index < 0)
            index = ${s} + index;
        if (index == 0)
            return m[0];
      `;for(let d=1;d<s-1;++d)l+=`
        else if (index == ${d})
            return m[${d}];
      `;l+=`
        else
            return m[${s-1}];
        `;let c=`
      int getVecItem(int m[${s}], int index) {
        ${l}
      }
    `;return{getVecItem:new R$1(c)}}}}),Wi$2,ip$2=L$1(()=>{ep$2(),tp$2(),rp$2(),np$2(),op$3(),Wi$2={encoding:fo$2,fragcolor:co$2,vec:ho$2,shapeUtils:po$2,coordinates:lo$2}}),mo$2,ap$2=L$1(()=>{Wt$2(),Zc$2(),ip$2(),we$2(),mo$2=class{constructor(s,l,c,d){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new Zn$2(s,l,c,d),Object.keys(Wi$2).forEach(g=>{let v=new Wi$2[g](this.context);this.libs[g]=v});let f=this.glslLibRoutineDependencyGraph;for(let g in this.libs){let v=this.libs[g].getFunctions();for(let b in v){let $=g+"."+b,y;f[$]?(y=f[$],y.routineBody=v[b].routineBody):(y=new cn$2($,v[b].routineBody),f[$]=y);let x=v[b].dependencies;if(x)for(let C=0;C<x.length;++C)if(f[x[C]])y.addDependency(f[x[C]]);else{let E=new cn$2(x[C]);f[x[C]]=E,y.addDependency(E)}}}}preprocess(){let s=this.context.programInfo,l=s.shaderSource;return this.context.programInfo.hasMain||(l=`${l}
      ${Mu$2(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),l=Jc$2(l),`${Ru$2(this.context.glContext.version)}
    ${this.getUniforms(s.inputNames,s.variables)}
    ${this.getImports(l)}
    ${l}`}getImports(s){let l=this.selectGlslLibRoutinesToBeIncluded(s);if(l.length===0)return"";let c="";for(let d=0;d<l.length;++d)if(l[d].routineBody)c+=l[d].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${l[d].name}`);return c}selectGlslLibRoutinesToBeIncluded(s){let l=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(c=>{let d=c.split(".")[1];s.indexOf(d)!==-1&&l.push(this.glslLibRoutineDependencyGraph[c])}),Qn$2.returnOrderedNodes(l)}getUniforms(s,l){let c=[];if(s)for(let d of s)c.push(`uniform sampler2D ${d};`);if(l)for(let d of l)c.push(`uniform ${d.type} ${d.name}${d.arrayLength?`[${d.arrayLength}]`:""};`);return c.join(`
`)}}}),bo$2,sp$2=L$1(()=>{Ot$2(),lt$2(),ap$2(),we$2(),bo$2=class{constructor(s,l,c){this.profiler=s,this.glContext=l,this.textureLayoutStrategy=c,this.repo=new Map,this.attributesBound=!1}getArtifact(s){return this.repo.get(s)}setArtifact(s,l){this.repo.set(s,l)}run(s,l,c){this.profiler.event("op",`ProgramManager.run ${s.programInfo.name??"unknown kernel"}`,()=>{let d=this.glContext.gl,f=s.program;d.useProgram(f);try{this.bindOutput(c),this.attributesBound||this.bindAttributes(s.attribLocations),this.bindUniforms(s.uniformLocations,s.programInfo.variables??[],l)}catch(g){throw ce$1.error("ProgramManager",s.programInfo.shaderSource),g}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(s=>this.glContext.deleteProgram(s.program))}build(s,l,c){return this.profiler.event("backend","ProgramManager.build",()=>{let d=new mo$2(this.glContext,s,l,c),f=d.preprocess(),g=this.compile(f);return{programInfo:s,program:g,uniformLocations:this.getUniformLocations(g,d.context.programInfo.inputNames,d.context.programInfo.variables),attribLocations:this.getAttribLocations(g)}})}compile(s){if(!this.vertexShader){ce$1.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let d=Nu$2(this.glContext.version);this.vertexShader=this.glContext.compileShader(d,this.glContext.gl.VERTEX_SHADER)}Z.debug&&ce$1.verbose("ProrgramManager",`FragShader:
${s}
`);let l=this.glContext.compileShader(s,this.glContext.gl.FRAGMENT_SHADER),c=this.glContext.createProgram(this.vertexShader,l);return this.glContext.deleteShader(l),c}bindOutput(s){let l=s.width,c=s.height;ce$1.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${l}/${c}, shape=${s.shape}, type=${s.tensor.type}`),this.glContext.attachFramebuffer(s.texture,l,c)}bindAttributes(s){let l=s.position,c=s.textureCoord;this.glContext.setVertexAttributes(l,c),this.attributesBound=!0}bindUniforms(s,l,c){var g;let d=this.glContext.gl,f=0;for(let{name:v,type:b,location:$,arrayLength:y}of s){let x=(g=l.find(C=>C.name===v))==null?void 0:g.data;if(b!=="sampler2D"&&!x)throw new Error(`variable '${v}' does not have data defined in program info`);switch(b){case"sampler2D":this.bindTexture(c[f],$,f),f++;break;case"float":y?d.uniform1fv($,x):d.uniform1f($,x);break;case"int":y?d.uniform1iv($,x):d.uniform1i($,x);break;default:throw new Error(`Uniform not implemented: ${b}`)}}}bindTexture(s,l,c){this.glContext.bindTextureToUniform(s.texture,c,l)}getAttribLocations(s){return{position:this.getAttribLocation(s,"position"),textureCoord:this.getAttribLocation(s,"textureCoord")}}getUniformLocations(s,l,c){let d=[];if(l)for(let f of l)d.push({name:f,type:"sampler2D",location:this.getUniformLocation(s,f)});if(c)for(let f of c)d.push({...f,location:this.getUniformLocation(s,f.name)});return d}getUniformLocation(s,l){let c=this.glContext.gl.getUniformLocation(s,l);if(c===null)throw new Error(`Uniform ${l} not found.`);return c}getAttribLocation(s,l){return this.glContext.gl.getAttribLocation(s,l)}}}),go$2,up$2=L$1(()=>{lt$2(),ln$1(),go$2=class{constructor(s,l,c,d){this.glContext=s,this.layoutStrategy=l,this.profiler=c,this.config=d,this.pendingRead=new Map,d.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(s,l,c,d){let f=this.toEncoderType(s),g=this.glContext.getEncoder(f,l.channels||1,d);if(l.isPacked&&d===1)throw new Error("not implemented");let v=l.width,b=l.height,$,y;if(this.config.reuseTextures){$=`${v}x${b}_${g.format}_${g.internalFormat}_${g.textureType}`,y=this.inUseTextures.get($),y||(y=[],this.inUseTextures.set($,y));let C=this.idleTextures.get($);if(C&&C.length>0){let E=C.pop();return y.push(E),d===1&&this.glContext.updateTexture(E,v,b,g,this.toTextureData(s,c)),E}}ce$1.verbose("TextureManager",`Creating new texture of size ${l.width}x${l.height}`);let x=this.glContext.allocateTexture(v,b,g,this.toTextureData(s,c));return this.config.reuseTextures&&(y.push(x),this.textureLookup.set(x,$)),x}readTexture(s,l,c){return c||(c=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let d=s.shape.reduce((g,v)=>g*v)*c,f=this.glContext.readTexture(s.texture,s.width,s.height,d,this.toEncoderType(l),c);return this.toTensorData(l,f)})}async readTextureAsync(s,l,c){let d=s.tensor.dataId;if(c||(c=1),this.pendingRead.has(d)){let f=this.pendingRead.get(d);return new Promise(g=>f==null?void 0:f.push(g))}return this.profiler.event("backend","TextureManager.readTextureAsync",async()=>{this.pendingRead.set(d,[]);let f=s.shape.reduce(($,y)=>$*y)*c;await this.glContext.createAndWaitForFence();let g=this.glContext.readTexture(s.texture,s.width,s.height,f,this.toEncoderType(l),c),v=this.toTensorData(l,g),b=this.pendingRead.get(d);return this.pendingRead.delete(d),b==null||b.forEach($=>$(v)),v})}readUint8TextureAsFloat(s){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let l=s.shape.reduce((d,f)=>d*f),c=this.glContext.readTexture(s.texture,s.width,s.height,l*4,"byte",4);return new Float32Array(c.buffer,c.byteOffset,l)})}releaseTexture(s,l){let c;if(this.config.reuseTextures&&(c=this.textureLookup.get(s.texture),c)){l&&this.textureLookup.delete(c);let d=this.inUseTextures.get(c);if(d){let f=d.indexOf(s.texture);if(f!==-1){d.splice(f,1);let g=this.idleTextures.get(c);g||(g=[],this.idleTextures.set(c,g)),g.push(s.texture)}}}(!c||l)&&(ce$1.verbose("TextureManager",`Deleting texture of size ${s.width}x${s.height}`),this.glContext.deleteTexture(s.texture))}toTensorData(s,l){switch(s){case"int16":return l instanceof Int16Array?l:Int16Array.from(l);case"int32":return l instanceof Int32Array?l:Int32Array.from(l);case"int8":return l instanceof Int8Array?l:Int8Array.from(l);case"uint16":return l instanceof Uint16Array?l:Uint16Array.from(l);case"uint32":return l instanceof Uint32Array?l:Uint32Array.from(l);case"uint8":case"bool":return l instanceof Uint8Array?l:Uint8Array.from(l);case"float32":return l instanceof Float32Array?l:Float32Array.from(l);case"float64":return l instanceof Float64Array?l:Float64Array.from(l);default:throw new Error(`TensorData type ${s} is not supported`)}}toTextureData(s,l){if(l)return l instanceof Float32Array?l:new Float32Array(l)}toEncoderType(s){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),yo$2,lp$2=L$1(()=>{lt$2(),_s$2(),el$2(),Xc$2(),sp$2(),Vi$1(),up$2(),yo$2=class{constructor(s,l){this.backend=s,this.context=l,this.layoutStrategy=new uo$2(s.glContext.maxTextureSize),this.programManager=new bo$2(this.context.profiler,s.glContext,this.layoutStrategy),this.textureManager=new go$2(s.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:s.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=s.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new Jn$2(this)}onGraphInitialized(s){let l=s.getValues().filter(c=>c.from===-1&&c.tensor).map(c=>c.tensor.dataId);this.initializers=new Set(l)}isInitializer(s){return this.initializers?this.initializers.has(s):!1}addInitializer(s){this.initializers.add(s)}getTextureData(s,l){return l?this.packedTextureDataCache.get(s):this.unpackedTextureDataCache.get(s)}setTextureData(s,l,c=!1){ce$1.verbose("WebGLSessionHandler","Storing Texture data in cache"),c?this.packedTextureDataCache.set(s,l):this.unpackedTextureDataCache.set(s,l)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(s=>this.textureManager.releaseTexture(s,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(s=>this.textureManager.releaseTexture(s,!0)),this.unpackedTextureDataCache=new Map}resolve(s,l,c){let d=vs$2(s,l,Yc$2);return{impl:d.opImpl,context:d.opInit?d.opInit(s,c):s}}}});function jb$1(s){let l=0;for(;l<s.length&&s[l]();++l);return l-1}var hn$1,fp$2=L$1(()=>{Ot$2(),ln$1(),ln$1(),Bt$2(),hn$1=class{constructor(s,l){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=s,this.version=l,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(s,l,c,d){let f=this.gl,g=f.createTexture();f.bindTexture(f.TEXTURE_2D,g),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE),f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);let v=d?c.encode(d,s*l):null;return f.texImage2D(f.TEXTURE_2D,0,c.internalFormat,s,l,0,c.format,c.textureType,v),this.checkError(),g}updateTexture(s,l,c,d,f){let g=this.gl;g.bindTexture(g.TEXTURE_2D,s);let v=d.encode(f,l*c);g.texSubImage2D(g.TEXTURE_2D,0,0,0,l,c,d.format,d.textureType,v),this.checkError()}attachFramebuffer(s,l,c){let d=this.gl;d.bindTexture(d.TEXTURE_2D,s),d.bindFramebuffer(d.FRAMEBUFFER,this.framebuffer),d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,s,0),this.checkError(),d.viewport(0,0,l,c),d.scissor(0,0,l,c)}readTexture(s,l,c,d,f,g){let v=this.gl;g||(g=1),this.frameBufferBound||this.attachFramebuffer(s,l,c);let b=this.getEncoder(f,g),$=b.allocate(l*c);return v.bindTexture(v.TEXTURE_2D,s),v.framebufferTexture2D(v.FRAMEBUFFER,v.COLOR_ATTACHMENT0,v.TEXTURE_2D,s,0),v.readPixels(0,0,l,c,v.RGBA,b.textureType,$),this.checkError(),b.decode($,d)}isFramebufferReady(){return!0}getActiveTexture(){let s=this.gl;return`TEXTURE${s.getParameter(this.gl.ACTIVE_TEXTURE)-s.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(s,l){let c=this.gl;c.vertexAttribPointer(s,3,c.FLOAT,!1,20,0),c.enableVertexAttribArray(s),l!==-1&&(c.vertexAttribPointer(l,2,c.FLOAT,!1,20,12),c.enableVertexAttribArray(l)),this.checkError()}createProgram(s,l){let c=this.gl,d=c.createProgram();return c.attachShader(d,s),c.attachShader(d,l),c.linkProgram(d),d}compileShader(s,l){let c=this.gl,d=c.createShader(l);if(!d)throw new Error(`createShader() returned null with type ${l}`);if(c.shaderSource(d,s),c.compileShader(d),c.getShaderParameter(d,c.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${c.getShaderInfoLog(d)}
Shader source:
${s}`);return d}deleteShader(s){this.gl.deleteShader(s)}bindTextureToUniform(s,l,c){let d=this.gl;d.activeTexture(d.TEXTURE0+l),this.checkError(),d.bindTexture(d.TEXTURE_2D,s),this.checkError(),d.uniform1i(c,l),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Z.debug){let s=this.gl,l=s.getError(),c="";switch(l){case s.NO_ERROR:return;case s.INVALID_ENUM:c="INVALID_ENUM";break;case s.INVALID_VALUE:c="INVALID_VALUE";break;case s.INVALID_OPERATION:c="INVALID_OPERATION";break;case s.INVALID_FRAMEBUFFER_OPERATION:c="INVALID_FRAMEBUFFER_OPERATION";break;case s.OUT_OF_MEMORY:c="OUT_OF_MEMORY";break;case s.CONTEXT_LOST_WEBGL:c="CONTEXT_LOST_WEBGL";break;default:c=`Unknown WebGL Error: ${l.toString(16)}`}throw new Error(c)}}deleteTexture(s){this.gl.deleteTexture(s)}deleteProgram(s){this.gl.deleteProgram(s)}getEncoder(s,l,c=0){if(this.version===2)return new Xn$2(this.gl,l);switch(s){case"float":return c===1||this.isRenderFloat32Supported?new un$1(this.gl,l):new un$1(this.gl,l,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new Kn$1(this.gl,l);default:throw new Error(`Invalid dataType: ${s}`)}}clearActiveTextures(){let s=this.gl;for(let l=0;l<this.maxTextureImageUnits;++l)s.activeTexture(s.TEXTURE0+l),s.bindTexture(s.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,null),s.deleteFramebuffer(this.framebuffer),s.bindBuffer(s.ARRAY_BUFFER,null),s.deleteBuffer(this.vertexbuffer),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,null),s.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let s=this.gl,l=s.createBuffer();if(!l)throw new Error("createBuffer() returned null");let c=this.createDefaultGeometry();return s.bindBuffer(s.ARRAY_BUFFER,l),s.bufferData(s.ARRAY_BUFFER,c,s.STATIC_DRAW),this.checkError(),l}createFramebuffer(){let s=this.gl.createFramebuffer();if(!s)throw new Error("createFramebuffer returned null");return s}queryVitalParameters(){let s=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=s.getParameter(s.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let s=this.gl,l=s.createTexture();s.bindTexture(s.TEXTURE_2D,l);let c=this.version===2?s.RGBA32F:s.RGBA;s.texImage2D(s.TEXTURE_2D,0,c,1,1,0,s.RGBA,s.FLOAT,null);let d=s.createFramebuffer();s.bindFramebuffer(s.FRAMEBUFFER,d),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,l,0);let f=s.checkFramebufferStatus(s.FRAMEBUFFER)===s.FRAMEBUFFER_COMPLETE;return s.bindTexture(s.TEXTURE_2D,null),s.bindFramebuffer(s.FRAMEBUFFER,null),s.deleteTexture(l),s.deleteFramebuffer(d),f}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let s=this.gl,l,c,d,f,g;try{l=s.createTexture(),c=s.createFramebuffer(),s.bindTexture(s.TEXTURE_2D,l);let v=this.version===2?s.RGBA32F:s.RGBA;return s.texImage2D(s.TEXTURE_2D,0,v,1,1,0,s.RGBA,s.FLOAT,null),s.bindFramebuffer(s.FRAMEBUFFER,c),s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,l,0),s.enable(s.BLEND),d=s.createShader(s.VERTEX_SHADER),!d||(s.shaderSource(d,"void main(){}"),s.compileShader(d),f=s.createShader(s.FRAGMENT_SHADER),!f)||(s.shaderSource(f,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),s.compileShader(f),g=s.createProgram(),!g)?!1:(s.attachShader(g,d),s.attachShader(g,f),s.linkProgram(g),s.useProgram(g),s.drawArrays(s.POINTS,0,1),s.getError()===s.NO_ERROR)}finally{s.disable(s.BLEND),g&&s.deleteProgram(g),d&&s.deleteShader(d),f&&s.deleteShader(f),c&&(s.bindFramebuffer(s.FRAMEBUFFER,null),s.deleteFramebuffer(c)),l&&(s.bindTexture(s.TEXTURE_2D,null),s.deleteTexture(l))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let s=this.gl,l=this.disjointTimerQueryWebgl2Extension,c=s.createQuery();return s.beginQuery(l.TIME_ELAPSED_EXT,c),c}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let s=this.gl,l=this.disjointTimerQueryWebgl2Extension;s.endQuery(l.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(s){let l=!1,c=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let d=this.gl,f=this.disjointTimerQueryWebgl2Extension;l=d.getQueryParameter(s,d.QUERY_RESULT_AVAILABLE),c=d.getParameter(f.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return l&&!c}getTimerResult(s){let l=0;if(this.version===2){let c=this.gl;l=c.getQueryParameter(s,c.QUERY_RESULT),c.deleteQuery(s)}else throw new Error("WebGL1 profiling currently not supported");return l/1e6}async waitForQueryAndGetTime(s){return await mi$2(()=>this.isTimerResultAvailable(s)),this.getTimerResult(s)}async createAndWaitForFence(){let s=this.createFence(this.gl);return this.pollFence(s)}createFence(s){let l,c=s,d=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);return s.flush(),d===null?l=()=>!0:l=()=>{let f=c.clientWaitSync(d,0,0);return f===c.ALREADY_SIGNALED||f===c.CONDITION_SATISFIED},{query:d,isFencePassed:l}}async pollFence(s){return new Promise(l=>{this.addItemToPoll(()=>s.isFencePassed(),()=>l())})}pollItems(){let s=jb$1(this.itemsToPoll.map(l=>l.isDoneFn));for(let l=0;l<=s;++l){let{resolveFn:c}=this.itemsToPoll[l];c()}this.itemsToPoll=this.itemsToPoll.slice(s+1)}async addItemToPoll(s,l){this.itemsToPoll.push({isDoneFn:s,resolveFn:l}),!(this.itemsToPoll.length>1)&&await mi$2(()=>(this.pollItems(),this.itemsToPoll.length===0))}}});function Hi$2(s){let l;if((!s||s==="webgl2")&&"webgl2"in Gr$1?l=Gr$1.webgl2:(!s||s==="webgl")&&"webgl"in Gr$1&&(l=Gr$1.webgl),!l)try{let d=Xb$1();l=cp$2(d,s)}catch{let d=Yb$1();l=cp$2(d,s)}s=s||l.version===1?"webgl":"webgl2";let c=l.gl;return Gr$1[s]=l,c.isContextLost()?(delete Gr$1[s],Hi$2(s)):(c.disable(c.DEPTH_TEST),c.disable(c.STENCIL_TEST),c.disable(c.BLEND),c.disable(c.DITHER),c.disable(c.POLYGON_OFFSET_FILL),c.disable(c.SAMPLE_COVERAGE),c.enable(c.SCISSOR_TEST),c.enable(c.CULL_FACE),c.cullFace(c.BACK),l)}function cp$2(s,l){let c={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},d,f=c;if((!l||l==="webgl2")&&(d=s.getContext("webgl2",f),d))try{return new hn$1(d,2)}catch(g){ce$1.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${g}`)}if((!l||l==="webgl")&&(d=s.getContext("webgl",f)||s.getContext("experimental-webgl",f),d))try{return new hn$1(d,1)}catch(g){ce$1.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${g}`)}throw new Error("WebGL is not supported")}function Yb$1(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let s=document.createElement("canvas");return s.width=1,s.height=1,s}function Xb$1(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var Gr$1,pp$2=L$1(()=>{lt$2(),fp$2(),Gr$1={}}),To$2,dp$2=L$1(()=>{Ot$2(),lt$2(),lp$2(),pp$2(),To$2=class{get contextId(){return Z.webgl.contextId}set contextId(s){Z.webgl.contextId=s}get matmulMaxBatchSize(){return Z.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(s){Z.webgl.matmulMaxBatchSize=s}get textureCacheMode(){return Z.webgl.textureCacheMode}set textureCacheMode(s){Z.webgl.textureCacheMode=s}get pack(){return Z.webgl.pack}set pack(s){Z.webgl.pack=s}get async(){return Z.webgl.async}set async(s){Z.webgl.async=s}initialize(){try{return this.glContext=Hi$2(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),ce$1.setWithEnv(Z),Z.webgl.context||Object.defineProperty(Z.webgl,"context",{value:this.glContext.gl}),ce$1.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(s){return ce$1.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${s}`),!1}}createSessionHandler(s){return new yo$2(this,s)}dispose(){this.glContext.dispose()}}});async function qi$2(s){if(s){let l=typeof s=="string"?[s]:s;for(let c of l){let d=hp$2.get(c);if(d)return d;let f=await Jb$1(c);if(f)return f}}else return qi$2(["webgl"]);throw new Error("no available backend to use")}async function Jb$1(s){let l=Kb$1;if(typeof l[s]<"u"&&Zb$1(l[s])){let c=l[s],d=c.initialize();if(typeof d=="object"&&"then"in d&&(d=await d),d)return hp$2.set(s,c),c}}function Zb$1(s){let l=s;return"initialize"in l&&typeof l.initialize=="function"&&"createSessionHandler"in l&&typeof l.createSessionHandler=="function"&&"dispose"in l&&typeof l.dispose=="function"}var hp$2,Kb$1,mp$2=L$1(()=>{dp$2(),hp$2=new Map,Kb$1={webgl:new To$2}}),ji$2,xo$2,bp$1=L$1(()=>{lt$2(),ji$2=class{constructor(s,l){this.op=s,this.node=l}},xo$2=class{constructor(s,l,c){this.graph=s,this.profiler=c,this.initialize(l)}initialize(s){this.profiler.event("session","ExecutionPlan.initialize",()=>{let l=this.graph.getNodes();if(l.length!==s.length)throw new Error("The size of nodes and OPs do not match.");this._ops=s.map((c,d)=>new ji$2(c,l[d])),this.reset(),this._starter=[],this._ops.forEach((c,d)=>{let f=!0;for(let g of c.node.inputs)if(!this._values[g]&&this.graph.getInputIndices().indexOf(g)===-1){f=!1;break}f&&this._starter.push(d)})})}reset(){this._values=this.graph.getValues().map(s=>s.tensor)}async execute(s,l){return this.profiler.event("session","ExecutionPlan.execute",async()=>{this.reset();let c=s.createInferenceHandler(),d=this.graph.getInputIndices();if(l.length!==d.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${l.length} expected: ${d.length}`);l.forEach((y,x)=>{let C=d[x];this._values[C]=y});let f=this._starter.slice(0),g=this.graph.getValues(),v=this.graph.getNodes(),b=0;for(;b<f.length;){let y=f[b++],x=this._ops[y],C=x.node.inputs.map(q=>this._values[q]);if(C.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${x.node}`);let E=C;ce$1.verbose("ExecPlan",`Runing op:${x.node.name} (${E.map((q,Y)=>`'${x.node.inputs[Y]}': ${q.type}[${q.dims.join(",")}]`).join(", ")})`);let N=await this.profiler.event("node",x.node.name,async()=>x.op.impl(c,E,x.op.context));if(N.length!==x.node.outputs.length)throw new Error("the size of output does not match model definition.");N.forEach((q,Y)=>{let re=x.node.outputs[Y];if(this._values[re])throw new Error(`output [${re}] already has value: op:${x.node.name}`);this._values[re]=q});let W=new Set;N.forEach((q,Y)=>{let re=x.node.outputs[Y];for(let se of g[re].to){let de=v[se],he=!0;for(let ge of de.inputs)if(!this._values[ge]){he=!1;break}he&&W.add(se)}}),f.push(...W)}let $=[];for(let y=0;y<this.graph.getOutputIndices().length;y++){let x=this.graph.getOutputIndices()[y],C=this._values[x];if(C===void 0)throw new Error(`required output [${x}] does not have value`);x===0?await C.getData():C.data,$.push(C)}return ce$1.verbose("ExecPlan","disposing of inferenceHandler"),c.dispose(),$})}}}),oe,bt$1,mn$1,gp$2=L$1(()=>{tn$2(),oe=Ar$1(Cr$1()),yr(),fe$1(),bt$1=V$1.experimental.fbs,mn$1=class P$e{constructor(l){if(this._attributes=new Map,l!=null){for(let c of l)c instanceof oe.onnx.AttributeProto?this._attributes.set(c.name,[P$e.getValue(c),P$e.getType(c)]):c instanceof bt$1.Attribute&&this._attributes.set(c.name(),[P$e.getValue(c),P$e.getType(c)]);if(this._attributes.size<l.length)throw new Error("duplicated attribute names")}}set(l,c,d){this._attributes.set(l,[d,c])}delete(l){this._attributes.delete(l)}getFloat(l,c){return this.get(l,"float",c)}getInt(l,c){return this.get(l,"int",c)}getString(l,c){return this.get(l,"string",c)}getTensor(l,c){return this.get(l,"tensor",c)}getFloats(l,c){return this.get(l,"floats",c)}getInts(l,c){return this.get(l,"ints",c)}getStrings(l,c){return this.get(l,"strings",c)}getTensors(l,c){return this.get(l,"tensors",c)}get(l,c,d){let f=this._attributes.get(l);if(f===void 0){if(d!==void 0)return d;throw new Error(`required attribute not found: ${l}`)}if(f[1]!==c)throw new Error(`type mismatch: expected ${c} but got ${f[1]}`);return f[0]}static getType(l){let c=l instanceof oe.onnx.AttributeProto?l.type:l.type();switch(c){case oe.onnx.AttributeProto.AttributeType.FLOAT:return"float";case oe.onnx.AttributeProto.AttributeType.INT:return"int";case oe.onnx.AttributeProto.AttributeType.STRING:return"string";case oe.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case oe.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case oe.onnx.AttributeProto.AttributeType.INTS:return"ints";case oe.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case oe.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${oe.onnx.AttributeProto.AttributeType[c]}`)}}static getValue(l){let c=l instanceof oe.onnx.AttributeProto?l.type:l.type();if(c===oe.onnx.AttributeProto.AttributeType.GRAPH||c===oe.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let d=this.getValueNoCheck(l);if(c===oe.onnx.AttributeProto.AttributeType.INT&&it$2.isLong(d))return it$2.longToNumber(d);if(c===oe.onnx.AttributeProto.AttributeType.INTS){let f=d,g=new Array(f.length);for(let v=0;v<f.length;v++){let b=f[v];g[v]=it$2.longToNumber(b)}return g}if(c===oe.onnx.AttributeProto.AttributeType.TENSOR)return l instanceof oe.onnx.AttributeProto?$e$2.fromProto(d):$e$2.fromOrtTensor(d);if(c===oe.onnx.AttributeProto.AttributeType.TENSORS){if(l instanceof oe.onnx.AttributeProto)return d.map(f=>$e$2.fromProto(f));if(l instanceof bt$1.Attribute)return d.map(f=>$e$2.fromOrtTensor(f))}return c===oe.onnx.AttributeProto.AttributeType.STRING&&l instanceof oe.onnx.AttributeProto?sn$2(d):c===oe.onnx.AttributeProto.AttributeType.STRINGS&&l instanceof oe.onnx.AttributeProto?d.map(sn$2):d}static getValueNoCheck(l){return l instanceof oe.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(l):this.getValueNoCheckFromOrtFormat(l)}static getValueNoCheckFromOnnxFormat(l){switch(l.type){case oe.onnx.AttributeProto.AttributeType.FLOAT:return l.f;case oe.onnx.AttributeProto.AttributeType.INT:return l.i;case oe.onnx.AttributeProto.AttributeType.STRING:return l.s;case oe.onnx.AttributeProto.AttributeType.TENSOR:return l.t;case oe.onnx.AttributeProto.AttributeType.GRAPH:return l.g;case oe.onnx.AttributeProto.AttributeType.FLOATS:return l.floats;case oe.onnx.AttributeProto.AttributeType.INTS:return l.ints;case oe.onnx.AttributeProto.AttributeType.STRINGS:return l.strings;case oe.onnx.AttributeProto.AttributeType.TENSORS:return l.tensors;case oe.onnx.AttributeProto.AttributeType.GRAPHS:return l.graphs;default:throw new Error(`unsupported attribute type: ${oe.onnx.AttributeProto.AttributeType[l.type]}`)}}static getValueNoCheckFromOrtFormat(l){switch(l.type()){case bt$1.AttributeType.FLOAT:return l.f();case bt$1.AttributeType.INT:return l.i();case bt$1.AttributeType.STRING:return l.s();case bt$1.AttributeType.TENSOR:return l.t();case bt$1.AttributeType.GRAPH:return l.g();case bt$1.AttributeType.FLOATS:return l.floatsArray();case bt$1.AttributeType.INTS:{let c=[];for(let d=0;d<l.intsLength();d++)c.push(l.ints(d));return c}case bt$1.AttributeType.STRINGS:{let c=[];for(let d=0;d<l.stringsLength();d++)c.push(l.strings(d));return c}case bt$1.AttributeType.TENSORS:{let c=[];for(let d=0;d<l.tensorsLength();d++)c.push(l.tensors(d));return c}default:throw new Error(`unsupported attribute type: ${bt$1.AttributeType[l.type()]}`)}}}}),Xi$2,wo$2,Ki$2,Mt$2,vo$2,Yi$2,yp$2=L$1(()=>{gp$2(),tn$2(),Xi$2=Ar$1(Cr$1()),yr(),fe$1(),wo$2=V$1.experimental.fbs,Ki$2={from:(s,l)=>new Yi$2(s,l)},Mt$2=class{constructor(s){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,s&&(this.type=We$2.tensorValueTypeFromProto(s.type.tensorType))}get from(){return this._from}get to(){return this._to}},vo$2=class{constructor(s,l){s instanceof Xi$2.onnx.NodeProto?(this.name=s.name,this.opType=s.opType,this.attributes=new mn$1(s.attribute)):s instanceof wo$2.Node&&(this.name=l??s.name(),this.opType=s.opType(),this.attributes=new mn$1(We$2.tensorAttributesFromORTFormat(s))),this.inputs=[],this.outputs=[],this.executeNode=!0}},Yi$2=class{constructor(s,l){if(!s)throw new TypeError("graph is empty");this.buildGraph(s),this.transformGraph(l),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(s){if(s instanceof Xi$2.onnx.GraphProto)this.buildGraphFromOnnxFormat(s);else if(s instanceof wo$2.Graph)this.buildGraphFromOrtFormat(s);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(s){let l=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let c=new Map;if(!s.input)throw new Error("missing information in graph: input");let d=[];for(let f of s.input){if(l.has(f.name))throw new Error(`duplicated input name: ${f.name}`);let g=this._allData.push(new Mt$2(f))-1;l.set(f.name,g),d.push(f.name)}if(!s.initializer)throw new Error("missing information in graph: initializer");for(let f of s.initializer){let g=l.get(f.name);if(g===void 0){let v=new Mt$2;v.type={shape:{dims:We$2.tensorDimsFromProto(f.dims)},tensorType:We$2.tensorDataTypeFromProto(f.dataType)},g=this._allData.push(v)-1,l.set(f.name,g)}this._allData[g]._from=-1,this._allData[g].tensor=$e$2.fromProto(f)}for(let f=0;f<this._allData.length;f++)this._allData[f].tensor||(this._allInputIndices.push(f),this._allInputNames.push(d[f]));if(!s.output)throw new Error("missing information in graph: output");for(let f of s.output){if(l.has(f.name))throw new Error(`duplicated output name: ${f.name}`);let g=this._allData.push(new Mt$2(f))-1;l.set(f.name,g),this._allOutputIndices.push(g),this._allOutputNames.push(f.name)}if(!s.node)throw new Error("missing information in graph: node");for(let f of s.node){if(!f.name)for(let v=0;;v++){let b=`unnamed_${f.opType}_${v}`;if(!c.has(b)){f.name=b;break}}if(c.has(f.name))throw new Error(`duplicated node name: ${f.name}`);let g=this._nodes.push(new vo$2(f))-1;c.set(f.name,g)}for(let f=0;f<this._nodes.length;f++){let g=this._nodes[f],v=s.node[f];if(!v.output)throw new Error(`missing output for node: ${v.name}`);for(let b of v.output){let $=l.get(b);if(typeof $>"u"&&($=this._allData.push(new Mt$2)-1,l.set(b,$)),g.outputs.push($),this._allData[$]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${$}`);if(this._allData[$]._from=f,v.opType==="Constant"){if(!v.attribute||v.attribute.length!==1||!v.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!v.output||v.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");g.outputs.pop(),g.executeNode=!1,this._allData[$]._from=-1,this._allData[$].tensor=$e$2.fromProto(v.attribute[0].t)}}}for(let f=0;f<this._nodes.length;f++){let g=this._nodes[f],v=s.node[f];if(!v.input)throw new Error(`missing input for node: ${v.name}`);for(let b of v.input){let $=l.get(b);if(typeof $>"u"){if(b===""&&(v.input.length===3||v.input.length===4)&&v.opType==="Resize")continue;throw new Error(`unrecognized input '${b}' for node: ${v.name}`)}g.inputs.push($),this._allData[$]._to.push(f)}}return!0}buildGraphFromOrtFormat(s){var f,g,v;let l=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let c=new Map,d=[];for(let b=0;b<s.inputsLength();b++){let $=s.inputs(b);if(l.has($))throw new Error(`duplicated input name: ${$}`);for(let y=0;y<s.nodeArgsLength();y++)if(((f=s.nodeArgs(y))==null?void 0:f.name())===$){let x=new Mt$2;if(((v=(g=s.nodeArgs(y))==null?void 0:g.type())==null?void 0:v.valueType())!==wo$2.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let C=s.nodeArgs(y).type().value(new wo$2.TensorTypeAndShape),E=We$2.tensorDataTypeFromProto(C.elemType()),N=C.shape(),W=[];for(let Y=0;Y<N.dimLength();Y++)W.push(it$2.longToNumber(N.dim(Y).value().dimValue()));x.type={shape:{dims:W},tensorType:E};let q=this._allData.push(x)-1;l.set($,q),d.push($)}}for(let b=0;b<s.initializersLength();b++){let $=s.initializers(b),y=l.get($.name());if(y===void 0){let x=new Mt$2,C=We$2.tensorDimsFromORTFormat($),E=We$2.tensorDataTypeFromProto($.dataType());x.type={shape:{dims:C},tensorType:E},y=this._allData.push(x)-1,l.set($.name(),y)}this._allData[y]._from=-1,this._allData[y].tensor=$e$2.fromOrtTensor($)}for(let b=0;b<this._allData.length;b++)this._allData[b].tensor||(this._allInputIndices.push(b),this._allInputNames.push(d[b]));for(let b=0;b<s.outputsLength();b++){let $=s.outputs(b);if(l.has($))throw new Error(`duplicated output name: ${$}`);let y=this._allData.push(new Mt$2)-1;l.set($,y),this._allOutputIndices.push(y),this._allOutputNames.push($)}if(!s.nodes)throw new Error("missing information in graph: node");for(let b=0;b<s.nodesLength();b++){let $=s.nodes(b),y=$.name();if(!y)for(let C=0;y=`unnamed_${$.opType()}_${C}`,!!c.has(y);C++);if(c.has(y))throw new Error(`duplicated node name: ${y}`);let x=this._nodes.push(new vo$2($,y))-1;c.set(y,x)}for(let b=0;b<this._nodes.length;b++){let $=this._nodes[b],y=s.nodes(b);if(y==null)throw new Error(`No node exists at index ${b}`);if((y==null?void 0:y.outputsLength())===0)throw new Error(`missing output for node: ${y.name}`);for(let x=0;x<(y==null?void 0:y.outputsLength());x++){let C=y==null?void 0:y.outputs(x),E=l.get(C);if(typeof E>"u"&&(E=this._allData.push(new Mt$2)-1,l.set(C,E)),$.outputs.push(E),this._allData[E]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${E}`);if(this._allData[E]._from=b,y.opType()==="Constant"){if(y.attributesLength()!==1||!y.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(y.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");$.outputs.pop(),$.executeNode=!1,this._allData[E]._from=-1,this._allData[E].tensor=$e$2.fromOrtTensor(y.attributes(0).t())}}}for(let b=0;b<this._nodes.length;b++){let $=this._nodes[b],y=s.nodes(b);if(y.inputsLength()===0)throw new Error(`missing input for node: ${y.name}`);for(let x=0;x<y.inputsLength();x++){let C=y.inputs(x),E=l.get(C);if(typeof E>"u")throw new Error(`unrecognized input '${C}' for node: ${y.name()}`);$.inputs.push(E),this._allData[E]._to.push(b)}}}checkIsAcyclic(){let s=new Set;this._allInputIndices.forEach(d=>{this._allData[d]._to.forEach(f=>{s.add(f)})});let l=Array.from(s),c=new Array(this._nodes.length).fill("white");for(;l.length>0;){let d=l.pop();c[d]==="gray"?c[d]="black":(l.push(d),c[d]="gray",this._nodes[d].outputs.forEach(f=>{let g=this._allData[f];if(typeof g.tensor<"u")throw new Error("node outputs should not be initialized");if(g._from!==d)throw new Error("from property of the Value object doesn't match index of Node being processed");g._to.forEach(v=>{if(c[v]==="gray")throw new Error("model graph is cyclic");c[v]==="white"&&l.push(v)})}))}}transformGraph(s){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),s&&s.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let s=0,l=new Array(this._nodes.length,0),c=0;for(let d=0;d<this._nodes.length;d++)l[d]=c,this._nodes[d].executeNode?(c!==d&&(this._nodes[c]=this._nodes[d]),c++):this._nodes[d].outputs.forEach(f=>{this._allData[f]._from=-2});this._nodes.splice(c,this._nodes.length-c);for(let d=0;d<this._allData.length;d++){let f=this._allData[d];f._from!==void 0&&f._from!==-1&&f._from!==-2&&(f._from=l[f._from]);for(let g=0;g<f._to.length;g++)if(f._to[g]>=0)f._to[g]=l[f._to[g]];else throw new Error("Trying to update a removed node")}s=0;for(let d=0;d<this._allData.length;d++){if(this._allData[d].from===-2&&this._allOutputIndices.indexOf(d+s)===-1){s++,this._allData.splice(d,1),d--;continue}if(s>0){let f=-1;this._allData[d].from!==void 0&&this._allData[d].from!==-1?(f=this._nodes[this._allData[d].from].outputs.indexOf(d+s),f!==-1&&(this._nodes[this._allData[d].from].outputs[f]=d)):(f=this._allInputIndices.indexOf(d+s),f!==-1&&(this._allInputIndices[f]=d)),this._allData[d].to.forEach(g=>{f=this._nodes[g].inputs.indexOf(d+s),f!==-1&&(this._nodes[g].inputs[f]=d)}),this._allData[d].to.length===0&&(f=this._allOutputIndices.indexOf(d+s),f!==-1&&(this._allOutputIndices[f]=d))}}}deleteNode(s){let l=this._nodes[s];if(l.outputs.length>1){for(let v=1;v<l.outputs.length;v++)if(this._allData[l.outputs[v]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}l.executeNode=!1;let c=l.inputs[0],d=l.outputs[0],f=this._allData[d].to;for(let v=0;v<l.inputs.length;v++){let b=this._allData[l.inputs[v]].to.indexOf(s);if(b===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[l.inputs[v]].to.splice(b,1)}this._allData[d]._to=[];let g=this._allOutputIndices.indexOf(d);if(g!==-1&&(this._allOutputIndices[g]=c),f&&f.length>0)for(let v of f){let b=this._nodes[v].inputs.indexOf(d);if(b===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[v].inputs[b]=c,this._allData[c].to.push(v)}}removeAllDropoutNodes(){let s=0;for(let l of this._nodes){if(l.opType==="Dropout"){if(l.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(l.outputs.length!==1&&l.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(l.outputs.length===2&&this._allData[l.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(s)}s++}}removeAllIdentityNodes(){let s=0;for(let l of this._nodes)l.opType==="Identity"&&this.deleteNode(s),s++}isActivation(s){switch(s.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let s of this._nodes)if(s.opType==="Conv"){let l=this._allData[s.outputs[0]]._to;if(l.length===1&&this.isActivation(this._nodes[l[0]])){let c=this._nodes[l[0]];if(c.opType==="Clip")if(c.inputs.length===1)try{s.attributes.set("activation_params","floats",[c.attributes.getFloat("min"),c.attributes.getFloat("max")])}catch{s.attributes.set("activation_params","floats",[br,gr$1])}else if(c.inputs.length>=3&&this._allData[c.inputs[1]].tensor!==void 0&&this._allData[c.inputs[2]].tensor!==void 0)s.attributes.set("activation_params","floats",[this._allData[c.inputs[1]].tensor.floatData[0],this._allData[c.inputs[2]].tensor.floatData[0]]);else continue;s.attributes.set("activation","string",c.opType),this.deleteNode(l[0])}}}}}),Tp$2,Qb$1,_o$2,xp$2=L$1(()=>{zn$2(),yp$2(),tn$2(),Tp$2=Ar$1(Cr$1()),fe$1(),Qb$1=V$1.experimental.fbs,_o$2=class{constructor(){}load(s,l,c){let d;if(!c)try{this.loadFromOnnxFormat(s,l);return}catch(f){if(c!==void 0)throw f;d=f}try{this.loadFromOrtFormat(s,l)}catch(f){throw c!==void 0?f:new Error(`Failed to load model as ONNX format: ${d}
as ORT format: ${f}`)}}loadFromOnnxFormat(s,l){let c=Tp$2.onnx.ModelProto.decode(s);if(it$2.longToNumber(c.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=c.opsetImport.map(d=>({domain:d.domain,version:it$2.longToNumber(d.version)})),this._graph=Ki$2.from(c.graph,l)}loadFromOrtFormat(s,l){let c=new _.ByteBuffer(s),d=Qb$1.InferenceSession.getRootAsInferenceSession(c).model();if(it$2.longToNumber(d.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let f=0;f<d.opsetImportLength();f++){let g=d.opsetImport(f);this._opsets.push({domain:g==null?void 0:g.domain(),version:it$2.longToNumber(g.version())})}this._graph=Ki$2.from(d.graph(),l)}get graph(){return this._graph}get opsets(){return this._opsets}}}),Oo$1,wp$2=L$1(()=>{mp$2(),bp$1(),lt$2(),xp$2(),Oo$1=class{constructor(s={}){this._initialized=!1,this.backendHint=s.backendHint,this.profiler=Gn$1.create(s.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}async loadModel(s,l,c){await this.profiler.event("session","Session.loadModel",async()=>{let d=await qi$2(this.backendHint);if(this.sessionHandler=d.createSessionHandler(this.context),this._model=new _o$2,typeof s=="string"){let f=s.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let g=await(void 0)(s);this.initialize(g,f)}else{let g=await(await fetch(s)).arrayBuffer();this.initialize(new Uint8Array(g),f)}}else if(ArrayBuffer.isView(s))this.initialize(s);else{let f=new Uint8Array(s,l||0,c||s.byteLength);this.initialize(f)}})}initialize(s,l){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let c=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(s,c,l),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new xo$2(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}async run(s){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",async()=>{let l=this.normalizeAndValidateInputs(s),c=await this._executionPlan.execute(this.sessionHandler,l);return this.createOutput(c)})}normalizeAndValidateInputs(s){let l=this._model.graph.getInputNames();if(Array.isArray(s)){if(s.length!==l.length)throw new Error(`incorrect input array length: expected ${l.length} but got ${s.length}`)}else{if(s.size!==l.length)throw new Error(`incorrect input map size: expected ${l.length} but got ${s.size}`);let c=new Array(s.size),d=0;for(let f=0;f<l.length;++f){let g=s.get(l[f]);if(!g)throw new Error(`missing input tensor for: '${name}'`);c[d++]=g}s=c}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let c=this._model.graph.getInputIndices(),d=this._model.graph.getValues(),f=new Array(c.length);for(let g=0;g<c.length;++g){let v=d[c[g]];f[g]=v.type.shape.dims,this.context.graphInputTypes.push(v.type.tensorType),this.context.graphInputDims.push(s[g].dims)}this.validateInputTensorDims(f,s,!0)}else this.validateInputTensorDims(this.context.graphInputDims,s,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,s),s}validateInputTensorTypes(s,l){for(let c=0;c<l.length;c++){let d=s[c],f=l[c].type;if(d!==f)throw new Error(`input tensor[${c}] check failed: expected type '${d}' but got ${f}`)}}validateInputTensorDims(s,l,c){for(let d=0;d<l.length;d++){let f=s[d],g=l[d].dims;if(!this.compareTensorDims(f,g,c))throw new Error(`input tensor[${d}] check failed: expected shape '[${f.join(",")}]' but got [${g.join(",")}]`)}}compareTensorDims(s,l,c){if(s.length!==l.length)return!1;for(let d=0;d<s.length;++d)if(s[d]!==l[d]&&(!c||s[d]!==0))return!1;return!0}createOutput(s){let l=this._model.graph.getOutputNames();if(s.length!==l.length)throw new Error("expected number of outputs do not match number of generated outputs");let c=new Map;for(let d=0;d<l.length;++d)c.set(l[d],s[d]);return c}initializeOps(s){let l=s.getNodes();this._ops=new Array(l.length);for(let c=0;c<l.length;c++)this._ops[c]=this.sessionHandler.resolve(l[c],this._model.opsets,s)}}}),Io$2,vp$2=L$1(()=>{Ot$2(),yr(),Io$2=class{constructor(s){this.session=s,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}async dispose(){}async run(s,l,c){let d=new Map;for(let v in s)if(Object.hasOwnProperty.call(s,v)){let b=s[v];d.set(v,new $e$2(b.dims,b.type,void 0,void 0,b.data))}let f=await this.session.run(d),g={};return f.forEach((v,b)=>{g[b]=new Me(v.type,v.data,v.dims)}),g}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),_p$2={};Sr$1(_p$2,{onnxjsBackend:()=>tg$1});var Ji$2,tg$1,Op$2=L$1(()=>{wp$2(),vp$2(),Ji$2=class{async init(){}async createInferenceSessionHandler(s,l){let c=new Oo$1(l);return typeof s=="string"?await c.loadModel(s):await c.loadModel(s),new Io$2(c)}},tg$1=new Ji$2}),Zi$2={};Sr$1(Zi$2,{createReadStream:()=>Ip$1,readFile:()=>rg$1,readFileSync:()=>ng$1});var rg$1,ng$1,Ip$1,Qi$2=L$1(()=>{rg$1=void 0,ng$1=void 0,Ip$1=void 0}),ea$1={};Sr$1(ea$1,{join:()=>og$1});var og$1,ta$2=L$1(()=>{og$1=void 0}),Pp$1=me((s,l)=>{var c=(()=>{var f;var d=typeof document<"u"?(f=document.currentScript)==null?void 0:f.src:void 0;return typeof __filename<"u"&&(d||(d=__filename)),function(g={}){var v=g,b,$,y=new Promise((sS,TS)=>{b=sS,$=TS}),x=Object.assign({},v),C="./this.program",E=typeof window=="object",N=typeof importScripts=="function",W=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",q="",Y,re,se;if(W){var de=(Qi$2(),ar$1(Zi$2)),he=(ta$2(),ar$1(ea$1));q=N?he.dirname(q)+"/":__dirname+"/",Y=(sS,TS)=>(sS=G$(sS)?new URL(sS):he.normalize(sS),de.readFileSync(sS,TS?void 0:"utf8")),se=sS=>(sS=Y(sS,!0),sS.buffer||(sS=new Uint8Array(sS)),sS),re=(sS,TS,AS,jS=!0)=>{sS=G$(sS)?new URL(sS):he.normalize(sS),de.readFile(sS,jS?void 0:"utf8",(KS,Bye)=>{KS?AS(KS):TS(jS?Bye.buffer:Bye)})},!v.thisProgram&&1<process.argv.length&&(C=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2)}else(E||N)&&(N?q=self.location.href:typeof document<"u"&&document.currentScript&&(q=document.currentScript.src),d&&(q=d),q.startsWith("blob:")?q="":q=q.substr(0,q.replace(/[?#].*/,"").lastIndexOf("/")+1),Y=sS=>{var TS=new XMLHttpRequest;return TS.open("GET",sS,!1),TS.send(null),TS.responseText},N&&(se=sS=>{var TS=new XMLHttpRequest;return TS.open("GET",sS,!1),TS.responseType="arraybuffer",TS.send(null),new Uint8Array(TS.response)}),re=(sS,TS,AS)=>{var jS=new XMLHttpRequest;jS.open("GET",sS,!0),jS.responseType="arraybuffer",jS.onload=()=>{jS.status==200||jS.status==0&&jS.response?TS(jS.response):AS()},jS.onerror=AS,jS.send(null)});var ge=console.log.bind(console),Se=console.error.bind(console);Object.assign(v,x),x=null;var Ae,Re=!1,Be,Ke,Lr,_y,by;function yy(){var sS=Ae.buffer;v.HEAP8=Be=new Int8Array(sS),v.HEAP16=new Int16Array(sS),v.HEAPU8=Ke=new Uint8Array(sS),v.HEAPU16=new Uint16Array(sS),v.HEAP32=Lr=new Int32Array(sS),v.HEAPU32=_y=new Uint32Array(sS),v.HEAPF32=new Float32Array(sS),v.HEAPF64=by=new Float64Array(sS)}var my=[],$t=[],K$=[],Y$=0,W$=null;function U$(sS){throw sS="Aborted("+sS+")",Se(sS),Re=!0,sS=new WebAssembly.RuntimeError(sS+". Build with -sASSERTIONS for more info."),$(sS),sS}var hy=sS=>sS.startsWith("data:application/octet-stream;base64,"),G$=sS=>sS.startsWith("file://"),ky;if(ky="ort-wasm.wasm",!hy(ky)){var $y=ky;ky=v.locateFile?v.locateFile($y,q):q+$y}function rS(sS){if(se)return se(sS);throw"both async and sync fetching of the wasm failed"}function lS(sS){if(E||N){if(typeof fetch=="function"&&!G$(sS))return fetch(sS,{credentials:"same-origin"}).then(TS=>{if(!TS.ok)throw`failed to load wasm binary file at '${sS}'`;return TS.arrayBuffer()}).catch(()=>rS(sS));if(re)return new Promise((TS,AS)=>{re(sS,jS=>TS(new Uint8Array(jS)),AS)})}return Promise.resolve().then(()=>rS(sS))}function bS(sS,TS,AS){return lS(sS).then(jS=>WebAssembly.instantiate(jS,TS)).then(AS,jS=>{Se(`failed to asynchronously prepare wasm: ${jS}`),U$(jS)})}function IS(sS,TS){var AS=ky;return typeof WebAssembly.instantiateStreaming!="function"||hy(AS)||G$(AS)||W||typeof fetch!="function"?bS(AS,sS,TS):fetch(AS,{credentials:"same-origin"}).then(jS=>WebAssembly.instantiateStreaming(jS,sS).then(TS,function(KS){return Se(`wasm streaming compile failed: ${KS}`),Se("falling back to ArrayBuffer instantiation"),bS(AS,sS,TS)}))}var BS,MS={798088:(sS,TS,AS,jS)=>{if(typeof v>"u"||!v.ya)return 1;if(sS=dS(sS>>>0),sS.startsWith("./")&&(sS=sS.substring(2)),sS=v.ya.get(sS),!sS)return 2;if(TS>>>=0,AS>>>=0,TS+AS>sS.byteLength)return 3;try{return Ke.set(sS.subarray(TS,TS+AS),jS>>>0>>>0),0}catch{return 4}}};class zS{constructor(TS){this.wa=TS-24}}var LS=0,nS=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Z$=(sS,TS,AS)=>{TS>>>=0;var jS=TS+AS;for(AS=TS;sS[AS]&&!(AS>=jS);)++AS;if(16<AS-TS&&sS.buffer&&nS)return nS.decode(sS.subarray(TS,AS));for(jS="";TS<AS;){var KS=sS[TS++];if(KS&128){var Bye=sS[TS++]&63;if((KS&224)==192)jS+=String.fromCharCode((KS&31)<<6|Bye);else{var Kye=sS[TS++]&63;KS=(KS&240)==224?(KS&15)<<12|Bye<<6|Kye:(KS&7)<<18|Bye<<12|Kye<<6|sS[TS++]&63,65536>KS?jS+=String.fromCharCode(KS):(KS-=65536,jS+=String.fromCharCode(55296|KS>>10,56320|KS&1023))}}else jS+=String.fromCharCode(KS)}return jS},dS=(sS,TS)=>(sS>>>=0)?Z$(Ke,sS,TS):"",ES=sS=>{for(var TS=0,AS=0;AS<sS.length;++AS){var jS=sS.charCodeAt(AS);127>=jS?TS++:2047>=jS?TS+=2:55296<=jS&&57343>=jS?(TS+=4,++AS):TS+=3}return TS},wy=(sS,TS,AS,jS)=>{if(AS>>>=0,!(0<jS))return 0;var KS=AS;jS=AS+jS-1;for(var Bye=0;Bye<sS.length;++Bye){var Kye=sS.charCodeAt(Bye);if(55296<=Kye&&57343>=Kye){var swe=sS.charCodeAt(++Bye);Kye=65536+((Kye&1023)<<10)|swe&1023}if(127>=Kye){if(AS>=jS)break;TS[AS++>>>0]=Kye}else{if(2047>=Kye){if(AS+1>=jS)break;TS[AS++>>>0]=192|Kye>>6}else{if(65535>=Kye){if(AS+2>=jS)break;TS[AS++>>>0]=224|Kye>>12}else{if(AS+3>=jS)break;TS[AS++>>>0]=240|Kye>>18,TS[AS++>>>0]=128|Kye>>12&63}TS[AS++>>>0]=128|Kye>>6&63}TS[AS++>>>0]=128|Kye&63}}return TS[AS>>>0]=0,AS-KS},tS=sS=>sS%4===0&&(sS%100!==0||sS%400===0),yS=[0,31,60,91,121,152,182,213,244,274,305,335],Q$=[0,31,59,90,120,151,181,212,243,273,304,334],eS=[],cS={},wS=()=>{if(!xS){var sS={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:C||"./this.program"},TS;for(TS in cS)cS[TS]===void 0?delete sS[TS]:sS[TS]=cS[TS];var AS=[];for(TS in sS)AS.push(`${TS}=${sS[TS]}`);xS=AS}return xS},xS,OS=[null,[],[]],mS=[31,29,31,30,31,30,31,31,30,31,30,31],pS=[31,28,31,30,31,30,31,31,30,31,30,31];function fC(sS){var TS=Array(ES(sS)+1);return wy(sS,TS,0,TS.length),TS}function US(sS,TS,AS,jS){function KS(VS,Zye,twe){for(VS=typeof VS=="number"?VS.toString():VS||"";VS.length<Zye;)VS=twe[0]+VS;return VS}function Bye(VS,Zye){return KS(VS,Zye,"0")}function Kye(VS,Zye){function twe(Hwe){return 0>Hwe?-1:0<Hwe?1:0}var _we;return(_we=twe(VS.getFullYear()-Zye.getFullYear()))===0&&(_we=twe(VS.getMonth()-Zye.getMonth()))===0&&(_we=twe(VS.getDate()-Zye.getDate())),_we}function swe(VS){switch(VS.getDay()){case 0:return new Date(VS.getFullYear()-1,11,29);case 1:return VS;case 2:return new Date(VS.getFullYear(),0,3);case 3:return new Date(VS.getFullYear(),0,2);case 4:return new Date(VS.getFullYear(),0,1);case 5:return new Date(VS.getFullYear()-1,11,31);case 6:return new Date(VS.getFullYear()-1,11,30)}}function Cwe(VS){var Zye=VS.sa;for(VS=new Date(new Date(VS.ta+1900,0,1).getTime());0<Zye;){var twe=VS.getMonth(),_we=(tS(VS.getFullYear())?mS:pS)[twe];if(Zye>_we-VS.getDate())Zye-=_we-VS.getDate()+1,VS.setDate(1),11>twe?VS.setMonth(twe+1):(VS.setMonth(0),VS.setFullYear(VS.getFullYear()+1));else{VS.setDate(VS.getDate()+Zye);break}}return twe=new Date(VS.getFullYear()+1,0,4),Zye=swe(new Date(VS.getFullYear(),0,4)),twe=swe(twe),0>=Kye(Zye,VS)?0>=Kye(twe,VS)?VS.getFullYear()+1:VS.getFullYear():VS.getFullYear()-1}sS>>>=0,TS>>>=0,AS>>>=0,jS>>>=0;var ywe=_y[jS+40>>>2>>>0];jS={Ba:Lr[jS>>>2>>>0],Aa:Lr[jS+4>>>2>>>0],ua:Lr[jS+8>>>2>>>0],xa:Lr[jS+12>>>2>>>0],va:Lr[jS+16>>>2>>>0],ta:Lr[jS+20>>>2>>>0],na:Lr[jS+24>>>2>>>0],sa:Lr[jS+28>>>2>>>0],Da:Lr[jS+32>>>2>>>0],za:Lr[jS+36>>>2>>>0],Ca:ywe?dS(ywe):""},AS=dS(AS),ywe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var hwe in ywe)AS=AS.replace(new RegExp(hwe,"g"),ywe[hwe]);var Vwe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Owe="January February March April May June July August September October November December".split(" ");ywe={"%a":VS=>Vwe[VS.na].substring(0,3),"%A":VS=>Vwe[VS.na],"%b":VS=>Owe[VS.va].substring(0,3),"%B":VS=>Owe[VS.va],"%C":VS=>Bye((VS.ta+1900)/100|0,2),"%d":VS=>Bye(VS.xa,2),"%e":VS=>KS(VS.xa,2," "),"%g":VS=>Cwe(VS).toString().substring(2),"%G":Cwe,"%H":VS=>Bye(VS.ua,2),"%I":VS=>(VS=VS.ua,VS==0?VS=12:12<VS&&(VS-=12),Bye(VS,2)),"%j":VS=>{for(var Zye=0,twe=0;twe<=VS.va-1;Zye+=(tS(VS.ta+1900)?mS:pS)[twe++]);return Bye(VS.xa+Zye,3)},"%m":VS=>Bye(VS.va+1,2),"%M":VS=>Bye(VS.Aa,2),"%n":()=>`
`,"%p":VS=>0<=VS.ua&&12>VS.ua?"AM":"PM","%S":VS=>Bye(VS.Ba,2),"%t":()=>"	","%u":VS=>VS.na||7,"%U":VS=>Bye(Math.floor((VS.sa+7-VS.na)/7),2),"%V":VS=>{var Zye=Math.floor((VS.sa+7-(VS.na+6)%7)/7);if(2>=(VS.na+371-VS.sa-2)%7&&Zye++,Zye)Zye==53&&(twe=(VS.na+371-VS.sa)%7,twe==4||twe==3&&tS(VS.ta)||(Zye=1));else{Zye=52;var twe=(VS.na+7-VS.sa-1)%7;(twe==4||twe==5&&tS(VS.ta%400-1))&&Zye++}return Bye(Zye,2)},"%w":VS=>VS.na,"%W":VS=>Bye(Math.floor((VS.sa+7-(VS.na+6)%7)/7),2),"%y":VS=>(VS.ta+1900).toString().substring(2),"%Y":VS=>VS.ta+1900,"%z":VS=>{VS=VS.za;var Zye=0<=VS;return VS=Math.abs(VS)/60,(Zye?"+":"-")+("0000"+(VS/60*100+VS%60)).slice(-4)},"%Z":VS=>VS.Ca,"%%":()=>"%"},AS=AS.replace(/%%/g,"\0\0");for(hwe in ywe)AS.includes(hwe)&&(AS=AS.replace(new RegExp(hwe,"g"),ywe[hwe](jS)));return AS=AS.replace(/\0\0/g,"%"),hwe=fC(AS),hwe.length>TS?0:(Be.set(hwe,sS>>>0),hwe.length-1)}var Iye={a:function(sS,TS,AS){sS>>>=0;var jS=new zS(sS);throw _y[jS.wa+16>>>2>>>0]=0,_y[jS.wa+4>>>2>>>0]=TS>>>0,_y[jS.wa+8>>>2>>>0]=AS>>>0,LS=sS,LS},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(sS,TS,AS){return TS>>>=0,Ke.copyWithin(sS>>>0>>>0,TS>>>0,TS+(AS>>>0)>>>0)},n:function(sS,TS,AS){sS=TS+2097152>>>0<4194305-!!sS?(sS>>>0)+4294967296*TS:NaN,AS>>>=0,sS=new Date(1e3*sS),Lr[AS>>>2>>>0]=sS.getUTCSeconds(),Lr[AS+4>>>2>>>0]=sS.getUTCMinutes(),Lr[AS+8>>>2>>>0]=sS.getUTCHours(),Lr[AS+12>>>2>>>0]=sS.getUTCDate(),Lr[AS+16>>>2>>>0]=sS.getUTCMonth(),Lr[AS+20>>>2>>>0]=sS.getUTCFullYear()-1900,Lr[AS+24>>>2>>>0]=sS.getUTCDay(),Lr[AS+28>>>2>>>0]=(sS.getTime()-Date.UTC(sS.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(sS,TS,AS){sS=TS+2097152>>>0<4194305-!!sS?(sS>>>0)+4294967296*TS:NaN,AS>>>=0,sS=new Date(1e3*sS),Lr[AS>>>2>>>0]=sS.getSeconds(),Lr[AS+4>>>2>>>0]=sS.getMinutes(),Lr[AS+8>>>2>>>0]=sS.getHours(),Lr[AS+12>>>2>>>0]=sS.getDate(),Lr[AS+16>>>2>>>0]=sS.getMonth(),Lr[AS+20>>>2>>>0]=sS.getFullYear()-1900,Lr[AS+24>>>2>>>0]=sS.getDay(),Lr[AS+28>>>2>>>0]=(tS(sS.getFullYear())?yS:Q$)[sS.getMonth()]+sS.getDate()-1|0,Lr[AS+36>>>2>>>0]=-(60*sS.getTimezoneOffset()),TS=new Date(sS.getFullYear(),6,1).getTimezoneOffset();var jS=new Date(sS.getFullYear(),0,1).getTimezoneOffset();Lr[AS+32>>>2>>>0]=(TS!=jS&&sS.getTimezoneOffset()==Math.min(jS,TS))|0},p:function(sS){sS>>>=0;var TS=new Date(Lr[sS+20>>>2>>>0]+1900,Lr[sS+16>>>2>>>0],Lr[sS+12>>>2>>>0],Lr[sS+8>>>2>>>0],Lr[sS+4>>>2>>>0],Lr[sS>>>2>>>0],0),AS=Lr[sS+32>>>2>>>0],jS=TS.getTimezoneOffset(),KS=new Date(TS.getFullYear(),6,1).getTimezoneOffset(),Bye=new Date(TS.getFullYear(),0,1).getTimezoneOffset(),Kye=Math.min(Bye,KS);return 0>AS?Lr[sS+32>>>2>>>0]=+(KS!=Bye&&Kye==jS):0<AS!=(Kye==jS)&&(KS=Math.max(Bye,KS),TS.setTime(TS.getTime()+6e4*((0<AS?Kye:KS)-jS))),Lr[sS+24>>>2>>>0]=TS.getDay(),Lr[sS+28>>>2>>>0]=(tS(TS.getFullYear())?yS:Q$)[TS.getMonth()]+TS.getDate()-1|0,Lr[sS>>>2>>>0]=TS.getSeconds(),Lr[sS+4>>>2>>>0]=TS.getMinutes(),Lr[sS+8>>>2>>>0]=TS.getHours(),Lr[sS+12>>>2>>>0]=TS.getDate(),Lr[sS+16>>>2>>>0]=TS.getMonth(),Lr[sS+20>>>2>>>0]=TS.getYear(),sS=TS.getTime(),sS=isNaN(sS)?-1:sS/1e3,Rye((BS=sS,1<=+Math.abs(BS)?0<BS?+Math.floor(BS/4294967296)>>>0:~~+Math.ceil((BS-+(~~BS>>>0))/4294967296)>>>0:0)),sS>>>0},l:function(){return-52},m:function(){},t:function(sS,TS,AS,jS){AS>>>=0,jS>>>=0;var KS=new Date().getFullYear(),Bye=new Date(KS,0,1),Kye=new Date(KS,6,1);KS=Bye.getTimezoneOffset();var swe=Kye.getTimezoneOffset();_y[sS>>>0>>>2>>>0]=60*Math.max(KS,swe),Lr[TS>>>0>>>2>>>0]=+(KS!=swe),sS=Cwe=>Cwe.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],Bye=sS(Bye),Kye=sS(Kye),swe<KS?(wy(Bye,Ke,AS,17),wy(Kye,Ke,jS,17)):(wy(Bye,Ke,jS,17),wy(Kye,Ke,AS,17))},d:()=>{U$("")},B:function(sS,TS,AS){sS>>>=0,TS>>>=0,AS>>>=0,eS.length=0;for(var jS;jS=Ke[TS++>>>0];){var KS=jS!=105;KS&=jS!=112,AS+=KS&&AS%8?4:0,eS.push(jS==112?_y[AS>>>2>>>0]:jS==105?Lr[AS>>>2>>>0]:by[AS>>>3>>>0]),AS+=KS?8:4}return MS[sS](...eS)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(sS){sS>>>=0;var TS=Ke.length;if(4294901760<sS)return!1;for(var AS=1;4>=AS;AS*=2){var jS=TS*(1+.2/AS);jS=Math.min(jS,sS+100663296);var KS=Math;jS=Math.max(sS,jS);e:{KS=(KS.min.call(KS,4294901760,jS+(65536-jS%65536)%65536)-Ae.buffer.byteLength+65535)/65536;try{Ae.grow(KS),yy();var Bye=1;break e}catch{}Bye=void 0}if(Bye)return!0}return!1},C:function(sS,TS){sS>>>=0,TS>>>=0;var AS=0;return wS().forEach((jS,KS)=>{var Bye=TS+AS;for(KS=_y[sS+4*KS>>>2>>>0]=Bye,Bye=0;Bye<jS.length;++Bye)Be[KS++>>>0]=jS.charCodeAt(Bye);Be[KS>>>0]=0,AS+=jS.length+1}),0},D:function(sS,TS){sS>>>=0,TS>>>=0;var AS=wS();_y[sS>>>2>>>0]=AS.length;var jS=0;return AS.forEach(KS=>jS+=KS.length+1),_y[TS>>>2>>>0]=jS,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(sS,TS,AS,jS){TS>>>=0,AS>>>=0,jS>>>=0;for(var KS=0,Bye=0;Bye<AS;Bye++){var Kye=_y[TS>>>2>>>0],swe=_y[TS+4>>>2>>>0];TS+=8;for(var Cwe=0;Cwe<swe;Cwe++){var ywe=Ke[Kye+Cwe>>>0],hwe=OS[sS];ywe===0||ywe===10?((sS===1?ge:Se)(Z$(hwe,0)),hwe.length=0):hwe.push(ywe)}KS+=swe}return _y[jS>>>2>>>0]=KS,0},r:US,c:function(sS,TS,AS,jS){return US(sS>>>0,TS>>>0,AS>>>0,jS>>>0)}},$ye=function(){function sS(AS){return $ye=AS.exports,$ye=Aye(),Ae=$ye.K,yy(),$t.unshift($ye.L),Y$--,Y$==0&&W$&&(AS=W$,W$=null,AS()),$ye}var TS={a:Iye};if(Y$++,v.instantiateWasm)try{return v.instantiateWasm(TS,sS)}catch(AS){Se(`Module.instantiateWasm callback failed with error: ${AS}`),$(AS)}return IS(TS,function(AS){sS(AS.instance)}).catch($),{}}();v._OrtInit=(sS,TS)=>(v._OrtInit=$ye.M)(sS,TS),v._OrtGetLastError=(sS,TS)=>(v._OrtGetLastError=$ye.N)(sS,TS),v._OrtCreateSessionOptions=(sS,TS,AS,jS,KS,Bye,Kye,swe,Cwe,ywe)=>(v._OrtCreateSessionOptions=$ye.O)(sS,TS,AS,jS,KS,Bye,Kye,swe,Cwe,ywe),v._OrtAppendExecutionProvider=(sS,TS)=>(v._OrtAppendExecutionProvider=$ye.P)(sS,TS),v._OrtAddFreeDimensionOverride=(sS,TS,AS)=>(v._OrtAddFreeDimensionOverride=$ye.Q)(sS,TS,AS),v._OrtAddSessionConfigEntry=(sS,TS,AS)=>(v._OrtAddSessionConfigEntry=$ye.R)(sS,TS,AS),v._OrtReleaseSessionOptions=sS=>(v._OrtReleaseSessionOptions=$ye.S)(sS),v._OrtCreateSession=(sS,TS,AS)=>(v._OrtCreateSession=$ye.T)(sS,TS,AS),v._OrtReleaseSession=sS=>(v._OrtReleaseSession=$ye.U)(sS),v._OrtGetInputOutputCount=(sS,TS,AS)=>(v._OrtGetInputOutputCount=$ye.V)(sS,TS,AS),v._OrtGetInputName=(sS,TS)=>(v._OrtGetInputName=$ye.W)(sS,TS),v._OrtGetOutputName=(sS,TS)=>(v._OrtGetOutputName=$ye.X)(sS,TS),v._OrtFree=sS=>(v._OrtFree=$ye.Y)(sS),v._OrtCreateTensor=(sS,TS,AS,jS,KS,Bye)=>(v._OrtCreateTensor=$ye.Z)(sS,TS,AS,jS,KS,Bye),v._OrtGetTensorData=(sS,TS,AS,jS,KS)=>(v._OrtGetTensorData=$ye._)(sS,TS,AS,jS,KS),v._OrtReleaseTensor=sS=>(v._OrtReleaseTensor=$ye.$)(sS),v._OrtCreateRunOptions=(sS,TS,AS,jS)=>(v._OrtCreateRunOptions=$ye.aa)(sS,TS,AS,jS),v._OrtAddRunConfigEntry=(sS,TS,AS)=>(v._OrtAddRunConfigEntry=$ye.ba)(sS,TS,AS),v._OrtReleaseRunOptions=sS=>(v._OrtReleaseRunOptions=$ye.ca)(sS),v._OrtCreateBinding=sS=>(v._OrtCreateBinding=$ye.da)(sS),v._OrtBindInput=(sS,TS,AS)=>(v._OrtBindInput=$ye.ea)(sS,TS,AS),v._OrtBindOutput=(sS,TS,AS,jS)=>(v._OrtBindOutput=$ye.fa)(sS,TS,AS,jS),v._OrtClearBoundOutputs=sS=>(v._OrtClearBoundOutputs=$ye.ga)(sS),v._OrtReleaseBinding=sS=>(v._OrtReleaseBinding=$ye.ha)(sS),v._OrtRunWithBinding=(sS,TS,AS,jS,KS)=>(v._OrtRunWithBinding=$ye.ia)(sS,TS,AS,jS,KS),v._OrtRun=(sS,TS,AS,jS,KS,Bye,Kye,swe)=>(v._OrtRun=$ye.ja)(sS,TS,AS,jS,KS,Bye,Kye,swe),v._OrtEndProfiling=sS=>(v._OrtEndProfiling=$ye.ka)(sS),v._malloc=sS=>(v._malloc=$ye.la)(sS),v._free=sS=>(v._free=$ye.ma)(sS);var Rye=sS=>(Rye=$ye.oa)(sS),Uye=sS=>(Uye=$ye.pa)(sS),DS=sS=>(DS=$ye.qa)(sS),HS=()=>(HS=$ye.ra)();function Aye(){var sS=$ye;sS=Object.assign({},sS);var TS=AS=>jS=>AS(jS)>>>0;return sS.la=TS(sS.la),sS.qa=TS(sS.qa),sS.ra=(AS=>()=>AS()>>>0)(sS.ra),sS}v.stackSave=()=>HS(),v.stackRestore=sS=>Uye(sS),v.stackAlloc=sS=>DS(sS),v.UTF8ToString=dS,v.stringToUTF8=(sS,TS,AS)=>wy(sS,Ke,TS,AS),v.lengthBytesUTF8=ES;var Tye;W$=function sS(){Tye||jye(),Tye||(W$=sS)};function jye(){if(!(0<Y$)){if(v.preRun)for(typeof v.preRun=="function"&&(v.preRun=[v.preRun]);v.preRun.length;){var sS=v.preRun.shift();my.unshift(sS)}for(;0<my.length;)my.shift()(v);if(!(0<Y$||Tye||(Tye=!0,v.calledRun=!0,Re))){for(;0<$t.length;)$t.shift()(v);for(b(v);0<K$.length;)K$.shift()(v)}}}return jye(),y}})();typeof s=="object"&&typeof l=="object"?l.exports=c:typeof define=="function"&&define.amd&&define([],()=>c)}),Ep$1=me(()=>{}),Dp$2=me(()=>{}),Lp$2={};Sr$1(Lp$2,{cpus:()=>ig$1});var ig$1,Cp$2=L$1(()=>{ig$1=void 0}),kp$2=me((s,l)=>{var c=(()=>{var f;var d=typeof document<"u"?(f=document.currentScript)==null?void 0:f.src:void 0;return typeof __filename<"u"&&(d||(d=__filename)),function(g={}){function v(){return K$.buffer!=hy.buffer&&lS(),hy}function b(){return K$.buffer!=hy.buffer&&lS(),G$}function $(){return K$.buffer!=hy.buffer&&lS(),ky}function y(){return K$.buffer!=hy.buffer&&lS(),$y}function x(){return K$.buffer!=hy.buffer&&lS(),rS}var C=g,E,N,W=new Promise((Cy,Ce)=>{E=Cy,N=Ce}),q=Object.assign({},C),Y="./this.program",re=(Cy,Ce)=>{throw Ce},se=typeof window=="object",de=typeof importScripts=="function",he=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",ge=C.ENVIRONMENT_IS_PTHREAD||!1,Se="";function Ae(Cy){return C.locateFile?C.locateFile(Cy,Se):Se+Cy}var Re,Be,Ke;if(he){var Lr=(Qi$2(),ar$1(Zi$2)),_y=(ta$2(),ar$1(ea$1));Se=de?_y.dirname(Se)+"/":__dirname+"/",Re=(Cy,Ce)=>(Cy=ES(Cy)?new URL(Cy):_y.normalize(Cy),Lr.readFileSync(Cy,Ce?void 0:"utf8")),Ke=Cy=>(Cy=Re(Cy,!0),Cy.buffer||(Cy=new Uint8Array(Cy)),Cy),Be=(Cy,Ce,Le,gy=!0)=>{Cy=ES(Cy)?new URL(Cy):_y.normalize(Cy),Lr.readFile(Cy,gy?void 0:"utf8",(X$,aS)=>{X$?Le(X$):Ce(gy?aS.buffer:aS)})},!C.thisProgram&&1<process.argv.length&&(Y=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),re=(Cy,Ce)=>{throw process.exitCode=Cy,Ce},global.Worker=Ep$1().Worker}else(se||de)&&(de?Se=self.location.href:typeof document<"u"&&document.currentScript&&(Se=document.currentScript.src),typeof d<"u"&&d&&(Se=d),Se.startsWith("blob:")?Se="":Se=Se.substr(0,Se.replace(/[?#].*/,"").lastIndexOf("/")+1),he||(Re=Cy=>{var Ce=new XMLHttpRequest;return Ce.open("GET",Cy,!1),Ce.send(null),Ce.responseText},de&&(Ke=Cy=>{var Ce=new XMLHttpRequest;return Ce.open("GET",Cy,!1),Ce.responseType="arraybuffer",Ce.send(null),new Uint8Array(Ce.response)}),Be=(Cy,Ce,Le)=>{var gy=new XMLHttpRequest;gy.open("GET",Cy,!0),gy.responseType="arraybuffer",gy.onload=()=>{gy.status==200||gy.status==0&&gy.response?Ce(gy.response):Le()},gy.onerror=Le,gy.send(null)}));he&&typeof performance>"u"&&(global.performance=Dp$2().performance);var by=console.log.bind(console),yy=console.error.bind(console);he&&(by=(...Cy)=>Lr.writeSync(1,Cy.join(" ")+`
`),yy=(...Cy)=>Lr.writeSync(2,Cy.join(" ")+`
`));var my=by,$t=yy;Object.assign(C,q),q=null;var K$,Y$,W$=!1,U$,hy,G$,ky,$y,rS;function lS(){var Cy=K$.buffer;C.HEAP8=hy=new Int8Array(Cy),C.HEAP16=new Int16Array(Cy),C.HEAPU8=G$=new Uint8Array(Cy),C.HEAPU16=new Uint16Array(Cy),C.HEAP32=ky=new Int32Array(Cy),C.HEAPU32=$y=new Uint32Array(Cy),C.HEAPF32=new Float32Array(Cy),C.HEAPF64=rS=new Float64Array(Cy)}var bS=16777216;if(ge)K$=C.wasmMemory;else if(C.wasmMemory)K$=C.wasmMemory;else if(K$=new WebAssembly.Memory({initial:bS/65536,maximum:65536,shared:!0}),!(K$.buffer instanceof SharedArrayBuffer))throw $t("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),he&&$t("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");lS(),bS=K$.buffer.byteLength;var IS=[],BS=[],MS=[],zS=0,LS=null;function nS(){if(zS--,zS==0&&LS){var Cy=LS;LS=null,Cy()}}function Z$(Cy){throw Cy="Aborted("+Cy+")",$t(Cy),W$=!0,U$=1,Cy=new WebAssembly.RuntimeError(Cy+". Build with -sASSERTIONS for more info."),N(Cy),Cy}var dS=Cy=>Cy.startsWith("data:application/octet-stream;base64,"),ES=Cy=>Cy.startsWith("file://"),wy;wy="ort-wasm-threaded.wasm",dS(wy)||(wy=Ae(wy));function tS(Cy){if(Ke)return Ke(Cy);throw"both async and sync fetching of the wasm failed"}function yS(Cy){if(se||de){if(typeof fetch=="function"&&!ES(Cy))return fetch(Cy,{credentials:"same-origin"}).then(Ce=>{if(!Ce.ok)throw`failed to load wasm binary file at '${Cy}'`;return Ce.arrayBuffer()}).catch(()=>tS(Cy));if(Be)return new Promise((Ce,Le)=>{Be(Cy,gy=>Ce(new Uint8Array(gy)),Le)})}return Promise.resolve().then(()=>tS(Cy))}function Q$(Cy,Ce,Le){return yS(Cy).then(gy=>WebAssembly.instantiate(gy,Ce)).then(Le,gy=>{$t(`failed to asynchronously prepare wasm: ${gy}`),Z$(gy)})}function eS(Cy,Ce){var Le=wy;return typeof WebAssembly.instantiateStreaming!="function"||dS(Le)||ES(Le)||he||typeof fetch!="function"?Q$(Le,Cy,Ce):fetch(Le,{credentials:"same-origin"}).then(gy=>WebAssembly.instantiateStreaming(gy,Cy).then(Ce,function(X$){return $t(`wasm streaming compile failed: ${X$}`),$t("falling back to ArrayBuffer instantiation"),Q$(Le,Cy,Ce)}))}var cS,wS={799444:(Cy,Ce,Le,gy)=>{if(typeof C>"u"||!C.bb)return 1;if(Cy=swe(Cy>>>0),Cy.startsWith("./")&&(Cy=Cy.substring(2)),Cy=C.bb.get(Cy),!Cy)return 2;if(Ce>>>=0,Le>>>=0,gy>>>=0,Ce+Le>Cy.byteLength)return 3;try{return b().set(Cy.subarray(Ce,Ce+Le),gy>>>0),0}catch{return 4}}};function xS(Cy){this.name="ExitStatus",this.message=`Program terminated with exit(${Cy})`,this.status=Cy}var OS=Cy=>{Cy.terminate(),Cy.onmessage=()=>{}},mS=Cy=>{HS.Oa.length==0&&(Uye(),HS.Xa(HS.Oa[0]));var Ce=HS.Oa.pop();if(!Ce)return 6;HS.Pa.push(Ce),HS.La[Cy.Na]=Ce,Ce.Na=Cy.Na;var Le={cmd:"run",start_routine:Cy.gb,arg:Cy.cb,pthread_ptr:Cy.Na};return he&&Ce.unref(),Ce.postMessage(Le,Cy.mb),0},pS=0,fC=Cy=>{var Ce=Zwe();return Cy=Cy(),Wwe(Ce),Cy},US=(Cy,Ce,...Le)=>fC(()=>{for(var gy=Le.length,X$=H2e(8*gy),aS=X$>>>3,_S=0;_S<Le.length;_S++){var yye=Le[_S];x()[aS+_S>>>0]=yye}return V2e(Cy,0,gy,X$,Ce)});function Iye(Cy){var Ce;if(ge)return US(0,1,Cy);U$=Cy,0<pS||(HS.hb(),(Ce=C.onExit)==null||Ce.call(C,Cy),W$=!0),re(Cy,new xS(Cy))}var $ye=Cy=>{if(U$=Cy,ge)throw Tye(Cy),"unwind";Iye(Cy)};function Rye(){for(var Cy=C.numThreads;Cy--;)Uye();IS.unshift(()=>{zS++,DS(()=>nS())})}function Uye(){var Cy=Ae("ort-wasm-threaded.worker.js");Cy=new Worker(Cy),HS.Oa.push(Cy)}function DS(Cy){ge?Cy():Promise.all(HS.Oa.map(HS.Xa)).then(Cy)}var HS={Oa:[],Pa:[],ab:[],La:{},Va(){ge?(HS.receiveObjectTransfer=HS.fb,HS.threadInitTLS=HS.$a,HS.setExitStatus=HS.Za):Rye()},Za:Cy=>U$=Cy,pb:["$terminateWorker"],hb:()=>{for(var Cy of HS.Pa)OS(Cy);for(Cy of HS.Oa)OS(Cy);HS.Oa=[],HS.Pa=[],HS.La=[]},Ya:Cy=>{var Ce=Cy.Na;delete HS.La[Ce],HS.Oa.push(Cy),HS.Pa.splice(HS.Pa.indexOf(Cy),1),Cy.Na=0,o2e(Ce)},fb(){},$a(){HS.ab.forEach(Cy=>Cy())},Xa:Cy=>new Promise(Ce=>{Cy.onmessage=aS=>{aS=aS.data;var _S=aS.cmd;if(aS.targetThread&&aS.targetThread!=Z2e()){var yye=HS.La[aS.targetThread];yye?yye.postMessage(aS,aS.transferList):$t(`Internal error! Worker sent a message "${_S}" to target pthread ${aS.targetThread}, but that thread no longer exists!`)}else _S==="checkMailbox"?t2e():_S==="spawnThread"?mS(aS):_S==="cleanupThread"?HS.Ya(HS.La[aS.thread]):_S==="killThread"?(aS=aS.thread,_S=HS.La[aS],delete HS.La[aS],OS(_S),o2e(aS),HS.Pa.splice(HS.Pa.indexOf(_S),1),_S.Na=0):_S==="cancelThread"?HS.La[aS.thread].postMessage({cmd:"cancel"}):_S==="loaded"?(Cy.loaded=!0,he&&!Cy.Na&&Cy.unref(),Ce(Cy)):_S==="alert"?alert(`Thread ${aS.threadId}: ${aS.text}`):aS.target==="setimmediate"?Cy.postMessage(aS):_S==="callHandler"?C[aS.handler](...aS.args):_S&&$t(`worker sent an unknown command ${_S}`)},Cy.onerror=aS=>{throw $t(`worker sent an error! ${aS.filename}:${aS.lineno}: ${aS.message}`),aS},he&&(Cy.on("message",aS=>Cy.onmessage({data:aS})),Cy.on("error",aS=>Cy.onerror(aS)));var Le=[],gy=["onExit"],X$;for(X$ of gy)C.hasOwnProperty(X$)&&Le.push(X$);Cy.postMessage({cmd:"load",handlers:Le,urlOrBlob:C.mainScriptUrlOrBlob||d,wasmMemory:K$,wasmModule:Y$})})};C.PThread=HS;var Aye=Cy=>{for(;0<Cy.length;)Cy.shift()(C)};C.establishStackSpace=()=>{var Cy=Z2e(),Ce=y()[Cy+52>>>2>>>0];Cy=y()[Cy+56>>>2>>>0],I2e(Ce,Ce-Cy),Wwe(Ce)};function Tye(Cy){if(ge)return US(1,0,Cy);$ye(Cy)}var jye=[],sS;C.invokeEntryPoint=(Cy,Ce)=>{pS=0;var Le=jye[Cy];Le||(Cy>=jye.length&&(jye.length=Cy+1),jye[Cy]=Le=sS.get(Cy)),Cy=Le(Ce),0<pS?HS.Za(Cy):Lwe(Cy)};class TS{constructor(Ce){this.Ua=Ce-24}Va(Ce,Le){y()[this.Ua+16>>>2>>>0]=0,y()[this.Ua+4>>>2>>>0]=Ce,y()[this.Ua+8>>>2>>>0]=Le}}var AS=0;function jS(Cy,Ce,Le,gy){return ge?US(2,1,Cy,Ce,Le,gy):KS(Cy,Ce,Le,gy)}function KS(Cy,Ce,Le,gy){if(Cy>>>=0,Ce>>>=0,Le>>>=0,gy>>>=0,typeof SharedArrayBuffer>"u")return $t("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var X$=[];return ge&&X$.length===0?jS(Cy,Ce,Le,gy):(Cy={gb:Le,Na:Cy,cb:gy,mb:X$},ge?(Cy.ob="spawnThread",postMessage(Cy,X$),0):mS(Cy))}var Bye=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Kye=(Cy,Ce,Le)=>{Ce>>>=0;var gy=Ce+Le;for(Le=Ce;Cy[Le]&&!(Le>=gy);)++Le;if(16<Le-Ce&&Cy.buffer&&Bye)return Bye.decode(Cy.buffer instanceof SharedArrayBuffer?Cy.slice(Ce,Le):Cy.subarray(Ce,Le));for(gy="";Ce<Le;){var X$=Cy[Ce++];if(X$&128){var aS=Cy[Ce++]&63;if((X$&224)==192)gy+=String.fromCharCode((X$&31)<<6|aS);else{var _S=Cy[Ce++]&63;X$=(X$&240)==224?(X$&15)<<12|aS<<6|_S:(X$&7)<<18|aS<<12|_S<<6|Cy[Ce++]&63,65536>X$?gy+=String.fromCharCode(X$):(X$-=65536,gy+=String.fromCharCode(55296|X$>>10,56320|X$&1023))}}else gy+=String.fromCharCode(X$)}return gy},swe=(Cy,Ce)=>(Cy>>>=0)?Kye(b(),Cy,Ce):"";function Cwe(Cy,Ce,Le){return ge?US(3,1,Cy,Ce,Le):0}function ywe(Cy,Ce){if(ge)return US(4,1,Cy,Ce)}var hwe=Cy=>{for(var Ce=0,Le=0;Le<Cy.length;++Le){var gy=Cy.charCodeAt(Le);127>=gy?Ce++:2047>=gy?Ce+=2:55296<=gy&&57343>=gy?(Ce+=4,++Le):Ce+=3}return Ce},Vwe=(Cy,Ce,Le,gy)=>{if(Le>>>=0,!(0<gy))return 0;var X$=Le;gy=Le+gy-1;for(var aS=0;aS<Cy.length;++aS){var _S=Cy.charCodeAt(aS);if(55296<=_S&&57343>=_S){var yye=Cy.charCodeAt(++aS);_S=65536+((_S&1023)<<10)|yye&1023}if(127>=_S){if(Le>=gy)break;Ce[Le++>>>0]=_S}else{if(2047>=_S){if(Le+1>=gy)break;Ce[Le++>>>0]=192|_S>>6}else{if(65535>=_S){if(Le+2>=gy)break;Ce[Le++>>>0]=224|_S>>12}else{if(Le+3>=gy)break;Ce[Le++>>>0]=240|_S>>18,Ce[Le++>>>0]=128|_S>>12&63}Ce[Le++>>>0]=128|_S>>6&63}Ce[Le++>>>0]=128|_S&63}}return Ce[Le>>>0]=0,Le-X$},Owe=(Cy,Ce,Le)=>Vwe(Cy,b(),Ce,Le);function VS(Cy,Ce){if(ge)return US(5,1,Cy,Ce)}function Zye(Cy,Ce,Le){if(ge)return US(6,1,Cy,Ce,Le)}function twe(Cy,Ce,Le){return ge?US(7,1,Cy,Ce,Le):0}function _we(Cy,Ce){if(ge)return US(8,1,Cy,Ce)}function Hwe(Cy,Ce,Le){if(ge)return US(9,1,Cy,Ce,Le)}function Pwe(Cy,Ce,Le,gy){if(ge)return US(10,1,Cy,Ce,Le,gy)}function Jwe(Cy,Ce,Le,gy){if(ge)return US(11,1,Cy,Ce,Le,gy)}function Nwe(Cy,Ce,Le,gy){if(ge)return US(12,1,Cy,Ce,Le,gy)}function i2e(Cy){if(ge)return US(13,1,Cy)}function Kwe(Cy,Ce){if(ge)return US(14,1,Cy,Ce)}function Qwe(Cy,Ce,Le){if(ge)return US(15,1,Cy,Ce,Le)}function e2e(Cy){Cy>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb($(),Cy>>>2,Cy).value.then(t2e),Cy+=128,Atomics.store($(),Cy>>>2,1))}C.__emscripten_thread_mailbox_await=e2e;var t2e=()=>{var Cy=Z2e();if(Cy&&(e2e(Cy),Cy=A2e,!W$))try{if(Cy(),!(0<pS))try{ge?Lwe(U$):$ye(U$)}catch(Ce){Ce instanceof xS||Ce=="unwind"||re(1,Ce)}}catch(Ce){Ce instanceof xS||Ce=="unwind"||re(1,Ce)}};C.checkMailbox=t2e;var Dye=[],CS=Cy=>Cy%4===0&&(Cy%100!==0||Cy%400===0),Sye=[0,31,60,91,121,152,182,213,244,274,305,335],Mye=[0,31,59,90,120,151,181,212,243,273,304,334];function rwe(Cy,Ce,Le,gy,X$,aS,_S,yye){return ge?US(16,1,Cy,Ce,Le,gy,X$,aS,_S,yye):-52}function awe(Cy,Ce,Le,gy,X$,aS,_S){if(ge)return US(17,1,Cy,Ce,Le,gy,X$,aS,_S)}var $we=[],Mwe={},Awe=()=>{if(!l2e){var Cy={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Y||"./this.program"},Ce;for(Ce in Mwe)Mwe[Ce]===void 0?delete Cy[Ce]:Cy[Ce]=Mwe[Ce];var Le=[];for(Ce in Cy)Le.push(`${Ce}=${Cy[Ce]}`);l2e=Le}return l2e},l2e;function pwe(Cy,Ce){if(ge)return US(18,1,Cy,Ce);Cy>>>=0,Ce>>>=0;var Le=0;return Awe().forEach((gy,X$)=>{var aS=Ce+Le;for(X$=y()[Cy+4*X$>>>2>>>0]=aS,aS=0;aS<gy.length;++aS)v()[X$++>>>0]=gy.charCodeAt(aS);v()[X$>>>0]=0,Le+=gy.length+1}),0}function v2e(Cy,Ce){if(ge)return US(19,1,Cy,Ce);Cy>>>=0,Ce>>>=0;var Le=Awe();y()[Cy>>>2>>>0]=Le.length;var gy=0;return Le.forEach(X$=>gy+=X$.length+1),y()[Ce>>>2>>>0]=gy,0}function u2e(Cy){return ge?US(20,1,Cy):52}function Ywe(Cy,Ce,Le,gy){return ge?US(21,1,Cy,Ce,Le,gy):52}function F2e(Cy,Ce,Le,gy,X$){return ge?US(22,1,Cy,Ce,Le,gy,X$):70}var Bwe=[null,[],[]];function Uwe(Cy,Ce,Le,gy){if(ge)return US(23,1,Cy,Ce,Le,gy);Ce>>>=0,Le>>>=0,gy>>>=0;for(var X$=0,aS=0;aS<Le;aS++){var _S=y()[Ce>>>2>>>0],yye=y()[Ce+4>>>2>>>0];Ce+=8;for(var xye=0;xye<yye;xye++){var Oye=b()[_S+xye>>>0],Eye=Bwe[Cy];Oye===0||Oye===10?((Cy===1?my:$t)(Kye(Eye,0)),Eye.length=0):Eye.push(Oye)}X$+=yye}return y()[gy>>>2>>>0]=X$,0}var x2e=[31,29,31,30,31,30,31,31,30,31,30,31],i_e=[31,28,31,30,31,30,31,31,30,31,30,31];function o_e(Cy){var Ce=Array(hwe(Cy)+1);return Vwe(Cy,Ce,0,Ce.length),Ce}var z2e=(Cy,Ce)=>{v().set(Cy,Ce>>>0)};function y_e(Cy,Ce,Le,gy){function X$(FS,RS,Lye){for(FS=typeof FS=="number"?FS.toString():FS||"";FS.length<RS;)FS=Lye[0]+FS;return FS}function aS(FS,RS){return X$(FS,RS,"0")}function _S(FS,RS){function Lye(dwe){return 0>dwe?-1:0<dwe?1:0}var Fye;return(Fye=Lye(FS.getFullYear()-RS.getFullYear()))===0&&(Fye=Lye(FS.getMonth()-RS.getMonth()))===0&&(Fye=Lye(FS.getDate()-RS.getDate())),Fye}function yye(FS){switch(FS.getDay()){case 0:return new Date(FS.getFullYear()-1,11,29);case 1:return FS;case 2:return new Date(FS.getFullYear(),0,3);case 3:return new Date(FS.getFullYear(),0,2);case 4:return new Date(FS.getFullYear(),0,1);case 5:return new Date(FS.getFullYear()-1,11,31);case 6:return new Date(FS.getFullYear()-1,11,30)}}function xye(FS){var RS=FS.Qa;for(FS=new Date(new Date(FS.Ra+1900,0,1).getTime());0<RS;){var Lye=FS.getMonth(),Fye=(CS(FS.getFullYear())?x2e:i_e)[Lye];if(RS>Fye-FS.getDate())RS-=Fye-FS.getDate()+1,FS.setDate(1),11>Lye?FS.setMonth(Lye+1):(FS.setMonth(0),FS.setFullYear(FS.getFullYear()+1));else{FS.setDate(FS.getDate()+RS);break}}return Lye=new Date(FS.getFullYear()+1,0,4),RS=yye(new Date(FS.getFullYear(),0,4)),Lye=yye(Lye),0>=_S(RS,FS)?0>=_S(Lye,FS)?FS.getFullYear()+1:FS.getFullYear():FS.getFullYear()-1}Cy>>>=0,Ce>>>=0,Le>>>=0,gy>>>=0;var Oye=y()[gy+40>>>2>>>0];gy={kb:$()[gy>>>2>>>0],jb:$()[gy+4>>>2>>>0],Sa:$()[gy+8>>>2>>>0],Wa:$()[gy+12>>>2>>>0],Ta:$()[gy+16>>>2>>>0],Ra:$()[gy+20>>>2>>>0],Ma:$()[gy+24>>>2>>>0],Qa:$()[gy+28>>>2>>>0],qb:$()[gy+32>>>2>>>0],ib:$()[gy+36>>>2>>>0],lb:Oye?swe(Oye):""},Le=swe(Le),Oye={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Eye in Oye)Le=Le.replace(new RegExp(Eye,"g"),Oye[Eye]);var Gye="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),cwe="January February March April May June July August September October November December".split(" ");Oye={"%a":FS=>Gye[FS.Ma].substring(0,3),"%A":FS=>Gye[FS.Ma],"%b":FS=>cwe[FS.Ta].substring(0,3),"%B":FS=>cwe[FS.Ta],"%C":FS=>aS((FS.Ra+1900)/100|0,2),"%d":FS=>aS(FS.Wa,2),"%e":FS=>X$(FS.Wa,2," "),"%g":FS=>xye(FS).toString().substring(2),"%G":xye,"%H":FS=>aS(FS.Sa,2),"%I":FS=>(FS=FS.Sa,FS==0?FS=12:12<FS&&(FS-=12),aS(FS,2)),"%j":FS=>{for(var RS=0,Lye=0;Lye<=FS.Ta-1;RS+=(CS(FS.Ra+1900)?x2e:i_e)[Lye++]);return aS(FS.Wa+RS,3)},"%m":FS=>aS(FS.Ta+1,2),"%M":FS=>aS(FS.jb,2),"%n":()=>`
`,"%p":FS=>0<=FS.Sa&&12>FS.Sa?"AM":"PM","%S":FS=>aS(FS.kb,2),"%t":()=>"	","%u":FS=>FS.Ma||7,"%U":FS=>aS(Math.floor((FS.Qa+7-FS.Ma)/7),2),"%V":FS=>{var RS=Math.floor((FS.Qa+7-(FS.Ma+6)%7)/7);if(2>=(FS.Ma+371-FS.Qa-2)%7&&RS++,RS)RS==53&&(Lye=(FS.Ma+371-FS.Qa)%7,Lye==4||Lye==3&&CS(FS.Ra)||(RS=1));else{RS=52;var Lye=(FS.Ma+7-FS.Qa-1)%7;(Lye==4||Lye==5&&CS(FS.Ra%400-1))&&RS++}return aS(RS,2)},"%w":FS=>FS.Ma,"%W":FS=>aS(Math.floor((FS.Qa+7-(FS.Ma+6)%7)/7),2),"%y":FS=>(FS.Ra+1900).toString().substring(2),"%Y":FS=>FS.Ra+1900,"%z":FS=>{FS=FS.ib;var RS=0<=FS;return FS=Math.abs(FS)/60,(RS?"+":"-")+("0000"+(FS/60*100+FS%60)).slice(-4)},"%Z":FS=>FS.lb,"%%":()=>"%"},Le=Le.replace(/%%/g,"\0\0");for(Eye in Oye)Le.includes(Eye)&&(Le=Le.replace(new RegExp(Eye,"g"),Oye[Eye](gy)));return Le=Le.replace(/\0\0/g,"%"),Eye=o_e(Le),Eye.length>Ce?0:(z2e(Eye,Cy),Eye.length-1)}HS.Va();var a_e=[Iye,Tye,jS,Cwe,ywe,VS,Zye,twe,_we,Hwe,Pwe,Jwe,Nwe,i2e,Kwe,Qwe,rwe,awe,pwe,v2e,u2e,Ywe,F2e,Uwe],j2e={b:function(Cy,Ce,Le){throw Cy>>>=0,new TS(Cy).Va(Ce>>>0,Le>>>0),AS=Cy,AS},L:function(Cy){Yye(Cy>>>0,!de,1,!se,131072,!1),HS.$a()},j:function(Cy){Cy>>>=0,ge?postMessage({cmd:"cleanupThread",thread:Cy}):HS.Ya(HS.La[Cy])},H:KS,h:Cwe,S:ywe,D:VS,F:Zye,T:twe,Q:_we,J:Hwe,P:Pwe,n:Jwe,E:Nwe,B:i2e,R:Kwe,C:Qwe,p:()=>1,z:function(Cy,Ce){Cy>>>=0,Cy==Ce>>>0?setTimeout(t2e):ge?postMessage({targetThread:Cy,cmd:"checkMailbox"}):(Cy=HS.La[Cy])&&Cy.postMessage({cmd:"checkMailbox"})},I:function(Cy,Ce,Le,gy,X$){Ce>>>=0,Le>>>=0,Dye.length=gy,X$=X$>>>0>>>3;for(var aS=0;aS<gy;aS++)Dye[aS]=x()[X$+aS>>>0];return Cy=Ce?wS[Ce]:a_e[Cy],HS.eb=Le,Le=Cy(...Dye),HS.eb=0,Le},K:e2e,o:function(Cy){he&&HS.La[Cy>>>0].ref()},s:function(Cy,Ce,Le){Cy=Ce+2097152>>>0<4194305-!!Cy?(Cy>>>0)+4294967296*Ce:NaN,Le>>>=0,Cy=new Date(1e3*Cy),$()[Le>>>2>>>0]=Cy.getUTCSeconds(),$()[Le+4>>>2>>>0]=Cy.getUTCMinutes(),$()[Le+8>>>2>>>0]=Cy.getUTCHours(),$()[Le+12>>>2>>>0]=Cy.getUTCDate(),$()[Le+16>>>2>>>0]=Cy.getUTCMonth(),$()[Le+20>>>2>>>0]=Cy.getUTCFullYear()-1900,$()[Le+24>>>2>>>0]=Cy.getUTCDay(),Cy=(Cy.getTime()-Date.UTC(Cy.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,$()[Le+28>>>2>>>0]=Cy},t:function(Cy,Ce,Le){Cy=Ce+2097152>>>0<4194305-!!Cy?(Cy>>>0)+4294967296*Ce:NaN,Le>>>=0,Cy=new Date(1e3*Cy),$()[Le>>>2>>>0]=Cy.getSeconds(),$()[Le+4>>>2>>>0]=Cy.getMinutes(),$()[Le+8>>>2>>>0]=Cy.getHours(),$()[Le+12>>>2>>>0]=Cy.getDate(),$()[Le+16>>>2>>>0]=Cy.getMonth(),$()[Le+20>>>2>>>0]=Cy.getFullYear()-1900,$()[Le+24>>>2>>>0]=Cy.getDay(),Ce=(CS(Cy.getFullYear())?Sye:Mye)[Cy.getMonth()]+Cy.getDate()-1|0,$()[Le+28>>>2>>>0]=Ce,$()[Le+36>>>2>>>0]=-(60*Cy.getTimezoneOffset()),Ce=new Date(Cy.getFullYear(),6,1).getTimezoneOffset();var gy=new Date(Cy.getFullYear(),0,1).getTimezoneOffset();Cy=(Ce!=gy&&Cy.getTimezoneOffset()==Math.min(gy,Ce))|0,$()[Le+32>>>2>>>0]=Cy},u:function(Cy){Cy>>>=0;var Ce=new Date($()[Cy+20>>>2>>>0]+1900,$()[Cy+16>>>2>>>0],$()[Cy+12>>>2>>>0],$()[Cy+8>>>2>>>0],$()[Cy+4>>>2>>>0],$()[Cy>>>2>>>0],0),Le=$()[Cy+32>>>2>>>0],gy=Ce.getTimezoneOffset(),X$=new Date(Ce.getFullYear(),6,1).getTimezoneOffset(),aS=new Date(Ce.getFullYear(),0,1).getTimezoneOffset(),_S=Math.min(aS,X$);return 0>Le?$()[Cy+32>>>2>>>0]=+(X$!=aS&&_S==gy):0<Le!=(_S==gy)&&(X$=Math.max(aS,X$),Ce.setTime(Ce.getTime()+6e4*((0<Le?_S:X$)-gy))),$()[Cy+24>>>2>>>0]=Ce.getDay(),Le=(CS(Ce.getFullYear())?Sye:Mye)[Ce.getMonth()]+Ce.getDate()-1|0,$()[Cy+28>>>2>>>0]=Le,$()[Cy>>>2>>>0]=Ce.getSeconds(),$()[Cy+4>>>2>>>0]=Ce.getMinutes(),$()[Cy+8>>>2>>>0]=Ce.getHours(),$()[Cy+12>>>2>>>0]=Ce.getDate(),$()[Cy+16>>>2>>>0]=Ce.getMonth(),$()[Cy+20>>>2>>>0]=Ce.getYear(),Cy=Ce.getTime(),Cy=isNaN(Cy)?-1:Cy/1e3,S2e((cS=Cy,1<=+Math.abs(cS)?0<cS?+Math.floor(cS/4294967296)>>>0:~~+Math.ceil((cS-+(~~cS>>>0))/4294967296)>>>0:0)),Cy>>>0},q:rwe,r:awe,y:function(Cy,Ce,Le,gy){Cy>>>=0,Ce>>>=0,Le>>>=0,gy>>>=0;var X$=new Date().getFullYear(),aS=new Date(X$,0,1),_S=new Date(X$,6,1);X$=aS.getTimezoneOffset();var yye=_S.getTimezoneOffset(),xye=Math.max(X$,yye);y()[Cy>>>2>>>0]=60*xye,$()[Ce>>>2>>>0]=+(X$!=yye),Cy=Oye=>Oye.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],aS=Cy(aS),_S=Cy(_S),yye<X$?(Owe(aS,Le,17),Owe(_S,gy,17)):(Owe(aS,gy,17),Owe(_S,Le,17))},c:()=>{Z$("")},O:function(Cy,Ce,Le){Cy>>>=0,Ce>>>=0,Le>>>=0,$we.length=0;for(var gy;gy=b()[Ce++>>>0];){var X$=gy!=105;X$&=gy!=112,Le+=X$&&Le%8?4:0,$we.push(gy==112?y()[Le>>>2>>>0]:gy==105?$()[Le>>>2>>>0]:x()[Le>>>3>>>0]),Le+=X$?8:4}return wS[Cy](...$we)},k:()=>{},i:()=>Date.now(),U:()=>{throw pS+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>he?(Cp$2(),ar$1(Lp$2)).cpus().length:navigator.hardwareConcurrency,x:function(Cy){Cy>>>=0;var Ce=b().length;if(Cy<=Ce||4294901760<Cy)return!1;for(var Le=1;4>=Le;Le*=2){var gy=Ce*(1+.2/Le);gy=Math.min(gy,Cy+100663296);var X$=Math;gy=Math.max(Cy,gy);e:{X$=(X$.min.call(X$,4294901760,gy+(65536-gy%65536)%65536)-K$.buffer.byteLength+65535)/65536;try{K$.grow(X$),lS();var aS=1;break e}catch{}aS=void 0}if(aS)return!0}return!1},M:pwe,N:v2e,G:$ye,g:u2e,m:Ywe,v:F2e,l:Uwe,a:K$||C.wasmMemory,w:y_e,d:function(Cy,Ce,Le,gy){return y_e(Cy>>>0,Ce>>>0,Le>>>0,gy>>>0)}},qye=function(){function Cy(Le,gy){return qye=Le.exports,qye=r2e(),HS.ab.push(qye.ya),sS=qye.za,BS.unshift(qye.V),Y$=gy,nS(),qye}var Ce={a:j2e};if(zS++,C.instantiateWasm)try{return C.instantiateWasm(Ce,Cy)}catch(Le){$t(`Module.instantiateWasm callback failed with error: ${Le}`),N(Le)}return eS(Ce,function(Le){Cy(Le.instance,Le.module)}).catch(N),{}}();C._OrtInit=(Cy,Ce)=>(C._OrtInit=qye.W)(Cy,Ce),C._OrtGetLastError=(Cy,Ce)=>(C._OrtGetLastError=qye.X)(Cy,Ce),C._OrtCreateSessionOptions=(Cy,Ce,Le,gy,X$,aS,_S,yye,xye,Oye)=>(C._OrtCreateSessionOptions=qye.Y)(Cy,Ce,Le,gy,X$,aS,_S,yye,xye,Oye),C._OrtAppendExecutionProvider=(Cy,Ce)=>(C._OrtAppendExecutionProvider=qye.Z)(Cy,Ce),C._OrtAddFreeDimensionOverride=(Cy,Ce,Le)=>(C._OrtAddFreeDimensionOverride=qye._)(Cy,Ce,Le),C._OrtAddSessionConfigEntry=(Cy,Ce,Le)=>(C._OrtAddSessionConfigEntry=qye.$)(Cy,Ce,Le),C._OrtReleaseSessionOptions=Cy=>(C._OrtReleaseSessionOptions=qye.aa)(Cy),C._OrtCreateSession=(Cy,Ce,Le)=>(C._OrtCreateSession=qye.ba)(Cy,Ce,Le),C._OrtReleaseSession=Cy=>(C._OrtReleaseSession=qye.ca)(Cy),C._OrtGetInputOutputCount=(Cy,Ce,Le)=>(C._OrtGetInputOutputCount=qye.da)(Cy,Ce,Le),C._OrtGetInputName=(Cy,Ce)=>(C._OrtGetInputName=qye.ea)(Cy,Ce),C._OrtGetOutputName=(Cy,Ce)=>(C._OrtGetOutputName=qye.fa)(Cy,Ce),C._OrtFree=Cy=>(C._OrtFree=qye.ga)(Cy),C._OrtCreateTensor=(Cy,Ce,Le,gy,X$,aS)=>(C._OrtCreateTensor=qye.ha)(Cy,Ce,Le,gy,X$,aS),C._OrtGetTensorData=(Cy,Ce,Le,gy,X$)=>(C._OrtGetTensorData=qye.ia)(Cy,Ce,Le,gy,X$),C._OrtReleaseTensor=Cy=>(C._OrtReleaseTensor=qye.ja)(Cy),C._OrtCreateRunOptions=(Cy,Ce,Le,gy)=>(C._OrtCreateRunOptions=qye.ka)(Cy,Ce,Le,gy),C._OrtAddRunConfigEntry=(Cy,Ce,Le)=>(C._OrtAddRunConfigEntry=qye.la)(Cy,Ce,Le),C._OrtReleaseRunOptions=Cy=>(C._OrtReleaseRunOptions=qye.ma)(Cy),C._OrtCreateBinding=Cy=>(C._OrtCreateBinding=qye.na)(Cy),C._OrtBindInput=(Cy,Ce,Le)=>(C._OrtBindInput=qye.oa)(Cy,Ce,Le),C._OrtBindOutput=(Cy,Ce,Le,gy)=>(C._OrtBindOutput=qye.pa)(Cy,Ce,Le,gy),C._OrtClearBoundOutputs=Cy=>(C._OrtClearBoundOutputs=qye.qa)(Cy),C._OrtReleaseBinding=Cy=>(C._OrtReleaseBinding=qye.ra)(Cy),C._OrtRunWithBinding=(Cy,Ce,Le,gy,X$)=>(C._OrtRunWithBinding=qye.sa)(Cy,Ce,Le,gy,X$),C._OrtRun=(Cy,Ce,Le,gy,X$,aS,_S,yye)=>(C._OrtRun=qye.ta)(Cy,Ce,Le,gy,X$,aS,_S,yye),C._OrtEndProfiling=Cy=>(C._OrtEndProfiling=qye.ua)(Cy);var Z2e=C._pthread_self=()=>(Z2e=C._pthread_self=qye.va)();C._malloc=Cy=>(C._malloc=qye.wa)(Cy),C._free=Cy=>(C._free=qye.xa)(Cy),C.__emscripten_tls_init=()=>(C.__emscripten_tls_init=qye.ya)();var Yye=C.__emscripten_thread_init=(Cy,Ce,Le,gy,X$,aS)=>(Yye=C.__emscripten_thread_init=qye.Aa)(Cy,Ce,Le,gy,X$,aS);C.__emscripten_thread_crashed=()=>(C.__emscripten_thread_crashed=qye.Ba)();var V2e=(Cy,Ce,Le,gy,X$)=>(V2e=qye.Ca)(Cy,Ce,Le,gy,X$),o2e=Cy=>(o2e=qye.Da)(Cy),Lwe=C.__emscripten_thread_exit=Cy=>(Lwe=C.__emscripten_thread_exit=qye.Ea)(Cy),A2e=()=>(A2e=qye.Fa)(),S2e=Cy=>(S2e=qye.Ga)(Cy),I2e=(Cy,Ce)=>(I2e=qye.Ha)(Cy,Ce),Wwe=Cy=>(Wwe=qye.Ia)(Cy),H2e=Cy=>(H2e=qye.Ja)(Cy),Zwe=()=>(Zwe=qye.Ka)();function r2e(){var Cy=qye;Cy=Object.assign({},Cy);var Ce=gy=>()=>gy()>>>0,Le=gy=>X$=>gy(X$)>>>0;return Cy.va=Ce(Cy.va),Cy.wa=Le(Cy.wa),Cy.emscripten_main_runtime_thread_id=Ce(Cy.emscripten_main_runtime_thread_id),Cy.Ja=Le(Cy.Ja),Cy.Ka=Ce(Cy.Ka),Cy}C.wasmMemory=K$,C.stackSave=()=>Zwe(),C.stackRestore=Cy=>Wwe(Cy),C.stackAlloc=Cy=>H2e(Cy),C.keepRuntimeAlive=()=>0<pS,C.UTF8ToString=swe,C.stringToUTF8=Owe,C.lengthBytesUTF8=hwe,C.ExitStatus=xS,C.PThread=HS;var M2e;LS=function Cy(){M2e||c2e(),M2e||(LS=Cy)};function c2e(){if(!(0<zS))if(ge)E(C),ge||Aye(BS),startWorker(C);else{if(C.preRun)for(typeof C.preRun=="function"&&(C.preRun=[C.preRun]);C.preRun.length;)IS.unshift(C.preRun.shift());Aye(IS),0<zS||M2e||(M2e=!0,C.calledRun=!0,W$||(ge||Aye(BS),E(C),ge||Aye(MS)))}}return c2e(),W}})();typeof s=="object"&&typeof l=="object"?l.exports=c:typeof define=="function"&&define.amd&&define([],()=>c)}),Bp$2=me((s,l)=>{l.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),Rp$2,sg$1,oa$2,ia$2,So$2,Np$1,ug$1,lg$1,fg$1,Mp$1,De$1,Ur$1=L$1(()=>{Rp$2=Pp$1(),sg$1=kp$2(),ia$2=!1,So$2=!1,Np$1=!1,ug$1=s=>{if(s===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+s+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+s+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},lg$1=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},fg$1=(s,l)=>s?l?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":l?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Mp$1=async s=>{if(ia$2)return Promise.resolve();if(So$2)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Np$1)throw new Error("previous call to 'initializeWebAssembly()' failed.");So$2=!0;let l=s.initTimeout,c=s.numThreads,d=s.simd,f=ug$1(c),g=d&&lg$1(),v=s.wasmPaths,b=typeof v=="string"?v:void 0,$=fg$1(g,f),y=typeof v=="object"?v[$]:void 0,x=!1,C=[];if(l>0&&C.push(new Promise(E=>{setTimeout(()=>{x=!0,E()},l)})),C.push(new Promise((E,N)=>{let W=f?sg$1:Rp$2,q={locateFile:(Y,re)=>f&&Y.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Bp$2()],{type:"text/javascript"})):Y.endsWith(".wasm")?y||(b??re)+$:re+Y};if(f)if(q.numThreads=c,typeof Blob>"u")q.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let Y=`var ortWasmThreaded=${W.toString()};`;q.mainScriptUrlOrBlob=new Blob([Y],{type:"text/javascript"})}W(q).then(Y=>{So$2=!1,ia$2=!0,oa$2=Y,E()},Y=>{So$2=!1,Np$1=!0,N(Y)})})),await Promise.race(C),x)throw new Error(`WebAssembly backend initializing failed due to timeout: ${l}ms`)},De$1=()=>{if(ia$2&&oa$2)return oa$2;throw new Error("WebAssembly is not initialized yet.")}}),ve$1,bn$1,_e$1,Ao$1=L$1(()=>{Ur$1(),ve$1=(s,l)=>{let c=De$1(),d=c.lengthBytesUTF8(s)+1,f=c._malloc(d);return c.stringToUTF8(s,f,d),l.push(f),f},bn$1=(s,l,c,d)=>{if(typeof s=="object"&&s!==null){if(c.has(s))throw new Error("Circular reference in options");c.add(s)}Object.entries(s).forEach(([f,g])=>{let v=l?l+f:f;if(typeof g=="object")bn$1(g,v+".",c,d);else if(typeof g=="string"||typeof g=="number")d(v,g.toString());else if(typeof g=="boolean")d(v,g?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof g}`)})},_e$1=s=>{let l=De$1(),c=l.stackSave();try{let d=l.stackAlloc(8);l._OrtGetLastError(d,d+4);let f=l.HEAP32[d/4],g=l.HEAPU32[d/4+1],v=g?l.UTF8ToString(g):"";throw new Error(`${s} ERROR_CODE: ${f}, ERROR_MESSAGE: ${v}`)}finally{l.stackRestore(c)}}}),Gp$2,Up$2=L$1(()=>{Ur$1(),Ao$1(),Gp$2=s=>{let l=De$1(),c=0,d=[],f=s||{};try{if((s==null?void 0:s.logSeverityLevel)===void 0)f.logSeverityLevel=2;else if(typeof s.logSeverityLevel!="number"||!Number.isInteger(s.logSeverityLevel)||s.logSeverityLevel<0||s.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${s.logSeverityLevel}`);if((s==null?void 0:s.logVerbosityLevel)===void 0)f.logVerbosityLevel=0;else if(typeof s.logVerbosityLevel!="number"||!Number.isInteger(s.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${s.logVerbosityLevel}`);(s==null?void 0:s.terminate)===void 0&&(f.terminate=!1);let g=0;return(s==null?void 0:s.tag)!==void 0&&(g=ve$1(s.tag,d)),c=l._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,g),c===0&&_e$1("Can't create run options."),(s==null?void 0:s.extra)!==void 0&&bn$1(s.extra,"",new WeakSet,(v,b)=>{let $=ve$1(v,d),y=ve$1(b,d);l._OrtAddRunConfigEntry(c,$,y)!==0&&_e$1(`Can't set a run config entry: ${v} - ${b}.`)}),[c,d]}catch(g){throw c!==0&&l._OrtReleaseRunOptions(c),d.forEach(v=>l._free(v)),g}}}),cg$1,pg$1,dg$1,hg$1,zp$2,Vp$2=L$1(()=>{Ur$1(),Ao$1(),cg$1=s=>{switch(s){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${s}`)}},pg$1=s=>{switch(s){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${s}`)}},dg$1=s=>{s.extra||(s.extra={}),s.extra.session||(s.extra.session={});let l=s.extra.session;l.use_ort_model_bytes_directly||(l.use_ort_model_bytes_directly="1"),s.executionProviders&&s.executionProviders.some(c=>(typeof c=="string"?c:c.name)==="webgpu")&&(s.enableMemPattern=!1)},hg$1=(s,l,c)=>{for(let d of l){let f=typeof d=="string"?d:d.name;switch(f){case"webnn":if(f="WEBNN",typeof d!="string"){let v=d;if(v!=null&&v.deviceType){let b=ve$1("deviceType",c),$=ve$1(v.deviceType,c);De$1()._OrtAddSessionConfigEntry(s,b,$)!==0&&_e$1(`Can't set a session config entry: 'deviceType' - ${v.deviceType}.`)}if(v!=null&&v.numThreads){let b=v.numThreads;(typeof b!="number"||!Number.isInteger(b)||b<0)&&(b=0);let $=ve$1("numThreads",c),y=ve$1(b.toString(),c);De$1()._OrtAddSessionConfigEntry(s,$,y)!==0&&_e$1(`Can't set a session config entry: 'numThreads' - ${v.numThreads}.`)}if(v!=null&&v.powerPreference){let b=ve$1("powerPreference",c),$=ve$1(v.powerPreference,c);De$1()._OrtAddSessionConfigEntry(s,b,$)!==0&&_e$1(`Can't set a session config entry: 'powerPreference' - ${v.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof d!="string"){let v=d;if(v!=null&&v.preferredLayout){if(v.preferredLayout!=="NCHW"&&v.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${v.preferredLayout}`);let b=ve$1("preferredLayout",c),$=ve$1(v.preferredLayout,c);De$1()._OrtAddSessionConfigEntry(s,b,$)!==0&&_e$1(`Can't set a session config entry: 'preferredLayout' - ${v.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let g=ve$1(f,c);De$1()._OrtAppendExecutionProvider(s,g)!==0&&_e$1(`Can't append execution provider: ${f}.`)}},zp$2=s=>{let l=De$1(),c=0,d=[],f=s||{};dg$1(f);try{let g=cg$1(f.graphOptimizationLevel??"all"),v=pg$1(f.executionMode??"sequential"),b=typeof f.logId=="string"?ve$1(f.logId,d):0,$=f.logSeverityLevel??2;if(!Number.isInteger($)||$<0||$>4)throw new Error(`log serverity level is not valid: ${$}`);let y=f.logVerbosityLevel??0;if(!Number.isInteger(y)||y<0||y>4)throw new Error(`log verbosity level is not valid: ${y}`);let x=typeof f.optimizedModelFilePath=="string"?ve$1(f.optimizedModelFilePath,d):0;if(c=l._OrtCreateSessionOptions(g,!!f.enableCpuMemArena,!!f.enableMemPattern,v,!!f.enableProfiling,0,b,$,y,x),c===0&&_e$1("Can't create session options."),f.executionProviders&&hg$1(c,f.executionProviders,d),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let C=ve$1("enableGraphCapture",d),E=ve$1(f.enableGraphCapture.toString(),d);l._OrtAddSessionConfigEntry(c,C,E)!==0&&_e$1(`Can't set a session config entry: 'enableGraphCapture' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[C,E]of Object.entries(f.freeDimensionOverrides)){if(typeof C!="string")throw new Error(`free dimension override name must be a string: ${C}`);if(typeof E!="number"||!Number.isInteger(E)||E<0)throw new Error(`free dimension override value must be a non-negative integer: ${E}`);let N=ve$1(C,d);l._OrtAddFreeDimensionOverride(c,N,E)!==0&&_e$1(`Can't set a free dimension override: ${C} - ${E}.`)}return f.extra!==void 0&&bn$1(f.extra,"",new WeakSet,(C,E)=>{let N=ve$1(C,d),W=ve$1(E,d);l._OrtAddSessionConfigEntry(c,N,W)!==0&&_e$1(`Can't set a session config entry: ${C} - ${E}.`)}),[c,d]}catch(g){throw c!==0&&l._OrtReleaseSessionOptions(c),d.forEach(v=>l._free(v)),g}}}),aa$2,Wp$2,sa$2,Hp$2,qp$2,Po$1,jp$2,ua$2=L$1(()=>{aa$2=s=>{switch(s){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${s}`)}},Wp$2=s=>{switch(s){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${s}`)}},sa$2=s=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][s],Hp$2=s=>{switch(s){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${s}`)}},qp$2=s=>{switch(s){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${s}`)}},Po$1=s=>s==="float32"||s==="float16"||s==="int32"||s==="int64"||s==="uint32"||s==="uint8"||s==="bool",jp$2=s=>{switch(s){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${s}`)}}}),gn$1,la$2=L$1(()=>{gn$1=async s=>{if(typeof s=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(s))}catch(l){if(l.code==="ERR_FS_FILE_TOO_LARGE"){let c=(void 0)(s),d=[];for await(let f of c)d.push(f);return new Uint8Array(Buffer.concat(d))}throw l}else{let l=await fetch(s);if(!l.ok)throw new Error(`failed to load external data file: ${s}`);let c=l.headers.get("Content-Length"),d=c?parseInt(c,10):0;if(d<1073741824)return new Uint8Array(await l.arrayBuffer());{if(!l.body)throw new Error(`failed to load external data file: ${s}, no response body.`);let f=l.body.getReader(),g;try{g=new ArrayBuffer(d)}catch(b){if(b instanceof RangeError){let $=Math.ceil(d/65536);g=new WebAssembly.Memory({initial:$,maximum:$}).buffer}else throw b}let v=0;for(;;){let{done:b,value:$}=await f.read();if(b)break;let y=$.byteLength;new Uint8Array(g,v,y).set($),v+=y}return new Uint8Array(g,0,d)}}else return s instanceof Blob?new Uint8Array(await s.arrayBuffer()):s instanceof Uint8Array?s:new Uint8Array(s)}}),mg$1,Xp$2,Kp$2,zr$2,bg$1,fa$2,Jp$2,Zp$2,Yp$2,Qp$2,ed$2,td$2,rd$2=L$1(()=>{Up$2(),Vp$2(),ua$2(),Ur$1(),Ao$1(),la$2(),mg$1=(s,l)=>{De$1()._OrtInit(s,l)!==0&&_e$1("Can't initialize onnxruntime.")},Xp$2=async s=>{mg$1(s.wasm.numThreads,qp$2(s.logLevel))},Kp$2=async(s,l)=>{},zr$2=new Map,bg$1=s=>{let l=De$1(),c=l.stackSave();try{let d=l.stackAlloc(8);return l._OrtGetInputOutputCount(s,d,d+4)!==0&&_e$1("Can't get session input/output count."),[l.HEAP32[d/4],l.HEAP32[d/4+1]]}finally{l.stackRestore(c)}},fa$2=s=>{let l=De$1(),c=l._malloc(s.byteLength);if(c===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${s.byteLength}.`);return l.HEAPU8.set(s,c),[c,s.byteLength]},Jp$2=async(s,l)=>{var x;let c,d,f=De$1();Array.isArray(s)?[c,d]=s:s.buffer===f.HEAPU8.buffer?[c,d]=[s.byteOffset,s.byteLength]:[c,d]=fa$2(s);let g=0,v=0,b=[],$=[],y=[];try{if([v,b]=zp$2(l),(l==null?void 0:l.externalData)&&f.mountExternalData){let se=[];for(let de of l.externalData){let he=typeof de=="string"?de:de.path;se.push(gn$1(typeof de=="string"?de:de.data).then(ge=>{f.mountExternalData(he,ge)}))}await Promise.all(se)}g=await f._OrtCreateSession(c,d,v),g===0&&_e$1("Can't create a session.");let[C,E]=bg$1(g),N=!!(l!=null&&l.enableGraphCapture),W=[],q=[],Y=[];for(let se=0;se<C;se++){let de=f._OrtGetInputName(g,se);de===0&&_e$1("Can't get an input name."),$.push(de),W.push(f.UTF8ToString(de))}for(let se=0;se<E;se++){let de=f._OrtGetOutputName(g,se);de===0&&_e$1("Can't get an output name."),y.push(de);let he=f.UTF8ToString(de);q.push(he)}return zr$2.set(g,[g,$,y,null,N,!1]),[g,W,q]}catch(C){throw $.forEach(E=>f._OrtFree(E)),y.forEach(E=>f._OrtFree(E)),g!==0&&f._OrtReleaseSession(g),C}finally{f._free(c),v!==0&&f._OrtReleaseSessionOptions(v),b.forEach(C=>f._free(C)),(x=f.unmountExternalData)==null||x.call(f)}},Zp$2=s=>{var $;let l=De$1(),c=zr$2.get(s);if(!c)throw new Error(`cannot release session. invalid session id: ${s}`);let[d,f,g,v,b]=c;v&&(b&&l._OrtClearBoundOutputs(v.handle),l._OrtReleaseBinding(v.handle)),($=l.jsepOnReleaseSession)==null||$.call(l,s),f.forEach(y=>l._OrtFree(y)),g.forEach(y=>l._OrtFree(y)),l._OrtReleaseSession(d),zr$2.delete(s)},Yp$2=(s,l,c,d,f,g=!1)=>{if(!s){l.push(0);return}let v=De$1(),b=s[0],$=s[1],y=s[3],x,C;if(b==="string"&&y==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(g&&y!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(y==="gpu-buffer"){let W=s[2].gpuBuffer,q=sa$2(aa$2(b));C=$.reduce((re,se)=>re*se,1)*q;let Y=v.jsepRegisterBuffer;if(!Y)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');x=Y(d,f,W,C)}else{let W=s[2];if(Array.isArray(W)){C=4*W.length,x=v._malloc(C),c.push(x);let q=x/4;for(let Y=0;Y<W.length;Y++){if(typeof W[Y]!="string")throw new TypeError(`tensor data at index ${Y} is not a string`);v.HEAPU32[q++]=ve$1(W[Y],c)}}else C=W.byteLength,x=v._malloc(C),c.push(x),v.HEAPU8.set(new Uint8Array(W.buffer,W.byteOffset,C),x)}let E=v.stackSave(),N=v.stackAlloc(4*$.length);try{let W=N/4;$.forEach(Y=>v.HEAP32[W++]=Y);let q=v._OrtCreateTensor(aa$2(b),x,C,N,$.length,jp$2(y));q===0&&_e$1(`Can't create tensor for input/output. session=${d}, index=${f}.`),l.push(q)}finally{v.stackRestore(E)}},Qp$2=async(s,l,c,d,f,g)=>{var Be;let v=De$1(),b=zr$2.get(s);if(!b)throw new Error(`cannot run inference. invalid session id: ${s}`);let $=b[0],y=b[1],x=b[2],C=b[3],E=b[4];b[5];let N=l.length,W=d.length,q=0,Y=[],re=[],se=[],de=[],he=v.stackSave(),ge=v.stackAlloc(N*4),Se=v.stackAlloc(N*4),Ae=v.stackAlloc(W*4),Re=v.stackAlloc(W*4);try{[q,Y]=Gp$2(g);for(let $t=0;$t<N;$t++)Yp$2(c[$t],re,de,s,l[$t],E);for(let $t=0;$t<W;$t++)Yp$2(f[$t],se,de,s,N+d[$t],E);let Ke=ge/4,Lr=Se/4,_y=Ae/4,by=Re/4;for(let $t=0;$t<N;$t++)v.HEAPU32[Ke++]=re[$t],v.HEAPU32[Lr++]=y[l[$t]];for(let $t=0;$t<W;$t++)v.HEAPU32[_y++]=se[$t],v.HEAPU32[by++]=x[d[$t]];(Be=v.jsepOnRunStart)==null||Be.call(v,$);let yy;yy=await v._OrtRun($,Se,ge,N,Re,W,Ae,q),yy!==0&&_e$1("failed to call OrtRun().");let my=[];for(let $t=0;$t<W;$t++){let K$=v.HEAPU32[Ae/4+$t];if(K$===se[$t]){my.push(f[$t]);continue}let Y$=v.stackSave(),W$=v.stackAlloc(4*4),U$=!1,hy,G$=0;try{v._OrtGetTensorData(K$,W$,W$+4,W$+8,W$+12)!==0&&_e$1(`Can't access output tensor data on index ${$t}.`);let ky=W$/4,$y=v.HEAPU32[ky++];G$=v.HEAPU32[ky++];let rS=v.HEAPU32[ky++],lS=v.HEAPU32[ky++],bS=[];for(let MS=0;MS<lS;MS++)bS.push(v.HEAPU32[rS/4+MS]);v._OrtFree(rS);let IS=bS.reduce((MS,zS)=>MS*zS,1);hy=Wp$2($y);let BS=C==null?void 0:C.outputPreferredLocations[d[$t]];if(hy==="string"){if(BS==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let MS=[],zS=G$/4;for(let LS=0;LS<IS;LS++){let nS=v.HEAPU32[zS++],Z$=LS===IS-1?void 0:v.HEAPU32[zS]-nS;MS.push(v.UTF8ToString(nS,Z$))}my.push([hy,bS,MS,"cpu"])}else if(BS==="gpu-buffer"&&IS>0){let MS=v.jsepGetBuffer;if(!MS)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let zS=MS(G$),LS=sa$2($y);if(LS===void 0||!Po$1(hy))throw new Error(`Unsupported data type: ${hy}`);U$=!0,my.push([hy,bS,{gpuBuffer:zS,download:v.jsepCreateDownloader(zS,IS*LS,hy),dispose:()=>{v._OrtReleaseTensor(K$)}},"gpu-buffer"])}else{let MS=Hp$2(hy),zS=new MS(IS);new Uint8Array(zS.buffer,zS.byteOffset,zS.byteLength).set(v.HEAPU8.subarray(G$,G$+zS.byteLength)),my.push([hy,bS,zS,"cpu"])}}finally{v.stackRestore(Y$),hy==="string"&&G$&&v._free(G$),U$||v._OrtReleaseTensor(K$)}}return C&&!E&&(v._OrtClearBoundOutputs(C.handle),zr$2.set(s,[$,y,x,C,E,!1])),my}finally{v.stackRestore(he),re.forEach(Ke=>v._OrtReleaseTensor(Ke)),se.forEach(Ke=>v._OrtReleaseTensor(Ke)),de.forEach(Ke=>v._free(Ke)),q!==0&&v._OrtReleaseRunOptions(q),Y.forEach(Ke=>v._free(Ke))}},ed$2=s=>{let l=De$1(),c=zr$2.get(s);if(!c)throw new Error("invalid session id");let d=c[0],f=l._OrtEndProfiling(d);f===0&&_e$1("Can't get an profile file name."),l._OrtFree(f)},td$2=s=>{let l=[];for(let c of s){let d=c[2];!Array.isArray(d)&&"buffer"in d&&l.push(d.buffer)}return l}}),nd$2=me((s,l)=>{l.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var vt=Object.defineProperty;var qr=Object.getOwnPropertyDescriptor;var Vr=Object.getOwnPropertyNames;var Jr=Object.prototype.hasOwnProperty;var _t=(i,c)=>()=>(i&&(c=i(i=0)),c);var Ke=(i,c)=>()=>(c||i((c={exports:{}}).exports,c),c.exports),Et=(i,c)=>{for(var a in c)vt(i,a,{get:c[a],enumerable:!0})},Xr=(i,c,a,h)=>{if(c&&typeof c=="object"||typeof c=="function")for(let f of Vr(c))!Jr.call(i,f)&&f!==a&&vt(i,f,{get:()=>c[f],enumerable:!(h=qr(c,f))||h.enumerable});return i};var et=i=>Xr(vt({},"__esModule",{value:!0}),i);var St={};Et(St,{createReadStream:()=>lr,readFile:()=>Qr,readFileSync:()=>Zr});var Qr,Zr,lr,At=_t(()=>{Qr=void 0,Zr=void 0,lr=void 0});var Tt={};Et(Tt,{join:()=>Kr});var Kr,Mt=_t(()=>{Kr=void 0});var pr=Ke((dr,Ct)=>{"use strict";var cr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){var a=c,h,f,w=new Promise((t,o)=>{h=t,f=o}),g=Object.assign({},a),s="./this.program",S=typeof window=="object",x=typeof importScripts=="function",H=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",A="",I,V,R;if(H){var B=(At(),et(St)),D=(Mt(),et(Tt));A=x?D.dirname(A)+"/":__dirname+"/",I=(t,o)=>(t=ce(t)?new URL(t):D.normalize(t),B.readFileSync(t,o?void 0:"utf8")),R=t=>(t=I(t,!0),t.buffer||(t=new Uint8Array(t)),t),V=(t,o,u,m=!0)=>{t=ce(t)?new URL(t):D.normalize(t),B.readFile(t,m?void 0:"utf8",(O,E)=>{O?u(O):o(m?E.buffer:E)})},!a.thisProgram&&1<process.argv.length&&(s=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2)}else(S||x)&&(x?A=self.location.href:typeof document<"u"&&document.currentScript&&(A=document.currentScript.src),i&&(A=i),A.startsWith("blob:")?A="":A=A.substr(0,A.replace(/[?#].*/,"").lastIndexOf("/")+1),I=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.send(null),o.responseText},x&&(R=t=>{var o=new XMLHttpRequest;return o.open("GET",t,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),V=(t,o,u)=>{var m=new XMLHttpRequest;m.open("GET",t,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):u()},m.onerror=u,m.send(null)});var T=console.log.bind(console),L=console.error.bind(console);Object.assign(a,g),g=null;var W,de=!1,pe,Z,_,J,Pe;function le(){var t=W.buffer;a.HEAP8=pe=new Int8Array(t),a.HEAP16=new Int16Array(t),a.HEAPU8=Z=new Uint8Array(t),a.HEAPU16=new Uint16Array(t),a.HEAP32=_=new Int32Array(t),a.HEAPU32=J=new Uint32Array(t),a.HEAPF32=new Float32Array(t),a.HEAPF64=Pe=new Float64Array(t)}var Ie=[],ne=[],X=[],we=0,me=null,F=null;function ie(t){throw t="Aborted("+t+")",L(t),de=!0,t=new WebAssembly.RuntimeError(t+". Build with -sASSERTIONS for more info."),f(t),t}var xe=t=>t.startsWith("data:application/octet-stream;base64,"),ce=t=>t.startsWith("file://"),be;if(be="ort-wasm.wasm",!xe(be)){var ae=be;be=a.locateFile?a.locateFile(ae,A):A+ae}function K(t){if(R)return R(t);throw"both async and sync fetching of the wasm failed"}function je(t){if(S||x){if(typeof fetch=="function"&&!ce(t))return fetch(t,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw`failed to load wasm binary file at \'${t}\'`;return o.arrayBuffer()}).catch(()=>K(t));if(V)return new Promise((o,u)=>{V(t,m=>o(new Uint8Array(m)),u)})}return Promise.resolve().then(()=>K(t))}function Oe(t,o,u){return je(t).then(m=>WebAssembly.instantiate(m,o)).then(u,m=>{L(`failed to asynchronously prepare wasm: ${m}`),ie(m)})}function Ue(t,o){var u=be;return typeof WebAssembly.instantiateStreaming!="function"||xe(u)||ce(u)||H||typeof fetch!="function"?Oe(u,t,o):fetch(u,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,t).then(o,function(O){return L(`wasm streaming compile failed: ${O}`),L("falling back to ArrayBuffer instantiation"),Oe(u,t,o)}))}var ve,Ae={798088:(t,o,u,m)=>{if(typeof a>"u"||!a.ya)return 1;if(t=ue(t>>>0),t.startsWith("./")&&(t=t.substring(2)),t=a.ya.get(t),!t)return 2;if(o>>>=0,u>>>=0,o+u>t.byteLength)return 3;try{return Z.set(t.subarray(o,o+u),m>>>0>>>0),0}catch{return 4}}};class _e{constructor(o){this.wa=o-24}}var ge=0,Be=0,te=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,re=(t,o,u)=>{o>>>=0;var m=o+u;for(u=o;t[u]&&!(u>=m);)++u;if(16<u-o&&t.buffer&&te)return te.decode(t.subarray(o,u));for(m="";o<u;){var O=t[o++];if(O&128){var E=t[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|E);else{var U=t[o++]&63;O=(O&240)==224?(O&15)<<12|E<<6|U:(O&7)<<18|E<<12|U<<6|t[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},ue=(t,o)=>(t>>>=0)?re(Z,t,o):"",Ee=t=>{for(var o=0,u=0;u<t.length;++u){var m=t.charCodeAt(u);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++u):o+=3}return o},Se=(t,o,u,m)=>{if(u>>>=0,!(0<m))return 0;var O=u;m=u+m-1;for(var E=0;E<t.length;++E){var U=t.charCodeAt(E);if(55296<=U&&57343>=U){var ee=t.charCodeAt(++E);U=65536+((U&1023)<<10)|ee&1023}if(127>=U){if(u>=m)break;o[u++>>>0]=U}else{if(2047>=U){if(u+1>=m)break;o[u++>>>0]=192|U>>6}else{if(65535>=U){if(u+2>=m)break;o[u++>>>0]=224|U>>12}else{if(u+3>=m)break;o[u++>>>0]=240|U>>18,o[u++>>>0]=128|U>>12&63}o[u++>>>0]=128|U>>6&63}o[u++>>>0]=128|U&63}}return o[u>>>0]=0,u-O},Le=t=>t%4===0&&(t%100!==0||t%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],rt=[0,31,59,90,120,151,181,212,243,273,304,334],Te=[],Ge={},ke=()=>{if(!We){var t={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:s||"./this.program"},o;for(o in Ge)Ge[o]===void 0?delete t[o]:t[o]=Ge[o];var u=[];for(o in t)u.push(`${o}=${t[o]}`);We=u}return We},We,nt=[null,[],[]],De=[31,29,31,30,31,30,31,31,30,31,30,31],at=[31,28,31,30,31,30,31,31,30,31,30,31];function G(t){var o=Array(Ee(t)+1);return Se(t,o,0,o.length),o}function qe(t,o,u,m){function O(d,k,$){for(d=typeof d=="number"?d.toString():d||"";d.length<k;)d=$[0]+d;return d}function E(d,k){return O(d,k,"0")}function U(d,k){function $(Ze){return 0>Ze?-1:0<Ze?1:0}var Me;return(Me=$(d.getFullYear()-k.getFullYear()))===0&&(Me=$(d.getMonth()-k.getMonth()))===0&&(Me=$(d.getDate()-k.getDate())),Me}function ee(d){switch(d.getDay()){case 0:return new Date(d.getFullYear()-1,11,29);case 1:return d;case 2:return new Date(d.getFullYear(),0,3);case 3:return new Date(d.getFullYear(),0,2);case 4:return new Date(d.getFullYear(),0,1);case 5:return new Date(d.getFullYear()-1,11,31);case 6:return new Date(d.getFullYear()-1,11,30)}}function ye(d){var k=d.sa;for(d=new Date(new Date(d.ta+1900,0,1).getTime());0<k;){var $=d.getMonth(),Me=(Le(d.getFullYear())?De:at)[$];if(k>Me-d.getDate())k-=Me-d.getDate()+1,d.setDate(1),11>$?d.setMonth($+1):(d.setMonth(0),d.setFullYear(d.getFullYear()+1));else{d.setDate(d.getDate()+k);break}}return $=new Date(d.getFullYear()+1,0,4),k=ee(new Date(d.getFullYear(),0,4)),$=ee($),0>=U(k,d)?0>=U($,d)?d.getFullYear()+1:d.getFullYear():d.getFullYear()-1}t>>>=0,o>>>=0,u>>>=0,m>>>=0;var oe=J[m+40>>>2>>>0];m={Ba:_[m>>>2>>>0],Aa:_[m+4>>>2>>>0],ua:_[m+8>>>2>>>0],xa:_[m+12>>>2>>>0],va:_[m+16>>>2>>>0],ta:_[m+20>>>2>>>0],na:_[m+24>>>2>>>0],sa:_[m+28>>>2>>>0],Da:_[m+32>>>2>>>0],za:_[m+36>>>2>>>0],Ca:oe?ue(oe):""},u=ue(u),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)u=u.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Re="January February March April May June July August September October November December".split(" ");oe={"%a":d=>Qe[d.na].substring(0,3),"%A":d=>Qe[d.na],"%b":d=>Re[d.va].substring(0,3),"%B":d=>Re[d.va],"%C":d=>E((d.ta+1900)/100|0,2),"%d":d=>E(d.xa,2),"%e":d=>O(d.xa,2," "),"%g":d=>ye(d).toString().substring(2),"%G":ye,"%H":d=>E(d.ua,2),"%I":d=>(d=d.ua,d==0?d=12:12<d&&(d-=12),E(d,2)),"%j":d=>{for(var k=0,$=0;$<=d.va-1;k+=(Le(d.ta+1900)?De:at)[$++]);return E(d.xa+k,3)},"%m":d=>E(d.va+1,2),"%M":d=>E(d.Aa,2),"%n":()=>`\n`,"%p":d=>0<=d.ua&&12>d.ua?"AM":"PM","%S":d=>E(d.Ba,2),"%t":()=>"	","%u":d=>d.na||7,"%U":d=>E(Math.floor((d.sa+7-d.na)/7),2),"%V":d=>{var k=Math.floor((d.sa+7-(d.na+6)%7)/7);if(2>=(d.na+371-d.sa-2)%7&&k++,k)k==53&&($=(d.na+371-d.sa)%7,$==4||$==3&&Le(d.ta)||(k=1));else{k=52;var $=(d.na+7-d.sa-1)%7;($==4||$==5&&Le(d.ta%400-1))&&k++}return E(k,2)},"%w":d=>d.na,"%W":d=>E(Math.floor((d.sa+7-(d.na+6)%7)/7),2),"%y":d=>(d.ta+1900).toString().substring(2),"%Y":d=>d.ta+1900,"%z":d=>{d=d.za;var k=0<=d;return d=Math.abs(d)/60,(k?"+":"-")+("0000"+(d/60*100+d%60)).slice(-4)},"%Z":d=>d.Ca,"%%":()=>"%"},u=u.replace(/%%/g,"\\0\\0");for(se in oe)u.includes(se)&&(u=u.replace(new RegExp(se,"g"),oe[se](m)));return u=u.replace(/\\0\\0/g,"%"),se=G(u),se.length>o?0:(pe.set(se,t>>>0),se.length-1)}var Ve={a:function(t,o,u){t>>>=0;var m=new _e(t);throw J[m.wa+16>>>2>>>0]=0,J[m.wa+4>>>2>>>0]=o>>>0,J[m.wa+8>>>2>>>0]=u>>>0,ge=t,Be++,ge},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,I:function(t,o,u){return o>>>=0,Z.copyWithin(t>>>0>>>0,o>>>0,o+(u>>>0)>>>0)},n:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getUTCSeconds(),_[u+4>>>2>>>0]=t.getUTCMinutes(),_[u+8>>>2>>>0]=t.getUTCHours(),_[u+12>>>2>>>0]=t.getUTCDate(),_[u+16>>>2>>>0]=t.getUTCMonth(),_[u+20>>>2>>>0]=t.getUTCFullYear()-1900,_[u+24>>>2>>>0]=t.getUTCDay(),_[u+28>>>2>>>0]=(t.getTime()-Date.UTC(t.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(t,o,u){t=o+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*o:NaN,u>>>=0,t=new Date(1e3*t),_[u>>>2>>>0]=t.getSeconds(),_[u+4>>>2>>>0]=t.getMinutes(),_[u+8>>>2>>>0]=t.getHours(),_[u+12>>>2>>>0]=t.getDate(),_[u+16>>>2>>>0]=t.getMonth(),_[u+20>>>2>>>0]=t.getFullYear()-1900,_[u+24>>>2>>>0]=t.getDay(),_[u+28>>>2>>>0]=(Le(t.getFullYear())?ze:rt)[t.getMonth()]+t.getDate()-1|0,_[u+36>>>2>>>0]=-(60*t.getTimezoneOffset()),o=new Date(t.getFullYear(),6,1).getTimezoneOffset();var m=new Date(t.getFullYear(),0,1).getTimezoneOffset();_[u+32>>>2>>>0]=(o!=m&&t.getTimezoneOffset()==Math.min(m,o))|0},p:function(t){t>>>=0;var o=new Date(_[t+20>>>2>>>0]+1900,_[t+16>>>2>>>0],_[t+12>>>2>>>0],_[t+8>>>2>>>0],_[t+4>>>2>>>0],_[t>>>2>>>0],0),u=_[t+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),E=new Date(o.getFullYear(),0,1).getTimezoneOffset(),U=Math.min(E,O);return 0>u?_[t+32>>>2>>>0]=+(O!=E&&U==m):0<u!=(U==m)&&(O=Math.max(E,O),o.setTime(o.getTime()+6e4*((0<u?U:O)-m))),_[t+24>>>2>>>0]=o.getDay(),_[t+28>>>2>>>0]=(Le(o.getFullYear())?ze:rt)[o.getMonth()]+o.getDate()-1|0,_[t>>>2>>>0]=o.getSeconds(),_[t+4>>>2>>>0]=o.getMinutes(),_[t+8>>>2>>>0]=o.getHours(),_[t+12>>>2>>>0]=o.getDate(),_[t+16>>>2>>>0]=o.getMonth(),_[t+20>>>2>>>0]=o.getYear(),t=o.getTime(),t=isNaN(t)?-1:t/1e3,Je((ve=t,1<=+Math.abs(ve)?0<ve?+Math.floor(ve/4294967296)>>>0:~~+Math.ceil((ve-+(~~ve>>>0))/4294967296)>>>0:0)),t>>>0},l:function(){return-52},m:function(){},t:function(t,o,u,m){u>>>=0,m>>>=0;var O=new Date().getFullYear(),E=new Date(O,0,1),U=new Date(O,6,1);O=E.getTimezoneOffset();var ee=U.getTimezoneOffset();J[t>>>0>>>2>>>0]=60*Math.max(O,ee),_[o>>>0>>>2>>>0]=+(O!=ee),t=ye=>ye.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],E=t(E),U=t(U),ee<O?(Se(E,Z,u,17),Se(U,Z,m,17)):(Se(E,Z,m,17),Se(U,Z,u,17))},d:()=>{ie("")},B:function(t,o,u){t>>>=0,o>>>=0,u>>>=0,Te.length=0;for(var m;m=Z[o++>>>0];){var O=m!=105;O&=m!=112,u+=O&&u%8?4:0,Te.push(m==112?J[u>>>2>>>0]:m==105?_[u>>>2>>>0]:Pe[u>>>3>>>0]),u+=O?8:4}return Ae[t](...Te)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),s:function(t){t>>>=0;var o=Z.length;if(4294901760<t)return!1;for(var u=1;4>=u;u*=2){var m=o*(1+.2/u);m=Math.min(m,t+100663296);var O=Math;m=Math.max(t,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-W.buffer.byteLength+65535)/65536;try{W.grow(O),le();var E=1;break e}catch{}E=void 0}if(E)return!0}return!1},C:function(t,o){t>>>=0,o>>>=0;var u=0;return ke().forEach((m,O)=>{var E=o+u;for(O=J[t+4*O>>>2>>>0]=E,E=0;E<m.length;++E)pe[O++>>>0]=m.charCodeAt(E);pe[O>>>0]=0,u+=m.length+1}),0},D:function(t,o){t>>>=0,o>>>=0;var u=ke();J[t>>>2>>>0]=u.length;var m=0;return u.forEach(O=>m+=O.length+1),J[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(t,o,u,m){o>>>=0,u>>>=0,m>>>=0;for(var O=0,E=0;E<u;E++){var U=J[o>>>2>>>0],ee=J[o+4>>>2>>>0];o+=8;for(var ye=0;ye<ee;ye++){var oe=Z[U+ye>>>0],se=nt[t];oe===0||oe===10?((t===1?T:L)(re(se,0)),se.length=0):se.push(oe)}O+=ee}return J[m>>>2>>>0]=O,0},r:qe,c:function(t,o,u,m){return qe(t>>>0,o>>>0,u>>>0,m>>>0)}},P=function(){function t(u){return P=u.exports,P=st(),W=P.K,le(),ne.unshift(P.L),we--,we==0&&(me!==null&&(clearInterval(me),me=null),F&&(u=F,F=null,u())),P}var o={a:Ve};if(we++,a.instantiateWasm)try{return a.instantiateWasm(o,t)}catch(u){L(`Module.instantiateWasm callback failed with error: ${u}`),f(u)}return Ue(o,function(u){t(u.instance)}).catch(f),{}}();a._OrtInit=(t,o)=>(a._OrtInit=P.M)(t,o),a._OrtGetLastError=(t,o)=>(a._OrtGetLastError=P.N)(t,o),a._OrtCreateSessionOptions=(t,o,u,m,O,E,U,ee,ye,oe)=>(a._OrtCreateSessionOptions=P.O)(t,o,u,m,O,E,U,ee,ye,oe),a._OrtAppendExecutionProvider=(t,o)=>(a._OrtAppendExecutionProvider=P.P)(t,o),a._OrtAddFreeDimensionOverride=(t,o,u)=>(a._OrtAddFreeDimensionOverride=P.Q)(t,o,u),a._OrtAddSessionConfigEntry=(t,o,u)=>(a._OrtAddSessionConfigEntry=P.R)(t,o,u),a._OrtReleaseSessionOptions=t=>(a._OrtReleaseSessionOptions=P.S)(t),a._OrtCreateSession=(t,o,u)=>(a._OrtCreateSession=P.T)(t,o,u),a._OrtReleaseSession=t=>(a._OrtReleaseSession=P.U)(t),a._OrtGetInputOutputCount=(t,o,u)=>(a._OrtGetInputOutputCount=P.V)(t,o,u),a._OrtGetInputName=(t,o)=>(a._OrtGetInputName=P.W)(t,o),a._OrtGetOutputName=(t,o)=>(a._OrtGetOutputName=P.X)(t,o),a._OrtFree=t=>(a._OrtFree=P.Y)(t),a._OrtCreateTensor=(t,o,u,m,O,E)=>(a._OrtCreateTensor=P.Z)(t,o,u,m,O,E),a._OrtGetTensorData=(t,o,u,m,O)=>(a._OrtGetTensorData=P._)(t,o,u,m,O),a._OrtReleaseTensor=t=>(a._OrtReleaseTensor=P.$)(t),a._OrtCreateRunOptions=(t,o,u,m)=>(a._OrtCreateRunOptions=P.aa)(t,o,u,m),a._OrtAddRunConfigEntry=(t,o,u)=>(a._OrtAddRunConfigEntry=P.ba)(t,o,u),a._OrtReleaseRunOptions=t=>(a._OrtReleaseRunOptions=P.ca)(t),a._OrtCreateBinding=t=>(a._OrtCreateBinding=P.da)(t),a._OrtBindInput=(t,o,u)=>(a._OrtBindInput=P.ea)(t,o,u),a._OrtBindOutput=(t,o,u,m)=>(a._OrtBindOutput=P.fa)(t,o,u,m),a._OrtClearBoundOutputs=t=>(a._OrtClearBoundOutputs=P.ga)(t),a._OrtReleaseBinding=t=>(a._OrtReleaseBinding=P.ha)(t),a._OrtRunWithBinding=(t,o,u,m,O)=>(a._OrtRunWithBinding=P.ia)(t,o,u,m,O),a._OrtRun=(t,o,u,m,O,E,U,ee)=>(a._OrtRun=P.ja)(t,o,u,m,O,E,U,ee),a._OrtEndProfiling=t=>(a._OrtEndProfiling=P.ka)(t),a._malloc=t=>(a._malloc=P.la)(t),a._free=t=>(a._free=P.ma)(t);var Je=t=>(Je=P.oa)(t),ot=t=>(ot=P.pa)(t),M=t=>(M=P.qa)(t),Ne=()=>(Ne=P.ra)();function st(){var t=P;t=Object.assign({},t);var o=u=>m=>u(m)>>>0;return t.la=o(t.la),t.qa=o(t.qa),t.ra=(u=>()=>u()>>>0)(t.ra),t}a.stackSave=()=>Ne(),a.stackRestore=t=>ot(t),a.stackAlloc=t=>M(t),a.UTF8ToString=ue,a.stringToUTF8=(t,o,u)=>Se(t,Z,o,u),a.lengthBytesUTF8=Ee;var Fe;F=function t(){Fe||Xe(),Fe||(F=t)};function Xe(){if(!(0<we)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var t=a.preRun.shift();Ie.unshift(t)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<we||Fe||(Fe=!0,a.calledRun=!0,de))){for(;0<ne.length;)ne.shift()(a);for(h(a);0<X.length;)X.shift()(a)}}}return Xe(),w}})();typeof dr=="object"&&typeof Ct=="object"?Ct.exports=cr:typeof define=="function"&&define.amd&&define([],()=>cr)});var mr=Ke(()=>{});var gr=Ke(()=>{});var hr={};Et(hr,{cpus:()=>en});var en,br=_t(()=>{en=void 0});var Or=Ke((wr,Dt)=>{"use strict";var yr=(()=>{var i=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(i||=__filename),function(c={}){function a(){return X.buffer!=ie.buffer&&K(),ie}function h(){return X.buffer!=ie.buffer&&K(),xe}function f(){return X.buffer!=ie.buffer&&K(),ce}function w(){return X.buffer!=ie.buffer&&K(),be}function g(){return X.buffer!=ie.buffer&&K(),ae}var s=c,S,x,H=new Promise((e,r)=>{S=e,x=r}),A=Object.assign({},s),I="./this.program",V=(e,r)=>{throw r},R=typeof window=="object",B=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",T=s.ENVIRONMENT_IS_PTHREAD||!1,L="";function W(e){return s.locateFile?s.locateFile(e,L):L+e}var de,pe,Z;if(D){var _=(At(),et(St)),J=(Mt(),et(Tt));L=B?J.dirname(L)+"/":__dirname+"/",de=(e,r)=>(e=ue(e)?new URL(e):J.normalize(e),_.readFileSync(e,r?void 0:"utf8")),Z=e=>(e=de(e,!0),e.buffer||(e=new Uint8Array(e)),e),pe=(e,r,n,l=!0)=>{e=ue(e)?new URL(e):J.normalize(e),_.readFile(e,l?void 0:"utf8",(y,b)=>{y?n(y):r(l?b.buffer:b)})},!s.thisProgram&&1<process.argv.length&&(I=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),V=(e,r)=>{throw process.exitCode=e,r},global.Worker=mr().Worker}else(R||B)&&(B?L=self.location.href:typeof document<"u"&&document.currentScript&&(L=document.currentScript.src),typeof i<"u"&&i&&(L=i),L.startsWith("blob:")?L="":L=L.substr(0,L.replace(/[?#].*/,"").lastIndexOf("/")+1),D||(de=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.send(null),r.responseText},B&&(Z=e=>{var r=new XMLHttpRequest;return r.open("GET",e,!1),r.responseType="arraybuffer",r.send(null),new Uint8Array(r.response)}),pe=(e,r,n)=>{var l=new XMLHttpRequest;l.open("GET",e,!0),l.responseType="arraybuffer",l.onload=()=>{l.status==200||l.status==0&&l.response?r(l.response):n()},l.onerror=n,l.send(null)}));D&&typeof performance>"u"&&(global.performance=gr().performance);var Pe=console.log.bind(console),le=console.error.bind(console);D&&(Pe=(...e)=>_.writeSync(1,e.join(" ")+`\n`),le=(...e)=>_.writeSync(2,e.join(" ")+`\n`));var Ie=Pe,ne=le;Object.assign(s,A),A=null;var X,we,me=!1,F,ie,xe,ce,be,ae;function K(){var e=X.buffer;s.HEAP8=ie=new Int8Array(e),s.HEAP16=new Int16Array(e),s.HEAPU8=xe=new Uint8Array(e),s.HEAPU16=new Uint16Array(e),s.HEAP32=ce=new Int32Array(e),s.HEAPU32=be=new Uint32Array(e),s.HEAPF32=new Float32Array(e),s.HEAPF64=ae=new Float64Array(e)}var je=16777216;if(T)X=s.wasmMemory;else if(s.wasmMemory)X=s.wasmMemory;else if(X=new WebAssembly.Memory({initial:je/65536,maximum:65536,shared:!0}),!(X.buffer instanceof SharedArrayBuffer))throw ne("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),D&&ne("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");K(),je=X.buffer.byteLength;var Oe=[],Ue=[],ve=[],Ae=0,_e=null,ge=null;function Be(){if(Ae--,Ae==0&&(_e!==null&&(clearInterval(_e),_e=null),ge)){var e=ge;ge=null,e()}}function te(e){throw e="Aborted("+e+")",ne(e),me=!0,F=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),x(e),e}var re=e=>e.startsWith("data:application/octet-stream;base64,"),ue=e=>e.startsWith("file://"),Ee;Ee="ort-wasm-threaded.wasm",re(Ee)||(Ee=W(Ee));function Se(e){if(Z)return Z(e);throw"both async and sync fetching of the wasm failed"}function Le(e){if(R||B){if(typeof fetch=="function"&&!ue(e))return fetch(e,{credentials:"same-origin"}).then(r=>{if(!r.ok)throw`failed to load wasm binary file at \'${e}\'`;return r.arrayBuffer()}).catch(()=>Se(e));if(pe)return new Promise((r,n)=>{pe(e,l=>r(new Uint8Array(l)),n)})}return Promise.resolve().then(()=>Se(e))}function ze(e,r,n){return Le(e).then(l=>WebAssembly.instantiate(l,r)).then(n,l=>{ne(`failed to asynchronously prepare wasm: ${l}`),te(l)})}function rt(e,r){var n=Ee;return typeof WebAssembly.instantiateStreaming!="function"||re(n)||ue(n)||D||typeof fetch!="function"?ze(n,e,r):fetch(n,{credentials:"same-origin"}).then(l=>WebAssembly.instantiateStreaming(l,e).then(r,function(y){return ne(`wasm streaming compile failed: ${y}`),ne("falling back to ArrayBuffer instantiation"),ze(n,e,r)}))}var Te,Ge={799444:(e,r,n,l)=>{if(typeof s>"u"||!s.bb)return 1;if(e=ee(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=s.bb.get(e),!e)return 2;if(r>>>=0,n>>>=0,l>>>=0,r+n>e.byteLength)return 3;try{return h().set(e.subarray(r,r+n),l>>>0),0}catch{return 4}}};function ke(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var We=e=>{e.terminate(),e.onmessage=()=>{}},nt=e=>{M.Oa.length==0&&(Je(),M.Xa(M.Oa[0]));var r=M.Oa.pop();if(!r)return 6;M.Pa.push(r),M.La[e.Na]=r,r.Na=e.Na;var n={cmd:"run",start_routine:e.gb,arg:e.cb,pthread_ptr:e.Na};return D&&r.unref(),r.postMessage(n,e.mb),0},De=0,at=e=>{var r=Ot();return e=e(),ft(r),e},G=(e,r,...n)=>at(()=>{for(var l=n.length,y=wt(8*l),b=y>>>3,v=0;v<n.length;v++){var z=n[v];g()[b+v>>>0]=z}return rr(e,0,l,y,r)});function qe(e){if(T)return G(0,1,e);F=e,0<De||(M.hb(),s.onExit?.(e),me=!0),V(e,new ke(e))}var Ve=e=>{if(F=e,T)throw st(e),"unwind";qe(e)};function P(){for(var e=s.numThreads;e--;)Je();Oe.unshift(()=>{Ae++,ot(()=>Be())})}function Je(){var e=W("ort-wasm-threaded.worker.js");e=new Worker(e),M.Oa.push(e)}function ot(e){T?e():Promise.all(M.Oa.map(M.Xa)).then(e)}var M={Oa:[],Pa:[],ab:[],La:{},Va(){T?(M.receiveObjectTransfer=M.fb,M.threadInitTLS=M.$a,M.setExitStatus=M.Za):P()},Za:e=>F=e,pb:["$terminateWorker"],hb:()=>{for(var e of M.Pa)We(e);for(e of M.Oa)We(e);M.Oa=[],M.Pa=[],M.La=[]},Ya:e=>{var r=e.Na;delete M.La[r],M.Oa.push(e),M.Pa.splice(M.Pa.indexOf(e),1),e.Na=0,bt(r)},fb(){},$a(){M.ab.forEach(e=>e())},Xa:e=>new Promise(r=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=ut()){var z=M.La[b.targetThread];z?z.postMessage(b,b.transferList):ne(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?it():v==="spawnThread"?nt(b):v==="cleanupThread"?M.Ya(M.La[b.thread]):v==="killThread"?(b=b.thread,v=M.La[b],delete M.La[b],We(v),bt(b),M.Pa.splice(M.Pa.indexOf(v),1),v.Na=0):v==="cancelThread"?M.La[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,D&&!e.Na&&e.unref(),r(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?s[b.handler](...b.args):v&&ne(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ne(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},D&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],l=["onExit"],y;for(y of l)s.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:s.mainScriptUrlOrBlob||i,wasmMemory:X,wasmModule:we})})};s.PThread=M;var Ne=e=>{for(;0<e.length;)e.shift()(s)};s.establishStackSpace=()=>{var e=ut(),r=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],or(r,r-e),ft(r)};function st(e){if(T)return G(1,0,e);Ve(e)}var Fe=[],Xe;s.invokeEntryPoint=(e,r)=>{De=0;var n=Fe[e];n||(e>=Fe.length&&(Fe.length=e+1),Fe[e]=n=Xe.get(e)),e=n(r),0<De?M.Za(e):yt(e)};class t{constructor(r){this.Ua=r-24}Va(r,n){w()[this.Ua+16>>>2>>>0]=0,w()[this.Ua+4>>>2>>>0]=r,w()[this.Ua+8>>>2>>>0]=n}}var o=0,u=0;function m(e,r,n,l){return T?G(2,1,e,r,n,l):O(e,r,n,l)}function O(e,r,n,l){if(e>>>=0,r>>>=0,n>>>=0,l>>>=0,typeof SharedArrayBuffer>"u")return ne("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return T&&y.length===0?m(e,r,n,l):(e={gb:n,Na:e,cb:l,mb:y},T?(e.ob="spawnThread",postMessage(e,y),0):nt(e))}var E=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,U=(e,r,n)=>{r>>>=0;var l=r+n;for(n=r;e[n]&&!(n>=l);)++n;if(16<n-r&&e.buffer&&E)return E.decode(e.buffer instanceof SharedArrayBuffer?e.slice(r,n):e.subarray(r,n));for(l="";r<n;){var y=e[r++];if(y&128){var b=e[r++]&63;if((y&224)==192)l+=String.fromCharCode((y&31)<<6|b);else{var v=e[r++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[r++]&63,65536>y?l+=String.fromCharCode(y):(y-=65536,l+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else l+=String.fromCharCode(y)}return l},ee=(e,r)=>(e>>>=0)?U(h(),e,r):"";function ye(e,r,n){return T?G(3,1,e,r,n):0}function oe(e,r){if(T)return G(4,1,e,r)}var se=e=>{for(var r=0,n=0;n<e.length;++n){var l=e.charCodeAt(n);127>=l?r++:2047>=l?r+=2:55296<=l&&57343>=l?(r+=4,++n):r+=3}return r},Qe=(e,r,n,l)=>{if(n>>>=0,!(0<l))return 0;var y=n;l=n+l-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=l)break;r[n++>>>0]=v}else{if(2047>=v){if(n+1>=l)break;r[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=l)break;r[n++>>>0]=224|v>>12}else{if(n+3>=l)break;r[n++>>>0]=240|v>>18,r[n++>>>0]=128|v>>12&63}r[n++>>>0]=128|v>>6&63}r[n++>>>0]=128|v&63}}return r[n>>>0]=0,n-y},Re=(e,r,n)=>Qe(e,h(),r,n);function d(e,r){if(T)return G(5,1,e,r)}function k(e,r,n){if(T)return G(6,1,e,r,n)}function $(e,r,n){return T?G(7,1,e,r,n):0}function Me(e,r){if(T)return G(8,1,e,r)}function Ze(e,r,n){if(T)return G(9,1,e,r,n)}function Rt(e,r,n,l){if(T)return G(10,1,e,r,n,l)}function It(e,r,n,l){if(T)return G(11,1,e,r,n,l)}function Bt(e,r,n,l){if(T)return G(12,1,e,r,n,l)}function kt(e){if(T)return G(13,1,e)}function Wt(e,r){if(T)return G(14,1,e,r)}function Nt(e,r,n){if(T)return G(15,1,e,r,n)}function dt(e){e>>>=0,typeof Atomics.nb=="function"&&(Atomics.nb(f(),e>>>2,e).value.then(it),e+=128,Atomics.store(f(),e>>>2,1))}s.__emscripten_thread_mailbox_await=dt;var it=()=>{var e=ut();if(e&&(dt(e),e=nr,!me))try{if(e(),!(0<De))try{T?yt(F):Ve(F)}catch(r){r instanceof ke||r=="unwind"||V(1,r)}}catch(r){r instanceof ke||r=="unwind"||V(1,r)}};s.checkMailbox=it;var pt=[],$e=e=>e%4===0&&(e%100!==0||e%400===0),Ht=[0,31,60,91,121,152,182,213,244,274,305,335],Gt=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,r,n,l,y,b,v,z){return T?G(16,1,e,r,n,l,y,b,v,z):-52}function Yt(e,r,n,l,y,b,v){if(T)return G(17,1,e,r,n,l,y,b,v)}var mt=[],gt={},jt=()=>{if(!ht){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:I||"./this.program"},r;for(r in gt)gt[r]===void 0?delete e[r]:e[r]=gt[r];var n=[];for(r in e)n.push(`${r}=${e[r]}`);ht=n}return ht},ht;function zt(e,r){if(T)return G(18,1,e,r);e>>>=0,r>>>=0;var n=0;return jt().forEach((l,y)=>{var b=r+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<l.length;++b)a()[y++>>>0]=l.charCodeAt(b);a()[y>>>0]=0,n+=l.length+1}),0}function qt(e,r){if(T)return G(19,1,e,r);e>>>=0,r>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var l=0;return n.forEach(y=>l+=y.length+1),w()[r>>>2>>>0]=l,0}function Vt(e){return T?G(20,1,e):52}function Jt(e,r,n,l){return T?G(21,1,e,r,n,l):52}function Xt(e,r,n,l,y){return T?G(22,1,e,r,n,l,y):70}var Hr=[null,[],[]];function Qt(e,r,n,l){if(T)return G(23,1,e,r,n,l);r>>>=0,n>>>=0,l>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[r>>>2>>>0],z=w()[r+4>>>2>>>0];r+=8;for(var Ce=0;Ce<z;Ce++){var fe=h()[v+Ce>>>0],he=Hr[e];fe===0||fe===10?((e===1?Ie:ne)(U(he,0)),he.length=0):he.push(fe)}y+=z}return w()[l>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Gr(e){var r=Array(se(e)+1);return Qe(e,r,0,r.length),r}var $r=(e,r)=>{a().set(e,r>>>0)};function er(e,r,n,l){function y(p,N,q){for(p=typeof p=="number"?p.toString():p||"";p.length<N;)p=q[0]+p;return p}function b(p,N){return y(p,N,"0")}function v(p,N){function q(fr){return 0>fr?-1:0<fr?1:0}var He;return(He=q(p.getFullYear()-N.getFullYear()))===0&&(He=q(p.getMonth()-N.getMonth()))===0&&(He=q(p.getDate()-N.getDate())),He}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Ce(p){var N=p.Qa;for(p=new Date(new Date(p.Ra+1900,0,1).getTime());0<N;){var q=p.getMonth(),He=($e(p.getFullYear())?Zt:Kt)[q];if(N>He-p.getDate())N-=He-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+N);break}}return q=new Date(p.getFullYear()+1,0,4),N=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(N,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,r>>>=0,n>>>=0,l>>>=0;var fe=w()[l+40>>>2>>>0];l={kb:f()[l>>>2>>>0],jb:f()[l+4>>>2>>>0],Sa:f()[l+8>>>2>>>0],Wa:f()[l+12>>>2>>>0],Ta:f()[l+16>>>2>>>0],Ra:f()[l+20>>>2>>>0],Ma:f()[l+24>>>2>>>0],Qa:f()[l+28>>>2>>>0],qb:f()[l+32>>>2>>>0],ib:f()[l+36>>>2>>>0],lb:fe?ee(fe):""},n=ee(n),fe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var he in fe)n=n.replace(new RegExp(he,"g"),fe[he]);var ir="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ur="January February March April May June July August September October November December".split(" ");fe={"%a":p=>ir[p.Ma].substring(0,3),"%A":p=>ir[p.Ma],"%b":p=>ur[p.Ta].substring(0,3),"%B":p=>ur[p.Ta],"%C":p=>b((p.Ra+1900)/100|0,2),"%d":p=>b(p.Wa,2),"%e":p=>y(p.Wa,2," "),"%g":p=>Ce(p).toString().substring(2),"%G":Ce,"%H":p=>b(p.Sa,2),"%I":p=>(p=p.Sa,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var N=0,q=0;q<=p.Ta-1;N+=($e(p.Ra+1900)?Zt:Kt)[q++]);return b(p.Wa+N,3)},"%m":p=>b(p.Ta+1,2),"%M":p=>b(p.jb,2),"%n":()=>`\n`,"%p":p=>0<=p.Sa&&12>p.Sa?"AM":"PM","%S":p=>b(p.kb,2),"%t":()=>"	","%u":p=>p.Ma||7,"%U":p=>b(Math.floor((p.Qa+7-p.Ma)/7),2),"%V":p=>{var N=Math.floor((p.Qa+7-(p.Ma+6)%7)/7);if(2>=(p.Ma+371-p.Qa-2)%7&&N++,N)N==53&&(q=(p.Ma+371-p.Qa)%7,q==4||q==3&&$e(p.Ra)||(N=1));else{N=52;var q=(p.Ma+7-p.Qa-1)%7;(q==4||q==5&&$e(p.Ra%400-1))&&N++}return b(N,2)},"%w":p=>p.Ma,"%W":p=>b(Math.floor((p.Qa+7-(p.Ma+6)%7)/7),2),"%y":p=>(p.Ra+1900).toString().substring(2),"%Y":p=>p.Ra+1900,"%z":p=>{p=p.ib;var N=0<=p;return p=Math.abs(p)/60,(N?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.lb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(he in fe)n.includes(he)&&(n=n.replace(new RegExp(he,"g"),fe[he](l)));return n=n.replace(/\\0\\0/g,"%"),he=Gr(n),he.length>r?0:($r(he,e),he.length-1)}M.Va();var Yr=[qe,st,m,ye,oe,d,k,$,Me,Ze,Rt,It,Bt,kt,Wt,Nt,$t,Yt,zt,qt,Vt,Jt,Xt,Qt],jr={b:function(e,r,n){throw e>>>=0,new t(e).Va(r>>>0,n>>>0),o=e,u++,o},L:function(e){tr(e>>>0,!B,1,!R,131072,!1),M.$a()},j:function(e){e>>>=0,T?postMessage({cmd:"cleanupThread",thread:e}):M.Ya(M.La[e])},H:O,h:ye,S:oe,D:d,F:k,T:$,Q:Me,J:Ze,P:Rt,n:It,E:Bt,B:kt,R:Wt,C:Nt,p:()=>1,z:function(e,r){e>>>=0,e==r>>>0?setTimeout(it):T?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.La[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,r,n,l,y){r>>>=0,n>>>=0,pt.length=l,y=y>>>0>>>3;for(var b=0;b<l;b++)pt[b]=g()[y+b>>>0];return e=r?Ge[r]:Yr[e],M.eb=n,n=e(...pt),M.eb=0,n},K:dt,o:function(e){D&&M.La[e>>>0].ref()},s:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getUTCSeconds(),f()[n+4>>>2>>>0]=e.getUTCMinutes(),f()[n+8>>>2>>>0]=e.getUTCHours(),f()[n+12>>>2>>>0]=e.getUTCDate(),f()[n+16>>>2>>>0]=e.getUTCMonth(),f()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,f()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,f()[n+28>>>2>>>0]=e},t:function(e,r,n){e=r+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*r:NaN,n>>>=0,e=new Date(1e3*e),f()[n>>>2>>>0]=e.getSeconds(),f()[n+4>>>2>>>0]=e.getMinutes(),f()[n+8>>>2>>>0]=e.getHours(),f()[n+12>>>2>>>0]=e.getDate(),f()[n+16>>>2>>>0]=e.getMonth(),f()[n+20>>>2>>>0]=e.getFullYear()-1900,f()[n+24>>>2>>>0]=e.getDay(),r=($e(e.getFullYear())?Ht:Gt)[e.getMonth()]+e.getDate()-1|0,f()[n+28>>>2>>>0]=r,f()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var l=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(r!=l&&e.getTimezoneOffset()==Math.min(l,r))|0,f()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var r=new Date(f()[e+20>>>2>>>0]+1900,f()[e+16>>>2>>>0],f()[e+12>>>2>>>0],f()[e+8>>>2>>>0],f()[e+4>>>2>>>0],f()[e>>>2>>>0],0),n=f()[e+32>>>2>>>0],l=r.getTimezoneOffset(),y=new Date(r.getFullYear(),6,1).getTimezoneOffset(),b=new Date(r.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?f()[e+32>>>2>>>0]=+(y!=b&&v==l):0<n!=(v==l)&&(y=Math.max(b,y),r.setTime(r.getTime()+6e4*((0<n?v:y)-l))),f()[e+24>>>2>>>0]=r.getDay(),n=($e(r.getFullYear())?Ht:Gt)[r.getMonth()]+r.getDate()-1|0,f()[e+28>>>2>>>0]=n,f()[e>>>2>>>0]=r.getSeconds(),f()[e+4>>>2>>>0]=r.getMinutes(),f()[e+8>>>2>>>0]=r.getHours(),f()[e+12>>>2>>>0]=r.getDate(),f()[e+16>>>2>>>0]=r.getMonth(),f()[e+20>>>2>>>0]=r.getYear(),e=r.getTime(),e=isNaN(e)?-1:e/1e3,ar((Te=e,1<=+Math.abs(Te)?0<Te?+Math.floor(Te/4294967296)>>>0:~~+Math.ceil((Te-+(~~Te>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Yt,y:function(e,r,n,l){e>>>=0,r>>>=0,n>>>=0,l>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Ce=Math.max(y,z);w()[e>>>2>>>0]=60*Ce,f()[r>>>2>>>0]=+(y!=z),e=fe=>fe.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],b=e(b),v=e(v),z<y?(Re(b,n,17),Re(v,l,17)):(Re(b,l,17),Re(v,n,17))},c:()=>{te("")},O:function(e,r,n){e>>>=0,r>>>=0,n>>>=0,mt.length=0;for(var l;l=h()[r++>>>0];){var y=l!=105;y&=l!=112,n+=y&&n%8?4:0,mt.push(l==112?w()[n>>>2>>>0]:l==105?f()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ge[e](...mt)},k:()=>{},i:()=>Date.now(),U:()=>{throw De+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>D?(br(),et(hr)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var r=h().length;if(e<=r||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var l=r*(1+.2/n);l=Math.min(l,e+100663296);var y=Math;l=Math.max(e,l);e:{y=(y.min.call(y,4294901760,l+(65536-l%65536)%65536)-X.buffer.byteLength+65535)/65536;try{X.grow(y),K();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ve,g:Vt,m:Jt,v:Xt,l:Qt,a:X||s.wasmMemory,w:er,d:function(e,r,n,l){return er(e>>>0,r>>>0,n>>>0,l>>>0)}},C=function(){function e(n,l){return C=n.exports,C=zr(),M.ab.push(C.ya),Xe=C.za,Ue.unshift(C.V),we=l,Be(),C}var r={a:jr};if(Ae++,s.instantiateWasm)try{return s.instantiateWasm(r,e)}catch(n){ne(`Module.instantiateWasm callback failed with error: ${n}`),x(n)}return rt(r,function(n){e(n.instance,n.module)}).catch(x),{}}();s._OrtInit=(e,r)=>(s._OrtInit=C.W)(e,r),s._OrtGetLastError=(e,r)=>(s._OrtGetLastError=C.X)(e,r),s._OrtCreateSessionOptions=(e,r,n,l,y,b,v,z,Ce,fe)=>(s._OrtCreateSessionOptions=C.Y)(e,r,n,l,y,b,v,z,Ce,fe),s._OrtAppendExecutionProvider=(e,r)=>(s._OrtAppendExecutionProvider=C.Z)(e,r),s._OrtAddFreeDimensionOverride=(e,r,n)=>(s._OrtAddFreeDimensionOverride=C._)(e,r,n),s._OrtAddSessionConfigEntry=(e,r,n)=>(s._OrtAddSessionConfigEntry=C.$)(e,r,n),s._OrtReleaseSessionOptions=e=>(s._OrtReleaseSessionOptions=C.aa)(e),s._OrtCreateSession=(e,r,n)=>(s._OrtCreateSession=C.ba)(e,r,n),s._OrtReleaseSession=e=>(s._OrtReleaseSession=C.ca)(e),s._OrtGetInputOutputCount=(e,r,n)=>(s._OrtGetInputOutputCount=C.da)(e,r,n),s._OrtGetInputName=(e,r)=>(s._OrtGetInputName=C.ea)(e,r),s._OrtGetOutputName=(e,r)=>(s._OrtGetOutputName=C.fa)(e,r),s._OrtFree=e=>(s._OrtFree=C.ga)(e),s._OrtCreateTensor=(e,r,n,l,y,b)=>(s._OrtCreateTensor=C.ha)(e,r,n,l,y,b),s._OrtGetTensorData=(e,r,n,l,y)=>(s._OrtGetTensorData=C.ia)(e,r,n,l,y),s._OrtReleaseTensor=e=>(s._OrtReleaseTensor=C.ja)(e),s._OrtCreateRunOptions=(e,r,n,l)=>(s._OrtCreateRunOptions=C.ka)(e,r,n,l),s._OrtAddRunConfigEntry=(e,r,n)=>(s._OrtAddRunConfigEntry=C.la)(e,r,n),s._OrtReleaseRunOptions=e=>(s._OrtReleaseRunOptions=C.ma)(e),s._OrtCreateBinding=e=>(s._OrtCreateBinding=C.na)(e),s._OrtBindInput=(e,r,n)=>(s._OrtBindInput=C.oa)(e,r,n),s._OrtBindOutput=(e,r,n,l)=>(s._OrtBindOutput=C.pa)(e,r,n,l),s._OrtClearBoundOutputs=e=>(s._OrtClearBoundOutputs=C.qa)(e),s._OrtReleaseBinding=e=>(s._OrtReleaseBinding=C.ra)(e),s._OrtRunWithBinding=(e,r,n,l,y)=>(s._OrtRunWithBinding=C.sa)(e,r,n,l,y),s._OrtRun=(e,r,n,l,y,b,v,z)=>(s._OrtRun=C.ta)(e,r,n,l,y,b,v,z),s._OrtEndProfiling=e=>(s._OrtEndProfiling=C.ua)(e);var ut=s._pthread_self=()=>(ut=s._pthread_self=C.va)();s._malloc=e=>(s._malloc=C.wa)(e),s._free=e=>(s._free=C.xa)(e),s.__emscripten_tls_init=()=>(s.__emscripten_tls_init=C.ya)();var tr=s.__emscripten_thread_init=(e,r,n,l,y,b)=>(tr=s.__emscripten_thread_init=C.Aa)(e,r,n,l,y,b);s.__emscripten_thread_crashed=()=>(s.__emscripten_thread_crashed=C.Ba)();var rr=(e,r,n,l,y)=>(rr=C.Ca)(e,r,n,l,y),bt=e=>(bt=C.Da)(e),yt=s.__emscripten_thread_exit=e=>(yt=s.__emscripten_thread_exit=C.Ea)(e),nr=()=>(nr=C.Fa)(),ar=e=>(ar=C.Ga)(e),or=(e,r)=>(or=C.Ha)(e,r),ft=e=>(ft=C.Ia)(e),wt=e=>(wt=C.Ja)(e),Ot=()=>(Ot=C.Ka)();function zr(){var e=C;e=Object.assign({},e);var r=l=>()=>l()>>>0,n=l=>y=>l(y)>>>0;return e.va=r(e.va),e.wa=n(e.wa),e.emscripten_main_runtime_thread_id=r(e.emscripten_main_runtime_thread_id),e.Ja=n(e.Ja),e.Ka=r(e.Ka),e}s.wasmMemory=X,s.stackSave=()=>Ot(),s.stackRestore=e=>ft(e),s.stackAlloc=e=>wt(e),s.keepRuntimeAlive=()=>0<De,s.UTF8ToString=ee,s.stringToUTF8=Re,s.lengthBytesUTF8=se,s.ExitStatus=ke,s.PThread=M;var lt;ge=function e(){lt||sr(),lt||(ge=e)};function sr(){if(!(0<Ae))if(T)S(s),T||Ne(Ue),startWorker(s);else{if(s.preRun)for(typeof s.preRun=="function"&&(s.preRun=[s.preRun]);s.preRun.length;)Oe.unshift(s.preRun.shift());Ne(Oe),0<Ae||lt||(lt=!0,s.calledRun=!0,me||(T||Ne(Ue),S(s),T||Ne(ve)))}}return sr(),H}})();typeof wr=="object"&&typeof Dt=="object"?Dt.exports=yr:typeof define=="function"&&define.amd&&define([],()=>yr)});var vr=Ke((yn,tn)=>{tn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var Er;Er=pr();var rn=Or(),Ft,Pt=!1,ct=!1,_r=!1,nn=i=>{if(i===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+i+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+i+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},an=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},on=(i,c)=>i?c?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":c?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Sr=async i=>{if(Pt)return Promise.resolve();if(ct)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(_r)throw new Error("previous call to \'initializeWebAssembly()\' failed.");ct=!0;let c=i.initTimeout,a=i.numThreads,h=i.simd,f=nn(a),w=h&&an(),g=i.wasmPaths,s=typeof g=="string"?g:void 0,S=on(w,f),x=typeof g=="object"?g[S]:void 0,H=!1,A=[];if(c>0&&A.push(new Promise(I=>{setTimeout(()=>{H=!0,I()},c)})),A.push(new Promise((I,V)=>{let R=f?rn:Er,B={locateFile:(D,T)=>f&&D.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([vr()],{type:"text/javascript"})):D.endsWith(".wasm")?x||(s??T)+S:T+D};if(f)if(B.numThreads=a,typeof Blob>"u")B.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let D=`var ortWasmThreaded=${R.toString()};`;B.mainScriptUrlOrBlob=new Blob([D],{type:"text/javascript"})}R(B).then(D=>{ct=!1,Pt=!0,Ft=D,I()},D=>{ct=!1,_r=!0,V(D)})})),await Promise.race(A),H)throw new Error(`WebAssembly backend initializing failed due to timeout: ${c}ms`)},Q=()=>{if(Pt&&Ft)return Ft;throw new Error("WebAssembly is not initialized yet.")};var Y=(i,c)=>{let a=Q(),h=a.lengthBytesUTF8(i)+1,f=a._malloc(h);return a.stringToUTF8(i,f,h),c.push(f),f},tt=(i,c,a,h)=>{if(typeof i=="object"&&i!==null){if(a.has(i))throw new Error("Circular reference in options");a.add(i)}Object.entries(i).forEach(([f,w])=>{let g=c?c+f:f;if(typeof w=="object")tt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},j=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);c._OrtGetLastError(h,h+4);let f=c.HEAP32[h/4],w=c.HEAPU32[h/4+1],g=w?c.UTF8ToString(w):"";throw new Error(`${i} ERROR_CODE: ${f}, ERROR_MESSAGE: ${g}`)}finally{c.stackRestore(a)}};var Ar=i=>{let c=Q(),a=0,h=[],f=i||{};try{if(i?.logSeverityLevel===void 0)f.logSeverityLevel=2;else if(typeof i.logSeverityLevel!="number"||!Number.isInteger(i.logSeverityLevel)||i.logSeverityLevel<0||i.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${i.logSeverityLevel}`);if(i?.logVerbosityLevel===void 0)f.logVerbosityLevel=0;else if(typeof i.logVerbosityLevel!="number"||!Number.isInteger(i.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${i.logVerbosityLevel}`);i?.terminate===void 0&&(f.terminate=!1);let w=0;return i?.tag!==void 0&&(w=Y(i.tag,h)),a=c._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,w),a===0&&j("Can\'t create run options."),i?.extra!==void 0&&tt(i.extra,"",new WeakSet,(g,s)=>{let S=Y(g,h),x=Y(s,h);c._OrtAddRunConfigEntry(a,S,x)!==0&&j(`Can\'t set a run config entry: ${g} - ${s}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseRunOptions(a),h.forEach(g=>c._free(g)),w}};var sn=i=>{switch(i){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${i}`)}},un=i=>{switch(i){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${i}`)}},fn=i=>{i.extra||(i.extra={}),i.extra.session||(i.extra.session={});let c=i.extra.session;c.use_ort_model_bytes_directly||(c.use_ort_model_bytes_directly="1"),i.executionProviders&&i.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(i.enableMemPattern=!1)},ln=(i,c,a)=>{for(let h of c){let f=typeof h=="string"?h:h.name;switch(f){case"webnn":if(f="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let s=Y("deviceType",a),S=Y(g.deviceType,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let s=g.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let S=Y("numThreads",a),x=Y(s.toString(),a);Q()._OrtAddSessionConfigEntry(i,S,x)!==0&&j(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let s=Y("powerPreference",a),S=Y(g.powerPreference,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let s=Y("preferredLayout",a),S=Y(g.preferredLayout,a);Q()._OrtAddSessionConfigEntry(i,s,S)!==0&&j(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let w=Y(f,a);Q()._OrtAppendExecutionProvider(i,w)!==0&&j(`Can\'t append execution provider: ${f}.`)}},Tr=i=>{let c=Q(),a=0,h=[],f=i||{};fn(f);try{let w=sn(f.graphOptimizationLevel??"all"),g=un(f.executionMode??"sequential"),s=typeof f.logId=="string"?Y(f.logId,h):0,S=f.logSeverityLevel??2;if(!Number.isInteger(S)||S<0||S>4)throw new Error(`log serverity level is not valid: ${S}`);let x=f.logVerbosityLevel??0;if(!Number.isInteger(x)||x<0||x>4)throw new Error(`log verbosity level is not valid: ${x}`);let H=typeof f.optimizedModelFilePath=="string"?Y(f.optimizedModelFilePath,h):0;if(a=c._OrtCreateSessionOptions(w,!!f.enableCpuMemArena,!!f.enableMemPattern,g,!!f.enableProfiling,0,s,S,x,H),a===0&&j("Can\'t create session options."),f.executionProviders&&ln(a,f.executionProviders,h),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let A=Y("enableGraphCapture",h),I=Y(f.enableGraphCapture.toString(),h);c._OrtAddSessionConfigEntry(a,A,I)!==0&&j(`Can\'t set a session config entry: \'enableGraphCapture\' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[A,I]of Object.entries(f.freeDimensionOverrides)){if(typeof A!="string")throw new Error(`free dimension override name must be a string: ${A}`);if(typeof I!="number"||!Number.isInteger(I)||I<0)throw new Error(`free dimension override value must be a non-negative integer: ${I}`);let V=Y(A,h);c._OrtAddFreeDimensionOverride(a,V,I)!==0&&j(`Can\'t set a free dimension override: ${A} - ${I}.`)}return f.extra!==void 0&&tt(f.extra,"",new WeakSet,(A,I)=>{let V=Y(A,h),R=Y(I,h);c._OrtAddSessionConfigEntry(a,V,R)!==0&&j(`Can\'t set a session config entry: ${A} - ${I}.`)}),[a,h]}catch(w){throw a!==0&&c._OrtReleaseSessionOptions(a),h.forEach(g=>c._free(g)),w}};var xt=i=>{switch(i){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${i}`)}},Mr=i=>{switch(i){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${i}`)}},Ut=i=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][i],Cr=i=>{switch(i){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${i}`)}},Dr=i=>{switch(i){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${i}`)}},Fr=i=>i==="float32"||i==="float16"||i==="int32"||i==="int64"||i==="uint32"||i==="uint8"||i==="bool",Pr=i=>{switch(i){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${i}`)}};var xr=async i=>{if(typeof i=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(i))}catch(c){if(c.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(i),h=[];for await(let f of a)h.push(f);return new Uint8Array(Buffer.concat(h))}throw c}else{let c=await fetch(i);if(!c.ok)throw new Error(`failed to load external data file: ${i}`);let a=c.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await c.arrayBuffer());{if(!c.body)throw new Error(`failed to load external data file: ${i}, no response body.`);let f=c.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(s){if(s instanceof RangeError){let S=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:S,maximum:S}).buffer}else throw s}let g=0;for(;;){let{done:s,value:S}=await f.read();if(s)break;let x=S.byteLength;new Uint8Array(w,g,x).set(S),g+=x}return new Uint8Array(w,0,h)}}else return i instanceof Blob?new Uint8Array(await i.arrayBuffer()):i instanceof Uint8Array?i:new Uint8Array(i)};var cn=(i,c)=>{Q()._OrtInit(i,c)!==0&&j("Can\'t initialize onnxruntime.")},Lr=async i=>{cn(i.wasm.numThreads,Dr(i.logLevel))},Rr=async(i,c)=>{},Ye=new Map,dn=i=>{let c=Q(),a=c.stackSave();try{let h=c.stackAlloc(8);return c._OrtGetInputOutputCount(i,h,h+4)!==0&&j("Can\'t get session input/output count."),[c.HEAP32[h/4],c.HEAP32[h/4+1]]}finally{c.stackRestore(a)}},Lt=i=>{let c=Q(),a=c._malloc(i.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${i.byteLength}.`);return c.HEAPU8.set(i,a),[a,i.byteLength]},Ir=async(i,c)=>{let a,h,f=Q();Array.isArray(i)?[a,h]=i:i.buffer===f.HEAPU8.buffer?[a,h]=[i.byteOffset,i.byteLength]:[a,h]=Lt(i);let w=0,g=0,s=0,S=[],x=[],H=[];try{if([g,S]=Tr(c),c?.externalData&&f.mountExternalData){let L=[];for(let W of c.externalData){let de=typeof W=="string"?W:W.path;L.push(xr(typeof W=="string"?W:W.data).then(pe=>{f.mountExternalData(de,pe)}))}await Promise.all(L)}w=await f._OrtCreateSession(a,h,g),w===0&&j("Can\'t create a session.");let[A,I]=dn(w),V=!!c?.enableGraphCapture,R=[],B=[],D=[];for(let L=0;L<A;L++){let W=f._OrtGetInputName(w,L);W===0&&j("Can\'t get an input name."),x.push(W),R.push(f.UTF8ToString(W))}for(let L=0;L<I;L++){let W=f._OrtGetOutputName(w,L);W===0&&j("Can\'t get an output name."),H.push(W);let de=f.UTF8ToString(W);B.push(de)}let T=null;return Ye.set(w,[w,x,H,T,V,!1]),[w,R,B]}catch(A){throw x.forEach(I=>f._OrtFree(I)),H.forEach(I=>f._OrtFree(I)),s!==0&&f._OrtReleaseBinding(s),w!==0&&f._OrtReleaseSession(w),A}finally{f._free(a),g!==0&&f._OrtReleaseSessionOptions(g),S.forEach(A=>f._free(A)),f.unmountExternalData?.()}},Br=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error(`cannot release session. invalid session id: ${i}`);let[h,f,w,g,s]=a;g&&(s&&c._OrtClearBoundOutputs(g.handle),c._OrtReleaseBinding(g.handle)),c.jsepOnReleaseSession?.(i),f.forEach(S=>c._OrtFree(S)),w.forEach(S=>c._OrtFree(S)),c._OrtReleaseSession(h),Ye.delete(i)},Ur=(i,c,a,h,f,w=!1)=>{if(!i){c.push(0);return}let g=Q(),s=i[0],S=i[1],x=i[3],H,A;if(s==="string"&&x==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(w&&x!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(x==="gpu-buffer"){let R=i[2].gpuBuffer,B=Ut(xt(s));A=S.reduce((T,L)=>T*L,1)*B;let D=g.jsepRegisterBuffer;if(!D)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');H=D(h,f,R,A)}else{let R=i[2];if(Array.isArray(R)){A=4*R.length,H=g._malloc(A),a.push(H);let B=H/4;for(let D=0;D<R.length;D++){if(typeof R[D]!="string")throw new TypeError(`tensor data at index ${D} is not a string`);g.HEAPU32[B++]=Y(R[D],a)}}else A=R.byteLength,H=g._malloc(A),a.push(H),g.HEAPU8.set(new Uint8Array(R.buffer,R.byteOffset,A),H)}let I=g.stackSave(),V=g.stackAlloc(4*S.length);try{let R=V/4;S.forEach(D=>g.HEAP32[R++]=D);let B=g._OrtCreateTensor(xt(s),H,A,V,S.length,Pr(x));B===0&&j(`Can\'t create tensor for input/output. session=${h}, index=${f}.`),c.push(B)}finally{g.stackRestore(I)}},kr=async(i,c,a,h,f,w)=>{let g=Q(),s=Ye.get(i);if(!s)throw new Error(`cannot run inference. invalid session id: ${i}`);let S=s[0],x=s[1],H=s[2],A=s[3],I=s[4],V=s[5],R=c.length,B=h.length,D=0,T=[],L=[],W=[],de=[],pe=g.stackSave(),Z=g.stackAlloc(R*4),_=g.stackAlloc(R*4),J=g.stackAlloc(B*4),Pe=g.stackAlloc(B*4);try{[D,T]=Ar(w);for(let F=0;F<R;F++)Ur(a[F],L,de,i,c[F],I);for(let F=0;F<B;F++)Ur(f[F],W,de,i,R+h[F],I);let le=Z/4,Ie=_/4,ne=J/4,X=Pe/4;for(let F=0;F<R;F++)g.HEAPU32[le++]=L[F],g.HEAPU32[Ie++]=x[c[F]];for(let F=0;F<B;F++)g.HEAPU32[ne++]=W[F],g.HEAPU32[X++]=H[h[F]];g.jsepOnRunStart?.(S);let we;we=await g._OrtRun(S,_,Z,R,Pe,B,J,D),we!==0&&j("failed to call OrtRun().");let me=[];for(let F=0;F<B;F++){let ie=g.HEAPU32[J/4+F];if(ie===W[F]){me.push(f[F]);continue}let xe=g.stackSave(),ce=g.stackAlloc(4*4),be=!1,ae,K=0;try{g._OrtGetTensorData(ie,ce,ce+4,ce+8,ce+12)!==0&&j(`Can\'t access output tensor data on index ${F}.`);let Oe=ce/4,Ue=g.HEAPU32[Oe++];K=g.HEAPU32[Oe++];let ve=g.HEAPU32[Oe++],Ae=g.HEAPU32[Oe++],_e=[];for(let te=0;te<Ae;te++)_e.push(g.HEAPU32[ve/4+te]);g._OrtFree(ve);let ge=_e.reduce((te,re)=>te*re,1);ae=Mr(Ue);let Be=A?.outputPreferredLocations[h[F]];if(ae==="string"){if(Be==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let te=[],re=K/4;for(let ue=0;ue<ge;ue++){let Ee=g.HEAPU32[re++],Se=ue===ge-1?void 0:g.HEAPU32[re]-Ee;te.push(g.UTF8ToString(Ee,Se))}me.push([ae,_e,te,"cpu"])}else if(Be==="gpu-buffer"&&ge>0){let te=g.jsepGetBuffer;if(!te)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let re=te(K),ue=Ut(Ue);if(ue===void 0||!Fr(ae))throw new Error(`Unsupported data type: ${ae}`);be=!0,me.push([ae,_e,{gpuBuffer:re,download:g.jsepCreateDownloader(re,ge*ue,ae),dispose:()=>{g._OrtReleaseTensor(ie)}},"gpu-buffer"])}else{let te=Cr(ae),re=new te(ge);new Uint8Array(re.buffer,re.byteOffset,re.byteLength).set(g.HEAPU8.subarray(K,K+re.byteLength)),me.push([ae,_e,re,"cpu"])}}finally{g.stackRestore(xe),ae==="string"&&K&&g._free(K),be||g._OrtReleaseTensor(ie)}}return A&&!I&&(g._OrtClearBoundOutputs(A.handle),Ye.set(i,[S,x,H,A,I,!1])),me}finally{g.stackRestore(pe),L.forEach(le=>g._OrtReleaseTensor(le)),W.forEach(le=>g._OrtReleaseTensor(le)),de.forEach(le=>g._free(le)),D!==0&&g._OrtReleaseRunOptions(D),T.forEach(le=>g._free(le))}},Wr=i=>{let c=Q(),a=Ye.get(i);if(!a)throw new Error("invalid session id");let h=a[0],f=c._OrtEndProfiling(h);f===0&&j("Can\'t get an profile file name."),c._OrtFree(f)},Nr=i=>{let c=[];for(let a of i){let h=a[2];!Array.isArray(h)&&"buffer"in h&&c.push(h.buffer)}return c};self.onmessage=i=>{let{type:c,in:a}=i.data;try{switch(c){case"init-wasm":Sr(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:c})},h=>{postMessage({type:c,err:h})})},h=>{postMessage({type:c,err:h})});break;case"init-ep":{let{epName:h,env:f}=a;Rr(f,h).then(()=>{postMessage({type:c})},w=>{postMessage({type:c,err:w})});break}case"copy-from":{let{buffer:h}=a,f=Lt(h);postMessage({type:c,out:f});break}case"create":{let{model:h,options:f}=a;Ir(h,f).then(w=>{postMessage({type:c,out:w})},w=>{postMessage({type:c,err:w})});break}case"release":Br(a),postMessage({type:c});break;case"run":{let{sessionId:h,inputIndices:f,inputs:w,outputIndices:g,options:s}=a;kr(h,f,w,g,new Array(g.length).fill(null),s).then(S=>{S.some(x=>x[3]!=="cpu")?postMessage({type:c,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:c,out:S},Nr([...w,...S]))},S=>{postMessage({type:c,err:S})});break}case"end-profiling":Wr(a),postMessage({type:c});break;default:}}catch(h){postMessage({type:c,err:h})}};})();\n'}),_r$1,gt$2,yn$1,Do$1,Lo$1,ca$2,pa$2,Vr$1,Wr$1,Tg$1,Eo$1,od$2,id$2,ad$2,sd$2,ud$2,ld$2,fd$2,da$2=L$1(()=>{var s;Ot$2(),rd$2(),Ur$1(),_r$1=()=>!!Z.wasm.proxy&&typeof document<"u",yn$1=!1,Do$1=!1,Lo$1=!1,pa$2=new Map,Vr$1=(l,c)=>{let d=pa$2.get(l);d?d.push(c):pa$2.set(l,[c])},Wr$1=()=>{if(yn$1||!Do$1||Lo$1||!gt$2)throw new Error("worker not ready")},Tg$1=l=>{switch(l.data.type){case"init-wasm":yn$1=!1,l.data.err?(Lo$1=!0,ca$2[1](l.data.err)):(Do$1=!0,ca$2[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let c=pa$2.get(l.data.type);l.data.err?c.shift()[1](l.data.err):c.shift()[0](l.data.out);break}}},Eo$1=typeof document<"u"?(s=document==null?void 0:document.currentScript)==null?void 0:s.src:void 0,od$2=async()=>{if(!Do$1){if(yn$1)throw new Error("multiple calls to 'initWasm()' detected.");if(Lo$1)throw new Error("previous call to 'initWasm()' failed.");if(yn$1=!0,_r$1())return Z.wasm.wasmPaths===void 0&&Eo$1&&Eo$1.indexOf("blob:")!==0&&(Z.wasm.wasmPaths=Eo$1.substr(0,+Eo$1.lastIndexOf("/")+1)),new Promise((l,c)=>{gt$2==null||gt$2.terminate();let d=URL.createObjectURL(new Blob([nd$2()],{type:"text/javascript"}));gt$2=new Worker(d,{name:"ort-wasm-proxy-worker"}),gt$2.onerror=g=>c(g),gt$2.onmessage=Tg$1,URL.revokeObjectURL(d),ca$2=[l,c];let f={type:"init-wasm",in:Z};gt$2.postMessage(f)});try{await Mp$1(Z.wasm),await Xp$2(Z),Do$1=!0}catch(l){throw Lo$1=!0,l}finally{yn$1=!1}}},id$2=async l=>{if(_r$1())return Wr$1(),new Promise((c,d)=>{Vr$1("init-ep",[c,d]);let f={type:"init-ep",in:{epName:l,env:Z}};gt$2.postMessage(f)});await Kp$2(Z,l)},ad$2=async l=>_r$1()?(Wr$1(),new Promise((c,d)=>{Vr$1("copy-from",[c,d]);let f={type:"copy-from",in:{buffer:l}};gt$2.postMessage(f,[l.buffer])})):fa$2(l),sd$2=async(l,c)=>{if(_r$1()){if(c!=null&&c.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Wr$1(),new Promise((d,f)=>{Vr$1("create",[d,f]);let g={type:"create",in:{model:l,options:{...c}}},v=[];l instanceof Uint8Array&&v.push(l.buffer),gt$2.postMessage(g,v)})}else return Jp$2(l,c)},ud$2=async l=>{if(_r$1())return Wr$1(),new Promise((c,d)=>{Vr$1("release",[c,d]);let f={type:"release",in:l};gt$2.postMessage(f)});Zp$2(l)},ld$2=async(l,c,d,f,g,v)=>{if(_r$1()){if(d.some(b=>b[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(g.some(b=>b))throw new Error("pre-allocated output tensor is not supported for proxy.");return Wr$1(),new Promise((b,$)=>{Vr$1("run",[b,$]);let y=d,x={type:"run",in:{sessionId:l,inputIndices:c,inputs:y,outputIndices:f,options:v}};gt$2.postMessage(x,td$2(y))})}else return Qp$2(l,c,d,f,g,v)},fd$2=async l=>{if(_r$1())return Wr$1(),new Promise((c,d)=>{Vr$1("end-profiling",[c,d]);let f={type:"end-profiling",in:l};gt$2.postMessage(f)});ed$2(l)}}),cd$2,xg$1,Co$2,pd$2=L$1(()=>{Ot$2(),da$2(),ua$2(),la$2(),cd$2=(s,l)=>{switch(s.location){case"cpu":return[s.type,s.dims,s.data,"cpu"];case"gpu-buffer":return[s.type,s.dims,{gpuBuffer:s.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${s.location} for ${l()}`)}},xg$1=s=>{switch(s[3]){case"cpu":return new Me(s[0],s[2],s[1]);case"gpu-buffer":{let l=s[0];if(!Po$1(l))throw new Error(`not supported data type: ${l} for deserializing GPU tensor`);let{gpuBuffer:c,download:d,dispose:f}=s[2];return Me.fromGpuBuffer(c,{dataType:l,dims:s[1],download:d,dispose:f})}default:throw new Error(`invalid data location: ${s[3]}`)}},Co$2=class{async fetchModelAndCopyToWasmMemory(s){return ad$2(await gn$1(s))}async loadModel(s,l){lr$2();let c;typeof s=="string"?typeof process<"u"&&process.versions&&process.versions.node?c=await gn$1(s):c=await this.fetchModelAndCopyToWasmMemory(s):c=s,[this.sessionId,this.inputNames,this.outputNames]=await sd$2(c,l),fr$1()}async dispose(){return ud$2(this.sessionId)}async run(s,l,c){lr$2();let d=[],f=[];Object.entries(s).forEach(C=>{let E=C[0],N=C[1],W=this.inputNames.indexOf(E);if(W===-1)throw new Error(`invalid input '${E}'`);d.push(N),f.push(W)});let g=[],v=[];Object.entries(l).forEach(C=>{let E=C[0],N=C[1],W=this.outputNames.indexOf(E);if(W===-1)throw new Error(`invalid output '${E}'`);g.push(N),v.push(W)});let b=d.map((C,E)=>cd$2(C,()=>`input "${this.inputNames[f[E]]}"`)),$=g.map((C,E)=>C?cd$2(C,()=>`output "${this.outputNames[v[E]]}"`):null),y=await ld$2(this.sessionId,f,b,v,$,c),x={};for(let C=0;C<y.length;C++)x[this.outputNames[v[C]]]=g[C]??xg$1(y[C]);return fr$1(),x}startProfiling(){}endProfiling(){fd$2(this.sessionId)}}}),wg$1,Fo$1,dd$2=L$1(()=>{Ot$2(),da$2(),pd$2(),wg$1=()=>{if((typeof Z.wasm.initTimeout!="number"||Z.wasm.initTimeout<0)&&(Z.wasm.initTimeout=0),typeof Z.wasm.simd!="boolean"&&(Z.wasm.simd=!0),typeof Z.wasm.proxy!="boolean"&&(Z.wasm.proxy=!1),typeof Z.wasm.trace!="boolean"&&(Z.wasm.trace=!1),typeof Z.wasm.numThreads!="number"||!Number.isInteger(Z.wasm.numThreads)||Z.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(Z.wasm.numThreads=1);let s=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;Z.wasm.numThreads=Math.min(4,Math.ceil((s||1)/2))}},Fo$1=class{async init(s){wg$1(),await od$2(),await id$2(s)}async createInferenceSessionHandler(s,l){let c=new Co$2;return await c.loadModel(s,l),Promise.resolve(c)}}}),hd$1={};Sr$1(hd$1,{wasmBackend:()=>vg$1});var vg$1,md$2=L$1(()=>{dd$2(),vg$1=new Fo$1});Ot$2();Ot$2();Ot$2();var Ts$1="1.18.0",jO$1=qo$1;{let s=(Op$2(),ar$1(_p$2)).onnxjsBackend;Pr$2("webgl",s,-10)}{let s=(md$2(),ar$1(hd$1)).wasmBackend;Pr$2("cpu",s,10),Pr$2("wasm",s,10)}Object.defineProperty(Z.versions,"web",{value:Ts$1,enumerable:!0});/*! Bundled license information:

long/index.js:
  (**
   * @license
   * Copyright 2009 The Closure Library Authors
   * Copyright 2020 Daniel Wirtz / The long.js Authors.
   *
   * Licensed under the Apache License, Version 2.0 (the "License");
   * you may not use this file except in compliance with the License.
   * You may obtain a copy of the License at
   *
   *     http://www.apache.org/licenses/LICENSE-2.0
   *
   * Unless required by applicable law or agreed to in writing, software
   * distributed under the License is distributed on an "AS IS" BASIS,
   * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
   * See the License for the specific language governing permissions and
   * limitations under the License.
   *
   * SPDX-License-Identifier: Apache-2.0
   *)
*/const ort_cpu=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return Pd$2},get TRACE(){return ls$2},get TRACE_FUNC_BEGIN(){return lr$2},get TRACE_FUNC_END(){return fr$1},get Tensor(){return Me},get TrainingSession(){return Dd$2},default:jO$1,get env(){return Z},get registerBackend(){return Pr$2}},Symbol.toStringTag,{value:"Module"}));/*!
 * ONNX Runtime Web v1.18.0
 * Copyright (c) Microsoft Corporation. All rights reserved.
 * Licensed under the MIT License.
 */var Oi$1=Object.defineProperty,nc=Object.getOwnPropertyDescriptor,ic=Object.getOwnPropertyNames,oc=Object.prototype.hasOwnProperty,j=(s,l)=>()=>(s&&(l=s(s=0)),l),Er$1=(s,l)=>()=>(l||s((l={exports:{}}).exports,l),l.exports),kr$1=(s,l)=>{for(var c in l)Oi$1(s,c,{get:l[c],enumerable:!0})},ac=(s,l,c,d)=>{if(l&&typeof l=="object"||typeof l=="function")for(let f of ic(l))!oc.call(s,f)&&f!==c&&Oi$1(s,f,{get:()=>l[f],enumerable:!(d=nc(l,f))||d.enumerable});return s},sr$1=s=>ac(Oi$1({},"__esModule",{value:!0}),s),kn$1,ur$1,lr$1,sc,On$1,Pn$1=j(()=>{kn$1=new Map,ur$1=[],lr$1=(s,l,c)=>{if(l&&typeof l.init=="function"&&typeof l.createInferenceSessionHandler=="function"){let d=kn$1.get(s);if(d===void 0)kn$1.set(s,{backend:l,priority:c});else{if(d.priority>c)return;if(d.priority===c&&d.backend!==l)throw new Error(`cannot register backend "${s}" using priority ${c}`)}if(c>=0){let f=ur$1.indexOf(s);f!==-1&&ur$1.splice(f,1);for(let g=0;g<ur$1.length;g++)if(kn$1.get(ur$1[g]).priority<=c){ur$1.splice(g,0,s);return}ur$1.push(s)}return}throw new TypeError("not a valid backend")},sc=async s=>{let l=kn$1.get(s);if(!l)return"backend not found.";if(l.initialized)return l.backend;if(l.aborted)return l.error;{let c=!!l.initPromise;try{return c||(l.initPromise=l.backend.init(s)),await l.initPromise,l.initialized=!0,l.backend}catch(d){return c||(l.error=`${d}`,l.aborted=!0),l.error}finally{delete l.initPromise}}},On$1=async s=>{let l=s.executionProviders||[],c=l.map($=>typeof $=="string"?$:$.name),d=c.length===0?ur$1:c,f,g=[],v=new Set;for(let $ of d){let y=await sc($);typeof y=="string"?g.push({name:$,err:y}):(f||(f=y),f===y&&v.add($))}if(!f)throw new Error(`no available backend found. ERR: ${g.map($=>`[${$.name}] ${$.err}`).join(", ")}`);for(let{name:$,err:y}of g)c.includes($)&&console.warn(`removing requested execution provider "${$}" from session options because it is not available: ${y}`);let b=l.filter($=>v.has(typeof $=="string"?$:$.name));return[f,new Proxy(s,{get:($,y)=>y==="executionProviders"?b:Reflect.get($,y)})]}}),ra=j(()=>{Pn$1()}),na$1,ia$1=j(()=>{na$1="1.18.0"}),oa$1,gt$1,Pi$1=j(()=>{ia$1(),oa$1="warning",gt$1={wasm:{},webgl:{},webgpu:{},versions:{common:na$1},set logLevel(s){if(s!==void 0){if(typeof s!="string"||["verbose","info","warning","error","fatal"].indexOf(s)===-1)throw new Error(`Unsupported logging level: ${s}`);oa$1=s}},get logLevel(){return oa$1}},Object.defineProperty(gt$1,"logLevel",{enumerable:!0})}),ke$1,aa$1=j(()=>{Pi$1(),ke$1=gt$1}),sa$1,ua$1,la$1=j(()=>{sa$1=(s,l)=>{let c=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);c.width=s.dims[3],c.height=s.dims[2];let d=c.getContext("2d");if(d!=null){let f,g;(l==null?void 0:l.tensorLayout)!==void 0&&l.tensorLayout==="NHWC"?(f=s.dims[2],g=s.dims[3]):(f=s.dims[3],g=s.dims[2]);let v=(l==null?void 0:l.format)!==void 0?l.format:"RGB",b=l==null?void 0:l.norm,$,y;b===void 0||b.mean===void 0?$=[255,255,255,255]:typeof b.mean=="number"?$=[b.mean,b.mean,b.mean,b.mean]:($=[b.mean[0],b.mean[1],b.mean[2],0],b.mean[3]!==void 0&&($[3]=b.mean[3])),b===void 0||b.bias===void 0?y=[0,0,0,0]:typeof b.bias=="number"?y=[b.bias,b.bias,b.bias,b.bias]:(y=[b.bias[0],b.bias[1],b.bias[2],0],b.bias[3]!==void 0&&(y[3]=b.bias[3]));let x=g*f,C=0,E=x,N=x*2,W=-1;v==="RGBA"?(C=0,E=x,N=x*2,W=x*3):v==="RGB"?(C=0,E=x,N=x*2):v==="RBG"&&(C=0,N=x,E=x*2);for(let q=0;q<g;q++)for(let Y=0;Y<f;Y++){let re=(s.data[C++]-y[0])*$[0],se=(s.data[E++]-y[1])*$[1],de=(s.data[N++]-y[2])*$[2],he=W===-1?255:(s.data[W++]-y[3])*$[3];d.fillStyle="rgba("+re+","+se+","+de+","+he+")",d.fillRect(Y,q,1,1)}if("toDataURL"in c)return c.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},ua$1=(s,l)=>{let c=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),d;if(c!=null){let f,g,v;(l==null?void 0:l.tensorLayout)!==void 0&&l.tensorLayout==="NHWC"?(f=s.dims[2],g=s.dims[1],v=s.dims[3]):(f=s.dims[3],g=s.dims[2],v=s.dims[1]);let b=l!==void 0&&l.format!==void 0?l.format:"RGB",$=l==null?void 0:l.norm,y,x;$===void 0||$.mean===void 0?y=[255,255,255,255]:typeof $.mean=="number"?y=[$.mean,$.mean,$.mean,$.mean]:(y=[$.mean[0],$.mean[1],$.mean[2],255],$.mean[3]!==void 0&&(y[3]=$.mean[3])),$===void 0||$.bias===void 0?x=[0,0,0,0]:typeof $.bias=="number"?x=[$.bias,$.bias,$.bias,$.bias]:(x=[$.bias[0],$.bias[1],$.bias[2],0],$.bias[3]!==void 0&&(x[3]=$.bias[3]));let C=g*f;if(l!==void 0&&(l.format!==void 0&&v===4&&l.format!=="RGBA"||v===3&&l.format!=="RGB"&&l.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let E=4,N=0,W=1,q=2,Y=3,re=0,se=C,de=C*2,he=-1;b==="RGBA"?(re=0,se=C,de=C*2,he=C*3):b==="RGB"?(re=0,se=C,de=C*2):b==="RBG"&&(re=0,de=C,se=C*2),d=c.createImageData(f,g);for(let ge=0;ge<g*f;N+=E,W+=E,q+=E,Y+=E,ge++)d.data[N]=(s.data[re++]-x[0])*y[0],d.data[W]=(s.data[se++]-x[1])*y[1],d.data[q]=(s.data[de++]-x[2])*y[2],d.data[Y]=he===-1?255:(s.data[he++]-x[3])*y[3]}else throw new Error("Can not access image data");return d}}),Ri$1,da$1,ca$1,pa$1,ma$1,fa$1=j(()=>{Rn$1(),Ri$1=(s,l)=>{if(s===void 0)throw new Error("Image buffer must be defined");if(l.height===void 0||l.width===void 0)throw new Error("Image height and width must be defined");if(l.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:c,width:d}=l,f=l.norm??{mean:255,bias:0},g,v;typeof f.mean=="number"?g=[f.mean,f.mean,f.mean,f.mean]:g=[f.mean[0],f.mean[1],f.mean[2],f.mean[3]??255],typeof f.bias=="number"?v=[f.bias,f.bias,f.bias,f.bias]:v=[f.bias[0],f.bias[1],f.bias[2],f.bias[3]??0];let b=l.format!==void 0?l.format:"RGBA",$=l.tensorFormat!==void 0&&l.tensorFormat!==void 0?l.tensorFormat:"RGB",y=c*d,x=$==="RGBA"?new Float32Array(y*4):new Float32Array(y*3),C=4,E=0,N=1,W=2,q=3,Y=0,re=y,se=y*2,de=-1;b==="RGB"&&(C=3,E=0,N=1,W=2,q=-1),$==="RGBA"?de=y*3:$==="RBG"?(Y=0,se=y,re=y*2):$==="BGR"&&(se=0,re=y,Y=y*2);for(let he=0;he<y;he++,E+=C,W+=C,N+=C,q+=C)x[Y++]=(s[E]+v[0])/g[0],x[re++]=(s[N]+v[1])/g[1],x[se++]=(s[W]+v[2])/g[2],de!==-1&&q!==-1&&(x[de++]=(s[q]+v[3])/g[3]);return $==="RGBA"?new ot$2("float32",x,[1,4,c,d]):new ot$2("float32",x,[1,3,c,d])},da$1=async(s,l)=>{let c=typeof HTMLImageElement<"u"&&s instanceof HTMLImageElement,d=typeof ImageData<"u"&&s instanceof ImageData,f=typeof ImageBitmap<"u"&&s instanceof ImageBitmap,g=typeof s=="string",v,b=l??{},$=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},y=x=>x instanceof HTMLCanvasElement||x instanceof OffscreenCanvas?x.getContext("2d"):null;if(c){let x=$();x.width=s.width,x.height=s.height;let C=y(x);if(C!=null){let E=s.height,N=s.width;if(l!==void 0&&l.resizedHeight!==void 0&&l.resizedWidth!==void 0&&(E=l.resizedHeight,N=l.resizedWidth),l!==void 0){if(b=l,l.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");b.tensorFormat="RGBA",b.height=E,b.width=N}else b.tensorFormat="RGBA",b.height=E,b.width=N;C.drawImage(s,0,0),v=C.getImageData(0,0,N,E).data}else throw new Error("Can not access image data")}else if(d){let x,C;if(l!==void 0&&l.resizedWidth!==void 0&&l.resizedHeight!==void 0?(x=l.resizedHeight,C=l.resizedWidth):(x=s.height,C=s.width),l!==void 0&&(b=l),b.format="RGBA",b.height=x,b.width=C,l!==void 0){let E=$();E.width=C,E.height=x;let N=y(E);if(N!=null)N.putImageData(s,0,0),v=N.getImageData(0,0,C,x).data;else throw new Error("Can not access image data")}else v=s.data}else if(f){if(l===void 0)throw new Error("Please provide image config with format for Imagebitmap");let x=$();x.width=s.width,x.height=s.height;let C=y(x);if(C!=null){let E=s.height,N=s.width;return C.drawImage(s,0,0,N,E),v=C.getImageData(0,0,N,E).data,b.height=E,b.width=N,Ri$1(v,b)}else throw new Error("Can not access image data")}else{if(g)return new Promise((x,C)=>{let E=$(),N=y(E);if(!s||!N)return C();let W=new Image;W.crossOrigin="Anonymous",W.src=s,W.onload=()=>{E.width=W.width,E.height=W.height,N.drawImage(W,0,0,E.width,E.height);let q=N.getImageData(0,0,E.width,E.height);b.height=E.height,b.width=E.width,x(Ri$1(q.data,b))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(v!==void 0)return Ri$1(v,b);throw new Error("Input data provided is not supported - aborted tensor creation")},ca$1=(s,l)=>{let{width:c,height:d,download:f,dispose:g}=l,v=[1,d,c,4];return new ot$2({location:"texture",type:"float32",texture:s,dims:v,download:f,dispose:g})},pa$1=(s,l)=>{let{dataType:c,dims:d,download:f,dispose:g}=l;return new ot$2({location:"gpu-buffer",type:c??"float32",gpuBuffer:s,dims:d,download:f,dispose:g})},ma$1=(s,l,c)=>new ot$2({location:"cpu-pinned",type:s,data:l,dims:c??[l.length]})}),dr$1,Qr$1,ha$1,ga$1,ya$1=j(()=>{dr$1=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Qr$1=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),ha$1=!1,ga$1=()=>{if(!ha$1){ha$1=!0;let s=typeof BigInt64Array<"u"&&BigInt64Array.from,l=typeof BigUint64Array<"u"&&BigUint64Array.from,c=typeof Float16Array<"u"&&Float16Array.from;s&&(dr$1.set("int64",BigInt64Array),Qr$1.set(BigInt64Array,"int64")),l&&(dr$1.set("uint64",BigUint64Array),Qr$1.set(BigUint64Array,"uint64")),c?(dr$1.set("float16",Float16Array),Qr$1.set(Float16Array,"float16")):dr$1.set("float16",Uint16Array)}}}),ba$1,va$1,wa$1=j(()=>{Rn$1(),ba$1=s=>{let l=1;for(let c=0;c<s.length;c++){let d=s[c];if(typeof d!="number"||!Number.isSafeInteger(d))throw new TypeError(`dims[${c}] must be an integer, got: ${d}`);if(d<0)throw new RangeError(`dims[${c}] must be a non-negative integer, got: ${d}`);l*=d}return l},va$1=(s,l)=>{switch(s.location){case"cpu":return new ot$2(s.type,s.data,l);case"cpu-pinned":return new ot$2({location:"cpu-pinned",data:s.data,type:s.type,dims:l});case"texture":return new ot$2({location:"texture",texture:s.texture,type:s.type,dims:l});case"gpu-buffer":return new ot$2({location:"gpu-buffer",gpuBuffer:s.gpuBuffer,type:s.type,dims:l});default:throw new Error(`tensorReshape: tensor location ${s.location} is not supported`)}}}),ot$2,Rn$1=j(()=>{la$1(),fa$1(),ya$1(),wa$1(),ot$2=class{constructor(s,l,c){ga$1();let d,f;if(typeof s=="object"&&"location"in s)switch(this.dataLocation=s.location,d=s.type,f=s.dims,s.location){case"cpu-pinned":{let v=dr$1.get(d);if(!v)throw new TypeError(`unsupported type "${d}" to create tensor from pinned buffer`);if(!(s.data instanceof v))throw new TypeError(`buffer should be of type ${v.name}`);this.cpuData=s.data;break}case"texture":{if(d!=="float32")throw new TypeError(`unsupported type "${d}" to create tensor from texture`);this.gpuTextureData=s.texture,this.downloader=s.download,this.disposer=s.dispose;break}case"gpu-buffer":{if(d!=="float32"&&d!=="float16"&&d!=="int32"&&d!=="int64"&&d!=="uint32"&&d!=="uint8"&&d!=="bool")throw new TypeError(`unsupported type "${d}" to create tensor from gpu buffer`);this.gpuBufferData=s.gpuBuffer,this.downloader=s.download,this.disposer=s.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let v,b;if(typeof s=="string")if(d=s,b=c,s==="string"){if(!Array.isArray(l))throw new TypeError("A string tensor's data must be a string array.");v=l}else{let $=dr$1.get(s);if($===void 0)throw new TypeError(`Unsupported tensor type: ${s}.`);if(Array.isArray(l)){if(s==="float16"&&$===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");s==="uint64"||s==="int64"?v=$.from(l,BigInt):v=$.from(l)}else if(l instanceof $)v=l;else throw new TypeError(`A ${d} tensor's data must be type of ${$}`)}else if(b=l,Array.isArray(s)){if(s.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let $=typeof s[0];if($==="string")d="string",v=s;else if($==="boolean")d="bool",v=Uint8Array.from(s);else throw new TypeError(`Invalid element type of data array: ${$}.`)}else{let $=Qr$1.get(s.constructor);if($===void 0)throw new TypeError(`Unsupported type for tensor data: ${s.constructor}.`);d=$,v=s}if(b===void 0)b=[v.length];else if(!Array.isArray(b))throw new TypeError("A tensor's dims must be a number array");f=b,this.cpuData=v,this.dataLocation="cpu"}let g=ba$1(f);if(this.cpuData&&g!==this.cpuData.length)throw new Error(`Tensor's size(${g}) does not match data length(${this.cpuData.length}).`);this.type=d,this.dims=f,this.size=g}static async fromImage(s,l){return da$1(s,l)}static fromTexture(s,l){return ca$1(s,l)}static fromGpuBuffer(s,l){return pa$1(s,l)}static fromPinnedBuffer(s,l,c){return ma$1(s,l,c)}toDataURL(s){return sa$1(this,s)}toImageData(s){return ua$1(this,s)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(s){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let l=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=l,s&&this.disposer&&(this.disposer(),this.disposer=void 0),l}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(s){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return va$1(this,s)}}}),tt$3,zn$1=j(()=>{Rn$1(),tt$3=ot$2}),Bn$1,$a,yt$1,ut$1,zi$1=j(()=>{Pi$1(),Bn$1=(s,l)=>{(typeof gt$1.trace>"u"?!gt$1.wasm.trace:!gt$1.trace)||console.timeStamp(`${s}::ORT::${l}`)},$a=(s,l)=>{var f;let c=((f=new Error().stack)==null?void 0:f.split(/\r\n|\r|\n/g))||[],d=!1;for(let g=0;g<c.length;g++){if(d&&!c[g].includes("TRACE_FUNC")){let v=`FUNC_${s}::${c[g].trim().split(" ")[1]}`;l&&(v+=`::${l}`),Bn$1("CPU",v);return}c[g].includes("TRACE_FUNC")&&(d=!0)}},yt$1=s=>{(typeof gt$1.trace>"u"?!gt$1.wasm.trace:!gt$1.trace)||$a("BEGIN",s)},ut$1=s=>{(typeof gt$1.trace>"u"?!gt$1.wasm.trace:!gt$1.trace)||$a("END",s)}}),Dn$1,_a$1=j(()=>{Pn$1(),zn$1(),zi$1(),Dn$1=class P3e{constructor(l){this.handler=l}async run(l,c,d){yt$1();let f={},g={};if(typeof l!="object"||l===null||l instanceof tt$3||Array.isArray(l))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let v=!0;if(typeof c=="object"){if(c===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(c instanceof tt$3)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(c)){if(c.length===0)throw new TypeError("'fetches' cannot be an empty array.");v=!1;for(let y of c){if(typeof y!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(y)===-1)throw new RangeError(`'fetches' contains invalid output name: ${y}.`);f[y]=null}if(typeof d=="object"&&d!==null)g=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else{let y=!1,x=Object.getOwnPropertyNames(c);for(let C of this.outputNames)if(x.indexOf(C)!==-1){let E=c[C];(E===null||E instanceof tt$3)&&(y=!0,v=!1,f[C]=E)}if(y){if(typeof d=="object"&&d!==null)g=d;else if(typeof d<"u")throw new TypeError("'options' must be an object.")}else g=c}}else if(typeof c<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let y of this.inputNames)if(typeof l[y]>"u")throw new Error(`input '${y}' is missing in 'feeds'.`);if(v)for(let y of this.outputNames)f[y]=null;let b=await this.handler.run(l,f,g),$={};for(let y in b)if(Object.hasOwnProperty.call(b,y)){let x=b[y];x instanceof tt$3?$[y]=x:$[y]=new tt$3(x.type,x.data,x.dims)}return ut$1(),$}async release(){return this.handler.dispose()}static async create(l,c,d,f){yt$1();let g,v={};if(typeof l=="string"){if(g=l,typeof c=="object"&&c!==null)v=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(l instanceof Uint8Array){if(g=l,typeof c=="object"&&c!==null)v=c;else if(typeof c<"u")throw new TypeError("'options' must be an object.")}else if(l instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&l instanceof SharedArrayBuffer){let x=l,C=0,E=l.byteLength;if(typeof c=="object"&&c!==null)v=c;else if(typeof c=="number"){if(C=c,!Number.isSafeInteger(C))throw new RangeError("'byteOffset' must be an integer.");if(C<0||C>=x.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${x.byteLength}).`);if(E=l.byteLength-C,typeof d=="number"){if(E=d,!Number.isSafeInteger(E))throw new RangeError("'byteLength' must be an integer.");if(E<=0||C+E>x.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${x.byteLength-C}].`);if(typeof f=="object"&&f!==null)v=f;else if(typeof f<"u")throw new TypeError("'options' must be an object.")}else if(typeof d<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof c<"u")throw new TypeError("'options' must be an object.");g=new Uint8Array(x,C,E)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let[b,$]=await On$1(v),y=await b.createInferenceSessionHandler(g,$);return ut$1(),new P3e(y)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),uc,xa$1=j(()=>{_a$1(),uc=Dn$1}),Sa=j(()=>{}),Ca$1=j(()=>{}),Ia$1=j(()=>{}),Ta=j(()=>{}),lc,Mn$1,Aa$1=j(()=>{Pn$1(),zn$1(),lc="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",Mn$1=class R3e{constructor(l,c,d){this.handler=l,this.hasOptimizerModel=c,this.hasEvalModel=d}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(l,c){let d=l.evalModel||"",f=l.optimizerModel||"",g=c||{},[v,b]=await On$1(g);if(v.createTrainingSessionHandler){let $=await v.createTrainingSessionHandler(l.checkpointState,l.trainModel,d,f,b);return new R3e($,!!l.optimizerModel,!!l.evalModel)}else throw new Error(lc)}typeNarrowingForRunStep(l,c,d,f,g){let v={},b={};if(typeof d!="object"||d===null||d instanceof tt$3||Array.isArray(d))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let $=!0;if(typeof f=="object"){if(f===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(f instanceof tt$3)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(f)){if(f.length===0)throw new TypeError("'fetches' cannot be an empty array.");$=!1;for(let y of f){if(typeof y!="string")throw new TypeError("'fetches' must be a string array or an object.");if(c.indexOf(y)===-1)throw new RangeError(`'fetches' contains invalid output name: ${y}.`);v[y]=null}if(typeof g=="object"&&g!==null)b=g;else if(typeof g<"u")throw new TypeError("'options' must be an object.")}else{let y=!1,x=Object.getOwnPropertyNames(f);for(let C of c)if(x.indexOf(C)!==-1){let E=f[C];(E===null||E instanceof tt$3)&&(y=!0,$=!1,v[C]=E)}if(y){if(typeof g=="object"&&g!==null)b=g;else if(typeof g<"u")throw new TypeError("'options' must be an object.")}else b=f}}else if(typeof f<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let y of l)if(typeof d[y]>"u")throw new Error(`input '${y}' is missing in 'feeds'.`);if($)for(let y of c)v[y]=null;return[v,b]}convertHandlerReturnTypeToMapOfTensors(l){let c={};for(let d in l)if(Object.hasOwnProperty.call(l,d)){let f=l[d];f instanceof tt$3?c[d]=f:c[d]=new tt$3(f.type,f.data,f.dims)}return c}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(l,c,d){let[f,g]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,l,c,d),v=await this.handler.runTrainStep(l,f,g);return this.convertHandlerReturnTypeToMapOfTensors(v)}async runOptimizerStep(l){if(this.hasOptimizerModel)await this.handler.runOptimizerStep(l||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")}async runEvalStep(l,c,d){if(this.hasEvalModel){let[f,g]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,l,c,d),v=await this.handler.runEvalStep(l,f,g);return this.convertHandlerReturnTypeToMapOfTensors(v)}else throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(l=!0){return this.handler.getParametersSize(l)}async loadParametersBuffer(l,c=!0){let d=await this.getParametersSize(c);if(l.length!==4*d)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(l,c)}async getContiguousParameters(l=!0){return this.handler.getContiguousParameters(l)}async release(){return this.handler.dispose()}}}),dc,Ea$1=j(()=>{Aa$1(),dc=Mn$1}),Bi$1={};kr$1(Bi$1,{InferenceSession:()=>uc,TRACE:()=>Bn$1,TRACE_FUNC_BEGIN:()=>yt$1,TRACE_FUNC_END:()=>ut$1,Tensor:()=>tt$3,TrainingSession:()=>dc,env:()=>ke$1,registerBackend:()=>lr$1});var _t=j(()=>{ra(),aa$1(),xa$1(),zn$1(),Sa(),Ca$1(),zi$1(),Ia$1(),Ta(),Ea$1()}),Di$1={};kr$1(Di$1,{createReadStream:()=>Oa$1,readFile:()=>cc,readFileSync:()=>pc});var cc,pc,Oa$1,Mi$1=j(()=>{cc=void 0,pc=void 0,Oa$1=void 0}),Ui$1={};kr$1(Ui$1,{join:()=>mc});var mc,Wi$1=j(()=>{mc=void 0}),za$1=Er$1((s,l)=>{var c=(()=>{var f;var d=typeof document<"u"?(f=document.currentScript)==null?void 0:f.src:void 0;return typeof __filename<"u"&&(d||(d=__filename)),function(g={}){var v=g,b,$,y=new Promise((Ce,Le)=>{b=Ce,$=Le});v.mountExternalData=(Ce,Le)=>{(v.eb||(v.eb=new Map)).set(Ce,Le)},v.unmountExternalData=()=>{delete v.eb};let x=()=>{let Ce=(gy,X$,aS)=>(..._S)=>{let yye=_we,xye=X$==null?void 0:X$();_S=gy(..._S);let Oye=X$==null?void 0:X$();return xye!==Oye&&(gy=Oye,aS(xye),X$=aS=null),_we!=yye?e2e():_S},Le=gy=>async(...X$)=>{var aS;try{if(v.cb)throw Error("Session already started");let _S=v.cb={xb:X$[0],errors:[]},yye=await gy(...X$);if(v.cb!==_S)throw Error("Session mismatch");(aS=v.kb)==null||aS.flush();let xye=_S.errors;if(0<xye.length){let Oye=await Promise.all(xye);if(Oye=Oye.filter(Eye=>Eye),0<Oye.length)throw Error(Oye.join(`
`))}return yye}finally{v.cb=null}};v._OrtCreateSession=Ce(v._OrtCreateSession,()=>v._OrtCreateSession,gy=>v._OrtCreateSession=gy),v._OrtRun=Le(Ce(v._OrtRun,()=>v._OrtRun,gy=>v._OrtRun=gy)),v._OrtRunWithBinding=Le(Ce(v._OrtRunWithBinding,()=>v._OrtRunWithBinding,gy=>v._OrtRunWithBinding=gy)),v._OrtBindInput=Ce(v._OrtBindInput,()=>v._OrtBindInput,gy=>v._OrtBindInput=gy),x=void 0};v.jsepInit=(Ce,Le)=>{if(x==null||x(),Ce==="webgpu"){[v.kb,v.pb,v.tb,v.lb,v.sb,v.Ra,v.ub,v.wb,v.qb,v.rb,v.vb]=Le;let gy=v.kb;v.jsepRegisterBuffer=(X$,aS,_S,yye)=>gy.registerBuffer(X$,aS,_S,yye),v.jsepGetBuffer=X$=>gy.getBuffer(X$),v.jsepCreateDownloader=(X$,aS,_S)=>gy.createDownloader(X$,aS,_S),v.jsepOnReleaseSession=X$=>{gy.onReleaseSession(X$)},v.jsepOnRunStart=X$=>gy.onRunStart(X$)}};var C=Object.assign({},v),E="./this.program",N=(Ce,Le)=>{throw Le},W=typeof window=="object",q=typeof importScripts=="function",Y=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",re="",se,de,he;if(Y){var ge=(Mi$1(),sr$1(Di$1)),Se=(Wi$1(),sr$1(Ui$1));re=q?Se.dirname(re)+"/":__dirname+"/",se=(Ce,Le)=>(Ce=MS(Ce)?new URL(Ce):Se.normalize(Ce),ge.readFileSync(Ce,Le?void 0:"utf8")),he=Ce=>(Ce=se(Ce,!0),Ce.buffer||(Ce=new Uint8Array(Ce)),Ce),de=(Ce,Le,gy,X$=!0)=>{Ce=MS(Ce)?new URL(Ce):Se.normalize(Ce),ge.readFile(Ce,X$?void 0:"utf8",(aS,_S)=>{aS?gy(aS):Le(X$?_S.buffer:_S)})},!v.thisProgram&&1<process.argv.length&&(E=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),N=(Ce,Le)=>{throw process.exitCode=Ce,Le}}else(W||q)&&(q?re=self.location.href:typeof document<"u"&&document.currentScript&&(re=document.currentScript.src),d&&(re=d),re.startsWith("blob:")?re="":re=re.substr(0,re.replace(/[?#].*/,"").lastIndexOf("/")+1),se=Ce=>{var Le=new XMLHttpRequest;return Le.open("GET",Ce,!1),Le.send(null),Le.responseText},q&&(he=Ce=>{var Le=new XMLHttpRequest;return Le.open("GET",Ce,!1),Le.responseType="arraybuffer",Le.send(null),new Uint8Array(Le.response)}),de=(Ce,Le,gy)=>{var X$=new XMLHttpRequest;X$.open("GET",Ce,!0),X$.responseType="arraybuffer",X$.onload=()=>{X$.status==200||X$.status==0&&X$.response?Le(X$.response):gy()},X$.onerror=gy,X$.send(null)});var Ae=console.log.bind(console),Re=console.error.bind(console);Object.assign(v,C),C=null;var Be,Ke=!1,Lr,_y,by,yy,my,$t,K$,Y$,W$,U$,hy;function G$(){var Ce=Be.buffer;v.HEAP8=_y=new Int8Array(Ce),v.HEAP16=yy=new Int16Array(Ce),v.HEAPU8=by=new Uint8Array(Ce),v.HEAPU16=my=new Uint16Array(Ce),v.HEAP32=$t=new Int32Array(Ce),v.HEAPU32=K$=new Uint32Array(Ce),v.HEAPF32=Y$=new Float32Array(Ce),v.HEAPF64=hy=new Float64Array(Ce),v.HEAP64=W$=new BigInt64Array(Ce),v.HEAPU64=U$=new BigUint64Array(Ce)}var ky=[],$y=[],rS=[],lS=0,bS=null;function IS(Ce){throw Ce="Aborted("+Ce+")",Re(Ce),Ke=!0,Lr=1,Ce=new WebAssembly.RuntimeError(Ce+". Build with -sASSERTIONS for more info."),$(Ce),Ce}var BS=Ce=>Ce.startsWith("data:application/octet-stream;base64,"),MS=Ce=>Ce.startsWith("file://"),zS;if(zS="ort-wasm-simd.wasm",!BS(zS)){var LS=zS;zS=v.locateFile?v.locateFile(LS,re):re+LS}function nS(Ce){if(he)return he(Ce);throw"both async and sync fetching of the wasm failed"}function Z$(Ce){if(W||q){if(typeof fetch=="function"&&!MS(Ce))return fetch(Ce,{credentials:"same-origin"}).then(Le=>{if(!Le.ok)throw`failed to load wasm binary file at '${Ce}'`;return Le.arrayBuffer()}).catch(()=>nS(Ce));if(de)return new Promise((Le,gy)=>{de(Ce,X$=>Le(new Uint8Array(X$)),gy)})}return Promise.resolve().then(()=>nS(Ce))}function dS(Ce,Le,gy){return Z$(Ce).then(X$=>WebAssembly.instantiate(X$,Le)).then(gy,X$=>{Re(`failed to asynchronously prepare wasm: ${X$}`),IS(X$)})}function ES(Ce,Le){var gy=zS;return typeof WebAssembly.instantiateStreaming!="function"||BS(gy)||MS(gy)||Y||typeof fetch!="function"?dS(gy,Ce,Le):fetch(gy,{credentials:"same-origin"}).then(X$=>WebAssembly.instantiateStreaming(X$,Ce).then(Le,function(aS){return Re(`wasm streaming compile failed: ${aS}`),Re("falling back to ArrayBuffer instantiation"),dS(gy,Ce,Le)}))}var wy={824920:(Ce,Le,gy,X$)=>{if(typeof v>"u"||!v.eb)return 1;if(Ce=wS(Ce>>>0),Ce.startsWith("./")&&(Ce=Ce.substring(2)),Ce=v.eb.get(Ce),!Ce)return 2;if(Le>>>=0,gy>>>=0,Le+gy>Ce.byteLength)return 3;try{return by.set(Ce.subarray(Le,Le+gy),X$>>>0>>>0),0}catch{return 4}},825421:()=>{v.qb()},825452:()=>{v.rb()},825481:()=>{v.vb()},825506:Ce=>v.pb(Ce),825539:Ce=>v.tb(Ce),825571:(Ce,Le,gy)=>{v.lb(Ce,Le,gy,!0)},825610:(Ce,Le,gy)=>{v.lb(Ce,Le,gy)},825643:Ce=>{v.Ra("Abs",Ce,void 0)},825694:Ce=>{v.Ra("Neg",Ce,void 0)},825745:Ce=>{v.Ra("Floor",Ce,void 0)},825798:Ce=>{v.Ra("Ceil",Ce,void 0)},825850:Ce=>{v.Ra("Reciprocal",Ce,void 0)},825908:Ce=>{v.Ra("Sqrt",Ce,void 0)},825960:Ce=>{v.Ra("Exp",Ce,void 0)},826011:Ce=>{v.Ra("Erf",Ce,void 0)},826062:Ce=>{v.Ra("Sigmoid",Ce,void 0)},826117:(Ce,Le,gy)=>{v.Ra("HardSigmoid",Ce,{alpha:Le,beta:gy})},826196:Ce=>{v.Ra("Log",Ce,void 0)},826247:Ce=>{v.Ra("Sin",Ce,void 0)},826298:Ce=>{v.Ra("Cos",Ce,void 0)},826349:Ce=>{v.Ra("Tan",Ce,void 0)},826400:Ce=>{v.Ra("Asin",Ce,void 0)},826452:Ce=>{v.Ra("Acos",Ce,void 0)},826504:Ce=>{v.Ra("Atan",Ce,void 0)},826556:Ce=>{v.Ra("Sinh",Ce,void 0)},826608:Ce=>{v.Ra("Cosh",Ce,void 0)},826660:Ce=>{v.Ra("Asinh",Ce,void 0)},826713:Ce=>{v.Ra("Acosh",Ce,void 0)},826766:Ce=>{v.Ra("Atanh",Ce,void 0)},826819:Ce=>{v.Ra("Tanh",Ce,void 0)},826871:Ce=>{v.Ra("Not",Ce,void 0)},826922:(Ce,Le,gy)=>{v.Ra("Clip",Ce,{min:Le,max:gy})},826991:Ce=>{v.Ra("Clip",Ce,void 0)},827043:(Ce,Le)=>{v.Ra("Elu",Ce,{alpha:Le})},827101:Ce=>{v.Ra("Relu",Ce,void 0)},827153:(Ce,Le)=>{v.Ra("LeakyRelu",Ce,{alpha:Le})},827217:(Ce,Le)=>{v.Ra("ThresholdedRelu",Ce,{alpha:Le})},827287:(Ce,Le)=>{v.Ra("Cast",Ce,{to:Le})},827345:Ce=>{v.Ra("Add",Ce,void 0)},827396:Ce=>{v.Ra("Sub",Ce,void 0)},827447:Ce=>{v.Ra("Mul",Ce,void 0)},827498:Ce=>{v.Ra("Div",Ce,void 0)},827549:Ce=>{v.Ra("Pow",Ce,void 0)},827600:Ce=>{v.Ra("Equal",Ce,void 0)},827653:Ce=>{v.Ra("Greater",Ce,void 0)},827708:Ce=>{v.Ra("GreaterOrEqual",Ce,void 0)},827770:Ce=>{v.Ra("Less",Ce,void 0)},827822:Ce=>{v.Ra("LessOrEqual",Ce,void 0)},827881:(Ce,Le,gy,X$,aS)=>{v.Ra("ReduceMean",Ce,{keepDims:!!Le,noopWithEmptyAxes:!!gy,axes:X$?Array.from($t.subarray(X$>>>0,aS>>>0)):[]})},828040:(Ce,Le,gy,X$,aS)=>{v.Ra("ReduceMax",Ce,{keepDims:!!Le,noopWithEmptyAxes:!!gy,axes:X$?Array.from($t.subarray(X$>>>0,aS>>>0)):[]})},828198:(Ce,Le,gy,X$,aS)=>{v.Ra("ReduceMin",Ce,{keepDims:!!Le,noopWithEmptyAxes:!!gy,axes:X$?Array.from($t.subarray(X$>>>0,aS>>>0)):[]})},828356:(Ce,Le,gy,X$,aS)=>{v.Ra("ReduceProd",Ce,{keepDims:!!Le,noopWithEmptyAxes:!!gy,axes:X$?Array.from($t.subarray(X$>>>0,aS>>>0)):[]})},828515:(Ce,Le,gy,X$,aS)=>{v.Ra("ReduceSum",Ce,{keepDims:!!Le,noopWithEmptyAxes:!!gy,axes:X$?Array.from($t.subarray(X$>>>0,aS>>>0)):[]})},828673:(Ce,Le,gy,X$,aS)=>{v.Ra("ReduceL1",Ce,{keepDims:!!Le,noopWithEmptyAxes:!!gy,axes:X$?Array.from($t.subarray(X$>>>0,aS>>>0)):[]})},828830:(Ce,Le,gy,X$,aS)=>{v.Ra("ReduceL2",Ce,{keepDims:!!Le,noopWithEmptyAxes:!!gy,axes:X$?Array.from($t.subarray(X$>>>0,aS>>>0)):[]})},828987:(Ce,Le,gy,X$,aS)=>{v.Ra("ReduceLogSum",Ce,{keepDims:!!Le,noopWithEmptyAxes:!!gy,axes:X$?Array.from($t.subarray(X$>>>0,aS>>>0)):[]})},829148:(Ce,Le,gy,X$,aS)=>{v.Ra("ReduceSumSquare",Ce,{keepDims:!!Le,noopWithEmptyAxes:!!gy,axes:X$?Array.from($t.subarray(X$>>>0,aS>>>0)):[]})},829312:(Ce,Le,gy,X$,aS)=>{v.Ra("ReduceLogSumExp",Ce,{keepDims:!!Le,noopWithEmptyAxes:!!gy,axes:X$?Array.from($t.subarray(X$>>>0,aS>>>0)):[]})},829476:Ce=>{v.Ra("Where",Ce,void 0)},829529:(Ce,Le,gy)=>{v.Ra("Transpose",Ce,{perm:Le?Array.from($t.subarray(Le>>>0,gy>>>0)):[]})},829637:(Ce,Le,gy,X$)=>{v.Ra("DepthToSpace",Ce,{blocksize:Le,mode:wS(gy),format:X$?"NHWC":"NCHW"})},829770:(Ce,Le,gy,X$)=>{v.Ra("DepthToSpace",Ce,{blocksize:Le,mode:wS(gy),format:X$?"NHWC":"NCHW"})},829903:(Ce,Le,gy,X$,aS,_S,yye,xye,Oye,Eye,Gye,cwe,FS,RS,Lye)=>{v.Ra("ConvTranspose",Ce,{format:Oye?"NHWC":"NCHW",autoPad:Le,dilations:[gy],group:X$,kernelShape:[aS],pads:[_S,yye],strides:[xye],wIsConst:()=>!!_y[Eye>>>0],outputPadding:Gye?Array.from($t.subarray(Gye>>>0,cwe>>>0)):[],outputShape:FS?Array.from($t.subarray(FS>>>0,RS>>>0)):[],activation:wS(Lye)})},830304:(Ce,Le,gy,X$,aS,_S,yye,xye,Oye,Eye,Gye,cwe,FS,RS)=>{v.Ra("ConvTranspose",Ce,{format:xye?"NHWC":"NCHW",autoPad:Le,dilations:Array.from($t.subarray(gy>>>0,(gy>>>0)+2>>>0)),group:X$,kernelShape:Array.from($t.subarray(aS>>>0,(aS>>>0)+2>>>0)),pads:Array.from($t.subarray(_S>>>0,(_S>>>0)+4>>>0)),strides:Array.from($t.subarray(yye>>>0,(yye>>>0)+2>>>0)),wIsConst:()=>!!_y[Oye>>>0],outputPadding:Eye?Array.from($t.subarray(Eye>>>0,Gye>>>0)):[],outputShape:cwe?Array.from($t.subarray(cwe>>>0,FS>>>0)):[],activation:wS(RS)})},830869:(Ce,Le,gy,X$,aS,_S,yye,xye,Oye,Eye,Gye,cwe,FS,RS,Lye)=>{v.Ra("ConvTranspose",Ce,{format:Oye?"NHWC":"NCHW",autoPad:Le,dilations:[gy],group:X$,kernelShape:[aS],pads:[_S,yye],strides:[xye],wIsConst:()=>!!_y[Eye>>>0],outputPadding:Gye?Array.from($t.subarray(Gye>>>0,cwe>>>0)):[],outputShape:FS?Array.from($t.subarray(FS>>>0,RS>>>0)):[],activation:wS(Lye)})},831270:(Ce,Le,gy,X$,aS,_S,yye,xye,Oye,Eye,Gye,cwe,FS,RS)=>{v.Ra("ConvTranspose",Ce,{format:xye?"NHWC":"NCHW",autoPad:Le,dilations:Array.from($t.subarray(gy>>>0,(gy>>>0)+2>>>0)),group:X$,kernelShape:Array.from($t.subarray(aS>>>0,(aS>>>0)+2>>>0)),pads:Array.from($t.subarray(_S>>>0,(_S>>>0)+4>>>0)),strides:Array.from($t.subarray(yye>>>0,(yye>>>0)+2>>>0)),wIsConst:()=>!!_y[Oye>>>0],outputPadding:Eye?Array.from($t.subarray(Eye>>>0,Gye>>>0)):[],outputShape:cwe?Array.from($t.subarray(cwe>>>0,FS>>>0)):[],activation:wS(RS)})},831835:(Ce,Le)=>{v.Ra("GlobalAveragePool",Ce,{format:Le?"NHWC":"NCHW"})},831926:(Ce,Le,gy,X$,aS,_S,yye,xye,Oye,Eye,Gye,cwe,FS,RS,Lye,Fye)=>{v.Ra("AveragePool",Ce,{format:Fye?"NHWC":"NCHW",auto_pad:Le,ceil_mode:gy,count_include_pad:X$,storage_order:aS,dilations:[_S,yye],kernel_shape:[xye,Oye],pads:[Eye,Gye,cwe,FS],strides:[RS,Lye]})},832210:(Ce,Le)=>{v.Ra("GlobalAveragePool",Ce,{format:Le?"NHWC":"NCHW"})},832301:(Ce,Le,gy,X$,aS,_S,yye,xye,Oye,Eye,Gye,cwe,FS,RS,Lye,Fye)=>{v.Ra("AveragePool",Ce,{format:Fye?"NHWC":"NCHW",auto_pad:Le,ceil_mode:gy,count_include_pad:X$,storage_order:aS,dilations:[_S,yye],kernel_shape:[xye,Oye],pads:[Eye,Gye,cwe,FS],strides:[RS,Lye]})},832585:(Ce,Le)=>{v.Ra("GlobalMaxPool",Ce,{format:Le?"NHWC":"NCHW"})},832672:(Ce,Le,gy,X$,aS,_S,yye,xye,Oye,Eye,Gye,cwe,FS,RS,Lye,Fye)=>{v.Ra("MaxPool",Ce,{format:Fye?"NHWC":"NCHW",auto_pad:Le,ceil_mode:gy,count_include_pad:X$,storage_order:aS,dilations:[_S,yye],kernel_shape:[xye,Oye],pads:[Eye,Gye,cwe,FS],strides:[RS,Lye]})},832952:(Ce,Le)=>{v.Ra("GlobalMaxPool",Ce,{format:Le?"NHWC":"NCHW"})},833039:(Ce,Le,gy,X$,aS,_S,yye,xye,Oye,Eye,Gye,cwe,FS,RS,Lye,Fye)=>{v.Ra("MaxPool",Ce,{format:Fye?"NHWC":"NCHW",auto_pad:Le,ceil_mode:gy,count_include_pad:X$,storage_order:aS,dilations:[_S,yye],kernel_shape:[xye,Oye],pads:[Eye,Gye,cwe,FS],strides:[RS,Lye]})},833319:(Ce,Le,gy,X$,aS)=>{v.Ra("Gemm",Ce,{alpha:Le,beta:gy,transA:X$,transB:aS})},833423:Ce=>{v.Ra("MatMul",Ce,void 0)},833477:(Ce,Le,gy,X$)=>{v.Ra("ArgMax",Ce,{keepDims:!!Le,selectLastIndex:!!gy,axis:X$})},833585:(Ce,Le,gy,X$)=>{v.Ra("ArgMin",Ce,{keepDims:!!Le,selectLastIndex:!!gy,axis:X$})},833693:(Ce,Le)=>{v.Ra("Softmax",Ce,{axis:Le})},833756:(Ce,Le)=>{v.Ra("Concat",Ce,{axis:Le})},833816:(Ce,Le,gy,X$,aS)=>{v.Ra("Split",Ce,{axis:Le,numOutputs:gy,splitSizes:X$?Array.from($t.subarray(X$>>>0,aS>>>0)):[]})},833956:Ce=>{v.Ra("Expand",Ce,void 0)},834010:(Ce,Le)=>{v.Ra("Gather",Ce,{axis:Number(Le)})},834081:(Ce,Le)=>{v.Ra("GatherElements",Ce,{axis:Number(Le)})},834160:(Ce,Le,gy,X$,aS,_S,yye,xye,Oye,Eye,Gye)=>{v.Ra("Resize",Ce,{antialias:Le,axes:gy?Array.from($t.subarray(gy>>>0,X$>>>0)):[],coordinateTransformMode:wS(aS),cubicCoeffA:_S,excludeOutside:yye,extrapolationValue:xye,keepAspectRatioPolicy:wS(Oye),mode:wS(Eye),nearestMode:wS(Gye)})},834506:(Ce,Le,gy,X$,aS,_S,yye)=>{v.Ra("Slice",Ce,{starts:Le?Array.from($t.subarray(Le>>>0,gy>>>0)):[],ends:X$?Array.from($t.subarray(X$>>>0,aS>>>0)):[],axes:_S?Array.from($t.subarray(_S>>>0,yye>>>0)):[]})},834722:Ce=>{v.Ra("Tile",Ce,void 0)},834774:(Ce,Le,gy,X$)=>{v.Ra("LayerNormalization",Ce,{axis:Le,epsilon:gy,simplified:!!X$})},834885:(Ce,Le,gy)=>{v.Ra("InstanceNormalization",Ce,{epsilon:Le,format:gy?"NHWC":"NCHW"})},834999:(Ce,Le,gy)=>{v.Ra("InstanceNormalization",Ce,{epsilon:Le,format:gy?"NHWC":"NCHW"})},835113:Ce=>{v.Ra("Range",Ce,void 0)},835166:(Ce,Le)=>{v.Ra("Einsum",Ce,{equation:wS(Le)})},835247:(Ce,Le,gy,X$,aS)=>{v.Ra("Pad",Ce,{mode:Le,value:gy,pads:X$?Array.from($t.subarray(X$>>>0,aS>>>0)):[]})},835374:(Ce,Le,gy,X$,aS,_S)=>{v.Ra("BatchNormalization",Ce,{epsilon:Le,momentum:gy,spatial:!!aS,trainingMode:!!X$,format:_S?"NHWC":"NCHW"})},835543:(Ce,Le,gy,X$,aS,_S)=>{v.Ra("BatchNormalization",Ce,{epsilon:Le,momentum:gy,spatial:!!aS,trainingMode:!!X$,format:_S?"NHWC":"NCHW"})},835712:(Ce,Le,gy)=>{v.Ra("CumSum",Ce,{exclusive:Number(Le),reverse:Number(gy)})},835809:(Ce,Le,gy,X$,aS,_S,yye,xye,Oye)=>{v.Ra("Attention",Ce,{numHeads:Le,isUnidirectional:gy,maskFilterValue:X$,scale:aS,doRotary:_S,qkvHiddenSizes:yye?Array.from($t.subarray(Number(xye)>>>0,Number(xye)+yye>>>0)):[],pastPresentShareBuffer:!!Oye})},836081:Ce=>{v.Ra("BiasAdd",Ce,void 0)},836136:Ce=>{v.Ra("BiasSplitGelu",Ce,void 0)},836197:Ce=>{v.Ra("FastGelu",Ce,void 0)},836253:(Ce,Le,gy,X$,aS,_S,yye,xye,Oye,Eye,Gye,cwe,FS)=>{v.Ra("Conv",Ce,{format:Oye?"NHWC":"NCHW",auto_pad:Le,dilations:[gy],group:X$,kernel_shape:[aS],pads:_S?Array.from($t.subarray(_S>>>0,yye>>>0)):[],strides:[xye],w_is_const:()=>!!_y[Eye>>>0],activation:wS(Gye),activation_params:cwe?Array.from(Y$.subarray(cwe>>>0,FS>>>0)):[]})},836623:(Ce,Le,gy,X$,aS,_S,yye,xye,Oye,Eye,Gye,cwe,FS,RS,Lye,Fye)=>{v.Ra("Conv",Ce,{format:cwe?"NHWC":"NCHW",auto_pad:Le,dilations:[gy,X$],group:aS,kernel_shape:[_S,yye],pads:xye?Array.from($t.subarray(xye>>>0,Oye>>>0)):[],strides:[Eye,Gye],w_is_const:()=>!!_y[FS>>>0],activation:wS(RS),activation_params:Lye?Array.from(Y$.subarray(Lye>>>0,Fye>>>0)):[]})},837014:Ce=>{v.Ra("Gelu",Ce,void 0)},837066:(Ce,Le,gy,X$,aS,_S)=>{v.Ra("MatMulNBits",Ce,{k:Le,n:gy,accuracyLevel:X$,bits:aS,blockSize:_S})},837193:(Ce,Le,gy,X$,aS,_S)=>{v.Ra("MultiHeadAttention",Ce,{numHeads:Le,isUnidirectional:gy,maskFilterValue:X$,scale:aS,doRotary:_S})},837352:(Ce,Le,gy,X$,aS)=>{v.Ra("RotaryEmbedding",Ce,{interleaved:!!Le,numHeads:gy,rotaryEmbeddingDim:X$,scale:aS})},837491:(Ce,Le,gy)=>{v.Ra("SkipLayerNormalization",Ce,{epsilon:Le,simplified:!!gy})},837593:(Ce,Le,gy)=>{v.Ra("SkipLayerNormalization",Ce,{epsilon:Le,simplified:!!gy})},837695:(Ce,Le,gy,X$)=>{v.Ra("LayerNormalization",Ce,{axis:Le,epsilon:gy,simplified:!!X$})},837806:Ce=>{v.ub(Ce)},837840:(Ce,Le)=>v.wb(Ce,Le,v.cb.xb,v.cb.errors)};function tS(Ce){this.name="ExitStatus",this.message=`Program terminated with exit(${Ce})`,this.status=Ce}class yS{constructor(Le){this.hb=Le-24}}var Q$=0,eS=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,cS=(Ce,Le,gy)=>{Le>>>=0;var X$=Le+gy;for(gy=Le;Ce[gy]&&!(gy>=X$);)++gy;if(16<gy-Le&&Ce.buffer&&eS)return eS.decode(Ce.subarray(Le,gy));for(X$="";Le<gy;){var aS=Ce[Le++];if(aS&128){var _S=Ce[Le++]&63;if((aS&224)==192)X$+=String.fromCharCode((aS&31)<<6|_S);else{var yye=Ce[Le++]&63;aS=(aS&240)==224?(aS&15)<<12|_S<<6|yye:(aS&7)<<18|_S<<12|yye<<6|Ce[Le++]&63,65536>aS?X$+=String.fromCharCode(aS):(aS-=65536,X$+=String.fromCharCode(55296|aS>>10,56320|aS&1023))}}else X$+=String.fromCharCode(aS)}return X$},wS=(Ce,Le)=>(Ce>>>=0)?cS(by,Ce,Le):"",xS=Ce=>{for(var Le=0,gy=0;gy<Ce.length;++gy){var X$=Ce.charCodeAt(gy);127>=X$?Le++:2047>=X$?Le+=2:55296<=X$&&57343>=X$?(Le+=4,++gy):Le+=3}return Le},OS=(Ce,Le,gy,X$)=>{if(gy>>>=0,!(0<X$))return 0;var aS=gy;X$=gy+X$-1;for(var _S=0;_S<Ce.length;++_S){var yye=Ce.charCodeAt(_S);if(55296<=yye&&57343>=yye){var xye=Ce.charCodeAt(++_S);yye=65536+((yye&1023)<<10)|xye&1023}if(127>=yye){if(gy>=X$)break;Le[gy++>>>0]=yye}else{if(2047>=yye){if(gy+1>=X$)break;Le[gy++>>>0]=192|yye>>6}else{if(65535>=yye){if(gy+2>=X$)break;Le[gy++>>>0]=224|yye>>12}else{if(gy+3>=X$)break;Le[gy++>>>0]=240|yye>>18,Le[gy++>>>0]=128|yye>>12&63}Le[gy++>>>0]=128|yye>>6&63}Le[gy++>>>0]=128|yye&63}}return Le[gy>>>0]=0,gy-aS},mS,pS=Ce=>{for(var Le="";by[Ce>>>0];)Le+=mS[by[Ce++>>>0]];return Le},fC={},US={},Iye;function $ye(Ce,Le,gy={}){var X$=Le.name;if(!Ce)throw new Iye(`type "${X$}" must have a positive integer typeid pointer`);if(US.hasOwnProperty(Ce)){if(gy.nb)return;throw new Iye(`Cannot register type '${X$}' twice`)}US[Ce]=Le,fC.hasOwnProperty(Ce)&&(Le=fC[Ce],delete fC[Ce],Le.forEach(aS=>aS()))}function Rye(Ce,Le,gy={}){if(!("argPackAdvance"in Le))throw new TypeError("registerType registeredInstance requires argPackAdvance");return $ye(Ce,Le,gy)}var Uye=(Ce,Le,gy)=>{switch(Le){case 1:return gy?X$=>_y[X$>>>0]:X$=>by[X$>>>0];case 2:return gy?X$=>yy[X$>>>1>>>0]:X$=>my[X$>>>1>>>0];case 4:return gy?X$=>$t[X$>>>2>>>0]:X$=>K$[X$>>>2>>>0];case 8:return gy?X$=>W$[X$>>>3]:X$=>U$[X$>>>3];default:throw new TypeError(`invalid integer width (${Le}): ${Ce}`)}},DS=[],HS=[];function Aye(Ce){Ce>>>=0,9<Ce&&--HS[Ce+1]===0&&(HS[Ce]=void 0,DS.push(Ce))}var Tye=Ce=>{if(!Ce)throw new Iye("Cannot use deleted val. handle = "+Ce);return HS[Ce]},jye=Ce=>{switch(Ce){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let Le=DS.pop()||HS.length;return HS[Le]=Ce,HS[Le+1]=1,Le}};function sS(Ce){return this.fromWireType(K$[Ce>>>2>>>0])}var TS={name:"emscripten::val",fromWireType:Ce=>{var Le=Tye(Ce);return Aye(Ce),Le},toWireType:(Ce,Le)=>jye(Le),argPackAdvance:8,readValueFromPointer:sS,bb:null},AS=(Ce,Le)=>{switch(Le){case 4:return function(gy){return this.fromWireType(Y$[gy>>>2>>>0])};case 8:return function(gy){return this.fromWireType(hy[gy>>>3>>>0])};default:throw new TypeError(`invalid float width (${Le}): ${Ce}`)}},jS=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,KS=(Ce,Le)=>{for(var gy=Ce>>1,X$=gy+Le/2;!(gy>=X$)&&my[gy>>>0];)++gy;if(gy<<=1,32<gy-Ce&&jS)return jS.decode(by.subarray(Ce>>>0,gy>>>0));for(gy="",X$=0;!(X$>=Le/2);++X$){var aS=yy[Ce+2*X$>>>1>>>0];if(aS==0)break;gy+=String.fromCharCode(aS)}return gy},Bye=(Ce,Le,gy)=>{if(gy??(gy=2147483647),2>gy)return 0;gy-=2;var X$=Le;gy=gy<2*Ce.length?gy/2:Ce.length;for(var aS=0;aS<gy;++aS)yy[Le>>>1>>>0]=Ce.charCodeAt(aS),Le+=2;return yy[Le>>>1>>>0]=0,Le-X$},Kye=Ce=>2*Ce.length,swe=(Ce,Le)=>{for(var gy=0,X$="";!(gy>=Le/4);){var aS=$t[Ce+4*gy>>>2>>>0];if(aS==0)break;++gy,65536<=aS?(aS-=65536,X$+=String.fromCharCode(55296|aS>>10,56320|aS&1023)):X$+=String.fromCharCode(aS)}return X$},Cwe=(Ce,Le,gy)=>{if(Le>>>=0,gy??(gy=2147483647),4>gy)return 0;var X$=Le;gy=X$+gy-4;for(var aS=0;aS<Ce.length;++aS){var _S=Ce.charCodeAt(aS);if(55296<=_S&&57343>=_S){var yye=Ce.charCodeAt(++aS);_S=65536+((_S&1023)<<10)|yye&1023}if($t[Le>>>2>>>0]=_S,Le+=4,Le+4>gy)break}return $t[Le>>>2>>>0]=0,Le-X$},ywe=Ce=>{for(var Le=0,gy=0;gy<Ce.length;++gy){var X$=Ce.charCodeAt(gy);55296<=X$&&57343>=X$&&++gy,Le+=4}return Le},hwe=(Ce,Le)=>{var gy=US[Ce];if(gy===void 0)throw Ce=V2e(Ce),gy=pS(Ce),Lwe(Ce),new Iye(`${Le} has unknown type ${gy}`);return gy},Vwe=(Ce,Le,gy)=>{var X$=[];return Ce=Ce.toWireType(X$,gy),X$.length&&(K$[Le>>>2>>>0]=jye(X$)),Ce},Owe=Ce=>{try{Ce()}catch(Le){IS(Le)}},VS=Ce=>{var Le;if(!Ke)try{Ce();try{Lr=Lr=Ce=Lr,(Le=v.onExit)==null||Le.call(v,Ce),Ke=!0,N(Ce,new tS(Ce))}catch(gy){gy instanceof tS||gy=="unwind"||N(1,gy)}}catch(gy){gy instanceof tS||gy=="unwind"||N(1,gy)}};function Zye(){var Ce=Yye,Le={};for(let[gy,X$]of Object.entries(Ce))Le[gy]=typeof X$=="function"?(...aS)=>{Pwe.push(gy);try{return X$(...aS)}finally{Ke||(Pwe.pop(),_we&&twe===1&&Pwe.length===0&&(twe=0,Owe(H2e),typeof Fibers<"u"&&Fibers.Db()))}}:X$;return Le}var twe=0,_we=null,Hwe=0,Pwe=[],Jwe={},Nwe={},i2e=0,Kwe=null,Qwe=[];function e2e(){return new Promise((Ce,Le)=>{Kwe={resolve:Ce,reject:Le}})}function t2e(){var Ce=o2e(65548),Le=Ce+12;K$[Ce>>>2>>>0]=Le,K$[Ce+4>>>2>>>0]=Le+65536,Le=Pwe[0];var gy=Jwe[Le];return gy===void 0&&(gy=i2e++,Jwe[Le]=gy,Nwe[gy]=Le),$t[Ce+8>>>2>>>0]=gy,Ce}function Dye(Ce){if(!Ke){if(twe===0){var Le=!1,gy=!1;Ce((X$=0)=>{if(!Ke&&(Hwe=X$,Le=!0,gy)){twe=2,Owe(()=>Zwe(_we)),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.resume(),X$=!1;try{var aS=(0,Yye[Nwe[$t[_we+8>>>2>>>0]]])()}catch(xye){aS=xye,X$=!0}var _S=!1;if(!_we){var yye=Kwe;yye&&(Kwe=null,(X$?yye.reject:yye.resolve)(aS),_S=!0)}if(X$&&!_S)throw aS}}),gy=!0,Le||(twe=1,_we=t2e(),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.pause(),Owe(()=>Wwe(_we)))}else twe===2?(twe=0,Owe(r2e),Lwe(_we),_we=null,Qwe.forEach(VS)):IS(`invalid state: ${twe}`);return Hwe}}function CS(Ce){return Dye(Le=>{Ce().then(Le)})}var Sye=[],Mye={},rwe=Ce=>{var Le=Mye[Ce];return Le===void 0?pS(Ce):Le},awe=()=>typeof globalThis=="object"?globalThis:Function("return this")(),$we=Ce=>{var Le=Sye.length;return Sye.push(Ce),Le},Mwe=(Ce,Le)=>{for(var gy=Array(Ce),X$=0;X$<Ce;++X$)gy[X$]=hwe(K$[Le+4*X$>>>2>>>0],"parameter "+X$);return gy},Awe=(Ce,Le)=>Object.defineProperty(Le,"name",{value:Ce});function l2e(Ce){var Le=Function;if(!(Le instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof Le} which is not a function`);var gy=Awe(Le.name||"unknownFunctionName",function(){});return gy.prototype=Le.prototype,gy=new gy,Ce=Le.apply(gy,Ce),Ce instanceof Object?Ce:gy}var pwe=Ce=>Ce%4===0&&(Ce%100!==0||Ce%400===0),v2e=[0,31,60,91,121,152,182,213,244,274,305,335],u2e=[0,31,59,90,120,151,181,212,243,273,304,334],Ywe=[],F2e=(Ce,Le)=>{Ywe.length=0;for(var gy;gy=by[Ce++>>>0];){var X$=gy!=105;X$&=gy!=112,Le+=X$&&Le%8?4:0,Ywe.push(gy==112?K$[Le>>>2>>>0]:gy==106?W$[Le>>>3]:gy==105?$t[Le>>>2>>>0]:hy[Le>>>3>>>0]),Le+=X$?8:4}return Ywe},Bwe={},Uwe=()=>{if(!x2e){var Ce={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:E||"./this.program"},Le;for(Le in Bwe)Bwe[Le]===void 0?delete Ce[Le]:Ce[Le]=Bwe[Le];var gy=[];for(Le in Ce)gy.push(`${Le}=${Ce[Le]}`);x2e=gy}return x2e},x2e,i_e=[null,[],[]],o_e=[31,29,31,30,31,30,31,31,30,31,30,31],z2e=[31,28,31,30,31,30,31,31,30,31,30,31];function y_e(Ce){var Le=Array(xS(Ce)+1);return OS(Ce,Le,0,Le.length),Le}function a_e(Ce,Le,gy,X$){function aS(RS,Lye,Fye){for(RS=typeof RS=="number"?RS.toString():RS||"";RS.length<Lye;)RS=Fye[0]+RS;return RS}function _S(RS,Lye){return aS(RS,Lye,"0")}function yye(RS,Lye){function Fye(U2e){return 0>U2e?-1:0<U2e?1:0}var dwe;return(dwe=Fye(RS.getFullYear()-Lye.getFullYear()))===0&&(dwe=Fye(RS.getMonth()-Lye.getMonth()))===0&&(dwe=Fye(RS.getDate()-Lye.getDate())),dwe}function xye(RS){switch(RS.getDay()){case 0:return new Date(RS.getFullYear()-1,11,29);case 1:return RS;case 2:return new Date(RS.getFullYear(),0,3);case 3:return new Date(RS.getFullYear(),0,2);case 4:return new Date(RS.getFullYear(),0,1);case 5:return new Date(RS.getFullYear()-1,11,31);case 6:return new Date(RS.getFullYear()-1,11,30)}}function Oye(RS){var Lye=RS.$a;for(RS=new Date(new Date(RS.ab+1900,0,1).getTime());0<Lye;){var Fye=RS.getMonth(),dwe=(pwe(RS.getFullYear())?o_e:z2e)[Fye];if(Lye>dwe-RS.getDate())Lye-=dwe-RS.getDate()+1,RS.setDate(1),11>Fye?RS.setMonth(Fye+1):(RS.setMonth(0),RS.setFullYear(RS.getFullYear()+1));else{RS.setDate(RS.getDate()+Lye);break}}return Fye=new Date(RS.getFullYear()+1,0,4),Lye=xye(new Date(RS.getFullYear(),0,4)),Fye=xye(Fye),0>=yye(Lye,RS)?0>=yye(Fye,RS)?RS.getFullYear()+1:RS.getFullYear():RS.getFullYear()-1}Ce>>>=0,Le>>>=0,gy>>>=0,X$>>>=0;var Eye=K$[X$+40>>>2>>>0];X$={Ab:$t[X$>>>2>>>0],zb:$t[X$+4>>>2>>>0],fb:$t[X$+8>>>2>>>0],jb:$t[X$+12>>>2>>>0],gb:$t[X$+16>>>2>>>0],ab:$t[X$+20>>>2>>>0],Va:$t[X$+24>>>2>>>0],$a:$t[X$+28>>>2>>>0],Cb:$t[X$+32>>>2>>>0],yb:$t[X$+36>>>2>>>0],Bb:Eye?wS(Eye):""},gy=wS(gy),Eye={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Gye in Eye)gy=gy.replace(new RegExp(Gye,"g"),Eye[Gye]);var cwe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),FS="January February March April May June July August September October November December".split(" ");Eye={"%a":RS=>cwe[RS.Va].substring(0,3),"%A":RS=>cwe[RS.Va],"%b":RS=>FS[RS.gb].substring(0,3),"%B":RS=>FS[RS.gb],"%C":RS=>_S((RS.ab+1900)/100|0,2),"%d":RS=>_S(RS.jb,2),"%e":RS=>aS(RS.jb,2," "),"%g":RS=>Oye(RS).toString().substring(2),"%G":Oye,"%H":RS=>_S(RS.fb,2),"%I":RS=>(RS=RS.fb,RS==0?RS=12:12<RS&&(RS-=12),_S(RS,2)),"%j":RS=>{for(var Lye=0,Fye=0;Fye<=RS.gb-1;Lye+=(pwe(RS.ab+1900)?o_e:z2e)[Fye++]);return _S(RS.jb+Lye,3)},"%m":RS=>_S(RS.gb+1,2),"%M":RS=>_S(RS.zb,2),"%n":()=>`
`,"%p":RS=>0<=RS.fb&&12>RS.fb?"AM":"PM","%S":RS=>_S(RS.Ab,2),"%t":()=>"	","%u":RS=>RS.Va||7,"%U":RS=>_S(Math.floor((RS.$a+7-RS.Va)/7),2),"%V":RS=>{var Lye=Math.floor((RS.$a+7-(RS.Va+6)%7)/7);if(2>=(RS.Va+371-RS.$a-2)%7&&Lye++,Lye)Lye==53&&(Fye=(RS.Va+371-RS.$a)%7,Fye==4||Fye==3&&pwe(RS.ab)||(Lye=1));else{Lye=52;var Fye=(RS.Va+7-RS.$a-1)%7;(Fye==4||Fye==5&&pwe(RS.ab%400-1))&&Lye++}return _S(Lye,2)},"%w":RS=>RS.Va,"%W":RS=>_S(Math.floor((RS.$a+7-(RS.Va+6)%7)/7),2),"%y":RS=>(RS.ab+1900).toString().substring(2),"%Y":RS=>RS.ab+1900,"%z":RS=>{RS=RS.yb;var Lye=0<=RS;return RS=Math.abs(RS)/60,(Lye?"+":"-")+("0000"+(RS/60*100+RS%60)).slice(-4)},"%Z":RS=>RS.Bb,"%%":()=>"%"},gy=gy.replace(/%%/g,"\0\0");for(Gye in Eye)gy.includes(Gye)&&(gy=gy.replace(new RegExp(Gye,"g"),Eye[Gye](X$)));return gy=gy.replace(/\0\0/g,"%"),Gye=y_e(gy),Gye.length>Le?0:(_y.set(Gye,Ce>>>0),Gye.length-1)}for(var j2e=Array(256),qye=0;256>qye;++qye)j2e[qye]=String.fromCharCode(qye);mS=j2e,Iye=v.BindingError=class extends Error{constructor(Ce){super(Ce),this.name="BindingError"}},v.InternalError=class extends Error{constructor(Ce){super(Ce),this.name="InternalError"}},HS.push(0,1,void 0,1,null,1,!0,1,!1,1),v.count_emval_handles=()=>HS.length/2-5-DS.length;var Z2e={ia:function(Ce,Le,gy){return CS(async()=>{await v.sb(Ce,Le,gy)})},a:function(Ce,Le,gy){Ce>>>=0;var X$=new yS(Ce);throw K$[X$.hb+16>>>2>>>0]=0,K$[X$.hb+4>>>2>>>0]=Le>>>0,K$[X$.hb+8>>>2>>>0]=gy>>>0,Q$=Ce,Q$},y:function(){return 0},ea:function(){},R:function(){},T:function(){},ga:function(){return 0},ca:function(){},Z:function(){},ba:function(){},G:function(){},S:function(){},P:function(){},da:function(){},Q:function(){},C:function(Ce,Le,gy){Le=pS(Le>>>0),Rye(Ce>>>0,{name:Le,fromWireType:X$=>X$,toWireType:function(X$,aS){if(typeof aS!="bigint"&&typeof aS!="number")throw aS===null?aS="null":(X$=typeof aS,aS=X$==="object"||X$==="array"||X$==="function"?aS.toString():""+aS),new TypeError(`Cannot convert "${aS}" to ${this.name}`);return typeof aS=="number"&&(aS=BigInt(aS)),aS},argPackAdvance:8,readValueFromPointer:Uye(Le,gy>>>0,Le.indexOf("u")==-1),bb:null})},K:function(Ce,Le,gy,X$){Le=pS(Le>>>0),Rye(Ce>>>0,{name:Le,fromWireType:function(aS){return!!aS},toWireType:function(aS,_S){return _S?gy:X$},argPackAdvance:8,readValueFromPointer:function(aS){return this.fromWireType(by[aS>>>0])},bb:null})},J:function(Ce){return Rye(Ce>>>0,TS)},B:function(Ce,Le,gy){Le=pS(Le>>>0),Rye(Ce>>>0,{name:Le,fromWireType:X$=>X$,toWireType:(X$,aS)=>aS,argPackAdvance:8,readValueFromPointer:AS(Le,gy>>>0),bb:null})},s:function(Ce,Le,gy,X$,aS){if(Ce>>>=0,gy>>>=0,Le=pS(Le>>>0),aS===-1&&(aS=4294967295),aS=xye=>xye,X$===0){var _S=32-8*gy;aS=xye=>xye<<_S>>>_S}var yye=Le.includes("unsigned")?function(xye,Oye){return Oye>>>0}:function(xye,Oye){return Oye};Rye(Ce,{name:Le,fromWireType:aS,toWireType:yye,argPackAdvance:8,readValueFromPointer:Uye(Le,gy,X$!==0),bb:null})},o:function(Ce,Le,gy){function X$(_S){return new aS(_y.buffer,K$[_S+4>>>2>>>0],K$[_S>>>2>>>0])}var aS=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][Le];gy=pS(gy>>>0),Rye(Ce>>>0,{name:gy,fromWireType:X$,argPackAdvance:8,readValueFromPointer:X$},{nb:!0})},D:function(Ce,Le){Le=pS(Le>>>0);var gy=Le==="std::string";Rye(Ce>>>0,{name:Le,fromWireType:function(X$){var aS=K$[X$>>>2>>>0],_S=X$+4;if(gy)for(var yye=_S,xye=0;xye<=aS;++xye){var Oye=_S+xye;if(xye==aS||by[Oye>>>0]==0){if(yye=wS(yye,Oye-yye),Eye===void 0)var Eye=yye;else Eye+="\0",Eye+=yye;yye=Oye+1}}else{for(Eye=Array(aS),xye=0;xye<aS;++xye)Eye[xye]=String.fromCharCode(by[_S+xye>>>0]);Eye=Eye.join("")}return Lwe(X$),Eye},toWireType:function(X$,aS){aS instanceof ArrayBuffer&&(aS=new Uint8Array(aS));var _S=typeof aS=="string";if(!(_S||aS instanceof Uint8Array||aS instanceof Uint8ClampedArray||aS instanceof Int8Array))throw new Iye("Cannot pass non-string to std::string");var yye=gy&&_S?xS(aS):aS.length,xye=o2e(4+yye+1),Oye=xye+4;if(K$[xye>>>2>>>0]=yye,gy&&_S)OS(aS,by,Oye,yye+1);else if(_S)for(_S=0;_S<yye;++_S){var Eye=aS.charCodeAt(_S);if(255<Eye)throw Lwe(Oye),new Iye("String has UTF-16 code units that do not fit in 8 bits");by[Oye+_S>>>0]=Eye}else for(_S=0;_S<yye;++_S)by[Oye+_S>>>0]=aS[_S];return X$!==null&&X$.push(Lwe,xye),xye},argPackAdvance:8,readValueFromPointer:sS,bb(X$){Lwe(X$)}})},x:function(Ce,Le,gy){if(Le>>>=0,gy>>>=0,gy=pS(gy),Le===2)var X$=KS,aS=Bye,_S=Kye,yye=xye=>my[xye>>>1>>>0];else Le===4&&(X$=swe,aS=Cwe,_S=ywe,yye=xye=>K$[xye>>>2>>>0]);Rye(Ce>>>0,{name:gy,fromWireType:xye=>{for(var Oye=K$[xye>>>2>>>0],Eye,Gye=xye+4,cwe=0;cwe<=Oye;++cwe){var FS=xye+4+cwe*Le;(cwe==Oye||yye(FS)==0)&&(Gye=X$(Gye,FS-Gye),Eye===void 0?Eye=Gye:(Eye+="\0",Eye+=Gye),Gye=FS+Le)}return Lwe(xye),Eye},toWireType:(xye,Oye)=>{if(typeof Oye!="string")throw new Iye(`Cannot pass non-string to C++ string type ${gy}`);var Eye=_S(Oye),Gye=o2e(4+Eye+Le);return K$[Gye>>>2>>>0]=Eye/Le,aS(Oye,Gye+4,Eye+Le),xye!==null&&xye.push(Lwe,Gye),Gye},argPackAdvance:8,readValueFromPointer:sS,bb(xye){Lwe(xye)}})},L:function(Ce,Le){Le=pS(Le>>>0),Rye(Ce>>>0,{ob:!0,name:Le,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ha:()=>1,u:function(Ce,Le,gy){return Le>>>=0,gy>>>=0,Ce=Tye(Ce>>>0),Le=hwe(Le,"emval::as"),Vwe(Le,gy,Ce)},w:function(Ce){return Ce>>>=0,CS(()=>(Ce=Tye(Ce),Ce.then(jye)))},n:function(Ce,Le,gy,X$){return gy>>>=0,X$>>>=0,Ce=Sye[Ce>>>0],Le=Tye(Le>>>0),Ce(null,Le,gy,X$)},j:function(Ce,Le,gy,X$,aS){return gy>>>=0,X$>>>=0,aS>>>=0,Ce=Sye[Ce>>>0],Le=Tye(Le>>>0),gy=rwe(gy),Ce(Le,Le[gy],X$,aS)},b:Aye,A:function(Ce,Le){return Le>>>=0,Ce=Tye(Ce>>>0),Le=Tye(Le),Ce==Le},m:function(Ce){return Ce>>>=0,Ce===0?jye(awe()):(Ce=rwe(Ce),jye(awe()[Ce]))},i:function(Ce,Le,gy){Le=Mwe(Ce,Le>>>0);var X$=Le.shift();Ce--;var aS=`return function (obj, func, destructorsRef, args) {
`,_S=0,yye=[];gy===0&&yye.push("obj");for(var xye=["retType"],Oye=[X$],Eye=0;Eye<Ce;++Eye)yye.push("arg"+Eye),xye.push("argType"+Eye),Oye.push(Le[Eye]),aS+=`  var arg${Eye} = argType${Eye}.readValueFromPointer(args${_S?"+"+_S:""});
`,_S+=Le[Eye].argPackAdvance;return aS+=`  var rv = ${gy===1?"new func":"func.call"}(${yye.join(", ")});
`,X$.ob||(xye.push("emval_returnValue"),Oye.push(Vwe),aS+=`  return emval_returnValue(retType, destructorsRef, rv);
`),xye.push(aS+`};
`),Ce=l2e(xye)(...Oye),gy=`methodCaller<(${Le.map(Gye=>Gye.name).join(", ")}) => ${X$.name}>`,$we(Awe(gy,Ce))},r:function(Ce,Le){return Le>>>=0,Ce=Tye(Ce>>>0),Le=Tye(Le),jye(Ce[Le])},e:function(Ce){Ce>>>=0,9<Ce&&(HS[Ce+1]+=1)},t:function(){return jye([])},l:function(Ce){Ce=Tye(Ce>>>0);for(var Le=Array(Ce.length),gy=0;gy<Ce.length;gy++)Le[gy]=Ce[gy];return jye(Le)},f:function(Ce){return jye(rwe(Ce>>>0))},k:function(){return jye({})},h:function(Ce){Ce>>>=0;for(var Le=Tye(Ce);Le.length;){var gy=Le.pop();Le.pop()(gy)}Aye(Ce)},g:function(Ce,Le,gy){Le>>>=0,gy>>>=0,Ce=Tye(Ce>>>0),Le=Tye(Le),gy=Tye(gy),Ce[Le]=gy},c:function(Ce,Le){return Le>>>=0,Ce=hwe(Ce>>>0,"_emval_take_value"),Ce=Ce.readValueFromPointer(Le),jye(Ce)},W:function(Ce,Le){Ce=-9007199254740992>Ce||9007199254740992<Ce?NaN:Number(Ce),Le>>>=0,Ce=new Date(1e3*Ce),$t[Le>>>2>>>0]=Ce.getUTCSeconds(),$t[Le+4>>>2>>>0]=Ce.getUTCMinutes(),$t[Le+8>>>2>>>0]=Ce.getUTCHours(),$t[Le+12>>>2>>>0]=Ce.getUTCDate(),$t[Le+16>>>2>>>0]=Ce.getUTCMonth(),$t[Le+20>>>2>>>0]=Ce.getUTCFullYear()-1900,$t[Le+24>>>2>>>0]=Ce.getUTCDay(),$t[Le+28>>>2>>>0]=(Ce.getTime()-Date.UTC(Ce.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},X:function(Ce,Le){Ce=-9007199254740992>Ce||9007199254740992<Ce?NaN:Number(Ce),Le>>>=0,Ce=new Date(1e3*Ce),$t[Le>>>2>>>0]=Ce.getSeconds(),$t[Le+4>>>2>>>0]=Ce.getMinutes(),$t[Le+8>>>2>>>0]=Ce.getHours(),$t[Le+12>>>2>>>0]=Ce.getDate(),$t[Le+16>>>2>>>0]=Ce.getMonth(),$t[Le+20>>>2>>>0]=Ce.getFullYear()-1900,$t[Le+24>>>2>>>0]=Ce.getDay(),$t[Le+28>>>2>>>0]=(pwe(Ce.getFullYear())?v2e:u2e)[Ce.getMonth()]+Ce.getDate()-1|0,$t[Le+36>>>2>>>0]=-(60*Ce.getTimezoneOffset());var gy=new Date(Ce.getFullYear(),6,1).getTimezoneOffset(),X$=new Date(Ce.getFullYear(),0,1).getTimezoneOffset();$t[Le+32>>>2>>>0]=(gy!=X$&&Ce.getTimezoneOffset()==Math.min(X$,gy))|0},Y:function(Ce){Ce>>>=0;var Le=new Date($t[Ce+20>>>2>>>0]+1900,$t[Ce+16>>>2>>>0],$t[Ce+12>>>2>>>0],$t[Ce+8>>>2>>>0],$t[Ce+4>>>2>>>0],$t[Ce>>>2>>>0],0),gy=$t[Ce+32>>>2>>>0],X$=Le.getTimezoneOffset(),aS=new Date(Le.getFullYear(),6,1).getTimezoneOffset(),_S=new Date(Le.getFullYear(),0,1).getTimezoneOffset(),yye=Math.min(_S,aS);return 0>gy?$t[Ce+32>>>2>>>0]=+(aS!=_S&&yye==X$):0<gy!=(yye==X$)&&(aS=Math.max(_S,aS),Le.setTime(Le.getTime()+6e4*((0<gy?yye:aS)-X$))),$t[Ce+24>>>2>>>0]=Le.getDay(),$t[Ce+28>>>2>>>0]=(pwe(Le.getFullYear())?v2e:u2e)[Le.getMonth()]+Le.getDate()-1|0,$t[Ce>>>2>>>0]=Le.getSeconds(),$t[Ce+4>>>2>>>0]=Le.getMinutes(),$t[Ce+8>>>2>>>0]=Le.getHours(),$t[Ce+12>>>2>>>0]=Le.getDate(),$t[Ce+16>>>2>>>0]=Le.getMonth(),$t[Ce+20>>>2>>>0]=Le.getYear(),Ce=Le.getTime(),BigInt(isNaN(Ce)?-1:Ce/1e3)},U:function(){return-52},V:function(){},N:function(Ce,Le,gy,X$){gy>>>=0,X$>>>=0;var aS=new Date().getFullYear(),_S=new Date(aS,0,1),yye=new Date(aS,6,1);aS=_S.getTimezoneOffset();var xye=yye.getTimezoneOffset();K$[Ce>>>0>>>2>>>0]=60*Math.max(aS,xye),$t[Le>>>0>>>2>>>0]=+(aS!=xye),Ce=Oye=>Oye.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],_S=Ce(_S),yye=Ce(yye),xye<aS?(OS(_S,by,gy,17),OS(yye,by,X$,17)):(OS(_S,by,X$,17),OS(yye,by,gy,17))},v:()=>{IS("")},d:function(Ce,Le,gy){return Ce>>>=0,Le=F2e(Le>>>0,gy>>>0),wy[Ce](...Le)},I:function(Ce,Le,gy){return Ce>>>=0,Le=F2e(Le>>>0,gy>>>0),wy[Ce](...Le)},H:()=>Date.now(),O:function(){return 4294901760},q:()=>performance.now(),M:function(Ce){Ce>>>=0;var Le=by.length;if(4294901760<Ce)return!1;for(var gy=1;4>=gy;gy*=2){var X$=Le*(1+.2/gy);X$=Math.min(X$,Ce+100663296);var aS=Math;X$=Math.max(Ce,X$);e:{aS=(aS.min.call(aS,4294901760,X$+(65536-X$%65536)%65536)-Be.buffer.byteLength+65535)/65536;try{Be.grow(aS),G$();var _S=1;break e}catch{}_S=void 0}if(_S)return!0}return!1},$:function(Ce,Le){Ce>>>=0,Le>>>=0;var gy=0;return Uwe().forEach((X$,aS)=>{var _S=Le+gy;for(aS=K$[Ce+4*aS>>>2>>>0]=_S,_S=0;_S<X$.length;++_S)_y[aS++>>>0]=X$.charCodeAt(_S);_y[aS>>>0]=0,gy+=X$.length+1}),0},aa:function(Ce,Le){Ce>>>=0,Le>>>=0;var gy=Uwe();K$[Ce>>>2>>>0]=gy.length;var X$=0;return gy.forEach(aS=>X$+=aS.length+1),K$[Le>>>2>>>0]=X$,0},z:()=>52,F:function(){return 52},_:function(){return 70},E:function(Ce,Le,gy,X$){Le>>>=0,gy>>>=0,X$>>>=0;for(var aS=0,_S=0;_S<gy;_S++){var yye=K$[Le>>>2>>>0],xye=K$[Le+4>>>2>>>0];Le+=8;for(var Oye=0;Oye<xye;Oye++){var Eye=by[yye+Oye>>>0],Gye=i_e[Ce];Eye===0||Eye===10?((Ce===1?Ae:Re)(cS(Gye,0)),Gye.length=0):Gye.push(Eye)}aS+=xye}return K$[X$>>>2>>>0]=aS,0},fa:a_e,p:function(Ce,Le,gy,X$){return a_e(Ce>>>0,Le>>>0,gy>>>0,X$>>>0)}},Yye=function(){function Ce(gy){return Yye=gy.exports,Yye=Zye(),Yye=M2e(),Be=Yye.ja,G$(),$y.unshift(Yye.ka),lS--,lS==0&&bS&&(gy=bS,bS=null,gy()),Yye}var Le={a:Z2e};if(lS++,v.instantiateWasm)try{return v.instantiateWasm(Le,Ce)}catch(gy){Re(`Module.instantiateWasm callback failed with error: ${gy}`),$(gy)}return ES(Le,function(gy){Ce(gy.instance)}).catch($),{}}(),V2e=Ce=>(V2e=Yye.la)(Ce);v._OrtInit=(Ce,Le)=>(v._OrtInit=Yye.ma)(Ce,Le),v._OrtGetLastError=(Ce,Le)=>(v._OrtGetLastError=Yye.na)(Ce,Le),v._OrtCreateSessionOptions=(Ce,Le,gy,X$,aS,_S,yye,xye,Oye,Eye)=>(v._OrtCreateSessionOptions=Yye.oa)(Ce,Le,gy,X$,aS,_S,yye,xye,Oye,Eye),v._OrtAppendExecutionProvider=(Ce,Le)=>(v._OrtAppendExecutionProvider=Yye.pa)(Ce,Le),v._OrtAddFreeDimensionOverride=(Ce,Le,gy)=>(v._OrtAddFreeDimensionOverride=Yye.qa)(Ce,Le,gy),v._OrtAddSessionConfigEntry=(Ce,Le,gy)=>(v._OrtAddSessionConfigEntry=Yye.ra)(Ce,Le,gy),v._OrtReleaseSessionOptions=Ce=>(v._OrtReleaseSessionOptions=Yye.sa)(Ce),v._OrtCreateSession=(Ce,Le,gy)=>(v._OrtCreateSession=Yye.ta)(Ce,Le,gy),v._OrtReleaseSession=Ce=>(v._OrtReleaseSession=Yye.ua)(Ce),v._OrtGetInputOutputCount=(Ce,Le,gy)=>(v._OrtGetInputOutputCount=Yye.va)(Ce,Le,gy),v._OrtGetInputName=(Ce,Le)=>(v._OrtGetInputName=Yye.wa)(Ce,Le),v._OrtGetOutputName=(Ce,Le)=>(v._OrtGetOutputName=Yye.xa)(Ce,Le),v._OrtFree=Ce=>(v._OrtFree=Yye.ya)(Ce),v._OrtCreateTensor=(Ce,Le,gy,X$,aS,_S)=>(v._OrtCreateTensor=Yye.za)(Ce,Le,gy,X$,aS,_S),v._OrtGetTensorData=(Ce,Le,gy,X$,aS)=>(v._OrtGetTensorData=Yye.Aa)(Ce,Le,gy,X$,aS),v._OrtReleaseTensor=Ce=>(v._OrtReleaseTensor=Yye.Ba)(Ce),v._OrtCreateRunOptions=(Ce,Le,gy,X$)=>(v._OrtCreateRunOptions=Yye.Ca)(Ce,Le,gy,X$),v._OrtAddRunConfigEntry=(Ce,Le,gy)=>(v._OrtAddRunConfigEntry=Yye.Da)(Ce,Le,gy),v._OrtReleaseRunOptions=Ce=>(v._OrtReleaseRunOptions=Yye.Ea)(Ce),v._OrtCreateBinding=Ce=>(v._OrtCreateBinding=Yye.Fa)(Ce),v._OrtBindInput=(Ce,Le,gy)=>(v._OrtBindInput=Yye.Ga)(Ce,Le,gy),v._OrtBindOutput=(Ce,Le,gy,X$)=>(v._OrtBindOutput=Yye.Ha)(Ce,Le,gy,X$),v._OrtClearBoundOutputs=Ce=>(v._OrtClearBoundOutputs=Yye.Ia)(Ce),v._OrtReleaseBinding=Ce=>(v._OrtReleaseBinding=Yye.Ja)(Ce),v._OrtRunWithBinding=(Ce,Le,gy,X$,aS)=>(v._OrtRunWithBinding=Yye.Ka)(Ce,Le,gy,X$,aS),v._OrtRun=(Ce,Le,gy,X$,aS,_S,yye,xye)=>(v._OrtRun=Yye.La)(Ce,Le,gy,X$,aS,_S,yye,xye),v._OrtEndProfiling=Ce=>(v._OrtEndProfiling=Yye.Ma)(Ce),v._JsepOutput=(Ce,Le,gy)=>(v._JsepOutput=Yye.Na)(Ce,Le,gy),v._JsepGetNodeName=Ce=>(v._JsepGetNodeName=Yye.Oa)(Ce);var o2e=v._malloc=Ce=>(o2e=v._malloc=Yye.Pa)(Ce),Lwe=v._free=Ce=>(Lwe=v._free=Yye.Qa)(Ce),A2e=Ce=>(A2e=Yye.Sa)(Ce),S2e=Ce=>(S2e=Yye.Ta)(Ce),I2e=()=>(I2e=Yye.Ua)(),Wwe=Ce=>(Wwe=Yye.Wa)(Ce),H2e=()=>(H2e=Yye.Xa)(),Zwe=Ce=>(Zwe=Yye.Ya)(Ce),r2e=()=>(r2e=Yye.Za)();v.___start_em_js=837952,v.___stop_em_js=838113;function M2e(){var Ce=Yye;Ce=Object.assign({},Ce);var Le=gy=>X$=>gy(X$)>>>0;return Ce.la=Le(Ce.la),Ce.Pa=Le(Ce.Pa),Ce.Ta=Le(Ce.Ta),Ce.Ua=(gy=>()=>gy()>>>0)(Ce.Ua),Ce}v.stackSave=()=>I2e(),v.stackRestore=Ce=>A2e(Ce),v.stackAlloc=Ce=>S2e(Ce),v.UTF8ToString=wS,v.stringToUTF8=(Ce,Le,gy)=>OS(Ce,by,Le,gy),v.lengthBytesUTF8=xS;var c2e;bS=function Ce(){c2e||Cy(),c2e||(bS=Ce)};function Cy(){if(!(0<lS)){if(v.preRun)for(typeof v.preRun=="function"&&(v.preRun=[v.preRun]);v.preRun.length;){var Ce=v.preRun.shift();ky.unshift(Ce)}for(;0<ky.length;)ky.shift()(v);if(!(0<lS||c2e||(c2e=!0,v.calledRun=!0,Ke))){for(;0<$y.length;)$y.shift()(v);for(b(v);0<rS.length;)rS.shift()(v)}}}return Cy(),y}})();typeof s=="object"&&typeof l=="object"?l.exports=c:typeof define=="function"&&define.amd&&define([],()=>c)}),Ba$1=Er$1(()=>{}),Da$1=Er$1(()=>{}),Ma$1={};kr$1(Ma$1,{cpus:()=>fc});var fc,Ua$1=j(()=>{fc=void 0}),Va$1=Er$1((s,l)=>{var c=(()=>{var f;var d=typeof document<"u"?(f=document.currentScript)==null?void 0:f.src:void 0;return typeof __filename<"u"&&(d||(d=__filename)),function(g={}){function v(){return hy.buffer!=rS.buffer&&dS(),rS}function b(){return hy.buffer!=rS.buffer&&dS(),lS}function $(){return hy.buffer!=rS.buffer&&dS(),bS}function y(){return hy.buffer!=rS.buffer&&dS(),IS}function x(){return hy.buffer!=rS.buffer&&dS(),BS}function C(){return hy.buffer!=rS.buffer&&dS(),MS}function E(){return hy.buffer!=rS.buffer&&dS(),zS}function N(){return hy.buffer!=rS.buffer&&dS(),Z$}var W=g,q,Y,re=new Promise((Ie,An)=>{q=Ie,Y=An});W.mountExternalData=(Ie,An)=>{(W.Db||(W.Db=new Map)).set(Ie,An)},W.unmountExternalData=()=>{delete W.Db};let se=()=>{let Ie=(q$,iS,hS)=>(...kS)=>{let pC=r2e,kye=iS==null?void 0:iS();kS=q$(...kS);let zye=iS==null?void 0:iS();return kye!==zye&&(q$=zye,hS(kye),iS=hS=null),r2e!=pC?aS():kS},An=q$=>async(...iS)=>{var hS;try{if(W.Cb)throw Error("Session already started");let kS=W.Cb={ec:iS[0],errors:[]},pC=await q$(...iS);if(W.Cb!==kS)throw Error("Session mismatch");(hS=W.Kb)==null||hS.flush();let kye=kS.errors;if(0<kye.length){let zye=await Promise.all(kye);if(zye=zye.filter(Nye=>Nye),0<zye.length)throw Error(zye.join(`
`))}return pC}finally{W.Cb=null}};W._OrtCreateSession=Ie(W._OrtCreateSession,()=>W._OrtCreateSession,q$=>W._OrtCreateSession=q$),W._OrtRun=An(Ie(W._OrtRun,()=>W._OrtRun,q$=>W._OrtRun=q$)),W._OrtRunWithBinding=An(Ie(W._OrtRunWithBinding,()=>W._OrtRunWithBinding,q$=>W._OrtRunWithBinding=q$)),W._OrtBindInput=Ie(W._OrtBindInput,()=>W._OrtBindInput,q$=>W._OrtBindInput=q$),se=void 0};W.jsepInit=(Ie,An)=>{if(se==null||se(),Ie==="webgpu"){[W.Kb,W.Wb,W.$b,W.Lb,W.Zb,W.ob,W.ac,W.cc,W.Xb,W.Yb,W.bc]=An;let q$=W.Kb;W.jsepRegisterBuffer=(iS,hS,kS,pC)=>q$.registerBuffer(iS,hS,kS,pC),W.jsepGetBuffer=iS=>q$.getBuffer(iS),W.jsepCreateDownloader=(iS,hS,kS)=>q$.createDownloader(iS,hS,kS),W.jsepOnReleaseSession=iS=>{q$.onReleaseSession(iS)},W.jsepOnRunStart=iS=>q$.onRunStart(iS)}};var de=Object.assign({},W),he="./this.program",ge=(Ie,An)=>{throw An},Se=typeof window=="object",Ae=typeof importScripts=="function",Re=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",Be=W.ENVIRONMENT_IS_PTHREAD||!1,Ke="";function Lr(Ie){return W.locateFile?W.locateFile(Ie,Ke):Ke+Ie}var _y,by,yy;if(Re){var my=(Mi$1(),sr$1(Di$1)),$t=(Wi$1(),sr$1(Ui$1));Ke=Ae?$t.dirname(Ke)+"/":__dirname+"/",_y=(Ie,An)=>(Ie=OS(Ie)?new URL(Ie):$t.normalize(Ie),my.readFileSync(Ie,An?void 0:"utf8")),yy=Ie=>(Ie=_y(Ie,!0),Ie.buffer||(Ie=new Uint8Array(Ie)),Ie),by=(Ie,An,q$,iS=!0)=>{Ie=OS(Ie)?new URL(Ie):$t.normalize(Ie),my.readFile(Ie,iS?void 0:"utf8",(hS,kS)=>{hS?q$(hS):An(iS?kS.buffer:kS)})},!W.thisProgram&&1<process.argv.length&&(he=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),ge=(Ie,An)=>{throw process.exitCode=Ie,An},global.Worker=Ba$1().Worker}else(Se||Ae)&&(Ae?Ke=self.location.href:typeof document<"u"&&document.currentScript&&(Ke=document.currentScript.src),typeof d<"u"&&d&&(Ke=d),Ke.startsWith("blob:")?Ke="":Ke=Ke.substr(0,Ke.replace(/[?#].*/,"").lastIndexOf("/")+1),Re||(_y=Ie=>{var An=new XMLHttpRequest;return An.open("GET",Ie,!1),An.send(null),An.responseText},Ae&&(yy=Ie=>{var An=new XMLHttpRequest;return An.open("GET",Ie,!1),An.responseType="arraybuffer",An.send(null),new Uint8Array(An.response)}),by=(Ie,An,q$)=>{var iS=new XMLHttpRequest;iS.open("GET",Ie,!0),iS.responseType="arraybuffer",iS.onload=()=>{iS.status==200||iS.status==0&&iS.response?An(iS.response):q$()},iS.onerror=q$,iS.send(null)}));Re&&typeof performance>"u"&&(global.performance=Da$1().performance);var K$=console.log.bind(console),Y$=console.error.bind(console);Re&&(K$=(...Ie)=>my.writeSync(1,Ie.join(" ")+`
`),Y$=(...Ie)=>my.writeSync(2,Ie.join(" ")+`
`));var W$=K$,U$=Y$;Object.assign(W,de),de=null;var hy,G$,ky=!1,$y,rS,lS,bS,IS,BS,MS,zS,LS,nS,Z$;function dS(){var Ie=hy.buffer;W.HEAP8=rS=new Int8Array(Ie),W.HEAP16=bS=new Int16Array(Ie),W.HEAPU8=lS=new Uint8Array(Ie),W.HEAPU16=IS=new Uint16Array(Ie),W.HEAP32=BS=new Int32Array(Ie),W.HEAPU32=MS=new Uint32Array(Ie),W.HEAPF32=zS=new Float32Array(Ie),W.HEAPF64=Z$=new Float64Array(Ie),W.HEAP64=LS=new BigInt64Array(Ie),W.HEAPU64=nS=new BigUint64Array(Ie)}var ES=16777216;if(Be)hy=W.wasmMemory;else if(W.wasmMemory)hy=W.wasmMemory;else if(hy=new WebAssembly.Memory({initial:ES/65536,maximum:65536,shared:!0}),!(hy.buffer instanceof SharedArrayBuffer))throw U$("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),Re&&U$("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");dS(),ES=hy.buffer.byteLength;var wy=[],tS=[],yS=[],Q$=0,eS=null;function cS(){if(Q$--,Q$==0&&eS){var Ie=eS;eS=null,Ie()}}function wS(Ie){throw Ie="Aborted("+Ie+")",U$(Ie),ky=!0,$y=1,Ie=new WebAssembly.RuntimeError(Ie+". Build with -sASSERTIONS for more info."),Y(Ie),Ie}var xS=Ie=>Ie.startsWith("data:application/octet-stream;base64,"),OS=Ie=>Ie.startsWith("file://"),mS;mS="ort-wasm-simd-threaded.wasm",xS(mS)||(mS=Lr(mS));function pS(Ie){if(yy)return yy(Ie);throw"both async and sync fetching of the wasm failed"}function fC(Ie){if(Se||Ae){if(typeof fetch=="function"&&!OS(Ie))return fetch(Ie,{credentials:"same-origin"}).then(An=>{if(!An.ok)throw`failed to load wasm binary file at '${Ie}'`;return An.arrayBuffer()}).catch(()=>pS(Ie));if(by)return new Promise((An,q$)=>{by(Ie,iS=>An(new Uint8Array(iS)),q$)})}return Promise.resolve().then(()=>pS(Ie))}function US(Ie,An,q$){return fC(Ie).then(iS=>WebAssembly.instantiate(iS,An)).then(q$,iS=>{U$(`failed to asynchronously prepare wasm: ${iS}`),wS(iS)})}function Iye(Ie,An){var q$=mS;return typeof WebAssembly.instantiateStreaming!="function"||xS(q$)||OS(q$)||Re||typeof fetch!="function"?US(q$,Ie,An):fetch(q$,{credentials:"same-origin"}).then(iS=>WebAssembly.instantiateStreaming(iS,Ie).then(An,function(hS){return U$(`wasm streaming compile failed: ${hS}`),U$("falling back to ArrayBuffer instantiation"),US(q$,Ie,An)}))}var $ye={826468:(Ie,An,q$,iS)=>{if(typeof W>"u"||!W.Db)return 1;if(Ie=VS(Ie>>>0),Ie.startsWith("./")&&(Ie=Ie.substring(2)),Ie=W.Db.get(Ie),!Ie)return 2;if(An>>>=0,q$>>>=0,iS>>>=0,An+q$>Ie.byteLength)return 3;try{return b().set(Ie.subarray(An,An+q$),iS>>>0),0}catch{return 4}},826969:()=>{W.Xb()},827e3:()=>{W.Yb()},827029:()=>{W.bc()},827054:Ie=>W.Wb(Ie),827087:Ie=>W.$b(Ie),827119:(Ie,An,q$)=>{W.Lb(Ie,An,q$,!0)},827158:(Ie,An,q$)=>{W.Lb(Ie,An,q$)},827191:Ie=>{W.ob("Abs",Ie,void 0)},827242:Ie=>{W.ob("Neg",Ie,void 0)},827293:Ie=>{W.ob("Floor",Ie,void 0)},827346:Ie=>{W.ob("Ceil",Ie,void 0)},827398:Ie=>{W.ob("Reciprocal",Ie,void 0)},827456:Ie=>{W.ob("Sqrt",Ie,void 0)},827508:Ie=>{W.ob("Exp",Ie,void 0)},827559:Ie=>{W.ob("Erf",Ie,void 0)},827610:Ie=>{W.ob("Sigmoid",Ie,void 0)},827665:(Ie,An,q$)=>{W.ob("HardSigmoid",Ie,{alpha:An,beta:q$})},827744:Ie=>{W.ob("Log",Ie,void 0)},827795:Ie=>{W.ob("Sin",Ie,void 0)},827846:Ie=>{W.ob("Cos",Ie,void 0)},827897:Ie=>{W.ob("Tan",Ie,void 0)},827948:Ie=>{W.ob("Asin",Ie,void 0)},828e3:Ie=>{W.ob("Acos",Ie,void 0)},828052:Ie=>{W.ob("Atan",Ie,void 0)},828104:Ie=>{W.ob("Sinh",Ie,void 0)},828156:Ie=>{W.ob("Cosh",Ie,void 0)},828208:Ie=>{W.ob("Asinh",Ie,void 0)},828261:Ie=>{W.ob("Acosh",Ie,void 0)},828314:Ie=>{W.ob("Atanh",Ie,void 0)},828367:Ie=>{W.ob("Tanh",Ie,void 0)},828419:Ie=>{W.ob("Not",Ie,void 0)},828470:(Ie,An,q$)=>{W.ob("Clip",Ie,{min:An,max:q$})},828539:Ie=>{W.ob("Clip",Ie,void 0)},828591:(Ie,An)=>{W.ob("Elu",Ie,{alpha:An})},828649:Ie=>{W.ob("Relu",Ie,void 0)},828701:(Ie,An)=>{W.ob("LeakyRelu",Ie,{alpha:An})},828765:(Ie,An)=>{W.ob("ThresholdedRelu",Ie,{alpha:An})},828835:(Ie,An)=>{W.ob("Cast",Ie,{to:An})},828893:Ie=>{W.ob("Add",Ie,void 0)},828944:Ie=>{W.ob("Sub",Ie,void 0)},828995:Ie=>{W.ob("Mul",Ie,void 0)},829046:Ie=>{W.ob("Div",Ie,void 0)},829097:Ie=>{W.ob("Pow",Ie,void 0)},829148:Ie=>{W.ob("Equal",Ie,void 0)},829201:Ie=>{W.ob("Greater",Ie,void 0)},829256:Ie=>{W.ob("GreaterOrEqual",Ie,void 0)},829318:Ie=>{W.ob("Less",Ie,void 0)},829370:Ie=>{W.ob("LessOrEqual",Ie,void 0)},829429:(Ie,An,q$,iS,hS)=>{W.ob("ReduceMean",Ie,{keepDims:!!An,noopWithEmptyAxes:!!q$,axes:iS?Array.from(x().subarray(iS>>>0,hS>>>0)):[]})},829588:(Ie,An,q$,iS,hS)=>{W.ob("ReduceMax",Ie,{keepDims:!!An,noopWithEmptyAxes:!!q$,axes:iS?Array.from(x().subarray(iS>>>0,hS>>>0)):[]})},829746:(Ie,An,q$,iS,hS)=>{W.ob("ReduceMin",Ie,{keepDims:!!An,noopWithEmptyAxes:!!q$,axes:iS?Array.from(x().subarray(iS>>>0,hS>>>0)):[]})},829904:(Ie,An,q$,iS,hS)=>{W.ob("ReduceProd",Ie,{keepDims:!!An,noopWithEmptyAxes:!!q$,axes:iS?Array.from(x().subarray(iS>>>0,hS>>>0)):[]})},830063:(Ie,An,q$,iS,hS)=>{W.ob("ReduceSum",Ie,{keepDims:!!An,noopWithEmptyAxes:!!q$,axes:iS?Array.from(x().subarray(iS>>>0,hS>>>0)):[]})},830221:(Ie,An,q$,iS,hS)=>{W.ob("ReduceL1",Ie,{keepDims:!!An,noopWithEmptyAxes:!!q$,axes:iS?Array.from(x().subarray(iS>>>0,hS>>>0)):[]})},830378:(Ie,An,q$,iS,hS)=>{W.ob("ReduceL2",Ie,{keepDims:!!An,noopWithEmptyAxes:!!q$,axes:iS?Array.from(x().subarray(iS>>>0,hS>>>0)):[]})},830535:(Ie,An,q$,iS,hS)=>{W.ob("ReduceLogSum",Ie,{keepDims:!!An,noopWithEmptyAxes:!!q$,axes:iS?Array.from(x().subarray(iS>>>0,hS>>>0)):[]})},830696:(Ie,An,q$,iS,hS)=>{W.ob("ReduceSumSquare",Ie,{keepDims:!!An,noopWithEmptyAxes:!!q$,axes:iS?Array.from(x().subarray(iS>>>0,hS>>>0)):[]})},830860:(Ie,An,q$,iS,hS)=>{W.ob("ReduceLogSumExp",Ie,{keepDims:!!An,noopWithEmptyAxes:!!q$,axes:iS?Array.from(x().subarray(iS>>>0,hS>>>0)):[]})},831024:Ie=>{W.ob("Where",Ie,void 0)},831077:(Ie,An,q$)=>{W.ob("Transpose",Ie,{perm:An?Array.from(x().subarray(An>>>0,q$>>>0)):[]})},831185:(Ie,An,q$,iS)=>{W.ob("DepthToSpace",Ie,{blocksize:An,mode:VS(q$),format:iS?"NHWC":"NCHW"})},831318:(Ie,An,q$,iS)=>{W.ob("DepthToSpace",Ie,{blocksize:An,mode:VS(q$),format:iS?"NHWC":"NCHW"})},831451:(Ie,An,q$,iS,hS,kS,pC,kye,zye,Nye,Xye,xwe,bwe,GS,nwe)=>{W.ob("ConvTranspose",Ie,{format:zye?"NHWC":"NCHW",autoPad:An,dilations:[q$],group:iS,kernelShape:[hS],pads:[kS,pC],strides:[kye],wIsConst:()=>!!v()[Nye>>>0],outputPadding:Xye?Array.from(x().subarray(Xye>>>0,xwe>>>0)):[],outputShape:bwe?Array.from(x().subarray(bwe>>>0,GS>>>0)):[],activation:VS(nwe)})},831852:(Ie,An,q$,iS,hS,kS,pC,kye,zye,Nye,Xye,xwe,bwe,GS)=>{W.ob("ConvTranspose",Ie,{format:kye?"NHWC":"NCHW",autoPad:An,dilations:Array.from(x().subarray(q$>>>0,(q$>>>0)+2>>>0)),group:iS,kernelShape:Array.from(x().subarray(hS>>>0,(hS>>>0)+2>>>0)),pads:Array.from(x().subarray(kS>>>0,(kS>>>0)+4>>>0)),strides:Array.from(x().subarray(pC>>>0,(pC>>>0)+2>>>0)),wIsConst:()=>!!v()[zye>>>0],outputPadding:Nye?Array.from(x().subarray(Nye>>>0,Xye>>>0)):[],outputShape:xwe?Array.from(x().subarray(xwe>>>0,bwe>>>0)):[],activation:VS(GS)})},832417:(Ie,An,q$,iS,hS,kS,pC,kye,zye,Nye,Xye,xwe,bwe,GS,nwe)=>{W.ob("ConvTranspose",Ie,{format:zye?"NHWC":"NCHW",autoPad:An,dilations:[q$],group:iS,kernelShape:[hS],pads:[kS,pC],strides:[kye],wIsConst:()=>!!v()[Nye>>>0],outputPadding:Xye?Array.from(x().subarray(Xye>>>0,xwe>>>0)):[],outputShape:bwe?Array.from(x().subarray(bwe>>>0,GS>>>0)):[],activation:VS(nwe)})},832818:(Ie,An,q$,iS,hS,kS,pC,kye,zye,Nye,Xye,xwe,bwe,GS)=>{W.ob("ConvTranspose",Ie,{format:kye?"NHWC":"NCHW",autoPad:An,dilations:Array.from(x().subarray(q$>>>0,(q$>>>0)+2>>>0)),group:iS,kernelShape:Array.from(x().subarray(hS>>>0,(hS>>>0)+2>>>0)),pads:Array.from(x().subarray(kS>>>0,(kS>>>0)+4>>>0)),strides:Array.from(x().subarray(pC>>>0,(pC>>>0)+2>>>0)),wIsConst:()=>!!v()[zye>>>0],outputPadding:Nye?Array.from(x().subarray(Nye>>>0,Xye>>>0)):[],outputShape:xwe?Array.from(x().subarray(xwe>>>0,bwe>>>0)):[],activation:VS(GS)})},833383:(Ie,An)=>{W.ob("GlobalAveragePool",Ie,{format:An?"NHWC":"NCHW"})},833474:(Ie,An,q$,iS,hS,kS,pC,kye,zye,Nye,Xye,xwe,bwe,GS,nwe,gwe)=>{W.ob("AveragePool",Ie,{format:gwe?"NHWC":"NCHW",auto_pad:An,ceil_mode:q$,count_include_pad:iS,storage_order:hS,dilations:[kS,pC],kernel_shape:[kye,zye],pads:[Nye,Xye,xwe,bwe],strides:[GS,nwe]})},833758:(Ie,An)=>{W.ob("GlobalAveragePool",Ie,{format:An?"NHWC":"NCHW"})},833849:(Ie,An,q$,iS,hS,kS,pC,kye,zye,Nye,Xye,xwe,bwe,GS,nwe,gwe)=>{W.ob("AveragePool",Ie,{format:gwe?"NHWC":"NCHW",auto_pad:An,ceil_mode:q$,count_include_pad:iS,storage_order:hS,dilations:[kS,pC],kernel_shape:[kye,zye],pads:[Nye,Xye,xwe,bwe],strides:[GS,nwe]})},834133:(Ie,An)=>{W.ob("GlobalMaxPool",Ie,{format:An?"NHWC":"NCHW"})},834220:(Ie,An,q$,iS,hS,kS,pC,kye,zye,Nye,Xye,xwe,bwe,GS,nwe,gwe)=>{W.ob("MaxPool",Ie,{format:gwe?"NHWC":"NCHW",auto_pad:An,ceil_mode:q$,count_include_pad:iS,storage_order:hS,dilations:[kS,pC],kernel_shape:[kye,zye],pads:[Nye,Xye,xwe,bwe],strides:[GS,nwe]})},834500:(Ie,An)=>{W.ob("GlobalMaxPool",Ie,{format:An?"NHWC":"NCHW"})},834587:(Ie,An,q$,iS,hS,kS,pC,kye,zye,Nye,Xye,xwe,bwe,GS,nwe,gwe)=>{W.ob("MaxPool",Ie,{format:gwe?"NHWC":"NCHW",auto_pad:An,ceil_mode:q$,count_include_pad:iS,storage_order:hS,dilations:[kS,pC],kernel_shape:[kye,zye],pads:[Nye,Xye,xwe,bwe],strides:[GS,nwe]})},834867:(Ie,An,q$,iS,hS)=>{W.ob("Gemm",Ie,{alpha:An,beta:q$,transA:iS,transB:hS})},834971:Ie=>{W.ob("MatMul",Ie,void 0)},835025:(Ie,An,q$,iS)=>{W.ob("ArgMax",Ie,{keepDims:!!An,selectLastIndex:!!q$,axis:iS})},835133:(Ie,An,q$,iS)=>{W.ob("ArgMin",Ie,{keepDims:!!An,selectLastIndex:!!q$,axis:iS})},835241:(Ie,An)=>{W.ob("Softmax",Ie,{axis:An})},835304:(Ie,An)=>{W.ob("Concat",Ie,{axis:An})},835364:(Ie,An,q$,iS,hS)=>{W.ob("Split",Ie,{axis:An,numOutputs:q$,splitSizes:iS?Array.from(x().subarray(iS>>>0,hS>>>0)):[]})},835504:Ie=>{W.ob("Expand",Ie,void 0)},835558:(Ie,An)=>{W.ob("Gather",Ie,{axis:Number(An)})},835629:(Ie,An)=>{W.ob("GatherElements",Ie,{axis:Number(An)})},835708:(Ie,An,q$,iS,hS,kS,pC,kye,zye,Nye,Xye)=>{W.ob("Resize",Ie,{antialias:An,axes:q$?Array.from(x().subarray(q$>>>0,iS>>>0)):[],coordinateTransformMode:VS(hS),cubicCoeffA:kS,excludeOutside:pC,extrapolationValue:kye,keepAspectRatioPolicy:VS(zye),mode:VS(Nye),nearestMode:VS(Xye)})},836054:(Ie,An,q$,iS,hS,kS,pC)=>{W.ob("Slice",Ie,{starts:An?Array.from(x().subarray(An>>>0,q$>>>0)):[],ends:iS?Array.from(x().subarray(iS>>>0,hS>>>0)):[],axes:kS?Array.from(x().subarray(kS>>>0,pC>>>0)):[]})},836270:Ie=>{W.ob("Tile",Ie,void 0)},836322:(Ie,An,q$,iS)=>{W.ob("LayerNormalization",Ie,{axis:An,epsilon:q$,simplified:!!iS})},836433:(Ie,An,q$)=>{W.ob("InstanceNormalization",Ie,{epsilon:An,format:q$?"NHWC":"NCHW"})},836547:(Ie,An,q$)=>{W.ob("InstanceNormalization",Ie,{epsilon:An,format:q$?"NHWC":"NCHW"})},836661:Ie=>{W.ob("Range",Ie,void 0)},836714:(Ie,An)=>{W.ob("Einsum",Ie,{equation:VS(An)})},836795:(Ie,An,q$,iS,hS)=>{W.ob("Pad",Ie,{mode:An,value:q$,pads:iS?Array.from(x().subarray(iS>>>0,hS>>>0)):[]})},836922:(Ie,An,q$,iS,hS,kS)=>{W.ob("BatchNormalization",Ie,{epsilon:An,momentum:q$,spatial:!!hS,trainingMode:!!iS,format:kS?"NHWC":"NCHW"})},837091:(Ie,An,q$,iS,hS,kS)=>{W.ob("BatchNormalization",Ie,{epsilon:An,momentum:q$,spatial:!!hS,trainingMode:!!iS,format:kS?"NHWC":"NCHW"})},837260:(Ie,An,q$)=>{W.ob("CumSum",Ie,{exclusive:Number(An),reverse:Number(q$)})},837357:(Ie,An,q$,iS,hS,kS,pC,kye,zye)=>{W.ob("Attention",Ie,{numHeads:An,isUnidirectional:q$,maskFilterValue:iS,scale:hS,doRotary:kS,qkvHiddenSizes:pC?Array.from(x().subarray(Number(kye)>>>0,Number(kye)+pC>>>0)):[],pastPresentShareBuffer:!!zye})},837629:Ie=>{W.ob("BiasAdd",Ie,void 0)},837684:Ie=>{W.ob("BiasSplitGelu",Ie,void 0)},837745:Ie=>{W.ob("FastGelu",Ie,void 0)},837801:(Ie,An,q$,iS,hS,kS,pC,kye,zye,Nye,Xye,xwe,bwe)=>{W.ob("Conv",Ie,{format:zye?"NHWC":"NCHW",auto_pad:An,dilations:[q$],group:iS,kernel_shape:[hS],pads:kS?Array.from(x().subarray(kS>>>0,pC>>>0)):[],strides:[kye],w_is_const:()=>!!v()[Nye>>>0],activation:VS(Xye),activation_params:xwe?Array.from(E().subarray(xwe>>>0,bwe>>>0)):[]})},838171:(Ie,An,q$,iS,hS,kS,pC,kye,zye,Nye,Xye,xwe,bwe,GS,nwe,gwe)=>{W.ob("Conv",Ie,{format:xwe?"NHWC":"NCHW",auto_pad:An,dilations:[q$,iS],group:hS,kernel_shape:[kS,pC],pads:kye?Array.from(x().subarray(kye>>>0,zye>>>0)):[],strides:[Nye,Xye],w_is_const:()=>!!v()[bwe>>>0],activation:VS(GS),activation_params:nwe?Array.from(E().subarray(nwe>>>0,gwe>>>0)):[]})},838562:Ie=>{W.ob("Gelu",Ie,void 0)},838614:(Ie,An,q$,iS,hS,kS)=>{W.ob("MatMulNBits",Ie,{k:An,n:q$,accuracyLevel:iS,bits:hS,blockSize:kS})},838741:(Ie,An,q$,iS,hS,kS)=>{W.ob("MultiHeadAttention",Ie,{numHeads:An,isUnidirectional:q$,maskFilterValue:iS,scale:hS,doRotary:kS})},838900:(Ie,An,q$,iS,hS)=>{W.ob("RotaryEmbedding",Ie,{interleaved:!!An,numHeads:q$,rotaryEmbeddingDim:iS,scale:hS})},839039:(Ie,An,q$)=>{W.ob("SkipLayerNormalization",Ie,{epsilon:An,simplified:!!q$})},839141:(Ie,An,q$)=>{W.ob("SkipLayerNormalization",Ie,{epsilon:An,simplified:!!q$})},839243:(Ie,An,q$,iS)=>{W.ob("LayerNormalization",Ie,{axis:An,epsilon:q$,simplified:!!iS})},839354:Ie=>{W.ac(Ie)},839388:(Ie,An)=>W.cc(Ie,An,W.Cb.ec,W.Cb.errors)};function Rye(Ie){this.name="ExitStatus",this.message=`Program terminated with exit(${Ie})`,this.status=Ie}var Uye=Ie=>{Ie.terminate(),Ie.onmessage=()=>{}},DS=Ie=>{KS.xb.length==0&&(AS(),KS.Mb(KS.xb[0]));var An=KS.xb.pop();if(!An)return 6;KS.yb.push(An),KS.ub[Ie.wb]=An,An.wb=Ie.wb;var q$={cmd:"run",start_routine:Ie.fc,arg:Ie.Rb,pthread_ptr:Ie.wb};return Re&&An.unref(),An.postMessage(q$,Ie.mc),0},HS=0,Aye=Ie=>{var An=p$e();return Ie=Ie(),s_e(An),Ie},Tye=(Ie,An,...q$)=>Aye(()=>{for(var iS=2*q$.length,hS=Q2e(8*iS),kS=hS>>>3,pC=0;pC<q$.length;pC++){var kye=q$[pC];typeof kye=="bigint"?(LS[kS+2*pC]=1n,LS[kS+2*pC+1]=kye):(LS[kS+2*pC]=0n,N()[kS+2*pC+1>>>0]=kye)}return V_e(Ie,0,iS,hS,An)});function jye(Ie){var An;if(Be)return Tye(0,1,Ie);$y=Ie,0<HS||(KS.hc(),(An=W.onExit)==null||An.call(W,Ie),ky=!0),ge(Ie,new Rye(Ie))}var sS=Ie=>{if($y=Ie,Be)throw Kye(Ie),"unwind";jye(Ie)};function TS(){for(var Ie=W.numThreads;Ie--;)AS();wy.unshift(()=>{Q$++,jS(()=>cS())})}function AS(){var Ie=Lr("ort-wasm-simd-threaded.worker.js");Ie=new Worker(Ie),KS.xb.push(Ie)}function jS(Ie){Be?Ie():Promise.all(KS.xb.map(KS.Mb)).then(Ie)}var KS={xb:[],yb:[],Qb:[],ub:{},Gb(){Be?(KS.receiveObjectTransfer=KS.dc,KS.threadInitTLS=KS.Pb,KS.setExitStatus=KS.Ob):TS()},Ob:Ie=>$y=Ie,pc:["$terminateWorker"],hc:()=>{for(var Ie of KS.yb)Uye(Ie);for(Ie of KS.xb)Uye(Ie);KS.xb=[],KS.yb=[],KS.ub=[]},Nb:Ie=>{var An=Ie.wb;delete KS.ub[An],KS.xb.push(Ie),KS.yb.splice(KS.yb.indexOf(Ie),1),Ie.wb=0,c$e(An)},dc(){},Pb(){KS.Qb.forEach(Ie=>Ie())},Mb:Ie=>new Promise(An=>{Ie.onmessage=kS=>{kS=kS.data;var pC=kS.cmd;if(kS.targetThread&&kS.targetThread!=kwe()){var kye=KS.ub[kS.targetThread];kye?kye.postMessage(kS,kS.transferList):U$(`Internal error! Worker sent a message "${pC}" to target pthread ${kS.targetThread}, but that thread no longer exists!`)}else pC==="checkMailbox"?Lwe():pC==="spawnThread"?DS(kS):pC==="cleanupThread"?KS.Nb(KS.ub[kS.thread]):pC==="killThread"?(kS=kS.thread,pC=KS.ub[kS],delete KS.ub[kS],Uye(pC),c$e(kS),KS.yb.splice(KS.yb.indexOf(pC),1),pC.wb=0):pC==="cancelThread"?KS.ub[kS.thread].postMessage({cmd:"cancel"}):pC==="loaded"?(Ie.loaded=!0,Re&&!Ie.wb&&Ie.unref(),An(Ie)):pC==="alert"?alert(`Thread ${kS.threadId}: ${kS.text}`):kS.target==="setimmediate"?Ie.postMessage(kS):pC==="callHandler"?W[kS.handler](...kS.args):pC&&U$(`worker sent an unknown command ${pC}`)},Ie.onerror=kS=>{throw U$(`worker sent an error! ${kS.filename}:${kS.lineno}: ${kS.message}`),kS},Re&&(Ie.on("message",kS=>Ie.onmessage({data:kS})),Ie.on("error",kS=>Ie.onerror(kS)));var q$=[],iS=["onExit"],hS;for(hS of iS)W.hasOwnProperty(hS)&&q$.push(hS);Ie.postMessage({cmd:"load",handlers:q$,urlOrBlob:W.mainScriptUrlOrBlob||d,wasmMemory:hy,wasmModule:G$})})};W.PThread=KS;var Bye=Ie=>{for(;0<Ie.length;)Ie.shift()(W)};W.establishStackSpace=()=>{var Ie=kwe(),An=C()[Ie+52>>>2>>>0];Ie=C()[Ie+56>>>2>>>0],f$e(An,An-Ie),s_e(An)};function Kye(Ie){if(Be)return Tye(1,0,Ie);sS(Ie)}W.invokeEntryPoint=(Ie,An)=>{HS=0,Ie=h$e(Ie,An),0<HS?KS.Ob(Ie):d$e(Ie)};class swe{constructor(An){this.Ib=An-24}Gb(An,q$){C()[this.Ib+16>>>2>>>0]=0,C()[this.Ib+4>>>2>>>0]=An,C()[this.Ib+8>>>2>>>0]=q$}}var Cwe=0;function ywe(Ie,An,q$,iS){return Be?Tye(2,1,Ie,An,q$,iS):hwe(Ie,An,q$,iS)}function hwe(Ie,An,q$,iS){if(Ie>>>=0,An>>>=0,q$>>>=0,iS>>>=0,typeof SharedArrayBuffer>"u")return U$("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var hS=[];return Be&&hS.length===0?ywe(Ie,An,q$,iS):(Ie={fc:q$,wb:Ie,Rb:iS,mc:hS},Be?(Ie.oc="spawnThread",postMessage(Ie,hS),0):DS(Ie))}var Vwe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Owe=(Ie,An,q$)=>{An>>>=0;var iS=An+q$;for(q$=An;Ie[q$]&&!(q$>=iS);)++q$;if(16<q$-An&&Ie.buffer&&Vwe)return Vwe.decode(Ie.buffer instanceof SharedArrayBuffer?Ie.slice(An,q$):Ie.subarray(An,q$));for(iS="";An<q$;){var hS=Ie[An++];if(hS&128){var kS=Ie[An++]&63;if((hS&224)==192)iS+=String.fromCharCode((hS&31)<<6|kS);else{var pC=Ie[An++]&63;hS=(hS&240)==224?(hS&15)<<12|kS<<6|pC:(hS&7)<<18|kS<<12|pC<<6|Ie[An++]&63,65536>hS?iS+=String.fromCharCode(hS):(hS-=65536,iS+=String.fromCharCode(55296|hS>>10,56320|hS&1023))}}else iS+=String.fromCharCode(hS)}return iS},VS=(Ie,An)=>(Ie>>>=0)?Owe(b(),Ie,An):"";function Zye(Ie,An,q$){return Be?Tye(3,1,Ie,An,q$):0}function twe(Ie,An){if(Be)return Tye(4,1,Ie,An)}var _we=Ie=>{for(var An=0,q$=0;q$<Ie.length;++q$){var iS=Ie.charCodeAt(q$);127>=iS?An++:2047>=iS?An+=2:55296<=iS&&57343>=iS?(An+=4,++q$):An+=3}return An},Hwe=(Ie,An,q$,iS)=>{if(q$>>>=0,!(0<iS))return 0;var hS=q$;iS=q$+iS-1;for(var kS=0;kS<Ie.length;++kS){var pC=Ie.charCodeAt(kS);if(55296<=pC&&57343>=pC){var kye=Ie.charCodeAt(++kS);pC=65536+((pC&1023)<<10)|kye&1023}if(127>=pC){if(q$>=iS)break;An[q$++>>>0]=pC}else{if(2047>=pC){if(q$+1>=iS)break;An[q$++>>>0]=192|pC>>6}else{if(65535>=pC){if(q$+2>=iS)break;An[q$++>>>0]=224|pC>>12}else{if(q$+3>=iS)break;An[q$++>>>0]=240|pC>>18,An[q$++>>>0]=128|pC>>12&63}An[q$++>>>0]=128|pC>>6&63}An[q$++>>>0]=128|pC&63}}return An[q$>>>0]=0,q$-hS},Pwe=(Ie,An,q$)=>Hwe(Ie,b(),An,q$);function Jwe(Ie,An){if(Be)return Tye(5,1,Ie,An)}function Nwe(Ie,An,q$){if(Be)return Tye(6,1,Ie,An,q$)}function i2e(Ie,An,q$){return Be?Tye(7,1,Ie,An,q$):0}function Kwe(Ie,An){if(Be)return Tye(8,1,Ie,An)}function Qwe(Ie,An,q$){if(Be)return Tye(9,1,Ie,An,q$)}function e2e(Ie,An,q$,iS){if(Be)return Tye(10,1,Ie,An,q$,iS)}function t2e(Ie,An,q$,iS){if(Be)return Tye(11,1,Ie,An,q$,iS)}function Dye(Ie,An,q$,iS){if(Be)return Tye(12,1,Ie,An,q$,iS)}function CS(Ie){if(Be)return Tye(13,1,Ie)}function Sye(Ie,An){if(Be)return Tye(14,1,Ie,An)}function Mye(Ie,An,q$){if(Be)return Tye(15,1,Ie,An,q$)}var rwe,awe=Ie=>{for(var An="";b()[Ie>>>0];)An+=rwe[b()[Ie++>>>0]];return An},$we={},Mwe={},Awe;function l2e(Ie,An,q$={}){var iS=An.name;if(!Ie)throw new Awe(`type "${iS}" must have a positive integer typeid pointer`);if(Mwe.hasOwnProperty(Ie)){if(q$.Ub)return;throw new Awe(`Cannot register type '${iS}' twice`)}Mwe[Ie]=An,$we.hasOwnProperty(Ie)&&(An=$we[Ie],delete $we[Ie],An.forEach(hS=>hS()))}function pwe(Ie,An,q$={}){if(!("argPackAdvance"in An))throw new TypeError("registerType registeredInstance requires argPackAdvance");return l2e(Ie,An,q$)}var v2e=(Ie,An,q$)=>{switch(An){case 1:return q$?iS=>v()[iS>>>0]:iS=>b()[iS>>>0];case 2:return q$?iS=>$()[iS>>>1>>>0]:iS=>y()[iS>>>1>>>0];case 4:return q$?iS=>x()[iS>>>2>>>0]:iS=>C()[iS>>>2>>>0];case 8:return q$?iS=>LS[iS>>>3]:iS=>nS[iS>>>3];default:throw new TypeError(`invalid integer width (${An}): ${Ie}`)}},u2e=[],Ywe=[];function F2e(Ie){Ie>>>=0,9<Ie&&--Ywe[Ie+1]===0&&(Ywe[Ie]=void 0,u2e.push(Ie))}var Bwe=Ie=>{if(!Ie)throw new Awe("Cannot use deleted val. handle = "+Ie);return Ywe[Ie]},Uwe=Ie=>{switch(Ie){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let An=u2e.pop()||Ywe.length;return Ywe[An]=Ie,Ywe[An+1]=1,An}};function x2e(Ie){return this.fromWireType(C()[Ie>>>2>>>0])}var i_e={name:"emscripten::val",fromWireType:Ie=>{var An=Bwe(Ie);return F2e(Ie),An},toWireType:(Ie,An)=>Uwe(An),argPackAdvance:8,readValueFromPointer:x2e,Bb:null},o_e=(Ie,An)=>{switch(An){case 4:return function(q$){return this.fromWireType(E()[q$>>>2>>>0])};case 8:return function(q$){return this.fromWireType(N()[q$>>>3>>>0])};default:throw new TypeError(`invalid float width (${An}): ${Ie}`)}},z2e=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,y_e=(Ie,An)=>{for(var q$=Ie>>1,iS=q$+An/2;!(q$>=iS)&&y()[q$>>>0];)++q$;if(q$<<=1,32<q$-Ie&&z2e)return z2e.decode(b().slice(Ie,q$));for(q$="",iS=0;!(iS>=An/2);++iS){var hS=$()[Ie+2*iS>>>1>>>0];if(hS==0)break;q$+=String.fromCharCode(hS)}return q$},a_e=(Ie,An,q$)=>{if(q$??(q$=2147483647),2>q$)return 0;q$-=2;var iS=An;q$=q$<2*Ie.length?q$/2:Ie.length;for(var hS=0;hS<q$;++hS){var kS=Ie.charCodeAt(hS);$()[An>>>1>>>0]=kS,An+=2}return $()[An>>>1>>>0]=0,An-iS},j2e=Ie=>2*Ie.length,qye=(Ie,An)=>{for(var q$=0,iS="";!(q$>=An/4);){var hS=x()[Ie+4*q$>>>2>>>0];if(hS==0)break;++q$,65536<=hS?(hS-=65536,iS+=String.fromCharCode(55296|hS>>10,56320|hS&1023)):iS+=String.fromCharCode(hS)}return iS},Z2e=(Ie,An,q$)=>{if(An>>>=0,q$??(q$=2147483647),4>q$)return 0;var iS=An;q$=iS+q$-4;for(var hS=0;hS<Ie.length;++hS){var kS=Ie.charCodeAt(hS);if(55296<=kS&&57343>=kS){var pC=Ie.charCodeAt(++hS);kS=65536+((kS&1023)<<10)|pC&1023}if(x()[An>>>2>>>0]=kS,An+=4,An+4>q$)break}return x()[An>>>2>>>0]=0,An-iS},Yye=Ie=>{for(var An=0,q$=0;q$<Ie.length;++q$){var iS=Ie.charCodeAt(q$);55296<=iS&&57343>=iS&&++q$,An+=4}return An},V2e=Ie=>{if(!ky)try{if(Ie(),!(0<HS))try{Be?d$e($y):sS($y)}catch(An){An instanceof Rye||An=="unwind"||ge(1,An)}}catch(An){An instanceof Rye||An=="unwind"||ge(1,An)}};function o2e(Ie){Ie>>>=0,typeof Atomics.nc=="function"&&(Atomics.nc(x(),Ie>>>2,Ie).value.then(Lwe),Ie+=128,Atomics.store(x(),Ie>>>2,1))}W.__emscripten_thread_mailbox_await=o2e;var Lwe=()=>{var Ie=kwe();Ie&&(o2e(Ie),V2e(q$e))};W.checkMailbox=Lwe;var A2e=[],S2e=(Ie,An)=>{var q$=Mwe[Ie];if(q$===void 0)throw Ie=j_e(Ie),q$=awe(Ie),y2e(Ie),new Awe(`${An} has unknown type ${q$}`);return q$},I2e=(Ie,An,q$)=>{var iS=[];return Ie=Ie.toWireType(iS,q$),iS.length&&(C()[An>>>2>>>0]=Uwe(iS)),Ie},Wwe=Ie=>{try{Ie()}catch(An){wS(An)}};function H2e(){var Ie=Hye,An={};for(let[q$,iS]of Object.entries(Ie))An[q$]=typeof iS=="function"?(...hS)=>{c2e.push(q$);try{return iS(...hS)}finally{ky||(c2e.pop(),r2e&&Zwe===1&&c2e.length===0&&(Zwe=0,HS+=1,Wwe(H_e),typeof Fibers<"u"&&Fibers.rc()))}}:iS;return An}var Zwe=0,r2e=null,M2e=0,c2e=[],Cy={},Ce={},Le=0,gy=null,X$=[];function aS(){return new Promise((Ie,An)=>{gy={resolve:Ie,reject:An}})}function _S(){var Ie=C2e(65548),An=Ie+12;C()[Ie>>>2>>>0]=An,C()[Ie+4>>>2>>>0]=An+65536,An=c2e[0];var q$=Cy[An];return q$===void 0&&(q$=Le++,Cy[An]=q$,Ce[q$]=An),An=q$,x()[Ie+8>>>2>>>0]=An,Ie}function yye(){var Ie=x()[r2e+8>>>2>>>0];return Ie=Hye[Ce[Ie]],--HS,Ie()}function xye(Ie){if(!ky){if(Zwe===0){var An=!1,q$=!1;Ie((iS=0)=>{if(!ky&&(M2e=iS,An=!0,q$)){Zwe=2,Wwe(()=>U_e(r2e)),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.resume(),iS=!1;try{var hS=yye()}catch(kye){hS=kye,iS=!0}var kS=!1;if(!r2e){var pC=gy;pC&&(gy=null,(iS?pC.reject:pC.resolve)(hS),kS=!0)}if(iS&&!kS)throw hS}}),q$=!0,An||(Zwe=1,r2e=_S(),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.pause(),Wwe(()=>m$e(r2e)))}else Zwe===2?(Zwe=0,Wwe(g$e),y2e(r2e),r2e=null,X$.forEach(V2e)):wS(`invalid state: ${Zwe}`);return M2e}}function Oye(Ie){return xye(An=>{Ie().then(An)})}var Eye=[],Gye={},cwe=Ie=>{var An=Gye[Ie];return An===void 0?awe(Ie):An},FS=()=>typeof globalThis=="object"?globalThis:Function("return this")(),RS=Ie=>{var An=Eye.length;return Eye.push(Ie),An},Lye=(Ie,An)=>{for(var q$=Array(Ie),iS=0;iS<Ie;++iS)q$[iS]=S2e(C()[An+4*iS>>>2>>>0],"parameter "+iS);return q$},Fye=(Ie,An)=>Object.defineProperty(An,"name",{value:Ie});function dwe(Ie){var An=Function;if(!(An instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof An} which is not a function`);var q$=Fye(An.name||"unknownFunctionName",function(){});return q$.prototype=An.prototype,q$=new q$,Ie=An.apply(q$,Ie),Ie instanceof Object?Ie:q$}var U2e=Ie=>Ie%4===0&&(Ie%100!==0||Ie%400===0),D$e=[0,31,60,91,121,152,182,213,244,274,305,335],L$e=[0,31,59,90,120,151,181,212,243,273,304,334];function F$e(Ie,An,q$,iS,hS,kS,pC){return Be?Tye(16,1,Ie,An,q$,iS,hS,kS,pC):-52}function z$e(Ie,An,q$,iS,hS,kS){if(Be)return Tye(17,1,Ie,An,q$,iS,hS,kS)}var r$e=[],n$e=(Ie,An)=>{r$e.length=0;for(var q$;q$=b()[Ie++>>>0];){var iS=q$!=105;iS&=q$!=112,An+=iS&&An%8?4:0,r$e.push(q$==112?C()[An>>>2>>>0]:q$==106?LS[An>>>3]:q$==105?x()[An>>>2>>>0]:N()[An>>>3>>>0]),An+=iS?8:4}return r$e},i$e={},Fwe=()=>{if(!E_e){var Ie={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:he||"./this.program"},An;for(An in i$e)i$e[An]===void 0?delete Ie[An]:Ie[An]=i$e[An];var q$=[];for(An in Ie)q$.push(`${An}=${Ie[An]}`);E_e=q$}return E_e},E_e;function X2e(Ie,An){if(Be)return Tye(18,1,Ie,An);Ie>>>=0,An>>>=0;var q$=0;return Fwe().forEach((iS,hS)=>{var kS=An+q$;for(hS=C()[Ie+4*hS>>>2>>>0]=kS,kS=0;kS<iS.length;++kS)v()[hS++>>>0]=iS.charCodeAt(kS);v()[hS>>>0]=0,q$+=iS.length+1}),0}function o$e(Ie,An){if(Be)return Tye(19,1,Ie,An);Ie>>>=0,An>>>=0;var q$=Fwe();C()[Ie>>>2>>>0]=q$.length;var iS=0;return q$.forEach(hS=>iS+=hS.length+1),C()[An>>>2>>>0]=iS,0}function F_e(Ie){return Be?Tye(20,1,Ie):52}function d2e(Ie,An,q$,iS){return Be?Tye(21,1,Ie,An,q$,iS):52}function a$e(Ie,An,q$,iS){return Be?Tye(22,1,Ie,An,q$,iS):70}var j$e=[null,[],[]];function s$e(Ie,An,q$,iS){if(Be)return Tye(23,1,Ie,An,q$,iS);An>>>=0,q$>>>=0,iS>>>=0;for(var hS=0,kS=0;kS<q$;kS++){var pC=C()[An>>>2>>>0],kye=C()[An+4>>>2>>>0];An+=8;for(var zye=0;zye<kye;zye++){var Nye=b()[pC+zye>>>0],Xye=j$e[Ie];Nye===0||Nye===10?((Ie===1?W$:U$)(Owe(Xye,0)),Xye.length=0):Xye.push(Nye)}hS+=kye}return C()[iS>>>2>>>0]=hS,0}var l$e=[31,29,31,30,31,30,31,31,30,31,30,31],u$e=[31,28,31,30,31,30,31,31,30,31,30,31];function V$e(Ie){var An=Array(_we(Ie)+1);return Hwe(Ie,An,0,An.length),An}var f2e=(Ie,An)=>{v().set(Ie,An>>>0)};function H$e(Ie,An,q$,iS){function hS(GS,nwe,gwe){for(GS=typeof GS=="number"?GS.toString():GS||"";GS.length<nwe;)GS=gwe[0]+GS;return GS}function kS(GS,nwe){return hS(GS,nwe,"0")}function pC(GS,nwe){function gwe(W2e){return 0>W2e?-1:0<W2e?1:0}var e_e;return(e_e=gwe(GS.getFullYear()-nwe.getFullYear()))===0&&(e_e=gwe(GS.getMonth()-nwe.getMonth()))===0&&(e_e=gwe(GS.getDate()-nwe.getDate())),e_e}function kye(GS){switch(GS.getDay()){case 0:return new Date(GS.getFullYear()-1,11,29);case 1:return GS;case 2:return new Date(GS.getFullYear(),0,3);case 3:return new Date(GS.getFullYear(),0,2);case 4:return new Date(GS.getFullYear(),0,1);case 5:return new Date(GS.getFullYear()-1,11,31);case 6:return new Date(GS.getFullYear()-1,11,30)}}function zye(GS){var nwe=GS.zb;for(GS=new Date(new Date(GS.Ab+1900,0,1).getTime());0<nwe;){var gwe=GS.getMonth(),e_e=(U2e(GS.getFullYear())?l$e:u$e)[gwe];if(nwe>e_e-GS.getDate())nwe-=e_e-GS.getDate()+1,GS.setDate(1),11>gwe?GS.setMonth(gwe+1):(GS.setMonth(0),GS.setFullYear(GS.getFullYear()+1));else{GS.setDate(GS.getDate()+nwe);break}}return gwe=new Date(GS.getFullYear()+1,0,4),nwe=kye(new Date(GS.getFullYear(),0,4)),gwe=kye(gwe),0>=pC(nwe,GS)?0>=pC(gwe,GS)?GS.getFullYear()+1:GS.getFullYear():GS.getFullYear()-1}Ie>>>=0,An>>>=0,q$>>>=0,iS>>>=0;var Nye=C()[iS+40>>>2>>>0];iS={kc:x()[iS>>>2>>>0],jc:x()[iS+4>>>2>>>0],Eb:x()[iS+8>>>2>>>0],Jb:x()[iS+12>>>2>>>0],Fb:x()[iS+16>>>2>>>0],Ab:x()[iS+20>>>2>>>0],vb:x()[iS+24>>>2>>>0],zb:x()[iS+28>>>2>>>0],qc:x()[iS+32>>>2>>>0],ic:x()[iS+36>>>2>>>0],lc:Nye?VS(Nye):""},q$=VS(q$),Nye={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Xye in Nye)q$=q$.replace(new RegExp(Xye,"g"),Nye[Xye]);var xwe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),bwe="January February March April May June July August September October November December".split(" ");Nye={"%a":GS=>xwe[GS.vb].substring(0,3),"%A":GS=>xwe[GS.vb],"%b":GS=>bwe[GS.Fb].substring(0,3),"%B":GS=>bwe[GS.Fb],"%C":GS=>kS((GS.Ab+1900)/100|0,2),"%d":GS=>kS(GS.Jb,2),"%e":GS=>hS(GS.Jb,2," "),"%g":GS=>zye(GS).toString().substring(2),"%G":zye,"%H":GS=>kS(GS.Eb,2),"%I":GS=>(GS=GS.Eb,GS==0?GS=12:12<GS&&(GS-=12),kS(GS,2)),"%j":GS=>{for(var nwe=0,gwe=0;gwe<=GS.Fb-1;nwe+=(U2e(GS.Ab+1900)?l$e:u$e)[gwe++]);return kS(GS.Jb+nwe,3)},"%m":GS=>kS(GS.Fb+1,2),"%M":GS=>kS(GS.jc,2),"%n":()=>`
`,"%p":GS=>0<=GS.Eb&&12>GS.Eb?"AM":"PM","%S":GS=>kS(GS.kc,2),"%t":()=>"	","%u":GS=>GS.vb||7,"%U":GS=>kS(Math.floor((GS.zb+7-GS.vb)/7),2),"%V":GS=>{var nwe=Math.floor((GS.zb+7-(GS.vb+6)%7)/7);if(2>=(GS.vb+371-GS.zb-2)%7&&nwe++,nwe)nwe==53&&(gwe=(GS.vb+371-GS.zb)%7,gwe==4||gwe==3&&U2e(GS.Ab)||(nwe=1));else{nwe=52;var gwe=(GS.vb+7-GS.zb-1)%7;(gwe==4||gwe==5&&U2e(GS.Ab%400-1))&&nwe++}return kS(nwe,2)},"%w":GS=>GS.vb,"%W":GS=>kS(Math.floor((GS.zb+7-(GS.vb+6)%7)/7),2),"%y":GS=>(GS.Ab+1900).toString().substring(2),"%Y":GS=>GS.Ab+1900,"%z":GS=>{GS=GS.ic;var nwe=0<=GS;return GS=Math.abs(GS)/60,(nwe?"+":"-")+("0000"+(GS/60*100+GS%60)).slice(-4)},"%Z":GS=>GS.lc,"%%":()=>"%"},q$=q$.replace(/%%/g,"\0\0");for(Xye in Nye)q$.includes(Xye)&&(q$=q$.replace(new RegExp(Xye,"g"),Nye[Xye](iS)));return q$=q$.replace(/\0\0/g,"%"),Xye=V$e(q$),Xye.length>An?0:(f2e(Xye,Ie),Xye.length-1)}KS.Gb();for(var p2e=Array(256),z_e=0;256>z_e;++z_e)p2e[z_e]=String.fromCharCode(z_e);rwe=p2e,Awe=W.BindingError=class extends Error{constructor(Ie){super(Ie),this.name="BindingError"}},W.InternalError=class extends Error{constructor(Ie){super(Ie),this.name="InternalError"}},Ywe.push(0,1,void 0,1,null,1,!0,1,!1,1),W.count_emval_handles=()=>Ywe.length/2-5-u2e.length;var U$e=[jye,Kye,ywe,Zye,twe,Jwe,Nwe,i2e,Kwe,Qwe,e2e,t2e,Dye,CS,Sye,Mye,F$e,z$e,X2e,o$e,F_e,d2e,a$e,s$e],J2e={ua:function(Ie,An,q$){return Oye(async()=>{await W.Zb(Ie,An,q$)})},b:function(Ie,An,q$){throw Ie>>>=0,new swe(Ie).Gb(An>>>0,q$>>>0),Cwe=Ie,Cwe},ia:function(Ie){W$e(Ie>>>0,!Ae,1,!Se,131072,!1),KS.Pb()},G:function(Ie){Ie>>>=0,Be?postMessage({cmd:"cleanupThread",thread:Ie}):KS.Nb(KS.ub[Ie])},_:hwe,A:Zye,pa:twe,W:Jwe,Y:Nwe,qa:i2e,na:Kwe,fa:Qwe,ma:e2e,K:t2e,X:Dye,U:CS,oa:Sye,V:Mye,E:function(Ie,An,q$){Ie>>>=0,q$>>>=0,An=awe(An>>>0),pwe(Ie,{name:An,fromWireType:iS=>iS,toWireType:function(iS,hS){if(typeof hS!="bigint"&&typeof hS!="number")throw hS===null?hS="null":(iS=typeof hS,hS=iS==="object"||iS==="array"||iS==="function"?hS.toString():""+hS),new TypeError(`Cannot convert "${hS}" to ${this.name}`);return typeof hS=="number"&&(hS=BigInt(hS)),hS},argPackAdvance:8,readValueFromPointer:v2e(An,q$,An.indexOf("u")==-1),Bb:null})},O:function(Ie,An,q$,iS){Ie>>>=0,An=awe(An>>>0),pwe(Ie,{name:An,fromWireType:function(hS){return!!hS},toWireType:function(hS,kS){return kS?q$:iS},argPackAdvance:8,readValueFromPointer:function(hS){return this.fromWireType(b()[hS>>>0])},Bb:null})},N:function(Ie){return pwe(Ie>>>0,i_e)},D:function(Ie,An,q$){Ie>>>=0,q$>>>=0,An=awe(An>>>0),pwe(Ie,{name:An,fromWireType:iS=>iS,toWireType:(iS,hS)=>hS,argPackAdvance:8,readValueFromPointer:o_e(An,q$),Bb:null})},t:function(Ie,An,q$,iS,hS){if(Ie>>>=0,q$>>>=0,An=awe(An>>>0),hS===-1&&(hS=4294967295),hS=kye=>kye,iS===0){var kS=32-8*q$;hS=kye=>kye<<kS>>>kS}var pC=An.includes("unsigned")?function(kye,zye){return zye>>>0}:function(kye,zye){return zye};pwe(Ie,{name:An,fromWireType:hS,toWireType:pC,argPackAdvance:8,readValueFromPointer:v2e(An,q$,iS!==0),Bb:null})},p:function(Ie,An,q$){function iS(kS){var pC=C()[kS>>>2>>>0];return kS=C()[kS+4>>>2>>>0],new hS(v().buffer,kS,pC)}Ie>>>=0;var hS=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][An];q$=awe(q$>>>0),pwe(Ie,{name:q$,fromWireType:iS,argPackAdvance:8,readValueFromPointer:iS},{Ub:!0})},F:function(Ie,An){Ie>>>=0,An=awe(An>>>0);var q$=An==="std::string";pwe(Ie,{name:An,fromWireType:function(iS){var hS=C()[iS>>>2>>>0],kS=iS+4;if(q$)for(var pC=kS,kye=0;kye<=hS;++kye){var zye=kS+kye;if(kye==hS||b()[zye>>>0]==0){if(pC=VS(pC,zye-pC),Nye===void 0)var Nye=pC;else Nye+="\0",Nye+=pC;pC=zye+1}}else{for(Nye=Array(hS),kye=0;kye<hS;++kye)Nye[kye]=String.fromCharCode(b()[kS+kye>>>0]);Nye=Nye.join("")}return y2e(iS),Nye},toWireType:function(iS,hS){hS instanceof ArrayBuffer&&(hS=new Uint8Array(hS));var kS=typeof hS=="string";if(!(kS||hS instanceof Uint8Array||hS instanceof Uint8ClampedArray||hS instanceof Int8Array))throw new Awe("Cannot pass non-string to std::string");var pC=q$&&kS?_we(hS):hS.length,kye=C2e(4+pC+1),zye=kye+4;if(C()[kye>>>2>>>0]=pC,q$&&kS)Pwe(hS,zye,pC+1);else if(kS)for(kS=0;kS<pC;++kS){var Nye=hS.charCodeAt(kS);if(255<Nye)throw y2e(zye),new Awe("String has UTF-16 code units that do not fit in 8 bits");b()[zye+kS>>>0]=Nye}else for(kS=0;kS<pC;++kS)b()[zye+kS>>>0]=hS[kS];return iS!==null&&iS.push(y2e,kye),kye},argPackAdvance:8,readValueFromPointer:x2e,Bb(iS){y2e(iS)}})},z:function(Ie,An,q$){if(Ie>>>=0,An>>>=0,q$>>>=0,q$=awe(q$),An===2)var iS=y_e,hS=a_e,kS=j2e,pC=kye=>y()[kye>>>1>>>0];else An===4&&(iS=qye,hS=Z2e,kS=Yye,pC=kye=>C()[kye>>>2>>>0]);pwe(Ie,{name:q$,fromWireType:kye=>{for(var zye=C()[kye>>>2>>>0],Nye,Xye=kye+4,xwe=0;xwe<=zye;++xwe){var bwe=kye+4+xwe*An;(xwe==zye||pC(bwe)==0)&&(Xye=iS(Xye,bwe-Xye),Nye===void 0?Nye=Xye:(Nye+="\0",Nye+=Xye),Xye=bwe+An)}return y2e(kye),Nye},toWireType:(kye,zye)=>{if(typeof zye!="string")throw new Awe(`Cannot pass non-string to C++ string type ${q$}`);var Nye=kS(zye),Xye=C2e(4+Nye+An);return C()[Xye>>>2>>>0]=Nye/An,hS(zye,Xye+4,Nye+An),kye!==null&&kye.push(y2e,Xye),Xye},argPackAdvance:8,readValueFromPointer:x2e,Bb(kye){y2e(kye)}})},P:function(Ie,An){Ie>>>=0,An=awe(An>>>0),pwe(Ie,{Vb:!0,name:An,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ta:()=>1,S:function(Ie,An){Ie>>>=0,Ie==An>>>0?setTimeout(Lwe):Be?postMessage({targetThread:Ie,cmd:"checkMailbox"}):(Ie=KS.ub[Ie])&&Ie.postMessage({cmd:"checkMailbox"})},$:function(Ie,An,q$,iS,hS){An>>>=0,q$>>>=0,iS/=2,A2e.length=iS,hS=hS>>>0>>>3;for(var kS=0;kS<iS;kS++)A2e[kS]=LS[hS+2*kS]?LS[hS+2*kS+1]:N()[hS+2*kS+1>>>0];return Ie=An?$ye[An]:U$e[Ie],KS.Sb=q$,q$=Ie(...A2e),KS.Sb=0,q$},ha:o2e,sa:function(Ie){Re&&KS.ub[Ie>>>0].ref()},w:function(Ie,An,q$){return An>>>=0,q$>>>=0,Ie=Bwe(Ie>>>0),An=S2e(An,"emval::as"),I2e(An,q$,Ie)},y:function(Ie){return Ie>>>=0,Oye(()=>(Ie=Bwe(Ie),Ie.then(Uwe)))},o:function(Ie,An,q$,iS){return q$>>>=0,iS>>>=0,Ie=Eye[Ie>>>0],An=Bwe(An>>>0),Ie(null,An,q$,iS)},k:function(Ie,An,q$,iS,hS){return q$>>>=0,iS>>>=0,hS>>>=0,Ie=Eye[Ie>>>0],An=Bwe(An>>>0),q$=cwe(q$),Ie(An,An[q$],iS,hS)},c:F2e,C:function(Ie,An){return An>>>=0,Ie=Bwe(Ie>>>0),An=Bwe(An),Ie==An},n:function(Ie){return Ie>>>=0,Ie===0?Uwe(FS()):(Ie=cwe(Ie),Uwe(FS()[Ie]))},j:function(Ie,An,q$){An=Lye(Ie,An>>>0);var iS=An.shift();Ie--;var hS=`return function (obj, func, destructorsRef, args) {
`,kS=0,pC=[];q$===0&&pC.push("obj");for(var kye=["retType"],zye=[iS],Nye=0;Nye<Ie;++Nye)pC.push("arg"+Nye),kye.push("argType"+Nye),zye.push(An[Nye]),hS+=`  var arg${Nye} = argType${Nye}.readValueFromPointer(args${kS?"+"+kS:""});
`,kS+=An[Nye].argPackAdvance;return hS+=`  var rv = ${q$===1?"new func":"func.call"}(${pC.join(", ")});
`,iS.Vb||(kye.push("emval_returnValue"),zye.push(I2e),hS+=`  return emval_returnValue(retType, destructorsRef, rv);
`),kye.push(hS+`};
`),Ie=dwe(kye)(...zye),q$=`methodCaller<(${An.map(Xye=>Xye.name).join(", ")}) => ${iS.name}>`,RS(Fye(q$,Ie))},s:function(Ie,An){return An>>>=0,Ie=Bwe(Ie>>>0),An=Bwe(An),Uwe(Ie[An])},d:function(Ie){Ie>>>=0,9<Ie&&(Ywe[Ie+1]+=1)},v:function(){return Uwe([])},m:function(Ie){Ie=Bwe(Ie>>>0);for(var An=Array(Ie.length),q$=0;q$<Ie.length;q$++)An[q$]=Ie[q$];return Uwe(An)},g:function(Ie){return Uwe(cwe(Ie>>>0))},l:function(){return Uwe({})},i:function(Ie){Ie>>>=0;for(var An=Bwe(Ie);An.length;){var q$=An.pop();An.pop()(q$)}F2e(Ie)},h:function(Ie,An,q$){An>>>=0,q$>>>=0,Ie=Bwe(Ie>>>0),An=Bwe(An),q$=Bwe(q$),Ie[An]=q$},e:function(Ie,An){return An>>>=0,Ie=S2e(Ie>>>0,"_emval_take_value"),Ie=Ie.readValueFromPointer(An),Uwe(Ie)},ca:function(Ie,An){Ie=-9007199254740992>Ie||9007199254740992<Ie?NaN:Number(Ie),An>>>=0,Ie=new Date(1e3*Ie),x()[An>>>2>>>0]=Ie.getUTCSeconds(),x()[An+4>>>2>>>0]=Ie.getUTCMinutes(),x()[An+8>>>2>>>0]=Ie.getUTCHours(),x()[An+12>>>2>>>0]=Ie.getUTCDate(),x()[An+16>>>2>>>0]=Ie.getUTCMonth(),x()[An+20>>>2>>>0]=Ie.getUTCFullYear()-1900,x()[An+24>>>2>>>0]=Ie.getUTCDay(),Ie=(Ie.getTime()-Date.UTC(Ie.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,x()[An+28>>>2>>>0]=Ie},da:function(Ie,An){Ie=-9007199254740992>Ie||9007199254740992<Ie?NaN:Number(Ie),An>>>=0,Ie=new Date(1e3*Ie),x()[An>>>2>>>0]=Ie.getSeconds(),x()[An+4>>>2>>>0]=Ie.getMinutes(),x()[An+8>>>2>>>0]=Ie.getHours(),x()[An+12>>>2>>>0]=Ie.getDate(),x()[An+16>>>2>>>0]=Ie.getMonth(),x()[An+20>>>2>>>0]=Ie.getFullYear()-1900,x()[An+24>>>2>>>0]=Ie.getDay();var q$=(U2e(Ie.getFullYear())?D$e:L$e)[Ie.getMonth()]+Ie.getDate()-1|0;x()[An+28>>>2>>>0]=q$,x()[An+36>>>2>>>0]=-(60*Ie.getTimezoneOffset()),q$=new Date(Ie.getFullYear(),6,1).getTimezoneOffset();var iS=new Date(Ie.getFullYear(),0,1).getTimezoneOffset();Ie=(q$!=iS&&Ie.getTimezoneOffset()==Math.min(iS,q$))|0,x()[An+32>>>2>>>0]=Ie},ea:function(Ie){Ie>>>=0;var An=new Date(x()[Ie+20>>>2>>>0]+1900,x()[Ie+16>>>2>>>0],x()[Ie+12>>>2>>>0],x()[Ie+8>>>2>>>0],x()[Ie+4>>>2>>>0],x()[Ie>>>2>>>0],0),q$=x()[Ie+32>>>2>>>0],iS=An.getTimezoneOffset(),hS=new Date(An.getFullYear(),6,1).getTimezoneOffset(),kS=new Date(An.getFullYear(),0,1).getTimezoneOffset(),pC=Math.min(kS,hS);return 0>q$?x()[Ie+32>>>2>>>0]=+(hS!=kS&&pC==iS):0<q$!=(pC==iS)&&(hS=Math.max(kS,hS),An.setTime(An.getTime()+6e4*((0<q$?pC:hS)-iS))),x()[Ie+24>>>2>>>0]=An.getDay(),q$=(U2e(An.getFullYear())?D$e:L$e)[An.getMonth()]+An.getDate()-1|0,x()[Ie+28>>>2>>>0]=q$,x()[Ie>>>2>>>0]=An.getSeconds(),x()[Ie+4>>>2>>>0]=An.getMinutes(),x()[Ie+8>>>2>>>0]=An.getHours(),x()[Ie+12>>>2>>>0]=An.getDate(),x()[Ie+16>>>2>>>0]=An.getMonth(),x()[Ie+20>>>2>>>0]=An.getYear(),Ie=An.getTime(),BigInt(isNaN(Ie)?-1:Ie/1e3)},aa:F$e,ba:z$e,R:function(Ie,An,q$,iS){Ie>>>=0,An>>>=0,q$>>>=0,iS>>>=0;var hS=new Date().getFullYear(),kS=new Date(hS,0,1),pC=new Date(hS,6,1);hS=kS.getTimezoneOffset();var kye=pC.getTimezoneOffset(),zye=Math.max(hS,kye);C()[Ie>>>2>>>0]=60*zye,x()[An>>>2>>>0]=+(hS!=kye),Ie=Nye=>Nye.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],kS=Ie(kS),pC=Ie(pC),kye<hS?(Pwe(kS,q$,17),Pwe(pC,iS,17)):(Pwe(kS,iS,17),Pwe(pC,q$,17))},q:()=>{wS("")},f:function(Ie,An,q$){return Ie>>>=0,An=n$e(An>>>0,q$>>>0),$ye[Ie](...An)},M:function(Ie,An,q$){return Ie>>>=0,An=n$e(An>>>0,q$>>>0),$ye[Ie](...An)},H:()=>{},L:()=>Date.now(),ra:()=>{throw HS+=1,"unwind"},T:function(){return 4294901760},u:()=>performance.timeOrigin+performance.now(),x:()=>Re?(Ua$1(),sr$1(Ma$1)).cpus().length:navigator.hardwareConcurrency,Q:function(Ie){Ie>>>=0;var An=b().length;if(Ie<=An||4294901760<Ie)return!1;for(var q$=1;4>=q$;q$*=2){var iS=An*(1+.2/q$);iS=Math.min(iS,Ie+100663296);var hS=Math;iS=Math.max(Ie,iS);e:{hS=(hS.min.call(hS,4294901760,iS+(65536-iS%65536)%65536)-hy.buffer.byteLength+65535)/65536;try{hy.grow(hS),dS();var kS=1;break e}catch{}kS=void 0}if(kS)return!0}return!1},ja:X2e,la:o$e,Z:sS,B:F_e,J:d2e,ga:a$e,I:s$e,a:hy||W.wasmMemory,ka:H$e,r:function(Ie,An,q$,iS){return H$e(Ie>>>0,An>>>0,q$>>>0,iS>>>0)}},Hye=function(){function Ie(q$,iS){return Hye=q$.exports,Hye=H2e(),Hye=Pxe(),KS.Qb.push(Hye.cb),tS.unshift(Hye.va),G$=iS,cS(),Hye}var An={a:J2e};if(Q$++,W.instantiateWasm)try{return W.instantiateWasm(An,Ie)}catch(q$){U$(`Module.instantiateWasm callback failed with error: ${q$}`),Y(q$)}return Iye(An,function(q$){Ie(q$.instance,q$.module)}).catch(Y),{}}(),j_e=Ie=>(j_e=Hye.wa)(Ie);W.__embind_initialize_bindings=()=>(W.__embind_initialize_bindings=Hye.xa)(),W._OrtInit=(Ie,An)=>(W._OrtInit=Hye.ya)(Ie,An),W._OrtGetLastError=(Ie,An)=>(W._OrtGetLastError=Hye.za)(Ie,An),W._OrtCreateSessionOptions=(Ie,An,q$,iS,hS,kS,pC,kye,zye,Nye)=>(W._OrtCreateSessionOptions=Hye.Aa)(Ie,An,q$,iS,hS,kS,pC,kye,zye,Nye),W._OrtAppendExecutionProvider=(Ie,An)=>(W._OrtAppendExecutionProvider=Hye.Ba)(Ie,An),W._OrtAddFreeDimensionOverride=(Ie,An,q$)=>(W._OrtAddFreeDimensionOverride=Hye.Ca)(Ie,An,q$),W._OrtAddSessionConfigEntry=(Ie,An,q$)=>(W._OrtAddSessionConfigEntry=Hye.Da)(Ie,An,q$),W._OrtReleaseSessionOptions=Ie=>(W._OrtReleaseSessionOptions=Hye.Ea)(Ie),W._OrtCreateSession=(Ie,An,q$)=>(W._OrtCreateSession=Hye.Fa)(Ie,An,q$),W._OrtReleaseSession=Ie=>(W._OrtReleaseSession=Hye.Ga)(Ie),W._OrtGetInputOutputCount=(Ie,An,q$)=>(W._OrtGetInputOutputCount=Hye.Ha)(Ie,An,q$),W._OrtGetInputName=(Ie,An)=>(W._OrtGetInputName=Hye.Ia)(Ie,An),W._OrtGetOutputName=(Ie,An)=>(W._OrtGetOutputName=Hye.Ja)(Ie,An),W._OrtFree=Ie=>(W._OrtFree=Hye.Ka)(Ie),W._OrtCreateTensor=(Ie,An,q$,iS,hS,kS)=>(W._OrtCreateTensor=Hye.La)(Ie,An,q$,iS,hS,kS),W._OrtGetTensorData=(Ie,An,q$,iS,hS)=>(W._OrtGetTensorData=Hye.Ma)(Ie,An,q$,iS,hS),W._OrtReleaseTensor=Ie=>(W._OrtReleaseTensor=Hye.Na)(Ie),W._OrtCreateRunOptions=(Ie,An,q$,iS)=>(W._OrtCreateRunOptions=Hye.Oa)(Ie,An,q$,iS),W._OrtAddRunConfigEntry=(Ie,An,q$)=>(W._OrtAddRunConfigEntry=Hye.Pa)(Ie,An,q$),W._OrtReleaseRunOptions=Ie=>(W._OrtReleaseRunOptions=Hye.Qa)(Ie),W._OrtCreateBinding=Ie=>(W._OrtCreateBinding=Hye.Ra)(Ie),W._OrtBindInput=(Ie,An,q$)=>(W._OrtBindInput=Hye.Sa)(Ie,An,q$),W._OrtBindOutput=(Ie,An,q$,iS)=>(W._OrtBindOutput=Hye.Ta)(Ie,An,q$,iS),W._OrtClearBoundOutputs=Ie=>(W._OrtClearBoundOutputs=Hye.Ua)(Ie),W._OrtReleaseBinding=Ie=>(W._OrtReleaseBinding=Hye.Va)(Ie),W._OrtRunWithBinding=(Ie,An,q$,iS,hS)=>(W._OrtRunWithBinding=Hye.Wa)(Ie,An,q$,iS,hS),W._OrtRun=(Ie,An,q$,iS,hS,kS,pC,kye)=>(W._OrtRun=Hye.Xa)(Ie,An,q$,iS,hS,kS,pC,kye),W._OrtEndProfiling=Ie=>(W._OrtEndProfiling=Hye.Ya)(Ie),W._JsepOutput=(Ie,An,q$)=>(W._JsepOutput=Hye.Za)(Ie,An,q$),W._JsepGetNodeName=Ie=>(W._JsepGetNodeName=Hye._a)(Ie);var kwe=W._pthread_self=()=>(kwe=W._pthread_self=Hye.$a)(),C2e=W._malloc=Ie=>(C2e=W._malloc=Hye.ab)(Ie),y2e=W._free=Ie=>(y2e=W._free=Hye.bb)(Ie);W.__emscripten_tls_init=()=>(W.__emscripten_tls_init=Hye.cb)();var W$e=W.__emscripten_thread_init=(Ie,An,q$,iS,hS,kS)=>(W$e=W.__emscripten_thread_init=Hye.eb)(Ie,An,q$,iS,hS,kS);W.__emscripten_thread_crashed=()=>(W.__emscripten_thread_crashed=Hye.fb)();var V_e=(Ie,An,q$,iS,hS)=>(V_e=Hye.gb)(Ie,An,q$,iS,hS),c$e=Ie=>(c$e=Hye.hb)(Ie),d$e=W.__emscripten_thread_exit=Ie=>(d$e=W.__emscripten_thread_exit=Hye.ib)(Ie),q$e=()=>(q$e=Hye.jb)(),f$e=(Ie,An)=>(f$e=Hye.kb)(Ie,An),s_e=Ie=>(s_e=Hye.lb)(Ie),Q2e=Ie=>(Q2e=Hye.mb)(Ie),p$e=()=>(p$e=Hye.nb)(),h$e=W.dynCall_ii=(Ie,An)=>(h$e=W.dynCall_ii=Hye.pb)(Ie,An),m$e=Ie=>(m$e=Hye.qb)(Ie),H_e=()=>(H_e=Hye.rb)(),U_e=Ie=>(U_e=Hye.sb)(Ie),g$e=()=>(g$e=Hye.tb)();W.___start_em_js=839500,W.___stop_em_js=839661;function Pxe(){var Ie=Hye;Ie=Object.assign({},Ie);var An=iS=>hS=>iS(hS)>>>0,q$=iS=>()=>iS()>>>0;return Ie.wa=An(Ie.wa),Ie.$a=q$(Ie.$a),Ie.ab=An(Ie.ab),Ie.emscripten_main_runtime_thread_id=q$(Ie.emscripten_main_runtime_thread_id),Ie.mb=An(Ie.mb),Ie.nb=q$(Ie.nb),Ie}W.wasmMemory=hy,W.stackSave=()=>p$e(),W.stackRestore=Ie=>s_e(Ie),W.stackAlloc=Ie=>Q2e(Ie),W.keepRuntimeAlive=()=>0<HS,W.UTF8ToString=VS,W.stringToUTF8=Pwe,W.lengthBytesUTF8=_we,W.ExitStatus=Rye,W.PThread=KS;var b_e;eS=function Ie(){b_e||W_e(),b_e||(eS=Ie)};function W_e(){if(!(0<Q$))if(Be)q(W),Be||Bye(tS),startWorker(W);else{if(W.preRun)for(typeof W.preRun=="function"&&(W.preRun=[W.preRun]);W.preRun.length;)wy.unshift(W.preRun.shift());Bye(wy),0<Q$||b_e||(b_e=!0,W.calledRun=!0,ky||(Be||Bye(tS),q(W),Be||Bye(yS)))}}return W_e(),re}})();typeof s=="object"&&typeof l=="object"?l.exports=c:typeof define=="function"&&define.amd&&define([],()=>c)}),Ha$1=Er$1((s,l)=>{l.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\n'}),La$1,gc,Hi$1,Gi$1,Un$1,Ga$1,yc,bc,vc,Fa$1,Fe$2,Or$1=j(()=>{La$1=za$1(),gc=Va$1(),Gi$1=!1,Un$1=!1,Ga$1=!1,yc=s=>{if(s===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+s+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+s+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},bc=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},vc=(s,l)=>s?l?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":l?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Fa$1=async s=>{if(Gi$1)return Promise.resolve();if(Un$1)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Ga$1)throw new Error("previous call to 'initializeWebAssembly()' failed.");Un$1=!0;let l=s.initTimeout,c=s.numThreads,d=s.simd,f=yc(c),g=d&&bc(),v=s.wasmPaths,b=typeof v=="string"?v:void 0,$=vc(g,f),y=typeof v=="object"?v[$]:void 0,x=!1,C=[];if(l>0&&C.push(new Promise(E=>{setTimeout(()=>{x=!0,E()},l)})),C.push(new Promise((E,N)=>{let W=f?gc:La$1,q={locateFile:(Y,re)=>{if(f&&Y.endsWith(".worker.js")&&typeof Blob<"u")return URL.createObjectURL(new Blob([Ha$1()],{type:"text/javascript"}));if(Y.endsWith(".wasm")){if(y)return y;let se=b??re;return $==="ort-wasm-simd.wasm"?se+"ort-wasm-simd.jsep.wasm":$==="ort-wasm-simd-threaded.wasm"?se+"ort-wasm-simd-threaded.jsep.wasm":se+$}return re+Y}};if(f)if(q.numThreads=c,typeof Blob>"u")q.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let Y=`var ortWasmThreaded=${W.toString()};`;q.mainScriptUrlOrBlob=new Blob([Y],{type:"text/javascript"})}W(q).then(Y=>{Un$1=!1,Gi$1=!0,Hi$1=Y,E()},Y=>{Un$1=!1,Ga$1=!0,N(Y)})})),await Promise.race(C),x)throw new Error(`WebAssembly backend initializing failed due to timeout: ${l}ms`)},Fe$2=()=>{if(Gi$1&&Hi$1)return Hi$1;throw new Error("WebAssembly is not initialized yet.")}}),qe$2,Jr$1,We$1,Wn$1=j(()=>{Or$1(),qe$2=(s,l)=>{let c=Fe$2(),d=c.lengthBytesUTF8(s)+1,f=c._malloc(d);return c.stringToUTF8(s,f,d),l.push(f),f},Jr$1=(s,l,c,d)=>{if(typeof s=="object"&&s!==null){if(c.has(s))throw new Error("Circular reference in options");c.add(s)}Object.entries(s).forEach(([f,g])=>{let v=l?l+f:f;if(typeof g=="object")Jr$1(g,v+".",c,d);else if(typeof g=="string"||typeof g=="number")d(v,g.toString());else if(typeof g=="boolean")d(v,g?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof g}`)})},We$1=s=>{let l=Fe$2(),c=l.stackSave();try{let d=l.stackAlloc(8);l._OrtGetLastError(d,d+4);let f=l.HEAP32[d/4],g=l.HEAPU32[d/4+1],v=g?l.UTF8ToString(g):"";throw new Error(`${s} ERROR_CODE: ${f}, ERROR_MESSAGE: ${v}`)}finally{l.stackRestore(c)}}}),qa$1,ja$1=j(()=>{Or$1(),Wn$1(),qa$1=s=>{let l=Fe$2(),c=0,d=[],f=s||{};try{if((s==null?void 0:s.logSeverityLevel)===void 0)f.logSeverityLevel=2;else if(typeof s.logSeverityLevel!="number"||!Number.isInteger(s.logSeverityLevel)||s.logSeverityLevel<0||s.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${s.logSeverityLevel}`);if((s==null?void 0:s.logVerbosityLevel)===void 0)f.logVerbosityLevel=0;else if(typeof s.logVerbosityLevel!="number"||!Number.isInteger(s.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${s.logVerbosityLevel}`);(s==null?void 0:s.terminate)===void 0&&(f.terminate=!1);let g=0;return(s==null?void 0:s.tag)!==void 0&&(g=qe$2(s.tag,d)),c=l._OrtCreateRunOptions(f.logSeverityLevel,f.logVerbosityLevel,!!f.terminate,g),c===0&&We$1("Can't create run options."),(s==null?void 0:s.extra)!==void 0&&Jr$1(s.extra,"",new WeakSet,(v,b)=>{let $=qe$2(v,d),y=qe$2(b,d);l._OrtAddRunConfigEntry(c,$,y)!==0&&We$1(`Can't set a run config entry: ${v} - ${b}.`)}),[c,d]}catch(g){throw c!==0&&l._OrtReleaseRunOptions(c),d.forEach(v=>l._free(v)),g}}}),wc$1,$c$1,_c,xc$1,Ka$1,Ya$1=j(()=>{Or$1(),Wn$1(),wc$1=s=>{switch(s){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${s}`)}},$c$1=s=>{switch(s){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${s}`)}},_c=s=>{s.extra||(s.extra={}),s.extra.session||(s.extra.session={});let l=s.extra.session;l.use_ort_model_bytes_directly||(l.use_ort_model_bytes_directly="1"),s.executionProviders&&s.executionProviders.some(c=>(typeof c=="string"?c:c.name)==="webgpu")&&(s.enableMemPattern=!1)},xc$1=(s,l,c)=>{for(let d of l){let f=typeof d=="string"?d:d.name;switch(f){case"webnn":if(f="WEBNN",typeof d!="string"){let v=d;if(v!=null&&v.deviceType){let b=qe$2("deviceType",c),$=qe$2(v.deviceType,c);Fe$2()._OrtAddSessionConfigEntry(s,b,$)!==0&&We$1(`Can't set a session config entry: 'deviceType' - ${v.deviceType}.`)}if(v!=null&&v.numThreads){let b=v.numThreads;(typeof b!="number"||!Number.isInteger(b)||b<0)&&(b=0);let $=qe$2("numThreads",c),y=qe$2(b.toString(),c);Fe$2()._OrtAddSessionConfigEntry(s,$,y)!==0&&We$1(`Can't set a session config entry: 'numThreads' - ${v.numThreads}.`)}if(v!=null&&v.powerPreference){let b=qe$2("powerPreference",c),$=qe$2(v.powerPreference,c);Fe$2()._OrtAddSessionConfigEntry(s,b,$)!==0&&We$1(`Can't set a session config entry: 'powerPreference' - ${v.powerPreference}.`)}}break;case"webgpu":if(f="JS",typeof d!="string"){let v=d;if(v!=null&&v.preferredLayout){if(v.preferredLayout!=="NCHW"&&v.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${v.preferredLayout}`);let b=qe$2("preferredLayout",c),$=qe$2(v.preferredLayout,c);Fe$2()._OrtAddSessionConfigEntry(s,b,$)!==0&&We$1(`Can't set a session config entry: 'preferredLayout' - ${v.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${f}`)}let g=qe$2(f,c);Fe$2()._OrtAppendExecutionProvider(s,g)!==0&&We$1(`Can't append execution provider: ${f}.`)}},Ka$1=s=>{let l=Fe$2(),c=0,d=[],f=s||{};_c(f);try{let g=wc$1(f.graphOptimizationLevel??"all"),v=$c$1(f.executionMode??"sequential"),b=typeof f.logId=="string"?qe$2(f.logId,d):0,$=f.logSeverityLevel??2;if(!Number.isInteger($)||$<0||$>4)throw new Error(`log serverity level is not valid: ${$}`);let y=f.logVerbosityLevel??0;if(!Number.isInteger(y)||y<0||y>4)throw new Error(`log verbosity level is not valid: ${y}`);let x=typeof f.optimizedModelFilePath=="string"?qe$2(f.optimizedModelFilePath,d):0;if(c=l._OrtCreateSessionOptions(g,!!f.enableCpuMemArena,!!f.enableMemPattern,v,!!f.enableProfiling,0,b,$,y,x),c===0&&We$1("Can't create session options."),f.executionProviders&&xc$1(c,f.executionProviders,d),f.enableGraphCapture!==void 0){if(typeof f.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${f.enableGraphCapture}`);let C=qe$2("enableGraphCapture",d),E=qe$2(f.enableGraphCapture.toString(),d);l._OrtAddSessionConfigEntry(c,C,E)!==0&&We$1(`Can't set a session config entry: 'enableGraphCapture' - ${f.enableGraphCapture}.`)}if(f.freeDimensionOverrides)for(let[C,E]of Object.entries(f.freeDimensionOverrides)){if(typeof C!="string")throw new Error(`free dimension override name must be a string: ${C}`);if(typeof E!="number"||!Number.isInteger(E)||E<0)throw new Error(`free dimension override value must be a non-negative integer: ${E}`);let N=qe$2(C,d);l._OrtAddFreeDimensionOverride(c,N,E)!==0&&We$1(`Can't set a free dimension override: ${C} - ${E}.`)}return f.extra!==void 0&&Jr$1(f.extra,"",new WeakSet,(C,E)=>{let N=qe$2(C,d),W=qe$2(E,d);l._OrtAddSessionConfigEntry(c,N,W)!==0&&We$1(`Can't set a session config entry: ${C} - ${E}.`)}),[c,d]}catch(g){throw c!==0&&l._OrtReleaseSessionOptions(c),d.forEach(v=>l._free(v)),g}}}),Li$1,Yt$1,cr$1,Nn$1,en$1,Vn,Fi$1,ye$1=j(()=>{Li$1=s=>{switch(s){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${s}`)}},Yt$1=s=>{switch(s){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${s}`)}},cr$1=s=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][s],Nn$1=s=>{switch(s){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${s}`)}},en$1=s=>{switch(s){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${s}`)}},Vn=s=>s==="float32"||s==="float16"||s==="int32"||s==="int64"||s==="uint32"||s==="uint8"||s==="bool",Fi$1=s=>{switch(s){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${s}`)}}}),tn$1,qi$1=j(()=>{tn$1=async s=>{if(typeof s=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(s))}catch(l){if(l.code==="ERR_FS_FILE_TOO_LARGE"){let c=(void 0)(s),d=[];for await(let f of c)d.push(f);return new Uint8Array(Buffer.concat(d))}throw l}else{let l=await fetch(s);if(!l.ok)throw new Error(`failed to load external data file: ${s}`);let c=l.headers.get("Content-Length"),d=c?parseInt(c,10):0;if(d<1073741824)return new Uint8Array(await l.arrayBuffer());{if(!l.body)throw new Error(`failed to load external data file: ${s}, no response body.`);let f=l.body.getReader(),g;try{g=new ArrayBuffer(d)}catch(b){if(b instanceof RangeError){let $=Math.ceil(d/65536);g=new WebAssembly.Memory({initial:$,maximum:$}).buffer}else throw b}let v=0;for(;;){let{done:b,value:$}=await f.read();if(b)break;let y=$.byteLength;new Uint8Array(g,v,y).set($),v+=y}return new Uint8Array(g,0,d)}}else return s instanceof Blob?new Uint8Array(await s.arrayBuffer()):s instanceof Uint8Array?s:new Uint8Array(s)}}),Sc$2,Cc$1,Xa$1,Za$1,Qa$1,Ic$1,Ne,Xt$1=j(()=>{ye$1(),Sc$2=["V","I","W","E","F"],Cc$1=(s,l)=>{console.log(`[${Sc$2[s]},${new Date().toISOString()}]${l}`)},Qa$1=(s,l)=>{Xa$1=s,Za$1=l},Ic$1=(s,l)=>{let c=en$1(s),d=en$1(Xa$1);c>=d&&Cc$1(c,typeof l=="function"?l():l)},Ne=(...s)=>{Za$1&&Ic$1(...s)}}),Ja$1,es$1=j(()=>{ye$1(),Ja$1=(s,l)=>new(Nn$1(l))(s)}),Hn$1=j(()=>{}),ts$2,ji$1,Ki$1,Tc$2,Ac$1,rs$1,Xi$1,Yi$1,is$3,os$2=j(()=>{Xt$1(),Hn$1(),ts$2=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),ji$1=[],Ki$1=s=>Math.ceil(s/16)*16,Tc$2=s=>{for(let l=0;l<ji$1.length;l++){let c=ji$1[l];if(s<=c)return c}return Math.ceil(s/16)*16},Ac$1=1,rs$1=()=>Ac$1++,Xi$1=async(s,l,c,d)=>{let f=Ki$1(c),g=s.device.createBuffer({size:f,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let v=s.getCommandEncoder();s.endComputePass(),v.copyBufferToBuffer(l,0,g,0,f),s.flush(),await g.mapAsync(GPUMapMode.READ);let b=g.getMappedRange();if(d){let $=d();return $.set(new Uint8Array(b,0,c)),$}else return new Uint8Array(b.slice(0,c))}finally{g.destroy()}},Yi$1=class{constructor(s){this.backend=s,this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[],this.externalBuffers=new Map,this.capturedPendingBuffers=new Map;for(let[l]of ts$2)ji$1.push(l),this.freeBuffers.set(l,[]),this.freeUniformBuffers.set(l,[])}upload(s,l){let c=l.buffer,d=l.byteOffset,f=l.byteLength,g=Ki$1(f),v=this.storageCache.get(s);if(!v)throw new Error("gpu data for uploading does not exist");if(v.originalSize!==f)throw new Error(`inconsistent data size. gpu data size=${v.originalSize}, data size=${f}`);let b=this.backend.device.createBuffer({mappedAtCreation:!0,size:g,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),$=b.getMappedRange();new Uint8Array($).set(new Uint8Array(c,d,f)),b.unmap();let y=this.backend.getCommandEncoder();this.backend.endComputePass(),y.copyBufferToBuffer(b,0,v.gpuData.buffer,0,g),Ne("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${s})`),this.buffersForUploadingPending.push(b)}memcpy(s,l){let c=this.storageCache.get(s);if(!c)throw new Error("source gpu data for memcpy does not exist");let d=this.storageCache.get(l);if(!d)throw new Error("destination gpu data for memcpy does not exist");if(c.originalSize!==d.originalSize)throw new Error("inconsistent source and destination gpu data size");let f=Ki$1(c.originalSize),g=this.backend.getCommandEncoder();this.backend.endComputePass(),g.copyBufferToBuffer(c.gpuData.buffer,0,d.gpuData.buffer,0,f)}registerExternalBuffer(s,l,c){let d;if(c){if(d=this.externalBuffers.get(c),d===void 0)throw new Error("previous buffer is not registered");if(s===c)return Ne("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${l}) => id=${d}, buffer is the same, skip.`),d;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.
             Please use the previous external buffer!`);this.externalBuffers.delete(c)}else d=rs$1();return this.storageCache.set(d,{gpuData:{id:d,type:0,buffer:s},originalSize:l}),this.externalBuffers.set(s,d),Ne("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${l}) => id=${d}, registered.`),d}unregisterExternalBuffer(s){let l=this.externalBuffers.get(s);l!==void 0&&(this.storageCache.delete(l),this.externalBuffers.delete(s),Ne("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${l}`))}create(s,l=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let c=Tc$2(s),d,f=(l&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,g=(l&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(f||g){let b=(f?this.freeBuffers:this.freeUniformBuffers).get(c);b?b.length>0?d=b.pop():d=this.backend.device.createBuffer({size:c,usage:l}):d=this.backend.device.createBuffer({size:c,usage:l})}else d=this.backend.device.createBuffer({size:c,usage:l});let v={id:rs$1(),type:0,buffer:d};return this.storageCache.set(v.id,{gpuData:v,originalSize:s}),Ne("verbose",()=>`[WebGPU] GpuDataManager.create(size=${s}) => id=${v.id}`),v}get(s){var l;return(l=this.storageCache.get(s))==null?void 0:l.gpuData}release(s){let l=this.storageCache.get(s);if(!l)throw new Error("releasing data does not exist");return Ne("verbose",()=>`[WebGPU] GpuDataManager.release(id=${s}), gpuDataId=${l.gpuData.id}`),this.storageCache.delete(s),this.buffersPending.push(l.gpuData.buffer),l.originalSize}async download(s,l){let c=this.storageCache.get(s);if(!c)throw new Error("data does not exist");await Xi$1(this.backend,c.gpuData.buffer,c.originalSize,l)}refreshPendingBuffers(){for(let s of this.buffersForUploadingPending)s.destroy();if(this.buffersForUploadingPending=[],this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let s of this.buffersPending){let l=ts$2.get(s.size);if((s.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let c=this.freeBuffers.get(s.size)||[];l===void 0||c.length>=l?s.destroy():c.push(s)}else if((s.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let c=this.freeUniformBuffers.get(s.size)||[];l===void 0||c.length>=l?s.destroy():c.push(s)}else s.destroy()}this.buffersPending=[]}else{let s=this.capturedPendingBuffers.get(this.backend.currentSessionId);s||(s=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,s));for(let l of this.buffersPending)s.push(l);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(s=>{s.forEach(l=>{l.destroy()})}),this.freeUniformBuffers.forEach(s=>{s.forEach(l=>{l.destroy()})}),this.storageCache.forEach(s=>{s.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(s=>{s.forEach(l=>{l.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onReleaseSession(s){let l=this.capturedPendingBuffers.get(s);l&&(l.forEach(c=>{c.destroy()}),this.capturedPendingBuffers.delete(s))}},is$3=(...s)=>new Yi$1(...s)}),Zi$1,we$1,Ze$1=j(()=>{Zi$1=class{constructor(s){Object.assign(this,s)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(s=>`${this[s]}`).join(";")),this.key}},we$1=s=>new Zi$1(s)}),Qi$1,zt$1,M$1,pr$1,Gn,Ln$1,Fn$1,xe=j(()=>{Qi$1=class{static calcMatMulShape(s,l){return s[1]!==l[0]?void 0:[s[0],l[1]]}},zt$1=class{static calcShape(s,l,c=!1){let d=s.length,f=l.length;if(d===0)return l;if(f===0)return s;let g=Math.max(s.length,l.length),v=new Array(g);if(c){if(d<2||f<2)return;let b=Qi$1.calcMatMulShape([s[d-2],s[d-1]],[l[f-2],l[f-1]]);if(b===void 0)return;[v[g-2],v[g-1]]=b}for(let b=c?3:1;b<=g;b++){let $=d-b<0?1:s[d-b],y=f-b<0?1:l[f-b];if($!==y&&$>1&&y>1)return;let x=Math.max($,y);if($&&y)v[g-b]=Math.max($,y);else{if(x>1)return;v[g-b]=0}}return v}static isValidBroadcast(s,l){let c=s.length,d=l.length;if(c>d)return!1;for(let f=1;f<=c;f++)if(s[c-f]!==1&&s[c-f]!==l[d-f])return!1;return!0}},M$1=class Ixe{static size(l){return Ixe.getSizeFromDimensionRange(l,0,l.length)}static convertShape(l,c=4){let d=l.length;if(d===0)return[];let f=new Array(d),g=d-1;for(;g>=0;){if(l[g]%c===0){f[g]=l[g]/c;break}if(c%l[g]!==0)throw new Error("cannot convert shape");f[g]=1,c/=l[g],g--}for(g--;g>=0;g--)f[g]=l[g];return f}static sizeFromDimension(l,c){if(c<0||c>l.length)throw new Error(`invalid dimension of ${c} for sizeFromDimension as Tensor has ${l.length} dimensions.`);return Ixe.getSizeFromDimensionRange(l,c,l.length)}static sizeToDimension(l,c){if(c<0||c>l.length)throw new Error(`invalid dimension of ${c} for sizeToDimension as Tensor has ${l.length} dimensions.`);return Ixe.getSizeFromDimensionRange(l,0,c)}static getSizeFromDimensionRange(l,c,d){let f=1;for(let g=c;g<d;g++){if(l[g]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");f*=l[g]}return f}static computeStrides(l){let c=l.length;if(c===0)return[];if(c===1)return[1];let d=new Array(c);d[c-1]=1,d[c-2]=l[c-1];for(let f=c-3;f>=0;--f)d[f]=d[f+1]*l[f+1];return d}static normalizeAxis(l,c){if(l<-c&&l>=c)throw new Error("unsupported axis for this operation.");return l<0?l+c:l}static normalizeAxes(l,c){return l.map(d=>this.normalizeAxis(d,c??l.length))}static sortBasedOnPerm(l,c){return c?c.map(d=>l[d]):l.slice().reverse()}static padShape(l,c){let d=l.length;return l.map((f,g)=>f+c[g]+c[g+d])}static areEqual(l,c){return l.length!==c.length?!1:l.every((d,f)=>d===c[f])}},pr$1=class R$e{static adjustPoolAttributes(l,c,d,f,g,v){if(!l&&d.length!==c.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(l)for(let b=0;b<c.length-2;b++)b>=d.length?d.push(c[b+2]):d[b]=c[b+2];for(let b=0;b<d.length;b++)if(b<f.length){if(f[b]<0)throw new Error("strides should be greater than or equal to 1")}else f.push(1);for(let b=0;b<d.length;b++)if(b<g.length){if(g[b]<0)throw new Error("dilations should be greater than or equal to 1")}else g.push(1);for(let b=0;b<d.length*2;b++)if(b<v.length){if(v[b]<0)throw new Error("pad should be greater than or equal to 1")}else v.push(0);for(let b=0;b<d.length;b++){if(d[b]<=0)throw new Error("kernel shapes need to be greater than 0");if(v[b]>=d[b]||v[b+d.length]>=d[b])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(l,c,d,f,g,v,b){if(b){if(g.length!==2*(l.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(c.length!==l.length-2)throw new Error("length of strides should be the length of data dimensions");if(f.length!==l.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let $=0;$<l.length-2;$++)R$e.adjustPadAndReturnShape(l[$+(v?1:2)],c[$],d[$],f[$],g,$,$+l.length-2,b)}}static computePoolOutputShape(l,c,d,f,g,v,b){if(c.length<=0)throw new Error("input shape must be of size greater than 0");let $=[c[0],c[1]];return R$e.computeShapeHelper(l,c,$,d,f,g,v,b),$}static computeConvOutputShape(l,c,d,f,g,v,b){if(l.length<=0||c.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let $=[l[0],c[0]];return R$e.computeShapeHelper(!1,l,$,d,f,g,v,b),$}static computeShapeHelper(l,c,d,f,g,v,b,$){if(l)for(let y=0;y<c.length-2;y++)d.push(1);else for(let y=0;y<c.length-2;y++)d.push(R$e.adjustPadAndReturnShape(c[y+2],f[y],g[y],v[y],b,y,y+c.length-2,$))}static adjustPadAndReturnShape(l,c,d,f,g,v,b,$){let y=d*(f-1)+1;if($&&$!=="NOTSET")switch($){case"VALID":return g[v]=0,g[b]=0,Math.floor((l-y)/c+1);case"SAME_LOWER":case"SAME_UPPER":if(d!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let x=((l+c-1)/c-1)*c+f-l;return g[v]=Math.floor($==="SAME_LOWER"?(x+1)/2:x/2),g[b]=x-g[v],Math.floor((l+x-f)/c+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((l+g[v]+g[b]-y)/c+1)}},Gn=class{static getShapeOfGemmResult(s,l,c,d,f){if(s.length!==2||c.length!==2)throw new Error("shape need to be of size 2");let g,v,b;l?(g=s[1],v=s[0]):(g=s[0],v=s[1]);let $=-1;if(d?(b=c[0],$=1):(b=c[1],$=0),c[$]!==v)throw new Error("dimension mismatch");if(g<=0||b<=0||v<=0)throw new Error("invalid shape specified");if(f&&!zt$1.isValidBroadcast(f,[g,b]))throw new Error("gemm: invalid bias shape for broadcast");return[g,b,v]}},Ln$1=-34028234663852886e22,Fn$1=34028234663852886e22}),mr$1,eo$1,De,rt$1,X,Ue$1,At,fr,Et$1,fe,to$1,U$1,K$1,qn,Ji$1,as$1,Pr$1,_e=j(()=>{ye$1(),xe(),mr$1=64,eo$1=(s,l)=>{if(l===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(s){case 10:return l>1?`vec${l}<f16>`:"f16";case 1:return l>1?`vec${l}<f32>`:"f32";case 6:return l>1?`vec${l}<i32>`:"i32";case 12:return l>1?`vec${l}<u32>`:"u32";case 7:if(l>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(l>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(l!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error(`Unknown data type: ${s}`)}},De=(s,l=1)=>{let c=eo$1(s,l);return typeof c=="string"?c:c[0]},rt$1=(s,l=1)=>{let c=eo$1(s,l);return typeof c=="string"?c:c[1]},X=(...s)=>{let l=[];return s.forEach(c=>{c.length!==0&&l.push({type:12,data:c},{type:12,data:M$1.computeStrides(c)})}),l},Ue$1=s=>s%4===0?4:s%2===0?2:1,At=(s="f32",l,c="0")=>!l||l===1?`${s}(${c})`:`vec${l}<${s}>(${c})`,fr=(s,l,c)=>s==="f32"?c:l===1?`f32(${c})`:`vec${l}<f32>(${c})`,Et$1=(s,l)=>l===4?`(${s}.x + ${s}.y + ${s}.z + ${s}.w)`:l===2?`(${s}.x + ${s}.y)`:l===3?`(${s}.x + ${s}.y + ${s}.z)`:s,fe=(s,l,c,d)=>s.startsWith("uniforms.")&&c>4?typeof l=="string"?d==="f16"?`${s}[(${l}) / 8][(${l}) % 8 / 4][(${l}) % 8 % 4]`:`${s}[(${l}) / 4][(${l}) % 4]`:d==="f16"?`${s}[${Math.floor(l/8)}][${Math.floor(l%8/4)}][${l%8%4}]`:`${s}[${Math.floor(l/4)}][${l%4}]`:c>1?`${s}[${l}]`:s,to$1=(s,l,c,d,f)=>{let g=typeof c=="number",v=g?c:c.length,b=[...new Array(v).keys()],$=v<2?"u32":v<=4?`vec${v}<u32>`:`array<u32, ${v}>`,y=eo$1(l,f),x=typeof y=="string"?y:y[1],C=typeof y=="string"?y:y[0],E={indices:$,value:x,storage:C,tensor:l},N=hy=>typeof hy=="string"?hy:`${hy}u`,W={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},q=g?"uniforms.":"",Y=`${q}${s}_shape`,re=`${q}${s}_strides`,se="";for(let hy=0;hy<v-1;hy++)se+=`
    let dim${hy} = current / ${fe(re,hy,v)};
    let rest${hy} = current % ${fe(re,hy,v)};
    indices[${hy}] = dim${hy};
    current = rest${hy};
    `;se+=`indices[${v-1}] = current;`;let de=v<2?"":`
  fn o2i_${s}(offset: u32) -> ${E.indices} {
    var indices: ${E.indices};
    var current = offset;
    ${se}
    return indices;
  }`,he=hy=>(W.offsetToIndices=!0,v<2?hy:`o2i_${s}(${hy})`),ge=[];if(v>=2)for(let hy=v-1;hy>=0;hy--)ge.push(`${fe(re,hy,v)} * (indices[${hy}])`);let Se=v<2?"":`
  fn i2o_${s}(indices: ${E.indices}) -> u32 {
    return ${ge.join("+")};
  }`,Ae=hy=>(W.indicesToOffset=!0,v<2?hy:`i2o_${s}(${hy})`),Re=(...hy)=>v===0?"0u":`${E.indices}(${hy.map(N).join(",")})`,Be=(hy,G$)=>v<2?`${hy}`:`${fe(hy,G$,v)}`,Ke=(hy,G$,ky)=>v<2?`${hy}=${ky};`:`${fe(hy,G$,v)}=${ky};`,Lr={},_y=(hy,G$)=>{W.broadcastedIndicesToOffset=!0;let ky=`${G$.name}broadcastedIndicesTo${s}Offset`;if(ky in Lr)return`${ky}(${hy})`;let $y=[];for(let rS=v-1;rS>=0;rS--){let lS=G$.indicesGet("outputIndices",rS+G$.rank-v);$y.push(`${Be(re,rS)} * (${lS} % ${Be(Y,rS)})`)}return Lr[ky]=`fn ${ky}(outputIndices: ${G$.type.indices}) -> u32 {
             return ${$y.length>0?$y.join("+"):"0u"};
           }`,`${ky}(${hy})`},by=(hy,G$)=>(()=>{if(E.storage===E.value)return`${s}[${hy}]=${G$};`;if(E.storage==="vec2<u32>"&&E.value==="i32")return`${s}[${hy}]=vec2<u32>(u32(${G$}), select(0u, 0xFFFFFFFFu, ${G$} < 0));`;if(E.storage==="vec2<u32>"&&E.value==="u32")return`${s}[${hy}]=vec2<u32>(u32(${G$}), 0u);`;if(E.storage==="u32"&&E.value==="vec4<bool>")return`${s}[${hy}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${G$}));`;throw new Error(`not supported combination of storage type ${E.storage} and value type ${E.value} yet`)})(),yy=hy=>(()=>{if(E.storage===E.value)return`${s}[${hy}]`;if(E.storage==="vec2<u32>"&&E.value==="i32")return`i32(${s}[${hy}].x)`;if(E.storage==="vec2<u32>"&&E.value==="u32")return`u32(${s}[${hy}].x)`;if(E.storage==="u32"&&E.value==="vec4<bool>")return`vec4<bool>(bool(${s}[${hy}] & 0xFFu), bool(${s}[${hy}] & 0xFF00u), bool(${s}[${hy}] & 0xFF0000u), bool(${s}[${hy}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${E.storage} and value type ${E.value} yet`)})(),my=v<2?"":`
  fn get_${s}ByIndices(indices: ${E.indices}) -> ${x} {
    return ${yy(`i2o_${s}(indices)`)};
  }`,$t=v<2?"":(()=>{let hy=b.map(ky=>`d${ky}: u32`).join(", "),G$=b.map(ky=>`d${ky}`).join(", ");return`
  fn get_${s}(${hy}) -> ${x} {
    return get_${s}ByIndices(${Re(G$)});
  }`})(),K$=(...hy)=>{if(hy.length!==v)throw new Error(`indices length must be ${v}`);let G$=hy.map(N).join(",");return v===0?yy("0u"):v===1?yy(G$[0]):(W.get=!0,W.getByIndices=!0,W.indicesToOffset=!0,`get_${s}(${G$})`)},Y$=hy=>v<2?yy(hy):(W.getByIndices=!0,W.indicesToOffset=!0,`get_${s}ByIndices(${hy})`),W$=v<2?"":`
  fn set_${s}ByIndices(indices: ${E.indices}, value: ${x}) {
    ${by(`i2o_${s}(indices)`,"value")}
  }`,U$=v<2?"":(()=>{let hy=b.map(ky=>`d${ky}: u32`).join(", "),G$=b.map(ky=>`d${ky}`).join(", ");return`
  fn set_${s}(${hy}, value: ${x}) {
    set_${s}ByIndices(${Re(G$)}, value);
  }`})();return{impl:()=>{let hy=[],G$=!1;return W.offsetToIndices&&(hy.push(de),G$=!0),W.indicesToOffset&&(hy.push(Se),G$=!0),W.broadcastedIndicesToOffset&&(Object.values(Lr).forEach(ky=>hy.push(ky)),G$=!0),W.set&&(hy.push(U$),G$=!0),W.setByIndices&&(hy.push(W$),G$=!0),W.get&&(hy.push($t),G$=!0),W.getByIndices&&(hy.push(my),G$=!0),!g&&G$&&hy.unshift(`const ${Y} = ${E.indices}(${c.join(",")});`,`const ${re} = ${E.indices}(${M$1.computeStrides(c).join(",")});`),hy.join(`
`)},type:E,offsetToIndices:he,indicesToOffset:Ae,broadcastedIndicesToOffset:_y,indices:Re,indicesGet:Be,indicesSet:Ke,set:(...hy)=>{if(hy.length!==v+1)throw new Error(`indices length must be ${v}`);let G$=hy[v];if(typeof G$!="string")throw new Error("value must be string");let ky=hy.slice(0,v).map(N).join(",");return v===0?by("0u",G$):v===1?by(ky[0],G$):(W.set=!0,W.setByIndices=!0,W.indicesToOffset=!0,`set_${s}(${ky}, ${G$})`)},setByOffset:by,setByIndices:(hy,G$)=>v<2?by(hy,G$):(W.setByIndices=!0,W.indicesToOffset=!0,`set_${s}ByIndices(${hy}, ${G$});`),get:K$,getByOffset:yy,getByIndices:Y$,usage:d,name:s,strides:re,shape:Y,rank:v}},U$1=(s,l,c,d=1)=>to$1(s,l,c,"input",d),K$1=(s,l,c,d=1)=>to$1(s,l,c,"output",d),qn=(s,l,c,d=1)=>to$1(s,l,c,"internal",d),Ji$1=class{constructor(s,l){this.normalizedDispatchGroup=s,this.limits=l,this.internalVariables=[],this.variables=[],this.uniforms=[],this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(s){return`if (global_idx >= ${typeof s=="number"?`${s}u`:s}) { return; }`}mainStart(s=mr$1){let l=typeof s=="number"?s:s[0],c=typeof s=="number"?1:s[1],d=typeof s=="number"?1:s[2];if(l>this.limits.maxComputeWorkgroupSizeX||c>this.limits.maxComputeWorkgroupSizeY||d>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${l}, ${c}, ${d}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(l*c*d>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${l}, ${c}, ${d}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let f=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,g=f?`@builtin(global_invocation_id) global_id : vec3<u32>,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,
                                             @builtin(local_invocation_id) local_id : vec3<u32>,
    @builtin(local_invocation_index) local_idx : u32,
    @builtin(workgroup_id) workgroup_id : vec3<u32>,
    @builtin(num_workgroups) num_workgroups : vec3<u32>`,v=f?"let global_idx = global_id.x; let local_idx = local_id.x;":`let global_idx = (workgroup_id.z * num_workgroups[0] * num_workgroups[1] +
          workgroup_id.y * num_workgroups[0] + workgroup_id.x) * ${l*c*d}u + local_idx;`;return`@compute @workgroup_size(${l}, ${c}, ${d})
  fn main(${g}) {
    ${v}
  `}appendVariableUniforms(s){s.rank!==0&&(s.shape.startsWith("uniforms.")&&this.uniforms.push({name:s.shape.replace("uniforms.",""),type:"u32",length:s.rank}),s.strides.startsWith("uniforms.")&&this.uniforms.push({name:s.strides.replace("uniforms.",""),type:"u32",length:s.rank}))}declareVariable(s,l){if(s.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(s),this.appendVariableUniforms(s);let c=s.usage==="input"?"read":"read_write",d=s.type.storage;return`@group(0) @binding(${l}) var<storage, ${c}> ${s.name}: array<${d}>;`}declareVariables(...s){return s.map(l=>this.declareVariable(l,this.variableIndex++)).join(`
`)}registerInternalVariable(s){if(s.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(s),this.appendVariableUniforms(s)}registerInternalVariables(...s){return s.forEach(l=>this.registerInternalVariable(l)),this}registerUniform(s,l,c=1){return this.uniforms.push({name:s,type:l,length:c}),this}registerUniforms(s){return this.uniforms=this.uniforms.concat(s),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let s=[];for(let{name:l,type:c,length:d}of this.uniforms)if(d&&d>4)c==="f16"?s.push(`@align(16) ${l}:array<mat2x4<${c}>, ${Math.ceil(d/8)}>`):s.push(`${l}:array<vec4<${c}>, ${Math.ceil(d/4)}>`);else{let f=d==null||d===1?c:`vec${d}<${c}>`;s.push(`${l}:${f}`)}return`
      struct Uniforms { ${s.join(", ")} };
      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(s=>s.impl()).join(`
`)+this.internalVariables.map(s=>s.impl()).join(`
`)}get variablesInfo(){if(this.uniforms.length===0)return;let s=l=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(l)];return this.uniforms.map(l=>[s(l.type),l.length??1])}},as$1=(s,l)=>new Ji$1(s,l),Pr$1=(s,l)=>{let c=s.length,d=[];for(let f=0;f<c;f++){let g=c-1-f,v=s[g]||1;(l[l.length-1-f]||1)>1&&v===1&&d.unshift(g)}return d}}),Ec$1,ss$1,kc$1,Oc$1,xt$1,us$1,ls$1,Rr=j(()=>{ye$1(),xe(),Ze$1(),_e(),Ec$1=s=>{if(!s||s.length!==1)throw new Error("Transpose requires 1 input.")},ss$1=(s,l)=>l&&l.length!==s?[...new Array(s).keys()].reverse():l,kc$1=(s,l)=>M$1.sortBasedOnPerm(s,ss$1(s.length,l)),Oc$1=(s,l,c,d)=>{let f=[];f.push(`fn perm(i: ${d.type.indices}) -> ${c.type.indices} {
    var a: ${c.type.indices};`);for(let g=0;g<l;++g)f.push(c.indicesSet("a",s[g],`i[${g}]`));return f.push("return a;}"),f.join(`
`)},xt$1=(s,l)=>{let c=s.dataType,d=s.dims.length,f=ss$1(d,l),g=kc$1(s.dims,f),v=K$1("output",c,g.length),b=U$1("a",c,d),$=y=>`
  ${y.registerUniform("output_size","u32").declareVariables(b,v)}

  ${Oc$1(f,d,b,v)}

  ${y.mainStart()}
    ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${v.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${v.setByOffset("global_idx",b.getByIndices("aIndices"))}
  }`;return{name:"Transpose",shaderCache:{hint:`${l}`,inputDependencies:["rank"]},getRunData:y=>{let x=M$1.size(g);return{outputs:[{dims:g,dataType:y[0].dataType}],dispatchGroup:{x:Math.ceil(x/64)},programUniforms:[{type:12,data:x},...X(y[0].dims,g)]}},getShaderSource:$}},us$1=(s,l)=>{Ec$1(s.inputs),s.compute(xt$1(s.inputs[0],l.perm))},ls$1=s=>we$1({perm:s.perm})}),Pc$1,Rc$1,zc$1,Bc$1,Dc$2,Mc$1,Uc$1,Wc$1,Nc$1,Vc$1,Bt$1,ds$1,cs$1,ps$1,ms$1,fs$1,hs$1,gs$1,ys$1,bs$1,vs$1,ws$1=j(()=>{ye$1(),xe(),_e(),jn$1(),Rr(),Pc$1={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},Rc$1={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},zc$1={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},Bc$1={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Dc$2=(s,l)=>{let c=[];for(let d=l-s;d<l;++d)c.push(d);return c},Mc$1=(s,l)=>{let c=[],d=s.length;for(let g=0;g<d;g++)l.indexOf(g)===-1&&c.push(s[g]);let f=l.map(g=>s[g]);return[c,f]},Uc$1=(s,l)=>{let c=s.length+l.length,d=[],f=0;for(let g=0;g<c;g++)l.indexOf(g)===-1?d.push(s[f++]):d.push(1);return d},Wc$1=(s,l)=>{for(let c=0;c<s.length;++c)if(s[s.length-c-1]!==l-1-c)return!1;return!0},Nc$1=(s,l)=>{let c=[];if(!Wc$1(s,l)){for(let d=0;d<l;++d)s.indexOf(d)===-1&&c.push(d);s.forEach(d=>c.push(d))}return c},Vc$1=(s,l,c,d,f,g,v)=>{let b=c[0].dims,$=M$1.size(g),y=M$1.size(v),x=U$1("_A",c[0].dataType,b),C=K$1("output",f,g),E=32,N=`
          var<workgroup> aBestValues : array<f32, ${E}>;
       `;return{name:s,shaderCache:l,getShaderSource:W=>`
        ${W.registerUniform("reduceSize","u32").declareVariables(x,C)}
        ${N}
        fn DIV_CEIL(a : u32, b : u32) -> u32 {
          return ((a - 1u) / b + 1u);
         }
         ${W.mainStart(E)}

          let outputIndex = global_idx / ${E};
          let offset = outputIndex * uniforms.reduceSize;

          var bestValue = f32(${zc$1[d]});
          let Length = uniforms.reduceSize;
          for (var k = local_idx; k < Length; k = k + ${E}) {
           let candidate = f32(${x.getByOffset("offset + k")});
           bestValue = ${Pc$1[d]};
          }
          aBestValues[local_idx] = bestValue;
          workgroupBarrier();

         var reduceSize = min(Length, ${E}u);
         for (var currentSize = reduceSize / 2u; reduceSize > 1u;
             currentSize = reduceSize / 2u) {
           let interval = DIV_CEIL(reduceSize, 2u);
           if (local_idx < currentSize) {
            let candidate = aBestValues[local_idx + interval];
            bestValue = ${Rc$1[d]};
            aBestValues[local_idx] = bestValue;
           }
           reduceSize = interval;
           workgroupBarrier();
         }

         if (local_idx == 0u) {
          ${C.setByOffset("outputIndex",`${d==="mean"?`${C.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${C.type.storage}(${Bc$1[d]})`}`)};
         }
        }`,getRunData:()=>({outputs:[{dims:g,dataType:f}],dispatchGroup:{x:$},programUniforms:[{type:12,data:y}]})}},Bt$1=(s,l,c,d)=>{let f=s.inputs.length===1?c:ro$1(s.inputs,c),g=f.axes;g.length===0&&!f.noopWithEmptyAxes&&(g=s.inputs[0].dims.map((N,W)=>W));let v=M$1.normalizeAxes(g,s.inputs[0].dims.length),b=v,$=s.inputs[0],y=Nc$1(b,s.inputs[0].dims.length);y.length>0&&($=s.compute(xt$1(s.inputs[0],y),{inputs:[0],outputs:[-1]})[0],b=Dc$2(b.length,$.dims.length));let[x,C]=Mc$1($.dims,b),E=x;f.keepDims&&(E=Uc$1(x,v)),s.compute(Vc$1(l,{hint:f.cacheKey,inputDependencies:["type"]},[$],d,s.inputs[0].dataType,E,C),{inputs:[$]})},ds$1=(s,l)=>{Bt$1(s,"ReduceMeanShared",l,"mean")},cs$1=(s,l)=>{Bt$1(s,"ReduceL1Shared",l,"l1")},ps$1=(s,l)=>{Bt$1(s,"ReduceL2Shared",l,"l2")},ms$1=(s,l)=>{Bt$1(s,"ReduceLogSumExpShared",l,"logSumExp")},fs$1=(s,l)=>{Bt$1(s,"ReduceMaxShared",l,"max")},hs$1=(s,l)=>{Bt$1(s,"ReduceMinShared",l,"min")},gs$1=(s,l)=>{Bt$1(s,"ReduceProdShared",l,"prod")},ys$1=(s,l)=>{Bt$1(s,"ReduceSumShared",l,"sum")},bs$1=(s,l)=>{Bt$1(s,"ReduceSumSquareShared",l,"sumSquare")},vs$1=(s,l)=>{Bt$1(s,"ReduceLogSumShared",l,"logSum")}}),Dt$1,Hc$1,Kn,ro$1,Mt$1,Gc$1,Lc$1,Fc$1,qc$1,jc$1,Kc$1,Yc$1,Xc$1,Zc$1,Qc$1,Ut$1,$s$1,_s$1,xs$1,Ss$1,Cs$1,Is,Ts,As,Es$1,ks$1,jn$1=j(()=>{ye$1(),xe(),Ze$1(),_e(),ws$1(),Dt$1=s=>{if(!s||s.length===0||s.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(s.length===2&&s[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Hc$1=s=>["","",`var value = ${s.getByIndices("input_indices")};`,""],Kn=(s,l,c,d,f,g,v=!1,b=!1)=>{let $=[],y=c[0].dims,x=y.length,C=M$1.normalizeAxes(f,x),E=!b&&C.length===0;y.forEach((q,Y)=>{E||C.indexOf(Y)>=0?v&&$.push(1):$.push(q)});let N=$.length,W=M$1.size($);return{name:s,shaderCache:l,getShaderSource:q=>{let Y=[],re=U$1("_A",c[0].dataType,x),se=K$1("output",g,N),de=d(re,se,C),he=de[2];for(let ge=0,Se=0;ge<x;ge++)E||C.indexOf(ge)>=0?(v&&Se++,he=`for(var j${ge}: u32 = 0; j${ge} < ${y[ge]}; j${ge}++) {
                  ${de[2].includes("last_index")?`let last_index = j${ge};`:""}
                  ${re.indicesSet("input_indices",ge,`j${ge}`)}
                  ${he}
                }`):(Y.push(`${re.indicesSet("input_indices",ge,se.indicesGet("output_indices",Se))};`),Se++);return`

        ${q.registerUniform("output_size","u32").declareVariables(re,se)}

        ${q.mainStart()}
          ${q.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var input_indices: ${re.type.indices};
          let output_indices = ${se.offsetToIndices("global_idx")};

          ${Y.join(`
`)}
          ${de[0]}       // init ops for reduce max/min
          ${de[1]}
          ${he}
          ${de[3]}
          ${de.length===4?se.setByOffset("global_idx","value"):de.slice(4).join(`
`)}
        }`},getRunData:()=>({outputs:[{dims:$,dataType:g}],dispatchGroup:{x:Math.ceil(W/64)},programUniforms:[{type:12,data:W},...X(y,$)]})}},ro$1=(s,l)=>{let c=[];return s[1].dims[0]>0&&s[1].getBigInt64Array().forEach(d=>c.push(Number(d))),we$1({axes:c,keepDims:l.keepDims,noopWithEmptyAxes:l.noopWithEmptyAxes})},Mt$1=(s,l,c,d)=>{let f=s.inputs,g=f.length===1?c:ro$1(f,c);s.compute(Kn(l,{hint:g.cacheKey,inputDependencies:["rank"]},[f[0]],g.noopWithEmptyAxes&&g.axes.length===0?Hc$1:d,g.axes,f[0].dataType,g.keepDims,g.noopWithEmptyAxes),{inputs:[0]})},Gc$1=(s,l)=>{Dt$1(s.inputs),Mt$1(s,"ReduceLogSum",l,(c,d)=>[`var value = ${d.type.storage}(0);`,"",`value += ${c.getByIndices("input_indices")};`,"value = log(value);"])},Lc$1=(s,l)=>{Dt$1(s.inputs),Mt$1(s,"ReduceL1",l,(c,d)=>[`var value = ${d.type.storage}(0);`,"",`value += abs(${c.getByIndices("input_indices")});`,""])},Fc$1=(s,l)=>{Dt$1(s.inputs),Mt$1(s,"ReduceL2",l,(c,d)=>[`var t = ${d.type.value}(0); var value = ${d.type.value}(0);`,"",`t = ${c.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},qc$1=(s,l)=>{Dt$1(s.inputs),Mt$1(s,"ReduceLogSumExp",l,(c,d)=>[`var value = ${d.type.storage}(0);`,"",`value += exp(${c.getByIndices("input_indices")});`,"value = log(value);"])},jc$1=(s,l)=>{Dt$1(s.inputs),Mt$1(s,"ReduceMax",l,(c,d,f)=>{let g=[];for(let v=0;v<c.rank;v++)(f.indexOf(v)>=0||f.length===0)&&g.push(c.indicesSet("input_indices",v,0));return[`${g.join(`
`)}`,`var value = ${c.getByIndices("input_indices")};`,`value = max(value, ${c.getByIndices("input_indices")});`,""]})},Kc$1=(s,l)=>{Dt$1(s.inputs),Mt$1(s,"ReduceMean",l,(c,d,f)=>{let g=1;for(let v=0;v<c.rank;v++)(f.indexOf(v)>=0||f.length===0)&&(g*=s.inputs[0].dims[v]);return["var sum = f32(0);","",`sum += f32(${c.getByIndices("input_indices")});`,`let value = ${d.type.value}(sum / ${g});`]})},Yc$1=(s,l)=>{Dt$1(s.inputs),Mt$1(s,"ReduceMin",l,(c,d,f)=>{let g=[];for(let v=0;v<c.rank;v++)(f.indexOf(v)>=0||f.length===0)&&g.push(`input_indices[${v}] = 0;`);return[`${g.join(`
`)}`,`var value = ${c.getByIndices("input_indices")};`,`value = min(value, ${c.getByIndices("input_indices")});`,""]})},Xc$1=(s,l)=>{Dt$1(s.inputs),Mt$1(s,"ReduceProd",l,(c,d)=>[`var value = ${d.type.storage}(1);`,"",`value *= ${c.getByIndices("input_indices")};`,""])},Zc$1=(s,l)=>{Dt$1(s.inputs),Mt$1(s,"ReduceSum",l,(c,d)=>[`var value = ${d.type.storage}(0);`,"",`value += ${c.getByIndices("input_indices")};`,""])},Qc$1=(s,l)=>{Dt$1(s.inputs),Mt$1(s,"ReduceSumSquare",l,(c,d)=>[`var t = ${d.type.value}(0); var value = ${d.type.value}(0);`,"",`t = ${c.getByIndices("input_indices")}; value += t * t;`,""])},Ut$1=(s,l,c)=>{if(l.length===0)return c;let d=1,f=1;for(let g=0;g<l.length;g++)l.indexOf(g)===-1?d*=s[g]:f*=s[g];return f<32&&d>1024},$s$1=(s,l)=>{Ut$1(s.inputs[0].dims,l.axes,l.noopWithEmptyAxes)?Kc$1(s,l):ds$1(s,l)},_s$1=(s,l)=>{Ut$1(s.inputs[0].dims,l.axes,l.noopWithEmptyAxes)?Lc$1(s,l):cs$1(s,l)},xs$1=(s,l)=>{Ut$1(s.inputs[0].dims,l.axes,l.noopWithEmptyAxes)?Fc$1(s,l):ps$1(s,l)},Ss$1=(s,l)=>{Ut$1(s.inputs[0].dims,l.axes,l.noopWithEmptyAxes)?qc$1(s,l):ms$1(s,l)},Cs$1=(s,l)=>{Ut$1(s.inputs[0].dims,l.axes,l.noopWithEmptyAxes)?jc$1(s,l):fs$1(s,l)},Is=(s,l)=>{Ut$1(s.inputs[0].dims,l.axes,l.noopWithEmptyAxes)?Yc$1(s,l):hs$1(s,l)},Ts=(s,l)=>{Ut$1(s.inputs[0].dims,l.axes,l.noopWithEmptyAxes)?Xc$1(s,l):gs$1(s,l)},As=(s,l)=>{Ut$1(s.inputs[0].dims,l.axes,l.noopWithEmptyAxes)?Zc$1(s,l):ys$1(s,l)},Es$1=(s,l)=>{Ut$1(s.inputs[0].dims,l.axes,l.noopWithEmptyAxes)?Qc$1(s,l):bs$1(s,l)},ks$1=(s,l)=>{Ut$1(s.inputs[0].dims,l.axes,l.noopWithEmptyAxes)?Gc$1(s,l):vs$1(s,l)}}),Os$1,Ps,Rs$1,no$1,zs$1=j(()=>{ye$1(),Ze$1(),jn$1(),Os$1=s=>{if(!s||s.length===0||s.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(s[0].dataType!==1)throw new Error("Invalid input type.")},Ps=(s,l)=>{Os$1(s.inputs);let c=(d,f,g)=>{let v=[];for(let b=0;b<d.rank;b++)(g.indexOf(b)>=0||g.length===0)&&v.push(`input_indices[${b}] = 0;`);return[`${v.join(`
`)}`,`var value = ${d.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${d.getByIndices("input_indices")} ${l.selectLastIndex>0?"<=":"<"} value) {
         value = ${d.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",f.setByOffset("global_idx","best_index")]};s.compute(Kn("ArgMin",{hint:l.cacheKey,inputDependencies:["rank"]},[s.inputs[0]],c,[l.axis],7,l.keepDims),{inputs:[0]})},Rs$1=(s,l)=>{Os$1(s.inputs);let c=(d,f,g)=>{let v=[];for(let b=0;b<d.rank;b++)(g.indexOf(b)>=0||g.length===0)&&v.push(`input_indices[${b}] = 0;`);return[`${v.join(`
`)}`,`var value = ${d.getByIndices("input_indices")};
var best_index : i32 = 0;`,`if (${d.getByIndices("input_indices")} ${l.selectLastIndex>0?">=":">"} value) {
         value = ${d.getByIndices("input_indices")};
         best_index = i32(last_index);
       }`,"",f.setByOffset("global_idx","best_index")]};s.compute(Kn("argMax",{hint:l.cacheKey,inputDependencies:["rank"]},[s.inputs[0]],c,[l.axis],7,l.keepDims),{inputs:[0]})},no$1=s=>we$1(s)}),Jc$1,ep$1,tp$1,Yn$1,Bs$1,Ds$1,io$1=j(()=>{ye$1(),xe(),Ze$1(),_e(),Jc$1=(s,l)=>{if(!s||s.length<1)throw new Error("too few inputs");let c=0,d=s[c],f=d.dataType,g=d.dims.length;s.forEach((v,b)=>{if(b!==c){if(v.dataType!==f)throw new Error("input tensors should be one type");if(v.dims.length!==g)throw new Error("input tensors should have the same shape");v.dims.forEach(($,y)=>{if(y!==l&&$!==d.dims[y])throw new Error("non concat dimensions must match")})}})},ep$1=(s,l)=>`
  fn calculateInputIndex(index: u32) -> u32 {
    let sizeInConcatAxis = array<u32, ${s}u>(${l});
    for (var i: u32 = 0u; i < ${s}; i += 1u ) {
      if (index < sizeInConcatAxis[i]) {
        return i;
      }
    }
    return ${s}u;
  }`,tp$1=(s,l)=>{let c=s.length,d=[];for(let f=0;f<c;++f){let g=l.setByOffset("global_idx",s[f].getByIndices("indices"));c===1?d.push(g):f===0?d.push(`if (inputIndex == ${f}u) { ${g} }`):f===c-1?d.push(`else { ${g} }`):d.push(`else if (inputIndex == ${f}) { ${g} }`)}return d.join(`
`)},Yn$1=(s,l,c,d)=>{let f=M$1.size(c),g=new Array(s.length),v=new Array(s.length),b=0,$=[],y=[],x=[{type:12,data:f}];for(let q=0;q<s.length;++q)b+=s[q].dims[l],g[q]=b,y.push(s[q].dims.length),v[q]=U$1(`input${q}`,d,y[q]),$.push("rank"),x.push({type:12,data:g[q]});for(let q=0;q<s.length;++q)x.push(...X(s[q].dims));x.push(...X(c));let C=K$1("output",d,c.length),E=C.indicesGet("indices",l),N=Array.from(Array(g.length).keys()).map(q=>`uniforms.sizeInConcatAxis${q}`).join(","),W=q=>`

  ${(()=>{q.registerUniform("outputSize","u32");for(let Y=0;Y<s.length;Y++)q.registerUniform(`sizeInConcatAxis${Y}`,"u32");return q.declareVariables(...v,C)})()}

  ${ep$1(g.length,N)}

  ${q.mainStart()}
    ${q.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

    var indices = ${C.offsetToIndices("global_idx")};

    let inputIndex = calculateInputIndex(${E});
    if (inputIndex != 0u) {
      let sizeInConcatAxis = array<u32, ${g.length}u>(${N});
      ${E} -= sizeInConcatAxis[inputIndex - 1u];
    }

    ${tp$1(v,C)}
  }`;return{name:"Concat",shaderCache:{hint:`${l}`,inputDependencies:$},getRunData:()=>({outputs:[{dims:c,dataType:d}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:x}),getShaderSource:W}},Bs$1=(s,l)=>{let c=s.inputs,d=c[0].dims,f=M$1.normalizeAxis(l.axis,d.length);Jc$1(c,f);let g=d.slice();g[f]=c.reduce((b,$)=>b+($.dims.length>f?$.dims[f]:0),0);let v=c.filter(b=>M$1.size(b.dims)>0);s.compute(Yn$1(v,f,g,c[0].dataType),{inputs:v})},Ds$1=s=>we$1({axis:s.axis})}),rp$1,np$1,ip$1,op$2,Xn$1,ap$1,Ms,oo$1=j(()=>{ye$1(),Hn$1(),_e(),io$1(),rp$1=(s,l)=>{let c=s[0],d=s[1],f=s[2],g=s[3],v=s[4],b=s[5];if(v&&b)throw new Error("Attention cannot have both past and relative_position_bias");if(c.dims.length!==3)throw new Error('Input "input" must have 3 dimensions');let $=c.dims[0],y=c.dims[1],x=c.dims[2];if(f.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimensions');if(d.dims.length!==2)throw new Error('Input "weights" is expected to have 2 dimensions');if(d.dims[0]!==x)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(f.dims[0]!==d.dims[1])throw new Error('Input "bias" dimension 0 should have same length as dimension 1 of input "weights"');let C=f.dims[0]/3,E=C,N=E;if(l.qkvHiddenSizes.length>0){if(l.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let de of l.qkvHiddenSizes)if(de%l.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");C=l.qkvHiddenSizes[0],E=l.qkvHiddenSizes[1],N=l.qkvHiddenSizes[2]}let W=y;if(C!==E)throw new Error("qkv_hidden_sizes first element should be same as the second");if(f.dims[0]!==C+E+N)throw new Error('Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes');let q=0;if(v){if(E!==N)throw new Error('Input "past" expect k_hidden_size == v_hidden_size');if(v.dims.length!==5)throw new Error('Input "past" must have 5 dimensions');if(v.dims[0]!==2)throw new Error('Input "past" first dimension must be 2');if(v.dims[1]!==$)throw new Error('Input "past" second dimension must be batch_size');if(v.dims[2]!==l.numHeads)throw new Error('Input "past" third dimension must be num_heads');if(v.dims[4]!==E/l.numHeads)throw new Error('Input "past" fifth dimension must be k_hidden_size / num_heads');l.pastPresentShareBuffer||(q=v.dims[3])}let Y=W+q,re=-1,se=0;if(g)throw new Error("Mask not supported");if(v)throw new Error("past is not supported");return{batchSize:$,sequenceLength:y,pastSequenceLength:q,kvSequenceLength:W,totalSequenceLength:Y,maxSequenceLength:re,inputHiddenSize:x,hiddenSize:C,vHiddenSize:N,headSize:Math.floor(C/l.numHeads),vHeadSize:Math.floor(N/l.numHeads),numHeads:l.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:l.maskFilterValue,maskType:se,scale:l.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},np$1=(s,l,c,d)=>{let f=Ue$1(d),g=64,v=d/f;v<g?g=1:v/8<64&&(g=Math.ceil(v/8));let b=Math.ceil(d/f/g),$=[{type:l.dataType,data:1/d},{type:12,data:v},{type:12,data:b}],y=De(l.dataType,f),x=rt$1(1,f),C=E=>{let N=K$1("x",l.dataType,l.dims,f),W=[{name:"d_inv",type:rt$1(l.dataType)},{name:"d_comp",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`
  var<workgroup> thread_max: array<f32, ${g}>;
  var<workgroup> thread_sum: array<f32, ${g}>;
  ${E.registerUniforms(W).declareVariables(N)}
  ${E.mainStart([g,1,1])}
    let local_offset = local_idx * uniforms.elements_per_thread;
    let offset = workgroup_id.x * uniforms.d_comp + local_offset;

    var thread_max_vector = ${x}(-3.402823e+38f);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
      thread_max_vector = max(${x}(x[offset + i]), thread_max_vector);
    }
    thread_max[local_idx] = ${(()=>{switch(f){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${f}`)}})()};
    workgroupBarrier();

    var max_value =  f32(-3.402823e+38f);
    for (var i = 0u; i < ${g}; i++) {
      max_value = max(thread_max[i], max_value);
    }

    var sum_vector = ${x}(0);
    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
      sum_vector += exp(${x}(x[offset + i]) - max_value);
    }
    thread_sum[local_idx] = ${(()=>{switch(f){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${f}`)}})()};
    workgroupBarrier();

    var sum: f32 = 0;
    for (var i = 0u; i < ${g}; i++) {
      sum += thread_sum[i];
    }

    if (sum == 0) {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
        x[offset + i] = ${N.type.value}(uniforms.d_inv);
      }
    } else {
      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {
        var f32input = ${x}(x[offset + i]);
        x[offset + i] = ${N.type.value}(exp(f32input - max_value) / sum);
      }
    }
  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${g};${y};${f}`},getShaderSource:C,getRunData:()=>({outputs:[],dispatchGroup:{x:c},programUniforms:$})}},ip$1=(s,l,c,d,f,g,v)=>{let b=v+f.kvSequenceLength,$=[f.batchSize,f.numHeads,f.sequenceLength,b],y=g.scale===0?1/Math.sqrt(f.headSize):g.scale,x=Ue$1(f.headSize),C=f.headSize/x,E=12,N={x:Math.ceil(b/E),y:Math.ceil(f.sequenceLength/E),z:f.batchSize*f.numHeads},W=[{type:12,data:f.sequenceLength},{type:12,data:C},{type:12,data:b},{type:12,data:f.numHeads},{type:1,data:y}],q=d?["type","type","type"]:["type","type"],Y=re=>{let se=U$1("q",l.dataType,l.dims,x),de=U$1("key",c.dataType,c.dims,x),he=[se,de];d&&he.push(U$1("relative_position_bias",d.dataType,d.dims));let ge=K$1("output",l.dataType,$),Se=rt$1(1,x),Ae=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"alpha",type:"f32"}];return`
  const TILE_SIZE = ${E}u;

  var<workgroup> tileQ: array<${se.type.storage}, ${E*E}>;
  var<workgroup> tileK: array<${se.type.storage}, ${E*E}>;
  ${re.registerUniforms(Ae).declareVariables(...he,ge)}
  ${re.mainStart([E,E,1])}
    // x holds the N and y holds the M
    let headIdx = workgroup_id.z;
    let m = workgroup_id.y * TILE_SIZE;
    let n = workgroup_id.x * TILE_SIZE;
    let qOffset = uniforms.M * uniforms.K * headIdx + m * uniforms.K;
    let kOffset = uniforms.N * uniforms.K * headIdx + n * uniforms.K;

    var value = ${Se}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {
        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {
        tileK[TILE_SIZE * local_id.y + local_id.x] = key[kOffset + local_id.y * uniforms.K + w + local_id.x];
      }
      workgroupBarrier();

      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
        value += ${Se}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);
      }

      workgroupBarrier();
    }

    let headOffset = headIdx * uniforms.M * uniforms.N;
    if (global_id.y < uniforms.M && global_id.x < uniforms.N) {
      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;
      var sum: f32 = ${(()=>{switch(x){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${x}`)}})()};
        output[outputIdx] = ${ge.type.value} (sum * uniforms.alpha) + ${d?"relative_position_bias[outputIdx]":"0.0"};
    }
  }`};return{name:"AttentionProbs",shaderCache:{hint:`${x}`,inputDependencies:q},getRunData:()=>({outputs:[{dims:$,dataType:l.dataType,gpuDataType:0}],dispatchGroup:N,programUniforms:W}),getShaderSource:Y}},op$2=(s,l,c,d,f)=>{let g=f+d.kvSequenceLength,v=[d.batchSize,d.sequenceLength,d.vHiddenSize],b=12,$={x:Math.ceil(d.vHeadSize/b),y:Math.ceil(d.sequenceLength/b),z:d.batchSize*d.numHeads},y=[{type:12,data:d.sequenceLength},{type:12,data:g},{type:12,data:d.vHeadSize},{type:12,data:d.numHeads},{type:12,data:d.vHiddenSize}];return{name:"AttentionScore",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:v,dataType:l.dataType,gpuDataType:0}],dispatchGroup:$,programUniforms:y}),getShaderSource:x=>{let C=U$1("probs",l.dataType,l.dims),E=U$1("v",c.dataType,c.dims),N=K$1("output",l.dataType,v),W=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"v_hidden_size",type:"u32"}];return`
  const TILE_SIZE = ${b}u;
  var<workgroup> tileQ: array<${C.type.value}, ${b*b}>;
  var<workgroup> tileK: array<${C.type.value}, ${b*b}>;
  ${x.registerUniforms(W).declareVariables(C,E,N)}
  ${x.mainStart([b,b,1])}
   let headIdx = workgroup_id.z;
   let m = global_id.y;
   let n = global_id.x;

   let offsetA = headIdx * (uniforms.M * uniforms.K) + m * uniforms.K;
   let offsetB = headIdx * (uniforms.N * uniforms.K) + n;

   var value = ${C.type.storage}(0);
   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
     if (m < uniforms.M && w + local_id.x < uniforms.K) {
       tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];
     }
     if (n < uniforms.N && w + local_id.y < uniforms.K) {
       tileK[TILE_SIZE * local_id.y + local_id.x] = v[offsetB + (w + local_id.y) * uniforms.N];
     }
     workgroupBarrier();
     for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {
       value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * k + local_id.x];
     }
     workgroupBarrier();
   }

   // we need to transpose output from BNSH_v to BSND_v
   let batchIdx = workgroup_id.z / uniforms.num_heads;
   let currentBatchHeadNumber = workgroup_id.z % uniforms.num_heads;
   if (m < uniforms.M && n < uniforms.N) {
     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size
       + currentBatchHeadNumber * uniforms.N + n;
     output[outputIdx] = value;
   }
  }`}}},Xn$1=(s,l,c,d,f,g,v,b,$,y,x)=>{let C=s.outputCount>1,E=s.outputCount>2,N=C&&E?y.pastSequenceLength:0,W=N+y.kvSequenceLength,q=[y.batchSize,y.numHeads,W,y.headSize],Y=v?[v,c]:[c],re=C?s.compute(Yn$1(Y,2,q,c.dataType),{inputs:Y,outputs:[1]})[0]:c,se=[y.batchSize,y.numHeads,W,y.headSize],de=b?[b,d]:[d],he=E?s.compute(Yn$1(de,2,se,d.dataType),{inputs:de,outputs:[2]})[0]:d,ge=[l,re];$&&ge.push($);let Se=s.compute(ip$1(s,l,re,$,y,x,N),{inputs:ge,outputs:[-1]})[0];s.compute(np$1(s,Se,y.batchSize*y.numHeads*y.sequenceLength,W),{inputs:[Se],outputs:[]});let Ae=[Se,he];s.compute(op$2(s,Se,he,y,N),{inputs:Ae,outputs:[0]})},ap$1=(s,l)=>{let c=[l.batchSize,l.numHeads,l.sequenceLength,l.headSize],d=l.sequenceLength,f=l.inputHiddenSize,g=l.headSize,v=12,b={x:Math.ceil(l.headSize/v),y:Math.ceil(l.sequenceLength/v),z:l.batchSize*l.numHeads},$=[s.inputs[0],s.inputs[1],s.inputs[2]],y=[{type:12,data:d},{type:12,data:f},{type:12,data:g},{type:12,data:l.numHeads},{type:12,data:l.headSize},{type:12,data:l.hiddenSize},{type:12,data:l.hiddenSize+l.hiddenSize+l.vHiddenSize}],x=C=>{let E=K$1("output_q",$[0].dataType,c),N=K$1("output_k",$[0].dataType,c),W=K$1("output_v",$[0].dataType,c),q=U$1("input",$[0].dataType,$[0].dims),Y=U$1("weight",$[1].dataType,$[1].dims),re=U$1("bias",$[2].dataType,$[2].dims),se=q.type.storage,de=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`
  const TILE_SIZE = ${v}u;
  var<workgroup> tileInput: array<${se}, ${v*v}>;
  var<workgroup> tileWeightQ: array<${se}, ${v*v}>;
  var<workgroup> tileWeightK: array<${se}, ${v*v}>;
  var<workgroup> tileWeightV: array<${se}, ${v*v}>;
  ${C.registerUniforms(de).declareVariables(q,Y,re,E,N,W)}
  ${C.mainStart([v,v,1])}
    let batchIndex = workgroup_id.z / uniforms.num_heads;
    let headNumber = workgroup_id.z % uniforms.num_heads;
    let m = global_id.y;
    let n = global_id.x;

    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;
    let biasOffsetQ = headNumber * uniforms.head_size;
    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;
    let biasOffsetV = uniforms.hidden_size + biasOffsetK;

    var valueQ = ${se}(0);
    var valueK = ${se}(0);
    var valueV = ${se}(0);
    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {
      if (m < uniforms.M && w + local_id.x < uniforms.K) {
        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];
      }
      if (n < uniforms.N && w + local_id.y < uniforms.K) {
        let offset = n + (w + local_id.y) * uniforms.ldb;
        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];
        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];
        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];
      }
      workgroupBarrier();
      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {
        let inputTileOffset = TILE_SIZE * local_id.y + k;
        let weightTileOffset = TILE_SIZE * k + local_id.x;
        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];
        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];
        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];
      }

      workgroupBarrier();
    }

    let headOffset = (m * uniforms.N + n) % uniforms.head_size;
    valueQ += bias[headOffset + biasOffsetQ];
    valueK += bias[headOffset + biasOffsetK];
    valueV += bias[headOffset + biasOffsetV];

    let offset = workgroup_id.z * uniforms.M * uniforms.N;
    if (m < uniforms.M && n < uniforms.N) {
      let outputIdx = offset + m * uniforms.N + n;
      output_q[outputIdx] = valueQ;
      output_k[outputIdx] = valueK;
      output_v[outputIdx] = valueV;
    }
  }`};return s.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:c,dataType:s.inputs[0].dataType,gpuDataType:0},{dims:c,dataType:s.inputs[0].dataType,gpuDataType:0},{dims:c,dataType:s.inputs[0].dataType,gpuDataType:0}],dispatchGroup:b,programUniforms:y}),getShaderSource:x},{inputs:$,outputs:[-1,-1,-1]})},Ms=(s,l)=>{let c=rp$1(s.inputs,l),[d,f,g]=ap$1(s,c);return Xn$1(s,d,f,g,s.inputs[4],void 0,void 0,void 0,s.inputs[5],c,l)}}),sp$1,up$1,lp$1,Us$1,Ws$1=j(()=>{_t(),ye$1(),xe(),Ze$1(),_e(),sp$1=(s,l)=>{if(!s||s.length!==5)throw new Error("BatchNormalization requires 5 inputs");let c=(d,f,g)=>{let v=f.length;if(v!==d.length)throw new Error(`${g}: num dimensions != ${v}`);f.forEach((b,$)=>{if(b!==d[$])throw new Error(`${g}: dim[${$}] do not match`)})};if(s[0].dims.length>1){let d=l.format==="NHWC"?l.spatial?s[0].dims.slice(-1):s[0].dims.slice(-1).concat(s[0].dims.slice(1,s[0].dims.length-1)):s[0].dims.slice(1,l.spatial?2:void 0);c(s[1].dims,d,"Invalid input scale"),c(s[2].dims,d,"Invalid input B"),c(s[3].dims,d,"Invalid input mean"),c(s[4].dims,d,"Invalid input var")}else c(s[1].dims,[1],"Invalid input scale"),c(s[2].dims,[1],"Invalid input B"),c(s[3].dims,[1],"Invalid input mean"),c(s[4].dims,[1],"Invalid input var")},up$1=(s,l)=>{let{epsilon:c,spatial:d,format:f}=l,g=s[0].dims,v=d?Ue$1(g[g.length-1]):1,b=f==="NHWC"&&g.length>1?v:1,$=M$1.size(g)/v,y=d,x=y?g.length:g,C=U$1("x",s[0].dataType,s[0].dims,v),E=U$1("scale",s[1].dataType,s[1].dims,b),N=U$1("bias",s[2].dataType,s[2].dims,b),W=U$1("inputMean",s[3].dataType,s[3].dims,b),q=U$1("inputVar",s[4].dataType,s[4].dims,b),Y=K$1("y",s[0].dataType,x,v),re=()=>{let de="";if(d)de=`let cOffset = ${g.length===1?"0u":f==="NHWC"?`outputIndices[${g.length-1}] / ${v}`:"outputIndices[1]"};`;else if(f==="NCHW")de=`
            ${Y.indicesSet("outputIndices","0","0")}
            let cOffset = ${Y.indicesToOffset("outputIndices")};`;else{de=`var cIndices = ${E.type.indices}(0);
                       cIndices[0] = outputIndices[${g.length-1}];`;for(let he=1;he<E.rank;he++)de+=`cIndices[${he}] = outputIndices[${he}];`;de+=`let cOffset = ${E.indicesToOffset("cIndices")};`}return de},se=de=>`
  const epsilon = ${c};
  ${de.registerUniform("outputSize","u32").declareVariables(C,E,N,W,q,Y)}
  ${de.mainStart()}
  ${de.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
    var outputIndices = ${Y.offsetToIndices(`global_idx * ${v}`)};
    ${re()}
    let scale = ${E.getByOffset("cOffset")};
    let bias = ${N.getByOffset("cOffset")};
    let inputMean = ${W.getByOffset("cOffset")};
    let inputVar = ${q.getByOffset("cOffset")};
    let x = ${C.getByOffset("global_idx")};
    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;
    ${Y.setByOffset("global_idx","value")}
  }`;return{name:"BatchNormalization",shaderCache:{hint:`${l.epsilon}_${l.format}_${d}_${v}`,inputDependencies:y?["rank","type","type","type","type"]:void 0},getShaderSource:se,getRunData:()=>({outputs:[{dims:s[0].dims,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil($/64)},programUniforms:y?[{type:12,data:$},...X(g)]:[{type:12,data:$}]})}},lp$1=s=>we$1(s),Us$1=(s,l)=>{let{inputs:c,outputCount:d}=s,f=lp$1({...l,outputCount:d});if(ke$1.webgpu.validateInputContent&&sp$1(c,f),l.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");s.compute(up$1(c,f))}}),dp$1,cp$1,Ns,Vs$1=j(()=>{xe(),_e(),dp$1=s=>{if(s[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(s[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(s[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(s[0].dims[2]!==s[1].dims[0])throw new Error("last dimension of input and bias are not the same")},cp$1=s=>{let l=s[0].dims,c=s[0].dims[2],d=M$1.size(l)/4,f=s[0].dataType,g=U$1("input",f,l,4),v=U$1("bias",f,[c],4),b=U$1("residual",f,l,4),$=K$1("output",f,l,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:l,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)}}),getShaderSource:y=>`
  const channels = ${c}u / 4;
  ${y.declareVariables(g,v,b,$)}

  ${y.mainStart()}
    ${y.guardAgainstOutOfBoundsWorkgroupSizes(d)}
    let value = ${g.getByOffset("global_idx")}
      + ${v.getByOffset("global_idx % channels")} + ${b.getByOffset("global_idx")};
    ${$.setByOffset("global_idx","value")}
  }`}},Ns=s=>{dp$1(s.inputs),s.compute(cp$1(s.inputs))}}),pp$1,Pe,Hs$1,Gs$1,Ls$1,Fs$1,qs$1,js$1,Ks$1,Ys$1,Xs$1,mp$1,Zs$1,Qs$1,Js$1,eu$1,Zn$1,tu$1,Qn$1,ru$1,nu$1,iu$1,ou$1,au$1,su$1,uu$1,lu$1,du$1,cu$1,pu$1,mu$1,fu$1,hu$1,gu$1,yu$1,bu$1,vu$1,ao$1,so$1,wu$1,$u$1,_u$1,Jn$1=j(()=>{ye$1(),xe(),Ze$1(),_e(),pp$1=(s,l,c,d,f,g)=>{let v=Math.ceil(l/4),b="";typeof f=="string"?b=`${f}(a)`:b=f("a");let $=U$1("inputData",c,[v],4),y=K$1("outputData",d,[v],4);return`
      ${s.registerUniform("vec_size","u32").declareVariables($,y)}

  ${g??""}

  ${s.mainStart()}
    ${s.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}

    let a = ${$.getByOffset("global_idx")};
    ${y.setByOffset("global_idx",b)}
  }`},Pe=(s,l,c,d,f,g=s.dataType)=>({name:l,shaderCache:{hint:f,inputDependencies:["type"]},getShaderSource:v=>pp$1(v,M$1.size(s.dims),s.dataType,g,c,d),getRunData:v=>({outputs:[{dims:s.dims,dataType:g}],dispatchGroup:{x:Math.ceil(M$1.size(v[0].dims)/64/4)},programUniforms:[{type:12,data:Math.ceil(M$1.size(s.dims)/4)}]})}),Hs$1=s=>{s.compute(Pe(s.inputs[0],"Abs","abs"))},Gs$1=s=>{s.compute(Pe(s.inputs[0],"Acos","acos"))},Ls$1=s=>{s.compute(Pe(s.inputs[0],"Acosh","acosh"))},Fs$1=s=>{s.compute(Pe(s.inputs[0],"Asin","asin"))},qs$1=s=>{s.compute(Pe(s.inputs[0],"Asinh","asinh"))},js$1=s=>{s.compute(Pe(s.inputs[0],"Atan","atan"))},Ks$1=s=>{s.compute(Pe(s.inputs[0],"Atanh","atanh"))},Ys$1=s=>we$1(s),Xs$1=(s,l)=>{let c;switch(l.to){case 10:c="vec4<f16>";break;case 1:c="vec4<f32>";break;case 12:c="vec4<u32>";break;case 6:c="vec4<i32>";break;case 9:c="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute 'to' from 'Cast' operator): ${l.to}`)}s.compute(Pe(s.inputs[0],"Cast",c,void 0,l.cacheKey,l.to))},mp$1=s=>{let l=s.length>=2&&s[1].data!==0?s[1].getFloat32Array()[0]:Ln$1,c=s.length>=3&&s[2].data!==0?s[2].getFloat32Array()[0]:Fn$1;return we$1({min:l,max:c})},Zs$1=(s,l)=>{let c=s.inputs.length===1?l:mp$1(s.inputs),d=rt$1(s.inputs[0].dataType);s.compute(Pe(s.inputs[0],"Clip",f=>`clamp(${f}, clip_min_, clip_max_)`,`
    const clip_min_: vec4<${d}> = vec4(${d}(${c.min}));
    const clip_max_: vec4<${d}> = vec4(${d}(${c.max}));
`,c.cacheKey),{inputs:[0]})},Qs$1=s=>{s.compute(Pe(s.inputs[0],"Ceil","ceil"))},Js$1=s=>{s.compute(Pe(s.inputs[0],"Cos","cos"))},eu$1=s=>{s.compute(Pe(s.inputs[0],"Cosh","cosh"))},Zn$1=s=>we$1(s),tu$1=(s,l)=>{let c=rt$1(s.inputs[0].dataType);s.compute(Pe(s.inputs[0],"Elu",d=>`elu_vf32(${d})`,`
  const elu_alpha_ = ${c}(${l.alpha});

  fn elu_f32(a: ${c}) -> ${c} {
  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);
  }

  fn elu_vf32(v: vec4<${c}>) -> vec4<${c}> {
  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));
  }`,l.cacheKey))},Qn$1=(s="f32")=>`
const r0: ${s} = 0.3275911;
const r1: ${s} = 0.254829592;
const r2: ${s} = -0.284496736;
const r3: ${s} = 1.421413741;
const r4: ${s} = -1.453152027;
const r5: ${s} = 1.061405429;

fn erf_vf32(v: vec4<${s}>) -> vec4<${s}> {
  let absv = abs(v);
  let x = 1.0 / (1.0 + r0 * absv);
  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));
}`,ru$1=s=>{let l=rt$1(s.inputs[0].dataType);s.compute(Pe(s.inputs[0],"Erf",c=>`erf_vf32(${c})`,Qn$1(l)))},nu$1=s=>{s.compute(Pe(s.inputs[0],"Exp","exp"))},iu$1=s=>{s.compute(Pe(s.inputs[0],"Floor","floor"))},ou$1=s=>{let l=rt$1(s.inputs[0].dataType);s.compute(Pe(s.inputs[0],"Gelu",c=>`0.5 * ${c} * (1.0 + erf_vf32(${c} * 0.7071067811865475))`,Qn$1(l)))},au$1=(s,l)=>{let c=rt$1(s.inputs[0].dataType);s.compute(Pe(s.inputs[0],"LeakyRelu",d=>`select(leaky_relu_alpha_ * ${d}, ${d}, ${d} >= vec4<${c}>(0.0))`,`const leaky_relu_alpha_ = ${c}(${l.alpha});`,l.cacheKey))},su$1=s=>{s.compute(Pe(s.inputs[0],"Not",l=>`!${l}`))},uu$1=s=>{s.compute(Pe(s.inputs[0],"Neg",l=>`-${l}`))},lu$1=s=>{s.compute(Pe(s.inputs[0],"Reciprocal",l=>`1.0/${l}`))},du$1=s=>{let l=rt$1(s.inputs[0].dataType);s.compute(Pe(s.inputs[0],"Relu",c=>`select(vec4<${l}>(0.0), ${c}, ${c} > vec4<${l}>(0.0))`))},cu$1=s=>{s.compute(Pe(s.inputs[0],"Sigmoid",l=>`(1.0 / (1.0 + exp(-${l})))`))},pu$1=s=>we$1(s),mu$1=(s,l)=>{let c=rt$1(s.inputs[0].dataType);s.compute(Pe(s.inputs[0],"HardSigmoid",d=>`max(vec4<${c}>(0.0), min(vec4<${c}>(1.0), ${l.alpha} * ${d} + vec4<${c}>(${l.beta})))`,void 0,l.cacheKey))},fu$1=s=>{s.compute(Pe(s.inputs[0],"Sin","sin"))},hu$1=s=>{s.compute(Pe(s.inputs[0],"Sinh","sinh"))},gu$1=s=>{s.compute(Pe(s.inputs[0],"Sqrt","sqrt"))},yu$1=s=>{s.compute(Pe(s.inputs[0],"Tan","tan"))},bu$1=s=>`sign(${s}) * (1 - exp(-2 * abs(${s}))) / (1 + exp(-2 * abs(${s})))`,vu$1=s=>{s.compute(Pe(s.inputs[0],"Tanh",bu$1))},ao$1=(s="f32")=>`
const fast_gelu_a: ${s} = 0.5;
const fast_gelu_b: ${s} = 0.7978845608028654;
const fast_gelu_c: ${s} = 0.035677408136300125;

fn tanh_v(v: vec4<${s}>) -> vec4<${s}> {
  return ${bu$1("v")};
}
`,so$1=s=>`(fast_gelu_a + fast_gelu_a * tanh_v(${s} * (fast_gelu_c * ${s} * ${s} + fast_gelu_b))) * ${s}`,wu$1=s=>{let l=rt$1(s.inputs[0].dataType);s.compute(Pe(s.inputs[0],"FastGelu",so$1,ao$1(l),void 0,s.inputs[0].dataType))},$u$1=(s,l)=>{let c=rt$1(s.inputs[0].dataType);return s.compute(Pe(s.inputs[0],"ThresholdedRelu",d=>`select(vec4<${c}>(0.0), ${d}, ${d} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${c}>(${l.alpha});`,l.cacheKey)),0},_u$1=s=>{s.compute(Pe(s.inputs[0],"Log","log"))}}),fp$1,hp$1,Su$1,Cu$1=j(()=>{xe(),_e(),Jn$1(),fp$1=s=>{if(s[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(s[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(s[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(s[0].dims[2]!==s[1].dims[0])throw new Error("last dimension of input and bias are not the same")},hp$1=s=>{let l=s[0].dims.slice();l[2]=l[2]/2;let c=U$1("input",s[0].dataType,s[0].dims,4),d=U$1("bias",s[0].dataType,[s[0].dims[2]],4),f=K$1("output",s[0].dataType,l,4),g=M$1.size(l)/4,v=De(s[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:l,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil(g/64)}}),getShaderSource:b=>`
  const M_SQRT2 = sqrt(2.0);
  const halfChannels = ${s[0].dims[2]/4/2}u;

  ${b.declareVariables(c,d,f)}

  ${Qn$1(v)}

  ${b.mainStart()}
    ${b.guardAgainstOutOfBoundsWorkgroupSizes(g)}
    let biasIdx = global_idx % halfChannels;
    let batchIndex = global_idx / halfChannels;
    let inputOffset = biasIdx + batchIndex * halfChannels * 2;
    let valueLeft = input[inputOffset] + bias[biasIdx];
    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];
    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);

    ${f.setByOffset("global_idx","valueLeft * geluRight")}
  }`}},Su$1=s=>{fp$1(s.inputs),s.compute(hp$1(s.inputs))}}),gp$1,yp$1,Wt$1,Iu$1,Tu$1,Au$1,Eu$1,ku$1,Ou$1,Pu$1,Ru$1,zu$1,Bu$1,Du$1=j(()=>{ye$1(),xe(),_e(),gp$1=(s,l,c,d,f,g,v,b,$,y,x,C)=>{let E,N;typeof b=="string"?E=N=(se,de)=>`${b}((${se}),(${de}))`:typeof b=="function"?E=N=b:(E=b.scalar,N=b.vector);let W=K$1("outputData",x,d.length,4),q=U$1("aData",$,l.length,4),Y=U$1("bData",y,c.length,4),re;if(f)if(g){let se=M$1.size(l)===1,de=M$1.size(c)===1,he=l.length>0&&l[l.length-1]%4===0,ge=c.length>0&&c[c.length-1]%4===0;se||de?re=W.setByOffset("global_idx",N(se?`${q.type.value}(${q.getByOffset("0")}.x)`:q.getByOffset("global_idx"),de?`${Y.type.value}(${Y.getByOffset("0")}.x)`:Y.getByOffset("global_idx"))):re=`
            let outputIndices = ${W.offsetToIndices("global_idx * 4u")};
            let offsetA = ${q.broadcastedIndicesToOffset("outputIndices",W)};
            let offsetB = ${Y.broadcastedIndicesToOffset("outputIndices",W)};
            ${W.setByOffset("global_idx",N(v||he?q.getByOffset("offsetA / 4u"):`${q.type.value}(${q.getByOffset("offsetA / 4u")}[offsetA % 4u])`,v||ge?Y.getByOffset("offsetB / 4u"):`${Y.type.value}(${Y.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}
          `}else re=W.setByOffset("global_idx",N(q.getByOffset("global_idx"),Y.getByOffset("global_idx")));else{if(!g)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let se=(de,he,ge="")=>{let Se=`aData[indexA${he}][componentA${he}]`,Ae=`bData[indexB${he}][componentB${he}]`;return`
            let outputIndices${he} = ${W.offsetToIndices(`global_idx * 4u + ${he}u`)};
            let offsetA${he} = ${q.broadcastedIndicesToOffset(`outputIndices${he}`,W)};
            let offsetB${he} = ${Y.broadcastedIndicesToOffset(`outputIndices${he}`,W)};
            let indexA${he} = offsetA${he} / 4u;
            let indexB${he} = offsetB${he} / 4u;
            let componentA${he} = offsetA${he} % 4u;
            let componentB${he} = offsetB${he} % 4u;
            ${de}[${he}] = ${ge}(${E(Se,Ae)});
          `};x===9?re=`
            var data = vec4<u32>(0);
            ${se("data",0,"u32")}
            ${se("data",1,"u32")}
            ${se("data",2,"u32")}
            ${se("data",3,"u32")}
            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:re=`
            ${se("outputData[global_idx]",0)}
            ${se("outputData[global_idx]",1)}
            ${se("outputData[global_idx]",2)}
            ${se("outputData[global_idx]",3)}
          `}return`
        ${s.registerUniform("vec_size","u32").declareVariables(q,Y,W)}

        ${C??""}

        ${s.mainStart()}
        ${s.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${re}
      }`},yp$1=(s,l,c,d,f,g,v=c.dataType)=>{let b=!M$1.areEqual(c.dims,d.dims),$=c.dims,y=M$1.size(c.dims),x=!1,C=!1,E=[b];if(b){let N=zt$1.calcShape(c.dims,d.dims,!1);if(!N)throw new Error("Can't perform binary op on the given tensors");$=N,y=M$1.size($);let W=M$1.size(c.dims)===1,q=M$1.size(d.dims)===1,Y=c.dims.length>0&&c.dims[c.dims.length-1]%4===0,re=d.dims.length>0&&d.dims[d.dims.length-1]%4===0;E.push(W),E.push(q),E.push(Y),E.push(re);let se=1;for(let de=1;de<$.length;de++){let he=c.dims[c.dims.length-de]??1,ge=d.dims[d.dims.length-de]??1;if(he===ge)se*=he;else break}se%4===0?(C=!0,x=!0):(W||q||Y||re)&&(x=!0)}else x=!0;return E.push(x),{name:s,shaderCache:{hint:l+E.map(N=>N.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:N=>gp$1(N,c.dims,d.dims,$,x,b,C,f,c.dataType,d.dataType,v,g),getRunData:()=>({outputs:[{dims:$,dataType:v}],dispatchGroup:{x:Math.ceil(y/64/4)},programUniforms:[{type:12,data:Math.ceil(M$1.size($)/4)},...X(c.dims,d.dims,$)]})}},Wt$1=(s,l,c,d,f,g)=>{s.compute(yp$1(l,f??"",s.inputs[0],s.inputs[1],c,d,g))},Iu$1=s=>{Wt$1(s,"Add",(l,c)=>`${l}+${c}`)},Tu$1=s=>{Wt$1(s,"Div",(l,c)=>`${l}/${c}`)},Au$1=s=>{Wt$1(s,"Equal",{scalar:(l,c)=>`u32(${l}==${c})`,vector:(l,c)=>`vec4<u32>(${l}==${c})`},void 0,void 0,9)},Eu$1=s=>{Wt$1(s,"Mul",(l,c)=>`${l}*${c}`)},ku$1=s=>{let l=U$1("input",s.inputs[0].dataType,s.inputs[0].dims).type.value;Wt$1(s,"Pow",{scalar:(c,d)=>`pow_custom(${c},${d})`,vector:(c,d)=>`pow_vector_custom(${c},${d})`},`
    fn pow_custom(a : ${l}, b : ${l}) -> ${l} {
      if (b == ${l}(0.0)) {
        return ${l}(1.0);
      } else if (a < ${l}(0.0) && f32(b) != floor(f32(b))) {
        return ${l}(pow(f32(a), f32(b))); // NaN
      }
      return select(sign(a), ${l}(1.0), round(f32(abs(b) % ${l}(2.0))) != 1.0) * ${l}(${l==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));
    }
    fn pow_vector_custom(a : vec4<${l}>, b : vec4<${l}>) -> vec4<${l}> {
      // TODO: implement vectorized pow
      return vec4<${l}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));
    }
      `)},Ou$1=s=>{Wt$1(s,"Sub",(l,c)=>`${l}-${c}`)},Pu$1=s=>{Wt$1(s,"Greater",{scalar:(l,c)=>`u32(${l}>${c})`,vector:(l,c)=>`vec4<u32>(${l}>${c})`},void 0,void 0,9)},Ru$1=s=>{Wt$1(s,"Less",{scalar:(l,c)=>`u32(${l}<${c})`,vector:(l,c)=>`vec4<u32>(${l}<${c})`},void 0,void 0,9)},zu$1=s=>{Wt$1(s,"GreaterOrEqual",{scalar:(l,c)=>`u32(${l}>=${c})`,vector:(l,c)=>`vec4<u32>(${l}>=${c})`},void 0,void 0,9)},Bu$1=s=>{Wt$1(s,"LessOrEqual",{scalar:(l,c)=>`u32(${l}<=${c})`,vector:(l,c)=>`vec4<u32>(${l}<=${c})`},void 0,void 0,9)}}),kt,Ot$1,Pt,ei$1,Zt$1=j(()=>{ye$1(),xe(),kt=(s,l,c="f32")=>{switch(s.activation){case"Relu":return`value = max(value, ${l}(0.0));`;case"Sigmoid":return`value = (${l}(1.0) / (${l}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${l}(${c}(uniforms.clip_min)), ${l}(${c}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${l}(0.0), min(${l}(1.0), ${c}(uniforms.alpha) * value + ${c}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${c}(uniforms.alpha) * value, value, value >= ${l}(0.0));`;case"":return"";default:throw new Error(`Unsupported activation ${s.activation}`)}},Ot$1=(s,l)=>{s.activation==="Clip"?l.push({type:1,data:s.clipMax},{type:1,data:s.clipMin}):s.activation==="HardSigmoid"?l.push({type:1,data:s.alpha},{type:1,data:s.beta}):s.activation==="LeakyRelu"&&l.push({type:1,data:s.alpha})},Pt=(s,l)=>{s.activation==="Clip"?l.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):s.activation==="HardSigmoid"?l.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):s.activation==="LeakyRelu"&&l.push({name:"alpha",type:"f32"})},ei$1=s=>{let l=(s==null?void 0:s.activation)||"";if(l==="HardSigmoid"){let[c,d]=(s==null?void 0:s.activation_params)||[.2,.5];return{activation:l,alpha:c,beta:d}}else if(l==="Clip"){let[c,d]=(s==null?void 0:s.activation_params)||[Ln$1,Fn$1];return{activation:l,clipMax:d,clipMin:c}}else if(l==="LeakyRelu"){let[c]=(s==null?void 0:s.activation_params)||[.01];return{activation:l,alpha:c}}return{activation:l}}}),nt$2,ti$1,ri$1=j(()=>{nt$2=(s,l)=>{switch(s){case 1:return l;case 2:return`vec2<${l}>`;case 3:return`vec3<${l}>`;case 4:return`vec4<${l}>`;default:throw new Error(`${s}-component is not supported.`)}},ti$1=s=>`
      ${s?"value = value + getBiasByOutputCoords(coords);":""}
      `}),ni$1,uo$1=j(()=>{ni$1=s=>`
fn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));
}
fn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {
  return dot(coords, vec4<i32>(
    i32(${s}.x), i32(${s}.y), i32(${s}.z), 1));
}
`}),vp$1,wp$1,rn$1,Mu$1,$p$1,nn$1,_p$1,ii$1,on$2=j(()=>{ye$1(),xe(),_e(),Zt$1(),ri$1(),vp$1=(s,l)=>s?`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          kStart + inputRow,
          globalRowStart / innerElementSize + inputCol${l?", batchIndices":""});
        `:`
        mm_Asub[inputRow][inputCol] = mm_readA(batch,
          globalRow + innerRow,
          kStart / innerElementSize + inputCol${l?", batchIndices":""});
        `,wp$1=(s,l)=>s?`
        let ACached0 = mm_Asub[k * innerElementSize][localRow];
        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];
        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];
        ${l===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}
        for (var i = 0; i < rowPerThread; i = i + 1) {
          acc[i] = BCached0 * ACached0[i] + acc[i];
          acc[i] = BCached1 * ACached1[i] + acc[i];
          acc[i] = BCached2 * ACached2[i] + acc[i];
          ${l===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}
        }`:`
        for (var i = 0; i < rowPerThread; i = i + 1) {
          let ACached = mm_Asub[tileRow + i][k];
          acc[i] = BCached0 * ACached.x + acc[i];
          acc[i] = BCached1 * ACached.y + acc[i];
          acc[i] = BCached2 * ACached.z + acc[i];
          ${l===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}
        }`,rn$1=(s,l,c="f32",d,f=!1,g=32,v=!1,b=32)=>{let $=l[1]*s[1],y=l[0]*s[0],x=f?$:g,C=f?g:$,E=x/l[0],N=g/l[1];if(!((f&&E===4&&s[1]===4||!f&&(E===3||E===4))&&x%l[0]===0&&g%l[1]===0&&s[0]===4))throw new Error(`If transposeA ${f} is true, innerElementSize ${E} and workPerThread[1] ${s[1]} must be 4.
      Otherwise, innerElementSize ${E} must be 3 or 4.
  tileAWidth ${x} must be divisible by workgroupSize[0]${l[0]}. tileInner ${g} must be divisible by workgroupSize[1] ${l[1]}. colPerThread ${s[0]} must be 4.`);return`
var<workgroup> mm_Asub: array<array<vec${E}<${c}>, ${x/E}>, ${C}>;
var<workgroup> mm_Bsub: array<array<vec4<${c}>, ${y/s[0]}>, ${g}>;

const rowPerThread = ${s[1]};
const colPerThread = ${s[0]};
const innerElementSize = ${E};
const tileInner = ${g};

@compute @workgroup_size(${l[0]}, ${l[1]}, ${l[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
  let localRow = i32(localId.y);
  let tileRow = localRow * rowPerThread;
  let tileCol = i32(localId.x);

  let globalRow =i32(globalId.y) * rowPerThread;
  let globalCol = i32(globalId.x);
  let batch = ${v?"0":"i32(globalId.z)"};
  ${d?`let batchIndices = ${d.offsetToIndices("u32(batch)")};`:""}
  let globalRowStart = i32(workgroupId.y) * ${$};

  let num_tiles = ${v?`${Math.ceil(b/g)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
  var kStart = ${v?`i32(globalId.z) * ${b}`:"0"};

  var acc: array<vec4<${c}>, rowPerThread>;

  // Loop over shared dimension.
  let tileRowB = localRow * ${N};
  for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let inputRow = tileRow + innerRow;
          let inputCol = tileCol;
          ${vp$1(f,d)}
      }

      // Load one tile of B into local memory.
      for (var innerRow = 0; innerRow < ${N}; innerRow = innerRow + 1) {
          let inputRow = tileRowB + innerRow;
          let inputCol = tileCol;
          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${d?", batchIndices":""});
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {
          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];
          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];
          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];
          ${E===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}

          ${wp$1(f,E)}
      }

      workgroupBarrier();
  }

  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);
  }
}`},Mu$1=(s,l)=>s?`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              kStart + inputRow,
              globalRowStart + inputCol${l?", batchIndices":""});
            `:`
            mm_Asub[inputRow][inputCol] = mm_readA(batch,
              globalRowStart + inputRow,
              kStart + inputCol${l?", batchIndices":""});
            `,$p$1=s=>s?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",nn$1=(s,l,c="f32",d,f=!1,g=32,v=!1,b=32,$=!1)=>{let y=s[1]*l[1],x=s[0]*l[0],C=f?y:g,E=f?g:y;if(!(E%l[1]===0&&C%l[0]===0&&g%l[1]===0))throw new Error(`tileAHight ${E} must be divisible by workgroupSize[1]${l[1]}, tileAWidth ${C} must be divisible by workgroupSize[0]${l[0]}, tileInner ${g} must be divisible by workgroupSize[1]${l[1]}`);let N=E/l[1],W=C/l[0],q=g/l[1],Y=$?`
    let localRow = i32(localId.y);
    let localCol = i32(localId.x);
    let globalRowStart = i32(workgroupId.y) * ${y};
    let globalColStart = i32(workgroupId.x) * ${x};

    // Loop over shared dimension.
    for (var t = 0; t < num_tiles; t = t + 1) {
      // Load one tile of A into local memory.
      for (var inputRow = localRow; inputRow < ${E}; inputRow = inputRow + ${l[1]}) {
        for (var inputCol = localCol; inputCol < ${C}; inputCol = inputCol + ${l[0]}) {
          ${Mu$1(f,d)}
        }
      }
      // Load one tile of B into local memory.
      for (var inputRow = localRow; inputRow < ${g}; inputRow = inputRow + ${l[1]}) {
            for (var inputCol = localCol; inputCol < ${x}; inputCol = inputCol + ${l[0]}) {
          mm_Bsub[inputRow][inputCol] = mm_readB(batch,
            kStart + inputRow,
            globalColStart + inputCol${d?", batchIndices":""});
        }
      }
      kStart = kStart + tileInner;
      workgroupBarrier();

      // Compute acc values for a single thread.
      var BCached : array<${c}, colPerThread>;
      for (var k = 0; k < tileInner; k = k + 1) {
        for (var inner = 0; inner < colPerThread; inner = inner + 1) {
          BCached[inner] = mm_Bsub[k][localCol + inner * ${l[0]}];
        }
        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
          let ACached = ${f?`mm_Asub[k][localRow + innerRow * ${l[1]}];`:`mm_Asub[localRow + innerRow * ${l[1]}][k];`}
          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
            acc[innerRow][innerCol] = acc[innerRow][innerCol] +
                ACached * BCached[innerCol];
          }
        }
      }
      workgroupBarrier();
    }
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      let gRow = globalRowStart + localRow + innerRow * ${l[1]};
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        let gCol = globalColStart + localCol + innerCol * ${l[0]};
        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);
      }
    }
    `:`
let tileRow = i32(localId.y) * rowPerThread;
let tileCol = i32(localId.x) * colPerThread;

let globalRow = i32(globalId.y) * rowPerThread;
let globalCol = i32(globalId.x) * colPerThread;
let globalRowStart = i32(workgroupId.y) * ${y};

let tileRowA = i32(localId.y) * ${N};
let tileColA = i32(localId.x) * ${W};
let tileRowB = i32(localId.y) * ${q};
// Loop over shared dimension.
for (var t = 0; t < num_tiles; t = t + 1) {
  // Load one tile of A into local memory.
  for (var innerRow = 0; innerRow < ${N}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < ${W}; innerCol = innerCol + 1) {
      let inputRow = tileRowA + innerRow;
      let inputCol = tileColA + innerCol;
      ${Mu$1(f,d)}
    }
  }

  // Load one tile of B into local memory.
  for (var innerRow = 0; innerRow < ${q}; innerRow = innerRow + 1) {
    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
      let inputRow = tileRowB + innerRow;
      let inputCol = tileCol + innerCol;
      mm_Bsub[inputRow][inputCol] = mm_readB(batch,
        kStart + inputRow,
        globalCol + innerCol${d?", batchIndices":""});
    }
  }
  kStart = kStart + tileInner;
  workgroupBarrier();

  // Compute acc values for a single thread.
  var BCached : array<${c}, colPerThread>;
  for (var k = 0; k < tileInner; k = k + 1) {
    for (var inner = 0; inner < colPerThread; inner = inner + 1) {
      BCached[inner] = mm_Bsub[k][tileCol + inner];
    }

    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      ${$p$1(f)}
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];
      }
    }
  }

  workgroupBarrier();
}

for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
    mm_write(batch, globalRow + innerRow, globalCol + innerCol,
        acc[innerRow][innerCol]);
  }
}
`;return`
  var<workgroup> mm_Asub : array<array<${c}, ${C}>, ${E}>;
  var<workgroup> mm_Bsub : array<array<${c}, ${x}>, ${g}>;
  const rowPerThread = ${s[1]};
  const colPerThread = ${s[0]};
  const tileInner = ${g};

@compute @workgroup_size(${l[0]}, ${l[1]}, ${l[2]})
fn main(@builtin(local_invocation_id) localId : vec3<u32>,
        @builtin(global_invocation_id) globalId : vec3<u32>,
        @builtin(workgroup_id) workgroupId : vec3<u32>) {
    let batch = ${v?"0":"i32(globalId.z)"};
    ${d?`let batchIndices = ${d.offsetToIndices("u32(batch)")};`:""}
    let num_tiles = ${v?`${Math.ceil(b/g)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};
    var kStart = ${v?`i32(globalId.z) * ${b}`:"0"};

    var acc : array<array<${c}, colPerThread>, rowPerThread>;

    // Without this initialization strange values show up in acc.
    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {
      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {
        acc[innerRow][innerCol] = 0.0;
      }
    }
    ${Y}
  }
`},_p$1=(s,l,c,d,f,g=!1)=>{let[v,b,$]=f,[y,x,C,E]=d,N=Pr$1(v,$),W=Pr$1(b,$),q=De(d[0].type.tensor),Y=()=>{let se=x.rank,de=y.rank,he=`var aIndices: ${x.type.indices};`;for(let ge=se-2-1,Se=de-1;ge>=0;ge--,Se--)he+=`
aIndices[${ge}] = ${de>1?`batchIndices[${Se}]`:"batchIndices"};`;return N.forEach(ge=>{he+=`
aIndices[${ge}] = 0;`}),he+=`
aIndices[${se-2}] = u32(row);
                   aIndices[${se-1}] = u32(colIn);`,he},re=()=>{let se=C.rank,de=y.rank,he=`var bIndices: ${C.type.indices};`;for(let ge=se-2-1,Se=de-1;ge>=0;ge--,Se--)he+=`
bIndices[${ge}] = ${de>1?`batchIndices[${Se}]`:"batchIndices"};`;return W.forEach(ge=>{he+=`
bIndices[${ge}] = 0;`}),he+=`
bIndices[${se-2}] = u32(row);
                   bIndices[${se-1}] = u32(colIn);`,he};return`
    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${y.type.indices}) -> ${nt$2(s,q)} {
      var value = ${nt$2(s,q)}(0.0);
      let col = colIn * ${s};
      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)
      {
        ${Y()}
        value = ${x.getByIndices("aIndices")};
      }
      return value;
    }

    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${y.type.indices}) -> ${nt$2(s,q)} {
      var value = ${nt$2(s,q)}(0.0);
      let col = colIn * ${s};
      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)
      {
        ${re()}
        value = ${C.getByIndices("bIndices")};
      }
      return value;
    }

    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${nt$2(s,q)}) {
      let col = colIn * ${s};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
        var value = valueIn;
        let coords = vec3<i32>(batch, row, colIn);
        ${l?`value = value + ${g?"bias[colIn]":`${nt$2(s,q)}(bias[row])`};`:""}
        ${c}
        ${E.setByIndices("vec3<u32>(coords)","value")}
      }
    }
    `},ii$1=(s,l,c,d,f=!1)=>{let g=s[0].dims,v=s[1].dims,b=g.slice(0,-2),$=v.slice(0,-2),y=d?d.slice(0,-2):c.slice(0,-2),x=M$1.size(y),C=g[g.length-2],E=g[g.length-1],N=v[v.length-1],W=E%4===0&&N%4===0,q=C<=8?[4,1,1]:[4,4,1],Y=[8,8,1],re=[Math.ceil(N/Y[0]/q[0]),Math.ceil(C/Y[1]/q[1]),Math.ceil(x/Y[2]/q[2])],se=W?4:1,de=[...b,C,E/se],he=de.length,ge=[...$,E,N/se],Se=ge.length,Ae=[x,C,N/se],Re=[{type:6,data:C},{type:6,data:N},{type:6,data:E}];Ot$1(l,Re),Re.push(...X(y,de,ge));let Be=["rank","rank"],Ke=s.length>2;Ke&&(Re.push(...X(s[2].dims)),Be.push("rank")),Re.push(...X(Ae));let Lr=_y=>{let by=y.length,yy=qn("batchDims",s[0].dataType,by,1),my=De(s[0].dataType),$t=U$1("a",s[0].dataType,he,se),K$=U$1("b",s[1].dataType,Se,se),Y$=K$1("result",s[0].dataType,Ae.length,se),W$=[$t,K$];if(Ke){let $y=f?se:1;W$.push(U$1("bias",s[2].dataType,s[2].dims.length,$y))}let U$=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Pt(l,U$);let hy=De(Y$.type.tensor),G$=kt(l,Y$.type.value,hy),ky=_p$1(se,Ke,G$,[yy,$t,K$,Y$],[b,$,y],f);return`
  ${_y.registerUniforms(U$).registerInternalVariables(yy).declareVariables(...W$,Y$)}
  ${ky}
  ${W?rn$1(q,Y,my,yy):nn$1(q,Y,my,yy)}
                   `};return{name:"MatMul",shaderCache:{hint:`${q};${l.activation};${W};${f}`,inputDependencies:Be},getRunData:()=>({outputs:[{dims:c,dataType:s[0].dataType}],dispatchGroup:{x:re[0],y:re[1],z:re[2]},programUniforms:Re}),getShaderSource:Lr}}}),xp$1,Uu$1,Wu=j(()=>{ye$1(),Xt$1(),_e(),Zt$1(),ri$1(),uo$1(),on$2(),xp$1=(s,l,c,d,f=!1,g,v=4,b=4,$=4,y="f32")=>{let x=Be=>{switch(Be){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${y}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${Be} is not supported.`)}},C=Be=>{switch(Be){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${Be} is not supported.`)}},E=s?`
    let coord = vec4<i32>(batch, xRow, xCol, xCh);
    `:`
    let coord = vec4<i32>(batch, xCh, xRow, xCol);
    `,N=s?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,W=s?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",q=s?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",Y=s?"row":"col",re=s?"col":"row",se=`
    let inChannels = i32(uniforms.w_shape[2]);
    let outWidth = ${s?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
    let outRow = ${Y} / outWidth;
    let outCol = ${Y} % outWidth;

    let WRow = ${re} / (i32(uniforms.w_shape[1]) * inChannels);
    let WCol = ${re} / inChannels % i32(uniforms.w_shape[1]);
    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];
    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];
    let xCh = ${re} % inChannels;
    var resData = ${nt$2(v,y)}(0.0);
    // The bounds checking is always needed since we use it to pad zero for
    // the 'same' padding type.
    if (xRow >= 0 && xRow < ${W} && xCol >= 0 && xCol < ${q}) {
      ${E}
      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));
      ${x(v)}
    }
    return resData;`,de=s?l&&d?`
    let col = colIn * ${v};
    ${se}`:`
    let col = colIn * ${v};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
      ${se}
    }
    return ${nt$2(v,y)}(0.0);`:d&&c?`
    let col = colIn * ${v};
    ${se}`:`
    let col = colIn * ${v};
    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
      ${se}
    }
    return ${nt$2(v,y)}(0.0);`,he=`${C(b)}`,ge=nt$2($,y),Se=nt$2(s?v:b,y),Ae=nt$2(s?b:v,y),Re=kt(g,ge,y);return`
    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${Se} {
      ${s?de:he}
    }

    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${Ae} {
      ${s?he:de}
    }

    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${ge}) {
      let col = colIn * ${$};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)
      {
      var value = valueIn;
      let outWidth = ${s?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${N}
      ${ti$1(f)}
      ${Re}
      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);
      }
    }`},Uu$1=(s,l,c,d,f,g,v,b)=>{let $=l.format==="NHWC",y=$?s[0].dims[3]:s[0].dims[1],x=c[0],C=$?c[2]:c[3],E=$?c[1]:c[2],N=$?c[3]:c[1],W=$&&(y%4===0||y%3===0)&&N%4===0,q=$?N:C*E,Y=$?C*E:N,re=[8,8,1],se=d<=8?[4,1,1]:[4,4,1],de=[Math.ceil(q/re[0]/se[0]),Math.ceil(Y/re[1]/se[1]),Math.ceil(x/re[2]/se[2])];Ne("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${de}`);let he=W?$&&y%4!==0?3:4:1,ge=re[1]*se[1],Se=re[0]*se[0],Ae=Math.max(re[0]*he,re[1]),Re=d%ge===0,Be=f%Se===0,Ke=g%Ae===0,Lr=W?[he,4,4]:[1,1,1],_y=[{type:6,data:d},{type:6,data:f},{type:6,data:g},{type:6,data:[l.pads[0],l.pads[1]]},{type:6,data:l.strides},{type:6,data:l.dilations}];Ot$1(l,_y),_y.push(...X(s[0].dims,s[1].dims));let by=["rank","rank"];v&&(_y.push(...X(s[2].dims)),by.push("rank")),_y.push(...X(c));let yy=my=>{let $t=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Pt(l,$t);let K$=W?4:1,Y$=De(s[0].dataType),W$=`
      fn setOutputAtIndex(flatIndex : i32, value : ${W?`vec4<${Y$}>`:Y$}) {
        result[flatIndex] = ${W?`vec4<${Y$}>`:Y$}(value);
      }
      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${W?`vec4<${Y$}>`:Y$}) {
        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));
        setOutputAtIndex(flatIndex ${W?"/ 4":""}, value);
      }`,U$=U$1("x",s[0].dataType,s[0].dims.length,he===3?1:he),hy=U$1("w",s[1].dataType,s[1].dims.length,K$),G$=[U$,hy],ky=K$1("result",s[0].dataType,c.length,K$);if(v){let $y=U$1("bias",s[2].dataType,s[2].dims.length,K$);G$.push($y),W$+=`
        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${W?`vec4<${Y$}>`:Y$} {
          return bias[coords.${$?"w":"y"}${W?"/ 4":""}];
        }`}return`
        ${ni$1("uniforms.result_strides")}
        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,
        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,
        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };
        ${my.registerUniforms($t).declareVariables(...G$,ky)}
        ${W$}
        ${xp$1($,Re,Be,Ke,v,l,Lr[0],Lr[1],Lr[2],Y$)}
        ${W?rn$1(se,re,Y$,void 0,!$,Ae):nn$1(se,re,Y$,void 0,!$,Ae,!1,void 0,b)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${l.cacheKey};${he};${W};${Re};${Be};${Ke};${ge};${Se};${Ae}`,inputDependencies:by},getRunData:()=>({outputs:[{dims:c,dataType:s[0].dataType}],dispatchGroup:{x:de[0],y:de[1],z:de[2]},programUniforms:_y}),getShaderSource:yy}}}),lo$1,Nu$1,Vu$1=j(()=>{ye$1(),xe(),_e(),co$1(),Zt$1(),lo$1=(s,l,c)=>{let d=s.length>2,f=d?"value += b[output_channel];":"",g=s[0].dims,v=s[1].dims,b=v[0]/l.group,$=l.format==="NHWC",y=oi$1(g,v,l.dilations,l.pads,l.strides,$),x=M$1.size(y),C=[{type:12,data:x},{type:12,data:l.dilations},{type:12,data:[l.strides[0],l.strides[1]]},{type:12,data:[l.pads[0],l.pads[1]]},{type:12,data:b}];Ot$1(l,C),C.push(...X(g,v));let E=["rank","rank"];d&&(C.push(...X(s[2].dims)),E.push("rank")),C.push(...X(y));let N=W=>{let q=K$1("output",s[0].dataType,y.length),Y=De(q.type.tensor),re=kt(l,q.type.value,Y),se=U$1("x",s[0].dataType,g.length),de=U$1("w",s[1].dataType,v.length),he=[se,de];d&&he.push(U$1("b",s[2].dataType,s[2].dims.length));let ge=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:l.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];return Pt(l,ge),`
  ${W.registerUniforms(ge).declareVariables(...he,q)}

  ${W.mainStart()}
    ${W.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let outputIndices = ${q.offsetToIndices("global_idx")};
    let batch: u32 = outputIndices[0];
    let output_channel: u32 = outputIndices[${$?3:1}];
    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${$?1:2}], outputIndices[${$?2:3}]) * uniforms.strides - uniforms.pads;
    let group_id: u32 = output_channel / uniforms.output_channels_per_group;

    var value: ${q.type.value} = ${q.type.value}(0);
    for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {
      let input_channel = group_id * uniforms.w_shape[1] + wInChannel;
      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {
        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];

        if (xHeight < 0u || xHeight >= uniforms.x_shape[${$?1:2}]) {
          continue;
        }

        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {
          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];
          if (xWidth < 0u || xWidth >= uniforms.x_shape[${$?2:3}]) {
            continue;
          }

          let xVal = ${$?se.get("batch","xHeight","xWidth","input_channel"):se.get("batch","input_channel","xHeight","xWidth")};
          let wVal = ${de.get("output_channel","wInChannel","wHeight","wWidth")};
          value += xVal*wVal;
        }
      }
    }
    ${f}
    ${re}
    ${q.setByOffset("global_idx","value")}
  }`};return{name:"GroupedConv",shaderCache:{hint:l.cacheKey,inputDependencies:E},getRunData:()=>({outputs:[{dims:c?c(y):y,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil(x/64)},programUniforms:C}),getShaderSource:N}},Nu$1=(s,l,c)=>{let d=s.length>2,f=Ue$1(c[3]),g=Ue$1(c[2]),v=M$1.size(c)/f/g,b=[s[0].dims[0],s[0].dims[1],s[0].dims[2],s[0].dims[3]/f],$=[s[1].dims[0],s[1].dims[1],s[1].dims[2],s[1].dims[3]/f],y=[c[0],c[1],c[2],c[3]/f],x=[{type:12,data:v},{type:6,data:[l.strides[0],l.strides[1]]},{type:6,data:[l.pads[0],l.pads[1]]}];Ot$1(l,x),x.push(...X(b,$,y));let C=(g-1)*l.strides[1]+$[1],E=N=>{let W=K$1("output",s[0].dataType,y.length,f),q=De(W.type.tensor),Y=kt(l,W.type.value,q),re=U$1("x",s[0].dataType,b.length,f),se=U$1("w",s[1].dataType,$.length,f),de=[re,se];d&&de.push(U$1("b",s[2].dataType,s[2].dims,f));let he=d?"value += b[output_channel];":"",ge=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Pt(l,ge),`
  ${N.registerUniforms(ge).declareVariables(...de,W)}
  ${N.mainStart()}
    ${N.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let width0 = uniforms.output_shape[3];
    let output_channel = global_idx % width0;
    var index1 = global_idx / width0;
    let width1 = uniforms.output_shape[2] / ${g}u;
    let col = (index1 % width1) * ${g}u;
    index1 = index1 / width1;
    let row = index1 % uniforms.output_shape[1];
    let batch = index1 / uniforms.output_shape[1];

    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;

    var x_vals: array<${re.type.value}, ${C}>;
    var values: array<${W.type.value}, ${g}>;
    let input_channel = output_channel;
    // Use constant instead of uniform can give better performance for w's height/width.
    for (var w_height: u32 = 0u; w_height < ${$[0]}; w_height++) {
      let x_height = x_corner.x + i32(w_height);
      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {
        for (var i = 0; i < ${C}; i++) {
          let x_width = x_corner.y + i;
          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {
            x_vals[i] = ${re.get("batch","u32(x_height)","u32(x_width)","input_channel")};
          } else {
            x_vals[i] = ${re.type.value}(0);
          }
        }
        for (var w_width: u32 = 0u; w_width < ${$[1]}; w_width++) {
          let w_val = ${se.get("w_height","w_width","0","output_channel")};
          for (var i = 0u; i < ${g}u; i++) {
            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);
          }
        }
      }
    }

    for (var i = 0u; i < ${g}u; i++) {
      var value = values[i];
      ${he}
      ${Y}
      ${W.set("batch","row","col + i","output_channel","value")};
    }
  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${l.cacheKey};${f};${g};${C};${$[0]};${$[1]}`,inputDependencies:d?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:c,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:x}),getShaderSource:E}}}),po$1,Sp$1,Hu$1,mo$1=j(()=>{ye$1(),xe(),on$2(),_e(),Zt$1(),po$1=(s,l,c,d,f=!1)=>{let g=s[0].dims,v=s[1].dims,b=g[g.length-2],$=v[v.length-1],y=g[g.length-1],x=Ue$1($),C=Ue$1(y),E=Ue$1(b),N=M$1.size(c)/x/E,W=s.length>2,q=d?d.slice(0,-2):c.slice(0,-2),Y=[M$1.size(q),b,$],re=[{type:12,data:N},{type:12,data:b},{type:12,data:$},{type:12,data:y}];Ot$1(l,re),re.push(...X(q,g,v)),W&&re.push(...X(s[2].dims)),re.push(...X(Y));let se=de=>{let he=qn("batch_dims",s[0].dataType,q.length),ge=U$1("a",s[0].dataType,g.length,C),Se=U$1("b",s[1].dataType,v.length,x),Ae=K$1("output",s[0].dataType,Y.length,x),Re=De(Ae.type.tensor),Be=kt(l,Ae.type.value,Re),Ke=[ge,Se],Lr="";if(W){let W$=f?x:1;Ke.push(U$1("bias",s[2].dataType,s[2].dims.length,W$)),Lr=`${f?`value += bias[col / ${W$}];`:`value += ${Ae.type.value}(bias[row + i]);`}`}let _y=g.slice(0,-2),by=v.slice(0,-2),yy=Pr$1(_y,q),my=Pr$1(by,q),$t=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Pt(l,$t);let K$=(W$,U$)=>{let hy=W$.rank,G$=W$.name;if(hy===2)return`var ${G$}_indices = ${W$.type.indices}(0u, 0u);`;let ky=he.rank,$y=`var ${G$}_indices: ${W$.type.indices};`;for(let rS=hy-2-1,lS=ky-1;rS>=0;rS--,lS--)$y+=`
${G$}_indices[${rS}] = ${ky>1?`batch_indices[${lS}]`:"batch_indices"};`;return U$.forEach(rS=>{$y+=`
${G$}_indices[${rS}] = 0;`}),$y+=`${G$}_indices[${hy-2}] = 0u;
                     ${G$}_indices[${hy-1}] = 0u;`,$y},Y$=()=>{let W$=`var a_data: ${ge.type.value};`;for(let U$=0;U$<C;U$++)W$+=`
              let b_data${U$} = b[(b_offset + (k + ${U$}) * uniforms.N + col) / ${x}];`;for(let U$=0;U$<E;U$++){W$+=`a_data = a[(a_offset + (row + ${U$}) * uniforms.K + k) / ${C}];`;for(let hy=0;hy<C;hy++)W$+=`
            values[${U$}] = fma(${Se.type.value}(a_data${C===1?"":`[${hy}]`}), b_data${hy}, values[${U$}]);
`}return W$};return`
  ${de.registerUniforms($t).registerInternalVariables(he).declareVariables(...Ke,Ae)}
  ${de.mainStart()}
    ${de.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let col = (global_idx % (uniforms.N / ${x})) * ${x};
    var index1 = global_idx / (uniforms.N / ${x});
    let stride1 = uniforms.M / ${E};
    let row = (index1 % stride1) * ${E};
    let batch = index1 / stride1;

    ${c.length===2?"":`let batch_indices = ${he.offsetToIndices("batch")};`}
    ${K$(ge,yy)}
    let a_offset = ${ge.indicesToOffset("a_indices")};
    ${K$(Se,my)}
    let b_offset = ${Se.indicesToOffset("b_indices")};
    var values: array<${Ae.type.value}, ${E}>;
    for (var k: u32 = 0u; k < uniforms.K; k = k + ${C}) {
      ${Y$()}
    }
    for (var i = 0u; i < ${E}u; i++) {
      var value = values[i];
      ${Lr}
      ${Be}
      let cur_indices = ${Ae.type.indices}(batch, row + i, col);
      let offset = ${Ae.indicesToOffset("cur_indices")};
      ${Ae.setByOffset(`offset / ${x}`,"value")};
    }
  }
  `};return{name:"MatMulNaive",shaderCache:{hint:`${l.activation};${x};${C};${E};${f}`,inputDependencies:W?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:c,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil(N/64)},programUniforms:re}),getShaderSource:se}},Sp$1=s=>{if(!s||s.length!==2)throw new Error("MatMul requires 2 inputs.");if(s[0].dims[s[0].dims.length-1]!==s[1].dims[s[1].dims.length-2])throw new Error("shared dimension does not match.")},Hu$1=s=>{Sp$1(s.inputs);let l=zt$1.calcShape(s.inputs[0].dims,s.inputs[1].dims,!0);if(!l)throw new Error("Can't use matmul on the given tensors");let c=l[l.length-1],d=s.inputs[0].dims[s.inputs[0].dims.length-1];c<8&&d<8?s.compute(po$1(s.inputs,{activation:""},l)):s.compute(ii$1(s.inputs,{activation:""},l))}}),oi$1,fo$1,Cp$1,Gu,ho$1,Ip,Tp$1,go$1,co$1=j(()=>{xe(),Wu(),on$2(),Vu$1(),Zt$1(),mo$1(),Rr(),oi$1=(s,l,c,d,f,g)=>{let v=s[0],b=s.slice(g?1:2,g?3:4),$=b.length,y=l[0],x=l.slice(2).map((E,N)=>E+(E-1)*(c[N]-1)),C=b.map((E,N)=>E+d[N]+d[N+$]).map((E,N)=>Math.floor((E-x[N]+f[N])/f[N]));return C.splice(0,0,v),C.splice(g?3:1,0,y),C},fo$1=[2,3,1,0],Cp$1=(s,l)=>{if(!s||s.length!==2&&s.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(s[0].dims.length!==4&&s[0].dims.length!==3)throw new Error("currently only support conv 1D and 2D");if(s[0].dims.length!==s[1].dims.length)throw new Error("filter does not have same dimension as input");let c=s[0].dims[l.format==="NHWC"?s[0].dims.length-1:1],d=s[1].dims[1]*l.group;if(c!==d)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(s.length===3&&(s[2].dims.length!==1||s[1].dims[0]!==s[2].dims[0]))throw new Error("invalid bias");let f=s[0].dims.length-2;if(l.dilations.length!==f)throw new Error(`dilations should be ${f}D`);if(l.strides.length!==f)throw new Error(`strides should be ${f}D`);if(l.pads.length!==f*2)throw new Error(`pads should be ${f*2}D`);if(l.kernelShape.length!==0&&l.kernelShape.length!==s[1].dims.length-2)throw new Error("invalid kernel shape")},Gu=(s,l)=>{let c=s.kernelShape.slice();for(let g=2;g<l[1].dims.length;++g)c[g-2]===0&&(c[g-2]=l[1].dims[g]);let d=s.pads.slice();pr$1.adjustPadsBasedOnAutoPad(l[0].dims,s.strides,s.dilations,c,d,s.format==="NHWC",s.autoPad);let f=Object.assign({},s);return Object.assign(f,{kernelShape:c,pads:d}),f},ho$1=s=>{let l=ei$1(s),c=s.format,d=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][s.auto_pad],f=s.dilations,g=s.group,v=s.kernel_shape,b=s.pads,$=s.strides,y=s.w_is_const();return{autoPad:d,format:c,dilations:f,group:g,kernelShape:v,pads:b,strides:$,wIsConst:y,...l,cacheKey:`${s.format};${l.activation};`}},Ip=(s,l,c)=>{let d=Gu(c,l),f=c.format==="NHWC";if(c.group!==1){if(!s.adapterInfo.isArchitecture("ampere")&&f&&l[1].dims[0]===c.group&&l[1].dims[1]===1&&c.dilations[0]===1&&c.dilations[1]===1){let Se=oi$1(l[0].dims,l[1].dims,c.dilations,d.pads,c.strides,f),Ae=s.kernelCustomData.wT??s.compute(xt$1(l[1],fo$1),{inputs:[1],outputs:[c.wIsConst?-2:-1]})[0];c.wIsConst&&!s.kernelCustomData.wT&&(s.kernelCustomData.wT=Ae);let Re=[l[0],Ae];l.length===3&&Re.push(l[2]),s.compute(Nu$1(Re,d,Se),{inputs:Re})}else s.compute(lo$1(l,d));return}let g=l.length===3,v=l[0].dims[f?1:2],b=l[0].dims[f?2:3],$=l[0].dims[f?3:1],y=l[1].dims[2],x=l[1].dims[3],C=oi$1(l[0].dims,l[1].dims,c.dilations,d.pads,c.strides,f),E=C[f?1:2],N=C[f?2:3],W=C[f?3:1],q=f&&y===v&&x===b&&c.pads[0]===0&&c.pads[1]===0;if(q||y===1&&x===1&&c.dilations[0]===1&&c.dilations[1]===1&&c.strides[0]===1&&c.strides[1]===1&&c.pads[0]===0&&c.pads[1]===0){let Se=C[0],Ae,Re,Be,Ke=[];if(f){let by=s.kernelCustomData.wT??s.compute(xt$1(l[1],fo$1),{inputs:[1],outputs:[c.wIsConst?-2:-1]})[0];if(c.wIsConst&&!s.kernelCustomData.wT&&(s.kernelCustomData.wT=by),q){let yy=v*b*$;Ae=l[0].reshape([1,Se,yy]),Re=by.reshape([1,yy,W]),Be=[1,Se,W]}else Ae=l[0].reshape([Se,v*b,$]),Re=by.reshape([1,$,W]),Be=[Se,E*N,W];Ke.push(Ae),Ke.push(Re)}else Ae=l[0].reshape([Se,$,v*b]),Re=l[1].reshape([1,W,$]),Be=[Se,W,E*N],Ke.push(Re),Ke.push(Ae);g&&Ke.push(l[2]);let Lr=Be[2],_y=Ke[0].dims[Ke[0].dims.length-1];Lr<8&&_y<8?s.compute(po$1(Ke,d,C,Be,f),{inputs:Ke}):s.compute(ii$1(Ke,d,C,Be,f),{inputs:Ke});return}let Y=!0,re=s.kernelCustomData.wT??s.compute(xt$1(l[1],fo$1),{inputs:[1],outputs:[c.wIsConst?-2:-1]})[0];c.wIsConst&&!s.kernelCustomData.wT&&(s.kernelCustomData.wT=re);let se=[l[0],re];g&&se.push(l[2]);let de=f?E*N:W,he=f?W:E*N,ge=y*x*$;s.compute(Uu$1(se,d,C,de,he,ge,g,Y),{inputs:se})},Tp$1=(s,l)=>{let c=l.format==="NHWC",d=[s.inputs[0].reshape(c?[s.inputs[0].dims[0],1,s.inputs[0].dims[1],s.inputs[0].dims[2]]:[s.inputs[0].dims[0],s.inputs[0].dims[1],1,s.inputs[0].dims[2]]),s.inputs[1].reshape([s.inputs[1].dims[0],s.inputs[1].dims[1],1,s.inputs[1].dims[2]])];s.inputs.length===3&&d.push(s.inputs[2]);let f=[0,l.pads[0],0,l.pads[1]],g=[1].concat(l.strides),v=[1].concat(l.dilations),b=[1].concat(l.kernelShape),$=Gu({...l,pads:f,strides:g,dilations:v,kernelShape:b},d);s.compute(lo$1(d,$,y=>c?[y[0],y[2],y[3]]:[]))},go$1=(s,l)=>{Cp$1(s.inputs,l),s.inputs[0].dims.length===3?Tp$1(s,l):Ip(s,s.inputs,l)}}),Ap$1,Lu$1,Fu$1=j(()=>{ye$1(),Xt$1(),_e(),Zt$1(),ri$1(),uo$1(),on$2(),Ap$1=(s,l=!1,c,d,f=4)=>{let g=Y=>{switch(Y){case 1:return"return w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];";case 4:return`
            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);
            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);
            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);
            let v0 = w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];
            let v1 = w[getIndexFromCoords4D(coord1, vec4<i32>(uniforms.w_shape))];
            let v2 = w[getIndexFromCoords4D(coord2, vec4<i32>(uniforms.w_shape))];
            let v3 = w[getIndexFromCoords4D(coord3, vec4<i32>(uniforms.w_shape))];
            return ${d}(v0, v1, v2, v3);
            `;default:throw new Error(`innerElementSize ${Y} is not supported.`)}},v=s?`
      let coord = vec4<i32>(batch, iXR, iXC, xCh);
      `:`
      let coord = vec4<i32>(batch, xCh, iXR, iXC);
      `,b=s?`
    let coords = vec4<i32>(
      batch,
      row / outWidth,
      row % outWidth,
      col);
    `:`
    let coords = vec4<i32>(
      batch,
      row,
      col / outWidth,
      col % outWidth);
    `,$=s?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",y=s?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",x=s?"row":"col",C=s?"col":"row",E=`
      let inChannels = ${s?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};
      let outWidth = ${s?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      let outRow = ${x} / outWidth;
      let outCol = ${x} % outWidth;

      let WRow = ${C} / (uniforms.filter_dims[1] * inChannels);
      let WCol = ${C} / inChannels % uniforms.filter_dims[1];
      let xR = f32(outRow - uniforms.pads[0] + uniforms.dilations[0] * WRow) / f32(uniforms.strides[0]);
      let xC = f32(outCol - uniforms.pads[1] + uniforms.dilations[1] * WCol) / f32(uniforms.strides[1]);
      if (xR < 0.0 || xR >= f32(${$}) || fract(xR) > 0.0) {
        return ${d}(0.0);
      }
      if (xC < 0.0 || xC >= f32(${y}) || fract(xC) > 0.0) {
        return ${d}(0.0);
      }
      let iXR = i32(xR);
      let iXC = i32(xC);
      let xCh = ${C} % inChannels;
      ${v}
      return x[getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape))/${f}];`,N=s?`
      let col = colIn * ${f};
      if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {
        ${E}
      }
      return ${d}(0.0);`:`
      let col = colIn * ${f};
      if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {
        ${E}
      }
      return ${d}(0.0);`,W=`
      let col = colIn * ${f};
      let inChannels = ${s?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};
      let coordX = uniforms.filter_dims[0] - 1 - row / (uniforms.filter_dims[1] * inChannels);
      let coordY = uniforms.filter_dims[1] - 1 - (row / inChannels) % uniforms.filter_dims[1];
      if (${s?"row < uniforms.dim_inner && col < uniforms.dim_b_outer":"row < uniforms.dim_inner && col < uniforms.dim_a_outer"}  && coordX >= 0 && coordY >= 0) {
        let rowInner = row % inChannels;
        let coord = vec4<i32>(coordX, coordY, col, rowInner);
        ${g(f)}
      }
      return ${d}(0.0);
      `,q=kt(c,d);return`
  fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${d} {
    ${s?N:W}
  }

  fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${d} {
    ${s?W:N}
  }

  fn mm_write(batch: i32, row : i32, colIn : i32, valueInput : ${d}) {
    let col = colIn * ${f};
    if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {
      var value = valueInput;
      let outWidth = ${s?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};
      ${b}
      ${ti$1(l)}
      ${q}
      result[getIndexFromCoords4D(coords, vec4<i32>(uniforms.result_shape))/${f}] = value;
    }
  }`},Lu$1=(s,l,c,d,f,g,v,b)=>{let $=l.format==="NHWC",y=$?s[0].dims[3]:s[0].dims[1],x=c[0],C=$?c[2]:c[3],E=$?c[1]:c[2],N=$?c[3]:c[1],W=$&&y%4===0&&y%3&&N%4===0,q=$?N:C*E,Y=$?C*E:N,re=[8,8,1],se=d<=8?[4,1,1]:[4,4,1],de=[Math.ceil(q/re[0]/se[0]),Math.ceil(Y/re[1]/se[1]),Math.ceil(x/re[2]/se[2])];Ne("verbose",()=>`[conv_backprop_mm_webgpu] dispatch = ${de}`);let he=W?4:1,ge=Math.max(re[0]*he,re[1]),Se=W?4:1,Ae=[l.kernelShape[$?1:2],l.kernelShape[$?2:3]],Re=[Ae[0]+(l.dilations[0]<=1?0:(Ae[0]-1)*(l.dilations[0]-1)),Ae[1]+(l.dilations[1]<=1?0:(Ae[1]-1)*(l.dilations[1]-1))],Be=[Re[0]-1-Math.floor((l.pads[0]+l.pads[2])/2),Re[1]-1-Math.floor((l.pads[1]+l.pads[3])/2)],Ke=[{type:6,data:d},{type:6,data:f},{type:6,data:g},{type:6,data:l.strides},{type:6,data:l.dilations},{type:6,data:Ae},{type:6,data:Be}];Ot$1(l,Ke),Ke.push(...X(s[0].dims,s[1].dims));let Lr=["rank","rank"];v&&(Ke.push(...X(s[2].dims)),Lr.push("rank")),Ke.push(...X(c));let _y=by=>{let yy=U$1("x",s[0].dataType,s[0].dims.length,Se),my=U$1("w",s[1].dataType,s[1].dims.length,1),$t=K$1("result",s[0].dataType,c.length,Se),K$=[yy,my],Y$="";if(v){let hy=U$1("bias",s[2].dataType,s[2].dims.length,Se);K$.push(hy),Y$+=`
          fn getBiasByOutputCoords(coords : vec4<i32>) -> ${hy.type.value} {
            return bias[coords.${$?"w":"y"}${W?"/ 4":""}];
          }`}let W$=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"strides",type:"i32",length:2},{name:"dilations",type:"i32",length:2},{name:"filter_dims",type:"i32",length:Ae.length},{name:"pads",type:"i32",length:Be.length}];Pt(l,W$);let U$=De(s[0].dataType,1);if(U$!=="f16"&&U$!=="f32")throw new Error(`elemType ${U$} is not supported.`);return`
        ${ni$1("uniforms.result_strides")}
        ${by.registerUniforms(W$).declareVariables(...K$,$t)};
        ${Y$}
        ${Ap$1($,v,l,yy.type.value,he)}
        ${W?rn$1(se,re,U$,void 0,!$,ge):nn$1(se,re,U$,void 0,!$,ge,!1,void 0,b)}`};return{name:"Conv2DTransposeMatMul",shaderCache:{hint:`${l.cacheKey};${se};${re};${W}`,inputDependencies:Lr},getRunData:()=>({outputs:[{dims:c,dataType:s[0].dataType}],dispatchGroup:{x:de[0],y:de[1],z:de[2]},programUniforms:Ke}),getShaderSource:_y}}}),Ep,yo$1,qu=j(()=>{ye$1(),Xt$1(),xe(),_e(),Ep=(s,l,c,d,f,g=!1,v,b,$=!1)=>{let y=$?1:2,x=$?2:3,C=$?3:1,E=g?2:1,N=`
  fn setOutputAtIndex(flatIndex : u32, value : ${g?`vec4<${v}>`:v}) {
    result[flatIndex] = ${g?`vec4<${v}>`:v}(value);
  }`;d&&(N+=`
    fn getBiasByOutputCoords(coords : vec4<u32>) -> ${g?`vec4<${v}>`:v} {
      return bias[coords.${$?"w":"y"}${g?"/ 4":""}];
    }`);let W=g?4:1,q=U$1("W",l[1].dataType,l[1].dims.length,W),Y=U$1("Dy",l[0].dataType,l[0].dims.length,W),re=[Y,q];d&&re.push(U$1("bias",l[2].dataType,[c[C]].length,W));let se=K$1("result",l[0].dataType,c.length,W),de=`{
        let batch: u32 = ${f?"global_id.z":"workgroup_id.z"} / uniforms.result_shape[1];
        let r = ${f?"global_id.z":"workgroup_id.z"} % uniforms.result_shape[1];
        let c = ${f?"global_id.y":"workgroup_id.y"} * ${E};
        let d1: u32 = ${f?"global_id.x":"workgroup_id.x"} * 4;

        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(uniforms.pads);

        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
        // ? = to be determined. : = across all values in that axis.
        var dotProd: array<vec4<${v}>, ${E}>;
        for (var i = 0; i < ${E}; i++) {
          dotProd[i] = vec4<${v}>(0.0);
        }
        for (var wR: u32 = 0; wR < uniforms.filter_dims[0]; wR = wR + 1) {
          var dyR = (${v}(dyCorner.x) + ${v}(wR)) / ${v}(uniforms.strides.x);
          let wRPerm = uniforms.filter_dims[0] - 1 - wR;
          if (dyR < 0.0 || dyR >= ${v}(uniforms.Dy_shape[1]) ||
              fract(dyR) > 0.0 || wRPerm < 0) {
            continue;
          }
          let idyR: u32 = u32(dyR);

          for (var wC: u32 = 0; wC < uniforms.filter_dims[1]; wC = wC + 1) {
            let dyC = (${v}(dyCorner.y) + ${v}(wC)) / ${v}(uniforms.strides.y);
            let dyC2 = (${v}(dyCorner.y) + 1.0 + ${v}(wC)) / ${v}(uniforms.strides.y);
            let wCPerm = uniforms.filter_dims[1] - 1 - wC;
            if (wCPerm < 0) {
              continue;
            }
            var bDyCVal = true;
            var bDyCVal2 = true;
            if (dyC < 0.0 || dyC >= ${v}(uniforms.Dy_shape[2]) ||
                fract(dyC) > 0.0) {
              bDyCVal = false;
            }
            if (dyC2 < 0.0 || dyC2 >= ${v}(uniforms.Dy_shape[2]) ||
                fract(dyC2) > 0.0) {
              bDyCVal2 = false;
            }

            let idyC: u32 = u32(dyC);
            let idyC2: u32 = u32(dyC2);
            if (bDyCVal && bDyCVal2) {
              let d2Length = uniforms.Dy_shape[3];
              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${q.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${q.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${q.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${q.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${Y.get("batch","idyR","idyC","d2")};
                let tmpval = vec4<${v}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[0] = dotProd[0] + tmpval;

                xValue =  ${Y.get("batch","idyR","idyC2","d2")};

                dotProd[1] = dotProd[1] + vec4<${v}>(dot(xValue, wValue0),
                                                    dot(xValue, wValue1),
                                                    dot(xValue, wValue2),
                                                    dot(xValue, wValue3));
              }
            } else if (bDyCVal) {
              let d2Length = uniforms.Dy_shape[${C}];
              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${q.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${q.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${q.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${q.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${Y.get("batch","idyR","idyC","d2")};
                let tmpval = vec4<${v}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[0] = dotProd[0] + tmpval;
              }
            } else if (bDyCVal2) {
              let d2Length = uniforms.Dy_shape[3];
              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {
                let wValue0 = ${q.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};
                let wValue1 = ${q.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};
                let wValue2 = ${q.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};
                let wValue3 = ${q.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};

                var xValue = ${Y.get("batch","idyR","idyC2","d2")};
                let tmpval = vec4<${v}>(dot(xValue, wValue0),
                                      dot(xValue, wValue1),
                                      dot(xValue, wValue2),
                                      dot(xValue, wValue3));
                dotProd[1] = dotProd[1] + tmpval;
              }
            }
          }
        }

        for (var i: u32 = 0; i < ${E}; i = i + 1) {
          let value = dotProd[i] + ${d?"bias[c+i]":`vec4<${v}>(0.0)`};
          ${se.set("batch","r","c + i","d1","value")};
        }
      }`,he=`
          let outputIndices = ${se.offsetToIndices("global_idx")};
          let batch = ${se.indicesGet("outputIndices",0)};
          let d1 = ${se.indicesGet("outputIndices",C)};
          let r = ${se.indicesGet("outputIndices",y)};
          let c = ${se.indicesGet("outputIndices",x)};
          let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;
          let dyRCorner = dyCorner.x;
          let dyCCorner = dyCorner.y;
          let groupId = d1 / uniforms.output_channels_per_group;
          let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;
          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).
          // ? = to be determined. : = across all values in that axis.
          var dotProd = ${v}(0.0);
          for (var wR: u32 = 0; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {
            if (wR % uniforms.dilations.x != 0) {
              continue;
            }
            let dyR = (${v}(dyRCorner) + ${v}(wR)) / ${v}(uniforms.strides[0]);
            let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;
            if (dyR < 0.0 || dyR >= ${v}(uniforms.Dy_shape[${y}]) || fract(dyR) > 0.0 ||
                wRPerm < 0) {
              continue;
            }
            let idyR: u32 = u32(dyR);

            for (var wC: u32 = 0; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {
              if (wC % uniforms.dilations.y != 0) {
                continue;
              }
              let dyC = (${v}(dyCCorner) + ${v}(wC)) / ${v}(uniforms.strides.y);
              let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;
              if (dyC < 0.0 || dyC >= ${v}(uniforms.Dy_shape[${x}]) ||
                  fract(dyC) > 0.0 || wCPerm < 0) {
                continue;
              }
              let idyC: u32 = u32(dyC);
              var inputChannel = groupId * uniforms.input_channels_per_group;
              for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group; d2 = d2 + 1) {
                let xValue = ${$?Y.get("batch","idyR","idyC","inputChannel"):Y.get("batch","inputChannel","idyR","idyC")};
                let wValue = ${q.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)")};
                dotProd = dotProd + xValue * wValue;
                inputChannel = inputChannel + 1;
              }
            }
          }
          let value = dotProd + ${d?"bias[d1]":`${v}(0.0)`};
          ${se.setByOffset("global_idx","value")};
        `;return`
  ${s.registerUniforms(b).declareVariables(...re,se)}
  ${N}

    ${s.mainStart()}
    ${s.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};
  ${g?de:he}}`},yo$1=(s,l,c)=>{let d=s.length>2,f=l.outputShape,g=M$1.size(f),v=[Math.ceil(g/64),1,1];Ne("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${v}`);let b=l.format==="NHWC",$=["rank","rank"],y=[l.strides[0],l.strides[1]],x=[l.kernelShape[b?1:2],l.kernelShape[b?2:3]],C=[l.dilations[0],l.dilations[1]],E=[x[0]+(l.dilations[0]<=1?0:(l.kernelShape[b?1:2]-1)*(l.dilations[0]-1)),x[1]+(l.dilations[1]<=1?0:(l.kernelShape[b?2:3]-1)*(l.dilations[1]-1))],N=[E[0]-1-Math.floor((l.pads[0]+l.pads[2])/2),E[1]-1-Math.floor(l.pads[1]+l.pads[3])/2],W=!1,q=l.group,Y=s[1].dims,re=Y[0]/q,se=Y[1],de=[{type:12,data:g},{type:12,data:y},{type:12,data:x},{type:12,data:C},{type:12,data:E},{type:6,data:N},{type:12,data:re},{type:12,data:se},...X(s[0].dims,s[1].dims)];d&&(de.push(...X(s[2].dims)),$.push("rank")),de.push(...X(f));let he=v[1]===1&&v[2]===1,ge=Se=>{let Ae=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:y.length},{name:"filter_dims",type:"u32",length:x.length},{name:"dilations",type:"u32",length:x.length},{name:"effective_filter_dims",type:"u32",length:E.length},{name:"pads",type:"i32",length:N.length},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],Re=De(s[0].dataType);return`${Ep(Se,s,f,d,he,W,Re,Ae,b)}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${l.cacheKey};`,inputDependencies:$},getRunData:()=>({dispatchGroup:{x:v[0],y:v[1],z:v[2]},outputs:[{dims:c?c(f):f,dataType:s[0].dataType}],programUniforms:de}),getShaderSource:ge}}}),kp$1,Op$1,Pp,ju$1,Ku,Rp$1,zp$1,Bp$1,Dp$1,Yu,Xu=j(()=>{Fu$1(),qu(),Zt$1(),Rr(),kp$1=(s,l,c,d,f,g)=>(s-1)*l+c+(d-1)*f+1-g,Op$1=(s,l,c,d,f)=>{let g=Math.floor(s/2);l==="SAME_UPPER"?(c[d]=g,c[f]=s-g):l==="SAME_LOWER"&&(c[d]=s-g,c[f]=g)},Pp=(s,l,c,d,f,g,v,b,$,y)=>{let x=s.length-2,C=y.length===0;if($.length===0)for(let W=0;W<x;++W)$.push(0);let E=s[0],N=l[b?3:1]*f;for(let W=0,q=s.length-x-(b?1:0);W<x;++W,++q){let Y=s[q],re=C?Y*v[W]:y[W],se=kp$1(Y,v[W],g[W],l[q],c[W],re);Op$1(se,d,g,W,W+x),C&&y.push(v[W]*(Y-1)+$[W]+(l[q]-1)*c[W]+1-g[W]-g[W+x])}y.splice(0,0,E),y.splice(b?3:1,0,N)},ju$1=(s,l)=>{let c=s.kernelShape.slice();if(s.kernelShape.length===0||s.kernelShape.reduce((C,E)=>C*E,1)===0){c.length=0;for(let C=2;C<l[1].dims.length;++C)c.push(l[1].dims[C])}let d=s.format==="NHWC";c.splice(0,0,l[1].dims[0]),c.splice(d?3:1,0,l[1].dims[1]);let f=s.pads.slice(),g=s.outputShape.slice(),v=s.outputPadding.slice(),b=l[0].dims,$=s.dilations.slice();if($.reduce((C,E)=>C+E,0)===0){let C=l[0].dims.length-2;$=new Array(C).fill(1)}let y=s.strides.slice();if(y.reduce((C,E)=>C+E,0)===0){let C=l[0].dims.length-2;y=new Array(C).fill(1)}Pp(b,c,$,s.autoPad,s.group,f,y,d,v,g);let x=Object.assign({},s);return Object.assign(x,{kernelShape:c,pads:f,outputPadding:v,outputShape:g,dilations:$,strides:y}),x},Ku=s=>{let l=ei$1(s),c=s.format,d=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof s.autoPad>"u"?0:s.autoPad],f=s.dilations,g=s.group,v=s.kernelShape,b=s.pads,$=s.strides,y=s.wIsConst(),x=s.outputPadding,C=s.outputShape;return{autoPad:d,format:c,dilations:f,group:g,kernelShape:v,outputPadding:x,outputShape:C,pads:b,strides:$,wIsConst:y,...l,cacheKey:`${s.format};${l.activation};`}},Rp$1=(s,l)=>{if(!s||s.length!==2&&s.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(s[0].dims.length!==4&&s[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(s[0].dims.length!==s[1].dims.length)throw new Error("filter does not have same dimension as input");let c=s[0].dims[l.format==="NHWC"?s[0].dims.length-1:1],d=s[1].dims[0];if(c!==d)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let f=s[1].dims[1]*l.group;if(s.length===3&&(s[2].dims.length!==1||s[2].dims[0]!==f))throw new Error("invalid bias");let g=s[0].dims.length-2;if(l.dilations.reduce((v,b)=>v+b,0)>0&&l.dilations.length!==g)throw new Error(`dilations should be ${g}D`);if(l.strides.reduce((v,b)=>v+b,0)>0&&l.strides.length!==g)throw new Error(`strides should be ${g}D`);if(l.pads.reduce((v,b)=>v+b,0)>0&&l.pads.length!==g*2)throw new Error(`pads should be ${g*2}D`);if(l.outputPadding.length!==g&&l.outputPadding.length!==0)throw new Error(`output_padding should be ${g}D`);if(l.kernelShape.reduce((v,b)=>v+b,0)>0&&l.kernelShape.length!==0&&l.kernelShape.length!==s[1].dims.length-2)throw new Error("invalid kernel shape");if(l.outputShape.length!==0&&l.outputShape.length!==s[0].dims.length-2)throw new Error("invalid output shape")},zp$1=[2,3,1,0],Bp$1=(s,l,c)=>{let d=ju$1(c,l),f=c.format==="NHWC",g=d.outputShape,v=g[f?3:1],b=l[0].dims[f?3:1];if(d.group!==1||v===1&&b===1){s.compute(yo$1(l,d));return}let $=g[f?1:2],y=g[f?2:3],x=l[1].dims[2],C=l[1].dims[3],E=f?$*y:v,N=f?v:$*y,W=x*C*b,q=!0,Y=s.kernelCustomData.wT??s.compute(xt$1(l[1],zp$1),{inputs:[1],outputs:[c.wIsConst?-2:-1]})[0];c.wIsConst&&!s.kernelCustomData.wT&&(s.kernelCustomData.wT=Y);let re=[l[0],Y],se=l.length===3;se&&(!f&&l[2].dims.length===1?re.push(l[2].reshape([l[2].dims[0],1,1])):re.push(l[2])),s.compute(Lu$1(re,d,g,E,N,W,se,q),{inputs:re})},Dp$1=(s,l)=>{let c=l.format==="NHWC",d=[s.inputs[0].reshape(c?[s.inputs[0].dims[0],1,s.inputs[0].dims[1],s.inputs[0].dims[2]]:[s.inputs[0].dims[0],s.inputs[0].dims[1],1,s.inputs[0].dims[2]]),s.inputs[1].reshape([s.inputs[1].dims[0],s.inputs[1].dims[1],1,s.inputs[1].dims[2]])];s.inputs.length===3&&d.push(s.inputs[2]);let f=l.kernelShape;(f.length===0||f[0]===0)&&(f=[s.inputs[1].dims[2]]);let g=l.dilations;(g.length===0||g[0]===0)&&(g=[1]);let v=l.strides;(v.length===0||v[0]===0)&&(v=[1]);let b=l.pads;b.length===0&&(b=[0,0]),b=[0,b[0],0,b[1]],v=[1].concat(v),g=[1].concat(g),f=[1].concat(f);let $=ju$1({...l,pads:b,strides:v,dilations:g,kernelShape:f},d);s.compute(yo$1(d,$,y=>c?[y[0],y[2],y[3]]:[y[0],y[1],y[3]]))},Yu=(s,l)=>{Rp$1(s.inputs,l),s.inputs[0].dims.length===3?Dp$1(s,l):Bp$1(s,s.inputs,l)}}),Mp,Zu,Qu,Ju=j(()=>{ye$1(),xe(),Ze$1(),_e(),Mp=(s,l,c,d)=>{let f=M$1.size(l),g=l.length,v=U$1("input",s,g),b=K$1("output",s,g),$=c.dataType===6?c.getInt32Array()[0]:Number(c.getBigInt64Array()[0]),y=M$1.normalizeAxis($,g),x=C=>{let E=` i32(${v.indicesGet("inputIndices","uniforms.axis")}) `,N=fe("uniforms.input_shape","uniforms.axis",g),W=d.reverse?E+(d.exclusive?" + 1":""):"0",q=d.reverse?N:E+(d.exclusive?"":" + 1");return`
                ${C.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(v,b)}
                ${C.mainStart()}
                  ${C.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
                  var inputIndices = ${b.offsetToIndices("global_idx")};
                  var sum = ${b.type.value}(0);
                  let first : i32 = ${W};
                  let last : i32 = ${q};
                  for (var i : i32 = first; i < last; i++) {
                    ${v.indicesSet("inputIndices","uniforms.axis","u32(i)")};
                    sum = sum + ${v.getByIndices("inputIndices")};
                  }
                  ${b.setByOffset("global_idx","sum")};
                }`};return{name:"CumSum",shaderCache:{hint:d.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:l,dataType:s}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:[{type:12,data:f},{type:12,data:y},...X(l,l)]}),getShaderSource:x}},Zu=(s,l)=>{let c=s.inputs[0].dims,d=s.inputs[0].dataType,f=s.inputs[1];s.compute(Mp(d,c,f,l),{inputs:[0]})},Qu=s=>{let l=s.exclusive===1,c=s.reverse===1;return we$1({exclusive:l,reverse:c})}}),Up$1,Wp$1,Np,el$1,tl$1,rl$1=j(()=>{ye$1(),xe(),Ze$1(),_e(),Up$1=s=>{if(!s||s.length!==1)throw new Error("DepthToSpace requires 1 input.");if(s[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},Wp$1=(s,l,c,d)=>{let f=[];f.push(`fn perm(i: ${d.type.indices}) -> ${c.type.indices} {
    var a: ${c.type.indices};`);for(let g=0;g<l;++g)f.push(c.indicesSet("a",s[g],`i[${g}]`));return f.push("return a;}"),f.join(`
`)},Np=(s,l)=>{let c,d,f,g,v,b,$=l.format==="NHWC",y=l.blocksize,x=l.mode==="DCR";$?([c,d,f,g]=s.dims,v=x?[c,d,f,y,y,g/y**2]:[c,d,f,g/y**2,y,y],b=x?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([c,d,f,g]=[s.dims[0],s.dims[2],s.dims[3],s.dims[1]],v=x?[c,y,y,g/y**2,d,f]:[c,g/y**2,y,y,d,f],b=x?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let C=s.reshape(v),E=C.dims.length,N=s.dataType,W=U$1("a",N,E),q=K$1("output",N,E),Y=re=>`
  ${re.registerUniform("output_size","u32").declareVariables(W,q)}

  ${Wp$1(b,E,W,q)}

  ${re.mainStart()}
    ${re.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let indices = ${q.offsetToIndices("global_idx")};
    let aIndices = perm(indices);

    ${q.setByOffset("global_idx",W.getByIndices("aIndices"))}
  }`;return{name:"DepthToSpace",shaderCache:{hint:`${s.dims};${l.blocksize};${l.mode}`,inputDependencies:["rank"]},getRunData:re=>{let se=$?[c,d*y,f*y,g/y**2]:[c,g/y**2,d*y,f*y],de=M$1.size(se),he=C.dims,ge=M$1.sortBasedOnPerm(he,b);return{outputs:[{dims:se,dataType:re[0].dataType}],dispatchGroup:{x:Math.ceil(de/64)},programUniforms:[{type:12,data:de},...X(he,ge)]}},getShaderSource:Y}},el$1=(s,l)=>{Up$1(s.inputs),s.compute(Np(s.inputs[0],l))},tl$1=s=>we$1({blocksize:s.blocksize,mode:s.mode,format:s.format})}),bo$1,ai$1,nl$1,Vp$1,Hp$1,vo$1,wo$1,il$1,Gp$1,ol$1,al$1,sl$1=j(()=>{ye$1(),xe(),Ze$1(),_e(),bo$1="[a-zA-Z]|\\.\\.\\.",ai$1="("+bo$1+")+",nl$1="^"+ai$1+"$",Vp$1="("+ai$1+",)*"+ai$1,Hp$1="^"+Vp$1+"$",vo$1=class{constructor(s=-1){this.symbolToIndices=new Map,this.inputIndex=s}addSymbol(s,l){let c=this.symbolToIndices.get(s);c===void 0?c=[l]:c.push(l),this.symbolToIndices.set(s,c)}},wo$1=class{constructor(s,l){var f;this.equation=l,this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[c,d]=l.includes("->")?l.split("->",2):[l,""];if(!c.match(RegExp(Hp$1)))throw new Error("Invalid LHS term");if(c.split(",").forEach((g,v)=>{let b=s[v].dims.slice();if(!g.match(RegExp(nl$1)))throw new Error("Invalid LHS term");let $=this.processTerm(g,!0,b,v);this.lhs.push($)}),d==="")d+=[...this.symbolToInfo.entries()].filter(([g,v])=>v.count===1||g==="...").map(([g])=>g).join("");else if(!d.match(RegExp(ai$1)))throw new Error("Invalid RHS");(f=d.match(RegExp(bo$1,"g")))==null||f.forEach(g=>{if(g==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let v=this.symbolToInfo.get(g);if(v===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(v.dimValue)}}),this.rhs=this.processTerm(d,!1,this.outputDims)}addSymbol(s,l,c){let d=this.symbolToInfo.get(s);if(d!==void 0){if(d.dimValue!==l&&d.count!==1)throw new Error("Dimension mismatch");d.count++,d.inputIndices.push(c)}else d={count:1,dimValue:l,inputIndices:[c]};this.symbolToInfo.set(s,d)}processTerm(s,l,c,d=-1){let f=c.length,g=!1,v=[],b=0;if(!s.match(RegExp(nl$1))&&!l&&s!=="")throw new Error("Invalid LHS term");let $=s.match(RegExp(bo$1,"g")),y=new vo$1(d);return $==null||$.forEach((x,C)=>{if(x==="..."){if(g)throw new Error("Only one ellipsis is allowed per input term");g=!0;let E=f-$.length+1;if(E<0)throw new Error("Ellipsis out of bounds");if(v=c.slice(b,b+E),this.hasEllipsis){if(this.ellipsisDims.length!==v.length||this.ellipsisDims.toString()!==v.toString())throw new Error("Ellipsis dimensions mismatch")}else if(l)this.hasEllipsis=!0,this.ellipsisDims=v;else throw new Error("Ellipsis must be specified in the LHS");for(let N=0;N<v.length;N++){let W=String.fromCharCode(48+N);y.addSymbol(W,C+N),this.addSymbol(W,c[b++],d)}}else y.addSymbol(x,C+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(x,c[b++],d)}),y}},il$1=s=>s+"_max",Gp$1=(s,l,c,d)=>{let f=s.map(y=>y.length).map((y,x)=>U$1(`input${x}`,l,y)),g=M$1.size(d),v=K$1("output",l,d.length),b=[...c.symbolToInfo.keys()].filter(y=>!c.rhs.symbolToIndices.has(y)),$=y=>{let x=[],C="var prod = 1.0;",E="var sum = 0.0;",N="sum += prod;",W=[],q=[],Y=[],re=[],se=c.symbolToInfo.size===c.rhs.symbolToIndices.size;c.symbolToInfo.forEach((he,ge)=>{var Se;if(c.rhs.symbolToIndices.has(ge)){let Ae=(Se=c.rhs.symbolToIndices.get(ge))==null?void 0:Se[0];Ae!==void 0&&c.lhs.forEach((Re,Be)=>{if(he.inputIndices.includes(Be)){let Ke=Re.symbolToIndices.get(ge);if(Ke===void 0)throw new Error("Invalid symbol error");Ke.forEach(Lr=>{x.push(`${f[Be].indicesSet(`input${Be}Indices`,Lr,v.indicesGet("outputIndices",Ae))}`)})}})}else c.lhs.forEach((Ae,Re)=>{if(he.inputIndices.includes(Re)){let Be=Ae.symbolToIndices.get(ge);if(Be===void 0)throw new Error("Invalid symbol error");Be.forEach(Ke=>{W.push(`${f[Re].indicesSet(`input${Re}Indices`,Ke,`${ge}`)}`)}),re.push(`prod *= ${f[Re].getByIndices(`input${Re}Indices`)};`)}}),q.push(`for(var ${ge}: u32 = 0; ${ge} < uniforms.${il$1(ge)}; ${ge}++) {`),Y.push("}")});let de=se?[...x,`let sum = ${f.map((he,ge)=>he.getByIndices(`input${ge}Indices`)).join(" * ")};`]:[...x,E,...q,...W,C,...re,N,...Y];return`
            ${y.registerUniforms(b.map(he=>({name:`${il$1(he)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...f,v)}

            ${y.mainStart()}
            ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
            var outputIndices = ${v.offsetToIndices("global_idx")};
            ${f.map((he,ge)=>`var input${ge}Indices: ${f[ge].type.indices};`).join(`
`)}
            ${de.join(`
`)};
            ${v.setByOffset("global_idx","sum")};
          }`};return{name:"Einsum",shaderCache:{hint:c.equation,inputDependencies:s.map(()=>"rank")},getRunData:()=>{let y=b.filter(C=>c.symbolToInfo.has(C)).map(C=>{var E;return{type:12,data:((E=c.symbolToInfo.get(C))==null?void 0:E.dimValue)||0}});y.push({type:12,data:g});let x=s.map((C,E)=>[...X(C)]).reduce((C,E)=>C.concat(E),y);return x.push(...X(d)),{outputs:[{dims:d,dataType:l}],dispatchGroup:{x:Math.ceil(g/64)},programUniforms:x}},getShaderSource:$}},ol$1=(s,l)=>{let c=new wo$1(s.inputs,l.equation),d=c.outputDims,f=s.inputs.map((g,v)=>g.dims);s.compute(Gp$1(f,s.inputs[0].dataType,c,d))},al$1=s=>{let l=s.equation.replace(/\s+/g,"");return we$1({equation:l})}}),Lp$1,ul$1,Fp$1,qp$1,ll$1,dl$1=j(()=>{ye$1(),xe(),_e(),Lp$1=s=>{if(!s||s.length!==2)throw new Error("Expand requires 2 input.");let l=s[0].dims,c=Array.from(s[1].getBigInt64Array(),Number),d=c.length<l.length?0:c.length-l.length,f=l.length<c.length?0:l.length-c.length;for(;d<c.length&&f<l.length;++d,++f)if(c[d]!==l[f]&&c[d]!==1&&l[f]!==1)throw new Error("Expand requires shape to be broadcastable to input")},ul$1=(s,l)=>{let c=s.length-l.length,d=[];for(let f=0;f<c;++f)d.push(s[f]);for(let f=0;f<l.length;++f)d.push(l[f]===1?s[f+c]:l[f]);return d},Fp$1=(s,l)=>s.length>l.length?ul$1(s,l):ul$1(l,s),qp$1=s=>{let l=s[0].dims,c=Array.from(s[1].getBigInt64Array(),Number),d=Fp$1(l,c),f=s[0].dataType,g=f===9?4:1,v=Math.ceil(M$1.size(d)/g),b=y=>{let x=U$1("input",f,l.length,g),C=K$1("output",f,d.length,g),E;if(f===9){let N=(W,q,Y="")=>`
          let outputIndices${q} = ${C.offsetToIndices(`outputOffset + ${q}u`)};
          let offset${q} = ${x.broadcastedIndicesToOffset(`outputIndices${q}`,C)};
          let index${q} = offset${q} / 4u;
          let component${q} = offset${q} % 4u;
          ${W}[${q}] = ${Y}(${x.getByOffset(`index${q}`)}[component${q}]);
        `;E=`
        let outputOffset = global_idx * ${g};
        var data = vec4<u32>(0);
        ${N("data",0,"u32")}
        ${N("data",1,"u32")}
        ${N("data",2,"u32")}
        ${N("data",3,"u32")}
        ${C.setByOffset("global_idx","data")}
      }`}else E=`
        let outputIndices = ${C.offsetToIndices("global_idx")};
        let inputOffset = ${x.broadcastedIndicesToOffset("outputIndices",C)};
        ${C.setByOffset("global_idx",x.getByOffset("inputOffset"))}
      }`;return`
    ${y.registerUniform("vec_size","u32").declareVariables(x,C)}
    ${y.mainStart()}
    ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
    ${E}`},$=[{type:12,data:v},...X(l,d)];return{name:"Expand",shaderCache:{hint:`${d.length}`,inputDependencies:["rank"]},getShaderSource:b,getRunData:()=>({outputs:[{dims:d,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:$})}},ll$1=s=>{Lp$1(s.inputs),s.compute(qp$1(s.inputs),{inputs:[0]})}}),jp$1,cl$1,pl$1=j(()=>{ye$1(),xe(),_e(),Jn$1(),jp$1=s=>{let l=s[0].dataType,c=M$1.size(s[0].dims),d=M$1.size(s[1].dims),f=d%4===0,g=v=>{let b=U$1("x",l,[1],4),$=U$1("bias",l,[1],4),y=K$1("y",l,[1],4),x=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],C=N=>`
      let bias${N}_offset: u32 = (global_idx * 4 + ${N}) % uniforms.bias_size;
      let bias${N} = ${$.getByOffset(`bias${N}_offset / 4`)}[bias${N}_offset % 4];`,E=f?`
      let bias = ${$.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${C(0)}${C(1)}${C(2)}${C(3)}
      let bias = ${b.type.value}(bias0, bias1, bias2, bias3);`;return`${v.registerUniforms(x).declareVariables(b,$,y)}

    ${ao$1(rt$1(l))}

    ${v.mainStart(mr$1)}
      ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}

      let x = ${b.getByOffset("global_idx")};
      ${E}
      let x_in = x + bias;
      ${y.setByOffset("global_idx",so$1("x_in"))}
    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${f}`,inputDependencies:["type","type"]},getShaderSource:g,getRunData:v=>({outputs:[{dims:v[0].dims,dataType:v[0].dataType}],programUniforms:[{type:12,data:Math.ceil(c/4)},{type:12,data:d}],dispatchGroup:{x:Math.ceil(c/mr$1/4)}})}},cl$1=s=>{s.inputs.length<2||M$1.size(s.inputs[1].dims)===0?wu$1(s):s.compute(jp$1(s.inputs))}}),Kp$1,Yp$1,ml$1,fl$1,hl$1=j(()=>{ye$1(),xe(),Ze$1(),_e(),Kp$1=s=>{if(!s||s.length!==2)throw new Error("Gather requires 2 inputs.")},Yp$1=(s,l)=>{let c=s[0].dims,d=s[1].dims,f=c.length,g=M$1.normalizeAxis(l.axis,f),v=c.slice(0);v.splice(g,1,...d);let b=c[g],$=s[0].dataType===9?4:1,y=Math.ceil(M$1.size(v)/$),x=[{type:12,data:y},{type:6,data:b},{type:12,data:g},...X(s[0].dims,s[1].dims,v)],C=E=>{let N=U$1("data",s[0].dataType,s[0].dims.length,$),W=U$1("inputIndices",s[1].dataType,s[1].dims.length),q=K$1("output",s[0].dataType,v.length,$),Y=se=>{let de=d.length,he=`var indicesIndices${se}  = ${W.type.indices}(0);`;for(let ge=0;ge<de;ge++)he+=`${de>1?`indicesIndices${se}[${ge}]`:`indicesIndices${se}`} = ${v.length>1?`outputIndices${se}[uniforms.axis + ${ge}]`:`outputIndices${se}`};`;he+=`
          var idx${se} = ${W.getByIndices(`indicesIndices${se}`)};
          if (idx${se} < 0) {
            idx${se} = idx${se} + uniforms.axisDimLimit;
          }
          var dataIndices${se} : ${N.type.indices};
        `;for(let ge=0,Se=0;ge<f;ge++)ge===g?(he+=`${f>1?`dataIndices${se}[${ge}]`:`dataIndices${se}`} = u32(idx${se});`,Se+=de):(he+=`${f>1?`dataIndices${se}[${ge}]`:`dataIndices${se}`} = ${v.length>1?`outputIndices${se}[${Se}]`:`outputIndices${se}`};`,Se++);return he},re;if(s[0].dataType===9){let se=(de,he,ge="")=>`
          let outputIndices${he} = ${q.offsetToIndices(`outputOffset + ${he}u`)};
          ${Y(he)};
          let offset${he} = ${N.indicesToOffset(`dataIndices${he}`)};
          let index${he} = offset${he} / 4u;
          let component${he} = offset${he} % 4u;
          ${de}[${he}] = ${ge}(${N.getByOffset(`index${he}`)}[component${he}]);
        `;re=`
        let outputOffset = global_idx * ${$};
        var value = vec4<u32>(0);
        ${se("value",0,"u32")}
        ${se("value",1,"u32")}
        ${se("value",2,"u32")}
        ${se("value",3,"u32")}
        ${q.setByOffset("global_idx","value")}
      `}else re=`
      let outputIndices = ${q.offsetToIndices("global_idx")};
      ${Y("")};
      let value = ${N.getByIndices("dataIndices")};
      ${q.setByOffset("global_idx","value")};
      `;return`
      ${E.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(N,W,q)}
      ${E.mainStart()}
        ${E.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        ${re}
      }`};return{name:"Gather",shaderCache:{hint:l.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:v,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil(y/64)},programUniforms:x}),getShaderSource:C}},ml$1=s=>we$1({axis:s.axis}),fl$1=(s,l)=>{let c=s.inputs;Kp$1(c),s.compute(Yp$1(s.inputs,l))}}),Xp$1,Zp$1,gl$1,yl$1,bl$1=j(()=>{ye$1(),xe(),Ze$1(),_e(),Xp$1=s=>{if(!s||s.length!==2)throw new Error("GatherElements requires 2 inputs.");if(s[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(s[0].dims.length!==s[1].dims.length)throw new Error(`GatherElements requires that the data input and
                     indices input tensors be of same rank.`)},Zp$1=(s,l)=>{let c=s[0].dims,d=s[0].dataType,f=c.length,g=s[1].dims,v=s[1].dataType,b=M$1.normalizeAxis(l.axis,f),$=c[b],y=g.slice(0),x=M$1.size(y),C=U$1("input",d,f),E=U$1("indicesInput",v,g.length),N=K$1("output",d,y.length),W=[{type:12,data:x},{type:6,data:$},{type:12,data:b}];return W.push(...X(c,g,y)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:y,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil(x/64)},programUniforms:W}),getShaderSource:q=>`
      ${q.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(C,E,N)}
      ${q.mainStart()}
      ${q.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

      let outputIndices = ${N.offsetToIndices("global_idx")};

      var idx = ${E.getByOffset("global_idx")};
      if (idx < 0) {
        idx = idx + uniforms.axisDimLimit;
      }
      var inputIndices = ${C.type.indices}(outputIndices);
      ${C.indicesSet("inputIndices","uniforms.axis","u32(idx)")};
      let value = ${C.getByIndices("inputIndices")};

      ${N.setByOffset("global_idx","value")};
  }`}},gl$1=s=>we$1({axis:s.axis}),yl$1=(s,l)=>{let c=s.inputs;Xp$1(c),s.compute(Zp$1(s.inputs,l))}}),Qp$1,Jp$1,vl$1,wl$1,$l$1=j(()=>{ye$1(),xe(),_e(),Qp$1=s=>{if(!s)throw new Error("Input is missing");if(s.length<2||s.length>3)throw new Error("Invaid input number.");if(s.length===3&&s[2].dims.length>2)throw new Error("Invalid input shape of C");if(s[0].dataType!==s[1].dataType||s.length===3&&s[0].dataType!==s[2].dataType)throw new Error("Input types are mismatched")},Jp$1=(s,l)=>{let c=s[0].dims.slice(),d=s[1].dims.slice(),[f,g,v]=Gn.getShapeOfGemmResult(c,l.transA,d,l.transB,s.length===3?s[2].dims:void 0),b=[f,g];if(!b)throw new Error("Can't use gemm on the given tensors");let $=M$1.size(b),y=[{type:12,data:$},{type:12,data:f},{type:12,data:g},{type:12,data:v},{type:1,data:l.alpha},{type:1,data:l.beta}],x=["type","type"];s.length===3&&(y.push(...X(s[2].dims)),x.push("rank")),y.push(...X(b));let C=E=>{let N="";l.transA&&l.transB?N="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":l.transA&&!l.transB?N="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!l.transA&&l.transB?N="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!l.transA&&!l.transB&&(N="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let W=l.alpha===1?"":"value *= uniforms.alpha;",q=U$1("a",s[0].dataType,s[0].dims),Y=U$1("b",s[1].dataType,s[1].dims),re=q.type.value,se=null,de=[q,Y];s.length===3&&(se=U$1("c",s[2].dataType,s[2].dims.length),de.push(se));let he=K$1("output",s[0].dataType,b.length);de.push(he);let ge=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`
  ${E.registerUniforms(ge).declareVariables(...de)}

  ${E.mainStart()}
    ${E.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

    let m = global_idx / uniforms.N;
    let n = global_idx % uniforms.N;

    var value = ${re}(0);
    for (var k: u32 = 0u; k < uniforms.K; k++) {
      ${N}
    }

    ${W}
    ${se!=null?`let cOffset = ${se.broadcastedIndicesToOffset("vec2(m, n)",he)}; value += ${re}(uniforms.beta) * ${se.getByOffset("cOffset")};`:""}
    output[global_idx] = value;
  }`};return{name:"Gemm",shaderCache:{hint:`${l.cacheKey}`,inputDependencies:x},getRunData:()=>({outputs:[{dims:b,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil($/64)},programUniforms:y}),getShaderSource:C}},vl$1=s=>{let l=s.transA,c=s.transB,d=s.alpha,f=s.beta;return{transA:l,transB:c,alpha:d,beta:f,cacheKey:`${s.transA};${s.transB};${s.alpha===1}`}},wl$1=(s,l)=>{Qp$1(s.inputs),s.compute(Jp$1(s.inputs,l))}}),em$1,tm$1,rm$1,_l$1,xl$1=j(()=>{ye$1(),xe(),_e(),em$1=(s,l)=>{let c=s[0].dims,d=c,f=2,g=M$1.sizeToDimension(c,f),v=M$1.sizeFromDimension(c,f),b=Ue$1(v),$=v/b,y=[c[0],c[1],$],x=["rank","type","type"],C=[{type:12,data:v},{type:12,data:$}];C.push(...X(y,y));let E=N=>{let W=U$1("x",s[0].dataType,y.length,b),q=U$1("scale",s[1].dataType,s[1].dims),Y=U$1("bias",s[2].dataType,s[2].dims),re=K$1("output",s[0].dataType,y.length,b),se=[W,q,Y,re],de=W.type.value,he=b===1?"f32":`vec${b}<f32>`,ge=64,Se=[{name:"normSize",type:"u32"},{name:"normPackedSize",type:"u32"}];return`
  var<workgroup> meanShared : f32;
  var<workgroup> squaredNormShared : f32;
  var<workgroup> workgroupShared : array<${he}, ${ge}>;
  const workgroupSize = ${ge}u;
  ${N.registerUniforms(Se).declareVariables(...se)}
  ${N.mainStart(ge)}
    let norm = global_idx / workgroupSize;
    let batch = norm / uniforms.x_shape[1];
    let channel = norm % uniforms.x_shape[1];
    let localIndex = local_id.x;

    // initialize workgroup memory
    var initial = ${he}(0);
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      initial = initial + ${he}(${W.get("batch","channel","h")});
    }
    workgroupShared[localIndex] = initial;
    workgroupBarrier();

    // Calculate the mean of current channel data.
    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (localIndex < currSize) {
        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];
      }
      workgroupBarrier();
    }
    if (localIndex == 0) {
      meanShared = ${Et$1("workgroupShared[0]",b)} / f32(uniforms.normSize);
    }
    workgroupBarrier();

    // reinitialize workgroup memory.
    initial = ${he}(0);
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      let deviation =  ${he}(${W.get("batch","channel","h")}) - ${he}(meanShared);
      initial = initial + deviation * deviation;
    }
    workgroupShared[localIndex] = initial;
    workgroupBarrier();

    // Calculate the sum of square of deviation of current channel data.
    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {
      if (localIndex < currSize) {
        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];
      }
      workgroupBarrier();
    }
    if (localIndex == 0) {
      squaredNormShared = ${Et$1("workgroupShared[0]",b)};
    }
    workgroupBarrier();

    let invStdDev = inverseSqrt(squaredNormShared / f32(uniforms.normSize) + f32(${l.epsilon}));
    let channelScale = invStdDev * f32(${q.getByOffset("channel")});
    let channelShift = f32(${Y.getByOffset("channel")}) - meanShared * channelScale;
    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {
      let value = ${W.get("batch","channel","h")} * ${de}(${he}(channelScale)) + ${de}(${he}(channelShift));
      ${re.set("batch","channel","h","value")};
    }
  }`};return{name:"InstanceNormalization",shaderCache:{hint:`${l.epsilon};${b}`,inputDependencies:x},getRunData:()=>({outputs:[{dims:d,dataType:s[0].dataType}],dispatchGroup:{x:g},programUniforms:C}),getShaderSource:E}},tm$1=(s,l,c,d,f,g,v,b)=>{let $=Ue$1(v),y=64,x=$===1?"vec2f":`mat2x${$}f`,C=$===1?"f32":`vec${$}f`,E=(Se,Ae)=>`${x}(${Se}, ${Ae})`,N=f*v/$,W=Math.ceil(g/y),q=["type"],Y=[{type:12,data:W},{type:12,data:g},{type:12,data:Math.floor(v/$)},{type:12,data:Math.floor(g*v/$)}],re=Se=>{let Ae=U$1("input",l.dataType,l.dims,$);return`
  ${Se.declareVariables(Ae)}
  @group(0) @binding(1) var<storage, read_write> output : array<${x}>;
  struct Uniforms {wg_size:u32, H:u32, C:u32, image_size:u32};
  @group(0) @binding(2) var<uniform> uniforms: Uniforms;

  ${Se.mainStart(y)}
    let currentImageNumber = global_idx / ${y} / uniforms.C;
    let currentChannelNumber = (global_idx / ${y}) % uniforms.C;
    let wgOffset = local_id.x * uniforms.wg_size;
    if (wgOffset >= uniforms.H) {
        return;
    }
    let wgMax = min(wgOffset + uniforms.wg_size, uniforms.H);

    let offset = currentImageNumber * uniforms.image_size + currentChannelNumber;
    var sum = ${At("f32",$)};
    var squaredSum = ${At("f32",$)};
    for (var i: u32 = wgOffset; i < wgMax; i++) {
        let value = ${C}(input[offset + i * uniforms.C]);
        sum += value;
        squaredSum += value * value;
    }
    output[global_idx] = ${E("sum","squaredSum")};
  }`},se=s.compute({name:"InstanceNormComputeMean",shaderCache:{hint:`${$}`,inputDependencies:q},getRunData:()=>({outputs:[{dims:[f,v,y,2],dataType:1}],dispatchGroup:{x:f*v/$},programUniforms:Y}),getShaderSource:re},{inputs:[l],outputs:[-1]})[0],de=[{type:12,data:N},{type:12,data:g},{type:12,data:Math.floor(v/$)},{type:12,data:Math.floor(y*v/$)}],he=["type","type","type"],ge=Se=>{let Ae=U$1("scale",c.dataType,c.dims,$),Re=U$1("bias",d.dataType,d.dims,$);return`
  @group(0) @binding(0) var<storage, read> input : array<${x}>;
  @group(0) @binding(1) var<storage, read> scale : array<${Ae.type.storage}>;
  @group(0) @binding(2) var<storage, read> bias : array<${Re.type.storage}>;
  @group(0) @binding(3) var<storage, read_write> output : array<${x}>;
  struct Uniforms {units_of_work : u32, H: u32, C : u32, image_size : u32};
  @group(0) @binding(4) var<uniform> uniforms: Uniforms;

  ${Se.mainStart()}
    ${Se.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.units_of_work")}
    let currentImageNumber = global_idx / uniforms.C;
    let currentChannelNumber = global_idx % uniforms.C;

    let offset = currentImageNumber * uniforms.image_size;
    var sum = ${At("f32",$)};
    var squaredSum = ${At("f32",$)};
    for (var i: u32 = 0; i < min(${y}, uniforms.H); i++) {
        let value = input[offset + i + currentChannelNumber * ${y}];
        sum += value[0];
        squaredSum += value[1];
    }
    sum = sum / f32(uniforms.H);
    squaredSum = squaredSum / f32(uniforms.H);
    let invStdDev = inverseSqrt(squaredSum - sum * sum + f32(${b}));
    let channelScale = invStdDev * ${C}(scale[currentChannelNumber]);
    let channelShift = ${C}(bias[currentChannelNumber]) - sum * channelScale;

    output[global_idx] = ${E("channelScale","channelShift")};
  }`};return s.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${$};${b}`,inputDependencies:he},getRunData:()=>({outputs:[{dims:[f,v,2],dataType:1}],dispatchGroup:{x:Math.ceil(N/64)},programUniforms:de}),getShaderSource:ge},{inputs:[se,c,d],outputs:[-1]})[0]},rm$1=(s,l,c)=>{let d=l[0].dims,f=d,g=d[0],v=d[d.length-1],b=M$1.sizeFromDimension(d,1)/v,$=Ue$1(v),y=M$1.size(f)/$,x=[{type:12,data:b},{type:12,data:Math.floor(v/$)}],C=["type","type"],E=tm$1(s,l[0],l[1],l[2],g,b,v,c.epsilon),N=W=>{let q=De(l[0].dataType),Y=$===1?"vec2f":`mat2x${$}f`,re=$===1?q:`vec${$}<${q}>`,se=U$1("input",l[0].dataType,l[0].dims,$),de=K$1("output",l[0].dataType,f,$);return`
  @group(0) @binding(0) var<storage, read> input : array<${se.type.storage}>;
  @group(0) @binding(1) var<storage, read> scaleInput : array<${Y}>;
  @group(0) @binding(2) var<storage, read_write> output : array<${de.type.storage}>;
  struct Uniforms {H: u32, C : u32};
  @group(0) @binding(3) var<uniform> uniforms: Uniforms;

  ${W.mainStart()}
    let currentImageNumber = global_idx / (uniforms.C * uniforms.H);
    let currentChannelNumber = global_idx % uniforms.C;

    let scaleOffset = currentImageNumber * uniforms.C + currentChannelNumber;
    let scale = scaleInput[scaleOffset];
    output[global_idx] = fma(input[global_idx], ${re}(scale[0]), ${re}(scale[1]));
  }`};s.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${$}`,inputDependencies:C},getRunData:()=>({outputs:[{dims:f,dataType:l[0].dataType}],dispatchGroup:{x:Math.ceil(y/64)},programUniforms:x}),getShaderSource:N},{inputs:[l[0],E]})},_l$1=(s,l)=>{l.format==="NHWC"?rm$1(s,s.inputs,l):s.compute(em$1(s.inputs,l))}}),nm$1,im$1,Sl$1,Cl$1=j(()=>{ye$1(),xe(),_e(),nm$1=s=>{if(!s||s.length<2)throw new Error("layerNorm requires at least 2 inputs.")},im$1=(s,l,c)=>{let d=l.simplified,f=s[0].dims,g=s[1],v=!d&&s[2],b=f,$=M$1.normalizeAxis(l.axis,f.length),y=M$1.sizeToDimension(f,$),x=M$1.sizeFromDimension(f,$),C=M$1.size(g.dims),E=v?M$1.size(v.dims):0;if(C!==x||v&&E!==x)throw new Error(`Size of X.shape()[axis:] == ${x}.
       Size of scale and bias (if provided) must match this.
       Got scale size of ${C} and bias size of ${E}`);let N=[];for(let ge=0;ge<f.length;++ge)ge<$?N.push(f[ge]):N.push(1);let W=Ue$1(x),q=["type","type"],Y=[{type:12,data:y},{type:1,data:x},{type:12,data:Math.floor(x/W)},{type:1,data:l.epsilon}];v&&q.push("type");let re=c>1,se=c>2,de=ge=>{let Se=De(s[0].dataType),Ae=[U$1("x",s[0].dataType,s[0].dims,W),U$1("scale",g.dataType,g.dims,W)];v&&Ae.push(U$1("bias",v.dataType,v.dims,W)),Ae.push(K$1("output",s[0].dataType,b,W)),re&&Ae.push(K$1("mean_data_output",1,N)),se&&Ae.push(K$1("inv_std_output",1,N));let Re=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`
  ${ge.registerUniforms(Re).declareVariables(...Ae)}
  ${ge.mainStart()}
    ${ge.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}
    let offset = global_idx * uniforms.norm_size_vectorized;
    var mean_vector = ${At("f32",W)};
    var mean_square_vector = ${At("f32",W)};

    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {
      let value = ${fr(Se,W,"x[h + offset]")};
      mean_vector += value;
      mean_square_vector += value * value;
    }
    let mean = ${Et$1("mean_vector",W)} / uniforms.norm_size;
    let inv_std_dev = inverseSqrt(${Et$1("mean_square_vector",W)} / uniforms.norm_size ${d?"":"- mean * mean"} + uniforms.epsilon);

    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {
      let f32input = ${fr(Se,W,"x[j + offset]")};
      let f32scale = ${fr(Se,W,"scale[j]")};
      output[j + offset] = ${Ae[0].type.value}((f32input ${d?"":"- mean"}) * inv_std_dev * f32scale
        ${v?`+ ${fr(Se,W,"bias[j]")}`:""}
      );
    }

    ${re?"mean_data_output[global_idx] = mean":""};
    ${se?"inv_std_output[global_idx] = inv_std_dev":""};
  }`},he=[{dims:b,dataType:s[0].dataType}];return re&&he.push({dims:N,dataType:1}),se&&he.push({dims:N,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${W};${c};${d}`,inputDependencies:q},getRunData:()=>({outputs:he,dispatchGroup:{x:Math.ceil(y/64)},programUniforms:Y}),getShaderSource:de}},Sl$1=(s,l)=>{nm$1(s.inputs),s.compute(im$1(s.inputs,l,s.outputCount))}}),om$1,am$1,Il$1,Tl$1,Al$1=j(()=>{ye$1(),xe(),Ze$1(),_e(),om$1=(s,l)=>{if(s.length<3||s.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let c=s[0],d=c.dims.length;if(c.dims[d-1]!==l.k)throw new Error("The last dim of input shape does not match the k value");let f=Math.floor((l.k+l.blockSize-1)/l.blockSize),g=l.blockSize/8*l.bits,v=s[1];if(!M$1.areEqual(v.dims,[l.n,f,g]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let b=s[2].dims;if(M$1.size(b)!==l.n*f)throw new Error("scales input size error.");if(s.length===4){let $=s[3].dims,y=l.bits>4?l.n*f:l.n*Math.floor((f+1)/2);if(M$1.size($)!==y)throw new Error("zeroPoints input size error.")}},am$1=(s,l,c,d)=>{let f=s[0].dims,g=f.length,v=Math.floor((l.k+l.blockSize-1)/l.blockSize),b=f[g-2],$=l.k,y=l.n,x=f.slice(0,g-2),C=M$1.size(x),E=l.blockSize/8*l.bits/4,N=s[0].dataType,W=Ue$1(b),q=Ue$1(l.k),Y=Ue$1(E),re=cr$1(N),se=b*v*re,de=Math.floor(d/se),he=v<=c[0]&&de>0,ge=!he||de>=4?Ue$1(y):de>=2&&Ue$1(y)>=2?2:1,Se=x.concat([b,y]),Ae=M$1.size(Se)/ge/W,Re=he?[]:[{type:12,data:Ae},{type:12,data:l.blockSize}],Be=[C,b,$/q],Ke=M$1.convertShape(s[1].dims).slice();Ke.splice(-1,1,E/Y),Re.push(...X(Be)),Re.push(...X(Ke)),Re.push(...X(s[2].dims)),s.length===4&&Re.push(...X(M$1.convertShape(s[3].dims)));let Lr=[C,b,y/ge];Re.push(...X(Lr));let _y=by=>{let yy=Be.length,my=U$1("a",s[0].dataType,yy,q),$t=U$1("b",12,Ke.length,Y),K$=U$1("scales",s[2].dataType,s[2].dims.length),Y$=[my,$t,K$],W$=s.length===4?U$1("zero_points",12,s[3].dims.length):void 0;W$&&Y$.push(W$);let U$=Lr.length,hy=K$1("output",s[0].dataType,U$,ge),G$=[{name:"output_size",type:"u32"},{name:"block_size",type:"u32"}],ky=De(s[0].dataType),$y=(()=>{switch(q){case 1:return`array<${ky}, 8>`;case 2:return`mat4x2<${ky}>`;case 4:return`mat2x4<${ky}>`;default:throw new Error(`${q}-component is not supported.`)}})(),rS=`
        for (var word: u32 = 0; word < ${E}; word += ${Y}) {
          ${$t.indicesSet("b_indices","2","word")};
          let b_data = ${$t.getByIndices("b_indices")};
          for (var i: u32 = 0; i < ${Y}; i++) {
            let b_value: u32 = ${Y===1?"b_data":"b_data[word + i]"};
            let b_mask: u32 = 0x0F0F0F0Fu;
            let b_value_lower: vec4<u32> = unpack4xU8(b_value & b_mask);
            let b_value_upper: vec4<u32> = unpack4xU8((b_value >> 4) & b_mask);
            let b_quantized_values = ${$y}(${Array.from({length:4},(bS,IS)=>`${ky}(b_value_lower[${IS}]), ${ky}(b_value_upper[${IS}])`).join(", ")});
            let b_dequantized_values = ${q===1?`${$y}(${Array.from({length:8},(bS,IS)=>`(b_quantized_values[${IS}] - zero_point) * scale`).join(", ")});`:`(b_quantized_values - ${$y}(${Array(8).fill("zero_point").join(",")})) * scale;`};
            // Number of B elements per 32-bit word is 32/bits = 32/4 = 8
            for (var m: u32 = 0; m < ${he?b:W}u; m++) {
              ${my.indicesSet("a_indices",yy-2,he?"m":`row * ${W} + m`)};
              ${my.indicesSet("a_indices",yy-1,"word_offset")};
              var input_offset = ${my.indicesToOffset("a_indices")};
              var a_data: ${$y};
              for (var j: u32 = 0; j < ${8/q}; j++) {
                a_data[j] = ${my.getByOffset("input_offset")};
                input_offset++;
              }
              ${he?"workgroup_shared[workgroup_shared_offset + m]":"output_values[m]"}${ge>1?"[c]":""} += ${Array.from({length:8/q},(bS,IS)=>`${q===1?`a_data[${IS}] * b_dequantized_values[${IS}]`:`dot(a_data[${IS}], b_dequantized_values[${IS}])`}`).join(" + ")};
            }
            word_offset += ${8/q};
          }
        }`,lS=W$?`
          zero_point_offset += 4;
          if (zero_point_offset == 32) {
            zero_point_offset = 0;
            zero_point_index++;
            zero_point_word = ${W$.getByOffset("zero_point_index")};
          }`:"";return he?`
        var<workgroup> workgroup_shared: array<${hy.type.value}, ${b*v}>;
        ${by.declareVariables(...Y$,hy)}
        ${by.mainStart([v,1,1])}
          var a_indices: ${my.type.indices};
          var block = local_id.x;
          var col = workgroup_id.y;
          var batch = workgroup_id.z;
          ${my.indicesSet("a_indices","0","batch")};
          // Two zero points are packed into one byte when uniforms.bits is 4.
          for (var c: u32 = 0; c < ${ge}; c++) {
            let col_times_components_plus_c = col * ${ge} + c;
              ${W$?`
            var zero_point_bytes_per_col: u32 = (${v} + 1) / 2;
            var zero_point_byte_count: u32 = col_times_components_plus_c * zero_point_bytes_per_col + (block >> 0x1u);
            var zero_point_word_index: u32 = zero_point_byte_count >> 0x2u;
            var zero_point_byte_offset: u32 = zero_point_byte_count & 0x3u;
            var zero_point_nibble_offset: u32 = block & 0x1u;
            var zero_point_bits_offset: u32 = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);
            var zero_point_word: u32 = ${W$.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;`:""}
            var b_indices: ${$t.type.indices};
            ${$t.indicesSet("b_indices","0","col_times_components_plus_c")};
            // The scale and zero points are computed per block.
            var scales_index = col_times_components_plus_c * ${v} + block;
            let scale = ${K$.getByOffset("scales_index")};
            // The default zero point is 8 for unsigned 4-bit quantization.
            let zero_point = ${ky}(${W$?"(zero_point_word) & 0xFu":8});
            ${$t.indicesSet("b_indices","1","block")};
            var word_offset: u32 = block * ${l.blockSize/q};
            var workgroup_shared_offset: u32 = block * ${b};
            ${rS}
          }
          workgroupBarrier();
          if (local_id.x == 0u) {
            var output_indices: ${hy.type.indices};
            ${hy.indicesSet("output_indices","0","batch")};
            ${hy.indicesSet("output_indices",U$-1,"col")};
            ${hy.indicesSet("output_indices",U$-2,"0")};
            var output_offset = ${hy.indicesToOffset("output_indices")};
            for (var m: u32 = 0u; m < ${b}u; m++) {
              var output_value: ${hy.type.value} = ${hy.type.value}(0);
              var workgroup_shared_offset: u32 = m;
              for (var b: u32 = 0u; b < ${v}u; b++) {
                output_value += workgroup_shared[workgroup_shared_offset];
                workgroup_shared_offset += ${b};
              }
              ${hy.setByOffset("output_offset","output_value")};
              output_offset += ${y/ge};
            }
          }
        }`:`
        ${by.registerUniforms(G$).declareVariables(...Y$,hy)}
        ${by.mainStart()}
          ${by.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
          var output_values: array<${hy.type.value}, ${W}>;
          var output_indices = ${hy.offsetToIndices("global_idx")};
          var col = ${hy.indicesGet("output_indices",U$-1)};
          var row = ${hy.indicesGet("output_indices",U$-2)};
          var a_indices: ${my.type.indices} = output_indices;
          // Two zero points are packed into one byte because uniforms.bits <= 4.
          // zero_point_offset is either 0 or 4. It is bit offset within one byte.
          // TODO support zero_point_offset for bits > 4
          ${W$?`
          var zero_point_abs_offset = col * ${ge} * ((${v} + 1) / 2);
          var zero_point_index: u32 = zero_point_abs_offset / 4;
          var zero_point_word: u32 = ${W$.getByOffset("zero_point_index")};
          var zero_point_offset: u32 = (zero_point_abs_offset % 4) * 8;`:""}
          var scale_index = col * ${v*ge};
          var b_indices: ${$t.type.indices};
          for (var c: u32 = 0; c < ${ge}; c++) {
            ${$t.indicesSet("b_indices","0",`col * ${ge} + c`)};
            var block_offset: u32 = 0;
            for (var block: u32 = 0; block < ${v}; block++) {
              // The scale and zero points are computed per block.
              let scale = ${K$.getByOffset("scale_index")};
              // The default zero point is 8 for unsigned 4-bit quantization.
              let zero_point = ${ky}(${W$?"extractBits(zero_point_word, zero_point_offset, 4)":8});
              ${$t.indicesSet("b_indices","1","block")};
              var word_offset: u32 = block_offset;
              ${rS}
              scale_index++;
              ${lS}
              block_offset += uniforms.block_size / ${q};
            }
            // Drop the trailing 4 bits if the zero_poit_offset is not a byte boundary to align with the next byte.
            ${W$?`if (zero_point_offset % 8 > 0) {
                ${lS}
              }`:""}
            }
            for (var k: u32 = 0u; k < ${W}u; k++) {
              ${hy.indicesSet("output_indices",U$-2,`${W} * row + k`)};
              ${hy.setByIndices("output_indices","output_values[k]")}
            }
        }`};return{name:he?"BlockwiseMatMulNBits":"MatMulNBits",shaderCache:{hint:`${l.cacheKey};${b};${N};${s.length}`,inputDependencies:Array(s.length).fill("rank")},getRunData:()=>({outputs:[{dims:Se,dataType:N}],name:he?"BlockwiseMatMulNBits":"MatMulNBits",dispatchGroup:he?{x:1,y:Math.ceil(y/ge),z:C}:{x:Math.ceil(Ae/64)},programUniforms:Re}),getShaderSource:_y}},Il$1=(s,l)=>{om$1(s.inputs,l);let c=s.getMaxComputeWorkgroupSizes(),d=s.getMaxComputeWorkgroupStoragesize();s.compute(am$1(s.inputs,l,c,d))},Tl$1=s=>we$1(s)}),lt$1,sm$1,kl$1,El$1,um$1,$o$1,Ol$1,Pl=j(()=>{ye$1(),xe(),Ze$1(),Hn$1(),oo$1(),_e(),Rr(),lt$1=(s,l)=>s.length>l&&s[l].dims.length>0&&M$1.size(s[l].dims)>0?s[l]:void 0,sm$1=(s,l)=>{let c=s[0],d=lt$1(s,1),f=lt$1(s,2),g=lt$1(s,3),v=lt$1(s,4),b=lt$1(s,5),$=lt$1(s,6),y=lt$1(s,7);if(c.dims.length!==3&&c.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let x=!1,C=c.dims[0],E=c.dims[1],N=c.dims.length===3?x?c.dims[2]/3:c.dims[2]:l.numHeads*c.dims[4],W=E,q=0,Y=0,re=Math.floor(N/l.numHeads);if($&&y){if($.dims.length!==4)throw new Error('Input "past_key" is expected to have 4 dimensions');if($.dims[0]!==C||$.dims[1]!==l.numHeads||$.dims[3]!==re)throw new Error('Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)');if(y.dims[0]!==C||y.dims[1]!==l.numHeads||y.dims[3]!==re)throw new Error('Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)');if($.dims[2]!==y.dims[2])throw new Error('Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)');if(y.dims.length!==4)throw new Error('Input "past_value" is expected to have 4 dimensions');q=$.dims[2],Y=$.dims[2]}else if($||y)throw new Error('Input "past_key" and "past_value" shall be both present or both absent');let se;if(d){if(c.dims.length!==3)throw new Error('Input "query" is expected to have 3 dimensions when key is given');if(d.dims.length<3||d.dims.length>5)throw new Error('Input "key" is expected to have 3, 4, or 5 dimensions');if(c.dims[0]!==d.dims[0])throw new Error('Input "query" and "key" shall have same dim 0 (batch size)');if(d.dims.length===3){if(d.dims[2]!==c.dims[2])throw new Error('Input "query" and "key" shall have same dim 2 (hidden_size)');se=2,W=d.dims[1]}else if(d.dims.length===5){if(d.dims[2]!==l.numHeads||d.dims[3]!==2||d.dims[4]!==re)throw new Error('Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv');if(f)throw new Error('Expect "value" be none when "key" has packed kv format.');se=5,W=d.dims[1]}else{if(d.dims[1]!==l.numHeads||d.dims[3]!==re)throw new Error('Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key');se=0,W=d.dims[2]}}else{if(c.dims.length!==3&&c.dims.length!==5)throw new Error('Input "query" is expected to have 3 or 5 dimensions when key is empty');if(c.dims.length===5&&(c.dims[2]!==l.numHeads||c.dims[3]!==3))throw new Error('Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv');se=3}if(g){if(g.dims.length!==1)throw new Error('Input "bias" is expected to have 1 dimension');if(f&&c.dims.length===5&&c.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let de=0;if(v){de=8;let Re=v.dims;throw Re.length===1?Re[0]===C?de=1:Re[0]===3*C+2&&(de=3):Re.length===2&&Re[0]===C&&Re[1]===W&&(de=5),de===8?new Error('Input "key_padding_mask" shape shall be (batch_size) or (batch_size, kv_sequence_length)'):new Error("Mask not supported")}let he=!1,ge=N;if(f){if(f.dims.length!==3&&f.dims.length!==4)throw new Error('Input "value" is expected to have 3 or 4 dimensions');if(c.dims[0]!==f.dims[0])throw new Error('Input "query" and "value" shall have same dim 0 (batch_size)');if(f.dims.length===3){if(W!==f.dims[1])throw new Error('Input "key" and "value" shall have the same dim 1 (kv_sequence_length)');ge=f.dims[2]}else{if(W!==f.dims[2])throw new Error('Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)');ge=f.dims[1]*f.dims[3],he=!0}}let Se=q+W,Ae=!1;if(v)throw new Error("Key padding mask is not supported");if(b){if(b.dims.length!==4)throw new Error('Input "relative_position_bias" is expected to have 4 dimensions');if(b.dims[0]!==C&&b.dims[0]!==1||b.dims[1]!==l.numHeads||b.dims[2]!==E||b.dims[3]!==Se)throw new Error('Input "relative_position_bias" shape (batch_size, 1, sequence_length, kv_sequence_length)')}return{batchSize:C,sequenceLength:E,pastSequenceLength:q,kvSequenceLength:W,totalSequenceLength:Se,maxSequenceLength:Y,inputHiddenSize:0,hiddenSize:N,vHiddenSize:ge,headSize:re,vHeadSize:Math.floor(ge/l.numHeads),numHeads:l.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:l.maskFilterValue,maskType:de,scale:l.scale,broadcastResPosBias:Ae,passPastInKv:he,qkvFormat:se}},kl$1=s=>we$1({...s}),El$1=we$1({perm:[0,2,1,3]}),um$1=(s,l,c,d,f,g,v)=>{let b=[d,f,g],$=M$1.size(b),y=[{type:12,data:$},{type:12,data:v},{type:12,data:g}],x=C=>{let E=K$1("qkv_with_bias",l.dataType,b),N=U$1("qkv",l.dataType,b),W=U$1("bias",c.dataType,b),q=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`
  ${C.registerUniforms(q).declareVariables(N,W,E)}
  ${C.mainStart()}
    ${C.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;

    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];
  }`};return s.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:b,dataType:l.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil($/64)},programUniforms:y}),getShaderSource:x},{inputs:[l,c],outputs:[-1]})[0]},$o$1=(s,l,c,d,f,g,v,b)=>{let $=g;if(v){if(d===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return $=um$1(s,g,v,l,d,c*f,b),$=$.reshape([l,d,c,f]),s.compute(xt$1($,El$1.perm),{inputs:[$],outputs:[-1]})[0]}else return g.dims.length===3&&($=g.reshape([l,d,c,f])),s.compute(xt$1($,El$1.perm),{inputs:[$],outputs:[-1]})[0]},Ol$1=(s,l)=>{let c=sm$1(s.inputs,l),d=s.inputs[0],f=lt$1(s.inputs,1),g=lt$1(s.inputs,2),v=lt$1(s.inputs,3),b=lt$1(s.inputs,4),$=lt$1(s.inputs,5),y=lt$1(s.inputs,6),x=lt$1(s.inputs,7);if(d.dims.length===5)throw new Error("Packed QKV is not implemented");if((f==null?void 0:f.dims.length)===5)throw new Error("Packed KV is not implemented");let C=f&&g&&f.dims.length===4&&g.dims.length===4,E=$o$1(s,c.batchSize,c.numHeads,c.sequenceLength,c.headSize,d,v,0);if(C)return Xn$1(s,E,f,g,b,void 0,y,x,$,c,l);if(!f||!g)throw new Error("key and value must be provided");let N=$o$1(s,c.batchSize,c.numHeads,c.kvSequenceLength,c.headSize,f,v,c.hiddenSize),W=$o$1(s,c.batchSize,c.numHeads,c.kvSequenceLength,c.vHeadSize,g,v,2*c.hiddenSize);Xn$1(s,E,N,W,b,void 0,y,x,$,c,l)}}),lm$1,dm$1,cm$1,pm$1,mm$1,fm$1,hm$1,gm$1,Rl$1,zl$1=j(()=>{ye$1(),xe(),_e(),lm$1=s=>{if(!s||s.length<1)throw new Error("Too few inputs");if(s[0].dataType!==1&&s[0].dataType!==10)throw new Error("Input type must be float or float16.");if(s.length>=2){let l=s[0].dims.length*2===s[1].dims[0];if(s.length===4&&(l=s[3].dims[0]*2===s[1].dims[0]),!l)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},dm$1=(s,l,c)=>{let d="";for(let f=l-1;f>=0;--f)d+=`
            k = i32(${s.indicesGet("indices",f)}) - ${fe("uniforms.pads",f,c)};
            if (k < 0) {
              break;
            }
            if (k >= i32(${fe("uniforms.x_shape",f,l)})) {
              break;
            }
            offset += k * i32(${fe("uniforms.x_strides",f,l)});
        `;return`
          value = ${s.type.value}(uniforms.constant_value);
          for (var i = 0; i < 1; i++) {
            var offset = 0;
            var k = 0;
            ${d}
            value = x[offset];
          }
      `},cm$1=(s,l,c)=>{let d="";for(let f=l-1;f>=0;--f)d+=`
                k = i32(${s.indicesGet("indices",f)}) - ${fe("uniforms.pads",f,c)};
                if (k < 0) {
                  k = -k;
                }
                {
                  let _2n_1 = 2 * (i32(${fe("uniforms.x_shape",f,l)}) - 1);
                  k = k % _2n_1;
                  if(k >= i32(${fe("uniforms.x_shape",f,l)})) {
                    k = _2n_1 - k;
                  }
                }
                offset += k * i32(${fe("uniforms.x_strides",f,l)});
            `;return`
              var offset = 0;
              var k = 0;
              ${d}
              value = x[offset];
          `},pm$1=(s,l,c)=>{let d="";for(let f=l-1;f>=0;--f)d+=`
                k = i32(${s.indicesGet("indices",f)}) - ${fe("uniforms.pads",f,c)};
                if (k < 0) {
                  k = 0;
                }
                if (k >= i32(${fe("uniforms.x_shape",f,l)})) {
                  k = i32(${fe("uniforms.x_shape",f,l)}) - 1;
                }
                offset += k * i32(${fe("uniforms.x_strides",f,l)});
            `;return`
              var offset = 0;
              var k = 0;
              ${d}
              value = x[offset];
          `},mm$1=(s,l,c)=>{let d="";for(let f=l-1;f>=0;--f)d+=`
                k = i32(${s.indicesGet("indices",f)}) - ${fe("uniforms.pads",f,c)};
                if (k < 0)  {
                  k += i32(${fe("uniforms.x_shape",f,l)}]);
                }
                if (k >= i32(${fe("uniforms.x_shape",f,l)})) {
                  k -= i32(${fe("uniforms.x_shape",f,l)});
                }
                offset += k * i32(${fe("uniforms.x_strides",f,l)});
            `;return`
              var offset = 0;
              var k = 0;
              ${d}
              value = x[offset];
          `},fm$1=(s,l,c)=>{switch(c.mode){case 0:return dm$1(s,l,c.pads.length);case 1:return cm$1(s,l,c.pads.length);case 2:return pm$1(s,l,c.pads.length);case 3:return mm$1(s,l,c.pads.length);default:throw new Error("Invalid mode")}},hm$1=(s,l)=>{let c=M$1.padShape(s[0].dims.slice(),l.pads),d=s[0].dims,f=M$1.size(c),g=[{type:12,data:f},{type:6,data:l.pads}];l.mode===0&&g.push({type:s[0].dataType,data:l.value}),g.push(...X(s[0].dims,c));let v=["rank"],b=$=>{let y=K$1("output",s[0].dataType,c.length),x=U$1("x",s[0].dataType,d.length),C=x.type.value,E=fm$1(y,d.length,l),N=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:l.pads.length}];return l.mode===0&&N.push({name:"constant_value",type:C}),`
            ${$.registerUniforms(N).declareVariables(x,y)}
            ${$.mainStart()}
            ${$.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}

            let indices = ${y.offsetToIndices("global_idx")};

            var value = ${C}(0);
            ${E}
            output[global_idx] = value;
        }`};return{name:"Pad",shaderCache:{hint:`${l.mode}`,inputDependencies:v},getRunData:()=>({outputs:[{dims:c,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil(M$1.size(c)/64)},programUniforms:g}),getShaderSource:b}},gm$1=(s,l)=>{if(s.length>1){let c=s[1].getBigInt64Array(),d=s.length>=3&&s[2].data?s[2].getFloat32Array()[0]:0,f=s[0].dims.length,g=new Int32Array(2*f).fill(0);if(s.length>=4){let b=s[3].getBigInt64Array();for(let $=0;$<b.length;$++)g[Number(b[$])]=Number(c[$]),g[Number(b[$])+f]=Number(c[$+b.length])}else c.forEach((b,$)=>g[Number($)]=Number(b));let v=[];return g.forEach(b=>v.push(b)),{mode:l.mode,value:d,pads:v}}else return l},Rl$1=(s,l)=>{lm$1(s.inputs);let c=gm$1(s.inputs,l);s.compute(hm$1(s.inputs,c),{inputs:[0]})}}),si$1,Bl,Dl$1,Ml$1,Ul$1,ym$1,bm$1,Wl,Nl$2,Vl$1,Hl$1,Gl,Ll$1,Fl$1,ql,jl$1,Kl$1,Yl$1,Xl$1,Zl$1=j(()=>{_t(),ye$1(),xe(),_e(),si$1=s=>{if(ke$1.webgpu.validateInputContent&&(!s||s.length!==1))throw new Error("Pool ops requires 1 input.")},Bl=(s,l,c)=>{let d=l.format==="NHWC",f=s.dims.slice();d&&f.splice(1,0,f.pop());let g=Object.hasOwnProperty.call(l,"dilations"),v=l.kernelShape.slice(),b=l.strides.slice(),$=g?l.dilations.slice():[],y=l.pads.slice();pr$1.adjustPoolAttributes(c,f,v,b,$,y);let x=pr$1.computePoolOutputShape(c,f,b,$,v,y,l.autoPad),C=Object.assign({},l);g?Object.assign(C,{kernelShape:v,strides:b,pads:y,dilations:$,cacheKey:l.cacheKey}):Object.assign(C,{kernelShape:v,strides:b,pads:y,cacheKey:l.cacheKey});let E=x.slice();return E.push(E.splice(1,1)[0]),[C,d?E:x]},Dl$1=(s,l)=>{let c=l.format==="NHWC",d=M$1.size(s),f=M$1.size(l.kernelShape),g=[{type:12,data:d},{type:12,data:f}],v=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(l.kernelShape.length<=2){let b=l.kernelShape[l.kernelShape.length-1],$=l.strides[l.strides.length-1],y=l.pads[l.pads.length/2-1],x=l.pads[l.pads.length-1],C=!!(y+x);g.push({type:12,data:b},{type:12,data:$},{type:12,data:y},{type:12,data:x}),v.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let E=!1;if(l.kernelShape.length===2){let N=l.kernelShape[l.kernelShape.length-2],W=l.strides[l.strides.length-2],q=l.pads[l.pads.length/2-2],Y=l.pads[l.pads.length-2];E=!!(q+Y),g.push({type:12,data:N},{type:12,data:W},{type:12,data:q},{type:12,data:Y}),v.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[g,v,!0,C,E]}else{if(c)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let b=M$1.computeStrides(l.kernelShape);g.push({type:12,data:b},{type:12,data:l.pads},{type:12,data:l.strides}),v.push({name:"kernelStrides",type:"u32",length:b.length},{name:"pads",type:"u32",length:l.pads.length},{name:"strides",type:"u32",length:l.strides.length});let $=l.pads.reduce((y,x)=>y+x);return[g,v,!!$,!1,!1]}},Ml$1=(s,l,c,d,f,g,v,b,$,y,x,C)=>{let E=f.format==="NHWC",N=l.type.value,W=K$1("output",l.type.tensor,d);if(f.kernelShape.length<=2){let q="",Y="",re="",se=c-(E?2:1);if(x?q=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${se}] = indices[${se}] * uniforms.sw - uniforms.pwStart + i;
                  if (xIndices[${se}] < 0 || xIndices[${se}]
                      >= uniforms.x_shape[${se}]) {
                    pad++;
                    continue;
                  }
                  let x_val = x[${l.indicesToOffset("xIndices")}];
                  ${g}
                }`:q=`
                for (var i: u32 = 0u; i < uniforms.kw; i++) {
                  xIndices[${se}] = indices[${se}] * uniforms.sw - uniforms.pwStart + i;
                  let x_val = x[${l.indicesToOffset("xIndices")}];
                  ${g}
                }`,f.kernelShape.length===2){let de=c-(E?3:2);C?Y=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${de}] = indices[${de}] * uniforms.sh - uniforms.phStart + j;
                  if (xIndices[${de}] < 0 || xIndices[${de}] >= uniforms.x_shape[${de}]) {
                    pad += i32(uniforms.kw);
                    continue;
                  }
              `:Y=`
                for (var j: u32 = 0u; j < uniforms.kh; j++) {
                  xIndices[${de}] = indices[${de}] * uniforms.sh - uniforms.phStart + j;
                `,re=`
              }
            `}return`
            ${s.registerUniforms($).declareVariables(l,W)}

            ${s.mainStart()}
              ${s.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}

              let indices = ${W.offsetToIndices("global_idx")};
              var xIndices = ${W.offsetToIndices("global_idx")};

              var value = ${N}(${b});
              var pad = 0;
              ${Y}
              ${q}
              ${re}
              ${v}

              output[global_idx] = value;
            }`}else{if(E)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let q=f.kernelShape.length,Y=f.pads.length,re="";return y?re=`
                if (xIndices[j] >= uniforms.x_shape[j]) {
                  pad++;
                  isPad = true;
                  break;
                }
              }
              if (!isPad) {
                let x_val = x[${l.indicesToOffset("xIndices")}];
                ${g}
              }`:re=`
              }
              let x_val = x[${l.indicesToOffset("xIndices")}];
              ${g}
            `,`
            ${s.registerUniforms($).declareVariables(l,W)}

            ${s.mainStart()}
              ${s.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
              let indices = ${W.offsetToIndices("global_idx")};
              var xIndices = ${W.offsetToIndices("global_idx")};

              var offsets: array<u32, ${q}>;

              var value = ${N}(${b});
              var pad = 0;
              var isPad = false;

              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {
                var offset = i;
                for (var j = 0u; j < ${q-1}u; j++) {
                  offsets[j] = offset / ${fe("uniforms.kernelStrides","j",q)};
                  offset -= offsets[j] * ${fe("uniforms.kernelStrides","j",q)};
                }
                offsets[${q-1}] = offset;

                isPad = false;
                for (var j = ${c-q}u; j < ${c}u; j++) {
                  xIndices[j] = indices[j] * ${fe("uniforms.strides",`j - ${c-q}u`,q)}
                    + offsets[j - ${c-q}u] - ${fe("uniforms.pads","j - 2u",Y)};
                  ${re}
              }
              ${v}

              output[global_idx] = value;
            }`}},Ul$1=s=>`${s.format};${s.ceilMode};${s.autoPad};${s.kernelShape.length}`,ym$1=s=>`${Ul$1(s)};${s.countIncludePad}`,bm$1=s=>`${Ul$1(s)};${s.storageOrder};${s.dilations}`,Wl=s=>({format:s.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][s.auto_pad],ceilMode:s.ceil_mode,kernelShape:s.kernel_shape,strides:s.strides,pads:s.pads}),Nl$2=(s,l,c,d)=>{let[f,g]=Bl(l,d,c),v=U$1("x",l.dataType,l.dims.length),b=v.type.value,$="value += x_val;",y="";f.countIncludePad?y+=`value /= ${b}(uniforms.kernelSize);`:y+=`value /= ${b}(i32(uniforms.kernelSize) - pad);`;let[x,C,E,N,W]=Dl$1(g,f);x.push(...X(l.dims,g));let q=["rank"];return{name:s,shaderCache:{hint:`${d.cacheKey};${E};${N};${W}`,inputDependencies:q},getRunData:()=>({outputs:[{dims:g,dataType:l.dataType}],dispatchGroup:{x:Math.ceil(M$1.size(g)/64)},programUniforms:x}),getShaderSource:Y=>Ml$1(Y,v,l.dims.length,g.length,f,$,y,0,C,E,N,W)}},Vl$1=s=>{let l=s.count_include_pad!==0,c=Wl(s);if(c.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let d={countIncludePad:l,...c,cacheKey:""};return{...d,cacheKey:ym$1(d)}},Hl$1=(s,l)=>{si$1(s.inputs),s.compute(Nl$2("AveragePool",s.inputs[0],!1,l))},Gl={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},Ll$1=s=>{let l=s.format;return{format:l,...Gl,cacheKey:l}},Fl$1=(s,l)=>{si$1(s.inputs),s.compute(Nl$2("GlobalAveragePool",s.inputs[0],!0,l))},ql=(s,l,c,d)=>{let[f,g]=Bl(l,d,c),v=`
      value = max(x_val, value);
    `,b="",$=U$1("x",l.dataType,l.dims.length),y=["rank"],[x,C,E,N,W]=Dl$1(g,f);return x.push(...X(l.dims,g)),{name:s,shaderCache:{hint:`${d.cacheKey};${E};${N};${W}`,inputDependencies:y},getRunData:()=>({outputs:[{dims:g,dataType:l.dataType}],dispatchGroup:{x:Math.ceil(M$1.size(g)/64)},programUniforms:x}),getShaderSource:q=>Ml$1(q,$,l.dims.length,g.length,f,v,b,l.dataType===10?-65504:-1e5,C,E,N,W)}},jl$1=(s,l)=>{si$1(s.inputs),s.compute(ql("MaxPool",s.inputs[0],!1,l))},Kl$1=s=>{let l=s.storage_order,c=s.dilations,d=Wl(s);if(l!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(d.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let f={storageOrder:l,dilations:c,...d,cacheKey:""};return{...f,cacheKey:bm$1(f)}},Yl$1=s=>{let l=s.format;return{format:l,...Gl,cacheKey:l}},Xl$1=(s,l)=>{si$1(s.inputs),s.compute(ql("GlobalMaxPool",s.inputs[0],!0,l))}}),wm$1,$m$1,Ql$1,Jl$1=j(()=>{_t(),ye$1(),_e(),wm$1=(s,l,c)=>{let d=s===l,f=s<l&&c<0,g=s>l&&c>0;if(d||f||g)throw new Error("Range these inputs' contents are invalid.")},$m$1=(s,l,c,d)=>{let f=Math.abs(Math.ceil((l-s)/c)),g=[f],v=f,b=[{type:12,data:v},{type:d,data:s},{type:d,data:c},...X(g)],$=y=>{let x=K$1("output",d,g.length),C=x.type.value,E=[{name:"outputSize",type:"u32"},{name:"start",type:C},{name:"delta",type:C}];return`
        ${y.registerUniforms(E).declareVariables(x)}
        ${y.mainStart()}
        ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
        output[global_idx] = uniforms.start + ${C}(global_idx) * uniforms.delta;
      }`};return{name:"Range",shaderCache:{hint:`${d}`},getShaderSource:$,getRunData:()=>({outputs:[{dims:g,dataType:d}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:b})}},Ql$1=s=>{let l=0,c=0,d=0;s.inputs[0].dataType===6?(l=s.inputs[0].getInt32Array()[0],c=s.inputs[1].getInt32Array()[0],d=s.inputs[2].getInt32Array()[0]):s.inputs[0].dataType===1&&(l=s.inputs[0].getFloat32Array()[0],c=s.inputs[1].getFloat32Array()[0],d=s.inputs[2].getFloat32Array()[0]),ke$1.webgpu.validateInputContent&&wm$1(l,c,d),s.compute($m$1(l,c,d,s.inputs[0].dataType),{inputs:[]})}}),_m$1,xm$1,Sm$1,Cm$1,Im$1,Tm$1,Am$1,Em$1,km$1,Om$1,Pm$1,ed$1,Rm$1,zm$1,Bm$1,Dm$1,Mm$1,td$1,rd$1,nd$1=j(()=>{ye$1(),xe(),Ze$1(),_e(),_m$1=(s,l)=>{if(s.every(c=>c>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),s.length>0){if(l.mode==="linear"){if(!(s.length===2||s.length===3||s.length===4&&s[0]===1&&s[1]===1||s.length===4&&s[0]===1&&s[3]===1||s.length===5&&s[0]===1&&s[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and
            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(l.mode==="cubic"&&!(s.length===2||s.length===4&&s[0]===1&&s[1]===1||s.length===4&&s[0]===1&&s[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},xm$1=(s,l,c)=>{l.every(f=>f>=0&&f<c||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let d=new Array(c).fill(1);return l.forEach((f,g)=>d[f]=s[g]),d},Sm$1=(s,l,c,d,f,g)=>{let[v,b,$]=c>10?[1,2,3]:[-1,s.length>1?1:-1,-1],y=s[0].dims.length;if(v>0&&s.length>v&&s[v].dims.length>0)s[v].getFloat32Array().forEach(x=>g.push(x));else if(l.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(b>0&&s.length>b&&s[b].dims.length>0){if(s[b].getFloat32Array().forEach(x=>d.push(x)),d.length!==0&&d.length!==y&&c>=18&&d.length!==l.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");_m$1(d,l),l.axes.length>0&&xm$1(d,l.axes,y).forEach((x,C)=>d[C]=x)}if($>0&&s.length>$&&(s[$].getBigInt64Array().forEach(x=>f.push(Number(x))),f.length!==y||c>=18&&f.length===l.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(l.axes.length>0){if(d.length!==l.axes.length)throw new Error('Resize requires "scales" input size to be of axes rank when axes attributes is specified');if(f.length!==l.axes.length)throw new Error('Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified')}if(typeof d<"u"&&typeof f<"u"&&d.length>0&&f.length>y)throw new Error("Resize requires only of scales or sizes to be specified")},Cm$1=(s,l)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,
     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${l} { `+(()=>{switch(s){case"asymmetric":return`return ${l}(xResized) / ${l}(xScale);`;case"pytorch_half_pixel":return`if (lengthResized > 1) {
                    return (${l}(xResized) + 0.5) / ${l}(xScale) - 0.5;
                  } else {
                    return 0.0;
                  }`;case"tf_half_pixel_for_nn":return`return (${l}(xResized) + 0.5) / ${l}(xScale);`;case"align_corners":return`if (lengthResized == 1) {
                    return 0.0;
                  } else {
                    // The whole part and the fractional part are calculated separately due to inaccuracy of floating
                    // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an
                    // offset-by-one error later in floor().
                    let whole = ${l}(xResized * (lengthOriginal - 1) / (lengthResized - 1));
                    let fract =
                        ${l}(xResized * (lengthOriginal - 1) % (lengthResized - 1)) / ${l}(lengthResized - 1);
                    return whole + fract;
                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {
                    return ${l}(roiStart) * ${l}(lengthOriginal - 1) +
                        (${l}(xResized) * ${l}(roiEnd - roiStart) * ${l}(lengthOriginal - 1)) /
                        ${l}(lengthResized - 1);
                  } else {
                    return 0.5 * ${l}(roiStart + roiEnd) * ${l}(lengthOriginal - 1);
                  }`;case"half_pixel_symmetric":return`const outputWidth = ${l}xScale * ${l}(lengthResized);
                  const adjustment = ${l}(lengthResized) / outputWidth;
                  const center = ${l}(lengthOriginal) / 2;
                  const offset = center * (1 - adjustment);
                  return offset + ((${l}(xResized) + 0.5) / ${l}(xScale)) - 0.5;`;case"half_pixel":return`return ((${l}(xResized) + 0.5) / ${l}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${s} is not supported`)}})()+"}",Im$1=(s,l,c)=>`fn getNearestPixelFromOriginal(xOriginal: ${c}, isDownSample: bool) -> ${c} {`+(()=>{switch(s){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(l<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${s} is not supported`)}})()+"}",Tm$1=(s,l,c)=>{let d=new Array(c).fill(0).concat(new Array(c).fill(1)),f=s.length===0?d:s.slice();return l.length>0?(l.forEach((g,v)=>{d[g]=f[v],d[v+c]=f[l.length+v]}),d):f},Am$1=(s,l,c,d)=>{let f=[];if(c.length>0)if(d.length>0){if(s.forEach(g=>f.push(g)),Math.max(...d)>s.length)throw new Error("axes is out of bound");d.forEach((g,v)=>f[g]=c[v])}else c.forEach(g=>f.push(g));else{if(l.length===0)throw new Error("Resize requires either scales or sizes.");f=s.map((g,v)=>Math.round(g*l[v]))}return f},Em$1=(s,l,c)=>{let d=(()=>{switch(c.keepAspectRatioPolicy){case"not_larger":return c.axes.length>0?Math.min(...c.axes.map(g=>l[g]),Number.MAX_VALUE):Math.min(...l,Number.MAX_VALUE);case"not_smaller":return c.axes.length>0?Math.max(...c.axes.map(g=>l[g]),Number.MIN_VALUE):Math.max(...l,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${c.keepAspectRatioPolicy} is not supported`)}})();l.fill(1,0,l.length);let f=s.slice();return c.axes.length>0?(c.axes.forEach(g=>l[g]=d),c.axes.forEach(g=>f[g]=Math.round(s[g]*l[g]))):(l.fill(d,0,l.length),f.forEach((g,v)=>f[v]=Math.round(g*l[v]))),f},km$1=(s,l,c,d,f)=>`
    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${s.type.indices}) -> array<${s.type.value}, ${c.length}> {
      var original_indices: array<${s.type.value}, ${c.length}>;
      for (var i:u32 = 0; i < ${c.length}; i++) {
        var output_index = ${s.indicesGet("output_indices","i")};
        var scale = ${fe("uniforms.scales","i",d)};
        var roi_low = ${fe("uniforms.roi","i",f)};
        var roi_hi = ${fe("uniforms.roi",`i + ${l.length}`,f)};
        if (scale == 1.0) {
          original_indices[i] = ${s.type.value}(output_index);
        } else {
          var input_shape_i = ${fe("uniforms.input_shape","i",l.length)};
          var output_shape_i = ${fe("uniforms.output_shape","i",c.length)};
          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                           input_shape_i, roi_low, roi_hi);
        }
      }
      return original_indices;
    }`,Om$1=(s,l,c,d,f,g,v)=>`
    fn calculateInputIndicesFromOutputIndices(output_indices: ${l.type.indices}) -> ${s.type.indices} {
      var input_indices: ${s.type.indices};
      for (var i:u32 = 0; i < ${d.length}; i++) {
        var output_index = ${l.indicesGet("output_indices","i")};
        var input_index: u32;
        var scale = ${fe("uniforms.scales","i",f)};
        if (scale == 1.0) {
          input_index = output_index;
        } else {
          var roi_low = ${fe("uniforms.roi","i",g)};
          var roi_hi = ${fe("uniforms.roi",`i + ${c.length}`,g)};
          var input_shape_i = ${fe("uniforms.input_shape","i",c.length)};
          var output_shape_i = ${fe("uniforms.output_shape","i",d.length)};
          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,
                                                                        input_shape_i, roi_low, roi_hi);
          if (!${v} || (original_idx >= 0 && original_idx < ${l.type.value}(input_shape_i))) {
            if (original_idx < 0) {
              input_index = 0;
            } else if (original_idx > ${l.type.value}(input_shape_i - 1)) {
              input_index = input_shape_i - 1;
            } else {
              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));
            }
          } else {
            input_index = u32(original_idx);
          }
        }
        ${s.indicesSet("input_indices","i"," input_index")}
      }
      return input_indices;
    }`,Pm$1=(s,l)=>`
    fn checkInputIndices(input_indices: ${s.type.indices}) -> bool {
      for (var i:u32 = 0; i < ${l.length}; i++) {
        var input_index = ${s.indicesGet("input_indices","i")};
        if (input_index < 0 || input_index >= ${fe("uniforms.input_shape","i",l.length)}) {
          return false;
        }
      }
      return true;
    }`,ed$1=(s,l,c,d)=>s.rank>d?`
    ${s.indicesSet("input_indices",l,"channel")};
    ${s.indicesSet("input_indices",c,"batch")};
`:"",Rm$1=(s,l,c,d,f)=>{let[g,v,b,$]=c.length===2?[-1,0,1,-1]:[0,2,3,1],y=s.type.value;return`
    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${y} {
      var input_indices: ${s.type.indices};
      ${s.indicesSet("input_indices",v,`max(0, min(row, ${c[v]} - 1))`)};
      ${s.indicesSet("input_indices",b,`max(0, min(col, ${c[b]} - 1))`)};
      ${ed$1(s,$,g,2)}
      return ${s.getByIndices("input_indices")};
    }

    fn bilinearInterpolation(output_indices: ${l.type.indices}) -> ${y} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var row:${y} = originalIndices[${v}];
      var col:${y} = originalIndices[${b}];
      ${d?`if (row < 0 || row > (${c[v]} - 1) || col < 0 || col > (${c[b]} - 1)) {
        return ${f};
      }`:""};
      row = max(0, min(row, ${c[v]} - 1));
      col = max(0, min(col, ${c[b]} - 1));
      var row1: u32 = u32(row);
      var col1: u32 = u32(col);
      var row2: u32 = u32(row + 1);
      var col2: u32 = u32(col + 1);
      var channel: u32 = ${c.length>2?`u32(originalIndices[${$}])`:"0"};
      var batch: u32 =  ${c.length>2?`u32(originalIndices[${g}])`:"0"};
      var x11: ${y} = getInputValue(batch, channel, row1, col1);
      var x12: ${y} = getInputValue(batch, channel, row1, col2);
      var x21: ${y} = getInputValue(batch, channel, row2, col1);
      var x22: ${y} = getInputValue(batch, channel, row2, col2);
      var dx1: ${y} = abs(row - ${y}(row1));
      var dx2: ${y} = abs(${y}(row2) - row);
      var dy1: ${y} = abs(col - ${y}(col1));
      var dy2: ${y} = abs(${y}(col2) - col);
      if (row1 == row2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (col1 == col2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);
    }`},zm$1=(s,l,c,d,f,g,v,b,$,y)=>{let x=c.length===2,[C,E]=x?[0,1]:[2,3],N=s.type.value,W=q=>{let Y=q===C?"row":"col";return`
      fn ${Y}CubicInterpolation(input_indices: ${s.type.indices}, output_indices: ${l.type.indices}) -> ${N} {
        var output_index = ${l.indicesGet("output_indices",q)};
        var originalIdx: ${N} = getOriginalCoordinateFromResizedCoordinate(output_index, ${f[q]},
        ${d[q]}, ${c[q]}, ${g[q]}, ${g[q]} + ${c.length});
        var fractOriginalIdx: ${N} = originalIdx - floor(originalIdx);
        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);

        if (${b} && (originalIdx < 0 || originalIdx > (${c[q]} - 1))) {
          return ${$};
        }
        var data: array<${N}, 4> = array<${N}, 4>(0.0, 0.0, 0.0, 0.0);
        for (var i: i32 = -1; i < 3; i++) {
          var ${Y}: ${N} = originalIdx + ${N}(i);
          if (${Y} < 0 || ${Y} >= ${c[q]}) {
            ${y?`coefs[i + 1] = 0.0;
                        continue;`:b?`return ${$};`:`${Y} = max(0, min(${Y}, ${c[q]} - 1));`};
          }
        var input_indices_copy: ${s.type.indices} = input_indices;
          ${s.indicesSet("input_indices_copy",q,`u32(${Y})`)};
          data[i + 1] = ${q===C?s.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};
        }
        return cubicInterpolation1D(data, coefs);
      }`};return`
    ${W(C)};
    ${W(E)};
  fn getCubicInterpolationCoefs(s: ${N}) -> array<${N}, 4> {
    var absS = abs(s);
    var coeffs: array<${N}, 4> = array<${N}, 4>(0.0, 0.0, 0.0, 0.0);
    var oneMinusAbsS: ${N} = 1.0 - absS;
    var twoMinusAbsS: ${N} = 2.0 - absS;
    var onePlusAbsS: ${N} = 1.0 + absS;
    coeffs[0] = ((${v} * onePlusAbsS - 5 * ${v}) * onePlusAbsS + 8 * ${v}) * onePlusAbsS - 4 * ${v};
    coeffs[1] = ((${v} + 2) * absS - (${v} + 3)) * absS * absS + 1;
    coeffs[2] = ((${v} + 2) * oneMinusAbsS - (${v} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;
    coeffs[3] = ((${v} * twoMinusAbsS - 5 * ${v}) * twoMinusAbsS + 8 * ${v}) * twoMinusAbsS - 4 * ${v};
    return coeffs;
  }

  fn cubicInterpolation1D(x: array<${N}, 4>, coefs: array<${N}, 4>) -> ${N} {
    var coefsSum: ${N} = coefs[0] + coefs[1] + coefs[2] + coefs[3];
    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;
  }

  fn bicubicInterpolation(output_indices: ${l.type.indices}) -> ${N} {
    var input_indices: ${s.type.indices} = output_indices;
    return colCubicInterpolation(input_indices, output_indices);
  }
    `},Bm$1=(s,l,c,d,f)=>{let[g,v,b,$,y]=c.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],x=s.type.value;return`
    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${x} {
      var input_indices: ${s.type.indices};
      ${s.indicesSet("input_indices",v,`max(0, min(depth, ${c[v]} - 1))`)};
      ${s.indicesSet("input_indices",b,`max(0, min(height, ${c[b]} - 1))`)};
      ${s.indicesSet("input_indices",$,`max(0, min(width, ${c[$]} - 1))`)};
      ${ed$1(s,y,g,3)}
      return ${s.getByIndices("input_indices")};
    }

    fn trilinearInterpolation(output_indices: ${l.type.indices}) -> ${x} {
      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);
      var depth:${x} = originalIndices[${v}];
      var height:${x} = originalIndices[${b}];
      var width:${x} = originalIndices[${$}];
      ${d?`if (depth < 0 || depth > (${c[v]} - 1) || height < 0 || height > (${c[b]} - 1) || width < 0 || (width > ${c[$]} - 1)) {
      return ${f};
        }`:""};

    depth = max(0, min(depth, ${c[v]} - 1));
      height = max(0, min(height, ${c[b]} - 1));
      width = max(0, min(width, ${c[$]} - 1));
      var depth1: u32 = u32(depth);
      var height1: u32 = u32(height);
      var width1: u32 = u32(width);
      var depth2: u32 = u32(depth + 1);
      var height2: u32 = u32(height + 1);
      var width2: u32 = u32(width + 1);
      var channel: u32 = ${c.length>3?`u32(originalIndices[${y}])`:"0"};
      var batch: u32 =  ${c.length>3?`u32(originalIndices[${g}])`:"0"};

      var x111: ${x} = getInputValue(batch, channel, depth1, height1, width1);
      var x112: ${x} = getInputValue(batch, channel, depth1, height1, width2);
      var x121: ${x} = getInputValue(batch, channel, depth1, height2, width1);
      var x122: ${x} = getInputValue(batch, channel, depth1, height2, width2);
      var x211: ${x} = getInputValue(batch, channel, depth2, height1, width1);
      var x212: ${x} = getInputValue(batch, channel, depth2, height1, width2);
      var x221: ${x} = getInputValue(batch, channel, depth2, height2, width1);
      var x222: ${x} = getInputValue(batch, channel, depth2, height2, width2);
      var dx1: ${x} = abs(depth - ${x}(depth1));
      var dx2: ${x} = abs(${x}(depth2) - depth);
      var dy1: ${x} = abs(height - ${x}(height1));
      var dy2: ${x} = abs(${x}(height2) - height);
      var dz1: ${x} = abs(width - ${x}(width1));
      var dz2: ${x} = abs(${x}(width2) - width);
      if (depth1 == depth2) {
        dx1 = 0.5;
        dx2 = 0.5;
      }
      if (height1 == height2) {
        dy1 = 0.5;
        dy2 = 0.5;
      }
      if (width1 == width2) {
        dz1 = 0.5;
        dz2 = 0.5;
      }
      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +
              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);
    }`},Dm$1=(s,l,c,d,f,g)=>{let v=s.dims,b=Tm$1(g,l.axes,v.length),$=Am$1(v,d,f,l.axes),y=d.slice();d.length===0&&(y=v.map((se,de)=>se===0?1:$[de]/se),l.keepAspectRatioPolicy!=="stretch"&&($=Em$1(v,y,l)));let x=K$1("output",s.dataType,$.length),C=U$1("input",s.dataType,v.length),E=M$1.size($),N=v.length===$.length&&v.every((se,de)=>se===$[de]),W=l.coordinateTransformMode==="tf_crop_and_resize",q=l.extrapolationValue,Y=C.type.value,re=se=>`
      ${N?"":`
      ${Cm$1(l.coordinateTransformMode,Y)};
      ${(()=>{switch(l.mode){case"nearest":return`
              ${Pm$1(C,v)};
              ${Im$1(l.nearestMode,c,Y)};
              ${Om$1(C,x,v,$,y.length,b.length,W)};
              `;case"linear":return`
              ${km$1(x,v,$,y.length,b.length)};
              ${(()=>{if(v.length===2||v.length===4)return`${Rm$1(C,x,v,W,q)}`;if(v.length===3||v.length===5)return`${Bm$1(C,x,v,W,q)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};
            `;case"cubic":return`
            ${(()=>{if(v.length===2||v.length===4)return`${zm$1(C,x,v,$,y,b,l.cubicCoeffA,W,l.extrapolationValue,l.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};
            `;default:throw Error("Invalid resize mode")}})()};
      `}
      ${se.registerUniform("output_size","u32").registerUniform("scales","f32",y.length).registerUniform("roi","f32",b.length).declareVariables(C,x)}
      ${se.mainStart()}
        ${se.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
        ${N?"output[global_idx] = input[global_idx];":`
        let output_indices = ${x.offsetToIndices("global_idx")};
        var input_indices: ${C.type.indices};
        ${(()=>{switch(l.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);
                if (checkInputIndices(input_indices)) {
                  output[global_idx] = ${C.getByIndices("input_indices")};
                } else {
                  output[global_idx] = ${l.extrapolationValue};
                }`;case"linear":return`output[global_idx] = ${v.length===2||v.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${l.mode}`)}})()};
`}
      }`;return{name:"Resize",shaderCache:{hint:`${l.cacheKey}|${c}|${y.length>0?y:""}|${f.length>0?f:""}|${b.length>0?b:""}|${N}|${v}`,inputDependencies:["rank"]},getShaderSource:re,getRunData:()=>({outputs:[{dims:$,dataType:s.dataType}],dispatchGroup:{x:Math.ceil(E/64)},programUniforms:[{type:12,data:E},{type:1,data:y},{type:1,data:b},...X(v,$)]})}},Mm$1=s=>{let l=s.customDataBuffer;return new Uint32Array(l,l.byteOffset,1)[0]},td$1=(s,l)=>{let c=[],d=[],f=[],g=Mm$1(s);if(l.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");Sm$1(s.inputs,l,g,c,d,f),s.compute(Dm$1(s.inputs[0],l,g,c,d,f),{inputs:[0]})},rd$1=s=>{let l=s.antialias,c=s.axes,d=s.coordinateTransformMode,f=s.cubicCoeffA,g=s.excludeOutside!==0,v=s.extrapolationValue,b=s.keepAspectRatioPolicy,$=s.mode,y=s.nearestMode===""?"simple":s.nearestMode;return we$1({antialias:l,axes:c,coordinateTransformMode:d,cubicCoeffA:f,excludeOutside:g,extrapolationValue:v,keepAspectRatioPolicy:b,mode:$,nearestMode:y})}}),Um$1,Wm$1,id$1,od$1=j(()=>{ye$1(),xe(),Ze$1(),_e(),Um$1=(s,l)=>{let[c,d,f,g]=s,{numHeads:v,rotaryEmbeddingDim:b}=l;if(c.dims.length!==3&&c.dims.length!==4)throw new Error(`Input 'x' is expected to have 3 or 4 dimensions, got ${c.dims.length}`);if(!M$1.areEqual(d.dims,[])&&!M$1.areEqual(d.dims,[1])&&d.dims.length!==2)throw new Error(`Input 'position_ids' is expected to have 0, 1, or 2 dimensions, got ${d.dims.length}`);if(f.dims.length!==2)throw new Error(`Input 'cos_cache' is expected to have 2 dimensions, got ${f.dims.length}`);if(g.dims.length!==2)throw new Error(`Input 'sin_cache' is expected to have 2 dimensions, got ${g.dims.length}`);if(!M$1.areEqual(f.dims,g.dims))throw new Error("Inputs 'cos_cache' and 'sin_cache' are expected to have the same shape");if(b>0&&v===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let $=c.dims[0],y=c.dims[c.dims.length-2],x=f.dims[0],C=M$1.sizeFromDimension(c.dims,1)/y,E=b===0?f.dims[1]*2:C/v;if(b>E)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(d.dims.length===2){if($!==d.dims[0])throw new Error(`Input 'position_ids' dimension 0 should be of size batch_size, got ${d.dims[0]}`);if(y!==d.dims[1])throw new Error(`Input 'position_ids' dimension 1 should be of size sequence_length, got ${d.dims[1]}`)}if(E/2!==f.dims[1]&&b/2!==f.dims[1])throw new Error(`Input 'cos_cache' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${f.dims[1]}`);if(y>x)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Wm$1=(s,l)=>{let{interleaved:c,numHeads:d,rotaryEmbeddingDim:f,scale:g}=l,v=s[0].dims[0],b=M$1.sizeFromDimension(s[0].dims,1),$=s[0].dims[s[0].dims.length-2],y=b/$,x=s[2].dims[1],C=f===0?x*2:y/d,E=new Array(v,$,y/C,C-x),N=M$1.computeStrides(E),W=[{type:1,data:g},{type:12,data:E},{type:12,data:N},...s[0].dims.length===3?new Array({type:12,data:[b,y,C,1]}):[],...s[0].dims.length===4?new Array({type:12,data:[b,C,$*C,1]}):[],...X(s[0].dims,s[1].dims,s[2].dims,s[3].dims,s[0].dims)],q=Y=>{let re=U$1("input",s[0].dataType,s[0].dims.length),se=U$1("position_ids",s[1].dataType,s[1].dims.length),de=U$1("cos_cache",s[2].dataType,s[2].dims.length),he=U$1("sin_cache",s[3].dataType,s[3].dims.length),ge=K$1("output",s[0].dataType,s[0].dims.length);return Y.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:E.length},{name:"global_strides",type:"u32",length:N.length},{name:"input_output_strides",type:"u32",length:N.length}]),`
        ${Y.declareVariables(re,se,de,he,ge)}

        ${Y.mainStart(mr$1)}
          let half_rotary_emb_dim = uniforms.${de.name}_shape[1];
          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;
          let size = uniforms.global_shape[0] * uniforms.global_strides[0];
          ${Y.guardAgainstOutOfBoundsWorkgroupSizes("size")}

          if (bsnh[3] < half_rotary_emb_dim) {
            let position_ids_idx =
                ${se.broadcastedIndicesToOffset("bsnh.xy",K$1("",se.type.tensor,2))};
            let position_id =
                u32(${se.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);
            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${c});
            let j = i + select(half_rotary_emb_dim, 1, ${c});
            let re = ${re.getByOffset("i")} * ${de.get("position_id","bsnh[3]")} -
                ${re.getByOffset("j")} * ${he.get("position_id","bsnh[3]")};
            ${ge.setByOffset("i","re")}
            let im = ${re.getByOffset("i")} * ${he.get("position_id","bsnh[3]")} +
                ${re.getByOffset("j")} * ${de.get("position_id","bsnh[3]")};
            ${ge.setByOffset("j","im")}
          } else {
            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;
            ${ge.setByOffset("k",re.getByOffset("k"))}
          }
        }`};return{name:"RotaryEmbedding",shaderCache:{hint:we$1({interleaved:c}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:q,getRunData:()=>({outputs:[{dims:s[0].dims,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil(M$1.size(E)/mr$1)},programUniforms:W})}},id$1=(s,l)=>{Um$1(s.inputs,l),s.compute(Wm$1(s.inputs,l))}}),Nm$1,Vm$1,ad$1,sd$1=j(()=>{ye$1(),xe(),_e(),Nm$1=s=>{if(!s||s.length<3)throw new Error("layerNorm requires at least 3 inputs.");let l=s[0],c=s[1],d=s[2];if(l.dataType!==c.dataType||l.dataType!==d.dataType)throw new Error("All inputs must have the same data type");if(l.dims.length!==3&&l.dims.length!==2)throw new Error("Input must be 2D or 3D");if(c.dims.length!==3&&c.dims.length!==2)throw new Error("Skip must be 2D or 3D");let f=l.dims[l.dims.length-1],g=l.dims[l.dims.length-2];if(c.dims[c.dims.length-1]!==f)throw new Error("Skip must have the same hidden size as input");if(c.dims[c.dims.length-2]!==g)throw new Error("Skip must have the same sequence length as input");if(d.dims.length!==1)throw new Error("Gamma must be 1D");if(d.dims[d.dims.length-1]!==f)throw new Error("Gamma must have the same hidden size as input");if(s.length>3){let v=s[3];if(v.dims.length!==1)throw new Error("Beta must be 1D");if(v.dims[v.dims.length-1]!==f)throw new Error("Beta must have the same hidden size as input")}if(s.length>4){let v=s[4];if(v.dims.length!==1)throw new Error("Bias must be 1D");if(v.dims[v.dims.length-1]!==f)throw new Error("Bias must have the same hidden size as input")}},Vm$1=(s,l,c,d)=>{let f=l.simplified,g=s[0].dims,v=M$1.size(g),b=g,$=v,y=g.slice(-1)[0],x=d?g.slice(0,-1).concat(1):[],C=!f&&s.length>3,E=s.length>4,N=d&&c>1,W=d&&c>2,q=c>3,Y=Ue$1(y),re=[{type:12,data:$},{type:12,data:Y},{type:12,data:y},{type:1,data:l.epsilon}],se=he=>{let ge=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],Se=[U$1("x",s[0].dataType,s[0].dims,Y),U$1("skip",s[1].dataType,s[1].dims,Y),U$1("gamma",s[2].dataType,s[2].dims,Y)];C&&Se.push(U$1("beta",s[3].dataType,s[3].dims,Y)),E&&Se.push(U$1("bias",s[4].dataType,s[4].dims,Y)),Se.push(K$1("output",s[0].dataType,b,Y)),N&&Se.push(K$1("mean_output",1,x)),W&&Se.push(K$1("inv_std_output",1,x)),q&&Se.push(K$1("input_skip_bias_sum",s[0].dataType,b,Y));let Ae=De(s[0].dataType);return`

      ${he.registerUniforms(ge).declareVariables(...Se)}

      ${he.mainStart()}
        ${he.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size / uniforms.hidden_size")}
        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;
        let offset = global_idx * hidden_size_vectorized;
        var sum = ${At("f32",Y)};
        var squareSum = ${At("f32",Y)};
        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {
          let skip_value = skip[offset + i];
          let bias_value = ${E?"bias[i]":Ae+"(0.0)"};
          let input_value = x[offset + i];
          let value = input_value + skip_value + bias_value;
          ${q?"input_skip_bias_sum[offset + i] = value;":""}
          output[offset + i] = value;
          let f32_value = ${fr(Ae,Y,"value")};
          sum += f32_value;
          squareSum += f32_value * f32_value;
        }
        let mean = ${Et$1("sum",Y)} / f32(uniforms.hidden_size);
        let inv_std_dev = inverseSqrt(${Et$1("squareSum",Y)} / f32(uniforms.hidden_size) ${f?"":"- mean * mean"} + uniforms.epsilon);
        ${N?"mean_output[global_idx] = mean;":""}
        ${W?"inv_std_output[global_idx] = inv_std_dev;":""}
        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {
          output[offset + i] = (output[offset + i] ${f?"":`- ${Ae}(mean)`}) * ${Ae}(inv_std_dev) * gamma[i] ${C?"+ beta[i]":""};
        }
      }`},de=[{dims:b,dataType:s[0].dataType}];return c>1&&de.push({dims:x,dataType:1}),c>2&&de.push({dims:x,dataType:1}),c>3&&de.push({dims:g,dataType:s[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${Y};${N};${W};${q}`,inputDependencies:s.map((he,ge)=>"type")},getShaderSource:se,getRunData:()=>({outputs:de,dispatchGroup:{x:Math.ceil($/y/64)},programUniforms:re})}},ad$1=(s,l)=>{Nm$1(s.inputs);let c=[0];s.outputCount>1&&c.push(-3),s.outputCount>2&&c.push(-3),s.outputCount>3&&c.push(3),s.compute(Vm$1(s.inputs,l,s.outputCount,!1),{outputs:c})}}),Hm$1,ui$2,Gm$1,ud$1,Lm$1,Fm$1,ld$1,dd$1,cd$1=j(()=>{ye$1(),xe(),Ze$1(),_e(),Hm$1=(s,l)=>{if(!s||s.length<1)throw new Error("too few inputs");if(l.axes.length!==0){if(l.axes.length!==l.starts.length||l.axes.length!==l.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(l.starts.length!==l.ends.length)throw new Error("starts and ends must have the same length");s.slice(1).forEach((c,d)=>{if(s[d+1].dataType!==6&&s[d+1].dataType!==7)throw new Error(`Input ${d} must be an array of int32 or int64`)})},ui$2=(s,l)=>{let c=[];if(s.length>l)if(s[l].dataType===7)s[l].getBigInt64Array().forEach(d=>c.push(Number(d)));else if(s[l].dataType===6)s[l].getInt32Array().forEach(d=>c.push(Number(d)));else throw new Error(`Input ${l} must be an array of int32 or int64`);return c},Gm$1=(s,l)=>{if(s.length>1){let c=ui$2(s,1),d=ui$2(s,2),f=ui$2(s,3);return f.length===0&&(f=[...Array(s[0].dims.length).keys()]),we$1({starts:c,ends:d,axes:f})}else return l},ud$1=(s,l,c,d,f)=>{let g=s;return s<0&&(g+=c[d[l]]),f[l]<0?Math.max(0,Math.min(g,c[d[l]]-1)):Math.max(0,Math.min(g,c[d[l]]))},Lm$1=(s,l,c)=>`fn calculateInputIndices(output_indices: ${l.type.indices}) -> ${s.type.indices} {
          var input_indices: ${s.type.indices};
          var carry = 0u;
          for (var i = ${c.length}; i >= 0; i--) {
            let input_shape_i = ${fe("uniforms.input_shape","i",c.length)};
            let steps_i = ${fe("uniforms.steps","i",c.length)};
            let signs_i = ${fe("uniforms.signs","i",c.length)};
            let starts_i = ${fe("uniforms.starts","i",c.length)};
            var output_index = ${l.indicesGet("output_indices","i")};
            var input_index = output_index * steps_i + starts_i + carry;
            carry = input_index / input_shape_i;
            input_index = input_index % input_shape_i;
            if (signs_i < 0) {
              input_index = input_shape_i - input_index - 1u + starts_i;
            }
            ${s.indicesSet("input_indices","i","input_index")};
          }
          return input_indices;
      }`,Fm$1=(s,l)=>{let c=s[0].dims,d=M$1.size(c),f=l.axes.length>0?M$1.normalizeAxes(l.axes,c.length):[...Array(c.length).keys()],g=ui$2(s,4);g.forEach(re=>re!==0||(()=>{throw new Error("step cannot be 0")})),g.length===0&&(g=Array(f.length).fill(1));let v=l.starts.map((re,se)=>ud$1(re,se,c,f,g)),b=l.ends.map((re,se)=>ud$1(re,se,c,f,g));if(f.length!==v.length||f.length!==b.length)throw new Error("start, ends and axes should have the same number of elements");if(f.length!==c.length)for(let re=0;re<c.length;++re)f.includes(re)||(v.splice(re,0,0),b.splice(re,0,c[re]),g.splice(re,0,1));let $=g.map(re=>Math.sign(re));g.forEach((re,se,de)=>{if(re<0){let he=(b[se]-v[se])/re,ge=v[se],Se=ge+he*g[se];v[se]=Se,b[se]=ge,de[se]=-re}});let y=c.slice(0);f.forEach((re,se)=>{y[re]=Math.ceil((b[re]-v[re])/g[re])});let x={dims:y,dataType:s[0].dataType},C=K$1("output",s[0].dataType,y.length),E=U$1("input",s[0].dataType,s[0].dims.length),N=M$1.size(y),W=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:v.length},{name:"signs",type:"i32",length:$.length},{name:"steps",type:"u32",length:g.length}],q=[{type:12,data:N},{type:12,data:v},{type:6,data:$},{type:12,data:g},...X(s[0].dims,y)],Y=re=>`
      ${re.registerUniforms(W).declareVariables(E,C)}
        ${Lm$1(E,C,c)}
        ${re.mainStart()}
          ${re.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}
          let output_indices = ${C.offsetToIndices("global_idx")};
          let input_indices = calculateInputIndices(output_indices);
          ${C.setByOffset("global_idx",E.getByIndices("input_indices"))}
      }`;return{name:"Slice",shaderCache:{hint:`${$.length}_${v.length}_${g.length}`,inputDependencies:["rank"]},getShaderSource:Y,getRunData:()=>({outputs:[x],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:q})}},ld$1=(s,l)=>{Hm$1(s.inputs,l);let c=Gm$1(s.inputs,l);s.compute(Fm$1(s.inputs,c),{inputs:[0]})},dd$1=s=>{let l=s.starts,c=s.ends,d=s.axes;return we$1({starts:l,ends:c,axes:d})}}),qm$1,jm$1,pd$1,md$1,fd$1=j(()=>{ye$1(),xe(),Ze$1(),_e(),qm$1=s=>{if(!s||s.length!==1)throw new Error("Softmax op requires 1 input.")},jm$1=(s,l)=>{let c=s.dims,d=M$1.size(c),f=64,g=l.axis;if(g<0&&(g=c.length+g),g<c.length-1)throw new Error("softmax only supports last axis for now.");let v=c[g],b=d/v,$=Ue$1(v),y=v/$,x=(Y,re)=>re===4?`max(max(${Y}.x, ${Y}.y), max(${Y}.z, ${Y}.w))`:re===2?`max(${Y}.x, ${Y}.y)`:re===3?`max(max(${Y}.x, ${Y}.y), ${Y}.z)`:Y,C=U$1("x",s.dataType,s.dims,$),E=K$1("result",s.dataType,s.dims,$),N=C.type.value,W=De(s.dataType)==="f32"?`var threadMax = ${N}(-3.402823e+38f);`:`var threadMax = ${N}(-65504.0h);`,q=Y=>`
      var<workgroup> rowMaxShared : ${N};
      var<workgroup> rowSumShared : ${N};
      var<workgroup> threadShared : array<${N}, ${f}>;

      fn getValue(row: i32, col: i32, row_stride: i32) -> ${N} {
        let index = row * row_stride + col;
        return x[index];
      }

      fn setValue(row: i32, col: i32, row_stride: i32, value: ${N}) {
        let index = row * row_stride + col;
        result[index] = value;
      }
      ${Y.registerUniform("packedCols","i32").declareVariables(C,E)}
      ${Y.mainStart()}
        let gindex = i32(global_idx);
        let lindex = i32(local_idx);
        const wg = ${f};
        let row = gindex / wg;
        let cols = uniforms.packedCols;
        let row_stride : i32 = uniforms.packedCols;

        // find the rows max
        ${W}
        for (var col = lindex; col < cols; col += wg) {
          let value = getValue(row, col, row_stride);
          threadMax = max(threadMax, value);
        }
        if (lindex < cols) {
          threadShared[lindex] = threadMax;
        }
        workgroupBarrier();

        var reduceSize = min(cols, wg);
        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {
          reduceSize = currSize + (reduceSize & 1);
          if (lindex < currSize) {
            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowMaxShared = ${N}(${x("threadShared[0]",$)});
        }
        workgroupBarrier();

        // find the rows sum
        var threadSum = ${N}(0.0);
        for (var col = lindex; col < cols; col += wg) {
          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);
          threadSum += subExp;
        }
        threadShared[lindex] = threadSum;
        workgroupBarrier();

        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {
          if (lindex < currSize) {
            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];
          }
          workgroupBarrier();
        }
        if (lindex == 0) {
          rowSumShared = ${N}(${Et$1("threadShared[0]",$)});
        }
        workgroupBarrier();

        // calculate final value for each element in the row
        for (var col = lindex; col < cols; col += wg) {
          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;
          setValue(row, col, row_stride, value);
        }
      }`;return{name:"Softmax",shaderCache:{hint:`${$}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:c,dataType:s.dataType}],dispatchGroup:{x:b},programUniforms:[{type:6,data:y}]}),getShaderSource:q}},pd$1=(s,l)=>{qm$1(s.inputs),s.compute(jm$1(s.inputs[0],l))},md$1=s=>we$1({axis:s.axis})}),Km$1,Ym$1,Xm$1,Zm$1,Qm$1,hd,gd,yd=j(()=>{ye$1(),xe(),Ze$1(),_e(),Km$1=s=>{if(!s||s.length<1)throw new Error("too few inputs")},Ym$1=(s,l)=>{let c=[],d=l.numOutputs;return s[1].dims[0]>0&&(s[1].getBigInt64Array().forEach(f=>c.push(Number(f))),d=c.length),we$1({numOutputs:d,axis:l.axis,splitSizes:c})},Xm$1=s=>`
fn calculateOutputIndex(index: u32) -> u32 {
    for (var i: u32 = 0u; i < ${s}u; i += 1u ) {
    if (index < ${fe("uniforms.size_in_split_axis","i",s)}) {
        return i;
    }
    }
    return ${s}u;
}`,Zm$1=s=>{let l=s.length,c=[];for(let d=0;d<l;++d){let f=s[d].setByIndices("indices","input[global_idx]");l===1?c.push(f):d===0?c.push(`if (output_number == ${d}u) { ${f} }`):d===l-1?c.push(`else { ${f} }`):c.push(`else if (output_number == ${d}) { ${f} }`)}return`
      fn writeBufferData(output_number: u32, indices: ${s[0].type.indices}, global_idx: u32) {
        ${c.join(`
`)}
      }`},Qm$1=(s,l)=>{let c=s[0].dims,d=M$1.size(c),f=s[0].dataType,g=M$1.normalizeAxis(l.axis,c.length),v=new Array(l.numOutputs),b=U$1("input",f,c.length),$=new Array(l.numOutputs),y=[],x=[],C=0,E=[{type:12,data:d}];for(let W=0;W<l.numOutputs;W++){C+=l.splitSizes[W],$[W]=C;let q=c.slice();q[l.axis]=l.splitSizes[W],x.push(q),v[W]=K$1(`output${W}`,f,q.length),y.push({dims:x[W],dataType:s[0].dataType})}E.push({type:12,data:$},...X(c,...x));let N=W=>`
  ${W.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",$.length).declareVariables(b,...v)}
  ${Xm$1($.length)}
  ${Zm$1(v)}

  ${W.mainStart()}
    ${W.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}

    var indices = ${b.offsetToIndices("global_idx")};
    var index = ${b.indicesGet("indices",g)};
    let output_number = calculateOutputIndex(index);
    if (output_number != 0) {
      index -= ${fe("uniforms.size_in_split_axis","output_number - 1u",$.length)};
      ${b.indicesSet("indices",g,"index")};
    }
    writeBufferData(output_number, indices, global_idx);
  }`;return{name:"Split",shaderCache:{hint:l.cacheKey,inputDependencies:["rank"]},getShaderSource:N,getRunData:()=>({outputs:y,dispatchGroup:{x:Math.ceil(d/64)},programUniforms:E})}},hd=(s,l)=>{Km$1(s.inputs);let c=s.inputs.length===1?l:Ym$1(s.inputs,l);s.compute(Qm$1(s.inputs,c),{inputs:[0]})},gd=s=>{let l=s.axis,c=s.splitSizes,d=s.numOutputs<0?c.length:s.numOutputs;if(d!==c.length)throw new Error("numOutputs and splitSizes lengh must be equal");return we$1({axis:l,numOutputs:d,splitSizes:c})}}),bd,Jm$1,ef$1,tf$1,vd$1,wd$1=j(()=>{ye$1(),xe(),_e(),bd=s=>Array.from(s.getBigInt64Array(),Number),Jm$1=s=>{if(!s||s.length!==2)throw new Error("Tile requires 2 inputs.");if(s[0].dataType!==1&&s[0].dataType!==6&&s[0].dataType!==12)throw new Error("Tile only support float, int32, and uint32 data types");if(s[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(s[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(bd(s[1]).length!==s[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},ef$1=(s,l)=>{let c=[];for(let d=0;d<s.length;++d)c.push(s[d]*l[d]);return c},tf$1=s=>{let l=s[0].dims,c=bd(s[1]),d=ef$1(l,c),f=M$1.size(d),g=s[0].dataType,v=U$1("input",g,l.length),b=K$1("output",g,d.length),$=y=>`
      const inputShape = ${v.indices(...l)};
      ${y.registerUniform("output_size","u32").declareVariables(v,b)}
      ${y.mainStart()}
      ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}
      let output_indices = ${b.offsetToIndices("global_idx")};
      var input_indices: ${v.type.indices};
      for (var i = 0; i < ${l.length}; i++) {
        let input_dim_i = ${v.indicesGet("uniforms.input_shape","i")};
        let input_dim_value = ${b.indicesGet("output_indices","i")}  % input_dim_i;

        ${v.indicesSet("input_indices","i","input_dim_value")}
      }
      ${b.setByOffset("global_idx",v.getByIndices("input_indices"))}
    }`;return{name:"Tile",shaderCache:{hint:`${c}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:d,dataType:s[0].dataType}],dispatchGroup:{x:Math.ceil(f/64)},programUniforms:[{type:12,data:f},...X(s[0].dims,d)]}),getShaderSource:$}},vd$1=s=>{Jm$1(s.inputs),s.compute(tf$1(s.inputs),{inputs:[0]})}}),rf$1,nf$1,$d$1,_d$1=j(()=>{ye$1(),xe(),_e(),rf$1=(s,l,c,d,f)=>{let g=K$1("output_data",f,c.length,4),v=U$1("a_data",l[1].dataType,l[1].dims.length,4),b=U$1("b_data",l[2].dataType,l[2].dims.length,4),$=U$1("c_data",l[0].dataType,l[0].dims.length,4),y,x=(C,E,N)=>`select(${E}, ${C}, ${N})`;if(!d)y=g.setByOffset("global_idx",x(v.getByOffset("global_idx"),b.getByOffset("global_idx"),$.getByOffset("global_idx")));else{let C=(E,N,W="")=>{let q=`a_data[index_a${N}][component_a${N}]`,Y=`b_data[index_b${N}][component_b${N}]`,re=`bool(c_data[index_c${N}] & (0xffu << (component_c${N} * 8)))`;return`
            let output_indices${N} = ${g.offsetToIndices(`global_idx * 4u + ${N}u`)};
            let offset_a${N} = ${v.broadcastedIndicesToOffset(`output_indices${N}`,g)};
            let offset_b${N} = ${b.broadcastedIndicesToOffset(`output_indices${N}`,g)};
            let offset_c${N} = ${$.broadcastedIndicesToOffset(`output_indices${N}`,g)};
            let index_a${N} = offset_a${N} / 4u;
            let index_b${N} = offset_b${N} / 4u;
            let index_c${N} = offset_c${N} / 4u;
            let component_a${N} = offset_a${N} % 4u;
            let component_b${N} = offset_b${N} % 4u;
            let component_c${N} = offset_c${N} % 4u;
            ${E}[${N}] = ${W}(${x(q,Y,re)});
          `};f===9?y=`
            var data = vec4<u32>(0);
            ${C("data",0,"u32")}
            ${C("data",1,"u32")}
            ${C("data",2,"u32")}
            ${C("data",3,"u32")}
            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:y=`
            ${C("output_data[global_idx]",0)}
            ${C("output_data[global_idx]",1)}
            ${C("output_data[global_idx]",2)}
            ${C("output_data[global_idx]",3)}
          `}return`
        ${s.registerUniform("vec_size","u32").declareVariables($,v,b,g)}
        ${s.mainStart()}
        ${s.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}
        ${y}
      }`},nf$1=s=>{let l=s[1].dims,c=s[2].dims,d=s[0].dims,f=s[1].dataType,g=!(M$1.areEqual(l,c)&&M$1.areEqual(c,d)),v=l,b=M$1.size(l);if(g){let y=zt$1.calcShape(zt$1.calcShape(l,c,!1),d,!1);if(!y)throw new Error("Can't perform where op on the given tensors");v=y,b=M$1.size(v)}let $=Math.ceil(b/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:y=>rf$1(y,s,v,g,f),getRunData:()=>({outputs:[{dims:v,dataType:f}],dispatchGroup:{x:Math.ceil(b/64/4)},programUniforms:[{type:12,data:$},...X(d,l,c,v)]})}},$d$1=s=>{s.compute(nf$1(s.inputs))}}),xd$1,Sd$1=j(()=>{zs$1(),oo$1(),Ws$1(),Vs$1(),Cu$1(),Du$1(),io$1(),co$1(),Xu(),Ju(),rl$1(),sl$1(),dl$1(),pl$1(),hl$1(),bl$1(),$l$1(),xl$1(),Cl$1(),mo$1(),Al$1(),Pl(),zl$1(),Zl$1(),Jl$1(),jn$1(),nd$1(),od$1(),sd$1(),cd$1(),fd$1(),yd(),wd$1(),Rr(),Jn$1(),_d$1(),xd$1=new Map([["Abs",[Hs$1]],["Acos",[Gs$1]],["Acosh",[Ls$1]],["Add",[Iu$1]],["ArgMax",[Rs$1,no$1]],["ArgMin",[Ps,no$1]],["Asin",[Fs$1]],["Asinh",[qs$1]],["Atan",[js$1]],["Atanh",[Ks$1]],["Attention",[Ms]],["AveragePool",[Hl$1,Vl$1]],["BatchNormalization",[Us$1]],["BiasAdd",[Ns]],["BiasSplitGelu",[Su$1]],["Cast",[Xs$1,Ys$1]],["Ceil",[Qs$1]],["Clip",[Zs$1]],["Concat",[Bs$1,Ds$1]],["Conv",[go$1,ho$1]],["ConvTranspose",[Yu,Ku]],["Cos",[Js$1]],["Cosh",[eu$1]],["CumSum",[Zu,Qu]],["DepthToSpace",[el$1,tl$1]],["Div",[Tu$1]],["Einsum",[ol$1,al$1]],["Elu",[tu$1,Zn$1]],["Equal",[Au$1]],["Erf",[ru$1]],["Exp",[nu$1]],["Expand",[ll$1]],["FastGelu",[cl$1]],["Floor",[iu$1]],["FusedConv",[go$1,ho$1]],["Gather",[fl$1,ml$1]],["GatherElements",[yl$1,gl$1]],["Gelu",[ou$1]],["Gemm",[wl$1,vl$1]],["GlobalAveragePool",[Fl$1,Ll$1]],["GlobalMaxPool",[Xl$1,Yl$1]],["Greater",[Pu$1]],["GreaterOrEqual",[zu$1]],["HardSigmoid",[mu$1,pu$1]],["InstanceNormalization",[_l$1]],["LayerNormalization",[Sl$1]],["LeakyRelu",[au$1,Zn$1]],["Less",[Ru$1]],["LessOrEqual",[Bu$1]],["Log",[_u$1]],["MatMul",[Hu$1]],["MatMulNBits",[Il$1,Tl$1]],["MaxPool",[jl$1,Kl$1]],["Mul",[Eu$1]],["MultiHeadAttention",[Ol$1,kl$1]],["Neg",[uu$1]],["Not",[su$1]],["Pad",[Rl$1]],["Pow",[ku$1]],["Range",[Ql$1]],["Reciprocal",[lu$1]],["ReduceMin",[Is]],["ReduceMean",[$s$1]],["ReduceMax",[Cs$1]],["ReduceSum",[As]],["ReduceProd",[Ts]],["ReduceL1",[_s$1]],["ReduceL2",[xs$1]],["ReduceLogSum",[ks$1]],["ReduceLogSumExp",[Ss$1]],["ReduceSumSquare",[Es$1]],["Relu",[du$1]],["Resize",[td$1,rd$1]],["RotaryEmbedding",[id$1]],["Sigmoid",[cu$1]],["Sin",[fu$1]],["Sinh",[hu$1]],["Slice",[ld$1,dd$1]],["SkipLayerNormalization",[ad$1]],["Split",[hd,gd]],["Sqrt",[gu$1]],["Softmax",[pd$1,md$1]],["Sub",[Ou$1]],["Tan",[yu$1]],["Tanh",[vu$1]],["ThresholdedRelu",[$u$1,Zn$1]],["Tile",[vd$1]],["Transpose",[us$1,ls$1]],["Where",[$d$1]]])}),li$1,Cd$1=j(()=>{_t(),Xt$1(),_e(),li$1=class{constructor(s){this.backend=s,this.repo=new Map,this.attributesBound=!1}getArtifact(s){return this.repo.get(s)}setArtifact(s,l){this.repo.set(s,l)}run(s,l,c,d,f){yt$1(s.programInfo.name);let g=this.backend.device,v=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let b=[];for(let y of l)b.push({binding:b.length,resource:{buffer:y.buffer}});for(let y of c)b.push({binding:b.length,resource:{buffer:y.buffer}});f&&b.push({binding:b.length,resource:f});let $=g.createBindGroup({layout:s.computePipeline.getBindGroupLayout(0),entries:b,label:s.programInfo.name});if(this.backend.sessionStatus==="capturing"){let y={kernelId:this.backend.currentKernelId,computePipeline:s.computePipeline,bindGroup:$,dispatchGroup:d};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(y)}v.setPipeline(s.computePipeline),v.setBindGroup(0,$),v.dispatchWorkgroups(...d),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),ut$1(s.programInfo.name)}dispose(){}build(s,l){yt$1(s.name);let c=this.backend.device,d=[];c.features.has("shader-f16")&&d.push("enable f16;");let f=as$1(l,this.backend.device.limits),g=s.getShaderSource(f),v=`${d.join(`
`)}
${f.additionalImplementations}
${g}`,b=c.createShaderModule({code:v,label:s.name});Ne("verbose",()=>`[WebGPU] ${s.name} shader code: ${v}`);let $=c.createComputePipeline({compute:{module:b,entryPoint:"main"},layout:"auto",label:s.name});return ut$1(s.name),{programInfo:s,computePipeline:$,uniformVariablesInfo:f.variablesInfo}}normalizeDispatchGroupSize(s){let l=typeof s=="number"?s:s.x,c=typeof s=="number"?1:s.y||1,d=typeof s=="number"?1:s.z||1,f=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(l<=f&&c<=f&&d<=f)return[l,c,d];let g=l*c*d,v=Math.ceil(Math.sqrt(g));if(v>f){if(v=Math.ceil(Math.cbrt(g)),v>f)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[v,v,v]}else return[v,v,1]}}}),of$1,af$1,_o$1,di$1,Id$1=j(()=>{_t(),ye$1(),Xt$1(),es$1(),os$2(),Sd$1(),Cd$1(),of$1=(s,l)=>{if(l.length!==s.length)throw new Error(`inputDependencies length ${l.length} is not equal to inputTensors length ${s.length}.`);let c=[];for(let d=0;d<s.length;++d){let f=s[d].dataType;switch(l[d]){case"none":{c.push("");break}case"type":{c.push(`${f}`);break}case"rank":{let g=s[d].dims.length;c.push(`${f};${g}`);break}case"dims":{let g=s[d].dims.join(",");c.push(`${f};${g}`);break}default:throw new Error(`unsupported input dependency: ${l[d]}`)}}return c.join("|")},af$1=(s,l,c)=>{var f,g;let d=s.name;return(f=s.shaderCache)!=null&&f.hint&&(d+="["+s.shaderCache.hint+"]"),d+=":"+c+`:${of$1(l,((g=s.shaderCache)==null?void 0:g.inputDependencies)??new Array(l.length).fill("dims"))}`,d},_o$1=class{constructor(s){s&&(this.architecture=s.architecture,this.vendor=s.vendor)}isArchitecture(s){return this.architecture===s}isVendor(s){return this.vendor===s}},di$1=class{constructor(){this.currentSessionId=null,this.currentKernelId=null,this.commandEncoder=null,this.computePassEncoder=null,this.maxDispatchNumber=16,this.pendingDispatchNumber=0,this.pendingKernels=[],this.pendingQueries=new Map,this.sessionStatus="default",this.capturedCommandList=new Map,this.capturedPendingKernels=new Map,this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let s=this.kernelCustomData.get(this.currentKernelId);return s||(s={},this.kernelCustomData.set(this.currentKernelId,s)),s}async initialize(s,l){this.env=s;let c=[],d={requiredLimits:{maxComputeWorkgroupStorageSize:l.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:l.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:l.limits.maxStorageBufferBindingSize,maxBufferSize:l.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:l.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:l.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:l.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:l.limits.maxComputeWorkgroupSizeZ},requiredFeatures:c};l.features.has("chromium-experimental-timestamp-query-inside-passes")?c.push("chromium-experimental-timestamp-query-inside-passes"):l.features.has("timestamp-query")&&c.push("timestamp-query"),l.features.has("shader-f16")&&c.push("shader-f16"),this.device=await l.requestDevice(d),this.adapterInfo=new _o$1(await l.requestAdapterInfo()),this.gpuDataManager=is$3(this),this.programManager=new li$1(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,Qa$1(s.logLevel,!!s.debug),this.device.onuncapturederror=f=>{f.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${f.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:l,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let s=this.getCommandEncoder(),l={};this.queryType==="at-passes"&&(l.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=s.beginComputePass(l)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;yt$1(),this.endComputePass();let s;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),s=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(s,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,s,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&s.mapAsync(GPUMapMode.READ).then(()=>{var d;let l=new BigUint64Array(s.getMappedRange()),c=this.pendingQueries.get(s);for(let f=0;f<l.length/2;f++){let g=c[f],v=g.kernelId,b=this.kernels.get(v),$=b.kernelType,y=b.kernelName,x=g.programName,C=g.inputTensorViews,E=g.outputTensorViews,N=l[f*2],W=l[f*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=N);let q=Number(N-this.queryTimeBase),Y=Number(W-this.queryTimeBase);if(!Number.isSafeInteger(q)||!Number.isSafeInteger(Y))throw new RangeError("incorrect timestamp range");if((d=this.env.webgpu.profiling)!=null&&d.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:C.map(re=>({dims:re.dims,dataType:Yt$1(re.dataType)})),outputsMetadata:E.map(re=>({dims:re.dims,dataType:Yt$1(re.dataType)})),kernelId:v,kernelType:$,kernelName:y,programName:x,startTime:q,endTime:Y});else{let re="";C.forEach((de,he)=>{re+=`input[${he}]: [${de.dims}] | ${Yt$1(de.dataType)}, `});let se="";E.forEach((de,he)=>{se+=`output[${he}]: [${de.dims}] | ${Yt$1(de.dataType)}, `}),console.log(`[profiling] kernel "${v}|${$}|${y}|${x}" ${re}${se}execution time: ${Y-q} ns`)}Bn$1("GPU",`${x}::${N}::${W}`)}s.unmap(),this.pendingQueries.delete(s)}),ut$1()}run(s,l,c,d,f,g){yt$1(s.name);let v=[];for(let se=0;se<l.length;++se){let de=l[se].data;if(de===0)continue;let he=this.gpuDataManager.get(de);if(!he)throw new Error(`no GPU data for input: ${de}`);v.push(he)}let{outputs:b,dispatchGroup:$,programUniforms:y}=s.getRunData(l),x=c.length===0?b.map((se,de)=>de):c;if(x.length!==b.length)throw new Error(`Output size ${x.length} must be equal to ${b.length}.`);let C=[],E=[];for(let se=0;se<b.length;++se){if(!Number.isInteger(x[se])||x[se]<-3||x[se]>=g)throw new Error(`Invalid output index: ${x[se]}`);if(x[se]===-3)continue;let de=x[se]===-1,he=x[se]===-2,ge=de||he?f(b[se].dataType,b[se].dims):d(x[se],b[se].dataType,b[se].dims);if(C.push(ge),ge.data===0)continue;let Se=this.gpuDataManager.get(ge.data);if(!Se)throw new Error(`no GPU data for output: ${ge.data}`);if(de&&this.temporaryData.push(Se),he){let Ae=this.kernelPersistentData.get(this.currentKernelId);Ae||(Ae=[],this.kernelPersistentData.set(this.currentKernelId,Ae)),Ae.push(Se)}E.push(Se)}if(v.length!==l.length||E.length!==C.length){if(E.length===0)return ut$1(s.name),C;throw new Error(`Program ${s.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let N;if(y){let se=0,de=[];y.forEach(Ae=>{let Re=typeof Ae.data=="number"?[Ae.data]:Ae.data;if(Re.length===0)return;let Be=Ae.type===10?2:4,Ke,Lr;Ae.type===10?(Lr=Re.length>4?16:Re.length>2?8:Re.length*Be,Ke=Re.length>4?16:Be*Re.length):(Lr=Re.length<=2?Re.length*Be:16,Ke=16),se=Math.ceil(se/Lr)*Lr,de.push(se);let _y=Ae.type===10?8:4;se+=Re.length>4?Math.ceil(Re.length/_y)*Ke:Re.length*Be});let he=16;se=Math.ceil(se/he)*he;let ge=new ArrayBuffer(se);y.forEach((Ae,Re)=>{let Be=de[Re],Ke=typeof Ae.data=="number"?[Ae.data]:Ae.data;if(Ae.type===6)new Int32Array(ge,Be,Ke.length).set(Ke);else if(Ae.type===12)new Uint32Array(ge,Be,Ke.length).set(Ke);else if(Ae.type===10)new Uint16Array(ge,Be,Ke.length).set(Ke);else if(Ae.type===1)new Float32Array(ge,Be,Ke.length).set(Ke);else throw new Error(`Unsupported uniform type: ${Yt$1(Ae.type)}`)});let Se=this.gpuDataManager.create(se,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(Se.buffer,0,ge,0,se),this.gpuDataManager.release(Se.id),N={offset:0,size:se,buffer:Se.buffer}}let W=this.programManager.normalizeDispatchGroupSize($),q=W[1]===1&&W[2]===1,Y=af$1(s,l,q),re=this.programManager.getArtifact(Y);if(re||(re=this.programManager.build(s,W),this.programManager.setArtifact(Y,re),Ne("info",()=>`[artifact] key: ${Y}, programName: ${s.name}`)),y&&re.uniformVariablesInfo){if(y.length!==re.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${re.uniformVariablesInfo.length}, got ${y.length} in program "${re.programInfo.name}".`);for(let se=0;se<y.length;se++){let de=y[se],he=de.type,ge=typeof de.data=="number"?1:de.data.length,[Se,Ae]=re.uniformVariablesInfo[se];if(he!==Se||ge!==Ae)throw new Error(`Uniform variable ${se} mismatch: expect type ${Se} with size ${Ae}, got type ${he} with size ${ge} in program "${re.programInfo.name}".`)}}if(Ne("info",()=>`[ProgramManager] run "${s.name}" (key=${Y}) with ${W[0]}x${W[1]}x${W[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let se={kernelId:this.currentKernelId,programName:re.programInfo.name,inputTensorViews:l,outputTensorViews:C};this.pendingKernels.push(se),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(se)}return this.programManager.run(re,v,E,W,N),ut$1(s.name),C}upload(s,l){this.gpuDataManager.upload(s,l)}memcpy(s,l){this.gpuDataManager.memcpy(s,l)}async download(s,l){await this.gpuDataManager.download(s,l)}alloc(s){return this.gpuDataManager.create(s).id}free(s){return this.gpuDataManager.release(s)}createKernel(s,l,c,d){let f=xd$1.get(s);if(!f)throw new Error(`kernel not implemented: ${s}`);let g={kernelType:s,kernelName:d,kernelEntry:f[0],attributes:[f[1],c]};this.kernels.set(l,g)}releaseKernel(s){let l=this.kernelPersistentData.get(s);if(l){for(let c of l)this.gpuDataManager.release(c.id);this.kernelPersistentData.delete(s)}this.kernelCustomData.delete(s),this.kernels.delete(s)}computeKernel(s,l,c){let d=this.kernels.get(s);if(!d)throw new Error(`kernel not created: ${s}`);let f=d.kernelType,g=d.kernelName,v=d.kernelEntry,b=d.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${f}] ${g}" is not allowed to be called recursively`);this.currentKernelId=s,b[0]&&(b[1]=b[0](b[1]),b[0]=void 0),Ne("info",()=>`[WebGPU] Start to run kernel "[${f}] ${g}"...`);let $=this.env.debug;this.temporaryData=[];try{return $&&this.device.pushErrorScope("validation"),v(l,b[1]),0}catch(y){return c.push(Promise.resolve(`[WebGPU] Kernel "[${f}] ${g}" failed. ${y}`)),1}finally{$&&c.push(this.device.popErrorScope().then(y=>y?`GPU validation error for kernel "[${f}] ${g}": ${y.message}`:null));for(let y of this.temporaryData)this.gpuDataManager.release(y.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(s,l,c,d){let f=this.sessionExternalDataMapping.get(s);f||(f=new Map,this.sessionExternalDataMapping.set(s,f));let g=f.get(l),v=this.gpuDataManager.registerExternalBuffer(c,d,g==null?void 0:g[1]);return f.set(l,[v,c]),v}unregisterBuffers(s){let l=this.sessionExternalDataMapping.get(s);l&&(l.forEach(c=>this.gpuDataManager.unregisterExternalBuffer(c[1])),this.sessionExternalDataMapping.delete(s))}getBuffer(s){let l=this.gpuDataManager.get(s);if(!l)throw new Error(`no GPU data for buffer: ${s}`);return l.buffer}createDownloader(s,l,c){return async()=>{let d=await Xi$1(this,s,l);return Ja$1(d.buffer,c)}}writeTimestamp(s){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,s)}setQueryType(){var s;this.queryType="none",(((s=this.env.webgpu.profiling)==null?void 0:s.mode)==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){Ne("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){Ne("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){Ne("info","replay"),this.sessionStatus="replaying";let s=this.capturedCommandList.get(this.currentSessionId),l=this.capturedPendingKernels.get(this.currentSessionId),c=s.length;this.pendingKernels=[];for(let d=0;d<c;d++){let f=this.getComputePassEncoder(),g=s[d];this.writeTimestamp(this.pendingDispatchNumber*2),f.setPipeline(g.computePipeline),f.setBindGroup(0,g.bindGroup),f.dispatchWorkgroups(...g.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(l[d]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onReleaseSession(s){this.unregisterBuffers(s),this.capturedCommandList.has(s)&&this.capturedCommandList.delete(s),this.capturedPendingKernels.has(s)&&this.capturedPendingKernels.delete(s),this.gpuDataManager.onReleaseSession(s)}onRunStart(s){this.currentSessionId=s,this.setQueryType()}}}),Td$1={};kr$1(Td$1,{init:()=>sf$1});var an$1,xo$1,sf$1,Ad$1=j(()=>{ye$1(),Id$1(),Xt$1(),xe(),an$1=class B3e{constructor(l,c,d,f){this.module=l,this.dataType=c,this.data=d,this.dims=f}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let l=M$1.size(this.dims);return l===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,l)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let l=M$1.size(this.dims);return l===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,l)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let l=M$1.size(this.dims);return l===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,l)}reshape(l){if(M$1.size(l)!==M$1.size(this.dims))throw new Error("Invalid new shape");return new B3e(this.module,this.dataType,this.data,l)}},xo$1=class{constructor(s,l,c){this.module=s,this.backend=l,this.customDataOffset=0,this.customDataSize=0,this.adapterInfo=l.adapterInfo;let d=s.HEAPU32,f=c>>>2;this.opKernelContext=d[f++];let g=d[f++];this.outputCount=d[f++],this.customDataOffset=d[f++],this.customDataSize=d[f++];let v=[];for(let b=0;b<g;b++){let $=d[f++],y=d[f++],x=d[f++],C=[];for(let E=0;E<x;E++)C.push(d[f++]);v.push(new an$1(s,$,y,C))}this.inputs=v}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}getMaxComputeWorkgroupSizes(){return[this.backend.device.limits.maxComputeWorkgroupSizeX,this.backend.device.limits.maxComputeWorkgroupSizeY,this.backend.device.limits.maxComputeWorkgroupSizeZ]}getMaxComputeWorkgroupStoragesize(){return this.backend.device.limits.maxComputeWorkgroupStorageSize}compute(s,l){var v;let c=((v=l==null?void 0:l.inputs)==null?void 0:v.map(b=>typeof b=="number"?this.inputs[b]:b))??this.inputs,d=(l==null?void 0:l.outputs)??[],f=(b,$,y)=>new an$1(this.module,$,this.output(b,y),y),g=(b,$)=>{let y=cr$1(b);if(!y)throw new Error(`Unsupported data type: ${b}`);let x=y*M$1.size($),C=x>0?this.backend.gpuDataManager.create(x).id:0;return new an$1(this.module,b,C,$)};return this.backend.run(s,c,d,f,g,this.outputCount)}output(s,l){let c=this.module.stackSave();try{let d=this.module.stackAlloc((1+l.length)*4),f=d>>2;this.module.HEAPU32[f++]=l.length;for(let g=0;g<l.length;g++)this.module.HEAPU32[f++]=l[g];return this.module._JsepOutput(this.opKernelContext,s,d)}catch(d){throw new Error(`Failed to generate kernel's output[${s}] with dims [${l}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${d}`)}finally{this.module.stackRestore(c)}}},sf$1=async(s,l,c,d)=>{let f=l.jsepInit;if(!f)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(s==="webgpu"){let g=new di$1;await g.initialize(c,d),f("webgpu",[g,v=>g.alloc(v),v=>g.free(v),(v,b,$,y=!1)=>{if(y)Ne("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${v}, dst=${b}, size=${$}`),g.memcpy(v,b);else{Ne("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${v}, gpuDataId=${b}, size=${$}`);let x=l.HEAPU8.subarray(v>>>0,(v>>>0)+$);g.upload(b,x)}},async(v,b,$)=>{Ne("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${v}, dataOffset=${b}, size=${$}`),await g.download(v,()=>l.HEAPU8.subarray(b>>>0,(b>>>0)+$))},(v,b,$)=>g.createKernel(v,b,$,l.UTF8ToString(l._JsepGetNodeName(b))),v=>g.releaseKernel(v),(v,b,$,y)=>{Ne("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${$}, kernel=${v}, contextDataOffset=${b}`);let x=new xo$1(l,g,b);return g.computeKernel(v,x,y)},()=>g.captureBegin(),()=>g.captureEnd(),()=>g.replay()])}else f("webnn")}}),uf$1,kd$1,Od$1,hr,lf$1,So$1,Pd$1,Rd$1,Ed$1,zd$1,Bd$1,Dd$1,Md$1=j(()=>{ja$1(),Ya$1(),ye$1(),Or$1(),Wn$1(),qi$1(),uf$1=(s,l)=>{Fe$2()._OrtInit(s,l)!==0&&We$1("Can't initialize onnxruntime.")},kd$1=async s=>{uf$1(s.wasm.numThreads,en$1(s.logLevel))},Od$1=async(s,l)=>{{let c=(Ad$1(),sr$1(Td$1)).init;if(l==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let d=s.webgpu.adapter;if(d){if(typeof d.limits!="object"||typeof d.features!="object"||typeof d.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let f=s.webgpu.powerPreference;if(f!==void 0&&f!=="low-power"&&f!=="high-performance")throw new Error(`Invalid powerPreference setting: "${f}"`);let g=s.webgpu.forceFallbackAdapter;if(g!==void 0&&typeof g!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${g}"`);if(d=await navigator.gpu.requestAdapter({powerPreference:f,forceFallbackAdapter:g}),!d)throw new Error('Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.')}if(!s.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using `webgpu` EP");await c("webgpu",Fe$2(),s,d)}if(l==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await c("webnn",Fe$2(),s)}}},hr=new Map,lf$1=s=>{let l=Fe$2(),c=l.stackSave();try{let d=l.stackAlloc(8);return l._OrtGetInputOutputCount(s,d,d+4)!==0&&We$1("Can't get session input/output count."),[l.HEAP32[d/4],l.HEAP32[d/4+1]]}finally{l.stackRestore(c)}},So$1=s=>{let l=Fe$2(),c=l._malloc(s.byteLength);if(c===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${s.byteLength}.`);return l.HEAPU8.set(s,c),[c,s.byteLength]},Pd$1=async(s,l)=>{var C,E;let c,d,f=Fe$2();Array.isArray(s)?[c,d]=s:s.buffer===f.HEAPU8.buffer?[c,d]=[s.byteOffset,s.byteLength]:[c,d]=So$1(s);let g=0,v=0,b=0,$=[],y=[],x=[];try{if([v,$]=Ka$1(l),(l==null?void 0:l.externalData)&&f.mountExternalData){let he=[];for(let ge of l.externalData){let Se=typeof ge=="string"?ge:ge.path;he.push(tn$1(typeof ge=="string"?ge:ge.data).then(Ae=>{f.mountExternalData(Se,Ae)}))}await Promise.all(he)}g=await f._OrtCreateSession(c,d,v),g===0&&We$1("Can't create a session.");let[N,W]=lf$1(g),q=!!(l!=null&&l.enableGraphCapture),Y=[],re=[],se=[];for(let he=0;he<N;he++){let ge=f._OrtGetInputName(g,he);ge===0&&We$1("Can't get an input name."),y.push(ge),Y.push(f.UTF8ToString(ge))}for(let he=0;he<W;he++){let ge=f._OrtGetOutputName(g,he);ge===0&&We$1("Can't get an output name."),x.push(ge);let Se=f.UTF8ToString(ge);re.push(Se);{if(q&&(l==null?void 0:l.preferredOutputLocation)===void 0){se.push("gpu-buffer");continue}let Ae=typeof(l==null?void 0:l.preferredOutputLocation)=="string"?l.preferredOutputLocation:((C=l==null?void 0:l.preferredOutputLocation)==null?void 0:C[Se])??"cpu";if(Ae!=="cpu"&&Ae!=="cpu-pinned"&&Ae!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${Ae}.`);if(q&&Ae!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${Ae}. Only 'gpu-buffer' location is supported when enableGraphCapture is true.`);se.push(Ae)}}let de=null;return se.some(he=>he==="gpu-buffer")&&(b=f._OrtCreateBinding(g),b===0&&We$1("Can't create IO binding."),de={handle:b,outputPreferredLocations:se,outputPreferredLocationsEncoded:se.map(he=>Fi$1(he))}),hr.set(g,[g,y,x,de,q,!1]),[g,Y,re]}catch(N){throw y.forEach(W=>f._OrtFree(W)),x.forEach(W=>f._OrtFree(W)),b!==0&&f._OrtReleaseBinding(b),g!==0&&f._OrtReleaseSession(g),N}finally{f._free(c),v!==0&&f._OrtReleaseSessionOptions(v),$.forEach(N=>f._free(N)),(E=f.unmountExternalData)==null||E.call(f)}},Rd$1=s=>{var $;let l=Fe$2(),c=hr.get(s);if(!c)throw new Error(`cannot release session. invalid session id: ${s}`);let[d,f,g,v,b]=c;v&&(b&&l._OrtClearBoundOutputs(v.handle),l._OrtReleaseBinding(v.handle)),($=l.jsepOnReleaseSession)==null||$.call(l,s),f.forEach(y=>l._OrtFree(y)),g.forEach(y=>l._OrtFree(y)),l._OrtReleaseSession(d),hr.delete(s)},Ed$1=(s,l,c,d,f,g=!1)=>{if(!s){l.push(0);return}let v=Fe$2(),b=s[0],$=s[1],y=s[3],x,C;if(b==="string"&&y==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(g&&y!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${f} when enableGraphCapture is true.`);if(y==="gpu-buffer"){let W=s[2].gpuBuffer,q=cr$1(Li$1(b));C=$.reduce((re,se)=>re*se,1)*q;let Y=v.jsepRegisterBuffer;if(!Y)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');x=Y(d,f,W,C)}else{let W=s[2];if(Array.isArray(W)){C=4*W.length,x=v._malloc(C),c.push(x);let q=x/4;for(let Y=0;Y<W.length;Y++){if(typeof W[Y]!="string")throw new TypeError(`tensor data at index ${Y} is not a string`);v.HEAPU32[q++]=qe$2(W[Y],c)}}else C=W.byteLength,x=v._malloc(C),c.push(x),v.HEAPU8.set(new Uint8Array(W.buffer,W.byteOffset,C),x)}let E=v.stackSave(),N=v.stackAlloc(4*$.length);try{let W=N/4;$.forEach(Y=>v.HEAP32[W++]=Y);let q=v._OrtCreateTensor(Li$1(b),x,C,N,$.length,Fi$1(y));q===0&&We$1(`Can't create tensor for input/output. session=${d}, index=${f}.`),l.push(q)}finally{v.stackRestore(E)}},zd$1=async(s,l,c,d,f,g)=>{var Ke,Lr;let v=Fe$2(),b=hr.get(s);if(!b)throw new Error(`cannot run inference. invalid session id: ${s}`);let $=b[0],y=b[1],x=b[2],C=b[3],E=b[4],N=b[5],W=l.length,q=d.length,Y=0,re=[],se=[],de=[],he=[],ge=v.stackSave(),Se=v.stackAlloc(W*4),Ae=v.stackAlloc(W*4),Re=v.stackAlloc(q*4),Be=v.stackAlloc(q*4);try{[Y,re]=qa$1(g);for(let Y$=0;Y$<W;Y$++)Ed$1(c[Y$],se,he,s,l[Y$],E);for(let Y$=0;Y$<q;Y$++)Ed$1(f[Y$],de,he,s,W+d[Y$],E);let _y=Se/4,by=Ae/4,yy=Re/4,my=Be/4;for(let Y$=0;Y$<W;Y$++)v.HEAPU32[_y++]=se[Y$],v.HEAPU32[by++]=y[l[Y$]];for(let Y$=0;Y$<q;Y$++)v.HEAPU32[yy++]=de[Y$],v.HEAPU32[my++]=x[d[Y$]];if(C&&!N){let{handle:Y$,outputPreferredLocations:W$,outputPreferredLocationsEncoded:U$}=C;if(y.length!==W)throw new Error(`input count from feeds (${W}) is expected to be always equal to model's input count (${y.length}).`);for(let hy=0;hy<W;hy++){let G$=l[hy];await v._OrtBindInput(Y$,y[G$],se[hy])!==0&&We$1(`Can't bind input[${hy}] for session=${s}.`)}for(let hy=0;hy<q;hy++){let G$=d[hy];(Ke=f[hy])!=null&&Ke[3]?v._OrtBindOutput(Y$,x[G$],de[hy],0)!==0&&We$1(`Can't bind pre-allocated output[${hy}] for session=${s}.`):v._OrtBindOutput(Y$,x[G$],0,U$[G$])!==0&&We$1(`Can't bind output[${hy}] to ${W$[hy]} for session=${s}.`)}hr.set(s,[$,y,x,C,E,!0])}(Lr=v.jsepOnRunStart)==null||Lr.call(v,$);let $t;C?$t=await v._OrtRunWithBinding($,C.handle,q,Re,Y):$t=await v._OrtRun($,Ae,Se,W,Be,q,Re,Y),$t!==0&&We$1("failed to call OrtRun().");let K$=[];for(let Y$=0;Y$<q;Y$++){let W$=v.HEAPU32[Re/4+Y$];if(W$===de[Y$]){K$.push(f[Y$]);continue}let U$=v.stackSave(),hy=v.stackAlloc(4*4),G$=!1,ky,$y=0;try{v._OrtGetTensorData(W$,hy,hy+4,hy+8,hy+12)!==0&&We$1(`Can't access output tensor data on index ${Y$}.`);let rS=hy/4,lS=v.HEAPU32[rS++];$y=v.HEAPU32[rS++];let bS=v.HEAPU32[rS++],IS=v.HEAPU32[rS++],BS=[];for(let LS=0;LS<IS;LS++)BS.push(v.HEAPU32[bS/4+LS]);v._OrtFree(bS);let MS=BS.reduce((LS,nS)=>LS*nS,1);ky=Yt$1(lS);let zS=C==null?void 0:C.outputPreferredLocations[d[Y$]];if(ky==="string"){if(zS==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let LS=[],nS=$y/4;for(let Z$=0;Z$<MS;Z$++){let dS=v.HEAPU32[nS++],ES=Z$===MS-1?void 0:v.HEAPU32[nS]-dS;LS.push(v.UTF8ToString(dS,ES))}K$.push([ky,BS,LS,"cpu"])}else if(zS==="gpu-buffer"&&MS>0){let LS=v.jsepGetBuffer;if(!LS)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let nS=LS($y),Z$=cr$1(lS);if(Z$===void 0||!Vn(ky))throw new Error(`Unsupported data type: ${ky}`);G$=!0,K$.push([ky,BS,{gpuBuffer:nS,download:v.jsepCreateDownloader(nS,MS*Z$,ky),dispose:()=>{v._OrtReleaseTensor(W$)}},"gpu-buffer"])}else{let LS=Nn$1(ky),nS=new LS(MS);new Uint8Array(nS.buffer,nS.byteOffset,nS.byteLength).set(v.HEAPU8.subarray($y,$y+nS.byteLength)),K$.push([ky,BS,nS,"cpu"])}}finally{v.stackRestore(U$),ky==="string"&&$y&&v._free($y),G$||v._OrtReleaseTensor(W$)}}return C&&!E&&(v._OrtClearBoundOutputs(C.handle),hr.set(s,[$,y,x,C,E,!1])),K$}finally{v.stackRestore(ge),se.forEach(_y=>v._OrtReleaseTensor(_y)),de.forEach(_y=>v._OrtReleaseTensor(_y)),he.forEach(_y=>v._free(_y)),Y!==0&&v._OrtReleaseRunOptions(Y),re.forEach(_y=>v._free(_y))}},Bd$1=s=>{let l=Fe$2(),c=hr.get(s);if(!c)throw new Error("invalid session id");let d=c[0],f=l._OrtEndProfiling(d);f===0&&We$1("Can't get an profile file name."),l._OrtFree(f)},Dd$1=s=>{let l=[];for(let c of s){let d=c[2];!Array.isArray(d)&&"buffer"in d&&l.push(d.buffer)}return l}}),Ud$1=Er$1((s,l)=>{l.exports='/*!\n * ONNX Runtime Web v1.18.0\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var ao=Object.defineProperty;var nl=Object.getOwnPropertyDescriptor;var ol=Object.getOwnPropertyNames;var il=Object.prototype.hasOwnProperty;var Y=(e,t)=>()=>(e&&(t=e(e=0)),t);var Wr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),gn=(e,t)=>{for(var r in t)ao(e,r,{get:t[r],enumerable:!0})},al=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ol(t))!il.call(e,i)&&i!==r&&ao(e,i,{get:()=>t[i],enumerable:!(o=nl(t,i))||o.enumerable});return e};var wr=e=>al(ao({},"__esModule",{value:!0}),e);var so={};gn(so,{createReadStream:()=>Ai,readFile:()=>sl,readFileSync:()=>ul});var sl,ul,Ai,uo=Y(()=>{sl=void 0,ul=void 0,Ai=void 0});var lo={};gn(lo,{join:()=>dl});var dl,co=Y(()=>{dl=void 0});var Ei=Wr((Ti,po)=>{"use strict";var Ii=(()=>{var e=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(e||=__filename),function(t={}){var r=t,o,i,u=new Promise((s,m)=>{o=s,i=m});r.mountExternalData=(s,m)=>{(r.eb||(r.eb=new Map)).set(s,m)},r.unmountExternalData=()=>{delete r.eb};let a=()=>{let s=(g,$,T)=>(...B)=>{let H=dt,q=$?.();B=g(...B);let te=$?.();return q!==te&&(g=te,T(q),$=T=null),dt!=H?tn():B},m=g=>async(...$)=>{try{if(r.cb)throw Error("Session already started");let T=r.cb={xb:$[0],errors:[]},B=await g(...$);if(r.cb!==T)throw Error("Session mismatch");r.kb?.flush();let H=T.errors;if(0<H.length){let q=await Promise.all(H);if(q=q.filter(te=>te),0<q.length)throw Error(q.join(`\n`))}return B}finally{r.cb=null}};r._OrtCreateSession=s(r._OrtCreateSession,()=>r._OrtCreateSession,g=>r._OrtCreateSession=g),r._OrtRun=m(s(r._OrtRun,()=>r._OrtRun,g=>r._OrtRun=g)),r._OrtRunWithBinding=m(s(r._OrtRunWithBinding,()=>r._OrtRunWithBinding,g=>r._OrtRunWithBinding=g)),r._OrtBindInput=s(r._OrtBindInput,()=>r._OrtBindInput,g=>r._OrtBindInput=g),a=void 0};r.jsepInit=(s,m)=>{if(a?.(),s==="webgpu"){[r.kb,r.pb,r.tb,r.lb,r.sb,r.Ra,r.ub,r.wb,r.qb,r.rb,r.vb]=m;let g=r.kb;r.jsepRegisterBuffer=($,T,B,H)=>g.registerBuffer($,T,B,H),r.jsepGetBuffer=$=>g.getBuffer($),r.jsepCreateDownloader=($,T,B)=>g.createDownloader($,T,B),r.jsepOnReleaseSession=$=>{g.onReleaseSession($)},r.jsepOnRunStart=$=>g.onRunStart($)}};var c=Object.assign({},r),p="./this.program",h=(s,m)=>{throw m},d=typeof window=="object",y=typeof importScripts=="function",w=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_="",v,S,A;if(w){var I=(uo(),wr(so)),x=(co(),wr(lo));_=y?x.dirname(_)+"/":__dirname+"/",v=(s,m)=>(s=Ke(s)?new URL(s):x.normalize(s),I.readFileSync(s,m?void 0:"utf8")),A=s=>(s=v(s,!0),s.buffer||(s=new Uint8Array(s)),s),S=(s,m,g,$=!0)=>{s=Ke(s)?new URL(s):x.normalize(s),I.readFile(s,$?void 0:"utf8",(T,B)=>{T?g(T):m($?B.buffer:B)})},!r.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),h=(s,m)=>{throw process.exitCode=s,m}}else(d||y)&&(y?_=self.location.href:typeof document<"u"&&document.currentScript&&(_=document.currentScript.src),e&&(_=e),_.startsWith("blob:")?_="":_=_.substr(0,_.replace(/[?#].*/,"").lastIndexOf("/")+1),v=s=>{var m=new XMLHttpRequest;return m.open("GET",s,!1),m.send(null),m.responseText},y&&(A=s=>{var m=new XMLHttpRequest;return m.open("GET",s,!1),m.responseType="arraybuffer",m.send(null),new Uint8Array(m.response)}),S=(s,m,g)=>{var $=new XMLHttpRequest;$.open("GET",s,!0),$.responseType="arraybuffer",$.onload=()=>{$.status==200||$.status==0&&$.response?m($.response):g()},$.onerror=g,$.send(null)});var E=console.log.bind(console),P=console.error.bind(console);Object.assign(r,c),c=null;var O,R=!1,L,N,K,Q,he,W,se,Ce,We,ee,ae;function Ae(){var s=O.buffer;r.HEAP8=N=new Int8Array(s),r.HEAP16=Q=new Int16Array(s),r.HEAPU8=K=new Uint8Array(s),r.HEAPU16=he=new Uint16Array(s),r.HEAP32=W=new Int32Array(s),r.HEAPU32=se=new Uint32Array(s),r.HEAPF32=Ce=new Float32Array(s),r.HEAPF64=ae=new Float64Array(s),r.HEAP64=We=new BigInt64Array(s),r.HEAPU64=ee=new BigUint64Array(s)}var me=[],ie=[],ue=[],le=0,qe=null,G=null;function ne(s){throw s="Aborted("+s+")",P(s),R=!0,L=1,s=new WebAssembly.RuntimeError(s+". Build with -sASSERTIONS for more info."),i(s),s}var xe=s=>s.startsWith("data:application/octet-stream;base64,"),Ke=s=>s.startsWith("file://"),Be;if(Be="ort-wasm-simd.wasm",!xe(Be)){var Ge=Be;Be=r.locateFile?r.locateFile(Ge,_):_+Ge}function Ut(s){if(A)return A(s);throw"both async and sync fetching of the wasm failed"}function Ne(s){if(d||y){if(typeof fetch=="function"&&!Ke(s))return fetch(s,{credentials:"same-origin"}).then(m=>{if(!m.ok)throw`failed to load wasm binary file at \'${s}\'`;return m.arrayBuffer()}).catch(()=>Ut(s));if(S)return new Promise((m,g)=>{S(s,$=>m(new Uint8Array($)),g)})}return Promise.resolve().then(()=>Ut(s))}function Ye(s,m,g){return Ne(s).then($=>WebAssembly.instantiate($,m)).then(g,$=>{P(`failed to asynchronously prepare wasm: ${$}`),ne($)})}function mt(s,m){var g=Be;return typeof WebAssembly.instantiateStreaming!="function"||xe(g)||Ke(g)||w||typeof fetch!="function"?Ye(g,s,m):fetch(g,{credentials:"same-origin"}).then($=>WebAssembly.instantiateStreaming($,s).then(m,function(T){return P(`wasm streaming compile failed: ${T}`),P("falling back to ArrayBuffer instantiation"),Ye(g,s,m)}))}var Rt={824920:(s,m,g,$)=>{if(typeof r>"u"||!r.eb)return 1;if(s=je(s>>>0),s.startsWith("./")&&(s=s.substring(2)),s=r.eb.get(s),!s)return 2;if(m>>>=0,g>>>=0,m+g>s.byteLength)return 3;try{return K.set(s.subarray(m,m+g),$>>>0>>>0),0}catch{return 4}},825421:()=>{r.qb()},825452:()=>{r.rb()},825481:()=>{r.vb()},825506:s=>r.pb(s),825539:s=>r.tb(s),825571:(s,m,g)=>{r.lb(s,m,g,!0)},825610:(s,m,g)=>{r.lb(s,m,g)},825643:s=>{r.Ra("Abs",s,void 0)},825694:s=>{r.Ra("Neg",s,void 0)},825745:s=>{r.Ra("Floor",s,void 0)},825798:s=>{r.Ra("Ceil",s,void 0)},825850:s=>{r.Ra("Reciprocal",s,void 0)},825908:s=>{r.Ra("Sqrt",s,void 0)},825960:s=>{r.Ra("Exp",s,void 0)},826011:s=>{r.Ra("Erf",s,void 0)},826062:s=>{r.Ra("Sigmoid",s,void 0)},826117:(s,m,g)=>{r.Ra("HardSigmoid",s,{alpha:m,beta:g})},826196:s=>{r.Ra("Log",s,void 0)},826247:s=>{r.Ra("Sin",s,void 0)},826298:s=>{r.Ra("Cos",s,void 0)},826349:s=>{r.Ra("Tan",s,void 0)},826400:s=>{r.Ra("Asin",s,void 0)},826452:s=>{r.Ra("Acos",s,void 0)},826504:s=>{r.Ra("Atan",s,void 0)},826556:s=>{r.Ra("Sinh",s,void 0)},826608:s=>{r.Ra("Cosh",s,void 0)},826660:s=>{r.Ra("Asinh",s,void 0)},826713:s=>{r.Ra("Acosh",s,void 0)},826766:s=>{r.Ra("Atanh",s,void 0)},826819:s=>{r.Ra("Tanh",s,void 0)},826871:s=>{r.Ra("Not",s,void 0)},826922:(s,m,g)=>{r.Ra("Clip",s,{min:m,max:g})},826991:s=>{r.Ra("Clip",s,void 0)},827043:(s,m)=>{r.Ra("Elu",s,{alpha:m})},827101:s=>{r.Ra("Relu",s,void 0)},827153:(s,m)=>{r.Ra("LeakyRelu",s,{alpha:m})},827217:(s,m)=>{r.Ra("ThresholdedRelu",s,{alpha:m})},827287:(s,m)=>{r.Ra("Cast",s,{to:m})},827345:s=>{r.Ra("Add",s,void 0)},827396:s=>{r.Ra("Sub",s,void 0)},827447:s=>{r.Ra("Mul",s,void 0)},827498:s=>{r.Ra("Div",s,void 0)},827549:s=>{r.Ra("Pow",s,void 0)},827600:s=>{r.Ra("Equal",s,void 0)},827653:s=>{r.Ra("Greater",s,void 0)},827708:s=>{r.Ra("GreaterOrEqual",s,void 0)},827770:s=>{r.Ra("Less",s,void 0)},827822:s=>{r.Ra("LessOrEqual",s,void 0)},827881:(s,m,g,$,T)=>{r.Ra("ReduceMean",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828040:(s,m,g,$,T)=>{r.Ra("ReduceMax",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828198:(s,m,g,$,T)=>{r.Ra("ReduceMin",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828356:(s,m,g,$,T)=>{r.Ra("ReduceProd",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828515:(s,m,g,$,T)=>{r.Ra("ReduceSum",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828673:(s,m,g,$,T)=>{r.Ra("ReduceL1",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828830:(s,m,g,$,T)=>{r.Ra("ReduceL2",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},828987:(s,m,g,$,T)=>{r.Ra("ReduceLogSum",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829148:(s,m,g,$,T)=>{r.Ra("ReduceSumSquare",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829312:(s,m,g,$,T)=>{r.Ra("ReduceLogSumExp",s,{keepDims:!!m,noopWithEmptyAxes:!!g,axes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},829476:s=>{r.Ra("Where",s,void 0)},829529:(s,m,g)=>{r.Ra("Transpose",s,{perm:m?Array.from(W.subarray(m>>>0,g>>>0)):[]})},829637:(s,m,g,$)=>{r.Ra("DepthToSpace",s,{blocksize:m,mode:je(g),format:$?"NHWC":"NCHW"})},829770:(s,m,g,$)=>{r.Ra("DepthToSpace",s,{blocksize:m,mode:je(g),format:$?"NHWC":"NCHW"})},829903:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be)=>{r.Ra("ConvTranspose",s,{format:te?"NHWC":"NCHW",autoPad:m,dilations:[g],group:$,kernelShape:[T],pads:[B,H],strides:[q],wIsConst:()=>!!N[X>>>0],outputPadding:de?Array.from(W.subarray(de>>>0,Ee>>>0)):[],outputShape:Oe?Array.from(W.subarray(Oe>>>0,D>>>0)):[],activation:je(be)})},830304:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D)=>{r.Ra("ConvTranspose",s,{format:q?"NHWC":"NCHW",autoPad:m,dilations:Array.from(W.subarray(g>>>0,(g>>>0)+2>>>0)),group:$,kernelShape:Array.from(W.subarray(T>>>0,(T>>>0)+2>>>0)),pads:Array.from(W.subarray(B>>>0,(B>>>0)+4>>>0)),strides:Array.from(W.subarray(H>>>0,(H>>>0)+2>>>0)),wIsConst:()=>!!N[te>>>0],outputPadding:X?Array.from(W.subarray(X>>>0,de>>>0)):[],outputShape:Ee?Array.from(W.subarray(Ee>>>0,Oe>>>0)):[],activation:je(D)})},830869:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be)=>{r.Ra("ConvTranspose",s,{format:te?"NHWC":"NCHW",autoPad:m,dilations:[g],group:$,kernelShape:[T],pads:[B,H],strides:[q],wIsConst:()=>!!N[X>>>0],outputPadding:de?Array.from(W.subarray(de>>>0,Ee>>>0)):[],outputShape:Oe?Array.from(W.subarray(Oe>>>0,D>>>0)):[],activation:je(be)})},831270:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D)=>{r.Ra("ConvTranspose",s,{format:q?"NHWC":"NCHW",autoPad:m,dilations:Array.from(W.subarray(g>>>0,(g>>>0)+2>>>0)),group:$,kernelShape:Array.from(W.subarray(T>>>0,(T>>>0)+2>>>0)),pads:Array.from(W.subarray(B>>>0,(B>>>0)+4>>>0)),strides:Array.from(W.subarray(H>>>0,(H>>>0)+2>>>0)),wIsConst:()=>!!N[te>>>0],outputPadding:X?Array.from(W.subarray(X>>>0,de>>>0)):[],outputShape:Ee?Array.from(W.subarray(Ee>>>0,Oe>>>0)):[],activation:je(D)})},831835:(s,m)=>{r.Ra("GlobalAveragePool",s,{format:m?"NHWC":"NCHW"})},831926:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("AveragePool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832210:(s,m)=>{r.Ra("GlobalAveragePool",s,{format:m?"NHWC":"NCHW"})},832301:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("AveragePool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832585:(s,m)=>{r.Ra("GlobalMaxPool",s,{format:m?"NHWC":"NCHW"})},832672:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("MaxPool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},832952:(s,m)=>{r.Ra("GlobalMaxPool",s,{format:m?"NHWC":"NCHW"})},833039:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("MaxPool",s,{format:Ie?"NHWC":"NCHW",auto_pad:m,ceil_mode:g,count_include_pad:$,storage_order:T,dilations:[B,H],kernel_shape:[q,te],pads:[X,de,Ee,Oe],strides:[D,be]})},833319:(s,m,g,$,T)=>{r.Ra("Gemm",s,{alpha:m,beta:g,transA:$,transB:T})},833423:s=>{r.Ra("MatMul",s,void 0)},833477:(s,m,g,$)=>{r.Ra("ArgMax",s,{keepDims:!!m,selectLastIndex:!!g,axis:$})},833585:(s,m,g,$)=>{r.Ra("ArgMin",s,{keepDims:!!m,selectLastIndex:!!g,axis:$})},833693:(s,m)=>{r.Ra("Softmax",s,{axis:m})},833756:(s,m)=>{r.Ra("Concat",s,{axis:m})},833816:(s,m,g,$,T)=>{r.Ra("Split",s,{axis:m,numOutputs:g,splitSizes:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},833956:s=>{r.Ra("Expand",s,void 0)},834010:(s,m)=>{r.Ra("Gather",s,{axis:Number(m)})},834081:(s,m)=>{r.Ra("GatherElements",s,{axis:Number(m)})},834160:(s,m,g,$,T,B,H,q,te,X,de)=>{r.Ra("Resize",s,{antialias:m,axes:g?Array.from(W.subarray(g>>>0,$>>>0)):[],coordinateTransformMode:je(T),cubicCoeffA:B,excludeOutside:H,extrapolationValue:q,keepAspectRatioPolicy:je(te),mode:je(X),nearestMode:je(de)})},834506:(s,m,g,$,T,B,H)=>{r.Ra("Slice",s,{starts:m?Array.from(W.subarray(m>>>0,g>>>0)):[],ends:$?Array.from(W.subarray($>>>0,T>>>0)):[],axes:B?Array.from(W.subarray(B>>>0,H>>>0)):[]})},834722:s=>{r.Ra("Tile",s,void 0)},834774:(s,m,g,$)=>{r.Ra("LayerNormalization",s,{axis:m,epsilon:g,simplified:!!$})},834885:(s,m,g)=>{r.Ra("InstanceNormalization",s,{epsilon:m,format:g?"NHWC":"NCHW"})},834999:(s,m,g)=>{r.Ra("InstanceNormalization",s,{epsilon:m,format:g?"NHWC":"NCHW"})},835113:s=>{r.Ra("Range",s,void 0)},835166:(s,m)=>{r.Ra("Einsum",s,{equation:je(m)})},835247:(s,m,g,$,T)=>{r.Ra("Pad",s,{mode:m,value:g,pads:$?Array.from(W.subarray($>>>0,T>>>0)):[]})},835374:(s,m,g,$,T,B)=>{r.Ra("BatchNormalization",s,{epsilon:m,momentum:g,spatial:!!T,trainingMode:!!$,format:B?"NHWC":"NCHW"})},835543:(s,m,g,$,T,B)=>{r.Ra("BatchNormalization",s,{epsilon:m,momentum:g,spatial:!!T,trainingMode:!!$,format:B?"NHWC":"NCHW"})},835712:(s,m,g)=>{r.Ra("CumSum",s,{exclusive:Number(m),reverse:Number(g)})},835809:(s,m,g,$,T,B,H,q,te)=>{r.Ra("Attention",s,{numHeads:m,isUnidirectional:g,maskFilterValue:$,scale:T,doRotary:B,qkvHiddenSizes:H?Array.from(W.subarray(Number(q)>>>0,Number(q)+H>>>0)):[],pastPresentShareBuffer:!!te})},836081:s=>{r.Ra("BiasAdd",s,void 0)},836136:s=>{r.Ra("BiasSplitGelu",s,void 0)},836197:s=>{r.Ra("FastGelu",s,void 0)},836253:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe)=>{r.Ra("Conv",s,{format:te?"NHWC":"NCHW",auto_pad:m,dilations:[g],group:$,kernel_shape:[T],pads:B?Array.from(W.subarray(B>>>0,H>>>0)):[],strides:[q],w_is_const:()=>!!N[X>>>0],activation:je(de),activation_params:Ee?Array.from(Ce.subarray(Ee>>>0,Oe>>>0)):[]})},836623:(s,m,g,$,T,B,H,q,te,X,de,Ee,Oe,D,be,Ie)=>{r.Ra("Conv",s,{format:Ee?"NHWC":"NCHW",auto_pad:m,dilations:[g,$],group:T,kernel_shape:[B,H],pads:q?Array.from(W.subarray(q>>>0,te>>>0)):[],strides:[X,de],w_is_const:()=>!!N[Oe>>>0],activation:je(D),activation_params:be?Array.from(Ce.subarray(be>>>0,Ie>>>0)):[]})},837014:s=>{r.Ra("Gelu",s,void 0)},837066:(s,m,g,$,T,B)=>{r.Ra("MatMulNBits",s,{k:m,n:g,accuracyLevel:$,bits:T,blockSize:B})},837193:(s,m,g,$,T,B)=>{r.Ra("MultiHeadAttention",s,{numHeads:m,isUnidirectional:g,maskFilterValue:$,scale:T,doRotary:B})},837352:(s,m,g,$,T)=>{r.Ra("RotaryEmbedding",s,{interleaved:!!m,numHeads:g,rotaryEmbeddingDim:$,scale:T})},837491:(s,m,g)=>{r.Ra("SkipLayerNormalization",s,{epsilon:m,simplified:!!g})},837593:(s,m,g)=>{r.Ra("SkipLayerNormalization",s,{epsilon:m,simplified:!!g})},837695:(s,m,g,$)=>{r.Ra("LayerNormalization",s,{axis:m,epsilon:g,simplified:!!$})},837806:s=>{r.ub(s)},837840:(s,m)=>r.wb(s,m,r.cb.xb,r.cb.errors)};function qt(s){this.name="ExitStatus",this.message=`Program terminated with exit(${s})`,this.status=s}class Vt{constructor(m){this.hb=m-24}}var sr=0,jt=0,xr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Kt=(s,m,g)=>{m>>>=0;var $=m+g;for(g=m;s[g]&&!(g>=$);)++g;if(16<g-m&&s.buffer&&xr)return xr.decode(s.subarray(m,g));for($="";m<g;){var T=s[m++];if(T&128){var B=s[m++]&63;if((T&224)==192)$+=String.fromCharCode((T&31)<<6|B);else{var H=s[m++]&63;T=(T&240)==224?(T&15)<<12|B<<6|H:(T&7)<<18|B<<12|H<<6|s[m++]&63,65536>T?$+=String.fromCharCode(T):(T-=65536,$+=String.fromCharCode(55296|T>>10,56320|T&1023))}}else $+=String.fromCharCode(T)}return $},je=(s,m)=>(s>>>=0)?Kt(K,s,m):"",Wt=s=>{for(var m=0,g=0;g<s.length;++g){var $=s.charCodeAt(g);127>=$?m++:2047>=$?m+=2:55296<=$&&57343>=$?(m+=4,++g):m+=3}return m},at=(s,m,g,$)=>{if(g>>>=0,!(0<$))return 0;var T=g;$=g+$-1;for(var B=0;B<s.length;++B){var H=s.charCodeAt(B);if(55296<=H&&57343>=H){var q=s.charCodeAt(++B);H=65536+((H&1023)<<10)|q&1023}if(127>=H){if(g>=$)break;m[g++>>>0]=H}else{if(2047>=H){if(g+1>=$)break;m[g++>>>0]=192|H>>6}else{if(65535>=H){if(g+2>=$)break;m[g++>>>0]=224|H>>12}else{if(g+3>=$)break;m[g++>>>0]=240|H>>18,m[g++>>>0]=128|H>>12&63}m[g++>>>0]=128|H>>6&63}m[g++>>>0]=128|H&63}}return m[g>>>0]=0,g-T},Cr,ft=s=>{for(var m="";K[s>>>0];)m+=Cr[K[s++>>>0]];return m},ur={},Ar={},Ir={},st;function Tr(s,m,g={}){var $=m.name;if(!s)throw new st(`type "${$}" must have a positive integer typeid pointer`);if(Ar.hasOwnProperty(s)){if(g.nb)return;throw new st(`Cannot register type \'${$}\' twice`)}Ar[s]=m,delete Ir[s],ur.hasOwnProperty(s)&&(m=ur[s],delete ur[s],m.forEach(T=>T()))}function ht(s,m,g={}){if(!("argPackAdvance"in m))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Tr(s,m,g)}var bt=(s,m,g)=>{switch(m){case 1:return g?$=>N[$>>>0]:$=>K[$>>>0];case 2:return g?$=>Q[$>>>1>>>0]:$=>he[$>>>1>>>0];case 4:return g?$=>W[$>>>2>>>0]:$=>se[$>>>2>>>0];case 8:return g?$=>We[$>>>3]:$=>ee[$>>>3];default:throw new TypeError(`invalid integer width (${m}): ${s}`)}},Er=[],Te=[];function dr(s){s>>>=0,9<s&&--Te[s+1]===0&&(Te[s]=void 0,Er.push(s))}var Xe=s=>{if(!s)throw new st("Cannot use deleted val. handle = "+s);return Te[s]},ut=s=>{switch(s){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let m=Er.pop()||Te.length;return Te[m]=s,Te[m+1]=1,m}};function lr(s){return this.fromWireType(se[s>>>2>>>0])}var Fn={name:"emscripten::val",fromWireType:s=>{var m=Xe(s);return dr(s),m},toWireType:(s,m)=>ut(m),argPackAdvance:8,readValueFromPointer:lr,bb:null},ge=(s,m)=>{switch(m){case 4:return function(g){return this.fromWireType(Ce[g>>>2>>>0])};case 8:return function(g){return this.fromWireType(ae[g>>>3>>>0])};default:throw new TypeError(`invalid float width (${m}): ${s}`)}},Yt=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,jr=(s,m)=>{for(var g=s>>1,$=g+m/2;!(g>=$)&&he[g>>>0];)++g;if(g<<=1,32<g-s&&Yt)return Yt.decode(K.subarray(s>>>0,g>>>0));for(g="",$=0;!($>=m/2);++$){var T=Q[s+2*$>>>1>>>0];if(T==0)break;g+=String.fromCharCode(T)}return g},qn=(s,m,g)=>{if(g??=2147483647,2>g)return 0;g-=2;var $=m;g=g<2*s.length?g/2:s.length;for(var T=0;T<g;++T)Q[m>>>1>>>0]=s.charCodeAt(T),m+=2;return Q[m>>>1>>>0]=0,m-$},Kr=s=>2*s.length,jn=(s,m)=>{for(var g=0,$="";!(g>=m/4);){var T=W[s+4*g>>>2>>>0];if(T==0)break;++g,65536<=T?(T-=65536,$+=String.fromCharCode(55296|T>>10,56320|T&1023)):$+=String.fromCharCode(T)}return $},Yr=(s,m,g)=>{if(m>>>=0,g??=2147483647,4>g)return 0;var $=m;g=$+g-4;for(var T=0;T<s.length;++T){var B=s.charCodeAt(T);if(55296<=B&&57343>=B){var H=s.charCodeAt(++T);B=65536+((B&1023)<<10)|H&1023}if(W[m>>>2>>>0]=B,m+=4,m+4>g)break}return W[m>>>2>>>0]=0,m-$},Zr=s=>{for(var m=0,g=0;g<s.length;++g){var $=s.charCodeAt(g);55296<=$&&57343>=$&&++g,m+=4}return m},cr=(s,m)=>{var g=Ar[s];if(g===void 0)throw s=Mr(s),g=ft(s),rt(s),new st(`${m} has unknown type ${g}`);return g},Pr=(s,m,g)=>{var $=[];return s=s.toWireType($,g),$.length&&(se[m>>>2>>>0]=ut($)),s},He=s=>{try{s()}catch(m){ne(m)}},Xr=s=>{if(!R)try{s();try{L=L=s=L,r.onExit?.(s),R=!0,h(s,new qt(s))}catch(m){m instanceof qt||m=="unwind"||h(1,m)}}catch(m){m instanceof qt||m=="unwind"||h(1,m)}};function Qr(){var s=pe,m={};for(let[g,$]of Object.entries(s))m[g]=typeof $=="function"?(...T)=>{Zt.push(g);try{return $(...T)}finally{R||(Zt.pop(),dt&&gt===1&&Zt.length===0&&(gt=0,He(dn),typeof Fibers<"u"&&Fibers.Db()))}}:$;return m}var gt=0,dt=null,Bt=0,Zt=[],kr={},Or={},Jr=0,pr=null,en=[];function tn(){return new Promise((s,m)=>{pr={resolve:s,reject:m}})}function rn(){var s=Nt(65548),m=s+12;se[s>>>2>>>0]=m,se[s+4>>>2>>>0]=m+65536,m=Zt[0];var g=kr[m];return g===void 0&&(g=Jr++,kr[m]=g,Or[g]=m),W[s+8>>>2>>>0]=g,s}function nn(s){if(!R){if(gt===0){var m=!1,g=!1;s(($=0)=>{if(!R&&(Bt=$,m=!0,g)){gt=2,He(()=>vt(dt)),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.resume(),$=!1;try{var T=(0,pe[Or[W[dt+8>>>2>>>0]]])()}catch(q){T=q,$=!0}var B=!1;if(!dt){var H=pr;H&&(pr=null,($?H.reject:H.resolve)(T),B=!0)}if($&&!B)throw T}}),g=!0,m||(gt=1,dt=rn(),typeof Browser<"u"&&Browser.ib.mb&&Browser.ib.pause(),He(()=>Jt(dt)))}else gt===2?(gt=0,He(ct),rt(dt),dt=null,en.forEach(Xr)):ne(`invalid state: ${gt}`);return Bt}}function Rr(s){return nn(m=>{s().then(m)})}var Xt=[],on={},nt=s=>{var m=on[s];return m===void 0?ft(s):m},mr=()=>typeof globalThis=="object"?globalThis:Function("return this")(),Br=s=>{var m=Xt.length;return Xt.push(s),m},Kn=(s,m)=>{for(var g=Array(s),$=0;$<s;++$)g[$]=cr(se[m+4*$>>>2>>>0],"parameter "+$);return g},wt=(s,m)=>Object.defineProperty(m,"name",{value:s});function Yn(s){var m=Function;if(!(m instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof m} which is not a function`);var g=wt(m.name||"unknownFunctionName",function(){});return g.prototype=m.prototype,g=new g,s=m.apply(g,s),s instanceof Object?s:g}var Je=s=>s%4===0&&(s%100!==0||s%400===0),Dr=[0,31,60,91,121,152,182,213,244,274,305,335],fr=[0,31,59,90,120,151,181,212,243,273,304,334],lt=[],hr=(s,m)=>{lt.length=0;for(var g;g=K[s++>>>0];){var $=g!=105;$&=g!=112,m+=$&&m%8?4:0,lt.push(g==112?se[m>>>2>>>0]:g==106?We[m>>>3]:g==105?W[m>>>2>>>0]:ae[m>>>3>>>0]),m+=$?8:4}return lt},Qe={},ot=()=>{if(!Qt){var s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},m;for(m in Qe)Qe[m]===void 0?delete s[m]:s[m]=Qe[m];var g=[];for(m in s)g.push(`${m}=${s[m]}`);Qt=g}return Qt},Qt,Zn=[null,[],[]],an=[31,29,31,30,31,30,31,31,30,31,30,31],zr=[31,28,31,30,31,30,31,31,30,31,30,31];function Xn(s){var m=Array(Wt(s)+1);return at(s,m,0,m.length),m}function sn(s,m,g,$){function T(D,be,Ie){for(D=typeof D=="number"?D.toString():D||"";D.length<be;)D=Ie[0]+D;return D}function B(D,be){return T(D,be,"0")}function H(D,be){function Ie(Mt){return 0>Mt?-1:0<Mt?1:0}var zt;return(zt=Ie(D.getFullYear()-be.getFullYear()))===0&&(zt=Ie(D.getMonth()-be.getMonth()))===0&&(zt=Ie(D.getDate()-be.getDate())),zt}function q(D){switch(D.getDay()){case 0:return new Date(D.getFullYear()-1,11,29);case 1:return D;case 2:return new Date(D.getFullYear(),0,3);case 3:return new Date(D.getFullYear(),0,2);case 4:return new Date(D.getFullYear(),0,1);case 5:return new Date(D.getFullYear()-1,11,31);case 6:return new Date(D.getFullYear()-1,11,30)}}function te(D){var be=D.$a;for(D=new Date(new Date(D.ab+1900,0,1).getTime());0<be;){var Ie=D.getMonth(),zt=(Je(D.getFullYear())?an:zr)[Ie];if(be>zt-D.getDate())be-=zt-D.getDate()+1,D.setDate(1),11>Ie?D.setMonth(Ie+1):(D.setMonth(0),D.setFullYear(D.getFullYear()+1));else{D.setDate(D.getDate()+be);break}}return Ie=new Date(D.getFullYear()+1,0,4),be=q(new Date(D.getFullYear(),0,4)),Ie=q(Ie),0>=H(be,D)?0>=H(Ie,D)?D.getFullYear()+1:D.getFullYear():D.getFullYear()-1}s>>>=0,m>>>=0,g>>>=0,$>>>=0;var X=se[$+40>>>2>>>0];$={Ab:W[$>>>2>>>0],zb:W[$+4>>>2>>>0],fb:W[$+8>>>2>>>0],jb:W[$+12>>>2>>>0],gb:W[$+16>>>2>>>0],ab:W[$+20>>>2>>>0],Va:W[$+24>>>2>>>0],$a:W[$+28>>>2>>>0],Cb:W[$+32>>>2>>>0],yb:W[$+36>>>2>>>0],Bb:X?je(X):""},g=je(g),X={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var de in X)g=g.replace(new RegExp(de,"g"),X[de]);var Ee="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Oe="January February March April May June July August September October November December".split(" ");X={"%a":D=>Ee[D.Va].substring(0,3),"%A":D=>Ee[D.Va],"%b":D=>Oe[D.gb].substring(0,3),"%B":D=>Oe[D.gb],"%C":D=>B((D.ab+1900)/100|0,2),"%d":D=>B(D.jb,2),"%e":D=>T(D.jb,2," "),"%g":D=>te(D).toString().substring(2),"%G":te,"%H":D=>B(D.fb,2),"%I":D=>(D=D.fb,D==0?D=12:12<D&&(D-=12),B(D,2)),"%j":D=>{for(var be=0,Ie=0;Ie<=D.gb-1;be+=(Je(D.ab+1900)?an:zr)[Ie++]);return B(D.jb+be,3)},"%m":D=>B(D.gb+1,2),"%M":D=>B(D.zb,2),"%n":()=>`\n`,"%p":D=>0<=D.fb&&12>D.fb?"AM":"PM","%S":D=>B(D.Ab,2),"%t":()=>"	","%u":D=>D.Va||7,"%U":D=>B(Math.floor((D.$a+7-D.Va)/7),2),"%V":D=>{var be=Math.floor((D.$a+7-(D.Va+6)%7)/7);if(2>=(D.Va+371-D.$a-2)%7&&be++,be)be==53&&(Ie=(D.Va+371-D.$a)%7,Ie==4||Ie==3&&Je(D.ab)||(be=1));else{be=52;var Ie=(D.Va+7-D.$a-1)%7;(Ie==4||Ie==5&&Je(D.ab%400-1))&&be++}return B(be,2)},"%w":D=>D.Va,"%W":D=>B(Math.floor((D.$a+7-(D.Va+6)%7)/7),2),"%y":D=>(D.ab+1900).toString().substring(2),"%Y":D=>D.ab+1900,"%z":D=>{D=D.yb;var be=0<=D;return D=Math.abs(D)/60,(be?"+":"-")+("0000"+(D/60*100+D%60)).slice(-4)},"%Z":D=>D.Bb,"%%":()=>"%"},g=g.replace(/%%/g,"\\0\\0");for(de in X)g.includes(de)&&(g=g.replace(new RegExp(de,"g"),X[de]($)));return g=g.replace(/\\0\\0/g,"%"),de=Xn(g),de.length>m?0:(N.set(de,s>>>0),de.length-1)}for(var un=Array(256),gr=0;256>gr;++gr)un[gr]=String.fromCharCode(gr);Cr=un,st=r.BindingError=class extends Error{constructor(s){super(s),this.name="BindingError"}},r.InternalError=class extends Error{constructor(s){super(s),this.name="InternalError"}},Te.push(0,1,void 0,1,null,1,!0,1,!1,1),r.count_emval_handles=()=>Te.length/2-5-Er.length;var Qn={ia:function(s,m,g){return Rr(async()=>{await r.sb(s,m,g)})},a:function(s,m,g){s>>>=0;var $=new Vt(s);throw se[$.hb+16>>>2>>>0]=0,se[$.hb+4>>>2>>>0]=m>>>0,se[$.hb+8>>>2>>>0]=g>>>0,sr=s,jt++,sr},y:function(){return 0},ea:function(){},R:function(){},T:function(){},ga:function(){return 0},ca:function(){},Z:function(){},ba:function(){},G:function(){},S:function(){},P:function(){},da:function(){},Q:function(){},C:function(s,m,g){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:$=>$,toWireType:function($,T){if(typeof T!="bigint"&&typeof T!="number")throw T===null?T="null":($=typeof T,T=$==="object"||$==="array"||$==="function"?T.toString():""+T),new TypeError(`Cannot convert "${T}" to ${this.name}`);return typeof T=="number"&&(T=BigInt(T)),T},argPackAdvance:8,readValueFromPointer:bt(m,g>>>0,m.indexOf("u")==-1),bb:null})},K:function(s,m,g,$){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:function(T){return!!T},toWireType:function(T,B){return B?g:$},argPackAdvance:8,readValueFromPointer:function(T){return this.fromWireType(K[T>>>0])},bb:null})},J:function(s){return ht(s>>>0,Fn)},B:function(s,m,g){m=ft(m>>>0),ht(s>>>0,{name:m,fromWireType:$=>$,toWireType:($,T)=>T,argPackAdvance:8,readValueFromPointer:ge(m,g>>>0),bb:null})},s:function(s,m,g,$,T){if(s>>>=0,g>>>=0,m=ft(m>>>0),T===-1&&(T=4294967295),T=q=>q,$===0){var B=32-8*g;T=q=>q<<B>>>B}var H=m.includes("unsigned")?function(q,te){return te>>>0}:function(q,te){return te};ht(s,{name:m,fromWireType:T,toWireType:H,argPackAdvance:8,readValueFromPointer:bt(m,g,$!==0),bb:null})},o:function(s,m,g){function $(B){return new T(N.buffer,se[B+4>>>2>>>0],se[B>>>2>>>0])}var T=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][m];g=ft(g>>>0),ht(s>>>0,{name:g,fromWireType:$,argPackAdvance:8,readValueFromPointer:$},{nb:!0})},D:function(s,m){m=ft(m>>>0);var g=m==="std::string";ht(s>>>0,{name:m,fromWireType:function($){var T=se[$>>>2>>>0],B=$+4;if(g)for(var H=B,q=0;q<=T;++q){var te=B+q;if(q==T||K[te>>>0]==0){if(H=je(H,te-H),X===void 0)var X=H;else X+=String.fromCharCode(0),X+=H;H=te+1}}else{for(X=Array(T),q=0;q<T;++q)X[q]=String.fromCharCode(K[B+q>>>0]);X=X.join("")}return rt($),X},toWireType:function($,T){T instanceof ArrayBuffer&&(T=new Uint8Array(T));var B=typeof T=="string";if(!(B||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int8Array))throw new st("Cannot pass non-string to std::string");var H=g&&B?Wt(T):T.length,q=Nt(4+H+1),te=q+4;if(se[q>>>2>>>0]=H,g&&B)at(T,K,te,H+1);else if(B)for(B=0;B<H;++B){var X=T.charCodeAt(B);if(255<X)throw rt(te),new st("String has UTF-16 code units that do not fit in 8 bits");K[te+B>>>0]=X}else for(B=0;B<H;++B)K[te+B>>>0]=T[B];return $!==null&&$.push(rt,q),q},argPackAdvance:8,readValueFromPointer:lr,bb($){rt($)}})},x:function(s,m,g){if(m>>>=0,g>>>=0,g=ft(g),m===2)var $=jr,T=qn,B=Kr,H=q=>he[q>>>1>>>0];else m===4&&($=jn,T=Yr,B=Zr,H=q=>se[q>>>2>>>0]);ht(s>>>0,{name:g,fromWireType:q=>{for(var te=se[q>>>2>>>0],X,de=q+4,Ee=0;Ee<=te;++Ee){var Oe=q+4+Ee*m;(Ee==te||H(Oe)==0)&&(de=$(de,Oe-de),X===void 0?X=de:(X+=String.fromCharCode(0),X+=de),de=Oe+m)}return rt(q),X},toWireType:(q,te)=>{if(typeof te!="string")throw new st(`Cannot pass non-string to C++ string type ${g}`);var X=B(te),de=Nt(4+X+m);return se[de>>>2>>>0]=X/m,T(te,de+4,X+m),q!==null&&q.push(rt,de),de},argPackAdvance:8,readValueFromPointer:lr,bb(q){rt(q)}})},L:function(s,m){m=ft(m>>>0),ht(s>>>0,{ob:!0,name:m,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ha:()=>1,u:function(s,m,g){return m>>>=0,g>>>=0,s=Xe(s>>>0),m=cr(m,"emval::as"),Pr(m,g,s)},w:function(s){return s>>>=0,Rr(()=>(s=Xe(s),s.then(ut)))},n:function(s,m,g,$){return g>>>=0,$>>>=0,s=Xt[s>>>0],m=Xe(m>>>0),s(null,m,g,$)},j:function(s,m,g,$,T){return g>>>=0,$>>>=0,T>>>=0,s=Xt[s>>>0],m=Xe(m>>>0),g=nt(g),s(m,m[g],$,T)},b:dr,A:function(s,m){return m>>>=0,s=Xe(s>>>0),m=Xe(m),s==m},m:function(s){return s>>>=0,s===0?ut(mr()):(s=nt(s),ut(mr()[s]))},i:function(s,m,g){m=Kn(s,m>>>0);var $=m.shift();s--;var T=`return function (obj, func, destructorsRef, args) {\n`,B=0,H=[];g===0&&H.push("obj");for(var q=["retType"],te=[$],X=0;X<s;++X)H.push("arg"+X),q.push("argType"+X),te.push(m[X]),T+=`  var arg${X} = argType${X}.readValueFromPointer(args${B?"+"+B:""});\n`,B+=m[X].argPackAdvance;return T+=`  var rv = ${g===1?"new func":"func.call"}(${H.join(", ")});\n`,$.ob||(q.push("emval_returnValue"),te.push(Pr),T+=`  return emval_returnValue(retType, destructorsRef, rv);\n`),q.push(T+`};\n`),s=Yn(q)(...te),g=`methodCaller<(${m.map(de=>de.name).join(", ")}) => ${$.name}>`,Br(wt(g,s))},r:function(s,m){return m>>>=0,s=Xe(s>>>0),m=Xe(m),ut(s[m])},e:function(s){s>>>=0,9<s&&(Te[s+1]+=1)},t:function(){return ut([])},l:function(s){s=Xe(s>>>0);for(var m=Array(s.length),g=0;g<s.length;g++)m[g]=s[g];return ut(m)},f:function(s){return ut(nt(s>>>0))},k:function(){return ut({})},h:function(s){s>>>=0;for(var m=Xe(s);m.length;){var g=m.pop();m.pop()(g)}dr(s)},g:function(s,m,g){m>>>=0,g>>>=0,s=Xe(s>>>0),m=Xe(m),g=Xe(g),s[m]=g},c:function(s,m){return m>>>=0,s=cr(s>>>0,"_emval_take_value"),s=s.readValueFromPointer(m),ut(s)},W:function(s,m){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s),m>>>=0,s=new Date(1e3*s),W[m>>>2>>>0]=s.getUTCSeconds(),W[m+4>>>2>>>0]=s.getUTCMinutes(),W[m+8>>>2>>>0]=s.getUTCHours(),W[m+12>>>2>>>0]=s.getUTCDate(),W[m+16>>>2>>>0]=s.getUTCMonth(),W[m+20>>>2>>>0]=s.getUTCFullYear()-1900,W[m+24>>>2>>>0]=s.getUTCDay(),W[m+28>>>2>>>0]=(s.getTime()-Date.UTC(s.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},X:function(s,m){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s),m>>>=0,s=new Date(1e3*s),W[m>>>2>>>0]=s.getSeconds(),W[m+4>>>2>>>0]=s.getMinutes(),W[m+8>>>2>>>0]=s.getHours(),W[m+12>>>2>>>0]=s.getDate(),W[m+16>>>2>>>0]=s.getMonth(),W[m+20>>>2>>>0]=s.getFullYear()-1900,W[m+24>>>2>>>0]=s.getDay(),W[m+28>>>2>>>0]=(Je(s.getFullYear())?Dr:fr)[s.getMonth()]+s.getDate()-1|0,W[m+36>>>2>>>0]=-(60*s.getTimezoneOffset());var g=new Date(s.getFullYear(),6,1).getTimezoneOffset(),$=new Date(s.getFullYear(),0,1).getTimezoneOffset();W[m+32>>>2>>>0]=(g!=$&&s.getTimezoneOffset()==Math.min($,g))|0},Y:function(s){s>>>=0;var m=new Date(W[s+20>>>2>>>0]+1900,W[s+16>>>2>>>0],W[s+12>>>2>>>0],W[s+8>>>2>>>0],W[s+4>>>2>>>0],W[s>>>2>>>0],0),g=W[s+32>>>2>>>0],$=m.getTimezoneOffset(),T=new Date(m.getFullYear(),6,1).getTimezoneOffset(),B=new Date(m.getFullYear(),0,1).getTimezoneOffset(),H=Math.min(B,T);return 0>g?W[s+32>>>2>>>0]=+(T!=B&&H==$):0<g!=(H==$)&&(T=Math.max(B,T),m.setTime(m.getTime()+6e4*((0<g?H:T)-$))),W[s+24>>>2>>>0]=m.getDay(),W[s+28>>>2>>>0]=(Je(m.getFullYear())?Dr:fr)[m.getMonth()]+m.getDate()-1|0,W[s>>>2>>>0]=m.getSeconds(),W[s+4>>>2>>>0]=m.getMinutes(),W[s+8>>>2>>>0]=m.getHours(),W[s+12>>>2>>>0]=m.getDate(),W[s+16>>>2>>>0]=m.getMonth(),W[s+20>>>2>>>0]=m.getYear(),s=m.getTime(),BigInt(isNaN(s)?-1:s/1e3)},U:function(){return-52},V:function(){},N:function(s,m,g,$){g>>>=0,$>>>=0;var T=new Date().getFullYear(),B=new Date(T,0,1),H=new Date(T,6,1);T=B.getTimezoneOffset();var q=H.getTimezoneOffset();se[s>>>0>>>2>>>0]=60*Math.max(T,q),W[m>>>0>>>2>>>0]=+(T!=q),s=te=>te.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],B=s(B),H=s(H),q<T?(at(B,K,g,17),at(H,K,$,17)):(at(B,K,$,17),at(H,K,g,17))},v:()=>{ne("")},d:function(s,m,g){return s>>>=0,m=hr(m>>>0,g>>>0),Rt[s](...m)},I:function(s,m,g){return s>>>=0,m=hr(m>>>0,g>>>0),Rt[s](...m)},H:()=>Date.now(),O:function(){return 4294901760},q:()=>performance.now(),M:function(s){s>>>=0;var m=K.length;if(4294901760<s)return!1;for(var g=1;4>=g;g*=2){var $=m*(1+.2/g);$=Math.min($,s+100663296);var T=Math;$=Math.max(s,$);e:{T=(T.min.call(T,4294901760,$+(65536-$%65536)%65536)-O.buffer.byteLength+65535)/65536;try{O.grow(T),Ae();var B=1;break e}catch{}B=void 0}if(B)return!0}return!1},$:function(s,m){s>>>=0,m>>>=0;var g=0;return ot().forEach(($,T)=>{var B=m+g;for(T=se[s+4*T>>>2>>>0]=B,B=0;B<$.length;++B)N[T++>>>0]=$.charCodeAt(B);N[T>>>0]=0,g+=$.length+1}),0},aa:function(s,m){s>>>=0,m>>>=0;var g=ot();se[s>>>2>>>0]=g.length;var $=0;return g.forEach(T=>$+=T.length+1),se[m>>>2>>>0]=$,0},z:()=>52,F:function(){return 52},_:function(){return 70},E:function(s,m,g,$){m>>>=0,g>>>=0,$>>>=0;for(var T=0,B=0;B<g;B++){var H=se[m>>>2>>>0],q=se[m+4>>>2>>>0];m+=8;for(var te=0;te<q;te++){var X=K[H+te>>>0],de=Zn[s];X===0||X===10?((s===1?E:P)(Kt(de,0)),de.length=0):de.push(X)}T+=q}return se[$>>>2>>>0]=T,0},fa:sn,p:function(s,m,g,$){return sn(s>>>0,m>>>0,g>>>0,$>>>0)}},pe=function(){function s(g){return pe=g.exports,pe=Qr(),pe=ln(),O=pe.ja,Ae(),ie.unshift(pe.ka),le--,le==0&&(qe!==null&&(clearInterval(qe),qe=null),G&&(g=G,G=null,g())),pe}var m={a:Qn};if(le++,r.instantiateWasm)try{return r.instantiateWasm(m,s)}catch(g){P(`Module.instantiateWasm callback failed with error: ${g}`),i(g)}return mt(m,function(g){s(g.instance)}).catch(i),{}}(),Mr=s=>(Mr=pe.la)(s);r._OrtInit=(s,m)=>(r._OrtInit=pe.ma)(s,m),r._OrtGetLastError=(s,m)=>(r._OrtGetLastError=pe.na)(s,m),r._OrtCreateSessionOptions=(s,m,g,$,T,B,H,q,te,X)=>(r._OrtCreateSessionOptions=pe.oa)(s,m,g,$,T,B,H,q,te,X),r._OrtAppendExecutionProvider=(s,m)=>(r._OrtAppendExecutionProvider=pe.pa)(s,m),r._OrtAddFreeDimensionOverride=(s,m,g)=>(r._OrtAddFreeDimensionOverride=pe.qa)(s,m,g),r._OrtAddSessionConfigEntry=(s,m,g)=>(r._OrtAddSessionConfigEntry=pe.ra)(s,m,g),r._OrtReleaseSessionOptions=s=>(r._OrtReleaseSessionOptions=pe.sa)(s),r._OrtCreateSession=(s,m,g)=>(r._OrtCreateSession=pe.ta)(s,m,g),r._OrtReleaseSession=s=>(r._OrtReleaseSession=pe.ua)(s),r._OrtGetInputOutputCount=(s,m,g)=>(r._OrtGetInputOutputCount=pe.va)(s,m,g),r._OrtGetInputName=(s,m)=>(r._OrtGetInputName=pe.wa)(s,m),r._OrtGetOutputName=(s,m)=>(r._OrtGetOutputName=pe.xa)(s,m),r._OrtFree=s=>(r._OrtFree=pe.ya)(s),r._OrtCreateTensor=(s,m,g,$,T,B)=>(r._OrtCreateTensor=pe.za)(s,m,g,$,T,B),r._OrtGetTensorData=(s,m,g,$,T)=>(r._OrtGetTensorData=pe.Aa)(s,m,g,$,T),r._OrtReleaseTensor=s=>(r._OrtReleaseTensor=pe.Ba)(s),r._OrtCreateRunOptions=(s,m,g,$)=>(r._OrtCreateRunOptions=pe.Ca)(s,m,g,$),r._OrtAddRunConfigEntry=(s,m,g)=>(r._OrtAddRunConfigEntry=pe.Da)(s,m,g),r._OrtReleaseRunOptions=s=>(r._OrtReleaseRunOptions=pe.Ea)(s),r._OrtCreateBinding=s=>(r._OrtCreateBinding=pe.Fa)(s),r._OrtBindInput=(s,m,g)=>(r._OrtBindInput=pe.Ga)(s,m,g),r._OrtBindOutput=(s,m,g,$)=>(r._OrtBindOutput=pe.Ha)(s,m,g,$),r._OrtClearBoundOutputs=s=>(r._OrtClearBoundOutputs=pe.Ia)(s),r._OrtReleaseBinding=s=>(r._OrtReleaseBinding=pe.Ja)(s),r._OrtRunWithBinding=(s,m,g,$,T)=>(r._OrtRunWithBinding=pe.Ka)(s,m,g,$,T),r._OrtRun=(s,m,g,$,T,B,H,q)=>(r._OrtRun=pe.La)(s,m,g,$,T,B,H,q),r._OrtEndProfiling=s=>(r._OrtEndProfiling=pe.Ma)(s),r._JsepOutput=(s,m,g)=>(r._JsepOutput=pe.Na)(s,m,g),r._JsepGetNodeName=s=>(r._JsepGetNodeName=pe.Oa)(s);var Nt=r._malloc=s=>(Nt=r._malloc=pe.Pa)(s),rt=r._free=s=>(rt=r._free=pe.Qa)(s),yr=s=>(yr=pe.Sa)(s),br=s=>(br=pe.Ta)(s),Ur=()=>(Ur=pe.Ua)(),Jt=s=>(Jt=pe.Wa)(s),dn=()=>(dn=pe.Xa)(),vt=s=>(vt=pe.Ya)(s),ct=()=>(ct=pe.Za)();r.___start_em_js=837952,r.___stop_em_js=838113;function ln(){var s=pe;s=Object.assign({},s);var m=g=>$=>g($)>>>0;return s.la=m(s.la),s.Pa=m(s.Pa),s.Ta=m(s.Ta),s.Ua=(g=>()=>g()>>>0)(s.Ua),s}r.stackSave=()=>Ur(),r.stackRestore=s=>yr(s),r.stackAlloc=s=>br(s),r.UTF8ToString=je,r.stringToUTF8=(s,m,g)=>at(s,K,m,g),r.lengthBytesUTF8=Wt;var Dt;G=function s(){Dt||Vr(),Dt||(G=s)};function Vr(){if(!(0<le)){if(r.preRun)for(typeof r.preRun=="function"&&(r.preRun=[r.preRun]);r.preRun.length;){var s=r.preRun.shift();me.unshift(s)}for(;0<me.length;)me.shift()(r);if(!(0<le||Dt||(Dt=!0,r.calledRun=!0,R))){for(;0<ie.length;)ie.shift()(r);for(o(r);0<ue.length;)ue.shift()(r)}}}return Vr(),u}})();typeof Ti=="object"&&typeof po=="object"?po.exports=Ii:typeof define=="function"&&define.amd&&define([],()=>Ii)});var Pi=Wr(()=>{});var ki=Wr(()=>{});var Oi={};gn(Oi,{cpus:()=>ll});var ll,Ri=Y(()=>{ll=void 0});var zi=Wr((Di,mo)=>{"use strict";var Bi=(()=>{var e=typeof document<"u"?document.currentScript?.src:void 0;return typeof __filename<"u"&&(e||=__filename),function(t={}){function r(){return ae.buffer!=ue.buffer&&Ne(),ue}function o(){return ae.buffer!=ue.buffer&&Ne(),le}function i(){return ae.buffer!=ue.buffer&&Ne(),qe}function u(){return ae.buffer!=ue.buffer&&Ne(),G}function a(){return ae.buffer!=ue.buffer&&Ne(),ne}function c(){return ae.buffer!=ue.buffer&&Ne(),xe}function p(){return ae.buffer!=ue.buffer&&Ne(),Ke}function h(){return ae.buffer!=ue.buffer&&Ne(),Ut}var d=t,y,w,_=new Promise((n,l)=>{y=n,w=l});d.mountExternalData=(n,l)=>{(d.Db||(d.Db=new Map)).set(n,l)},d.unmountExternalData=()=>{delete d.Db};let v=()=>{let n=(f,b,C)=>(...k)=>{let V=ct,F=b?.();k=f(...k);let re=b?.();return F!==re&&(f=re,C(F),b=C=null),ct!=V?T():k},l=f=>async(...b)=>{try{if(d.Cb)throw Error("Session already started");let C=d.Cb={ec:b[0],errors:[]},k=await f(...b);if(d.Cb!==C)throw Error("Session mismatch");d.Kb?.flush();let V=C.errors;if(0<V.length){let F=await Promise.all(V);if(F=F.filter(re=>re),0<F.length)throw Error(F.join(`\n`))}return k}finally{d.Cb=null}};d._OrtCreateSession=n(d._OrtCreateSession,()=>d._OrtCreateSession,f=>d._OrtCreateSession=f),d._OrtRun=l(n(d._OrtRun,()=>d._OrtRun,f=>d._OrtRun=f)),d._OrtRunWithBinding=l(n(d._OrtRunWithBinding,()=>d._OrtRunWithBinding,f=>d._OrtRunWithBinding=f)),d._OrtBindInput=n(d._OrtBindInput,()=>d._OrtBindInput,f=>d._OrtBindInput=f),v=void 0};d.jsepInit=(n,l)=>{if(v?.(),n==="webgpu"){[d.Kb,d.Wb,d.$b,d.Lb,d.Zb,d.ob,d.ac,d.cc,d.Xb,d.Yb,d.bc]=l;let f=d.Kb;d.jsepRegisterBuffer=(b,C,k,V)=>f.registerBuffer(b,C,k,V),d.jsepGetBuffer=b=>f.getBuffer(b),d.jsepCreateDownloader=(b,C,k)=>f.createDownloader(b,C,k),d.jsepOnReleaseSession=b=>{f.onReleaseSession(b)},d.jsepOnRunStart=b=>f.onRunStart(b)}};var S=Object.assign({},d),A="./this.program",I=(n,l)=>{throw l},x=typeof window=="object",E=typeof importScripts=="function",P=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",O=d.ENVIRONMENT_IS_PTHREAD||!1,R="";function L(n){return d.locateFile?d.locateFile(n,R):R+n}var N,K,Q;if(P){var he=(uo(),wr(so)),W=(co(),wr(lo));R=E?W.dirname(R)+"/":__dirname+"/",N=(n,l)=>(n=Wt(n)?new URL(n):W.normalize(n),he.readFileSync(n,l?void 0:"utf8")),Q=n=>(n=N(n,!0),n.buffer||(n=new Uint8Array(n)),n),K=(n,l,f,b=!0)=>{n=Wt(n)?new URL(n):W.normalize(n),he.readFile(n,b?void 0:"utf8",(C,k)=>{C?f(C):l(b?k.buffer:k)})},!d.thisProgram&&1<process.argv.length&&(A=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),I=(n,l)=>{throw process.exitCode=n,l},global.Worker=Pi().Worker}else(x||E)&&(E?R=self.location.href:typeof document<"u"&&document.currentScript&&(R=document.currentScript.src),typeof e<"u"&&e&&(R=e),R.startsWith("blob:")?R="":R=R.substr(0,R.replace(/[?#].*/,"").lastIndexOf("/")+1),P||(N=n=>{var l=new XMLHttpRequest;return l.open("GET",n,!1),l.send(null),l.responseText},E&&(Q=n=>{var l=new XMLHttpRequest;return l.open("GET",n,!1),l.responseType="arraybuffer",l.send(null),new Uint8Array(l.response)}),K=(n,l,f)=>{var b=new XMLHttpRequest;b.open("GET",n,!0),b.responseType="arraybuffer",b.onload=()=>{b.status==200||b.status==0&&b.response?l(b.response):f()},b.onerror=f,b.send(null)}));P&&typeof performance>"u"&&(global.performance=ki().performance);var se=console.log.bind(console),Ce=console.error.bind(console);P&&(se=(...n)=>he.writeSync(1,n.join(" ")+`\n`),Ce=(...n)=>he.writeSync(2,n.join(" ")+`\n`));var We=se,ee=Ce;Object.assign(d,S),S=null;var ae,Ae,me=!1,ie,ue,le,qe,G,ne,xe,Ke,Be,Ge,Ut;function Ne(){var n=ae.buffer;d.HEAP8=ue=new Int8Array(n),d.HEAP16=qe=new Int16Array(n),d.HEAPU8=le=new Uint8Array(n),d.HEAPU16=G=new Uint16Array(n),d.HEAP32=ne=new Int32Array(n),d.HEAPU32=xe=new Uint32Array(n),d.HEAPF32=Ke=new Float32Array(n),d.HEAPF64=Ut=new Float64Array(n),d.HEAP64=Be=new BigInt64Array(n),d.HEAPU64=Ge=new BigUint64Array(n)}var Ye=16777216;if(O)ae=d.wasmMemory;else if(d.wasmMemory)ae=d.wasmMemory;else if(ae=new WebAssembly.Memory({initial:Ye/65536,maximum:65536,shared:!0}),!(ae.buffer instanceof SharedArrayBuffer))throw ee("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),P&&ee("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Ne(),Ye=ae.buffer.byteLength;var mt=[],Rt=[],qt=[],Vt=0,sr=null,jt=null;function xr(){if(Vt--,Vt==0&&(sr!==null&&(clearInterval(sr),sr=null),jt)){var n=jt;jt=null,n()}}function Kt(n){throw n="Aborted("+n+")",ee(n),me=!0,ie=1,n=new WebAssembly.RuntimeError(n+". Build with -sASSERTIONS for more info."),w(n),n}var je=n=>n.startsWith("data:application/octet-stream;base64,"),Wt=n=>n.startsWith("file://"),at;at="ort-wasm-simd-threaded.wasm",je(at)||(at=L(at));function Cr(n){if(Q)return Q(n);throw"both async and sync fetching of the wasm failed"}function ft(n){if(x||E){if(typeof fetch=="function"&&!Wt(n))return fetch(n,{credentials:"same-origin"}).then(l=>{if(!l.ok)throw`failed to load wasm binary file at \'${n}\'`;return l.arrayBuffer()}).catch(()=>Cr(n));if(K)return new Promise((l,f)=>{K(n,b=>l(new Uint8Array(b)),f)})}return Promise.resolve().then(()=>Cr(n))}function ur(n,l,f){return ft(n).then(b=>WebAssembly.instantiate(b,l)).then(f,b=>{ee(`failed to asynchronously prepare wasm: ${b}`),Kt(b)})}function Ar(n,l){var f=at;return typeof WebAssembly.instantiateStreaming!="function"||je(f)||Wt(f)||P||typeof fetch!="function"?ur(f,n,l):fetch(f,{credentials:"same-origin"}).then(b=>WebAssembly.instantiateStreaming(b,n).then(l,function(C){return ee(`wasm streaming compile failed: ${C}`),ee("falling back to ArrayBuffer instantiation"),ur(f,n,l)}))}var Ir={826468:(n,l,f,b)=>{if(typeof d>"u"||!d.Db)return 1;if(n=He(n>>>0),n.startsWith("./")&&(n=n.substring(2)),n=d.Db.get(n),!n)return 2;if(l>>>=0,f>>>=0,b>>>=0,l+f>n.byteLength)return 3;try{return o().set(n.subarray(l,l+f),b>>>0),0}catch{return 4}},826969:()=>{d.Xb()},827e3:()=>{d.Yb()},827029:()=>{d.bc()},827054:n=>d.Wb(n),827087:n=>d.$b(n),827119:(n,l,f)=>{d.Lb(n,l,f,!0)},827158:(n,l,f)=>{d.Lb(n,l,f)},827191:n=>{d.ob("Abs",n,void 0)},827242:n=>{d.ob("Neg",n,void 0)},827293:n=>{d.ob("Floor",n,void 0)},827346:n=>{d.ob("Ceil",n,void 0)},827398:n=>{d.ob("Reciprocal",n,void 0)},827456:n=>{d.ob("Sqrt",n,void 0)},827508:n=>{d.ob("Exp",n,void 0)},827559:n=>{d.ob("Erf",n,void 0)},827610:n=>{d.ob("Sigmoid",n,void 0)},827665:(n,l,f)=>{d.ob("HardSigmoid",n,{alpha:l,beta:f})},827744:n=>{d.ob("Log",n,void 0)},827795:n=>{d.ob("Sin",n,void 0)},827846:n=>{d.ob("Cos",n,void 0)},827897:n=>{d.ob("Tan",n,void 0)},827948:n=>{d.ob("Asin",n,void 0)},828e3:n=>{d.ob("Acos",n,void 0)},828052:n=>{d.ob("Atan",n,void 0)},828104:n=>{d.ob("Sinh",n,void 0)},828156:n=>{d.ob("Cosh",n,void 0)},828208:n=>{d.ob("Asinh",n,void 0)},828261:n=>{d.ob("Acosh",n,void 0)},828314:n=>{d.ob("Atanh",n,void 0)},828367:n=>{d.ob("Tanh",n,void 0)},828419:n=>{d.ob("Not",n,void 0)},828470:(n,l,f)=>{d.ob("Clip",n,{min:l,max:f})},828539:n=>{d.ob("Clip",n,void 0)},828591:(n,l)=>{d.ob("Elu",n,{alpha:l})},828649:n=>{d.ob("Relu",n,void 0)},828701:(n,l)=>{d.ob("LeakyRelu",n,{alpha:l})},828765:(n,l)=>{d.ob("ThresholdedRelu",n,{alpha:l})},828835:(n,l)=>{d.ob("Cast",n,{to:l})},828893:n=>{d.ob("Add",n,void 0)},828944:n=>{d.ob("Sub",n,void 0)},828995:n=>{d.ob("Mul",n,void 0)},829046:n=>{d.ob("Div",n,void 0)},829097:n=>{d.ob("Pow",n,void 0)},829148:n=>{d.ob("Equal",n,void 0)},829201:n=>{d.ob("Greater",n,void 0)},829256:n=>{d.ob("GreaterOrEqual",n,void 0)},829318:n=>{d.ob("Less",n,void 0)},829370:n=>{d.ob("LessOrEqual",n,void 0)},829429:(n,l,f,b,C)=>{d.ob("ReduceMean",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829588:(n,l,f,b,C)=>{d.ob("ReduceMax",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829746:(n,l,f,b,C)=>{d.ob("ReduceMin",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},829904:(n,l,f,b,C)=>{d.ob("ReduceProd",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830063:(n,l,f,b,C)=>{d.ob("ReduceSum",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830221:(n,l,f,b,C)=>{d.ob("ReduceL1",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830378:(n,l,f,b,C)=>{d.ob("ReduceL2",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830535:(n,l,f,b,C)=>{d.ob("ReduceLogSum",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830696:(n,l,f,b,C)=>{d.ob("ReduceSumSquare",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},830860:(n,l,f,b,C)=>{d.ob("ReduceLogSumExp",n,{keepDims:!!l,noopWithEmptyAxes:!!f,axes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},831024:n=>{d.ob("Where",n,void 0)},831077:(n,l,f)=>{d.ob("Transpose",n,{perm:l?Array.from(a().subarray(l>>>0,f>>>0)):[]})},831185:(n,l,f,b)=>{d.ob("DepthToSpace",n,{blocksize:l,mode:He(f),format:b?"NHWC":"NCHW"})},831318:(n,l,f,b)=>{d.ob("DepthToSpace",n,{blocksize:l,mode:He(f),format:b?"NHWC":"NCHW"})},831451:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we)=>{d.ob("ConvTranspose",n,{format:re?"NHWC":"NCHW",autoPad:l,dilations:[f],group:b,kernelShape:[C],pads:[k,V],strides:[F],wIsConst:()=>!!r()[J>>>0],outputPadding:ce?Array.from(a().subarray(ce>>>0,Re>>>0)):[],outputShape:ze?Array.from(a().subarray(ze>>>0,z>>>0)):[],activation:He(we)})},831852:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z)=>{d.ob("ConvTranspose",n,{format:F?"NHWC":"NCHW",autoPad:l,dilations:Array.from(a().subarray(f>>>0,(f>>>0)+2>>>0)),group:b,kernelShape:Array.from(a().subarray(C>>>0,(C>>>0)+2>>>0)),pads:Array.from(a().subarray(k>>>0,(k>>>0)+4>>>0)),strides:Array.from(a().subarray(V>>>0,(V>>>0)+2>>>0)),wIsConst:()=>!!r()[re>>>0],outputPadding:J?Array.from(a().subarray(J>>>0,ce>>>0)):[],outputShape:Re?Array.from(a().subarray(Re>>>0,ze>>>0)):[],activation:He(z)})},832417:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we)=>{d.ob("ConvTranspose",n,{format:re?"NHWC":"NCHW",autoPad:l,dilations:[f],group:b,kernelShape:[C],pads:[k,V],strides:[F],wIsConst:()=>!!r()[J>>>0],outputPadding:ce?Array.from(a().subarray(ce>>>0,Re>>>0)):[],outputShape:ze?Array.from(a().subarray(ze>>>0,z>>>0)):[],activation:He(we)})},832818:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z)=>{d.ob("ConvTranspose",n,{format:F?"NHWC":"NCHW",autoPad:l,dilations:Array.from(a().subarray(f>>>0,(f>>>0)+2>>>0)),group:b,kernelShape:Array.from(a().subarray(C>>>0,(C>>>0)+2>>>0)),pads:Array.from(a().subarray(k>>>0,(k>>>0)+4>>>0)),strides:Array.from(a().subarray(V>>>0,(V>>>0)+2>>>0)),wIsConst:()=>!!r()[re>>>0],outputPadding:J?Array.from(a().subarray(J>>>0,ce>>>0)):[],outputShape:Re?Array.from(a().subarray(Re>>>0,ze>>>0)):[],activation:He(z)})},833383:(n,l)=>{d.ob("GlobalAveragePool",n,{format:l?"NHWC":"NCHW"})},833474:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("AveragePool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},833758:(n,l)=>{d.ob("GlobalAveragePool",n,{format:l?"NHWC":"NCHW"})},833849:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("AveragePool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834133:(n,l)=>{d.ob("GlobalMaxPool",n,{format:l?"NHWC":"NCHW"})},834220:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("MaxPool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834500:(n,l)=>{d.ob("GlobalMaxPool",n,{format:l?"NHWC":"NCHW"})},834587:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("MaxPool",n,{format:Pe?"NHWC":"NCHW",auto_pad:l,ceil_mode:f,count_include_pad:b,storage_order:C,dilations:[k,V],kernel_shape:[F,re],pads:[J,ce,Re,ze],strides:[z,we]})},834867:(n,l,f,b,C)=>{d.ob("Gemm",n,{alpha:l,beta:f,transA:b,transB:C})},834971:n=>{d.ob("MatMul",n,void 0)},835025:(n,l,f,b)=>{d.ob("ArgMax",n,{keepDims:!!l,selectLastIndex:!!f,axis:b})},835133:(n,l,f,b)=>{d.ob("ArgMin",n,{keepDims:!!l,selectLastIndex:!!f,axis:b})},835241:(n,l)=>{d.ob("Softmax",n,{axis:l})},835304:(n,l)=>{d.ob("Concat",n,{axis:l})},835364:(n,l,f,b,C)=>{d.ob("Split",n,{axis:l,numOutputs:f,splitSizes:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},835504:n=>{d.ob("Expand",n,void 0)},835558:(n,l)=>{d.ob("Gather",n,{axis:Number(l)})},835629:(n,l)=>{d.ob("GatherElements",n,{axis:Number(l)})},835708:(n,l,f,b,C,k,V,F,re,J,ce)=>{d.ob("Resize",n,{antialias:l,axes:f?Array.from(a().subarray(f>>>0,b>>>0)):[],coordinateTransformMode:He(C),cubicCoeffA:k,excludeOutside:V,extrapolationValue:F,keepAspectRatioPolicy:He(re),mode:He(J),nearestMode:He(ce)})},836054:(n,l,f,b,C,k,V)=>{d.ob("Slice",n,{starts:l?Array.from(a().subarray(l>>>0,f>>>0)):[],ends:b?Array.from(a().subarray(b>>>0,C>>>0)):[],axes:k?Array.from(a().subarray(k>>>0,V>>>0)):[]})},836270:n=>{d.ob("Tile",n,void 0)},836322:(n,l,f,b)=>{d.ob("LayerNormalization",n,{axis:l,epsilon:f,simplified:!!b})},836433:(n,l,f)=>{d.ob("InstanceNormalization",n,{epsilon:l,format:f?"NHWC":"NCHW"})},836547:(n,l,f)=>{d.ob("InstanceNormalization",n,{epsilon:l,format:f?"NHWC":"NCHW"})},836661:n=>{d.ob("Range",n,void 0)},836714:(n,l)=>{d.ob("Einsum",n,{equation:He(l)})},836795:(n,l,f,b,C)=>{d.ob("Pad",n,{mode:l,value:f,pads:b?Array.from(a().subarray(b>>>0,C>>>0)):[]})},836922:(n,l,f,b,C,k)=>{d.ob("BatchNormalization",n,{epsilon:l,momentum:f,spatial:!!C,trainingMode:!!b,format:k?"NHWC":"NCHW"})},837091:(n,l,f,b,C,k)=>{d.ob("BatchNormalization",n,{epsilon:l,momentum:f,spatial:!!C,trainingMode:!!b,format:k?"NHWC":"NCHW"})},837260:(n,l,f)=>{d.ob("CumSum",n,{exclusive:Number(l),reverse:Number(f)})},837357:(n,l,f,b,C,k,V,F,re)=>{d.ob("Attention",n,{numHeads:l,isUnidirectional:f,maskFilterValue:b,scale:C,doRotary:k,qkvHiddenSizes:V?Array.from(a().subarray(Number(F)>>>0,Number(F)+V>>>0)):[],pastPresentShareBuffer:!!re})},837629:n=>{d.ob("BiasAdd",n,void 0)},837684:n=>{d.ob("BiasSplitGelu",n,void 0)},837745:n=>{d.ob("FastGelu",n,void 0)},837801:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze)=>{d.ob("Conv",n,{format:re?"NHWC":"NCHW",auto_pad:l,dilations:[f],group:b,kernel_shape:[C],pads:k?Array.from(a().subarray(k>>>0,V>>>0)):[],strides:[F],w_is_const:()=>!!r()[J>>>0],activation:He(ce),activation_params:Re?Array.from(p().subarray(Re>>>0,ze>>>0)):[]})},838171:(n,l,f,b,C,k,V,F,re,J,ce,Re,ze,z,we,Pe)=>{d.ob("Conv",n,{format:Re?"NHWC":"NCHW",auto_pad:l,dilations:[f,b],group:C,kernel_shape:[k,V],pads:F?Array.from(a().subarray(F>>>0,re>>>0)):[],strides:[J,ce],w_is_const:()=>!!r()[ze>>>0],activation:He(z),activation_params:we?Array.from(p().subarray(we>>>0,Pe>>>0)):[]})},838562:n=>{d.ob("Gelu",n,void 0)},838614:(n,l,f,b,C,k)=>{d.ob("MatMulNBits",n,{k:l,n:f,accuracyLevel:b,bits:C,blockSize:k})},838741:(n,l,f,b,C,k)=>{d.ob("MultiHeadAttention",n,{numHeads:l,isUnidirectional:f,maskFilterValue:b,scale:C,doRotary:k})},838900:(n,l,f,b,C)=>{d.ob("RotaryEmbedding",n,{interleaved:!!l,numHeads:f,rotaryEmbeddingDim:b,scale:C})},839039:(n,l,f)=>{d.ob("SkipLayerNormalization",n,{epsilon:l,simplified:!!f})},839141:(n,l,f)=>{d.ob("SkipLayerNormalization",n,{epsilon:l,simplified:!!f})},839243:(n,l,f,b)=>{d.ob("LayerNormalization",n,{axis:l,epsilon:f,simplified:!!b})},839354:n=>{d.ac(n)},839388:(n,l)=>d.cc(n,l,d.Cb.ec,d.Cb.errors)};function st(n){this.name="ExitStatus",this.message=`Program terminated with exit(${n})`,this.status=n}var Tr=n=>{n.terminate(),n.onmessage=()=>{}},ht=n=>{ge.xb.length==0&&(lr(),ge.Mb(ge.xb[0]));var l=ge.xb.pop();if(!l)return 6;ge.yb.push(l),ge.ub[n.wb]=l,l.wb=n.wb;var f={cmd:"run",start_routine:n.fc,arg:n.Rb,pthread_ptr:n.wb};return P&&l.unref(),l.postMessage(f,n.mc),0},bt=0,Er=n=>{var l=io();return n=n(),fn(l),n},Te=(n,l,...f)=>Er(()=>{for(var b=2*f.length,C=oo(8*b),k=C>>>3,V=0;V<f.length;V++){var F=f[V];typeof F=="bigint"?(Be[k+2*V]=1n,Be[k+2*V+1]=F):(Be[k+2*V]=0n,h()[k+2*V+1>>>0]=F)}return gi(n,0,b,C,l)});function dr(n){if(O)return Te(0,1,n);ie=n,0<bt||(ge.hc(),d.onExit?.(n),me=!0),I(n,new st(n))}var Xe=n=>{if(ie=n,O)throw jr(n),"unwind";dr(n)};function ut(){for(var n=d.numThreads;n--;)lr();mt.unshift(()=>{Vt++,Fn(()=>xr())})}function lr(){var n=L("ort-wasm-simd-threaded.worker.js");n=new Worker(n),ge.xb.push(n)}function Fn(n){O?n():Promise.all(ge.xb.map(ge.Mb)).then(n)}var ge={xb:[],yb:[],Qb:[],ub:{},Gb(){O?(ge.receiveObjectTransfer=ge.dc,ge.threadInitTLS=ge.Pb,ge.setExitStatus=ge.Ob):ut()},Ob:n=>ie=n,pc:["$terminateWorker"],hc:()=>{for(var n of ge.yb)Tr(n);for(n of ge.xb)Tr(n);ge.xb=[],ge.yb=[],ge.ub=[]},Nb:n=>{var l=n.wb;delete ge.ub[l],ge.xb.push(n),ge.yb.splice(ge.yb.indexOf(n),1),n.wb=0,ro(l)},dc(){},Pb(){ge.Qb.forEach(n=>n())},Mb:n=>new Promise(l=>{n.onmessage=k=>{k=k.data;var V=k.cmd;if(k.targetThread&&k.targetThread!=pn()){var F=ge.ub[k.targetThread];F?F.postMessage(k,k.transferList):ee(`Internal error! Worker sent a message "${V}" to target pthread ${k.targetThread}, but that thread no longer exists!`)}else V==="checkMailbox"?rt():V==="spawnThread"?ht(k):V==="cleanupThread"?ge.Nb(ge.ub[k.thread]):V==="killThread"?(k=k.thread,V=ge.ub[k],delete ge.ub[k],Tr(V),ro(k),ge.yb.splice(ge.yb.indexOf(V),1),V.wb=0):V==="cancelThread"?ge.ub[k.thread].postMessage({cmd:"cancel"}):V==="loaded"?(n.loaded=!0,P&&!n.wb&&n.unref(),l(n)):V==="alert"?alert(`Thread ${k.threadId}: ${k.text}`):k.target==="setimmediate"?n.postMessage(k):V==="callHandler"?d[k.handler](...k.args):V&&ee(`worker sent an unknown command ${V}`)},n.onerror=k=>{throw ee(`worker sent an error! ${k.filename}:${k.lineno}: ${k.message}`),k},P&&(n.on("message",k=>n.onmessage({data:k})),n.on("error",k=>n.onerror(k)));var f=[],b=["onExit"],C;for(C of b)d.hasOwnProperty(C)&&f.push(C);n.postMessage({cmd:"load",handlers:f,urlOrBlob:d.mainScriptUrlOrBlob||e,wasmMemory:ae,wasmModule:Ae})})};d.PThread=ge;var Yt=n=>{for(;0<n.length;)n.shift()(d)};d.establishStackSpace=()=>{var n=pn(),l=c()[n+52>>>2>>>0];n=c()[n+56>>>2>>>0],bi(l,l-n),fn(l)};function jr(n){if(O)return Te(1,0,n);Xe(n)}d.invokeEntryPoint=(n,l)=>{bt=0,n=wi(n,l),0<bt?ge.Ob(n):no(n)};class qn{constructor(l){this.Ib=l-24}Gb(l,f){c()[this.Ib+16>>>2>>>0]=0,c()[this.Ib+4>>>2>>>0]=l,c()[this.Ib+8>>>2>>>0]=f}}var Kr=0,jn=0;function Yr(n,l,f,b){return O?Te(2,1,n,l,f,b):Zr(n,l,f,b)}function Zr(n,l,f,b){if(n>>>=0,l>>>=0,f>>>=0,b>>>=0,typeof SharedArrayBuffer>"u")return ee("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var C=[];return O&&C.length===0?Yr(n,l,f,b):(n={fc:f,wb:n,Rb:b,mc:C},O?(n.oc="spawnThread",postMessage(n,C),0):ht(n))}var cr=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Pr=(n,l,f)=>{l>>>=0;var b=l+f;for(f=l;n[f]&&!(f>=b);)++f;if(16<f-l&&n.buffer&&cr)return cr.decode(n.buffer instanceof SharedArrayBuffer?n.slice(l,f):n.subarray(l,f));for(b="";l<f;){var C=n[l++];if(C&128){var k=n[l++]&63;if((C&224)==192)b+=String.fromCharCode((C&31)<<6|k);else{var V=n[l++]&63;C=(C&240)==224?(C&15)<<12|k<<6|V:(C&7)<<18|k<<12|V<<6|n[l++]&63,65536>C?b+=String.fromCharCode(C):(C-=65536,b+=String.fromCharCode(55296|C>>10,56320|C&1023))}}else b+=String.fromCharCode(C)}return b},He=(n,l)=>(n>>>=0)?Pr(o(),n,l):"";function Xr(n,l,f){return O?Te(3,1,n,l,f):0}function Qr(n,l){if(O)return Te(4,1,n,l)}var gt=n=>{for(var l=0,f=0;f<n.length;++f){var b=n.charCodeAt(f);127>=b?l++:2047>=b?l+=2:55296<=b&&57343>=b?(l+=4,++f):l+=3}return l},dt=(n,l,f,b)=>{if(f>>>=0,!(0<b))return 0;var C=f;b=f+b-1;for(var k=0;k<n.length;++k){var V=n.charCodeAt(k);if(55296<=V&&57343>=V){var F=n.charCodeAt(++k);V=65536+((V&1023)<<10)|F&1023}if(127>=V){if(f>=b)break;l[f++>>>0]=V}else{if(2047>=V){if(f+1>=b)break;l[f++>>>0]=192|V>>6}else{if(65535>=V){if(f+2>=b)break;l[f++>>>0]=224|V>>12}else{if(f+3>=b)break;l[f++>>>0]=240|V>>18,l[f++>>>0]=128|V>>12&63}l[f++>>>0]=128|V>>6&63}l[f++>>>0]=128|V&63}}return l[f>>>0]=0,f-C},Bt=(n,l,f)=>dt(n,o(),l,f);function Zt(n,l){if(O)return Te(5,1,n,l)}function kr(n,l,f){if(O)return Te(6,1,n,l,f)}function Or(n,l,f){return O?Te(7,1,n,l,f):0}function Jr(n,l){if(O)return Te(8,1,n,l)}function pr(n,l,f){if(O)return Te(9,1,n,l,f)}function en(n,l,f,b){if(O)return Te(10,1,n,l,f,b)}function tn(n,l,f,b){if(O)return Te(11,1,n,l,f,b)}function rn(n,l,f,b){if(O)return Te(12,1,n,l,f,b)}function nn(n){if(O)return Te(13,1,n)}function Rr(n,l){if(O)return Te(14,1,n,l)}function Xt(n,l,f){if(O)return Te(15,1,n,l,f)}var on,nt=n=>{for(var l="";o()[n>>>0];)l+=on[o()[n++>>>0]];return l},mr={},Br={},Kn={},wt;function Yn(n,l,f={}){var b=l.name;if(!n)throw new wt(`type "${b}" must have a positive integer typeid pointer`);if(Br.hasOwnProperty(n)){if(f.Ub)return;throw new wt(`Cannot register type \'${b}\' twice`)}Br[n]=l,delete Kn[n],mr.hasOwnProperty(n)&&(l=mr[n],delete mr[n],l.forEach(C=>C()))}function Je(n,l,f={}){if(!("argPackAdvance"in l))throw new TypeError("registerType registeredInstance requires argPackAdvance");return Yn(n,l,f)}var Dr=(n,l,f)=>{switch(l){case 1:return f?b=>r()[b>>>0]:b=>o()[b>>>0];case 2:return f?b=>i()[b>>>1>>>0]:b=>u()[b>>>1>>>0];case 4:return f?b=>a()[b>>>2>>>0]:b=>c()[b>>>2>>>0];case 8:return f?b=>Be[b>>>3]:b=>Ge[b>>>3];default:throw new TypeError(`invalid integer width (${l}): ${n}`)}},fr=[],lt=[];function hr(n){n>>>=0,9<n&&--lt[n+1]===0&&(lt[n]=void 0,fr.push(n))}var Qe=n=>{if(!n)throw new wt("Cannot use deleted val. handle = "+n);return lt[n]},ot=n=>{switch(n){case void 0:return 2;case null:return 4;case!0:return 6;case!1:return 8;default:let l=fr.pop()||lt.length;return lt[l]=n,lt[l+1]=1,l}};function Qt(n){return this.fromWireType(c()[n>>>2>>>0])}var Zn={name:"emscripten::val",fromWireType:n=>{var l=Qe(n);return hr(n),l},toWireType:(n,l)=>ot(l),argPackAdvance:8,readValueFromPointer:Qt,Bb:null},an=(n,l)=>{switch(l){case 4:return function(f){return this.fromWireType(p()[f>>>2>>>0])};case 8:return function(f){return this.fromWireType(h()[f>>>3>>>0])};default:throw new TypeError(`invalid float width (${l}): ${n}`)}},zr=typeof TextDecoder<"u"?new TextDecoder("utf-16le"):void 0,Xn=(n,l)=>{for(var f=n>>1,b=f+l/2;!(f>=b)&&u()[f>>>0];)++f;if(f<<=1,32<f-n&&zr)return zr.decode(o().slice(n,f));for(f="",b=0;!(b>=l/2);++b){var C=i()[n+2*b>>>1>>>0];if(C==0)break;f+=String.fromCharCode(C)}return f},sn=(n,l,f)=>{if(f??=2147483647,2>f)return 0;f-=2;var b=l;f=f<2*n.length?f/2:n.length;for(var C=0;C<f;++C){var k=n.charCodeAt(C);i()[l>>>1>>>0]=k,l+=2}return i()[l>>>1>>>0]=0,l-b},un=n=>2*n.length,gr=(n,l)=>{for(var f=0,b="";!(f>=l/4);){var C=a()[n+4*f>>>2>>>0];if(C==0)break;++f,65536<=C?(C-=65536,b+=String.fromCharCode(55296|C>>10,56320|C&1023)):b+=String.fromCharCode(C)}return b},Qn=(n,l,f)=>{if(l>>>=0,f??=2147483647,4>f)return 0;var b=l;f=b+f-4;for(var C=0;C<n.length;++C){var k=n.charCodeAt(C);if(55296<=k&&57343>=k){var V=n.charCodeAt(++C);k=65536+((k&1023)<<10)|V&1023}if(a()[l>>>2>>>0]=k,l+=4,l+4>f)break}return a()[l>>>2>>>0]=0,l-b},pe=n=>{for(var l=0,f=0;f<n.length;++f){var b=n.charCodeAt(f);55296<=b&&57343>=b&&++f,l+=4}return l},Mr=n=>{if(!me)try{if(n(),!(0<bt))try{O?no(ie):Xe(ie)}catch(l){l instanceof st||l=="unwind"||I(1,l)}}catch(l){l instanceof st||l=="unwind"||I(1,l)}};function Nt(n){n>>>=0,typeof Atomics.nc=="function"&&(Atomics.nc(a(),n>>>2,n).value.then(rt),n+=128,Atomics.store(a(),n>>>2,1))}d.__emscripten_thread_mailbox_await=Nt;var rt=()=>{var n=pn();n&&(Nt(n),Mr(yi))};d.checkMailbox=rt;var yr=[],br=(n,l)=>{var f=Br[n];if(f===void 0)throw n=fi(n),f=nt(n),At(n),new wt(`${l} has unknown type ${f}`);return f},Ur=(n,l,f)=>{var b=[];return n=n.toWireType(b,f),b.length&&(c()[l>>>2>>>0]=ot(b)),n},Jt=n=>{try{n()}catch(l){Kt(l)}};function dn(){var n=oe,l={};for(let[f,b]of Object.entries(n))l[f]=typeof b=="function"?(...C)=>{Dt.push(f);try{return b(...C)}finally{me||(Dt.pop(),ct&&vt===1&&Dt.length===0&&(vt=0,bt+=1,Jt($i),typeof Fibers<"u"&&Fibers.rc()))}}:b;return l}var vt=0,ct=null,ln=0,Dt=[],Vr={},s={},m=0,g=null,$=[];function T(){return new Promise((n,l)=>{g={resolve:n,reject:l}})}function B(){var n=mn(65548),l=n+12;c()[n>>>2>>>0]=l,c()[n+4>>>2>>>0]=l+65536,l=Dt[0];var f=Vr[l];return f===void 0&&(f=m++,Vr[l]=f,s[f]=l),l=f,a()[n+8>>>2>>>0]=l,n}function H(){var n=a()[ct+8>>>2>>>0];return n=oe[s[n]],--bt,n()}function q(n){if(!me){if(vt===0){var l=!1,f=!1;n((b=0)=>{if(!me&&(ln=b,l=!0,f)){vt=2,Jt(()=>_i(ct)),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.resume(),b=!1;try{var C=H()}catch(F){C=F,b=!0}var k=!1;if(!ct){var V=g;V&&(g=null,(b?V.reject:V.resolve)(C),k=!0)}if(b&&!k)throw C}}),f=!0,l||(vt=1,ct=B(),typeof Browser<"u"&&Browser.Hb.Tb&&Browser.Hb.pause(),Jt(()=>vi(ct)))}else vt===2?(vt=0,Jt(Si),At(ct),ct=null,$.forEach(Mr)):Kt(`invalid state: ${vt}`);return ln}}function te(n){return q(l=>{n().then(l)})}var X=[],de={},Ee=n=>{var l=de[n];return l===void 0?nt(n):l},Oe=()=>typeof globalThis=="object"?globalThis:Function("return this")(),D=n=>{var l=X.length;return X.push(n),l},be=(n,l)=>{for(var f=Array(n),b=0;b<n;++b)f[b]=br(c()[l+4*b>>>2>>>0],"parameter "+b);return f},Ie=(n,l)=>Object.defineProperty(l,"name",{value:n});function zt(n){var l=Function;if(!(l instanceof Function))throw new TypeError(`new_ called with constructor type ${typeof l} which is not a function`);var f=Ie(l.name||"unknownFunctionName",function(){});return f.prototype=l.prototype,f=new f,n=l.apply(f,n),n instanceof Object?n:f}var Mt=n=>n%4===0&&(n%100!==0||n%400===0),Qo=[0,31,60,91,121,152,182,213,244,274,305,335],Jo=[0,31,59,90,120,151,181,212,243,273,304,334];function ei(n,l,f,b,C,k,V){return O?Te(16,1,n,l,f,b,C,k,V):-52}function ti(n,l,f,b,C,k){if(O)return Te(17,1,n,l,f,b,C,k)}var Jn=[],ri=(n,l)=>{Jn.length=0;for(var f;f=o()[n++>>>0];){var b=f!=105;b&=f!=112,l+=b&&l%8?4:0,Jn.push(f==112?c()[l>>>2>>>0]:f==106?Be[l>>>3]:f==105?a()[l>>>2>>>0]:h()[l>>>3>>>0]),l+=b?8:4}return Jn},eo={},ni=()=>{if(!to){var n={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:A||"./this.program"},l;for(l in eo)eo[l]===void 0?delete n[l]:n[l]=eo[l];var f=[];for(l in n)f.push(`${l}=${n[l]}`);to=f}return to},to;function oi(n,l){if(O)return Te(18,1,n,l);n>>>=0,l>>>=0;var f=0;return ni().forEach((b,C)=>{var k=l+f;for(C=c()[n+4*C>>>2>>>0]=k,k=0;k<b.length;++k)r()[C++>>>0]=b.charCodeAt(k);r()[C>>>0]=0,f+=b.length+1}),0}function ii(n,l){if(O)return Te(19,1,n,l);n>>>=0,l>>>=0;var f=ni();c()[n>>>2>>>0]=f.length;var b=0;return f.forEach(C=>b+=C.length+1),c()[l>>>2>>>0]=b,0}function ai(n){return O?Te(20,1,n):52}function si(n,l,f,b){return O?Te(21,1,n,l,f,b):52}function ui(n,l,f,b){return O?Te(22,1,n,l,f,b):70}var Xd=[null,[],[]];function di(n,l,f,b){if(O)return Te(23,1,n,l,f,b);l>>>=0,f>>>=0,b>>>=0;for(var C=0,k=0;k<f;k++){var V=c()[l>>>2>>>0],F=c()[l+4>>>2>>>0];l+=8;for(var re=0;re<F;re++){var J=o()[V+re>>>0],ce=Xd[n];J===0||J===10?((n===1?We:ee)(Pr(ce,0)),ce.length=0):ce.push(J)}C+=F}return c()[b>>>2>>>0]=C,0}var li=[31,29,31,30,31,30,31,31,30,31,30,31],ci=[31,28,31,30,31,30,31,31,30,31,30,31];function Qd(n){var l=Array(gt(n)+1);return dt(n,l,0,l.length),l}var Jd=(n,l)=>{r().set(n,l>>>0)};function pi(n,l,f,b){function C(z,we,Pe){for(z=typeof z=="number"?z.toString():z||"";z.length<we;)z=Pe[0]+z;return z}function k(z,we){return C(z,we,"0")}function V(z,we){function Pe(Ci){return 0>Ci?-1:0<Ci?1:0}var er;return(er=Pe(z.getFullYear()-we.getFullYear()))===0&&(er=Pe(z.getMonth()-we.getMonth()))===0&&(er=Pe(z.getDate()-we.getDate())),er}function F(z){switch(z.getDay()){case 0:return new Date(z.getFullYear()-1,11,29);case 1:return z;case 2:return new Date(z.getFullYear(),0,3);case 3:return new Date(z.getFullYear(),0,2);case 4:return new Date(z.getFullYear(),0,1);case 5:return new Date(z.getFullYear()-1,11,31);case 6:return new Date(z.getFullYear()-1,11,30)}}function re(z){var we=z.zb;for(z=new Date(new Date(z.Ab+1900,0,1).getTime());0<we;){var Pe=z.getMonth(),er=(Mt(z.getFullYear())?li:ci)[Pe];if(we>er-z.getDate())we-=er-z.getDate()+1,z.setDate(1),11>Pe?z.setMonth(Pe+1):(z.setMonth(0),z.setFullYear(z.getFullYear()+1));else{z.setDate(z.getDate()+we);break}}return Pe=new Date(z.getFullYear()+1,0,4),we=F(new Date(z.getFullYear(),0,4)),Pe=F(Pe),0>=V(we,z)?0>=V(Pe,z)?z.getFullYear()+1:z.getFullYear():z.getFullYear()-1}n>>>=0,l>>>=0,f>>>=0,b>>>=0;var J=c()[b+40>>>2>>>0];b={kc:a()[b>>>2>>>0],jc:a()[b+4>>>2>>>0],Eb:a()[b+8>>>2>>>0],Jb:a()[b+12>>>2>>>0],Fb:a()[b+16>>>2>>>0],Ab:a()[b+20>>>2>>>0],vb:a()[b+24>>>2>>>0],zb:a()[b+28>>>2>>>0],qc:a()[b+32>>>2>>>0],ic:a()[b+36>>>2>>>0],lc:J?He(J):""},f=He(f),J={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var ce in J)f=f.replace(new RegExp(ce,"g"),J[ce]);var Re="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ze="January February March April May June July August September October November December".split(" ");J={"%a":z=>Re[z.vb].substring(0,3),"%A":z=>Re[z.vb],"%b":z=>ze[z.Fb].substring(0,3),"%B":z=>ze[z.Fb],"%C":z=>k((z.Ab+1900)/100|0,2),"%d":z=>k(z.Jb,2),"%e":z=>C(z.Jb,2," "),"%g":z=>re(z).toString().substring(2),"%G":re,"%H":z=>k(z.Eb,2),"%I":z=>(z=z.Eb,z==0?z=12:12<z&&(z-=12),k(z,2)),"%j":z=>{for(var we=0,Pe=0;Pe<=z.Fb-1;we+=(Mt(z.Ab+1900)?li:ci)[Pe++]);return k(z.Jb+we,3)},"%m":z=>k(z.Fb+1,2),"%M":z=>k(z.jc,2),"%n":()=>`\n`,"%p":z=>0<=z.Eb&&12>z.Eb?"AM":"PM","%S":z=>k(z.kc,2),"%t":()=>"	","%u":z=>z.vb||7,"%U":z=>k(Math.floor((z.zb+7-z.vb)/7),2),"%V":z=>{var we=Math.floor((z.zb+7-(z.vb+6)%7)/7);if(2>=(z.vb+371-z.zb-2)%7&&we++,we)we==53&&(Pe=(z.vb+371-z.zb)%7,Pe==4||Pe==3&&Mt(z.Ab)||(we=1));else{we=52;var Pe=(z.vb+7-z.zb-1)%7;(Pe==4||Pe==5&&Mt(z.Ab%400-1))&&we++}return k(we,2)},"%w":z=>z.vb,"%W":z=>k(Math.floor((z.zb+7-(z.vb+6)%7)/7),2),"%y":z=>(z.Ab+1900).toString().substring(2),"%Y":z=>z.Ab+1900,"%z":z=>{z=z.ic;var we=0<=z;return z=Math.abs(z)/60,(we?"+":"-")+("0000"+(z/60*100+z%60)).slice(-4)},"%Z":z=>z.lc,"%%":()=>"%"},f=f.replace(/%%/g,"\\0\\0");for(ce in J)f.includes(ce)&&(f=f.replace(new RegExp(ce,"g"),J[ce](b)));return f=f.replace(/\\0\\0/g,"%"),ce=Qd(f),ce.length>l?0:(Jd(ce,n),ce.length-1)}ge.Gb();for(var mi=Array(256),cn=0;256>cn;++cn)mi[cn]=String.fromCharCode(cn);on=mi,wt=d.BindingError=class extends Error{constructor(n){super(n),this.name="BindingError"}},d.InternalError=class extends Error{constructor(n){super(n),this.name="InternalError"}},lt.push(0,1,void 0,1,null,1,!0,1,!1,1),d.count_emval_handles=()=>lt.length/2-5-fr.length;var el=[dr,jr,Yr,Xr,Qr,Zt,kr,Or,Jr,pr,en,tn,rn,nn,Rr,Xt,ei,ti,oi,ii,ai,si,ui,di],tl={ua:function(n,l,f){return te(async()=>{await d.Zb(n,l,f)})},b:function(n,l,f){throw n>>>=0,new qn(n).Gb(l>>>0,f>>>0),Kr=n,jn++,Kr},ia:function(n){hi(n>>>0,!E,1,!x,131072,!1),ge.Pb()},G:function(n){n>>>=0,O?postMessage({cmd:"cleanupThread",thread:n}):ge.Nb(ge.ub[n])},_:Zr,A:Xr,pa:Qr,W:Zt,Y:kr,qa:Or,na:Jr,fa:pr,ma:en,K:tn,X:rn,U:nn,oa:Rr,V:Xt,E:function(n,l,f){n>>>=0,f>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:b=>b,toWireType:function(b,C){if(typeof C!="bigint"&&typeof C!="number")throw C===null?C="null":(b=typeof C,C=b==="object"||b==="array"||b==="function"?C.toString():""+C),new TypeError(`Cannot convert "${C}" to ${this.name}`);return typeof C=="number"&&(C=BigInt(C)),C},argPackAdvance:8,readValueFromPointer:Dr(l,f,l.indexOf("u")==-1),Bb:null})},O:function(n,l,f,b){n>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:function(C){return!!C},toWireType:function(C,k){return k?f:b},argPackAdvance:8,readValueFromPointer:function(C){return this.fromWireType(o()[C>>>0])},Bb:null})},N:function(n){return Je(n>>>0,Zn)},D:function(n,l,f){n>>>=0,f>>>=0,l=nt(l>>>0),Je(n,{name:l,fromWireType:b=>b,toWireType:(b,C)=>C,argPackAdvance:8,readValueFromPointer:an(l,f),Bb:null})},t:function(n,l,f,b,C){if(n>>>=0,f>>>=0,l=nt(l>>>0),C===-1&&(C=4294967295),C=F=>F,b===0){var k=32-8*f;C=F=>F<<k>>>k}var V=l.includes("unsigned")?function(F,re){return re>>>0}:function(F,re){return re};Je(n,{name:l,fromWireType:C,toWireType:V,argPackAdvance:8,readValueFromPointer:Dr(l,f,b!==0),Bb:null})},p:function(n,l,f){function b(k){var V=c()[k>>>2>>>0];return k=c()[k+4>>>2>>>0],new C(r().buffer,k,V)}n>>>=0;var C=[Int8Array,Uint8Array,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array,BigInt64Array,BigUint64Array][l];f=nt(f>>>0),Je(n,{name:f,fromWireType:b,argPackAdvance:8,readValueFromPointer:b},{Ub:!0})},F:function(n,l){n>>>=0,l=nt(l>>>0);var f=l==="std::string";Je(n,{name:l,fromWireType:function(b){var C=c()[b>>>2>>>0],k=b+4;if(f)for(var V=k,F=0;F<=C;++F){var re=k+F;if(F==C||o()[re>>>0]==0){if(V=He(V,re-V),J===void 0)var J=V;else J+=String.fromCharCode(0),J+=V;V=re+1}}else{for(J=Array(C),F=0;F<C;++F)J[F]=String.fromCharCode(o()[k+F>>>0]);J=J.join("")}return At(b),J},toWireType:function(b,C){C instanceof ArrayBuffer&&(C=new Uint8Array(C));var k=typeof C=="string";if(!(k||C instanceof Uint8Array||C instanceof Uint8ClampedArray||C instanceof Int8Array))throw new wt("Cannot pass non-string to std::string");var V=f&&k?gt(C):C.length,F=mn(4+V+1),re=F+4;if(c()[F>>>2>>>0]=V,f&&k)Bt(C,re,V+1);else if(k)for(k=0;k<V;++k){var J=C.charCodeAt(k);if(255<J)throw At(re),new wt("String has UTF-16 code units that do not fit in 8 bits");o()[re+k>>>0]=J}else for(k=0;k<V;++k)o()[re+k>>>0]=C[k];return b!==null&&b.push(At,F),F},argPackAdvance:8,readValueFromPointer:Qt,Bb(b){At(b)}})},z:function(n,l,f){if(n>>>=0,l>>>=0,f>>>=0,f=nt(f),l===2)var b=Xn,C=sn,k=un,V=F=>u()[F>>>1>>>0];else l===4&&(b=gr,C=Qn,k=pe,V=F=>c()[F>>>2>>>0]);Je(n,{name:f,fromWireType:F=>{for(var re=c()[F>>>2>>>0],J,ce=F+4,Re=0;Re<=re;++Re){var ze=F+4+Re*l;(Re==re||V(ze)==0)&&(ce=b(ce,ze-ce),J===void 0?J=ce:(J+=String.fromCharCode(0),J+=ce),ce=ze+l)}return At(F),J},toWireType:(F,re)=>{if(typeof re!="string")throw new wt(`Cannot pass non-string to C++ string type ${f}`);var J=k(re),ce=mn(4+J+l);return c()[ce>>>2>>>0]=J/l,C(re,ce+4,J+l),F!==null&&F.push(At,ce),ce},argPackAdvance:8,readValueFromPointer:Qt,Bb(F){At(F)}})},P:function(n,l){n>>>=0,l=nt(l>>>0),Je(n,{Vb:!0,name:l,argPackAdvance:0,fromWireType:()=>{},toWireType:()=>{}})},ta:()=>1,S:function(n,l){n>>>=0,n==l>>>0?setTimeout(rt):O?postMessage({targetThread:n,cmd:"checkMailbox"}):(n=ge.ub[n])&&n.postMessage({cmd:"checkMailbox"})},$:function(n,l,f,b,C){l>>>=0,f>>>=0,b/=2,yr.length=b,C=C>>>0>>>3;for(var k=0;k<b;k++)yr[k]=Be[C+2*k]?Be[C+2*k+1]:h()[C+2*k+1>>>0];return n=l?Ir[l]:el[n],ge.Sb=f,f=n(...yr),ge.Sb=0,f},ha:Nt,sa:function(n){P&&ge.ub[n>>>0].ref()},w:function(n,l,f){return l>>>=0,f>>>=0,n=Qe(n>>>0),l=br(l,"emval::as"),Ur(l,f,n)},y:function(n){return n>>>=0,te(()=>(n=Qe(n),n.then(ot)))},o:function(n,l,f,b){return f>>>=0,b>>>=0,n=X[n>>>0],l=Qe(l>>>0),n(null,l,f,b)},k:function(n,l,f,b,C){return f>>>=0,b>>>=0,C>>>=0,n=X[n>>>0],l=Qe(l>>>0),f=Ee(f),n(l,l[f],b,C)},c:hr,C:function(n,l){return l>>>=0,n=Qe(n>>>0),l=Qe(l),n==l},n:function(n){return n>>>=0,n===0?ot(Oe()):(n=Ee(n),ot(Oe()[n]))},j:function(n,l,f){l=be(n,l>>>0);var b=l.shift();n--;var C=`return function (obj, func, destructorsRef, args) {\n`,k=0,V=[];f===0&&V.push("obj");for(var F=["retType"],re=[b],J=0;J<n;++J)V.push("arg"+J),F.push("argType"+J),re.push(l[J]),C+=`  var arg${J} = argType${J}.readValueFromPointer(args${k?"+"+k:""});\n`,k+=l[J].argPackAdvance;return C+=`  var rv = ${f===1?"new func":"func.call"}(${V.join(", ")});\n`,b.Vb||(F.push("emval_returnValue"),re.push(Ur),C+=`  return emval_returnValue(retType, destructorsRef, rv);\n`),F.push(C+`};\n`),n=zt(F)(...re),f=`methodCaller<(${l.map(ce=>ce.name).join(", ")}) => ${b.name}>`,D(Ie(f,n))},s:function(n,l){return l>>>=0,n=Qe(n>>>0),l=Qe(l),ot(n[l])},d:function(n){n>>>=0,9<n&&(lt[n+1]+=1)},v:function(){return ot([])},m:function(n){n=Qe(n>>>0);for(var l=Array(n.length),f=0;f<n.length;f++)l[f]=n[f];return ot(l)},g:function(n){return ot(Ee(n>>>0))},l:function(){return ot({})},i:function(n){n>>>=0;for(var l=Qe(n);l.length;){var f=l.pop();l.pop()(f)}hr(n)},h:function(n,l,f){l>>>=0,f>>>=0,n=Qe(n>>>0),l=Qe(l),f=Qe(f),n[l]=f},e:function(n,l){return l>>>=0,n=br(n>>>0,"_emval_take_value"),n=n.readValueFromPointer(l),ot(n)},ca:function(n,l){n=-9007199254740992>n||9007199254740992<n?NaN:Number(n),l>>>=0,n=new Date(1e3*n),a()[l>>>2>>>0]=n.getUTCSeconds(),a()[l+4>>>2>>>0]=n.getUTCMinutes(),a()[l+8>>>2>>>0]=n.getUTCHours(),a()[l+12>>>2>>>0]=n.getUTCDate(),a()[l+16>>>2>>>0]=n.getUTCMonth(),a()[l+20>>>2>>>0]=n.getUTCFullYear()-1900,a()[l+24>>>2>>>0]=n.getUTCDay(),n=(n.getTime()-Date.UTC(n.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,a()[l+28>>>2>>>0]=n},da:function(n,l){n=-9007199254740992>n||9007199254740992<n?NaN:Number(n),l>>>=0,n=new Date(1e3*n),a()[l>>>2>>>0]=n.getSeconds(),a()[l+4>>>2>>>0]=n.getMinutes(),a()[l+8>>>2>>>0]=n.getHours(),a()[l+12>>>2>>>0]=n.getDate(),a()[l+16>>>2>>>0]=n.getMonth(),a()[l+20>>>2>>>0]=n.getFullYear()-1900,a()[l+24>>>2>>>0]=n.getDay();var f=(Mt(n.getFullYear())?Qo:Jo)[n.getMonth()]+n.getDate()-1|0;a()[l+28>>>2>>>0]=f,a()[l+36>>>2>>>0]=-(60*n.getTimezoneOffset()),f=new Date(n.getFullYear(),6,1).getTimezoneOffset();var b=new Date(n.getFullYear(),0,1).getTimezoneOffset();n=(f!=b&&n.getTimezoneOffset()==Math.min(b,f))|0,a()[l+32>>>2>>>0]=n},ea:function(n){n>>>=0;var l=new Date(a()[n+20>>>2>>>0]+1900,a()[n+16>>>2>>>0],a()[n+12>>>2>>>0],a()[n+8>>>2>>>0],a()[n+4>>>2>>>0],a()[n>>>2>>>0],0),f=a()[n+32>>>2>>>0],b=l.getTimezoneOffset(),C=new Date(l.getFullYear(),6,1).getTimezoneOffset(),k=new Date(l.getFullYear(),0,1).getTimezoneOffset(),V=Math.min(k,C);return 0>f?a()[n+32>>>2>>>0]=+(C!=k&&V==b):0<f!=(V==b)&&(C=Math.max(k,C),l.setTime(l.getTime()+6e4*((0<f?V:C)-b))),a()[n+24>>>2>>>0]=l.getDay(),f=(Mt(l.getFullYear())?Qo:Jo)[l.getMonth()]+l.getDate()-1|0,a()[n+28>>>2>>>0]=f,a()[n>>>2>>>0]=l.getSeconds(),a()[n+4>>>2>>>0]=l.getMinutes(),a()[n+8>>>2>>>0]=l.getHours(),a()[n+12>>>2>>>0]=l.getDate(),a()[n+16>>>2>>>0]=l.getMonth(),a()[n+20>>>2>>>0]=l.getYear(),n=l.getTime(),BigInt(isNaN(n)?-1:n/1e3)},aa:ei,ba:ti,R:function(n,l,f,b){n>>>=0,l>>>=0,f>>>=0,b>>>=0;var C=new Date().getFullYear(),k=new Date(C,0,1),V=new Date(C,6,1);C=k.getTimezoneOffset();var F=V.getTimezoneOffset(),re=Math.max(C,F);c()[n>>>2>>>0]=60*re,a()[l>>>2>>>0]=+(C!=F),n=J=>J.toLocaleTimeString(void 0,{hour12:!1,timeZoneName:"short"}).split(" ")[1],k=n(k),V=n(V),F<C?(Bt(k,f,17),Bt(V,b,17)):(Bt(k,b,17),Bt(V,f,17))},q:()=>{Kt("")},f:function(n,l,f){return n>>>=0,l=ri(l>>>0,f>>>0),Ir[n](...l)},M:function(n,l,f){return n>>>=0,l=ri(l>>>0,f>>>0),Ir[n](...l)},H:()=>{},L:()=>Date.now(),ra:()=>{throw bt+=1,"unwind"},T:function(){return 4294901760},u:()=>performance.timeOrigin+performance.now(),x:()=>P?(Ri(),wr(Oi)).cpus().length:navigator.hardwareConcurrency,Q:function(n){n>>>=0;var l=o().length;if(n<=l||4294901760<n)return!1;for(var f=1;4>=f;f*=2){var b=l*(1+.2/f);b=Math.min(b,n+100663296);var C=Math;b=Math.max(n,b);e:{C=(C.min.call(C,4294901760,b+(65536-b%65536)%65536)-ae.buffer.byteLength+65535)/65536;try{ae.grow(C),Ne();var k=1;break e}catch{}k=void 0}if(k)return!0}return!1},ja:oi,la:ii,Z:Xe,B:ai,J:si,ga:ui,I:di,a:ae||d.wasmMemory,ka:pi,r:function(n,l,f,b){return pi(n>>>0,l>>>0,f>>>0,b>>>0)}},oe=function(){function n(f,b){return oe=f.exports,oe=dn(),oe=rl(),ge.Qb.push(oe.cb),Rt.unshift(oe.va),Ae=b,xr(),oe}var l={a:tl};if(Vt++,d.instantiateWasm)try{return d.instantiateWasm(l,n)}catch(f){ee(`Module.instantiateWasm callback failed with error: ${f}`),w(f)}return Ar(l,function(f){n(f.instance,f.module)}).catch(w),{}}(),fi=n=>(fi=oe.wa)(n);d.__embind_initialize_bindings=()=>(d.__embind_initialize_bindings=oe.xa)(),d._OrtInit=(n,l)=>(d._OrtInit=oe.ya)(n,l),d._OrtGetLastError=(n,l)=>(d._OrtGetLastError=oe.za)(n,l),d._OrtCreateSessionOptions=(n,l,f,b,C,k,V,F,re,J)=>(d._OrtCreateSessionOptions=oe.Aa)(n,l,f,b,C,k,V,F,re,J),d._OrtAppendExecutionProvider=(n,l)=>(d._OrtAppendExecutionProvider=oe.Ba)(n,l),d._OrtAddFreeDimensionOverride=(n,l,f)=>(d._OrtAddFreeDimensionOverride=oe.Ca)(n,l,f),d._OrtAddSessionConfigEntry=(n,l,f)=>(d._OrtAddSessionConfigEntry=oe.Da)(n,l,f),d._OrtReleaseSessionOptions=n=>(d._OrtReleaseSessionOptions=oe.Ea)(n),d._OrtCreateSession=(n,l,f)=>(d._OrtCreateSession=oe.Fa)(n,l,f),d._OrtReleaseSession=n=>(d._OrtReleaseSession=oe.Ga)(n),d._OrtGetInputOutputCount=(n,l,f)=>(d._OrtGetInputOutputCount=oe.Ha)(n,l,f),d._OrtGetInputName=(n,l)=>(d._OrtGetInputName=oe.Ia)(n,l),d._OrtGetOutputName=(n,l)=>(d._OrtGetOutputName=oe.Ja)(n,l),d._OrtFree=n=>(d._OrtFree=oe.Ka)(n),d._OrtCreateTensor=(n,l,f,b,C,k)=>(d._OrtCreateTensor=oe.La)(n,l,f,b,C,k),d._OrtGetTensorData=(n,l,f,b,C)=>(d._OrtGetTensorData=oe.Ma)(n,l,f,b,C),d._OrtReleaseTensor=n=>(d._OrtReleaseTensor=oe.Na)(n),d._OrtCreateRunOptions=(n,l,f,b)=>(d._OrtCreateRunOptions=oe.Oa)(n,l,f,b),d._OrtAddRunConfigEntry=(n,l,f)=>(d._OrtAddRunConfigEntry=oe.Pa)(n,l,f),d._OrtReleaseRunOptions=n=>(d._OrtReleaseRunOptions=oe.Qa)(n),d._OrtCreateBinding=n=>(d._OrtCreateBinding=oe.Ra)(n),d._OrtBindInput=(n,l,f)=>(d._OrtBindInput=oe.Sa)(n,l,f),d._OrtBindOutput=(n,l,f,b)=>(d._OrtBindOutput=oe.Ta)(n,l,f,b),d._OrtClearBoundOutputs=n=>(d._OrtClearBoundOutputs=oe.Ua)(n),d._OrtReleaseBinding=n=>(d._OrtReleaseBinding=oe.Va)(n),d._OrtRunWithBinding=(n,l,f,b,C)=>(d._OrtRunWithBinding=oe.Wa)(n,l,f,b,C),d._OrtRun=(n,l,f,b,C,k,V,F)=>(d._OrtRun=oe.Xa)(n,l,f,b,C,k,V,F),d._OrtEndProfiling=n=>(d._OrtEndProfiling=oe.Ya)(n),d._JsepOutput=(n,l,f)=>(d._JsepOutput=oe.Za)(n,l,f),d._JsepGetNodeName=n=>(d._JsepGetNodeName=oe._a)(n);var pn=d._pthread_self=()=>(pn=d._pthread_self=oe.$a)(),mn=d._malloc=n=>(mn=d._malloc=oe.ab)(n),At=d._free=n=>(At=d._free=oe.bb)(n);d.__emscripten_tls_init=()=>(d.__emscripten_tls_init=oe.cb)();var hi=d.__emscripten_thread_init=(n,l,f,b,C,k)=>(hi=d.__emscripten_thread_init=oe.eb)(n,l,f,b,C,k);d.__emscripten_thread_crashed=()=>(d.__emscripten_thread_crashed=oe.fb)();var gi=(n,l,f,b,C)=>(gi=oe.gb)(n,l,f,b,C),ro=n=>(ro=oe.hb)(n),no=d.__emscripten_thread_exit=n=>(no=d.__emscripten_thread_exit=oe.ib)(n),yi=()=>(yi=oe.jb)(),bi=(n,l)=>(bi=oe.kb)(n,l),fn=n=>(fn=oe.lb)(n),oo=n=>(oo=oe.mb)(n),io=()=>(io=oe.nb)(),wi=d.dynCall_ii=(n,l)=>(wi=d.dynCall_ii=oe.pb)(n,l),vi=n=>(vi=oe.qb)(n),$i=()=>($i=oe.rb)(),_i=n=>(_i=oe.sb)(n),Si=()=>(Si=oe.tb)();d.___start_em_js=839500,d.___stop_em_js=839661;function rl(){var n=oe;n=Object.assign({},n);var l=b=>C=>b(C)>>>0,f=b=>()=>b()>>>0;return n.wa=l(n.wa),n.$a=f(n.$a),n.ab=l(n.ab),n.emscripten_main_runtime_thread_id=f(n.emscripten_main_runtime_thread_id),n.mb=l(n.mb),n.nb=f(n.nb),n}d.wasmMemory=ae,d.stackSave=()=>io(),d.stackRestore=n=>fn(n),d.stackAlloc=n=>oo(n),d.keepRuntimeAlive=()=>0<bt,d.UTF8ToString=He,d.stringToUTF8=Bt,d.lengthBytesUTF8=gt,d.ExitStatus=st,d.PThread=ge;var hn;jt=function n(){hn||xi(),hn||(jt=n)};function xi(){if(!(0<Vt))if(O)y(d),O||Yt(Rt),startWorker(d);else{if(d.preRun)for(typeof d.preRun=="function"&&(d.preRun=[d.preRun]);d.preRun.length;)mt.unshift(d.preRun.shift());Yt(mt),0<Vt||hn||(hn=!0,d.calledRun=!0,me||(O||Yt(Rt),y(d),O||Yt(qt)))}}return xi(),_}})();typeof Di=="object"&&typeof mo=="object"?mo.exports=Bi:typeof define=="function"&&define.amd&&define([],()=>Bi)});var Mi=Wr((gm,cl)=>{cl.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(...e){var a=e.join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,a+`\\n`);return}console.error(a)}function threadAlert(...e){var a=e.join(" ");postMessage({cmd:"alert",text:a,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,a)=>{var r=Module.wasmModule;Module.wasmModule=null;var t=new WebAssembly.Instance(r,e);return a(t)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let r=[];self.onmessage=t=>r.push(t),self.startWorker=t=>{Module=t,postMessage({cmd:"loaded"});for(let s of r)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const t of e.data.handlers)Module[t]=(...s)=>{postMessage({cmd:"callHandler",handler:t,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var a=URL.createObjectURL(e.data.urlOrBlob);importScripts(a),URL.revokeObjectURL(a)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(r){if(r!="unwind")throw r}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(r){throw Module.__emscripten_thread_crashed?.(),r}}self.onmessage=handleMessage;\\n\'});var go,Gt,tr,bn,Gr,Hi,yo,ye=Y(()=>{"use strict";go=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},Gt=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},tr=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],bn=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},Gr=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},Hi=e=>e==="float32"||e==="float16"||e==="int32"||e==="int64"||e==="uint32"||e==="uint8"||e==="bool",yo=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e}`)}}});var wn=Y(()=>{"use strict"});var Fi=Y(()=>{"use strict";wn()});var qi,ji=Y(()=>{"use strict";qi="1.18.0"});var Ki,pt,bo=Y(()=>{"use strict";ji();Ki="warning",pt={wasm:{},webgl:{},webgpu:{},versions:{common:qi},set logLevel(e){if(e!==void 0){if(typeof e!="string"||["verbose","info","warning","error","fatal"].indexOf(e)===-1)throw new Error(`Unsupported logging level: ${e}`);Ki=e}},get logLevel(){return Ki}};Object.defineProperty(pt,"logLevel",{enumerable:!0})});var vr,Yi=Y(()=>{"use strict";bo();vr=pt});var Zi=Y(()=>{"use strict"});var Xi=Y(()=>{"use strict";vn()});var Ji=Y(()=>{"use strict"});var ea=Y(()=>{"use strict";vn()});var vn=Y(()=>{"use strict";Zi();Xi();Ji();ea()});var $n=Y(()=>{"use strict";vn()});var wo,ta,rr,Ht,vo=Y(()=>{"use strict";bo();wo=(e,t)=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||console.timeStamp(`${e}::ORT::${t}`)},ta=(e,t)=>{let r=new Error().stack?.split(/\\r\\n|\\r|\\n/g)||[],o=!1;for(let i=0;i<r.length;i++){if(o&&!r[i].includes("TRACE_FUNC")){let u=`FUNC_${e}::${r[i].trim().split(" ")[1]}`;t&&(u+=`::${t}`),wo("CPU",u);return}r[i].includes("TRACE_FUNC")&&(o=!0)}},rr=e=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||ta("BEGIN",e)},Ht=e=>{(typeof pt.trace>"u"?!pt.wasm.trace:!pt.trace)||ta("END",e)}});var ra=Y(()=>{"use strict";wn();$n();vo()});var na=Y(()=>{"use strict";ra()});var oa=Y(()=>{"use strict"});var ia=Y(()=>{"use strict"});var aa=Y(()=>{"use strict"});var sa=Y(()=>{"use strict"});var ua=Y(()=>{"use strict";wn();$n()});var da=Y(()=>{"use strict";ua()});var $r=Y(()=>{"use strict";Fi();Yi();na();$n();oa();ia();vo();aa();sa();da()});var _l,Sl,la,ca,pa,xl,Ve,Lt=Y(()=>{"use strict";ye();_l=["V","I","W","E","F"],Sl=(e,t)=>{console.log(`[${_l[e]},${new Date().toISOString()}]${t}`)},pa=(e,t)=>{la=e,ca=t},xl=(e,t)=>{let r=Gr(e),o=Gr(la);r>=o&&Sl(r,typeof t=="function"?t():t)},Ve=(...e)=>{ca&&xl(...e)}});var ma,fa=Y(()=>{"use strict";ye();ma=(e,t)=>new(bn(t))(e)});var _n=Y(()=>{"use strict"});var ha,$o,_o,Cl,Al,ga,xo,So,ba,wa=Y(()=>{"use strict";Lt();_n();ha=new Map([[64,250],[128,200],[256,200],[512,200],[2048,230],[4096,200],[8192,50],[16384,50],[32768,50],[65536,50],[131072,50],[262144,50],[524288,50],[1048576,50],[2097152,30],[4194304,20],[8388608,10],[12582912,10],[16777216,10],[26214400,15],[33554432,22],[44236800,2],[58982400,6],[67108864,6],[134217728,6],[167772160,6]]),$o=[],_o=e=>Math.ceil(e/16)*16,Cl=e=>{for(let t=0;t<$o.length;t++){let r=$o[t];if(e<=r)return r}return Math.ceil(e/16)*16},Al=1,ga=()=>Al++,xo=async(e,t,r,o)=>{let i=_o(r),u=e.device.createBuffer({size:i,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});try{let a=e.getCommandEncoder();e.endComputePass(),a.copyBufferToBuffer(t,0,u,0,i),e.flush(),await u.mapAsync(GPUMapMode.READ);let c=u.getMappedRange();if(o){let p=o();return p.set(new Uint8Array(c,0,r)),p}else return new Uint8Array(c.slice(0,r))}finally{u.destroy()}},So=class{constructor(t){this.backend=t;this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.buffersForUploadingPending=[],this.buffersPending=[],this.externalBuffers=new Map,this.capturedPendingBuffers=new Map;for(let[r]of ha)$o.push(r),this.freeBuffers.set(r,[]),this.freeUniformBuffers.set(r,[])}upload(t,r){let o=r.buffer,i=r.byteOffset,u=r.byteLength,a=_o(u),c=this.storageCache.get(t);if(!c)throw new Error("gpu data for uploading does not exist");if(c.originalSize!==u)throw new Error(`inconsistent data size. gpu data size=${c.originalSize}, data size=${u}`);let p=this.backend.device.createBuffer({mappedAtCreation:!0,size:a,usage:GPUBufferUsage.MAP_WRITE|GPUBufferUsage.COPY_SRC}),h=p.getMappedRange();new Uint8Array(h).set(new Uint8Array(o,i,u)),p.unmap();let d=this.backend.getCommandEncoder();this.backend.endComputePass(),d.copyBufferToBuffer(p,0,c.gpuData.buffer,0,a),Ve("verbose",()=>`[WebGPU] GpuDataManager.upload(id=${t})`),this.buffersForUploadingPending.push(p)}memcpy(t,r){let o=this.storageCache.get(t);if(!o)throw new Error("source gpu data for memcpy does not exist");let i=this.storageCache.get(r);if(!i)throw new Error("destination gpu data for memcpy does not exist");if(o.originalSize!==i.originalSize)throw new Error("inconsistent source and destination gpu data size");let u=_o(o.originalSize),a=this.backend.getCommandEncoder();this.backend.endComputePass(),a.copyBufferToBuffer(o.gpuData.buffer,0,i.gpuData.buffer,0,u)}registerExternalBuffer(t,r,o){let i;if(o){if(i=this.externalBuffers.get(o),i===void 0)throw new Error("previous buffer is not registered");if(t===o)return Ve("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${r}) => id=${i}, buffer is the same, skip.`),i;if(this.backend.capturedCommandList.has(this.backend.currentSessionId))throw new Error(`Registering a different external buffer under graph capture mode is not supported yet.\n             Please use the previous external buffer!`);this.externalBuffers.delete(o)}else i=ga();return this.storageCache.set(i,{gpuData:{id:i,type:0,buffer:t},originalSize:r}),this.externalBuffers.set(t,i),Ve("verbose",()=>`[WebGPU] GpuDataManager.registerExternalBuffer(size=${r}) => id=${i}, registered.`),i}unregisterExternalBuffer(t){let r=this.externalBuffers.get(t);r!==void 0&&(this.storageCache.delete(r),this.externalBuffers.delete(t),Ve("verbose",()=>`[WebGPU] GpuDataManager.unregisterExternalBuffer() => id=${r}`))}create(t,r=GPUBufferUsage.STORAGE|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST){let o=Cl(t),i,u=(r&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE,a=(r&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM;if(u||a){let h=(u?this.freeBuffers:this.freeUniformBuffers).get(o);h?h.length>0?i=h.pop():i=this.backend.device.createBuffer({size:o,usage:r}):i=this.backend.device.createBuffer({size:o,usage:r})}else i=this.backend.device.createBuffer({size:o,usage:r});let c={id:ga(),type:0,buffer:i};return this.storageCache.set(c.id,{gpuData:c,originalSize:t}),Ve("verbose",()=>`[WebGPU] GpuDataManager.create(size=${t}) => id=${c.id}`),c}get(t){return this.storageCache.get(t)?.gpuData}release(t){let r=this.storageCache.get(t);if(!r)throw new Error("releasing data does not exist");return Ve("verbose",()=>`[WebGPU] GpuDataManager.release(id=${t}), gpuDataId=${r.gpuData.id}`),this.storageCache.delete(t),this.buffersPending.push(r.gpuData.buffer),r.originalSize}async download(t,r){let o=this.storageCache.get(t);if(!o)throw new Error("data does not exist");await xo(this.backend,o.gpuData.buffer,o.originalSize,r)}refreshPendingBuffers(){for(let t of this.buffersForUploadingPending)t.destroy();if(this.buffersForUploadingPending=[],this.buffersPending.length!==0)if(this.backend.sessionStatus==="default"){for(let t of this.buffersPending){let r=ha.get(t.size);if((t.usage&GPUBufferUsage.STORAGE)===GPUBufferUsage.STORAGE){let o=this.freeBuffers.get(t.size)||[];r===void 0||o.length>=r?t.destroy():o.push(t)}else if((t.usage&GPUBufferUsage.UNIFORM)===GPUBufferUsage.UNIFORM){let o=this.freeUniformBuffers.get(t.size)||[];r===void 0||o.length>=r?t.destroy():o.push(t)}else t.destroy()}this.buffersPending=[]}else{let t=this.capturedPendingBuffers.get(this.backend.currentSessionId);t||(t=[],this.capturedPendingBuffers.set(this.backend.currentSessionId,t));for(let r of this.buffersPending)t.push(r);this.buffersPending=[]}}dispose(){this.freeBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.freeUniformBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.storageCache.forEach(t=>{t.gpuData.buffer.destroy()}),this.capturedPendingBuffers.forEach(t=>{t.forEach(r=>{r.destroy()})}),this.storageCache=new Map,this.freeBuffers=new Map,this.freeUniformBuffers=new Map,this.capturedPendingBuffers=new Map}onReleaseSession(t){let r=this.capturedPendingBuffers.get(t);r&&(r.forEach(o=>{o.destroy()}),this.capturedPendingBuffers.delete(t))}},ba=(...e)=>new So(...e)});var Co,ve,Ze=Y(()=>{"use strict";Co=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},ve=e=>new Co(e)});var Ao,It,M,nr,Sn,xn,Cn,Se=Y(()=>{"use strict";Ao=class{static calcMatMulShape(t,r){return t[1]!==r[0]?void 0:[t[0],r[1]]}},It=class{static calcShape(t,r,o=!1){let i=t.length,u=r.length;if(i===0)return r;if(u===0)return t;let a=Math.max(t.length,r.length),c=new Array(a);if(o){if(i<2||u<2)return;let p=Ao.calcMatMulShape([t[i-2],t[i-1]],[r[u-2],r[u-1]]);if(p===void 0)return;[c[a-2],c[a-1]]=p}for(let p=o?3:1;p<=a;p++){let h=i-p<0?1:t[i-p],d=u-p<0?1:r[u-p];if(h!==d&&h>1&&d>1)return;let y=Math.max(h,d);if(h&&d)c[a-p]=Math.max(h,d);else{if(y>1)return;c[a-p]=0}}return c}static isValidBroadcast(t,r){let o=t.length,i=r.length;if(o>i)return!1;for(let u=1;u<=o;u++)if(t[o-u]!==1&&t[o-u]!==r[i-u])return!1;return!0}},M=class e{static size(t){return e.getSizeFromDimensionRange(t,0,t.length)}static convertShape(t,r=4){let o=t.length;if(o===0)return[];let i=new Array(o),u=o-1;for(;u>=0;){if(t[u]%r===0){i[u]=t[u]/r;break}if(r%t[u]!==0)throw new Error("cannot convert shape");i[u]=1,r/=t[u],u--}for(u--;u>=0;u--)i[u]=t[u];return i}static sizeFromDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,r,t.length)}static sizeToDimension(t,r){if(r<0||r>t.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${t.length} dimensions.`);return e.getSizeFromDimensionRange(t,0,r)}static getSizeFromDimensionRange(t,r,o){let i=1;for(let u=r;u<o;u++){if(t[u]<0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains negative values in them.");i*=t[u]}return i}static computeStrides(t){let r=t.length;if(r===0)return[];if(r===1)return[1];let o=new Array(r);o[r-1]=1,o[r-2]=t[r-1];for(let i=r-3;i>=0;--i)o[i]=o[i+1]*t[i+1];return o}static normalizeAxis(t,r){if(t<-r&&t>=r)throw new Error("unsupported axis for this operation.");return t<0?t+r:t}static normalizeAxes(t,r){return t.map(o=>this.normalizeAxis(o,r??t.length))}static sortBasedOnPerm(t,r){return r?r.map(o=>t[o]):t.slice().reverse()}static padShape(t,r){let o=t.length;return t.map((i,u)=>i+r[u]+r[u+o])}static areEqual(t,r){return t.length!==r.length?!1:t.every((o,i)=>o===r[i])}},nr=class e{static adjustPoolAttributes(t,r,o,i,u,a){if(!t&&o.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(t)for(let c=0;c<r.length-2;c++)c>=o.length?o.push(r[c+2]):o[c]=r[c+2];for(let c=0;c<o.length;c++)if(c<i.length){if(i[c]<0)throw new Error("strides should be greater than or equal to 1")}else i.push(1);for(let c=0;c<o.length;c++)if(c<u.length){if(u[c]<0)throw new Error("dilations should be greater than or equal to 1")}else u.push(1);for(let c=0;c<o.length*2;c++)if(c<a.length){if(a[c]<0)throw new Error("pad should be greater than or equal to 1")}else a.push(0);for(let c=0;c<o.length;c++){if(o[c]<=0)throw new Error("kernel shapes need to be greater than 0");if(a[c]>=o[c]||a[c+o.length]>=o[c])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(t,r,o,i,u,a,c){if(c){if(u.length!==2*(t.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==t.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==t.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let p=0;p<t.length-2;p++)e.adjustPadAndReturnShape(t[p+(a?1:2)],r[p],o[p],i[p],u,p,p+t.length-2,c)}}static computePoolOutputShape(t,r,o,i,u,a,c){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let p=[r[0],r[1]];return e.computeShapeHelper(t,r,p,o,i,u,a,c),p}static computeConvOutputShape(t,r,o,i,u,a,c){if(t.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let p=[t[0],r[0]];return e.computeShapeHelper(!1,t,p,o,i,u,a,c),p}static computeShapeHelper(t,r,o,i,u,a,c,p){if(t)for(let h=0;h<r.length-2;h++)o.push(1);else for(let h=0;h<r.length-2;h++)o.push(e.adjustPadAndReturnShape(r[h+2],i[h],u[h],a[h],c,h,h+r.length-2,p))}static adjustPadAndReturnShape(t,r,o,i,u,a,c,p){let h=o*(i-1)+1;if(p&&p!=="NOTSET")switch(p){case"VALID":return u[a]=0,u[c]=0,Math.floor((t-h)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(o!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let y=((t+r-1)/r-1)*r+i-t;return u[a]=Math.floor(p==="SAME_LOWER"?(y+1)/2:y/2),u[c]=y-u[a],Math.floor((t+y-i)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((t+u[a]+u[c]-h)/r+1)}},Sn=class{static getShapeOfGemmResult(t,r,o,i,u){if(t.length!==2||o.length!==2)throw new Error("shape need to be of size 2");let a,c,p;r?(a=t[1],c=t[0]):(a=t[0],c=t[1]);let h=-1;if(i?(p=o[0],h=1):(p=o[1],h=0),o[h]!==c)throw new Error("dimension mismatch");if(a<=0||p<=0||c<=0)throw new Error("invalid shape specified");if(u&&!It.isValidBroadcast(u,[a,p]))throw new Error("gemm: invalid bias shape for broadcast");return[a,p,c]}},xn=-34028234663852886e22,Cn=34028234663852886e22});var or,To,De,et,Z,Me,$t,ir,_t,fe,Eo,U,j,An,Io,va,_r,_e=Y(()=>{"use strict";ye();Se();or=64,To=(e,t)=>{if(t===3)throw new Error("vec3 has same alignment as vec4, use vec4 instead");switch(e){case 10:return t>1?`vec${t}<f16>`:"f16";case 1:return t>1?`vec${t}<f32>`:"f32";case 6:return t>1?`vec${t}<i32>`:"i32";case 12:return t>1?`vec${t}<u32>`:"u32";case 7:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","i32"];case 13:if(t>1)throw new Error("currently not supported vecX of uint64 yet");return["vec2<u32>","u32"];case 9:if(t!==4)throw new Error("bool must be vec4");return["u32","vec4<bool>"];default:throw new Error(`Unknown data type: ${e}`)}},De=(e,t=1)=>{let r=To(e,t);return typeof r=="string"?r:r[0]},et=(e,t=1)=>{let r=To(e,t);return typeof r=="string"?r:r[1]},Z=(...e)=>{let t=[];return e.forEach(r=>{r.length!==0&&t.push({type:12,data:r},{type:12,data:M.computeStrides(r)})}),t},Me=e=>e%4===0?4:e%2===0?2:1,$t=(e="f32",t,r="0")=>!t||t===1?`${e}(${r})`:`vec${t}<${e}>(${r})`,ir=(e,t,r)=>e==="f32"?r:t===1?`f32(${r})`:`vec${t}<f32>(${r})`,_t=(e,t)=>t===4?`(${e}.x + ${e}.y + ${e}.z + ${e}.w)`:t===2?`(${e}.x + ${e}.y)`:t===3?`(${e}.x + ${e}.y + ${e}.z)`:e,fe=(e,t,r,o)=>e.startsWith("uniforms.")&&r>4?typeof t=="string"?o==="f16"?`${e}[(${t}) / 8][(${t}) % 8 / 4][(${t}) % 8 % 4]`:`${e}[(${t}) / 4][(${t}) % 4]`:o==="f16"?`${e}[${Math.floor(t/8)}][${Math.floor(t%8/4)}][${t%8%4}]`:`${e}[${Math.floor(t/4)}][${t%4}]`:r>1?`${e}[${t}]`:e,Eo=(e,t,r,o,i)=>{let u=typeof r=="number",a=u?r:r.length,c=[...new Array(a).keys()],p=a<2?"u32":a<=4?`vec${a}<u32>`:`array<u32, ${a}>`,h=To(t,i),d=typeof h=="string"?h:h[1],y=typeof h=="string"?h:h[0],w={indices:p,value:d,storage:y,tensor:t},_=G=>typeof G=="string"?G:`${G}u`,v={offsetToIndices:!1,indicesToOffset:!1,broadcastedIndicesToOffset:!1,set:!1,setByIndices:!1,get:!1,getByIndices:!1},S=u?"uniforms.":"",A=`${S}${e}_shape`,I=`${S}${e}_strides`,x="";for(let G=0;G<a-1;G++)x+=`\n    let dim${G} = current / ${fe(I,G,a)};\n    let rest${G} = current % ${fe(I,G,a)};\n    indices[${G}] = dim${G};\n    current = rest${G};\n    `;x+=`indices[${a-1}] = current;`;let E=a<2?"":`\n  fn o2i_${e}(offset: u32) -> ${w.indices} {\n    var indices: ${w.indices};\n    var current = offset;\n    ${x}\n    return indices;\n  }`,P=G=>(v.offsetToIndices=!0,a<2?G:`o2i_${e}(${G})`),O=[];if(a>=2)for(let G=a-1;G>=0;G--)O.push(`${fe(I,G,a)} * (indices[${G}])`);let R=a<2?"":`\n  fn i2o_${e}(indices: ${w.indices}) -> u32 {\n    return ${O.join("+")};\n  }`,L=G=>(v.indicesToOffset=!0,a<2?G:`i2o_${e}(${G})`),N=(...G)=>a===0?"0u":`${w.indices}(${G.map(_).join(",")})`,K=(G,ne)=>a<2?`${G}`:`${fe(G,ne,a)}`,Q=(G,ne,xe)=>a<2?`${G}=${xe};`:`${fe(G,ne,a)}=${xe};`,he={},W=(G,ne)=>{v.broadcastedIndicesToOffset=!0;let xe=`${ne.name}broadcastedIndicesTo${e}Offset`;if(xe in he)return`${xe}(${G})`;let Ke=[];for(let Be=a-1;Be>=0;Be--){let Ge=ne.indicesGet("outputIndices",Be+ne.rank-a);Ke.push(`${K(I,Be)} * (${Ge} % ${K(A,Be)})`)}return he[xe]=`fn ${xe}(outputIndices: ${ne.type.indices}) -> u32 {\n             return ${Ke.length>0?Ke.join("+"):"0u"};\n           }`,`${xe}(${G})`},se=(G,ne)=>(()=>{if(w.storage===w.value)return`${e}[${G}]=${ne};`;if(w.storage==="vec2<u32>"&&w.value==="i32")return`${e}[${G}]=vec2<u32>(u32(${ne}), select(0u, 0xFFFFFFFFu, ${ne} < 0));`;if(w.storage==="vec2<u32>"&&w.value==="u32")return`${e}[${G}]=vec2<u32>(u32(${ne}), 0u);`;if(w.storage==="u32"&&w.value==="vec4<bool>")return`${e}[${G}]=dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(${ne}));`;throw new Error(`not supported combination of storage type ${w.storage} and value type ${w.value} yet`)})(),Ce=G=>(()=>{if(w.storage===w.value)return`${e}[${G}]`;if(w.storage==="vec2<u32>"&&w.value==="i32")return`i32(${e}[${G}].x)`;if(w.storage==="vec2<u32>"&&w.value==="u32")return`u32(${e}[${G}].x)`;if(w.storage==="u32"&&w.value==="vec4<bool>")return`vec4<bool>(bool(${e}[${G}] & 0xFFu), bool(${e}[${G}] & 0xFF00u), bool(${e}[${G}] & 0xFF0000u), bool(${e}[${G}] & 0xFF000000u))`;throw new Error(`not supported combination of storage type ${w.storage} and value type ${w.value} yet`)})(),We=a<2?"":`\n  fn get_${e}ByIndices(indices: ${w.indices}) -> ${d} {\n    return ${Ce(`i2o_${e}(indices)`)};\n  }`,ee=a<2?"":(()=>{let G=c.map(xe=>`d${xe}: u32`).join(", "),ne=c.map(xe=>`d${xe}`).join(", ");return`\n  fn get_${e}(${G}) -> ${d} {\n    return get_${e}ByIndices(${N(ne)});\n  }`})(),ae=(...G)=>{if(G.length!==a)throw new Error(`indices length must be ${a}`);let ne=G.map(_).join(",");return a===0?Ce("0u"):a===1?Ce(ne[0]):(v.get=!0,v.getByIndices=!0,v.indicesToOffset=!0,`get_${e}(${ne})`)},Ae=G=>a<2?Ce(G):(v.getByIndices=!0,v.indicesToOffset=!0,`get_${e}ByIndices(${G})`),me=a<2?"":`\n  fn set_${e}ByIndices(indices: ${w.indices}, value: ${d}) {\n    ${se(`i2o_${e}(indices)`,"value")}\n  }`,ie=a<2?"":(()=>{let G=c.map(xe=>`d${xe}: u32`).join(", "),ne=c.map(xe=>`d${xe}`).join(", ");return`\n  fn set_${e}(${G}, value: ${d}) {\n    set_${e}ByIndices(${N(ne)}, value);\n  }`})();return{impl:()=>{let G=[],ne=!1;return v.offsetToIndices&&(G.push(E),ne=!0),v.indicesToOffset&&(G.push(R),ne=!0),v.broadcastedIndicesToOffset&&(Object.values(he).forEach(xe=>G.push(xe)),ne=!0),v.set&&(G.push(ie),ne=!0),v.setByIndices&&(G.push(me),ne=!0),v.get&&(G.push(ee),ne=!0),v.getByIndices&&(G.push(We),ne=!0),!u&&ne&&G.unshift(`const ${A} = ${w.indices}(${r.join(",")});`,`const ${I} = ${w.indices}(${M.computeStrides(r).join(",")});`),G.join(`\n`)},type:w,offsetToIndices:P,indicesToOffset:L,broadcastedIndicesToOffset:W,indices:N,indicesGet:K,indicesSet:Q,set:(...G)=>{if(G.length!==a+1)throw new Error(`indices length must be ${a}`);let ne=G[a];if(typeof ne!="string")throw new Error("value must be string");let xe=G.slice(0,a).map(_).join(",");return a===0?se("0u",ne):a===1?se(xe[0],ne):(v.set=!0,v.setByIndices=!0,v.indicesToOffset=!0,`set_${e}(${xe}, ${ne})`)},setByOffset:se,setByIndices:(G,ne)=>a<2?se(G,ne):(v.setByIndices=!0,v.indicesToOffset=!0,`set_${e}ByIndices(${G}, ${ne});`),get:ae,getByOffset:Ce,getByIndices:Ae,usage:o,name:e,strides:I,shape:A,rank:a}},U=(e,t,r,o=1)=>Eo(e,t,r,"input",o),j=(e,t,r,o=1)=>Eo(e,t,r,"output",o),An=(e,t,r,o=1)=>Eo(e,t,r,"internal",o),Io=class{constructor(t,r){this.normalizedDispatchGroup=t;this.limits=r;this.internalVariables=[];this.variables=[];this.uniforms=[];this.variableIndex=0}guardAgainstOutOfBoundsWorkgroupSizes(t){return`if (global_idx >= ${typeof t=="number"?`${t}u`:t}) { return; }`}mainStart(t=or){let r=typeof t=="number"?t:t[0],o=typeof t=="number"?1:t[1],i=typeof t=="number"?1:t[2];if(r>this.limits.maxComputeWorkgroupSizeX||o>this.limits.maxComputeWorkgroupSizeY||i>this.limits.maxComputeWorkgroupSizeZ)throw new Error(`workgroup size [${r}, ${o}, ${i}] exceeds the maximum workgroup size [${this.limits.maxComputeWorkgroupSizeX}, ${this.limits.maxComputeWorkgroupSizeY}, ${this.limits.maxComputeWorkgroupSizeZ}].`);if(r*o*i>this.limits.maxComputeInvocationsPerWorkgroup)throw new Error(`workgroup size [${r}, ${o}, ${i}] exceeds the maximum workgroup invocations ${this.limits.maxComputeInvocationsPerWorkgroup}.`);let u=this.normalizedDispatchGroup[1]===1&&this.normalizedDispatchGroup[2]===1,a=u?`@builtin(global_invocation_id) global_id : vec3<u32>,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(local_invocation_id) local_id : vec3<u32>`:`@builtin(global_invocation_id) global_id : vec3<u32>,\n                                             @builtin(local_invocation_id) local_id : vec3<u32>,\n    @builtin(local_invocation_index) local_idx : u32,\n    @builtin(workgroup_id) workgroup_id : vec3<u32>,\n    @builtin(num_workgroups) num_workgroups : vec3<u32>`,c=u?"let global_idx = global_id.x; let local_idx = local_id.x;":`let global_idx = (workgroup_id.z * num_workgroups[0] * num_workgroups[1] +\n          workgroup_id.y * num_workgroups[0] + workgroup_id.x) * ${r*o*i}u + local_idx;`;return`@compute @workgroup_size(${r}, ${o}, ${i})\n  fn main(${a}) {\n    ${c}\n  `}appendVariableUniforms(t){t.rank!==0&&(t.shape.startsWith("uniforms.")&&this.uniforms.push({name:t.shape.replace("uniforms.",""),type:"u32",length:t.rank}),t.strides.startsWith("uniforms.")&&this.uniforms.push({name:t.strides.replace("uniforms.",""),type:"u32",length:t.rank}))}declareVariable(t,r){if(t.usage==="internal")throw new Error("cannot use internal variable with declareVariable(). use registerInternalVariables() instead.");this.variables.push(t),this.appendVariableUniforms(t);let o=t.usage==="input"?"read":"read_write",i=t.type.storage;return`@group(0) @binding(${r}) var<storage, ${o}> ${t.name}: array<${i}>;`}declareVariables(...t){return t.map(r=>this.declareVariable(r,this.variableIndex++)).join(`\n`)}registerInternalVariable(t){if(t.usage!=="internal")throw new Error("cannot use input or output variable with registerInternalVariable(). use declareVariables() instead.");this.internalVariables.push(t),this.appendVariableUniforms(t)}registerInternalVariables(...t){return t.forEach(r=>this.registerInternalVariable(r)),this}registerUniform(t,r,o=1){return this.uniforms.push({name:t,type:r,length:o}),this}registerUniforms(t){return this.uniforms=this.uniforms.concat(t),this}uniformDeclaration(){if(this.uniforms.length===0)return"";let t=[];for(let{name:r,type:o,length:i}of this.uniforms)if(i&&i>4)o==="f16"?t.push(`@align(16) ${r}:array<mat2x4<${o}>, ${Math.ceil(i/8)}>`):t.push(`${r}:array<vec4<${o}>, ${Math.ceil(i/4)}>`);else{let u=i==null||i===1?o:`vec${i}<${o}>`;t.push(`${r}:${u}`)}return`\n      struct Uniforms { ${t.join(", ")} };\n      @group(0) @binding(${this.variableIndex}) var<uniform> uniforms: Uniforms;`}get additionalImplementations(){return this.uniformDeclaration()+this.variables.map(t=>t.impl()).join(`\n`)+this.internalVariables.map(t=>t.impl()).join(`\n`)}get variablesInfo(){if(this.uniforms.length===0)return;let t=r=>[12,10,1,6][["u32","f16","f32","i32"].indexOf(r)];return this.uniforms.map(r=>[t(r.type),r.length??1])}},va=(e,t)=>new Io(e,t),_r=(e,t)=>{let r=e.length,o=[];for(let i=0;i<r;i++){let u=r-1-i,a=e[u]||1;(t[t.length-1-i]||1)>1&&a===1&&o.unshift(u)}return o}});var Il,$a,Tl,El,yt,_a,Sa,Sr=Y(()=>{"use strict";ye();Se();Ze();_e();Il=e=>{if(!e||e.length!==1)throw new Error("Transpose requires 1 input.")},$a=(e,t)=>t&&t.length!==e?[...new Array(e).keys()].reverse():t,Tl=(e,t)=>M.sortBasedOnPerm(e,$a(e.length,t)),El=(e,t,r,o)=>{let i=[];i.push(`fn perm(i: ${o.type.indices}) -> ${r.type.indices} {\n    var a: ${r.type.indices};`);for(let u=0;u<t;++u)i.push(r.indicesSet("a",e[u],`i[${u}]`));return i.push("return a;}"),i.join(`\n`)},yt=(e,t)=>{let r=e.dataType,o=e.dims.length,i=$a(o,t),u=Tl(e.dims,i),a=j("output",r,u.length),c=U("a",r,o),p=h=>`\n  ${h.registerUniform("output_size","u32").declareVariables(c,a)}\n\n  ${El(i,o,c,a)}\n\n  ${h.mainStart()}\n    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let indices = ${a.offsetToIndices("global_idx")};\n    let aIndices = perm(indices);\n\n    ${a.setByOffset("global_idx",c.getByIndices("aIndices"))}\n  }`;return{name:"Transpose",shaderCache:{hint:`${t}`,inputDependencies:["rank"]},getRunData:h=>{let d=M.size(u);return{outputs:[{dims:u,dataType:h[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:[{type:12,data:d},...Z(h[0].dims,u)]}},getShaderSource:p}},_a=(e,t)=>{Il(e.inputs),e.compute(yt(e.inputs[0],t.perm))},Sa=e=>ve({perm:e.perm})});var Pl,kl,Ol,Rl,Bl,Dl,zl,Ml,Ul,Vl,Tt,xa,Ca,Aa,Ia,Ta,Ea,Pa,ka,Oa,Ra,Ba=Y(()=>{"use strict";ye();Se();_e();In();Sr();Pl={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate * candidate",logSumExp:"bestValue + exp(candidate)",l1:"bestValue + abs(candidate)",l2:"bestValue + candidate * candidate",logSum:"bestValue + candidate"},kl={max:"select(bestValue, candidate, candidate > bestValue)",min:"select(bestValue, candidate, candidate < bestValue)",mean:"bestValue + candidate",sum:"bestValue + candidate",prod:"bestValue * candidate",sumSquare:"bestValue + candidate",logSumExp:"bestValue + candidate",l1:"bestValue + candidate",l2:"bestValue + candidate",logSum:"bestValue + candidate"},Ol={max:"_A[offset]",min:"_A[offset]",mean:"0",sum:"0",prod:"1",sumSquare:"0",logSumExp:"0",l1:"0",l2:"0",logSum:"0"},Rl={max:"bestValue",min:"bestValue",sum:"bestValue",prod:"bestValue",sumSquare:"bestValue",logSumExp:"log(bestValue)",l1:"bestValue",l2:"sqrt(bestValue)",logSum:"log(bestValue)"},Bl=(e,t)=>{let r=[];for(let o=t-e;o<t;++o)r.push(o);return r},Dl=(e,t)=>{let r=[],o=e.length;for(let u=0;u<o;u++)t.indexOf(u)===-1&&r.push(e[u]);let i=t.map(u=>e[u]);return[r,i]},zl=(e,t)=>{let r=e.length+t.length,o=[],i=0;for(let u=0;u<r;u++)t.indexOf(u)===-1?o.push(e[i++]):o.push(1);return o},Ml=(e,t)=>{for(let r=0;r<e.length;++r)if(e[e.length-r-1]!==t-1-r)return!1;return!0},Ul=(e,t)=>{let r=[];if(!Ml(e,t)){for(let o=0;o<t;++o)e.indexOf(o)===-1&&r.push(o);e.forEach(o=>r.push(o))}return r},Vl=(e,t,r,o,i,u,a)=>{let c=r[0].dims,p=M.size(u),h=M.size(a),d=U("_A",r[0].dataType,c),y=j("output",i,u),w=32,_=`\n          var<workgroup> aBestValues : array<f32, ${w}>;\n       `;return{name:e,shaderCache:t,getShaderSource:S=>`\n        ${S.registerUniform("reduceSize","u32").declareVariables(d,y)}\n        ${_}\n        fn DIV_CEIL(a : u32, b : u32) -> u32 {\n          return ((a - 1u) / b + 1u);\n         }\n         ${S.mainStart(w)}\n\n          let outputIndex = global_idx / ${w};\n          let offset = outputIndex * uniforms.reduceSize;\n\n          var bestValue = f32(${Ol[o]});\n          let Length = uniforms.reduceSize;\n          for (var k = local_idx; k < Length; k = k + ${w}) {\n           let candidate = f32(${d.getByOffset("offset + k")});\n           bestValue = ${Pl[o]};\n          }\n          aBestValues[local_idx] = bestValue;\n          workgroupBarrier();\n\n         var reduceSize = min(Length, ${w}u);\n         for (var currentSize = reduceSize / 2u; reduceSize > 1u;\n             currentSize = reduceSize / 2u) {\n           let interval = DIV_CEIL(reduceSize, 2u);\n           if (local_idx < currentSize) {\n            let candidate = aBestValues[local_idx + interval];\n            bestValue = ${kl[o]};\n            aBestValues[local_idx] = bestValue;\n           }\n           reduceSize = interval;\n           workgroupBarrier();\n         }\n\n         if (local_idx == 0u) {\n          ${y.setByOffset("outputIndex",`${o==="mean"?`${y.type.storage}(bestValue / f32(uniforms.reduceSize))`:`${y.type.storage}(${Rl[o]})`}`)};\n         }\n        }`,getRunData:()=>({outputs:[{dims:u,dataType:i}],dispatchGroup:{x:p},programUniforms:[{type:12,data:h}]})}},Tt=(e,t,r,o)=>{let i=e.inputs.length===1?r:Po(e.inputs,r),u=i.axes;u.length===0&&!i.noopWithEmptyAxes&&(u=e.inputs[0].dims.map((_,v)=>v));let a=M.normalizeAxes(u,e.inputs[0].dims.length),c=a,p=e.inputs[0],h=Ul(c,e.inputs[0].dims.length);h.length>0&&(p=e.compute(yt(e.inputs[0],h),{inputs:[0],outputs:[-1]})[0],c=Bl(c.length,p.dims.length));let[d,y]=Dl(p.dims,c),w=d;i.keepDims&&(w=zl(d,a)),e.compute(Vl(t,{hint:i.cacheKey,inputDependencies:["type"]},[p],o,e.inputs[0].dataType,w,y),{inputs:[p]})},xa=(e,t)=>{Tt(e,"ReduceMeanShared",t,"mean")},Ca=(e,t)=>{Tt(e,"ReduceL1Shared",t,"l1")},Aa=(e,t)=>{Tt(e,"ReduceL2Shared",t,"l2")},Ia=(e,t)=>{Tt(e,"ReduceLogSumExpShared",t,"logSumExp")},Ta=(e,t)=>{Tt(e,"ReduceMaxShared",t,"max")},Ea=(e,t)=>{Tt(e,"ReduceMinShared",t,"min")},Pa=(e,t)=>{Tt(e,"ReduceProdShared",t,"prod")},ka=(e,t)=>{Tt(e,"ReduceSumShared",t,"sum")},Oa=(e,t)=>{Tt(e,"ReduceSumSquareShared",t,"sumSquare")},Ra=(e,t)=>{Tt(e,"ReduceLogSumShared",t,"logSum")}});var Et,Wl,Tn,Po,Pt,Nl,Gl,Hl,Ll,Fl,ql,jl,Kl,Yl,Zl,kt,Da,za,Ma,Ua,Va,Wa,Na,Ga,Ha,La,In=Y(()=>{"use strict";ye();Se();Ze();_e();Ba();Et=e=>{if(!e||e.length===0||e.length>2)throw new Error("Reduce op requires 1 or 2 inputs.");if(e.length===2&&e[1].dims.length!==1)throw new Error("Invalid axes input dims.")},Wl=e=>["","",`var value = ${e.getByIndices("input_indices")};`,""],Tn=(e,t,r,o,i,u,a=!1,c=!1)=>{let p=[],h=r[0].dims,d=h.length,y=M.normalizeAxes(i,d),w=!c&&y.length===0;h.forEach((A,I)=>{w||y.indexOf(I)>=0?a&&p.push(1):p.push(A)});let _=p.length,v=M.size(p);return{name:e,shaderCache:t,getShaderSource:A=>{let I=[],x=U("_A",r[0].dataType,d),E=j("output",u,_),P=o(x,E,y),O=P[2];for(let R=0,L=0;R<d;R++)w||y.indexOf(R)>=0?(a&&L++,O=`for(var j${R}: u32 = 0; j${R} < ${h[R]}; j${R}++) {\n                  ${P[2].includes("last_index")?`let last_index = j${R};`:""}\n                  ${x.indicesSet("input_indices",R,`j${R}`)}\n                  ${O}\n                }`):(I.push(`${x.indicesSet("input_indices",R,E.indicesGet("output_indices",L))};`),L++);return`\n\n        ${A.registerUniform("output_size","u32").declareVariables(x,E)}\n\n        ${A.mainStart()}\n          ${A.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n          var input_indices: ${x.type.indices};\n          let output_indices = ${E.offsetToIndices("global_idx")};\n\n          ${I.join(`\n`)}\n          ${P[0]}       // init ops for reduce max/min\n          ${P[1]}\n          ${O}\n          ${P[3]}\n          ${P.length===4?E.setByOffset("global_idx","value"):P.slice(4).join(`\n`)}\n        }`},getRunData:()=>({outputs:[{dims:p,dataType:u}],dispatchGroup:{x:Math.ceil(v/64)},programUniforms:[{type:12,data:v},...Z(h,p)]})}},Po=(e,t)=>{let r=[];return e[1].dims[0]>0&&e[1].getBigInt64Array().forEach(o=>r.push(Number(o))),ve({axes:r,keepDims:t.keepDims,noopWithEmptyAxes:t.noopWithEmptyAxes})},Pt=(e,t,r,o)=>{let i=e.inputs,u=i.length===1?r:Po(i,r);e.compute(Tn(t,{hint:u.cacheKey,inputDependencies:["rank"]},[i[0]],u.noopWithEmptyAxes&&u.axes.length===0?Wl:o,u.axes,i[0].dataType,u.keepDims,u.noopWithEmptyAxes),{inputs:[0]})},Nl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceLogSum",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${o.getByIndices("input_indices")};`,"value = log(value);"])},Gl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceL1",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += abs(${o.getByIndices("input_indices")});`,""])},Hl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceL2",t,(o,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${o.getByIndices("input_indices")}; value += (t * t);`,"value = sqrt(value);"])},Ll=(e,t)=>{Et(e.inputs),Pt(e,"ReduceLogSumExp",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += exp(${o.getByIndices("input_indices")});`,"value = log(value);"])},Fl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMax",t,(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(o.indicesSet("input_indices",c,0));return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};`,`value = max(value, ${o.getByIndices("input_indices")});`,""]})},ql=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMean",t,(o,i,u)=>{let a=1;for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&(a*=e.inputs[0].dims[c]);return["var sum = f32(0);","",`sum += f32(${o.getByIndices("input_indices")});`,`let value = ${i.type.value}(sum / ${a});`]})},jl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceMin",t,(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};`,`value = min(value, ${o.getByIndices("input_indices")});`,""]})},Kl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceProd",t,(o,i)=>[`var value = ${i.type.storage}(1);`,"",`value *= ${o.getByIndices("input_indices")};`,""])},Yl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceSum",t,(o,i)=>[`var value = ${i.type.storage}(0);`,"",`value += ${o.getByIndices("input_indices")};`,""])},Zl=(e,t)=>{Et(e.inputs),Pt(e,"ReduceSumSquare",t,(o,i)=>[`var t = ${i.type.value}(0); var value = ${i.type.value}(0);`,"",`t = ${o.getByIndices("input_indices")}; value += t * t;`,""])},kt=(e,t,r)=>{if(t.length===0)return r;let o=1,i=1;for(let u=0;u<t.length;u++)t.indexOf(u)===-1?o*=e[u]:i*=e[u];return i<32&&o>1024},Da=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?ql(e,t):xa(e,t)},za=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Gl(e,t):Ca(e,t)},Ma=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Hl(e,t):Aa(e,t)},Ua=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Ll(e,t):Ia(e,t)},Va=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Fl(e,t):Ta(e,t)},Wa=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?jl(e,t):Ea(e,t)},Na=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Kl(e,t):Pa(e,t)},Ga=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Yl(e,t):ka(e,t)},Ha=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Zl(e,t):Oa(e,t)},La=(e,t)=>{kt(e.inputs[0].dims,t.axes,t.noopWithEmptyAxes)?Nl(e,t):Ra(e,t)}});var Fa,qa,ja,ko,Ka=Y(()=>{"use strict";ye();Ze();In();Fa=e=>{if(!e||e.length===0||e.length>2)throw new Error("ArgMinMaxOp op requires 1 or 2 inputs.");if(e[0].dataType!==1)throw new Error("Invalid input type.")},qa=(e,t)=>{Fa(e.inputs);let r=(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};\nvar best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${t.selectLastIndex>0?"<=":"<"} value) {\n         value = ${o.getByIndices("input_indices")};\n         best_index = i32(last_index);\n       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Tn("ArgMin",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},ja=(e,t)=>{Fa(e.inputs);let r=(o,i,u)=>{let a=[];for(let c=0;c<o.rank;c++)(u.indexOf(c)>=0||u.length===0)&&a.push(`input_indices[${c}] = 0;`);return[`${a.join(`\n`)}`,`var value = ${o.getByIndices("input_indices")};\nvar best_index : i32 = 0;`,`if (${o.getByIndices("input_indices")} ${t.selectLastIndex>0?">=":">"} value) {\n         value = ${o.getByIndices("input_indices")};\n         best_index = i32(last_index);\n       }`,"",i.setByOffset("global_idx","best_index")]};e.compute(Tn("argMax",{hint:t.cacheKey,inputDependencies:["rank"]},[e.inputs[0]],r,[t.axis],7,t.keepDims),{inputs:[0]})},ko=e=>ve(e)});var Xl,Ql,Jl,En,Ya,Za,Oo=Y(()=>{"use strict";ye();Se();Ze();_e();Xl=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");let r=0,o=e[r],i=o.dataType,u=o.dims.length;e.forEach((a,c)=>{if(c!==r){if(a.dataType!==i)throw new Error("input tensors should be one type");if(a.dims.length!==u)throw new Error("input tensors should have the same shape");a.dims.forEach((p,h)=>{if(h!==t&&p!==o.dims[h])throw new Error("non concat dimensions must match")})}})},Ql=(e,t)=>`\n  fn calculateInputIndex(index: u32) -> u32 {\n    let sizeInConcatAxis = array<u32, ${e}u>(${t});\n    for (var i: u32 = 0u; i < ${e}; i += 1u ) {\n      if (index < sizeInConcatAxis[i]) {\n        return i;\n      }\n    }\n    return ${e}u;\n  }`,Jl=(e,t)=>{let r=e.length,o=[];for(let i=0;i<r;++i){let u=t.setByOffset("global_idx",e[i].getByIndices("indices"));r===1?o.push(u):i===0?o.push(`if (inputIndex == ${i}u) { ${u} }`):i===r-1?o.push(`else { ${u} }`):o.push(`else if (inputIndex == ${i}) { ${u} }`)}return o.join(`\n`)},En=(e,t,r,o)=>{let i=M.size(r),u=new Array(e.length),a=new Array(e.length),c=0,p=[],h=[],d=[{type:12,data:i}];for(let S=0;S<e.length;++S)c+=e[S].dims[t],u[S]=c,h.push(e[S].dims.length),a[S]=U(`input${S}`,o,h[S]),p.push("rank"),d.push({type:12,data:u[S]});for(let S=0;S<e.length;++S)d.push(...Z(e[S].dims));d.push(...Z(r));let y=j("output",o,r.length),w=y.indicesGet("indices",t),_=Array.from(Array(u.length).keys()).map(S=>`uniforms.sizeInConcatAxis${S}`).join(","),v=S=>`\n\n  ${(()=>{S.registerUniform("outputSize","u32");for(let A=0;A<e.length;A++)S.registerUniform(`sizeInConcatAxis${A}`,"u32");return S.declareVariables(...a,y)})()}\n\n  ${Ql(u.length,_)}\n\n  ${S.mainStart()}\n    ${S.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n    var indices = ${y.offsetToIndices("global_idx")};\n\n    let inputIndex = calculateInputIndex(${w});\n    if (inputIndex != 0u) {\n      let sizeInConcatAxis = array<u32, ${u.length}u>(${_});\n      ${w} -= sizeInConcatAxis[inputIndex - 1u];\n    }\n\n    ${Jl(a,y)}\n  }`;return{name:"Concat",shaderCache:{hint:`${t}`,inputDependencies:p},getRunData:()=>({outputs:[{dims:r,dataType:o}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:d}),getShaderSource:v}},Ya=(e,t)=>{let r=e.inputs,o=r[0].dims,i=M.normalizeAxis(t.axis,o.length);Xl(r,i);let u=o.slice();u[i]=r.reduce((c,p)=>c+(p.dims.length>i?p.dims[i]:0),0);let a=r.filter(c=>M.size(c.dims)>0);e.compute(En(a,i,u,r[0].dataType),{inputs:a})},Za=e=>ve({axis:e.axis})});var ec,tc,rc,nc,Pn,oc,Xa,Ro=Y(()=>{"use strict";ye();_n();_e();Oo();ec=(e,t)=>{let r=e[0],o=e[1],i=e[2],u=e[3],a=e[4],c=e[5];if(a&&c)throw new Error("Attention cannot have both past and relative_position_bias");if(r.dims.length!==3)throw new Error(\'Input "input" must have 3 dimensions\');let p=r.dims[0],h=r.dims[1],d=r.dims[2];if(i.dims.length!==1)throw new Error(\'Input "bias" is expected to have 1 dimensions\');if(o.dims.length!==2)throw new Error(\'Input "weights" is expected to have 2 dimensions\');if(o.dims[0]!==d)throw new Error("Input 1 dimension 0 should have same length as dimension 2 of input 0");if(i.dims[0]!==o.dims[1])throw new Error(\'Input "bias" dimension 0 should have same length as dimension 1 of input "weights"\');let y=i.dims[0]/3,w=y,_=w;if(t.qkvHiddenSizes.length>0){if(t.qkvHiddenSizes.length!==3)throw new Error("qkv_hidden_sizes attribute should have 3 elements");for(let E of t.qkvHiddenSizes)if(E%t.numHeads!==0)throw new Error("qkv_hidden_sizes should be divisible by num_heads");y=t.qkvHiddenSizes[0],w=t.qkvHiddenSizes[1],_=t.qkvHiddenSizes[2]}let v=h;if(y!==w)throw new Error("qkv_hidden_sizes first element should be same as the second");if(i.dims[0]!==y+w+_)throw new Error(\'Input "bias" dimension 0 should have same length as sum of Q/K/V hidden sizes\');let S=0;if(a){if(w!==_)throw new Error(\'Input "past" expect k_hidden_size == v_hidden_size\');if(a.dims.length!==5)throw new Error(\'Input "past" must have 5 dimensions\');if(a.dims[0]!==2)throw new Error(\'Input "past" first dimension must be 2\');if(a.dims[1]!==p)throw new Error(\'Input "past" second dimension must be batch_size\');if(a.dims[2]!==t.numHeads)throw new Error(\'Input "past" third dimension must be num_heads\');if(a.dims[4]!==w/t.numHeads)throw new Error(\'Input "past" fifth dimension must be k_hidden_size / num_heads\');t.pastPresentShareBuffer||(S=a.dims[3])}let A=v+S,I=-1,x=0;if(u)throw new Error("Mask not supported");if(a)throw new Error("past is not supported");return{batchSize:p,sequenceLength:h,pastSequenceLength:S,kvSequenceLength:v,totalSequenceLength:A,maxSequenceLength:I,inputHiddenSize:d,hiddenSize:y,vHiddenSize:_,headSize:Math.floor(y/t.numHeads),vHeadSize:Math.floor(_/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:x,scale:t.scale,broadcastResPosBias:!1,passPastInKv:!1,qkvFormat:1}},tc=(e,t,r,o)=>{let i=Me(o),u=64,a=o/i;a<u?u=1:a/8<64&&(u=Math.ceil(a/8));let c=Math.ceil(o/i/u),p=[{type:t.dataType,data:1/o},{type:12,data:a},{type:12,data:c}],h=De(t.dataType,i),d=et(1,i),y=w=>{let _=j("x",t.dataType,t.dims,i),S=[{name:"d_inv",type:et(t.dataType)},{name:"d_comp",type:"u32"},{name:"elements_per_thread",type:"u32"}];return`\n  var<workgroup> thread_max: array<f32, ${u}>;\n  var<workgroup> thread_sum: array<f32, ${u}>;\n  ${w.registerUniforms(S).declareVariables(_)}\n  ${w.mainStart([u,1,1])}\n    let local_offset = local_idx * uniforms.elements_per_thread;\n    let offset = workgroup_id.x * uniforms.d_comp + local_offset;\n\n    var thread_max_vector = ${d}(-3.402823e+38f);\n    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n      thread_max_vector = max(${d}(x[offset + i]), thread_max_vector);\n    }\n    thread_max[local_idx] = ${(()=>{switch(i){case 1:return"thread_max_vector";case 2:return"max(thread_max_vector.x, thread_max_vector.y)";case 4:return"max(max(thread_max_vector.x, thread_max_vector.y), max(thread_max_vector.z, thread_max_vector.w))";default:throw new Error(`Unsupported components: ${i}`)}})()};\n    workgroupBarrier();\n\n    var max_value =  f32(-3.402823e+38f);\n    for (var i = 0u; i < ${u}; i++) {\n      max_value = max(thread_max[i], max_value);\n    }\n\n    var sum_vector = ${d}(0);\n    for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n      sum_vector += exp(${d}(x[offset + i]) - max_value);\n    }\n    thread_sum[local_idx] = ${(()=>{switch(i){case 1:return"sum_vector";case 2:return"sum_vector.x + sum_vector.y";case 4:return"sum_vector.x + sum_vector.y + sum_vector.z + sum_vector.w";default:throw new Error(`Unsupported components: ${i}`)}})()};\n    workgroupBarrier();\n\n    var sum: f32 = 0;\n    for (var i = 0u; i < ${u}; i++) {\n      sum += thread_sum[i];\n    }\n\n    if (sum == 0) {\n      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n        x[offset + i] = ${_.type.value}(uniforms.d_inv);\n      }\n    } else {\n      for (var i: u32 = 0; i < uniforms.elements_per_thread && i + local_offset < uniforms.d_comp; i++) {\n        var f32input = ${d}(x[offset + i]);\n        x[offset + i] = ${_.type.value}(exp(f32input - max_value) / sum);\n      }\n    }\n  }`};return{name:"AttentionProbsSoftmax",shaderCache:{hint:`${u};${h};${i}`},getShaderSource:y,getRunData:()=>({outputs:[],dispatchGroup:{x:r},programUniforms:p})}},rc=(e,t,r,o,i,u,a)=>{let c=a+i.kvSequenceLength,p=[i.batchSize,i.numHeads,i.sequenceLength,c],h=u.scale===0?1/Math.sqrt(i.headSize):u.scale,d=Me(i.headSize),y=i.headSize/d,w=12,_={x:Math.ceil(c/w),y:Math.ceil(i.sequenceLength/w),z:i.batchSize*i.numHeads},v=[{type:12,data:i.sequenceLength},{type:12,data:y},{type:12,data:c},{type:12,data:i.numHeads},{type:1,data:h}],S=o?["type","type","type"]:["type","type"],A=I=>{let x=U("q",t.dataType,t.dims,d),E=U("key",r.dataType,r.dims,d),P=[x,E];o&&P.push(U("relative_position_bias",o.dataType,o.dims));let O=j("output",t.dataType,p),R=et(1,d),L=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"alpha",type:"f32"}];return`\n  const TILE_SIZE = ${w}u;\n\n  var<workgroup> tileQ: array<${x.type.storage}, ${w*w}>;\n  var<workgroup> tileK: array<${x.type.storage}, ${w*w}>;\n  ${I.registerUniforms(L).declareVariables(...P,O)}\n  ${I.mainStart([w,w,1])}\n    // x holds the N and y holds the M\n    let headIdx = workgroup_id.z;\n    let m = workgroup_id.y * TILE_SIZE;\n    let n = workgroup_id.x * TILE_SIZE;\n    let qOffset = uniforms.M * uniforms.K * headIdx + m * uniforms.K;\n    let kOffset = uniforms.N * uniforms.K * headIdx + n * uniforms.K;\n\n    var value = ${R}(0);\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (global_id.y < uniforms.M && w + local_id.x < uniforms.K) {\n        tileQ[TILE_SIZE * local_id.y + local_id.x] = q[qOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      if (n + local_id.y < uniforms.N && w + local_id.x < uniforms.K) {\n        tileK[TILE_SIZE * local_id.y + local_id.x] = key[kOffset + local_id.y * uniforms.K + w + local_id.x];\n      }\n      workgroupBarrier();\n\n      for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {\n        value += ${R}(tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * local_id.x + k]);\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = headIdx * uniforms.M * uniforms.N;\n    if (global_id.y < uniforms.M && global_id.x < uniforms.N) {\n      let outputIdx = headOffset + global_id.y * uniforms.N + global_id.x;\n      var sum: f32 = ${(()=>{switch(d){case 1:return"value";case 2:return"value.x + value.y";case 4:return"value.x + value.y + value.z + value.w";default:throw new Error(`Unsupported components: ${d}`)}})()};\n        output[outputIdx] = ${O.type.value} (sum * uniforms.alpha) + ${o?"relative_position_bias[outputIdx]":"0.0"};\n    }\n  }`};return{name:"AttentionProbs",shaderCache:{hint:`${d}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:p,dataType:t.dataType,gpuDataType:0}],dispatchGroup:_,programUniforms:v}),getShaderSource:A}},nc=(e,t,r,o,i)=>{let u=i+o.kvSequenceLength,a=[o.batchSize,o.sequenceLength,o.vHiddenSize],c=12,p={x:Math.ceil(o.vHeadSize/c),y:Math.ceil(o.sequenceLength/c),z:o.batchSize*o.numHeads},h=[{type:12,data:o.sequenceLength},{type:12,data:u},{type:12,data:o.vHeadSize},{type:12,data:o.numHeads},{type:12,data:o.vHiddenSize}];return{name:"AttentionScore",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:a,dataType:t.dataType,gpuDataType:0}],dispatchGroup:p,programUniforms:h}),getShaderSource:w=>{let _=U("probs",t.dataType,t.dims),v=U("v",r.dataType,r.dims),S=j("output",t.dataType,a),A=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"v_hidden_size",type:"u32"}];return`\n  const TILE_SIZE = ${c}u;\n  var<workgroup> tileQ: array<${_.type.value}, ${c*c}>;\n  var<workgroup> tileK: array<${_.type.value}, ${c*c}>;\n  ${w.registerUniforms(A).declareVariables(_,v,S)}\n  ${w.mainStart([c,c,1])}\n   let headIdx = workgroup_id.z;\n   let m = global_id.y;\n   let n = global_id.x;\n\n   let offsetA = headIdx * (uniforms.M * uniforms.K) + m * uniforms.K;\n   let offsetB = headIdx * (uniforms.N * uniforms.K) + n;\n\n   var value = ${_.type.storage}(0);\n   for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n     if (m < uniforms.M && w + local_id.x < uniforms.K) {\n       tileQ[TILE_SIZE * local_id.y + local_id.x] = probs[offsetA + w + local_id.x];\n     }\n     if (n < uniforms.N && w + local_id.y < uniforms.K) {\n       tileK[TILE_SIZE * local_id.y + local_id.x] = v[offsetB + (w + local_id.y) * uniforms.N];\n     }\n     workgroupBarrier();\n     for (var k: u32 = 0u; k < TILE_SIZE && w+k < uniforms.K; k++) {\n       value += tileQ[TILE_SIZE * local_id.y + k] * tileK[TILE_SIZE * k + local_id.x];\n     }\n     workgroupBarrier();\n   }\n\n   // we need to transpose output from BNSH_v to BSND_v\n   let batchIdx = workgroup_id.z / uniforms.num_heads;\n   let currentBatchHeadNumber = workgroup_id.z % uniforms.num_heads;\n   if (m < uniforms.M && n < uniforms.N) {\n     let outputIdx = batchIdx * uniforms.M * uniforms.v_hidden_size + m * uniforms.v_hidden_size\n       + currentBatchHeadNumber * uniforms.N + n;\n     output[outputIdx] = value;\n   }\n  }`}}},Pn=(e,t,r,o,i,u,a,c,p,h,d)=>{let y=e.outputCount>1,w=e.outputCount>2,_=y&&w?h.pastSequenceLength:0,v=_+h.kvSequenceLength,S=[h.batchSize,h.numHeads,v,h.headSize],A=a?[a,r]:[r],I=y?e.compute(En(A,2,S,r.dataType),{inputs:A,outputs:[1]})[0]:r,x=[h.batchSize,h.numHeads,v,h.headSize],E=c?[c,o]:[o],P=w?e.compute(En(E,2,x,o.dataType),{inputs:E,outputs:[2]})[0]:o,O=[t,I];p&&O.push(p);let R=e.compute(rc(e,t,I,p,h,d,_),{inputs:O,outputs:[-1]})[0];e.compute(tc(e,R,h.batchSize*h.numHeads*h.sequenceLength,v),{inputs:[R],outputs:[]});let L=[R,P];e.compute(nc(e,R,P,h,_),{inputs:L,outputs:[0]})},oc=(e,t)=>{let r=[t.batchSize,t.numHeads,t.sequenceLength,t.headSize],o=t.sequenceLength,i=t.inputHiddenSize,u=t.headSize,a=12,c={x:Math.ceil(t.headSize/a),y:Math.ceil(t.sequenceLength/a),z:t.batchSize*t.numHeads},p=[e.inputs[0],e.inputs[1],e.inputs[2]],h=[{type:12,data:o},{type:12,data:i},{type:12,data:u},{type:12,data:t.numHeads},{type:12,data:t.headSize},{type:12,data:t.hiddenSize},{type:12,data:t.hiddenSize+t.hiddenSize+t.vHiddenSize}],d=y=>{let w=j("output_q",p[0].dataType,r),_=j("output_k",p[0].dataType,r),v=j("output_v",p[0].dataType,r),S=U("input",p[0].dataType,p[0].dims),A=U("weight",p[1].dataType,p[1].dims),I=U("bias",p[2].dataType,p[2].dims),x=S.type.storage,E=[{name:"M",type:"u32"},{name:"K",type:"u32"},{name:"N",type:"u32"},{name:"num_heads",type:"u32"},{name:"head_size",type:"u32"},{name:"hidden_size",type:"u32"},{name:"ldb",type:"u32"}];return`\n  const TILE_SIZE = ${a}u;\n  var<workgroup> tileInput: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightQ: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightK: array<${x}, ${a*a}>;\n  var<workgroup> tileWeightV: array<${x}, ${a*a}>;\n  ${y.registerUniforms(E).declareVariables(S,A,I,w,_,v)}\n  ${y.mainStart([a,a,1])}\n    let batchIndex = workgroup_id.z / uniforms.num_heads;\n    let headNumber = workgroup_id.z % uniforms.num_heads;\n    let m = global_id.y;\n    let n = global_id.x;\n\n    let inputOffset = batchIndex * (uniforms.M * uniforms.K) + m * uniforms.K;\n    let biasOffsetQ = headNumber * uniforms.head_size;\n    let biasOffsetK = uniforms.hidden_size + biasOffsetQ;\n    let biasOffsetV = uniforms.hidden_size + biasOffsetK;\n\n    var valueQ = ${x}(0);\n    var valueK = ${x}(0);\n    var valueV = ${x}(0);\n    for (var w: u32 = 0u; w < uniforms.K; w += TILE_SIZE) {\n      if (m < uniforms.M && w + local_id.x < uniforms.K) {\n        tileInput[TILE_SIZE * local_id.y + local_id.x] = input[inputOffset + w + local_id.x];\n      }\n      if (n < uniforms.N && w + local_id.y < uniforms.K) {\n        let offset = n + (w + local_id.y) * uniforms.ldb;\n        tileWeightQ[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetQ + offset];\n        tileWeightK[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetK + offset];\n        tileWeightV[TILE_SIZE * local_id.y + local_id.x] = weight[biasOffsetV + offset];\n      }\n      workgroupBarrier();\n      for (var k: u32 = 0u; k<TILE_SIZE && w+k < uniforms.K; k++) {\n        let inputTileOffset = TILE_SIZE * local_id.y + k;\n        let weightTileOffset = TILE_SIZE * k + local_id.x;\n        valueQ += tileInput[inputTileOffset] * tileWeightQ[weightTileOffset];\n        valueK += tileInput[inputTileOffset] * tileWeightK[weightTileOffset];\n        valueV += tileInput[inputTileOffset] * tileWeightV[weightTileOffset];\n      }\n\n      workgroupBarrier();\n    }\n\n    let headOffset = (m * uniforms.N + n) % uniforms.head_size;\n    valueQ += bias[headOffset + biasOffsetQ];\n    valueK += bias[headOffset + biasOffsetK];\n    valueV += bias[headOffset + biasOffsetV];\n\n    let offset = workgroup_id.z * uniforms.M * uniforms.N;\n    if (m < uniforms.M && n < uniforms.N) {\n      let outputIdx = offset + m * uniforms.N + n;\n      output_q[outputIdx] = valueQ;\n      output_k[outputIdx] = valueK;\n      output_v[outputIdx] = valueV;\n    }\n  }`};return e.compute({name:"AttentionPrepare",shaderCache:{inputDependencies:["type","type","type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0},{dims:r,dataType:e.inputs[0].dataType,gpuDataType:0}],dispatchGroup:c,programUniforms:h}),getShaderSource:d},{inputs:p,outputs:[-1,-1,-1]})},Xa=(e,t)=>{let r=ec(e.inputs,t),[o,i,u]=oc(e,r);return Pn(e,o,i,u,e.inputs[4],void 0,void 0,void 0,e.inputs[5],r,t)}});var ic,ac,sc,Qa,Ja=Y(()=>{"use strict";$r();ye();Se();Ze();_e();ic=(e,t)=>{if(!e||e.length!==5)throw new Error("BatchNormalization requires 5 inputs");let r=(o,i,u)=>{let a=i.length;if(a!==o.length)throw new Error(`${u}: num dimensions != ${a}`);i.forEach((c,p)=>{if(c!==o[p])throw new Error(`${u}: dim[${p}] do not match`)})};if(e[0].dims.length>1){let o=t.format==="NHWC"?t.spatial?e[0].dims.slice(-1):e[0].dims.slice(-1).concat(e[0].dims.slice(1,e[0].dims.length-1)):e[0].dims.slice(1,t.spatial?2:void 0);r(e[1].dims,o,"Invalid input scale"),r(e[2].dims,o,"Invalid input B"),r(e[3].dims,o,"Invalid input mean"),r(e[4].dims,o,"Invalid input var")}else r(e[1].dims,[1],"Invalid input scale"),r(e[2].dims,[1],"Invalid input B"),r(e[3].dims,[1],"Invalid input mean"),r(e[4].dims,[1],"Invalid input var")},ac=(e,t)=>{let{epsilon:r,spatial:o,format:i}=t,u=e[0].dims,a=o?Me(u[u.length-1]):1,c=i==="NHWC"&&u.length>1?a:1,p=M.size(u)/a,h=o,d=h?u.length:u,y=U("x",e[0].dataType,e[0].dims,a),w=U("scale",e[1].dataType,e[1].dims,c),_=U("bias",e[2].dataType,e[2].dims,c),v=U("inputMean",e[3].dataType,e[3].dims,c),S=U("inputVar",e[4].dataType,e[4].dims,c),A=j("y",e[0].dataType,d,a),I=()=>{let E="";if(o)E=`let cOffset = ${u.length===1?"0u":i==="NHWC"?`outputIndices[${u.length-1}] / ${a}`:"outputIndices[1]"};`;else if(i==="NCHW")E=`\n            ${A.indicesSet("outputIndices","0","0")}\n            let cOffset = ${A.indicesToOffset("outputIndices")};`;else{E=`var cIndices = ${w.type.indices}(0);\n                       cIndices[0] = outputIndices[${u.length-1}];`;for(let P=1;P<w.rank;P++)E+=`cIndices[${P}] = outputIndices[${P}];`;E+=`let cOffset = ${w.indicesToOffset("cIndices")};`}return E},x=E=>`\n  const epsilon = ${r};\n  ${E.registerUniform("outputSize","u32").declareVariables(y,w,_,v,S,A)}\n  ${E.mainStart()}\n  ${E.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n    var outputIndices = ${A.offsetToIndices(`global_idx * ${a}`)};\n    ${I()}\n    let scale = ${w.getByOffset("cOffset")};\n    let bias = ${_.getByOffset("cOffset")};\n    let inputMean = ${v.getByOffset("cOffset")};\n    let inputVar = ${S.getByOffset("cOffset")};\n    let x = ${y.getByOffset("global_idx")};\n    let value = (x - inputMean) * inverseSqrt(inputVar + epsilon) * scale + bias;\n    ${A.setByOffset("global_idx","value")}\n  }`;return{name:"BatchNormalization",shaderCache:{hint:`${t.epsilon}_${t.format}_${o}_${a}`,inputDependencies:h?["rank","type","type","type","type"]:void 0},getShaderSource:x,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h?[{type:12,data:p},...Z(u)]:[{type:12,data:p}]})}},sc=e=>ve(e),Qa=(e,t)=>{let{inputs:r,outputCount:o}=e,i=sc({...t,outputCount:o});if(vr.webgpu.validateInputContent&&ic(r,i),t.trainingMode)throw new Error("BatchNormalization trainingMode is not supported yet.");e.compute(ac(r,i))}});var uc,dc,es,ts=Y(()=>{"use strict";Se();_e();uc=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![320,640,1280].includes(e[0].dims[2]))throw new Error("number of channels should be 320, 640 or 1280");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},dc=e=>{let t=e[0].dims,r=e[0].dims[2],o=M.size(t)/4,i=e[0].dataType,u=U("input",i,t,4),a=U("bias",i,[r],4),c=U("residual",i,t,4),p=j("output",i,t,4);return{name:"BiasAdd",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(o/64)}}),getShaderSource:d=>`\n  const channels = ${r}u / 4;\n  ${d.declareVariables(u,a,c,p)}\n\n  ${d.mainStart()}\n    ${d.guardAgainstOutOfBoundsWorkgroupSizes(o)}\n    let value = ${u.getByOffset("global_idx")}\n      + ${a.getByOffset("global_idx % channels")} + ${c.getByOffset("global_idx")};\n    ${p.setByOffset("global_idx","value")}\n  }`}},es=e=>{uc(e.inputs),e.compute(dc(e.inputs))}});var lc,ke,rs,ns,os,is,as,ss,us,ds,ls,cc,cs,ps,ms,fs,kn,hs,On,gs,ys,bs,ws,vs,$s,_s,Ss,xs,Cs,As,Is,Ts,Es,Ps,ks,Os,Rs,Bo,Do,Bs,Ds,zs,Rn=Y(()=>{"use strict";ye();Se();Ze();_e();lc=(e,t,r,o,i,u)=>{let a=Math.ceil(t/4),c="";typeof i=="string"?c=`${i}(a)`:c=i("a");let p=U("inputData",r,[a],4),h=j("outputData",o,[a],4);return`\n      ${e.registerUniform("vec_size","u32").declareVariables(p,h)}\n\n  ${u??""}\n\n  ${e.mainStart()}\n    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n\n    let a = ${p.getByOffset("global_idx")};\n    ${h.setByOffset("global_idx",c)}\n  }`},ke=(e,t,r,o,i,u=e.dataType)=>({name:t,shaderCache:{hint:i,inputDependencies:["type"]},getShaderSource:a=>lc(a,M.size(e.dims),e.dataType,u,r,o),getRunData:a=>({outputs:[{dims:e.dims,dataType:u}],dispatchGroup:{x:Math.ceil(M.size(a[0].dims)/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size(e.dims)/4)}]})}),rs=e=>{e.compute(ke(e.inputs[0],"Abs","abs"))},ns=e=>{e.compute(ke(e.inputs[0],"Acos","acos"))},os=e=>{e.compute(ke(e.inputs[0],"Acosh","acosh"))},is=e=>{e.compute(ke(e.inputs[0],"Asin","asin"))},as=e=>{e.compute(ke(e.inputs[0],"Asinh","asinh"))},ss=e=>{e.compute(ke(e.inputs[0],"Atan","atan"))},us=e=>{e.compute(ke(e.inputs[0],"Atanh","atanh"))},ds=e=>ve(e),ls=(e,t)=>{let r;switch(t.to){case 10:r="vec4<f16>";break;case 1:r="vec4<f32>";break;case 12:r="vec4<u32>";break;case 6:r="vec4<i32>";break;case 9:r="vec4<bool>";break;default:throw new RangeError(`not supported type (specified in attribute \'to\' from \'Cast\' operator): ${t.to}`)}e.compute(ke(e.inputs[0],"Cast",r,void 0,t.cacheKey,t.to))},cc=e=>{let t=e.length>=2&&e[1].data!==0?e[1].getFloat32Array()[0]:xn,r=e.length>=3&&e[2].data!==0?e[2].getFloat32Array()[0]:Cn;return ve({min:t,max:r})},cs=(e,t)=>{let r=e.inputs.length===1?t:cc(e.inputs),o=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Clip",i=>`clamp(${i}, clip_min_, clip_max_)`,`\n    const clip_min_: vec4<${o}> = vec4(${o}(${r.min}));\n    const clip_max_: vec4<${o}> = vec4(${o}(${r.max}));\n`,r.cacheKey),{inputs:[0]})},ps=e=>{e.compute(ke(e.inputs[0],"Ceil","ceil"))},ms=e=>{e.compute(ke(e.inputs[0],"Cos","cos"))},fs=e=>{e.compute(ke(e.inputs[0],"Cosh","cosh"))},kn=e=>ve(e),hs=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Elu",o=>`elu_vf32(${o})`,`\n  const elu_alpha_ = ${r}(${t.alpha});\n\n  fn elu_f32(a: ${r}) -> ${r} {\n  return select((exp(a) - 1.0) * elu_alpha_, a, a >= 0.0);\n  }\n\n  fn elu_vf32(v: vec4<${r}>) -> vec4<${r}> {\n  return vec4(elu_f32(v.x), elu_f32(v.y), elu_f32(v.z), elu_f32(v.w));\n  }`,t.cacheKey))},On=(e="f32")=>`\nconst r0: ${e} = 0.3275911;\nconst r1: ${e} = 0.254829592;\nconst r2: ${e} = -0.284496736;\nconst r3: ${e} = 1.421413741;\nconst r4: ${e} = -1.453152027;\nconst r5: ${e} = 1.061405429;\n\nfn erf_vf32(v: vec4<${e}>) -> vec4<${e}> {\n  let absv = abs(v);\n  let x = 1.0 / (1.0 + r0 * absv);\n  return sign(v) * (1.0 - ((((r5 * x + r4) * x + r3) * x + r2) * x + r1) * x * exp(-absv * absv));\n}`,gs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Erf",r=>`erf_vf32(${r})`,On(t)))},ys=e=>{e.compute(ke(e.inputs[0],"Exp","exp"))},bs=e=>{e.compute(ke(e.inputs[0],"Floor","floor"))},ws=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Gelu",r=>`0.5 * ${r} * (1.0 + erf_vf32(${r} * 0.7071067811865475))`,On(t)))},vs=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"LeakyRelu",o=>`select(leaky_relu_alpha_ * ${o}, ${o}, ${o} >= vec4<${r}>(0.0))`,`const leaky_relu_alpha_ = ${r}(${t.alpha});`,t.cacheKey))},$s=e=>{e.compute(ke(e.inputs[0],"Not",t=>`!${t}`))},_s=e=>{e.compute(ke(e.inputs[0],"Neg",t=>`-${t}`))},Ss=e=>{e.compute(ke(e.inputs[0],"Reciprocal",t=>`1.0/${t}`))},xs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"Relu",r=>`select(vec4<${t}>(0.0), ${r}, ${r} > vec4<${t}>(0.0))`))},Cs=e=>{e.compute(ke(e.inputs[0],"Sigmoid",t=>`(1.0 / (1.0 + exp(-${t})))`))},As=e=>ve(e),Is=(e,t)=>{let r=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"HardSigmoid",o=>`max(vec4<${r}>(0.0), min(vec4<${r}>(1.0), ${t.alpha} * ${o} + vec4<${r}>(${t.beta})))`,void 0,t.cacheKey))},Ts=e=>{e.compute(ke(e.inputs[0],"Sin","sin"))},Es=e=>{e.compute(ke(e.inputs[0],"Sinh","sinh"))},Ps=e=>{e.compute(ke(e.inputs[0],"Sqrt","sqrt"))},ks=e=>{e.compute(ke(e.inputs[0],"Tan","tan"))},Os=e=>`sign(${e}) * (1 - exp(-2 * abs(${e}))) / (1 + exp(-2 * abs(${e})))`,Rs=e=>{e.compute(ke(e.inputs[0],"Tanh",Os))},Bo=(e="f32")=>`\nconst fast_gelu_a: ${e} = 0.5;\nconst fast_gelu_b: ${e} = 0.7978845608028654;\nconst fast_gelu_c: ${e} = 0.035677408136300125;\n\nfn tanh_v(v: vec4<${e}>) -> vec4<${e}> {\n  return ${Os("v")};\n}\n`,Do=e=>`(fast_gelu_a + fast_gelu_a * tanh_v(${e} * (fast_gelu_c * ${e} * ${e} + fast_gelu_b))) * ${e}`,Bs=e=>{let t=et(e.inputs[0].dataType);e.compute(ke(e.inputs[0],"FastGelu",Do,Bo(t),void 0,e.inputs[0].dataType))},Ds=(e,t)=>{let r=et(e.inputs[0].dataType);return e.compute(ke(e.inputs[0],"ThresholdedRelu",o=>`select(vec4<${r}>(0.0), ${o}, ${o} > thresholded_relu_alpha_)`,`const thresholded_relu_alpha_ = vec4<${r}>(${t.alpha});`,t.cacheKey)),0},zs=e=>{e.compute(ke(e.inputs[0],"Log","log"))}});var pc,mc,Us,Vs=Y(()=>{"use strict";Se();_e();Rn();pc=e=>{if(e[0].dims.length!==3)throw new Error("input should have 3 dimensions");if(![2560,5120,10240].includes(e[0].dims[2]))throw new Error("hidden state should be 2560, 5120 or 10240");if(e[1].dims.length!==1)throw new Error("bias is expected to have 1 dimensions");if(e[0].dims[2]!==e[1].dims[0])throw new Error("last dimension of input and bias are not the same")},mc=e=>{let t=e[0].dims.slice();t[2]=t[2]/2;let r=U("input",e[0].dataType,e[0].dims,4),o=U("bias",e[0].dataType,[e[0].dims[2]],4),i=j("output",e[0].dataType,t,4),u=M.size(t)/4,a=De(e[0].dataType);return{name:"BiasSplitGelu",getRunData:()=>({outputs:[{dims:t,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(u/64)}}),getShaderSource:p=>`\n  const M_SQRT2 = sqrt(2.0);\n  const halfChannels = ${e[0].dims[2]/4/2}u;\n\n  ${p.declareVariables(r,o,i)}\n\n  ${On(a)}\n\n  ${p.mainStart()}\n    ${p.guardAgainstOutOfBoundsWorkgroupSizes(u)}\n    let biasIdx = global_idx % halfChannels;\n    let batchIndex = global_idx / halfChannels;\n    let inputOffset = biasIdx + batchIndex * halfChannels * 2;\n    let valueLeft = input[inputOffset] + bias[biasIdx];\n    let valueRight = input[inputOffset + halfChannels] + bias[biasIdx + halfChannels];\n    let geluRight = valueRight * 0.5 * (erf_vf32(valueRight / M_SQRT2) + 1);\n\n    ${i.setByOffset("global_idx","valueLeft * geluRight")}\n  }`}},Us=e=>{pc(e.inputs),e.compute(mc(e.inputs))}});var fc,hc,Ot,Ws,Ns,Gs,Hs,Ls,Fs,qs,js,Ks,Ys,Zs=Y(()=>{"use strict";ye();Se();_e();fc=(e,t,r,o,i,u,a,c,p,h,d,y)=>{let w,_;typeof c=="string"?w=_=(x,E)=>`${c}((${x}),(${E}))`:typeof c=="function"?w=_=c:(w=c.scalar,_=c.vector);let v=j("outputData",d,o.length,4),S=U("aData",p,t.length,4),A=U("bData",h,r.length,4),I;if(i)if(u){let x=M.size(t)===1,E=M.size(r)===1,P=t.length>0&&t[t.length-1]%4===0,O=r.length>0&&r[r.length-1]%4===0;x||E?I=v.setByOffset("global_idx",_(x?`${S.type.value}(${S.getByOffset("0")}.x)`:S.getByOffset("global_idx"),E?`${A.type.value}(${A.getByOffset("0")}.x)`:A.getByOffset("global_idx"))):I=`\n            let outputIndices = ${v.offsetToIndices("global_idx * 4u")};\n            let offsetA = ${S.broadcastedIndicesToOffset("outputIndices",v)};\n            let offsetB = ${A.broadcastedIndicesToOffset("outputIndices",v)};\n            ${v.setByOffset("global_idx",_(a||P?S.getByOffset("offsetA / 4u"):`${S.type.value}(${S.getByOffset("offsetA / 4u")}[offsetA % 4u])`,a||O?A.getByOffset("offsetB / 4u"):`${A.type.value}(${A.getByOffset("offsetB / 4u")}[offsetB % 4u])`))}\n          `}else I=v.setByOffset("global_idx",_(S.getByOffset("global_idx"),A.getByOffset("global_idx")));else{if(!u)throw new Error("no necessary to use scalar implementation for element-wise binary op implementation.");let x=(E,P,O="")=>{let R=`aData[indexA${P}][componentA${P}]`,L=`bData[indexB${P}][componentB${P}]`;return`\n            let outputIndices${P} = ${v.offsetToIndices(`global_idx * 4u + ${P}u`)};\n            let offsetA${P} = ${S.broadcastedIndicesToOffset(`outputIndices${P}`,v)};\n            let offsetB${P} = ${A.broadcastedIndicesToOffset(`outputIndices${P}`,v)};\n            let indexA${P} = offsetA${P} / 4u;\n            let indexB${P} = offsetB${P} / 4u;\n            let componentA${P} = offsetA${P} % 4u;\n            let componentB${P} = offsetB${P} % 4u;\n            ${E}[${P}] = ${O}(${w(R,L)});\n          `};d===9?I=`\n            var data = vec4<u32>(0);\n            ${x("data",0,"u32")}\n            ${x("data",1,"u32")}\n            ${x("data",2,"u32")}\n            ${x("data",3,"u32")}\n            outputData[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:I=`\n            ${x("outputData[global_idx]",0)}\n            ${x("outputData[global_idx]",1)}\n            ${x("outputData[global_idx]",2)}\n            ${x("outputData[global_idx]",3)}\n          `}return`\n        ${e.registerUniform("vec_size","u32").declareVariables(S,A,v)}\n\n        ${y??""}\n\n        ${e.mainStart()}\n        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n        ${I}\n      }`},hc=(e,t,r,o,i,u,a=r.dataType)=>{let c=!M.areEqual(r.dims,o.dims),p=r.dims,h=M.size(r.dims),d=!1,y=!1,w=[c];if(c){let _=It.calcShape(r.dims,o.dims,!1);if(!_)throw new Error("Can\'t perform binary op on the given tensors");p=_,h=M.size(p);let v=M.size(r.dims)===1,S=M.size(o.dims)===1,A=r.dims.length>0&&r.dims[r.dims.length-1]%4===0,I=o.dims.length>0&&o.dims[o.dims.length-1]%4===0;w.push(v),w.push(S),w.push(A),w.push(I);let x=1;for(let E=1;E<p.length;E++){let P=r.dims[r.dims.length-E]??1,O=o.dims[o.dims.length-E]??1;if(P===O)x*=P;else break}x%4===0?(y=!0,d=!0):(v||S||A||I)&&(d=!0)}else d=!0;return w.push(d),{name:e,shaderCache:{hint:t+w.map(_=>_.toString()).join("_"),inputDependencies:["rank","rank"]},getShaderSource:_=>fc(_,r.dims,o.dims,p,d,c,y,i,r.dataType,o.dataType,a,u),getRunData:()=>({outputs:[{dims:p,dataType:a}],dispatchGroup:{x:Math.ceil(h/64/4)},programUniforms:[{type:12,data:Math.ceil(M.size(p)/4)},...Z(r.dims,o.dims,p)]})}},Ot=(e,t,r,o,i,u)=>{e.compute(hc(t,i??"",e.inputs[0],e.inputs[1],r,o,u))},Ws=e=>{Ot(e,"Add",(t,r)=>`${t}+${r}`)},Ns=e=>{Ot(e,"Div",(t,r)=>`${t}/${r}`)},Gs=e=>{Ot(e,"Equal",{scalar:(t,r)=>`u32(${t}==${r})`,vector:(t,r)=>`vec4<u32>(${t}==${r})`},void 0,void 0,9)},Hs=e=>{Ot(e,"Mul",(t,r)=>`${t}*${r}`)},Ls=e=>{let t=U("input",e.inputs[0].dataType,e.inputs[0].dims).type.value;Ot(e,"Pow",{scalar:(o,i)=>`pow_custom(${o},${i})`,vector:(o,i)=>`pow_vector_custom(${o},${i})`},`\n    fn pow_custom(a : ${t}, b : ${t}) -> ${t} {\n      if (b == ${t}(0.0)) {\n        return ${t}(1.0);\n      } else if (a < ${t}(0.0) && f32(b) != floor(f32(b))) {\n        return ${t}(pow(f32(a), f32(b))); // NaN\n      }\n      return select(sign(a), ${t}(1.0), round(f32(abs(b) % ${t}(2.0))) != 1.0) * ${t}(${t==="i32"?"round":""}(pow(f32(abs(a)), f32(b))));\n    }\n    fn pow_vector_custom(a : vec4<${t}>, b : vec4<${t}>) -> vec4<${t}> {\n      // TODO: implement vectorized pow\n      return vec4<${t}>(pow_custom(a.x, b.x), pow_custom(a.y, b.y), pow_custom(a.z, b.z), pow_custom(a.w, b.w));\n    }\n      `)},Fs=e=>{Ot(e,"Sub",(t,r)=>`${t}-${r}`)},qs=e=>{Ot(e,"Greater",{scalar:(t,r)=>`u32(${t}>${r})`,vector:(t,r)=>`vec4<u32>(${t}>${r})`},void 0,void 0,9)},js=e=>{Ot(e,"Less",{scalar:(t,r)=>`u32(${t}<${r})`,vector:(t,r)=>`vec4<u32>(${t}<${r})`},void 0,void 0,9)},Ks=e=>{Ot(e,"GreaterOrEqual",{scalar:(t,r)=>`u32(${t}>=${r})`,vector:(t,r)=>`vec4<u32>(${t}>=${r})`},void 0,void 0,9)},Ys=e=>{Ot(e,"LessOrEqual",{scalar:(t,r)=>`u32(${t}<=${r})`,vector:(t,r)=>`vec4<u32>(${t}<=${r})`},void 0,void 0,9)}});var St,xt,Ct,Bn,Ft=Y(()=>{"use strict";ye();Se();St=(e,t,r="f32")=>{switch(e.activation){case"Relu":return`value = max(value, ${t}(0.0));`;case"Sigmoid":return`value = (${t}(1.0) / (${t}(1.0) + exp(-value)));`;case"Clip":return`value = clamp(value, ${t}(${r}(uniforms.clip_min)), ${t}(${r}(uniforms.clip_max)));`;case"HardSigmoid":return`value = max(${t}(0.0), min(${t}(1.0), ${r}(uniforms.alpha) * value + ${r}(uniforms.beta)));`;case"LeakyRelu":return`value = select(${r}(uniforms.alpha) * value, value, value >= ${t}(0.0));`;case"":return"";default:throw new Error(`Unsupported activation ${e.activation}`)}},xt=(e,t)=>{e.activation==="Clip"?t.push({type:1,data:e.clipMax},{type:1,data:e.clipMin}):e.activation==="HardSigmoid"?t.push({type:1,data:e.alpha},{type:1,data:e.beta}):e.activation==="LeakyRelu"&&t.push({type:1,data:e.alpha})},Ct=(e,t)=>{e.activation==="Clip"?t.push({name:"clip_max",type:"f32"},{name:"clip_min",type:"f32"}):e.activation==="HardSigmoid"?t.push({name:"alpha",type:"f32"},{name:"beta",type:"f32"}):e.activation==="LeakyRelu"&&t.push({name:"alpha",type:"f32"})},Bn=e=>{let t=e?.activation||"";if(t==="HardSigmoid"){let[r,o]=e?.activation_params||[.2,.5];return{activation:t,alpha:r,beta:o}}else if(t==="Clip"){let[r,o]=e?.activation_params||[xn,Cn];return{activation:t,clipMax:o,clipMin:r}}else if(t==="LeakyRelu"){let[r]=e?.activation_params||[.01];return{activation:t,alpha:r}}return{activation:t}}});var tt,Dn,zn=Y(()=>{"use strict";tt=(e,t)=>{switch(e){case 1:return t;case 2:return`vec2<${t}>`;case 3:return`vec3<${t}>`;case 4:return`vec4<${t}>`;default:throw new Error(`${e}-component is not supported.`)}},Dn=e=>`\n      ${e?"value = value + getBiasByOutputCoords(coords);":""}\n      `});var Mn,zo=Y(()=>{"use strict";Mn=e=>`\nfn getIndexFromCoords4D(coords : vec4<i32>, shape : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n      shape.y * shape.z * shape.w, shape.z * shape.w, shape.w, 1));\n}\nfn getOutputIndexFromCoords(coords : vec4<i32>) -> i32 {\n  return dot(coords, vec4<i32>(\n    i32(${e}.x), i32(${e}.y), i32(${e}.z), 1));\n}\n`});var yc,bc,Hr,Xs,wc,Lr,vc,Un,Fr=Y(()=>{"use strict";ye();Se();_e();Ft();zn();yc=(e,t)=>e?`\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          kStart + inputRow,\n          globalRowStart / innerElementSize + inputCol${t?", batchIndices":""});\n        `:`\n        mm_Asub[inputRow][inputCol] = mm_readA(batch,\n          globalRow + innerRow,\n          kStart / innerElementSize + inputCol${t?", batchIndices":""});\n        `,bc=(e,t)=>e?`\n        let ACached0 = mm_Asub[k * innerElementSize][localRow];\n        let ACached1 = mm_Asub[k * innerElementSize + 1][localRow];\n        let ACached2 = mm_Asub[k * innerElementSize + 2][localRow];\n        ${t===3?"":"let ACached3 = mm_Asub[k * innerElementSize + 3][localRow];"}\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          acc[i] = BCached0 * ACached0[i] + acc[i];\n          acc[i] = BCached1 * ACached1[i] + acc[i];\n          acc[i] = BCached2 * ACached2[i] + acc[i];\n          ${t===3?"":"acc[i] = BCached3 * ACached3[i] + acc[i];"}\n        }`:`\n        for (var i = 0; i < rowPerThread; i = i + 1) {\n          let ACached = mm_Asub[tileRow + i][k];\n          acc[i] = BCached0 * ACached.x + acc[i];\n          acc[i] = BCached1 * ACached.y + acc[i];\n          acc[i] = BCached2 * ACached.z + acc[i];\n          ${t===3?"":"acc[i] = BCached3 * ACached.w + acc[i];"}\n        }`,Hr=(e,t,r="f32",o,i=!1,u=32,a=!1,c=32)=>{let p=t[1]*e[1],h=t[0]*e[0],d=i?p:u,y=i?u:p,w=d/t[0],_=u/t[1];if(!((i&&w===4&&e[1]===4||!i&&(w===3||w===4))&&d%t[0]===0&&u%t[1]===0&&e[0]===4))throw new Error(`If transposeA ${i} is true, innerElementSize ${w} and workPerThread[1] ${e[1]} must be 4.\n      Otherwise, innerElementSize ${w} must be 3 or 4.\n  tileAWidth ${d} must be divisible by workgroupSize[0]${t[0]}. tileInner ${u} must be divisible by workgroupSize[1] ${t[1]}. colPerThread ${e[0]} must be 4.`);return`\nvar<workgroup> mm_Asub: array<array<vec${w}<${r}>, ${d/w}>, ${y}>;\nvar<workgroup> mm_Bsub: array<array<vec4<${r}>, ${h/e[0]}>, ${u}>;\n\nconst rowPerThread = ${e[1]};\nconst colPerThread = ${e[0]};\nconst innerElementSize = ${w};\nconst tileInner = ${u};\n\n@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n  let localRow = i32(localId.y);\n  let tileRow = localRow * rowPerThread;\n  let tileCol = i32(localId.x);\n\n  let globalRow =i32(globalId.y) * rowPerThread;\n  let globalCol = i32(globalId.x);\n  let batch = ${a?"0":"i32(globalId.z)"};\n  ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}\n  let globalRowStart = i32(workgroupId.y) * ${p};\n\n  let num_tiles = ${a?`${Math.ceil(c/u)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};\n  var kStart = ${a?`i32(globalId.z) * ${c}`:"0"};\n\n  var acc: array<vec4<${r}>, rowPerThread>;\n\n  // Loop over shared dimension.\n  let tileRowB = localRow * ${_};\n  for (var t = 0; t < num_tiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let inputRow = tileRow + innerRow;\n          let inputCol = tileCol;\n          ${yc(i,o)}\n      }\n\n      // Load one tile of B into local memory.\n      for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {\n          let inputRow = tileRowB + innerRow;\n          let inputCol = tileCol;\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch, kStart + inputRow, globalCol${o?", batchIndices":""});\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      for (var k = 0; k < tileInner / innerElementSize; k = k + 1) {\n          let BCached0 = mm_Bsub[k * innerElementSize][tileCol];\n          let BCached1 = mm_Bsub[k * innerElementSize + 1][tileCol];\n          let BCached2 = mm_Bsub[k * innerElementSize + 2][tileCol];\n          ${w===3?"":"let BCached3 = mm_Bsub[k * innerElementSize + 3][tileCol];"}\n\n          ${bc(i,w)}\n      }\n\n      workgroupBarrier();\n  }\n\n  for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      mm_write(batch, globalRow + innerRow, globalCol, acc[innerRow]);\n  }\n}`},Xs=(e,t)=>e?`\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              kStart + inputRow,\n              globalRowStart + inputCol${t?", batchIndices":""});\n            `:`\n            mm_Asub[inputRow][inputCol] = mm_readA(batch,\n              globalRowStart + inputRow,\n              kStart + inputCol${t?", batchIndices":""});\n            `,wc=e=>e?"let ACached = mm_Asub[k][tileRow + innerRow];":"let ACached = mm_Asub[tileRow + innerRow][k];",Lr=(e,t,r="f32",o,i=!1,u=32,a=!1,c=32,p=!1)=>{let h=e[1]*t[1],d=e[0]*t[0],y=i?h:u,w=i?u:h;if(!(w%t[1]===0&&y%t[0]===0&&u%t[1]===0))throw new Error(`tileAHight ${w} must be divisible by workgroupSize[1]${t[1]}, tileAWidth ${y} must be divisible by workgroupSize[0]${t[0]}, tileInner ${u} must be divisible by workgroupSize[1]${t[1]}`);let _=w/t[1],v=y/t[0],S=u/t[1],A=p?`\n    let localRow = i32(localId.y);\n    let localCol = i32(localId.x);\n    let globalRowStart = i32(workgroupId.y) * ${h};\n    let globalColStart = i32(workgroupId.x) * ${d};\n\n    // Loop over shared dimension.\n    for (var t = 0; t < num_tiles; t = t + 1) {\n      // Load one tile of A into local memory.\n      for (var inputRow = localRow; inputRow < ${w}; inputRow = inputRow + ${t[1]}) {\n        for (var inputCol = localCol; inputCol < ${y}; inputCol = inputCol + ${t[0]}) {\n          ${Xs(i,o)}\n        }\n      }\n      // Load one tile of B into local memory.\n      for (var inputRow = localRow; inputRow < ${u}; inputRow = inputRow + ${t[1]}) {\n            for (var inputCol = localCol; inputCol < ${d}; inputCol = inputCol + ${t[0]}) {\n          mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n            kStart + inputRow,\n            globalColStart + inputCol${o?", batchIndices":""});\n        }\n      }\n      kStart = kStart + tileInner;\n      workgroupBarrier();\n\n      // Compute acc values for a single thread.\n      var BCached : array<${r}, colPerThread>;\n      for (var k = 0; k < tileInner; k = k + 1) {\n        for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n          BCached[inner] = mm_Bsub[k][localCol + inner * ${t[0]}];\n        }\n        for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n          let ACached = ${i?`mm_Asub[k][localRow + innerRow * ${t[1]}];`:`mm_Asub[localRow + innerRow * ${t[1]}][k];`}\n          for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n            acc[innerRow][innerCol] = acc[innerRow][innerCol] +\n                ACached * BCached[innerCol];\n          }\n        }\n      }\n      workgroupBarrier();\n    }\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      let gRow = globalRowStart + localRow + innerRow * ${t[1]};\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        let gCol = globalColStart + localCol + innerCol * ${t[0]};\n        mm_write(batch, gRow, gCol, acc[innerRow][innerCol]);\n      }\n    }\n    `:`\nlet tileRow = i32(localId.y) * rowPerThread;\nlet tileCol = i32(localId.x) * colPerThread;\n\nlet globalRow = i32(globalId.y) * rowPerThread;\nlet globalCol = i32(globalId.x) * colPerThread;\nlet globalRowStart = i32(workgroupId.y) * ${h};\n\nlet tileRowA = i32(localId.y) * ${_};\nlet tileColA = i32(localId.x) * ${v};\nlet tileRowB = i32(localId.y) * ${S};\n// Loop over shared dimension.\nfor (var t = 0; t < num_tiles; t = t + 1) {\n  // Load one tile of A into local memory.\n  for (var innerRow = 0; innerRow < ${_}; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < ${v}; innerCol = innerCol + 1) {\n      let inputRow = tileRowA + innerRow;\n      let inputCol = tileColA + innerCol;\n      ${Xs(i,o)}\n    }\n  }\n\n  // Load one tile of B into local memory.\n  for (var innerRow = 0; innerRow < ${S}; innerRow = innerRow + 1) {\n    for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n      let inputRow = tileRowB + innerRow;\n      let inputCol = tileCol + innerCol;\n      mm_Bsub[inputRow][inputCol] = mm_readB(batch,\n        kStart + inputRow,\n        globalCol + innerCol${o?", batchIndices":""});\n    }\n  }\n  kStart = kStart + tileInner;\n  workgroupBarrier();\n\n  // Compute acc values for a single thread.\n  var BCached : array<${r}, colPerThread>;\n  for (var k = 0; k < tileInner; k = k + 1) {\n    for (var inner = 0; inner < colPerThread; inner = inner + 1) {\n      BCached[inner] = mm_Bsub[k][tileCol + inner];\n    }\n\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      ${wc(i)}\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = acc[innerRow][innerCol] + ACached * BCached[innerCol];\n      }\n    }\n  }\n\n  workgroupBarrier();\n}\n\nfor (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n  for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n    mm_write(batch, globalRow + innerRow, globalCol + innerCol,\n        acc[innerRow][innerCol]);\n  }\n}\n`;return`\n  var<workgroup> mm_Asub : array<array<${r}, ${y}>, ${w}>;\n  var<workgroup> mm_Bsub : array<array<${r}, ${d}>, ${u}>;\n  const rowPerThread = ${e[1]};\n  const colPerThread = ${e[0]};\n  const tileInner = ${u};\n\n@compute @workgroup_size(${t[0]}, ${t[1]}, ${t[2]})\nfn main(@builtin(local_invocation_id) localId : vec3<u32>,\n        @builtin(global_invocation_id) globalId : vec3<u32>,\n        @builtin(workgroup_id) workgroupId : vec3<u32>) {\n    let batch = ${a?"0":"i32(globalId.z)"};\n    ${o?`let batchIndices = ${o.offsetToIndices("u32(batch)")};`:""}\n    let num_tiles = ${a?`${Math.ceil(c/u)}`:"(uniforms.dim_inner - 1) / tileInner + 1"};\n    var kStart = ${a?`i32(globalId.z) * ${c}`:"0"};\n\n    var acc : array<array<${r}, colPerThread>, rowPerThread>;\n\n    // Without this initialization strange values show up in acc.\n    for (var innerRow = 0; innerRow < rowPerThread; innerRow = innerRow + 1) {\n      for (var innerCol = 0; innerCol < colPerThread; innerCol = innerCol + 1) {\n        acc[innerRow][innerCol] = 0.0;\n      }\n    }\n    ${A}\n  }\n`},vc=(e,t,r,o,i,u=!1)=>{let[a,c,p]=i,[h,d,y,w]=o,_=_r(a,p),v=_r(c,p),S=De(o[0].type.tensor),A=()=>{let E=d.rank,P=h.rank,O=`var aIndices: ${d.type.indices};`;for(let R=E-2-1,L=P-1;R>=0;R--,L--)O+=`\naIndices[${R}] = ${P>1?`batchIndices[${L}]`:"batchIndices"};`;return _.forEach(R=>{O+=`\naIndices[${R}] = 0;`}),O+=`\naIndices[${E-2}] = u32(row);\n                   aIndices[${E-1}] = u32(colIn);`,O},I=()=>{let E=y.rank,P=h.rank,O=`var bIndices: ${y.type.indices};`;for(let R=E-2-1,L=P-1;R>=0;R--,L--)O+=`\nbIndices[${R}] = ${P>1?`batchIndices[${L}]`:"batchIndices"};`;return v.forEach(R=>{O+=`\nbIndices[${R}] = 0;`}),O+=`\nbIndices[${E-2}] = u32(row);\n                   bIndices[${E-1}] = u32(colIn);`,O};return`\n    fn mm_readA(batch: i32, row: i32, colIn: i32, batchIndices: ${h.type.indices}) -> ${tt(e,S)} {\n      var value = ${tt(e,S)}(0.0);\n      let col = colIn * ${e};\n      if(row < uniforms.dim_a_outer && col < uniforms.dim_inner)\n      {\n        ${A()}\n        value = ${d.getByIndices("aIndices")};\n      }\n      return value;\n    }\n\n    fn mm_readB(batch: i32, row: i32, colIn: i32, batchIndices: ${h.type.indices}) -> ${tt(e,S)} {\n      var value = ${tt(e,S)}(0.0);\n      let col = colIn * ${e};\n      if(row < uniforms.dim_inner && col < uniforms.dim_b_outer)\n      {\n        ${I()}\n        value = ${y.getByIndices("bIndices")};\n      }\n      return value;\n    }\n\n    fn mm_write(batch: i32, row: i32, colIn: i32, valueIn: ${tt(e,S)}) {\n      let col = colIn * ${e};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {\n        var value = valueIn;\n        let coords = vec3<i32>(batch, row, colIn);\n        ${t?`value = value + ${u?"bias[colIn]":`${tt(e,S)}(bias[row])`};`:""}\n        ${r}\n        ${w.setByIndices("vec3<u32>(coords)","value")}\n      }\n    }\n    `},Un=(e,t,r,o,i=!1)=>{let u=e[0].dims,a=e[1].dims,c=u.slice(0,-2),p=a.slice(0,-2),h=o?o.slice(0,-2):r.slice(0,-2),d=M.size(h),y=u[u.length-2],w=u[u.length-1],_=a[a.length-1],v=w%4===0&&_%4===0,S=y<=8?[4,1,1]:[4,4,1],A=[8,8,1],I=[Math.ceil(_/A[0]/S[0]),Math.ceil(y/A[1]/S[1]),Math.ceil(d/A[2]/S[2])],x=v?4:1,E=[...c,y,w/x],P=E.length,O=[...p,w,_/x],R=O.length,L=[d,y,_/x],N=[{type:6,data:y},{type:6,data:_},{type:6,data:w}];xt(t,N),N.push(...Z(h,E,O));let K=["rank","rank"],Q=e.length>2;Q&&(N.push(...Z(e[2].dims)),K.push("rank")),N.push(...Z(L));let he=W=>{let se=h.length,Ce=An("batchDims",e[0].dataType,se,1),We=De(e[0].dataType),ee=U("a",e[0].dataType,P,x),ae=U("b",e[1].dataType,R,x),Ae=j("result",e[0].dataType,L.length,x),me=[ee,ae];if(Q){let G=i?x:1;me.push(U("bias",e[2].dataType,e[2].dims.length,G))}let ie=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"}];Ct(t,ie);let ue=De(Ae.type.tensor),le=St(t,Ae.type.value,ue),qe=vc(x,Q,le,[Ce,ee,ae,Ae],[c,p,h],i);return`\n  ${W.registerUniforms(ie).registerInternalVariables(Ce).declareVariables(...me,Ae)}\n  ${qe}\n  ${v?Hr(S,A,We,Ce):Lr(S,A,We,Ce)}\n                   `};return{name:"MatMul",shaderCache:{hint:`${S};${t.activation};${v};${i}`,inputDependencies:K},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:I[0],y:I[1],z:I[2]},programUniforms:N}),getShaderSource:he}}});var $c,Qs,Js=Y(()=>{"use strict";ye();Lt();_e();Ft();zn();zo();Fr();$c=(e,t,r,o,i=!1,u,a=4,c=4,p=4,h="f32")=>{let d=Q=>{switch(Q){case 1:return"resData = x[xIndex];";case 3:return`resData = vec3<${h}>(x[xIndex], x[xIndex + 1], x[xIndex + 2]);`;case 4:return"resData = x[xIndex / 4];";default:throw new Error(`innerElementSize ${Q} is not supported.`)}},y=Q=>{switch(Q){case 1:return"return w[row * i32(uniforms.w_shape[3]) + colIn];";case 4:return"return w[row * i32(uniforms.w_shape[3]) / 4 + colIn];";default:throw new Error(`innerElementSize ${Q} is not supported.`)}},w=e?`\n    let coord = vec4<i32>(batch, xRow, xCol, xCh);\n    `:`\n    let coord = vec4<i32>(batch, xCh, xRow, xCol);\n    `,_=e?`\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    `:`\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    `,v=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",S=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",A=e?"row":"col",I=e?"col":"row",x=`\n    let inChannels = i32(uniforms.w_shape[2]);\n    let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n    let outRow = ${A} / outWidth;\n    let outCol = ${A} % outWidth;\n\n    let WRow = ${I} / (i32(uniforms.w_shape[1]) * inChannels);\n    let WCol = ${I} / inChannels % i32(uniforms.w_shape[1]);\n    let xRow = outRow * uniforms.stride[0] + uniforms.dilation[0] * WRow - uniforms.pad[0];\n    let xCol = outCol * uniforms.stride[1] + uniforms.dilation[1] * WCol - uniforms.pad[1];\n    let xCh = ${I} % inChannels;\n    var resData = ${tt(a,h)}(0.0);\n    // The bounds checking is always needed since we use it to pad zero for\n    // the \'same\' padding type.\n    if (xRow >= 0 && xRow < ${v} && xCol >= 0 && xCol < ${S}) {\n      ${w}\n      let xIndex = getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape));\n      ${d(a)}\n    }\n    return resData;`,E=e?t&&o?`\n    let col = colIn * ${a};\n    ${x}`:`\n    let col = colIn * ${a};\n    if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {\n      ${x}\n    }\n    return ${tt(a,h)}(0.0);`:o&&r?`\n    let col = colIn * ${a};\n    ${x}`:`\n    let col = colIn * ${a};\n    if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {\n      ${x}\n    }\n    return ${tt(a,h)}(0.0);`,P=`${y(c)}`,O=tt(p,h),R=e?tt(a,h):tt(c,h),L=e?tt(c,h):tt(a,h),N=St(u,O,h);return`\n    fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${R} {\n      ${e?E:P}\n    }\n\n    fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${L} {\n      ${e?P:E}\n    }\n\n    fn mm_write(batch: i32, row : i32, colIn : i32, valueIn : ${O}) {\n      let col = colIn * ${p};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer)\n      {\n      var value = valueIn;\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      ${_}\n      ${Dn(i)}\n      ${N}\n      setOutputAtCoords(coords[0], coords[1], coords[2], coords[3], value);\n      }\n    }`},Qs=(e,t,r,o,i,u,a,c)=>{let p=t.format==="NHWC",h=p?e[0].dims[3]:e[0].dims[1],d=r[0],y=p?r[2]:r[3],w=p?r[1]:r[2],_=p?r[3]:r[1],v=p&&(h%4===0||h%3===0)&&_%4===0,S=p?_:y*w,A=p?y*w:_,I=[8,8,1],x=o<=8?[4,1,1]:[4,4,1],E=[Math.ceil(S/I[0]/x[0]),Math.ceil(A/I[1]/x[1]),Math.ceil(d/I[2]/x[2])];Ve("verbose",()=>`[conv2d_mm_webgpu] dispatch = ${E}`);let P=v?p&&h%4!==0?3:4:1,O=I[1]*x[1],R=I[0]*x[0],L=Math.max(I[0]*P,I[1]),N=o%O===0,K=i%R===0,Q=u%L===0,he=v?[P,4,4]:[1,1,1],W=[{type:6,data:o},{type:6,data:i},{type:6,data:u},{type:6,data:[t.pads[0],t.pads[1]]},{type:6,data:t.strides},{type:6,data:t.dilations}];xt(t,W),W.push(...Z(e[0].dims,e[1].dims));let se=["rank","rank"];a&&(W.push(...Z(e[2].dims)),se.push("rank")),W.push(...Z(r));let Ce=We=>{let ee=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"pad",type:"i32",length:2},{name:"stride",type:"i32",length:2},{name:"dilation",type:"i32",length:2}];Ct(t,ee);let ae=v?4:1,Ae=De(e[0].dataType),me=`\n      fn setOutputAtIndex(flatIndex : i32, value : ${v?`vec4<${Ae}>`:Ae}) {\n        result[flatIndex] = ${v?`vec4<${Ae}>`:Ae}(value);\n      }\n      fn setOutputAtCoords(d0 : i32, d1 : i32, d2 : i32, d3 : i32, value : ${v?`vec4<${Ae}>`:Ae}) {\n        let flatIndex = getOutputIndexFromCoords(vec4<i32>(d0, d1, d2, d3));\n        setOutputAtIndex(flatIndex ${v?"/ 4":""}, value);\n      }`,ie=U("x",e[0].dataType,e[0].dims.length,P===3?1:P),ue=U("w",e[1].dataType,e[1].dims.length,ae),le=[ie,ue],qe=j("result",e[0].dataType,r.length,ae);if(a){let G=U("bias",e[2].dataType,e[2].dims.length,ae);le.push(G),me+=`\n        fn getBiasByOutputCoords(coords : vec4<i32>) -> ${v?`vec4<${Ae}>`:Ae} {\n          return bias[coords.${p?"w":"y"}${v?"/ 4":""}];\n        }`}return`\n        ${Mn("uniforms.result_strides")}\n        //struct Uniforms { xShape : vec4<i32>, wShape : vec4<i32>, outShape : vec4<i32>,\n        //  outShapeStrides: vec3<i32>, filterDims : vec2<i32>, pad : vec2<i32>, stride : vec2<i32>,\n        //  dilation : vec2<i32>, dimAOuter : i32, dimBOuter : i32, dimInner : i32 };\n        ${We.registerUniforms(ee).declareVariables(...le,qe)}\n        ${me}\n        ${$c(p,N,K,Q,a,t,he[0],he[1],he[2],Ae)}\n        ${v?Hr(x,I,Ae,void 0,!p,L):Lr(x,I,Ae,void 0,!p,L,!1,void 0,c)}`};return{name:"Conv2DMatMul",shaderCache:{hint:`${t.cacheKey};${P};${v};${N};${K};${Q};${O};${R};${L}`,inputDependencies:se},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:E[0],y:E[1],z:E[2]},programUniforms:W}),getShaderSource:Ce}}});var Mo,eu,tu=Y(()=>{"use strict";ye();Se();_e();Uo();Ft();Mo=(e,t,r)=>{let o=e.length>2,i=o?"value += b[output_channel];":"",u=e[0].dims,a=e[1].dims,c=a[0]/t.group,p=t.format==="NHWC",h=Vn(u,a,t.dilations,t.pads,t.strides,p),d=M.size(h),y=[{type:12,data:d},{type:12,data:t.dilations},{type:12,data:[t.strides[0],t.strides[1]]},{type:12,data:[t.pads[0],t.pads[1]]},{type:12,data:c}];xt(t,y),y.push(...Z(u,a));let w=["rank","rank"];o&&(y.push(...Z(e[2].dims)),w.push("rank")),y.push(...Z(h));let _=v=>{let S=j("output",e[0].dataType,h.length),A=De(S.type.tensor),I=St(t,S.type.value,A),x=U("x",e[0].dataType,u.length),E=U("w",e[1].dataType,a.length),P=[x,E];o&&P.push(U("b",e[2].dataType,e[2].dims.length));let O=[{name:"output_size",type:"u32"},{name:"dilations",type:"u32",length:t.dilations.length},{name:"strides",type:"u32",length:2},{name:"pads",type:"u32",length:2},{name:"output_channels_per_group",type:"u32"}];return Ct(t,O),`\n  ${v.registerUniforms(O).declareVariables(...P,S)}\n\n  ${v.mainStart()}\n    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let outputIndices = ${S.offsetToIndices("global_idx")};\n    let batch: u32 = outputIndices[0];\n    let output_channel: u32 = outputIndices[${p?3:1}];\n    let xRCCorner: vec2<u32> = vec2<u32>(outputIndices[${p?1:2}], outputIndices[${p?2:3}]) * uniforms.strides - uniforms.pads;\n    let group_id: u32 = output_channel / uniforms.output_channels_per_group;\n\n    var value: ${S.type.value} = ${S.type.value}(0);\n    for (var wInChannel: u32 = 0u; wInChannel < uniforms.w_shape[1]; wInChannel++) {\n      let input_channel = group_id * uniforms.w_shape[1] + wInChannel;\n      for (var wHeight: u32 = 0u; wHeight < uniforms.w_shape[2]; wHeight++) {\n        let xHeight = xRCCorner.x + wHeight * uniforms.dilations[0];\n\n        if (xHeight < 0u || xHeight >= uniforms.x_shape[${p?1:2}]) {\n          continue;\n        }\n\n        for (var wWidth: u32 = 0u; wWidth < uniforms.w_shape[3]; wWidth++) {\n          let xWidth = xRCCorner.y + wWidth * uniforms.dilations[1];\n          if (xWidth < 0u || xWidth >= uniforms.x_shape[${p?2:3}]) {\n            continue;\n          }\n\n          let xVal = ${p?x.get("batch","xHeight","xWidth","input_channel"):x.get("batch","input_channel","xHeight","xWidth")};\n          let wVal = ${E.get("output_channel","wInChannel","wHeight","wWidth")};\n          value += xVal*wVal;\n        }\n      }\n    }\n    ${i}\n    ${I}\n    ${S.setByOffset("global_idx","value")}\n  }`};return{name:"GroupedConv",shaderCache:{hint:t.cacheKey,inputDependencies:w},getRunData:()=>({outputs:[{dims:r?r(h):h,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:y}),getShaderSource:_}},eu=(e,t,r)=>{let o=e.length>2,i=Me(r[3]),u=Me(r[2]),a=M.size(r)/i/u,c=[e[0].dims[0],e[0].dims[1],e[0].dims[2],e[0].dims[3]/i],p=[e[1].dims[0],e[1].dims[1],e[1].dims[2],e[1].dims[3]/i],h=[r[0],r[1],r[2],r[3]/i],d=[{type:12,data:a},{type:6,data:[t.strides[0],t.strides[1]]},{type:6,data:[t.pads[0],t.pads[1]]}];xt(t,d),d.push(...Z(c,p,h));let y=(u-1)*t.strides[1]+p[1],w=_=>{let v=j("output",e[0].dataType,h.length,i),S=De(v.type.tensor),A=St(t,v.type.value,S),I=U("x",e[0].dataType,c.length,i),x=U("w",e[1].dataType,p.length,i),E=[I,x];o&&E.push(U("b",e[2].dataType,e[2].dims,i));let P=o?"value += b[output_channel];":"",O=[{name:"output_size",type:"u32"},{name:"strides",type:"i32",length:2},{name:"pads",type:"i32",length:2}];return Ct(t,O),`\n  ${_.registerUniforms(O).declareVariables(...E,v)}\n  ${_.mainStart()}\n    ${_.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let width0 = uniforms.output_shape[3];\n    let output_channel = global_idx % width0;\n    var index1 = global_idx / width0;\n    let width1 = uniforms.output_shape[2] / ${u}u;\n    let col = (index1 % width1) * ${u}u;\n    index1 = index1 / width1;\n    let row = index1 % uniforms.output_shape[1];\n    let batch = index1 / uniforms.output_shape[1];\n\n    let x_corner = vec2<i32>(i32(row), i32(col)) * uniforms.strides - uniforms.pads;\n\n    var x_vals: array<${I.type.value}, ${y}>;\n    var values: array<${v.type.value}, ${u}>;\n    let input_channel = output_channel;\n    // Use constant instead of uniform can give better performance for w\'s height/width.\n    for (var w_height: u32 = 0u; w_height < ${p[0]}; w_height++) {\n      let x_height = x_corner.x + i32(w_height);\n      if (x_height >= 0 && u32(x_height) < uniforms.x_shape[1]) {\n        for (var i = 0; i < ${y}; i++) {\n          let x_width = x_corner.y + i;\n          if (x_width >= 0 && u32(x_width) < uniforms.x_shape[2]) {\n            x_vals[i] = ${I.get("batch","u32(x_height)","u32(x_width)","input_channel")};\n          } else {\n            x_vals[i] = ${I.type.value}(0);\n          }\n        }\n        for (var w_width: u32 = 0u; w_width < ${p[1]}; w_width++) {\n          let w_val = ${x.get("w_height","w_width","0","output_channel")};\n          for (var i = 0u; i < ${u}u; i++) {\n            values[i] = fma(x_vals[i * u32(uniforms.strides[1]) + w_width], w_val, values[i]);\n          }\n        }\n      }\n    }\n\n    for (var i = 0u; i < ${u}u; i++) {\n      var value = values[i];\n      ${P}\n      ${A}\n      ${v.set("batch","row","col + i","output_channel","value")};\n    }\n  }`};return{name:"GroupedConv-Vectorize",shaderCache:{hint:`${t.cacheKey};${i};${u};${y};${p[0]};${p[1]}`,inputDependencies:o?["rank","rank","type"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:d}),getShaderSource:w}}});var Vo,_c,ru,Wo=Y(()=>{"use strict";ye();Se();Fr();_e();Ft();Vo=(e,t,r,o,i=!1)=>{let u=e[0].dims,a=e[1].dims,c=u[u.length-2],p=a[a.length-1],h=u[u.length-1],d=Me(p),y=Me(h),w=Me(c),_=M.size(r)/d/w,v=e.length>2,S=o?o.slice(0,-2):r.slice(0,-2),I=[M.size(S),c,p],x=[{type:12,data:_},{type:12,data:c},{type:12,data:p},{type:12,data:h}];xt(t,x),x.push(...Z(S,u,a)),v&&x.push(...Z(e[2].dims)),x.push(...Z(I));let E=P=>{let O=An("batch_dims",e[0].dataType,S.length),R=U("a",e[0].dataType,u.length,y),L=U("b",e[1].dataType,a.length,d),N=j("output",e[0].dataType,I.length,d),K=De(N.type.tensor),Q=St(t,N.type.value,K),he=[R,L],W="";if(v){let ie=i?d:1;he.push(U("bias",e[2].dataType,e[2].dims.length,ie)),W=`${i?`value += bias[col / ${ie}];`:`value += ${N.type.value}(bias[row + i]);`}`}let se=u.slice(0,-2),Ce=a.slice(0,-2),We=_r(se,S),ee=_r(Ce,S),ae=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"}];Ct(t,ae);let Ae=(ie,ue)=>{let le=ie.rank,qe=ie.name;if(le===2)return`var ${qe}_indices = ${ie.type.indices}(0u, 0u);`;let G=O.rank,ne=`var ${qe}_indices: ${ie.type.indices};`;for(let xe=le-2-1,Ke=G-1;xe>=0;xe--,Ke--)ne+=`\n${qe}_indices[${xe}] = ${G>1?`batch_indices[${Ke}]`:"batch_indices"};`;return ue.forEach(xe=>{ne+=`\n${qe}_indices[${xe}] = 0;`}),ne+=`${qe}_indices[${le-2}] = 0u;\n                     ${qe}_indices[${le-1}] = 0u;`,ne},me=()=>{let ie=`var a_data: ${R.type.value};`;for(let ue=0;ue<y;ue++)ie+=`\n              let b_data${ue} = b[(b_offset + (k + ${ue}) * uniforms.N + col) / ${d}];`;for(let ue=0;ue<w;ue++){ie+=`a_data = a[(a_offset + (row + ${ue}) * uniforms.K + k) / ${y}];`;for(let le=0;le<y;le++)ie+=`\n            values[${ue}] = fma(${L.type.value}(a_data${y===1?"":`[${le}]`}), b_data${le}, values[${ue}]);\n`}return ie};return`\n  ${P.registerUniforms(ae).registerInternalVariables(O).declareVariables(...he,N)}\n  ${P.mainStart()}\n    ${P.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let col = (global_idx % (uniforms.N / ${d})) * ${d};\n    var index1 = global_idx / (uniforms.N / ${d});\n    let stride1 = uniforms.M / ${w};\n    let row = (index1 % stride1) * ${w};\n    let batch = index1 / stride1;\n\n    ${r.length===2?"":`let batch_indices = ${O.offsetToIndices("batch")};`}\n    ${Ae(R,We)}\n    let a_offset = ${R.indicesToOffset("a_indices")};\n    ${Ae(L,ee)}\n    let b_offset = ${L.indicesToOffset("b_indices")};\n    var values: array<${N.type.value}, ${w}>;\n    for (var k: u32 = 0u; k < uniforms.K; k = k + ${y}) {\n      ${me()}\n    }\n    for (var i = 0u; i < ${w}u; i++) {\n      var value = values[i];\n      ${W}\n      ${Q}\n      let cur_indices = ${N.type.indices}(batch, row + i, col);\n      let offset = ${N.indicesToOffset("cur_indices")};\n      ${N.setByOffset(`offset / ${d}`,"value")};\n    }\n  }\n  `};return{name:"MatMulNaive",shaderCache:{hint:`${t.activation};${d};${y};${w};${i}`,inputDependencies:v?["rank","rank","rank"]:["rank","rank"]},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:x}),getShaderSource:E}},_c=e=>{if(!e||e.length!==2)throw new Error("MatMul requires 2 inputs.");if(e[0].dims[e[0].dims.length-1]!==e[1].dims[e[1].dims.length-2])throw new Error("shared dimension does not match.")},ru=e=>{_c(e.inputs);let t=It.calcShape(e.inputs[0].dims,e.inputs[1].dims,!0);if(!t)throw new Error("Can\'t use matmul on the given tensors");let r=t[t.length-1],o=e.inputs[0].dims[e.inputs[0].dims.length-1];r<8&&o<8?e.compute(Vo(e.inputs,{activation:""},t)):e.compute(Un(e.inputs,{activation:""},t))}});var Vn,No,Sc,nu,Go,xc,Cc,Ho,Uo=Y(()=>{"use strict";Se();Js();Fr();tu();Ft();Wo();Sr();Vn=(e,t,r,o,i,u)=>{let a=e[0],c=e.slice(u?1:2,u?3:4),p=c.length,h=t[0],y=t.slice(2).map((v,S)=>v+(v-1)*(r[S]-1)),_=c.map((v,S)=>v+o[S]+o[S+p]).map((v,S)=>Math.floor((v-y[S]+i[S])/i[S]));return _.splice(0,0,a),_.splice(u?3:1,0,h),_},No=[2,3,1,0],Sc=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support conv 1D and 2D");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[1]*t.group;if(r!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(e.length===3&&(e[2].dims.length!==1||e[1].dims[0]!==e[2].dims[0]))throw new Error("invalid bias");let i=e[0].dims.length-2;if(t.dilations.length!==i)throw new Error(`dilations should be ${i}D`);if(t.strides.length!==i)throw new Error(`strides should be ${i}D`);if(t.pads.length!==i*2)throw new Error(`pads should be ${i*2}D`);if(t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape")},nu=(e,t)=>{let r=e.kernelShape.slice();for(let u=2;u<t[1].dims.length;++u)r[u-2]===0&&(r[u-2]=t[1].dims[u]);let o=e.pads.slice();nr.adjustPadsBasedOnAutoPad(t[0].dims,e.strides,e.dilations,r,o,e.format==="NHWC",e.autoPad);let i=Object.assign({},e);return Object.assign(i,{kernelShape:r,pads:o}),i},Go=e=>{let t=Bn(e),r=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],i=e.dilations,u=e.group,a=e.kernel_shape,c=e.pads,p=e.strides,h=e.w_is_const();return{autoPad:o,format:r,dilations:i,group:u,kernelShape:a,pads:c,strides:p,wIsConst:h,...t,cacheKey:`${e.format};${t.activation};`}},xc=(e,t,r)=>{let o=nu(r,t),i=r.format==="NHWC";if(r.group!==1){if(!e.adapterInfo.isArchitecture("ampere")&&i&&t[1].dims[0]===r.group&&t[1].dims[1]===1&&r.dilations[0]===1&&r.dilations[1]===1){let L=Vn(t[0].dims,t[1].dims,r.dilations,o.pads,r.strides,i),N=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=N);let K=[t[0],N];t.length===3&&K.push(t[2]),e.compute(eu(K,o,L),{inputs:K})}else e.compute(Mo(t,o));return}let u=t.length===3,a=t[0].dims[i?1:2],c=t[0].dims[i?2:3],p=t[0].dims[i?3:1],h=t[1].dims[2],d=t[1].dims[3],y=Vn(t[0].dims,t[1].dims,r.dilations,o.pads,r.strides,i),w=y[i?1:2],_=y[i?2:3],v=y[i?3:1],S=i&&h===a&&d===c&&r.pads[0]===0&&r.pads[1]===0;if(S||h===1&&d===1&&r.dilations[0]===1&&r.dilations[1]===1&&r.strides[0]===1&&r.strides[1]===1&&r.pads[0]===0&&r.pads[1]===0){let R=y[0],L,N,K,Q=[];if(i){let se=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];if(r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=se),S){let Ce=a*c*p;L=t[0].reshape([1,R,Ce]),N=se.reshape([1,Ce,v]),K=[1,R,v]}else L=t[0].reshape([R,a*c,p]),N=se.reshape([1,p,v]),K=[R,w*_,v];Q.push(L),Q.push(N)}else L=t[0].reshape([R,p,a*c]),N=t[1].reshape([1,v,p]),K=[R,v,w*_],Q.push(N),Q.push(L);u&&Q.push(t[2]);let he=K[2],W=Q[0].dims[Q[0].dims.length-1];he<8&&W<8?e.compute(Vo(Q,o,y,K,i),{inputs:Q}):e.compute(Un(Q,o,y,K,i),{inputs:Q});return}let A=!0,I=e.kernelCustomData.wT??e.compute(yt(t[1],No),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=I);let x=[t[0],I];u&&x.push(t[2]);let E=i?w*_:v,P=i?v:w*_,O=h*d*p;e.compute(Qs(x,o,y,E,P,O,u,A),{inputs:x})},Cc=(e,t)=>{let r=t.format==="NHWC",o=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&o.push(e.inputs[2]);let i=[0,t.pads[0],0,t.pads[1]],u=[1].concat(t.strides),a=[1].concat(t.dilations),c=[1].concat(t.kernelShape),p=nu({...t,pads:i,strides:u,dilations:a,kernelShape:c},o);e.compute(Mo(o,p,h=>r?[h[0],h[2],h[3]]:[]))},Ho=(e,t)=>{Sc(e.inputs,t),e.inputs[0].dims.length===3?Cc(e,t):xc(e,e.inputs,t)}});var Ac,ou,iu=Y(()=>{"use strict";ye();Lt();_e();Ft();zn();zo();Fr();Ac=(e,t=!1,r,o,i=4)=>{let u=I=>{switch(I){case 1:return"return w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];";case 4:return`\n            let coord1 = vec4<i32>(coordX, coordY, col + 1, rowInner);\n            let coord2 = vec4<i32>(coordX, coordY, col + 2, rowInner);\n            let coord3 = vec4<i32>(coordX, coordY, col + 3, rowInner);\n            let v0 = w[getIndexFromCoords4D(coord, vec4<i32>(uniforms.w_shape))];\n            let v1 = w[getIndexFromCoords4D(coord1, vec4<i32>(uniforms.w_shape))];\n            let v2 = w[getIndexFromCoords4D(coord2, vec4<i32>(uniforms.w_shape))];\n            let v3 = w[getIndexFromCoords4D(coord3, vec4<i32>(uniforms.w_shape))];\n            return ${o}(v0, v1, v2, v3);\n            `;default:throw new Error(`innerElementSize ${I} is not supported.`)}},a=e?`\n      let coord = vec4<i32>(batch, iXR, iXC, xCh);\n      `:`\n      let coord = vec4<i32>(batch, xCh, iXR, iXC);\n      `,c=e?`\n    let coords = vec4<i32>(\n      batch,\n      row / outWidth,\n      row % outWidth,\n      col);\n    `:`\n    let coords = vec4<i32>(\n      batch,\n      row,\n      col / outWidth,\n      col % outWidth);\n    `,p=e?"i32(uniforms.x_shape[1])":"i32(uniforms.x_shape[2])",h=e?"i32(uniforms.x_shape[2])":"i32(uniforms.x_shape[3])",d=e?"row":"col",y=e?"col":"row",w=`\n      let inChannels = ${e?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      let outRow = ${d} / outWidth;\n      let outCol = ${d} % outWidth;\n\n      let WRow = ${y} / (uniforms.filter_dims[1] * inChannels);\n      let WCol = ${y} / inChannels % uniforms.filter_dims[1];\n      let xR = f32(outRow - uniforms.pads[0] + uniforms.dilations[0] * WRow) / f32(uniforms.strides[0]);\n      let xC = f32(outCol - uniforms.pads[1] + uniforms.dilations[1] * WCol) / f32(uniforms.strides[1]);\n      if (xR < 0.0 || xR >= f32(${p}) || fract(xR) > 0.0) {\n        return ${o}(0.0);\n      }\n      if (xC < 0.0 || xC >= f32(${h}) || fract(xC) > 0.0) {\n        return ${o}(0.0);\n      }\n      let iXR = i32(xR);\n      let iXC = i32(xC);\n      let xCh = ${y} % inChannels;\n      ${a}\n      return x[getIndexFromCoords4D(coord, vec4<i32>(uniforms.x_shape))/${i}];`,_=e?`\n      let col = colIn * ${i};\n      if (row < uniforms.dim_a_outer && col < uniforms.dim_inner) {\n        ${w}\n      }\n      return ${o}(0.0);`:`\n      let col = colIn * ${i};\n      if (row < uniforms.dim_inner && col < uniforms.dim_b_outer) {\n        ${w}\n      }\n      return ${o}(0.0);`,v=`\n      let col = colIn * ${i};\n      let inChannels = ${e?"i32(uniforms.x_shape[3])":"i32(uniforms.x_shape[1])"};\n      let coordX = uniforms.filter_dims[0] - 1 - row / (uniforms.filter_dims[1] * inChannels);\n      let coordY = uniforms.filter_dims[1] - 1 - (row / inChannels) % uniforms.filter_dims[1];\n      if (${e?"row < uniforms.dim_inner && col < uniforms.dim_b_outer":"row < uniforms.dim_inner && col < uniforms.dim_a_outer"}  && coordX >= 0 && coordY >= 0) {\n        let rowInner = row % inChannels;\n        let coord = vec4<i32>(coordX, coordY, col, rowInner);\n        ${u(i)}\n      }\n      return ${o}(0.0);\n      `,S=St(r,o);return`\n  fn mm_readA(batch: i32, row : i32, colIn : i32) -> ${o} {\n    ${e?_:v}\n  }\n\n  fn mm_readB(batch: i32, row : i32, colIn : i32) -> ${o} {\n    ${e?v:_}\n  }\n\n  fn mm_write(batch: i32, row : i32, colIn : i32, valueInput : ${o}) {\n    let col = colIn * ${i};\n    if (row < uniforms.dim_a_outer && col < uniforms.dim_b_outer) {\n      var value = valueInput;\n      let outWidth = ${e?"i32(uniforms.result_shape[2])":"i32(uniforms.result_shape[3])"};\n      ${c}\n      ${Dn(t)}\n      ${S}\n      result[getIndexFromCoords4D(coords, vec4<i32>(uniforms.result_shape))/${i}] = value;\n    }\n  }`},ou=(e,t,r,o,i,u,a,c)=>{let p=t.format==="NHWC",h=p?e[0].dims[3]:e[0].dims[1],d=r[0],y=p?r[2]:r[3],w=p?r[1]:r[2],_=p?r[3]:r[1],v=p&&h%4===0&&h%3&&_%4===0,S=p?_:y*w,A=p?y*w:_,I=[8,8,1],x=o<=8?[4,1,1]:[4,4,1],E=[Math.ceil(S/I[0]/x[0]),Math.ceil(A/I[1]/x[1]),Math.ceil(d/I[2]/x[2])];Ve("verbose",()=>`[conv_backprop_mm_webgpu] dispatch = ${E}`);let P=v?4:1,O=Math.max(I[0]*P,I[1]),R=v?4:1,L=[t.kernelShape[p?1:2],t.kernelShape[p?2:3]],N=[L[0]+(t.dilations[0]<=1?0:(L[0]-1)*(t.dilations[0]-1)),L[1]+(t.dilations[1]<=1?0:(L[1]-1)*(t.dilations[1]-1))],K=[N[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),N[1]-1-Math.floor((t.pads[1]+t.pads[3])/2)],Q=[{type:6,data:o},{type:6,data:i},{type:6,data:u},{type:6,data:t.strides},{type:6,data:t.dilations},{type:6,data:L},{type:6,data:K}];xt(t,Q),Q.push(...Z(e[0].dims,e[1].dims));let he=["rank","rank"];a&&(Q.push(...Z(e[2].dims)),he.push("rank")),Q.push(...Z(r));let W=se=>{let Ce=U("x",e[0].dataType,e[0].dims.length,R),We=U("w",e[1].dataType,e[1].dims.length,1),ee=j("result",e[0].dataType,r.length,R),ae=[Ce,We],Ae="";if(a){let ue=U("bias",e[2].dataType,e[2].dims.length,R);ae.push(ue),Ae+=`\n          fn getBiasByOutputCoords(coords : vec4<i32>) -> ${ue.type.value} {\n            return bias[coords.${p?"w":"y"}${v?"/ 4":""}];\n          }`}let me=[{name:"dim_a_outer",type:"i32"},{name:"dim_b_outer",type:"i32"},{name:"dim_inner",type:"i32"},{name:"strides",type:"i32",length:2},{name:"dilations",type:"i32",length:2},{name:"filter_dims",type:"i32",length:L.length},{name:"pads",type:"i32",length:K.length}];Ct(t,me);let ie=De(e[0].dataType,1);if(ie!=="f16"&&ie!=="f32")throw new Error(`elemType ${ie} is not supported.`);return`\n        ${Mn("uniforms.result_strides")}\n        ${se.registerUniforms(me).declareVariables(...ae,ee)};\n        ${Ae}\n        ${Ac(p,a,t,Ce.type.value,P)}\n        ${v?Hr(x,I,ie,void 0,!p,O):Lr(x,I,ie,void 0,!p,O,!1,void 0,c)}`};return{name:"Conv2DTransposeMatMul",shaderCache:{hint:`${t.cacheKey};${x};${I};${v}`,inputDependencies:he},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:E[0],y:E[1],z:E[2]},programUniforms:Q}),getShaderSource:W}}});var Ic,Lo,au=Y(()=>{"use strict";ye();Lt();Se();_e();Ic=(e,t,r,o,i,u=!1,a,c,p=!1)=>{let h=p?1:2,d=p?2:3,y=p?3:1,w=u?2:1,_=`\n  fn setOutputAtIndex(flatIndex : u32, value : ${u?`vec4<${a}>`:a}) {\n    result[flatIndex] = ${u?`vec4<${a}>`:a}(value);\n  }`;o&&(_+=`\n    fn getBiasByOutputCoords(coords : vec4<u32>) -> ${u?`vec4<${a}>`:a} {\n      return bias[coords.${p?"w":"y"}${u?"/ 4":""}];\n    }`);let v=u?4:1,S=U("W",t[1].dataType,t[1].dims.length,v),A=U("Dy",t[0].dataType,t[0].dims.length,v),I=[A,S];o&&I.push(U("bias",t[2].dataType,[r[y]].length,v));let x=j("result",t[0].dataType,r.length,v),E=`{\n        let batch: u32 = ${i?"global_id.z":"workgroup_id.z"} / uniforms.result_shape[1];\n        let r = ${i?"global_id.z":"workgroup_id.z"} % uniforms.result_shape[1];\n        let c = ${i?"global_id.y":"workgroup_id.y"} * ${w};\n        let d1: u32 = ${i?"global_id.x":"workgroup_id.x"} * 4;\n\n        let dyCorner = vec2<i32>(i32(r), i32(c)) - vec2<i32>(uniforms.pads);\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        var dotProd: array<vec4<${a}>, ${w}>;\n        for (var i = 0; i < ${w}; i++) {\n          dotProd[i] = vec4<${a}>(0.0);\n        }\n        for (var wR: u32 = 0; wR < uniforms.filter_dims[0]; wR = wR + 1) {\n          var dyR = (${a}(dyCorner.x) + ${a}(wR)) / ${a}(uniforms.strides.x);\n          let wRPerm = uniforms.filter_dims[0] - 1 - wR;\n          if (dyR < 0.0 || dyR >= ${a}(uniforms.Dy_shape[1]) ||\n              fract(dyR) > 0.0 || wRPerm < 0) {\n            continue;\n          }\n          let idyR: u32 = u32(dyR);\n\n          for (var wC: u32 = 0; wC < uniforms.filter_dims[1]; wC = wC + 1) {\n            let dyC = (${a}(dyCorner.y) + ${a}(wC)) / ${a}(uniforms.strides.y);\n            let dyC2 = (${a}(dyCorner.y) + 1.0 + ${a}(wC)) / ${a}(uniforms.strides.y);\n            let wCPerm = uniforms.filter_dims[1] - 1 - wC;\n            if (wCPerm < 0) {\n              continue;\n            }\n            var bDyCVal = true;\n            var bDyCVal2 = true;\n            if (dyC < 0.0 || dyC >= ${a}(uniforms.Dy_shape[2]) ||\n                fract(dyC) > 0.0) {\n              bDyCVal = false;\n            }\n            if (dyC2 < 0.0 || dyC2 >= ${a}(uniforms.Dy_shape[2]) ||\n                fract(dyC2) > 0.0) {\n              bDyCVal2 = false;\n            }\n\n            let idyC: u32 = u32(dyC);\n            let idyC2: u32 = u32(dyC2);\n            if (bDyCVal && bDyCVal2) {\n              let d2Length = uniforms.Dy_shape[3];\n              for (var d2 :u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n\n                xValue =  ${A.get("batch","idyR","idyC2","d2")};\n\n                dotProd[1] = dotProd[1] + vec4<${a}>(dot(xValue, wValue0),\n                                                    dot(xValue, wValue1),\n                                                    dot(xValue, wValue2),\n                                                    dot(xValue, wValue3));\n              }\n            } else if (bDyCVal) {\n              let d2Length = uniforms.Dy_shape[${y}];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[0] = dotProd[0] + tmpval;\n              }\n            } else if (bDyCVal2) {\n              let d2Length = uniforms.Dy_shape[3];\n              for (var d2: u32 = 0; d2 < d2Length; d2 = d2 + 4) {\n                let wValue0 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1","d2")};\n                let wValue1 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 1","d2")};\n                let wValue2 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 2","d2")};\n                let wValue3 = ${S.get("u32(wRPerm)","u32(wCPerm)","d1 + 3","d2")};\n\n                var xValue = ${A.get("batch","idyR","idyC2","d2")};\n                let tmpval = vec4<${a}>(dot(xValue, wValue0),\n                                      dot(xValue, wValue1),\n                                      dot(xValue, wValue2),\n                                      dot(xValue, wValue3));\n                dotProd[1] = dotProd[1] + tmpval;\n              }\n            }\n          }\n        }\n\n        for (var i: u32 = 0; i < ${w}; i = i + 1) {\n          let value = dotProd[i] + ${o?"bias[c+i]":`vec4<${a}>(0.0)`};\n          ${x.set("batch","r","c + i","d1","value")};\n        }\n      }`,P=`\n          let outputIndices = ${x.offsetToIndices("global_idx")};\n          let batch = ${x.indicesGet("outputIndices",0)};\n          let d1 = ${x.indicesGet("outputIndices",y)};\n          let r = ${x.indicesGet("outputIndices",h)};\n          let c = ${x.indicesGet("outputIndices",d)};\n          let dyCorner = vec2<i32>(i32(r), i32(c)) - uniforms.pads;\n          let dyRCorner = dyCorner.x;\n          let dyCCorner = dyCorner.y;\n          let groupId = d1 / uniforms.output_channels_per_group;\n          let wOutChannel = d1 - groupId * uniforms.output_channels_per_group;\n          // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n          // ? = to be determined. : = across all values in that axis.\n          var dotProd = ${a}(0.0);\n          for (var wR: u32 = 0; wR < uniforms.effective_filter_dims.x; wR = wR + 1) {\n            if (wR % uniforms.dilations.x != 0) {\n              continue;\n            }\n            let dyR = (${a}(dyRCorner) + ${a}(wR)) / ${a}(uniforms.strides[0]);\n            let wRPerm = uniforms.filter_dims.x - 1 - wR / uniforms.dilations.x;\n            if (dyR < 0.0 || dyR >= ${a}(uniforms.Dy_shape[${h}]) || fract(dyR) > 0.0 ||\n                wRPerm < 0) {\n              continue;\n            }\n            let idyR: u32 = u32(dyR);\n\n            for (var wC: u32 = 0; wC < uniforms.effective_filter_dims.y; wC = wC + 1) {\n              if (wC % uniforms.dilations.y != 0) {\n                continue;\n              }\n              let dyC = (${a}(dyCCorner) + ${a}(wC)) / ${a}(uniforms.strides.y);\n              let wCPerm = uniforms.filter_dims.y - 1 - wC / uniforms.dilations.y;\n              if (dyC < 0.0 || dyC >= ${a}(uniforms.Dy_shape[${d}]) ||\n                  fract(dyC) > 0.0 || wCPerm < 0) {\n                continue;\n              }\n              let idyC: u32 = u32(dyC);\n              var inputChannel = groupId * uniforms.input_channels_per_group;\n              for (var d2: u32 = 0; d2 < uniforms.input_channels_per_group; d2 = d2 + 1) {\n                let xValue = ${p?A.get("batch","idyR","idyC","inputChannel"):A.get("batch","inputChannel","idyR","idyC")};\n                let wValue = ${S.get("inputChannel","wOutChannel","u32(wRPerm)","u32(wCPerm)")};\n                dotProd = dotProd + xValue * wValue;\n                inputChannel = inputChannel + 1;\n              }\n            }\n          }\n          let value = dotProd + ${o?"bias[d1]":`${a}(0.0)`};\n          ${x.setByOffset("global_idx","value")};\n        `;return`\n  ${e.registerUniforms(c).declareVariables(...I,x)}\n  ${_}\n\n    ${e.mainStart()}\n    ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")};\n  ${u?E:P}}`},Lo=(e,t,r)=>{let o=e.length>2,i=t.outputShape,u=M.size(i),a=[Math.ceil(u/64),1,1];Ve("verbose",()=>`[conv2d_backprop_webgpu] dispatch = ${a}`);let c=t.format==="NHWC",p=["rank","rank"],h=[t.strides[0],t.strides[1]],d=[t.kernelShape[c?1:2],t.kernelShape[c?2:3]],y=[t.dilations[0],t.dilations[1]],w=[d[0]+(t.dilations[0]<=1?0:(t.kernelShape[c?1:2]-1)*(t.dilations[0]-1)),d[1]+(t.dilations[1]<=1?0:(t.kernelShape[c?2:3]-1)*(t.dilations[1]-1))],_=[w[0]-1-Math.floor((t.pads[0]+t.pads[2])/2),w[1]-1-Math.floor(t.pads[1]+t.pads[3])/2],v=!1,S=t.group,A=e[1].dims,I=A[0]/S,x=A[1],E=[{type:12,data:u},{type:12,data:h},{type:12,data:d},{type:12,data:y},{type:12,data:w},{type:6,data:_},{type:12,data:I},{type:12,data:x},...Z(e[0].dims,e[1].dims)];o&&(E.push(...Z(e[2].dims)),p.push("rank")),E.push(...Z(i));let P=a[1]===1&&a[2]===1,O=R=>{let L=[{name:"output_size",type:"u32"},{name:"strides",type:"u32",length:h.length},{name:"filter_dims",type:"u32",length:d.length},{name:"dilations",type:"u32",length:d.length},{name:"effective_filter_dims",type:"u32",length:w.length},{name:"pads",type:"i32",length:_.length},{name:"input_channels_per_group",type:"u32"},{name:"output_channels_per_group",type:"u32"}],N=De(e[0].dataType);return`${Ic(R,e,i,o,P,v,N,L,c)}`};return{name:"ConvTranspose2D",shaderCache:{hint:`${t.cacheKey};`,inputDependencies:p},getRunData:()=>({dispatchGroup:{x:a[0],y:a[1],z:a[2]},outputs:[{dims:r?r(i):i,dataType:e[0].dataType}],programUniforms:E}),getShaderSource:O}}});var Tc,Ec,Pc,su,uu,kc,Oc,Rc,Bc,du,lu=Y(()=>{"use strict";iu();au();Ft();Sr();Tc=(e,t,r,o,i,u)=>(e-1)*t+r+(o-1)*i+1-u,Ec=(e,t,r,o,i)=>{let u=Math.floor(e/2);t==="SAME_UPPER"?(r[o]=u,r[i]=e-u):t==="SAME_LOWER"&&(r[o]=e-u,r[i]=u)},Pc=(e,t,r,o,i,u,a,c,p,h)=>{let d=e.length-2,y=h.length===0;if(p.length===0)for(let v=0;v<d;++v)p.push(0);let w=e[0],_=t[c?3:1]*i;for(let v=0,S=e.length-d-(c?1:0);v<d;++v,++S){let A=e[S],I=y?A*a[v]:h[v],x=Tc(A,a[v],u[v],t[S],r[v],I);Ec(x,o,u,v,v+d),y&&h.push(a[v]*(A-1)+p[v]+(t[S]-1)*r[v]+1-u[v]-u[v+d])}h.splice(0,0,w),h.splice(c?3:1,0,_)},su=(e,t)=>{let r=e.kernelShape.slice();if(e.kernelShape.length===0||e.kernelShape.reduce((y,w)=>y*w,1)===0){r.length=0;for(let y=2;y<t[1].dims.length;++y)r.push(t[1].dims[y])}let o=e.format==="NHWC";r.splice(0,0,t[1].dims[0]),r.splice(o?3:1,0,t[1].dims[1]);let i=e.pads.slice(),u=e.outputShape.slice(),a=e.outputPadding.slice(),c=t[0].dims,p=e.dilations.slice();if(p.reduce((y,w)=>y+w,0)===0){let y=t[0].dims.length-2;p=new Array(y).fill(1)}let h=e.strides.slice();if(h.reduce((y,w)=>y+w,0)===0){let y=t[0].dims.length-2;h=new Array(y).fill(1)}Pc(c,r,p,e.autoPad,e.group,i,h,o,a,u);let d=Object.assign({},e);return Object.assign(d,{kernelShape:r,pads:i,outputPadding:a,outputShape:u,dilations:p,strides:h}),d},uu=e=>{let t=Bn(e),r=e.format,o=["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][typeof e.autoPad>"u"?0:e.autoPad],i=e.dilations,u=e.group,a=e.kernelShape,c=e.pads,p=e.strides,h=e.wIsConst(),d=e.outputPadding,y=e.outputShape;return{autoPad:o,format:r,dilations:i,group:u,kernelShape:a,outputPadding:d,outputShape:y,pads:c,strides:p,wIsConst:h,...t,cacheKey:`${e.format};${t.activation};`}},kc=(e,t)=>{if(!e||e.length!==2&&e.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(e[0].dims.length!==4&&e[0].dims.length!==3)throw new Error("currently only support 2-dimensional conv");if(e[0].dims.length!==e[1].dims.length)throw new Error("filter does not have same dimension as input");let r=e[0].dims[t.format==="NHWC"?e[0].dims.length-1:1],o=e[1].dims[0];if(r!==o)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let i=e[1].dims[1]*t.group;if(e.length===3&&(e[2].dims.length!==1||e[2].dims[0]!==i))throw new Error("invalid bias");let u=e[0].dims.length-2;if(t.dilations.reduce((d,y)=>d+y,0)>0&&t.dilations.length!==u)throw new Error(`dilations should be ${u}D`);if(t.strides.reduce((d,y)=>d+y,0)>0&&t.strides.length!==u)throw new Error(`strides should be ${u}D`);if(t.pads.reduce((d,y)=>d+y,0)>0&&t.pads.length!==u*2)throw new Error(`pads should be ${u*2}D`);if(t.outputPadding.length!==u&&t.outputPadding.length!==0)throw new Error(`output_padding should be ${u}D`);if(t.kernelShape.reduce((d,y)=>d+y,0)>0&&t.kernelShape.length!==0&&t.kernelShape.length!==e[1].dims.length-2)throw new Error("invalid kernel shape");if(t.outputShape.length!==0&&t.outputShape.length!==e[0].dims.length-2)throw new Error("invalid output shape")},Oc=[2,3,1,0],Rc=(e,t,r)=>{let o=su(r,t),i=r.format==="NHWC",u=o.outputShape,a=u[i?3:1],c=t[0].dims[i?3:1];if(o.group!==1||a===1&&c===1){e.compute(Lo(t,o));return}let p=u[i?1:2],h=u[i?2:3],d=t[1].dims[2],y=t[1].dims[3],w=i?p*h:a,_=i?a:p*h,v=d*y*c,S=!0,A=e.kernelCustomData.wT??e.compute(yt(t[1],Oc),{inputs:[1],outputs:[r.wIsConst?-2:-1]})[0];r.wIsConst&&!e.kernelCustomData.wT&&(e.kernelCustomData.wT=A);let I=[t[0],A],x=t.length===3;x&&(!i&&t[2].dims.length===1?I.push(t[2].reshape([t[2].dims[0],1,1])):I.push(t[2])),e.compute(ou(I,o,u,w,_,v,x,S),{inputs:I})},Bc=(e,t)=>{let r=t.format==="NHWC",o=[e.inputs[0].reshape(r?[e.inputs[0].dims[0],1,e.inputs[0].dims[1],e.inputs[0].dims[2]]:[e.inputs[0].dims[0],e.inputs[0].dims[1],1,e.inputs[0].dims[2]]),e.inputs[1].reshape([e.inputs[1].dims[0],e.inputs[1].dims[1],1,e.inputs[1].dims[2]])];e.inputs.length===3&&o.push(e.inputs[2]);let i=t.kernelShape;(i.length===0||i[0]===0)&&(i=[e.inputs[1].dims[2]]);let u=t.dilations;(u.length===0||u[0]===0)&&(u=[1]);let a=t.strides;(a.length===0||a[0]===0)&&(a=[1]);let c=t.pads;c.length===0&&(c=[0,0]),c=[0,c[0],0,c[1]],a=[1].concat(a),u=[1].concat(u),i=[1].concat(i);let p=su({...t,pads:c,strides:a,dilations:u,kernelShape:i},o);e.compute(Lo(o,p,h=>r?[h[0],h[2],h[3]]:[h[0],h[1],h[3]]))},du=(e,t)=>{kc(e.inputs,t),e.inputs[0].dims.length===3?Bc(e,t):Rc(e,e.inputs,t)}});var Dc,cu,pu,mu=Y(()=>{"use strict";ye();Se();Ze();_e();Dc=(e,t,r,o)=>{let i=M.size(t),u=t.length,a=U("input",e,u),c=j("output",e,u),p=r.dataType===6?r.getInt32Array()[0]:Number(r.getBigInt64Array()[0]),h=M.normalizeAxis(p,u),d=y=>{let w=` i32(${a.indicesGet("inputIndices","uniforms.axis")}) `,_=fe("uniforms.input_shape","uniforms.axis",u),v=o.reverse?w+(o.exclusive?" + 1":""):"0",S=o.reverse?_:w+(o.exclusive?"":" + 1");return`\n                ${y.registerUniform("outputSize","u32").registerUniform("axis","u32").declareVariables(a,c)}\n                ${y.mainStart()}\n                  ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n                  var inputIndices = ${c.offsetToIndices("global_idx")};\n                  var sum = ${c.type.value}(0);\n                  let first : i32 = ${v};\n                  let last : i32 = ${S};\n                  for (var i : i32 = first; i < last; i++) {\n                    ${a.indicesSet("inputIndices","uniforms.axis","u32(i)")};\n                    sum = sum + ${a.getByIndices("inputIndices")};\n                  }\n                  ${c.setByOffset("global_idx","sum")};\n                }`};return{name:"CumSum",shaderCache:{hint:o.cacheKey,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:t,dataType:e}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},{type:12,data:h},...Z(t,t)]}),getShaderSource:d}},cu=(e,t)=>{let r=e.inputs[0].dims,o=e.inputs[0].dataType,i=e.inputs[1];e.compute(Dc(o,r,i,t),{inputs:[0]})},pu=e=>{let t=e.exclusive===1,r=e.reverse===1;return ve({exclusive:t,reverse:r})}});var zc,Mc,Uc,fu,hu,gu=Y(()=>{"use strict";ye();Se();Ze();_e();zc=e=>{if(!e||e.length!==1)throw new Error("DepthToSpace requires 1 input.");if(e[0].dims.length!==4)throw new Error("DepthToSpace requires 4D input.")},Mc=(e,t,r,o)=>{let i=[];i.push(`fn perm(i: ${o.type.indices}) -> ${r.type.indices} {\n    var a: ${r.type.indices};`);for(let u=0;u<t;++u)i.push(r.indicesSet("a",e[u],`i[${u}]`));return i.push("return a;}"),i.join(`\n`)},Uc=(e,t)=>{let r,o,i,u,a,c,p=t.format==="NHWC",h=t.blocksize,d=t.mode==="DCR";p?([r,o,i,u]=e.dims,a=d?[r,o,i,h,h,u/h**2]:[r,o,i,u/h**2,h,h],c=d?[0,1,3,2,4,5]:[0,1,4,2,5,3]):([r,o,i,u]=[e.dims[0],e.dims[2],e.dims[3],e.dims[1]],a=d?[r,h,h,u/h**2,o,i]:[r,u/h**2,h,h,o,i],c=d?[0,3,4,1,5,2]:[0,1,4,2,5,3]);let y=e.reshape(a),w=y.dims.length,_=e.dataType,v=U("a",_,w),S=j("output",_,w),A=I=>`\n  ${I.registerUniform("output_size","u32").declareVariables(v,S)}\n\n  ${Mc(c,w,v,S)}\n\n  ${I.mainStart()}\n    ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let indices = ${S.offsetToIndices("global_idx")};\n    let aIndices = perm(indices);\n\n    ${S.setByOffset("global_idx",v.getByIndices("aIndices"))}\n  }`;return{name:"DepthToSpace",shaderCache:{hint:`${e.dims};${t.blocksize};${t.mode}`,inputDependencies:["rank"]},getRunData:I=>{let x=p?[r,o*h,i*h,u/h**2]:[r,u/h**2,o*h,i*h],E=M.size(x),P=y.dims,O=M.sortBasedOnPerm(P,c);return{outputs:[{dims:x,dataType:I[0].dataType}],dispatchGroup:{x:Math.ceil(E/64)},programUniforms:[{type:12,data:E},...Z(P,O)]}},getShaderSource:A}},fu=(e,t)=>{zc(e.inputs),e.compute(Uc(e.inputs[0],t))},hu=e=>ve({blocksize:e.blocksize,mode:e.mode,format:e.format})});var Fo,Wn,yu,Vc,Wc,qo,jo,bu,Nc,wu,vu,$u=Y(()=>{"use strict";ye();Se();Ze();_e();Fo="[a-zA-Z]|\\\\.\\\\.\\\\.",Wn="("+Fo+")+",yu="^"+Wn+"$",Vc="("+Wn+",)*"+Wn,Wc="^"+Vc+"$",qo=class{constructor(t=-1){this.symbolToIndices=new Map,this.inputIndex=t}addSymbol(t,r){let o=this.symbolToIndices.get(t);o===void 0?o=[r]:o.push(r),this.symbolToIndices.set(t,o)}},jo=class{constructor(t,r){this.equation=r;this.hasEllipsis=!1,this.symbolToInfo=new Map,this.lhs=new Array,this.outputDims=[];let[o,i]=r.includes("->")?r.split("->",2):[r,""];if(!o.match(RegExp(Wc)))throw new Error("Invalid LHS term");if(o.split(",").forEach((c,p)=>{let h=t[p].dims.slice();if(!c.match(RegExp(yu)))throw new Error("Invalid LHS term");let d=this.processTerm(c,!0,h,p);this.lhs.push(d)}),i==="")i+=[...this.symbolToInfo.entries()].filter(([c,p])=>p.count===1||c==="...").map(([c])=>c).join("");else if(!i.match(RegExp(Wn)))throw new Error("Invalid RHS");i.match(RegExp(Fo,"g"))?.forEach(c=>{if(c==="...")this.outputDims=this.outputDims.concat(this.ellipsisDims);else{let p=this.symbolToInfo.get(c);if(p===void 0)throw new Error("Invalid RHS symbol");this.outputDims.push(p.dimValue)}}),this.rhs=this.processTerm(i,!1,this.outputDims)}addSymbol(t,r,o){let i=this.symbolToInfo.get(t);if(i!==void 0){if(i.dimValue!==r&&i.count!==1)throw new Error("Dimension mismatch");i.count++,i.inputIndices.push(o)}else i={count:1,dimValue:r,inputIndices:[o]};this.symbolToInfo.set(t,i)}processTerm(t,r,o,i=-1){let u=o.length,a=!1,c=[],p=0;if(!t.match(RegExp(yu))&&!r&&t!=="")throw new Error("Invalid LHS term");let h=t.match(RegExp(Fo,"g")),d=new qo(i);return h?.forEach((y,w)=>{if(y==="..."){if(a)throw new Error("Only one ellipsis is allowed per input term");a=!0;let _=u-h.length+1;if(_<0)throw new Error("Ellipsis out of bounds");if(c=o.slice(p,p+_),this.hasEllipsis){if(this.ellipsisDims.length!==c.length||this.ellipsisDims.toString()!==c.toString())throw new Error("Ellipsis dimensions mismatch")}else if(r)this.hasEllipsis=!0,this.ellipsisDims=c;else throw new Error("Ellipsis must be specified in the LHS");for(let v=0;v<c.length;v++){let S=String.fromCharCode("0".charCodeAt(0)+v);d.addSymbol(S,w+v),this.addSymbol(S,o[p++],i)}}else d.addSymbol(y,w+(this.hasEllipsis?this.ellipsisDims.length-1:0)),this.addSymbol(y,o[p++],i)}),d}},bu=e=>e+"_max",Nc=(e,t,r,o)=>{let u=e.map(d=>d.length).map((d,y)=>U(`input${y}`,t,d)),a=M.size(o),c=j("output",t,o.length),p=[...r.symbolToInfo.keys()].filter(d=>!r.rhs.symbolToIndices.has(d)),h=d=>{let y=[],w="var prod = 1.0;",_="var sum = 0.0;",v="sum += prod;",S=[],A=[],I=[],x=[],E=r.symbolToInfo.size===r.rhs.symbolToIndices.size;r.symbolToInfo.forEach((O,R)=>{if(r.rhs.symbolToIndices.has(R)){let L=r.rhs.symbolToIndices.get(R)?.[0];L!==void 0&&r.lhs.forEach((N,K)=>{if(O.inputIndices.includes(K)){let Q=N.symbolToIndices.get(R);if(Q===void 0)throw new Error("Invalid symbol error");Q.forEach(he=>{y.push(`${u[K].indicesSet(`input${K}Indices`,he,c.indicesGet("outputIndices",L))}`)})}})}else r.lhs.forEach((L,N)=>{if(O.inputIndices.includes(N)){let K=L.symbolToIndices.get(R);if(K===void 0)throw new Error("Invalid symbol error");K.forEach(Q=>{S.push(`${u[N].indicesSet(`input${N}Indices`,Q,`${R}`)}`)}),x.push(`prod *= ${u[N].getByIndices(`input${N}Indices`)};`)}}),A.push(`for(var ${R}: u32 = 0; ${R} < uniforms.${bu(R)}; ${R}++) {`),I.push("}")});let P=E?[...y,`let sum = ${u.map((O,R)=>O.getByIndices(`input${R}Indices`)).join(" * ")};`]:[...y,_,...A,...S,w,...x,v,...I];return`\n            ${d.registerUniforms(p.map(O=>({name:`${bu(O)}`,type:"u32"}))).registerUniform("outputSize","u32").declareVariables(...u,c)}\n\n            ${d.mainStart()}\n            ${d.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n            var outputIndices = ${c.offsetToIndices("global_idx")};\n            ${u.map((O,R)=>`var input${R}Indices: ${u[R].type.indices};`).join(`\n`)}\n            ${P.join(`\n`)};\n            ${c.setByOffset("global_idx","sum")};\n          }`};return{name:"Einsum",shaderCache:{hint:r.equation,inputDependencies:e.map(()=>"rank")},getRunData:()=>{let d=p.filter(w=>r.symbolToInfo.has(w)).map(w=>({type:12,data:r.symbolToInfo.get(w)?.dimValue||0}));d.push({type:12,data:a});let y=e.map((w,_)=>[...Z(w)]).reduce((w,_)=>w.concat(_),d);return y.push(...Z(o)),{outputs:[{dims:o,dataType:t}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:y}},getShaderSource:h}},wu=(e,t)=>{let r=new jo(e.inputs,t.equation),o=r.outputDims,i=e.inputs.map((u,a)=>u.dims);e.compute(Nc(i,e.inputs[0].dataType,r,o))},vu=e=>{let t=e.equation.replace(/\\s+/g,"");return ve({equation:t})}});var Gc,_u,Hc,Lc,Su,xu=Y(()=>{"use strict";ye();Se();_e();Gc=e=>{if(!e||e.length!==2)throw new Error("Expand requires 2 input.");let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),o=r.length<t.length?0:r.length-t.length,i=t.length<r.length?0:t.length-r.length;for(;o<r.length&&i<t.length;++o,++i)if(r[o]!==t[i]&&r[o]!==1&&t[i]!==1)throw new Error("Expand requires shape to be broadcastable to input")},_u=(e,t)=>{let r=e.length-t.length,o=[];for(let i=0;i<r;++i)o.push(e[i]);for(let i=0;i<t.length;++i)o.push(t[i]===1?e[i+r]:t[i]);return o},Hc=(e,t)=>e.length>t.length?_u(e,t):_u(t,e),Lc=e=>{let t=e[0].dims,r=Array.from(e[1].getBigInt64Array(),Number),o=Hc(t,r),i=e[0].dataType,u=i===9?4:1,a=Math.ceil(M.size(o)/u),c=h=>{let d=U("input",i,t.length,u),y=j("output",i,o.length,u),w;if(i===9){let _=(v,S,A="")=>`\n          let outputIndices${S} = ${y.offsetToIndices(`outputOffset + ${S}u`)};\n          let offset${S} = ${d.broadcastedIndicesToOffset(`outputIndices${S}`,y)};\n          let index${S} = offset${S} / 4u;\n          let component${S} = offset${S} % 4u;\n          ${v}[${S}] = ${A}(${d.getByOffset(`index${S}`)}[component${S}]);\n        `;w=`\n        let outputOffset = global_idx * ${u};\n        var data = vec4<u32>(0);\n        ${_("data",0,"u32")}\n        ${_("data",1,"u32")}\n        ${_("data",2,"u32")}\n        ${_("data",3,"u32")}\n        ${y.setByOffset("global_idx","data")}\n      }`}else w=`\n        let outputIndices = ${y.offsetToIndices("global_idx")};\n        let inputOffset = ${d.broadcastedIndicesToOffset("outputIndices",y)};\n        ${y.setByOffset("global_idx",d.getByOffset("inputOffset"))}\n      }`;return`\n    ${h.registerUniform("vec_size","u32").declareVariables(d,y)}\n    ${h.mainStart()}\n    ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n    ${w}`},p=[{type:12,data:a},...Z(t,o)];return{name:"Expand",shaderCache:{hint:`${o.length}`,inputDependencies:["rank"]},getShaderSource:c,getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:p})}},Su=e=>{Gc(e.inputs),e.compute(Lc(e.inputs),{inputs:[0]})}});var Fc,Cu,Au=Y(()=>{"use strict";ye();Se();_e();Rn();Fc=e=>{let t=e[0].dataType,r=M.size(e[0].dims),o=M.size(e[1].dims),i=o%4===0,u=a=>{let c=U("x",t,[1],4),p=U("bias",t,[1],4),h=j("y",t,[1],4),d=[{name:"output_vec_size",type:"u32"},{name:"bias_size",type:"u32"}],y=_=>`\n      let bias${_}_offset: u32 = (global_idx * 4 + ${_}) % uniforms.bias_size;\n      let bias${_} = ${p.getByOffset(`bias${_}_offset / 4`)}[bias${_}_offset % 4];`,w=i?`\n      let bias = ${p.getByOffset("global_idx % (uniforms.bias_size / 4)")};`:`${y(0)}${y(1)}${y(2)}${y(3)}\n      let bias = ${c.type.value}(bias0, bias1, bias2, bias3);`;return`${a.registerUniforms(d).declareVariables(c,p,h)}\n\n    ${Bo(et(t))}\n\n    ${a.mainStart(or)}\n      ${a.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_vec_size")}\n\n      let x = ${c.getByOffset("global_idx")};\n      ${w}\n      let x_in = x + bias;\n      ${h.setByOffset("global_idx",Do("x_in"))}\n    }`};return{name:"FastGeluWithBias",shaderCache:{hint:`${i}`,inputDependencies:["type","type"]},getShaderSource:u,getRunData:a=>({outputs:[{dims:a[0].dims,dataType:a[0].dataType}],programUniforms:[{type:12,data:Math.ceil(r/4)},{type:12,data:o}],dispatchGroup:{x:Math.ceil(r/or/4)}})}},Cu=e=>{e.inputs.length<2||M.size(e.inputs[1].dims)===0?Bs(e):e.compute(Fc(e.inputs))}});var qc,jc,Iu,Tu,Eu=Y(()=>{"use strict";ye();Se();Ze();_e();qc=e=>{if(!e||e.length!==2)throw new Error("Gather requires 2 inputs.")},jc=(e,t)=>{let r=e[0].dims,o=e[1].dims,i=r.length,u=M.normalizeAxis(t.axis,i),a=r.slice(0);a.splice(u,1,...o);let c=r[u],p=e[0].dataType===9?4:1,h=Math.ceil(M.size(a)/p),d=[{type:12,data:h},{type:6,data:c},{type:12,data:u},...Z(e[0].dims,e[1].dims,a)],y=w=>{let _=U("data",e[0].dataType,e[0].dims.length,p),v=U("inputIndices",e[1].dataType,e[1].dims.length),S=j("output",e[0].dataType,a.length,p),A=x=>{let E=o.length,P=`var indicesIndices${x}  = ${v.type.indices}(0);`;for(let O=0;O<E;O++)P+=`${E>1?`indicesIndices${x}[${O}]`:`indicesIndices${x}`} = ${a.length>1?`outputIndices${x}[uniforms.axis + ${O}]`:`outputIndices${x}`};`;P+=`\n          var idx${x} = ${v.getByIndices(`indicesIndices${x}`)};\n          if (idx${x} < 0) {\n            idx${x} = idx${x} + uniforms.axisDimLimit;\n          }\n          var dataIndices${x} : ${_.type.indices};\n        `;for(let O=0,R=0;O<i;O++)O===u?(P+=`${i>1?`dataIndices${x}[${O}]`:`dataIndices${x}`} = u32(idx${x});`,R+=E):(P+=`${i>1?`dataIndices${x}[${O}]`:`dataIndices${x}`} = ${a.length>1?`outputIndices${x}[${R}]`:`outputIndices${x}`};`,R++);return P},I;if(e[0].dataType===9){let x=(E,P,O="")=>`\n          let outputIndices${P} = ${S.offsetToIndices(`outputOffset + ${P}u`)};\n          ${A(P)};\n          let offset${P} = ${_.indicesToOffset(`dataIndices${P}`)};\n          let index${P} = offset${P} / 4u;\n          let component${P} = offset${P} % 4u;\n          ${E}[${P}] = ${O}(${_.getByOffset(`index${P}`)}[component${P}]);\n        `;I=`\n        let outputOffset = global_idx * ${p};\n        var value = vec4<u32>(0);\n        ${x("value",0,"u32")}\n        ${x("value",1,"u32")}\n        ${x("value",2,"u32")}\n        ${x("value",3,"u32")}\n        ${S.setByOffset("global_idx","value")}\n      `}else I=`\n      let outputIndices = ${S.offsetToIndices("global_idx")};\n      ${A("")};\n      let value = ${_.getByIndices("dataIndices")};\n      ${S.setByOffset("global_idx","value")};\n      `;return`\n      ${w.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(_,v,S)}\n      ${w.mainStart()}\n        ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n        ${I}\n      }`};return{name:"Gather",shaderCache:{hint:t.cacheKey,inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:a,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:d}),getShaderSource:y}},Iu=e=>ve({axis:e.axis}),Tu=(e,t)=>{let r=e.inputs;qc(r),e.compute(jc(e.inputs,t))}});var Kc,Yc,Pu,ku,Ou=Y(()=>{"use strict";ye();Se();Ze();_e();Kc=e=>{if(!e||e.length!==2)throw new Error("GatherElements requires 2 inputs.");if(e[0].dims.length<1)throw new Error("GatherElements requires that the data input be rank >= 1.");if(e[0].dims.length!==e[1].dims.length)throw new Error(`GatherElements requires that the data input and\n                     indices input tensors be of same rank.`)},Yc=(e,t)=>{let r=e[0].dims,o=e[0].dataType,i=r.length,u=e[1].dims,a=e[1].dataType,c=M.normalizeAxis(t.axis,i),p=r[c],h=u.slice(0),d=M.size(h),y=U("input",o,i),w=U("indicesInput",a,u.length),_=j("output",o,h.length),v=[{type:12,data:d},{type:6,data:p},{type:12,data:c}];return v.push(...Z(r,u,h)),{name:"GatherElements",shaderCache:{inputDependencies:["rank","rank"]},getRunData:()=>({outputs:[{dims:h,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(d/64)},programUniforms:v}),getShaderSource:I=>`\n      ${I.registerUniform("outputSize","u32").registerUniform("axisDimLimit","i32").registerUniform("axis","u32").declareVariables(y,w,_)}\n      ${I.mainStart()}\n      ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n      let outputIndices = ${_.offsetToIndices("global_idx")};\n\n      var idx = ${w.getByOffset("global_idx")};\n      if (idx < 0) {\n        idx = idx + uniforms.axisDimLimit;\n      }\n      var inputIndices = ${y.type.indices}(outputIndices);\n      ${y.indicesSet("inputIndices","uniforms.axis","u32(idx)")};\n      let value = ${y.getByIndices("inputIndices")};\n\n      ${_.setByOffset("global_idx","value")};\n  }`}},Pu=e=>ve({axis:e.axis}),ku=(e,t)=>{let r=e.inputs;Kc(r),e.compute(Yc(e.inputs,t))}});var Zc,Xc,Ru,Bu,Du=Y(()=>{"use strict";ye();Se();_e();Zc=e=>{if(!e)throw new Error("Input is missing");if(e.length<2||e.length>3)throw new Error("Invaid input number.");if(e.length===3&&e[2].dims.length>2)throw new Error("Invalid input shape of C");if(e[0].dataType!==e[1].dataType||e.length===3&&e[0].dataType!==e[2].dataType)throw new Error("Input types are mismatched")},Xc=(e,t)=>{let r=e[0].dims.slice(),o=e[1].dims.slice(),[i,u,a]=Sn.getShapeOfGemmResult(r,t.transA,o,t.transB,e.length===3?e[2].dims:void 0),c=[i,u];if(!c)throw new Error("Can\'t use gemm on the given tensors");let p=M.size(c),h=[{type:12,data:p},{type:12,data:i},{type:12,data:u},{type:12,data:a},{type:1,data:t.alpha},{type:1,data:t.beta}],d=["type","type"];e.length===3&&(h.push(...Z(e[2].dims)),d.push("rank")),h.push(...Z(c));let y=w=>{let _="";t.transA&&t.transB?_="value += a[k * uniforms.M + m] * b[n * uniforms.K + k];":t.transA&&!t.transB?_="value += a[k * uniforms.M + m] * b[k * uniforms.N + n];":!t.transA&&t.transB?_="value += a[m * uniforms.K + k] * b[n * uniforms.K + k];":!t.transA&&!t.transB&&(_="value += a[m * uniforms.K + k] * b[k * uniforms.N + n];");let v=t.alpha===1?"":"value *= uniforms.alpha;",S=U("a",e[0].dataType,e[0].dims),A=U("b",e[1].dataType,e[1].dims),I=S.type.value,x=null,E=[S,A];e.length===3&&(x=U("c",e[2].dataType,e[2].dims.length),E.push(x));let P=j("output",e[0].dataType,c.length);E.push(P);let O=[{name:"output_size",type:"u32"},{name:"M",type:"u32"},{name:"N",type:"u32"},{name:"K",type:"u32"},{name:"alpha",type:"f32"},{name:"beta",type:"f32"}];return`\n  ${w.registerUniforms(O).declareVariables(...E)}\n\n  ${w.mainStart()}\n    ${w.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n    let m = global_idx / uniforms.N;\n    let n = global_idx % uniforms.N;\n\n    var value = ${I}(0);\n    for (var k: u32 = 0u; k < uniforms.K; k++) {\n      ${_}\n    }\n\n    ${v}\n    ${(()=>x!=null?`let cOffset = ${x.broadcastedIndicesToOffset("vec2(m, n)",P)}; value += ${I}(uniforms.beta) * ${x.getByOffset("cOffset")};`:"")()}\n    output[global_idx] = value;\n  }`};return{name:"Gemm",shaderCache:{hint:`${t.cacheKey}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:c,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h}),getShaderSource:y}},Ru=e=>{let t=e.transA,r=e.transB,o=e.alpha,i=e.beta;return{transA:t,transB:r,alpha:o,beta:i,cacheKey:`${e.transA};${e.transB};${e.alpha===1}`}},Bu=(e,t)=>{Zc(e.inputs),e.compute(Xc(e.inputs,t))}});var Qc,Jc,ep,zu,Mu=Y(()=>{"use strict";ye();Se();_e();Qc=(e,t)=>{let r=e[0].dims,o=r,i=2,u=M.sizeToDimension(r,i),a=M.sizeFromDimension(r,i),c=Me(a),p=a/c,h=[r[0],r[1],p],d=["rank","type","type"],y=[{type:12,data:a},{type:12,data:p}];y.push(...Z(h,h));let w=_=>{let v=U("x",e[0].dataType,h.length,c),S=U("scale",e[1].dataType,e[1].dims),A=U("bias",e[2].dataType,e[2].dims),I=j("output",e[0].dataType,h.length,c),x=[v,S,A,I],E=v.type.value,P=c===1?"f32":`vec${c}<f32>`,O=64,R=[{name:"normSize",type:"u32"},{name:"normPackedSize",type:"u32"}];return`\n  var<workgroup> meanShared : f32;\n  var<workgroup> squaredNormShared : f32;\n  var<workgroup> workgroupShared : array<${P}, ${O}>;\n  const workgroupSize = ${O}u;\n  ${_.registerUniforms(R).declareVariables(...x)}\n  ${_.mainStart(O)}\n    let norm = global_idx / workgroupSize;\n    let batch = norm / uniforms.x_shape[1];\n    let channel = norm % uniforms.x_shape[1];\n    let localIndex = local_id.x;\n\n    // initialize workgroup memory\n    var initial = ${P}(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      initial = initial + ${P}(${v.get("batch","channel","h")});\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the mean of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      meanShared = ${_t("workgroupShared[0]",c)} / f32(uniforms.normSize);\n    }\n    workgroupBarrier();\n\n    // reinitialize workgroup memory.\n    initial = ${P}(0);\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let deviation =  ${P}(${v.get("batch","channel","h")}) - ${P}(meanShared);\n      initial = initial + deviation * deviation;\n    }\n    workgroupShared[localIndex] = initial;\n    workgroupBarrier();\n\n    // Calculate the sum of square of deviation of current channel data.\n    for (var currSize = workgroupSize >> 1;  currSize > 0; currSize = currSize >> 1) {\n      if (localIndex < currSize) {\n        workgroupShared[localIndex] = workgroupShared[localIndex] + workgroupShared[localIndex + currSize];\n      }\n      workgroupBarrier();\n    }\n    if (localIndex == 0) {\n      squaredNormShared = ${_t("workgroupShared[0]",c)};\n    }\n    workgroupBarrier();\n\n    let invStdDev = inverseSqrt(squaredNormShared / f32(uniforms.normSize) + f32(${t.epsilon}));\n    let channelScale = invStdDev * f32(${S.getByOffset("channel")});\n    let channelShift = f32(${A.getByOffset("channel")}) - meanShared * channelScale;\n    for (var h = localIndex; h < uniforms.normPackedSize; h += workgroupSize) {\n      let value = ${v.get("batch","channel","h")} * ${E}(${P}(channelScale)) + ${E}(${P}(channelShift));\n      ${I.set("batch","channel","h","value")};\n    }\n  }`};return{name:"InstanceNormalization",shaderCache:{hint:`${t.epsilon};${c}`,inputDependencies:d},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:u},programUniforms:y}),getShaderSource:w}},Jc=(e,t,r,o,i,u,a,c)=>{let p=Me(a),h=64,d=p===1?"vec2f":`mat2x${p}f`,y=p===1?"f32":`vec${p}f`,w=(R,L)=>`${d}(${R}, ${L})`,_=i*a/p,v=Math.ceil(u/h),S=["type"],A=[{type:12,data:v},{type:12,data:u},{type:12,data:Math.floor(a/p)},{type:12,data:Math.floor(u*a/p)}],I=R=>{let L=U("input",t.dataType,t.dims,p);return`\n  ${R.declareVariables(L)}\n  @group(0) @binding(1) var<storage, read_write> output : array<${d}>;\n  struct Uniforms {wg_size:u32, H:u32, C:u32, image_size:u32};\n  @group(0) @binding(2) var<uniform> uniforms: Uniforms;\n\n  ${R.mainStart(h)}\n    let currentImageNumber = global_idx / ${h} / uniforms.C;\n    let currentChannelNumber = (global_idx / ${h}) % uniforms.C;\n    let wgOffset = local_id.x * uniforms.wg_size;\n    if (wgOffset >= uniforms.H) {\n        return;\n    }\n    let wgMax = min(wgOffset + uniforms.wg_size, uniforms.H);\n\n    let offset = currentImageNumber * uniforms.image_size + currentChannelNumber;\n    var sum = ${$t("f32",p)};\n    var squaredSum = ${$t("f32",p)};\n    for (var i: u32 = wgOffset; i < wgMax; i++) {\n        let value = ${y}(input[offset + i * uniforms.C]);\n        sum += value;\n        squaredSum += value * value;\n    }\n    output[global_idx] = ${w("sum","squaredSum")};\n  }`},x=e.compute({name:"InstanceNormComputeMean",shaderCache:{hint:`${p}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:[i,a,h,2],dataType:1}],dispatchGroup:{x:i*a/p},programUniforms:A}),getShaderSource:I},{inputs:[t],outputs:[-1]})[0],E=[{type:12,data:_},{type:12,data:u},{type:12,data:Math.floor(a/p)},{type:12,data:Math.floor(h*a/p)}],P=["type","type","type"],O=R=>{let L=U("scale",r.dataType,r.dims,p),N=U("bias",o.dataType,o.dims,p);return`\n  @group(0) @binding(0) var<storage, read> input : array<${d}>;\n  @group(0) @binding(1) var<storage, read> scale : array<${L.type.storage}>;\n  @group(0) @binding(2) var<storage, read> bias : array<${N.type.storage}>;\n  @group(0) @binding(3) var<storage, read_write> output : array<${d}>;\n  struct Uniforms {units_of_work : u32, H: u32, C : u32, image_size : u32};\n  @group(0) @binding(4) var<uniform> uniforms: Uniforms;\n\n  ${R.mainStart()}\n    ${R.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.units_of_work")}\n    let currentImageNumber = global_idx / uniforms.C;\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let offset = currentImageNumber * uniforms.image_size;\n    var sum = ${$t("f32",p)};\n    var squaredSum = ${$t("f32",p)};\n    for (var i: u32 = 0; i < min(${h}, uniforms.H); i++) {\n        let value = input[offset + i + currentChannelNumber * ${h}];\n        sum += value[0];\n        squaredSum += value[1];\n    }\n    sum = sum / f32(uniforms.H);\n    squaredSum = squaredSum / f32(uniforms.H);\n    let invStdDev = inverseSqrt(squaredSum - sum * sum + f32(${c}));\n    let channelScale = invStdDev * ${y}(scale[currentChannelNumber]);\n    let channelShift = ${y}(bias[currentChannelNumber]) - sum * channelScale;\n\n    output[global_idx] = ${w("channelScale","channelShift")};\n  }`};return e.compute({name:"InstanceNormComputeChannelScaleShift",shaderCache:{hint:`${p};${c}`,inputDependencies:P},getRunData:()=>({outputs:[{dims:[i,a,2],dataType:1}],dispatchGroup:{x:Math.ceil(_/64)},programUniforms:E}),getShaderSource:O},{inputs:[x,r,o],outputs:[-1]})[0]},ep=(e,t,r)=>{let o=t[0].dims,i=o,u=o[0],a=o[o.length-1],c=M.sizeFromDimension(o,1)/a,p=Me(a),h=M.size(i)/p,d=[{type:12,data:c},{type:12,data:Math.floor(a/p)}],y=["type","type"],w=Jc(e,t[0],t[1],t[2],u,c,a,r.epsilon),_=v=>{let S=De(t[0].dataType),A=p===1?"vec2f":`mat2x${p}f`,I=p===1?S:`vec${p}<${S}>`,x=U("input",t[0].dataType,t[0].dims,p),E=j("output",t[0].dataType,i,p);return`\n  @group(0) @binding(0) var<storage, read> input : array<${x.type.storage}>;\n  @group(0) @binding(1) var<storage, read> scaleInput : array<${A}>;\n  @group(0) @binding(2) var<storage, read_write> output : array<${E.type.storage}>;\n  struct Uniforms {H: u32, C : u32};\n  @group(0) @binding(3) var<uniform> uniforms: Uniforms;\n\n  ${v.mainStart()}\n    let currentImageNumber = global_idx / (uniforms.C * uniforms.H);\n    let currentChannelNumber = global_idx % uniforms.C;\n\n    let scaleOffset = currentImageNumber * uniforms.C + currentChannelNumber;\n    let scale = scaleInput[scaleOffset];\n    output[global_idx] = fma(input[global_idx], ${I}(scale[0]), ${I}(scale[1]));\n  }`};e.compute({name:"InstanceNormalizationNHWC",shaderCache:{hint:`${p}`,inputDependencies:y},getRunData:()=>({outputs:[{dims:i,dataType:t[0].dataType}],dispatchGroup:{x:Math.ceil(h/64)},programUniforms:d}),getShaderSource:_},{inputs:[t[0],w]})},zu=(e,t)=>{t.format==="NHWC"?ep(e,e.inputs,t):e.compute(Qc(e.inputs,t))}});var tp,rp,Uu,Vu=Y(()=>{"use strict";ye();Se();_e();tp=e=>{if(!e||e.length<2)throw new Error("layerNorm requires at least 2 inputs.")},rp=(e,t,r)=>{let o=t.simplified,i=e[0].dims,u=e[1],a=!o&&e[2],c=i,p=M.normalizeAxis(t.axis,i.length),h=M.sizeToDimension(i,p),d=M.sizeFromDimension(i,p),y=M.size(u.dims),w=a?M.size(a.dims):0;if(y!==d||a&&w!==d)throw new Error(`Size of X.shape()[axis:] == ${d}.\n       Size of scale and bias (if provided) must match this.\n       Got scale size of ${y} and bias size of ${w}`);let _=[];for(let O=0;O<i.length;++O)O<p?_.push(i[O]):_.push(1);let v=Me(d),S=["type","type"],A=[{type:12,data:h},{type:1,data:d},{type:12,data:Math.floor(d/v)},{type:1,data:t.epsilon}];a&&S.push("type");let I=r>1,x=r>2,E=O=>{let R=De(e[0].dataType),L=[U("x",e[0].dataType,e[0].dims,v),U("scale",u.dataType,u.dims,v)];a&&L.push(U("bias",a.dataType,a.dims,v)),L.push(j("output",e[0].dataType,c,v)),I&&L.push(j("mean_data_output",1,_)),x&&L.push(j("inv_std_output",1,_));let N=[{name:"norm_count",type:"u32"},{name:"norm_size",type:"f32"},{name:"norm_size_vectorized",type:"u32"},{name:"epsilon",type:"f32"}];return`\n  ${O.registerUniforms(N).declareVariables(...L)}\n  ${O.mainStart()}\n    ${O.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.norm_count")}\n    let offset = global_idx * uniforms.norm_size_vectorized;\n    var mean_vector = ${$t("f32",v)};\n    var mean_square_vector = ${$t("f32",v)};\n\n    for (var h: u32 = 0u; h < uniforms.norm_size_vectorized; h++) {\n      let value = ${ir(R,v,"x[h + offset]")};\n      mean_vector += value;\n      mean_square_vector += value * value;\n    }\n    let mean = ${_t("mean_vector",v)} / uniforms.norm_size;\n    let inv_std_dev = inverseSqrt(${_t("mean_square_vector",v)} / uniforms.norm_size ${o?"":"- mean * mean"} + uniforms.epsilon);\n\n    for (var j: u32 = 0; j < uniforms.norm_size_vectorized; j++) {\n      let f32input = ${ir(R,v,"x[j + offset]")};\n      let f32scale = ${ir(R,v,"scale[j]")};\n      output[j + offset] = ${L[0].type.value}((f32input ${o?"":"- mean"}) * inv_std_dev * f32scale\n        ${a?`+ ${ir(R,v,"bias[j]")}`:""}\n      );\n    }\n\n    ${I?"mean_data_output[global_idx] = mean":""};\n    ${x?"inv_std_output[global_idx] = inv_std_dev":""};\n  }`},P=[{dims:c,dataType:e[0].dataType}];return I&&P.push({dims:_,dataType:1}),x&&P.push({dims:_,dataType:1}),{name:"LayerNormalization",shaderCache:{hint:`${v};${r};${o}`,inputDependencies:S},getRunData:()=>({outputs:P,dispatchGroup:{x:Math.ceil(h/64)},programUniforms:A}),getShaderSource:E}},Uu=(e,t)=>{tp(e.inputs),e.compute(rp(e.inputs,t,e.outputCount))}});var np,op,Wu,Nu,Gu=Y(()=>{"use strict";ye();Se();Ze();_e();np=(e,t)=>{if(e.length<3||e.length>4)throw new Error("MatMulNBits requires 3 or 4 inputs");let r=e[0],o=r.dims.length;if(r.dims[o-1]!==t.k)throw new Error("The last dim of input shape does not match the k value");let i=Math.floor((t.k+t.blockSize-1)/t.blockSize),u=t.blockSize/8*t.bits,a=e[1];if(!M.areEqual(a.dims,[t.n,i,u]))throw new Error("The second inputs must be 3D tensor with shape N X nBlocksPerCol X blobSize");let p=e[2].dims;if(M.size(p)!==t.n*i)throw new Error("scales input size error.");if(e.length===4){let d=e[3].dims,y=t.bits>4?t.n*i:t.n*Math.floor((i+1)/2);if(M.size(d)!==y)throw new Error("zeroPoints input size error.")}},op=(e,t,r,o)=>{let i=e[0].dims,u=i.length,a=Math.floor((t.k+t.blockSize-1)/t.blockSize),c=i[u-2],p=t.k,h=t.n,d=i.slice(0,u-2),y=M.size(d),_=t.blockSize/8*t.bits/4,v=e[0].dataType,S=Me(c),A=Me(t.k),I=Me(_),x=tr(v),E=c*a*x,P=Math.floor(o/E),O=a<=r[0]&&P>0,R=!O||P>=4?Me(h):P>=2&&Me(h)>=2?2:1,L=d.concat([c,h]),N=M.size(L)/R/S,K=O?[]:[{type:12,data:N},{type:12,data:t.blockSize}],Q=[y,c,p/A],he=M.convertShape(e[1].dims).slice();he.splice(-1,1,_/I),K.push(...Z(Q)),K.push(...Z(he)),K.push(...Z(e[2].dims)),e.length===4&&K.push(...Z(M.convertShape(e[3].dims)));let W=[y,c,h/R];K.push(...Z(W));let se=Ce=>{let We=Q.length,ee=U("a",e[0].dataType,We,A),ae=U("b",12,he.length,I),Ae=U("scales",e[2].dataType,e[2].dims.length),me=[ee,ae,Ae],ie=e.length===4?U("zero_points",12,e[3].dims.length):void 0;ie&&me.push(ie);let ue=W.length,le=j("output",e[0].dataType,ue,R),qe=[{name:"output_size",type:"u32"},{name:"block_size",type:"u32"}],G=De(e[0].dataType),ne=(()=>{switch(A){case 1:return`array<${G}, 8>`;case 2:return`mat4x2<${G}>`;case 4:return`mat2x4<${G}>`;default:throw new Error(`${A}-component is not supported.`)}})(),xe=`\n        for (var word: u32 = 0; word < ${_}; word += ${I}) {\n          ${ae.indicesSet("b_indices","2","word")};\n          let b_data = ${ae.getByIndices("b_indices")};\n          for (var i: u32 = 0; i < ${I}; i++) {\n            let b_value: u32 = ${I===1?"b_data":"b_data[word + i]"};\n            let b_mask: u32 = 0x0F0F0F0Fu;\n            let b_value_lower: vec4<u32> = unpack4xU8(b_value & b_mask);\n            let b_value_upper: vec4<u32> = unpack4xU8((b_value >> 4) & b_mask);\n            let b_quantized_values = ${ne}(${Array.from({length:4},(Be,Ge)=>`${G}(b_value_lower[${Ge}]), ${G}(b_value_upper[${Ge}])`).join(", ")});\n            let b_dequantized_values = ${(()=>A===1?`${ne}(${Array.from({length:8},(Be,Ge)=>`(b_quantized_values[${Ge}] - zero_point) * scale`).join(", ")});`:`(b_quantized_values - ${ne}(${Array(8).fill("zero_point").join(",")})) * scale;`)()};\n            // Number of B elements per 32-bit word is 32/bits = 32/4 = 8\n            for (var m: u32 = 0; m < ${O?c:S}u; m++) {\n              ${ee.indicesSet("a_indices",We-2,O?"m":`row * ${S} + m`)};\n              ${ee.indicesSet("a_indices",We-1,"word_offset")};\n              var input_offset = ${ee.indicesToOffset("a_indices")};\n              var a_data: ${ne};\n              for (var j: u32 = 0; j < ${8/A}; j++) {\n                a_data[j] = ${ee.getByOffset("input_offset")};\n                input_offset++;\n              }\n              ${O?"workgroup_shared[workgroup_shared_offset + m]":"output_values[m]"}${R>1?"[c]":""} += ${Array.from({length:8/A},(Be,Ge)=>`${A===1?`a_data[${Ge}] * b_dequantized_values[${Ge}]`:`dot(a_data[${Ge}], b_dequantized_values[${Ge}])`}`).join(" + ")};\n            }\n            word_offset += ${8/A};\n          }\n        }`,Ke=ie?`\n          zero_point_offset += 4;\n          if (zero_point_offset == 32) {\n            zero_point_offset = 0;\n            zero_point_index++;\n            zero_point_word = ${ie.getByOffset("zero_point_index")};\n          }`:"";return O?`\n        var<workgroup> workgroup_shared: array<${le.type.value}, ${c*a}>;\n        ${Ce.declareVariables(...me,le)}\n        ${Ce.mainStart([a,1,1])}\n          var a_indices: ${ee.type.indices};\n          var block = local_id.x;\n          var col = workgroup_id.y;\n          var batch = workgroup_id.z;\n          ${ee.indicesSet("a_indices","0","batch")};\n          // Two zero points are packed into one byte when uniforms.bits is 4.\n          for (var c: u32 = 0; c < ${R}; c++) {\n            let col_times_components_plus_c = col * ${R} + c;\n              ${ie?`\n            var zero_point_bytes_per_col: u32 = (${a} + 1) / 2;\n            var zero_point_byte_count: u32 = col_times_components_plus_c * zero_point_bytes_per_col + (block >> 0x1u);\n            var zero_point_word_index: u32 = zero_point_byte_count >> 0x2u;\n            var zero_point_byte_offset: u32 = zero_point_byte_count & 0x3u;\n            var zero_point_nibble_offset: u32 = block & 0x1u;\n            var zero_point_bits_offset: u32 = (zero_point_byte_offset << 3) + (zero_point_nibble_offset << 2);\n            var zero_point_word: u32 = ${ie.getByOffset("zero_point_word_index")} >> zero_point_bits_offset;`:""}\n            var b_indices: ${ae.type.indices};\n            ${ae.indicesSet("b_indices","0","col_times_components_plus_c")};\n            // The scale and zero points are computed per block.\n            var scales_index = col_times_components_plus_c * ${a} + block;\n            let scale = ${Ae.getByOffset("scales_index")};\n            // The default zero point is 8 for unsigned 4-bit quantization.\n            let zero_point = ${G}(${ie?"(zero_point_word) & 0xFu":8});\n            ${ae.indicesSet("b_indices","1","block")};\n            var word_offset: u32 = block * ${t.blockSize/A};\n            var workgroup_shared_offset: u32 = block * ${c};\n            ${xe}\n          }\n          workgroupBarrier();\n          if (local_id.x == 0u) {\n            var output_indices: ${le.type.indices};\n            ${le.indicesSet("output_indices","0","batch")};\n            ${le.indicesSet("output_indices",ue-1,"col")};\n            ${le.indicesSet("output_indices",ue-2,"0")};\n            var output_offset = ${le.indicesToOffset("output_indices")};\n            for (var m: u32 = 0u; m < ${c}u; m++) {\n              var output_value: ${le.type.value} = ${le.type.value}(0);\n              var workgroup_shared_offset: u32 = m;\n              for (var b: u32 = 0u; b < ${a}u; b++) {\n                output_value += workgroup_shared[workgroup_shared_offset];\n                workgroup_shared_offset += ${c};\n              }\n              ${le.setByOffset("output_offset","output_value")};\n              output_offset += ${h/R};\n            }\n          }\n        }`:`\n        ${Ce.registerUniforms(qe).declareVariables(...me,le)}\n        ${Ce.mainStart()}\n          ${Ce.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n          var output_values: array<${le.type.value}, ${S}>;\n          var output_indices = ${le.offsetToIndices("global_idx")};\n          var col = ${le.indicesGet("output_indices",ue-1)};\n          var row = ${le.indicesGet("output_indices",ue-2)};\n          var a_indices: ${ee.type.indices} = output_indices;\n          // Two zero points are packed into one byte because uniforms.bits <= 4.\n          // zero_point_offset is either 0 or 4. It is bit offset within one byte.\n          // TODO support zero_point_offset for bits > 4\n          ${ie?`\n          var zero_point_abs_offset = col * ${R} * ((${a} + 1) / 2);\n          var zero_point_index: u32 = zero_point_abs_offset / 4;\n          var zero_point_word: u32 = ${ie.getByOffset("zero_point_index")};\n          var zero_point_offset: u32 = (zero_point_abs_offset % 4) * 8;`:""}\n          var scale_index = col * ${a*R};\n          var b_indices: ${ae.type.indices};\n          for (var c: u32 = 0; c < ${R}; c++) {\n            ${ae.indicesSet("b_indices","0",`col * ${R} + c`)};\n            var block_offset: u32 = 0;\n            for (var block: u32 = 0; block < ${a}; block++) {\n              // The scale and zero points are computed per block.\n              let scale = ${Ae.getByOffset("scale_index")};\n              // The default zero point is 8 for unsigned 4-bit quantization.\n              let zero_point = ${G}(${ie?"extractBits(zero_point_word, zero_point_offset, 4)":8});\n              ${ae.indicesSet("b_indices","1","block")};\n              var word_offset: u32 = block_offset;\n              ${xe}\n              scale_index++;\n              ${Ke}\n              block_offset += uniforms.block_size / ${A};\n            }\n            // Drop the trailing 4 bits if the zero_poit_offset is not a byte boundary to align with the next byte.\n            ${ie?`if (zero_point_offset % 8 > 0) {\n                ${Ke}\n              }`:""}\n            }\n            for (var k: u32 = 0u; k < ${S}u; k++) {\n              ${le.indicesSet("output_indices",ue-2,`${S} * row + k`)};\n              ${le.setByIndices("output_indices","output_values[k]")}\n            }\n        }`};return{name:O?"BlockwiseMatMulNBits":"MatMulNBits",shaderCache:{hint:`${t.cacheKey};${c};${v};${e.length}`,inputDependencies:Array(e.length).fill("rank")},getRunData:()=>({outputs:[{dims:L,dataType:v}],name:O?"BlockwiseMatMulNBits":"MatMulNBits",dispatchGroup:O?{x:1,y:Math.ceil(h/R),z:y}:{x:Math.ceil(N/64)},programUniforms:K}),getShaderSource:se}},Wu=(e,t)=>{np(e.inputs,t);let r=e.getMaxComputeWorkgroupSizes(),o=e.getMaxComputeWorkgroupStoragesize();e.compute(op(e.inputs,t,r,o))},Nu=e=>ve(e)});var it,ip,Lu,Hu,ap,Ko,Fu,qu=Y(()=>{"use strict";ye();Se();Ze();_n();Ro();_e();Sr();it=(e,t)=>e.length>t&&e[t].dims.length>0&&M.size(e[t].dims)>0?e[t]:void 0,ip=(e,t)=>{let r=e[0],o=it(e,1),i=it(e,2),u=it(e,3),a=it(e,4),c=it(e,5),p=it(e,6),h=it(e,7);if(r.dims.length!==3&&r.dims.length!==5)throw new Error("Input query is expected to have 3 or 5 dimensions");let d=!1,y=r.dims[0],w=r.dims[1],_=r.dims.length===3?d?r.dims[2]/3:r.dims[2]:t.numHeads*r.dims[4],v=w,S=0,A=0,I=Math.floor(_/t.numHeads);if(p&&h){if(p.dims.length!==4)throw new Error(\'Input "past_key" is expected to have 4 dimensions\');if(p.dims[0]!==y||p.dims[1]!==t.numHeads||p.dims[3]!==I)throw new Error(\'Input "past_key" shape (batch_size, num_heads, past_sequence_length, head_size)\');if(h.dims[0]!==y||h.dims[1]!==t.numHeads||h.dims[3]!==I)throw new Error(\'Input "past_value" shape (batch_size, num_heads, past_sequence_length, head_size)\');if(p.dims[2]!==h.dims[2])throw new Error(\'Input "past_key" and "past_value" shall have same dim 2 (past_sequence_length)\');if(h.dims.length!==4)throw new Error(\'Input "past_value" is expected to have 4 dimensions\');S=p.dims[2],A=p.dims[2]}else if(p||h)throw new Error(\'Input "past_key" and "past_value" shall be both present or both absent\');let x;if(o){if(r.dims.length!==3)throw new Error(\'Input "query" is expected to have 3 dimensions when key is given\');if(o.dims.length<3||o.dims.length>5)throw new Error(\'Input "key" is expected to have 3, 4, or 5 dimensions\');if(r.dims[0]!==o.dims[0])throw new Error(\'Input "query" and "key" shall have same dim 0 (batch size)\');if(o.dims.length===3){if(o.dims[2]!==r.dims[2])throw new Error(\'Input "query" and "key" shall have same dim 2 (hidden_size)\');x=2,v=o.dims[1]}else if(o.dims.length===5){if(o.dims[2]!==t.numHeads||o.dims[3]!==2||o.dims[4]!==I)throw new Error(\'Expect "key" shape (batch_size, kv_sequence_length, num_heads, 2, head_size) for packed kv\');if(i)throw new Error(\'Expect "value" be none when "key" has packed kv format.\');x=5,v=o.dims[1]}else{if(o.dims[1]!==t.numHeads||o.dims[3]!==I)throw new Error(\'Expect "key" shape (batch_size, num_heads, kv_sequence_length, head_size) for past_key\');x=0,v=o.dims[2]}}else{if(r.dims.length!==3&&r.dims.length!==5)throw new Error(\'Input "query" is expected to have 3 or 5 dimensions when key is empty\');if(r.dims.length===5&&(r.dims[2]!==t.numHeads||r.dims[3]!==3))throw new Error(\'Expect "query" shape (batch_size, kv_sequence_length, num_heads, 3, head_size) for packed kv\');x=3}if(u){if(u.dims.length!==1)throw new Error(\'Input "bias" is expected to have 1 dimension\');if(i&&r.dims.length===5&&r.dims[3]===2)throw new Error("bias is not allowed for packed kv.")}let E=0;if(a){E=8;let N=a.dims;throw N.length===1?N[0]===y?E=1:N[0]===3*y+2&&(E=3):N.length===2&&N[0]===y&&N[1]===v&&(E=5),E===8?new Error(\'Input "key_padding_mask" shape shall be (batch_size) or (batch_size, kv_sequence_length)\'):new Error("Mask not supported")}let P=!1,O=_;if(i){if(i.dims.length!==3&&i.dims.length!==4)throw new Error(\'Input "value" is expected to have 3 or 4 dimensions\');if(r.dims[0]!==i.dims[0])throw new Error(\'Input "query" and "value" shall have same dim 0 (batch_size)\');if(i.dims.length===3){if(v!==i.dims[1])throw new Error(\'Input "key" and "value" shall have the same dim 1 (kv_sequence_length)\');O=i.dims[2]}else{if(v!==i.dims[2])throw new Error(\'Input "past_key" and "past_value" shall have the same dim 2 (kv_sequence_length)\');O=i.dims[1]*i.dims[3],P=!0}}let R=S+v,L=!1;if(a)throw new Error("Key padding mask is not supported");if(c){if(c.dims.length!==4)throw new Error(\'Input "relative_position_bias" is expected to have 4 dimensions\');if(c.dims[0]!==y&&c.dims[0]!==1||c.dims[1]!==t.numHeads||c.dims[2]!==w||c.dims[3]!==R)throw new Error(\'Input "relative_position_bias" shape (batch_size, 1, sequence_length, kv_sequence_length)\')}return{batchSize:y,sequenceLength:w,pastSequenceLength:S,kvSequenceLength:v,totalSequenceLength:R,maxSequenceLength:A,inputHiddenSize:0,hiddenSize:_,vHiddenSize:O,headSize:I,vHeadSize:Math.floor(O/t.numHeads),numHeads:t.numHeads,isUnidirectional:!1,pastPresentShareBuffer:!1,maskFilterValue:t.maskFilterValue,maskType:E,scale:t.scale,broadcastResPosBias:L,passPastInKv:P,qkvFormat:x}},Lu=e=>ve({...e}),Hu=ve({perm:[0,2,1,3]}),ap=(e,t,r,o,i,u,a)=>{let c=[o,i,u],p=M.size(c),h=[{type:12,data:p},{type:12,data:a},{type:12,data:u}],d=y=>{let w=j("qkv_with_bias",t.dataType,c),_=U("qkv",t.dataType,c),v=U("bias",r.dataType,c),S=[{name:"output_size",type:"u32"},{name:"bias_offset",type:"u32"},{name:"hidden_size",type:"u32"}];return`\n  ${y.registerUniforms(S).declareVariables(_,v,w)}\n  ${y.mainStart()}\n    ${y.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n    let bias_offset_idx = (global_idx % uniforms.hidden_size) + uniforms.bias_offset;\n\n    qkv_with_bias[global_idx] = qkv[global_idx] + bias[bias_offset_idx];\n  }`};return e.compute({name:"MultiHeadAttentionAddBias",shaderCache:{inputDependencies:["type","type"]},getRunData:()=>({outputs:[{dims:c,dataType:t.dataType,gpuDataType:0}],dispatchGroup:{x:Math.ceil(p/64)},programUniforms:h}),getShaderSource:d},{inputs:[t,r],outputs:[-1]})[0]},Ko=(e,t,r,o,i,u,a,c)=>{let p=u;if(a){if(o===1)throw new Error("AddBiasReshape is not implemented. Please export your model with packed QKV or KV");return p=ap(e,u,a,t,o,r*i,c),p=p.reshape([t,o,r,i]),e.compute(yt(p,Hu.perm),{inputs:[p],outputs:[-1]})[0]}else return u.dims.length===3&&(p=u.reshape([t,o,r,i])),e.compute(yt(p,Hu.perm),{inputs:[p],outputs:[-1]})[0]},Fu=(e,t)=>{let r=ip(e.inputs,t),o=e.inputs[0],i=it(e.inputs,1),u=it(e.inputs,2),a=it(e.inputs,3),c=it(e.inputs,4),p=it(e.inputs,5),h=it(e.inputs,6),d=it(e.inputs,7);if(o.dims.length===5)throw new Error("Packed QKV is not implemented");if(i?.dims.length===5)throw new Error("Packed KV is not implemented");let y=i&&u&&i.dims.length===4&&u.dims.length===4,w=Ko(e,r.batchSize,r.numHeads,r.sequenceLength,r.headSize,o,a,0);if(y)return Pn(e,w,i,u,c,void 0,h,d,p,r,t);if(!i||!u)throw new Error("key and value must be provided");let _=Ko(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.headSize,i,a,r.hiddenSize),v=Ko(e,r.batchSize,r.numHeads,r.kvSequenceLength,r.vHeadSize,u,a,2*r.hiddenSize);Pn(e,w,_,v,c,void 0,h,d,p,r,t)}});var sp,up,dp,lp,cp,pp,mp,fp,ju,Ku=Y(()=>{"use strict";ye();Se();_e();sp=e=>{if(!e||e.length<1)throw new Error("Too few inputs");if(e[0].dataType!==1&&e[0].dataType!==10)throw new Error("Input type must be float or float16.");if(e.length>=2){let t=e[0].dims.length*2===e[1].dims[0];if(e.length===4&&(t=e[3].dims[0]*2===e[1].dims[0]),!t)throw new Error("The pads should be a 1D tensor of shape [2 * input_rank] or [2 * num_axes].")}},up=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n            k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n            if (k < 0) {\n              break;\n            }\n            if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n              break;\n            }\n            offset += k * i32(${fe("uniforms.x_strides",i,t)});\n        `;return`\n          value = ${e.type.value}(uniforms.constant_value);\n          for (var i = 0; i < 1; i++) {\n            var offset = 0;\n            var k = 0;\n            ${o}\n            value = x[offset];\n          }\n      `},dp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0) {\n                  k = -k;\n                }\n                {\n                  let _2n_1 = 2 * (i32(${fe("uniforms.x_shape",i,t)}) - 1);\n                  k = k % _2n_1;\n                  if(k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                    k = _2n_1 - k;\n                  }\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},lp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0) {\n                  k = 0;\n                }\n                if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                  k = i32(${fe("uniforms.x_shape",i,t)}) - 1;\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},cp=(e,t,r)=>{let o="";for(let i=t-1;i>=0;--i)o+=`\n                k = i32(${e.indicesGet("indices",i)}) - ${fe("uniforms.pads",i,r)};\n                if (k < 0)  {\n                  k += i32(${fe("uniforms.x_shape",i,t)}]);\n                }\n                if (k >= i32(${fe("uniforms.x_shape",i,t)})) {\n                  k -= i32(${fe("uniforms.x_shape",i,t)});\n                }\n                offset += k * i32(${fe("uniforms.x_strides",i,t)});\n            `;return`\n              var offset = 0;\n              var k = 0;\n              ${o}\n              value = x[offset];\n          `},pp=(e,t,r)=>{switch(r.mode){case 0:return up(e,t,r.pads.length);case 1:return dp(e,t,r.pads.length);case 2:return lp(e,t,r.pads.length);case 3:return cp(e,t,r.pads.length);default:throw new Error("Invalid mode")}},mp=(e,t)=>{let r=M.padShape(e[0].dims.slice(),t.pads),o=e[0].dims,i=M.size(r),u=[{type:12,data:i},{type:6,data:t.pads}];t.mode===0&&u.push({type:e[0].dataType,data:t.value}),u.push(...Z(e[0].dims,r));let a=["rank"],c=p=>{let h=j("output",e[0].dataType,r.length),d=U("x",e[0].dataType,o.length),y=d.type.value,w=pp(h,o.length,t),_=[{name:"output_size",type:"u32"},{name:"pads",type:"i32",length:t.pads.length}];return t.mode===0&&_.push({name:"constant_value",type:y}),`\n            ${p.registerUniforms(_).declareVariables(d,h)}\n            ${p.mainStart()}\n            ${p.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n\n            let indices = ${h.offsetToIndices("global_idx")};\n\n            var value = ${y}(0);\n            ${w}\n            output[global_idx] = value;\n        }`};return{name:"Pad",shaderCache:{hint:`${t.mode}`,inputDependencies:a},getRunData:()=>({outputs:[{dims:r,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(r)/64)},programUniforms:u}),getShaderSource:c}},fp=(e,t)=>{if(e.length>1){let r=e[1].getBigInt64Array(),o=e.length>=3&&e[2].data?e[2].getFloat32Array()[0]:0,i=e[0].dims.length,u=new Int32Array(2*i).fill(0);if(e.length>=4){let c=e[3].getBigInt64Array();for(let p=0;p<c.length;p++)u[Number(c[p])]=Number(r[p]),u[Number(c[p])+i]=Number(r[p+c.length])}else r.forEach((c,p)=>u[Number(p)]=Number(c));let a=[];return u.forEach(c=>a.push(c)),{mode:t.mode,value:o,pads:a}}else return t},ju=(e,t)=>{sp(e.inputs);let r=fp(e.inputs,t);e.compute(mp(e.inputs,r),{inputs:[0]})}});var Nn,Yu,Zu,Xu,Qu,hp,gp,Ju,ed,td,rd,nd,od,id,ad,sd,ud,dd,ld,cd=Y(()=>{"use strict";$r();ye();Se();_e();Nn=e=>{if(vr.webgpu.validateInputContent&&(!e||e.length!==1))throw new Error("Pool ops requires 1 input.")},Yu=(e,t,r)=>{let o=t.format==="NHWC",i=e.dims.slice();o&&i.splice(1,0,i.pop());let u=Object.hasOwnProperty.call(t,"dilations"),a=t.kernelShape.slice(),c=t.strides.slice(),p=u?t.dilations.slice():[],h=t.pads.slice();nr.adjustPoolAttributes(r,i,a,c,p,h);let d=nr.computePoolOutputShape(r,i,c,p,a,h,t.autoPad),y=Object.assign({},t);u?Object.assign(y,{kernelShape:a,strides:c,pads:h,dilations:p,cacheKey:t.cacheKey}):Object.assign(y,{kernelShape:a,strides:c,pads:h,cacheKey:t.cacheKey});let w=d.slice();return w.push(w.splice(1,1)[0]),[y,o?w:d]},Zu=(e,t)=>{let r=t.format==="NHWC",o=M.size(e),i=M.size(t.kernelShape),u=[{type:12,data:o},{type:12,data:i}],a=[{name:"outputSize",type:"u32"},{name:"kernelSize",type:"u32"}];if(t.kernelShape.length<=2){let c=t.kernelShape[t.kernelShape.length-1],p=t.strides[t.strides.length-1],h=t.pads[t.pads.length/2-1],d=t.pads[t.pads.length-1],y=!!(h+d);u.push({type:12,data:c},{type:12,data:p},{type:12,data:h},{type:12,data:d}),a.push({name:"kw",type:"u32"},{name:"sw",type:"u32"},{name:"pwStart",type:"u32"},{name:"pwEnd",type:"u32"});let w=!1;if(t.kernelShape.length===2){let _=t.kernelShape[t.kernelShape.length-2],v=t.strides[t.strides.length-2],S=t.pads[t.pads.length/2-2],A=t.pads[t.pads.length-2];w=!!(S+A),u.push({type:12,data:_},{type:12,data:v},{type:12,data:S},{type:12,data:A}),a.push({name:"kh",type:"u32"},{name:"sh",type:"u32"},{name:"phStart",type:"u32"},{name:"phEnd",type:"u32"})}return[u,a,!0,y,w]}else{if(r)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let c=M.computeStrides(t.kernelShape);u.push({type:12,data:c},{type:12,data:t.pads},{type:12,data:t.strides}),a.push({name:"kernelStrides",type:"u32",length:c.length},{name:"pads",type:"u32",length:t.pads.length},{name:"strides",type:"u32",length:t.strides.length});let p=t.pads.reduce((h,d)=>h+d);return[u,a,!!p,!1,!1]}},Xu=(e,t,r,o,i,u,a,c,p,h,d,y)=>{let w=i.format==="NHWC",_=t.type.value,v=j("output",t.type.tensor,o);if(i.kernelShape.length<=2){let S="",A="",I="",x=r-(w?2:1);if(d?S=`\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[${x}] = indices[${x}] * uniforms.sw - uniforms.pwStart + i;\n                  if (xIndices[${x}] < 0 || xIndices[${x}]\n                      >= uniforms.x_shape[${x}]) {\n                    pad++;\n                    continue;\n                  }\n                  let x_val = x[${t.indicesToOffset("xIndices")}];\n                  ${u}\n                }`:S=`\n                for (var i: u32 = 0u; i < uniforms.kw; i++) {\n                  xIndices[${x}] = indices[${x}] * uniforms.sw - uniforms.pwStart + i;\n                  let x_val = x[${t.indicesToOffset("xIndices")}];\n                  ${u}\n                }`,i.kernelShape.length===2){let P=r-(w?3:2);y?A=`\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[${P}] = indices[${P}] * uniforms.sh - uniforms.phStart + j;\n                  if (xIndices[${P}] < 0 || xIndices[${P}] >= uniforms.x_shape[${P}]) {\n                    pad += i32(uniforms.kw);\n                    continue;\n                  }\n              `:A=`\n                for (var j: u32 = 0u; j < uniforms.kh; j++) {\n                  xIndices[${P}] = indices[${P}] * uniforms.sh - uniforms.phStart + j;\n                `,I=`\n              }\n            `}return`\n            ${e.registerUniforms(p).declareVariables(t,v)}\n\n            ${e.mainStart()}\n              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n\n              let indices = ${v.offsetToIndices("global_idx")};\n              var xIndices = ${v.offsetToIndices("global_idx")};\n\n              var value = ${_}(${c});\n              var pad = 0;\n              ${A}\n              ${S}\n              ${I}\n              ${a}\n\n              output[global_idx] = value;\n            }`}else{if(w)throw new Error("Pooling with kernelShape.length > 2 is not supported for NHWC format.");let S=i.kernelShape.length,A=i.pads.length,I="";return h?I=`\n                if (xIndices[j] >= uniforms.x_shape[j]) {\n                  pad++;\n                  isPad = true;\n                  break;\n                }\n              }\n              if (!isPad) {\n                let x_val = x[${t.indicesToOffset("xIndices")}];\n                ${u}\n              }`:I=`\n              }\n              let x_val = x[${t.indicesToOffset("xIndices")}];\n              ${u}\n            `,`\n            ${e.registerUniforms(p).declareVariables(t,v)}\n\n            ${e.mainStart()}\n              ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n              let indices = ${v.offsetToIndices("global_idx")};\n              var xIndices = ${v.offsetToIndices("global_idx")};\n\n              var offsets: array<u32, ${S}>;\n\n              var value = ${_}(${c});\n              var pad = 0;\n              var isPad = false;\n\n              for (var i: u32 = 0u; i < uniforms.kernelSize; i++) {\n                var offset = i;\n                for (var j = 0u; j < ${S-1}u; j++) {\n                  offsets[j] = offset / ${fe("uniforms.kernelStrides","j",S)};\n                  offset -= offsets[j] * ${fe("uniforms.kernelStrides","j",S)};\n                }\n                offsets[${S-1}] = offset;\n\n                isPad = false;\n                for (var j = ${r-S}u; j < ${r}u; j++) {\n                  xIndices[j] = indices[j] * ${fe("uniforms.strides",`j - ${r-S}u`,S)}\n                    + offsets[j - ${r-S}u] - ${fe("uniforms.pads","j - 2u",A)};\n                  ${I}\n              }\n              ${a}\n\n              output[global_idx] = value;\n            }`}},Qu=e=>`${e.format};${e.ceilMode};${e.autoPad};${e.kernelShape.length}`,hp=e=>`${Qu(e)};${e.countIncludePad}`,gp=e=>`${Qu(e)};${e.storageOrder};${e.dilations}`,Ju=e=>({format:e.format,autoPad:["NOTSET","VALID","SAME_UPPER","SAME_LOWER"][e.auto_pad],ceilMode:e.ceil_mode,kernelShape:e.kernel_shape,strides:e.strides,pads:e.pads}),ed=(e,t,r,o)=>{let[i,u]=Yu(t,o,r),a=U("x",t.dataType,t.dims.length),c=a.type.value,p="value += x_val;",h="";i.countIncludePad?h+=`value /= ${c}(uniforms.kernelSize);`:h+=`value /= ${c}(i32(uniforms.kernelSize) - pad);`;let[d,y,w,_,v]=Zu(u,i);d.push(...Z(t.dims,u));let S=["rank"];return{name:e,shaderCache:{hint:`${o.cacheKey};${w};${_};${v}`,inputDependencies:S},getRunData:()=>({outputs:[{dims:u,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(M.size(u)/64)},programUniforms:d}),getShaderSource:A=>Xu(A,a,t.dims.length,u.length,i,p,h,0,y,w,_,v)}},td=e=>{let t=e.count_include_pad!==0,r=Ju(e);if(r.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");let o={countIncludePad:t,...r,cacheKey:""};return{...o,cacheKey:hp(o)}},rd=(e,t)=>{Nn(e.inputs),e.compute(ed("AveragePool",e.inputs[0],!1,t))},nd={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[]},od=e=>{let t=e.format;return{format:t,...nd,cacheKey:t}},id=(e,t)=>{Nn(e.inputs),e.compute(ed("GlobalAveragePool",e.inputs[0],!0,t))},ad=(e,t,r,o)=>{let[i,u]=Yu(t,o,r),a=`\n      value = max(x_val, value);\n    `,c="",p=U("x",t.dataType,t.dims.length),h=["rank"],[d,y,w,_,v]=Zu(u,i);return d.push(...Z(t.dims,u)),{name:e,shaderCache:{hint:`${o.cacheKey};${w};${_};${v}`,inputDependencies:h},getRunData:()=>({outputs:[{dims:u,dataType:t.dataType}],dispatchGroup:{x:Math.ceil(M.size(u)/64)},programUniforms:d}),getShaderSource:S=>Xu(S,p,t.dims.length,u.length,i,a,c,t.dataType===10?-65504:-1e5,y,w,_,v)}},sd=(e,t)=>{Nn(e.inputs),e.compute(ad("MaxPool",e.inputs[0],!1,t))},ud=e=>{let t=e.storage_order,r=e.dilations,o=Ju(e);if(t!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(o.ceilMode!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");let i={storageOrder:t,dilations:r,...o,cacheKey:""};return{...i,cacheKey:gp(i)}},dd=e=>{let t=e.format;return{format:t,...nd,cacheKey:t}},ld=(e,t)=>{Nn(e.inputs),e.compute(ad("GlobalMaxPool",e.inputs[0],!0,t))}});var bp,wp,pd,md=Y(()=>{"use strict";$r();ye();_e();bp=(e,t,r)=>{let o=e===t,i=e<t&&r<0,u=e>t&&r>0;if(o||i||u)throw new Error("Range these inputs\' contents are invalid.")},wp=(e,t,r,o)=>{let i=Math.abs(Math.ceil((t-e)/r)),u=[i],a=i,c=[{type:12,data:a},{type:o,data:e},{type:o,data:r},...Z(u)],p=h=>{let d=j("output",o,u.length),y=d.type.value,w=[{name:"outputSize",type:"u32"},{name:"start",type:y},{name:"delta",type:y}];return`\n        ${h.registerUniforms(w).declareVariables(d)}\n        ${h.mainStart()}\n        ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n        output[global_idx] = uniforms.start + ${y}(global_idx) * uniforms.delta;\n      }`};return{name:"Range",shaderCache:{hint:`${o}`},getShaderSource:p,getRunData:()=>({outputs:[{dims:u,dataType:o}],dispatchGroup:{x:Math.ceil(a/64)},programUniforms:c})}},pd=e=>{let t=0,r=0,o=0;e.inputs[0].dataType===6?(t=e.inputs[0].getInt32Array()[0],r=e.inputs[1].getInt32Array()[0],o=e.inputs[2].getInt32Array()[0]):e.inputs[0].dataType===1&&(t=e.inputs[0].getFloat32Array()[0],r=e.inputs[1].getFloat32Array()[0],o=e.inputs[2].getFloat32Array()[0]),vr.webgpu.validateInputContent&&bp(t,r,o),e.compute(wp(t,r,o,e.inputs[0].dataType),{inputs:[]})}});var vp,$p,_p,Sp,xp,Cp,Ap,Ip,Tp,Ep,Pp,fd,kp,Op,Rp,Bp,Dp,hd,gd,yd=Y(()=>{"use strict";ye();Se();Ze();_e();vp=(e,t)=>{if(e.every(r=>r>0||(()=>{throw new Error("Resize requires scales input values to be positive")})),e.length>0){if(t.mode==="linear"){if(!(e.length===2||e.length===3||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1||e.length===5&&e[0]===1&&e[1]===1))throw new Error(`For linear mode, Resize requires scales to be 2D, 3D, 4D with either two outermost or one innermost and\n            one outermost scale values equal to 1, or 5D with two outermost scale values equal to 1`)}else if(t.mode==="cubic"&&!(e.length===2||e.length===4&&e[0]===1&&e[1]===1||e.length===4&&e[0]===1&&e[3]===1))throw new Error("Resize requires scales input size to be 2 or 4 for cubic mode")}},$p=(e,t,r)=>{t.every(i=>i>=0&&i<r||(()=>{throw new Error("Resize requires axes input values to be positive and less than rank")}));let o=new Array(r).fill(1);return t.forEach((i,u)=>o[i]=e[u]),o},_p=(e,t,r,o,i,u)=>{let[a,c,p]=r>10?[1,2,3]:[-1,e.length>1?1:-1,-1],h=e[0].dims.length;if(a>0&&e.length>a&&e[a].dims.length>0)e[a].getFloat32Array().forEach(d=>u.push(d));else if(t.coordinateTransformMode==="tf_crop_and_resize")throw new Error("Resize requires RoI input to be specified when coordinateTransformMode is tfCropAndResize");if(c>0&&e.length>c&&e[c].dims.length>0){if(e[c].getFloat32Array().forEach(d=>o.push(d)),o.length!==0&&o.length!==h&&r>=18&&o.length!==t.axes.length)throw new Error("Resize requires scales input size to be same as input rank or axes size for opset 18 and up");vp(o,t),t.axes.length>0&&$p(o,t.axes,h).forEach((d,y)=>o[y]=d)}if(p>0&&e.length>p&&(e[p].getBigInt64Array().forEach(d=>i.push(Number(d))),i.length!==h||r>=18&&i.length===t.axes.length))throw new Error("Resize requires sizes input size to be same as input rank or axes size for opset 18 and up");if(t.axes.length>0){if(o.length!==t.axes.length)throw new Error(\'Resize requires "scales" input size to be of axes rank when axes attributes is specified\');if(i.length!==t.axes.length)throw new Error(\'Resize requires "sizes" input size to be of rank axes rank when axes attributes is specified\')}if(typeof o<"u"&&typeof i<"u"&&o.length>0&&i.length>h)throw new Error("Resize requires only of scales or sizes to be specified")},Sp=(e,t)=>`fn getOriginalCoordinateFromResizedCoordinate(xResized: u32, xScale: f32, lengthResized: u32,\n     lengthOriginal: u32, roiStart: f32, roiEnd: f32) -> ${t} { `+(()=>{switch(e){case"asymmetric":return`return ${t}(xResized) / ${t}(xScale);`;case"pytorch_half_pixel":return`if (lengthResized > 1) {\n                    return (${t}(xResized) + 0.5) / ${t}(xScale) - 0.5;\n                  } else {\n                    return 0.0;\n                  }`;case"tf_half_pixel_for_nn":return`return (${t}(xResized) + 0.5) / ${t}(xScale);`;case"align_corners":return`if (lengthResized == 1) {\n                    return 0.0;\n                  } else {\n                    // The whole part and the fractional part are calculated separately due to inaccuracy of floating\n                    // point division. As an example, f32(21) / f32(7) may evaluate to 2.99... instead of 3, causing an\n                    // offset-by-one error later in floor().\n                    let whole = ${t}(xResized * (lengthOriginal - 1) / (lengthResized - 1));\n                    let fract =\n                        ${t}(xResized * (lengthOriginal - 1) % (lengthResized - 1)) / ${t}(lengthResized - 1);\n                    return whole + fract;\n                  }`;case"tf_crop_and_resize":return`if (lengthResized > 1) {\n                    return ${t}(roiStart) * ${t}(lengthOriginal - 1) +\n                        (${t}(xResized) * ${t}(roiEnd - roiStart) * ${t}(lengthOriginal - 1)) /\n                        ${t}(lengthResized - 1);\n                  } else {\n                    return 0.5 * ${t}(roiStart + roiEnd) * ${t}(lengthOriginal - 1);\n                  }`;case"half_pixel_symmetric":return`const outputWidth = ${t}xScale * ${t}(lengthResized);\n                  const adjustment = ${t}(lengthResized) / outputWidth;\n                  const center = ${t}(lengthOriginal) / 2;\n                  const offset = center * (1 - adjustment);\n                  return offset + ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;case"half_pixel":return`return ((${t}(xResized) + 0.5) / ${t}(xScale)) - 0.5;`;default:throw new Error(`Coordinate transform mode ${e} is not supported`)}})()+"}",xp=(e,t,r)=>`fn getNearestPixelFromOriginal(xOriginal: ${r}, isDownSample: bool) -> ${r} {`+(()=>{switch(e){case"round_prefer_ceil":return"if (fract(xOriginal) == 0.5) {             return ceil(xOriginal);           } else {             return round(xOriginal);           }";case"floor":return"return floor(xOriginal);";case"ceil":return"return ceil(xOriginal);";case"round_prefer_floor":return"if (fract(xOriginal) == 0.5) {                     return floor(xOriginal);                   } else {                     return round(xOriginal);                   }";case"simple":default:if(t<11)return"if (isDownSample)                     {                       return ceil(xOriginal);                     } else {                       return xOriginal;                     }";throw new Error(`Nearest mode ${e} is not supported`)}})()+"}",Cp=(e,t,r)=>{let o=new Array(r).fill(0).concat(new Array(r).fill(1)),i=e.length===0?o:e.slice();return t.length>0?(t.forEach((u,a)=>{o[u]=i[a],o[a+r]=i[t.length+a]}),o):i},Ap=(e,t,r,o)=>{let i=[];if(r.length>0)if(o.length>0){if(e.forEach(u=>i.push(u)),Math.max(...o)>e.length)throw new Error("axes is out of bound");o.forEach((u,a)=>i[u]=r[a])}else r.forEach(u=>i.push(u));else{if(t.length===0)throw new Error("Resize requires either scales or sizes.");i=e.map((u,a)=>Math.round(u*t[a]))}return i},Ip=(e,t,r)=>{let o=(()=>{switch(r.keepAspectRatioPolicy){case"not_larger":return r.axes.length>0?Math.min(...r.axes.map(u=>t[u]),Number.MAX_VALUE):Math.min(...t,Number.MAX_VALUE);case"not_smaller":return r.axes.length>0?Math.max(...r.axes.map(u=>t[u]),Number.MIN_VALUE):Math.max(...t,Number.MIN_VALUE);default:throw new Error(`Keep aspect ratio policy ${r.keepAspectRatioPolicy} is not supported`)}})();t.fill(1,0,t.length);let i=e.slice();return r.axes.length>0?(r.axes.forEach(u=>t[u]=o),r.axes.forEach(u=>i[u]=Math.round(e[u]*t[u]))):(t.fill(o,0,t.length),i.forEach((u,a)=>i[a]=Math.round(u*t[a]))),i},Tp=(e,t,r,o,i)=>`\n    fn calculateOriginalIndicesFromOutputIndices(output_indices: ${e.type.indices}) -> array<${e.type.value}, ${r.length}> {\n      var original_indices: array<${e.type.value}, ${r.length}>;\n      for (var i:u32 = 0; i < ${r.length}; i++) {\n        var output_index = ${e.indicesGet("output_indices","i")};\n        var scale = ${fe("uniforms.scales","i",o)};\n        var roi_low = ${fe("uniforms.roi","i",i)};\n        var roi_hi = ${fe("uniforms.roi",`i + ${t.length}`,i)};\n        if (scale == 1.0) {\n          original_indices[i] = ${e.type.value}(output_index);\n        } else {\n          var input_shape_i = ${fe("uniforms.input_shape","i",t.length)};\n          var output_shape_i = ${fe("uniforms.output_shape","i",r.length)};\n          original_indices[i] = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                           input_shape_i, roi_low, roi_hi);\n        }\n      }\n      return original_indices;\n    }`,Ep=(e,t,r,o,i,u,a)=>`\n    fn calculateInputIndicesFromOutputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {\n      var input_indices: ${e.type.indices};\n      for (var i:u32 = 0; i < ${o.length}; i++) {\n        var output_index = ${t.indicesGet("output_indices","i")};\n        var input_index: u32;\n        var scale = ${fe("uniforms.scales","i",i)};\n        if (scale == 1.0) {\n          input_index = output_index;\n        } else {\n          var roi_low = ${fe("uniforms.roi","i",u)};\n          var roi_hi = ${fe("uniforms.roi",`i + ${r.length}`,u)};\n          var input_shape_i = ${fe("uniforms.input_shape","i",r.length)};\n          var output_shape_i = ${fe("uniforms.output_shape","i",o.length)};\n          var original_idx = getOriginalCoordinateFromResizedCoordinate(output_index, scale, output_shape_i,\n                                                                        input_shape_i, roi_low, roi_hi);\n          if (!${a} || (original_idx >= 0 && original_idx < ${t.type.value}(input_shape_i))) {\n            if (original_idx < 0) {\n              input_index = 0;\n            } else if (original_idx > ${t.type.value}(input_shape_i - 1)) {\n              input_index = input_shape_i - 1;\n            } else {\n              input_index = u32(getNearestPixelFromOriginal(original_idx, scale < 1));\n            }\n          } else {\n            input_index = u32(original_idx);\n          }\n        }\n        ${e.indicesSet("input_indices","i"," input_index")}\n      }\n      return input_indices;\n    }`,Pp=(e,t)=>`\n    fn checkInputIndices(input_indices: ${e.type.indices}) -> bool {\n      for (var i:u32 = 0; i < ${t.length}; i++) {\n        var input_index = ${e.indicesGet("input_indices","i")};\n        if (input_index < 0 || input_index >= ${fe("uniforms.input_shape","i",t.length)}) {\n          return false;\n        }\n      }\n      return true;\n    }`,fd=(e,t,r,o)=>e.rank>o?`\n    ${e.indicesSet("input_indices",t,"channel")};\n    ${e.indicesSet("input_indices",r,"batch")};\n`:"",kp=(e,t,r,o,i)=>{let[a,c,p,h]=r.length===2?[-1,0,1,-1]:[0,2,3,1],d=e.type.value;return`\n    fn getInputValue(batch: u32, channel: u32, row: u32, col: u32) -> ${d} {\n      var input_indices: ${e.type.indices};\n      ${e.indicesSet("input_indices",c,`max(0, min(row, ${r[c]} - 1))`)};\n      ${e.indicesSet("input_indices",p,`max(0, min(col, ${r[p]} - 1))`)};\n      ${fd(e,h,a,2)}\n      return ${e.getByIndices("input_indices")};\n    }\n\n    fn bilinearInterpolation(output_indices: ${t.type.indices}) -> ${d} {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var row:${d} = originalIndices[${c}];\n      var col:${d} = originalIndices[${p}];\n      ${o?`if (row < 0 || row > (${r[c]} - 1) || col < 0 || col > (${r[p]} - 1)) {\n        return ${i};\n      }`:""};\n      row = max(0, min(row, ${r[c]} - 1));\n      col = max(0, min(col, ${r[p]} - 1));\n      var row1: u32 = u32(row);\n      var col1: u32 = u32(col);\n      var row2: u32 = u32(row + 1);\n      var col2: u32 = u32(col + 1);\n      var channel: u32 = ${r.length>2?`u32(originalIndices[${h}])`:"0"};\n      var batch: u32 =  ${r.length>2?`u32(originalIndices[${a}])`:"0"};\n      var x11: ${d} = getInputValue(batch, channel, row1, col1);\n      var x12: ${d} = getInputValue(batch, channel, row1, col2);\n      var x21: ${d} = getInputValue(batch, channel, row2, col1);\n      var x22: ${d} = getInputValue(batch, channel, row2, col2);\n      var dx1: ${d} = abs(row - ${d}(row1));\n      var dx2: ${d} = abs(${d}(row2) - row);\n      var dy1: ${d} = abs(col - ${d}(col1));\n      var dy2: ${d} = abs(${d}(col2) - col);\n      if (row1 == row2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (col1 == col2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      return (x11 * dx2 * dy2 + x12 * dx2 * dy1 + x21 * dx1 * dy2 + x22 * dx1 * dy1);\n    }`},Op=(e,t,r,o,i,u,a,c,p,h)=>{let d=r.length===2,y=!0,[w,_]=d?[0,1]:y?[2,3]:[1,2],v=e.type.value,S=A=>{let I=A===w?"row":"col";return`\n      fn ${I}CubicInterpolation(input_indices: ${e.type.indices}, output_indices: ${t.type.indices}) -> ${v} {\n        var output_index = ${t.indicesGet("output_indices",A)};\n        var originalIdx: ${v} = getOriginalCoordinateFromResizedCoordinate(output_index, ${i[A]},\n        ${o[A]}, ${r[A]}, ${u[A]}, ${u[A]} + ${r.length});\n        var fractOriginalIdx: ${v} = originalIdx - floor(originalIdx);\n        var coefs = getCubicInterpolationCoefs(fractOriginalIdx);\n\n        if (${c} && (originalIdx < 0 || originalIdx > (${r[A]} - 1))) {\n          return ${p};\n        }\n        var data: array<${v}, 4> = array<${v}, 4>(0.0, 0.0, 0.0, 0.0);\n        for (var i: i32 = -1; i < 3; i++) {\n          var ${I}: ${v} = originalIdx + ${v}(i);\n          if (${I} < 0 || ${I} >= ${r[A]}) {\n            ${(()=>h?`coefs[i + 1] = 0.0;\n                        continue;`:c?`return ${p};`:`${I} = max(0, min(${I}, ${r[A]} - 1));`)()};\n          }\n        var input_indices_copy: ${e.type.indices} = input_indices;\n          ${e.indicesSet("input_indices_copy",A,`u32(${I})`)};\n          data[i + 1] = ${A===w?e.getByIndices("input_indices_copy"):"rowCubicInterpolation(input_indices_copy, output_indices)"};\n        }\n        return cubicInterpolation1D(data, coefs);\n      }`};return`\n    ${S(w)};\n    ${S(_)};\n  fn getCubicInterpolationCoefs(s: ${v}) -> array<${v}, 4> {\n    var absS = abs(s);\n    var coeffs: array<${v}, 4> = array<${v}, 4>(0.0, 0.0, 0.0, 0.0);\n    var oneMinusAbsS: ${v} = 1.0 - absS;\n    var twoMinusAbsS: ${v} = 2.0 - absS;\n    var onePlusAbsS: ${v} = 1.0 + absS;\n    coeffs[0] = ((${a} * onePlusAbsS - 5 * ${a}) * onePlusAbsS + 8 * ${a}) * onePlusAbsS - 4 * ${a};\n    coeffs[1] = ((${a} + 2) * absS - (${a} + 3)) * absS * absS + 1;\n    coeffs[2] = ((${a} + 2) * oneMinusAbsS - (${a} + 3)) * oneMinusAbsS * oneMinusAbsS + 1;\n    coeffs[3] = ((${a} * twoMinusAbsS - 5 * ${a}) * twoMinusAbsS + 8 * ${a}) * twoMinusAbsS - 4 * ${a};\n    return coeffs;\n  }\n\n  fn cubicInterpolation1D(x: array<${v}, 4>, coefs: array<${v}, 4>) -> ${v} {\n    var coefsSum: ${v} = coefs[0] + coefs[1] + coefs[2] + coefs[3];\n    return (x[0] * coefs[0] + x[1] * coefs[1]+ x[2] * coefs[2]+ x[3] * coefs[3]) / coefsSum;\n  }\n\n  fn bicubicInterpolation(output_indices: ${t.type.indices}) -> ${v} {\n    var input_indices: ${e.type.indices} = output_indices;\n    return colCubicInterpolation(input_indices, output_indices);\n  }\n    `},Rp=(e,t,r,o,i)=>{let[a,c,p,h,d]=r.length===3?[-1,0,1,2,-1]:[0,2,3,4,1],y=e.type.value;return`\n    fn getInputValue(batch: u32, channel: u32, depth:u32, height: u32, width: u32) -> ${y} {\n      var input_indices: ${e.type.indices};\n      ${e.indicesSet("input_indices",c,`max(0, min(depth, ${r[c]} - 1))`)};\n      ${e.indicesSet("input_indices",p,`max(0, min(height, ${r[p]} - 1))`)};\n      ${e.indicesSet("input_indices",h,`max(0, min(width, ${r[h]} - 1))`)};\n      ${fd(e,d,a,3)}\n      return ${e.getByIndices("input_indices")};\n    }\n\n    fn trilinearInterpolation(output_indices: ${t.type.indices}) -> ${y} {\n      var originalIndices = calculateOriginalIndicesFromOutputIndices(output_indices);\n      var depth:${y} = originalIndices[${c}];\n      var height:${y} = originalIndices[${p}];\n      var width:${y} = originalIndices[${h}];\n      ${o?`if (depth < 0 || depth > (${r[c]} - 1) || height < 0 || height > (${r[p]} - 1) || width < 0 || (width > ${r[h]} - 1)) {\n      return ${i};\n        }`:""};\n\n    depth = max(0, min(depth, ${r[c]} - 1));\n      height = max(0, min(height, ${r[p]} - 1));\n      width = max(0, min(width, ${r[h]} - 1));\n      var depth1: u32 = u32(depth);\n      var height1: u32 = u32(height);\n      var width1: u32 = u32(width);\n      var depth2: u32 = u32(depth + 1);\n      var height2: u32 = u32(height + 1);\n      var width2: u32 = u32(width + 1);\n      var channel: u32 = ${r.length>3?`u32(originalIndices[${d}])`:"0"};\n      var batch: u32 =  ${r.length>3?`u32(originalIndices[${a}])`:"0"};\n\n      var x111: ${y} = getInputValue(batch, channel, depth1, height1, width1);\n      var x112: ${y} = getInputValue(batch, channel, depth1, height1, width2);\n      var x121: ${y} = getInputValue(batch, channel, depth1, height2, width1);\n      var x122: ${y} = getInputValue(batch, channel, depth1, height2, width2);\n      var x211: ${y} = getInputValue(batch, channel, depth2, height1, width1);\n      var x212: ${y} = getInputValue(batch, channel, depth2, height1, width2);\n      var x221: ${y} = getInputValue(batch, channel, depth2, height2, width1);\n      var x222: ${y} = getInputValue(batch, channel, depth2, height2, width2);\n      var dx1: ${y} = abs(depth - ${y}(depth1));\n      var dx2: ${y} = abs(${y}(depth2) - depth);\n      var dy1: ${y} = abs(height - ${y}(height1));\n      var dy2: ${y} = abs(${y}(height2) - height);\n      var dz1: ${y} = abs(width - ${y}(width1));\n      var dz2: ${y} = abs(${y}(width2) - width);\n      if (depth1 == depth2) {\n        dx1 = 0.5;\n        dx2 = 0.5;\n      }\n      if (height1 == height2) {\n        dy1 = 0.5;\n        dy2 = 0.5;\n      }\n      if (width1 == width2) {\n        dz1 = 0.5;\n        dz2 = 0.5;\n      }\n      return (x111 * dx2 * dy2 * dz2 + x112 * dx2 * dy2 * dz1 + x121 * dx2 * dy1 *dz2 + x122 * dx2 * dy1 * dz1 +\n              x211 * dx1 * dy2 * dz2 + x212 * dx1 * dy2 * dz1 + x221 * dx1 * dy1 *dz2 + x222 * dx1 * dy1 * dz1);\n    }`},Bp=(e,t,r,o,i,u)=>{let a=e.dims,c=Cp(u,t.axes,a.length),p=Ap(a,o,i,t.axes),h=o.slice();o.length===0&&(h=a.map((x,E)=>x===0?1:p[E]/x),t.keepAspectRatioPolicy!=="stretch"&&(p=Ip(a,h,t)));let d=j("output",e.dataType,p.length),y=U("input",e.dataType,a.length),w=M.size(p),_=a.length===p.length&&a.every((x,E)=>x===p[E]),v=t.coordinateTransformMode==="tf_crop_and_resize",S=t.extrapolationValue,A=y.type.value,I=x=>`\n      ${_?"":`\n      ${Sp(t.coordinateTransformMode,A)};\n      ${(()=>{switch(t.mode){case"nearest":return`\n              ${Pp(y,a)};\n              ${xp(t.nearestMode,r,A)};\n              ${Ep(y,d,a,p,h.length,c.length,v)};\n              `;case"linear":return`\n              ${Tp(d,a,p,h.length,c.length)};\n              ${(()=>{if(a.length===2||a.length===4)return`${kp(y,d,a,v,S)}`;if(a.length===3||a.length===5)return`${Rp(y,d,a,v,S)}`;throw Error("Linear mode only supports input dims 2, 3, 4 and 5 are supported in linear mode.")})()};\n            `;case"cubic":return`\n            ${(()=>{if(a.length===2||a.length===4)return`${Op(y,d,a,p,h,c,t.cubicCoeffA,v,t.extrapolationValue,t.excludeOutside)}`;throw Error("Cubic mode only supports input dims 2 and 4 are supported in linear mode.")})()};\n            `;default:throw Error("Invalid resize mode")}})()};\n      `}\n      ${x.registerUniform("output_size","u32").registerUniform("scales","f32",h.length).registerUniform("roi","f32",c.length).declareVariables(y,d)}\n      ${x.mainStart()}\n        ${x.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n        ${_?"output[global_idx] = input[global_idx];":`\n        let output_indices = ${d.offsetToIndices("global_idx")};\n        var input_indices: ${y.type.indices};\n        ${(()=>{switch(t.mode){case"nearest":return`input_indices = calculateInputIndicesFromOutputIndices(output_indices);\n                if (checkInputIndices(input_indices)) {\n                  output[global_idx] = ${y.getByIndices("input_indices")};\n                } else {\n                  output[global_idx] = ${t.extrapolationValue};\n                }`;case"linear":return`output[global_idx] = ${a.length===2||a.length===4?"bilinearInterpolation":"trilinearInterpolation"}(output_indices);`;case"cubic":return"output[global_idx] = bicubicInterpolation(output_indices);";default:throw Error(`Unsupported resize mode: ${t.mode}`)}})()};\n`}\n      }`;return{name:"Resize",shaderCache:{hint:`${t.cacheKey}|${r}|${h.length>0?h:""}|${i.length>0?i:""}|${c.length>0?c:""}|${_}|${a}`,inputDependencies:["rank"]},getShaderSource:I,getRunData:()=>({outputs:[{dims:p,dataType:e.dataType}],dispatchGroup:{x:Math.ceil(w/64)},programUniforms:[{type:12,data:w},{type:1,data:h},{type:1,data:c},...Z(a,p)]})}},Dp=e=>{let t=e.customDataBuffer;return new Uint32Array(t,t.byteOffset,1)[0]},hd=(e,t)=>{let r=[],o=[],i=[],u=Dp(e);if(t.antialias!==0)throw Error("Only default value (0) for Antialias attribute is supported");_p(e.inputs,t,u,r,o,i),e.compute(Bp(e.inputs[0],t,u,r,o,i),{inputs:[0]})},gd=e=>{let t=e.antialias,r=e.axes,o=e.coordinateTransformMode,i=e.cubicCoeffA,u=e.excludeOutside!==0,a=e.extrapolationValue,c=e.keepAspectRatioPolicy,p=e.mode,h=e.nearestMode===""?"simple":e.nearestMode;return ve({antialias:t,axes:r,coordinateTransformMode:o,cubicCoeffA:i,excludeOutside:u,extrapolationValue:a,keepAspectRatioPolicy:c,mode:p,nearestMode:h})}});var zp,Mp,bd,wd=Y(()=>{"use strict";ye();Se();Ze();_e();zp=(e,t)=>{let[r,o,i,u]=e,{numHeads:a,rotaryEmbeddingDim:c}=t;if(r.dims.length!==3&&r.dims.length!==4)throw new Error(`Input \'x\' is expected to have 3 or 4 dimensions, got ${r.dims.length}`);if(!M.areEqual(o.dims,[])&&!M.areEqual(o.dims,[1])&&o.dims.length!==2)throw new Error(`Input \'position_ids\' is expected to have 0, 1, or 2 dimensions, got ${o.dims.length}`);if(i.dims.length!==2)throw new Error(`Input \'cos_cache\' is expected to have 2 dimensions, got ${i.dims.length}`);if(u.dims.length!==2)throw new Error(`Input \'sin_cache\' is expected to have 2 dimensions, got ${u.dims.length}`);if(!M.areEqual(i.dims,u.dims))throw new Error("Inputs \'cos_cache\' and \'sin_cache\' are expected to have the same shape");if(c>0&&a===0)throw new Error("num_heads must be provided if rotary_embedding_dim is specified");let p=r.dims[0],h=r.dims[r.dims.length-2],d=i.dims[0],y=M.sizeFromDimension(r.dims,1)/h,w=c===0?i.dims[1]*2:y/a;if(c>w)throw new Error("rotary_embedding_dim must be less than or equal to head_size");if(o.dims.length===2){if(p!==o.dims[0])throw new Error(`Input \'position_ids\' dimension 0 should be of size batch_size, got ${o.dims[0]}`);if(h!==o.dims[1])throw new Error(`Input \'position_ids\' dimension 1 should be of size sequence_length, got ${o.dims[1]}`)}if(w/2!==i.dims[1]&&c/2!==i.dims[1])throw new Error(`Input \'cos_cache\' dimension 1 should be same as head_size / 2 or rotary_embedding_dim / 2, got ${i.dims[1]}`);if(h>d)throw new Error("Updating cos_cache and sin_cache in RotaryEmbedding is not currently supported")},Mp=(e,t)=>{let{interleaved:r,numHeads:o,rotaryEmbeddingDim:i,scale:u}=t,a=e[0].dims[0],c=M.sizeFromDimension(e[0].dims,1),p=e[0].dims[e[0].dims.length-2],h=c/p,d=e[2].dims[1],y=i===0?d*2:h/o,w=new Array(a,p,h/y,y-d),_=M.computeStrides(w),v=[{type:1,data:u},{type:12,data:w},{type:12,data:_},...e[0].dims.length===3?new Array({type:12,data:[c,h,y,1]}):[],...e[0].dims.length===4?new Array({type:12,data:[c,y,p*y,1]}):[],...Z(e[0].dims,e[1].dims,e[2].dims,e[3].dims,e[0].dims)],S=A=>{let I=U("input",e[0].dataType,e[0].dims.length),x=U("position_ids",e[1].dataType,e[1].dims.length),E=U("cos_cache",e[2].dataType,e[2].dims.length),P=U("sin_cache",e[3].dataType,e[3].dims.length),O=j("output",e[0].dataType,e[0].dims.length);return A.registerUniforms([{name:"scale",type:"f32"},{name:"global_shape",type:"u32",length:w.length},{name:"global_strides",type:"u32",length:_.length},{name:"input_output_strides",type:"u32",length:_.length}]),`\n        ${A.declareVariables(I,x,E,P,O)}\n\n        ${A.mainStart(or)}\n          let half_rotary_emb_dim = uniforms.${E.name}_shape[1];\n          let bsnh = global_idx / uniforms.global_strides % uniforms.global_shape;\n          let size = uniforms.global_shape[0] * uniforms.global_strides[0];\n          ${A.guardAgainstOutOfBoundsWorkgroupSizes("size")}\n\n          if (bsnh[3] < half_rotary_emb_dim) {\n            let position_ids_idx =\n                ${x.broadcastedIndicesToOffset("bsnh.xy",j("",x.type.tensor,2))};\n            let position_id =\n                u32(${x.getByOffset("position_ids_idx")}) + select(0, bsnh[1], position_ids_idx == 0);\n            let i = dot(bsnh, uniforms.input_output_strides) + select(0, bsnh[3], ${r});\n            let j = i + select(half_rotary_emb_dim, 1, ${r});\n            let re = ${I.getByOffset("i")} * ${E.get("position_id","bsnh[3]")} -\n                ${I.getByOffset("j")} * ${P.get("position_id","bsnh[3]")};\n            ${O.setByOffset("i","re")}\n            let im = ${I.getByOffset("i")} * ${P.get("position_id","bsnh[3]")} +\n                ${I.getByOffset("j")} * ${E.get("position_id","bsnh[3]")};\n            ${O.setByOffset("j","im")}\n          } else {\n            let k = dot(bsnh, uniforms.input_output_strides) + half_rotary_emb_dim;\n            ${O.setByOffset("k",I.getByOffset("k"))}\n          }\n        }`};return{name:"RotaryEmbedding",shaderCache:{hint:ve({interleaved:r}).cacheKey,inputDependencies:["rank","rank","rank","rank"]},getShaderSource:S,getRunData:()=>({outputs:[{dims:e[0].dims,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(M.size(w)/or)},programUniforms:v})}},bd=(e,t)=>{zp(e.inputs,t),e.compute(Mp(e.inputs,t))}});var Up,Vp,vd,$d=Y(()=>{"use strict";ye();Se();_e();Up=e=>{if(!e||e.length<3)throw new Error("layerNorm requires at least 3 inputs.");let t=e[0],r=e[1],o=e[2];if(t.dataType!==r.dataType||t.dataType!==o.dataType)throw new Error("All inputs must have the same data type");if(t.dims.length!==3&&t.dims.length!==2)throw new Error("Input must be 2D or 3D");if(r.dims.length!==3&&r.dims.length!==2)throw new Error("Skip must be 2D or 3D");let i=t.dims[t.dims.length-1],u=t.dims[t.dims.length-2];if(r.dims[r.dims.length-1]!==i)throw new Error("Skip must have the same hidden size as input");if(r.dims[r.dims.length-2]!==u)throw new Error("Skip must have the same sequence length as input");if(o.dims.length!==1)throw new Error("Gamma must be 1D");if(o.dims[o.dims.length-1]!==i)throw new Error("Gamma must have the same hidden size as input");if(e.length>3){let a=e[3];if(a.dims.length!==1)throw new Error("Beta must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Beta must have the same hidden size as input")}if(e.length>4){let a=e[4];if(a.dims.length!==1)throw new Error("Bias must be 1D");if(a.dims[a.dims.length-1]!==i)throw new Error("Bias must have the same hidden size as input")}},Vp=(e,t,r,o)=>{let i=t.simplified,u=e[0].dims,a=M.size(u),c=u,p=a,h=u.slice(-1)[0],d=o?u.slice(0,-1).concat(1):[],y=!i&&e.length>3,w=e.length>4,_=o&&r>1,v=o&&r>2,S=r>3,A=Me(h),I=[{type:12,data:p},{type:12,data:A},{type:12,data:h},{type:1,data:t.epsilon}],x=P=>{let O=[{name:"output_size",type:"u32"},{name:"components",type:"u32"},{name:"hidden_size",type:"u32"},{name:"epsilon",type:"f32"}],R=[U("x",e[0].dataType,e[0].dims,A),U("skip",e[1].dataType,e[1].dims,A),U("gamma",e[2].dataType,e[2].dims,A)];y&&R.push(U("beta",e[3].dataType,e[3].dims,A)),w&&R.push(U("bias",e[4].dataType,e[4].dims,A)),R.push(j("output",e[0].dataType,c,A)),_&&R.push(j("mean_output",1,d)),v&&R.push(j("inv_std_output",1,d)),S&&R.push(j("input_skip_bias_sum",e[0].dataType,c,A));let L=De(e[0].dataType);return`\n\n      ${P.registerUniforms(O).declareVariables(...R)}\n\n      ${P.mainStart()}\n        ${P.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size / uniforms.hidden_size")}\n        let hidden_size_vectorized: u32 = uniforms.hidden_size / uniforms.components;\n        let offset = global_idx * hidden_size_vectorized;\n        var sum = ${$t("f32",A)};\n        var squareSum = ${$t("f32",A)};\n        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {\n          let skip_value = skip[offset + i];\n          let bias_value = ${w?"bias[i]":L+"(0.0)"};\n          let input_value = x[offset + i];\n          let value = input_value + skip_value + bias_value;\n          ${S?"input_skip_bias_sum[offset + i] = value;":""}\n          output[offset + i] = value;\n          let f32_value = ${ir(L,A,"value")};\n          sum += f32_value;\n          squareSum += f32_value * f32_value;\n        }\n        let mean = ${_t("sum",A)} / f32(uniforms.hidden_size);\n        let inv_std_dev = inverseSqrt(${_t("squareSum",A)} / f32(uniforms.hidden_size) ${i?"":"- mean * mean"} + uniforms.epsilon);\n        ${_?"mean_output[global_idx] = mean;":""}\n        ${v?"inv_std_output[global_idx] = inv_std_dev;":""}\n        for (var i: u32 = 0; i < hidden_size_vectorized; i++) {\n          output[offset + i] = (output[offset + i] ${i?"":`- ${L}(mean)`}) * ${L}(inv_std_dev) * gamma[i] ${y?"+ beta[i]":""};\n        }\n      }`},E=[{dims:c,dataType:e[0].dataType}];return r>1&&E.push({dims:d,dataType:1}),r>2&&E.push({dims:d,dataType:1}),r>3&&E.push({dims:u,dataType:e[0].dataType}),{name:"SkipLayerNormalization",shaderCache:{hint:`${A};${_};${v};${S}`,inputDependencies:e.map((P,O)=>"type")},getShaderSource:x,getRunData:()=>({outputs:E,dispatchGroup:{x:Math.ceil(p/h/64)},programUniforms:I})}},vd=(e,t)=>{Up(e.inputs);let o=[0];e.outputCount>1&&o.push(-3),e.outputCount>2&&o.push(-3),e.outputCount>3&&o.push(3),e.compute(Vp(e.inputs,t,e.outputCount,!1),{outputs:o})}});var Wp,Gn,Np,_d,Gp,Hp,Sd,xd,Cd=Y(()=>{"use strict";ye();Se();Ze();_e();Wp=(e,t)=>{if(!e||e.length<1)throw new Error("too few inputs");if(t.axes.length!==0){if(t.axes.length!==t.starts.length||t.axes.length!==t.ends.length)throw new Error("axes, starts and ends must have the same length")}else if(t.starts.length!==t.ends.length)throw new Error("starts and ends must have the same length");e.slice(1).forEach((r,o)=>{if(e[o+1].dataType!==6&&e[o+1].dataType!==7)throw new Error(`Input ${o} must be an array of int32 or int64`)})},Gn=(e,t)=>{let r=[];if(e.length>t)if(e[t].dataType===7)e[t].getBigInt64Array().forEach(o=>r.push(Number(o)));else if(e[t].dataType===6)e[t].getInt32Array().forEach(o=>r.push(Number(o)));else throw new Error(`Input ${t} must be an array of int32 or int64`);return r},Np=(e,t)=>{if(e.length>1){let r=Gn(e,1),o=Gn(e,2),i=Gn(e,3);return i.length===0&&(i=[...Array(e[0].dims.length).keys()]),ve({starts:r,ends:o,axes:i})}else return t},_d=(e,t,r,o,i)=>{let u=e;return e<0&&(u+=r[o[t]]),i[t]<0?Math.max(0,Math.min(u,r[o[t]]-1)):Math.max(0,Math.min(u,r[o[t]]))},Gp=(e,t,r)=>`fn calculateInputIndices(output_indices: ${t.type.indices}) -> ${e.type.indices} {\n          var input_indices: ${e.type.indices};\n          var carry = 0u;\n          for (var i = ${r.length}; i >= 0; i--) {\n            let input_shape_i = ${fe("uniforms.input_shape","i",r.length)};\n            let steps_i = ${fe("uniforms.steps","i",r.length)};\n            let signs_i = ${fe("uniforms.signs","i",r.length)};\n            let starts_i = ${fe("uniforms.starts","i",r.length)};\n            var output_index = ${t.indicesGet("output_indices","i")};\n            var input_index = output_index * steps_i + starts_i + carry;\n            carry = input_index / input_shape_i;\n            input_index = input_index % input_shape_i;\n            if (signs_i < 0) {\n              input_index = input_shape_i - input_index - 1u + starts_i;\n            }\n            ${e.indicesSet("input_indices","i","input_index")};\n          }\n          return input_indices;\n      }`,Hp=(e,t)=>{let r=e[0].dims,o=M.size(r),i=t.axes.length>0?M.normalizeAxes(t.axes,r.length):[...Array(r.length).keys()],u=Gn(e,4);u.forEach(I=>I!==0||(()=>{throw new Error("step cannot be 0")})),u.length===0&&(u=Array(i.length).fill(1));let a=t.starts.map((I,x)=>_d(I,x,r,i,u)),c=t.ends.map((I,x)=>_d(I,x,r,i,u));if(i.length!==a.length||i.length!==c.length)throw new Error("start, ends and axes should have the same number of elements");if(i.length!==r.length)for(let I=0;I<r.length;++I)i.includes(I)||(a.splice(I,0,0),c.splice(I,0,r[I]),u.splice(I,0,1));let p=u.map(I=>Math.sign(I));u.forEach((I,x,E)=>{if(I<0){let P=(c[x]-a[x])/I,O=a[x],R=O+P*u[x];a[x]=R,c[x]=O,E[x]=-I}});let h=r.slice(0);i.forEach((I,x)=>{h[I]=Math.ceil((c[I]-a[I])/u[I])});let d={dims:h,dataType:e[0].dataType},y=j("output",e[0].dataType,h.length),w=U("input",e[0].dataType,e[0].dims.length),_=M.size(h),v=[{name:"outputSize",type:"u32"},{name:"starts",type:"u32",length:a.length},{name:"signs",type:"i32",length:p.length},{name:"steps",type:"u32",length:u.length}],S=[{type:12,data:_},{type:12,data:a},{type:6,data:p},{type:12,data:u},...Z(e[0].dims,h)],A=I=>`\n      ${I.registerUniforms(v).declareVariables(w,y)}\n        ${Gp(w,y,r)}\n        ${I.mainStart()}\n          ${I.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.outputSize")}\n          let output_indices = ${y.offsetToIndices("global_idx")};\n          let input_indices = calculateInputIndices(output_indices);\n          ${y.setByOffset("global_idx",w.getByIndices("input_indices"))}\n      }`;return{name:"Slice",shaderCache:{hint:`${p.length}_${a.length}_${u.length}`,inputDependencies:["rank"]},getShaderSource:A,getRunData:()=>({outputs:[d],dispatchGroup:{x:Math.ceil(o/64)},programUniforms:S})}},Sd=(e,t)=>{Wp(e.inputs,t);let r=Np(e.inputs,t);e.compute(Hp(e.inputs,r),{inputs:[0]})},xd=e=>{let t=e.starts,r=e.ends,o=e.axes;return ve({starts:t,ends:r,axes:o})}});var Lp,Fp,Ad,Id,Td=Y(()=>{"use strict";ye();Se();Ze();_e();Lp=e=>{if(!e||e.length!==1)throw new Error("Softmax op requires 1 input.")},Fp=(e,t)=>{let r=e.dims,o=M.size(r),i=64,u=t.axis;if(u<0&&(u=r.length+u),u<r.length-1)throw new Error("softmax only supports last axis for now.");let a=r[u],c=o/a,p=Me(a),h=a/p,d=(A,I)=>I===4?`max(max(${A}.x, ${A}.y), max(${A}.z, ${A}.w))`:I===2?`max(${A}.x, ${A}.y)`:I===3?`max(max(${A}.x, ${A}.y), ${A}.z)`:A,y=U("x",e.dataType,e.dims,p),w=j("result",e.dataType,e.dims,p),_=y.type.value,v=De(e.dataType)==="f32"?`var threadMax = ${_}(-3.402823e+38f);`:`var threadMax = ${_}(-65504.0h);`,S=A=>`\n      var<workgroup> rowMaxShared : ${_};\n      var<workgroup> rowSumShared : ${_};\n      var<workgroup> threadShared : array<${_}, ${i}>;\n\n      fn getValue(row: i32, col: i32, row_stride: i32) -> ${_} {\n        let index = row * row_stride + col;\n        return x[index];\n      }\n\n      fn setValue(row: i32, col: i32, row_stride: i32, value: ${_}) {\n        let index = row * row_stride + col;\n        result[index] = value;\n      }\n      ${A.registerUniform("packedCols","i32").declareVariables(y,w)}\n      ${A.mainStart()}\n        let gindex = i32(global_idx);\n        let lindex = i32(local_idx);\n        const wg = ${i};\n        let row = gindex / wg;\n        let cols = uniforms.packedCols;\n        let row_stride : i32 = uniforms.packedCols;\n\n        // find the rows max\n        ${v}\n        for (var col = lindex; col < cols; col += wg) {\n          let value = getValue(row, col, row_stride);\n          threadMax = max(threadMax, value);\n        }\n        if (lindex < cols) {\n          threadShared[lindex] = threadMax;\n        }\n        workgroupBarrier();\n\n        var reduceSize = min(cols, wg);\n        for (var currSize = reduceSize >> 1;  currSize > 0; currSize = reduceSize >> 1) {\n          reduceSize = currSize + (reduceSize & 1);\n          if (lindex < currSize) {\n            threadShared[lindex] = max(threadShared[lindex], threadShared[lindex + reduceSize]);\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowMaxShared = ${_}(${d("threadShared[0]",p)});\n        }\n        workgroupBarrier();\n\n        // find the rows sum\n        var threadSum = ${_}(0.0);\n        for (var col = lindex; col < cols; col += wg) {\n          let subExp = exp(getValue(row, col, row_stride) - rowMaxShared);\n          threadSum += subExp;\n        }\n        threadShared[lindex] = threadSum;\n        workgroupBarrier();\n\n        for (var currSize = wg >> 1;  currSize > 0; currSize = currSize >> 1) {\n          if (lindex < currSize) {\n            threadShared[lindex] = threadShared[lindex] + threadShared[lindex + currSize];\n          }\n          workgroupBarrier();\n        }\n        if (lindex == 0) {\n          rowSumShared = ${_}(${_t("threadShared[0]",p)});\n        }\n        workgroupBarrier();\n\n        // calculate final value for each element in the row\n        for (var col = lindex; col < cols; col += wg) {\n          let value = exp(getValue(row, col, row_stride) - rowMaxShared) / rowSumShared;\n          setValue(row, col, row_stride, value);\n        }\n      }`;return{name:"Softmax",shaderCache:{hint:`${p}`,inputDependencies:["type"]},getRunData:()=>({outputs:[{dims:r,dataType:e.dataType}],dispatchGroup:{x:c},programUniforms:[{type:6,data:h}]}),getShaderSource:S}},Ad=(e,t)=>{Lp(e.inputs),e.compute(Fp(e.inputs[0],t))},Id=e=>ve({axis:e.axis})});var qp,jp,Kp,Yp,Zp,Ed,Pd,kd=Y(()=>{"use strict";ye();Se();Ze();_e();qp=e=>{if(!e||e.length<1)throw new Error("too few inputs")},jp=(e,t)=>{let r=[],o=t.numOutputs;return e[1].dims[0]>0&&(e[1].getBigInt64Array().forEach(i=>r.push(Number(i))),o=r.length),ve({numOutputs:o,axis:t.axis,splitSizes:r})},Kp=e=>`\nfn calculateOutputIndex(index: u32) -> u32 {\n    for (var i: u32 = 0u; i < ${e}u; i += 1u ) {\n    if (index < ${fe("uniforms.size_in_split_axis","i",e)}) {\n        return i;\n    }\n    }\n    return ${e}u;\n}`,Yp=e=>{let t=e.length,r=[];for(let o=0;o<t;++o){let i=e[o].setByIndices("indices","input[global_idx]");t===1?r.push(i):o===0?r.push(`if (output_number == ${o}u) { ${i} }`):o===t-1?r.push(`else { ${i} }`):r.push(`else if (output_number == ${o}) { ${i} }`)}return`\n      fn writeBufferData(output_number: u32, indices: ${e[0].type.indices}, global_idx: u32) {\n        ${r.join(`\n`)}\n      }`},Zp=(e,t)=>{let r=e[0].dims,o=M.size(r),i=e[0].dataType,u=M.normalizeAxis(t.axis,r.length),a=new Array(t.numOutputs),c=U("input",i,r.length),p=new Array(t.numOutputs),h=[],d=[],y=0,w=[{type:12,data:o}];for(let v=0;v<t.numOutputs;v++){y+=t.splitSizes[v],p[v]=y;let S=r.slice();S[t.axis]=t.splitSizes[v],d.push(S),a[v]=j(`output${v}`,i,S.length),h.push({dims:d[v],dataType:e[0].dataType})}w.push({type:12,data:p},...Z(r,...d));let _=v=>`\n  ${v.registerUniform("input_size","u32").registerUniform("size_in_split_axis","u32",p.length).declareVariables(c,...a)}\n  ${Kp(p.length)}\n  ${Yp(a)}\n\n  ${v.mainStart()}\n    ${v.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.input_size")}\n\n    var indices = ${c.offsetToIndices("global_idx")};\n    var index = ${c.indicesGet("indices",u)};\n    let output_number = calculateOutputIndex(index);\n    if (output_number != 0) {\n      index -= ${fe("uniforms.size_in_split_axis","output_number - 1u",p.length)};\n      ${c.indicesSet("indices",u,"index")};\n    }\n    writeBufferData(output_number, indices, global_idx);\n  }`;return{name:"Split",shaderCache:{hint:t.cacheKey,inputDependencies:["rank"]},getShaderSource:_,getRunData:()=>({outputs:h,dispatchGroup:{x:Math.ceil(o/64)},programUniforms:w})}},Ed=(e,t)=>{qp(e.inputs);let r=e.inputs.length===1?t:jp(e.inputs,t);e.compute(Zp(e.inputs,r),{inputs:[0]})},Pd=e=>{let t=e.axis,r=e.splitSizes,o=e.numOutputs<0?r.length:e.numOutputs;if(o!==r.length)throw new Error("numOutputs and splitSizes lengh must be equal");return ve({axis:t,numOutputs:o,splitSizes:r})}});var Od,Xp,Qp,Jp,Rd,Bd=Y(()=>{"use strict";ye();Se();_e();Od=e=>Array.from(e.getBigInt64Array(),Number),Xp=e=>{if(!e||e.length!==2)throw new Error("Tile requires 2 inputs.");if(e[0].dataType!==1&&e[0].dataType!==6&&e[0].dataType!==12)throw new Error("Tile only support float, int32, and uint32 data types");if(e[1].dataType!==7)throw new Error("Tile `repeats` input should be of int64 data type");if(e[1].dims.length!==1)throw new Error("Tile `repeats` input should be 1-D");if(Od(e[1]).length!==e[0].dims.length)throw new Error("Tile `repeats` input should have same number of elements as rank of input data tensor")},Qp=(e,t)=>{let r=[];for(let o=0;o<e.length;++o)r.push(e[o]*t[o]);return r},Jp=e=>{let t=e[0].dims,r=Od(e[1]),o=Qp(t,r),i=M.size(o),u=e[0].dataType,a=U("input",u,t.length),c=j("output",u,o.length),p=h=>`\n      const inputShape = ${a.indices(...t)};\n      ${h.registerUniform("output_size","u32").declareVariables(a,c)}\n      ${h.mainStart()}\n      ${h.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.output_size")}\n      let output_indices = ${c.offsetToIndices("global_idx")};\n      var input_indices: ${a.type.indices};\n      for (var i = 0; i < ${t.length}; i++) {\n        let input_dim_i = ${a.indicesGet("uniforms.input_shape","i")};\n        let input_dim_value = ${c.indicesGet("output_indices","i")}  % input_dim_i;\n\n        ${a.indicesSet("input_indices","i","input_dim_value")}\n      }\n      ${c.setByOffset("global_idx",a.getByIndices("input_indices"))}\n    }`;return{name:"Tile",shaderCache:{hint:`${r}`,inputDependencies:["rank"]},getRunData:()=>({outputs:[{dims:o,dataType:e[0].dataType}],dispatchGroup:{x:Math.ceil(i/64)},programUniforms:[{type:12,data:i},...Z(e[0].dims,o)]}),getShaderSource:p}},Rd=e=>{Xp(e.inputs),e.compute(Jp(e.inputs),{inputs:[0]})}});var em,tm,Dd,zd=Y(()=>{"use strict";ye();Se();_e();em=(e,t,r,o,i)=>{let u=j("output_data",i,r.length,4),a=U("a_data",t[1].dataType,t[1].dims.length,4),c=U("b_data",t[2].dataType,t[2].dims.length,4),p=U("c_data",t[0].dataType,t[0].dims.length,4),h,d=(y,w,_)=>`select(${w}, ${y}, ${_})`;if(!o)h=u.setByOffset("global_idx",d(a.getByOffset("global_idx"),c.getByOffset("global_idx"),p.getByOffset("global_idx")));else{let y=(w,_,v="")=>{let S=`a_data[index_a${_}][component_a${_}]`,A=`b_data[index_b${_}][component_b${_}]`,I=`bool(c_data[index_c${_}] & (0xffu << (component_c${_} * 8)))`;return`\n            let output_indices${_} = ${u.offsetToIndices(`global_idx * 4u + ${_}u`)};\n            let offset_a${_} = ${a.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let offset_b${_} = ${c.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let offset_c${_} = ${p.broadcastedIndicesToOffset(`output_indices${_}`,u)};\n            let index_a${_} = offset_a${_} / 4u;\n            let index_b${_} = offset_b${_} / 4u;\n            let index_c${_} = offset_c${_} / 4u;\n            let component_a${_} = offset_a${_} % 4u;\n            let component_b${_} = offset_b${_} % 4u;\n            let component_c${_} = offset_c${_} % 4u;\n            ${w}[${_}] = ${v}(${d(S,A,I)});\n          `};i===9?h=`\n            var data = vec4<u32>(0);\n            ${y("data",0,"u32")}\n            ${y("data",1,"u32")}\n            ${y("data",2,"u32")}\n            ${y("data",3,"u32")}\n            output_data[global_idx] = dot(vec4<u32>(0x1, 0x100, 0x10000, 0x1000000), vec4<u32>(data));`:h=`\n            ${y("output_data[global_idx]",0)}\n            ${y("output_data[global_idx]",1)}\n            ${y("output_data[global_idx]",2)}\n            ${y("output_data[global_idx]",3)}\n          `}return`\n        ${e.registerUniform("vec_size","u32").declareVariables(p,a,c,u)}\n        ${e.mainStart()}\n        ${e.guardAgainstOutOfBoundsWorkgroupSizes("uniforms.vec_size")}\n        ${h}\n      }`},tm=e=>{let t=e[1].dims,r=e[2].dims,o=e[0].dims,i=e[1].dataType,u=!(M.areEqual(t,r)&&M.areEqual(r,o)),a=t,c=M.size(t);if(u){let h=It.calcShape(It.calcShape(t,r,!1),o,!1);if(!h)throw new Error("Can\'t perform where op on the given tensors");a=h,c=M.size(a)}let p=Math.ceil(c/4);return{name:"Where",shaderCache:{inputDependencies:["rank","rank","rank"]},getShaderSource:h=>em(h,e,a,u,i),getRunData:()=>({outputs:[{dims:a,dataType:i}],dispatchGroup:{x:Math.ceil(c/64/4)},programUniforms:[{type:12,data:p},...Z(o,t,r,a)]})}},Dd=e=>{e.compute(tm(e.inputs))}});var Md,Ud=Y(()=>{"use strict";Ka();Ro();Ja();ts();Vs();Zs();Oo();Uo();lu();mu();gu();$u();xu();Au();Eu();Ou();Du();Mu();Vu();Wo();Gu();qu();Ku();cd();md();In();yd();wd();$d();Cd();Td();kd();Bd();Sr();Rn();zd();Md=new Map([["Abs",[rs]],["Acos",[ns]],["Acosh",[os]],["Add",[Ws]],["ArgMax",[ja,ko]],["ArgMin",[qa,ko]],["Asin",[is]],["Asinh",[as]],["Atan",[ss]],["Atanh",[us]],["Attention",[Xa]],["AveragePool",[rd,td]],["BatchNormalization",[Qa]],["BiasAdd",[es]],["BiasSplitGelu",[Us]],["Cast",[ls,ds]],["Ceil",[ps]],["Clip",[cs]],["Concat",[Ya,Za]],["Conv",[Ho,Go]],["ConvTranspose",[du,uu]],["Cos",[ms]],["Cosh",[fs]],["CumSum",[cu,pu]],["DepthToSpace",[fu,hu]],["Div",[Ns]],["Einsum",[wu,vu]],["Elu",[hs,kn]],["Equal",[Gs]],["Erf",[gs]],["Exp",[ys]],["Expand",[Su]],["FastGelu",[Cu]],["Floor",[bs]],["FusedConv",[Ho,Go]],["Gather",[Tu,Iu]],["GatherElements",[ku,Pu]],["Gelu",[ws]],["Gemm",[Bu,Ru]],["GlobalAveragePool",[id,od]],["GlobalMaxPool",[ld,dd]],["Greater",[qs]],["GreaterOrEqual",[Ks]],["HardSigmoid",[Is,As]],["InstanceNormalization",[zu]],["LayerNormalization",[Uu]],["LeakyRelu",[vs,kn]],["Less",[js]],["LessOrEqual",[Ys]],["Log",[zs]],["MatMul",[ru]],["MatMulNBits",[Wu,Nu]],["MaxPool",[sd,ud]],["Mul",[Hs]],["MultiHeadAttention",[Fu,Lu]],["Neg",[_s]],["Not",[$s]],["Pad",[ju]],["Pow",[Ls]],["Range",[pd]],["Reciprocal",[Ss]],["ReduceMin",[Wa]],["ReduceMean",[Da]],["ReduceMax",[Va]],["ReduceSum",[Ga]],["ReduceProd",[Na]],["ReduceL1",[za]],["ReduceL2",[Ma]],["ReduceLogSum",[La]],["ReduceLogSumExp",[Ua]],["ReduceSumSquare",[Ha]],["Relu",[xs]],["Resize",[hd,gd]],["RotaryEmbedding",[bd]],["Sigmoid",[Cs]],["Sin",[Ts]],["Sinh",[Es]],["Slice",[Sd,xd]],["SkipLayerNormalization",[vd]],["Split",[Ed,Pd]],["Sqrt",[Ps]],["Softmax",[Ad,Id]],["Sub",[Fs]],["Tan",[ks]],["Tanh",[Rs]],["ThresholdedRelu",[Ds,kn]],["Tile",[Rd]],["Transpose",[_a,Sa]],["Where",[Dd]]])});var Hn,Vd=Y(()=>{"use strict";$r();Lt();_e();Hn=class{constructor(t){this.backend=t;this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,r){this.repo.set(t,r)}run(t,r,o,i,u){rr(t.programInfo.name);let a=this.backend.device,c=this.backend.getComputePassEncoder();this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2);let p=[];for(let d of r)p.push({binding:p.length,resource:{buffer:d.buffer}});for(let d of o)p.push({binding:p.length,resource:{buffer:d.buffer}});u&&p.push({binding:p.length,resource:u});let h=a.createBindGroup({layout:t.computePipeline.getBindGroupLayout(0),entries:p,label:t.programInfo.name});if(this.backend.sessionStatus==="capturing"){let d={kernelId:this.backend.currentKernelId,computePipeline:t.computePipeline,bindGroup:h,dispatchGroup:i};this.backend.capturedCommandList.get(this.backend.currentSessionId).push(d)}c.setPipeline(t.computePipeline),c.setBindGroup(0,h),c.dispatchWorkgroups(...i),this.backend.writeTimestamp(this.backend.pendingDispatchNumber*2+1),this.backend.pendingDispatchNumber++,(this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber||this.backend.queryType==="at-passes")&&this.backend.endComputePass(),this.backend.pendingDispatchNumber>=this.backend.maxDispatchNumber&&this.backend.flush(),Ht(t.programInfo.name)}dispose(){}build(t,r){rr(t.name);let o=this.backend.device,i=[];o.features.has("shader-f16")&&i.push("enable f16;");let u=va(r,this.backend.device.limits),a=t.getShaderSource(u),c=`${i.join(`\n`)}\n${u.additionalImplementations}\n${a}`,p=o.createShaderModule({code:c,label:t.name});Ve("verbose",()=>`[WebGPU] ${t.name} shader code: ${c}`);let h=o.createComputePipeline({compute:{module:p,entryPoint:"main"},layout:"auto",label:t.name});return Ht(t.name),{programInfo:t,computePipeline:h,uniformVariablesInfo:u.variablesInfo}}normalizeDispatchGroupSize(t){let r=typeof t=="number"?t:t.x,o=typeof t=="number"?1:t.y||1,i=typeof t=="number"?1:t.z||1,u=this.backend.device.limits.maxComputeWorkgroupsPerDimension;if(r<=u&&o<=u&&i<=u)return[r,o,i];let a=r*o*i,c=Math.ceil(Math.sqrt(a));if(c>u){if(c=Math.ceil(Math.cbrt(a)),c>u)throw new Error("Total dispatch size exceeds WebGPU maximum.");return[c,c,c]}else return[c,c,1]}}});var rm,nm,Yo,Ln,Wd=Y(()=>{"use strict";$r();ye();Lt();fa();wa();Ud();Vd();rm=(e,t)=>{if(t.length!==e.length)throw new Error(`inputDependencies length ${t.length} is not equal to inputTensors length ${e.length}.`);let r=[];for(let o=0;o<e.length;++o){let i=e[o].dataType;switch(t[o]){case"none":{r.push("");break}case"type":{r.push(`${i}`);break}case"rank":{let u=e[o].dims.length;r.push(`${i};${u}`);break}case"dims":{let u=e[o].dims.join(",");r.push(`${i};${u}`);break}default:throw new Error(`unsupported input dependency: ${t[o]}`)}}return r.join("|")},nm=(e,t,r)=>{let o=e.name;return e.shaderCache?.hint&&(o+="["+e.shaderCache.hint+"]"),o+=":"+r+`:${rm(t,e.shaderCache?.inputDependencies??new Array(t.length).fill("dims"))}`,o},Yo=class{constructor(t){t&&(this.architecture=t.architecture,this.vendor=t.vendor)}isArchitecture(t){return this.architecture===t}isVendor(t){return this.vendor===t}},Ln=class{constructor(){this.currentSessionId=null;this.currentKernelId=null;this.commandEncoder=null;this.computePassEncoder=null;this.maxDispatchNumber=16;this.pendingDispatchNumber=0;this.pendingKernels=[];this.pendingQueries=new Map;this.sessionStatus="default";this.capturedCommandList=new Map;this.capturedPendingKernels=new Map;this.sessionExternalDataMapping=new Map}get currentKernelCustomData(){if(this.currentKernelId===null)throw new Error("currentKernelCustomData(): currentKernelId is null. (should not happen)");let t=this.kernelCustomData.get(this.currentKernelId);return t||(t={},this.kernelCustomData.set(this.currentKernelId,t)),t}async initialize(t,r){this.env=t;let o=[],i={requiredLimits:{maxComputeWorkgroupStorageSize:r.limits.maxComputeWorkgroupStorageSize,maxComputeWorkgroupsPerDimension:r.limits.maxComputeWorkgroupsPerDimension,maxStorageBufferBindingSize:r.limits.maxStorageBufferBindingSize,maxBufferSize:r.limits.maxBufferSize,maxComputeInvocationsPerWorkgroup:r.limits.maxComputeInvocationsPerWorkgroup,maxComputeWorkgroupSizeX:r.limits.maxComputeWorkgroupSizeX,maxComputeWorkgroupSizeY:r.limits.maxComputeWorkgroupSizeY,maxComputeWorkgroupSizeZ:r.limits.maxComputeWorkgroupSizeZ},requiredFeatures:o};r.features.has("chromium-experimental-timestamp-query-inside-passes")?o.push("chromium-experimental-timestamp-query-inside-passes"):r.features.has("timestamp-query")&&o.push("timestamp-query"),r.features.has("shader-f16")&&o.push("shader-f16"),this.device=await r.requestDevice(i),this.adapterInfo=new Yo(await r.requestAdapterInfo()),this.gpuDataManager=ba(this),this.programManager=new Hn(this),this.kernels=new Map,this.kernelPersistentData=new Map,this.kernelCustomData=new Map,pa(t.logLevel,!!t.debug),this.device.onuncapturederror=u=>{u.error instanceof GPUValidationError&&console.error(`An uncaught WebGPU validation error was raised: ${u.error.message}`)},Object.defineProperty(this.env.webgpu,"device",{value:this.device,writable:!1,enumerable:!0,configurable:!1}),Object.defineProperty(this.env.webgpu,"adapter",{value:r,writable:!1,enumerable:!0,configurable:!1}),this.setQueryType()}dispose(){typeof this.querySet<"u"&&this.querySet.destroy(),this.gpuDataManager.dispose()}getCommandEncoder(){return this.commandEncoder||(this.commandEncoder=this.device.createCommandEncoder()),this.commandEncoder}getComputePassEncoder(){if(!this.computePassEncoder){let t=this.getCommandEncoder(),r={};this.queryType==="at-passes"&&(r.timestampWrites={querySet:this.querySet,beginningOfPassWriteIndex:this.pendingDispatchNumber*2,endOfPassWriteIndex:this.pendingDispatchNumber*2+1}),this.computePassEncoder=t.beginComputePass(r)}return this.computePassEncoder}endComputePass(){this.computePassEncoder&&(this.computePassEncoder.end(),this.computePassEncoder=null)}flush(){if(!this.commandEncoder)return;rr(),this.endComputePass();let t;this.queryType!=="none"&&(this.commandEncoder.resolveQuerySet(this.querySet,0,this.pendingDispatchNumber*2,this.queryResolveBuffer,0),t=this.device.createBuffer({size:this.pendingDispatchNumber*2*8,usage:GPUBufferUsage.MAP_READ|GPUBufferUsage.COPY_DST}),this.pendingQueries.set(t,this.pendingKernels),this.pendingKernels=[],this.commandEncoder.copyBufferToBuffer(this.queryResolveBuffer,0,t,0,this.pendingDispatchNumber*2*8)),this.device.queue.submit([this.commandEncoder.finish()]),this.gpuDataManager.refreshPendingBuffers(),this.commandEncoder=null,this.pendingDispatchNumber=0,this.queryType!=="none"&&t.mapAsync(GPUMapMode.READ).then(()=>{let r=new BigUint64Array(t.getMappedRange()),o=this.pendingQueries.get(t);for(let i=0;i<r.length/2;i++){let u=o[i],a=u.kernelId,c=this.kernels.get(a),p=c.kernelType,h=c.kernelName,d=u.programName,y=u.inputTensorViews,w=u.outputTensorViews,_=r[i*2],v=r[i*2+1];typeof this.queryTimeBase>"u"&&(this.queryTimeBase=_);let S=Number(_-this.queryTimeBase),A=Number(v-this.queryTimeBase);if(!Number.isSafeInteger(S)||!Number.isSafeInteger(A))throw new RangeError("incorrect timestamp range");if(this.env.webgpu.profiling?.ondata)this.env.webgpu.profiling.ondata({version:1,inputsMetadata:y.map(I=>({dims:I.dims,dataType:Gt(I.dataType)})),outputsMetadata:w.map(I=>({dims:I.dims,dataType:Gt(I.dataType)})),kernelId:a,kernelType:p,kernelName:h,programName:d,startTime:S,endTime:A});else{let I="";y.forEach((E,P)=>{I+=`input[${P}]: [${E.dims}] | ${Gt(E.dataType)}, `});let x="";w.forEach((E,P)=>{x+=`output[${P}]: [${E.dims}] | ${Gt(E.dataType)}, `}),console.log(`[profiling] kernel "${a}|${p}|${h}|${d}" ${I}${x}execution time: ${A-S} ns`)}wo("GPU",`${d}::${_}::${v}`)}t.unmap(),this.pendingQueries.delete(t)}),Ht()}run(t,r,o,i,u,a){rr(t.name);let c=[];for(let E=0;E<r.length;++E){let P=r[E].data;if(P===0)continue;let O=this.gpuDataManager.get(P);if(!O)throw new Error(`no GPU data for input: ${P}`);c.push(O)}let{outputs:p,dispatchGroup:h,programUniforms:d}=t.getRunData(r),y=o.length===0?p.map((E,P)=>P):o;if(y.length!==p.length)throw new Error(`Output size ${y.length} must be equal to ${p.length}.`);let w=[],_=[];for(let E=0;E<p.length;++E){if(!Number.isInteger(y[E])||y[E]<-3||y[E]>=a)throw new Error(`Invalid output index: ${y[E]}`);if(y[E]===-3)continue;let P=y[E]===-1,O=y[E]===-2,R=P||O?u(p[E].dataType,p[E].dims):i(y[E],p[E].dataType,p[E].dims);if(w.push(R),R.data===0)continue;let L=this.gpuDataManager.get(R.data);if(!L)throw new Error(`no GPU data for output: ${R.data}`);if(P&&this.temporaryData.push(L),O){let N=this.kernelPersistentData.get(this.currentKernelId);N||(N=[],this.kernelPersistentData.set(this.currentKernelId,N)),N.push(L)}_.push(L)}if(c.length!==r.length||_.length!==w.length){if(_.length===0)return Ht(t.name),w;throw new Error(`Program ${t.name} has zero-sized tensor(s) in inputs or outputs. This is not supported now.`)}let v;if(d){let E=0,P=[];d.forEach(N=>{let K=typeof N.data=="number"?[N.data]:N.data;if(K.length===0)return;let Q=N.type===10?2:4,he,W;N.type===10?(W=K.length>4?16:K.length>2?8:K.length*Q,he=K.length>4?16:Q*K.length):(W=K.length<=2?K.length*Q:16,he=16),E=Math.ceil(E/W)*W,P.push(E);let se=N.type===10?8:4;E+=K.length>4?Math.ceil(K.length/se)*he:K.length*Q});let O=16;E=Math.ceil(E/O)*O;let R=new ArrayBuffer(E);d.forEach((N,K)=>{let Q=P[K],he=typeof N.data=="number"?[N.data]:N.data;if(N.type===6)new Int32Array(R,Q,he.length).set(he);else if(N.type===12)new Uint32Array(R,Q,he.length).set(he);else if(N.type===10)new Uint16Array(R,Q,he.length).set(he);else if(N.type===1)new Float32Array(R,Q,he.length).set(he);else throw new Error(`Unsupported uniform type: ${Gt(N.type)}`)});let L=this.gpuDataManager.create(E,GPUBufferUsage.COPY_DST|GPUBufferUsage.UNIFORM);this.device.queue.writeBuffer(L.buffer,0,R,0,E),this.gpuDataManager.release(L.id),v={offset:0,size:E,buffer:L.buffer}}let S=this.programManager.normalizeDispatchGroupSize(h),A=S[1]===1&&S[2]===1,I=nm(t,r,A),x=this.programManager.getArtifact(I);if(x||(x=this.programManager.build(t,S),this.programManager.setArtifact(I,x),Ve("info",()=>`[artifact] key: ${I}, programName: ${t.name}`)),d&&x.uniformVariablesInfo){if(d.length!==x.uniformVariablesInfo.length)throw new Error(`Uniform variables count mismatch: expect ${x.uniformVariablesInfo.length}, got ${d.length} in program "${x.programInfo.name}".`);for(let E=0;E<d.length;E++){let P=d[E],O=P.type,R=typeof P.data=="number"?1:P.data.length,[L,N]=x.uniformVariablesInfo[E];if(O!==L||R!==N)throw new Error(`Uniform variable ${E} mismatch: expect type ${L} with size ${N}, got type ${O} with size ${R} in program "${x.programInfo.name}".`)}}if(Ve("info",()=>`[ProgramManager] run "${t.name}" (key=${I}) with ${S[0]}x${S[1]}x${S[2]}`),this.queryType!=="none"||this.sessionStatus==="capturing"){let E={kernelId:this.currentKernelId,programName:x.programInfo.name,inputTensorViews:r,outputTensorViews:w};this.pendingKernels.push(E),this.sessionStatus==="capturing"&&this.capturedPendingKernels.get(this.currentSessionId).push(E)}return this.programManager.run(x,c,_,S,v),Ht(t.name),w}upload(t,r){this.gpuDataManager.upload(t,r)}memcpy(t,r){this.gpuDataManager.memcpy(t,r)}async download(t,r){await this.gpuDataManager.download(t,r)}alloc(t){return this.gpuDataManager.create(t).id}free(t){return this.gpuDataManager.release(t)}createKernel(t,r,o,i){let u=Md.get(t);if(!u)throw new Error(`kernel not implemented: ${t}`);let a={kernelType:t,kernelName:i,kernelEntry:u[0],attributes:[u[1],o]};this.kernels.set(r,a)}releaseKernel(t){let r=this.kernelPersistentData.get(t);if(r){for(let o of r)this.gpuDataManager.release(o.id);this.kernelPersistentData.delete(t)}this.kernelCustomData.delete(t),this.kernels.delete(t)}computeKernel(t,r,o){let i=this.kernels.get(t);if(!i)throw new Error(`kernel not created: ${t}`);let u=i.kernelType,a=i.kernelName,c=i.kernelEntry,p=i.attributes;if(this.currentKernelId!==null)throw new Error(`kernel "[${u}] ${a}" is not allowed to be called recursively`);this.currentKernelId=t,p[0]&&(p[1]=p[0](p[1]),p[0]=void 0),Ve("info",()=>`[WebGPU] Start to run kernel "[${u}] ${a}"...`);let h=this.env.debug;this.temporaryData=[];try{return h&&this.device.pushErrorScope("validation"),c(r,p[1]),0}catch(d){return o.push(Promise.resolve(`[WebGPU] Kernel "[${u}] ${a}" failed. ${d}`)),1}finally{h&&o.push(this.device.popErrorScope().then(d=>d?`GPU validation error for kernel "[${u}] ${a}": ${d.message}`:null));for(let d of this.temporaryData)this.gpuDataManager.release(d.id);this.temporaryData=[],this.currentKernelId=null}}registerBuffer(t,r,o,i){let u=this.sessionExternalDataMapping.get(t);u||(u=new Map,this.sessionExternalDataMapping.set(t,u));let a=u.get(r),c=this.gpuDataManager.registerExternalBuffer(o,i,a?.[1]);return u.set(r,[c,o]),c}unregisterBuffers(t){let r=this.sessionExternalDataMapping.get(t);r&&(r.forEach(o=>this.gpuDataManager.unregisterExternalBuffer(o[1])),this.sessionExternalDataMapping.delete(t))}getBuffer(t){let r=this.gpuDataManager.get(t);if(!r)throw new Error(`no GPU data for buffer: ${t}`);return r.buffer}createDownloader(t,r,o){return async()=>{let i=await xo(this,t,r);return ma(i.buffer,o)}}writeTimestamp(t){this.queryType==="inside-passes"&&this.computePassEncoder.writeTimestamp(this.querySet,t)}setQueryType(){this.queryType="none",(this.env.webgpu.profiling?.mode==="default"||(typeof this.env.trace>"u"?this.env.wasm.trace:this.env.trace))&&(this.device.features.has("chromium-experimental-timestamp-query-inside-passes")?this.queryType="inside-passes":this.device.features.has("timestamp-query")&&(this.queryType="at-passes"),this.queryType!=="none"&&typeof this.querySet>"u"&&(this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxDispatchNumber*2}),this.queryResolveBuffer=this.device.createBuffer({size:this.maxDispatchNumber*2*8,usage:GPUBufferUsage.COPY_SRC|GPUBufferUsage.QUERY_RESOLVE})))}captureBegin(){Ve("info","captureBegin"),this.capturedCommandList.get(this.currentSessionId)||this.capturedCommandList.set(this.currentSessionId,[]),this.capturedPendingKernels.get(this.currentSessionId)||this.capturedPendingKernels.set(this.currentSessionId,[]),this.flush(),this.sessionStatus="capturing"}captureEnd(){Ve("info","captureEnd"),this.flush(),this.sessionStatus="default"}replay(){Ve("info","replay"),this.sessionStatus="replaying";let t=this.capturedCommandList.get(this.currentSessionId),r=this.capturedPendingKernels.get(this.currentSessionId),o=t.length;this.pendingKernels=[];for(let i=0;i<o;i++){let u=this.getComputePassEncoder(),a=t[i];this.writeTimestamp(this.pendingDispatchNumber*2),u.setPipeline(a.computePipeline),u.setBindGroup(0,a.bindGroup),u.dispatchWorkgroups(...a.dispatchGroup),this.writeTimestamp(this.pendingDispatchNumber*2+1),this.pendingDispatchNumber++,this.queryType!=="none"&&this.pendingKernels.push(r[i]),(this.pendingDispatchNumber>=this.maxDispatchNumber||this.queryType==="at-passes")&&this.endComputePass(),this.pendingDispatchNumber>=this.maxDispatchNumber&&this.flush()}this.flush(),this.sessionStatus="default"}onReleaseSession(t){this.unregisterBuffers(t),this.capturedCommandList.has(t)&&this.capturedCommandList.delete(t),this.capturedPendingKernels.has(t)&&this.capturedPendingKernels.delete(t),this.gpuDataManager.onReleaseSession(t)}onRunStart(t){this.currentSessionId=t,this.setQueryType()}}});var Nd={};gn(Nd,{init:()=>om});var qr,Zo,om,Gd=Y(()=>{"use strict";ye();Wd();Lt();Se();qr=class e{constructor(t,r,o,i){this.module=t;this.dataType=r;this.data=o;this.dims=i}getFloat32Array(){if(this.dataType!==1)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new Float32Array:new Float32Array(this.module.HEAP8.buffer,this.data,t)}getBigInt64Array(){if(this.dataType!==7)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new BigInt64Array:new BigInt64Array(this.module.HEAP8.buffer,this.data,t)}getInt32Array(){if(this.dataType!==6)throw new Error("Invalid data type");let t=M.size(this.dims);return t===0?new Int32Array:new Int32Array(this.module.HEAP8.buffer,this.data,t)}reshape(t){if(M.size(t)!==M.size(this.dims))throw new Error("Invalid new shape");return new e(this.module,this.dataType,this.data,t)}},Zo=class{constructor(t,r,o){this.module=t;this.backend=r;this.customDataOffset=0;this.customDataSize=0;this.adapterInfo=r.adapterInfo;let i=t.HEAPU32,u=o>>>2;this.opKernelContext=i[u++];let a=i[u++];this.outputCount=i[u++],this.customDataOffset=i[u++],this.customDataSize=i[u++];let c=[];for(let p=0;p<a;p++){let h=i[u++],d=i[u++],y=i[u++],w=[];for(let _=0;_<y;_++)w.push(i[u++]);c.push(new qr(t,h,d,w))}this.inputs=c}get kernelCustomData(){return this.backend.currentKernelCustomData}get customDataBuffer(){return this.module.HEAPU8.subarray(this.customDataOffset,this.customDataOffset+this.customDataSize)}getMaxComputeWorkgroupSizes(){return[this.backend.device.limits.maxComputeWorkgroupSizeX,this.backend.device.limits.maxComputeWorkgroupSizeY,this.backend.device.limits.maxComputeWorkgroupSizeZ]}getMaxComputeWorkgroupStoragesize(){return this.backend.device.limits.maxComputeWorkgroupStorageSize}compute(t,r){let o=r?.inputs?.map(c=>typeof c=="number"?this.inputs[c]:c)??this.inputs,i=r?.outputs??[],u=(c,p,h)=>new qr(this.module,p,this.output(c,h),h),a=(c,p)=>{let h=tr(c);if(!h)throw new Error(`Unsupported data type: ${c}`);let d=h*M.size(p),y=d>0?this.backend.gpuDataManager.create(d).id:0;return new qr(this.module,c,y,p)};return this.backend.run(t,o,i,u,a,this.outputCount)}output(t,r){let o=this.module.stackSave();try{let i=this.module.stackAlloc((1+r.length)*4),u=i>>2;this.module.HEAPU32[u++]=r.length;for(let a=0;a<r.length;a++)this.module.HEAPU32[u++]=r[a];return this.module._JsepOutput(this.opKernelContext,t,i)}catch(i){throw new Error(`Failed to generate kernel\'s output[${t}] with dims [${r}]. If you are running with pre-allocated output, please make sure the output type/dims are correct. Error: ${i}`)}finally{this.module.stackRestore(o)}}},om=async(e,t,r,o)=>{let i=t.jsepInit;if(!i)throw new Error("Failed to initialize JSEP. The WebAssembly module is not built with JSEP support.");if(e==="webgpu"){let u=new Ln;await u.initialize(r,o),i("webgpu",[u,a=>u.alloc(a),a=>u.free(a),(a,c,p,h=!1)=>{if(h)Ve("verbose",()=>`[WebGPU] jsepCopyGpuToGpu: src=${a}, dst=${c}, size=${p}`),u.memcpy(a,c);else{Ve("verbose",()=>`[WebGPU] jsepCopyCpuToGpu: dataOffset=${a}, gpuDataId=${c}, size=${p}`);let d=t.HEAPU8.subarray(a>>>0,(a>>>0)+p);u.upload(c,d)}},async(a,c,p)=>{Ve("verbose",()=>`[WebGPU] jsepCopyGpuToCpu: gpuDataId=${a}, dataOffset=${c}, size=${p}`),await u.download(a,()=>t.HEAPU8.subarray(c>>>0,(c>>>0)+p))},(a,c,p)=>u.createKernel(a,c,p,t.UTF8ToString(t._JsepGetNodeName(c))),a=>u.releaseKernel(a),(a,c,p,h)=>{Ve("verbose",()=>`[WebGPU] jsepRun: sessionHandle=${p}, kernel=${a}, contextDataOffset=${c}`);let d=new Zo(t,u,c);return u.computeKernel(a,d,h)},()=>u.captureBegin(),()=>u.captureEnd(),()=>u.replay()])}else i("webnn")}});var Vi;Vi=Ei();var pl=zi(),fo,ho=!1,yn=!1,Ui=!1,ml=e=>{if(e===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+e+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+e+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},fl=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},hl=(e,t)=>e?t?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":t?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Wi=async e=>{if(ho)return Promise.resolve();if(yn)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Ui)throw new Error("previous call to \'initializeWebAssembly()\' failed.");yn=!0;let t=e.initTimeout,r=e.numThreads,o=e.simd,i=ml(r),u=o&&fl(),a=e.wasmPaths,c=typeof a=="string"?a:void 0,p=hl(u,i),h=typeof a=="object"?a[p]:void 0,d=!1,y=[];if(t>0&&y.push(new Promise(w=>{setTimeout(()=>{d=!0,w()},t)})),y.push(new Promise((w,_)=>{let v=i?pl:Vi,S={locateFile:(A,I)=>{if(i&&A.endsWith(".worker.js")&&typeof Blob<"u")return URL.createObjectURL(new Blob([Mi()],{type:"text/javascript"}));if(A.endsWith(".wasm")){if(h)return h;let x=c??I;return p==="ort-wasm-simd.wasm"?x+"ort-wasm-simd.jsep.wasm":p==="ort-wasm-simd-threaded.wasm"?x+"ort-wasm-simd-threaded.jsep.wasm":x+p}return I+A}};if(i)if(S.numThreads=r,typeof Blob>"u")S.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let A=`var ortWasmThreaded=${v.toString()};`;S.mainScriptUrlOrBlob=new Blob([A],{type:"text/javascript"})}v(S).then(A=>{yn=!1,ho=!0,fo=A,w()},A=>{yn=!1,Ui=!0,_(A)})})),await Promise.race(y),d)throw new Error(`WebAssembly backend initializing failed due to timeout: ${t}ms`)},Le=()=>{if(ho&&fo)return fo;throw new Error("WebAssembly is not initialized yet.")};var Fe=(e,t)=>{let r=Le(),o=r.lengthBytesUTF8(e)+1,i=r._malloc(o);return r.stringToUTF8(e,i,o),t.push(i),i},Nr=(e,t,r,o)=>{if(typeof e=="object"&&e!==null){if(r.has(e))throw new Error("Circular reference in options");r.add(e)}Object.entries(e).forEach(([i,u])=>{let a=t?t+i:i;if(typeof u=="object")Nr(u,a+".",r,o);else if(typeof u=="string"||typeof u=="number")o(a,u.toString());else if(typeof u=="boolean")o(a,u?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof u}`)})},Ue=e=>{let t=Le(),r=t.stackSave();try{let o=t.stackAlloc(8);t._OrtGetLastError(o,o+4);let i=t.HEAP32[o/4],u=t.HEAPU32[o/4+1],a=u?t.UTF8ToString(u):"";throw new Error(`${e} ERROR_CODE: ${i}, ERROR_MESSAGE: ${a}`)}finally{t.stackRestore(r)}};var Ni=e=>{let t=Le(),r=0,o=[],i=e||{};try{if(e?.logSeverityLevel===void 0)i.logSeverityLevel=2;else if(typeof e.logSeverityLevel!="number"||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(e?.logVerbosityLevel===void 0)i.logVerbosityLevel=0;else if(typeof e.logVerbosityLevel!="number"||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);e?.terminate===void 0&&(i.terminate=!1);let u=0;return e?.tag!==void 0&&(u=Fe(e.tag,o)),r=t._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,u),r===0&&Ue("Can\'t create run options."),e?.extra!==void 0&&Nr(e.extra,"",new WeakSet,(a,c)=>{let p=Fe(a,o),h=Fe(c,o);t._OrtAddRunConfigEntry(r,p,h)!==0&&Ue(`Can\'t set a run config entry: ${a} - ${c}.`)}),[r,o]}catch(u){throw r!==0&&t._OrtReleaseRunOptions(r),o.forEach(a=>t._free(a)),u}};var gl=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},yl=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},bl=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let t=e.extra.session;t.use_ort_model_bytes_directly||(t.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(e.enableMemPattern=!1)},wl=(e,t,r)=>{for(let o of t){let i=typeof o=="string"?o:o.name;switch(i){case"webnn":if(i="WEBNN",typeof o!="string"){let a=o;if(a?.deviceType){let c=Fe("deviceType",r),p=Fe(a.deviceType,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'deviceType\' - ${a.deviceType}.`)}if(a?.numThreads){let c=a.numThreads;(typeof c!="number"||!Number.isInteger(c)||c<0)&&(c=0);let p=Fe("numThreads",r),h=Fe(c.toString(),r);Le()._OrtAddSessionConfigEntry(e,p,h)!==0&&Ue(`Can\'t set a session config entry: \'numThreads\' - ${a.numThreads}.`)}if(a?.powerPreference){let c=Fe("powerPreference",r),p=Fe(a.powerPreference,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'powerPreference\' - ${a.powerPreference}.`)}}break;case"webgpu":if(i="JS",typeof o!="string"){let a=o;if(a?.preferredLayout){if(a.preferredLayout!=="NCHW"&&a.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${a.preferredLayout}`);let c=Fe("preferredLayout",r),p=Fe(a.preferredLayout,r);Le()._OrtAddSessionConfigEntry(e,c,p)!==0&&Ue(`Can\'t set a session config entry: \'preferredLayout\' - ${a.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${i}`)}let u=Fe(i,r);Le()._OrtAppendExecutionProvider(e,u)!==0&&Ue(`Can\'t append execution provider: ${i}.`)}},Gi=e=>{let t=Le(),r=0,o=[],i=e||{};bl(i);try{let u=gl(i.graphOptimizationLevel??"all"),a=yl(i.executionMode??"sequential"),c=typeof i.logId=="string"?Fe(i.logId,o):0,p=i.logSeverityLevel??2;if(!Number.isInteger(p)||p<0||p>4)throw new Error(`log serverity level is not valid: ${p}`);let h=i.logVerbosityLevel??0;if(!Number.isInteger(h)||h<0||h>4)throw new Error(`log verbosity level is not valid: ${h}`);let d=typeof i.optimizedModelFilePath=="string"?Fe(i.optimizedModelFilePath,o):0;if(r=t._OrtCreateSessionOptions(u,!!i.enableCpuMemArena,!!i.enableMemPattern,a,!!i.enableProfiling,0,c,p,h,d),r===0&&Ue("Can\'t create session options."),i.executionProviders&&wl(r,i.executionProviders,o),i.enableGraphCapture!==void 0){if(typeof i.enableGraphCapture!="boolean")throw new Error(`enableGraphCapture must be a boolean value: ${i.enableGraphCapture}`);let y=Fe("enableGraphCapture",o),w=Fe(i.enableGraphCapture.toString(),o);t._OrtAddSessionConfigEntry(r,y,w)!==0&&Ue(`Can\'t set a session config entry: \'enableGraphCapture\' - ${i.enableGraphCapture}.`)}if(i.freeDimensionOverrides)for(let[y,w]of Object.entries(i.freeDimensionOverrides)){if(typeof y!="string")throw new Error(`free dimension override name must be a string: ${y}`);if(typeof w!="number"||!Number.isInteger(w)||w<0)throw new Error(`free dimension override value must be a non-negative integer: ${w}`);let _=Fe(y,o);t._OrtAddFreeDimensionOverride(r,_,w)!==0&&Ue(`Can\'t set a free dimension override: ${y} - ${w}.`)}return i.extra!==void 0&&Nr(i.extra,"",new WeakSet,(y,w)=>{let _=Fe(y,o),v=Fe(w,o);t._OrtAddSessionConfigEntry(r,_,v)!==0&&Ue(`Can\'t set a session config entry: ${y} - ${w}.`)}),[r,o]}catch(u){throw r!==0&&t._OrtReleaseSessionOptions(r),o.forEach(a=>t._free(a)),u}};ye();var Li=async e=>{if(typeof e=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(e))}catch(t){if(t.code==="ERR_FS_FILE_TOO_LARGE"){let r=(void 0)(e),o=[];for await(let i of r)o.push(i);return new Uint8Array(Buffer.concat(o))}throw t}else{let t=await fetch(e);if(!t.ok)throw new Error(`failed to load external data file: ${e}`);let r=t.headers.get("Content-Length"),o=r?parseInt(r,10):0;if(o<1073741824)return new Uint8Array(await t.arrayBuffer());{if(!t.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let i=t.body.getReader(),u;try{u=new ArrayBuffer(o)}catch(c){if(c instanceof RangeError){let p=Math.ceil(o/65536);u=new WebAssembly.Memory({initial:p,maximum:p}).buffer}else throw c}let a=0;for(;;){let{done:c,value:p}=await i.read();if(c)break;let h=p.byteLength;new Uint8Array(u,a,h).set(p),a+=h}return new Uint8Array(u,0,o)}}else return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)};var im=(e,t)=>{Le()._OrtInit(e,t)!==0&&Ue("Can\'t initialize onnxruntime.")},Ld=async e=>{im(e.wasm.numThreads,Gr(e.logLevel))},Fd=async(e,t)=>{{let r=(Gd(),wr(Nd)).init;if(t==="webgpu"){if(typeof navigator>"u"||!navigator.gpu)throw new Error("WebGPU is not supported in current environment");let o=e.webgpu.adapter;if(o){if(typeof o.limits!="object"||typeof o.features!="object"||typeof o.requestDevice!="function")throw new Error("Invalid GPU adapter set in `env.webgpu.adapter`. It must be a GPUAdapter object.")}else{let i=e.webgpu.powerPreference;if(i!==void 0&&i!=="low-power"&&i!=="high-performance")throw new Error(`Invalid powerPreference setting: "${i}"`);let u=e.webgpu.forceFallbackAdapter;if(u!==void 0&&typeof u!="boolean")throw new Error(`Invalid forceFallbackAdapter setting: "${u}"`);if(o=await navigator.gpu.requestAdapter({powerPreference:i,forceFallbackAdapter:u}),!o)throw new Error(\'Failed to get GPU adapter. You may need to enable flag "--enable-unsafe-webgpu" if you are using Chrome.\')}if(!e.wasm.simd)throw new Error("Not supported for WebGPU=ON and SIMD=OFF. Please set `env.wasm.simd` to true when using `webgpu` EP");await r("webgpu",Le(),e,o)}if(t==="webnn"){if(typeof navigator>"u"||!navigator.ml)throw new Error("WebNN is not supported in current environment");await r("webnn",Le(),e)}}},ar=new Map,am=e=>{let t=Le(),r=t.stackSave();try{let o=t.stackAlloc(8);return t._OrtGetInputOutputCount(e,o,o+4)!==0&&Ue("Can\'t get session input/output count."),[t.HEAP32[o/4],t.HEAP32[o/4+1]]}finally{t.stackRestore(r)}},Xo=e=>{let t=Le(),r=t._malloc(e.byteLength);if(r===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${e.byteLength}.`);return t.HEAPU8.set(e,r),[r,e.byteLength]},qd=async(e,t)=>{let r,o,i=Le();Array.isArray(e)?[r,o]=e:e.buffer===i.HEAPU8.buffer?[r,o]=[e.byteOffset,e.byteLength]:[r,o]=Xo(e);let u=0,a=0,c=0,p=[],h=[],d=[];try{if([a,p]=Gi(t),t?.externalData&&i.mountExternalData){let x=[];for(let E of t.externalData){let P=typeof E=="string"?E:E.path;x.push(Li(typeof E=="string"?E:E.data).then(O=>{i.mountExternalData(P,O)}))}await Promise.all(x)}u=await i._OrtCreateSession(r,o,a),u===0&&Ue("Can\'t create a session.");let[y,w]=am(u),_=!!t?.enableGraphCapture,v=[],S=[],A=[];for(let x=0;x<y;x++){let E=i._OrtGetInputName(u,x);E===0&&Ue("Can\'t get an input name."),h.push(E),v.push(i.UTF8ToString(E))}for(let x=0;x<w;x++){let E=i._OrtGetOutputName(u,x);E===0&&Ue("Can\'t get an output name."),d.push(E);let P=i.UTF8ToString(E);S.push(P);{if(_&&t?.preferredOutputLocation===void 0){A.push("gpu-buffer");continue}let O=typeof t?.preferredOutputLocation=="string"?t.preferredOutputLocation:t?.preferredOutputLocation?.[P]??"cpu";if(O!=="cpu"&&O!=="cpu-pinned"&&O!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${O}.`);if(_&&O!=="gpu-buffer")throw new Error(`Not supported preferred output location: ${O}. Only \'gpu-buffer\' location is supported when enableGraphCapture is true.`);A.push(O)}}let I=null;return A.some(x=>x==="gpu-buffer")&&(c=i._OrtCreateBinding(u),c===0&&Ue("Can\'t create IO binding."),I={handle:c,outputPreferredLocations:A,outputPreferredLocationsEncoded:A.map(x=>yo(x))}),ar.set(u,[u,h,d,I,_,!1]),[u,v,S]}catch(y){throw h.forEach(w=>i._OrtFree(w)),d.forEach(w=>i._OrtFree(w)),c!==0&&i._OrtReleaseBinding(c),u!==0&&i._OrtReleaseSession(u),y}finally{i._free(r),a!==0&&i._OrtReleaseSessionOptions(a),p.forEach(y=>i._free(y)),i.unmountExternalData?.()}},jd=e=>{let t=Le(),r=ar.get(e);if(!r)throw new Error(`cannot release session. invalid session id: ${e}`);let[o,i,u,a,c]=r;a&&(c&&t._OrtClearBoundOutputs(a.handle),t._OrtReleaseBinding(a.handle)),t.jsepOnReleaseSession?.(e),i.forEach(p=>t._OrtFree(p)),u.forEach(p=>t._OrtFree(p)),t._OrtReleaseSession(o),ar.delete(e)},Hd=(e,t,r,o,i,u=!1)=>{if(!e){t.push(0);return}let a=Le(),c=e[0],p=e[1],h=e[3],d,y;if(c==="string"&&h==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(u&&h!=="gpu-buffer")throw new Error(`External buffer must be provided for input/output index ${i} when enableGraphCapture is true.`);if(h==="gpu-buffer"){let v=e[2].gpuBuffer,S=tr(go(c));y=p.reduce((I,x)=>I*x,1)*S;let A=a.jsepRegisterBuffer;if(!A)throw new Error(\'Tensor location "gpu-buffer" is not supported without using WebGPU.\');d=A(o,i,v,y)}else{let v=e[2];if(Array.isArray(v)){y=4*v.length,d=a._malloc(y),r.push(d);let S=d/4;for(let A=0;A<v.length;A++){if(typeof v[A]!="string")throw new TypeError(`tensor data at index ${A} is not a string`);a.HEAPU32[S++]=Fe(v[A],r)}}else y=v.byteLength,d=a._malloc(y),r.push(d),a.HEAPU8.set(new Uint8Array(v.buffer,v.byteOffset,y),d)}let w=a.stackSave(),_=a.stackAlloc(4*p.length);try{let v=_/4;p.forEach(A=>a.HEAP32[v++]=A);let S=a._OrtCreateTensor(go(c),d,y,_,p.length,yo(h));S===0&&Ue(`Can\'t create tensor for input/output. session=${o}, index=${i}.`),t.push(S)}finally{a.stackRestore(w)}},Kd=async(e,t,r,o,i,u)=>{let a=Le(),c=ar.get(e);if(!c)throw new Error(`cannot run inference. invalid session id: ${e}`);let p=c[0],h=c[1],d=c[2],y=c[3],w=c[4],_=c[5],v=t.length,S=o.length,A=0,I=[],x=[],E=[],P=[],O=a.stackSave(),R=a.stackAlloc(v*4),L=a.stackAlloc(v*4),N=a.stackAlloc(S*4),K=a.stackAlloc(S*4);try{[A,I]=Ni(u);for(let ee=0;ee<v;ee++)Hd(r[ee],x,P,e,t[ee],w);for(let ee=0;ee<S;ee++)Hd(i[ee],E,P,e,v+o[ee],w);let Q=R/4,he=L/4,W=N/4,se=K/4;for(let ee=0;ee<v;ee++)a.HEAPU32[Q++]=x[ee],a.HEAPU32[he++]=h[t[ee]];for(let ee=0;ee<S;ee++)a.HEAPU32[W++]=E[ee],a.HEAPU32[se++]=d[o[ee]];if(y&&!_){let{handle:ee,outputPreferredLocations:ae,outputPreferredLocationsEncoded:Ae}=y;if(h.length!==v)throw new Error(`input count from feeds (${v}) is expected to be always equal to model\'s input count (${h.length}).`);for(let me=0;me<v;me++){let ie=t[me];await a._OrtBindInput(ee,h[ie],x[me])!==0&&Ue(`Can\'t bind input[${me}] for session=${e}.`)}for(let me=0;me<S;me++){let ie=o[me];i[me]?.[3]?a._OrtBindOutput(ee,d[ie],E[me],0)!==0&&Ue(`Can\'t bind pre-allocated output[${me}] for session=${e}.`):a._OrtBindOutput(ee,d[ie],0,Ae[ie])!==0&&Ue(`Can\'t bind output[${me}] to ${ae[me]} for session=${e}.`)}ar.set(e,[p,h,d,y,w,!0])}a.jsepOnRunStart?.(p);let Ce;y?Ce=await a._OrtRunWithBinding(p,y.handle,S,N,A):Ce=await a._OrtRun(p,L,R,v,K,S,N,A),Ce!==0&&Ue("failed to call OrtRun().");let We=[];for(let ee=0;ee<S;ee++){let ae=a.HEAPU32[N/4+ee];if(ae===E[ee]){We.push(i[ee]);continue}let Ae=a.stackSave(),me=a.stackAlloc(4*4),ie=!1,ue,le=0;try{a._OrtGetTensorData(ae,me,me+4,me+8,me+12)!==0&&Ue(`Can\'t access output tensor data on index ${ee}.`);let G=me/4,ne=a.HEAPU32[G++];le=a.HEAPU32[G++];let xe=a.HEAPU32[G++],Ke=a.HEAPU32[G++],Be=[];for(let Ne=0;Ne<Ke;Ne++)Be.push(a.HEAPU32[xe/4+Ne]);a._OrtFree(xe);let Ge=Be.reduce((Ne,Ye)=>Ne*Ye,1);ue=Gt(ne);let Ut=y?.outputPreferredLocations[o[ee]];if(ue==="string"){if(Ut==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Ne=[],Ye=le/4;for(let mt=0;mt<Ge;mt++){let Rt=a.HEAPU32[Ye++],qt=mt===Ge-1?void 0:a.HEAPU32[Ye]-Rt;Ne.push(a.UTF8ToString(Rt,qt))}We.push([ue,Be,Ne,"cpu"])}else if(Ut==="gpu-buffer"&&Ge>0){let Ne=a.jsepGetBuffer;if(!Ne)throw new Error(\'preferredLocation "gpu-buffer" is not supported without using WebGPU.\');let Ye=Ne(le),mt=tr(ne);if(mt===void 0||!Hi(ue))throw new Error(`Unsupported data type: ${ue}`);ie=!0,We.push([ue,Be,{gpuBuffer:Ye,download:a.jsepCreateDownloader(Ye,Ge*mt,ue),dispose:()=>{a._OrtReleaseTensor(ae)}},"gpu-buffer"])}else{let Ne=bn(ue),Ye=new Ne(Ge);new Uint8Array(Ye.buffer,Ye.byteOffset,Ye.byteLength).set(a.HEAPU8.subarray(le,le+Ye.byteLength)),We.push([ue,Be,Ye,"cpu"])}}finally{a.stackRestore(Ae),ue==="string"&&le&&a._free(le),ie||a._OrtReleaseTensor(ae)}}return y&&!w&&(a._OrtClearBoundOutputs(y.handle),ar.set(e,[p,h,d,y,w,!1])),We}finally{a.stackRestore(O),x.forEach(Q=>a._OrtReleaseTensor(Q)),E.forEach(Q=>a._OrtReleaseTensor(Q)),P.forEach(Q=>a._free(Q)),A!==0&&a._OrtReleaseRunOptions(A),I.forEach(Q=>a._free(Q))}},Yd=e=>{let t=Le(),r=ar.get(e);if(!r)throw new Error("invalid session id");let o=r[0],i=t._OrtEndProfiling(o);i===0&&Ue("Can\'t get an profile file name."),t._OrtFree(i)},Zd=e=>{let t=[];for(let r of e){let o=r[2];!Array.isArray(o)&&"buffer"in o&&t.push(o.buffer)}return t};self.onmessage=e=>{let{type:t,in:r}=e.data;try{switch(t){case"init-wasm":Wi(r.wasm).then(()=>{Ld(r).then(()=>{postMessage({type:t})},o=>{postMessage({type:t,err:o})})},o=>{postMessage({type:t,err:o})});break;case"init-ep":{let{epName:o,env:i}=r;Fd(i,o).then(()=>{postMessage({type:t})},u=>{postMessage({type:t,err:u})});break}case"copy-from":{let{buffer:o}=r,i=Xo(o);postMessage({type:t,out:i});break}case"create":{let{model:o,options:i}=r;qd(o,i).then(u=>{postMessage({type:t,out:u})},u=>{postMessage({type:t,err:u})});break}case"release":jd(r),postMessage({type:t});break;case"run":{let{sessionId:o,inputIndices:i,inputs:u,outputIndices:a,options:c}=r;Kd(o,i,u,a,new Array(a.length).fill(null),c).then(p=>{p.some(h=>h[3]!=="cpu")?postMessage({type:t,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:t,out:p},Zd([...u,...p]))},p=>{postMessage({type:t,err:p})});break}case"end-profiling":Yd(r),postMessage({type:t});break;default:}}catch(o){postMessage({type:t,err:o})}};})();\n/**\n * @license\n * Copyright 2021 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n/**\n * @license\n * Copyright 2020 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n/**\n * @license\n * Copyright 2019 Google LLC. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n * =============================================================================\n */\n'}),gr,St,sn$1,pi$1,mi$1,Co$1,Io$1,zr$1,Br,pf$1,ci$1,Wd$1,Nd$1,Vd$1,Hd$1,Gd$1,Ld$1,Fd$1,To$1=j(()=>{var s;_t(),Md$1(),Or$1(),gr=()=>!!ke$1.wasm.proxy&&typeof document<"u",sn$1=!1,pi$1=!1,mi$1=!1,Io$1=new Map,zr$1=(l,c)=>{let d=Io$1.get(l);d?d.push(c):Io$1.set(l,[c])},Br=()=>{if(sn$1||!pi$1||mi$1||!St)throw new Error("worker not ready")},pf$1=l=>{switch(l.data.type){case"init-wasm":sn$1=!1,l.data.err?(mi$1=!0,Co$1[1](l.data.err)):(pi$1=!0,Co$1[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let c=Io$1.get(l.data.type);l.data.err?c.shift()[1](l.data.err):c.shift()[0](l.data.out);break}}},ci$1=typeof document<"u"?(s=document==null?void 0:document.currentScript)==null?void 0:s.src:void 0,Wd$1=async()=>{if(!pi$1){if(sn$1)throw new Error("multiple calls to 'initWasm()' detected.");if(mi$1)throw new Error("previous call to 'initWasm()' failed.");if(sn$1=!0,gr())return ke$1.wasm.wasmPaths===void 0&&ci$1&&ci$1.indexOf("blob:")!==0&&(ke$1.wasm.wasmPaths=ci$1.substr(0,+ci$1.lastIndexOf("/")+1)),new Promise((l,c)=>{St==null||St.terminate();let d=URL.createObjectURL(new Blob([Ud$1()],{type:"text/javascript"}));St=new Worker(d,{name:"ort-wasm-proxy-worker"}),St.onerror=g=>c(g),St.onmessage=pf$1,URL.revokeObjectURL(d),Co$1=[l,c];let f={type:"init-wasm",in:ke$1};St.postMessage(f)});try{await Fa$1(ke$1.wasm),await kd$1(ke$1),pi$1=!0}catch(l){throw mi$1=!0,l}finally{sn$1=!1}}},Nd$1=async l=>{if(gr())return Br(),new Promise((c,d)=>{zr$1("init-ep",[c,d]);let f={type:"init-ep",in:{epName:l,env:ke$1}};St.postMessage(f)});await Od$1(ke$1,l)},Vd$1=async l=>gr()?(Br(),new Promise((c,d)=>{zr$1("copy-from",[c,d]);let f={type:"copy-from",in:{buffer:l}};St.postMessage(f,[l.buffer])})):So$1(l),Hd$1=async(l,c)=>{if(gr()){if(c!=null&&c.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Br(),new Promise((d,f)=>{zr$1("create",[d,f]);let g={type:"create",in:{model:l,options:{...c}}},v=[];l instanceof Uint8Array&&v.push(l.buffer),St.postMessage(g,v)})}else return Pd$1(l,c)},Gd$1=async l=>{if(gr())return Br(),new Promise((c,d)=>{zr$1("release",[c,d]);let f={type:"release",in:l};St.postMessage(f)});Rd$1(l)},Ld$1=async(l,c,d,f,g,v)=>{if(gr()){if(d.some(b=>b[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(g.some(b=>b))throw new Error("pre-allocated output tensor is not supported for proxy.");return Br(),new Promise((b,$)=>{zr$1("run",[b,$]);let y=d,x={type:"run",in:{sessionId:l,inputIndices:c,inputs:y,outputIndices:f,options:v}};St.postMessage(x,Dd$1(y))})}else return zd$1(l,c,d,f,g,v)},Fd$1=async l=>{if(gr())return Br(),new Promise((c,d)=>{zr$1("end-profiling",[c,d]);let f={type:"end-profiling",in:l};St.postMessage(f)});Bd$1(l)}}),qd$1,mf$1,fi$1,jd$1=j(()=>{_t(),To$1(),ye$1(),qi$1(),qd$1=(s,l)=>{switch(s.location){case"cpu":return[s.type,s.dims,s.data,"cpu"];case"gpu-buffer":return[s.type,s.dims,{gpuBuffer:s.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${s.location} for ${l()}`)}},mf$1=s=>{switch(s[3]){case"cpu":return new tt$3(s[0],s[2],s[1]);case"gpu-buffer":{let l=s[0];if(!Vn(l))throw new Error(`not supported data type: ${l} for deserializing GPU tensor`);let{gpuBuffer:c,download:d,dispose:f}=s[2];return tt$3.fromGpuBuffer(c,{dataType:l,dims:s[1],download:d,dispose:f})}default:throw new Error(`invalid data location: ${s[3]}`)}},fi$1=class{async fetchModelAndCopyToWasmMemory(s){return Vd$1(await tn$1(s))}async loadModel(s,l){yt$1();let c;typeof s=="string"?typeof process<"u"&&process.versions&&process.versions.node?c=await tn$1(s):c=await this.fetchModelAndCopyToWasmMemory(s):c=s,[this.sessionId,this.inputNames,this.outputNames]=await Hd$1(c,l),ut$1()}async dispose(){return Gd$1(this.sessionId)}async run(s,l,c){yt$1();let d=[],f=[];Object.entries(s).forEach(C=>{let E=C[0],N=C[1],W=this.inputNames.indexOf(E);if(W===-1)throw new Error(`invalid input '${E}'`);d.push(N),f.push(W)});let g=[],v=[];Object.entries(l).forEach(C=>{let E=C[0],N=C[1],W=this.outputNames.indexOf(E);if(W===-1)throw new Error(`invalid output '${E}'`);g.push(N),v.push(W)});let b=d.map((C,E)=>qd$1(C,()=>`input "${this.inputNames[f[E]]}"`)),$=g.map((C,E)=>C?qd$1(C,()=>`output "${this.outputNames[v[E]]}"`):null),y=await Ld$1(this.sessionId,f,b,v,$,c),x={};for(let C=0;C<y.length;C++)x[this.outputNames[v[C]]]=g[C]??mf$1(y[C]);return ut$1(),x}startProfiling(){}endProfiling(){Fd$1(this.sessionId)}}}),ff$1,hi,Kd$1=j(()=>{_t(),To$1(),jd$1(),ff$1=()=>{if((typeof ke$1.wasm.initTimeout!="number"||ke$1.wasm.initTimeout<0)&&(ke$1.wasm.initTimeout=0),typeof ke$1.wasm.simd!="boolean"&&(ke$1.wasm.simd=!0),typeof ke$1.wasm.proxy!="boolean"&&(ke$1.wasm.proxy=!1),typeof ke$1.wasm.trace!="boolean"&&(ke$1.wasm.trace=!1),typeof ke$1.wasm.numThreads!="number"||!Number.isInteger(ke$1.wasm.numThreads)||ke$1.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(ke$1.wasm.numThreads=1);let s=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;ke$1.wasm.numThreads=Math.min(4,Math.ceil((s||1)/2))}},hi=class{async init(s){ff$1(),await Wd$1(),await Nd$1(s)}async createInferenceSessionHandler(s,l){let c=new fi$1;return await c.loadModel(s,l),Promise.resolve(c)}}}),Yd$1={};kr$1(Yd$1,{wasmBackend:()=>hf$1});var hf$1,Xd$1=j(()=>{Kd$1(),hf$1=new hi});_t();_t();_t();var ka="1.18.0",h$$1=Bi$1;{let s=(Xd$1(),sr$1(Yd$1)).wasmBackend;lr$1("webgpu",s,5),lr$1("webnn",s,5),lr$1("cpu",s,10),lr$1("wasm",s,10)}Object.defineProperty(ke$1.versions,"web",{value:ka,enumerable:!0});/**
* @license
* Copyright 2021 Google LLC. All Rights Reserved.
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
* http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
* =============================================================================
*//**
 * @license
 * Copyright 2020 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 *//**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */const ort_gpu=Object.freeze(Object.defineProperty({__proto__:null,get InferenceSession(){return uc},get TRACE(){return Bn$1},get TRACE_FUNC_BEGIN(){return yt$1},get TRACE_FUNC_END(){return ut$1},get Tensor(){return tt$3},get TrainingSession(){return dc},default:h$$1,get env(){return ke$1},get registerBackend(){return lr$1}},Symbol.toStringTag,{value:"Module"}));var util;(function(s){s.assertEqual=f=>f;function l(f){}s.assertIs=l;function c(f){throw new Error}s.assertNever=c,s.arrayToEnum=f=>{const g={};for(const v of f)g[v]=v;return g},s.getValidEnumValues=f=>{const g=s.objectKeys(f).filter(b=>typeof f[f[b]]!="number"),v={};for(const b of g)v[b]=f[b];return s.objectValues(v)},s.objectValues=f=>s.objectKeys(f).map(function(g){return f[g]}),s.objectKeys=typeof Object.keys=="function"?f=>Object.keys(f):f=>{const g=[];for(const v in f)Object.prototype.hasOwnProperty.call(f,v)&&g.push(v);return g},s.find=(f,g)=>{for(const v of f)if(g(v))return v},s.isInteger=typeof Number.isInteger=="function"?f=>Number.isInteger(f):f=>typeof f=="number"&&isFinite(f)&&Math.floor(f)===f;function d(f,g=" | "){return f.map(v=>typeof v=="string"?`'${v}'`:v).join(g)}s.joinValues=d,s.jsonStringifyReplacer=(f,g)=>typeof g=="bigint"?g.toString():g})(util||(util={}));var objectUtil;(function(s){s.mergeShapes=(l,c)=>({...l,...c})})(objectUtil||(objectUtil={}));const ZodParsedType=util.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),getParsedType=s=>{switch(typeof s){case"undefined":return ZodParsedType.undefined;case"string":return ZodParsedType.string;case"number":return isNaN(s)?ZodParsedType.nan:ZodParsedType.number;case"boolean":return ZodParsedType.boolean;case"function":return ZodParsedType.function;case"bigint":return ZodParsedType.bigint;case"symbol":return ZodParsedType.symbol;case"object":return Array.isArray(s)?ZodParsedType.array:s===null?ZodParsedType.null:s.then&&typeof s.then=="function"&&s.catch&&typeof s.catch=="function"?ZodParsedType.promise:typeof Map<"u"&&s instanceof Map?ZodParsedType.map:typeof Set<"u"&&s instanceof Set?ZodParsedType.set:typeof Date<"u"&&s instanceof Date?ZodParsedType.date:ZodParsedType.object;default:return ZodParsedType.unknown}},ZodIssueCode=util.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),quotelessJson=s=>JSON.stringify(s,null,2).replace(/"([^"]+)":/g,"$1:");class ZodError extends Error{constructor(l){super(),this.issues=[],this.addIssue=d=>{this.issues=[...this.issues,d]},this.addIssues=(d=[])=>{this.issues=[...this.issues,...d]};const c=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,c):this.__proto__=c,this.name="ZodError",this.issues=l}get errors(){return this.issues}format(l){const c=l||function(g){return g.message},d={_errors:[]},f=g=>{for(const v of g.issues)if(v.code==="invalid_union")v.unionErrors.map(f);else if(v.code==="invalid_return_type")f(v.returnTypeError);else if(v.code==="invalid_arguments")f(v.argumentsError);else if(v.path.length===0)d._errors.push(c(v));else{let b=d,$=0;for(;$<v.path.length;){const y=v.path[$];$===v.path.length-1?(b[y]=b[y]||{_errors:[]},b[y]._errors.push(c(v))):b[y]=b[y]||{_errors:[]},b=b[y],$++}}};return f(this),d}static assert(l){if(!(l instanceof ZodError))throw new Error(`Not a ZodError: ${l}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,util.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(l=c=>c.message){const c={},d=[];for(const f of this.issues)f.path.length>0?(c[f.path[0]]=c[f.path[0]]||[],c[f.path[0]].push(l(f))):d.push(l(f));return{formErrors:d,fieldErrors:c}}get formErrors(){return this.flatten()}}ZodError.create=s=>new ZodError(s);const errorMap=(s,l)=>{let c;switch(s.code){case ZodIssueCode.invalid_type:s.received===ZodParsedType.undefined?c="Required":c=`Expected ${s.expected}, received ${s.received}`;break;case ZodIssueCode.invalid_literal:c=`Invalid literal value, expected ${JSON.stringify(s.expected,util.jsonStringifyReplacer)}`;break;case ZodIssueCode.unrecognized_keys:c=`Unrecognized key(s) in object: ${util.joinValues(s.keys,", ")}`;break;case ZodIssueCode.invalid_union:c="Invalid input";break;case ZodIssueCode.invalid_union_discriminator:c=`Invalid discriminator value. Expected ${util.joinValues(s.options)}`;break;case ZodIssueCode.invalid_enum_value:c=`Invalid enum value. Expected ${util.joinValues(s.options)}, received '${s.received}'`;break;case ZodIssueCode.invalid_arguments:c="Invalid function arguments";break;case ZodIssueCode.invalid_return_type:c="Invalid function return type";break;case ZodIssueCode.invalid_date:c="Invalid date";break;case ZodIssueCode.invalid_string:typeof s.validation=="object"?"includes"in s.validation?(c=`Invalid input: must include "${s.validation.includes}"`,typeof s.validation.position=="number"&&(c=`${c} at one or more positions greater than or equal to ${s.validation.position}`)):"startsWith"in s.validation?c=`Invalid input: must start with "${s.validation.startsWith}"`:"endsWith"in s.validation?c=`Invalid input: must end with "${s.validation.endsWith}"`:util.assertNever(s.validation):s.validation!=="regex"?c=`Invalid ${s.validation}`:c="Invalid";break;case ZodIssueCode.too_small:s.type==="array"?c=`Array must contain ${s.exact?"exactly":s.inclusive?"at least":"more than"} ${s.minimum} element(s)`:s.type==="string"?c=`String must contain ${s.exact?"exactly":s.inclusive?"at least":"over"} ${s.minimum} character(s)`:s.type==="number"?c=`Number must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${s.minimum}`:s.type==="date"?c=`Date must be ${s.exact?"exactly equal to ":s.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(s.minimum))}`:c="Invalid input";break;case ZodIssueCode.too_big:s.type==="array"?c=`Array must contain ${s.exact?"exactly":s.inclusive?"at most":"less than"} ${s.maximum} element(s)`:s.type==="string"?c=`String must contain ${s.exact?"exactly":s.inclusive?"at most":"under"} ${s.maximum} character(s)`:s.type==="number"?c=`Number must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="bigint"?c=`BigInt must be ${s.exact?"exactly":s.inclusive?"less than or equal to":"less than"} ${s.maximum}`:s.type==="date"?c=`Date must be ${s.exact?"exactly":s.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(s.maximum))}`:c="Invalid input";break;case ZodIssueCode.custom:c="Invalid input";break;case ZodIssueCode.invalid_intersection_types:c="Intersection results could not be merged";break;case ZodIssueCode.not_multiple_of:c=`Number must be a multiple of ${s.multipleOf}`;break;case ZodIssueCode.not_finite:c="Number must be finite";break;default:c=l.defaultError,util.assertNever(s)}return{message:c}};let overrideErrorMap=errorMap;function setErrorMap(s){overrideErrorMap=s}function getErrorMap(){return overrideErrorMap}const makeIssue=s=>{const{data:l,path:c,errorMaps:d,issueData:f}=s,g=[...c,...f.path||[]],v={...f,path:g};if(f.message!==void 0)return{...f,path:g,message:f.message};let b="";const $=d.filter(y=>!!y).slice().reverse();for(const y of $)b=y(v,{data:l,defaultError:b}).message;return{...f,path:g,message:b}},EMPTY_PATH=[];function addIssueToContext(s,l){const c=getErrorMap(),d=makeIssue({issueData:l,data:s.data,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,c,c===errorMap?void 0:errorMap].filter(f=>!!f)});s.common.issues.push(d)}class ParseStatus{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(l,c){const d=[];for(const f of c){if(f.status==="aborted")return INVALID;f.status==="dirty"&&l.dirty(),d.push(f.value)}return{status:l.value,value:d}}static async mergeObjectAsync(l,c){const d=[];for(const f of c){const g=await f.key,v=await f.value;d.push({key:g,value:v})}return ParseStatus.mergeObjectSync(l,d)}static mergeObjectSync(l,c){const d={};for(const f of c){const{key:g,value:v}=f;if(g.status==="aborted"||v.status==="aborted")return INVALID;g.status==="dirty"&&l.dirty(),v.status==="dirty"&&l.dirty(),g.value!=="__proto__"&&(typeof v.value<"u"||f.alwaysSet)&&(d[g.value]=v.value)}return{status:l.value,value:d}}}const INVALID=Object.freeze({status:"aborted"}),DIRTY=s=>({status:"dirty",value:s}),OK$1=s=>({status:"valid",value:s}),isAborted=s=>s.status==="aborted",isDirty=s=>s.status==="dirty",isValid=s=>s.status==="valid",isAsync=s=>typeof Promise<"u"&&s instanceof Promise;function __classPrivateFieldGet(s,l,c,d){if(typeof l=="function"?s!==l||!d:!l.has(s))throw new TypeError("Cannot read private member from an object whose class did not declare it");return l.get(s)}function __classPrivateFieldSet(s,l,c,d,f){if(typeof l=="function"?s!==l||!f:!l.has(s))throw new TypeError("Cannot write private member to an object whose class did not declare it");return l.set(s,c),c}typeof SuppressedError=="function"&&SuppressedError;var errorUtil;(function(s){s.errToObj=l=>typeof l=="string"?{message:l}:l||{},s.toString=l=>typeof l=="string"?l:l==null?void 0:l.message})(errorUtil||(errorUtil={}));var _ZodEnum_cache,_ZodNativeEnum_cache;class ParseInputLazyPath{constructor(l,c,d,f){this._cachedPath=[],this.parent=l,this.data=c,this._path=d,this._key=f}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const handleResult=(s,l)=>{if(isValid(l))return{success:!0,data:l.value};if(!s.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const c=new ZodError(s.common.issues);return this._error=c,this._error}}};function processCreateParams(s){if(!s)return{};const{errorMap:l,invalid_type_error:c,required_error:d,description:f}=s;if(l&&(c||d))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return l?{errorMap:l,description:f}:{errorMap:(v,b)=>{var $,y;const{message:x}=s;return v.code==="invalid_enum_value"?{message:x??b.defaultError}:typeof b.data>"u"?{message:($=x??d)!==null&&$!==void 0?$:b.defaultError}:v.code!=="invalid_type"?{message:b.defaultError}:{message:(y=x??c)!==null&&y!==void 0?y:b.defaultError}},description:f}}class ZodType{constructor(l){this.spa=this.safeParseAsync,this._def=l,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(l){return getParsedType(l.data)}_getOrReturnCtx(l,c){return c||{common:l.parent.common,data:l.data,parsedType:getParsedType(l.data),schemaErrorMap:this._def.errorMap,path:l.path,parent:l.parent}}_processInputParams(l){return{status:new ParseStatus,ctx:{common:l.parent.common,data:l.data,parsedType:getParsedType(l.data),schemaErrorMap:this._def.errorMap,path:l.path,parent:l.parent}}}_parseSync(l){const c=this._parse(l);if(isAsync(c))throw new Error("Synchronous parse encountered promise.");return c}_parseAsync(l){const c=this._parse(l);return Promise.resolve(c)}parse(l,c){const d=this.safeParse(l,c);if(d.success)return d.data;throw d.error}safeParse(l,c){var d;const f={common:{issues:[],async:(d=c==null?void 0:c.async)!==null&&d!==void 0?d:!1,contextualErrorMap:c==null?void 0:c.errorMap},path:(c==null?void 0:c.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:l,parsedType:getParsedType(l)},g=this._parseSync({data:l,path:f.path,parent:f});return handleResult(f,g)}async parseAsync(l,c){const d=await this.safeParseAsync(l,c);if(d.success)return d.data;throw d.error}async safeParseAsync(l,c){const d={common:{issues:[],contextualErrorMap:c==null?void 0:c.errorMap,async:!0},path:(c==null?void 0:c.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:l,parsedType:getParsedType(l)},f=this._parse({data:l,path:d.path,parent:d}),g=await(isAsync(f)?f:Promise.resolve(f));return handleResult(d,g)}refine(l,c){const d=f=>typeof c=="string"||typeof c>"u"?{message:c}:typeof c=="function"?c(f):c;return this._refinement((f,g)=>{const v=l(f),b=()=>g.addIssue({code:ZodIssueCode.custom,...d(f)});return typeof Promise<"u"&&v instanceof Promise?v.then($=>$?!0:(b(),!1)):v?!0:(b(),!1)})}refinement(l,c){return this._refinement((d,f)=>l(d)?!0:(f.addIssue(typeof c=="function"?c(d,f):c),!1))}_refinement(l){return new ZodEffects({schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"refinement",refinement:l}})}superRefine(l){return this._refinement(l)}optional(){return ZodOptional.create(this,this._def)}nullable(){return ZodNullable.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ZodArray.create(this,this._def)}promise(){return ZodPromise.create(this,this._def)}or(l){return ZodUnion.create([this,l],this._def)}and(l){return ZodIntersection.create(this,l,this._def)}transform(l){return new ZodEffects({...processCreateParams(this._def),schema:this,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:{type:"transform",transform:l}})}default(l){const c=typeof l=="function"?l:()=>l;return new ZodDefault({...processCreateParams(this._def),innerType:this,defaultValue:c,typeName:ZodFirstPartyTypeKind.ZodDefault})}brand(){return new ZodBranded({typeName:ZodFirstPartyTypeKind.ZodBranded,type:this,...processCreateParams(this._def)})}catch(l){const c=typeof l=="function"?l:()=>l;return new ZodCatch({...processCreateParams(this._def),innerType:this,catchValue:c,typeName:ZodFirstPartyTypeKind.ZodCatch})}describe(l){const c=this.constructor;return new c({...this._def,description:l})}pipe(l){return ZodPipeline.create(this,l)}readonly(){return ZodReadonly.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const cuidRegex=/^c[^\s-]{8,}$/i,cuid2Regex=/^[0-9a-z]+$/,ulidRegex=/^[0-9A-HJKMNP-TV-Z]{26}$/,uuidRegex=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nanoidRegex=/^[a-z0-9_-]{21}$/i,durationRegex=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,emailRegex=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,_emojiRegex="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let emojiRegex;const ipv4Regex=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,ipv6Regex=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,base64Regex=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,dateRegexSource="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",dateRegex=new RegExp(`^${dateRegexSource}$`);function timeRegexSource(s){let l="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return s.precision?l=`${l}\\.\\d{${s.precision}}`:s.precision==null&&(l=`${l}(\\.\\d+)?`),l}function timeRegex(s){return new RegExp(`^${timeRegexSource(s)}$`)}function datetimeRegex(s){let l=`${dateRegexSource}T${timeRegexSource(s)}`;const c=[];return c.push(s.local?"Z?":"Z"),s.offset&&c.push("([+-]\\d{2}:?\\d{2})"),l=`${l}(${c.join("|")})`,new RegExp(`^${l}$`)}function isValidIP(s,l){return!!((l==="v4"||!l)&&ipv4Regex.test(s)||(l==="v6"||!l)&&ipv6Regex.test(s))}class ZodString extends ZodType{_parse(l){if(this._def.coerce&&(l.data=String(l.data)),this._getType(l)!==ZodParsedType.string){const g=this._getOrReturnCtx(l);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.string,received:g.parsedType}),INVALID}const d=new ParseStatus;let f;for(const g of this._def.checks)if(g.kind==="min")l.data.length<g.value&&(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{code:ZodIssueCode.too_small,minimum:g.value,type:"string",inclusive:!0,exact:!1,message:g.message}),d.dirty());else if(g.kind==="max")l.data.length>g.value&&(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{code:ZodIssueCode.too_big,maximum:g.value,type:"string",inclusive:!0,exact:!1,message:g.message}),d.dirty());else if(g.kind==="length"){const v=l.data.length>g.value,b=l.data.length<g.value;(v||b)&&(f=this._getOrReturnCtx(l,f),v?addIssueToContext(f,{code:ZodIssueCode.too_big,maximum:g.value,type:"string",inclusive:!0,exact:!0,message:g.message}):b&&addIssueToContext(f,{code:ZodIssueCode.too_small,minimum:g.value,type:"string",inclusive:!0,exact:!0,message:g.message}),d.dirty())}else if(g.kind==="email")emailRegex.test(l.data)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{validation:"email",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="emoji")emojiRegex||(emojiRegex=new RegExp(_emojiRegex,"u")),emojiRegex.test(l.data)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{validation:"emoji",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="uuid")uuidRegex.test(l.data)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{validation:"uuid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="nanoid")nanoidRegex.test(l.data)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{validation:"nanoid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="cuid")cuidRegex.test(l.data)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{validation:"cuid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="cuid2")cuid2Regex.test(l.data)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{validation:"cuid2",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="ulid")ulidRegex.test(l.data)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{validation:"ulid",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty());else if(g.kind==="url")try{new URL(l.data)}catch{f=this._getOrReturnCtx(l,f),addIssueToContext(f,{validation:"url",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()}else g.kind==="regex"?(g.regex.lastIndex=0,g.regex.test(l.data)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{validation:"regex",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty())):g.kind==="trim"?l.data=l.data.trim():g.kind==="includes"?l.data.includes(g.value,g.position)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{code:ZodIssueCode.invalid_string,validation:{includes:g.value,position:g.position},message:g.message}),d.dirty()):g.kind==="toLowerCase"?l.data=l.data.toLowerCase():g.kind==="toUpperCase"?l.data=l.data.toUpperCase():g.kind==="startsWith"?l.data.startsWith(g.value)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{code:ZodIssueCode.invalid_string,validation:{startsWith:g.value},message:g.message}),d.dirty()):g.kind==="endsWith"?l.data.endsWith(g.value)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{code:ZodIssueCode.invalid_string,validation:{endsWith:g.value},message:g.message}),d.dirty()):g.kind==="datetime"?datetimeRegex(g).test(l.data)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{code:ZodIssueCode.invalid_string,validation:"datetime",message:g.message}),d.dirty()):g.kind==="date"?dateRegex.test(l.data)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{code:ZodIssueCode.invalid_string,validation:"date",message:g.message}),d.dirty()):g.kind==="time"?timeRegex(g).test(l.data)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{code:ZodIssueCode.invalid_string,validation:"time",message:g.message}),d.dirty()):g.kind==="duration"?durationRegex.test(l.data)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{validation:"duration",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="ip"?isValidIP(l.data,g.version)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{validation:"ip",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):g.kind==="base64"?base64Regex.test(l.data)||(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{validation:"base64",code:ZodIssueCode.invalid_string,message:g.message}),d.dirty()):util.assertNever(g);return{status:d.value,value:l.data}}_regex(l,c,d){return this.refinement(f=>l.test(f),{validation:c,code:ZodIssueCode.invalid_string,...errorUtil.errToObj(d)})}_addCheck(l){return new ZodString({...this._def,checks:[...this._def.checks,l]})}email(l){return this._addCheck({kind:"email",...errorUtil.errToObj(l)})}url(l){return this._addCheck({kind:"url",...errorUtil.errToObj(l)})}emoji(l){return this._addCheck({kind:"emoji",...errorUtil.errToObj(l)})}uuid(l){return this._addCheck({kind:"uuid",...errorUtil.errToObj(l)})}nanoid(l){return this._addCheck({kind:"nanoid",...errorUtil.errToObj(l)})}cuid(l){return this._addCheck({kind:"cuid",...errorUtil.errToObj(l)})}cuid2(l){return this._addCheck({kind:"cuid2",...errorUtil.errToObj(l)})}ulid(l){return this._addCheck({kind:"ulid",...errorUtil.errToObj(l)})}base64(l){return this._addCheck({kind:"base64",...errorUtil.errToObj(l)})}ip(l){return this._addCheck({kind:"ip",...errorUtil.errToObj(l)})}datetime(l){var c,d;return typeof l=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:l}):this._addCheck({kind:"datetime",precision:typeof(l==null?void 0:l.precision)>"u"?null:l==null?void 0:l.precision,offset:(c=l==null?void 0:l.offset)!==null&&c!==void 0?c:!1,local:(d=l==null?void 0:l.local)!==null&&d!==void 0?d:!1,...errorUtil.errToObj(l==null?void 0:l.message)})}date(l){return this._addCheck({kind:"date",message:l})}time(l){return typeof l=="string"?this._addCheck({kind:"time",precision:null,message:l}):this._addCheck({kind:"time",precision:typeof(l==null?void 0:l.precision)>"u"?null:l==null?void 0:l.precision,...errorUtil.errToObj(l==null?void 0:l.message)})}duration(l){return this._addCheck({kind:"duration",...errorUtil.errToObj(l)})}regex(l,c){return this._addCheck({kind:"regex",regex:l,...errorUtil.errToObj(c)})}includes(l,c){return this._addCheck({kind:"includes",value:l,position:c==null?void 0:c.position,...errorUtil.errToObj(c==null?void 0:c.message)})}startsWith(l,c){return this._addCheck({kind:"startsWith",value:l,...errorUtil.errToObj(c)})}endsWith(l,c){return this._addCheck({kind:"endsWith",value:l,...errorUtil.errToObj(c)})}min(l,c){return this._addCheck({kind:"min",value:l,...errorUtil.errToObj(c)})}max(l,c){return this._addCheck({kind:"max",value:l,...errorUtil.errToObj(c)})}length(l,c){return this._addCheck({kind:"length",value:l,...errorUtil.errToObj(c)})}nonempty(l){return this.min(1,errorUtil.errToObj(l))}trim(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ZodString({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(l=>l.kind==="datetime")}get isDate(){return!!this._def.checks.find(l=>l.kind==="date")}get isTime(){return!!this._def.checks.find(l=>l.kind==="time")}get isDuration(){return!!this._def.checks.find(l=>l.kind==="duration")}get isEmail(){return!!this._def.checks.find(l=>l.kind==="email")}get isURL(){return!!this._def.checks.find(l=>l.kind==="url")}get isEmoji(){return!!this._def.checks.find(l=>l.kind==="emoji")}get isUUID(){return!!this._def.checks.find(l=>l.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(l=>l.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(l=>l.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(l=>l.kind==="cuid2")}get isULID(){return!!this._def.checks.find(l=>l.kind==="ulid")}get isIP(){return!!this._def.checks.find(l=>l.kind==="ip")}get isBase64(){return!!this._def.checks.find(l=>l.kind==="base64")}get minLength(){let l=null;for(const c of this._def.checks)c.kind==="min"&&(l===null||c.value>l)&&(l=c.value);return l}get maxLength(){let l=null;for(const c of this._def.checks)c.kind==="max"&&(l===null||c.value<l)&&(l=c.value);return l}}ZodString.create=s=>{var l;return new ZodString({checks:[],typeName:ZodFirstPartyTypeKind.ZodString,coerce:(l=s==null?void 0:s.coerce)!==null&&l!==void 0?l:!1,...processCreateParams(s)})};function floatSafeRemainder(s,l){const c=(s.toString().split(".")[1]||"").length,d=(l.toString().split(".")[1]||"").length,f=c>d?c:d,g=parseInt(s.toFixed(f).replace(".","")),v=parseInt(l.toFixed(f).replace(".",""));return g%v/Math.pow(10,f)}class ZodNumber extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(l){if(this._def.coerce&&(l.data=Number(l.data)),this._getType(l)!==ZodParsedType.number){const g=this._getOrReturnCtx(l);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.number,received:g.parsedType}),INVALID}let d;const f=new ParseStatus;for(const g of this._def.checks)g.kind==="int"?util.isInteger(l.data)||(d=this._getOrReturnCtx(l,d),addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:"integer",received:"float",message:g.message}),f.dirty()):g.kind==="min"?(g.inclusive?l.data<g.value:l.data<=g.value)&&(d=this._getOrReturnCtx(l,d),addIssueToContext(d,{code:ZodIssueCode.too_small,minimum:g.value,type:"number",inclusive:g.inclusive,exact:!1,message:g.message}),f.dirty()):g.kind==="max"?(g.inclusive?l.data>g.value:l.data>=g.value)&&(d=this._getOrReturnCtx(l,d),addIssueToContext(d,{code:ZodIssueCode.too_big,maximum:g.value,type:"number",inclusive:g.inclusive,exact:!1,message:g.message}),f.dirty()):g.kind==="multipleOf"?floatSafeRemainder(l.data,g.value)!==0&&(d=this._getOrReturnCtx(l,d),addIssueToContext(d,{code:ZodIssueCode.not_multiple_of,multipleOf:g.value,message:g.message}),f.dirty()):g.kind==="finite"?Number.isFinite(l.data)||(d=this._getOrReturnCtx(l,d),addIssueToContext(d,{code:ZodIssueCode.not_finite,message:g.message}),f.dirty()):util.assertNever(g);return{status:f.value,value:l.data}}gte(l,c){return this.setLimit("min",l,!0,errorUtil.toString(c))}gt(l,c){return this.setLimit("min",l,!1,errorUtil.toString(c))}lte(l,c){return this.setLimit("max",l,!0,errorUtil.toString(c))}lt(l,c){return this.setLimit("max",l,!1,errorUtil.toString(c))}setLimit(l,c,d,f){return new ZodNumber({...this._def,checks:[...this._def.checks,{kind:l,value:c,inclusive:d,message:errorUtil.toString(f)}]})}_addCheck(l){return new ZodNumber({...this._def,checks:[...this._def.checks,l]})}int(l){return this._addCheck({kind:"int",message:errorUtil.toString(l)})}positive(l){return this._addCheck({kind:"min",value:0,inclusive:!1,message:errorUtil.toString(l)})}negative(l){return this._addCheck({kind:"max",value:0,inclusive:!1,message:errorUtil.toString(l)})}nonpositive(l){return this._addCheck({kind:"max",value:0,inclusive:!0,message:errorUtil.toString(l)})}nonnegative(l){return this._addCheck({kind:"min",value:0,inclusive:!0,message:errorUtil.toString(l)})}multipleOf(l,c){return this._addCheck({kind:"multipleOf",value:l,message:errorUtil.toString(c)})}finite(l){return this._addCheck({kind:"finite",message:errorUtil.toString(l)})}safe(l){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:errorUtil.toString(l)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:errorUtil.toString(l)})}get minValue(){let l=null;for(const c of this._def.checks)c.kind==="min"&&(l===null||c.value>l)&&(l=c.value);return l}get maxValue(){let l=null;for(const c of this._def.checks)c.kind==="max"&&(l===null||c.value<l)&&(l=c.value);return l}get isInt(){return!!this._def.checks.find(l=>l.kind==="int"||l.kind==="multipleOf"&&util.isInteger(l.value))}get isFinite(){let l=null,c=null;for(const d of this._def.checks){if(d.kind==="finite"||d.kind==="int"||d.kind==="multipleOf")return!0;d.kind==="min"?(c===null||d.value>c)&&(c=d.value):d.kind==="max"&&(l===null||d.value<l)&&(l=d.value)}return Number.isFinite(c)&&Number.isFinite(l)}}ZodNumber.create=s=>new ZodNumber({checks:[],typeName:ZodFirstPartyTypeKind.ZodNumber,coerce:(s==null?void 0:s.coerce)||!1,...processCreateParams(s)});class ZodBigInt extends ZodType{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(l){if(this._def.coerce&&(l.data=BigInt(l.data)),this._getType(l)!==ZodParsedType.bigint){const g=this._getOrReturnCtx(l);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.bigint,received:g.parsedType}),INVALID}let d;const f=new ParseStatus;for(const g of this._def.checks)g.kind==="min"?(g.inclusive?l.data<g.value:l.data<=g.value)&&(d=this._getOrReturnCtx(l,d),addIssueToContext(d,{code:ZodIssueCode.too_small,type:"bigint",minimum:g.value,inclusive:g.inclusive,message:g.message}),f.dirty()):g.kind==="max"?(g.inclusive?l.data>g.value:l.data>=g.value)&&(d=this._getOrReturnCtx(l,d),addIssueToContext(d,{code:ZodIssueCode.too_big,type:"bigint",maximum:g.value,inclusive:g.inclusive,message:g.message}),f.dirty()):g.kind==="multipleOf"?l.data%g.value!==BigInt(0)&&(d=this._getOrReturnCtx(l,d),addIssueToContext(d,{code:ZodIssueCode.not_multiple_of,multipleOf:g.value,message:g.message}),f.dirty()):util.assertNever(g);return{status:f.value,value:l.data}}gte(l,c){return this.setLimit("min",l,!0,errorUtil.toString(c))}gt(l,c){return this.setLimit("min",l,!1,errorUtil.toString(c))}lte(l,c){return this.setLimit("max",l,!0,errorUtil.toString(c))}lt(l,c){return this.setLimit("max",l,!1,errorUtil.toString(c))}setLimit(l,c,d,f){return new ZodBigInt({...this._def,checks:[...this._def.checks,{kind:l,value:c,inclusive:d,message:errorUtil.toString(f)}]})}_addCheck(l){return new ZodBigInt({...this._def,checks:[...this._def.checks,l]})}positive(l){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:errorUtil.toString(l)})}negative(l){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:errorUtil.toString(l)})}nonpositive(l){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:errorUtil.toString(l)})}nonnegative(l){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:errorUtil.toString(l)})}multipleOf(l,c){return this._addCheck({kind:"multipleOf",value:l,message:errorUtil.toString(c)})}get minValue(){let l=null;for(const c of this._def.checks)c.kind==="min"&&(l===null||c.value>l)&&(l=c.value);return l}get maxValue(){let l=null;for(const c of this._def.checks)c.kind==="max"&&(l===null||c.value<l)&&(l=c.value);return l}}ZodBigInt.create=s=>{var l;return new ZodBigInt({checks:[],typeName:ZodFirstPartyTypeKind.ZodBigInt,coerce:(l=s==null?void 0:s.coerce)!==null&&l!==void 0?l:!1,...processCreateParams(s)})};class ZodBoolean extends ZodType{_parse(l){if(this._def.coerce&&(l.data=!!l.data),this._getType(l)!==ZodParsedType.boolean){const d=this._getOrReturnCtx(l);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.boolean,received:d.parsedType}),INVALID}return OK$1(l.data)}}ZodBoolean.create=s=>new ZodBoolean({typeName:ZodFirstPartyTypeKind.ZodBoolean,coerce:(s==null?void 0:s.coerce)||!1,...processCreateParams(s)});class ZodDate extends ZodType{_parse(l){if(this._def.coerce&&(l.data=new Date(l.data)),this._getType(l)!==ZodParsedType.date){const g=this._getOrReturnCtx(l);return addIssueToContext(g,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.date,received:g.parsedType}),INVALID}if(isNaN(l.data.getTime())){const g=this._getOrReturnCtx(l);return addIssueToContext(g,{code:ZodIssueCode.invalid_date}),INVALID}const d=new ParseStatus;let f;for(const g of this._def.checks)g.kind==="min"?l.data.getTime()<g.value&&(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{code:ZodIssueCode.too_small,message:g.message,inclusive:!0,exact:!1,minimum:g.value,type:"date"}),d.dirty()):g.kind==="max"?l.data.getTime()>g.value&&(f=this._getOrReturnCtx(l,f),addIssueToContext(f,{code:ZodIssueCode.too_big,message:g.message,inclusive:!0,exact:!1,maximum:g.value,type:"date"}),d.dirty()):util.assertNever(g);return{status:d.value,value:new Date(l.data.getTime())}}_addCheck(l){return new ZodDate({...this._def,checks:[...this._def.checks,l]})}min(l,c){return this._addCheck({kind:"min",value:l.getTime(),message:errorUtil.toString(c)})}max(l,c){return this._addCheck({kind:"max",value:l.getTime(),message:errorUtil.toString(c)})}get minDate(){let l=null;for(const c of this._def.checks)c.kind==="min"&&(l===null||c.value>l)&&(l=c.value);return l!=null?new Date(l):null}get maxDate(){let l=null;for(const c of this._def.checks)c.kind==="max"&&(l===null||c.value<l)&&(l=c.value);return l!=null?new Date(l):null}}ZodDate.create=s=>new ZodDate({checks:[],coerce:(s==null?void 0:s.coerce)||!1,typeName:ZodFirstPartyTypeKind.ZodDate,...processCreateParams(s)});class ZodSymbol extends ZodType{_parse(l){if(this._getType(l)!==ZodParsedType.symbol){const d=this._getOrReturnCtx(l);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.symbol,received:d.parsedType}),INVALID}return OK$1(l.data)}}ZodSymbol.create=s=>new ZodSymbol({typeName:ZodFirstPartyTypeKind.ZodSymbol,...processCreateParams(s)});class ZodUndefined extends ZodType{_parse(l){if(this._getType(l)!==ZodParsedType.undefined){const d=this._getOrReturnCtx(l);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.undefined,received:d.parsedType}),INVALID}return OK$1(l.data)}}ZodUndefined.create=s=>new ZodUndefined({typeName:ZodFirstPartyTypeKind.ZodUndefined,...processCreateParams(s)});class ZodNull extends ZodType{_parse(l){if(this._getType(l)!==ZodParsedType.null){const d=this._getOrReturnCtx(l);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.null,received:d.parsedType}),INVALID}return OK$1(l.data)}}ZodNull.create=s=>new ZodNull({typeName:ZodFirstPartyTypeKind.ZodNull,...processCreateParams(s)});class ZodAny extends ZodType{constructor(){super(...arguments),this._any=!0}_parse(l){return OK$1(l.data)}}ZodAny.create=s=>new ZodAny({typeName:ZodFirstPartyTypeKind.ZodAny,...processCreateParams(s)});class ZodUnknown extends ZodType{constructor(){super(...arguments),this._unknown=!0}_parse(l){return OK$1(l.data)}}ZodUnknown.create=s=>new ZodUnknown({typeName:ZodFirstPartyTypeKind.ZodUnknown,...processCreateParams(s)});class ZodNever extends ZodType{_parse(l){const c=this._getOrReturnCtx(l);return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.never,received:c.parsedType}),INVALID}}ZodNever.create=s=>new ZodNever({typeName:ZodFirstPartyTypeKind.ZodNever,...processCreateParams(s)});class ZodVoid extends ZodType{_parse(l){if(this._getType(l)!==ZodParsedType.undefined){const d=this._getOrReturnCtx(l);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.void,received:d.parsedType}),INVALID}return OK$1(l.data)}}ZodVoid.create=s=>new ZodVoid({typeName:ZodFirstPartyTypeKind.ZodVoid,...processCreateParams(s)});class ZodArray extends ZodType{_parse(l){const{ctx:c,status:d}=this._processInputParams(l),f=this._def;if(c.parsedType!==ZodParsedType.array)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:c.parsedType}),INVALID;if(f.exactLength!==null){const v=c.data.length>f.exactLength.value,b=c.data.length<f.exactLength.value;(v||b)&&(addIssueToContext(c,{code:v?ZodIssueCode.too_big:ZodIssueCode.too_small,minimum:b?f.exactLength.value:void 0,maximum:v?f.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:f.exactLength.message}),d.dirty())}if(f.minLength!==null&&c.data.length<f.minLength.value&&(addIssueToContext(c,{code:ZodIssueCode.too_small,minimum:f.minLength.value,type:"array",inclusive:!0,exact:!1,message:f.minLength.message}),d.dirty()),f.maxLength!==null&&c.data.length>f.maxLength.value&&(addIssueToContext(c,{code:ZodIssueCode.too_big,maximum:f.maxLength.value,type:"array",inclusive:!0,exact:!1,message:f.maxLength.message}),d.dirty()),c.common.async)return Promise.all([...c.data].map((v,b)=>f.type._parseAsync(new ParseInputLazyPath(c,v,c.path,b)))).then(v=>ParseStatus.mergeArray(d,v));const g=[...c.data].map((v,b)=>f.type._parseSync(new ParseInputLazyPath(c,v,c.path,b)));return ParseStatus.mergeArray(d,g)}get element(){return this._def.type}min(l,c){return new ZodArray({...this._def,minLength:{value:l,message:errorUtil.toString(c)}})}max(l,c){return new ZodArray({...this._def,maxLength:{value:l,message:errorUtil.toString(c)}})}length(l,c){return new ZodArray({...this._def,exactLength:{value:l,message:errorUtil.toString(c)}})}nonempty(l){return this.min(1,l)}}ZodArray.create=(s,l)=>new ZodArray({type:s,minLength:null,maxLength:null,exactLength:null,typeName:ZodFirstPartyTypeKind.ZodArray,...processCreateParams(l)});function deepPartialify(s){if(s instanceof ZodObject){const l={};for(const c in s.shape){const d=s.shape[c];l[c]=ZodOptional.create(deepPartialify(d))}return new ZodObject({...s._def,shape:()=>l})}else return s instanceof ZodArray?new ZodArray({...s._def,type:deepPartialify(s.element)}):s instanceof ZodOptional?ZodOptional.create(deepPartialify(s.unwrap())):s instanceof ZodNullable?ZodNullable.create(deepPartialify(s.unwrap())):s instanceof ZodTuple?ZodTuple.create(s.items.map(l=>deepPartialify(l))):s}class ZodObject extends ZodType{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const l=this._def.shape(),c=util.objectKeys(l);return this._cached={shape:l,keys:c}}_parse(l){if(this._getType(l)!==ZodParsedType.object){const y=this._getOrReturnCtx(l);return addIssueToContext(y,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:y.parsedType}),INVALID}const{status:d,ctx:f}=this._processInputParams(l),{shape:g,keys:v}=this._getCached(),b=[];if(!(this._def.catchall instanceof ZodNever&&this._def.unknownKeys==="strip"))for(const y in f.data)v.includes(y)||b.push(y);const $=[];for(const y of v){const x=g[y],C=f.data[y];$.push({key:{status:"valid",value:y},value:x._parse(new ParseInputLazyPath(f,C,f.path,y)),alwaysSet:y in f.data})}if(this._def.catchall instanceof ZodNever){const y=this._def.unknownKeys;if(y==="passthrough")for(const x of b)$.push({key:{status:"valid",value:x},value:{status:"valid",value:f.data[x]}});else if(y==="strict")b.length>0&&(addIssueToContext(f,{code:ZodIssueCode.unrecognized_keys,keys:b}),d.dirty());else if(y!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const y=this._def.catchall;for(const x of b){const C=f.data[x];$.push({key:{status:"valid",value:x},value:y._parse(new ParseInputLazyPath(f,C,f.path,x)),alwaysSet:x in f.data})}}return f.common.async?Promise.resolve().then(async()=>{const y=[];for(const x of $){const C=await x.key,E=await x.value;y.push({key:C,value:E,alwaysSet:x.alwaysSet})}return y}).then(y=>ParseStatus.mergeObjectSync(d,y)):ParseStatus.mergeObjectSync(d,$)}get shape(){return this._def.shape()}strict(l){return errorUtil.errToObj,new ZodObject({...this._def,unknownKeys:"strict",...l!==void 0?{errorMap:(c,d)=>{var f,g,v,b;const $=(v=(g=(f=this._def).errorMap)===null||g===void 0?void 0:g.call(f,c,d).message)!==null&&v!==void 0?v:d.defaultError;return c.code==="unrecognized_keys"?{message:(b=errorUtil.errToObj(l).message)!==null&&b!==void 0?b:$}:{message:$}}}:{}})}strip(){return new ZodObject({...this._def,unknownKeys:"strip"})}passthrough(){return new ZodObject({...this._def,unknownKeys:"passthrough"})}extend(l){return new ZodObject({...this._def,shape:()=>({...this._def.shape(),...l})})}merge(l){return new ZodObject({unknownKeys:l._def.unknownKeys,catchall:l._def.catchall,shape:()=>({...this._def.shape(),...l._def.shape()}),typeName:ZodFirstPartyTypeKind.ZodObject})}setKey(l,c){return this.augment({[l]:c})}catchall(l){return new ZodObject({...this._def,catchall:l})}pick(l){const c={};return util.objectKeys(l).forEach(d=>{l[d]&&this.shape[d]&&(c[d]=this.shape[d])}),new ZodObject({...this._def,shape:()=>c})}omit(l){const c={};return util.objectKeys(this.shape).forEach(d=>{l[d]||(c[d]=this.shape[d])}),new ZodObject({...this._def,shape:()=>c})}deepPartial(){return deepPartialify(this)}partial(l){const c={};return util.objectKeys(this.shape).forEach(d=>{const f=this.shape[d];l&&!l[d]?c[d]=f:c[d]=f.optional()}),new ZodObject({...this._def,shape:()=>c})}required(l){const c={};return util.objectKeys(this.shape).forEach(d=>{if(l&&!l[d])c[d]=this.shape[d];else{let g=this.shape[d];for(;g instanceof ZodOptional;)g=g._def.innerType;c[d]=g}}),new ZodObject({...this._def,shape:()=>c})}keyof(){return createZodEnum(util.objectKeys(this.shape))}}ZodObject.create=(s,l)=>new ZodObject({shape:()=>s,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(l)});ZodObject.strictCreate=(s,l)=>new ZodObject({shape:()=>s,unknownKeys:"strict",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(l)});ZodObject.lazycreate=(s,l)=>new ZodObject({shape:s,unknownKeys:"strip",catchall:ZodNever.create(),typeName:ZodFirstPartyTypeKind.ZodObject,...processCreateParams(l)});class ZodUnion extends ZodType{_parse(l){const{ctx:c}=this._processInputParams(l),d=this._def.options;function f(g){for(const b of g)if(b.result.status==="valid")return b.result;for(const b of g)if(b.result.status==="dirty")return c.common.issues.push(...b.ctx.common.issues),b.result;const v=g.map(b=>new ZodError(b.ctx.common.issues));return addIssueToContext(c,{code:ZodIssueCode.invalid_union,unionErrors:v}),INVALID}if(c.common.async)return Promise.all(d.map(async g=>{const v={...c,common:{...c.common,issues:[]},parent:null};return{result:await g._parseAsync({data:c.data,path:c.path,parent:v}),ctx:v}})).then(f);{let g;const v=[];for(const $ of d){const y={...c,common:{...c.common,issues:[]},parent:null},x=$._parseSync({data:c.data,path:c.path,parent:y});if(x.status==="valid")return x;x.status==="dirty"&&!g&&(g={result:x,ctx:y}),y.common.issues.length&&v.push(y.common.issues)}if(g)return c.common.issues.push(...g.ctx.common.issues),g.result;const b=v.map($=>new ZodError($));return addIssueToContext(c,{code:ZodIssueCode.invalid_union,unionErrors:b}),INVALID}}get options(){return this._def.options}}ZodUnion.create=(s,l)=>new ZodUnion({options:s,typeName:ZodFirstPartyTypeKind.ZodUnion,...processCreateParams(l)});const getDiscriminator=s=>s instanceof ZodLazy?getDiscriminator(s.schema):s instanceof ZodEffects?getDiscriminator(s.innerType()):s instanceof ZodLiteral?[s.value]:s instanceof ZodEnum?s.options:s instanceof ZodNativeEnum?util.objectValues(s.enum):s instanceof ZodDefault?getDiscriminator(s._def.innerType):s instanceof ZodUndefined?[void 0]:s instanceof ZodNull?[null]:s instanceof ZodOptional?[void 0,...getDiscriminator(s.unwrap())]:s instanceof ZodNullable?[null,...getDiscriminator(s.unwrap())]:s instanceof ZodBranded||s instanceof ZodReadonly?getDiscriminator(s.unwrap()):s instanceof ZodCatch?getDiscriminator(s._def.innerType):[];class ZodDiscriminatedUnion extends ZodType{_parse(l){const{ctx:c}=this._processInputParams(l);if(c.parsedType!==ZodParsedType.object)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:c.parsedType}),INVALID;const d=this.discriminator,f=c.data[d],g=this.optionsMap.get(f);return g?c.common.async?g._parseAsync({data:c.data,path:c.path,parent:c}):g._parseSync({data:c.data,path:c.path,parent:c}):(addIssueToContext(c,{code:ZodIssueCode.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[d]}),INVALID)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(l,c,d){const f=new Map;for(const g of c){const v=getDiscriminator(g.shape[l]);if(!v.length)throw new Error(`A discriminator value for key \`${l}\` could not be extracted from all schema options`);for(const b of v){if(f.has(b))throw new Error(`Discriminator property ${String(l)} has duplicate value ${String(b)}`);f.set(b,g)}}return new ZodDiscriminatedUnion({typeName:ZodFirstPartyTypeKind.ZodDiscriminatedUnion,discriminator:l,options:c,optionsMap:f,...processCreateParams(d)})}}function mergeValues(s,l){const c=getParsedType(s),d=getParsedType(l);if(s===l)return{valid:!0,data:s};if(c===ZodParsedType.object&&d===ZodParsedType.object){const f=util.objectKeys(l),g=util.objectKeys(s).filter(b=>f.indexOf(b)!==-1),v={...s,...l};for(const b of g){const $=mergeValues(s[b],l[b]);if(!$.valid)return{valid:!1};v[b]=$.data}return{valid:!0,data:v}}else if(c===ZodParsedType.array&&d===ZodParsedType.array){if(s.length!==l.length)return{valid:!1};const f=[];for(let g=0;g<s.length;g++){const v=s[g],b=l[g],$=mergeValues(v,b);if(!$.valid)return{valid:!1};f.push($.data)}return{valid:!0,data:f}}else return c===ZodParsedType.date&&d===ZodParsedType.date&&+s==+l?{valid:!0,data:s}:{valid:!1}}class ZodIntersection extends ZodType{_parse(l){const{status:c,ctx:d}=this._processInputParams(l),f=(g,v)=>{if(isAborted(g)||isAborted(v))return INVALID;const b=mergeValues(g.value,v.value);return b.valid?((isDirty(g)||isDirty(v))&&c.dirty(),{status:c.value,value:b.data}):(addIssueToContext(d,{code:ZodIssueCode.invalid_intersection_types}),INVALID)};return d.common.async?Promise.all([this._def.left._parseAsync({data:d.data,path:d.path,parent:d}),this._def.right._parseAsync({data:d.data,path:d.path,parent:d})]).then(([g,v])=>f(g,v)):f(this._def.left._parseSync({data:d.data,path:d.path,parent:d}),this._def.right._parseSync({data:d.data,path:d.path,parent:d}))}}ZodIntersection.create=(s,l,c)=>new ZodIntersection({left:s,right:l,typeName:ZodFirstPartyTypeKind.ZodIntersection,...processCreateParams(c)});class ZodTuple extends ZodType{_parse(l){const{status:c,ctx:d}=this._processInputParams(l);if(d.parsedType!==ZodParsedType.array)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.array,received:d.parsedType}),INVALID;if(d.data.length<this._def.items.length)return addIssueToContext(d,{code:ZodIssueCode.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),INVALID;!this._def.rest&&d.data.length>this._def.items.length&&(addIssueToContext(d,{code:ZodIssueCode.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),c.dirty());const g=[...d.data].map((v,b)=>{const $=this._def.items[b]||this._def.rest;return $?$._parse(new ParseInputLazyPath(d,v,d.path,b)):null}).filter(v=>!!v);return d.common.async?Promise.all(g).then(v=>ParseStatus.mergeArray(c,v)):ParseStatus.mergeArray(c,g)}get items(){return this._def.items}rest(l){return new ZodTuple({...this._def,rest:l})}}ZodTuple.create=(s,l)=>{if(!Array.isArray(s))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ZodTuple({items:s,typeName:ZodFirstPartyTypeKind.ZodTuple,rest:null,...processCreateParams(l)})};class ZodRecord extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(l){const{status:c,ctx:d}=this._processInputParams(l);if(d.parsedType!==ZodParsedType.object)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.object,received:d.parsedType}),INVALID;const f=[],g=this._def.keyType,v=this._def.valueType;for(const b in d.data)f.push({key:g._parse(new ParseInputLazyPath(d,b,d.path,b)),value:v._parse(new ParseInputLazyPath(d,d.data[b],d.path,b)),alwaysSet:b in d.data});return d.common.async?ParseStatus.mergeObjectAsync(c,f):ParseStatus.mergeObjectSync(c,f)}get element(){return this._def.valueType}static create(l,c,d){return c instanceof ZodType?new ZodRecord({keyType:l,valueType:c,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(d)}):new ZodRecord({keyType:ZodString.create(),valueType:l,typeName:ZodFirstPartyTypeKind.ZodRecord,...processCreateParams(c)})}}class ZodMap extends ZodType{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(l){const{status:c,ctx:d}=this._processInputParams(l);if(d.parsedType!==ZodParsedType.map)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.map,received:d.parsedType}),INVALID;const f=this._def.keyType,g=this._def.valueType,v=[...d.data.entries()].map(([b,$],y)=>({key:f._parse(new ParseInputLazyPath(d,b,d.path,[y,"key"])),value:g._parse(new ParseInputLazyPath(d,$,d.path,[y,"value"]))}));if(d.common.async){const b=new Map;return Promise.resolve().then(async()=>{for(const $ of v){const y=await $.key,x=await $.value;if(y.status==="aborted"||x.status==="aborted")return INVALID;(y.status==="dirty"||x.status==="dirty")&&c.dirty(),b.set(y.value,x.value)}return{status:c.value,value:b}})}else{const b=new Map;for(const $ of v){const y=$.key,x=$.value;if(y.status==="aborted"||x.status==="aborted")return INVALID;(y.status==="dirty"||x.status==="dirty")&&c.dirty(),b.set(y.value,x.value)}return{status:c.value,value:b}}}}ZodMap.create=(s,l,c)=>new ZodMap({valueType:l,keyType:s,typeName:ZodFirstPartyTypeKind.ZodMap,...processCreateParams(c)});class ZodSet extends ZodType{_parse(l){const{status:c,ctx:d}=this._processInputParams(l);if(d.parsedType!==ZodParsedType.set)return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.set,received:d.parsedType}),INVALID;const f=this._def;f.minSize!==null&&d.data.size<f.minSize.value&&(addIssueToContext(d,{code:ZodIssueCode.too_small,minimum:f.minSize.value,type:"set",inclusive:!0,exact:!1,message:f.minSize.message}),c.dirty()),f.maxSize!==null&&d.data.size>f.maxSize.value&&(addIssueToContext(d,{code:ZodIssueCode.too_big,maximum:f.maxSize.value,type:"set",inclusive:!0,exact:!1,message:f.maxSize.message}),c.dirty());const g=this._def.valueType;function v($){const y=new Set;for(const x of $){if(x.status==="aborted")return INVALID;x.status==="dirty"&&c.dirty(),y.add(x.value)}return{status:c.value,value:y}}const b=[...d.data.values()].map(($,y)=>g._parse(new ParseInputLazyPath(d,$,d.path,y)));return d.common.async?Promise.all(b).then($=>v($)):v(b)}min(l,c){return new ZodSet({...this._def,minSize:{value:l,message:errorUtil.toString(c)}})}max(l,c){return new ZodSet({...this._def,maxSize:{value:l,message:errorUtil.toString(c)}})}size(l,c){return this.min(l,c).max(l,c)}nonempty(l){return this.min(1,l)}}ZodSet.create=(s,l)=>new ZodSet({valueType:s,minSize:null,maxSize:null,typeName:ZodFirstPartyTypeKind.ZodSet,...processCreateParams(l)});class ZodFunction extends ZodType{constructor(){super(...arguments),this.validate=this.implement}_parse(l){const{ctx:c}=this._processInputParams(l);if(c.parsedType!==ZodParsedType.function)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.function,received:c.parsedType}),INVALID;function d(b,$){return makeIssue({data:b,path:c.path,errorMaps:[c.common.contextualErrorMap,c.schemaErrorMap,getErrorMap(),errorMap].filter(y=>!!y),issueData:{code:ZodIssueCode.invalid_arguments,argumentsError:$}})}function f(b,$){return makeIssue({data:b,path:c.path,errorMaps:[c.common.contextualErrorMap,c.schemaErrorMap,getErrorMap(),errorMap].filter(y=>!!y),issueData:{code:ZodIssueCode.invalid_return_type,returnTypeError:$}})}const g={errorMap:c.common.contextualErrorMap},v=c.data;if(this._def.returns instanceof ZodPromise){const b=this;return OK$1(async function(...$){const y=new ZodError([]),x=await b._def.args.parseAsync($,g).catch(N=>{throw y.addIssue(d($,N)),y}),C=await Reflect.apply(v,this,x);return await b._def.returns._def.type.parseAsync(C,g).catch(N=>{throw y.addIssue(f(C,N)),y})})}else{const b=this;return OK$1(function(...$){const y=b._def.args.safeParse($,g);if(!y.success)throw new ZodError([d($,y.error)]);const x=Reflect.apply(v,this,y.data),C=b._def.returns.safeParse(x,g);if(!C.success)throw new ZodError([f(x,C.error)]);return C.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...l){return new ZodFunction({...this._def,args:ZodTuple.create(l).rest(ZodUnknown.create())})}returns(l){return new ZodFunction({...this._def,returns:l})}implement(l){return this.parse(l)}strictImplement(l){return this.parse(l)}static create(l,c,d){return new ZodFunction({args:l||ZodTuple.create([]).rest(ZodUnknown.create()),returns:c||ZodUnknown.create(),typeName:ZodFirstPartyTypeKind.ZodFunction,...processCreateParams(d)})}}class ZodLazy extends ZodType{get schema(){return this._def.getter()}_parse(l){const{ctx:c}=this._processInputParams(l);return this._def.getter()._parse({data:c.data,path:c.path,parent:c})}}ZodLazy.create=(s,l)=>new ZodLazy({getter:s,typeName:ZodFirstPartyTypeKind.ZodLazy,...processCreateParams(l)});class ZodLiteral extends ZodType{_parse(l){if(l.data!==this._def.value){const c=this._getOrReturnCtx(l);return addIssueToContext(c,{received:c.data,code:ZodIssueCode.invalid_literal,expected:this._def.value}),INVALID}return{status:"valid",value:l.data}}get value(){return this._def.value}}ZodLiteral.create=(s,l)=>new ZodLiteral({value:s,typeName:ZodFirstPartyTypeKind.ZodLiteral,...processCreateParams(l)});function createZodEnum(s,l){return new ZodEnum({values:s,typeName:ZodFirstPartyTypeKind.ZodEnum,...processCreateParams(l)})}class ZodEnum extends ZodType{constructor(){super(...arguments),_ZodEnum_cache.set(this,void 0)}_parse(l){if(typeof l.data!="string"){const c=this._getOrReturnCtx(l),d=this._def.values;return addIssueToContext(c,{expected:util.joinValues(d),received:c.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodEnum_cache)||__classPrivateFieldSet(this,_ZodEnum_cache,new Set(this._def.values)),!__classPrivateFieldGet(this,_ZodEnum_cache).has(l.data)){const c=this._getOrReturnCtx(l),d=this._def.values;return addIssueToContext(c,{received:c.data,code:ZodIssueCode.invalid_enum_value,options:d}),INVALID}return OK$1(l.data)}get options(){return this._def.values}get enum(){const l={};for(const c of this._def.values)l[c]=c;return l}get Values(){const l={};for(const c of this._def.values)l[c]=c;return l}get Enum(){const l={};for(const c of this._def.values)l[c]=c;return l}extract(l,c=this._def){return ZodEnum.create(l,{...this._def,...c})}exclude(l,c=this._def){return ZodEnum.create(this.options.filter(d=>!l.includes(d)),{...this._def,...c})}}_ZodEnum_cache=new WeakMap;ZodEnum.create=createZodEnum;class ZodNativeEnum extends ZodType{constructor(){super(...arguments),_ZodNativeEnum_cache.set(this,void 0)}_parse(l){const c=util.getValidEnumValues(this._def.values),d=this._getOrReturnCtx(l);if(d.parsedType!==ZodParsedType.string&&d.parsedType!==ZodParsedType.number){const f=util.objectValues(c);return addIssueToContext(d,{expected:util.joinValues(f),received:d.parsedType,code:ZodIssueCode.invalid_type}),INVALID}if(__classPrivateFieldGet(this,_ZodNativeEnum_cache)||__classPrivateFieldSet(this,_ZodNativeEnum_cache,new Set(util.getValidEnumValues(this._def.values))),!__classPrivateFieldGet(this,_ZodNativeEnum_cache).has(l.data)){const f=util.objectValues(c);return addIssueToContext(d,{received:d.data,code:ZodIssueCode.invalid_enum_value,options:f}),INVALID}return OK$1(l.data)}get enum(){return this._def.values}}_ZodNativeEnum_cache=new WeakMap;ZodNativeEnum.create=(s,l)=>new ZodNativeEnum({values:s,typeName:ZodFirstPartyTypeKind.ZodNativeEnum,...processCreateParams(l)});class ZodPromise extends ZodType{unwrap(){return this._def.type}_parse(l){const{ctx:c}=this._processInputParams(l);if(c.parsedType!==ZodParsedType.promise&&c.common.async===!1)return addIssueToContext(c,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.promise,received:c.parsedType}),INVALID;const d=c.parsedType===ZodParsedType.promise?c.data:Promise.resolve(c.data);return OK$1(d.then(f=>this._def.type.parseAsync(f,{path:c.path,errorMap:c.common.contextualErrorMap})))}}ZodPromise.create=(s,l)=>new ZodPromise({type:s,typeName:ZodFirstPartyTypeKind.ZodPromise,...processCreateParams(l)});class ZodEffects extends ZodType{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ZodFirstPartyTypeKind.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(l){const{status:c,ctx:d}=this._processInputParams(l),f=this._def.effect||null,g={addIssue:v=>{addIssueToContext(d,v),v.fatal?c.abort():c.dirty()},get path(){return d.path}};if(g.addIssue=g.addIssue.bind(g),f.type==="preprocess"){const v=f.transform(d.data,g);if(d.common.async)return Promise.resolve(v).then(async b=>{if(c.value==="aborted")return INVALID;const $=await this._def.schema._parseAsync({data:b,path:d.path,parent:d});return $.status==="aborted"?INVALID:$.status==="dirty"||c.value==="dirty"?DIRTY($.value):$});{if(c.value==="aborted")return INVALID;const b=this._def.schema._parseSync({data:v,path:d.path,parent:d});return b.status==="aborted"?INVALID:b.status==="dirty"||c.value==="dirty"?DIRTY(b.value):b}}if(f.type==="refinement"){const v=b=>{const $=f.refinement(b,g);if(d.common.async)return Promise.resolve($);if($ instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return b};if(d.common.async===!1){const b=this._def.schema._parseSync({data:d.data,path:d.path,parent:d});return b.status==="aborted"?INVALID:(b.status==="dirty"&&c.dirty(),v(b.value),{status:c.value,value:b.value})}else return this._def.schema._parseAsync({data:d.data,path:d.path,parent:d}).then(b=>b.status==="aborted"?INVALID:(b.status==="dirty"&&c.dirty(),v(b.value).then(()=>({status:c.value,value:b.value}))))}if(f.type==="transform")if(d.common.async===!1){const v=this._def.schema._parseSync({data:d.data,path:d.path,parent:d});if(!isValid(v))return v;const b=f.transform(v.value,g);if(b instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:c.value,value:b}}else return this._def.schema._parseAsync({data:d.data,path:d.path,parent:d}).then(v=>isValid(v)?Promise.resolve(f.transform(v.value,g)).then(b=>({status:c.value,value:b})):v);util.assertNever(f)}}ZodEffects.create=(s,l,c)=>new ZodEffects({schema:s,typeName:ZodFirstPartyTypeKind.ZodEffects,effect:l,...processCreateParams(c)});ZodEffects.createWithPreprocess=(s,l,c)=>new ZodEffects({schema:l,effect:{type:"preprocess",transform:s},typeName:ZodFirstPartyTypeKind.ZodEffects,...processCreateParams(c)});class ZodOptional extends ZodType{_parse(l){return this._getType(l)===ZodParsedType.undefined?OK$1(void 0):this._def.innerType._parse(l)}unwrap(){return this._def.innerType}}ZodOptional.create=(s,l)=>new ZodOptional({innerType:s,typeName:ZodFirstPartyTypeKind.ZodOptional,...processCreateParams(l)});class ZodNullable extends ZodType{_parse(l){return this._getType(l)===ZodParsedType.null?OK$1(null):this._def.innerType._parse(l)}unwrap(){return this._def.innerType}}ZodNullable.create=(s,l)=>new ZodNullable({innerType:s,typeName:ZodFirstPartyTypeKind.ZodNullable,...processCreateParams(l)});class ZodDefault extends ZodType{_parse(l){const{ctx:c}=this._processInputParams(l);let d=c.data;return c.parsedType===ZodParsedType.undefined&&(d=this._def.defaultValue()),this._def.innerType._parse({data:d,path:c.path,parent:c})}removeDefault(){return this._def.innerType}}ZodDefault.create=(s,l)=>new ZodDefault({innerType:s,typeName:ZodFirstPartyTypeKind.ZodDefault,defaultValue:typeof l.default=="function"?l.default:()=>l.default,...processCreateParams(l)});class ZodCatch extends ZodType{_parse(l){const{ctx:c}=this._processInputParams(l),d={...c,common:{...c.common,issues:[]}},f=this._def.innerType._parse({data:d.data,path:d.path,parent:{...d}});return isAsync(f)?f.then(g=>({status:"valid",value:g.status==="valid"?g.value:this._def.catchValue({get error(){return new ZodError(d.common.issues)},input:d.data})})):{status:"valid",value:f.status==="valid"?f.value:this._def.catchValue({get error(){return new ZodError(d.common.issues)},input:d.data})}}removeCatch(){return this._def.innerType}}ZodCatch.create=(s,l)=>new ZodCatch({innerType:s,typeName:ZodFirstPartyTypeKind.ZodCatch,catchValue:typeof l.catch=="function"?l.catch:()=>l.catch,...processCreateParams(l)});class ZodNaN extends ZodType{_parse(l){if(this._getType(l)!==ZodParsedType.nan){const d=this._getOrReturnCtx(l);return addIssueToContext(d,{code:ZodIssueCode.invalid_type,expected:ZodParsedType.nan,received:d.parsedType}),INVALID}return{status:"valid",value:l.data}}}ZodNaN.create=s=>new ZodNaN({typeName:ZodFirstPartyTypeKind.ZodNaN,...processCreateParams(s)});const BRAND=Symbol("zod_brand");class ZodBranded extends ZodType{_parse(l){const{ctx:c}=this._processInputParams(l),d=c.data;return this._def.type._parse({data:d,path:c.path,parent:c})}unwrap(){return this._def.type}}class ZodPipeline extends ZodType{_parse(l){const{status:c,ctx:d}=this._processInputParams(l);if(d.common.async)return(async()=>{const g=await this._def.in._parseAsync({data:d.data,path:d.path,parent:d});return g.status==="aborted"?INVALID:g.status==="dirty"?(c.dirty(),DIRTY(g.value)):this._def.out._parseAsync({data:g.value,path:d.path,parent:d})})();{const f=this._def.in._parseSync({data:d.data,path:d.path,parent:d});return f.status==="aborted"?INVALID:f.status==="dirty"?(c.dirty(),{status:"dirty",value:f.value}):this._def.out._parseSync({data:f.value,path:d.path,parent:d})}}static create(l,c){return new ZodPipeline({in:l,out:c,typeName:ZodFirstPartyTypeKind.ZodPipeline})}}class ZodReadonly extends ZodType{_parse(l){const c=this._def.innerType._parse(l),d=f=>(isValid(f)&&(f.value=Object.freeze(f.value)),f);return isAsync(c)?c.then(f=>d(f)):d(c)}unwrap(){return this._def.innerType}}ZodReadonly.create=(s,l)=>new ZodReadonly({innerType:s,typeName:ZodFirstPartyTypeKind.ZodReadonly,...processCreateParams(l)});function custom(s,l={},c){return s?ZodAny.create().superRefine((d,f)=>{var g,v;if(!s(d)){const b=typeof l=="function"?l(d):typeof l=="string"?{message:l}:l,$=(v=(g=b.fatal)!==null&&g!==void 0?g:c)!==null&&v!==void 0?v:!0,y=typeof b=="string"?{message:b}:b;f.addIssue({code:"custom",...y,fatal:$})}}):ZodAny.create()}const late={object:ZodObject.lazycreate};var ZodFirstPartyTypeKind;(function(s){s.ZodString="ZodString",s.ZodNumber="ZodNumber",s.ZodNaN="ZodNaN",s.ZodBigInt="ZodBigInt",s.ZodBoolean="ZodBoolean",s.ZodDate="ZodDate",s.ZodSymbol="ZodSymbol",s.ZodUndefined="ZodUndefined",s.ZodNull="ZodNull",s.ZodAny="ZodAny",s.ZodUnknown="ZodUnknown",s.ZodNever="ZodNever",s.ZodVoid="ZodVoid",s.ZodArray="ZodArray",s.ZodObject="ZodObject",s.ZodUnion="ZodUnion",s.ZodDiscriminatedUnion="ZodDiscriminatedUnion",s.ZodIntersection="ZodIntersection",s.ZodTuple="ZodTuple",s.ZodRecord="ZodRecord",s.ZodMap="ZodMap",s.ZodSet="ZodSet",s.ZodFunction="ZodFunction",s.ZodLazy="ZodLazy",s.ZodLiteral="ZodLiteral",s.ZodEnum="ZodEnum",s.ZodEffects="ZodEffects",s.ZodNativeEnum="ZodNativeEnum",s.ZodOptional="ZodOptional",s.ZodNullable="ZodNullable",s.ZodDefault="ZodDefault",s.ZodCatch="ZodCatch",s.ZodPromise="ZodPromise",s.ZodBranded="ZodBranded",s.ZodPipeline="ZodPipeline",s.ZodReadonly="ZodReadonly"})(ZodFirstPartyTypeKind||(ZodFirstPartyTypeKind={}));const instanceOfType=(s,l={message:`Input not instance of ${s.name}`})=>custom(c=>c instanceof s,l),stringType=ZodString.create,numberType=ZodNumber.create,nanType=ZodNaN.create,bigIntType=ZodBigInt.create,booleanType=ZodBoolean.create,dateType=ZodDate.create,symbolType=ZodSymbol.create,undefinedType=ZodUndefined.create,nullType=ZodNull.create,anyType=ZodAny.create,unknownType=ZodUnknown.create,neverType=ZodNever.create,voidType=ZodVoid.create,arrayType=ZodArray.create,objectType=ZodObject.create,strictObjectType=ZodObject.strictCreate,unionType=ZodUnion.create,discriminatedUnionType=ZodDiscriminatedUnion.create,intersectionType=ZodIntersection.create,tupleType=ZodTuple.create,recordType=ZodRecord.create,mapType=ZodMap.create,setType=ZodSet.create,functionType=ZodFunction.create,lazyType=ZodLazy.create,literalType=ZodLiteral.create,enumType=ZodEnum.create,nativeEnumType=ZodNativeEnum.create,promiseType=ZodPromise.create,effectsType=ZodEffects.create,optionalType=ZodOptional.create,nullableType=ZodNullable.create,preprocessType=ZodEffects.createWithPreprocess,pipelineType=ZodPipeline.create,ostring=()=>stringType().optional(),onumber=()=>numberType().optional(),oboolean=()=>booleanType().optional(),coerce={string:s=>ZodString.create({...s,coerce:!0}),number:s=>ZodNumber.create({...s,coerce:!0}),boolean:s=>ZodBoolean.create({...s,coerce:!0}),bigint:s=>ZodBigInt.create({...s,coerce:!0}),date:s=>ZodDate.create({...s,coerce:!0})},NEVER=INVALID;var z$1=Object.freeze({__proto__:null,defaultErrorMap:errorMap,setErrorMap,getErrorMap,makeIssue,EMPTY_PATH,addIssueToContext,ParseStatus,INVALID,DIRTY,OK:OK$1,isAborted,isDirty,isValid,isAsync,get util(){return util},get objectUtil(){return objectUtil},ZodParsedType,getParsedType,ZodType,datetimeRegex,ZodString,ZodNumber,ZodBigInt,ZodBoolean,ZodDate,ZodSymbol,ZodUndefined,ZodNull,ZodAny,ZodUnknown,ZodNever,ZodVoid,ZodArray,ZodObject,ZodUnion,ZodDiscriminatedUnion,ZodIntersection,ZodTuple,ZodRecord,ZodMap,ZodSet,ZodFunction,ZodLazy,ZodLiteral,ZodEnum,ZodNativeEnum,ZodPromise,ZodEffects,ZodTransformer:ZodEffects,ZodOptional,ZodNullable,ZodDefault,ZodCatch,ZodNaN,BRAND,ZodBranded,ZodPipeline,ZodReadonly,custom,Schema:ZodType,ZodSchema:ZodType,late,get ZodFirstPartyTypeKind(){return ZodFirstPartyTypeKind},coerce,any:anyType,array:arrayType,bigint:bigIntType,boolean:booleanType,date:dateType,discriminatedUnion:discriminatedUnionType,effect:effectsType,enum:enumType,function:functionType,instanceof:instanceOfType,intersection:intersectionType,lazy:lazyType,literal:literalType,map:mapType,nan:nanType,nativeEnum:nativeEnumType,never:neverType,null:nullType,nullable:nullableType,number:numberType,object:objectType,oboolean,onumber,optional:optionalType,ostring,pipeline:pipelineType,preprocess:preprocessType,promise:promiseType,record:recordType,set:setType,strictObject:strictObjectType,string:stringType,symbol:symbolType,transformer:effectsType,tuple:tupleType,undefined:undefinedType,union:unionType,unknown:unknownType,void:voidType,NEVER,ZodIssueCode,quotelessJson,ZodError}),__create=Object.create,__defProp=Object.defineProperty,__getOwnPropDesc=Object.getOwnPropertyDescriptor,__getOwnPropNames=Object.getOwnPropertyNames,__getProtoOf=Object.getPrototypeOf,__hasOwnProp=Object.prototype.hasOwnProperty,__commonJS=(s,l)=>function(){return l||(0,s[__getOwnPropNames(s)[0]])((l={exports:{}}).exports,l),l.exports},__copyProps=(s,l,c,d)=>{if(l&&typeof l=="object"||typeof l=="function")for(let f of __getOwnPropNames(l))!__hasOwnProp.call(s,f)&&f!==c&&__defProp(s,f,{get:()=>l[f],enumerable:!(d=__getOwnPropDesc(l,f))||d.enumerable});return s},__toESM=(s,l,c)=>(c=s!=null?__create(__getProtoOf(s)):{},__copyProps(!s||!s.__esModule?__defProp(c,"default",{value:s,enumerable:!0}):c,s)),require_lodash=__commonJS({"../../node_modules/lodash/lodash.js"(s,l){(function(){var c,d="4.17.21",f=200,g="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",v="Expected a function",b="Invalid `variable` option passed into `_.template`",$="__lodash_hash_undefined__",y=500,x="__lodash_placeholder__",C=1,E=2,N=4,W=1,q=2,Y=1,re=2,se=4,de=8,he=16,ge=32,Se=64,Ae=128,Re=256,Be=512,Ke=30,Lr="...",_y=800,by=16,yy=1,my=2,$t=3,K$=1/0,Y$=9007199254740991,W$=17976931348623157e292,U$=NaN,hy=4294967295,G$=hy-1,ky=hy>>>1,$y=[["ary",Ae],["bind",Y],["bindKey",re],["curry",de],["curryRight",he],["flip",Be],["partial",ge],["partialRight",Se],["rearg",Re]],rS="[object Arguments]",lS="[object Array]",bS="[object AsyncFunction]",IS="[object Boolean]",BS="[object Date]",MS="[object DOMException]",zS="[object Error]",LS="[object Function]",nS="[object GeneratorFunction]",Z$="[object Map]",dS="[object Number]",ES="[object Null]",wy="[object Object]",tS="[object Promise]",yS="[object Proxy]",Q$="[object RegExp]",eS="[object Set]",cS="[object String]",wS="[object Symbol]",xS="[object Undefined]",OS="[object WeakMap]",mS="[object WeakSet]",pS="[object ArrayBuffer]",fC="[object DataView]",US="[object Float32Array]",Iye="[object Float64Array]",$ye="[object Int8Array]",Rye="[object Int16Array]",Uye="[object Int32Array]",DS="[object Uint8Array]",HS="[object Uint8ClampedArray]",Aye="[object Uint16Array]",Tye="[object Uint32Array]",jye=/\b__p \+= '';/g,sS=/\b(__p \+=) '' \+/g,TS=/(__e\(.*?\)|\b__t\)) \+\n'';/g,AS=/&(?:amp|lt|gt|quot|#39);/g,jS=/[&<>"']/g,KS=RegExp(AS.source),Bye=RegExp(jS.source),Kye=/<%-([\s\S]+?)%>/g,swe=/<%([\s\S]+?)%>/g,Cwe=/<%=([\s\S]+?)%>/g,ywe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,hwe=/^\w*$/,Vwe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Owe=/[\\^$.*+?()[\]{}|]/g,VS=RegExp(Owe.source),Zye=/^\s+/,twe=/\s/,_we=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Hwe=/\{\n\/\* \[wrapped with (.+)\] \*/,Pwe=/,? & /,Jwe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nwe=/[()=,{}\[\]\/\s]/,i2e=/\\(\\)?/g,Kwe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qwe=/\w*$/,e2e=/^[-+]0x[0-9a-f]+$/i,t2e=/^0b[01]+$/i,Dye=/^\[object .+?Constructor\]$/,CS=/^0o[0-7]+$/i,Sye=/^(?:0|[1-9]\d*)$/,Mye=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,rwe=/($^)/,awe=/['\n\r\u2028\u2029\\]/g,$we="\\ud800-\\udfff",Mwe="\\u0300-\\u036f",Awe="\\ufe20-\\ufe2f",l2e="\\u20d0-\\u20ff",pwe=Mwe+Awe+l2e,v2e="\\u2700-\\u27bf",u2e="a-z\\xdf-\\xf6\\xf8-\\xff",Ywe="\\xac\\xb1\\xd7\\xf7",F2e="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Bwe="\\u2000-\\u206f",Uwe=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",x2e="A-Z\\xc0-\\xd6\\xd8-\\xde",i_e="\\ufe0e\\ufe0f",o_e=Ywe+F2e+Bwe+Uwe,z2e="[']",y_e="["+$we+"]",a_e="["+o_e+"]",j2e="["+pwe+"]",qye="\\d+",Z2e="["+v2e+"]",Yye="["+u2e+"]",V2e="[^"+$we+o_e+qye+v2e+u2e+x2e+"]",o2e="\\ud83c[\\udffb-\\udfff]",Lwe="(?:"+j2e+"|"+o2e+")",A2e="[^"+$we+"]",S2e="(?:\\ud83c[\\udde6-\\uddff]){2}",I2e="[\\ud800-\\udbff][\\udc00-\\udfff]",Wwe="["+x2e+"]",H2e="\\u200d",Zwe="(?:"+Yye+"|"+V2e+")",r2e="(?:"+Wwe+"|"+V2e+")",M2e="(?:"+z2e+"(?:d|ll|m|re|s|t|ve))?",c2e="(?:"+z2e+"(?:D|LL|M|RE|S|T|VE))?",Cy=Lwe+"?",Ce="["+i_e+"]?",Le="(?:"+H2e+"(?:"+[A2e,S2e,I2e].join("|")+")"+Ce+Cy+")*",gy="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",X$="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",aS=Ce+Cy+Le,_S="(?:"+[Z2e,S2e,I2e].join("|")+")"+aS,yye="(?:"+[A2e+j2e+"?",j2e,S2e,I2e,y_e].join("|")+")",xye=RegExp(z2e,"g"),Oye=RegExp(j2e,"g"),Eye=RegExp(o2e+"(?="+o2e+")|"+yye+aS,"g"),Gye=RegExp([Wwe+"?"+Yye+"+"+M2e+"(?="+[a_e,Wwe,"$"].join("|")+")",r2e+"+"+c2e+"(?="+[a_e,Wwe+Zwe,"$"].join("|")+")",Wwe+"?"+Zwe+"+"+M2e,Wwe+"+"+c2e,X$,gy,qye,_S].join("|"),"g"),cwe=RegExp("["+H2e+$we+pwe+i_e+"]"),FS=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,RS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Lye=-1,Fye={};Fye[US]=Fye[Iye]=Fye[$ye]=Fye[Rye]=Fye[Uye]=Fye[DS]=Fye[HS]=Fye[Aye]=Fye[Tye]=!0,Fye[rS]=Fye[lS]=Fye[pS]=Fye[IS]=Fye[fC]=Fye[BS]=Fye[zS]=Fye[LS]=Fye[Z$]=Fye[dS]=Fye[wy]=Fye[Q$]=Fye[eS]=Fye[cS]=Fye[OS]=!1;var dwe={};dwe[rS]=dwe[lS]=dwe[pS]=dwe[fC]=dwe[IS]=dwe[BS]=dwe[US]=dwe[Iye]=dwe[$ye]=dwe[Rye]=dwe[Uye]=dwe[Z$]=dwe[dS]=dwe[wy]=dwe[Q$]=dwe[eS]=dwe[cS]=dwe[wS]=dwe[DS]=dwe[HS]=dwe[Aye]=dwe[Tye]=!0,dwe[zS]=dwe[LS]=dwe[OS]=!1;var U2e={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},D$e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},L$e={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},F$e={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},z$e=parseFloat,r$e=parseInt,n$e=typeof global=="object"&&global&&global.Object===Object&&global,i$e=typeof self=="object"&&self&&self.Object===Object&&self,Fwe=n$e||i$e||Function("return this")(),E_e=typeof s=="object"&&s&&!s.nodeType&&s,X2e=E_e&&typeof l=="object"&&l&&!l.nodeType&&l,o$e=X2e&&X2e.exports===E_e,F_e=o$e&&n$e.process,d2e=function(){try{var NS=X2e&&X2e.require&&X2e.require("util").types;return NS||F_e&&F_e.binding&&F_e.binding("util")}catch{}}(),a$e=d2e&&d2e.isArrayBuffer,j$e=d2e&&d2e.isDate,s$e=d2e&&d2e.isMap,l$e=d2e&&d2e.isRegExp,u$e=d2e&&d2e.isSet,V$e=d2e&&d2e.isTypedArray;function f2e(NS,bye,qS){switch(qS.length){case 0:return NS.call(bye);case 1:return NS.call(bye,qS[0]);case 2:return NS.call(bye,qS[0],qS[1]);case 3:return NS.call(bye,qS[0],qS[1],qS[2])}return NS.apply(bye,qS)}function H$e(NS,bye,qS,Vye){for(var iwe=-1,Swe=NS==null?0:NS.length;++iwe<Swe;){var qwe=NS[iwe];bye(Vye,qwe,qS(qwe),NS)}return Vye}function p2e(NS,bye){for(var qS=-1,Vye=NS==null?0:NS.length;++qS<Vye&&bye(NS[qS],qS,NS)!==!1;);return NS}function z_e(NS,bye){for(var qS=NS==null?0:NS.length;qS--&&bye(NS[qS],qS,NS)!==!1;);return NS}function U$e(NS,bye){for(var qS=-1,Vye=NS==null?0:NS.length;++qS<Vye;)if(!bye(NS[qS],qS,NS))return!1;return!0}function J2e(NS,bye){for(var qS=-1,Vye=NS==null?0:NS.length,iwe=0,Swe=[];++qS<Vye;){var qwe=NS[qS];bye(qwe,qS,NS)&&(Swe[iwe++]=qwe)}return Swe}function Hye(NS,bye){var qS=NS==null?0:NS.length;return!!qS&&Q2e(NS,bye,0)>-1}function j_e(NS,bye,qS){for(var Vye=-1,iwe=NS==null?0:NS.length;++Vye<iwe;)if(qS(bye,NS[Vye]))return!0;return!1}function kwe(NS,bye){for(var qS=-1,Vye=NS==null?0:NS.length,iwe=Array(Vye);++qS<Vye;)iwe[qS]=bye(NS[qS],qS,NS);return iwe}function C2e(NS,bye){for(var qS=-1,Vye=bye.length,iwe=NS.length;++qS<Vye;)NS[iwe+qS]=bye[qS];return NS}function y2e(NS,bye,qS,Vye){var iwe=-1,Swe=NS==null?0:NS.length;for(Vye&&Swe&&(qS=NS[++iwe]);++iwe<Swe;)qS=bye(qS,NS[iwe],iwe,NS);return qS}function W$e(NS,bye,qS,Vye){var iwe=NS==null?0:NS.length;for(Vye&&iwe&&(qS=NS[--iwe]);iwe--;)qS=bye(qS,NS[iwe],iwe,NS);return qS}function V_e(NS,bye){for(var qS=-1,Vye=NS==null?0:NS.length;++qS<Vye;)if(bye(NS[qS],qS,NS))return!0;return!1}var c$e=H_e("length");function d$e(NS){return NS.split("")}function q$e(NS){return NS.match(Jwe)||[]}function f$e(NS,bye,qS){var Vye;return qS(NS,function(iwe,Swe,qwe){if(bye(iwe,Swe,qwe))return Vye=Swe,!1}),Vye}function s_e(NS,bye,qS,Vye){for(var iwe=NS.length,Swe=qS+(Vye?1:-1);Vye?Swe--:++Swe<iwe;)if(bye(NS[Swe],Swe,NS))return Swe;return-1}function Q2e(NS,bye,qS){return bye===bye?j3e(NS,bye,qS):s_e(NS,h$e,qS)}function p$e(NS,bye,qS,Vye){for(var iwe=qS-1,Swe=NS.length;++iwe<Swe;)if(Vye(NS[iwe],bye))return iwe;return-1}function h$e(NS){return NS!==NS}function m$e(NS,bye){var qS=NS==null?0:NS.length;return qS?b_e(NS,bye)/qS:U$}function H_e(NS){return function(bye){return bye==null?c:bye[NS]}}function U_e(NS){return function(bye){return NS==null?c:NS[bye]}}function g$e(NS,bye,qS,Vye,iwe){return iwe(NS,function(Swe,qwe,Iwe){qS=Vye?(Vye=!1,Swe):bye(qS,Swe,qwe,Iwe)}),qS}function Pxe(NS,bye){var qS=NS.length;for(NS.sort(bye);qS--;)NS[qS]=NS[qS].value;return NS}function b_e(NS,bye){for(var qS,Vye=-1,iwe=NS.length;++Vye<iwe;){var Swe=bye(NS[Vye]);Swe!==c&&(qS=qS===c?Swe:qS+Swe)}return qS}function W_e(NS,bye){for(var qS=-1,Vye=Array(NS);++qS<NS;)Vye[qS]=bye(qS);return Vye}function Ie(NS,bye){return kwe(bye,function(qS){return[qS,NS[qS]]})}function An(NS){return NS&&NS.slice(0,FSe(NS)+1).replace(Zye,"")}function q$(NS){return function(bye){return NS(bye)}}function iS(NS,bye){return kwe(bye,function(qS){return NS[qS]})}function hS(NS,bye){return NS.has(bye)}function kS(NS,bye){for(var qS=-1,Vye=NS.length;++qS<Vye&&Q2e(bye,NS[qS],0)>-1;);return qS}function pC(NS,bye){for(var qS=NS.length;qS--&&Q2e(bye,NS[qS],0)>-1;);return qS}function kye(NS,bye){for(var qS=NS.length,Vye=0;qS--;)NS[qS]===bye&&++Vye;return Vye}var zye=U_e(U2e),Nye=U_e(D$e);function Xye(NS){return"\\"+F$e[NS]}function xwe(NS,bye){return NS==null?c:NS[bye]}function bwe(NS){return cwe.test(NS)}function GS(NS){return FS.test(NS)}function nwe(NS){for(var bye,qS=[];!(bye=NS.next()).done;)qS.push(bye.value);return qS}function gwe(NS){var bye=-1,qS=Array(NS.size);return NS.forEach(function(Vye,iwe){qS[++bye]=[iwe,Vye]}),qS}function e_e(NS,bye){return function(qS){return NS(bye(qS))}}function W2e(NS,bye){for(var qS=-1,Vye=NS.length,iwe=0,Swe=[];++qS<Vye;){var qwe=NS[qS];(qwe===bye||qwe===x)&&(NS[qS]=x,Swe[iwe++]=qS)}return Swe}function G$e(NS){var bye=-1,qS=Array(NS.size);return NS.forEach(function(Vye){qS[++bye]=Vye}),qS}function z3e(NS){var bye=-1,qS=Array(NS.size);return NS.forEach(function(Vye){qS[++bye]=[Vye,Vye]}),qS}function j3e(NS,bye,qS){for(var Vye=qS-1,iwe=NS.length;++Vye<iwe;)if(NS[Vye]===bye)return Vye;return-1}function V3e(NS,bye,qS){for(var Vye=qS+1;Vye--;)if(NS[Vye]===bye)return Vye;return Vye}function q_e(NS){return bwe(NS)?U3e(NS):c$e(NS)}function q2e(NS){return bwe(NS)?W3e(NS):d$e(NS)}function FSe(NS){for(var bye=NS.length;bye--&&twe.test(NS.charAt(bye)););return bye}var H3e=U_e(L$e);function U3e(NS){for(var bye=Eye.lastIndex=0;Eye.test(NS);)++bye;return bye}function W3e(NS){return NS.match(Eye)||[]}function q3e(NS){return NS.match(Gye)||[]}var G3e=function NS(bye){bye=bye==null?Fwe:w_e.defaults(Fwe.Object(),bye,w_e.pick(Fwe,RS));var qS=bye.Array,Vye=bye.Date,iwe=bye.Error,Swe=bye.Function,qwe=bye.Math,Iwe=bye.Object,Rxe=bye.RegExp,K3e=bye.String,N2e=bye.TypeError,K$e=qS.prototype,Y3e=Swe.prototype,G_e=Iwe.prototype,Y$e=bye["__core-js_shared__"],Z$e=Y3e.toString,Ewe=G_e.hasOwnProperty,Z3e=0,zSe=function(){var G=/[^.]+$/.exec(Y$e&&Y$e.keys&&Y$e.keys.IE_PROTO||"");return G?"Symbol(src)_1."+G:""}(),X$e=G_e.toString,X3e=Z$e.call(Iwe),J3e=Fwe._,Q3e=Rxe("^"+Z$e.call(Ewe).replace(Owe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),J$e=o$e?bye.Buffer:c,__e=bye.Symbol,Q$e=bye.Uint8Array,jSe=J$e?J$e.allocUnsafe:c,exe=e_e(Iwe.getPrototypeOf,Iwe),VSe=Iwe.create,HSe=G_e.propertyIsEnumerable,txe=K$e.splice,USe=__e?__e.isConcatSpreadable:c,v$e=__e?__e.iterator:c,O_e=__e?__e.toStringTag:c,rxe=function(){try{var G=P_e(Iwe,"defineProperty");return G({},"",{}),G}catch{}}(),eTe=bye.clearTimeout!==Fwe.clearTimeout&&bye.clearTimeout,tTe=Vye&&Vye.now!==Fwe.Date.now&&Vye.now,rTe=bye.setTimeout!==Fwe.setTimeout&&bye.setTimeout,nxe=qwe.ceil,ixe=qwe.floor,Bxe=Iwe.getOwnPropertySymbols,nTe=J$e?J$e.isBuffer:c,WSe=bye.isFinite,iTe=K$e.join,oTe=e_e(Iwe.keys,Iwe),Gwe=qwe.max,a2e=qwe.min,aTe=Vye.now,sTe=bye.parseInt,qSe=qwe.random,lTe=K$e.reverse,Dxe=P_e(bye,"DataView"),y$e=P_e(bye,"Map"),Lxe=P_e(bye,"Promise"),K_e=P_e(bye,"Set"),b$e=P_e(bye,"WeakMap"),w$e=P_e(Iwe,"create"),oxe=b$e&&new b$e,Y_e={},uTe=R_e(Dxe),cTe=R_e(y$e),dTe=R_e(Lxe),fTe=R_e(K_e),pTe=R_e(b$e),axe=__e?__e.prototype:c,_$e=axe?axe.valueOf:c,GSe=axe?axe.toString:c;function oS(G){if(Dwe(G)&&!owe(G)&&!(G instanceof vwe)){if(G instanceof P2e)return G;if(Ewe.call(G,"__wrapped__"))return KCe(G)}return new P2e(G)}var Z_e=function(){function G(){}return function(ue){if(!Rwe(ue))return{};if(VSe)return VSe(ue);G.prototype=ue;var Te=new G;return G.prototype=c,Te}}();function sxe(){}function P2e(G,ue){this.__wrapped__=G,this.__actions__=[],this.__chain__=!!ue,this.__index__=0,this.__values__=c}oS.templateSettings={escape:Kye,evaluate:swe,interpolate:Cwe,variable:"",imports:{_:oS}},oS.prototype=sxe.prototype,oS.prototype.constructor=oS,P2e.prototype=Z_e(sxe.prototype),P2e.prototype.constructor=P2e;function vwe(G){this.__wrapped__=G,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=hy,this.__views__=[]}function hTe(){var G=new vwe(this.__wrapped__);return G.__actions__=b2e(this.__actions__),G.__dir__=this.__dir__,G.__filtered__=this.__filtered__,G.__iteratees__=b2e(this.__iteratees__),G.__takeCount__=this.__takeCount__,G.__views__=b2e(this.__views__),G}function mTe(){if(this.__filtered__){var G=new vwe(this);G.__dir__=-1,G.__filtered__=!0}else G=this.clone(),G.__dir__*=-1;return G}function gTe(){var G=this.__wrapped__.value(),ue=this.__dir__,Te=owe(G),Pa=ue<0,J$=Te?G.length:0,uS=Eke(0,J$,this.__views__),gS=uS.start,$S=uS.end,PS=$S-gS,wye=Pa?$S:gS-1,_ye=this.__iteratees__,Cye=_ye.length,Pye=0,Wye=a2e(PS,this.__takeCount__);if(!Te||!Pa&&J$==PS&&Wye==PS)return vCe(G,this.__actions__);var Qye=[];e:for(;PS--&&Pye<Wye;){wye+=ue;for(var uwe=-1,ewe=G[wye];++uwe<Cye;){var mwe=_ye[uwe],wwe=mwe.iteratee,E2e=mwe.type,g2e=wwe(ewe);if(E2e==my)ewe=g2e;else if(!g2e){if(E2e==yy)continue e;break e}}Qye[Pye++]=ewe}return Qye}vwe.prototype=Z_e(sxe.prototype),vwe.prototype.constructor=vwe;function A_e(G){var ue=-1,Te=G==null?0:G.length;for(this.clear();++ue<Te;){var Pa=G[ue];this.set(Pa[0],Pa[1])}}function vTe(){this.__data__=w$e?w$e(null):{},this.size=0}function yTe(G){var ue=this.has(G)&&delete this.__data__[G];return this.size-=ue?1:0,ue}function bTe(G){var ue=this.__data__;if(w$e){var Te=ue[G];return Te===$?c:Te}return Ewe.call(ue,G)?ue[G]:c}function wTe(G){var ue=this.__data__;return w$e?ue[G]!==c:Ewe.call(ue,G)}function _Te(G,ue){var Te=this.__data__;return this.size+=this.has(G)?0:1,Te[G]=w$e&&ue===c?$:ue,this}A_e.prototype.clear=vTe,A_e.prototype.delete=yTe,A_e.prototype.get=bTe,A_e.prototype.has=wTe,A_e.prototype.set=_Te;function l_e(G){var ue=-1,Te=G==null?0:G.length;for(this.clear();++ue<Te;){var Pa=G[ue];this.set(Pa[0],Pa[1])}}function $Te(){this.__data__=[],this.size=0}function xTe(G){var ue=this.__data__,Te=lxe(ue,G);if(Te<0)return!1;var Pa=ue.length-1;return Te==Pa?ue.pop():txe.call(ue,Te,1),--this.size,!0}function STe(G){var ue=this.__data__,Te=lxe(ue,G);return Te<0?c:ue[Te][1]}function CTe(G){return lxe(this.__data__,G)>-1}function TTe(G,ue){var Te=this.__data__,Pa=lxe(Te,G);return Pa<0?(++this.size,Te.push([G,ue])):Te[Pa][1]=ue,this}l_e.prototype.clear=$Te,l_e.prototype.delete=xTe,l_e.prototype.get=STe,l_e.prototype.has=CTe,l_e.prototype.set=TTe;function u_e(G){var ue=-1,Te=G==null?0:G.length;for(this.clear();++ue<Te;){var Pa=G[ue];this.set(Pa[0],Pa[1])}}function kTe(){this.size=0,this.__data__={hash:new A_e,map:new(y$e||l_e),string:new A_e}}function ETe(G){var ue=wxe(this,G).delete(G);return this.size-=ue?1:0,ue}function OTe(G){return wxe(this,G).get(G)}function ATe(G){return wxe(this,G).has(G)}function ITe(G,ue){var Te=wxe(this,G),Pa=Te.size;return Te.set(G,ue),this.size+=Te.size==Pa?0:1,this}u_e.prototype.clear=kTe,u_e.prototype.delete=ETe,u_e.prototype.get=OTe,u_e.prototype.has=ATe,u_e.prototype.set=ITe;function I_e(G){var ue=-1,Te=G==null?0:G.length;for(this.__data__=new u_e;++ue<Te;)this.add(G[ue])}function MTe(G){return this.__data__.set(G,$),this}function NTe(G){return this.__data__.has(G)}I_e.prototype.add=I_e.prototype.push=MTe,I_e.prototype.has=NTe;function G2e(G){var ue=this.__data__=new l_e(G);this.size=ue.size}function PTe(){this.__data__=new l_e,this.size=0}function RTe(G){var ue=this.__data__,Te=ue.delete(G);return this.size=ue.size,Te}function BTe(G){return this.__data__.get(G)}function DTe(G){return this.__data__.has(G)}function LTe(G,ue){var Te=this.__data__;if(Te instanceof l_e){var Pa=Te.__data__;if(!y$e||Pa.length<f-1)return Pa.push([G,ue]),this.size=++Te.size,this;Te=this.__data__=new u_e(Pa)}return Te.set(G,ue),this.size=Te.size,this}G2e.prototype.clear=PTe,G2e.prototype.delete=RTe,G2e.prototype.get=BTe,G2e.prototype.has=DTe,G2e.prototype.set=LTe;function KSe(G,ue){var Te=owe(G),Pa=!Te&&B_e(G),J$=!Te&&!Pa&&T_e(G),uS=!Te&&!Pa&&!J$&&e$e(G),gS=Te||Pa||J$||uS,$S=gS?W_e(G.length,K3e):[],PS=$S.length;for(var wye in G)(ue||Ewe.call(G,wye))&&!(gS&&(wye=="length"||J$&&(wye=="offset"||wye=="parent")||uS&&(wye=="buffer"||wye=="byteLength"||wye=="byteOffset")||p_e(wye,PS)))&&$S.push(wye);return $S}function YSe(G){var ue=G.length;return ue?G[Yxe(0,ue-1)]:c}function FTe(G,ue){return _xe(b2e(G),M_e(ue,0,G.length))}function zTe(G){return _xe(b2e(G))}function Fxe(G,ue,Te){(Te!==c&&!K2e(G[ue],Te)||Te===c&&!(ue in G))&&c_e(G,ue,Te)}function $$e(G,ue,Te){var Pa=G[ue];(!(Ewe.call(G,ue)&&K2e(Pa,Te))||Te===c&&!(ue in G))&&c_e(G,ue,Te)}function lxe(G,ue){for(var Te=G.length;Te--;)if(K2e(G[Te][0],ue))return Te;return-1}function jTe(G,ue,Te,Pa){return $_e(G,function(J$,uS,gS){ue(Pa,J$,Te(J$),gS)}),Pa}function ZSe(G,ue){return G&&r_e(ue,Xwe(ue),G)}function VTe(G,ue){return G&&r_e(ue,_2e(ue),G)}function c_e(G,ue,Te){ue=="__proto__"&&rxe?rxe(G,ue,{configurable:!0,enumerable:!0,value:Te,writable:!0}):G[ue]=Te}function zxe(G,ue){for(var Te=-1,Pa=ue.length,J$=qS(Pa),uS=G==null;++Te<Pa;)J$[Te]=uS?c:wSe(G,ue[Te]);return J$}function M_e(G,ue,Te){return G===G&&(Te!==c&&(G=G<=Te?G:Te),ue!==c&&(G=G>=ue?G:ue)),G}function R2e(G,ue,Te,Pa,J$,uS){var gS,$S=ue&C,PS=ue&E,wye=ue&N;if(Te&&(gS=J$?Te(G,Pa,J$,uS):Te(G)),gS!==c)return gS;if(!Rwe(G))return G;var _ye=owe(G);if(_ye){if(gS=Ake(G),!$S)return b2e(G,gS)}else{var Cye=s2e(G),Pye=Cye==LS||Cye==nS;if(T_e(G))return wCe(G,$S);if(Cye==wy||Cye==rS||Pye&&!J$){if(gS=PS||Pye?{}:FCe(G),!$S)return PS?bke(G,VTe(gS,G)):yke(G,ZSe(gS,G))}else{if(!dwe[Cye])return J$?G:{};gS=Ike(G,Cye,$S)}}uS||(uS=new G2e);var Wye=uS.get(G);if(Wye)return Wye;uS.set(G,gS),h3e(G)?G.forEach(function(ewe){gS.add(R2e(ewe,ue,Te,ewe,G,uS))}):f3e(G)&&G.forEach(function(ewe,mwe){gS.set(mwe,R2e(ewe,ue,Te,mwe,G,uS))});var Qye=wye?PS?aSe:oSe:PS?_2e:Xwe,uwe=_ye?c:Qye(G);return p2e(uwe||G,function(ewe,mwe){uwe&&(mwe=ewe,ewe=G[mwe]),$$e(gS,mwe,R2e(ewe,ue,Te,mwe,G,uS))}),gS}function HTe(G){var ue=Xwe(G);return function(Te){return XSe(Te,G,ue)}}function XSe(G,ue,Te){var Pa=Te.length;if(G==null)return!Pa;for(G=Iwe(G);Pa--;){var J$=Te[Pa],uS=ue[J$],gS=G[J$];if(gS===c&&!(J$ in G)||!uS(gS))return!1}return!0}function JSe(G,ue,Te){if(typeof G!="function")throw new N2e(v);return O$e(function(){G.apply(c,Te)},ue)}function x$e(G,ue,Te,Pa){var J$=-1,uS=Hye,gS=!0,$S=G.length,PS=[],wye=ue.length;if(!$S)return PS;Te&&(ue=kwe(ue,q$(Te))),Pa?(uS=j_e,gS=!1):ue.length>=f&&(uS=hS,gS=!1,ue=new I_e(ue));e:for(;++J$<$S;){var _ye=G[J$],Cye=Te==null?_ye:Te(_ye);if(_ye=Pa||_ye!==0?_ye:0,gS&&Cye===Cye){for(var Pye=wye;Pye--;)if(ue[Pye]===Cye)continue e;PS.push(_ye)}else uS(ue,Cye,Pa)||PS.push(_ye)}return PS}var $_e=CCe(t_e),QSe=CCe(Vxe,!0);function UTe(G,ue){var Te=!0;return $_e(G,function(Pa,J$,uS){return Te=!!ue(Pa,J$,uS),Te}),Te}function uxe(G,ue,Te){for(var Pa=-1,J$=G.length;++Pa<J$;){var uS=G[Pa],gS=ue(uS);if(gS!=null&&($S===c?gS===gS&&!k2e(gS):Te(gS,$S)))var $S=gS,PS=uS}return PS}function WTe(G,ue,Te,Pa){var J$=G.length;for(Te=lwe(Te),Te<0&&(Te=-Te>J$?0:J$+Te),Pa=Pa===c||Pa>J$?J$:lwe(Pa),Pa<0&&(Pa+=J$),Pa=Te>Pa?0:g3e(Pa);Te<Pa;)G[Te++]=ue;return G}function eCe(G,ue){var Te=[];return $_e(G,function(Pa,J$,uS){ue(Pa,J$,uS)&&Te.push(Pa)}),Te}function n2e(G,ue,Te,Pa,J$){var uS=-1,gS=G.length;for(Te||(Te=Nke),J$||(J$=[]);++uS<gS;){var $S=G[uS];ue>0&&Te($S)?ue>1?n2e($S,ue-1,Te,Pa,J$):C2e(J$,$S):Pa||(J$[J$.length]=$S)}return J$}var jxe=TCe(),tCe=TCe(!0);function t_e(G,ue){return G&&jxe(G,ue,Xwe)}function Vxe(G,ue){return G&&tCe(G,ue,Xwe)}function cxe(G,ue){return J2e(ue,function(Te){return h_e(G[Te])})}function N_e(G,ue){ue=S_e(ue,G);for(var Te=0,Pa=ue.length;G!=null&&Te<Pa;)G=G[n_e(ue[Te++])];return Te&&Te==Pa?G:c}function rCe(G,ue,Te){var Pa=ue(G);return owe(G)?Pa:C2e(Pa,Te(G))}function h2e(G){return G==null?G===c?xS:ES:O_e&&O_e in Iwe(G)?kke(G):zke(G)}function Hxe(G,ue){return G>ue}function qTe(G,ue){return G!=null&&Ewe.call(G,ue)}function GTe(G,ue){return G!=null&&ue in Iwe(G)}function KTe(G,ue,Te){return G>=a2e(ue,Te)&&G<Gwe(ue,Te)}function Uxe(G,ue,Te){for(var Pa=Te?j_e:Hye,J$=G[0].length,uS=G.length,gS=uS,$S=qS(uS),PS=1/0,wye=[];gS--;){var _ye=G[gS];gS&&ue&&(_ye=kwe(_ye,q$(ue))),PS=a2e(_ye.length,PS),$S[gS]=!Te&&(ue||J$>=120&&_ye.length>=120)?new I_e(gS&&_ye):c}_ye=G[0];var Cye=-1,Pye=$S[0];e:for(;++Cye<J$&&wye.length<PS;){var Wye=_ye[Cye],Qye=ue?ue(Wye):Wye;if(Wye=Te||Wye!==0?Wye:0,!(Pye?hS(Pye,Qye):Pa(wye,Qye,Te))){for(gS=uS;--gS;){var uwe=$S[gS];if(!(uwe?hS(uwe,Qye):Pa(G[gS],Qye,Te)))continue e}Pye&&Pye.push(Qye),wye.push(Wye)}}return wye}function YTe(G,ue,Te,Pa){return t_e(G,function(J$,uS,gS){ue(Pa,Te(J$),uS,gS)}),Pa}function S$e(G,ue,Te){ue=S_e(ue,G),G=HCe(G,ue);var Pa=G==null?G:G[n_e(D2e(ue))];return Pa==null?c:f2e(Pa,G,Te)}function nCe(G){return Dwe(G)&&h2e(G)==rS}function ZTe(G){return Dwe(G)&&h2e(G)==pS}function XTe(G){return Dwe(G)&&h2e(G)==BS}function C$e(G,ue,Te,Pa,J$){return G===ue?!0:G==null||ue==null||!Dwe(G)&&!Dwe(ue)?G!==G&&ue!==ue:JTe(G,ue,Te,Pa,C$e,J$)}function JTe(G,ue,Te,Pa,J$,uS){var gS=owe(G),$S=owe(ue),PS=gS?lS:s2e(G),wye=$S?lS:s2e(ue);PS=PS==rS?wy:PS,wye=wye==rS?wy:wye;var _ye=PS==wy,Cye=wye==wy,Pye=PS==wye;if(Pye&&T_e(G)){if(!T_e(ue))return!1;gS=!0,_ye=!1}if(Pye&&!_ye)return uS||(uS=new G2e),gS||e$e(G)?BCe(G,ue,Te,Pa,J$,uS):Cke(G,ue,PS,Te,Pa,J$,uS);if(!(Te&W)){var Wye=_ye&&Ewe.call(G,"__wrapped__"),Qye=Cye&&Ewe.call(ue,"__wrapped__");if(Wye||Qye){var uwe=Wye?G.value():G,ewe=Qye?ue.value():ue;return uS||(uS=new G2e),J$(uwe,ewe,Te,Pa,uS)}}return Pye?(uS||(uS=new G2e),Tke(G,ue,Te,Pa,J$,uS)):!1}function QTe(G){return Dwe(G)&&s2e(G)==Z$}function Wxe(G,ue,Te,Pa){var J$=Te.length,uS=J$,gS=!Pa;if(G==null)return!uS;for(G=Iwe(G);J$--;){var $S=Te[J$];if(gS&&$S[2]?$S[1]!==G[$S[0]]:!($S[0]in G))return!1}for(;++J$<uS;){$S=Te[J$];var PS=$S[0],wye=G[PS],_ye=$S[1];if(gS&&$S[2]){if(wye===c&&!(PS in G))return!1}else{var Cye=new G2e;if(Pa)var Pye=Pa(wye,_ye,PS,G,ue,Cye);if(!(Pye===c?C$e(_ye,wye,W|q,Pa,Cye):Pye))return!1}}return!0}function iCe(G){if(!Rwe(G)||Rke(G))return!1;var ue=h_e(G)?Q3e:Dye;return ue.test(R_e(G))}function eke(G){return Dwe(G)&&h2e(G)==Q$}function tke(G){return Dwe(G)&&s2e(G)==eS}function rke(G){return Dwe(G)&&kxe(G.length)&&!!Fye[h2e(G)]}function oCe(G){return typeof G=="function"?G:G==null?$2e:typeof G=="object"?owe(G)?lCe(G[0],G[1]):sCe(G):k3e(G)}function qxe(G){if(!E$e(G))return oTe(G);var ue=[];for(var Te in Iwe(G))Ewe.call(G,Te)&&Te!="constructor"&&ue.push(Te);return ue}function nke(G){if(!Rwe(G))return Fke(G);var ue=E$e(G),Te=[];for(var Pa in G)Pa=="constructor"&&(ue||!Ewe.call(G,Pa))||Te.push(Pa);return Te}function Gxe(G,ue){return G<ue}function aCe(G,ue){var Te=-1,Pa=w2e(G)?qS(G.length):[];return $_e(G,function(J$,uS,gS){Pa[++Te]=ue(J$,uS,gS)}),Pa}function sCe(G){var ue=lSe(G);return ue.length==1&&ue[0][2]?jCe(ue[0][0],ue[0][1]):function(Te){return Te===G||Wxe(Te,G,ue)}}function lCe(G,ue){return cSe(G)&&zCe(ue)?jCe(n_e(G),ue):function(Te){var Pa=wSe(Te,G);return Pa===c&&Pa===ue?_Se(Te,G):C$e(ue,Pa,W|q)}}function dxe(G,ue,Te,Pa,J$){G!==ue&&jxe(ue,function(uS,gS){if(J$||(J$=new G2e),Rwe(uS))ike(G,ue,gS,Te,dxe,Pa,J$);else{var $S=Pa?Pa(fSe(G,gS),uS,gS+"",G,ue,J$):c;$S===c&&($S=uS),Fxe(G,gS,$S)}},_2e)}function ike(G,ue,Te,Pa,J$,uS,gS){var $S=fSe(G,Te),PS=fSe(ue,Te),wye=gS.get(PS);if(wye){Fxe(G,Te,wye);return}var _ye=uS?uS($S,PS,Te+"",G,ue,gS):c,Cye=_ye===c;if(Cye){var Pye=owe(PS),Wye=!Pye&&T_e(PS),Qye=!Pye&&!Wye&&e$e(PS);_ye=PS,Pye||Wye||Qye?owe($S)?_ye=$S:zwe($S)?_ye=b2e($S):Wye?(Cye=!1,_ye=wCe(PS,!0)):Qye?(Cye=!1,_ye=_Ce(PS,!0)):_ye=[]:A$e(PS)||B_e(PS)?(_ye=$S,B_e($S)?_ye=v3e($S):(!Rwe($S)||h_e($S))&&(_ye=FCe(PS))):Cye=!1}Cye&&(gS.set(PS,_ye),J$(_ye,PS,Pa,uS,gS),gS.delete(PS)),Fxe(G,Te,_ye)}function uCe(G,ue){var Te=G.length;if(Te)return ue+=ue<0?Te:0,p_e(ue,Te)?G[ue]:c}function cCe(G,ue,Te){ue.length?ue=kwe(ue,function(uS){return owe(uS)?function(gS){return N_e(gS,uS.length===1?uS[0]:uS)}:uS}):ue=[$2e];var Pa=-1;ue=kwe(ue,q$(Jye()));var J$=aCe(G,function(uS,gS,$S){var PS=kwe(ue,function(wye){return wye(uS)});return{criteria:PS,index:++Pa,value:uS}});return Pxe(J$,function(uS,gS){return vke(uS,gS,Te)})}function oke(G,ue){return dCe(G,ue,function(Te,Pa){return _Se(G,Pa)})}function dCe(G,ue,Te){for(var Pa=-1,J$=ue.length,uS={};++Pa<J$;){var gS=ue[Pa],$S=N_e(G,gS);Te($S,gS)&&T$e(uS,S_e(gS,G),$S)}return uS}function ake(G){return function(ue){return N_e(ue,G)}}function Kxe(G,ue,Te,Pa){var J$=Pa?p$e:Q2e,uS=-1,gS=ue.length,$S=G;for(G===ue&&(ue=b2e(ue)),Te&&($S=kwe(G,q$(Te)));++uS<gS;)for(var PS=0,wye=ue[uS],_ye=Te?Te(wye):wye;(PS=J$($S,_ye,PS,Pa))>-1;)$S!==G&&txe.call($S,PS,1),txe.call(G,PS,1);return G}function fCe(G,ue){for(var Te=G?ue.length:0,Pa=Te-1;Te--;){var J$=ue[Te];if(Te==Pa||J$!==uS){var uS=J$;p_e(J$)?txe.call(G,J$,1):Jxe(G,J$)}}return G}function Yxe(G,ue){return G+ixe(qSe()*(ue-G+1))}function ske(G,ue,Te,Pa){for(var J$=-1,uS=Gwe(nxe((ue-G)/(Te||1)),0),gS=qS(uS);uS--;)gS[Pa?uS:++J$]=G,G+=Te;return gS}function Zxe(G,ue){var Te="";if(!G||ue<1||ue>Y$)return Te;do ue%2&&(Te+=G),ue=ixe(ue/2),ue&&(G+=G);while(ue);return Te}function fwe(G,ue){return pSe(VCe(G,ue,$2e),G+"")}function lke(G){return YSe(t$e(G))}function uke(G,ue){var Te=t$e(G);return _xe(Te,M_e(ue,0,Te.length))}function T$e(G,ue,Te,Pa){if(!Rwe(G))return G;ue=S_e(ue,G);for(var J$=-1,uS=ue.length,gS=uS-1,$S=G;$S!=null&&++J$<uS;){var PS=n_e(ue[J$]),wye=Te;if(PS==="__proto__"||PS==="constructor"||PS==="prototype")return G;if(J$!=gS){var _ye=$S[PS];wye=Pa?Pa(_ye,PS,$S):c,wye===c&&(wye=Rwe(_ye)?_ye:p_e(ue[J$+1])?[]:{})}$$e($S,PS,wye),$S=$S[PS]}return G}var pCe=oxe?function(G,ue){return oxe.set(G,ue),G}:$2e,cke=rxe?function(G,ue){return rxe(G,"toString",{configurable:!0,enumerable:!1,value:xSe(ue),writable:!0})}:$2e;function dke(G){return _xe(t$e(G))}function B2e(G,ue,Te){var Pa=-1,J$=G.length;ue<0&&(ue=-ue>J$?0:J$+ue),Te=Te>J$?J$:Te,Te<0&&(Te+=J$),J$=ue>Te?0:Te-ue>>>0,ue>>>=0;for(var uS=qS(J$);++Pa<J$;)uS[Pa]=G[Pa+ue];return uS}function fke(G,ue){var Te;return $_e(G,function(Pa,J$,uS){return Te=ue(Pa,J$,uS),!Te}),!!Te}function fxe(G,ue,Te){var Pa=0,J$=G==null?Pa:G.length;if(typeof ue=="number"&&ue===ue&&J$<=ky){for(;Pa<J$;){var uS=Pa+J$>>>1,gS=G[uS];gS!==null&&!k2e(gS)&&(Te?gS<=ue:gS<ue)?Pa=uS+1:J$=uS}return J$}return Xxe(G,ue,$2e,Te)}function Xxe(G,ue,Te,Pa){var J$=0,uS=G==null?0:G.length;if(uS===0)return 0;ue=Te(ue);for(var gS=ue!==ue,$S=ue===null,PS=k2e(ue),wye=ue===c;J$<uS;){var _ye=ixe((J$+uS)/2),Cye=Te(G[_ye]),Pye=Cye!==c,Wye=Cye===null,Qye=Cye===Cye,uwe=k2e(Cye);if(gS)var ewe=Pa||Qye;else wye?ewe=Qye&&(Pa||Pye):$S?ewe=Qye&&Pye&&(Pa||!Wye):PS?ewe=Qye&&Pye&&!Wye&&(Pa||!uwe):Wye||uwe?ewe=!1:ewe=Pa?Cye<=ue:Cye<ue;ewe?J$=_ye+1:uS=_ye}return a2e(uS,G$)}function hCe(G,ue){for(var Te=-1,Pa=G.length,J$=0,uS=[];++Te<Pa;){var gS=G[Te],$S=ue?ue(gS):gS;if(!Te||!K2e($S,PS)){var PS=$S;uS[J$++]=gS===0?0:gS}}return uS}function mCe(G){return typeof G=="number"?G:k2e(G)?U$:+G}function T2e(G){if(typeof G=="string")return G;if(owe(G))return kwe(G,T2e)+"";if(k2e(G))return GSe?GSe.call(G):"";var ue=G+"";return ue=="0"&&1/G==-K$?"-0":ue}function x_e(G,ue,Te){var Pa=-1,J$=Hye,uS=G.length,gS=!0,$S=[],PS=$S;if(Te)gS=!1,J$=j_e;else if(uS>=f){var wye=ue?null:xke(G);if(wye)return G$e(wye);gS=!1,J$=hS,PS=new I_e}else PS=ue?[]:$S;e:for(;++Pa<uS;){var _ye=G[Pa],Cye=ue?ue(_ye):_ye;if(_ye=Te||_ye!==0?_ye:0,gS&&Cye===Cye){for(var Pye=PS.length;Pye--;)if(PS[Pye]===Cye)continue e;ue&&PS.push(Cye),$S.push(_ye)}else J$(PS,Cye,Te)||(PS!==$S&&PS.push(Cye),$S.push(_ye))}return $S}function Jxe(G,ue){return ue=S_e(ue,G),G=HCe(G,ue),G==null||delete G[n_e(D2e(ue))]}function gCe(G,ue,Te,Pa){return T$e(G,ue,Te(N_e(G,ue)),Pa)}function pxe(G,ue,Te,Pa){for(var J$=G.length,uS=Pa?J$:-1;(Pa?uS--:++uS<J$)&&ue(G[uS],uS,G););return Te?B2e(G,Pa?0:uS,Pa?uS+1:J$):B2e(G,Pa?uS+1:0,Pa?J$:uS)}function vCe(G,ue){var Te=G;return Te instanceof vwe&&(Te=Te.value()),y2e(ue,function(Pa,J$){return J$.func.apply(J$.thisArg,C2e([Pa],J$.args))},Te)}function Qxe(G,ue,Te){var Pa=G.length;if(Pa<2)return Pa?x_e(G[0]):[];for(var J$=-1,uS=qS(Pa);++J$<Pa;)for(var gS=G[J$],$S=-1;++$S<Pa;)$S!=J$&&(uS[J$]=x$e(uS[J$]||gS,G[$S],ue,Te));return x_e(n2e(uS,1),ue,Te)}function yCe(G,ue,Te){for(var Pa=-1,J$=G.length,uS=ue.length,gS={};++Pa<J$;){var $S=Pa<uS?ue[Pa]:c;Te(gS,G[Pa],$S)}return gS}function eSe(G){return zwe(G)?G:[]}function tSe(G){return typeof G=="function"?G:$2e}function S_e(G,ue){return owe(G)?G:cSe(G,ue)?[G]:GCe(Twe(G))}var pke=fwe;function C_e(G,ue,Te){var Pa=G.length;return Te=Te===c?Pa:Te,!ue&&Te>=Pa?G:B2e(G,ue,Te)}var bCe=eTe||function(G){return Fwe.clearTimeout(G)};function wCe(G,ue){if(ue)return G.slice();var Te=G.length,Pa=jSe?jSe(Te):new G.constructor(Te);return G.copy(Pa),Pa}function rSe(G){var ue=new G.constructor(G.byteLength);return new Q$e(ue).set(new Q$e(G)),ue}function hke(G,ue){var Te=ue?rSe(G.buffer):G.buffer;return new G.constructor(Te,G.byteOffset,G.byteLength)}function mke(G){var ue=new G.constructor(G.source,Qwe.exec(G));return ue.lastIndex=G.lastIndex,ue}function gke(G){return _$e?Iwe(_$e.call(G)):{}}function _Ce(G,ue){var Te=ue?rSe(G.buffer):G.buffer;return new G.constructor(Te,G.byteOffset,G.length)}function $Ce(G,ue){if(G!==ue){var Te=G!==c,Pa=G===null,J$=G===G,uS=k2e(G),gS=ue!==c,$S=ue===null,PS=ue===ue,wye=k2e(ue);if(!$S&&!wye&&!uS&&G>ue||uS&&gS&&PS&&!$S&&!wye||Pa&&gS&&PS||!Te&&PS||!J$)return 1;if(!Pa&&!uS&&!wye&&G<ue||wye&&Te&&J$&&!Pa&&!uS||$S&&Te&&J$||!gS&&J$||!PS)return-1}return 0}function vke(G,ue,Te){for(var Pa=-1,J$=G.criteria,uS=ue.criteria,gS=J$.length,$S=Te.length;++Pa<gS;){var PS=$Ce(J$[Pa],uS[Pa]);if(PS){if(Pa>=$S)return PS;var wye=Te[Pa];return PS*(wye=="desc"?-1:1)}}return G.index-ue.index}function xCe(G,ue,Te,Pa){for(var J$=-1,uS=G.length,gS=Te.length,$S=-1,PS=ue.length,wye=Gwe(uS-gS,0),_ye=qS(PS+wye),Cye=!Pa;++$S<PS;)_ye[$S]=ue[$S];for(;++J$<gS;)(Cye||J$<uS)&&(_ye[Te[J$]]=G[J$]);for(;wye--;)_ye[$S++]=G[J$++];return _ye}function SCe(G,ue,Te,Pa){for(var J$=-1,uS=G.length,gS=-1,$S=Te.length,PS=-1,wye=ue.length,_ye=Gwe(uS-$S,0),Cye=qS(_ye+wye),Pye=!Pa;++J$<_ye;)Cye[J$]=G[J$];for(var Wye=J$;++PS<wye;)Cye[Wye+PS]=ue[PS];for(;++gS<$S;)(Pye||J$<uS)&&(Cye[Wye+Te[gS]]=G[J$++]);return Cye}function b2e(G,ue){var Te=-1,Pa=G.length;for(ue||(ue=qS(Pa));++Te<Pa;)ue[Te]=G[Te];return ue}function r_e(G,ue,Te,Pa){var J$=!Te;Te||(Te={});for(var uS=-1,gS=ue.length;++uS<gS;){var $S=ue[uS],PS=Pa?Pa(Te[$S],G[$S],$S,Te,G):c;PS===c&&(PS=G[$S]),J$?c_e(Te,$S,PS):$$e(Te,$S,PS)}return Te}function yke(G,ue){return r_e(G,uSe(G),ue)}function bke(G,ue){return r_e(G,DCe(G),ue)}function hxe(G,ue){return function(Te,Pa){var J$=owe(Te)?H$e:jTe,uS=ue?ue():{};return J$(Te,G,Jye(Pa,2),uS)}}function X_e(G){return fwe(function(ue,Te){var Pa=-1,J$=Te.length,uS=J$>1?Te[J$-1]:c,gS=J$>2?Te[2]:c;for(uS=G.length>3&&typeof uS=="function"?(J$--,uS):c,gS&&m2e(Te[0],Te[1],gS)&&(uS=J$<3?c:uS,J$=1),ue=Iwe(ue);++Pa<J$;){var $S=Te[Pa];$S&&G(ue,$S,Pa,uS)}return ue})}function CCe(G,ue){return function(Te,Pa){if(Te==null)return Te;if(!w2e(Te))return G(Te,Pa);for(var J$=Te.length,uS=ue?J$:-1,gS=Iwe(Te);(ue?uS--:++uS<J$)&&Pa(gS[uS],uS,gS)!==!1;);return Te}}function TCe(G){return function(ue,Te,Pa){for(var J$=-1,uS=Iwe(ue),gS=Pa(ue),$S=gS.length;$S--;){var PS=gS[G?$S:++J$];if(Te(uS[PS],PS,uS)===!1)break}return ue}}function wke(G,ue,Te){var Pa=ue&Y,J$=k$e(G);function uS(){var gS=this&&this!==Fwe&&this instanceof uS?J$:G;return gS.apply(Pa?Te:this,arguments)}return uS}function kCe(G){return function(ue){ue=Twe(ue);var Te=bwe(ue)?q2e(ue):c,Pa=Te?Te[0]:ue.charAt(0),J$=Te?C_e(Te,1).join(""):ue.slice(1);return Pa[G]()+J$}}function J_e(G){return function(ue){return y2e(C3e(S3e(ue).replace(xye,"")),G,"")}}function k$e(G){return function(){var ue=arguments;switch(ue.length){case 0:return new G;case 1:return new G(ue[0]);case 2:return new G(ue[0],ue[1]);case 3:return new G(ue[0],ue[1],ue[2]);case 4:return new G(ue[0],ue[1],ue[2],ue[3]);case 5:return new G(ue[0],ue[1],ue[2],ue[3],ue[4]);case 6:return new G(ue[0],ue[1],ue[2],ue[3],ue[4],ue[5]);case 7:return new G(ue[0],ue[1],ue[2],ue[3],ue[4],ue[5],ue[6])}var Te=Z_e(G.prototype),Pa=G.apply(Te,ue);return Rwe(Pa)?Pa:Te}}function _ke(G,ue,Te){var Pa=k$e(G);function J$(){for(var uS=arguments.length,gS=qS(uS),$S=uS,PS=Q_e(J$);$S--;)gS[$S]=arguments[$S];var wye=uS<3&&gS[0]!==PS&&gS[uS-1]!==PS?[]:W2e(gS,PS);if(uS-=wye.length,uS<Te)return MCe(G,ue,mxe,J$.placeholder,c,gS,wye,c,c,Te-uS);var _ye=this&&this!==Fwe&&this instanceof J$?Pa:G;return f2e(_ye,this,gS)}return J$}function ECe(G){return function(ue,Te,Pa){var J$=Iwe(ue);if(!w2e(ue)){var uS=Jye(Te,3);ue=Xwe(ue),Te=function($S){return uS(J$[$S],$S,J$)}}var gS=G(ue,Te,Pa);return gS>-1?J$[uS?ue[gS]:gS]:c}}function OCe(G){return f_e(function(ue){var Te=ue.length,Pa=Te,J$=P2e.prototype.thru;for(G&&ue.reverse();Pa--;){var uS=ue[Pa];if(typeof uS!="function")throw new N2e(v);if(J$&&!gS&&bxe(uS)=="wrapper")var gS=new P2e([],!0)}for(Pa=gS?Pa:Te;++Pa<Te;){uS=ue[Pa];var $S=bxe(uS),PS=$S=="wrapper"?sSe(uS):c;PS&&dSe(PS[0])&&PS[1]==(Ae|de|ge|Re)&&!PS[4].length&&PS[9]==1?gS=gS[bxe(PS[0])].apply(gS,PS[3]):gS=uS.length==1&&dSe(uS)?gS[$S]():gS.thru(uS)}return function(){var wye=arguments,_ye=wye[0];if(gS&&wye.length==1&&owe(_ye))return gS.plant(_ye).value();for(var Cye=0,Pye=Te?ue[Cye].apply(this,wye):_ye;++Cye<Te;)Pye=ue[Cye].call(this,Pye);return Pye}})}function mxe(G,ue,Te,Pa,J$,uS,gS,$S,PS,wye){var _ye=ue&Ae,Cye=ue&Y,Pye=ue&re,Wye=ue&(de|he),Qye=ue&Be,uwe=Pye?c:k$e(G);function ewe(){for(var mwe=arguments.length,wwe=qS(mwe),E2e=mwe;E2e--;)wwe[E2e]=arguments[E2e];if(Wye)var g2e=Q_e(ewe),O2e=kye(wwe,g2e);if(Pa&&(wwe=xCe(wwe,Pa,J$,Wye)),uS&&(wwe=SCe(wwe,uS,gS,Wye)),mwe-=O2e,Wye&&mwe<wye){var jwe=W2e(wwe,g2e);return MCe(G,ue,mxe,ewe.placeholder,Te,wwe,jwe,$S,PS,wye-mwe)}var Y2e=Cye?Te:this,g_e=Pye?Y2e[G]:G;return mwe=wwe.length,$S?wwe=jke(wwe,$S):Qye&&mwe>1&&wwe.reverse(),_ye&&PS<mwe&&(wwe.length=PS),this&&this!==Fwe&&this instanceof ewe&&(g_e=uwe||k$e(g_e)),g_e.apply(Y2e,wwe)}return ewe}function ACe(G,ue){return function(Te,Pa){return YTe(Te,G,ue(Pa),{})}}function gxe(G,ue){return function(Te,Pa){var J$;if(Te===c&&Pa===c)return ue;if(Te!==c&&(J$=Te),Pa!==c){if(J$===c)return Pa;typeof Te=="string"||typeof Pa=="string"?(Te=T2e(Te),Pa=T2e(Pa)):(Te=mCe(Te),Pa=mCe(Pa)),J$=G(Te,Pa)}return J$}}function nSe(G){return f_e(function(ue){return ue=kwe(ue,q$(Jye())),fwe(function(Te){var Pa=this;return G(ue,function(J$){return f2e(J$,Pa,Te)})})})}function vxe(G,ue){ue=ue===c?" ":T2e(ue);var Te=ue.length;if(Te<2)return Te?Zxe(ue,G):ue;var Pa=Zxe(ue,nxe(G/q_e(ue)));return bwe(ue)?C_e(q2e(Pa),0,G).join(""):Pa.slice(0,G)}function $ke(G,ue,Te,Pa){var J$=ue&Y,uS=k$e(G);function gS(){for(var $S=-1,PS=arguments.length,wye=-1,_ye=Pa.length,Cye=qS(_ye+PS),Pye=this&&this!==Fwe&&this instanceof gS?uS:G;++wye<_ye;)Cye[wye]=Pa[wye];for(;PS--;)Cye[wye++]=arguments[++$S];return f2e(Pye,J$?Te:this,Cye)}return gS}function ICe(G){return function(ue,Te,Pa){return Pa&&typeof Pa!="number"&&m2e(ue,Te,Pa)&&(Te=Pa=c),ue=m_e(ue),Te===c?(Te=ue,ue=0):Te=m_e(Te),Pa=Pa===c?ue<Te?1:-1:m_e(Pa),ske(ue,Te,Pa,G)}}function yxe(G){return function(ue,Te){return typeof ue=="string"&&typeof Te=="string"||(ue=L2e(ue),Te=L2e(Te)),G(ue,Te)}}function MCe(G,ue,Te,Pa,J$,uS,gS,$S,PS,wye){var _ye=ue&de,Cye=_ye?gS:c,Pye=_ye?c:gS,Wye=_ye?uS:c,Qye=_ye?c:uS;ue|=_ye?ge:Se,ue&=~(_ye?Se:ge),ue&se||(ue&=~(Y|re));var uwe=[G,ue,J$,Wye,Cye,Qye,Pye,$S,PS,wye],ewe=Te.apply(c,uwe);return dSe(G)&&UCe(ewe,uwe),ewe.placeholder=Pa,WCe(ewe,G,ue)}function iSe(G){var ue=qwe[G];return function(Te,Pa){if(Te=L2e(Te),Pa=Pa==null?0:a2e(lwe(Pa),292),Pa&&WSe(Te)){var J$=(Twe(Te)+"e").split("e"),uS=ue(J$[0]+"e"+(+J$[1]+Pa));return J$=(Twe(uS)+"e").split("e"),+(J$[0]+"e"+(+J$[1]-Pa))}return ue(Te)}}var xke=K_e&&1/G$e(new K_e([,-0]))[1]==K$?function(G){return new K_e(G)}:TSe;function NCe(G){return function(ue){var Te=s2e(ue);return Te==Z$?gwe(ue):Te==eS?z3e(ue):Ie(ue,G(ue))}}function d_e(G,ue,Te,Pa,J$,uS,gS,$S){var PS=ue&re;if(!PS&&typeof G!="function")throw new N2e(v);var wye=Pa?Pa.length:0;if(wye||(ue&=~(ge|Se),Pa=J$=c),gS=gS===c?gS:Gwe(lwe(gS),0),$S=$S===c?$S:lwe($S),wye-=J$?J$.length:0,ue&Se){var _ye=Pa,Cye=J$;Pa=J$=c}var Pye=PS?c:sSe(G),Wye=[G,ue,Te,Pa,J$,_ye,Cye,uS,gS,$S];if(Pye&&Lke(Wye,Pye),G=Wye[0],ue=Wye[1],Te=Wye[2],Pa=Wye[3],J$=Wye[4],$S=Wye[9]=Wye[9]===c?PS?0:G.length:Gwe(Wye[9]-wye,0),!$S&&ue&(de|he)&&(ue&=~(de|he)),!ue||ue==Y)var Qye=wke(G,ue,Te);else ue==de||ue==he?Qye=_ke(G,ue,$S):(ue==ge||ue==(Y|ge))&&!J$.length?Qye=$ke(G,ue,Te,Pa):Qye=mxe.apply(c,Wye);var uwe=Pye?pCe:UCe;return WCe(uwe(Qye,Wye),G,ue)}function PCe(G,ue,Te,Pa){return G===c||K2e(G,G_e[Te])&&!Ewe.call(Pa,Te)?ue:G}function RCe(G,ue,Te,Pa,J$,uS){return Rwe(G)&&Rwe(ue)&&(uS.set(ue,G),dxe(G,ue,c,RCe,uS),uS.delete(ue)),G}function Ske(G){return A$e(G)?c:G}function BCe(G,ue,Te,Pa,J$,uS){var gS=Te&W,$S=G.length,PS=ue.length;if($S!=PS&&!(gS&&PS>$S))return!1;var wye=uS.get(G),_ye=uS.get(ue);if(wye&&_ye)return wye==ue&&_ye==G;var Cye=-1,Pye=!0,Wye=Te&q?new I_e:c;for(uS.set(G,ue),uS.set(ue,G);++Cye<$S;){var Qye=G[Cye],uwe=ue[Cye];if(Pa)var ewe=gS?Pa(uwe,Qye,Cye,ue,G,uS):Pa(Qye,uwe,Cye,G,ue,uS);if(ewe!==c){if(ewe)continue;Pye=!1;break}if(Wye){if(!V_e(ue,function(mwe,wwe){if(!hS(Wye,wwe)&&(Qye===mwe||J$(Qye,mwe,Te,Pa,uS)))return Wye.push(wwe)})){Pye=!1;break}}else if(!(Qye===uwe||J$(Qye,uwe,Te,Pa,uS))){Pye=!1;break}}return uS.delete(G),uS.delete(ue),Pye}function Cke(G,ue,Te,Pa,J$,uS,gS){switch(Te){case fC:if(G.byteLength!=ue.byteLength||G.byteOffset!=ue.byteOffset)return!1;G=G.buffer,ue=ue.buffer;case pS:return!(G.byteLength!=ue.byteLength||!uS(new Q$e(G),new Q$e(ue)));case IS:case BS:case dS:return K2e(+G,+ue);case zS:return G.name==ue.name&&G.message==ue.message;case Q$:case cS:return G==ue+"";case Z$:var $S=gwe;case eS:var PS=Pa&W;if($S||($S=G$e),G.size!=ue.size&&!PS)return!1;var wye=gS.get(G);if(wye)return wye==ue;Pa|=q,gS.set(G,ue);var _ye=BCe($S(G),$S(ue),Pa,J$,uS,gS);return gS.delete(G),_ye;case wS:if(_$e)return _$e.call(G)==_$e.call(ue)}return!1}function Tke(G,ue,Te,Pa,J$,uS){var gS=Te&W,$S=oSe(G),PS=$S.length,wye=oSe(ue),_ye=wye.length;if(PS!=_ye&&!gS)return!1;for(var Cye=PS;Cye--;){var Pye=$S[Cye];if(!(gS?Pye in ue:Ewe.call(ue,Pye)))return!1}var Wye=uS.get(G),Qye=uS.get(ue);if(Wye&&Qye)return Wye==ue&&Qye==G;var uwe=!0;uS.set(G,ue),uS.set(ue,G);for(var ewe=gS;++Cye<PS;){Pye=$S[Cye];var mwe=G[Pye],wwe=ue[Pye];if(Pa)var E2e=gS?Pa(wwe,mwe,Pye,ue,G,uS):Pa(mwe,wwe,Pye,G,ue,uS);if(!(E2e===c?mwe===wwe||J$(mwe,wwe,Te,Pa,uS):E2e)){uwe=!1;break}ewe||(ewe=Pye=="constructor")}if(uwe&&!ewe){var g2e=G.constructor,O2e=ue.constructor;g2e!=O2e&&"constructor"in G&&"constructor"in ue&&!(typeof g2e=="function"&&g2e instanceof g2e&&typeof O2e=="function"&&O2e instanceof O2e)&&(uwe=!1)}return uS.delete(G),uS.delete(ue),uwe}function f_e(G){return pSe(VCe(G,c,XCe),G+"")}function oSe(G){return rCe(G,Xwe,uSe)}function aSe(G){return rCe(G,_2e,DCe)}var sSe=oxe?function(G){return oxe.get(G)}:TSe;function bxe(G){for(var ue=G.name+"",Te=Y_e[ue],Pa=Ewe.call(Y_e,ue)?Te.length:0;Pa--;){var J$=Te[Pa],uS=J$.func;if(uS==null||uS==G)return J$.name}return ue}function Q_e(G){var ue=Ewe.call(oS,"placeholder")?oS:G;return ue.placeholder}function Jye(){var G=oS.iteratee||SSe;return G=G===SSe?oCe:G,arguments.length?G(arguments[0],arguments[1]):G}function wxe(G,ue){var Te=G.__data__;return Pke(ue)?Te[typeof ue=="string"?"string":"hash"]:Te.map}function lSe(G){for(var ue=Xwe(G),Te=ue.length;Te--;){var Pa=ue[Te],J$=G[Pa];ue[Te]=[Pa,J$,zCe(J$)]}return ue}function P_e(G,ue){var Te=xwe(G,ue);return iCe(Te)?Te:c}function kke(G){var ue=Ewe.call(G,O_e),Te=G[O_e];try{G[O_e]=c;var Pa=!0}catch{}var J$=X$e.call(G);return Pa&&(ue?G[O_e]=Te:delete G[O_e]),J$}var uSe=Bxe?function(G){return G==null?[]:(G=Iwe(G),J2e(Bxe(G),function(ue){return HSe.call(G,ue)}))}:kSe,DCe=Bxe?function(G){for(var ue=[];G;)C2e(ue,uSe(G)),G=exe(G);return ue}:kSe,s2e=h2e;(Dxe&&s2e(new Dxe(new ArrayBuffer(1)))!=fC||y$e&&s2e(new y$e)!=Z$||Lxe&&s2e(Lxe.resolve())!=tS||K_e&&s2e(new K_e)!=eS||b$e&&s2e(new b$e)!=OS)&&(s2e=function(G){var ue=h2e(G),Te=ue==wy?G.constructor:c,Pa=Te?R_e(Te):"";if(Pa)switch(Pa){case uTe:return fC;case cTe:return Z$;case dTe:return tS;case fTe:return eS;case pTe:return OS}return ue});function Eke(G,ue,Te){for(var Pa=-1,J$=Te.length;++Pa<J$;){var uS=Te[Pa],gS=uS.size;switch(uS.type){case"drop":G+=gS;break;case"dropRight":ue-=gS;break;case"take":ue=a2e(ue,G+gS);break;case"takeRight":G=Gwe(G,ue-gS);break}}return{start:G,end:ue}}function Oke(G){var ue=G.match(Hwe);return ue?ue[1].split(Pwe):[]}function LCe(G,ue,Te){ue=S_e(ue,G);for(var Pa=-1,J$=ue.length,uS=!1;++Pa<J$;){var gS=n_e(ue[Pa]);if(!(uS=G!=null&&Te(G,gS)))break;G=G[gS]}return uS||++Pa!=J$?uS:(J$=G==null?0:G.length,!!J$&&kxe(J$)&&p_e(gS,J$)&&(owe(G)||B_e(G)))}function Ake(G){var ue=G.length,Te=new G.constructor(ue);return ue&&typeof G[0]=="string"&&Ewe.call(G,"index")&&(Te.index=G.index,Te.input=G.input),Te}function FCe(G){return typeof G.constructor=="function"&&!E$e(G)?Z_e(exe(G)):{}}function Ike(G,ue,Te){var Pa=G.constructor;switch(ue){case pS:return rSe(G);case IS:case BS:return new Pa(+G);case fC:return hke(G,Te);case US:case Iye:case $ye:case Rye:case Uye:case DS:case HS:case Aye:case Tye:return _Ce(G,Te);case Z$:return new Pa;case dS:case cS:return new Pa(G);case Q$:return mke(G);case eS:return new Pa;case wS:return gke(G)}}function Mke(G,ue){var Te=ue.length;if(!Te)return G;var Pa=Te-1;return ue[Pa]=(Te>1?"& ":"")+ue[Pa],ue=ue.join(Te>2?", ":" "),G.replace(_we,`{
/* [wrapped with `+ue+`] */
`)}function Nke(G){return owe(G)||B_e(G)||!!(USe&&G&&G[USe])}function p_e(G,ue){var Te=typeof G;return ue=ue??Y$,!!ue&&(Te=="number"||Te!="symbol"&&Sye.test(G))&&G>-1&&G%1==0&&G<ue}function m2e(G,ue,Te){if(!Rwe(Te))return!1;var Pa=typeof ue;return(Pa=="number"?w2e(Te)&&p_e(ue,Te.length):Pa=="string"&&ue in Te)?K2e(Te[ue],G):!1}function cSe(G,ue){if(owe(G))return!1;var Te=typeof G;return Te=="number"||Te=="symbol"||Te=="boolean"||G==null||k2e(G)?!0:hwe.test(G)||!ywe.test(G)||ue!=null&&G in Iwe(ue)}function Pke(G){var ue=typeof G;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?G!=="__proto__":G===null}function dSe(G){var ue=bxe(G),Te=oS[ue];if(typeof Te!="function"||!(ue in vwe.prototype))return!1;if(G===Te)return!0;var Pa=sSe(Te);return!!Pa&&G===Pa[0]}function Rke(G){return!!zSe&&zSe in G}var Bke=Y$e?h_e:ESe;function E$e(G){var ue=G&&G.constructor,Te=typeof ue=="function"&&ue.prototype||G_e;return G===Te}function zCe(G){return G===G&&!Rwe(G)}function jCe(G,ue){return function(Te){return Te==null?!1:Te[G]===ue&&(ue!==c||G in Iwe(Te))}}function Dke(G){var ue=Cxe(G,function(Pa){return Te.size===y&&Te.clear(),Pa}),Te=ue.cache;return ue}function Lke(G,ue){var Te=G[1],Pa=ue[1],J$=Te|Pa,uS=J$<(Y|re|Ae),gS=Pa==Ae&&Te==de||Pa==Ae&&Te==Re&&G[7].length<=ue[8]||Pa==(Ae|Re)&&ue[7].length<=ue[8]&&Te==de;if(!(uS||gS))return G;Pa&Y&&(G[2]=ue[2],J$|=Te&Y?0:se);var $S=ue[3];if($S){var PS=G[3];G[3]=PS?xCe(PS,$S,ue[4]):$S,G[4]=PS?W2e(G[3],x):ue[4]}return $S=ue[5],$S&&(PS=G[5],G[5]=PS?SCe(PS,$S,ue[6]):$S,G[6]=PS?W2e(G[5],x):ue[6]),$S=ue[7],$S&&(G[7]=$S),Pa&Ae&&(G[8]=G[8]==null?ue[8]:a2e(G[8],ue[8])),G[9]==null&&(G[9]=ue[9]),G[0]=ue[0],G[1]=J$,G}function Fke(G){var ue=[];if(G!=null)for(var Te in Iwe(G))ue.push(Te);return ue}function zke(G){return X$e.call(G)}function VCe(G,ue,Te){return ue=Gwe(ue===c?G.length-1:ue,0),function(){for(var Pa=arguments,J$=-1,uS=Gwe(Pa.length-ue,0),gS=qS(uS);++J$<uS;)gS[J$]=Pa[ue+J$];J$=-1;for(var $S=qS(ue+1);++J$<ue;)$S[J$]=Pa[J$];return $S[ue]=Te(gS),f2e(G,this,$S)}}function HCe(G,ue){return ue.length<2?G:N_e(G,B2e(ue,0,-1))}function jke(G,ue){for(var Te=G.length,Pa=a2e(ue.length,Te),J$=b2e(G);Pa--;){var uS=ue[Pa];G[Pa]=p_e(uS,Te)?J$[uS]:c}return G}function fSe(G,ue){if(!(ue==="constructor"&&typeof G[ue]=="function")&&ue!="__proto__")return G[ue]}var UCe=qCe(pCe),O$e=rTe||function(G,ue){return Fwe.setTimeout(G,ue)},pSe=qCe(cke);function WCe(G,ue,Te){var Pa=ue+"";return pSe(G,Mke(Pa,Vke(Oke(Pa),Te)))}function qCe(G){var ue=0,Te=0;return function(){var Pa=aTe(),J$=by-(Pa-Te);if(Te=Pa,J$>0){if(++ue>=_y)return arguments[0]}else ue=0;return G.apply(c,arguments)}}function _xe(G,ue){var Te=-1,Pa=G.length,J$=Pa-1;for(ue=ue===c?Pa:ue;++Te<ue;){var uS=Yxe(Te,J$),gS=G[uS];G[uS]=G[Te],G[Te]=gS}return G.length=ue,G}var GCe=Dke(function(G){var ue=[];return G.charCodeAt(0)===46&&ue.push(""),G.replace(Vwe,function(Te,Pa,J$,uS){ue.push(J$?uS.replace(i2e,"$1"):Pa||Te)}),ue});function n_e(G){if(typeof G=="string"||k2e(G))return G;var ue=G+"";return ue=="0"&&1/G==-K$?"-0":ue}function R_e(G){if(G!=null){try{return Z$e.call(G)}catch{}try{return G+""}catch{}}return""}function Vke(G,ue){return p2e($y,function(Te){var Pa="_."+Te[0];ue&Te[1]&&!Hye(G,Pa)&&G.push(Pa)}),G.sort()}function KCe(G){if(G instanceof vwe)return G.clone();var ue=new P2e(G.__wrapped__,G.__chain__);return ue.__actions__=b2e(G.__actions__),ue.__index__=G.__index__,ue.__values__=G.__values__,ue}function Hke(G,ue,Te){(Te?m2e(G,ue,Te):ue===c)?ue=1:ue=Gwe(lwe(ue),0);var Pa=G==null?0:G.length;if(!Pa||ue<1)return[];for(var J$=0,uS=0,gS=qS(nxe(Pa/ue));J$<Pa;)gS[uS++]=B2e(G,J$,J$+=ue);return gS}function Uke(G){for(var ue=-1,Te=G==null?0:G.length,Pa=0,J$=[];++ue<Te;){var uS=G[ue];uS&&(J$[Pa++]=uS)}return J$}function Wke(){var G=arguments.length;if(!G)return[];for(var ue=qS(G-1),Te=arguments[0],Pa=G;Pa--;)ue[Pa-1]=arguments[Pa];return C2e(owe(Te)?b2e(Te):[Te],n2e(ue,1))}var qke=fwe(function(G,ue){return zwe(G)?x$e(G,n2e(ue,1,zwe,!0)):[]}),Gke=fwe(function(G,ue){var Te=D2e(ue);return zwe(Te)&&(Te=c),zwe(G)?x$e(G,n2e(ue,1,zwe,!0),Jye(Te,2)):[]}),Kke=fwe(function(G,ue){var Te=D2e(ue);return zwe(Te)&&(Te=c),zwe(G)?x$e(G,n2e(ue,1,zwe,!0),c,Te):[]});function Yke(G,ue,Te){var Pa=G==null?0:G.length;return Pa?(ue=Te||ue===c?1:lwe(ue),B2e(G,ue<0?0:ue,Pa)):[]}function Zke(G,ue,Te){var Pa=G==null?0:G.length;return Pa?(ue=Te||ue===c?1:lwe(ue),ue=Pa-ue,B2e(G,0,ue<0?0:ue)):[]}function Xke(G,ue){return G&&G.length?pxe(G,Jye(ue,3),!0,!0):[]}function Jke(G,ue){return G&&G.length?pxe(G,Jye(ue,3),!0):[]}function Qke(G,ue,Te,Pa){var J$=G==null?0:G.length;return J$?(Te&&typeof Te!="number"&&m2e(G,ue,Te)&&(Te=0,Pa=J$),WTe(G,ue,Te,Pa)):[]}function YCe(G,ue,Te){var Pa=G==null?0:G.length;if(!Pa)return-1;var J$=Te==null?0:lwe(Te);return J$<0&&(J$=Gwe(Pa+J$,0)),s_e(G,Jye(ue,3),J$)}function ZCe(G,ue,Te){var Pa=G==null?0:G.length;if(!Pa)return-1;var J$=Pa-1;return Te!==c&&(J$=lwe(Te),J$=Te<0?Gwe(Pa+J$,0):a2e(J$,Pa-1)),s_e(G,Jye(ue,3),J$,!0)}function XCe(G){var ue=G==null?0:G.length;return ue?n2e(G,1):[]}function e4e(G){var ue=G==null?0:G.length;return ue?n2e(G,K$):[]}function t4e(G,ue){var Te=G==null?0:G.length;return Te?(ue=ue===c?1:lwe(ue),n2e(G,ue)):[]}function r4e(G){for(var ue=-1,Te=G==null?0:G.length,Pa={};++ue<Te;){var J$=G[ue];Pa[J$[0]]=J$[1]}return Pa}function JCe(G){return G&&G.length?G[0]:c}function n4e(G,ue,Te){var Pa=G==null?0:G.length;if(!Pa)return-1;var J$=Te==null?0:lwe(Te);return J$<0&&(J$=Gwe(Pa+J$,0)),Q2e(G,ue,J$)}function i4e(G){var ue=G==null?0:G.length;return ue?B2e(G,0,-1):[]}var o4e=fwe(function(G){var ue=kwe(G,eSe);return ue.length&&ue[0]===G[0]?Uxe(ue):[]}),a4e=fwe(function(G){var ue=D2e(G),Te=kwe(G,eSe);return ue===D2e(Te)?ue=c:Te.pop(),Te.length&&Te[0]===G[0]?Uxe(Te,Jye(ue,2)):[]}),s4e=fwe(function(G){var ue=D2e(G),Te=kwe(G,eSe);return ue=typeof ue=="function"?ue:c,ue&&Te.pop(),Te.length&&Te[0]===G[0]?Uxe(Te,c,ue):[]});function l4e(G,ue){return G==null?"":iTe.call(G,ue)}function D2e(G){var ue=G==null?0:G.length;return ue?G[ue-1]:c}function u4e(G,ue,Te){var Pa=G==null?0:G.length;if(!Pa)return-1;var J$=Pa;return Te!==c&&(J$=lwe(Te),J$=J$<0?Gwe(Pa+J$,0):a2e(J$,Pa-1)),ue===ue?V3e(G,ue,J$):s_e(G,h$e,J$,!0)}function c4e(G,ue){return G&&G.length?uCe(G,lwe(ue)):c}var d4e=fwe(QCe);function QCe(G,ue){return G&&G.length&&ue&&ue.length?Kxe(G,ue):G}function f4e(G,ue,Te){return G&&G.length&&ue&&ue.length?Kxe(G,ue,Jye(Te,2)):G}function p4e(G,ue,Te){return G&&G.length&&ue&&ue.length?Kxe(G,ue,c,Te):G}var h4e=f_e(function(G,ue){var Te=G==null?0:G.length,Pa=zxe(G,ue);return fCe(G,kwe(ue,function(J$){return p_e(J$,Te)?+J$:J$}).sort($Ce)),Pa});function m4e(G,ue){var Te=[];if(!(G&&G.length))return Te;var Pa=-1,J$=[],uS=G.length;for(ue=Jye(ue,3);++Pa<uS;){var gS=G[Pa];ue(gS,Pa,G)&&(Te.push(gS),J$.push(Pa))}return fCe(G,J$),Te}function hSe(G){return G==null?G:lTe.call(G)}function g4e(G,ue,Te){var Pa=G==null?0:G.length;return Pa?(Te&&typeof Te!="number"&&m2e(G,ue,Te)?(ue=0,Te=Pa):(ue=ue==null?0:lwe(ue),Te=Te===c?Pa:lwe(Te)),B2e(G,ue,Te)):[]}function v4e(G,ue){return fxe(G,ue)}function y4e(G,ue,Te){return Xxe(G,ue,Jye(Te,2))}function b4e(G,ue){var Te=G==null?0:G.length;if(Te){var Pa=fxe(G,ue);if(Pa<Te&&K2e(G[Pa],ue))return Pa}return-1}function w4e(G,ue){return fxe(G,ue,!0)}function _4e(G,ue,Te){return Xxe(G,ue,Jye(Te,2),!0)}function $4e(G,ue){var Te=G==null?0:G.length;if(Te){var Pa=fxe(G,ue,!0)-1;if(K2e(G[Pa],ue))return Pa}return-1}function x4e(G){return G&&G.length?hCe(G):[]}function S4e(G,ue){return G&&G.length?hCe(G,Jye(ue,2)):[]}function C4e(G){var ue=G==null?0:G.length;return ue?B2e(G,1,ue):[]}function T4e(G,ue,Te){return G&&G.length?(ue=Te||ue===c?1:lwe(ue),B2e(G,0,ue<0?0:ue)):[]}function k4e(G,ue,Te){var Pa=G==null?0:G.length;return Pa?(ue=Te||ue===c?1:lwe(ue),ue=Pa-ue,B2e(G,ue<0?0:ue,Pa)):[]}function E4e(G,ue){return G&&G.length?pxe(G,Jye(ue,3),!1,!0):[]}function O4e(G,ue){return G&&G.length?pxe(G,Jye(ue,3)):[]}var A4e=fwe(function(G){return x_e(n2e(G,1,zwe,!0))}),I4e=fwe(function(G){var ue=D2e(G);return zwe(ue)&&(ue=c),x_e(n2e(G,1,zwe,!0),Jye(ue,2))}),M4e=fwe(function(G){var ue=D2e(G);return ue=typeof ue=="function"?ue:c,x_e(n2e(G,1,zwe,!0),c,ue)});function N4e(G){return G&&G.length?x_e(G):[]}function P4e(G,ue){return G&&G.length?x_e(G,Jye(ue,2)):[]}function R4e(G,ue){return ue=typeof ue=="function"?ue:c,G&&G.length?x_e(G,c,ue):[]}function mSe(G){if(!(G&&G.length))return[];var ue=0;return G=J2e(G,function(Te){if(zwe(Te))return ue=Gwe(Te.length,ue),!0}),W_e(ue,function(Te){return kwe(G,H_e(Te))})}function e3e(G,ue){if(!(G&&G.length))return[];var Te=mSe(G);return ue==null?Te:kwe(Te,function(Pa){return f2e(ue,c,Pa)})}var B4e=fwe(function(G,ue){return zwe(G)?x$e(G,ue):[]}),D4e=fwe(function(G){return Qxe(J2e(G,zwe))}),L4e=fwe(function(G){var ue=D2e(G);return zwe(ue)&&(ue=c),Qxe(J2e(G,zwe),Jye(ue,2))}),F4e=fwe(function(G){var ue=D2e(G);return ue=typeof ue=="function"?ue:c,Qxe(J2e(G,zwe),c,ue)}),z4e=fwe(mSe);function j4e(G,ue){return yCe(G||[],ue||[],$$e)}function V4e(G,ue){return yCe(G||[],ue||[],T$e)}var H4e=fwe(function(G){var ue=G.length,Te=ue>1?G[ue-1]:c;return Te=typeof Te=="function"?(G.pop(),Te):c,e3e(G,Te)});function t3e(G){var ue=oS(G);return ue.__chain__=!0,ue}function U4e(G,ue){return ue(G),G}function $xe(G,ue){return ue(G)}var W4e=f_e(function(G){var ue=G.length,Te=ue?G[0]:0,Pa=this.__wrapped__,J$=function(uS){return zxe(uS,G)};return ue>1||this.__actions__.length||!(Pa instanceof vwe)||!p_e(Te)?this.thru(J$):(Pa=Pa.slice(Te,+Te+(ue?1:0)),Pa.__actions__.push({func:$xe,args:[J$],thisArg:c}),new P2e(Pa,this.__chain__).thru(function(uS){return ue&&!uS.length&&uS.push(c),uS}))});function q4e(){return t3e(this)}function G4e(){return new P2e(this.value(),this.__chain__)}function K4e(){this.__values__===c&&(this.__values__=m3e(this.value()));var G=this.__index__>=this.__values__.length,ue=G?c:this.__values__[this.__index__++];return{done:G,value:ue}}function Y4e(){return this}function Z4e(G){for(var ue,Te=this;Te instanceof sxe;){var Pa=KCe(Te);Pa.__index__=0,Pa.__values__=c,ue?J$.__wrapped__=Pa:ue=Pa;var J$=Pa;Te=Te.__wrapped__}return J$.__wrapped__=G,ue}function X4e(){var G=this.__wrapped__;if(G instanceof vwe){var ue=G;return this.__actions__.length&&(ue=new vwe(this)),ue=ue.reverse(),ue.__actions__.push({func:$xe,args:[hSe],thisArg:c}),new P2e(ue,this.__chain__)}return this.thru(hSe)}function J4e(){return vCe(this.__wrapped__,this.__actions__)}var Q4e=hxe(function(G,ue,Te){Ewe.call(G,Te)?++G[Te]:c_e(G,Te,1)});function eEe(G,ue,Te){var Pa=owe(G)?U$e:UTe;return Te&&m2e(G,ue,Te)&&(ue=c),Pa(G,Jye(ue,3))}function tEe(G,ue){var Te=owe(G)?J2e:eCe;return Te(G,Jye(ue,3))}var rEe=ECe(YCe),nEe=ECe(ZCe);function iEe(G,ue){return n2e(xxe(G,ue),1)}function oEe(G,ue){return n2e(xxe(G,ue),K$)}function aEe(G,ue,Te){return Te=Te===c?1:lwe(Te),n2e(xxe(G,ue),Te)}function r3e(G,ue){var Te=owe(G)?p2e:$_e;return Te(G,Jye(ue,3))}function n3e(G,ue){var Te=owe(G)?z_e:QSe;return Te(G,Jye(ue,3))}var sEe=hxe(function(G,ue,Te){Ewe.call(G,Te)?G[Te].push(ue):c_e(G,Te,[ue])});function lEe(G,ue,Te,Pa){G=w2e(G)?G:t$e(G),Te=Te&&!Pa?lwe(Te):0;var J$=G.length;return Te<0&&(Te=Gwe(J$+Te,0)),Exe(G)?Te<=J$&&G.indexOf(ue,Te)>-1:!!J$&&Q2e(G,ue,Te)>-1}var uEe=fwe(function(G,ue,Te){var Pa=-1,J$=typeof ue=="function",uS=w2e(G)?qS(G.length):[];return $_e(G,function(gS){uS[++Pa]=J$?f2e(ue,gS,Te):S$e(gS,ue,Te)}),uS}),cEe=hxe(function(G,ue,Te){c_e(G,Te,ue)});function xxe(G,ue){var Te=owe(G)?kwe:aCe;return Te(G,Jye(ue,3))}function dEe(G,ue,Te,Pa){return G==null?[]:(owe(ue)||(ue=ue==null?[]:[ue]),Te=Pa?c:Te,owe(Te)||(Te=Te==null?[]:[Te]),cCe(G,ue,Te))}var fEe=hxe(function(G,ue,Te){G[Te?0:1].push(ue)},function(){return[[],[]]});function pEe(G,ue,Te){var Pa=owe(G)?y2e:g$e,J$=arguments.length<3;return Pa(G,Jye(ue,4),Te,J$,$_e)}function hEe(G,ue,Te){var Pa=owe(G)?W$e:g$e,J$=arguments.length<3;return Pa(G,Jye(ue,4),Te,J$,QSe)}function mEe(G,ue){var Te=owe(G)?J2e:eCe;return Te(G,Txe(Jye(ue,3)))}function gEe(G){var ue=owe(G)?YSe:lke;return ue(G)}function vEe(G,ue,Te){(Te?m2e(G,ue,Te):ue===c)?ue=1:ue=lwe(ue);var Pa=owe(G)?FTe:uke;return Pa(G,ue)}function yEe(G){var ue=owe(G)?zTe:dke;return ue(G)}function bEe(G){if(G==null)return 0;if(w2e(G))return Exe(G)?q_e(G):G.length;var ue=s2e(G);return ue==Z$||ue==eS?G.size:qxe(G).length}function wEe(G,ue,Te){var Pa=owe(G)?V_e:fke;return Te&&m2e(G,ue,Te)&&(ue=c),Pa(G,Jye(ue,3))}var _Ee=fwe(function(G,ue){if(G==null)return[];var Te=ue.length;return Te>1&&m2e(G,ue[0],ue[1])?ue=[]:Te>2&&m2e(ue[0],ue[1],ue[2])&&(ue=[ue[0]]),cCe(G,n2e(ue,1),[])}),Sxe=tTe||function(){return Fwe.Date.now()};function $Ee(G,ue){if(typeof ue!="function")throw new N2e(v);return G=lwe(G),function(){if(--G<1)return ue.apply(this,arguments)}}function i3e(G,ue,Te){return ue=Te?c:ue,ue=G&&ue==null?G.length:ue,d_e(G,Ae,c,c,c,c,ue)}function o3e(G,ue){var Te;if(typeof ue!="function")throw new N2e(v);return G=lwe(G),function(){return--G>0&&(Te=ue.apply(this,arguments)),G<=1&&(ue=c),Te}}var gSe=fwe(function(G,ue,Te){var Pa=Y;if(Te.length){var J$=W2e(Te,Q_e(gSe));Pa|=ge}return d_e(G,Pa,ue,Te,J$)}),a3e=fwe(function(G,ue,Te){var Pa=Y|re;if(Te.length){var J$=W2e(Te,Q_e(a3e));Pa|=ge}return d_e(ue,Pa,G,Te,J$)});function s3e(G,ue,Te){ue=Te?c:ue;var Pa=d_e(G,de,c,c,c,c,c,ue);return Pa.placeholder=s3e.placeholder,Pa}function l3e(G,ue,Te){ue=Te?c:ue;var Pa=d_e(G,he,c,c,c,c,c,ue);return Pa.placeholder=l3e.placeholder,Pa}function u3e(G,ue,Te){var Pa,J$,uS,gS,$S,PS,wye=0,_ye=!1,Cye=!1,Pye=!0;if(typeof G!="function")throw new N2e(v);ue=L2e(ue)||0,Rwe(Te)&&(_ye=!!Te.leading,Cye="maxWait"in Te,uS=Cye?Gwe(L2e(Te.maxWait)||0,ue):uS,Pye="trailing"in Te?!!Te.trailing:Pye);function Wye(jwe){var Y2e=Pa,g_e=J$;return Pa=J$=c,wye=jwe,gS=G.apply(g_e,Y2e),gS}function Qye(jwe){return wye=jwe,$S=O$e(mwe,ue),_ye?Wye(jwe):gS}function uwe(jwe){var Y2e=jwe-PS,g_e=jwe-wye,E3e=ue-Y2e;return Cye?a2e(E3e,uS-g_e):E3e}function ewe(jwe){var Y2e=jwe-PS,g_e=jwe-wye;return PS===c||Y2e>=ue||Y2e<0||Cye&&g_e>=uS}function mwe(){var jwe=Sxe();if(ewe(jwe))return wwe(jwe);$S=O$e(mwe,uwe(jwe))}function wwe(jwe){return $S=c,Pye&&Pa?Wye(jwe):(Pa=J$=c,gS)}function E2e(){$S!==c&&bCe($S),wye=0,Pa=PS=J$=$S=c}function g2e(){return $S===c?gS:wwe(Sxe())}function O2e(){var jwe=Sxe(),Y2e=ewe(jwe);if(Pa=arguments,J$=this,PS=jwe,Y2e){if($S===c)return Qye(PS);if(Cye)return bCe($S),$S=O$e(mwe,ue),Wye(PS)}return $S===c&&($S=O$e(mwe,ue)),gS}return O2e.cancel=E2e,O2e.flush=g2e,O2e}var xEe=fwe(function(G,ue){return JSe(G,1,ue)}),SEe=fwe(function(G,ue,Te){return JSe(G,L2e(ue)||0,Te)});function CEe(G){return d_e(G,Be)}function Cxe(G,ue){if(typeof G!="function"||ue!=null&&typeof ue!="function")throw new N2e(v);var Te=function(){var Pa=arguments,J$=ue?ue.apply(this,Pa):Pa[0],uS=Te.cache;if(uS.has(J$))return uS.get(J$);var gS=G.apply(this,Pa);return Te.cache=uS.set(J$,gS)||uS,gS};return Te.cache=new(Cxe.Cache||u_e),Te}Cxe.Cache=u_e;function Txe(G){if(typeof G!="function")throw new N2e(v);return function(){var ue=arguments;switch(ue.length){case 0:return!G.call(this);case 1:return!G.call(this,ue[0]);case 2:return!G.call(this,ue[0],ue[1]);case 3:return!G.call(this,ue[0],ue[1],ue[2])}return!G.apply(this,ue)}}function TEe(G){return o3e(2,G)}var kEe=pke(function(G,ue){ue=ue.length==1&&owe(ue[0])?kwe(ue[0],q$(Jye())):kwe(n2e(ue,1),q$(Jye()));var Te=ue.length;return fwe(function(Pa){for(var J$=-1,uS=a2e(Pa.length,Te);++J$<uS;)Pa[J$]=ue[J$].call(this,Pa[J$]);return f2e(G,this,Pa)})}),vSe=fwe(function(G,ue){var Te=W2e(ue,Q_e(vSe));return d_e(G,ge,c,ue,Te)}),c3e=fwe(function(G,ue){var Te=W2e(ue,Q_e(c3e));return d_e(G,Se,c,ue,Te)}),EEe=f_e(function(G,ue){return d_e(G,Re,c,c,c,ue)});function OEe(G,ue){if(typeof G!="function")throw new N2e(v);return ue=ue===c?ue:lwe(ue),fwe(G,ue)}function AEe(G,ue){if(typeof G!="function")throw new N2e(v);return ue=ue==null?0:Gwe(lwe(ue),0),fwe(function(Te){var Pa=Te[ue],J$=C_e(Te,0,ue);return Pa&&C2e(J$,Pa),f2e(G,this,J$)})}function IEe(G,ue,Te){var Pa=!0,J$=!0;if(typeof G!="function")throw new N2e(v);return Rwe(Te)&&(Pa="leading"in Te?!!Te.leading:Pa,J$="trailing"in Te?!!Te.trailing:J$),u3e(G,ue,{leading:Pa,maxWait:ue,trailing:J$})}function MEe(G){return i3e(G,1)}function NEe(G,ue){return vSe(tSe(ue),G)}function PEe(){if(!arguments.length)return[];var G=arguments[0];return owe(G)?G:[G]}function REe(G){return R2e(G,N)}function BEe(G,ue){return ue=typeof ue=="function"?ue:c,R2e(G,N,ue)}function DEe(G){return R2e(G,C|N)}function LEe(G,ue){return ue=typeof ue=="function"?ue:c,R2e(G,C|N,ue)}function FEe(G,ue){return ue==null||XSe(G,ue,Xwe(ue))}function K2e(G,ue){return G===ue||G!==G&&ue!==ue}var zEe=yxe(Hxe),jEe=yxe(function(G,ue){return G>=ue}),B_e=nCe(function(){return arguments}())?nCe:function(G){return Dwe(G)&&Ewe.call(G,"callee")&&!HSe.call(G,"callee")},owe=qS.isArray,VEe=a$e?q$(a$e):ZTe;function w2e(G){return G!=null&&kxe(G.length)&&!h_e(G)}function zwe(G){return Dwe(G)&&w2e(G)}function HEe(G){return G===!0||G===!1||Dwe(G)&&h2e(G)==IS}var T_e=nTe||ESe,UEe=j$e?q$(j$e):XTe;function WEe(G){return Dwe(G)&&G.nodeType===1&&!A$e(G)}function qEe(G){if(G==null)return!0;if(w2e(G)&&(owe(G)||typeof G=="string"||typeof G.splice=="function"||T_e(G)||e$e(G)||B_e(G)))return!G.length;var ue=s2e(G);if(ue==Z$||ue==eS)return!G.size;if(E$e(G))return!qxe(G).length;for(var Te in G)if(Ewe.call(G,Te))return!1;return!0}function GEe(G,ue){return C$e(G,ue)}function KEe(G,ue,Te){Te=typeof Te=="function"?Te:c;var Pa=Te?Te(G,ue):c;return Pa===c?C$e(G,ue,c,Te):!!Pa}function ySe(G){if(!Dwe(G))return!1;var ue=h2e(G);return ue==zS||ue==MS||typeof G.message=="string"&&typeof G.name=="string"&&!A$e(G)}function YEe(G){return typeof G=="number"&&WSe(G)}function h_e(G){if(!Rwe(G))return!1;var ue=h2e(G);return ue==LS||ue==nS||ue==bS||ue==yS}function d3e(G){return typeof G=="number"&&G==lwe(G)}function kxe(G){return typeof G=="number"&&G>-1&&G%1==0&&G<=Y$}function Rwe(G){var ue=typeof G;return G!=null&&(ue=="object"||ue=="function")}function Dwe(G){return G!=null&&typeof G=="object"}var f3e=s$e?q$(s$e):QTe;function ZEe(G,ue){return G===ue||Wxe(G,ue,lSe(ue))}function XEe(G,ue,Te){return Te=typeof Te=="function"?Te:c,Wxe(G,ue,lSe(ue),Te)}function JEe(G){return p3e(G)&&G!=+G}function QEe(G){if(Bke(G))throw new iwe(g);return iCe(G)}function eOe(G){return G===null}function tOe(G){return G==null}function p3e(G){return typeof G=="number"||Dwe(G)&&h2e(G)==dS}function A$e(G){if(!Dwe(G)||h2e(G)!=wy)return!1;var ue=exe(G);if(ue===null)return!0;var Te=Ewe.call(ue,"constructor")&&ue.constructor;return typeof Te=="function"&&Te instanceof Te&&Z$e.call(Te)==X3e}var bSe=l$e?q$(l$e):eke;function rOe(G){return d3e(G)&&G>=-Y$&&G<=Y$}var h3e=u$e?q$(u$e):tke;function Exe(G){return typeof G=="string"||!owe(G)&&Dwe(G)&&h2e(G)==cS}function k2e(G){return typeof G=="symbol"||Dwe(G)&&h2e(G)==wS}var e$e=V$e?q$(V$e):rke;function nOe(G){return G===c}function iOe(G){return Dwe(G)&&s2e(G)==OS}function oOe(G){return Dwe(G)&&h2e(G)==mS}var aOe=yxe(Gxe),sOe=yxe(function(G,ue){return G<=ue});function m3e(G){if(!G)return[];if(w2e(G))return Exe(G)?q2e(G):b2e(G);if(v$e&&G[v$e])return nwe(G[v$e]());var ue=s2e(G),Te=ue==Z$?gwe:ue==eS?G$e:t$e;return Te(G)}function m_e(G){if(!G)return G===0?G:0;if(G=L2e(G),G===K$||G===-K$){var ue=G<0?-1:1;return ue*W$}return G===G?G:0}function lwe(G){var ue=m_e(G),Te=ue%1;return ue===ue?Te?ue-Te:ue:0}function g3e(G){return G?M_e(lwe(G),0,hy):0}function L2e(G){if(typeof G=="number")return G;if(k2e(G))return U$;if(Rwe(G)){var ue=typeof G.valueOf=="function"?G.valueOf():G;G=Rwe(ue)?ue+"":ue}if(typeof G!="string")return G===0?G:+G;G=An(G);var Te=t2e.test(G);return Te||CS.test(G)?r$e(G.slice(2),Te?2:8):e2e.test(G)?U$:+G}function v3e(G){return r_e(G,_2e(G))}function lOe(G){return G?M_e(lwe(G),-Y$,Y$):G===0?G:0}function Twe(G){return G==null?"":T2e(G)}var uOe=X_e(function(G,ue){if(E$e(ue)||w2e(ue)){r_e(ue,Xwe(ue),G);return}for(var Te in ue)Ewe.call(ue,Te)&&$$e(G,Te,ue[Te])}),y3e=X_e(function(G,ue){r_e(ue,_2e(ue),G)}),Oxe=X_e(function(G,ue,Te,Pa){r_e(ue,_2e(ue),G,Pa)}),cOe=X_e(function(G,ue,Te,Pa){r_e(ue,Xwe(ue),G,Pa)}),dOe=f_e(zxe);function fOe(G,ue){var Te=Z_e(G);return ue==null?Te:ZSe(Te,ue)}var pOe=fwe(function(G,ue){G=Iwe(G);var Te=-1,Pa=ue.length,J$=Pa>2?ue[2]:c;for(J$&&m2e(ue[0],ue[1],J$)&&(Pa=1);++Te<Pa;)for(var uS=ue[Te],gS=_2e(uS),$S=-1,PS=gS.length;++$S<PS;){var wye=gS[$S],_ye=G[wye];(_ye===c||K2e(_ye,G_e[wye])&&!Ewe.call(G,wye))&&(G[wye]=uS[wye])}return G}),hOe=fwe(function(G){return G.push(c,RCe),f2e(b3e,c,G)});function mOe(G,ue){return f$e(G,Jye(ue,3),t_e)}function gOe(G,ue){return f$e(G,Jye(ue,3),Vxe)}function vOe(G,ue){return G==null?G:jxe(G,Jye(ue,3),_2e)}function yOe(G,ue){return G==null?G:tCe(G,Jye(ue,3),_2e)}function bOe(G,ue){return G&&t_e(G,Jye(ue,3))}function wOe(G,ue){return G&&Vxe(G,Jye(ue,3))}function _Oe(G){return G==null?[]:cxe(G,Xwe(G))}function $Oe(G){return G==null?[]:cxe(G,_2e(G))}function wSe(G,ue,Te){var Pa=G==null?c:N_e(G,ue);return Pa===c?Te:Pa}function xOe(G,ue){return G!=null&&LCe(G,ue,qTe)}function _Se(G,ue){return G!=null&&LCe(G,ue,GTe)}var SOe=ACe(function(G,ue,Te){ue!=null&&typeof ue.toString!="function"&&(ue=X$e.call(ue)),G[ue]=Te},xSe($2e)),COe=ACe(function(G,ue,Te){ue!=null&&typeof ue.toString!="function"&&(ue=X$e.call(ue)),Ewe.call(G,ue)?G[ue].push(Te):G[ue]=[Te]},Jye),TOe=fwe(S$e);function Xwe(G){return w2e(G)?KSe(G):qxe(G)}function _2e(G){return w2e(G)?KSe(G,!0):nke(G)}function kOe(G,ue){var Te={};return ue=Jye(ue,3),t_e(G,function(Pa,J$,uS){c_e(Te,ue(Pa,J$,uS),Pa)}),Te}function EOe(G,ue){var Te={};return ue=Jye(ue,3),t_e(G,function(Pa,J$,uS){c_e(Te,J$,ue(Pa,J$,uS))}),Te}var OOe=X_e(function(G,ue,Te){dxe(G,ue,Te)}),b3e=X_e(function(G,ue,Te,Pa){dxe(G,ue,Te,Pa)}),AOe=f_e(function(G,ue){var Te={};if(G==null)return Te;var Pa=!1;ue=kwe(ue,function(uS){return uS=S_e(uS,G),Pa||(Pa=uS.length>1),uS}),r_e(G,aSe(G),Te),Pa&&(Te=R2e(Te,C|E|N,Ske));for(var J$=ue.length;J$--;)Jxe(Te,ue[J$]);return Te});function IOe(G,ue){return w3e(G,Txe(Jye(ue)))}var MOe=f_e(function(G,ue){return G==null?{}:oke(G,ue)});function w3e(G,ue){if(G==null)return{};var Te=kwe(aSe(G),function(Pa){return[Pa]});return ue=Jye(ue),dCe(G,Te,function(Pa,J$){return ue(Pa,J$[0])})}function NOe(G,ue,Te){ue=S_e(ue,G);var Pa=-1,J$=ue.length;for(J$||(J$=1,G=c);++Pa<J$;){var uS=G==null?c:G[n_e(ue[Pa])];uS===c&&(Pa=J$,uS=Te),G=h_e(uS)?uS.call(G):uS}return G}function POe(G,ue,Te){return G==null?G:T$e(G,ue,Te)}function ROe(G,ue,Te,Pa){return Pa=typeof Pa=="function"?Pa:c,G==null?G:T$e(G,ue,Te,Pa)}var _3e=NCe(Xwe),$3e=NCe(_2e);function BOe(G,ue,Te){var Pa=owe(G),J$=Pa||T_e(G)||e$e(G);if(ue=Jye(ue,4),Te==null){var uS=G&&G.constructor;J$?Te=Pa?new uS:[]:Rwe(G)?Te=h_e(uS)?Z_e(exe(G)):{}:Te={}}return(J$?p2e:t_e)(G,function(gS,$S,PS){return ue(Te,gS,$S,PS)}),Te}function DOe(G,ue){return G==null?!0:Jxe(G,ue)}function LOe(G,ue,Te){return G==null?G:gCe(G,ue,tSe(Te))}function FOe(G,ue,Te,Pa){return Pa=typeof Pa=="function"?Pa:c,G==null?G:gCe(G,ue,tSe(Te),Pa)}function t$e(G){return G==null?[]:iS(G,Xwe(G))}function zOe(G){return G==null?[]:iS(G,_2e(G))}function jOe(G,ue,Te){return Te===c&&(Te=ue,ue=c),Te!==c&&(Te=L2e(Te),Te=Te===Te?Te:0),ue!==c&&(ue=L2e(ue),ue=ue===ue?ue:0),M_e(L2e(G),ue,Te)}function VOe(G,ue,Te){return ue=m_e(ue),Te===c?(Te=ue,ue=0):Te=m_e(Te),G=L2e(G),KTe(G,ue,Te)}function HOe(G,ue,Te){if(Te&&typeof Te!="boolean"&&m2e(G,ue,Te)&&(ue=Te=c),Te===c&&(typeof ue=="boolean"?(Te=ue,ue=c):typeof G=="boolean"&&(Te=G,G=c)),G===c&&ue===c?(G=0,ue=1):(G=m_e(G),ue===c?(ue=G,G=0):ue=m_e(ue)),G>ue){var Pa=G;G=ue,ue=Pa}if(Te||G%1||ue%1){var J$=qSe();return a2e(G+J$*(ue-G+z$e("1e-"+((J$+"").length-1))),ue)}return Yxe(G,ue)}var UOe=J_e(function(G,ue,Te){return ue=ue.toLowerCase(),G+(Te?x3e(ue):ue)});function x3e(G){return $Se(Twe(G).toLowerCase())}function S3e(G){return G=Twe(G),G&&G.replace(Mye,zye).replace(Oye,"")}function WOe(G,ue,Te){G=Twe(G),ue=T2e(ue);var Pa=G.length;Te=Te===c?Pa:M_e(lwe(Te),0,Pa);var J$=Te;return Te-=ue.length,Te>=0&&G.slice(Te,J$)==ue}function qOe(G){return G=Twe(G),G&&Bye.test(G)?G.replace(jS,Nye):G}function GOe(G){return G=Twe(G),G&&VS.test(G)?G.replace(Owe,"\\$&"):G}var KOe=J_e(function(G,ue,Te){return G+(Te?"-":"")+ue.toLowerCase()}),YOe=J_e(function(G,ue,Te){return G+(Te?" ":"")+ue.toLowerCase()}),ZOe=kCe("toLowerCase");function XOe(G,ue,Te){G=Twe(G),ue=lwe(ue);var Pa=ue?q_e(G):0;if(!ue||Pa>=ue)return G;var J$=(ue-Pa)/2;return vxe(ixe(J$),Te)+G+vxe(nxe(J$),Te)}function JOe(G,ue,Te){G=Twe(G),ue=lwe(ue);var Pa=ue?q_e(G):0;return ue&&Pa<ue?G+vxe(ue-Pa,Te):G}function QOe(G,ue,Te){G=Twe(G),ue=lwe(ue);var Pa=ue?q_e(G):0;return ue&&Pa<ue?vxe(ue-Pa,Te)+G:G}function eAe(G,ue,Te){return Te||ue==null?ue=0:ue&&(ue=+ue),sTe(Twe(G).replace(Zye,""),ue||0)}function tAe(G,ue,Te){return(Te?m2e(G,ue,Te):ue===c)?ue=1:ue=lwe(ue),Zxe(Twe(G),ue)}function rAe(){var G=arguments,ue=Twe(G[0]);return G.length<3?ue:ue.replace(G[1],G[2])}var nAe=J_e(function(G,ue,Te){return G+(Te?"_":"")+ue.toLowerCase()});function iAe(G,ue,Te){return Te&&typeof Te!="number"&&m2e(G,ue,Te)&&(ue=Te=c),Te=Te===c?hy:Te>>>0,Te?(G=Twe(G),G&&(typeof ue=="string"||ue!=null&&!bSe(ue))&&(ue=T2e(ue),!ue&&bwe(G))?C_e(q2e(G),0,Te):G.split(ue,Te)):[]}var oAe=J_e(function(G,ue,Te){return G+(Te?" ":"")+$Se(ue)});function aAe(G,ue,Te){return G=Twe(G),Te=Te==null?0:M_e(lwe(Te),0,G.length),ue=T2e(ue),G.slice(Te,Te+ue.length)==ue}function sAe(G,ue,Te){var Pa=oS.templateSettings;Te&&m2e(G,ue,Te)&&(ue=c),G=Twe(G),ue=Oxe({},ue,Pa,PCe);var J$=Oxe({},ue.imports,Pa.imports,PCe),uS=Xwe(J$),gS=iS(J$,uS),$S,PS,wye=0,_ye=ue.interpolate||rwe,Cye="__p += '",Pye=Rxe((ue.escape||rwe).source+"|"+_ye.source+"|"+(_ye===Cwe?Kwe:rwe).source+"|"+(ue.evaluate||rwe).source+"|$","g"),Wye="//# sourceURL="+(Ewe.call(ue,"sourceURL")?(ue.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Lye+"]")+`
`;G.replace(Pye,function(ewe,mwe,wwe,E2e,g2e,O2e){return wwe||(wwe=E2e),Cye+=G.slice(wye,O2e).replace(awe,Xye),mwe&&($S=!0,Cye+=`' +
__e(`+mwe+`) +
'`),g2e&&(PS=!0,Cye+=`';
`+g2e+`;
__p += '`),wwe&&(Cye+=`' +
((__t = (`+wwe+`)) == null ? '' : __t) +
'`),wye=O2e+ewe.length,ewe}),Cye+=`';
`;var Qye=Ewe.call(ue,"variable")&&ue.variable;if(!Qye)Cye=`with (obj) {
`+Cye+`
}
`;else if(Nwe.test(Qye))throw new iwe(b);Cye=(PS?Cye.replace(jye,""):Cye).replace(sS,"$1").replace(TS,"$1;"),Cye="function("+(Qye||"obj")+`) {
`+(Qye?"":`obj || (obj = {});
`)+"var __t, __p = ''"+($S?", __e = _.escape":"")+(PS?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Cye+`return __p
}`;var uwe=T3e(function(){return Swe(uS,Wye+"return "+Cye).apply(c,gS)});if(uwe.source=Cye,ySe(uwe))throw uwe;return uwe}function lAe(G){return Twe(G).toLowerCase()}function uAe(G){return Twe(G).toUpperCase()}function cAe(G,ue,Te){if(G=Twe(G),G&&(Te||ue===c))return An(G);if(!G||!(ue=T2e(ue)))return G;var Pa=q2e(G),J$=q2e(ue),uS=kS(Pa,J$),gS=pC(Pa,J$)+1;return C_e(Pa,uS,gS).join("")}function dAe(G,ue,Te){if(G=Twe(G),G&&(Te||ue===c))return G.slice(0,FSe(G)+1);if(!G||!(ue=T2e(ue)))return G;var Pa=q2e(G),J$=pC(Pa,q2e(ue))+1;return C_e(Pa,0,J$).join("")}function fAe(G,ue,Te){if(G=Twe(G),G&&(Te||ue===c))return G.replace(Zye,"");if(!G||!(ue=T2e(ue)))return G;var Pa=q2e(G),J$=kS(Pa,q2e(ue));return C_e(Pa,J$).join("")}function pAe(G,ue){var Te=Ke,Pa=Lr;if(Rwe(ue)){var J$="separator"in ue?ue.separator:J$;Te="length"in ue?lwe(ue.length):Te,Pa="omission"in ue?T2e(ue.omission):Pa}G=Twe(G);var uS=G.length;if(bwe(G)){var gS=q2e(G);uS=gS.length}if(Te>=uS)return G;var $S=Te-q_e(Pa);if($S<1)return Pa;var PS=gS?C_e(gS,0,$S).join(""):G.slice(0,$S);if(J$===c)return PS+Pa;if(gS&&($S+=PS.length-$S),bSe(J$)){if(G.slice($S).search(J$)){var wye,_ye=PS;for(J$.global||(J$=Rxe(J$.source,Twe(Qwe.exec(J$))+"g")),J$.lastIndex=0;wye=J$.exec(_ye);)var Cye=wye.index;PS=PS.slice(0,Cye===c?$S:Cye)}}else if(G.indexOf(T2e(J$),$S)!=$S){var Pye=PS.lastIndexOf(J$);Pye>-1&&(PS=PS.slice(0,Pye))}return PS+Pa}function hAe(G){return G=Twe(G),G&&KS.test(G)?G.replace(AS,H3e):G}var mAe=J_e(function(G,ue,Te){return G+(Te?" ":"")+ue.toUpperCase()}),$Se=kCe("toUpperCase");function C3e(G,ue,Te){return G=Twe(G),ue=Te?c:ue,ue===c?GS(G)?q3e(G):q$e(G):G.match(ue)||[]}var T3e=fwe(function(G,ue){try{return f2e(G,c,ue)}catch(Te){return ySe(Te)?Te:new iwe(Te)}}),gAe=f_e(function(G,ue){return p2e(ue,function(Te){Te=n_e(Te),c_e(G,Te,gSe(G[Te],G))}),G});function vAe(G){var ue=G==null?0:G.length,Te=Jye();return G=ue?kwe(G,function(Pa){if(typeof Pa[1]!="function")throw new N2e(v);return[Te(Pa[0]),Pa[1]]}):[],fwe(function(Pa){for(var J$=-1;++J$<ue;){var uS=G[J$];if(f2e(uS[0],this,Pa))return f2e(uS[1],this,Pa)}})}function yAe(G){return HTe(R2e(G,C))}function xSe(G){return function(){return G}}function bAe(G,ue){return G==null||G!==G?ue:G}var wAe=OCe(),_Ae=OCe(!0);function $2e(G){return G}function SSe(G){return oCe(typeof G=="function"?G:R2e(G,C))}function $Ae(G){return sCe(R2e(G,C))}function xAe(G,ue){return lCe(G,R2e(ue,C))}var SAe=fwe(function(G,ue){return function(Te){return S$e(Te,G,ue)}}),CAe=fwe(function(G,ue){return function(Te){return S$e(G,Te,ue)}});function CSe(G,ue,Te){var Pa=Xwe(ue),J$=cxe(ue,Pa);Te==null&&!(Rwe(ue)&&(J$.length||!Pa.length))&&(Te=ue,ue=G,G=this,J$=cxe(ue,Xwe(ue)));var uS=!(Rwe(Te)&&"chain"in Te)||!!Te.chain,gS=h_e(G);return p2e(J$,function($S){var PS=ue[$S];G[$S]=PS,gS&&(G.prototype[$S]=function(){var wye=this.__chain__;if(uS||wye){var _ye=G(this.__wrapped__),Cye=_ye.__actions__=b2e(this.__actions__);return Cye.push({func:PS,args:arguments,thisArg:G}),_ye.__chain__=wye,_ye}return PS.apply(G,C2e([this.value()],arguments))})}),G}function TAe(){return Fwe._===this&&(Fwe._=J3e),this}function TSe(){}function kAe(G){return G=lwe(G),fwe(function(ue){return uCe(ue,G)})}var EAe=nSe(kwe),OAe=nSe(U$e),AAe=nSe(V_e);function k3e(G){return cSe(G)?H_e(n_e(G)):ake(G)}function IAe(G){return function(ue){return G==null?c:N_e(G,ue)}}var MAe=ICe(),NAe=ICe(!0);function kSe(){return[]}function ESe(){return!1}function PAe(){return{}}function RAe(){return""}function BAe(){return!0}function DAe(G,ue){if(G=lwe(G),G<1||G>Y$)return[];var Te=hy,Pa=a2e(G,hy);ue=Jye(ue),G-=hy;for(var J$=W_e(Pa,ue);++Te<G;)ue(Te);return J$}function LAe(G){return owe(G)?kwe(G,n_e):k2e(G)?[G]:b2e(GCe(Twe(G)))}function FAe(G){var ue=++Z3e;return Twe(G)+ue}var zAe=gxe(function(G,ue){return G+ue},0),jAe=iSe("ceil"),VAe=gxe(function(G,ue){return G/ue},1),HAe=iSe("floor");function UAe(G){return G&&G.length?uxe(G,$2e,Hxe):c}function WAe(G,ue){return G&&G.length?uxe(G,Jye(ue,2),Hxe):c}function qAe(G){return m$e(G,$2e)}function GAe(G,ue){return m$e(G,Jye(ue,2))}function KAe(G){return G&&G.length?uxe(G,$2e,Gxe):c}function YAe(G,ue){return G&&G.length?uxe(G,Jye(ue,2),Gxe):c}var ZAe=gxe(function(G,ue){return G*ue},1),XAe=iSe("round"),JAe=gxe(function(G,ue){return G-ue},0);function QAe(G){return G&&G.length?b_e(G,$2e):0}function e6e(G,ue){return G&&G.length?b_e(G,Jye(ue,2)):0}return oS.after=$Ee,oS.ary=i3e,oS.assign=uOe,oS.assignIn=y3e,oS.assignInWith=Oxe,oS.assignWith=cOe,oS.at=dOe,oS.before=o3e,oS.bind=gSe,oS.bindAll=gAe,oS.bindKey=a3e,oS.castArray=PEe,oS.chain=t3e,oS.chunk=Hke,oS.compact=Uke,oS.concat=Wke,oS.cond=vAe,oS.conforms=yAe,oS.constant=xSe,oS.countBy=Q4e,oS.create=fOe,oS.curry=s3e,oS.curryRight=l3e,oS.debounce=u3e,oS.defaults=pOe,oS.defaultsDeep=hOe,oS.defer=xEe,oS.delay=SEe,oS.difference=qke,oS.differenceBy=Gke,oS.differenceWith=Kke,oS.drop=Yke,oS.dropRight=Zke,oS.dropRightWhile=Xke,oS.dropWhile=Jke,oS.fill=Qke,oS.filter=tEe,oS.flatMap=iEe,oS.flatMapDeep=oEe,oS.flatMapDepth=aEe,oS.flatten=XCe,oS.flattenDeep=e4e,oS.flattenDepth=t4e,oS.flip=CEe,oS.flow=wAe,oS.flowRight=_Ae,oS.fromPairs=r4e,oS.functions=_Oe,oS.functionsIn=$Oe,oS.groupBy=sEe,oS.initial=i4e,oS.intersection=o4e,oS.intersectionBy=a4e,oS.intersectionWith=s4e,oS.invert=SOe,oS.invertBy=COe,oS.invokeMap=uEe,oS.iteratee=SSe,oS.keyBy=cEe,oS.keys=Xwe,oS.keysIn=_2e,oS.map=xxe,oS.mapKeys=kOe,oS.mapValues=EOe,oS.matches=$Ae,oS.matchesProperty=xAe,oS.memoize=Cxe,oS.merge=OOe,oS.mergeWith=b3e,oS.method=SAe,oS.methodOf=CAe,oS.mixin=CSe,oS.negate=Txe,oS.nthArg=kAe,oS.omit=AOe,oS.omitBy=IOe,oS.once=TEe,oS.orderBy=dEe,oS.over=EAe,oS.overArgs=kEe,oS.overEvery=OAe,oS.overSome=AAe,oS.partial=vSe,oS.partialRight=c3e,oS.partition=fEe,oS.pick=MOe,oS.pickBy=w3e,oS.property=k3e,oS.propertyOf=IAe,oS.pull=d4e,oS.pullAll=QCe,oS.pullAllBy=f4e,oS.pullAllWith=p4e,oS.pullAt=h4e,oS.range=MAe,oS.rangeRight=NAe,oS.rearg=EEe,oS.reject=mEe,oS.remove=m4e,oS.rest=OEe,oS.reverse=hSe,oS.sampleSize=vEe,oS.set=POe,oS.setWith=ROe,oS.shuffle=yEe,oS.slice=g4e,oS.sortBy=_Ee,oS.sortedUniq=x4e,oS.sortedUniqBy=S4e,oS.split=iAe,oS.spread=AEe,oS.tail=C4e,oS.take=T4e,oS.takeRight=k4e,oS.takeRightWhile=E4e,oS.takeWhile=O4e,oS.tap=U4e,oS.throttle=IEe,oS.thru=$xe,oS.toArray=m3e,oS.toPairs=_3e,oS.toPairsIn=$3e,oS.toPath=LAe,oS.toPlainObject=v3e,oS.transform=BOe,oS.unary=MEe,oS.union=A4e,oS.unionBy=I4e,oS.unionWith=M4e,oS.uniq=N4e,oS.uniqBy=P4e,oS.uniqWith=R4e,oS.unset=DOe,oS.unzip=mSe,oS.unzipWith=e3e,oS.update=LOe,oS.updateWith=FOe,oS.values=t$e,oS.valuesIn=zOe,oS.without=B4e,oS.words=C3e,oS.wrap=NEe,oS.xor=D4e,oS.xorBy=L4e,oS.xorWith=F4e,oS.zip=z4e,oS.zipObject=j4e,oS.zipObjectDeep=V4e,oS.zipWith=H4e,oS.entries=_3e,oS.entriesIn=$3e,oS.extend=y3e,oS.extendWith=Oxe,CSe(oS,oS),oS.add=zAe,oS.attempt=T3e,oS.camelCase=UOe,oS.capitalize=x3e,oS.ceil=jAe,oS.clamp=jOe,oS.clone=REe,oS.cloneDeep=DEe,oS.cloneDeepWith=LEe,oS.cloneWith=BEe,oS.conformsTo=FEe,oS.deburr=S3e,oS.defaultTo=bAe,oS.divide=VAe,oS.endsWith=WOe,oS.eq=K2e,oS.escape=qOe,oS.escapeRegExp=GOe,oS.every=eEe,oS.find=rEe,oS.findIndex=YCe,oS.findKey=mOe,oS.findLast=nEe,oS.findLastIndex=ZCe,oS.findLastKey=gOe,oS.floor=HAe,oS.forEach=r3e,oS.forEachRight=n3e,oS.forIn=vOe,oS.forInRight=yOe,oS.forOwn=bOe,oS.forOwnRight=wOe,oS.get=wSe,oS.gt=zEe,oS.gte=jEe,oS.has=xOe,oS.hasIn=_Se,oS.head=JCe,oS.identity=$2e,oS.includes=lEe,oS.indexOf=n4e,oS.inRange=VOe,oS.invoke=TOe,oS.isArguments=B_e,oS.isArray=owe,oS.isArrayBuffer=VEe,oS.isArrayLike=w2e,oS.isArrayLikeObject=zwe,oS.isBoolean=HEe,oS.isBuffer=T_e,oS.isDate=UEe,oS.isElement=WEe,oS.isEmpty=qEe,oS.isEqual=GEe,oS.isEqualWith=KEe,oS.isError=ySe,oS.isFinite=YEe,oS.isFunction=h_e,oS.isInteger=d3e,oS.isLength=kxe,oS.isMap=f3e,oS.isMatch=ZEe,oS.isMatchWith=XEe,oS.isNaN=JEe,oS.isNative=QEe,oS.isNil=tOe,oS.isNull=eOe,oS.isNumber=p3e,oS.isObject=Rwe,oS.isObjectLike=Dwe,oS.isPlainObject=A$e,oS.isRegExp=bSe,oS.isSafeInteger=rOe,oS.isSet=h3e,oS.isString=Exe,oS.isSymbol=k2e,oS.isTypedArray=e$e,oS.isUndefined=nOe,oS.isWeakMap=iOe,oS.isWeakSet=oOe,oS.join=l4e,oS.kebabCase=KOe,oS.last=D2e,oS.lastIndexOf=u4e,oS.lowerCase=YOe,oS.lowerFirst=ZOe,oS.lt=aOe,oS.lte=sOe,oS.max=UAe,oS.maxBy=WAe,oS.mean=qAe,oS.meanBy=GAe,oS.min=KAe,oS.minBy=YAe,oS.stubArray=kSe,oS.stubFalse=ESe,oS.stubObject=PAe,oS.stubString=RAe,oS.stubTrue=BAe,oS.multiply=ZAe,oS.nth=c4e,oS.noConflict=TAe,oS.noop=TSe,oS.now=Sxe,oS.pad=XOe,oS.padEnd=JOe,oS.padStart=QOe,oS.parseInt=eAe,oS.random=HOe,oS.reduce=pEe,oS.reduceRight=hEe,oS.repeat=tAe,oS.replace=rAe,oS.result=NOe,oS.round=XAe,oS.runInContext=NS,oS.sample=gEe,oS.size=bEe,oS.snakeCase=nAe,oS.some=wEe,oS.sortedIndex=v4e,oS.sortedIndexBy=y4e,oS.sortedIndexOf=b4e,oS.sortedLastIndex=w4e,oS.sortedLastIndexBy=_4e,oS.sortedLastIndexOf=$4e,oS.startCase=oAe,oS.startsWith=aAe,oS.subtract=JAe,oS.sum=QAe,oS.sumBy=e6e,oS.template=sAe,oS.times=DAe,oS.toFinite=m_e,oS.toInteger=lwe,oS.toLength=g3e,oS.toLower=lAe,oS.toNumber=L2e,oS.toSafeInteger=lOe,oS.toString=Twe,oS.toUpper=uAe,oS.trim=cAe,oS.trimEnd=dAe,oS.trimStart=fAe,oS.truncate=pAe,oS.unescape=hAe,oS.uniqueId=FAe,oS.upperCase=mAe,oS.upperFirst=$Se,oS.each=r3e,oS.eachRight=n3e,oS.first=JCe,CSe(oS,function(){var G={};return t_e(oS,function(ue,Te){Ewe.call(oS.prototype,Te)||(G[Te]=ue)}),G}(),{chain:!1}),oS.VERSION=d,p2e(["bind","bindKey","curry","curryRight","partial","partialRight"],function(G){oS[G].placeholder=oS}),p2e(["drop","take"],function(G,ue){vwe.prototype[G]=function(Te){Te=Te===c?1:Gwe(lwe(Te),0);var Pa=this.__filtered__&&!ue?new vwe(this):this.clone();return Pa.__filtered__?Pa.__takeCount__=a2e(Te,Pa.__takeCount__):Pa.__views__.push({size:a2e(Te,hy),type:G+(Pa.__dir__<0?"Right":"")}),Pa},vwe.prototype[G+"Right"]=function(Te){return this.reverse()[G](Te).reverse()}}),p2e(["filter","map","takeWhile"],function(G,ue){var Te=ue+1,Pa=Te==yy||Te==$t;vwe.prototype[G]=function(J$){var uS=this.clone();return uS.__iteratees__.push({iteratee:Jye(J$,3),type:Te}),uS.__filtered__=uS.__filtered__||Pa,uS}}),p2e(["head","last"],function(G,ue){var Te="take"+(ue?"Right":"");vwe.prototype[G]=function(){return this[Te](1).value()[0]}}),p2e(["initial","tail"],function(G,ue){var Te="drop"+(ue?"":"Right");vwe.prototype[G]=function(){return this.__filtered__?new vwe(this):this[Te](1)}}),vwe.prototype.compact=function(){return this.filter($2e)},vwe.prototype.find=function(G){return this.filter(G).head()},vwe.prototype.findLast=function(G){return this.reverse().find(G)},vwe.prototype.invokeMap=fwe(function(G,ue){return typeof G=="function"?new vwe(this):this.map(function(Te){return S$e(Te,G,ue)})}),vwe.prototype.reject=function(G){return this.filter(Txe(Jye(G)))},vwe.prototype.slice=function(G,ue){G=lwe(G);var Te=this;return Te.__filtered__&&(G>0||ue<0)?new vwe(Te):(G<0?Te=Te.takeRight(-G):G&&(Te=Te.drop(G)),ue!==c&&(ue=lwe(ue),Te=ue<0?Te.dropRight(-ue):Te.take(ue-G)),Te)},vwe.prototype.takeRightWhile=function(G){return this.reverse().takeWhile(G).reverse()},vwe.prototype.toArray=function(){return this.take(hy)},t_e(vwe.prototype,function(G,ue){var Te=/^(?:filter|find|map|reject)|While$/.test(ue),Pa=/^(?:head|last)$/.test(ue),J$=oS[Pa?"take"+(ue=="last"?"Right":""):ue],uS=Pa||/^find/.test(ue);J$&&(oS.prototype[ue]=function(){var gS=this.__wrapped__,$S=Pa?[1]:arguments,PS=gS instanceof vwe,wye=$S[0],_ye=PS||owe(gS),Cye=function(mwe){var wwe=J$.apply(oS,C2e([mwe],$S));return Pa&&Pye?wwe[0]:wwe};_ye&&Te&&typeof wye=="function"&&wye.length!=1&&(PS=_ye=!1);var Pye=this.__chain__,Wye=!!this.__actions__.length,Qye=uS&&!Pye,uwe=PS&&!Wye;if(!uS&&_ye){gS=uwe?gS:new vwe(this);var ewe=G.apply(gS,$S);return ewe.__actions__.push({func:$xe,args:[Cye],thisArg:c}),new P2e(ewe,Pye)}return Qye&&uwe?G.apply(this,$S):(ewe=this.thru(Cye),Qye?Pa?ewe.value()[0]:ewe.value():ewe)})}),p2e(["pop","push","shift","sort","splice","unshift"],function(G){var ue=K$e[G],Te=/^(?:push|sort|unshift)$/.test(G)?"tap":"thru",Pa=/^(?:pop|shift)$/.test(G);oS.prototype[G]=function(){var J$=arguments;if(Pa&&!this.__chain__){var uS=this.value();return ue.apply(owe(uS)?uS:[],J$)}return this[Te](function(gS){return ue.apply(owe(gS)?gS:[],J$)})}}),t_e(vwe.prototype,function(G,ue){var Te=oS[ue];if(Te){var Pa=Te.name+"";Ewe.call(Y_e,Pa)||(Y_e[Pa]=[]),Y_e[Pa].push({name:ue,func:Te})}}),Y_e[mxe(c,re).name]=[{name:"wrapper",func:c}],vwe.prototype.clone=hTe,vwe.prototype.reverse=mTe,vwe.prototype.value=gTe,oS.prototype.at=W4e,oS.prototype.chain=q4e,oS.prototype.commit=G4e,oS.prototype.next=K4e,oS.prototype.plant=Z4e,oS.prototype.reverse=X4e,oS.prototype.toJSON=oS.prototype.valueOf=oS.prototype.value=J4e,oS.prototype.first=oS.prototype.head,v$e&&(oS.prototype[v$e]=Y4e),oS},w_e=G3e();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Fwe._=w_e,define(function(){return w_e})):X2e?((X2e.exports=w_e)._=w_e,E_e._=w_e):Fwe._=w_e}).call(s)}}),import_lodash=__toESM(require_lodash());async function imageDecode(s){const l=MimeType.fromString(s.type);switch(l.type){case"image/x-alpha8":{const c=parseInt(l.params.width),d=parseInt(l.params.height);return ndarray4(new Uint8Array(await s.arrayBuffer()),[d,c,1])}case"image/x-rgba8":{const c=parseInt(l.params.width),d=parseInt(l.params.height);return ndarray4(new Uint8Array(await s.arrayBuffer()),[d,c,4])}case"application/octet-stream":case"image/png":case"image/jpeg":case"image/jpg":case"image/webp":{const c=await createImageBitmap(s),d=imageBitmapToImageData(c);return ndarray4(new Uint8Array(d.data),[d.height,d.width,4])}default:throw new Error(`Invalid format: ${l.type} with params: ${l.params}`)}}async function imageEncode(s,l=.8,c="image/png"){const[d,f,g]=s.shape;switch(c){case"image/x-alpha8":case"image/x-rgba8":{const $=MimeType.create(c,{width:f.toString(),height:d.toString()});return new Blob([s.data],{type:$.toString()})}case"image/png":case"image/jpeg":case"image/webp":{const $=new ImageData(new Uint8ClampedArray(s.data),f,d);var v=createCanvas($.width,$.height),b=v.getContext("2d");return b.putImageData($,0,0),v.convertToBlob({quality:l,type:c})}default:throw new Error(`Invalid format: ${c}`)}}var MimeType=class DSe{constructor(l,c){this.type="application/octet-stream",this.params={},this.type=l,this.params=c}toString(){const l=[];for(const c in this.params){const d=this.params[c];l.push(`${c}=${d}`)}return[this.type,...l].join(";")}static create(l,c){return new DSe(l,c)}isIdentical(l){return this.type===l.type&&this.params===l.params}isEqual(l){return this.type===l.type}static fromString(l){const[c,...d]=l.split(";"),f={};for(const g of d){const[v,b]=g.split("=");f[v.trim()]=b.trim()}return new DSe(c,f)}};function isAbsoluteURI(s){return new RegExp("^(?:[a-z+]+:)?//","i").test(s)}function ensureAbsoluteURI(s,l){return isAbsoluteURI(s)?s:new URL(s,l).href}function imageBitmapToImageData(s){var l=createCanvas(s.width,s.height),c=l.getContext("2d");return c.drawImage(s,0,0),c.getImageData(0,0,l.width,l.height)}function createTypeArray(s){if(typeof Uint8Array<"u")return new Uint8Array(s);if(typeof Uint8ClampedArray<"u")return new Uint8ClampedArray(s);if(typeof Uint16Array<"u")return new Uint16Array(s);if(typeof Uint32Array<"u")return new Uint32Array(s);if(typeof Float32Array<"u")return new Float32Array(s);if(typeof Float64Array<"u")return new Float64Array(s);throw new Error("TypedArray not supported")}function tensorResizeBilinear(s,l,c,d=!1){const[f,g,v]=s.shape;let b=g/l,$=f/c;d&&(b=$=Math.max(b,$)>1?Math.max(b,$):Math.min(b,$));const y=ndarray4(createTypeArray(v*l*c),[c,l,v]);for(let x=0;x<c;x++)for(let C=0;C<l;C++){const E=C*b,N=x*$,W=Math.max(Math.floor(E),0),q=Math.min(Math.ceil(E),g-1),Y=Math.max(Math.floor(N),0),re=Math.min(Math.ceil(N),f-1),se=E-W,de=N-Y;for(let he=0;he<v;he++){const ge=s.get(Y,W,he),Se=s.get(Y,q,he),Ae=s.get(re,W,he),Re=s.get(re,q,he),Be=(1-se)*(1-de)*ge+se*(1-de)*Se+(1-se)*de*Ae+se*de*Re;y.set(x,C,he,Be)}}return y}function tensorHWCtoBCHW(s,l=[128,128,128],c=[256,256,256]){var d=s.data;const[f,g,v]=s.shape,b=f*g,$=new Float32Array(3*b);for(let y=0,x=0;y<d.length;y+=4,x+=1)$[x]=(d[y]-l[0])/c[0],$[x+b]=(d[y+1]-l[1])/c[1],$[x+b+b]=(d[y+2]-l[2])/c[2];return ndarray4($,[1,3,f,g])}async function imageSourceToImageData(s,l){return typeof s=="string"&&(s=ensureAbsoluteURI(s,l.publicPath),s=new URL(s)),s instanceof URL&&(s=await(await fetch(s,{})).blob()),(s instanceof ArrayBuffer||ArrayBuffer.isView(s))&&(s=new Blob([s])),s instanceof Blob&&(s=await imageDecode(s)),s}function convertFloat32ToUint8(s){const l=new Uint8Array(s.data.length);for(let c=0;c<s.data.length;c++)l[c]=s.data[c]*255;return ndarray4(l,s.shape)}function createCanvas(s,l){let c;if(typeof OffscreenCanvas<"u"?c=new OffscreenCanvas(s,l):c=document.createElement("canvas"),!c)throw new Error("Canvas nor OffscreenCanvas are available in the current context.");return c}async function loadAsUrl(s,l){return URL.createObjectURL(await loadAsBlob(s,l))}async function loadAsBlob(s,l){const c=new URL("resources.json",l.publicPath),d=await fetch(c);if(!d.ok)throw new Error("Resource metadata not found. Ensure that the config.publicPath is configured correctly.");const g=(await d.json())[s];if(!g)throw new Error(`Resource ${s} not found. Ensure that the config.publicPath is configured correctly.`);const v=g.chunks;let b=0;const $=v.map(async C=>{const E=C.offsets[1]-C.offsets[0],N=l.publicPath?new URL(C.hash,l.publicPath).toString():C.hash,q=await(await fetch(N,l.fetchArgs)).blob();if(E!==q.size)throw new Error(`Failed to fetch ${s} with size ${E} but got ${q.size}`);return l.progress&&(b+=E,l.progress(`fetch:${s}`,b,g.size)),q}),y=await Promise.all($),x=new Blob(y,{type:g.mime});if(x.size!==g.size)throw new Error(`Failed to fetch ${s} with size ${g.size} but got ${x.size}`);return x}var simd=()=>WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,5,1,96,0,1,123,3,2,1,0,10,10,1,8,0,65,0,253,15,253,98,11])),threads=()=>(async s=>{try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(s)}catch{return!1}})(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11])),webgpu=()=>navigator.gpu!==void 0,maxNumThreads=()=>navigator.hardwareConcurrency??4;async function createOnnxSession(s,l){const c=l.device==="gpu",d=await threads(),f=simd(),g=l.proxyToWorker,v=[c?"webgpu":"wasm"],b=c?ort_gpu:ort_cpu;l.debug&&(console.debug("	Using Threads:",d),console.debug("	Using SIMD:",f),console.debug("	Using WebGPU:",c),console.debug("	Proxy to Worker:",g),b.env.debug=!0,b.env.logLevel="verbose"),b.env.wasm.numThreads=maxNumThreads(),b.env.wasm.simd=simd(),b.env.wasm.proxy=g;const $={"ort-wasm-simd-threaded.wasm":d&&f,"ort-wasm-simd.wasm":!d&&f,"ort-wasm-threaded.wasm":!c&&d&&!f,"ort-wasm.wasm":!c&&!d&&!f},y={};for(const[E,N]of Object.entries($))if(N){const W=c&&E.includes("simd")?`/onnxruntime-web/${E.replace(".wasm",".jsep.wasm")}`:`/onnxruntime-web/${E}`;y[E]=await loadAsUrl(W,l)}b.env.wasm.wasmPaths=y,l.debug&&console.debug("ort.env.wasm:",b.env.wasm);const x={executionProviders:v,graphOptimizationLevel:"all",executionMode:"parallel",enableCpuMemArena:!0};return await b.InferenceSession.create(s,x).catch(E=>{throw new Error(`Failed to create session: "${E}". Please check if the publicPath is set correctly.`)})}async function runOnnxSession(s,l,c,d){const g=d.device==="gpu"?ort_gpu:ort_cpu,v={};for(const[y,x]of l)v[y]=new g.Tensor("float32",new Float32Array(x.data),x.shape);const b=await s.run(v,{}),$=[];for(const y of c){const x=b[y],C=x.dims,E=x.data,N=ndarray4(E,C);$.push(N)}return $}var package_default={name:"@imgly/background-removal",version:"1.5.3",description:"Background Removal in the Browser",keywords:["background-removal","client-side","data-privacy","image-segmentation","image-matting","onnx"],repository:{type:"git",url:"git+https://github.com/imgly/background-removal-js.git"},license:"SEE LICENSE IN LICENSE.md",author:{name:"IMG.LY GmbH",email:"support@img.ly",url:"https://img.ly"},bugs:{email:"support@img.ly"},source:"./src/index.ts",main:"./dist/index.cjs",module:"./dist/index.mjs",types:"./dist/src/index.d.ts",exports:{".":{require:"./dist/index.cjs",import:"./dist/index.mjs",types:"./dist/src/index.d.ts"}},homepage:"https://img.ly/showcases/cesdk/web/background-removal",files:["LICENSE.md","README.md","CHANGELOG.md","ThirdPartyLicenses.json","dist/","bin/"],scripts:{start:"npm run watch",clean:"npx rimraf dist",test:"true",resources:"node ../../scripts/package-resources.mjs","changelog:create":"node ../../scripts/changelog/changelog-create.mjs","changelog:generate":"node ../../scripts/changelog/changelog-generate.mjs",build:"npm run clean && npm run types && npm run resources && npm run changelog:generate && node scripts/build.mjs",types:" npx tsc --declaration --emitDeclarationOnly --declarationDir dist --declarationMap",watch:"npm run clean && npm run resources && npm run changelog:generate && node scripts/watch.mjs","publish:latest":"npm publish --tag latest --access public","publish:next":"npm publish --tag next --access public","package:pack":"npm pack . --pack-destination ../../releases",lint:"npx prettier --write ."},dependencies:{"@types/lodash-es":"^4.17.12","@types/ndarray":"~1.0.14","@types/node":"~20.3.0","lodash-es":"^4.17.21",ndarray:"~1.0.0","onnxruntime-web":"~1.18.0",zod:"^3.23.8"},devDependencies:{assert:"~2.0.0",esbuild:"~0.18.0",glob:"~10.3.0","npm-dts":"~1.3.0",process:"~0.11.0","ts-loader":"~9.4.0",tslib:"~2.5.0",typescript:"~5.1.0",util:"~0.12.0",webpack:"~5.85.0","webpack-cli":"~5.1.0"},bundleDependencies:[]},ConfigSchema=z$1.object({publicPath:z$1.string().optional().describe("The public path to the wasm files and the onnx model.").default("https://staticimgly.com/@imgly/background-removal-data/${PACKAGE_VERSION}/dist/").transform(s=>s.replace("${PACKAGE_NAME}",package_default.name).replace("${PACKAGE_VERSION}",package_default.version)),debug:z$1.boolean().default(!1).describe("Whether to enable debug logging."),rescale:z$1.boolean().default(!0).describe("Whether to rescale the image."),device:z$1.enum(["cpu","gpu"]).default("cpu").describe("The device to run the model on."),proxyToWorker:z$1.boolean().default(!0).describe("Whether to proxy inference to a web worker."),fetchArgs:z$1.any().default({}).describe("Arguments to pass to fetch when loading the model."),progress:z$1.function().args(z$1.string(),z$1.number(),z$1.number()).returns(z$1.void()).describe("Progress callback.").optional(),model:z$1.preprocess(s=>{switch(s){case"large":return"isnet";case"small":return"isnet_quint8";case"medium":return"isnet_fp16";default:return s}},z$1.enum(["isnet","isnet_fp16","isnet_quint8"])).default("medium"),output:z$1.object({format:z$1.enum(["image/png","image/jpeg","image/webp","image/x-rgba8","image/x-alpha8"]).default("image/png"),quality:z$1.number().default(.8)}).default({})}).default({}).transform(s=>(s.debug&&console.log("Config:",s),s.debug&&!s.progress&&(s.progress=s.progress??((l,c,d)=>{console.debug(`Downloading ${l}: ${c} of ${d}`)}),crossOriginIsolated||s.debug&&console.debug("Cross-Origin-Isolated is not enabled. Performance will be degraded. Please see  https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer.")),s.device=="gpu"&&(webgpu()||(s.debug&&console.debug("Switching to CPU for GPU not supported."),s.device="cpu")),s));function validateConfig(s){return ConfigSchema.parse(s??{})}async function initBase(s){s.debug&&console.debug("Loading model...",s.model);const l=s.model,d=await(await loadAsBlob(`/models/${l}`,s)).arrayBuffer();return await createOnnxSession(d,s)}async function initInference(s){s=validateConfig(s);const l=await initBase(s);return{config:s,session:{base:l}}}async function runInference(s,l,c){const[f,g,v]=s.shape,b=!1;let $=tensorResizeBilinear(s,1024,1024,b);const y=tensorHWCtoBCHW($);let x=await runOnnxSession(c.base,[["input",y]],["output"],l),C=ndarray4(x[0].data,[1024,1024,1]),E=convertFloat32ToUint8(C);return l.rescale?(E=tensorResizeBilinear(E,g,f,b),[E,s]):[E,$]}var init$3=(0,import_lodash.memoize)(initInference,s=>JSON.stringify(s));async function removeBackground(s,l){var E,N,W,q;const{config:c,session:d}=await init$3(l);c.progress&&c.progress("compute:decode",0,4);const f=await imageSourceToImageData(s,c);(E=c.progress)==null||E.call(c,"compute:inference",1,4);const[g,v]=await runInference(f,c,d);(N=c.progress)==null||N.call(c,"compute:mask",2,4);const b=v,[$,y]=b.shape,x=$*y;for(let Y=0;Y<x;Y+=1)b.data[4*Y+3]=g.data[Y];(W=c.progress)==null||W.call(c,"compute:encode",3,4);const C=await imageEncode(b,c.output.quality,c.output.format);return(q=c.progress)==null||q.call(c,"compute:encode",4,4),C}/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/const _sfc_main={props:{width:{type:Number,default:800},height:{type:Number,default:300},lineWidth:{type:Number,default:4},lineColor:{type:String,default:"#000000"},bgColor:{type:String,default:""},isCrop:{type:Boolean,default:!1},isClearBgColor:{type:Boolean,default:!0},format:{type:String,default:"image/png"},quality:{type:Number,default:1}},data(){return{hasDrew:!1,resultImg:"",points:[],canvasTxt:null,startX:0,startY:0,isDrawing:!1,sratio:1}},computed:{ratio(){return this.height/this.width},stageInfo(){return this.$refs.canvas.getBoundingClientRect()},myBg(){return this.bgColor?this.bgColor:"rgba(255, 255, 255, 0)"}},watch:{myBg:function(s){this.$refs.canvas.style.background=s}},beforeMount(){window.addEventListener("resize",this.$_resizeHandler)},beforeDestroy(){window.removeEventListener("resize",this.$_resizeHandler)},mounted(){const s=this.$refs.canvas;s.height=this.height,s.width=this.width,s.style.background=this.myBg,this.$_resizeHandler(),document.onmouseup=()=>{this.isDrawing=!1}},methods:{$_resizeHandler(){const s=this.$refs.canvas;s.style.width=this.width+"px";const l=parseFloat(window.getComputedStyle(s).width);s.style.height=this.ratio*l+"px",this.canvasTxt=s.getContext("2d"),this.canvasTxt.scale(1*this.sratio,1*this.sratio),this.sratio=l/this.width,this.canvasTxt.scale(1/this.sratio,1/this.sratio)},mouseDown(s){s=s||event,s.preventDefault(),this.isDrawing=!0,this.hasDrew=!0;let l={x:s.offsetX,y:s.offsetY};this.drawStart(l)},mouseMove(s){if(s=s||event,s.preventDefault(),this.isDrawing){let l={x:s.offsetX,y:s.offsetY};this.drawMove(l)}},mouseUp(s){s=s||event,s.preventDefault();let l={x:s.offsetX,y:s.offsetY};this.drawEnd(l),this.isDrawing=!1},touchStart(s){if(s=s||event,s.preventDefault(),this.hasDrew=!0,s.touches.length===1){let l={x:s.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:s.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawStart(l)}},touchMove(s){if(s=s||event,s.preventDefault(),s.touches.length===1){let l={x:s.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:s.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawMove(l)}},touchEnd(s){if(s=s||event,s.preventDefault(),s.touches.length===1){let l={x:s.targetTouches[0].clientX-this.$refs.canvas.getBoundingClientRect().left,y:s.targetTouches[0].clientY-this.$refs.canvas.getBoundingClientRect().top};this.drawEnd(l)}},drawStart(s){this.startX=s.x,this.startY=s.y,this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(s.x,s.y),this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.lineWidth=this.lineWidth*this.sratio,this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(s)},drawMove(s){this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(s.x,s.y),this.canvasTxt.strokeStyle=this.lineColor,this.canvasTxt.lineWidth=this.lineWidth*this.sratio,this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.startY=s.y,this.startX=s.x,this.points.push(s)},drawEnd(s){this.canvasTxt.beginPath(),this.canvasTxt.moveTo(this.startX,this.startY),this.canvasTxt.lineTo(s.x,s.y),this.canvasTxt.lineCap="round",this.canvasTxt.lineJoin="round",this.canvasTxt.stroke(),this.canvasTxt.closePath(),this.points.push(s),this.points.push({x:-1,y:-1})},generate(s){let l=s&&s.format?s.format:this.format,c=s&&s.quality?s.quality:this.quality;return new Promise((f,g)=>{if(!this.hasDrew){g("Warning: Not Signned!");return}var v=this.canvasTxt.getImageData(0,0,this.$refs.canvas.width,this.$refs.canvas.height);this.canvasTxt.globalCompositeOperation="destination-over",this.canvasTxt.fillStyle=this.myBg,this.canvasTxt.fillRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.resultImg=this.$refs.canvas.toDataURL(l,c);var b=this.resultImg;if(this.canvasTxt.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.canvasTxt.putImageData(v,0,0),this.canvasTxt.globalCompositeOperation="source-over",this.isCrop){const y=this.getCropArea(v.data);var $=document.createElement("canvas");const x=$.getContext("2d");$.width=y[2]-y[0],$.height=y[3]-y[1];const C=this.canvasTxt.getImageData(...y);x.globalCompositeOperation="destination-over",x.putImageData(C,0,0),x.fillStyle=this.myBg,x.fillRect(0,0,$.width,$.height),b=$.toDataURL(l,c),$=null}f(b)})},reset(){this.canvasTxt.clearRect(0,0,this.$refs.canvas.width,this.$refs.canvas.height),this.isClearBgColor&&(this.$emit("update:bgColor",""),this.$refs.canvas.style.background="rgba(255, 255, 255, 0)"),this.points=[],this.hasDrew=!1,this.resultImg=""},getCropArea(s){for(var l=this.$refs.canvas.width,c=0,d=this.$refs.canvas.height,f=0,g=0;g<this.$refs.canvas.width;g++)for(var v=0;v<this.$refs.canvas.height;v++){var b=(g+this.$refs.canvas.width*v)*4;(s[b]>0||s[b+1]>0||s[b+2]||s[b+3]>0)&&(f=Math.max(v,f),c=Math.max(g,c),d=Math.min(v,d),l=Math.min(g,l))}return l++,c++,d++,f++,[l,d,c,f]}}};function _sfc_render(s,l,c,d,f,g){return openBlock(),createElementBlock("canvas",{ref:"canvas",onMousedown:l[0]||(l[0]=(...v)=>g.mouseDown&&g.mouseDown(...v)),onMousemove:l[1]||(l[1]=(...v)=>g.mouseMove&&g.mouseMove(...v)),onMouseup:l[2]||(l[2]=(...v)=>g.mouseUp&&g.mouseUp(...v)),onTouchstart:l[3]||(l[3]=(...v)=>g.touchStart&&g.touchStart(...v)),onTouchmove:l[4]||(l[4]=(...v)=>g.touchMove&&g.touchMove(...v)),onTouchend:l[5]||(l[5]=(...v)=>g.touchEnd&&g.touchEnd(...v))},null,544)}const vueEsign=_export_sfc(_sfc_main,[["render",_sfc_render],["__scopeId","data-v-5c7dd0c2"]]);vueEsign.install=function(s){this.installed||(this.installed=!0,s.component("vueEsign",vueEsign))};var barcodes={},CODE39$1={},Barcode$1={};Object.defineProperty(Barcode$1,"__esModule",{value:!0});function _classCallCheck$t(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}var Barcode=function s(l,c){_classCallCheck$t(this,s),this.data=l,this.text=c.text||l,this.options=c};Barcode$1.default=Barcode;Object.defineProperty(CODE39$1,"__esModule",{value:!0});CODE39$1.CODE39=void 0;var _createClass$m=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_Barcode2$b=Barcode$1,_Barcode3$b=_interopRequireDefault$x(_Barcode2$b);function _interopRequireDefault$x(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$s(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$n(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$n(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var CODE39=function(s){_inherits$n(l,s);function l(c,d){return _classCallCheck$s(this,l),c=c.toUpperCase(),d.mod43&&(c+=getCharacter(mod43checksum(c))),_possibleConstructorReturn$n(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d))}return _createClass$m(l,[{key:"encode",value:function(){for(var d=getEncoding("*"),f=0;f<this.data.length;f++)d+=getEncoding(this.data[f])+"0";return d+=getEncoding("*"),{data:d,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)!==-1}}]),l}(_Barcode3$b.default),characters=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","-","."," ","$","/","+","%","*"],encodings=[20957,29783,23639,30485,20951,29813,23669,20855,29789,23645,29975,23831,30533,22295,30149,24005,21623,29981,23837,22301,30023,23879,30545,22343,30161,24017,21959,30065,23921,22385,29015,18263,29141,17879,29045,18293,17783,29021,18269,17477,17489,17681,20753,35770];function getEncoding(s){return getBinary(characterValue(s))}function getBinary(s){return encodings[s].toString(2)}function getCharacter(s){return characters[s]}function characterValue(s){return characters.indexOf(s)}function mod43checksum(s){for(var l=0,c=0;c<s.length;c++)l+=characterValue(s[c]);return l=l%43,l}CODE39$1.CODE39=CODE39;var CODE128$2={},CODE128_AUTO={},CODE128$1={},constants$2={};Object.defineProperty(constants$2,"__esModule",{value:!0});var _SET_BY_CODE;function _defineProperty$2(s,l,c){return l in s?Object.defineProperty(s,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[l]=c,s}var SET_A=constants$2.SET_A=0,SET_B=constants$2.SET_B=1,SET_C=constants$2.SET_C=2;constants$2.SHIFT=98;var START_A=constants$2.START_A=103,START_B=constants$2.START_B=104,START_C=constants$2.START_C=105;constants$2.MODULO=103;constants$2.STOP=106;constants$2.FNC1=207;constants$2.SET_BY_CODE=(_SET_BY_CODE={},_defineProperty$2(_SET_BY_CODE,START_A,SET_A),_defineProperty$2(_SET_BY_CODE,START_B,SET_B),_defineProperty$2(_SET_BY_CODE,START_C,SET_C),_SET_BY_CODE);constants$2.SWAP={101:SET_A,100:SET_B,99:SET_C};constants$2.A_START_CHAR="";constants$2.B_START_CHAR="";constants$2.C_START_CHAR="";constants$2.A_CHARS="[\0-_-]";constants$2.B_CHARS="[ --]";constants$2.C_CHARS="(*[0-9]{2}*)";constants$2.BARS=[11011001100,11001101100,11001100110,10010011e3,10010001100,10001001100,10011001e3,10011000100,10001100100,11001001e3,11001000100,11000100100,10110011100,10011011100,10011001110,10111001100,10011101100,10011100110,11001110010,11001011100,11001001110,11011100100,11001110100,11101101110,11101001100,11100101100,11100100110,11101100100,11100110100,11100110010,11011011e3,11011000110,11000110110,10100011e3,10001011e3,10001000110,10110001e3,10001101e3,10001100010,11010001e3,11000101e3,11000100010,10110111e3,10110001110,10001101110,10111011e3,10111000110,10001110110,11101110110,11010001110,11000101110,11011101e3,11011100010,11011101110,11101011e3,11101000110,11100010110,11101101e3,11101100010,11100011010,11101111010,11001000010,11110001010,1010011e4,10100001100,1001011e4,10010000110,10000101100,10000100110,1011001e4,10110000100,1001101e4,10011000010,10000110100,10000110010,11000010010,1100101e4,11110111010,11000010100,10001111010,10100111100,10010111100,10010011110,10111100100,10011110100,10011110010,11110100100,11110010100,11110010010,11011011110,11011110110,11110110110,10101111e3,10100011110,10001011110,10111101e3,10111100010,11110101e3,11110100010,10111011110,10111101110,11101011110,11110101110,11010000100,1101001e4,11010011100,1100011101011];Object.defineProperty(CODE128$1,"__esModule",{value:!0});var _createClass$l=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_Barcode2$a=Barcode$1,_Barcode3$a=_interopRequireDefault$w(_Barcode2$a),_constants$a=constants$2;function _interopRequireDefault$w(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$r(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$m(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$m(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var CODE128=function(s){_inherits$m(l,s);function l(c,d){_classCallCheck$r(this,l);var f=_possibleConstructorReturn$m(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c.substring(1),d));return f.bytes=c.split("").map(function(g){return g.charCodeAt(0)}),f}return _createClass$l(l,[{key:"valid",value:function(){return/^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)}},{key:"encode",value:function(){var d=this.bytes,f=d.shift()-105,g=_constants$a.SET_BY_CODE[f];if(g===void 0)throw new RangeError("The encoding does not start with a start character.");this.shouldEncodeAsEan128()===!0&&d.unshift(_constants$a.FNC1);var v=l.next(d,1,g);return{text:this.text===this.data?this.text.replace(/[^\x20-\x7E]/g,""):this.text,data:l.getBar(f)+v.result+l.getBar((v.checksum+f)%_constants$a.MODULO)+l.getBar(_constants$a.STOP)}}},{key:"shouldEncodeAsEan128",value:function(){var d=this.options.ean128||!1;return typeof d=="string"&&(d=d.toLowerCase()==="true"),d}}],[{key:"getBar",value:function(d){return _constants$a.BARS[d]?_constants$a.BARS[d].toString():""}},{key:"correctIndex",value:function(d,f){if(f===_constants$a.SET_A){var g=d.shift();return g<32?g+64:g-32}else return f===_constants$a.SET_B?d.shift()-32:(d.shift()-48)*10+d.shift()-48}},{key:"next",value:function(d,f,g){if(!d.length)return{result:"",checksum:0};var v=void 0,b=void 0;if(d[0]>=200){b=d.shift()-105;var $=_constants$a.SWAP[b];$!==void 0?v=l.next(d,f+1,$):((g===_constants$a.SET_A||g===_constants$a.SET_B)&&b===_constants$a.SHIFT&&(d[0]=g===_constants$a.SET_A?d[0]>95?d[0]-96:d[0]:d[0]<32?d[0]+96:d[0]),v=l.next(d,f+1,g))}else b=l.correctIndex(d,g),v=l.next(d,f+1,g);var y=l.getBar(b),x=b*f;return{result:y+v.result,checksum:x+v.checksum}}}]),l}(_Barcode3$a.default);CODE128$1.default=CODE128;var auto$1={};Object.defineProperty(auto$1,"__esModule",{value:!0});var _constants$9=constants$2,matchSetALength=function s(l){return l.match(new RegExp("^"+_constants$9.A_CHARS+"*"))[0].length},matchSetBLength=function s(l){return l.match(new RegExp("^"+_constants$9.B_CHARS+"*"))[0].length},matchSetC=function s(l){return l.match(new RegExp("^"+_constants$9.C_CHARS+"*"))[0]};function autoSelectFromAB(s,l){var c=l?_constants$9.A_CHARS:_constants$9.B_CHARS,d=s.match(new RegExp("^("+c+"+?)(([0-9]{2}){2,})([^0-9]|$)"));if(d)return d[1]+""+autoSelectFromC(s.substring(d[1].length));var f=s.match(new RegExp("^"+c+"+"))[0];return f.length===s.length?s:f+String.fromCharCode(l?205:206)+autoSelectFromAB(s.substring(f.length),!l)}function autoSelectFromC(s){var l=matchSetC(s),c=l.length;if(c===s.length)return s;s=s.substring(c);var d=matchSetALength(s)>=matchSetBLength(s);return l+String.fromCharCode(d?206:205)+autoSelectFromAB(s,d)}auto$1.default=function(s){var l=void 0,c=matchSetC(s).length;if(c>=2)l=_constants$9.C_START_CHAR+autoSelectFromC(s);else{var d=matchSetALength(s)>matchSetBLength(s);l=(d?_constants$9.A_START_CHAR:_constants$9.B_START_CHAR)+autoSelectFromAB(s,d)}return l.replace(/[\xCD\xCE]([^])[\xCD\xCE]/,function(f,g){return""+g})};Object.defineProperty(CODE128_AUTO,"__esModule",{value:!0});var _CODE2$4=CODE128$1,_CODE3$3=_interopRequireDefault$v(_CODE2$4),_auto=auto$1,_auto2=_interopRequireDefault$v(_auto);function _interopRequireDefault$v(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$q(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$l(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$l(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var CODE128AUTO=function(s){_inherits$l(l,s);function l(c,d){if(_classCallCheck$q(this,l),/^[\x00-\x7F\xC8-\xD3]+$/.test(c))var f=_possibleConstructorReturn$l(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,(0,_auto2.default)(c),d));else var f=_possibleConstructorReturn$l(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d));return _possibleConstructorReturn$l(f)}return l}(_CODE3$3.default);CODE128_AUTO.default=CODE128AUTO;var CODE128A$1={};Object.defineProperty(CODE128A$1,"__esModule",{value:!0});var _createClass$k=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_CODE2$3=CODE128$1,_CODE3$2=_interopRequireDefault$u(_CODE2$3),_constants$8=constants$2;function _interopRequireDefault$u(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$p(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$k(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$k(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var CODE128A=function(s){_inherits$k(l,s);function l(c,d){return _classCallCheck$p(this,l),_possibleConstructorReturn$k(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,_constants$8.A_START_CHAR+c,d))}return _createClass$k(l,[{key:"valid",value:function(){return new RegExp("^"+_constants$8.A_CHARS+"+$").test(this.data)}}]),l}(_CODE3$2.default);CODE128A$1.default=CODE128A;var CODE128B$1={};Object.defineProperty(CODE128B$1,"__esModule",{value:!0});var _createClass$j=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_CODE2$2=CODE128$1,_CODE3$1=_interopRequireDefault$t(_CODE2$2),_constants$7=constants$2;function _interopRequireDefault$t(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$o(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$j(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$j(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var CODE128B=function(s){_inherits$j(l,s);function l(c,d){return _classCallCheck$o(this,l),_possibleConstructorReturn$j(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,_constants$7.B_START_CHAR+c,d))}return _createClass$j(l,[{key:"valid",value:function(){return new RegExp("^"+_constants$7.B_CHARS+"+$").test(this.data)}}]),l}(_CODE3$1.default);CODE128B$1.default=CODE128B;var CODE128C$1={};Object.defineProperty(CODE128C$1,"__esModule",{value:!0});var _createClass$i=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_CODE2$1=CODE128$1,_CODE3=_interopRequireDefault$s(_CODE2$1),_constants$6=constants$2;function _interopRequireDefault$s(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$n(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$i(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$i(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var CODE128C=function(s){_inherits$i(l,s);function l(c,d){return _classCallCheck$n(this,l),_possibleConstructorReturn$i(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,_constants$6.C_START_CHAR+c,d))}return _createClass$i(l,[{key:"valid",value:function(){return new RegExp("^"+_constants$6.C_CHARS+"+$").test(this.data)}}]),l}(_CODE3.default);CODE128C$1.default=CODE128C;Object.defineProperty(CODE128$2,"__esModule",{value:!0});CODE128$2.CODE128C=CODE128$2.CODE128B=CODE128$2.CODE128A=CODE128$2.CODE128=void 0;var _CODE128_AUTO=CODE128_AUTO,_CODE128_AUTO2=_interopRequireDefault$r(_CODE128_AUTO),_CODE128A=CODE128A$1,_CODE128A2=_interopRequireDefault$r(_CODE128A),_CODE128B=CODE128B$1,_CODE128B2=_interopRequireDefault$r(_CODE128B),_CODE128C=CODE128C$1,_CODE128C2=_interopRequireDefault$r(_CODE128C);function _interopRequireDefault$r(s){return s&&s.__esModule?s:{default:s}}CODE128$2.CODE128=_CODE128_AUTO2.default;CODE128$2.CODE128A=_CODE128A2.default;CODE128$2.CODE128B=_CODE128B2.default;CODE128$2.CODE128C=_CODE128C2.default;var EAN_UPC={},EAN13$1={},constants$1={};Object.defineProperty(constants$1,"__esModule",{value:!0});constants$1.SIDE_BIN="101";constants$1.MIDDLE_BIN="01010";constants$1.BINARIES={L:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],G:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"],R:["1110010","1100110","1101100","1000010","1011100","1001110","1010000","1000100","1001000","1110100"],O:["0001101","0011001","0010011","0111101","0100011","0110001","0101111","0111011","0110111","0001011"],E:["0100111","0110011","0011011","0100001","0011101","0111001","0000101","0010001","0001001","0010111"]};constants$1.EAN2_STRUCTURE=["LL","LG","GL","GG"];constants$1.EAN5_STRUCTURE=["GGLLL","GLGLL","GLLGL","GLLLG","LGGLL","LLGGL","LLLGG","LGLGL","LGLLG","LLGLG"];constants$1.EAN13_STRUCTURE=["LLLLLL","LLGLGG","LLGGLG","LLGGGL","LGLLGG","LGGLLG","LGGGLL","LGLGLG","LGLGGL","LGGLGL"];var EAN$1={},encoder={};Object.defineProperty(encoder,"__esModule",{value:!0});var _constants$5=constants$1,encode$1=function s(l,c,d){var f=l.split("").map(function(v,b){return _constants$5.BINARIES[c[b]]}).map(function(v,b){return v?v[l[b]]:""});if(d){var g=l.length-1;f=f.map(function(v,b){return b<g?v+d:v})}return f.join("")};encoder.default=encode$1;Object.defineProperty(EAN$1,"__esModule",{value:!0});var _createClass$h=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_constants$4=constants$1,_encoder$4=encoder,_encoder2$4=_interopRequireDefault$q(_encoder$4),_Barcode2$9=Barcode$1,_Barcode3$9=_interopRequireDefault$q(_Barcode2$9);function _interopRequireDefault$q(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$m(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$h(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$h(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var EAN=function(s){_inherits$h(l,s);function l(c,d){_classCallCheck$m(this,l);var f=_possibleConstructorReturn$h(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d));return f.fontSize=!d.flat&&d.fontSize>d.width*10?d.width*10:d.fontSize,f.guardHeight=d.height+f.fontSize/2+d.textMargin,f}return _createClass$h(l,[{key:"encode",value:function(){return this.options.flat?this.encodeFlat():this.encodeGuarded()}},{key:"leftText",value:function(d,f){return this.text.substr(d,f)}},{key:"leftEncode",value:function(d,f){return(0,_encoder2$4.default)(d,f)}},{key:"rightText",value:function(d,f){return this.text.substr(d,f)}},{key:"rightEncode",value:function(d,f){return(0,_encoder2$4.default)(d,f)}},{key:"encodeGuarded",value:function(){var d={fontSize:this.fontSize},f={height:this.guardHeight};return[{data:_constants$4.SIDE_BIN,options:f},{data:this.leftEncode(),text:this.leftText(),options:d},{data:_constants$4.MIDDLE_BIN,options:f},{data:this.rightEncode(),text:this.rightText(),options:d},{data:_constants$4.SIDE_BIN,options:f}]}},{key:"encodeFlat",value:function(){var d=[_constants$4.SIDE_BIN,this.leftEncode(),_constants$4.MIDDLE_BIN,this.rightEncode(),_constants$4.SIDE_BIN];return{data:d.join(""),text:this.text}}}]),l}(_Barcode3$9.default);EAN$1.default=EAN;Object.defineProperty(EAN13$1,"__esModule",{value:!0});var _createClass$g=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_get$1=function s(l,c,d){l===null&&(l=Function.prototype);var f=Object.getOwnPropertyDescriptor(l,c);if(f===void 0){var g=Object.getPrototypeOf(l);return g===null?void 0:s(g,c,d)}else{if("value"in f)return f.value;var v=f.get;return v===void 0?void 0:v.call(d)}},_constants$3=constants$1,_EAN2$2=EAN$1,_EAN3$2=_interopRequireDefault$p(_EAN2$2);function _interopRequireDefault$p(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$l(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$g(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$g(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var checksum$4=function s(l){var c=l.substr(0,12).split("").map(function(d){return+d}).reduce(function(d,f,g){return g%2?d+f*3:d+f},0);return(10-c%10)%10},EAN13=function(s){_inherits$g(l,s);function l(c,d){_classCallCheck$l(this,l),c.search(/^[0-9]{12}$/)!==-1&&(c+=checksum$4(c));var f=_possibleConstructorReturn$g(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d));return f.lastChar=d.lastChar,f}return _createClass$g(l,[{key:"valid",value:function(){return this.data.search(/^[0-9]{13}$/)!==-1&&+this.data[12]===checksum$4(this.data)}},{key:"leftText",value:function(){return _get$1(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"leftText",this).call(this,1,6)}},{key:"leftEncode",value:function(){var d=this.data.substr(1,6),f=_constants$3.EAN13_STRUCTURE[this.data[0]];return _get$1(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"leftEncode",this).call(this,d,f)}},{key:"rightText",value:function(){return _get$1(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"rightText",this).call(this,7,6)}},{key:"rightEncode",value:function(){var d=this.data.substr(7,6);return _get$1(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"rightEncode",this).call(this,d,"RRRRRR")}},{key:"encodeGuarded",value:function(){var d=_get$1(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"encodeGuarded",this).call(this);return this.options.displayValue&&(d.unshift({data:"000000000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),this.options.lastChar&&(d.push({data:"00"}),d.push({data:"00000",text:this.options.lastChar,options:{fontSize:this.fontSize}}))),d}}]),l}(_EAN3$2.default);EAN13$1.default=EAN13;var EAN8$1={};Object.defineProperty(EAN8$1,"__esModule",{value:!0});var _createClass$f=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_get=function s(l,c,d){l===null&&(l=Function.prototype);var f=Object.getOwnPropertyDescriptor(l,c);if(f===void 0){var g=Object.getPrototypeOf(l);return g===null?void 0:s(g,c,d)}else{if("value"in f)return f.value;var v=f.get;return v===void 0?void 0:v.call(d)}},_EAN2$1=EAN$1,_EAN3$1=_interopRequireDefault$o(_EAN2$1);function _interopRequireDefault$o(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$k(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$f(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$f(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var checksum$3=function s(l){var c=l.substr(0,7).split("").map(function(d){return+d}).reduce(function(d,f,g){return g%2?d+f:d+f*3},0);return(10-c%10)%10},EAN8=function(s){_inherits$f(l,s);function l(c,d){return _classCallCheck$k(this,l),c.search(/^[0-9]{7}$/)!==-1&&(c+=checksum$3(c)),_possibleConstructorReturn$f(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d))}return _createClass$f(l,[{key:"valid",value:function(){return this.data.search(/^[0-9]{8}$/)!==-1&&+this.data[7]===checksum$3(this.data)}},{key:"leftText",value:function(){return _get(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"leftText",this).call(this,0,4)}},{key:"leftEncode",value:function(){var d=this.data.substr(0,4);return _get(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"leftEncode",this).call(this,d,"LLLL")}},{key:"rightText",value:function(){return _get(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"rightText",this).call(this,4,4)}},{key:"rightEncode",value:function(){var d=this.data.substr(4,4);return _get(l.prototype.__proto__||Object.getPrototypeOf(l.prototype),"rightEncode",this).call(this,d,"RRRR")}}]),l}(_EAN3$1.default);EAN8$1.default=EAN8;var EAN5$1={};Object.defineProperty(EAN5$1,"__esModule",{value:!0});var _createClass$e=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_constants$2=constants$1,_encoder$3=encoder,_encoder2$3=_interopRequireDefault$n(_encoder$3),_Barcode2$8=Barcode$1,_Barcode3$8=_interopRequireDefault$n(_Barcode2$8);function _interopRequireDefault$n(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$j(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$e(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$e(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var checksum$2=function s(l){var c=l.split("").map(function(d){return+d}).reduce(function(d,f,g){return g%2?d+f*9:d+f*3},0);return c%10},EAN5=function(s){_inherits$e(l,s);function l(c,d){return _classCallCheck$j(this,l),_possibleConstructorReturn$e(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d))}return _createClass$e(l,[{key:"valid",value:function(){return this.data.search(/^[0-9]{5}$/)!==-1}},{key:"encode",value:function(){var d=_constants$2.EAN5_STRUCTURE[checksum$2(this.data)];return{data:"1011"+(0,_encoder2$3.default)(this.data,d,"01"),text:this.text}}}]),l}(_Barcode3$8.default);EAN5$1.default=EAN5;var EAN2$1={};Object.defineProperty(EAN2$1,"__esModule",{value:!0});var _createClass$d=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_constants$1=constants$1,_encoder$2=encoder,_encoder2$2=_interopRequireDefault$m(_encoder$2),_Barcode2$7=Barcode$1,_Barcode3$7=_interopRequireDefault$m(_Barcode2$7);function _interopRequireDefault$m(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$i(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$d(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$d(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var EAN2=function(s){_inherits$d(l,s);function l(c,d){return _classCallCheck$i(this,l),_possibleConstructorReturn$d(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d))}return _createClass$d(l,[{key:"valid",value:function(){return this.data.search(/^[0-9]{2}$/)!==-1}},{key:"encode",value:function(){var d=_constants$1.EAN2_STRUCTURE[parseInt(this.data)%4];return{data:"1011"+(0,_encoder2$2.default)(this.data,d,"01"),text:this.text}}}]),l}(_Barcode3$7.default);EAN2$1.default=EAN2;var UPC$1={};Object.defineProperty(UPC$1,"__esModule",{value:!0});var _createClass$c=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}();UPC$1.checksum=checksum$1;var _encoder$1=encoder,_encoder2$1=_interopRequireDefault$l(_encoder$1),_Barcode2$6=Barcode$1,_Barcode3$6=_interopRequireDefault$l(_Barcode2$6);function _interopRequireDefault$l(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$h(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$c(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$c(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var UPC=function(s){_inherits$c(l,s);function l(c,d){_classCallCheck$h(this,l),c.search(/^[0-9]{11}$/)!==-1&&(c+=checksum$1(c));var f=_possibleConstructorReturn$c(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d));return f.displayValue=d.displayValue,d.fontSize>d.width*10?f.fontSize=d.width*10:f.fontSize=d.fontSize,f.guardHeight=d.height+f.fontSize/2+d.textMargin,f}return _createClass$c(l,[{key:"valid",value:function(){return this.data.search(/^[0-9]{12}$/)!==-1&&this.data[11]==checksum$1(this.data)}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var d="";return d+="101",d+=(0,_encoder2$1.default)(this.data.substr(0,6),"LLLLLL"),d+="01010",d+=(0,_encoder2$1.default)(this.data.substr(6,6),"RRRRRR"),d+="101",{data:d,text:this.text}}},{key:"guardedEncoding",value:function(){var d=[];return this.displayValue&&d.push({data:"00000000",text:this.text.substr(0,1),options:{textAlign:"left",fontSize:this.fontSize}}),d.push({data:"101"+(0,_encoder2$1.default)(this.data[0],"L"),options:{height:this.guardHeight}}),d.push({data:(0,_encoder2$1.default)(this.data.substr(1,5),"LLLLL"),text:this.text.substr(1,5),options:{fontSize:this.fontSize}}),d.push({data:"01010",options:{height:this.guardHeight}}),d.push({data:(0,_encoder2$1.default)(this.data.substr(6,5),"RRRRR"),text:this.text.substr(6,5),options:{fontSize:this.fontSize}}),d.push({data:(0,_encoder2$1.default)(this.data[11],"R")+"101",options:{height:this.guardHeight}}),this.displayValue&&d.push({data:"00000000",text:this.text.substr(11,1),options:{textAlign:"right",fontSize:this.fontSize}}),d}}]),l}(_Barcode3$6.default);function checksum$1(s){var l=0,c;for(c=1;c<11;c+=2)l+=parseInt(s[c]);for(c=0;c<11;c+=2)l+=parseInt(s[c])*3;return(10-l%10)%10}UPC$1.default=UPC;var UPCE$1={};Object.defineProperty(UPCE$1,"__esModule",{value:!0});var _createClass$b=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_encoder=encoder,_encoder2=_interopRequireDefault$k(_encoder),_Barcode2$5=Barcode$1,_Barcode3$5=_interopRequireDefault$k(_Barcode2$5),_UPC$1=UPC$1;function _interopRequireDefault$k(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$g(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$b(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$b(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var EXPANSIONS=["XX00000XXX","XX10000XXX","XX20000XXX","XXX00000XX","XXXX00000X","XXXXX00005","XXXXX00006","XXXXX00007","XXXXX00008","XXXXX00009"],PARITIES=[["EEEOOO","OOOEEE"],["EEOEOO","OOEOEE"],["EEOOEO","OOEEOE"],["EEOOOE","OOEEEO"],["EOEEOO","OEOOEE"],["EOOEEO","OEEOOE"],["EOOOEE","OEEEOO"],["EOEOEO","OEOEOE"],["EOEOOE","OEOEEO"],["EOOEOE","OEEOEO"]],UPCE=function(s){_inherits$b(l,s);function l(c,d){_classCallCheck$g(this,l);var f=_possibleConstructorReturn$b(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d));if(f.isValid=!1,c.search(/^[0-9]{6}$/)!==-1)f.middleDigits=c,f.upcA=expandToUPCA(c,"0"),f.text=d.text||""+f.upcA[0]+c+f.upcA[f.upcA.length-1],f.isValid=!0;else if(c.search(/^[01][0-9]{7}$/)!==-1)if(f.middleDigits=c.substring(1,c.length-1),f.upcA=expandToUPCA(f.middleDigits,c[0]),f.upcA[f.upcA.length-1]===c[c.length-1])f.isValid=!0;else return _possibleConstructorReturn$b(f);else return _possibleConstructorReturn$b(f);return f.displayValue=d.displayValue,d.fontSize>d.width*10?f.fontSize=d.width*10:f.fontSize=d.fontSize,f.guardHeight=d.height+f.fontSize/2+d.textMargin,f}return _createClass$b(l,[{key:"valid",value:function(){return this.isValid}},{key:"encode",value:function(){return this.options.flat?this.flatEncoding():this.guardedEncoding()}},{key:"flatEncoding",value:function(){var d="";return d+="101",d+=this.encodeMiddleDigits(),d+="010101",{data:d,text:this.text}}},{key:"guardedEncoding",value:function(){var d=[];return this.displayValue&&d.push({data:"00000000",text:this.text[0],options:{textAlign:"left",fontSize:this.fontSize}}),d.push({data:"101",options:{height:this.guardHeight}}),d.push({data:this.encodeMiddleDigits(),text:this.text.substring(1,7),options:{fontSize:this.fontSize}}),d.push({data:"010101",options:{height:this.guardHeight}}),this.displayValue&&d.push({data:"00000000",text:this.text[7],options:{textAlign:"right",fontSize:this.fontSize}}),d}},{key:"encodeMiddleDigits",value:function(){var d=this.upcA[0],f=this.upcA[this.upcA.length-1],g=PARITIES[parseInt(f)][parseInt(d)];return(0,_encoder2.default)(this.middleDigits,g)}}]),l}(_Barcode3$5.default);function expandToUPCA(s,l){for(var c=parseInt(s[s.length-1]),d=EXPANSIONS[c],f="",g=0,v=0;v<d.length;v++){var b=d[v];b==="X"?f+=s[g++]:f+=b}return f=""+l+f,""+f+(0,_UPC$1.checksum)(f)}UPCE$1.default=UPCE;Object.defineProperty(EAN_UPC,"__esModule",{value:!0});EAN_UPC.UPCE=EAN_UPC.UPC=EAN_UPC.EAN2=EAN_UPC.EAN5=EAN_UPC.EAN8=EAN_UPC.EAN13=void 0;var _EAN=EAN13$1,_EAN2=_interopRequireDefault$j(_EAN),_EAN3=EAN8$1,_EAN4=_interopRequireDefault$j(_EAN3),_EAN5=EAN5$1,_EAN6=_interopRequireDefault$j(_EAN5),_EAN7=EAN2$1,_EAN8=_interopRequireDefault$j(_EAN7),_UPC=UPC$1,_UPC2=_interopRequireDefault$j(_UPC),_UPCE=UPCE$1,_UPCE2=_interopRequireDefault$j(_UPCE);function _interopRequireDefault$j(s){return s&&s.__esModule?s:{default:s}}EAN_UPC.EAN13=_EAN2.default;EAN_UPC.EAN8=_EAN4.default;EAN_UPC.EAN5=_EAN6.default;EAN_UPC.EAN2=_EAN8.default;EAN_UPC.UPC=_UPC2.default;EAN_UPC.UPCE=_UPCE2.default;var ITF$2={},ITF$1={},constants={};Object.defineProperty(constants,"__esModule",{value:!0});constants.START_BIN="1010";constants.END_BIN="11101";constants.BINARIES=["00110","10001","01001","11000","00101","10100","01100","00011","10010","01010"];Object.defineProperty(ITF$1,"__esModule",{value:!0});var _createClass$a=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_constants=constants,_Barcode2$4=Barcode$1,_Barcode3$4=_interopRequireDefault$i(_Barcode2$4);function _interopRequireDefault$i(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$f(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$a(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$a(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var ITF=function(s){_inherits$a(l,s);function l(){return _classCallCheck$f(this,l),_possibleConstructorReturn$a(this,(l.__proto__||Object.getPrototypeOf(l)).apply(this,arguments))}return _createClass$a(l,[{key:"valid",value:function(){return this.data.search(/^([0-9]{2})+$/)!==-1}},{key:"encode",value:function(){var d=this,f=this.data.match(/.{2}/g).map(function(g){return d.encodePair(g)}).join("");return{data:_constants.START_BIN+f+_constants.END_BIN,text:this.text}}},{key:"encodePair",value:function(d){var f=_constants.BINARIES[d[1]];return _constants.BINARIES[d[0]].split("").map(function(g,v){return(g==="1"?"111":"1")+(f[v]==="1"?"000":"0")}).join("")}}]),l}(_Barcode3$4.default);ITF$1.default=ITF;var ITF14$1={};Object.defineProperty(ITF14$1,"__esModule",{value:!0});var _createClass$9=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_ITF2$1=ITF$1,_ITF3$1=_interopRequireDefault$h(_ITF2$1);function _interopRequireDefault$h(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$e(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$9(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$9(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var checksum=function s(l){var c=l.substr(0,13).split("").map(function(d){return parseInt(d,10)}).reduce(function(d,f,g){return d+f*(3-g%2*2)},0);return Math.ceil(c/10)*10-c},ITF14=function(s){_inherits$9(l,s);function l(c,d){return _classCallCheck$e(this,l),c.search(/^[0-9]{13}$/)!==-1&&(c+=checksum(c)),_possibleConstructorReturn$9(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d))}return _createClass$9(l,[{key:"valid",value:function(){return this.data.search(/^[0-9]{14}$/)!==-1&&+this.data[13]===checksum(this.data)}}]),l}(_ITF3$1.default);ITF14$1.default=ITF14;Object.defineProperty(ITF$2,"__esModule",{value:!0});ITF$2.ITF14=ITF$2.ITF=void 0;var _ITF$1=ITF$1,_ITF2=_interopRequireDefault$g(_ITF$1),_ITF3=ITF14$1,_ITF4=_interopRequireDefault$g(_ITF3);function _interopRequireDefault$g(s){return s&&s.__esModule?s:{default:s}}ITF$2.ITF=_ITF2.default;ITF$2.ITF14=_ITF4.default;var MSI$2={},MSI$1={};Object.defineProperty(MSI$1,"__esModule",{value:!0});var _createClass$8=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_Barcode2$3=Barcode$1,_Barcode3$3=_interopRequireDefault$f(_Barcode2$3);function _interopRequireDefault$f(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$d(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$8(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$8(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var MSI=function(s){_inherits$8(l,s);function l(c,d){return _classCallCheck$d(this,l),_possibleConstructorReturn$8(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d))}return _createClass$8(l,[{key:"encode",value:function(){for(var d="110",f=0;f<this.data.length;f++){var g=parseInt(this.data[f]),v=g.toString(2);v=addZeroes(v,4-v.length);for(var b=0;b<v.length;b++)d+=v[b]=="0"?"100":"110"}return d+="1001",{data:d,text:this.text}}},{key:"valid",value:function(){return this.data.search(/^[0-9]+$/)!==-1}}]),l}(_Barcode3$3.default);function addZeroes(s,l){for(var c=0;c<l;c++)s="0"+s;return s}MSI$1.default=MSI;var MSI10$1={},checksums={};Object.defineProperty(checksums,"__esModule",{value:!0});checksums.mod10=mod10;checksums.mod11=mod11;function mod10(s){for(var l=0,c=0;c<s.length;c++){var d=parseInt(s[c]);(c+s.length)%2===0?l+=d:l+=d*2%10+Math.floor(d*2/10)}return(10-l%10)%10}function mod11(s){for(var l=0,c=[2,3,4,5,6,7],d=0;d<s.length;d++){var f=parseInt(s[s.length-1-d]);l+=c[d%c.length]*f}return(11-l%11)%11}Object.defineProperty(MSI10$1,"__esModule",{value:!0});var _MSI2$4=MSI$1,_MSI3$4=_interopRequireDefault$e(_MSI2$4),_checksums$3=checksums;function _interopRequireDefault$e(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$c(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$7(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$7(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var MSI10=function(s){_inherits$7(l,s);function l(c,d){return _classCallCheck$c(this,l),_possibleConstructorReturn$7(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c+(0,_checksums$3.mod10)(c),d))}return l}(_MSI3$4.default);MSI10$1.default=MSI10;var MSI11$1={};Object.defineProperty(MSI11$1,"__esModule",{value:!0});var _MSI2$3=MSI$1,_MSI3$3=_interopRequireDefault$d(_MSI2$3),_checksums$2=checksums;function _interopRequireDefault$d(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$b(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$6(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$6(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var MSI11=function(s){_inherits$6(l,s);function l(c,d){return _classCallCheck$b(this,l),_possibleConstructorReturn$6(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c+(0,_checksums$2.mod11)(c),d))}return l}(_MSI3$3.default);MSI11$1.default=MSI11;var MSI1010$1={};Object.defineProperty(MSI1010$1,"__esModule",{value:!0});var _MSI2$2=MSI$1,_MSI3$2=_interopRequireDefault$c(_MSI2$2),_checksums$1=checksums;function _interopRequireDefault$c(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$a(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$5(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$5(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var MSI1010=function(s){_inherits$5(l,s);function l(c,d){return _classCallCheck$a(this,l),c+=(0,_checksums$1.mod10)(c),c+=(0,_checksums$1.mod10)(c),_possibleConstructorReturn$5(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d))}return l}(_MSI3$2.default);MSI1010$1.default=MSI1010;var MSI1110$1={};Object.defineProperty(MSI1110$1,"__esModule",{value:!0});var _MSI2$1=MSI$1,_MSI3$1=_interopRequireDefault$b(_MSI2$1),_checksums=checksums;function _interopRequireDefault$b(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$9(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$4(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$4(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var MSI1110=function(s){_inherits$4(l,s);function l(c,d){return _classCallCheck$9(this,l),c+=(0,_checksums.mod11)(c),c+=(0,_checksums.mod10)(c),_possibleConstructorReturn$4(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d))}return l}(_MSI3$1.default);MSI1110$1.default=MSI1110;Object.defineProperty(MSI$2,"__esModule",{value:!0});MSI$2.MSI1110=MSI$2.MSI1010=MSI$2.MSI11=MSI$2.MSI10=MSI$2.MSI=void 0;var _MSI$1=MSI$1,_MSI2=_interopRequireDefault$a(_MSI$1),_MSI3=MSI10$1,_MSI4=_interopRequireDefault$a(_MSI3),_MSI5=MSI11$1,_MSI6=_interopRequireDefault$a(_MSI5),_MSI7=MSI1010$1,_MSI8=_interopRequireDefault$a(_MSI7),_MSI9=MSI1110$1,_MSI10=_interopRequireDefault$a(_MSI9);function _interopRequireDefault$a(s){return s&&s.__esModule?s:{default:s}}MSI$2.MSI=_MSI2.default;MSI$2.MSI10=_MSI4.default;MSI$2.MSI11=_MSI6.default;MSI$2.MSI1010=_MSI8.default;MSI$2.MSI1110=_MSI10.default;var pharmacode$1={};Object.defineProperty(pharmacode$1,"__esModule",{value:!0});pharmacode$1.pharmacode=void 0;var _createClass$7=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_Barcode2$2=Barcode$1,_Barcode3$2=_interopRequireDefault$9(_Barcode2$2);function _interopRequireDefault$9(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$8(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$3(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$3(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var pharmacode=function(s){_inherits$3(l,s);function l(c,d){_classCallCheck$8(this,l);var f=_possibleConstructorReturn$3(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d));return f.number=parseInt(c,10),f}return _createClass$7(l,[{key:"encode",value:function(){for(var d=this.number,f="";!isNaN(d)&&d!=0;)d%2===0?(f="11100"+f,d=(d-2)/2):(f="100"+f,d=(d-1)/2);return f=f.slice(0,-2),{data:f,text:this.text}}},{key:"valid",value:function(){return this.number>=3&&this.number<=131070}}]),l}(_Barcode3$2.default);pharmacode$1.pharmacode=pharmacode;var codabar$1={};Object.defineProperty(codabar$1,"__esModule",{value:!0});codabar$1.codabar=void 0;var _createClass$6=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_Barcode2$1=Barcode$1,_Barcode3$1=_interopRequireDefault$8(_Barcode2$1);function _interopRequireDefault$8(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$7(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$2(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$2(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var codabar=function(s){_inherits$2(l,s);function l(c,d){_classCallCheck$7(this,l),c.search(/^[0-9\-\$\:\.\+\/]+$/)===0&&(c="A"+c+"A");var f=_possibleConstructorReturn$2(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c.toUpperCase(),d));return f.text=f.options.text||f.text.replace(/[A-D]/g,""),f}return _createClass$6(l,[{key:"valid",value:function(){return this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)!==-1}},{key:"encode",value:function(){for(var d=[],f=this.getEncodings(),g=0;g<this.data.length;g++)d.push(f[this.data.charAt(g)]),g!==this.data.length-1&&d.push("0");return{text:this.text,data:d.join("")}}},{key:"getEncodings",value:function(){return{0:"101010011",1:"101011001",2:"101001011",3:"110010101",4:"101101001",5:"110101001",6:"100101011",7:"100101101",8:"100110101",9:"110100101","-":"101001101",$:"101100101",":":"1101011011","/":"1101101011",".":"1101101101","+":"1011011011",A:"1011001001",B:"1001001011",C:"1010010011",D:"1010011001"}}}]),l}(_Barcode3$1.default);codabar$1.codabar=codabar;var GenericBarcode$1={};Object.defineProperty(GenericBarcode$1,"__esModule",{value:!0});GenericBarcode$1.GenericBarcode=void 0;var _createClass$5=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_Barcode2=Barcode$1,_Barcode3=_interopRequireDefault$7(_Barcode2);function _interopRequireDefault$7(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$6(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn$1(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits$1(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var GenericBarcode=function(s){_inherits$1(l,s);function l(c,d){return _classCallCheck$6(this,l),_possibleConstructorReturn$1(this,(l.__proto__||Object.getPrototypeOf(l)).call(this,c,d))}return _createClass$5(l,[{key:"encode",value:function(){return{data:"10101010101010101010101010101010101010101",text:this.text}}},{key:"valid",value:function(){return!0}}]),l}(_Barcode3.default);GenericBarcode$1.GenericBarcode=GenericBarcode;Object.defineProperty(barcodes,"__esModule",{value:!0});var _CODE=CODE39$1,_CODE2=CODE128$2,_EAN_UPC=EAN_UPC,_ITF=ITF$2,_MSI=MSI$2,_pharmacode=pharmacode$1,_codabar=codabar$1,_GenericBarcode=GenericBarcode$1;barcodes.default={CODE39:_CODE.CODE39,CODE128:_CODE2.CODE128,CODE128A:_CODE2.CODE128A,CODE128B:_CODE2.CODE128B,CODE128C:_CODE2.CODE128C,EAN13:_EAN_UPC.EAN13,EAN8:_EAN_UPC.EAN8,EAN5:_EAN_UPC.EAN5,EAN2:_EAN_UPC.EAN2,UPC:_EAN_UPC.UPC,UPCE:_EAN_UPC.UPCE,ITF14:_ITF.ITF14,ITF:_ITF.ITF,MSI:_MSI.MSI,MSI10:_MSI.MSI10,MSI11:_MSI.MSI11,MSI1010:_MSI.MSI1010,MSI1110:_MSI.MSI1110,pharmacode:_pharmacode.pharmacode,codabar:_codabar.codabar,GenericBarcode:_GenericBarcode.GenericBarcode};var merge={};Object.defineProperty(merge,"__esModule",{value:!0});var _extends=Object.assign||function(s){for(var l=1;l<arguments.length;l++){var c=arguments[l];for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&(s[d]=c[d])}return s};merge.default=function(s,l){return _extends({},s,l)};var linearizeEncodings$1={};Object.defineProperty(linearizeEncodings$1,"__esModule",{value:!0});linearizeEncodings$1.default=linearizeEncodings;function linearizeEncodings(s){var l=[];function c(d){if(Array.isArray(d))for(var f=0;f<d.length;f++)c(d[f]);else d.text=d.text||"",d.data=d.data||"",l.push(d)}return c(s),l}var fixOptions$1={};Object.defineProperty(fixOptions$1,"__esModule",{value:!0});fixOptions$1.default=fixOptions;function fixOptions(s){return s.marginTop=s.marginTop||s.margin,s.marginBottom=s.marginBottom||s.margin,s.marginRight=s.marginRight||s.margin,s.marginLeft=s.marginLeft||s.margin,s}var getRenderProperties$1={},getOptionsFromElement$1={},optionsFromStrings$1={};Object.defineProperty(optionsFromStrings$1,"__esModule",{value:!0});optionsFromStrings$1.default=optionsFromStrings;function optionsFromStrings(s){var l=["width","height","textMargin","fontSize","margin","marginTop","marginBottom","marginLeft","marginRight"];for(var c in l)l.hasOwnProperty(c)&&(c=l[c],typeof s[c]=="string"&&(s[c]=parseInt(s[c],10)));return typeof s.displayValue=="string"&&(s.displayValue=s.displayValue!="false"),s}var defaults$4={};Object.defineProperty(defaults$4,"__esModule",{value:!0});var defaults$3={width:2,height:100,format:"auto",displayValue:!0,fontOptions:"",font:"monospace",text:void 0,textAlign:"center",textPosition:"bottom",textMargin:2,fontSize:20,background:"#ffffff",lineColor:"#000000",margin:10,marginTop:void 0,marginBottom:void 0,marginLeft:void 0,marginRight:void 0,valid:function s(){}};defaults$4.default=defaults$3;Object.defineProperty(getOptionsFromElement$1,"__esModule",{value:!0});var _optionsFromStrings$1=optionsFromStrings$1,_optionsFromStrings2$1=_interopRequireDefault$6(_optionsFromStrings$1),_defaults$1=defaults$4,_defaults2$1=_interopRequireDefault$6(_defaults$1);function _interopRequireDefault$6(s){return s&&s.__esModule?s:{default:s}}function getOptionsFromElement(s){var l={};for(var c in _defaults2$1.default)_defaults2$1.default.hasOwnProperty(c)&&(s.hasAttribute("jsbarcode-"+c.toLowerCase())&&(l[c]=s.getAttribute("jsbarcode-"+c.toLowerCase())),s.hasAttribute("data-"+c.toLowerCase())&&(l[c]=s.getAttribute("data-"+c.toLowerCase())));return l.value=s.getAttribute("jsbarcode-value")||s.getAttribute("data-value"),l=(0,_optionsFromStrings2$1.default)(l),l}getOptionsFromElement$1.default=getOptionsFromElement;var renderers={},canvas={},shared={};Object.defineProperty(shared,"__esModule",{value:!0});shared.getTotalWidthOfEncodings=shared.calculateEncodingAttributes=shared.getBarcodePadding=shared.getEncodingHeight=shared.getMaximumHeightOfEncodings=void 0;var _merge$3=merge,_merge2$3=_interopRequireDefault$5(_merge$3);function _interopRequireDefault$5(s){return s&&s.__esModule?s:{default:s}}function getEncodingHeight(s,l){return l.height+(l.displayValue&&s.text.length>0?l.fontSize+l.textMargin:0)+l.marginTop+l.marginBottom}function getBarcodePadding(s,l,c){if(c.displayValue&&l<s){if(c.textAlign=="center")return Math.floor((s-l)/2);if(c.textAlign=="left")return 0;if(c.textAlign=="right")return Math.floor(s-l)}return 0}function calculateEncodingAttributes(s,l,c){for(var d=0;d<s.length;d++){var f=s[d],g=(0,_merge2$3.default)(l,f.options),v;g.displayValue?v=messureText(f.text,g,c):v=0;var b=f.data.length*g.width;f.width=Math.ceil(Math.max(v,b)),f.height=getEncodingHeight(f,g),f.barcodePadding=getBarcodePadding(v,b,g)}}function getTotalWidthOfEncodings(s){for(var l=0,c=0;c<s.length;c++)l+=s[c].width;return l}function getMaximumHeightOfEncodings(s){for(var l=0,c=0;c<s.length;c++)s[c].height>l&&(l=s[c].height);return l}function messureText(s,l,c){var d;if(c)d=c;else if(typeof document<"u")d=document.createElement("canvas").getContext("2d");else return 0;d.font=l.fontOptions+" "+l.fontSize+"px "+l.font;var f=d.measureText(s);if(!f)return 0;var g=f.width;return g}shared.getMaximumHeightOfEncodings=getMaximumHeightOfEncodings;shared.getEncodingHeight=getEncodingHeight;shared.getBarcodePadding=getBarcodePadding;shared.calculateEncodingAttributes=calculateEncodingAttributes;shared.getTotalWidthOfEncodings=getTotalWidthOfEncodings;Object.defineProperty(canvas,"__esModule",{value:!0});var _createClass$4=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_merge$2=merge,_merge2$2=_interopRequireDefault$4(_merge$2),_shared$1=shared;function _interopRequireDefault$4(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$5(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}var CanvasRenderer=function(){function s(l,c,d){_classCallCheck$5(this,s),this.canvas=l,this.encodings=c,this.options=d}return _createClass$4(s,[{key:"render",value:function(){if(!this.canvas.getContext)throw new Error("The browser does not support canvas.");this.prepareCanvas();for(var c=0;c<this.encodings.length;c++){var d=(0,_merge2$2.default)(this.options,this.encodings[c].options);this.drawCanvasBarcode(d,this.encodings[c]),this.drawCanvasText(d,this.encodings[c]),this.moveCanvasDrawing(this.encodings[c])}this.restoreCanvas()}},{key:"prepareCanvas",value:function(){var c=this.canvas.getContext("2d");c.save(),(0,_shared$1.calculateEncodingAttributes)(this.encodings,this.options,c);var d=(0,_shared$1.getTotalWidthOfEncodings)(this.encodings),f=(0,_shared$1.getMaximumHeightOfEncodings)(this.encodings);this.canvas.width=d+this.options.marginLeft+this.options.marginRight,this.canvas.height=f,c.clearRect(0,0,this.canvas.width,this.canvas.height),this.options.background&&(c.fillStyle=this.options.background,c.fillRect(0,0,this.canvas.width,this.canvas.height)),c.translate(this.options.marginLeft,0)}},{key:"drawCanvasBarcode",value:function(c,d){var f=this.canvas.getContext("2d"),g=d.data,v;c.textPosition=="top"?v=c.marginTop+c.fontSize+c.textMargin:v=c.marginTop,f.fillStyle=c.lineColor;for(var b=0;b<g.length;b++){var $=b*c.width+d.barcodePadding;g[b]==="1"?f.fillRect($,v,c.width,c.height):g[b]&&f.fillRect($,v,c.width,c.height*g[b])}}},{key:"drawCanvasText",value:function(c,d){var f=this.canvas.getContext("2d"),g=c.fontOptions+" "+c.fontSize+"px "+c.font;if(c.displayValue){var v,b;c.textPosition=="top"?b=c.marginTop+c.fontSize-c.textMargin:b=c.height+c.textMargin+c.marginTop+c.fontSize,f.font=g,c.textAlign=="left"||d.barcodePadding>0?(v=0,f.textAlign="left"):c.textAlign=="right"?(v=d.width-1,f.textAlign="right"):(v=d.width/2,f.textAlign="center"),f.fillText(d.text,v,b)}}},{key:"moveCanvasDrawing",value:function(c){var d=this.canvas.getContext("2d");d.translate(c.width,0)}},{key:"restoreCanvas",value:function(){var c=this.canvas.getContext("2d");c.restore()}}]),s}();canvas.default=CanvasRenderer;var svg={};Object.defineProperty(svg,"__esModule",{value:!0});var _createClass$3=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}(),_merge$1=merge,_merge2$1=_interopRequireDefault$3(_merge$1),_shared=shared;function _interopRequireDefault$3(s){return s&&s.__esModule?s:{default:s}}function _classCallCheck$4(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}var svgns="http://www.w3.org/2000/svg",SVGRenderer=function(){function s(l,c,d){_classCallCheck$4(this,s),this.svg=l,this.encodings=c,this.options=d,this.document=d.xmlDocument||document}return _createClass$3(s,[{key:"render",value:function(){var c=this.options.marginLeft;this.prepareSVG();for(var d=0;d<this.encodings.length;d++){var f=this.encodings[d],g=(0,_merge2$1.default)(this.options,f.options),v=this.createGroup(c,g.marginTop,this.svg);this.setGroupOptions(v,g),this.drawSvgBarcode(v,g,f),this.drawSVGText(v,g,f),c+=f.width}}},{key:"prepareSVG",value:function(){for(;this.svg.firstChild;)this.svg.removeChild(this.svg.firstChild);(0,_shared.calculateEncodingAttributes)(this.encodings,this.options);var c=(0,_shared.getTotalWidthOfEncodings)(this.encodings),d=(0,_shared.getMaximumHeightOfEncodings)(this.encodings),f=c+this.options.marginLeft+this.options.marginRight;this.setSvgAttributes(f,d),this.options.background&&this.drawRect(0,0,f,d,this.svg).setAttribute("style","fill:"+this.options.background+";")}},{key:"drawSvgBarcode",value:function(c,d,f){var g=f.data,v;d.textPosition=="top"?v=d.fontSize+d.textMargin:v=0;for(var b=0,$=0,y=0;y<g.length;y++)$=y*d.width+f.barcodePadding,g[y]==="1"?b++:b>0&&(this.drawRect($-d.width*b,v,d.width*b,d.height,c),b=0);b>0&&this.drawRect($-d.width*(b-1),v,d.width*b,d.height,c)}},{key:"drawSVGText",value:function(c,d,f){var g=this.document.createElementNS(svgns,"text");if(d.displayValue){var v,b;g.setAttribute("style","font:"+d.fontOptions+" "+d.fontSize+"px "+d.font),d.textPosition=="top"?b=d.fontSize-d.textMargin:b=d.height+d.textMargin+d.fontSize,d.textAlign=="left"||f.barcodePadding>0?(v=0,g.setAttribute("text-anchor","start")):d.textAlign=="right"?(v=f.width-1,g.setAttribute("text-anchor","end")):(v=f.width/2,g.setAttribute("text-anchor","middle")),g.setAttribute("x",v),g.setAttribute("y",b),g.appendChild(this.document.createTextNode(f.text)),c.appendChild(g)}}},{key:"setSvgAttributes",value:function(c,d){var f=this.svg;f.setAttribute("width",c+"px"),f.setAttribute("height",d+"px"),f.setAttribute("x","0px"),f.setAttribute("y","0px"),f.setAttribute("viewBox","0 0 "+c+" "+d),f.setAttribute("xmlns",svgns),f.setAttribute("version","1.1"),f.setAttribute("style","transform: translate(0,0)")}},{key:"createGroup",value:function(c,d,f){var g=this.document.createElementNS(svgns,"g");return g.setAttribute("transform","translate("+c+", "+d+")"),f.appendChild(g),g}},{key:"setGroupOptions",value:function(c,d){c.setAttribute("style","fill:"+d.lineColor+";")}},{key:"drawRect",value:function(c,d,f,g,v){var b=this.document.createElementNS(svgns,"rect");return b.setAttribute("x",c),b.setAttribute("y",d),b.setAttribute("width",f),b.setAttribute("height",g),v.appendChild(b),b}}]),s}();svg.default=SVGRenderer;var object={};Object.defineProperty(object,"__esModule",{value:!0});var _createClass$2=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}();function _classCallCheck$3(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}var ObjectRenderer=function(){function s(l,c,d){_classCallCheck$3(this,s),this.object=l,this.encodings=c,this.options=d}return _createClass$2(s,[{key:"render",value:function(){this.object.encodings=this.encodings}}]),s}();object.default=ObjectRenderer;Object.defineProperty(renderers,"__esModule",{value:!0});var _canvas=canvas,_canvas2=_interopRequireDefault$2(_canvas),_svg=svg,_svg2=_interopRequireDefault$2(_svg),_object=object,_object2=_interopRequireDefault$2(_object);function _interopRequireDefault$2(s){return s&&s.__esModule?s:{default:s}}renderers.default={CanvasRenderer:_canvas2.default,SVGRenderer:_svg2.default,ObjectRenderer:_object2.default};var exceptions={};Object.defineProperty(exceptions,"__esModule",{value:!0});function _classCallCheck$2(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(s,l){if(!s)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return l&&(typeof l=="object"||typeof l=="function")?l:s}function _inherits(s,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof l);s.prototype=Object.create(l&&l.prototype,{constructor:{value:s,enumerable:!1,writable:!0,configurable:!0}}),l&&(Object.setPrototypeOf?Object.setPrototypeOf(s,l):s.__proto__=l)}var InvalidInputException=function(s){_inherits(l,s);function l(c,d){_classCallCheck$2(this,l);var f=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return f.name="InvalidInputException",f.symbology=c,f.input=d,f.message='"'+f.input+'" is not a valid input for '+f.symbology,f}return l}(Error),InvalidElementException=function(s){_inherits(l,s);function l(){_classCallCheck$2(this,l);var c=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return c.name="InvalidElementException",c.message="Not supported type to render on",c}return l}(Error),NoElementException=function(s){_inherits(l,s);function l(){_classCallCheck$2(this,l);var c=_possibleConstructorReturn(this,(l.__proto__||Object.getPrototypeOf(l)).call(this));return c.name="NoElementException",c.message="No element to render on.",c}return l}(Error);exceptions.InvalidInputException=InvalidInputException;exceptions.InvalidElementException=InvalidElementException;exceptions.NoElementException=NoElementException;Object.defineProperty(getRenderProperties$1,"__esModule",{value:!0});var _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},_getOptionsFromElement=getOptionsFromElement$1,_getOptionsFromElement2=_interopRequireDefault$1(_getOptionsFromElement),_renderers=renderers,_renderers2=_interopRequireDefault$1(_renderers),_exceptions$1=exceptions;function _interopRequireDefault$1(s){return s&&s.__esModule?s:{default:s}}function getRenderProperties(s){if(typeof s=="string")return querySelectedRenderProperties(s);if(Array.isArray(s)){for(var l=[],c=0;c<s.length;c++)l.push(getRenderProperties(s[c]));return l}else{if(typeof HTMLCanvasElement<"u"&&s instanceof HTMLImageElement)return newCanvasRenderProperties(s);if(s&&s.nodeName&&s.nodeName.toLowerCase()==="svg"||typeof SVGElement<"u"&&s instanceof SVGElement)return{element:s,options:(0,_getOptionsFromElement2.default)(s),renderer:_renderers2.default.SVGRenderer};if(typeof HTMLCanvasElement<"u"&&s instanceof HTMLCanvasElement)return{element:s,options:(0,_getOptionsFromElement2.default)(s),renderer:_renderers2.default.CanvasRenderer};if(s&&s.getContext)return{element:s,renderer:_renderers2.default.CanvasRenderer};if(s&&(typeof s>"u"?"undefined":_typeof(s))==="object"&&!s.nodeName)return{element:s,renderer:_renderers2.default.ObjectRenderer};throw new _exceptions$1.InvalidElementException}}function querySelectedRenderProperties(s){var l=document.querySelectorAll(s);if(l.length!==0){for(var c=[],d=0;d<l.length;d++)c.push(getRenderProperties(l[d]));return c}}function newCanvasRenderProperties(s){var l=document.createElement("canvas");return{element:l,options:(0,_getOptionsFromElement2.default)(s),renderer:_renderers2.default.CanvasRenderer,afterRender:function(){s.setAttribute("src",l.toDataURL())}}}getRenderProperties$1.default=getRenderProperties;var ErrorHandler$1={};Object.defineProperty(ErrorHandler$1,"__esModule",{value:!0});var _createClass$1=function(){function s(l,c){for(var d=0;d<c.length;d++){var f=c[d];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(l,f.key,f)}}return function(l,c,d){return c&&s(l.prototype,c),d&&s(l,d),l}}();function _classCallCheck$1(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}var ErrorHandler=function(){function s(l){_classCallCheck$1(this,s),this.api=l}return _createClass$1(s,[{key:"handleCatch",value:function(c){if(c.name==="InvalidInputException")if(this.api._options.valid!==this.api._defaults.valid)this.api._options.valid(!1);else throw c.message;else throw c;this.api.render=function(){}}},{key:"wrapBarcodeCall",value:function(c){try{var d=c.apply(void 0,arguments);return this.api._options.valid(!0),d}catch(f){return this.handleCatch(f),this.api}}}]),s}();ErrorHandler$1.default=ErrorHandler;var _barcodes=barcodes,_barcodes2=_interopRequireDefault(_barcodes),_merge=merge,_merge2=_interopRequireDefault(_merge),_linearizeEncodings=linearizeEncodings$1,_linearizeEncodings2=_interopRequireDefault(_linearizeEncodings),_fixOptions=fixOptions$1,_fixOptions2=_interopRequireDefault(_fixOptions),_getRenderProperties=getRenderProperties$1,_getRenderProperties2=_interopRequireDefault(_getRenderProperties),_optionsFromStrings=optionsFromStrings$1,_optionsFromStrings2=_interopRequireDefault(_optionsFromStrings),_ErrorHandler=ErrorHandler$1,_ErrorHandler2=_interopRequireDefault(_ErrorHandler),_exceptions=exceptions,_defaults=defaults$4,_defaults2=_interopRequireDefault(_defaults);function _interopRequireDefault(s){return s&&s.__esModule?s:{default:s}}var API=function s(){},JsBarcode=function s(l,c,d){var f=new API;if(typeof l>"u")throw Error("No element to render on was provided.");return f._renderProperties=(0,_getRenderProperties2.default)(l),f._encodings=[],f._options=_defaults2.default,f._errorHandler=new _ErrorHandler2.default(f),typeof c<"u"&&(d=d||{},d.format||(d.format=autoSelectBarcode()),f.options(d)[d.format](c,d).render()),f};JsBarcode.getModule=function(s){return _barcodes2.default[s]};for(var name$1 in _barcodes2.default)_barcodes2.default.hasOwnProperty(name$1)&&registerBarcode(_barcodes2.default,name$1);function registerBarcode(s,l){API.prototype[l]=API.prototype[l.toUpperCase()]=API.prototype[l.toLowerCase()]=function(c,d){var f=this;return f._errorHandler.wrapBarcodeCall(function(){d.text=typeof d.text>"u"?void 0:""+d.text;var g=(0,_merge2.default)(f._options,d);g=(0,_optionsFromStrings2.default)(g);var v=s[l],b=encode(c,v,g);return f._encodings.push(b),f})}}function encode(s,l,c){s=""+s;var d=new l(s,c);if(!d.valid())throw new _exceptions.InvalidInputException(d.constructor.name,s);var f=d.encode();f=(0,_linearizeEncodings2.default)(f);for(var g=0;g<f.length;g++)f[g].options=(0,_merge2.default)(c,f[g].options);return f}function autoSelectBarcode(){return _barcodes2.default.CODE128?"CODE128":Object.keys(_barcodes2.default)[0]}API.prototype.options=function(s){return this._options=(0,_merge2.default)(this._options,s),this};API.prototype.blank=function(s){var l=new Array(s+1).join("0");return this._encodings.push({data:l}),this};API.prototype.init=function(){if(this._renderProperties){Array.isArray(this._renderProperties)||(this._renderProperties=[this._renderProperties]);var s;for(var l in this._renderProperties){s=this._renderProperties[l];var c=(0,_merge2.default)(this._options,s.options);c.format=="auto"&&(c.format=autoSelectBarcode()),this._errorHandler.wrapBarcodeCall(function(){var d=c.value,f=_barcodes2.default[c.format.toUpperCase()],g=encode(d,f,c);render$2(s,g,c)})}}};API.prototype.render=function(){if(!this._renderProperties)throw new _exceptions.NoElementException;if(Array.isArray(this._renderProperties))for(var s=0;s<this._renderProperties.length;s++)render$2(this._renderProperties[s],this._encodings,this._options);else render$2(this._renderProperties,this._encodings,this._options);return this};API.prototype._defaults=_defaults2.default;function render$2(s,l,c){l=(0,_linearizeEncodings2.default)(l);for(var d=0;d<l.length;d++)l[d].options=(0,_merge2.default)(c,l[d].options),(0,_fixOptions2.default)(l[d].options);(0,_fixOptions2.default)(c);var f=s.renderer,g=new f(s.element,l,c);g.render(),s.afterRender&&s.afterRender()}typeof window<"u"&&(window.JsBarcode=JsBarcode);typeof jQuery<"u"&&(jQuery.fn.JsBarcode=function(s,l){var c=[];return jQuery(this).each(function(){c.push(this)}),JsBarcode(c,s,l)});var JsBarcode_1=JsBarcode;const fS=getDefaultExportFromCjs(JsBarcode_1);var qrcode={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);(function(s){function l(W){this.mode=d.MODE_8BIT_BYTE,this.data=W,this.parsedData=[];for(var q=0,Y=this.data.length;q<Y;q++){var re=[],se=this.data.charCodeAt(q);se>65536?(re[0]=240|(se&1835008)>>>18,re[1]=128|(se&258048)>>>12,re[2]=128|(se&4032)>>>6,re[3]=128|se&63):se>2048?(re[0]=224|(se&61440)>>>12,re[1]=128|(se&4032)>>>6,re[2]=128|se&63):se>128?(re[0]=192|(se&1984)>>>6,re[1]=128|se&63):re[0]=se,this.parsedData.push(re)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}l.prototype={getLength:function(W){return this.parsedData.length},write:function(W){for(var q=0,Y=this.parsedData.length;q<Y;q++)W.put(this.parsedData[q],8)}};function c(W,q){this.typeNumber=W,this.errorCorrectLevel=q,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}c.prototype={addData:function(W){var q=new l(W);this.dataList.push(q),this.dataCache=null},isDark:function(W,q){if(W<0||this.moduleCount<=W||q<0||this.moduleCount<=q)throw new Error(W+","+q);return this.modules[W][q]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(W,q){this.moduleCount=this.typeNumber*4+17,this.modules=new Array(this.moduleCount);for(var Y=0;Y<this.moduleCount;Y++){this.modules[Y]=new Array(this.moduleCount);for(var re=0;re<this.moduleCount;re++)this.modules[Y][re]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(W,q),this.typeNumber>=7&&this.setupTypeNumber(W),this.dataCache==null&&(this.dataCache=c.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,q)},setupPositionProbePattern:function(W,q){for(var Y=-1;Y<=7;Y++)if(!(W+Y<=-1||this.moduleCount<=W+Y))for(var re=-1;re<=7;re++)q+re<=-1||this.moduleCount<=q+re||(0<=Y&&Y<=6&&(re==0||re==6)||0<=re&&re<=6&&(Y==0||Y==6)||2<=Y&&Y<=4&&2<=re&&re<=4?this.modules[W+Y][q+re]=!0:this.modules[W+Y][q+re]=!1)},getBestMaskPattern:function(){for(var W=0,q=0,Y=0;Y<8;Y++){this.makeImpl(!0,Y);var re=v.getLostPoint(this);(Y==0||W>re)&&(W=re,q=Y)}return q},createMovieClip:function(W,q,Y){var re=W.createEmptyMovieClip(q,Y),se=1;this.make();for(var de=0;de<this.modules.length;de++)for(var he=de*se,ge=0;ge<this.modules[de].length;ge++){var Se=ge*se,Ae=this.modules[de][ge];Ae&&(re.beginFill(0,100),re.moveTo(Se,he),re.lineTo(Se+se,he),re.lineTo(Se+se,he+se),re.lineTo(Se,he+se),re.endFill())}return re},setupTimingPattern:function(){for(var W=8;W<this.moduleCount-8;W++)this.modules[W][6]==null&&(this.modules[W][6]=W%2==0);for(var q=8;q<this.moduleCount-8;q++)this.modules[6][q]==null&&(this.modules[6][q]=q%2==0)},setupPositionAdjustPattern:function(){for(var W=v.getPatternPosition(this.typeNumber),q=0;q<W.length;q++)for(var Y=0;Y<W.length;Y++){var re=W[q],se=W[Y];if(this.modules[re][se]==null)for(var de=-2;de<=2;de++)for(var he=-2;he<=2;he++)de==-2||de==2||he==-2||he==2||de==0&&he==0?this.modules[re+de][se+he]=!0:this.modules[re+de][se+he]=!1}},setupTypeNumber:function(W){for(var q=v.getBCHTypeNumber(this.typeNumber),Y=0;Y<18;Y++){var re=!W&&(q>>Y&1)==1;this.modules[Math.floor(Y/3)][Y%3+this.moduleCount-8-3]=re}for(var Y=0;Y<18;Y++){var re=!W&&(q>>Y&1)==1;this.modules[Y%3+this.moduleCount-8-3][Math.floor(Y/3)]=re}},setupTypeInfo:function(W,q){for(var Y=this.errorCorrectLevel<<3|q,re=v.getBCHTypeInfo(Y),se=0;se<15;se++){var de=!W&&(re>>se&1)==1;se<6?this.modules[se][8]=de:se<8?this.modules[se+1][8]=de:this.modules[this.moduleCount-15+se][8]=de}for(var se=0;se<15;se++){var de=!W&&(re>>se&1)==1;se<8?this.modules[8][this.moduleCount-se-1]=de:se<9?this.modules[8][15-se-1+1]=de:this.modules[8][15-se-1]=de}this.modules[this.moduleCount-8][8]=!W},mapData:function(W,q){for(var Y=-1,re=this.moduleCount-1,se=7,de=0,he=this.moduleCount-1;he>0;he-=2)for(he==6&&he--;;){for(var ge=0;ge<2;ge++)if(this.modules[re][he-ge]==null){var Se=!1;de<W.length&&(Se=(W[de]>>>se&1)==1);var Ae=v.getMask(q,re,he-ge);Ae&&(Se=!Se),this.modules[re][he-ge]=Se,se--,se==-1&&(de++,se=7)}if(re+=Y,re<0||this.moduleCount<=re){re-=Y,Y=-Y;break}}}},c.PAD0=236,c.PAD1=17,c.createData=function(W,q,Y){for(var re=x.getRSBlocks(W,q),se=new C,de=0;de<Y.length;de++){var he=Y[de];se.put(he.mode,4),se.put(he.getLength(),v.getLengthInBits(he.mode,W)),he.write(se)}for(var ge=0,de=0;de<re.length;de++)ge+=re[de].dataCount;if(se.getLengthInBits()>ge*8)throw new Error("code length overflow. ("+se.getLengthInBits()+">"+ge*8+")");for(se.getLengthInBits()+4<=ge*8&&se.put(0,4);se.getLengthInBits()%8!=0;)se.putBit(!1);for(;!(se.getLengthInBits()>=ge*8||(se.put(c.PAD0,8),se.getLengthInBits()>=ge*8));)se.put(c.PAD1,8);return c.createBytes(se,re)},c.createBytes=function(W,q){for(var Y=0,re=0,se=0,de=new Array(q.length),he=new Array(q.length),ge=0;ge<q.length;ge++){var Se=q[ge].dataCount,Ae=q[ge].totalCount-Se;re=Math.max(re,Se),se=Math.max(se,Ae),de[ge]=new Array(Se);for(var Re=0;Re<de[ge].length;Re++)de[ge][Re]=255&W.buffer[Re+Y];Y+=Se;var Be=v.getErrorCorrectPolynomial(Ae),Ke=new y(de[ge],Be.getLength()-1),Lr=Ke.mod(Be);he[ge]=new Array(Be.getLength()-1);for(var Re=0;Re<he[ge].length;Re++){var _y=Re+Lr.getLength()-he[ge].length;he[ge][Re]=_y>=0?Lr.get(_y):0}}for(var by=0,Re=0;Re<q.length;Re++)by+=q[Re].totalCount;for(var yy=new Array(by),my=0,Re=0;Re<re;Re++)for(var ge=0;ge<q.length;ge++)Re<de[ge].length&&(yy[my++]=de[ge][Re]);for(var Re=0;Re<se;Re++)for(var ge=0;ge<q.length;ge++)Re<he[ge].length&&(yy[my++]=he[ge][Re]);return yy};for(var d={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},f={L:1,M:0,Q:3,H:2},g={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},v={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(W){for(var q=W<<10;v.getBCHDigit(q)-v.getBCHDigit(v.G15)>=0;)q^=v.G15<<v.getBCHDigit(q)-v.getBCHDigit(v.G15);return(W<<10|q)^v.G15_MASK},getBCHTypeNumber:function(W){for(var q=W<<12;v.getBCHDigit(q)-v.getBCHDigit(v.G18)>=0;)q^=v.G18<<v.getBCHDigit(q)-v.getBCHDigit(v.G18);return W<<12|q},getBCHDigit:function(W){for(var q=0;W!=0;)q++,W>>>=1;return q},getPatternPosition:function(W){return v.PATTERN_POSITION_TABLE[W-1]},getMask:function(W,q,Y){switch(W){case g.PATTERN000:return(q+Y)%2==0;case g.PATTERN001:return q%2==0;case g.PATTERN010:return Y%3==0;case g.PATTERN011:return(q+Y)%3==0;case g.PATTERN100:return(Math.floor(q/2)+Math.floor(Y/3))%2==0;case g.PATTERN101:return q*Y%2+q*Y%3==0;case g.PATTERN110:return(q*Y%2+q*Y%3)%2==0;case g.PATTERN111:return(q*Y%3+(q+Y)%2)%2==0;default:throw new Error("bad maskPattern:"+W)}},getErrorCorrectPolynomial:function(W){for(var q=new y([1],0),Y=0;Y<W;Y++)q=q.multiply(new y([1,b.gexp(Y)],0));return q},getLengthInBits:function(W,q){if(1<=q&&q<10)switch(W){case d.MODE_NUMBER:return 10;case d.MODE_ALPHA_NUM:return 9;case d.MODE_8BIT_BYTE:return 8;case d.MODE_KANJI:return 8;default:throw new Error("mode:"+W)}else if(q<27)switch(W){case d.MODE_NUMBER:return 12;case d.MODE_ALPHA_NUM:return 11;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 10;default:throw new Error("mode:"+W)}else if(q<41)switch(W){case d.MODE_NUMBER:return 14;case d.MODE_ALPHA_NUM:return 13;case d.MODE_8BIT_BYTE:return 16;case d.MODE_KANJI:return 12;default:throw new Error("mode:"+W)}else throw new Error("type:"+q)},getLostPoint:function(W){for(var q=W.getModuleCount(),Y=0,re=0;re<q;re++)for(var se=0;se<q;se++){for(var de=0,he=W.isDark(re,se),ge=-1;ge<=1;ge++)if(!(re+ge<0||q<=re+ge))for(var Se=-1;Se<=1;Se++)se+Se<0||q<=se+Se||ge==0&&Se==0||he==W.isDark(re+ge,se+Se)&&de++;de>5&&(Y+=3+de-5)}for(var re=0;re<q-1;re++)for(var se=0;se<q-1;se++){var Ae=0;W.isDark(re,se)&&Ae++,W.isDark(re+1,se)&&Ae++,W.isDark(re,se+1)&&Ae++,W.isDark(re+1,se+1)&&Ae++,(Ae==0||Ae==4)&&(Y+=3)}for(var re=0;re<q;re++)for(var se=0;se<q-6;se++)W.isDark(re,se)&&!W.isDark(re,se+1)&&W.isDark(re,se+2)&&W.isDark(re,se+3)&&W.isDark(re,se+4)&&!W.isDark(re,se+5)&&W.isDark(re,se+6)&&(Y+=40);for(var se=0;se<q;se++)for(var re=0;re<q-6;re++)W.isDark(re,se)&&!W.isDark(re+1,se)&&W.isDark(re+2,se)&&W.isDark(re+3,se)&&W.isDark(re+4,se)&&!W.isDark(re+5,se)&&W.isDark(re+6,se)&&(Y+=40);for(var Re=0,se=0;se<q;se++)for(var re=0;re<q;re++)W.isDark(re,se)&&Re++;var Be=Math.abs(100*Re/q/q-50)/5;return Y+=Be*10,Y}},b={glog:function(W){if(W<1)throw new Error("glog("+W+")");return b.LOG_TABLE[W]},gexp:function(W){for(;W<0;)W+=255;for(;W>=256;)W-=255;return b.EXP_TABLE[W]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},$=0;$<8;$++)b.EXP_TABLE[$]=1<<$;for(var $=8;$<256;$++)b.EXP_TABLE[$]=b.EXP_TABLE[$-4]^b.EXP_TABLE[$-5]^b.EXP_TABLE[$-6]^b.EXP_TABLE[$-8];for(var $=0;$<255;$++)b.LOG_TABLE[b.EXP_TABLE[$]]=$;function y(W,q){if(W.length==null)throw new Error(W.length+"/"+q);for(var Y=0;Y<W.length&&W[Y]==0;)Y++;this.num=new Array(W.length-Y+q);for(var re=0;re<W.length-Y;re++)this.num[re]=W[re+Y]}y.prototype={get:function(W){return this.num[W]},getLength:function(){return this.num.length},multiply:function(W){for(var q=new Array(this.getLength()+W.getLength()-1),Y=0;Y<this.getLength();Y++)for(var re=0;re<W.getLength();re++)q[Y+re]^=b.gexp(b.glog(this.get(Y))+b.glog(W.get(re)));return new y(q,0)},mod:function(W){if(this.getLength()-W.getLength()<0)return this;for(var q=b.glog(this.get(0))-b.glog(W.get(0)),Y=new Array(this.getLength()),re=0;re<this.getLength();re++)Y[re]=this.get(re);for(var re=0;re<W.getLength();re++)Y[re]^=b.gexp(b.glog(W.get(re))+q);return new y(Y,0).mod(W)}};function x(W,q){this.totalCount=W,this.dataCount=q}x.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],x.getRSBlocks=function(W,q){var Y=x.getRsBlockTable(W,q);if(Y==null)throw new Error("bad rs block @ typeNumber:"+W+"/errorCorrectLevel:"+q);for(var re=Y.length/3,se=[],de=0;de<re;de++)for(var he=Y[de*3+0],ge=Y[de*3+1],Se=Y[de*3+2],Ae=0;Ae<he;Ae++)se.push(new x(ge,Se));return se},x.getRsBlockTable=function(W,q){switch(q){case f.L:return x.RS_BLOCK_TABLE[(W-1)*4+0];case f.M:return x.RS_BLOCK_TABLE[(W-1)*4+1];case f.Q:return x.RS_BLOCK_TABLE[(W-1)*4+2];case f.H:return x.RS_BLOCK_TABLE[(W-1)*4+3];default:return}};function C(){this.buffer=[],this.length=0}C.prototype={get:function(W){var q=Math.floor(W/8);return(this.buffer[q]>>>7-W%8&1)==1},put:function(W,q){for(var Y=0;Y<q;Y++)this.putBit((W>>>q-Y-1&1)==1)},getLengthInBits:function(){return this.length},putBit:function(W){var q=Math.floor(this.length/8);this.buffer.length<=q&&this.buffer.push(0),W&&(this.buffer[q]|=128>>>this.length%8),this.length++}};var E=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function N(W){if(this.options={padding:4,width:256,height:256,typeNumber:4,color:"#000000",background:"#ffffff",ecl:"M"},typeof W=="string"&&(W={content:W}),W)for(var q in W)this.options[q]=W[q];if(typeof this.options.content!="string")throw new Error("Expected 'content' as string!");if(this.options.content.length===0)throw new Error("Expected 'content' to be non-empty!");if(!(this.options.padding>=0))throw new Error("Expected 'padding' value to be non-negative!");if(!(this.options.width>0)||!(this.options.height>0))throw new Error("Expected 'width' or 'height' value to be higher than zero!");function Y(Se){switch(Se){case"L":return f.L;case"M":return f.M;case"Q":return f.Q;case"H":return f.H;default:throw new Error("Unknwon error correction level: "+Se)}}function re(Se,Ae){for(var Re=se(Se),Be=1,Ke=0,Lr=0,_y=E.length;Lr<=_y;Lr++){var by=E[Lr];if(!by)throw new Error("Content too long: expected "+Ke+" but got "+Re);switch(Ae){case"L":Ke=by[0];break;case"M":Ke=by[1];break;case"Q":Ke=by[2];break;case"H":Ke=by[3];break;default:throw new Error("Unknwon error correction level: "+Ae)}if(Re<=Ke)break;Be++}if(Be>E.length)throw new Error("Content too long");return Be}function se(Se){var Ae=encodeURI(Se).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return Ae.length+(Ae.length!=Se?3:0)}var de=this.options.content,he=re(de,this.options.ecl),ge=Y(this.options.ecl);this.qrcode=new c(he,ge),this.qrcode.addData(de),this.qrcode.make()}N.prototype.svg=function(W){var q=this.options||{},Y=this.qrcode.modules;typeof W>"u"&&(W={container:q.container||"svg"});for(var re=typeof q.pretty<"u"?!!q.pretty:!0,se=re?"  ":"",de=re?`\r
`:"",he=q.width,ge=q.height,Se=Y.length,Ae=he/(Se+2*q.padding),Re=ge/(Se+2*q.padding),Be=typeof q.join<"u"?!!q.join:!1,Ke=typeof q.swap<"u"?!!q.swap:!1,Lr=typeof q.xmlDeclaration<"u"?!!q.xmlDeclaration:!0,_y=typeof q.predefined<"u"?!!q.predefined:!1,by=_y?se+'<defs><path id="qrmodule" d="M0 0 h'+Re+" v"+Ae+' H0 z" style="fill:'+q.color+';shape-rendering:crispEdges;" /></defs>'+de:"",yy=se+'<rect x="0" y="0" width="'+he+'" height="'+ge+'" style="fill:'+q.background+';shape-rendering:crispEdges;"/>'+de,my="",$t="",K$=0;K$<Se;K$++)for(var Y$=0;Y$<Se;Y$++){var W$=Y[Y$][K$];if(W$){var U$=Y$*Ae+q.padding*Ae,hy=K$*Re+q.padding*Re;if(Ke){var G$=U$;U$=hy,hy=G$}if(Be){var ky=Ae+U$,$y=Re+hy;U$=Number.isInteger(U$)?Number(U$):U$.toFixed(2),hy=Number.isInteger(hy)?Number(hy):hy.toFixed(2),ky=Number.isInteger(ky)?Number(ky):ky.toFixed(2),$y=Number.isInteger($y)?Number($y):$y.toFixed(2),$t+="M"+U$+","+hy+" V"+$y+" H"+ky+" V"+hy+" H"+U$+" Z "}else _y?my+=se+'<use x="'+U$.toString()+'" y="'+hy.toString()+'" href="#qrmodule" />'+de:my+=se+'<rect x="'+U$.toString()+'" y="'+hy.toString()+'" width="'+Ae+'" height="'+Re+'" style="fill:'+q.color+';shape-rendering:crispEdges;"/>'+de}}Be&&(my=se+'<path x="0" y="0" style="fill:'+q.color+';shape-rendering:crispEdges;" d="'+$t+'" />');var rS="";switch(W.container){case"svg":Lr&&(rS+='<?xml version="1.0" standalone="yes"?>'+de),rS+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="'+he+'" height="'+ge+'">'+de,rS+=by+yy+my,rS+="</svg>";break;case"svg-viewbox":Lr&&(rS+='<?xml version="1.0" standalone="yes"?>'+de),rS+='<svg xmlns="http://www.w3.org/2000/svg" version="1.1" viewBox="0 0 '+he+" "+ge+'">'+de,rS+=by+yy+my,rS+="</svg>";break;case"g":rS+='<g width="'+he+'" height="'+ge+'">'+de,rS+=by+yy+my,rS+="</g>";break;default:rS+=(by+yy+my).replace(/^\s+/,"");break}return rS},N.prototype.save=function(W,q){var Y=this.svg();typeof q!="function"&&(q=function(se,de){});try{var re=require$$0;re.writeFile(W,Y,q)}catch(se){q(se)}},s.exports=N})(qrcode);var qrcodeExports=qrcode.exports;const vS=getDefaultExportFromCjs(qrcodeExports);var top="top",bottom="bottom",right="right",left="left",auto="auto",basePlacements=[top,bottom,right,left],start="start",end="end",clippingParents="clippingParents",viewport="viewport",popper="popper",reference="reference",variationPlacements=basePlacements.reduce(function(s,l){return s.concat([l+"-"+start,l+"-"+end])},[]),placements=[].concat(basePlacements,[auto]).reduce(function(s,l){return s.concat([l,l+"-"+start,l+"-"+end])},[]),beforeRead="beforeRead",read="read",afterRead="afterRead",beforeMain="beforeMain",main$1="main",afterMain="afterMain",beforeWrite="beforeWrite",write="write",afterWrite="afterWrite",modifierPhases=[beforeRead,read,afterRead,beforeMain,main$1,afterMain,beforeWrite,write,afterWrite];function getNodeName(s){return s?(s.nodeName||"").toLowerCase():null}function getWindow(s){if(s==null)return window;if(s.toString()!=="[object Window]"){var l=s.ownerDocument;return l&&l.defaultView||window}return s}function isElement$3(s){var l=getWindow(s).Element;return s instanceof l||s instanceof Element}function isHTMLElement(s){var l=getWindow(s).HTMLElement;return s instanceof l||s instanceof HTMLElement}function isShadowRoot(s){if(typeof ShadowRoot>"u")return!1;var l=getWindow(s).ShadowRoot;return s instanceof l||s instanceof ShadowRoot}function applyStyles(s){var l=s.state;Object.keys(l.elements).forEach(function(c){var d=l.styles[c]||{},f=l.attributes[c]||{},g=l.elements[c];!isHTMLElement(g)||!getNodeName(g)||(Object.assign(g.style,d),Object.keys(f).forEach(function(v){var b=f[v];b===!1?g.removeAttribute(v):g.setAttribute(v,b===!0?"":b)}))})}function effect$2(s){var l=s.state,c={popper:{position:l.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(l.elements.popper.style,c.popper),l.styles=c,l.elements.arrow&&Object.assign(l.elements.arrow.style,c.arrow),function(){Object.keys(l.elements).forEach(function(d){var f=l.elements[d],g=l.attributes[d]||{},v=Object.keys(l.styles.hasOwnProperty(d)?l.styles[d]:c[d]),b=v.reduce(function($,y){return $[y]="",$},{});!isHTMLElement(f)||!getNodeName(f)||(Object.assign(f.style,b),Object.keys(g).forEach(function($){f.removeAttribute($)}))})}}const applyStyles$1={name:"applyStyles",enabled:!0,phase:"write",fn:applyStyles,effect:effect$2,requires:["computeStyles"]};function getBasePlacement$1(s){return s.split("-")[0]}var max=Math.max,min=Math.min,round$1=Math.round;function getUAString(){var s=navigator.userAgentData;return s!=null&&s.brands&&Array.isArray(s.brands)?s.brands.map(function(l){return l.brand+"/"+l.version}).join(" "):navigator.userAgent}function isLayoutViewport(){return!/^((?!chrome|android).)*safari/i.test(getUAString())}function getBoundingClientRect(s,l,c){l===void 0&&(l=!1),c===void 0&&(c=!1);var d=s.getBoundingClientRect(),f=1,g=1;l&&isHTMLElement(s)&&(f=s.offsetWidth>0&&round$1(d.width)/s.offsetWidth||1,g=s.offsetHeight>0&&round$1(d.height)/s.offsetHeight||1);var v=isElement$3(s)?getWindow(s):window,b=v.visualViewport,$=!isLayoutViewport()&&c,y=(d.left+($&&b?b.offsetLeft:0))/f,x=(d.top+($&&b?b.offsetTop:0))/g,C=d.width/f,E=d.height/g;return{width:C,height:E,top:x,right:y+C,bottom:x+E,left:y,x:y,y:x}}function getLayoutRect(s){var l=getBoundingClientRect(s),c=s.offsetWidth,d=s.offsetHeight;return Math.abs(l.width-c)<=1&&(c=l.width),Math.abs(l.height-d)<=1&&(d=l.height),{x:s.offsetLeft,y:s.offsetTop,width:c,height:d}}function contains$1(s,l){var c=l.getRootNode&&l.getRootNode();if(s.contains(l))return!0;if(c&&isShadowRoot(c)){var d=l;do{if(d&&s.isSameNode(d))return!0;d=d.parentNode||d.host}while(d)}return!1}function getComputedStyle$1(s){return getWindow(s).getComputedStyle(s)}function isTableElement(s){return["table","td","th"].indexOf(getNodeName(s))>=0}function getDocumentElement(s){return((isElement$3(s)?s.ownerDocument:s.document)||window.document).documentElement}function getParentNode(s){return getNodeName(s)==="html"?s:s.assignedSlot||s.parentNode||(isShadowRoot(s)?s.host:null)||getDocumentElement(s)}function getTrueOffsetParent(s){return!isHTMLElement(s)||getComputedStyle$1(s).position==="fixed"?null:s.offsetParent}function getContainingBlock(s){var l=/firefox/i.test(getUAString()),c=/Trident/i.test(getUAString());if(c&&isHTMLElement(s)){var d=getComputedStyle$1(s);if(d.position==="fixed")return null}var f=getParentNode(s);for(isShadowRoot(f)&&(f=f.host);isHTMLElement(f)&&["html","body"].indexOf(getNodeName(f))<0;){var g=getComputedStyle$1(f);if(g.transform!=="none"||g.perspective!=="none"||g.contain==="paint"||["transform","perspective"].indexOf(g.willChange)!==-1||l&&g.willChange==="filter"||l&&g.filter&&g.filter!=="none")return f;f=f.parentNode}return null}function getOffsetParent(s){for(var l=getWindow(s),c=getTrueOffsetParent(s);c&&isTableElement(c)&&getComputedStyle$1(c).position==="static";)c=getTrueOffsetParent(c);return c&&(getNodeName(c)==="html"||getNodeName(c)==="body"&&getComputedStyle$1(c).position==="static")?l:c||getContainingBlock(s)||l}function getMainAxisFromPlacement(s){return["top","bottom"].indexOf(s)>=0?"x":"y"}function within(s,l,c){return max(s,min(l,c))}function withinMaxClamp(s,l,c){var d=within(s,l,c);return d>c?c:d}function getFreshSideObject(){return{top:0,right:0,bottom:0,left:0}}function mergePaddingObject(s){return Object.assign({},getFreshSideObject(),s)}function expandToHashMap(s,l){return l.reduce(function(c,d){return c[d]=s,c},{})}var toPaddingObject=function s(l,c){return l=typeof l=="function"?l(Object.assign({},c.rects,{placement:c.placement})):l,mergePaddingObject(typeof l!="number"?l:expandToHashMap(l,basePlacements))};function arrow$2(s){var l,c=s.state,d=s.name,f=s.options,g=c.elements.arrow,v=c.modifiersData.popperOffsets,b=getBasePlacement$1(c.placement),$=getMainAxisFromPlacement(b),y=[left,right].indexOf(b)>=0,x=y?"height":"width";if(!(!g||!v)){var C=toPaddingObject(f.padding,c),E=getLayoutRect(g),N=$==="y"?top:left,W=$==="y"?bottom:right,q=c.rects.reference[x]+c.rects.reference[$]-v[$]-c.rects.popper[x],Y=v[$]-c.rects.reference[$],re=getOffsetParent(g),se=re?$==="y"?re.clientHeight||0:re.clientWidth||0:0,de=q/2-Y/2,he=C[N],ge=se-E[x]-C[W],Se=se/2-E[x]/2+de,Ae=within(he,Se,ge),Re=$;c.modifiersData[d]=(l={},l[Re]=Ae,l.centerOffset=Ae-Se,l)}}function effect$1(s){var l=s.state,c=s.options,d=c.element,f=d===void 0?"[data-popper-arrow]":d;f!=null&&(typeof f=="string"&&(f=l.elements.popper.querySelector(f),!f)||contains$1(l.elements.popper,f)&&(l.elements.arrow=f))}const arrow$3={name:"arrow",enabled:!0,phase:"main",fn:arrow$2,effect:effect$1,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function getVariation(s){return s.split("-")[1]}var unsetSides={top:"auto",right:"auto",bottom:"auto",left:"auto"};function roundOffsetsByDPR(s,l){var c=s.x,d=s.y,f=l.devicePixelRatio||1;return{x:round$1(c*f)/f||0,y:round$1(d*f)/f||0}}function mapToStyles(s){var l,c=s.popper,d=s.popperRect,f=s.placement,g=s.variation,v=s.offsets,b=s.position,$=s.gpuAcceleration,y=s.adaptive,x=s.roundOffsets,C=s.isFixed,E=v.x,N=E===void 0?0:E,W=v.y,q=W===void 0?0:W,Y=typeof x=="function"?x({x:N,y:q}):{x:N,y:q};N=Y.x,q=Y.y;var re=v.hasOwnProperty("x"),se=v.hasOwnProperty("y"),de=left,he=top,ge=window;if(y){var Se=getOffsetParent(c),Ae="clientHeight",Re="clientWidth";if(Se===getWindow(c)&&(Se=getDocumentElement(c),getComputedStyle$1(Se).position!=="static"&&b==="absolute"&&(Ae="scrollHeight",Re="scrollWidth")),Se=Se,f===top||(f===left||f===right)&&g===end){he=bottom;var Be=C&&Se===ge&&ge.visualViewport?ge.visualViewport.height:Se[Ae];q-=Be-d.height,q*=$?1:-1}if(f===left||(f===top||f===bottom)&&g===end){de=right;var Ke=C&&Se===ge&&ge.visualViewport?ge.visualViewport.width:Se[Re];N-=Ke-d.width,N*=$?1:-1}}var Lr=Object.assign({position:b},y&&unsetSides),_y=x===!0?roundOffsetsByDPR({x:N,y:q},getWindow(c)):{x:N,y:q};if(N=_y.x,q=_y.y,$){var by;return Object.assign({},Lr,(by={},by[he]=se?"0":"",by[de]=re?"0":"",by.transform=(ge.devicePixelRatio||1)<=1?"translate("+N+"px, "+q+"px)":"translate3d("+N+"px, "+q+"px, 0)",by))}return Object.assign({},Lr,(l={},l[he]=se?q+"px":"",l[de]=re?N+"px":"",l.transform="",l))}function computeStyles(s){var l=s.state,c=s.options,d=c.gpuAcceleration,f=d===void 0?!0:d,g=c.adaptive,v=g===void 0?!0:g,b=c.roundOffsets,$=b===void 0?!0:b,y={placement:getBasePlacement$1(l.placement),variation:getVariation(l.placement),popper:l.elements.popper,popperRect:l.rects.popper,gpuAcceleration:f,isFixed:l.options.strategy==="fixed"};l.modifiersData.popperOffsets!=null&&(l.styles.popper=Object.assign({},l.styles.popper,mapToStyles(Object.assign({},y,{offsets:l.modifiersData.popperOffsets,position:l.options.strategy,adaptive:v,roundOffsets:$})))),l.modifiersData.arrow!=null&&(l.styles.arrow=Object.assign({},l.styles.arrow,mapToStyles(Object.assign({},y,{offsets:l.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:$})))),l.attributes.popper=Object.assign({},l.attributes.popper,{"data-popper-placement":l.placement})}const computeStyles$1={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:computeStyles,data:{}};var passive={passive:!0};function effect(s){var l=s.state,c=s.instance,d=s.options,f=d.scroll,g=f===void 0?!0:f,v=d.resize,b=v===void 0?!0:v,$=getWindow(l.elements.popper),y=[].concat(l.scrollParents.reference,l.scrollParents.popper);return g&&y.forEach(function(x){x.addEventListener("scroll",c.update,passive)}),b&&$.addEventListener("resize",c.update,passive),function(){g&&y.forEach(function(x){x.removeEventListener("scroll",c.update,passive)}),b&&$.removeEventListener("resize",c.update,passive)}}const eventListeners={name:"eventListeners",enabled:!0,phase:"write",fn:function s(){},effect,data:{}};var hash$1={left:"right",right:"left",bottom:"top",top:"bottom"};function getOppositePlacement(s){return s.replace(/left|right|bottom|top/g,function(l){return hash$1[l]})}var hash={start:"end",end:"start"};function getOppositeVariationPlacement(s){return s.replace(/start|end/g,function(l){return hash[l]})}function getWindowScroll(s){var l=getWindow(s),c=l.pageXOffset,d=l.pageYOffset;return{scrollLeft:c,scrollTop:d}}function getWindowScrollBarX(s){return getBoundingClientRect(getDocumentElement(s)).left+getWindowScroll(s).scrollLeft}function getViewportRect(s,l){var c=getWindow(s),d=getDocumentElement(s),f=c.visualViewport,g=d.clientWidth,v=d.clientHeight,b=0,$=0;if(f){g=f.width,v=f.height;var y=isLayoutViewport();(y||!y&&l==="fixed")&&(b=f.offsetLeft,$=f.offsetTop)}return{width:g,height:v,x:b+getWindowScrollBarX(s),y:$}}function getDocumentRect(s){var l,c=getDocumentElement(s),d=getWindowScroll(s),f=(l=s.ownerDocument)==null?void 0:l.body,g=max(c.scrollWidth,c.clientWidth,f?f.scrollWidth:0,f?f.clientWidth:0),v=max(c.scrollHeight,c.clientHeight,f?f.scrollHeight:0,f?f.clientHeight:0),b=-d.scrollLeft+getWindowScrollBarX(s),$=-d.scrollTop;return getComputedStyle$1(f||c).direction==="rtl"&&(b+=max(c.clientWidth,f?f.clientWidth:0)-g),{width:g,height:v,x:b,y:$}}function isScrollParent(s){var l=getComputedStyle$1(s),c=l.overflow,d=l.overflowX,f=l.overflowY;return/auto|scroll|overlay|hidden/.test(c+f+d)}function getScrollParent(s){return["html","body","#document"].indexOf(getNodeName(s))>=0?s.ownerDocument.body:isHTMLElement(s)&&isScrollParent(s)?s:getScrollParent(getParentNode(s))}function listScrollParents(s,l){var c;l===void 0&&(l=[]);var d=getScrollParent(s),f=d===((c=s.ownerDocument)==null?void 0:c.body),g=getWindow(d),v=f?[g].concat(g.visualViewport||[],isScrollParent(d)?d:[]):d,b=l.concat(v);return f?b:b.concat(listScrollParents(getParentNode(v)))}function rectToClientRect(s){return Object.assign({},s,{left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height})}function getInnerBoundingClientRect(s,l){var c=getBoundingClientRect(s,!1,l==="fixed");return c.top=c.top+s.clientTop,c.left=c.left+s.clientLeft,c.bottom=c.top+s.clientHeight,c.right=c.left+s.clientWidth,c.width=s.clientWidth,c.height=s.clientHeight,c.x=c.left,c.y=c.top,c}function getClientRectFromMixedType(s,l,c){return l===viewport?rectToClientRect(getViewportRect(s,c)):isElement$3(l)?getInnerBoundingClientRect(l,c):rectToClientRect(getDocumentRect(getDocumentElement(s)))}function getClippingParents(s){var l=listScrollParents(getParentNode(s)),c=["absolute","fixed"].indexOf(getComputedStyle$1(s).position)>=0,d=c&&isHTMLElement(s)?getOffsetParent(s):s;return isElement$3(d)?l.filter(function(f){return isElement$3(f)&&contains$1(f,d)&&getNodeName(f)!=="body"}):[]}function getClippingRect(s,l,c,d){var f=l==="clippingParents"?getClippingParents(s):[].concat(l),g=[].concat(f,[c]),v=g[0],b=g.reduce(function($,y){var x=getClientRectFromMixedType(s,y,d);return $.top=max(x.top,$.top),$.right=min(x.right,$.right),$.bottom=min(x.bottom,$.bottom),$.left=max(x.left,$.left),$},getClientRectFromMixedType(s,v,d));return b.width=b.right-b.left,b.height=b.bottom-b.top,b.x=b.left,b.y=b.top,b}function computeOffsets(s){var l=s.reference,c=s.element,d=s.placement,f=d?getBasePlacement$1(d):null,g=d?getVariation(d):null,v=l.x+l.width/2-c.width/2,b=l.y+l.height/2-c.height/2,$;switch(f){case top:$={x:v,y:l.y-c.height};break;case bottom:$={x:v,y:l.y+l.height};break;case right:$={x:l.x+l.width,y:b};break;case left:$={x:l.x-c.width,y:b};break;default:$={x:l.x,y:l.y}}var y=f?getMainAxisFromPlacement(f):null;if(y!=null){var x=y==="y"?"height":"width";switch(g){case start:$[y]=$[y]-(l[x]/2-c[x]/2);break;case end:$[y]=$[y]+(l[x]/2-c[x]/2);break}}return $}function detectOverflow(s,l){l===void 0&&(l={});var c=l,d=c.placement,f=d===void 0?s.placement:d,g=c.strategy,v=g===void 0?s.strategy:g,b=c.boundary,$=b===void 0?clippingParents:b,y=c.rootBoundary,x=y===void 0?viewport:y,C=c.elementContext,E=C===void 0?popper:C,N=c.altBoundary,W=N===void 0?!1:N,q=c.padding,Y=q===void 0?0:q,re=mergePaddingObject(typeof Y!="number"?Y:expandToHashMap(Y,basePlacements)),se=E===popper?reference:popper,de=s.rects.popper,he=s.elements[W?se:E],ge=getClippingRect(isElement$3(he)?he:he.contextElement||getDocumentElement(s.elements.popper),$,x,v),Se=getBoundingClientRect(s.elements.reference),Ae=computeOffsets({reference:Se,element:de,strategy:"absolute",placement:f}),Re=rectToClientRect(Object.assign({},de,Ae)),Be=E===popper?Re:Se,Ke={top:ge.top-Be.top+re.top,bottom:Be.bottom-ge.bottom+re.bottom,left:ge.left-Be.left+re.left,right:Be.right-ge.right+re.right},Lr=s.modifiersData.offset;if(E===popper&&Lr){var _y=Lr[f];Object.keys(Ke).forEach(function(by){var yy=[right,bottom].indexOf(by)>=0?1:-1,my=[top,bottom].indexOf(by)>=0?"y":"x";Ke[by]+=_y[my]*yy})}return Ke}function computeAutoPlacement(s,l){l===void 0&&(l={});var c=l,d=c.placement,f=c.boundary,g=c.rootBoundary,v=c.padding,b=c.flipVariations,$=c.allowedAutoPlacements,y=$===void 0?placements:$,x=getVariation(d),C=x?b?variationPlacements:variationPlacements.filter(function(W){return getVariation(W)===x}):basePlacements,E=C.filter(function(W){return y.indexOf(W)>=0});E.length===0&&(E=C);var N=E.reduce(function(W,q){return W[q]=detectOverflow(s,{placement:q,boundary:f,rootBoundary:g,padding:v})[getBasePlacement$1(q)],W},{});return Object.keys(N).sort(function(W,q){return N[W]-N[q]})}function getExpandedFallbackPlacements(s){if(getBasePlacement$1(s)===auto)return[];var l=getOppositePlacement(s);return[getOppositeVariationPlacement(s),l,getOppositeVariationPlacement(l)]}function flip(s){var l=s.state,c=s.options,d=s.name;if(!l.modifiersData[d]._skip){for(var f=c.mainAxis,g=f===void 0?!0:f,v=c.altAxis,b=v===void 0?!0:v,$=c.fallbackPlacements,y=c.padding,x=c.boundary,C=c.rootBoundary,E=c.altBoundary,N=c.flipVariations,W=N===void 0?!0:N,q=c.allowedAutoPlacements,Y=l.options.placement,re=getBasePlacement$1(Y),se=re===Y,de=$||(se||!W?[getOppositePlacement(Y)]:getExpandedFallbackPlacements(Y)),he=[Y].concat(de).reduce(function($y,rS){return $y.concat(getBasePlacement$1(rS)===auto?computeAutoPlacement(l,{placement:rS,boundary:x,rootBoundary:C,padding:y,flipVariations:W,allowedAutoPlacements:q}):rS)},[]),ge=l.rects.reference,Se=l.rects.popper,Ae=new Map,Re=!0,Be=he[0],Ke=0;Ke<he.length;Ke++){var Lr=he[Ke],_y=getBasePlacement$1(Lr),by=getVariation(Lr)===start,yy=[top,bottom].indexOf(_y)>=0,my=yy?"width":"height",$t=detectOverflow(l,{placement:Lr,boundary:x,rootBoundary:C,altBoundary:E,padding:y}),K$=yy?by?right:left:by?bottom:top;ge[my]>Se[my]&&(K$=getOppositePlacement(K$));var Y$=getOppositePlacement(K$),W$=[];if(g&&W$.push($t[_y]<=0),b&&W$.push($t[K$]<=0,$t[Y$]<=0),W$.every(function($y){return $y})){Be=Lr,Re=!1;break}Ae.set(Lr,W$)}if(Re)for(var U$=W?3:1,hy=function(rS){var lS=he.find(function(bS){var IS=Ae.get(bS);if(IS)return IS.slice(0,rS).every(function(BS){return BS})});if(lS)return Be=lS,"break"},G$=U$;G$>0;G$--){var ky=hy(G$);if(ky==="break")break}l.placement!==Be&&(l.modifiersData[d]._skip=!0,l.placement=Be,l.reset=!0)}}const flip$1={name:"flip",enabled:!0,phase:"main",fn:flip,requiresIfExists:["offset"],data:{_skip:!1}};function getSideOffsets(s,l,c){return c===void 0&&(c={x:0,y:0}),{top:s.top-l.height-c.y,right:s.right-l.width+c.x,bottom:s.bottom-l.height+c.y,left:s.left-l.width-c.x}}function isAnySideFullyClipped(s){return[top,right,bottom,left].some(function(l){return s[l]>=0})}function hide(s){var l=s.state,c=s.name,d=l.rects.reference,f=l.rects.popper,g=l.modifiersData.preventOverflow,v=detectOverflow(l,{elementContext:"reference"}),b=detectOverflow(l,{altBoundary:!0}),$=getSideOffsets(v,d),y=getSideOffsets(b,f,g),x=isAnySideFullyClipped($),C=isAnySideFullyClipped(y);l.modifiersData[c]={referenceClippingOffsets:$,popperEscapeOffsets:y,isReferenceHidden:x,hasPopperEscaped:C},l.attributes.popper=Object.assign({},l.attributes.popper,{"data-popper-reference-hidden":x,"data-popper-escaped":C})}const hide$1={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:hide};function distanceAndSkiddingToXY(s,l,c){var d=getBasePlacement$1(s),f=[left,top].indexOf(d)>=0?-1:1,g=typeof c=="function"?c(Object.assign({},l,{placement:s})):c,v=g[0],b=g[1];return v=v||0,b=(b||0)*f,[left,right].indexOf(d)>=0?{x:b,y:v}:{x:v,y:b}}function offset(s){var l=s.state,c=s.options,d=s.name,f=c.offset,g=f===void 0?[0,0]:f,v=placements.reduce(function(x,C){return x[C]=distanceAndSkiddingToXY(C,l.rects,g),x},{}),b=v[l.placement],$=b.x,y=b.y;l.modifiersData.popperOffsets!=null&&(l.modifiersData.popperOffsets.x+=$,l.modifiersData.popperOffsets.y+=y),l.modifiersData[d]=v}const offset$1={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:offset};function popperOffsets(s){var l=s.state,c=s.name;l.modifiersData[c]=computeOffsets({reference:l.rects.reference,element:l.rects.popper,strategy:"absolute",placement:l.placement})}const popperOffsets$1={name:"popperOffsets",enabled:!0,phase:"read",fn:popperOffsets,data:{}};function getAltAxis(s){return s==="x"?"y":"x"}function preventOverflow(s){var l=s.state,c=s.options,d=s.name,f=c.mainAxis,g=f===void 0?!0:f,v=c.altAxis,b=v===void 0?!1:v,$=c.boundary,y=c.rootBoundary,x=c.altBoundary,C=c.padding,E=c.tether,N=E===void 0?!0:E,W=c.tetherOffset,q=W===void 0?0:W,Y=detectOverflow(l,{boundary:$,rootBoundary:y,padding:C,altBoundary:x}),re=getBasePlacement$1(l.placement),se=getVariation(l.placement),de=!se,he=getMainAxisFromPlacement(re),ge=getAltAxis(he),Se=l.modifiersData.popperOffsets,Ae=l.rects.reference,Re=l.rects.popper,Be=typeof q=="function"?q(Object.assign({},l.rects,{placement:l.placement})):q,Ke=typeof Be=="number"?{mainAxis:Be,altAxis:Be}:Object.assign({mainAxis:0,altAxis:0},Be),Lr=l.modifiersData.offset?l.modifiersData.offset[l.placement]:null,_y={x:0,y:0};if(Se){if(g){var by,yy=he==="y"?top:left,my=he==="y"?bottom:right,$t=he==="y"?"height":"width",K$=Se[he],Y$=K$+Y[yy],W$=K$-Y[my],U$=N?-Re[$t]/2:0,hy=se===start?Ae[$t]:Re[$t],G$=se===start?-Re[$t]:-Ae[$t],ky=l.elements.arrow,$y=N&&ky?getLayoutRect(ky):{width:0,height:0},rS=l.modifiersData["arrow#persistent"]?l.modifiersData["arrow#persistent"].padding:getFreshSideObject(),lS=rS[yy],bS=rS[my],IS=within(0,Ae[$t],$y[$t]),BS=de?Ae[$t]/2-U$-IS-lS-Ke.mainAxis:hy-IS-lS-Ke.mainAxis,MS=de?-Ae[$t]/2+U$+IS+bS+Ke.mainAxis:G$+IS+bS+Ke.mainAxis,zS=l.elements.arrow&&getOffsetParent(l.elements.arrow),LS=zS?he==="y"?zS.clientTop||0:zS.clientLeft||0:0,nS=(by=Lr==null?void 0:Lr[he])!=null?by:0,Z$=K$+BS-nS-LS,dS=K$+MS-nS,ES=within(N?min(Y$,Z$):Y$,K$,N?max(W$,dS):W$);Se[he]=ES,_y[he]=ES-K$}if(b){var wy,tS=he==="x"?top:left,yS=he==="x"?bottom:right,Q$=Se[ge],eS=ge==="y"?"height":"width",cS=Q$+Y[tS],wS=Q$-Y[yS],xS=[top,left].indexOf(re)!==-1,OS=(wy=Lr==null?void 0:Lr[ge])!=null?wy:0,mS=xS?cS:Q$-Ae[eS]-Re[eS]-OS+Ke.altAxis,pS=xS?Q$+Ae[eS]+Re[eS]-OS-Ke.altAxis:wS,fC=N&&xS?withinMaxClamp(mS,Q$,pS):within(N?mS:cS,Q$,N?pS:wS);Se[ge]=fC,_y[ge]=fC-Q$}l.modifiersData[d]=_y}}const preventOverflow$1={name:"preventOverflow",enabled:!0,phase:"main",fn:preventOverflow,requiresIfExists:["offset"]};function getHTMLElementScroll(s){return{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}}function getNodeScroll(s){return s===getWindow(s)||!isHTMLElement(s)?getWindowScroll(s):getHTMLElementScroll(s)}function isElementScaled(s){var l=s.getBoundingClientRect(),c=round$1(l.width)/s.offsetWidth||1,d=round$1(l.height)/s.offsetHeight||1;return c!==1||d!==1}function getCompositeRect(s,l,c){c===void 0&&(c=!1);var d=isHTMLElement(l),f=isHTMLElement(l)&&isElementScaled(l),g=getDocumentElement(l),v=getBoundingClientRect(s,f,c),b={scrollLeft:0,scrollTop:0},$={x:0,y:0};return(d||!d&&!c)&&((getNodeName(l)!=="body"||isScrollParent(g))&&(b=getNodeScroll(l)),isHTMLElement(l)?($=getBoundingClientRect(l,!0),$.x+=l.clientLeft,$.y+=l.clientTop):g&&($.x=getWindowScrollBarX(g))),{x:v.left+b.scrollLeft-$.x,y:v.top+b.scrollTop-$.y,width:v.width,height:v.height}}function order(s){var l=new Map,c=new Set,d=[];s.forEach(function(g){l.set(g.name,g)});function f(g){c.add(g.name);var v=[].concat(g.requires||[],g.requiresIfExists||[]);v.forEach(function(b){if(!c.has(b)){var $=l.get(b);$&&f($)}}),d.push(g)}return s.forEach(function(g){c.has(g.name)||f(g)}),d}function orderModifiers(s){var l=order(s);return modifierPhases.reduce(function(c,d){return c.concat(l.filter(function(f){return f.phase===d}))},[])}function debounce$1(s){var l;return function(){return l||(l=new Promise(function(c){Promise.resolve().then(function(){l=void 0,c(s())})})),l}}function mergeByName(s){var l=s.reduce(function(c,d){var f=c[d.name];return c[d.name]=f?Object.assign({},f,d,{options:Object.assign({},f.options,d.options),data:Object.assign({},f.data,d.data)}):d,c},{});return Object.keys(l).map(function(c){return l[c]})}var DEFAULT_OPTIONS={placement:"bottom",modifiers:[],strategy:"absolute"};function areValidElements(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return!l.some(function(d){return!(d&&typeof d.getBoundingClientRect=="function")})}function popperGenerator(s){s===void 0&&(s={});var l=s,c=l.defaultModifiers,d=c===void 0?[]:c,f=l.defaultOptions,g=f===void 0?DEFAULT_OPTIONS:f;return function(b,$,y){y===void 0&&(y=g);var x={placement:"bottom",orderedModifiers:[],options:Object.assign({},DEFAULT_OPTIONS,g),modifiersData:{},elements:{reference:b,popper:$},attributes:{},styles:{}},C=[],E=!1,N={state:x,setOptions:function(re){var se=typeof re=="function"?re(x.options):re;q(),x.options=Object.assign({},g,x.options,se),x.scrollParents={reference:isElement$3(b)?listScrollParents(b):b.contextElement?listScrollParents(b.contextElement):[],popper:listScrollParents($)};var de=orderModifiers(mergeByName([].concat(d,x.options.modifiers)));return x.orderedModifiers=de.filter(function(he){return he.enabled}),W(),N.update()},forceUpdate:function(){if(!E){var re=x.elements,se=re.reference,de=re.popper;if(areValidElements(se,de)){x.rects={reference:getCompositeRect(se,getOffsetParent(de),x.options.strategy==="fixed"),popper:getLayoutRect(de)},x.reset=!1,x.placement=x.options.placement,x.orderedModifiers.forEach(function(Ke){return x.modifiersData[Ke.name]=Object.assign({},Ke.data)});for(var he=0;he<x.orderedModifiers.length;he++){if(x.reset===!0){x.reset=!1,he=-1;continue}var ge=x.orderedModifiers[he],Se=ge.fn,Ae=ge.options,Re=Ae===void 0?{}:Ae,Be=ge.name;typeof Se=="function"&&(x=Se({state:x,options:Re,name:Be,instance:N})||x)}}}},update:debounce$1(function(){return new Promise(function(Y){N.forceUpdate(),Y(x)})}),destroy:function(){q(),E=!0}};if(!areValidElements(b,$))return N;N.setOptions(y).then(function(Y){!E&&y.onFirstUpdate&&y.onFirstUpdate(Y)});function W(){x.orderedModifiers.forEach(function(Y){var re=Y.name,se=Y.options,de=se===void 0?{}:se,he=Y.effect;if(typeof he=="function"){var ge=he({state:x,name:re,instance:N,options:de}),Se=function(){};C.push(ge||Se)}})}function q(){C.forEach(function(Y){return Y()}),C=[]}return N}}var defaultModifiers=[eventListeners,popperOffsets$1,computeStyles$1,applyStyles$1,offset$1,flip$1,preventOverflow$1,arrow$3,hide$1],createPopper=popperGenerator({defaultModifiers}),BOX_CLASS="tippy-box",CONTENT_CLASS="tippy-content",BACKDROP_CLASS="tippy-backdrop",ARROW_CLASS="tippy-arrow",SVG_ARROW_CLASS="tippy-svg-arrow",TOUCH_OPTIONS={passive:!0,capture:!0},TIPPY_DEFAULT_APPEND_TO=function s(){return document.body};function getValueAtIndexOrReturn(s,l,c){if(Array.isArray(s)){var d=s[l];return d??(Array.isArray(c)?c[l]:c)}return s}function isType(s,l){var c={}.toString.call(s);return c.indexOf("[object")===0&&c.indexOf(l+"]")>-1}function invokeWithArgsOrReturn(s,l){return typeof s=="function"?s.apply(void 0,l):s}function debounce(s,l){if(l===0)return s;var c;return function(d){clearTimeout(c),c=setTimeout(function(){s(d)},l)}}function splitBySpaces(s){return s.split(/\s+/).filter(Boolean)}function normalizeToArray(s){return[].concat(s)}function pushIfUnique(s,l){s.indexOf(l)===-1&&s.push(l)}function unique(s){return s.filter(function(l,c){return s.indexOf(l)===c})}function getBasePlacement(s){return s.split("-")[0]}function arrayFrom(s){return[].slice.call(s)}function removeUndefinedProps(s){return Object.keys(s).reduce(function(l,c){return s[c]!==void 0&&(l[c]=s[c]),l},{})}function div(){return document.createElement("div")}function isElement$2(s){return["Element","Fragment"].some(function(l){return isType(s,l)})}function isNodeList$2(s){return isType(s,"NodeList")}function isMouseEvent(s){return isType(s,"MouseEvent")}function isReferenceElement(s){return!!(s&&s._tippy&&s._tippy.reference===s)}function getArrayOfElements(s){return isElement$2(s)?[s]:isNodeList$2(s)?arrayFrom(s):Array.isArray(s)?s:arrayFrom(document.querySelectorAll(s))}function setTransitionDuration(s,l){s.forEach(function(c){c&&(c.style.transitionDuration=l+"ms")})}function setVisibilityState(s,l){s.forEach(function(c){c&&c.setAttribute("data-state",l)})}function getOwnerDocument(s){var l,c=normalizeToArray(s),d=c[0];return d!=null&&(l=d.ownerDocument)!=null&&l.body?d.ownerDocument:document}function isCursorOutsideInteractiveBorder(s,l){var c=l.clientX,d=l.clientY;return s.every(function(f){var g=f.popperRect,v=f.popperState,b=f.props,$=b.interactiveBorder,y=getBasePlacement(v.placement),x=v.modifiersData.offset;if(!x)return!0;var C=y==="bottom"?x.top.y:0,E=y==="top"?x.bottom.y:0,N=y==="right"?x.left.x:0,W=y==="left"?x.right.x:0,q=g.top-d+C>$,Y=d-g.bottom-E>$,re=g.left-c+N>$,se=c-g.right-W>$;return q||Y||re||se})}function updateTransitionEndListener(s,l,c){var d=l+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(f){s[d](f,c)})}function actualContains(s,l){for(var c=l;c;){var d;if(s.contains(c))return!0;c=c.getRootNode==null||(d=c.getRootNode())==null?void 0:d.host}return!1}var currentInput={isTouch:!1},lastMouseMoveTime=0;function onDocumentTouchStart(){currentInput.isTouch||(currentInput.isTouch=!0,window.performance&&document.addEventListener("mousemove",onDocumentMouseMove))}function onDocumentMouseMove(){var s=performance.now();s-lastMouseMoveTime<20&&(currentInput.isTouch=!1,document.removeEventListener("mousemove",onDocumentMouseMove)),lastMouseMoveTime=s}function onWindowBlur(){var s=document.activeElement;if(isReferenceElement(s)){var l=s._tippy;s.blur&&!l.state.isVisible&&s.blur()}}function bindGlobalEventListeners(){document.addEventListener("touchstart",onDocumentTouchStart,TOUCH_OPTIONS),window.addEventListener("blur",onWindowBlur)}var isBrowser=typeof window<"u"&&typeof document<"u",isIE11=isBrowser?!!window.msCrypto:!1,pluginProps={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},renderProps={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},defaultProps=Object.assign({appendTo:TIPPY_DEFAULT_APPEND_TO,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function s(){},onBeforeUpdate:function s(){},onCreate:function s(){},onDestroy:function s(){},onHidden:function s(){},onHide:function s(){},onMount:function s(){},onShow:function s(){},onShown:function s(){},onTrigger:function s(){},onUntrigger:function s(){},onClickOutside:function s(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},pluginProps,renderProps),defaultKeys=Object.keys(defaultProps),setDefaultProps=function s(l){var c=Object.keys(l);c.forEach(function(d){defaultProps[d]=l[d]})};function getExtendedPassedProps(s){var l=s.plugins||[],c=l.reduce(function(d,f){var g=f.name,v=f.defaultValue;if(g){var b;d[g]=s[g]!==void 0?s[g]:(b=defaultProps[g])!=null?b:v}return d},{});return Object.assign({},s,c)}function getDataAttributeProps(s,l){var c=l?Object.keys(getExtendedPassedProps(Object.assign({},defaultProps,{plugins:l}))):defaultKeys,d=c.reduce(function(f,g){var v=(s.getAttribute("data-tippy-"+g)||"").trim();if(!v)return f;if(g==="content")f[g]=v;else try{f[g]=JSON.parse(v)}catch{f[g]=v}return f},{});return d}function evaluateProps(s,l){var c=Object.assign({},l,{content:invokeWithArgsOrReturn(l.content,[s])},l.ignoreAttributes?{}:getDataAttributeProps(s,l.plugins));return c.aria=Object.assign({},defaultProps.aria,c.aria),c.aria={expanded:c.aria.expanded==="auto"?l.interactive:c.aria.expanded,content:c.aria.content==="auto"?l.interactive?null:"describedby":c.aria.content},c}var innerHTML=function s(){return"innerHTML"};function dangerouslySetInnerHTML(s,l){s[innerHTML()]=l}function createArrowElement(s){var l=div();return s===!0?l.className=ARROW_CLASS:(l.className=SVG_ARROW_CLASS,isElement$2(s)?l.appendChild(s):dangerouslySetInnerHTML(l,s)),l}function setContent(s,l){isElement$2(l.content)?(dangerouslySetInnerHTML(s,""),s.appendChild(l.content)):typeof l.content!="function"&&(l.allowHTML?dangerouslySetInnerHTML(s,l.content):s.textContent=l.content)}function getChildren(s){var l=s.firstElementChild,c=arrayFrom(l.children);return{box:l,content:c.find(function(d){return d.classList.contains(CONTENT_CLASS)}),arrow:c.find(function(d){return d.classList.contains(ARROW_CLASS)||d.classList.contains(SVG_ARROW_CLASS)}),backdrop:c.find(function(d){return d.classList.contains(BACKDROP_CLASS)})}}function render$1(s){var l=div(),c=div();c.className=BOX_CLASS,c.setAttribute("data-state","hidden"),c.setAttribute("tabindex","-1");var d=div();d.className=CONTENT_CLASS,d.setAttribute("data-state","hidden"),setContent(d,s.props),l.appendChild(c),c.appendChild(d),f(s.props,s.props);function f(g,v){var b=getChildren(l),$=b.box,y=b.content,x=b.arrow;v.theme?$.setAttribute("data-theme",v.theme):$.removeAttribute("data-theme"),typeof v.animation=="string"?$.setAttribute("data-animation",v.animation):$.removeAttribute("data-animation"),v.inertia?$.setAttribute("data-inertia",""):$.removeAttribute("data-inertia"),$.style.maxWidth=typeof v.maxWidth=="number"?v.maxWidth+"px":v.maxWidth,v.role?$.setAttribute("role",v.role):$.removeAttribute("role"),(g.content!==v.content||g.allowHTML!==v.allowHTML)&&setContent(y,s.props),v.arrow?x?g.arrow!==v.arrow&&($.removeChild(x),$.appendChild(createArrowElement(v.arrow))):$.appendChild(createArrowElement(v.arrow)):x&&$.removeChild(x)}return{popper:l,onUpdate:f}}render$1.$$tippy=!0;var idCounter=1,mouseMoveListeners=[],mountedInstances=[];function createTippy(s,l){var c=evaluateProps(s,Object.assign({},defaultProps,getExtendedPassedProps(removeUndefinedProps(l)))),d,f,g,v=!1,b=!1,$=!1,y=!1,x,C,E,N=[],W=debounce(Z$,c.interactiveDebounce),q,Y=idCounter++,re=null,se=unique(c.plugins),de={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},he={id:Y,reference:s,popper:div(),popperInstance:re,props:c,state:de,plugins:se,clearDelayTimeouts:mS,setProps:pS,setContent:fC,show:US,hide:Iye,hideWithInteractivity:$ye,enable:xS,disable:OS,unmount:Rye,destroy:Uye};if(!c.render)return he;var ge=c.render(he),Se=ge.popper,Ae=ge.onUpdate;Se.setAttribute("data-tippy-root",""),Se.id="tippy-"+he.id,he.popper=Se,s._tippy=he,Se._tippy=he;var Re=se.map(function(DS){return DS.fn(he)}),Be=s.hasAttribute("aria-expanded");return zS(),U$(),K$(),Y$("onCreate",[he]),c.showOnCreate&&cS(),Se.addEventListener("mouseenter",function(){he.props.interactive&&he.state.isVisible&&he.clearDelayTimeouts()}),Se.addEventListener("mouseleave",function(){he.props.interactive&&he.props.trigger.indexOf("mouseenter")>=0&&yy().addEventListener("mousemove",W)}),he;function Ke(){var DS=he.props.touch;return Array.isArray(DS)?DS:[DS,0]}function Lr(){return Ke()[0]==="hold"}function _y(){var DS;return!!((DS=he.props.render)!=null&&DS.$$tippy)}function by(){return q||s}function yy(){var DS=by().parentNode;return DS?getOwnerDocument(DS):document}function my(){return getChildren(Se)}function $t(DS){return he.state.isMounted&&!he.state.isVisible||currentInput.isTouch||x&&x.type==="focus"?0:getValueAtIndexOrReturn(he.props.delay,DS?0:1,defaultProps.delay)}function K$(DS){DS===void 0&&(DS=!1),Se.style.pointerEvents=he.props.interactive&&!DS?"":"none",Se.style.zIndex=""+he.props.zIndex}function Y$(DS,HS,Aye){if(Aye===void 0&&(Aye=!0),Re.forEach(function(jye){jye[DS]&&jye[DS].apply(jye,HS)}),Aye){var Tye;(Tye=he.props)[DS].apply(Tye,HS)}}function W$(){var DS=he.props.aria;if(DS.content){var HS="aria-"+DS.content,Aye=Se.id,Tye=normalizeToArray(he.props.triggerTarget||s);Tye.forEach(function(jye){var sS=jye.getAttribute(HS);if(he.state.isVisible)jye.setAttribute(HS,sS?sS+" "+Aye:Aye);else{var TS=sS&&sS.replace(Aye,"").trim();TS?jye.setAttribute(HS,TS):jye.removeAttribute(HS)}})}}function U$(){if(!(Be||!he.props.aria.expanded)){var DS=normalizeToArray(he.props.triggerTarget||s);DS.forEach(function(HS){he.props.interactive?HS.setAttribute("aria-expanded",he.state.isVisible&&HS===by()?"true":"false"):HS.removeAttribute("aria-expanded")})}}function hy(){yy().removeEventListener("mousemove",W),mouseMoveListeners=mouseMoveListeners.filter(function(DS){return DS!==W})}function G$(DS){if(!(currentInput.isTouch&&($||DS.type==="mousedown"))){var HS=DS.composedPath&&DS.composedPath()[0]||DS.target;if(!(he.props.interactive&&actualContains(Se,HS))){if(normalizeToArray(he.props.triggerTarget||s).some(function(Aye){return actualContains(Aye,HS)})){if(currentInput.isTouch||he.state.isVisible&&he.props.trigger.indexOf("click")>=0)return}else Y$("onClickOutside",[he,DS]);he.props.hideOnClick===!0&&(he.clearDelayTimeouts(),he.hide(),b=!0,setTimeout(function(){b=!1}),he.state.isMounted||lS())}}}function ky(){$=!0}function $y(){$=!1}function rS(){var DS=yy();DS.addEventListener("mousedown",G$,!0),DS.addEventListener("touchend",G$,TOUCH_OPTIONS),DS.addEventListener("touchstart",$y,TOUCH_OPTIONS),DS.addEventListener("touchmove",ky,TOUCH_OPTIONS)}function lS(){var DS=yy();DS.removeEventListener("mousedown",G$,!0),DS.removeEventListener("touchend",G$,TOUCH_OPTIONS),DS.removeEventListener("touchstart",$y,TOUCH_OPTIONS),DS.removeEventListener("touchmove",ky,TOUCH_OPTIONS)}function bS(DS,HS){BS(DS,function(){!he.state.isVisible&&Se.parentNode&&Se.parentNode.contains(Se)&&HS()})}function IS(DS,HS){BS(DS,HS)}function BS(DS,HS){var Aye=my().box;function Tye(jye){jye.target===Aye&&(updateTransitionEndListener(Aye,"remove",Tye),HS())}if(DS===0)return HS();updateTransitionEndListener(Aye,"remove",C),updateTransitionEndListener(Aye,"add",Tye),C=Tye}function MS(DS,HS,Aye){Aye===void 0&&(Aye=!1);var Tye=normalizeToArray(he.props.triggerTarget||s);Tye.forEach(function(jye){jye.addEventListener(DS,HS,Aye),N.push({node:jye,eventType:DS,handler:HS,options:Aye})})}function zS(){Lr()&&(MS("touchstart",nS,{passive:!0}),MS("touchend",dS,{passive:!0})),splitBySpaces(he.props.trigger).forEach(function(DS){if(DS!=="manual")switch(MS(DS,nS),DS){case"mouseenter":MS("mouseleave",dS);break;case"focus":MS(isIE11?"focusout":"blur",ES);break;case"focusin":MS("focusout",ES);break}})}function LS(){N.forEach(function(DS){var HS=DS.node,Aye=DS.eventType,Tye=DS.handler,jye=DS.options;HS.removeEventListener(Aye,Tye,jye)}),N=[]}function nS(DS){var HS,Aye=!1;if(!(!he.state.isEnabled||wy(DS)||b)){var Tye=((HS=x)==null?void 0:HS.type)==="focus";x=DS,q=DS.currentTarget,U$(),!he.state.isVisible&&isMouseEvent(DS)&&mouseMoveListeners.forEach(function(jye){return jye(DS)}),DS.type==="click"&&(he.props.trigger.indexOf("mouseenter")<0||v)&&he.props.hideOnClick!==!1&&he.state.isVisible?Aye=!0:cS(DS),DS.type==="click"&&(v=!Aye),Aye&&!Tye&&wS(DS)}}function Z$(DS){var HS=DS.target,Aye=by().contains(HS)||Se.contains(HS);if(!(DS.type==="mousemove"&&Aye)){var Tye=eS().concat(Se).map(function(jye){var sS,TS=jye._tippy,AS=(sS=TS.popperInstance)==null?void 0:sS.state;return AS?{popperRect:jye.getBoundingClientRect(),popperState:AS,props:c}:null}).filter(Boolean);isCursorOutsideInteractiveBorder(Tye,DS)&&(hy(),wS(DS))}}function dS(DS){var HS=wy(DS)||he.props.trigger.indexOf("click")>=0&&v;if(!HS){if(he.props.interactive){he.hideWithInteractivity(DS);return}wS(DS)}}function ES(DS){he.props.trigger.indexOf("focusin")<0&&DS.target!==by()||he.props.interactive&&DS.relatedTarget&&Se.contains(DS.relatedTarget)||wS(DS)}function wy(DS){return currentInput.isTouch?Lr()!==DS.type.indexOf("touch")>=0:!1}function tS(){yS();var DS=he.props,HS=DS.popperOptions,Aye=DS.placement,Tye=DS.offset,jye=DS.getReferenceClientRect,sS=DS.moveTransition,TS=_y()?getChildren(Se).arrow:null,AS=jye?{getBoundingClientRect:jye,contextElement:jye.contextElement||by()}:s,jS={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Kye){var swe=Kye.state;if(_y()){var Cwe=my(),ywe=Cwe.box;["placement","reference-hidden","escaped"].forEach(function(hwe){hwe==="placement"?ywe.setAttribute("data-placement",swe.placement):swe.attributes.popper["data-popper-"+hwe]?ywe.setAttribute("data-"+hwe,""):ywe.removeAttribute("data-"+hwe)}),swe.attributes.popper={}}}},KS=[{name:"offset",options:{offset:Tye}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!sS}},jS];_y()&&TS&&KS.push({name:"arrow",options:{element:TS,padding:3}}),KS.push.apply(KS,(HS==null?void 0:HS.modifiers)||[]),he.popperInstance=createPopper(AS,Se,Object.assign({},HS,{placement:Aye,onFirstUpdate:E,modifiers:KS}))}function yS(){he.popperInstance&&(he.popperInstance.destroy(),he.popperInstance=null)}function Q$(){var DS=he.props.appendTo,HS,Aye=by();he.props.interactive&&DS===TIPPY_DEFAULT_APPEND_TO||DS==="parent"?HS=Aye.parentNode:HS=invokeWithArgsOrReturn(DS,[Aye]),HS.contains(Se)||HS.appendChild(Se),he.state.isMounted=!0,tS()}function eS(){return arrayFrom(Se.querySelectorAll("[data-tippy-root]"))}function cS(DS){he.clearDelayTimeouts(),DS&&Y$("onTrigger",[he,DS]),rS();var HS=$t(!0),Aye=Ke(),Tye=Aye[0],jye=Aye[1];currentInput.isTouch&&Tye==="hold"&&jye&&(HS=jye),HS?d=setTimeout(function(){he.show()},HS):he.show()}function wS(DS){if(he.clearDelayTimeouts(),Y$("onUntrigger",[he,DS]),!he.state.isVisible){lS();return}if(!(he.props.trigger.indexOf("mouseenter")>=0&&he.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(DS.type)>=0&&v)){var HS=$t(!1);HS?f=setTimeout(function(){he.state.isVisible&&he.hide()},HS):g=requestAnimationFrame(function(){he.hide()})}}function xS(){he.state.isEnabled=!0}function OS(){he.hide(),he.state.isEnabled=!1}function mS(){clearTimeout(d),clearTimeout(f),cancelAnimationFrame(g)}function pS(DS){if(!he.state.isDestroyed){Y$("onBeforeUpdate",[he,DS]),LS();var HS=he.props,Aye=evaluateProps(s,Object.assign({},HS,removeUndefinedProps(DS),{ignoreAttributes:!0}));he.props=Aye,zS(),HS.interactiveDebounce!==Aye.interactiveDebounce&&(hy(),W=debounce(Z$,Aye.interactiveDebounce)),HS.triggerTarget&&!Aye.triggerTarget?normalizeToArray(HS.triggerTarget).forEach(function(Tye){Tye.removeAttribute("aria-expanded")}):Aye.triggerTarget&&s.removeAttribute("aria-expanded"),U$(),K$(),Ae&&Ae(HS,Aye),he.popperInstance&&(tS(),eS().forEach(function(Tye){requestAnimationFrame(Tye._tippy.popperInstance.forceUpdate)})),Y$("onAfterUpdate",[he,DS])}}function fC(DS){he.setProps({content:DS})}function US(){var DS=he.state.isVisible,HS=he.state.isDestroyed,Aye=!he.state.isEnabled,Tye=currentInput.isTouch&&!he.props.touch,jye=getValueAtIndexOrReturn(he.props.duration,0,defaultProps.duration);if(!(DS||HS||Aye||Tye)&&!by().hasAttribute("disabled")&&(Y$("onShow",[he],!1),he.props.onShow(he)!==!1)){if(he.state.isVisible=!0,_y()&&(Se.style.visibility="visible"),K$(),rS(),he.state.isMounted||(Se.style.transition="none"),_y()){var sS=my(),TS=sS.box,AS=sS.content;setTransitionDuration([TS,AS],0)}E=function(){var KS;if(!(!he.state.isVisible||y)){if(y=!0,Se.offsetHeight,Se.style.transition=he.props.moveTransition,_y()&&he.props.animation){var Bye=my(),Kye=Bye.box,swe=Bye.content;setTransitionDuration([Kye,swe],jye),setVisibilityState([Kye,swe],"visible")}W$(),U$(),pushIfUnique(mountedInstances,he),(KS=he.popperInstance)==null||KS.forceUpdate(),Y$("onMount",[he]),he.props.animation&&_y()&&IS(jye,function(){he.state.isShown=!0,Y$("onShown",[he])})}},Q$()}}function Iye(){var DS=!he.state.isVisible,HS=he.state.isDestroyed,Aye=!he.state.isEnabled,Tye=getValueAtIndexOrReturn(he.props.duration,1,defaultProps.duration);if(!(DS||HS||Aye)&&(Y$("onHide",[he],!1),he.props.onHide(he)!==!1)){if(he.state.isVisible=!1,he.state.isShown=!1,y=!1,v=!1,_y()&&(Se.style.visibility="hidden"),hy(),lS(),K$(!0),_y()){var jye=my(),sS=jye.box,TS=jye.content;he.props.animation&&(setTransitionDuration([sS,TS],Tye),setVisibilityState([sS,TS],"hidden"))}W$(),U$(),he.props.animation?_y()&&bS(Tye,he.unmount):he.unmount()}}function $ye(DS){yy().addEventListener("mousemove",W),pushIfUnique(mouseMoveListeners,W),W(DS)}function Rye(){he.state.isVisible&&he.hide(),he.state.isMounted&&(yS(),eS().forEach(function(DS){DS._tippy.unmount()}),Se.parentNode&&Se.parentNode.removeChild(Se),mountedInstances=mountedInstances.filter(function(DS){return DS!==he}),he.state.isMounted=!1,Y$("onHidden",[he]))}function Uye(){he.state.isDestroyed||(he.clearDelayTimeouts(),he.unmount(),LS(),delete s._tippy,he.state.isDestroyed=!0,Y$("onDestroy",[he]))}}function tippy(s,l){l===void 0&&(l={});var c=defaultProps.plugins.concat(l.plugins||[]);bindGlobalEventListeners();var d=Object.assign({},l,{plugins:c}),f=getArrayOfElements(s),g=f.reduce(function(v,b){var $=b&&createTippy(b,d);return $&&v.push($),v},[]);return isElement$2(s)?g[0]:g}tippy.defaultProps=defaultProps;tippy.setDefaultProps=setDefaultProps;tippy.currentInput=currentInput;Object.assign({},applyStyles$1,{effect:function s(l){var c=l.state,d={popper:{position:c.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(c.elements.popper.style,d.popper),c.styles=d,c.elements.arrow&&Object.assign(c.elements.arrow.style,d.arrow)}});tippy.setDefaultProps({render:render$1});class BubbleMenuView{constructor({editor:l,element:c,view:d,tippyOptions:f={},updateDelay:g=250,shouldShow:v}){this.preventHide=!1,this.shouldShow=({view:b,state:$,from:y,to:x})=>{const{doc:C,selection:E}=$,{empty:N}=E,W=!C.textBetween(y,x).length&&isTextSelection($.selection),q=this.element.contains(document.activeElement);return!(!(b.hasFocus()||q)||N||W||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:b})=>{var $;if(this.preventHide){this.preventHide=!1;return}b!=null&&b.relatedTarget&&(!(($=this.element.parentNode)===null||$===void 0)&&$.contains(b.relatedTarget))||this.hide()},this.tippyBlurHandler=b=>{this.blurHandler({event:b})},this.handleDebouncedUpdate=(b,$)=>{const y=!($!=null&&$.selection.eq(b.state.selection)),x=!($!=null&&$.doc.eq(b.state.doc));!y&&!x||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(b,y,x,$)},this.updateDelay))},this.updateHandler=(b,$,y,x)=>{var C,E,N;const{state:W,composing:q}=b,{selection:Y}=W;if(q||!$&&!y)return;this.createTooltip();const{ranges:se}=Y,de=Math.min(...se.map(Se=>Se.$from.pos)),he=Math.max(...se.map(Se=>Se.$to.pos));if(!((C=this.shouldShow)===null||C===void 0?void 0:C.call(this,{editor:this.editor,view:b,state:W,oldState:x,from:de,to:he}))){this.hide();return}(E=this.tippy)===null||E===void 0||E.setProps({getReferenceClientRect:((N=this.tippyOptions)===null||N===void 0?void 0:N.getReferenceClientRect)||(()=>{if(isNodeSelection(W.selection)){let Se=b.nodeDOM(de);const Ae=Se.dataset.nodeViewWrapper?Se:Se.querySelector("[data-node-view-wrapper]");if(Ae&&(Se=Ae.firstChild),Se)return Se.getBoundingClientRect()}return posToDOMRect(b,de,he)})}),this.show()},this.editor=l,this.element=c,this.view=d,this.updateDelay=g,v&&(this.shouldShow=v),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=f,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:l}=this.editor.options,c=!!l.parentElement;this.tippy||!c||(this.tippy=tippy(l,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(l,c){const{state:d}=l,f=d.selection.from!==d.selection.to;if(this.updateDelay>0&&f){this.handleDebouncedUpdate(l,c);return}const g=!(c!=null&&c.selection.eq(l.state.selection)),v=!(c!=null&&c.doc.eq(l.state.doc));this.updateHandler(l,g,v,c)}show(){var l;(l=this.tippy)===null||l===void 0||l.show()}hide(){var l;(l=this.tippy)===null||l===void 0||l.hide()}destroy(){var l,c;!((l=this.tippy)===null||l===void 0)&&l.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(c=this.tippy)===null||c===void 0||c.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const BubbleMenuPlugin=s=>new Plugin({key:typeof s.pluginKey=="string"?new PluginKey(s.pluginKey):s.pluginKey,view:l=>new BubbleMenuView({view:l,...s})});Extension.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[BubbleMenuPlugin({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});const BubbleMenu=defineComponent({name:"BubbleMenu",props:{pluginKey:{type:[String,Object],default:"bubbleMenu"},editor:{type:Object,required:!0},updateDelay:{type:Number,default:void 0},tippyOptions:{type:Object,default:()=>({})},shouldShow:{type:Function,default:null}},setup(s,{slots:l}){const c=ref(null);return onMounted(()=>{const{updateDelay:d,editor:f,pluginKey:g,shouldShow:v,tippyOptions:b}=s;f.registerPlugin(BubbleMenuPlugin({updateDelay:d,editor:f,element:c.value,pluginKey:g,shouldShow:v,tippyOptions:b}))}),onBeforeUnmount(()=>{const{pluginKey:d,editor:f}=s;f.unregisterPlugin(d)}),()=>{var d;return h("div",{ref:c},(d=l.default)===null||d===void 0?void 0:d.call(l))}}});function useDebouncedRef(s){return customRef((l,c)=>({get(){return l(),s},set(d){s=d,requestAnimationFrame(()=>{requestAnimationFrame(()=>{c()})})}}))}class Editor extends Editor$1{constructor(l={}){return super(l),this.contentComponent=null,this.appContext=null,this.reactiveState=useDebouncedRef(this.view.state),this.reactiveExtensionStorage=useDebouncedRef(this.extensionStorage),this.on("beforeTransaction",({nextState:c})=>{this.reactiveState.value=c,this.reactiveExtensionStorage.value=this.extensionStorage}),markRaw(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(l,c){const d=super.registerPlugin(l,c);return this.reactiveState&&(this.reactiveState.value=d),d}unregisterPlugin(l){const c=super.unregisterPlugin(l);return this.reactiveState&&c&&(this.reactiveState.value=c),c}}const EditorContent=defineComponent({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(s){const l=ref(),c=getCurrentInstance();return watchEffect(()=>{const d=s.editor;d&&d.options.element&&l.value&&nextTick(()=>{if(!l.value||!d.options.element.firstChild)return;const f=unref(l.value);l.value.append(...d.options.element.childNodes),d.contentComponent=c.ctx._,c&&(d.appContext={...c.appContext,provides:c.provides}),d.setOptions({element:f}),d.createNodeViews()})}),onBeforeUnmount(()=>{const d=s.editor;if(!d||(d.isDestroyed||d.view.setProps({nodeViews:{}}),d.contentComponent=null,d.appContext=null,!d.options.element.firstChild))return;const f=document.createElement("div");f.append(...d.options.element.childNodes),d.setOptions({element:f})}),{rootEl:l}},render(){return h("div",{ref:s=>{this.rootEl=s}})}}),NodeViewContent=defineComponent({name:"NodeViewContent",props:{as:{type:String,default:"div"}},render(){return h(this.as,{style:{whiteSpace:"pre-wrap"},"data-node-view-content":""})}}),NodeViewWrapper=defineComponent({name:"NodeViewWrapper",props:{as:{type:String,default:"div"}},inject:["onDragStart","decorationClasses"],render(){var s,l;return h(this.as,{class:this.decorationClasses,style:{whiteSpace:"normal"},"data-node-view-wrapper":"",onDragstart:this.onDragStart},(l=(s=this.$slots).default)===null||l===void 0?void 0:l.call(s))}});class VueRenderer{constructor(l,{props:c={},editor:d}){this.editor=d,this.component=markRaw(l),this.el=document.createElement("div"),this.props=reactive(c),this.renderedComponent=this.renderComponent()}get element(){return this.renderedComponent.el}get ref(){var l,c,d,f;return!((c=(l=this.renderedComponent.vNode)===null||l===void 0?void 0:l.component)===null||c===void 0)&&c.exposed?this.renderedComponent.vNode.component.exposed:(f=(d=this.renderedComponent.vNode)===null||d===void 0?void 0:d.component)===null||f===void 0?void 0:f.proxy}renderComponent(){let l=h(this.component,this.props);return this.editor.appContext&&(l.appContext=this.editor.appContext),typeof document<"u"&&this.el&&render$4(l,this.el),{vNode:l,destroy:()=>{this.el&&render$4(null,this.el),this.el=null,l=null},el:this.el?this.el.firstElementChild:null}}updateProps(l={}){Object.entries(l).forEach(([c,d])=>{this.props[c]=d}),this.renderComponent()}destroy(){this.renderedComponent.destroy()}}const nodeViewProps={editor:{type:Object,required:!0},node:{type:Object,required:!0},decorations:{type:Object,required:!0},selected:{type:Boolean,required:!0},extension:{type:Object,required:!0},getPos:{type:Function,required:!0},updateAttributes:{type:Function,required:!0},deleteNode:{type:Function,required:!0}};class VueNodeView extends NodeView{mount(){const l={editor:this.editor,node:this.node,decorations:this.decorations,innerDecorations:this.innerDecorations,view:this.view,selected:!1,extension:this.extension,HTMLAttributes:this.HTMLAttributes,getPos:()=>this.getPos(),updateAttributes:(f={})=>this.updateAttributes(f),deleteNode:()=>this.deleteNode()},c=this.onDragStart.bind(this);this.decorationClasses=ref(this.getDecorationClasses());const d=defineComponent({extends:{...this.component},props:Object.keys(l),template:this.component.template,setup:f=>{var g,v;return provide("onDragStart",c),provide("decorationClasses",this.decorationClasses),(v=(g=this.component).setup)===null||v===void 0?void 0:v.call(g,f,{expose:()=>{}})},__scopeId:this.component.__scopeId,__cssModules:this.component.__cssModules,__name:this.component.__name,__file:this.component.__file});this.handleSelectionUpdate=this.handleSelectionUpdate.bind(this),this.editor.on("selectionUpdate",this.handleSelectionUpdate),this.renderer=new VueRenderer(d,{editor:this.editor,props:l})}get dom(){if(!this.renderer.element||!this.renderer.element.hasAttribute("data-node-view-wrapper"))throw Error("Please use the NodeViewWrapper component for your node view.");return this.renderer.element}get contentDOM(){return this.node.isLeaf?null:this.dom.querySelector("[data-node-view-content]")}handleSelectionUpdate(){const{from:l,to:c}=this.editor.state.selection,d=this.getPos();if(typeof d=="number")if(l<=d&&c>=d+this.node.nodeSize){if(this.renderer.props.selected)return;this.selectNode()}else{if(!this.renderer.props.selected)return;this.deselectNode()}}update(l,c,d){const f=g=>{this.decorationClasses.value=this.getDecorationClasses(),this.renderer.updateProps(g)};if(typeof this.options.update=="function"){const g=this.node,v=this.decorations,b=this.innerDecorations;return this.node=l,this.decorations=c,this.innerDecorations=d,this.options.update({oldNode:g,oldDecorations:v,newNode:l,newDecorations:c,oldInnerDecorations:b,innerDecorations:d,updateProps:()=>f({node:l,decorations:c,innerDecorations:d})})}return l.type!==this.node.type?!1:(l===this.node&&this.decorations===c&&this.innerDecorations===d||(this.node=l,this.decorations=c,this.innerDecorations=d,f({node:l,decorations:c,innerDecorations:d})),!0)}selectNode(){this.renderer.updateProps({selected:!0}),this.renderer.element&&this.renderer.element.classList.add("ProseMirror-selectednode")}deselectNode(){this.renderer.updateProps({selected:!1}),this.renderer.element&&this.renderer.element.classList.remove("ProseMirror-selectednode")}getDecorationClasses(){return this.decorations.map(l=>l.type.attrs.class).flat().join(" ")}destroy(){this.renderer.destroy(),this.editor.off("selectionUpdate",this.handleSelectionUpdate)}}function VueNodeViewRenderer(s,l){return c=>{if(!c.editor.contentComponent)return{};const d=typeof s=="function"&&"__vccOpts"in s?s.__vccOpts:s;return new VueNodeView(d,c,l)}}const inputRegex$7=/^\s*>\s$/,Blockquote=Node$1.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:s}){return["blockquote",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setBlockquote:()=>({commands:s})=>s.wrapIn(this.name),toggleBlockquote:()=>({commands:s})=>s.toggleWrap(this.name),unsetBlockquote:()=>({commands:s})=>s.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[wrappingInputRule({find:inputRegex$7,type:this.type})]}}),starInputRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,starPasteRegex$1=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,underscoreInputRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,underscorePasteRegex$1=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Bold=Mark.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:s=>s.style.fontWeight!=="normal"&&null},{style:"font-weight",getAttrs:s=>/^(bold(er)?|[5-9]\d{2,})$/.test(s)&&null}]},renderHTML({HTMLAttributes:s}){return["strong",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setBold:()=>({commands:s})=>s.setMark(this.name),toggleBold:()=>({commands:s})=>s.toggleMark(this.name),unsetBold:()=>({commands:s})=>s.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[markInputRule({find:starInputRegex$1,type:this.type}),markInputRule({find:underscoreInputRegex$1,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex$1,type:this.type}),markPasteRule({find:underscorePasteRegex$1,type:this.type})]}}),ListItem=Node$1.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:s}){return["li",mergeAttributes(this.options.HTMLAttributes,s),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),TextStyle=Mark.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"span",getAttrs:s=>s.hasAttribute("style")?{}:!1}]},renderHTML({HTMLAttributes:s}){return["span",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{removeEmptyTextStyle:()=>({state:s,commands:l})=>{const c=getMarkAttributes(s,this.type);return Object.entries(c).some(([,f])=>!!f)?!0:l.unsetMark(this.name)}}}}),inputRegex$6=/^\s*([-+*])\s$/,BulletList=Node$1.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:s}){return["ul",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{toggleBulletList:()=>({commands:s,chain:l})=>this.options.keepAttributes?l().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItem.name,this.editor.getAttributes(TextStyle.name)).run():s.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let s=wrappingInputRule({find:inputRegex$6,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(s=wrappingInputRule({find:inputRegex$6,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(TextStyle.name),editor:this.editor})),[s]}}),inputRegex$5=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))$/,pasteRegex$2=/(?:^|\s)(`(?!\s+`)((?:[^`]+))`(?!\s+`))/g,Code=Mark.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:s}){return["code",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setCode:()=>({commands:s})=>s.setMark(this.name),toggleCode:()=>({commands:s})=>s.toggleMark(this.name),unsetCode:()=>({commands:s})=>s.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[markInputRule({find:inputRegex$5,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$2,type:this.type})]}}),backtickInputRegex=/^```([a-z]+)?[\s\n]$/,tildeInputRegex=/^~~~([a-z]+)?[\s\n]$/,CodeBlock=Node$1.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:s=>{var l;const{languageClassPrefix:c}=this.options,g=[...((l=s.firstElementChild)===null||l===void 0?void 0:l.classList)||[]].filter(v=>v.startsWith(c)).map(v=>v.replace(c,""))[0];return g||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:s,HTMLAttributes:l}){return["pre",mergeAttributes(this.options.HTMLAttributes,l),["code",{class:s.attrs.language?this.options.languageClassPrefix+s.attrs.language:null},0]]},addCommands(){return{setCodeBlock:s=>({commands:l})=>l.setNode(this.name,s),toggleCodeBlock:s=>({commands:l})=>l.toggleNode(this.name,"paragraph",s)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:s,$anchor:l}=this.editor.state.selection,c=l.pos===1;return!s||l.parent.type.name!==this.name?!1:c||!l.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:s})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:l}=s,{selection:c}=l,{$from:d,empty:f}=c;if(!f||d.parent.type!==this.type)return!1;const g=d.parentOffset===d.parent.nodeSize-2,v=d.parent.textContent.endsWith(`

`);return!g||!v?!1:s.chain().command(({tr:b})=>(b.delete(d.pos-2,d.pos),!0)).exitCode().run()},ArrowDown:({editor:s})=>{if(!this.options.exitOnArrowDown)return!1;const{state:l}=s,{selection:c,doc:d}=l,{$from:f,empty:g}=c;if(!g||f.parent.type!==this.type||!(f.parentOffset===f.parent.nodeSize-2))return!1;const b=f.after();return b===void 0?!1:d.nodeAt(b)?s.commands.command(({tr:y})=>(y.setSelection(Selection$2.near(d.resolve(b))),!0)):s.commands.exitCode()}}},addInputRules(){return[textblockTypeInputRule({find:backtickInputRegex,type:this.type,getAttributes:s=>({language:s[1]})}),textblockTypeInputRule({find:tildeInputRegex,type:this.type,getAttributes:s=>({language:s[1]})})]},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("codeBlockVSCodeHandler"),props:{handlePaste:(s,l)=>{if(!l.clipboardData||this.editor.isActive(this.type.name))return!1;const c=l.clipboardData.getData("text/plain"),d=l.clipboardData.getData("vscode-editor-data"),f=d?JSON.parse(d):void 0,g=f==null?void 0:f.mode;if(!c||!g)return!1;const{tr:v,schema:b}=s.state,$=b.text(c.replace(/\r\n?/g,`
`));return v.replaceSelectionWith(this.type.create({language:g},$)),v.selection.$from.parent.type!==this.type&&v.setSelection(TextSelection.near(v.doc.resolve(Math.max(0,v.selection.from-2)))),v.setMeta("paste",!0),s.dispatch(v),!0}}})]}}),Document$1=Node$1.create({name:"doc",topNode:!0,content:"block+"});function dropCursor(s={}){return new Plugin({view(l){return new DropCursorView(l,s)}})}class DropCursorView{constructor(l,c){var d;this.editorView=l,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(d=c.width)!==null&&d!==void 0?d:1,this.color=c.color===!1?void 0:c.color||"black",this.class=c.class,this.handlers=["dragover","dragend","drop","dragleave"].map(f=>{let g=v=>{this[f](v)};return l.dom.addEventListener(f,g),{name:f,handler:g}})}destroy(){this.handlers.forEach(({name:l,handler:c})=>this.editorView.dom.removeEventListener(l,c))}update(l,c){this.cursorPos!=null&&c.doc!=l.state.doc&&(this.cursorPos>l.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(l){l!=this.cursorPos&&(this.cursorPos=l,l==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let l=this.editorView.state.doc.resolve(this.cursorPos),c=!l.parent.inlineContent,d;if(c){let b=l.nodeBefore,$=l.nodeAfter;if(b||$){let y=this.editorView.nodeDOM(this.cursorPos-(b?b.nodeSize:0));if(y){let x=y.getBoundingClientRect(),C=b?x.bottom:x.top;b&&$&&(C=(C+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2),d={left:x.left,right:x.right,top:C-this.width/2,bottom:C+this.width/2}}}}if(!d){let b=this.editorView.coordsAtPos(this.cursorPos);d={left:b.left-this.width/2,right:b.left+this.width/2,top:b.top,bottom:b.bottom}}let f=this.editorView.dom.offsetParent;this.element||(this.element=f.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",c),this.element.classList.toggle("prosemirror-dropcursor-inline",!c);let g,v;if(!f||f==document.body&&getComputedStyle(f).position=="static")g=-pageXOffset,v=-pageYOffset;else{let b=f.getBoundingClientRect();g=b.left-f.scrollLeft,v=b.top-f.scrollTop}this.element.style.left=d.left-g+"px",this.element.style.top=d.top-v+"px",this.element.style.width=d.right-d.left+"px",this.element.style.height=d.bottom-d.top+"px"}scheduleRemoval(l){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),l)}dragover(l){if(!this.editorView.editable)return;let c=this.editorView.posAtCoords({left:l.clientX,top:l.clientY}),d=c&&c.inside>=0&&this.editorView.state.doc.nodeAt(c.inside),f=d&&d.type.spec.disableDropCursor,g=typeof f=="function"?f(this.editorView,c,l):f;if(c&&!g){let v=c.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let b=dropPoint(this.editorView.state.doc,v,this.editorView.dragging.slice);b!=null&&(v=b)}this.setCursor(v),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(l){(l.target==this.editorView.dom||!this.editorView.dom.contains(l.relatedTarget))&&this.setCursor(null)}}const Dropcursor=Extension.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[dropCursor(this.options)]}});class GapCursor extends Selection$2{constructor(l){super(l,l)}map(l,c){let d=l.resolve(c.map(this.head));return GapCursor.valid(d)?new GapCursor(d):Selection$2.near(d)}content(){return Slice.empty}eq(l){return l instanceof GapCursor&&l.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(l,c){if(typeof c.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new GapCursor(l.resolve(c.pos))}getBookmark(){return new GapBookmark(this.anchor)}static valid(l){let c=l.parent;if(c.isTextblock||!closedBefore(l)||!closedAfter(l))return!1;let d=c.type.spec.allowGapCursor;if(d!=null)return d;let f=c.contentMatchAt(l.index()).defaultType;return f&&f.isTextblock}static findGapCursorFrom(l,c,d=!1){e:for(;;){if(!d&&GapCursor.valid(l))return l;let f=l.pos,g=null;for(let v=l.depth;;v--){let b=l.node(v);if(c>0?l.indexAfter(v)<b.childCount:l.index(v)>0){g=b.child(c>0?l.indexAfter(v):l.index(v)-1);break}else if(v==0)return null;f+=c;let $=l.doc.resolve(f);if(GapCursor.valid($))return $}for(;;){let v=c>0?g.firstChild:g.lastChild;if(!v){if(g.isAtom&&!g.isText&&!NodeSelection.isSelectable(g)){l=l.doc.resolve(f+g.nodeSize*c),d=!1;continue e}break}g=v,f+=c;let b=l.doc.resolve(f);if(GapCursor.valid(b))return b}return null}}}GapCursor.prototype.visible=!1;GapCursor.findFrom=GapCursor.findGapCursorFrom;Selection$2.jsonID("gapcursor",GapCursor);class GapBookmark{constructor(l){this.pos=l}map(l){return new GapBookmark(l.map(this.pos))}resolve(l){let c=l.resolve(this.pos);return GapCursor.valid(c)?new GapCursor(c):Selection$2.near(c)}}function closedBefore(s){for(let l=s.depth;l>=0;l--){let c=s.index(l),d=s.node(l);if(c==0){if(d.type.spec.isolating)return!0;continue}for(let f=d.child(c-1);;f=f.lastChild){if(f.childCount==0&&!f.inlineContent||f.isAtom||f.type.spec.isolating)return!0;if(f.inlineContent)return!1}}return!0}function closedAfter(s){for(let l=s.depth;l>=0;l--){let c=s.indexAfter(l),d=s.node(l);if(c==d.childCount){if(d.type.spec.isolating)return!0;continue}for(let f=d.child(c);;f=f.firstChild){if(f.childCount==0&&!f.inlineContent||f.isAtom||f.type.spec.isolating)return!0;if(f.inlineContent)return!1}}return!0}function gapCursor(){return new Plugin({props:{decorations:drawGapCursor,createSelectionBetween(s,l,c){return l.pos==c.pos&&GapCursor.valid(c)?new GapCursor(c):null},handleClick,handleKeyDown:handleKeyDown$1,handleDOMEvents:{beforeinput}}})}const handleKeyDown$1=keydownHandler({ArrowLeft:arrow$1("horiz",-1),ArrowRight:arrow$1("horiz",1),ArrowUp:arrow$1("vert",-1),ArrowDown:arrow$1("vert",1)});function arrow$1(s,l){const c=s=="vert"?l>0?"down":"up":l>0?"right":"left";return function(d,f,g){let v=d.selection,b=l>0?v.$to:v.$from,$=v.empty;if(v instanceof TextSelection){if(!g.endOfTextblock(c)||b.depth==0)return!1;$=!1,b=d.doc.resolve(l>0?b.after():b.before())}let y=GapCursor.findGapCursorFrom(b,l,$);return y?(f&&f(d.tr.setSelection(new GapCursor(y))),!0):!1}}function handleClick(s,l,c){if(!s||!s.editable)return!1;let d=s.state.doc.resolve(l);if(!GapCursor.valid(d))return!1;let f=s.posAtCoords({left:c.clientX,top:c.clientY});return f&&f.inside>-1&&NodeSelection.isSelectable(s.state.doc.nodeAt(f.inside))?!1:(s.dispatch(s.state.tr.setSelection(new GapCursor(d))),!0)}function beforeinput(s,l){if(l.inputType!="insertCompositionText"||!(s.state.selection instanceof GapCursor))return!1;let{$from:c}=s.state.selection,d=c.parent.contentMatchAt(c.index()).findWrapping(s.state.schema.nodes.text);if(!d)return!1;let f=Fragment.empty;for(let v=d.length-1;v>=0;v--)f=Fragment.from(d[v].createAndFill(null,f));let g=s.state.tr.replace(c.pos,c.pos,new Slice(f,0,0));return g.setSelection(TextSelection.near(g.doc.resolve(c.pos+1))),s.dispatch(g),!1}function drawGapCursor(s){if(!(s.selection instanceof GapCursor))return null;let l=document.createElement("div");return l.className="ProseMirror-gapcursor",DecorationSet.create(s.doc,[Decoration.widget(s.selection.head,l,{key:"gapcursor"})])}const Gapcursor=Extension.create({name:"gapCursor",addProseMirrorPlugins(){return[gapCursor()]},extendNodeSchema(s){var l;const c={name:s.name,options:s.options,storage:s.storage};return{allowGapCursor:(l=callOrReturn(getExtensionField(s,"allowGapCursor",c)))!==null&&l!==void 0?l:null}}}),HardBreak=Node$1.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:s}){return["br",mergeAttributes(this.options.HTMLAttributes,s)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:s,chain:l,state:c,editor:d})=>s.first([()=>s.exitCode(),()=>s.command(()=>{const{selection:f,storedMarks:g}=c;if(f.$from.parent.type.spec.isolating)return!1;const{keepMarks:v}=this.options,{splittableMarks:b}=d.extensionManager,$=g||f.$to.parentOffset&&f.$from.marks();return l().insertContent({type:this.name}).command(({tr:y,dispatch:x})=>{if(x&&$&&v){const C=$.filter(E=>b.includes(E.type.name));y.ensureMarks(C)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Heading=Node$1.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(s=>({tag:`h${s}`,attrs:{level:s}}))},renderHTML({node:s,HTMLAttributes:l}){return[`h${this.options.levels.includes(s.attrs.level)?s.attrs.level:this.options.levels[0]}`,mergeAttributes(this.options.HTMLAttributes,l),0]},addCommands(){return{setHeading:s=>({commands:l})=>this.options.levels.includes(s.level)?l.setNode(this.name,s):!1,toggleHeading:s=>({commands:l})=>this.options.levels.includes(s.level)?l.toggleNode(this.name,"paragraph",s):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((s,l)=>({...s,[`Mod-Alt-${l}`]:()=>this.editor.commands.toggleHeading({level:l})}),{})},addInputRules(){return this.options.levels.map(s=>textblockTypeInputRule({find:new RegExp(`^(#{1,${s}})\\s$`),type:this.type,getAttributes:{level:s}}))}});var GOOD_LEAF_SIZE=200,RopeSequence=function s(){};RopeSequence.prototype.append=function s(l){return l.length?(l=RopeSequence.from(l),!this.length&&l||l.length<GOOD_LEAF_SIZE&&this.leafAppend(l)||this.length<GOOD_LEAF_SIZE&&l.leafPrepend(this)||this.appendInner(l)):this};RopeSequence.prototype.prepend=function s(l){return l.length?RopeSequence.from(l).append(this):this};RopeSequence.prototype.appendInner=function s(l){return new Append(this,l)};RopeSequence.prototype.slice=function s(l,c){return l===void 0&&(l=0),c===void 0&&(c=this.length),l>=c?RopeSequence.empty:this.sliceInner(Math.max(0,l),Math.min(this.length,c))};RopeSequence.prototype.get=function s(l){if(!(l<0||l>=this.length))return this.getInner(l)};RopeSequence.prototype.forEach=function s(l,c,d){c===void 0&&(c=0),d===void 0&&(d=this.length),c<=d?this.forEachInner(l,c,d,0):this.forEachInvertedInner(l,c,d,0)};RopeSequence.prototype.map=function s(l,c,d){c===void 0&&(c=0),d===void 0&&(d=this.length);var f=[];return this.forEach(function(g,v){return f.push(l(g,v))},c,d),f};RopeSequence.from=function s(l){return l instanceof RopeSequence?l:l&&l.length?new Leaf(l):RopeSequence.empty};var Leaf=function(s){function l(d){s.call(this),this.values=d}s&&(l.__proto__=s),l.prototype=Object.create(s&&s.prototype),l.prototype.constructor=l;var c={length:{configurable:!0},depth:{configurable:!0}};return l.prototype.flatten=function(){return this.values},l.prototype.sliceInner=function(f,g){return f==0&&g==this.length?this:new l(this.values.slice(f,g))},l.prototype.getInner=function(f){return this.values[f]},l.prototype.forEachInner=function(f,g,v,b){for(var $=g;$<v;$++)if(f(this.values[$],b+$)===!1)return!1},l.prototype.forEachInvertedInner=function(f,g,v,b){for(var $=g-1;$>=v;$--)if(f(this.values[$],b+$)===!1)return!1},l.prototype.leafAppend=function(f){if(this.length+f.length<=GOOD_LEAF_SIZE)return new l(this.values.concat(f.flatten()))},l.prototype.leafPrepend=function(f){if(this.length+f.length<=GOOD_LEAF_SIZE)return new l(f.flatten().concat(this.values))},c.length.get=function(){return this.values.length},c.depth.get=function(){return 0},Object.defineProperties(l.prototype,c),l}(RopeSequence);RopeSequence.empty=new Leaf([]);var Append=function(s){function l(c,d){s.call(this),this.left=c,this.right=d,this.length=c.length+d.length,this.depth=Math.max(c.depth,d.depth)+1}return s&&(l.__proto__=s),l.prototype=Object.create(s&&s.prototype),l.prototype.constructor=l,l.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},l.prototype.getInner=function(d){return d<this.left.length?this.left.get(d):this.right.get(d-this.left.length)},l.prototype.forEachInner=function(d,f,g,v){var b=this.left.length;if(f<b&&this.left.forEachInner(d,f,Math.min(g,b),v)===!1||g>b&&this.right.forEachInner(d,Math.max(f-b,0),Math.min(this.length,g)-b,v+b)===!1)return!1},l.prototype.forEachInvertedInner=function(d,f,g,v){var b=this.left.length;if(f>b&&this.right.forEachInvertedInner(d,f-b,Math.max(g,b)-b,v+b)===!1||g<b&&this.left.forEachInvertedInner(d,Math.min(f,b),g,v)===!1)return!1},l.prototype.sliceInner=function(d,f){if(d==0&&f==this.length)return this;var g=this.left.length;return f<=g?this.left.slice(d,f):d>=g?this.right.slice(d-g,f-g):this.left.slice(d,g).append(this.right.slice(0,f-g))},l.prototype.leafAppend=function(d){var f=this.right.leafAppend(d);if(f)return new l(this.left,f)},l.prototype.leafPrepend=function(d){var f=this.left.leafPrepend(d);if(f)return new l(f,this.right)},l.prototype.appendInner=function(d){return this.left.depth>=Math.max(this.right.depth,d.depth)+1?new l(this.left,new l(this.right,d)):new l(this,d)},l}(RopeSequence);const max_empty_items=500;class Branch{constructor(l,c){this.items=l,this.eventCount=c}popEvent(l,c){if(this.eventCount==0)return null;let d=this.items.length;for(;;d--)if(this.items.get(d-1).selection){--d;break}let f,g;c&&(f=this.remapping(d,this.items.length),g=f.maps.length);let v=l.tr,b,$,y=[],x=[];return this.items.forEach((C,E)=>{if(!C.step){f||(f=this.remapping(d,E+1),g=f.maps.length),g--,x.push(C);return}if(f){x.push(new Item(C.map));let N=C.step.map(f.slice(g)),W;N&&v.maybeStep(N).doc&&(W=v.mapping.maps[v.mapping.maps.length-1],y.push(new Item(W,void 0,void 0,y.length+x.length))),g--,W&&f.appendMap(W,g)}else v.maybeStep(C.step);if(C.selection)return b=f?C.selection.map(f.slice(g)):C.selection,$=new Branch(this.items.slice(0,d).append(x.reverse().concat(y)),this.eventCount-1),!1},this.items.length,0),{remaining:$,transform:v,selection:b}}addTransform(l,c,d,f){let g=[],v=this.eventCount,b=this.items,$=!f&&b.length?b.get(b.length-1):null;for(let x=0;x<l.steps.length;x++){let C=l.steps[x].invert(l.docs[x]),E=new Item(l.mapping.maps[x],C,c),N;(N=$&&$.merge(E))&&(E=N,x?g.pop():b=b.slice(0,b.length-1)),g.push(E),c&&(v++,c=void 0),f||($=E)}let y=v-d.depth;return y>DEPTH_OVERFLOW&&(b=cutOffEvents(b,y),v-=y),new Branch(b.append(g),v)}remapping(l,c){let d=new Mapping;return this.items.forEach((f,g)=>{let v=f.mirrorOffset!=null&&g-f.mirrorOffset>=l?d.maps.length-f.mirrorOffset:void 0;d.appendMap(f.map,v)},l,c),d}addMaps(l){return this.eventCount==0?this:new Branch(this.items.append(l.map(c=>new Item(c))),this.eventCount)}rebased(l,c){if(!this.eventCount)return this;let d=[],f=Math.max(0,this.items.length-c),g=l.mapping,v=l.steps.length,b=this.eventCount;this.items.forEach(E=>{E.selection&&b--},f);let $=c;this.items.forEach(E=>{let N=g.getMirror(--$);if(N==null)return;v=Math.min(v,N);let W=g.maps[N];if(E.step){let q=l.steps[N].invert(l.docs[N]),Y=E.selection&&E.selection.map(g.slice($+1,N));Y&&b++,d.push(new Item(W,q,Y))}else d.push(new Item(W))},f);let y=[];for(let E=c;E<v;E++)y.push(new Item(g.maps[E]));let x=this.items.slice(0,f).append(y).append(d),C=new Branch(x,b);return C.emptyItemCount()>max_empty_items&&(C=C.compress(this.items.length-d.length)),C}emptyItemCount(){let l=0;return this.items.forEach(c=>{c.step||l++}),l}compress(l=this.items.length){let c=this.remapping(0,l),d=c.maps.length,f=[],g=0;return this.items.forEach((v,b)=>{if(b>=l)f.push(v),v.selection&&g++;else if(v.step){let $=v.step.map(c.slice(d)),y=$&&$.getMap();if(d--,y&&c.appendMap(y,d),$){let x=v.selection&&v.selection.map(c.slice(d));x&&g++;let C=new Item(y.invert(),$,x),E,N=f.length-1;(E=f.length&&f[N].merge(C))?f[N]=E:f.push(C)}}else v.map&&d--},this.items.length,0),new Branch(RopeSequence.from(f.reverse()),g)}}Branch.empty=new Branch(RopeSequence.empty,0);function cutOffEvents(s,l){let c;return s.forEach((d,f)=>{if(d.selection&&l--==0)return c=f,!1}),s.slice(c)}class Item{constructor(l,c,d,f){this.map=l,this.step=c,this.selection=d,this.mirrorOffset=f}merge(l){if(this.step&&l.step&&!l.selection){let c=l.step.merge(this.step);if(c)return new Item(c.getMap().invert(),c,this.selection)}}}class HistoryState{constructor(l,c,d,f,g){this.done=l,this.undone=c,this.prevRanges=d,this.prevTime=f,this.prevComposition=g}}const DEPTH_OVERFLOW=20;function applyTransaction(s,l,c,d){let f=c.getMeta(historyKey),g;if(f)return f.historyState;c.getMeta(closeHistoryKey)&&(s=new HistoryState(s.done,s.undone,null,0,-1));let v=c.getMeta("appendedTransaction");if(c.steps.length==0)return s;if(v&&v.getMeta(historyKey))return v.getMeta(historyKey).redo?new HistoryState(s.done.addTransform(c,void 0,d,mustPreserveItems(l)),s.undone,rangesFor(c.mapping.maps),s.prevTime,s.prevComposition):new HistoryState(s.done,s.undone.addTransform(c,void 0,d,mustPreserveItems(l)),null,s.prevTime,s.prevComposition);if(c.getMeta("addToHistory")!==!1&&!(v&&v.getMeta("addToHistory")===!1)){let b=c.getMeta("composition"),$=s.prevTime==0||!v&&s.prevComposition!=b&&(s.prevTime<(c.time||0)-d.newGroupDelay||!isAdjacentTo(c,s.prevRanges)),y=v?mapRanges(s.prevRanges,c.mapping):rangesFor(c.mapping.maps);return new HistoryState(s.done.addTransform(c,$?l.selection.getBookmark():void 0,d,mustPreserveItems(l)),Branch.empty,y,c.time,b??s.prevComposition)}else return(g=c.getMeta("rebased"))?new HistoryState(s.done.rebased(c,g),s.undone.rebased(c,g),mapRanges(s.prevRanges,c.mapping),s.prevTime,s.prevComposition):new HistoryState(s.done.addMaps(c.mapping.maps),s.undone.addMaps(c.mapping.maps),mapRanges(s.prevRanges,c.mapping),s.prevTime,s.prevComposition)}function isAdjacentTo(s,l){if(!l)return!1;if(!s.docChanged)return!0;let c=!1;return s.mapping.maps[0].forEach((d,f)=>{for(let g=0;g<l.length;g+=2)d<=l[g+1]&&f>=l[g]&&(c=!0)}),c}function rangesFor(s){let l=[];for(let c=s.length-1;c>=0&&l.length==0;c--)s[c].forEach((d,f,g,v)=>l.push(g,v));return l}function mapRanges(s,l){if(!s)return null;let c=[];for(let d=0;d<s.length;d+=2){let f=l.map(s[d],1),g=l.map(s[d+1],-1);f<=g&&c.push(f,g)}return c}function histTransaction(s,l,c){let d=mustPreserveItems(l),f=historyKey.get(l).spec.config,g=(c?s.undone:s.done).popEvent(l,d);if(!g)return null;let v=g.selection.resolve(g.transform.doc),b=(c?s.done:s.undone).addTransform(g.transform,l.selection.getBookmark(),f,d),$=new HistoryState(c?b:g.remaining,c?g.remaining:b,null,0,-1);return g.transform.setSelection(v).setMeta(historyKey,{redo:c,historyState:$})}let cachedPreserveItems=!1,cachedPreserveItemsPlugins=null;function mustPreserveItems(s){let l=s.plugins;if(cachedPreserveItemsPlugins!=l){cachedPreserveItems=!1,cachedPreserveItemsPlugins=l;for(let c=0;c<l.length;c++)if(l[c].spec.historyPreserveItems){cachedPreserveItems=!0;break}}return cachedPreserveItems}const historyKey=new PluginKey("history"),closeHistoryKey=new PluginKey("closeHistory");function history(s={}){return s={depth:s.depth||100,newGroupDelay:s.newGroupDelay||500},new Plugin({key:historyKey,state:{init(){return new HistoryState(Branch.empty,Branch.empty,null,0,-1)},apply(l,c,d){return applyTransaction(c,d,l,s)}},config:s,props:{handleDOMEvents:{beforeinput(l,c){let d=c.inputType,f=d=="historyUndo"?undo:d=="historyRedo"?redo:null;return f?(c.preventDefault(),f(l.state,l.dispatch)):!1}}}})}function buildCommand(s,l){return(c,d)=>{let f=historyKey.getState(c);if(!f||(s?f.undone:f.done).eventCount==0)return!1;if(d){let g=histTransaction(f,c,s);g&&d(l?g.scrollIntoView():g)}return!0}}const undo=buildCommand(!1,!0),redo=buildCommand(!0,!0),History=Extension.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:s,dispatch:l})=>undo(s,l),redo:()=>({state:s,dispatch:l})=>redo(s,l)}},addProseMirrorPlugins(){return[history(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),HorizontalRule=Node$1.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:s}){return["hr",mergeAttributes(this.options.HTMLAttributes,s)]},addCommands(){return{setHorizontalRule:()=>({chain:s,state:l})=>{const{selection:c}=l,{$from:d,$to:f}=c,g=s();return d.parentOffset===0?g.insertContentAt({from:Math.max(d.pos-1,0),to:f.pos},{type:this.name}):isNodeSelection(c)?g.insertContentAt(f.pos,{type:this.name}):g.insertContent({type:this.name}),g.command(({tr:v,dispatch:b})=>{var $;if(b){const{$to:y}=v.selection,x=y.end();if(y.nodeAfter)y.nodeAfter.isTextblock?v.setSelection(TextSelection.create(v.doc,y.pos+1)):y.nodeAfter.isBlock?v.setSelection(NodeSelection.create(v.doc,y.pos)):v.setSelection(TextSelection.create(v.doc,y.pos));else{const C=($=y.parent.type.contentMatch.defaultType)===null||$===void 0?void 0:$.create();C&&(v.insert(x,C),v.setSelection(TextSelection.create(v.doc,x+1)))}v.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),starInputRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,starPasteRegex=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,underscoreInputRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,underscorePasteRegex=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Italic=Mark.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:s=>s.style.fontStyle!=="normal"&&null},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:s}){return["em",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setItalic:()=>({commands:s})=>s.setMark(this.name),toggleItalic:()=>({commands:s})=>s.toggleMark(this.name),unsetItalic:()=>({commands:s})=>s.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[markInputRule({find:starInputRegex,type:this.type}),markInputRule({find:underscoreInputRegex,type:this.type})]},addPasteRules(){return[markPasteRule({find:starPasteRegex,type:this.type}),markPasteRule({find:underscorePasteRegex,type:this.type})]}}),inputRegex$4=/^(\d+)\.\s$/,OrderedList=Node$1.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:s=>s.hasAttribute("start")?parseInt(s.getAttribute("start")||"",10):1},type:{default:void 0,parseHTML:s=>s.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:s}){const{start:l,...c}=s;return l===1?["ol",mergeAttributes(this.options.HTMLAttributes,c),0]:["ol",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{toggleOrderedList:()=>({commands:s,chain:l})=>this.options.keepAttributes?l().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ListItem.name,this.editor.getAttributes(TextStyle.name)).run():s.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let s=wrappingInputRule({find:inputRegex$4,type:this.type,getAttributes:l=>({start:+l[1]}),joinPredicate:(l,c)=>c.childCount+c.attrs.start===+l[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(s=wrappingInputRule({find:inputRegex$4,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:l=>({start:+l[1],...this.editor.getAttributes(TextStyle.name)}),joinPredicate:(l,c)=>c.childCount+c.attrs.start===+l[1],editor:this.editor})),[s]}}),Paragraph=Node$1.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:s}){return["p",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setParagraph:()=>({commands:s})=>s.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),inputRegex$3=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,pasteRegex$1=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Strike=Mark.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:s=>s.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:s}){return["s",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setStrike:()=>({commands:s})=>s.setMark(this.name),toggleStrike:()=>({commands:s})=>s.toggleMark(this.name),unsetStrike:()=>({commands:s})=>s.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[markInputRule({find:inputRegex$3,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex$1,type:this.type})]}}),Text$2=Node$1.create({name:"text",group:"inline"}),StarterKit=Extension.create({name:"starterKit",addExtensions(){var s,l,c,d,f,g,v,b,$,y,x,C,E,N,W,q,Y,re;const se=[];return this.options.bold!==!1&&se.push(Bold.configure((s=this.options)===null||s===void 0?void 0:s.bold)),this.options.blockquote!==!1&&se.push(Blockquote.configure((l=this.options)===null||l===void 0?void 0:l.blockquote)),this.options.bulletList!==!1&&se.push(BulletList.configure((c=this.options)===null||c===void 0?void 0:c.bulletList)),this.options.code!==!1&&se.push(Code.configure((d=this.options)===null||d===void 0?void 0:d.code)),this.options.codeBlock!==!1&&se.push(CodeBlock.configure((f=this.options)===null||f===void 0?void 0:f.codeBlock)),this.options.document!==!1&&se.push(Document$1.configure((g=this.options)===null||g===void 0?void 0:g.document)),this.options.dropcursor!==!1&&se.push(Dropcursor.configure((v=this.options)===null||v===void 0?void 0:v.dropcursor)),this.options.gapcursor!==!1&&se.push(Gapcursor.configure((b=this.options)===null||b===void 0?void 0:b.gapcursor)),this.options.hardBreak!==!1&&se.push(HardBreak.configure(($=this.options)===null||$===void 0?void 0:$.hardBreak)),this.options.heading!==!1&&se.push(Heading.configure((y=this.options)===null||y===void 0?void 0:y.heading)),this.options.history!==!1&&se.push(History.configure((x=this.options)===null||x===void 0?void 0:x.history)),this.options.horizontalRule!==!1&&se.push(HorizontalRule.configure((C=this.options)===null||C===void 0?void 0:C.horizontalRule)),this.options.italic!==!1&&se.push(Italic.configure((E=this.options)===null||E===void 0?void 0:E.italic)),this.options.listItem!==!1&&se.push(ListItem.configure((N=this.options)===null||N===void 0?void 0:N.listItem)),this.options.orderedList!==!1&&se.push(OrderedList.configure((W=this.options)===null||W===void 0?void 0:W.orderedList)),this.options.paragraph!==!1&&se.push(Paragraph.configure((q=this.options)===null||q===void 0?void 0:q.paragraph)),this.options.strike!==!1&&se.push(Strike.configure((Y=this.options)===null||Y===void 0?void 0:Y.strike)),this.options.text!==!1&&se.push(Text$2.configure((re=this.options)===null||re===void 0?void 0:re.text)),se}}),FocusClasses=Extension.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("focus"),props:{decorations:({doc:s,selection:l})=>{const{isEditable:c,isFocused:d}=this.editor,{anchor:f}=l,g=[];if(!c||!d)return DecorationSet.create(s,[]);let v=0;this.options.mode==="deepest"&&s.descendants(($,y)=>{if($.isText)return;if(!(f>=y&&f<=y+$.nodeSize-1))return!1;v+=1});let b=0;return s.descendants(($,y)=>{if($.isText||!(f>=y&&f<=y+$.nodeSize-1))return!1;if(b+=1,this.options.mode==="deepest"&&v-b>0||this.options.mode==="shallowest"&&b>1)return this.options.mode==="deepest";g.push(Decoration.node(y,y+$.nodeSize,{class:this.options.className}))}),DecorationSet.create(s,g)}}})]}}),FontFamily=Extension.create({name:"fontFamily",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontFamily:{default:null,parseHTML:s=>{var l;return(l=s.style.fontFamily)===null||l===void 0?void 0:l.replace(/['"]+/g,"")},renderHTML:s=>s.fontFamily?{style:`font-family: ${s.fontFamily}`}:{}}}}]},addCommands(){return{setFontFamily:s=>({chain:l})=>l().setMark("textStyle",{fontFamily:s}).run(),unsetFontFamily:()=>({chain:s})=>s().setMark("textStyle",{fontFamily:null}).removeEmptyTextStyle().run()}}}),Underline=Mark.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:s=>s.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:s}){return["u",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setUnderline:()=>({commands:s})=>s.setMark(this.name),toggleUnderline:()=>({commands:s})=>s.toggleMark(this.name),unsetUnderline:()=>({commands:s})=>s.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Subscript=Mark.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(s){return s!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:s}){return["sub",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setSubscript:()=>({commands:s})=>s.setMark(this.name),toggleSubscript:()=>({commands:s})=>s.toggleMark(this.name),unsetSubscript:()=>({commands:s})=>s.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),Superscript=Mark.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(s){return s!=="super"?!1:null}}]},renderHTML({HTMLAttributes:s}){return["sup",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setSuperscript:()=>({commands:s})=>s.setMark(this.name),toggleSuperscript:()=>({commands:s})=>s.toggleMark(this.name),unsetSuperscript:()=>({commands:s})=>s.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),Color=Extension.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:s=>{var l;return(l=s.style.color)===null||l===void 0?void 0:l.replace(/['"]+/g,"")},renderHTML:s=>s.color?{style:`color: ${s.color}`}:{}}}}]},addCommands(){return{setColor:s=>({chain:l})=>l().setMark("textStyle",{color:s}).run(),unsetColor:()=>({chain:s})=>s().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),inputRegex$2=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,pasteRegex=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,Highlight=Mark.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:s=>s.getAttribute("data-color")||s.style.backgroundColor,renderHTML:s=>s.color?{"data-color":s.color,style:`background-color: ${s.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:s}){return["mark",mergeAttributes(this.options.HTMLAttributes,s),0]},addCommands(){return{setHighlight:s=>({commands:l})=>l.setMark(this.name,s),toggleHighlight:s=>({commands:l})=>l.toggleMark(this.name,s),unsetHighlight:()=>({commands:s})=>s.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[markInputRule({find:inputRegex$2,type:this.type})]},addPasteRules(){return[markPasteRule({find:pasteRegex,type:this.type})]}}),TextAlign=Extension.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:"left"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:s=>{const l=s.style.textAlign||this.options.defaultAlignment;return this.options.alignments.includes(l)?l:this.options.defaultAlignment},renderHTML:s=>s.textAlign===this.options.defaultAlignment?{}:{style:`text-align: ${s.textAlign}`}}}}]},addCommands(){return{setTextAlign:s=>({commands:l})=>this.options.alignments.includes(s)?this.options.types.map(c=>l.updateAttributes(c,{textAlign:s})).every(c=>c):!1,unsetTextAlign:()=>({commands:s})=>this.options.types.map(l=>s.resetAttributes(l,"textAlign")).every(l=>l)}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),inputRegex$1=/^\s*(\[([( |x])?\])\s$/,TaskItem=Node$1.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList"}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:s=>{const l=s.getAttribute("data-checked");return l===""||l==="true"},renderHTML:s=>({"data-checked":s.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:s,HTMLAttributes:l}){return["li",mergeAttributes(this.options.HTMLAttributes,l,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:s.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const s={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...s,Tab:()=>this.editor.commands.sinkListItem(this.name)}:s},addNodeView(){return({node:s,HTMLAttributes:l,getPos:c,editor:d})=>{const f=document.createElement("li"),g=document.createElement("label"),v=document.createElement("span"),b=document.createElement("input"),$=document.createElement("div");return g.contentEditable="false",b.type="checkbox",b.addEventListener("mousedown",y=>y.preventDefault()),b.addEventListener("change",y=>{if(!d.isEditable&&!this.options.onReadOnlyChecked){b.checked=!b.checked;return}const{checked:x}=y.target;d.isEditable&&typeof c=="function"&&d.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:C})=>{const E=c();if(typeof E!="number")return!1;const N=C.doc.nodeAt(E);return C.setNodeMarkup(E,void 0,{...N==null?void 0:N.attrs,checked:x}),!0}).run(),!d.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(s,x)||(b.checked=!b.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([y,x])=>{f.setAttribute(y,x)}),f.dataset.checked=s.attrs.checked,s.attrs.checked&&b.setAttribute("checked","checked"),g.append(b,v),f.append(g,$),Object.entries(l).forEach(([y,x])=>{f.setAttribute(y,x)}),{dom:f,contentDOM:$,update:y=>y.type!==this.type?!1:(f.dataset.checked=y.attrs.checked,y.attrs.checked?b.setAttribute("checked","checked"):b.removeAttribute("checked"),!0)}}},addInputRules(){return[wrappingInputRule({find:inputRegex$1,type:this.type,getAttributes:s=>({checked:s[s.length-1]==="x"})})]}}),TaskList=Node$1.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:s}){return["ul",mergeAttributes(this.options.HTMLAttributes,s,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:s})=>s.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}}),encodedTlds="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4vianca6w0s2x0a2z0ure5ba0by2idu3namex3narepublic11d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2ntley5rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0cast4mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dabur3d1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0ardian6cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6logistics9properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3ncaster6d0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2psy3ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2tura4vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9dnavy5lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0america6xi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0a1b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp2w2ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4finity6ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",encodedUtlds="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",assign=(s,l)=>{for(const c in l)s[c]=l[c];return s},numeric="numeric",ascii="ascii",alpha="alpha",asciinumeric="asciinumeric",alphanumeric="alphanumeric",domain="domain",emoji="emoji",scheme="scheme",slashscheme="slashscheme",whitespace="whitespace";function registerGroup(s,l){return s in l||(l[s]=[]),l[s]}function addToGroups(s,l,c){l[numeric]&&(l[asciinumeric]=!0,l[alphanumeric]=!0),l[ascii]&&(l[asciinumeric]=!0,l[alpha]=!0),l[asciinumeric]&&(l[alphanumeric]=!0),l[alpha]&&(l[alphanumeric]=!0),l[alphanumeric]&&(l[domain]=!0),l[emoji]&&(l[domain]=!0);for(const d in l){const f=registerGroup(d,c);f.indexOf(s)<0&&f.push(s)}}function flagsForToken(s,l){const c={};for(const d in l)l[d].indexOf(s)>=0&&(c[d]=!0);return c}function State(s){s===void 0&&(s=null),this.j={},this.jr=[],this.jd=null,this.t=s}State.groups={};State.prototype={accepts(){return!!this.t},go(s){const l=this,c=l.j[s];if(c)return c;for(let d=0;d<l.jr.length;d++){const f=l.jr[d][0],g=l.jr[d][1];if(g&&f.test(s))return g}return l.jd},has(s,l){return l===void 0&&(l=!1),l?s in this.j:!!this.go(s)},ta(s,l,c,d){for(let f=0;f<s.length;f++)this.tt(s[f],l,c,d)},tr(s,l,c,d){d=d||State.groups;let f;return l&&l.j?f=l:(f=new State(l),c&&d&&addToGroups(l,c,d)),this.jr.push([s,f]),f},ts(s,l,c,d){let f=this;const g=s.length;if(!g)return f;for(let v=0;v<g-1;v++)f=f.tt(s[v]);return f.tt(s[g-1],l,c,d)},tt(s,l,c,d){d=d||State.groups;const f=this;if(l&&l.j)return f.j[s]=l,l;const g=l;let v,b=f.go(s);if(b?(v=new State,assign(v.j,b.j),v.jr.push.apply(v.jr,b.jr),v.jd=b.jd,v.t=b.t):v=new State,g){if(d)if(v.t&&typeof v.t=="string"){const $=assign(flagsForToken(v.t,d),c);addToGroups(g,$,d)}else c&&addToGroups(g,c,d);v.t=g}return f.j[s]=v,v}};const ta$1=(s,l,c,d,f)=>s.ta(l,c,d,f),tr$1=(s,l,c,d,f)=>s.tr(l,c,d,f),ts$1=(s,l,c,d,f)=>s.ts(l,c,d,f),tt$2=(s,l,c,d,f)=>s.tt(l,c,d,f),WORD="WORD",UWORD="UWORD",LOCALHOST="LOCALHOST",TLD="TLD",UTLD="UTLD",SCHEME="SCHEME",SLASH_SCHEME="SLASH_SCHEME",NUM="NUM",WS="WS",NL$1="NL",OPENBRACE="OPENBRACE",CLOSEBRACE="CLOSEBRACE",OPENBRACKET="OPENBRACKET",CLOSEBRACKET="CLOSEBRACKET",OPENPAREN="OPENPAREN",CLOSEPAREN="CLOSEPAREN",OPENANGLEBRACKET="OPENANGLEBRACKET",CLOSEANGLEBRACKET="CLOSEANGLEBRACKET",FULLWIDTHLEFTPAREN="FULLWIDTHLEFTPAREN",FULLWIDTHRIGHTPAREN="FULLWIDTHRIGHTPAREN",LEFTCORNERBRACKET="LEFTCORNERBRACKET",RIGHTCORNERBRACKET="RIGHTCORNERBRACKET",LEFTWHITECORNERBRACKET="LEFTWHITECORNERBRACKET",RIGHTWHITECORNERBRACKET="RIGHTWHITECORNERBRACKET",FULLWIDTHLESSTHAN="FULLWIDTHLESSTHAN",FULLWIDTHGREATERTHAN="FULLWIDTHGREATERTHAN",AMPERSAND="AMPERSAND",APOSTROPHE="APOSTROPHE",ASTERISK="ASTERISK",AT$1="AT",BACKSLASH="BACKSLASH",BACKTICK="BACKTICK",CARET="CARET",COLON="COLON",COMMA="COMMA",DOLLAR="DOLLAR",DOT="DOT",EQUALS="EQUALS",EXCLAMATION="EXCLAMATION",HYPHEN="HYPHEN",PERCENT="PERCENT",PIPE="PIPE",PLUS="PLUS",POUND="POUND",QUERY="QUERY",QUOTE="QUOTE",SEMI="SEMI",SLASH="SLASH",TILDE="TILDE",UNDERSCORE="UNDERSCORE",EMOJI$1="EMOJI",SYM="SYM";var tk$1=Object.freeze({__proto__:null,WORD,UWORD,LOCALHOST,TLD,UTLD,SCHEME,SLASH_SCHEME,NUM,WS,NL:NL$1,OPENBRACE,CLOSEBRACE,OPENBRACKET,CLOSEBRACKET,OPENPAREN,CLOSEPAREN,OPENANGLEBRACKET,CLOSEANGLEBRACKET,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN,AMPERSAND,APOSTROPHE,ASTERISK,AT:AT$1,BACKSLASH,BACKTICK,CARET,COLON,COMMA,DOLLAR,DOT,EQUALS,EXCLAMATION,HYPHEN,PERCENT,PIPE,PLUS,POUND,QUERY,QUOTE,SEMI,SLASH,TILDE,UNDERSCORE,EMOJI:EMOJI$1,SYM});const ASCII_LETTER=/[a-z]/,LETTER=new RegExp("\\p{L}","u"),EMOJI=new RegExp("\\p{Emoji}","u"),DIGIT=/\d/,SPACE=/\s/,NL$2=`
`,EMOJI_VARIATION="",EMOJI_JOINER="";let tlds=null,utlds=null;function init$2(s){s===void 0&&(s=[]);const l={};State.groups=l;const c=new State;tlds==null&&(tlds=decodeTlds(encodedTlds)),utlds==null&&(utlds=decodeTlds(encodedUtlds)),tt$2(c,"'",APOSTROPHE),tt$2(c,"{",OPENBRACE),tt$2(c,"}",CLOSEBRACE),tt$2(c,"[",OPENBRACKET),tt$2(c,"]",CLOSEBRACKET),tt$2(c,"(",OPENPAREN),tt$2(c,")",CLOSEPAREN),tt$2(c,"<",OPENANGLEBRACKET),tt$2(c,">",CLOSEANGLEBRACKET),tt$2(c,"",FULLWIDTHLEFTPAREN),tt$2(c,"",FULLWIDTHRIGHTPAREN),tt$2(c,"",LEFTCORNERBRACKET),tt$2(c,"",RIGHTCORNERBRACKET),tt$2(c,"",LEFTWHITECORNERBRACKET),tt$2(c,"",RIGHTWHITECORNERBRACKET),tt$2(c,"",FULLWIDTHLESSTHAN),tt$2(c,"",FULLWIDTHGREATERTHAN),tt$2(c,"&",AMPERSAND),tt$2(c,"*",ASTERISK),tt$2(c,"@",AT$1),tt$2(c,"`",BACKTICK),tt$2(c,"^",CARET),tt$2(c,":",COLON),tt$2(c,",",COMMA),tt$2(c,"$",DOLLAR),tt$2(c,".",DOT),tt$2(c,"=",EQUALS),tt$2(c,"!",EXCLAMATION),tt$2(c,"-",HYPHEN),tt$2(c,"%",PERCENT),tt$2(c,"|",PIPE),tt$2(c,"+",PLUS),tt$2(c,"#",POUND),tt$2(c,"?",QUERY),tt$2(c,'"',QUOTE),tt$2(c,"/",SLASH),tt$2(c,";",SEMI),tt$2(c,"~",TILDE),tt$2(c,"_",UNDERSCORE),tt$2(c,"\\",BACKSLASH);const d=tr$1(c,DIGIT,NUM,{[numeric]:!0});tr$1(d,DIGIT,d);const f=tr$1(c,ASCII_LETTER,WORD,{[ascii]:!0});tr$1(f,ASCII_LETTER,f);const g=tr$1(c,LETTER,UWORD,{[alpha]:!0});tr$1(g,ASCII_LETTER),tr$1(g,LETTER,g);const v=tr$1(c,SPACE,WS,{[whitespace]:!0});tt$2(c,NL$2,NL$1,{[whitespace]:!0}),tt$2(v,NL$2),tr$1(v,SPACE,v);const b=tr$1(c,EMOJI,EMOJI$1,{[emoji]:!0});tr$1(b,EMOJI,b),tt$2(b,EMOJI_VARIATION,b);const $=tt$2(b,EMOJI_JOINER);tr$1($,EMOJI,b);const y=[[ASCII_LETTER,f]],x=[[ASCII_LETTER,null],[LETTER,g]];for(let C=0;C<tlds.length;C++)fastts(c,tlds[C],TLD,WORD,y);for(let C=0;C<utlds.length;C++)fastts(c,utlds[C],UTLD,UWORD,x);addToGroups(TLD,{tld:!0,ascii:!0},l),addToGroups(UTLD,{utld:!0,alpha:!0},l),fastts(c,"file",SCHEME,WORD,y),fastts(c,"mailto",SCHEME,WORD,y),fastts(c,"http",SLASH_SCHEME,WORD,y),fastts(c,"https",SLASH_SCHEME,WORD,y),fastts(c,"ftp",SLASH_SCHEME,WORD,y),fastts(c,"ftps",SLASH_SCHEME,WORD,y),addToGroups(SCHEME,{scheme:!0,ascii:!0},l),addToGroups(SLASH_SCHEME,{slashscheme:!0,ascii:!0},l),s=s.sort((C,E)=>C[0]>E[0]?1:-1);for(let C=0;C<s.length;C++){const E=s[C][0],W=s[C][1]?{[scheme]:!0}:{[slashscheme]:!0};E.indexOf("-")>=0?W[domain]=!0:ASCII_LETTER.test(E)?DIGIT.test(E)?W[asciinumeric]=!0:W[ascii]=!0:W[numeric]=!0,ts$1(c,E,E,W)}return ts$1(c,"localhost",LOCALHOST,{ascii:!0}),c.jd=new State(SYM),{start:c,tokens:assign({groups:l},tk$1)}}function run$1(s,l){const c=stringToArray(l.replace(/[A-Z]/g,b=>b.toLowerCase())),d=c.length,f=[];let g=0,v=0;for(;v<d;){let b=s,$=null,y=0,x=null,C=-1,E=-1;for(;v<d&&($=b.go(c[v]));)b=$,b.accepts()?(C=0,E=0,x=b):C>=0&&(C+=c[v].length,E++),y+=c[v].length,g+=c[v].length,v++;g-=C,v-=E,y-=C,f.push({t:x.t,v:l.slice(g-y,g),s:g-y,e:g})}return f}function stringToArray(s){const l=[],c=s.length;let d=0;for(;d<c;){let f=s.charCodeAt(d),g,v=f<55296||f>56319||d+1===c||(g=s.charCodeAt(d+1))<56320||g>57343?s[d]:s.slice(d,d+2);l.push(v),d+=v.length}return l}function fastts(s,l,c,d,f){let g;const v=l.length;for(let b=0;b<v-1;b++){const $=l[b];s.j[$]?g=s.j[$]:(g=new State(d),g.jr=f.slice(),s.j[$]=g),s=g}return g=new State(c),g.jr=f.slice(),s.j[l[v-1]]=g,g}function decodeTlds(s){const l=[],c=[];let d=0,f="0123456789";for(;d<s.length;){let g=0;for(;f.indexOf(s[d+g])>=0;)g++;if(g>0){l.push(c.join(""));for(let v=parseInt(s.substring(d,d+g),10);v>0;v--)c.pop();d+=g}else c.push(s[d]),d++}return l}const defaults$2={defaultProtocol:"http",events:null,format:noop$1,formatHref:noop$1,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Options$1(s,l){l===void 0&&(l=null);let c=assign({},defaults$2);s&&(c=assign(c,s instanceof Options$1?s.o:s));const d=c.ignoreTags,f=[];for(let g=0;g<d.length;g++)f.push(d[g].toUpperCase());this.o=c,l&&(this.defaultRender=l),this.ignoreTags=f}Options$1.prototype={o:defaults$2,ignoreTags:[],defaultRender(s){return s},check(s){return this.get("validate",s.toString(),s)},get(s,l,c){const d=l!=null;let f=this.o[s];return f&&(typeof f=="object"?(f=c.t in f?f[c.t]:defaults$2[s],typeof f=="function"&&d&&(f=f(l,c))):typeof f=="function"&&d&&(f=f(l,c.t,c)),f)},getObj(s,l,c){let d=this.o[s];return typeof d=="function"&&l!=null&&(d=d(l,c.t,c)),d},render(s){const l=s.render(this);return(this.get("render",null,s)||this.defaultRender)(l,s.t,s)}};function noop$1(s){return s}function MultiToken(s,l){this.t="token",this.v=s,this.tk=l}MultiToken.prototype={isLink:!1,toString(){return this.v},toHref(s){return this.toString()},toFormattedString(s){const l=this.toString(),c=s.get("truncate",l,this),d=s.get("format",l,this);return c&&d.length>c?d.substring(0,c)+"":d},toFormattedHref(s){return s.get("formatHref",this.toHref(s.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(s){return s===void 0&&(s=defaults$2.defaultProtocol),{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(s),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(s){return{type:this.t,value:this.toFormattedString(s),isLink:this.isLink,href:this.toFormattedHref(s),start:this.startIndex(),end:this.endIndex()}},validate(s){return s.get("validate",this.toString(),this)},render(s){const l=this,c=this.toHref(s.get("defaultProtocol")),d=s.get("formatHref",c,this),f=s.get("tagName",c,l),g=this.toFormattedString(s),v={},b=s.get("className",c,l),$=s.get("target",c,l),y=s.get("rel",c,l),x=s.getObj("attributes",c,l),C=s.getObj("events",c,l);return v.href=d,b&&(v.class=b),$&&(v.target=$),y&&(v.rel=y),x&&assign(v,x),{tagName:f,attributes:v,content:g,eventListeners:C}}};function createTokenClass(s,l){class c extends MultiToken{constructor(f,g){super(f,g),this.t=s}}for(const d in l)c.prototype[d]=l[d];return c.t=s,c}const Email=createTokenClass("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Text$1=createTokenClass("text"),Nl$1=createTokenClass("nl"),Url=createTokenClass("url",{isLink:!0,toHref(s){return s===void 0&&(s=defaults$2.defaultProtocol),this.hasProtocol()?this.v:`${s}://${this.v}`},hasProtocol(){const s=this.tk;return s.length>=2&&s[0].t!==LOCALHOST&&s[1].t===COLON}}),makeState=s=>new State(s);function init$1(s){let{groups:l}=s;const c=l.domain.concat([AMPERSAND,ASTERISK,AT$1,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,NUM,PERCENT,PIPE,PLUS,POUND,SLASH,SYM,TILDE,UNDERSCORE]),d=[APOSTROPHE,COLON,COMMA,DOT,EXCLAMATION,QUERY,QUOTE,SEMI,OPENANGLEBRACKET,CLOSEANGLEBRACKET,OPENBRACE,CLOSEBRACE,CLOSEBRACKET,OPENBRACKET,OPENPAREN,CLOSEPAREN,FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN,LEFTCORNERBRACKET,RIGHTCORNERBRACKET,LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET,FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN],f=[AMPERSAND,APOSTROPHE,ASTERISK,BACKSLASH,BACKTICK,CARET,DOLLAR,EQUALS,HYPHEN,OPENBRACE,CLOSEBRACE,PERCENT,PIPE,PLUS,POUND,QUERY,SLASH,SYM,TILDE,UNDERSCORE],g=makeState(),v=tt$2(g,TILDE);ta$1(v,f,v),ta$1(v,l.domain,v);const b=makeState(),$=makeState(),y=makeState();ta$1(g,l.domain,b),ta$1(g,l.scheme,$),ta$1(g,l.slashscheme,y),ta$1(b,f,v),ta$1(b,l.domain,b);const x=tt$2(b,AT$1);tt$2(v,AT$1,x),tt$2($,AT$1,x),tt$2(y,AT$1,x);const C=tt$2(v,DOT);ta$1(C,f,v),ta$1(C,l.domain,v);const E=makeState();ta$1(x,l.domain,E),ta$1(E,l.domain,E);const N=tt$2(E,DOT);ta$1(N,l.domain,E);const W=makeState(Email);ta$1(N,l.tld,W),ta$1(N,l.utld,W),tt$2(x,LOCALHOST,W);const q=tt$2(E,HYPHEN);ta$1(q,l.domain,E),ta$1(W,l.domain,E),tt$2(W,DOT,N),tt$2(W,HYPHEN,q);const Y=tt$2(W,COLON);ta$1(Y,l.numeric,Email);const re=tt$2(b,HYPHEN),se=tt$2(b,DOT);ta$1(re,l.domain,b),ta$1(se,f,v),ta$1(se,l.domain,b);const de=makeState(Url);ta$1(se,l.tld,de),ta$1(se,l.utld,de),ta$1(de,l.domain,b),ta$1(de,f,v),tt$2(de,DOT,se),tt$2(de,HYPHEN,re),tt$2(de,AT$1,x);const he=tt$2(de,COLON),ge=makeState(Url);ta$1(he,l.numeric,ge);const Se=makeState(Url),Ae=makeState();ta$1(Se,c,Se),ta$1(Se,d,Ae),ta$1(Ae,c,Se),ta$1(Ae,d,Ae),tt$2(de,SLASH,Se),tt$2(ge,SLASH,Se);const Re=tt$2($,COLON),Be=tt$2(y,COLON),Ke=tt$2(Be,SLASH),Lr=tt$2(Ke,SLASH);ta$1($,l.domain,b),tt$2($,DOT,se),tt$2($,HYPHEN,re),ta$1(y,l.domain,b),tt$2(y,DOT,se),tt$2(y,HYPHEN,re),ta$1(Re,l.domain,Se),tt$2(Re,SLASH,Se),ta$1(Lr,l.domain,Se),ta$1(Lr,c,Se),tt$2(Lr,SLASH,Se);const _y=[[OPENBRACE,CLOSEBRACE],[OPENBRACKET,CLOSEBRACKET],[OPENPAREN,CLOSEPAREN],[OPENANGLEBRACKET,CLOSEANGLEBRACKET],[FULLWIDTHLEFTPAREN,FULLWIDTHRIGHTPAREN],[LEFTCORNERBRACKET,RIGHTCORNERBRACKET],[LEFTWHITECORNERBRACKET,RIGHTWHITECORNERBRACKET],[FULLWIDTHLESSTHAN,FULLWIDTHGREATERTHAN]];for(let by=0;by<_y.length;by++){const[yy,my]=_y[by],$t=tt$2(Se,yy);tt$2(Ae,yy,$t),tt$2($t,my,Se);const K$=makeState(Url);ta$1($t,c,K$);const Y$=makeState();ta$1($t,d),ta$1(K$,c,K$),ta$1(K$,d,Y$),ta$1(Y$,c,K$),ta$1(Y$,d,Y$),tt$2(K$,my,Se),tt$2(Y$,my,Se)}return tt$2(g,LOCALHOST,de),tt$2(g,NL$1,Nl$1),{start:g,tokens:tk$1}}function run(s,l,c){let d=c.length,f=0,g=[],v=[];for(;f<d;){let b=s,$=null,y=null,x=0,C=null,E=-1;for(;f<d&&!($=b.go(c[f].t));)v.push(c[f++]);for(;f<d&&(y=$||b.go(c[f].t));)$=null,b=y,b.accepts()?(E=0,C=b):E>=0&&E++,f++,x++;if(E<0)f-=x,f<d&&(v.push(c[f]),f++);else{v.length>0&&(g.push(initMultiToken(Text$1,l,v)),v=[]),f-=E,x-=E;const N=C.t,W=c.slice(f-x,f);g.push(initMultiToken(N,l,W))}}return v.length>0&&g.push(initMultiToken(Text$1,l,v)),g}function initMultiToken(s,l,c){const d=c[0].s,f=c[c.length-1].e,g=l.slice(d,f);return new s(g,c)}const warn=typeof console<"u"&&console&&console.warn||(()=>{}),warnAdvice="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",INIT={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function reset(){State.groups={},INIT.scanner=null,INIT.parser=null,INIT.tokenQueue=[],INIT.pluginQueue=[],INIT.customSchemes=[],INIT.initialized=!1}function registerCustomProtocol(s,l){if(l===void 0&&(l=!1),INIT.initialized&&warn(`linkifyjs: already initialized - will not register custom scheme "${s}" ${warnAdvice}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(s))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);INIT.customSchemes.push([s,l])}function init(){INIT.scanner=init$2(INIT.customSchemes);for(let s=0;s<INIT.tokenQueue.length;s++)INIT.tokenQueue[s][1]({scanner:INIT.scanner});INIT.parser=init$1(INIT.scanner.tokens);for(let s=0;s<INIT.pluginQueue.length;s++)INIT.pluginQueue[s][1]({scanner:INIT.scanner,parser:INIT.parser});INIT.initialized=!0}function tokenize(s){return INIT.initialized||init(),run(INIT.parser.start,s,run$1(INIT.scanner.start,s))}function find(s,l,c){if(l===void 0&&(l=null),c===void 0&&(c=null),l&&typeof l=="object"){if(c)throw Error(`linkifyjs: Invalid link type ${l}; must be a string`);c=l,l=null}const d=new Options$1(c),f=tokenize(s),g=[];for(let v=0;v<f.length;v++){const b=f[v];b.isLink&&(!l||b.t===l)&&d.check(b)&&g.push(b.toFormattedObject(d))}return g}function isValidLinkStructure(s){return s.length===1?s[0].isLink:s.length===3&&s[1].isLink?["()","[]"].includes(s[0].value+s[2].value):!1}function autolink(s){return new Plugin({key:new PluginKey("autolink"),appendTransaction:(l,c,d)=>{const f=l.some(y=>y.docChanged)&&!c.doc.eq(d.doc),g=l.some(y=>y.getMeta("preventAutolink"));if(!f||g)return;const{tr:v}=d,b=combineTransactionSteps(c.doc,[...l]);if(getChangedRanges(b).forEach(({newRange:y})=>{const x=findChildrenInRange(d.doc,y,N=>N.isTextblock);let C,E;if(x.length>1?(C=x[0],E=d.doc.textBetween(C.pos,C.pos+C.node.nodeSize,void 0," ")):x.length&&d.doc.textBetween(y.from,y.to," "," ").endsWith(" ")&&(C=x[0],E=d.doc.textBetween(C.pos,y.to,void 0," ")),C&&E){const N=E.split(" ").filter(re=>re!=="");if(N.length<=0)return!1;const W=N[N.length-1],q=C.pos+E.lastIndexOf(W);if(!W)return!1;const Y=tokenize(W).map(re=>re.toObject(s.defaultProtocol));if(!isValidLinkStructure(Y))return!1;Y.filter(re=>re.isLink).map(re=>({...re,from:q+re.start+1,to:q+re.end+1})).filter(re=>d.schema.marks.code?!d.doc.rangeHasMark(re.from,re.to,d.schema.marks.code):!0).filter(re=>s.validate(re.value)).forEach(re=>{getMarksBetween(re.from,re.to,d.doc).some(se=>se.mark.type===s.type)||v.addMark(re.from,re.to,s.type.create({href:re.href}))})}}),!!v.steps.length)return v}})}function clickHandler(s){return new Plugin({key:new PluginKey("handleClickLink"),props:{handleClick:(l,c,d)=>{var f,g;if(d.button!==0||!l.editable)return!1;let v=d.target;const b=[];for(;v.nodeName!=="DIV";)b.push(v),v=v.parentNode;if(!b.find(E=>E.nodeName==="A"))return!1;const $=getAttributes(l.state,s.type.name),y=d.target,x=(f=y==null?void 0:y.href)!==null&&f!==void 0?f:$.href,C=(g=y==null?void 0:y.target)!==null&&g!==void 0?g:$.target;return y&&x?(window.open(x,C),!0):!1}}})}function pasteHandler(s){return new Plugin({key:new PluginKey("handlePasteLink"),props:{handlePaste:(l,c,d)=>{const{state:f}=l,{selection:g}=f,{empty:v}=g;if(v)return!1;let b="";d.content.forEach(y=>{b+=y.textContent});const $=find(b,{defaultProtocol:s.defaultProtocol}).find(y=>y.isLink&&y.value===b);return!b||!$?!1:(s.editor.commands.setMark(s.type,{href:$.href}),!0)}}})}const ATTR_WHITESPACE=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g;function isAllowedUri(s,l){const c=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return l&&l.forEach(d=>{const f=typeof d=="string"?d:d.scheme;f&&c.push(f)}),!s||s.replace(ATTR_WHITESPACE,"").match(new RegExp(`^(?:(?:${c.join("|")}):|[^a-z]|[a-z+.-]+(?:[^a-z+.-:]|$))`,"i"))}const Link=Mark.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.protocols.forEach(s=>{if(typeof s=="string"){registerCustomProtocol(s);return}registerCustomProtocol(s.scheme,s.optionalSlashes)})},onDestroy(){reset()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},validate:s=>!!s}},addAttributes(){return{href:{default:null,parseHTML(s){return s.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:s=>{const l=s.getAttribute("href");return!l||!isAllowedUri(l,this.options.protocols)?!1:null}}]},renderHTML({HTMLAttributes:s}){return isAllowedUri(s.href,this.options.protocols)?["a",mergeAttributes(this.options.HTMLAttributes,s),0]:["a",mergeAttributes(this.options.HTMLAttributes,{...s,href:""}),0]},addCommands(){return{setLink:s=>({chain:l})=>l().setMark(this.name,s).setMeta("preventAutolink",!0).run(),toggleLink:s=>({chain:l})=>l().toggleMark(this.name,s,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run(),unsetLink:()=>({chain:s})=>s().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[markPasteRule({find:s=>{const l=[];if(s){const{validate:c}=this.options,d=find(s).filter(f=>f.isLink&&c(f.value));d.length&&d.forEach(f=>l.push({text:f.value,data:{href:f.href},index:f.start}))}return l},type:this.type,getAttributes:s=>{var l;return{href:(l=s.data)===null||l===void 0?void 0:l.href}}})]},addProseMirrorPlugins(){const s=[];return this.options.autolink&&s.push(autolink({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:this.options.validate})),this.options.openOnClick===!0&&s.push(clickHandler({type:this.type})),this.options.linkOnPaste&&s.push(pasteHandler({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),s}}),inputRegex=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Image$1=Node$1.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:s}){return["img",mergeAttributes(this.options.HTMLAttributes,s)]},addCommands(){return{setImage:s=>({commands:l})=>l.insertContent({type:this.name,attrs:s})}},addInputRules(){return[nodeInputRule({find:inputRegex,type:this.type,getAttributes:s=>{const[,,l,c,d]=s;return{src:c,alt:l,title:d}}})]}}),$e$1={tag:{type:[String,Object],default:"div"},resizable:{type:Boolean,default:!0},rotatable:{type:Boolean,default:!1},boundary:{type:Boolean},disabled:Boolean,width:{type:Number,default:0},height:{type:Number,default:0},left:{type:Number,default:0},top:{type:Number,default:0},zIndex:{type:Number,default:0},angle:{type:Number,default:0},color:{type:String,default:"#3a7afe"},minWidth:{type:Number,default:-1/0},minHeight:{type:Number,default:-1/0},maxWidth:{type:Number,default:0},maxHeight:{type:Number,default:0},aspectRatio:{type:Number},selected:Boolean,snapToGrid:Boolean,gridX:{type:Number,default:50},gridY:{type:Number,default:50},scaleRatio:{type:Number,default:1},disabledKeyEvent:Boolean,border:{type:Boolean,default:!0},resizeList:{type:Array},equalProportion:{type:Boolean},checkCollision:{type:Boolean},snap:Boolean,snapThreshold:{type:Number,default:10},markline:[Boolean,Function]};function te(s,l){const c=d=>{l&&l(d),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",c),document.removeEventListener("mouseleave",c),document.removeEventListener("touchmove",s),document.removeEventListener("touchend",c)};document.addEventListener("mousemove",s),document.addEventListener("mouseup",c),document.addEventListener("mouseleave",c),document.addEventListener("touchmove",s),document.addEventListener("touchend",c)}function V(s){let l=0,c=0;if(Ve(s)){const d=s.targetTouches[0];l=d.pageX,c=d.pageY}else l=s.clientX,c=s.clientY;return{clientX:l,clientY:c}}function Ve(s){const l=Object.prototype.toString.call(s);return l.substring(8,l.length-1)==="TouchEvent"}const F$1=(s=0)=>parseInt(s+"")+"px",H={n:"top",s:"bottom",e:"right",w:"left",ne:"top-right",nw:"top-left",se:"bottom-right",sw:"bottom-left"},ee=["n","ne","e","se","s","sw","w","nw"],Ge$1={n:0,ne:1,e:2,se:3,s:4,sw:5,w:6,nw:7},qe$1={0:0,1:1,2:2,3:2,4:3,5:4,6:4,7:5,8:6,9:6,10:7,11:8},Fe$1=(s,l)=>{const c=qe$1[Math.floor(s/30)],d=(Ge$1[l]+c)%8;return ee[d]},ve=(s=0,l)=>{let c=[];for(let d=0;d<ee.length;d++){const f=ee[d],[g,v]=H[f].split("-"),b=Fe$1(s,f),$={[g]:"0%",cursor:b+"-resize",side:H[f]};if(v)$[v]="0%";else{const y=["top","bottom"].includes(g)?"left":"top";$[y]="50%"}l?l.includes(H[f])&&c.push($):c.push($)}return c},ne$1=s=>s*Math.PI/180,Ue=(s,l)=>Math.sqrt(s*s+l*l),k$1=s=>Math.cos(ne$1(s)),L=s=>Math.sin(ne$1(s)),Oe=(s,l,c,d,f,g,v)=>{let{width:b,height:$,centerX:y,centerY:x,rotateAngle:C}=l;const E=b<0?-1:1,N=$<0?-1:1;switch(b=Math.abs(b),$=Math.abs($),s){case"right":{const W=I(b,c,g);b=W.width,c=W.deltaW,f?(d=c/f,$=b/f,y+=c/2*k$1(C)-d/2*L(C),x+=c/2*L(C)+d/2*k$1(C)):(y+=c/2*k$1(C),x+=c/2*L(C));break}case"top-right":{d=-d;const W=I(b,c,g);b=W.width,c=W.deltaW;const q=P$1($,d,v);$=q.height,d=q.deltaH,f&&(c=d*f,b=$*f),y+=c/2*k$1(C)+d/2*L(C),x+=c/2*L(C)-d/2*k$1(C);break}case"bottom-right":{const W=I(b,c,g);b=W.width,c=W.deltaW;const q=P$1($,d,v);$=q.height,d=q.deltaH,f&&(c=d*f,b=$*f),y+=c/2*k$1(C)-d/2*L(C),x+=c/2*L(C)+d/2*k$1(C);break}case"bottom":{const W=P$1($,d,v);$=W.height,d=W.deltaH,f?(c=d*f,b=$*f,y+=c/2*k$1(C)-d/2*L(C),x+=c/2*L(C)+d/2*k$1(C)):(y-=d/2*L(C),x+=d/2*k$1(C));break}case"bottom-left":{c=-c;const W=I(b,c,g);b=W.width,c=W.deltaW;const q=P$1($,d,v);$=q.height,d=q.deltaH,f&&($=b/f,d=c/f),y-=c/2*k$1(C)+d/2*L(C),x-=c/2*L(C)-d/2*k$1(C);break}case"left":{c=-c;const W=I(b,c,g);b=W.width,c=W.deltaW,f?($=b/f,d=c/f,y-=c/2*k$1(C)+d/2*L(C),x-=c/2*L(C)-d/2*k$1(C)):(y-=c/2*k$1(C),x-=c/2*L(C));break}case"top-left":{c=-c,d=-d;const W=I(b,c,g);b=W.width,c=W.deltaW;const q=P$1($,d,v);$=q.height,d=q.deltaH,f&&(b=$*f,c=d*f),y-=c/2*k$1(C)-d/2*L(C),x-=c/2*L(C)+d/2*k$1(C);break}case"top":{d=-d;const W=P$1($,d,v);$=W.height,d=W.deltaH,f?(b=$*f,c=d*f,y+=c/2*k$1(C)+d/2*L(C),x+=c/2*L(C)-d/2*k$1(C)):(y+=d/2*L(C),x-=d/2*k$1(C));break}}return{position:{centerX:y,centerY:x},size:{width:b*E,height:$*N}}},P$1=(s,l,c)=>{const d=s+l;return d>c?s=d:(l=c-s,s=c),{height:s,deltaH:l}},I=(s,l,c)=>{const d=s+l;return d>c?s=d:(l=c-s,s=c),{width:s,deltaW:l}},je$1=({centerX:s,centerY:l,width:c,height:d,angle:f})=>({top:l-d/2,left:s-c/2,width:c,height:d,angle:f}),Je$1=(s,l,c)=>{const{width:d,height:f}=s;return{width:Math.abs(d),height:Math.abs(f),left:l-Math.abs(d)/2,top:c-Math.abs(f)/2}};function J$1(s,l){const c=Math.abs(s)%l,d=s>0?l:-l;let f=0;return c>l/2?f=d*Math.ceil(Math.abs(s)/l):f=d*Math.floor(Math.abs(s)/l),f}function Qe$1(s,l,c){if(!s||!l)return!1;const d=R(s,c),f=R(l,c);return d.left<f.left+f.width&&d.left+d.width>f.left&&d.top<f.top+f.height&&d.top+d.height>f.top}const R=(s,l)=>{var c=s.getBoundingClientRect();return{...c,left:c.left/l,top:c.top/l,right:c.right/l,bottom:c.bottom/l,width:c.width/l,height:c.height/l}},ye=s=>typeof s=="function";function Ze(s,l){let c=null,d=null;const f=computed(()=>s.value.offsetParent||document.body),g=computed(()=>R(f.value,l.scaleRatio)),v=ref({x:[],y:[]}),b=()=>{l.markline&&!ye(l.markline)&&(c||(c=document.querySelector(".es-drager-markline-x")||pe("x",f.value,l.color)),d||(d=document.querySelector(".es-drager-markline-y")||pe("y",f.value,l.color)))},$=(N={})=>{if(l.markline){if(ye(l.markline))return l.markline(N);N.left===null?c.style.display="none":(c.style.left=N.left+"px",c.style.backgroundColor=l.color,c.style.display="block"),N.top===null?d.style.display="none":(d.style.top=N.top+"px",d.style.backgroundColor=l.color,d.style.display="block")}},y=()=>{const N=R(s.value,l.scaleRatio),W=document.querySelectorAll(".es-drager"),q=[];for(let Y=0;Y<W.length;Y++){const re=W[Y];re!==s.value&&q.push(R(re,l.scaleRatio))}v.value=He(q,N)},x=()=>{const N={top:null,left:null,diffX:0,diffY:0},W=R(s.value,l.scaleRatio);for(let q=0;q<v.value.y.length;q++){const{top:Y,showTop:re}=v.value.y[q];if(Math.abs(Y-W.top)<l.snapThreshold){N.diffY=Y-W.top,N.top=re-g.value.top;break}}for(let q=0;q<v.value.x.length;q++){const{left:Y,showLeft:re}=v.value.x[q];if(Math.abs(Y-W.left)<l.snapThreshold){N.diffX=Y-W.left,N.left=re-g.value.left;break}}return $(N),N},C=()=>{$({left:null,top:null})},E=N=>{if(!(!l.snap&&!l.markline))switch(N){case"drag-start":y();break;case"drag":return x();case"drag-end":C();break}};return onMounted(()=>{b()}),{marklineEmit:E}}function pe(s="x",l,c=""){const d=document.createElement("div");return d.classList.add(`es-drager-markline-${s}`),d.style.position="absolute",d.style.top="0px",d.style.left="0px",d.style.zIndex="9999",d.style.backgroundColor=c,d.style.display="none",s==="x"?(d.style.height="100%",d.style.width="1px"):(d.style.height="1px",d.style.width="100%"),l.appendChild(d),d}function He(s,l){const c={x:[],y:[]},{width:d=0,height:f=0}=l;return s.forEach(g=>{const{top:v,left:b,width:$,height:y}=g;c.y.push({showTop:v,top:v}),c.y.push({showTop:v,top:v-f}),c.y.push({showTop:v+y/2,top:v+y/2-f/2}),c.y.push({showTop:v+y,top:v+y}),c.y.push({showTop:v+y,top:v+y-f}),c.x.push({showLeft:b,left:b}),c.x.push({showLeft:b+$,left:b+$}),c.x.push({showLeft:b+$/2,left:b+$/2-d/2}),c.x.push({showLeft:b+$,left:b+$-d}),c.x.push({showLeft:b,left:b-d})}),c}function We(s,l,c,{getBoundary:d,fixBoundary:f,checkDragerCollision:g,emit:v}){let b=0,$=0;return{onKeydown:y=>{let{left:x,top:C}=l.value;if(b||(b=x),$||($=C),["ArrowRight","ArrowLeft"].includes(y.key)){const E=y.key==="ArrowRight";let N=E?1:-1;s.snapToGrid&&(N=E?s.gridX:-s.gridX),x=x+N}else if(["ArrowUp","ArrowDown"].includes(y.key)){const E=y.key==="ArrowDown";let N=E?1:-1;s.snapToGrid&&(N=E?s.gridY:-s.gridY),C=C+N}if(s.boundary){const[E,N,W,q]=d();[x,C]=f(x,C,E,N,W,q)}l.value.left=x,l.value.top=C},onKeyup:y=>{["ArrowRight","ArrowLeft","ArrowUp","ArrowDown"].includes(y.key)&&s.checkCollision&&g()&&(l.value.left=b,l.value.top=$),b=0,$=0}}}function et(s,l,c){const d=ref(!1),f=ref(!1),g=ref({width:l.width,height:l.height,left:l.left,top:l.top,angle:l.angle}),{marklineEmit:v}=Ze(s,l),b=new Set;function $(q){if(b.add(q.button),l.disabled)return;d.value=!0,f.value=!0;let{clientX:Y,clientY:re}=V(q);const{left:se,top:de}=g.value;let he=0,ge=0,Se=0,Ae=0;l.boundary&&([he,ge,Se,Ae]=y()),v("drag-start"),c&&c("drag-start",g.value),te(Re=>{if(b.size>1)return;const{clientX:Be,clientY:Ke}=V(Re);let Lr=(Be-Y)/l.scaleRatio+se,_y=(Ke-re)/l.scaleRatio+de;if(l.snapToGrid){let{left:by,top:yy}=g.value;const my=Lr-by,$t=_y-yy;Lr=by+J$1(my,l.gridX),_y=yy+J$1($t,l.gridY)}l.boundary&&([Lr,_y]=x(Lr,_y,he,ge,Se,Ae)),g.value.left=Lr,g.value.top=_y,c&&c("drag",g.value),nextTick(()=>{const by=v("drag");l.snap&&(by.diffX&&(g.value.left+=by.diffX),by.diffY&&(g.value.top+=by.diffY))})},Re=>{l.checkCollision&&C()&&(g.value.top=de,g.value.left=se),b.clear(),d.value=!1,v("drag-end"),c&&c("drag-end",g.value)})}const y=()=>{let q=0,Y=0;const{left:re,top:se,height:de,width:he,angle:ge}=g.value,Se=s.value.offsetParent||document.body,Ae=R(Se,l.scaleRatio);if(ge){const Ke=R(s.value,l.scaleRatio);q=Ke.left-Math.floor(re-(Ke.width-he)+Ae.left),Y=Ke.top-Math.floor(se-(Ke.height-de)+Ae.top)}const Re=Ae.width-he,Be=Ae.height-de;return[q,Re-q,Y,Be-Y,Ae.width,Ae.height]},x=(q,Y,re,se,de,he)=>(q=q<re?re:q,q=q>se?se:q,Y=Y<de?de:Y,Y=Y>he?he:Y,[q,Y]),C=()=>{const q=s.value.offsetParent||document.body,Y=Array.from(q.children).filter(re=>re!==s.value&&re.classList.contains("es-drager"));for(let re=0;re<Y.length;re++){const se=Y[re];if(Qe$1(s.value,se,l.scaleRatio))return!0}},E=()=>{f.value=!1},{onKeydown:N,onKeyup:W}=We(l,g,f,{getBoundary:y,fixBoundary:x,checkDragerCollision:C,emit:c});return watch(f,q=>{q?(c("focus",q),document.addEventListener("click",E,{once:!0})):c("blur",q),!l.disabledKeyEvent&&(q?(document.addEventListener("keydown",N),document.addEventListener("keyup",W)):(document.removeEventListener("keydown",N),document.removeEventListener("keyup",W)))}),onMounted(()=>{if(s.value){if(!g.value.width&&!g.value.height){const{width:q,height:Y}=R(s.value,l.scaleRatio);g.value={...g.value,width:q||100,height:Y||100}}s.value.addEventListener("mousedown",$),s.value.addEventListener("touchstart",$,{passive:!0})}}),onBeforeUnmount(()=>{document.removeEventListener("click",E),document.removeEventListener("keydown",N),document.removeEventListener("keyup",W)}),{isMousedown:d,selected:f,dragData:g,getBoundary:y,checkDragerCollision:C}}const tt$1=createBaseVNode("div",{class:"es-drager-rotate-handle"},[createBaseVNode("svg",{viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg"},[createBaseVNode("path",{fill:"currentColor",d:"M784.512 230.272v-50.56a32 32 0 1 1 64 0v149.056a32 32 0 0 1-32 32H667.52a32 32 0 1 1 0-64h92.992A320 320 0 1 0 524.8 833.152a320 320 0 0 0 320-320h64a384 384 0 0 1-384 384 384 384 0 0 1-384-384 384 384 0 0 1 643.712-282.88z"})])],-1),nt$1=defineComponent({__name:"rotate",props:{modelValue:{type:Number,default:0},element:{type:Object}},emits:["update:modelValue","rotate","rotate-start","rotate-end"],setup(s,{emit:l}){const c=s,d=l,f=ref(null),g=computed({get:()=>c.modelValue,set:b=>{d("update:modelValue",b)}});function v(b){if(!c.element)return console.warn("[es-drager] rotate component need drag element property");b.stopPropagation();const{width:$,height:y,left:x,top:C}=c.element.getBoundingClientRect(),E=x+$/2,N=C+y/2;d("rotate-start",g.value),te(W=>{const{clientX:q,clientY:Y}=V(W),re=E-q,se=N-Y,de=Math.atan2(se,re)*180/Math.PI-90;g.value=(de+360)%360,d("rotate",g.value)},()=>{d("rotate-end",g.value)})}return(b,$)=>(openBlock(),createElementBlock("div",{ref_key:"rotateRef",ref:f,class:"es-drager-rotate",onMousedown:v,onTouchstartPassive:v},[renderSlot(b.$slots,"default",{},()=>[tt$1])],544))}}),ot$1=["data-side","onMousedown","onTouchstartPassive"],st=createBaseVNode("div",{class:"es-drager-dot-handle"},null,-1),be=defineComponent({__name:"drager",props:$e$1,emits:["change","drag","drag-start","drag-end","resize","resize-start","resize-end","rotate","rotate-start","rotate-end","focus","blur"],setup(s,{emit:l}){const c=s,d=l,f=(de,...he)=>{d(de,...he)},g=ref(null),{selected:v,dragData:b,isMousedown:$,getBoundary:y,checkDragerCollision:x}=et(g,c,f),C=ref(ve(0,c.resizeList)),E=computed(()=>c.resizable&&!c.disabled),N=computed(()=>c.rotatable&&!c.disabled&&v.value),W=computed(()=>{const{width:de,height:he,left:ge,top:Se,angle:Ae}=b.value,Re={};return de&&(Re.width=F$1(de)),he&&(Re.height=F$1(he)),{...Re,left:F$1(ge),top:F$1(Se),zIndex:c.zIndex,transform:`rotate(${Ae}deg)`,"--es-drager-color":c.color}});function q(de){g.value||(g.value=de.$el||de)}function Y(de){C.value=ve(de,c.resizeList),f("rotate-end",b.value)}function re(de,he){if(c.disabled)return;he.stopPropagation();const{clientX:ge,clientY:Se}=V(he),Ae=ge,Re=Se,{width:Be,height:Ke,left:Lr,top:_y}=b.value,by=Lr+Be/2,yy=_y+Ke/2,my={width:Be,height:Ke,centerX:by,centerY:yy,rotateAngle:b.value.angle},$t=de.side,{minWidth:K$,minHeight:Y$,aspectRatio:W$,equalProportion:U$}=c;f("resize-start",b.value);let hy=[];c.boundary&&(hy=y()),te(G$=>{const{clientX:ky,clientY:$y}=V(G$);let rS=(ky-Ae)/c.scaleRatio,lS=($y-Re)/c.scaleRatio;c.snapToGrid&&(rS=J$1(rS,c.gridX),lS=J$1(lS,c.gridY));const bS=Math.atan2(lS,rS),IS=Ue(rS,lS),BS=G$.shiftKey,MS=bS-ne$1(my.rotateAngle),zS=IS*Math.cos(MS),LS=IS*Math.sin(MS),nS=(U$||BS)&&!W$?my.width/my.height:W$,{position:{centerX:Z$,centerY:dS},size:{width:ES,height:wy}}=Oe($t,{...my,rotateAngle:my.rotateAngle},zS,LS,nS,K$,Y$),tS=je$1({centerX:Z$,centerY:dS,width:ES,height:wy,angle:b.value.angle});let yS={...b.value,...Je$1(tS,Z$,dS)};c.maxWidth>0&&(yS.width=Math.min(yS.width,c.maxWidth)),c.maxHeight>0&&(yS.height=Math.min(yS.height,c.maxHeight)),c.boundary&&(yS=se(yS,hy,nS)),b.value=yS,f("resize",b.value)},()=>{c.checkCollision&&x()&&(b.value={...b.value,width:Be,height:Ke,left:Lr,top:_y}),f("resize-end",b.value)})}function se(de,he,ge){const[Se,Ae,Re,Be,Ke,Lr]=he,_y=de.left<Se,by=de.left+de.width>Ke,yy=de.top<Re,my=de.top+de.height>Lr;return _y&&(de.left=Se,de.width=b.value.width),yy&&(de.top=Re,de.height=b.value.height),(by||my)&&(by&&(de.left=b.value.left),my&&(de.top=b.value.top),my||(de.width=Ke-de.left),by||(de.height=Lr-de.top)),(my||yy)&&ge&&(de.width=b.value.width,de.left=b.value.left),(by||_y)&&ge&&(de.height=b.value.height,de.top=b.value.top),de}return watch(()=>[c.width,c.height,c.left,c.top,c.angle],([de,he,ge,Se,Ae],[Re,Be,Ke,Lr,_y])=>{de!==Re&&(b.value.width=de),he!==Be&&(b.value.height=he),ge!==Ke&&(b.value.left=ge),Se!==Lr&&(b.value.top=Se),Ae!==_y&&(b.value.angle=Ae)}),watch(()=>b.value,de=>{d("change",{...de})},{deep:!0}),watch(()=>c.selected,de=>{v.value=de},{immediate:!0}),(de,he)=>(openBlock(),createBlock(resolveDynamicComponent(de.tag),{ref:q,class:normalizeClass(["es-drager",{disabled:de.disabled,dragging:unref($),selected:unref(v),border:de.border}]),style:normalizeStyle(W.value),onClick:he[3]||(he[3]=withModifiers(()=>{},["stop"]))},{default:withCtx(()=>[renderSlot(de.$slots,"default"),E.value?(openBlock(!0),createElementBlock(Fragment$1,{key:0},renderList(C.value,(ge,Se)=>(openBlock(),createElementBlock("div",{key:Se,class:"es-drager-dot","data-side":ge.side,style:normalizeStyle({...ge}),onMousedown:Ae=>re(ge,Ae),onTouchstartPassive:Ae=>re(ge,Ae)},[renderSlot(de.$slots,"resize",normalizeProps(guardReactiveProps({side:ge.side})),()=>[st])],44,ot$1))),128)):createCommentVNode("",!0),N.value?(openBlock(),createBlock(nt$1,{key:1,modelValue:unref(b).angle,"onUpdate:modelValue":he[0]||(he[0]=ge=>unref(b).angle=ge),element:g.value,onRotate:he[1]||(he[1]=ge=>f("rotate",unref(b))),onRotateStart:he[2]||(he[2]=ge=>f("rotate-start",unref(b))),onRotateEnd:Y},{default:withCtx(()=>[renderSlot(de.$slots,"rotate")]),_:3},8,["modelValue","element"])):createCommentVNode("",!0)]),_:3},8,["class","style"]))}}),it$1=s=>{s.component("es-drager",be)};be.install=it$1;var cjs={},base64ToBlob$1={},__awaiter$2=commonjsGlobal&&commonjsGlobal.__awaiter||function(s,l,c,d){function f(g){return g instanceof c?g:new c(function(v){v(g)})}return new(c||(c=Promise))(function(g,v){function b(x){try{y(d.next(x))}catch(C){v(C)}}function $(x){try{y(d.throw(x))}catch(C){v(C)}}function y(x){x.done?g(x.value):f(x.value).then(b,$)}y((d=d.apply(s,l||[])).next())})},__generator$2=commonjsGlobal&&commonjsGlobal.__generator||function(s,l){var c={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,f,g,v;return v={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function b(y){return function(x){return $([y,x])}}function $(y){if(d)throw new TypeError("Generator is already executing.");for(;v&&(v=0,y[0]&&(c=0)),c;)try{if(d=1,f&&(g=y[0]&2?f.return:y[0]?f.throw||((g=f.return)&&g.call(f),0):f.next)&&!(g=g.call(f,y[1])).done)return g;switch(f=0,g&&(y=[y[0]&2,g.value]),y[0]){case 0:case 1:g=y;break;case 4:return c.label++,{value:y[1],done:!1};case 5:c.label++,f=y[1],y=[0];continue;case 7:y=c.ops.pop(),c.trys.pop();continue;default:if(g=c.trys,!(g=g.length>0&&g[g.length-1])&&(y[0]===6||y[0]===2)){c=0;continue}if(y[0]===3&&(!g||y[1]>g[0]&&y[1]<g[3])){c.label=y[1];break}if(y[0]===6&&c.label<g[1]){c.label=g[1],g=y;break}if(g&&c.label<g[2]){c.label=g[2],c.ops.push(y);break}g[2]&&c.ops.pop(),c.trys.pop();continue}y=l.call(s,c)}catch(x){y=[6,x],f=0}finally{d=g=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}};Object.defineProperty(base64ToBlob$1,"__esModule",{value:!0});base64ToBlob$1.base64ToBlob=base64ToBlob;function base64ToBlob(s){return __awaiter$2(this,void 0,void 0,function(){var l,c,d;return __generator$2(this,function(f){switch(f.label){case 0:return[4,fetch(s)];case 1:return l=f.sent(),[4,l.blob()];case 2:return c=f.sent(),d=getMimeType(s),d&&(c=c.slice(0,c.size,d)),[2,c]}})})}var mimeRegex=/^data:(.+);base64,/;function getMimeType(s){var l;return(l=s.match(mimeRegex))===null||l===void 0?void 0:l.slice(1,2).pop()}var base64ToFile$1={},__awaiter$1=commonjsGlobal&&commonjsGlobal.__awaiter||function(s,l,c,d){function f(g){return g instanceof c?g:new c(function(v){v(g)})}return new(c||(c=Promise))(function(g,v){function b(x){try{y(d.next(x))}catch(C){v(C)}}function $(x){try{y(d.throw(x))}catch(C){v(C)}}function y(x){x.done?g(x.value):f(x.value).then(b,$)}y((d=d.apply(s,l||[])).next())})},__generator$1=commonjsGlobal&&commonjsGlobal.__generator||function(s,l){var c={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,f,g,v;return v={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function b(y){return function(x){return $([y,x])}}function $(y){if(d)throw new TypeError("Generator is already executing.");for(;v&&(v=0,y[0]&&(c=0)),c;)try{if(d=1,f&&(g=y[0]&2?f.return:y[0]?f.throw||((g=f.return)&&g.call(f),0):f.next)&&!(g=g.call(f,y[1])).done)return g;switch(f=0,g&&(y=[y[0]&2,g.value]),y[0]){case 0:case 1:g=y;break;case 4:return c.label++,{value:y[1],done:!1};case 5:c.label++,f=y[1],y=[0];continue;case 7:y=c.ops.pop(),c.trys.pop();continue;default:if(g=c.trys,!(g=g.length>0&&g[g.length-1])&&(y[0]===6||y[0]===2)){c=0;continue}if(y[0]===3&&(!g||y[1]>g[0]&&y[1]<g[3])){c.label=y[1];break}if(y[0]===6&&c.label<g[1]){c.label=g[1],g=y;break}if(g&&c.label<g[2]){c.label=g[2],c.ops.push(y);break}g[2]&&c.ops.pop(),c.trys.pop();continue}y=l.call(s,c)}catch(x){y=[6,x],f=0}finally{d=g=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}};Object.defineProperty(base64ToFile$1,"__esModule",{value:!0});base64ToFile$1.base64ToFile=base64ToFile;function base64ToFile(s,l,c){return __awaiter$1(this,void 0,void 0,function(){var d,f;return __generator$1(this,function(g){switch(g.label){case 0:return[4,fetch(s)];case 1:return d=g.sent(),[4,d.blob()];case 2:return f=g.sent(),[2,new File([f],l,c)]}})})}var blobToBase64$1={},__awaiter=commonjsGlobal&&commonjsGlobal.__awaiter||function(s,l,c,d){function f(g){return g instanceof c?g:new c(function(v){v(g)})}return new(c||(c=Promise))(function(g,v){function b(x){try{y(d.next(x))}catch(C){v(C)}}function $(x){try{y(d.throw(x))}catch(C){v(C)}}function y(x){x.done?g(x.value):f(x.value).then(b,$)}y((d=d.apply(s,l||[])).next())})},__generator=commonjsGlobal&&commonjsGlobal.__generator||function(s,l){var c={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},d,f,g,v;return v={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function b(y){return function(x){return $([y,x])}}function $(y){if(d)throw new TypeError("Generator is already executing.");for(;v&&(v=0,y[0]&&(c=0)),c;)try{if(d=1,f&&(g=y[0]&2?f.return:y[0]?f.throw||((g=f.return)&&g.call(f),0):f.next)&&!(g=g.call(f,y[1])).done)return g;switch(f=0,g&&(y=[y[0]&2,g.value]),y[0]){case 0:case 1:g=y;break;case 4:return c.label++,{value:y[1],done:!1};case 5:c.label++,f=y[1],y=[0];continue;case 7:y=c.ops.pop(),c.trys.pop();continue;default:if(g=c.trys,!(g=g.length>0&&g[g.length-1])&&(y[0]===6||y[0]===2)){c=0;continue}if(y[0]===3&&(!g||y[1]>g[0]&&y[1]<g[3])){c.label=y[1];break}if(y[0]===6&&c.label<g[1]){c.label=g[1],g=y;break}if(g&&c.label<g[2]){c.label=g[2],c.ops.push(y);break}g[2]&&c.ops.pop(),c.trys.pop();continue}y=l.call(s,c)}catch(x){y=[6,x],f=0}finally{d=g=0}if(y[0]&5)throw y[1];return{value:y[0]?y[1]:void 0,done:!0}}};Object.defineProperty(blobToBase64$1,"__esModule",{value:!0});blobToBase64$1.blobToBase64=blobToBase64;function blobToBase64(s){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(l){return[2,typeof FileReader=="function"?blobToBase64Browser(s):blobToBase64Node(s)]})})}var Event$1;(function(s){s.error="error",s.loadend="loadend"})(Event$1||(Event$1={}));function blobToBase64Browser(s){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(l){return[2,new Promise(function(c,d){try{var f=new FileReader,g=function(){c(f.result),f.removeEventListener(Event$1.loadend,g)};f.addEventListener(Event$1.loadend,g);var v=function(){d(f.error),f.removeEventListener(Event$1.error,v)};f.addEventListener(Event$1.error,v),f.readAsDataURL(s)}catch(b){d(b)}})]})})}var defaultMimeType="application/octet-stream";function blobToBase64Node(s){return __awaiter(this,void 0,void 0,function(){var l,c,d,f;return __generator(this,function(g){switch(g.label){case 0:return d=(c=Buffer).from,[4,s.text()];case 1:return l=d.apply(c,[g.sent()]),f=s.type||defaultMimeType,[2,"data:".concat(f,";base64,").concat(l.toString("base64"))]}})})}var fileToBase64={};(function(s){Object.defineProperty(s,"__esModule",{value:!0}),s.fileToBase64=void 0;var l=blobToBase64$1;Object.defineProperty(s,"fileToBase64",{enumerable:!0,get:function(){return l.blobToBase64}})})(fileToBase64);(function(s){var l=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(d,f,g,v){v===void 0&&(v=g);var b=Object.getOwnPropertyDescriptor(f,g);(!b||("get"in b?!f.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return f[g]}}),Object.defineProperty(d,v,b)}:function(d,f,g,v){v===void 0&&(v=g),d[v]=f[g]}),c=commonjsGlobal&&commonjsGlobal.__exportStar||function(d,f){for(var g in d)g!=="default"&&!Object.prototype.hasOwnProperty.call(f,g)&&l(f,d,g)};Object.defineProperty(s,"__esModule",{value:!0}),c(base64ToBlob$1,s),c(base64ToFile$1,s),c(blobToBase64$1,s),c(fileToBase64,s)})(cjs);function _defineProperty$1(s,l,c){return(l=_toPropertyKey(l))in s?Object.defineProperty(s,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[l]=c,s}function _toPrimitive(s,l){if(typeof s!="object"||s===null)return s;var c=s[Symbol.toPrimitive];if(c!==void 0){var d=c.call(s,l||"default");if(typeof d!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(s)}function _toPropertyKey(s){var l=_toPrimitive(s,"string");return typeof l=="symbol"?l:String(l)}function _classCallCheck(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function _defineProperties(s,l){for(var c=0;c<l.length;c++){var d=l[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(s,d.key,d)}}function _createClass(s,l,c){return l&&_defineProperties(s.prototype,l),c&&_defineProperties(s,c),s}function _defineProperty(s,l,c){return l in s?Object.defineProperty(s,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[l]=c,s}function ownKeys(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function _objectSpread2(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?ownKeys(Object(c),!0).forEach(function(d){_defineProperty(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):ownKeys(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var defaults$1={addCSS:!0,thumbWidth:15,watch:!0};function matches$1(s,l){return(function(){return Array.from(document.querySelectorAll(l)).includes(this)}).call(s,l)}function trigger(s,l){if(s&&l){var c=new Event(l,{bubbles:!0});s.dispatchEvent(c)}}var getConstructor$1=function(s){return s!=null?s.constructor:null},instanceOf$1=function(s,l){return!!(s&&l&&s instanceof l)},isNullOrUndefined$1=function(s){return s==null},isObject$1=function(s){return getConstructor$1(s)===Object},isNumber$1=function(s){return getConstructor$1(s)===Number&&!Number.isNaN(s)},isString$1=function(s){return getConstructor$1(s)===String},isBoolean$1=function(s){return getConstructor$1(s)===Boolean},isFunction$1=function(s){return getConstructor$1(s)===Function},isArray$1=function(s){return Array.isArray(s)},isNodeList$1=function(s){return instanceOf$1(s,NodeList)},isElement$1=function(s){return instanceOf$1(s,Element)},isEvent$1=function(s){return instanceOf$1(s,Event)},isEmpty$1=function(s){return isNullOrUndefined$1(s)||(isString$1(s)||isArray$1(s)||isNodeList$1(s))&&!s.length||isObject$1(s)&&!Object.keys(s).length},is$1={nullOrUndefined:isNullOrUndefined$1,object:isObject$1,number:isNumber$1,string:isString$1,boolean:isBoolean$1,function:isFunction$1,array:isArray$1,nodeList:isNodeList$1,element:isElement$1,event:isEvent$1,empty:isEmpty$1};function getDecimalPlaces(s){var l="".concat(s).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return l?Math.max(0,(l[1]?l[1].length:0)-(l[2]?+l[2]:0)):0}function round(s,l){if(1>l){var c=getDecimalPlaces(l);return parseFloat(s.toFixed(c))}return Math.round(s/l)*l}var RangeTouch=function(){function s(l,c){_classCallCheck(this,s),is$1.element(l)?this.element=l:is$1.string(l)&&(this.element=document.querySelector(l)),is$1.element(this.element)&&is$1.empty(this.element.rangeTouch)&&(this.config=_objectSpread2({},defaults$1,{},c),this.init())}return _createClass(s,[{key:"init",value:function(){s.enabled&&(this.config.addCSS&&(this.element.style.userSelect="none",this.element.style.webKitUserSelect="none",this.element.style.touchAction="manipulation"),this.listeners(!0),this.element.rangeTouch=this)}},{key:"destroy",value:function(){s.enabled&&(this.config.addCSS&&(this.element.style.userSelect="",this.element.style.webKitUserSelect="",this.element.style.touchAction=""),this.listeners(!1),this.element.rangeTouch=null)}},{key:"listeners",value:function(l){var c=this,d=l?"addEventListener":"removeEventListener";["touchstart","touchmove","touchend"].forEach(function(f){c.element[d](f,function(g){return c.set(g)},!1)})}},{key:"get",value:function(l){if(!s.enabled||!is$1.event(l))return null;var c,d=l.target,f=l.changedTouches[0],g=parseFloat(d.getAttribute("min"))||0,v=parseFloat(d.getAttribute("max"))||100,b=parseFloat(d.getAttribute("step"))||1,$=d.getBoundingClientRect(),y=100/$.width*(this.config.thumbWidth/2)/100;return 0>(c=100/$.width*(f.clientX-$.left))?c=0:100<c&&(c=100),50>c?c-=(100-2*c)*y:50<c&&(c+=2*(c-50)*y),g+round(c/100*(v-g),b)}},{key:"set",value:function(l){s.enabled&&is$1.event(l)&&!l.target.disabled&&(l.preventDefault(),l.target.value=this.get(l),trigger(l.target,l.type==="touchend"?"change":"input"))}}],[{key:"setup",value:function(l){var c=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{},d=null;if(is$1.empty(l)||is$1.string(l)?d=Array.from(document.querySelectorAll(is$1.string(l)?l:'input[type="range"]')):is$1.element(l)?d=[l]:is$1.nodeList(l)?d=Array.from(l):is$1.array(l)&&(d=l.filter(is$1.element)),is$1.empty(d))return null;var f=_objectSpread2({},defaults$1,{},c);if(is$1.string(l)&&f.watch){var g=new MutationObserver(function(v){Array.from(v).forEach(function(b){Array.from(b.addedNodes).forEach(function($){is$1.element($)&&matches$1($,l)&&new s($,f)})})});g.observe(document.body,{childList:!0,subtree:!0})}return d.map(function(v){return new s(v,c)})}},{key:"enabled",get:function(){return"ontouchstart"in document.documentElement}}]),s}();const getConstructor=s=>s!=null?s.constructor:null,instanceOf=(s,l)=>!!(s&&l&&s instanceof l),isNullOrUndefined=s=>s==null,isObject=s=>getConstructor(s)===Object,isNumber=s=>getConstructor(s)===Number&&!Number.isNaN(s),isString=s=>getConstructor(s)===String,isBoolean=s=>getConstructor(s)===Boolean,isFunction=s=>typeof s=="function",isArray=s=>Array.isArray(s),isWeakMap=s=>instanceOf(s,WeakMap),isNodeList=s=>instanceOf(s,NodeList),isTextNode=s=>getConstructor(s)===Text,isEvent=s=>instanceOf(s,Event),isKeyboardEvent=s=>instanceOf(s,KeyboardEvent),isCue=s=>instanceOf(s,window.TextTrackCue)||instanceOf(s,window.VTTCue),isTrack=s=>instanceOf(s,TextTrack)||!isNullOrUndefined(s)&&isString(s.kind),isPromise=s=>instanceOf(s,Promise)&&isFunction(s.then),isElement=s=>s!==null&&typeof s=="object"&&s.nodeType===1&&typeof s.style=="object"&&typeof s.ownerDocument=="object",isEmpty$2=s=>isNullOrUndefined(s)||(isString(s)||isArray(s)||isNodeList(s))&&!s.length||isObject(s)&&!Object.keys(s).length,isUrl=s=>{if(instanceOf(s,window.URL))return!0;if(!isString(s))return!1;let l=s;s.startsWith("http://")&&s.startsWith("https://")||(l=`http://${s}`);try{return!isEmpty$2(new URL(l).hostname)}catch{return!1}};var is$2={nullOrUndefined:isNullOrUndefined,object:isObject,number:isNumber,string:isString,boolean:isBoolean,function:isFunction,array:isArray,weakMap:isWeakMap,nodeList:isNodeList,element:isElement,textNode:isTextNode,event:isEvent,keyboardEvent:isKeyboardEvent,cue:isCue,track:isTrack,promise:isPromise,url:isUrl,empty:isEmpty$2};const transitionEndEvent=(()=>{const s=document.createElement("span"),l={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c=Object.keys(l).find(d=>s.style[d]!==void 0);return!!is$2.string(c)&&l[c]})();function repaint(s,l){setTimeout(()=>{try{s.hidden=!0,s.offsetHeight,s.hidden=!1}catch{}},l)}const isIE=!!window.document.documentMode,isEdge=/Edge/g.test(navigator.userAgent),isWebKit="WebkitAppearance"in document.documentElement.style&&!/Edge/g.test(navigator.userAgent),isIPhone=/iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1,isIPadOS=navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1,isIos=/iPad|iPhone|iPod/gi.test(navigator.userAgent)&&navigator.maxTouchPoints>1;var browser={isIE,isEdge,isWebKit,isIPhone,isIPadOS,isIos};function cloneDeep(s){return JSON.parse(JSON.stringify(s))}function getDeep(s,l){return l.split(".").reduce((c,d)=>c&&c[d],s)}function extend(s={},...l){if(!l.length)return s;const c=l.shift();return is$2.object(c)?(Object.keys(c).forEach(d=>{is$2.object(c[d])?(Object.keys(s).includes(d)||Object.assign(s,{[d]:{}}),extend(s[d],c[d])):Object.assign(s,{[d]:c[d]})}),extend(s,...l)):s}function wrap(s,l){const c=s.length?s:[s];Array.from(c).reverse().forEach((d,f)=>{const g=f>0?l.cloneNode(!0):l,v=d.parentNode,b=d.nextSibling;g.appendChild(d),b?v.insertBefore(g,b):v.appendChild(g)})}function setAttributes(s,l){is$2.element(s)&&!is$2.empty(l)&&Object.entries(l).filter(([,c])=>!is$2.nullOrUndefined(c)).forEach(([c,d])=>s.setAttribute(c,d))}function createElement(s,l,c){const d=document.createElement(s);return is$2.object(l)&&setAttributes(d,l),is$2.string(c)&&(d.innerText=c),d}function insertAfter(s,l){is$2.element(s)&&is$2.element(l)&&l.parentNode.insertBefore(s,l.nextSibling)}function insertElement(s,l,c,d){is$2.element(l)&&l.appendChild(createElement(s,c,d))}function removeElement(s){is$2.nodeList(s)||is$2.array(s)?Array.from(s).forEach(removeElement):is$2.element(s)&&is$2.element(s.parentNode)&&s.parentNode.removeChild(s)}function emptyElement(s){if(!is$2.element(s))return;let{length:l}=s.childNodes;for(;l>0;)s.removeChild(s.lastChild),l-=1}function replaceElement(s,l){return is$2.element(l)&&is$2.element(l.parentNode)&&is$2.element(s)?(l.parentNode.replaceChild(s,l),s):null}function getAttributesFromSelector(s,l){if(!is$2.string(s)||is$2.empty(s))return{};const c={},d=extend({},l);return s.split(",").forEach(f=>{const g=f.trim(),v=g.replace(".",""),b=g.replace(/[[\]]/g,"").split("="),[$]=b,y=b.length>1?b[1].replace(/["']/g,""):"";switch(g.charAt(0)){case".":is$2.string(d.class)?c.class=`${d.class} ${v}`:c.class=v;break;case"#":c.id=g.replace("#","");break;case"[":c[$]=y}}),extend(d,c)}function toggleHidden(s,l){if(!is$2.element(s))return;let c=l;is$2.boolean(c)||(c=!s.hidden),s.hidden=c}function toggleClass(s,l,c){if(is$2.nodeList(s))return Array.from(s).map(d=>toggleClass(d,l,c));if(is$2.element(s)){let d="toggle";return c!==void 0&&(d=c?"add":"remove"),s.classList[d](l),s.classList.contains(l)}return!1}function hasClass(s,l){return is$2.element(s)&&s.classList.contains(l)}function matches(s,l){const{prototype:c}=Element;return(c.matches||c.webkitMatchesSelector||c.mozMatchesSelector||c.msMatchesSelector||function(){return Array.from(document.querySelectorAll(l)).includes(this)}).call(s,l)}function closest$1(s,l){const{prototype:c}=Element;return(c.closest||function(){let d=this;do{if(matches.matches(d,l))return d;d=d.parentElement||d.parentNode}while(d!==null&&d.nodeType===1);return null}).call(s,l)}function getElements(s){return this.elements.container.querySelectorAll(s)}function getElement(s){return this.elements.container.querySelector(s)}function setFocus(s=null,l=!1){is$2.element(s)&&s.focus({preventScroll:!0,focusVisible:l})}const defaultCodecs={"audio/ogg":"vorbis","audio/wav":"1","video/webm":"vp8, vorbis","video/mp4":"avc1.42E01E, mp4a.40.2","video/ogg":"theora"},support={audio:"canPlayType"in document.createElement("audio"),video:"canPlayType"in document.createElement("video"),check(s,l){const c=support[s]||l!=="html5";return{api:c,ui:c&&support.rangeInput}},pip:!(browser.isIPhone||!is$2.function(createElement("video").webkitSetPresentationMode)&&(!document.pictureInPictureEnabled||createElement("video").disablePictureInPicture)),airplay:is$2.function(window.WebKitPlaybackTargetAvailabilityEvent),playsinline:"playsInline"in document.createElement("video"),mime(s){if(is$2.empty(s))return!1;const[l]=s.split("/");let c=s;if(!this.isHTML5||l!==this.type)return!1;Object.keys(defaultCodecs).includes(c)&&(c+=`; codecs="${defaultCodecs[s]}"`);try{return!!(c&&this.media.canPlayType(c).replace(/no/,""))}catch{return!1}},textTracks:"textTracks"in document.createElement("video"),rangeInput:(()=>{const s=document.createElement("input");return s.type="range",s.type==="range"})(),touch:"ontouchstart"in document.documentElement,transitions:transitionEndEvent!==!1,reducedMotion:"matchMedia"in window&&window.matchMedia("(prefers-reduced-motion)").matches},supportsPassiveListeners=(()=>{let s=!1;try{const l=Object.defineProperty({},"passive",{get:()=>(s=!0,null)});window.addEventListener("test",null,l),window.removeEventListener("test",null,l)}catch{}return s})();function toggleListener(s,l,c,d=!1,f=!0,g=!1){if(!s||!("addEventListener"in s)||is$2.empty(l)||!is$2.function(c))return;const v=l.split(" ");let b=g;supportsPassiveListeners&&(b={passive:f,capture:g}),v.forEach($=>{this&&this.eventListeners&&d&&this.eventListeners.push({element:s,type:$,callback:c,options:b}),s[d?"addEventListener":"removeEventListener"]($,c,b)})}function on$1(s,l="",c,d=!0,f=!1){toggleListener.call(this,s,l,c,!0,d,f)}function off(s,l="",c,d=!0,f=!1){toggleListener.call(this,s,l,c,!1,d,f)}function once(s,l="",c,d=!0,f=!1){const g=(...v)=>{off(s,l,g,d,f),c.apply(this,v)};toggleListener.call(this,s,l,g,!0,d,f)}function triggerEvent(s,l="",c=!1,d={}){if(!is$2.element(s)||is$2.empty(l))return;const f=new CustomEvent(l,{bubbles:c,detail:{...d,plyr:this}});s.dispatchEvent(f)}function unbindListeners(){this&&this.eventListeners&&(this.eventListeners.forEach(s=>{const{element:l,type:c,callback:d,options:f}=s;l.removeEventListener(c,d,f)}),this.eventListeners=[])}function ready(){return new Promise(s=>this.ready?setTimeout(s,0):on$1.call(this,this.elements.container,"ready",s)).then(()=>{})}function silencePromise(s){is$2.promise(s)&&s.then(null,()=>{})}function dedupe(s){return is$2.array(s)?s.filter((l,c)=>s.indexOf(l)===c):s}function closest(s,l){return is$2.array(s)&&s.length?s.reduce((c,d)=>Math.abs(d-l)<Math.abs(c-l)?d:c):null}function supportsCSS(s){return!(!window||!window.CSS)&&window.CSS.supports(s)}const standardRatios=[[1,1],[4,3],[3,4],[5,4],[4,5],[3,2],[2,3],[16,10],[10,16],[16,9],[9,16],[21,9],[9,21],[32,9],[9,32]].reduce((s,[l,c])=>({...s,[l/c]:[l,c]}),{});function validateAspectRatio(s){return is$2.array(s)||is$2.string(s)&&s.includes(":")?(is$2.array(s)?s:s.split(":")).map(Number).every(is$2.number):!1}function reduceAspectRatio(s){if(!is$2.array(s)||!s.every(is$2.number))return null;const[l,c]=s,d=(g,v)=>v===0?g:d(v,g%v),f=d(l,c);return[l/f,c/f]}function getAspectRatio(s){const l=d=>validateAspectRatio(d)?d.split(":").map(Number):null;let c=l(s);if(c===null&&(c=l(this.config.ratio)),c===null&&!is$2.empty(this.embed)&&is$2.array(this.embed.ratio)&&({ratio:c}=this.embed),c===null&&this.isHTML5){const{videoWidth:d,videoHeight:f}=this.media;c=[d,f]}return reduceAspectRatio(c)}function setAspectRatio(s){if(!this.isVideo)return{};const{wrapper:l}=this.elements,c=getAspectRatio.call(this,s);if(!is$2.array(c))return{};const[d,f]=reduceAspectRatio(c),g=100/d*f;if(supportsCSS(`aspect-ratio: ${d}/${f}`)?l.style.aspectRatio=`${d}/${f}`:l.style.paddingBottom=`${g}%`,this.isVimeo&&!this.config.vimeo.premium&&this.supported.ui){const v=100/this.media.offsetWidth*parseInt(window.getComputedStyle(this.media).paddingBottom,10),b=(v-g)/(v/50);this.fullscreen.active?l.style.paddingBottom=null:this.media.style.transform=`translateY(-${b}%)`}else this.isHTML5&&l.classList.add(this.config.classNames.videoFixedRatio);return{padding:g,ratio:c}}function roundAspectRatio(s,l,c=.05){const d=s/l,f=closest(Object.keys(standardRatios),d);return Math.abs(f-d)<=c?standardRatios[f]:[s,l]}function getViewportSize(){return[Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),Math.max(document.documentElement.clientHeight||0,window.innerHeight||0)]}const html5={getSources(){return this.isHTML5?Array.from(this.media.querySelectorAll("source")).filter(s=>{const l=s.getAttribute("type");return!!is$2.empty(l)||support.mime.call(this,l)}):[]},getQualityOptions(){return this.config.quality.forced?this.config.quality.options:html5.getSources.call(this).map(s=>Number(s.getAttribute("size"))).filter(Boolean)},setup(){if(!this.isHTML5)return;const s=this;s.options.speed=s.config.speed.options,is$2.empty(this.config.ratio)||setAspectRatio.call(s),Object.defineProperty(s.media,"quality",{get(){const l=html5.getSources.call(s).find(c=>c.getAttribute("src")===s.source);return l&&Number(l.getAttribute("size"))},set(l){if(s.quality!==l){if(s.config.quality.forced&&is$2.function(s.config.quality.onChange))s.config.quality.onChange(l);else{const c=html5.getSources.call(s).find($=>Number($.getAttribute("size"))===l);if(!c)return;const{currentTime:d,paused:f,preload:g,readyState:v,playbackRate:b}=s.media;s.media.src=c.getAttribute("src"),(g!=="none"||v)&&(s.once("loadedmetadata",()=>{s.speed=b,s.currentTime=d,f||silencePromise(s.play())}),s.media.load())}triggerEvent.call(s,s.media,"qualitychange",!1,{quality:l})}}})},cancelRequests(){this.isHTML5&&(removeElement(html5.getSources.call(this)),this.media.setAttribute("src",this.config.blankVideo),this.media.load(),this.debug.log("Cancelled network requests"))}};function generateId(s){return`${s}-${Math.floor(1e4*Math.random())}`}function format(s,...l){return is$2.empty(s)?s:s.toString().replace(/{(\d+)}/g,(c,d)=>l[d].toString())}function getPercentage(s,l){return s===0||l===0||Number.isNaN(s)||Number.isNaN(l)?0:(s/l*100).toFixed(2)}const replaceAll=(s="",l="",c="")=>s.replace(new RegExp(l.toString().replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1"),"g"),c.toString()),toTitleCase=(s="")=>s.toString().replace(/\w\S*/g,l=>l.charAt(0).toUpperCase()+l.slice(1).toLowerCase());function toPascalCase(s=""){let l=s.toString();return l=replaceAll(l,"-"," "),l=replaceAll(l,"_"," "),l=toTitleCase(l),replaceAll(l," ","")}function toCamelCase(s=""){let l=s.toString();return l=toPascalCase(l),l.charAt(0).toLowerCase()+l.slice(1)}function stripHTML(s){const l=document.createDocumentFragment(),c=document.createElement("div");return l.appendChild(c),c.innerHTML=s,l.firstChild.innerText}function getHTML(s){const l=document.createElement("div");return l.appendChild(s),l.innerHTML}const resources={pip:"PIP",airplay:"AirPlay",html5:"HTML5",vimeo:"Vimeo",youtube:"YouTube"},i18n={get(s="",l={}){if(is$2.empty(s)||is$2.empty(l))return"";let c=getDeep(l.i18n,s);if(is$2.empty(c))return Object.keys(resources).includes(s)?resources[s]:"";const d={"{seektime}":l.seekTime,"{title}":l.title};return Object.entries(d).forEach(([f,g])=>{c=replaceAll(c,f,g)}),c}};class Storage{constructor(l){_defineProperty$1(this,"get",c=>{if(!Storage.supported||!this.enabled)return null;const d=window.localStorage.getItem(this.key);if(is$2.empty(d))return null;const f=JSON.parse(d);return is$2.string(c)&&c.length?f[c]:f}),_defineProperty$1(this,"set",c=>{if(!Storage.supported||!this.enabled||!is$2.object(c))return;let d=this.get();is$2.empty(d)&&(d={}),extend(d,c);try{window.localStorage.setItem(this.key,JSON.stringify(d))}catch{}}),this.enabled=l.config.storage.enabled,this.key=l.config.storage.key}static get supported(){try{if(!("localStorage"in window))return!1;const l="___test";return window.localStorage.setItem(l,l),window.localStorage.removeItem(l),!0}catch{return!1}}}function fetch$1(s,l="text"){return new Promise((c,d)=>{try{const f=new XMLHttpRequest;if(!("withCredentials"in f))return;f.addEventListener("load",()=>{if(l==="text")try{c(JSON.parse(f.responseText))}catch{c(f.responseText)}else c(f.response)}),f.addEventListener("error",()=>{throw new Error(f.status)}),f.open("GET",s,!0),f.responseType=l,f.send()}catch(f){d(f)}})}function loadSprite(s,l){if(!is$2.string(s))return;const c="cache",d=is$2.string(l);let f=!1;const g=()=>document.getElementById(l)!==null,v=(b,$)=>{b.innerHTML=$,d&&g()||document.body.insertAdjacentElement("afterbegin",b)};if(!d||!g()){const b=Storage.supported,$=document.createElement("div");if($.setAttribute("hidden",""),d&&$.setAttribute("id",l),b){const y=window.localStorage.getItem(`${c}-${l}`);if(f=y!==null,f){const x=JSON.parse(y);v($,x.content)}}fetch$1(s).then(y=>{if(!is$2.empty(y)){if(b)try{window.localStorage.setItem(`${c}-${l}`,JSON.stringify({content:y}))}catch{}v($,y)}}).catch(()=>{})}}const getHours=s=>Math.trunc(s/60/60%60,10),getMinutes=s=>Math.trunc(s/60%60,10),getSeconds=s=>Math.trunc(s%60,10);function formatTime(s=0,l=!1,c=!1){if(!is$2.number(s))return formatTime(void 0,l,c);const d=b=>`0${b}`.slice(-2);let f=getHours(s);const g=getMinutes(s),v=getSeconds(s);return f=l||f>0?`${f}:`:"",`${c&&s>0?"-":""}${f}${d(g)}:${d(v)}`}const controls={getIconUrl(){const s=new URL(this.config.iconUrl,window.location),l=window.location.host?window.location.host:window.top.location.host,c=s.host!==l||browser.isIE&&!window.svg4everybody;return{url:this.config.iconUrl,cors:c}},findElements(){try{return this.elements.controls=getElement.call(this,this.config.selectors.controls.wrapper),this.elements.buttons={play:getElements.call(this,this.config.selectors.buttons.play),pause:getElement.call(this,this.config.selectors.buttons.pause),restart:getElement.call(this,this.config.selectors.buttons.restart),rewind:getElement.call(this,this.config.selectors.buttons.rewind),fastForward:getElement.call(this,this.config.selectors.buttons.fastForward),mute:getElement.call(this,this.config.selectors.buttons.mute),pip:getElement.call(this,this.config.selectors.buttons.pip),airplay:getElement.call(this,this.config.selectors.buttons.airplay),settings:getElement.call(this,this.config.selectors.buttons.settings),captions:getElement.call(this,this.config.selectors.buttons.captions),fullscreen:getElement.call(this,this.config.selectors.buttons.fullscreen)},this.elements.progress=getElement.call(this,this.config.selectors.progress),this.elements.inputs={seek:getElement.call(this,this.config.selectors.inputs.seek),volume:getElement.call(this,this.config.selectors.inputs.volume)},this.elements.display={buffer:getElement.call(this,this.config.selectors.display.buffer),currentTime:getElement.call(this,this.config.selectors.display.currentTime),duration:getElement.call(this,this.config.selectors.display.duration)},is$2.element(this.elements.progress)&&(this.elements.display.seekTooltip=this.elements.progress.querySelector(`.${this.config.classNames.tooltip}`)),!0}catch(s){return this.debug.warn("It looks like there is a problem with your custom controls HTML",s),this.toggleNativeControls(!0),!1}},createIcon(s,l){const c="http://www.w3.org/2000/svg",d=controls.getIconUrl.call(this),f=`${d.cors?"":d.url}#${this.config.iconPrefix}`,g=document.createElementNS(c,"svg");setAttributes(g,extend(l,{"aria-hidden":"true",focusable:"false"}));const v=document.createElementNS(c,"use"),b=`${f}-${s}`;return"href"in v&&v.setAttributeNS("http://www.w3.org/1999/xlink","href",b),v.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b),g.appendChild(v),g},createLabel(s,l={}){const c=i18n.get(s,this.config);return createElement("span",{...l,class:[l.class,this.config.classNames.hidden].filter(Boolean).join(" ")},c)},createBadge(s){if(is$2.empty(s))return null;const l=createElement("span",{class:this.config.classNames.menu.value});return l.appendChild(createElement("span",{class:this.config.classNames.menu.badge},s)),l},createButton(s,l){const c=extend({},l);let d=toCamelCase(s);const f={element:"button",toggle:!1,label:null,icon:null,labelPressed:null,iconPressed:null};switch(["element","icon","label"].forEach(v=>{Object.keys(c).includes(v)&&(f[v]=c[v],delete c[v])}),f.element!=="button"||Object.keys(c).includes("type")||(c.type="button"),Object.keys(c).includes("class")?c.class.split(" ").some(v=>v===this.config.classNames.control)||extend(c,{class:`${c.class} ${this.config.classNames.control}`}):c.class=this.config.classNames.control,s){case"play":f.toggle=!0,f.label="play",f.labelPressed="pause",f.icon="play",f.iconPressed="pause";break;case"mute":f.toggle=!0,f.label="mute",f.labelPressed="unmute",f.icon="volume",f.iconPressed="muted";break;case"captions":f.toggle=!0,f.label="enableCaptions",f.labelPressed="disableCaptions",f.icon="captions-off",f.iconPressed="captions-on";break;case"fullscreen":f.toggle=!0,f.label="enterFullscreen",f.labelPressed="exitFullscreen",f.icon="enter-fullscreen",f.iconPressed="exit-fullscreen";break;case"play-large":c.class+=` ${this.config.classNames.control}--overlaid`,d="play",f.label="play",f.icon="play";break;default:is$2.empty(f.label)&&(f.label=d),is$2.empty(f.icon)&&(f.icon=s)}const g=createElement(f.element);return f.toggle?(g.appendChild(controls.createIcon.call(this,f.iconPressed,{class:"icon--pressed"})),g.appendChild(controls.createIcon.call(this,f.icon,{class:"icon--not-pressed"})),g.appendChild(controls.createLabel.call(this,f.labelPressed,{class:"label--pressed"})),g.appendChild(controls.createLabel.call(this,f.label,{class:"label--not-pressed"}))):(g.appendChild(controls.createIcon.call(this,f.icon)),g.appendChild(controls.createLabel.call(this,f.label))),extend(c,getAttributesFromSelector(this.config.selectors.buttons[d],c)),setAttributes(g,c),d==="play"?(is$2.array(this.elements.buttons[d])||(this.elements.buttons[d]=[]),this.elements.buttons[d].push(g)):this.elements.buttons[d]=g,g},createRange(s,l){const c=createElement("input",extend(getAttributesFromSelector(this.config.selectors.inputs[s]),{type:"range",min:0,max:100,step:.01,value:0,autocomplete:"off",role:"slider","aria-label":i18n.get(s,this.config),"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":0},l));return this.elements.inputs[s]=c,controls.updateRangeFill.call(this,c),RangeTouch.setup(c),c},createProgress(s,l){const c=createElement("progress",extend(getAttributesFromSelector(this.config.selectors.display[s]),{min:0,max:100,value:0,role:"progressbar","aria-hidden":!0},l));if(s!=="volume"){c.appendChild(createElement("span",null,"0"));const d={played:"played",buffer:"buffered"}[s],f=d?i18n.get(d,this.config):"";c.innerText=`% ${f.toLowerCase()}`}return this.elements.display[s]=c,c},createTime(s,l){const c=getAttributesFromSelector(this.config.selectors.display[s],l),d=createElement("div",extend(c,{class:`${c.class?c.class:""} ${this.config.classNames.display.time} `.trim(),"aria-label":i18n.get(s,this.config),role:"timer"}),"00:00");return this.elements.display[s]=d,d},bindMenuItemShortcuts(s,l){on$1.call(this,s,"keydown keyup",c=>{if(![" ","ArrowUp","ArrowDown","ArrowRight"].includes(c.key)||(c.preventDefault(),c.stopPropagation(),c.type==="keydown"))return;const d=matches(s,'[role="menuitemradio"]');if(!d&&[" ","ArrowRight"].includes(c.key))controls.showMenuPanel.call(this,l,!0);else{let f;c.key!==" "&&(c.key==="ArrowDown"||d&&c.key==="ArrowRight"?(f=s.nextElementSibling,is$2.element(f)||(f=s.parentNode.firstElementChild)):(f=s.previousElementSibling,is$2.element(f)||(f=s.parentNode.lastElementChild)),setFocus.call(this,f,!0))}},!1),on$1.call(this,s,"keyup",c=>{c.key==="Return"&&controls.focusFirstMenuItem.call(this,null,!0)})},createMenuItem({value:s,list:l,type:c,title:d,badge:f=null,checked:g=!1}){const v=getAttributesFromSelector(this.config.selectors.inputs[c]),b=createElement("button",extend(v,{type:"button",role:"menuitemradio",class:`${this.config.classNames.control} ${v.class?v.class:""}`.trim(),"aria-checked":g,value:s})),$=createElement("span");$.innerHTML=d,is$2.element(f)&&$.appendChild(f),b.appendChild($),Object.defineProperty(b,"checked",{enumerable:!0,get:()=>b.getAttribute("aria-checked")==="true",set(y){y&&Array.from(b.parentNode.children).filter(x=>matches(x,'[role="menuitemradio"]')).forEach(x=>x.setAttribute("aria-checked","false")),b.setAttribute("aria-checked",y?"true":"false")}}),this.listeners.bind(b,"click keyup",y=>{if(!is$2.keyboardEvent(y)||y.key===" "){switch(y.preventDefault(),y.stopPropagation(),b.checked=!0,c){case"language":this.currentTrack=Number(s);break;case"quality":this.quality=s;break;case"speed":this.speed=parseFloat(s)}controls.showMenuPanel.call(this,"home",is$2.keyboardEvent(y))}},c,!1),controls.bindMenuItemShortcuts.call(this,b,c),l.appendChild(b)},formatTime(s=0,l=!1){return is$2.number(s)?formatTime(s,getHours(this.duration)>0,l):s},updateTimeDisplay(s=null,l=0,c=!1){is$2.element(s)&&is$2.number(l)&&(s.innerText=controls.formatTime(l,c))},updateVolume(){this.supported.ui&&(is$2.element(this.elements.inputs.volume)&&controls.setRange.call(this,this.elements.inputs.volume,this.muted?0:this.volume),is$2.element(this.elements.buttons.mute)&&(this.elements.buttons.mute.pressed=this.muted||this.volume===0))},setRange(s,l=0){is$2.element(s)&&(s.value=l,controls.updateRangeFill.call(this,s))},updateProgress(s){if(!this.supported.ui||!is$2.event(s))return;let l=0;const c=(d,f)=>{const g=is$2.number(f)?f:0,v=is$2.element(d)?d:this.elements.display.buffer;if(is$2.element(v)){v.value=g;const b=v.getElementsByTagName("span")[0];is$2.element(b)&&(b.childNodes[0].nodeValue=g)}};if(s)switch(s.type){case"timeupdate":case"seeking":case"seeked":l=getPercentage(this.currentTime,this.duration),s.type==="timeupdate"&&controls.setRange.call(this,this.elements.inputs.seek,l);break;case"playing":case"progress":c(this.elements.display.buffer,100*this.buffered)}},updateRangeFill(s){const l=is$2.event(s)?s.target:s;if(is$2.element(l)&&l.getAttribute("type")==="range"){if(matches(l,this.config.selectors.inputs.seek)){l.setAttribute("aria-valuenow",this.currentTime);const c=controls.formatTime(this.currentTime),d=controls.formatTime(this.duration),f=i18n.get("seekLabel",this.config);l.setAttribute("aria-valuetext",f.replace("{currentTime}",c).replace("{duration}",d))}else if(matches(l,this.config.selectors.inputs.volume)){const c=100*l.value;l.setAttribute("aria-valuenow",c),l.setAttribute("aria-valuetext",`${c.toFixed(1)}%`)}else l.setAttribute("aria-valuenow",l.value);(browser.isWebKit||browser.isIPadOS)&&l.style.setProperty("--value",l.value/l.max*100+"%")}},updateSeekTooltip(s){var l,c;if(!this.config.tooltips.seek||!is$2.element(this.elements.inputs.seek)||!is$2.element(this.elements.display.seekTooltip)||this.duration===0)return;const d=this.elements.display.seekTooltip,f=`${this.config.classNames.tooltip}--visible`,g=x=>toggleClass(d,f,x);if(this.touch)return void g(!1);let v=0;const b=this.elements.progress.getBoundingClientRect();if(is$2.event(s))v=100/b.width*(s.pageX-b.left);else{if(!hasClass(d,f))return;v=parseFloat(d.style.left,10)}v<0?v=0:v>100&&(v=100);const $=this.duration/100*v;d.innerText=controls.formatTime($);const y=(l=this.config.markers)===null||l===void 0||(c=l.points)===null||c===void 0?void 0:c.find(({time:x})=>x===Math.round($));y&&d.insertAdjacentHTML("afterbegin",`${y.label}<br>`),d.style.left=`${v}%`,is$2.event(s)&&["mouseenter","mouseleave"].includes(s.type)&&g(s.type==="mouseenter")},timeUpdate(s){const l=!is$2.element(this.elements.display.duration)&&this.config.invertTime;controls.updateTimeDisplay.call(this,this.elements.display.currentTime,l?this.duration-this.currentTime:this.currentTime,l),s&&s.type==="timeupdate"&&this.media.seeking||controls.updateProgress.call(this,s)},durationUpdate(){if(!this.supported.ui||!this.config.invertTime&&this.currentTime)return;if(this.duration>=2**32)return toggleHidden(this.elements.display.currentTime,!0),void toggleHidden(this.elements.progress,!0);is$2.element(this.elements.inputs.seek)&&this.elements.inputs.seek.setAttribute("aria-valuemax",this.duration);const s=is$2.element(this.elements.display.duration);!s&&this.config.displayDuration&&this.paused&&controls.updateTimeDisplay.call(this,this.elements.display.currentTime,this.duration),s&&controls.updateTimeDisplay.call(this,this.elements.display.duration,this.duration),this.config.markers.enabled&&controls.setMarkers.call(this),controls.updateSeekTooltip.call(this)},toggleMenuButton(s,l){toggleHidden(this.elements.settings.buttons[s],!l)},updateSetting(s,l,c){const d=this.elements.settings.panels[s];let f=null,g=l;if(s==="captions")f=this.currentTrack;else{if(f=is$2.empty(c)?this[s]:c,is$2.empty(f)&&(f=this.config[s].default),!is$2.empty(this.options[s])&&!this.options[s].includes(f))return void this.debug.warn(`Unsupported value of '${f}' for ${s}`);if(!this.config[s].options.includes(f))return void this.debug.warn(`Disabled value of '${f}' for ${s}`)}if(is$2.element(g)||(g=d&&d.querySelector('[role="menu"]')),!is$2.element(g))return;this.elements.settings.buttons[s].querySelector(`.${this.config.classNames.menu.value}`).innerHTML=controls.getLabel.call(this,s,f);const v=g&&g.querySelector(`[value="${f}"]`);is$2.element(v)&&(v.checked=!0)},getLabel(s,l){switch(s){case"speed":return l===1?i18n.get("normal",this.config):`${l}&times;`;case"quality":if(is$2.number(l)){const c=i18n.get(`qualityLabel.${l}`,this.config);return c.length?c:`${l}p`}return toTitleCase(l);case"captions":return captions.getLabel.call(this);default:return null}},setQualityMenu(s){if(!is$2.element(this.elements.settings.panels.quality))return;const l="quality",c=this.elements.settings.panels.quality.querySelector('[role="menu"]');is$2.array(s)&&(this.options.quality=dedupe(s).filter(g=>this.config.quality.options.includes(g)));const d=!is$2.empty(this.options.quality)&&this.options.quality.length>1;if(controls.toggleMenuButton.call(this,l,d),emptyElement(c),controls.checkMenu.call(this),!d)return;const f=g=>{const v=i18n.get(`qualityBadge.${g}`,this.config);return v.length?controls.createBadge.call(this,v):null};this.options.quality.sort((g,v)=>{const b=this.config.quality.options;return b.indexOf(g)>b.indexOf(v)?1:-1}).forEach(g=>{controls.createMenuItem.call(this,{value:g,list:c,type:l,title:controls.getLabel.call(this,"quality",g),badge:f(g)})}),controls.updateSetting.call(this,l,c)},setCaptionsMenu(){if(!is$2.element(this.elements.settings.panels.captions))return;const s="captions",l=this.elements.settings.panels.captions.querySelector('[role="menu"]'),c=captions.getTracks.call(this),d=!!c.length;if(controls.toggleMenuButton.call(this,s,d),emptyElement(l),controls.checkMenu.call(this),!d)return;const f=c.map((g,v)=>({value:v,checked:this.captions.toggled&&this.currentTrack===v,title:captions.getLabel.call(this,g),badge:g.language&&controls.createBadge.call(this,g.language.toUpperCase()),list:l,type:"language"}));f.unshift({value:-1,checked:!this.captions.toggled,title:i18n.get("disabled",this.config),list:l,type:"language"}),f.forEach(controls.createMenuItem.bind(this)),controls.updateSetting.call(this,s,l)},setSpeedMenu(){if(!is$2.element(this.elements.settings.panels.speed))return;const s="speed",l=this.elements.settings.panels.speed.querySelector('[role="menu"]');this.options.speed=this.options.speed.filter(d=>d>=this.minimumSpeed&&d<=this.maximumSpeed);const c=!is$2.empty(this.options.speed)&&this.options.speed.length>1;controls.toggleMenuButton.call(this,s,c),emptyElement(l),controls.checkMenu.call(this),c&&(this.options.speed.forEach(d=>{controls.createMenuItem.call(this,{value:d,list:l,type:s,title:controls.getLabel.call(this,"speed",d)})}),controls.updateSetting.call(this,s,l))},checkMenu(){const{buttons:s}=this.elements.settings,l=!is$2.empty(s)&&Object.values(s).some(c=>!c.hidden);toggleHidden(this.elements.settings.menu,!l)},focusFirstMenuItem(s,l=!1){if(this.elements.settings.popup.hidden)return;let c=s;is$2.element(c)||(c=Object.values(this.elements.settings.panels).find(f=>!f.hidden));const d=c.querySelector('[role^="menuitem"]');setFocus.call(this,d,l)},toggleMenu(s){const{popup:l}=this.elements.settings,c=this.elements.buttons.settings;if(!is$2.element(l)||!is$2.element(c))return;const{hidden:d}=l;let f=d;if(is$2.boolean(s))f=s;else if(is$2.keyboardEvent(s)&&s.key==="Escape")f=!1;else if(is$2.event(s)){const g=is$2.function(s.composedPath)?s.composedPath()[0]:s.target,v=l.contains(g);if(v||!v&&s.target!==c&&f)return}c.setAttribute("aria-expanded",f),toggleHidden(l,!f),toggleClass(this.elements.container,this.config.classNames.menu.open,f),f&&is$2.keyboardEvent(s)?controls.focusFirstMenuItem.call(this,null,!0):f||d||setFocus.call(this,c,is$2.keyboardEvent(s))},getMenuSize(s){const l=s.cloneNode(!0);l.style.position="absolute",l.style.opacity=0,l.removeAttribute("hidden"),s.parentNode.appendChild(l);const c=l.scrollWidth,d=l.scrollHeight;return removeElement(l),{width:c,height:d}},showMenuPanel(s="",l=!1){const c=this.elements.container.querySelector(`#plyr-settings-${this.id}-${s}`);if(!is$2.element(c))return;const d=c.parentNode,f=Array.from(d.children).find(g=>!g.hidden);if(support.transitions&&!support.reducedMotion){d.style.width=`${f.scrollWidth}px`,d.style.height=`${f.scrollHeight}px`;const g=controls.getMenuSize.call(this,c),v=b=>{b.target===d&&["width","height"].includes(b.propertyName)&&(d.style.width="",d.style.height="",off.call(this,d,transitionEndEvent,v))};on$1.call(this,d,transitionEndEvent,v),d.style.width=`${g.width}px`,d.style.height=`${g.height}px`}toggleHidden(f,!0),toggleHidden(c,!1),controls.focusFirstMenuItem.call(this,c,l)},setDownloadUrl(){const s=this.elements.buttons.download;is$2.element(s)&&s.setAttribute("href",this.download)},create(s){const{bindMenuItemShortcuts:l,createButton:c,createProgress:d,createRange:f,createTime:g,setQualityMenu:v,setSpeedMenu:b,showMenuPanel:$}=controls;this.elements.controls=null,is$2.array(this.config.controls)&&this.config.controls.includes("play-large")&&this.elements.container.appendChild(c.call(this,"play-large"));const y=createElement("div",getAttributesFromSelector(this.config.selectors.controls.wrapper));this.elements.controls=y;const x={class:"plyr__controls__item"};return dedupe(is$2.array(this.config.controls)?this.config.controls:[]).forEach(C=>{if(C==="restart"&&y.appendChild(c.call(this,"restart",x)),C==="rewind"&&y.appendChild(c.call(this,"rewind",x)),C==="play"&&y.appendChild(c.call(this,"play",x)),C==="fast-forward"&&y.appendChild(c.call(this,"fast-forward",x)),C==="progress"){const E=createElement("div",{class:`${x.class} plyr__progress__container`}),N=createElement("div",getAttributesFromSelector(this.config.selectors.progress));if(N.appendChild(f.call(this,"seek",{id:`plyr-seek-${s.id}`})),N.appendChild(d.call(this,"buffer")),this.config.tooltips.seek){const W=createElement("span",{class:this.config.classNames.tooltip},"00:00");N.appendChild(W),this.elements.display.seekTooltip=W}this.elements.progress=N,E.appendChild(this.elements.progress),y.appendChild(E)}if(C==="current-time"&&y.appendChild(g.call(this,"currentTime",x)),C==="duration"&&y.appendChild(g.call(this,"duration",x)),C==="mute"||C==="volume"){let{volume:E}=this.elements;if(is$2.element(E)&&y.contains(E)||(E=createElement("div",extend({},x,{class:`${x.class} plyr__volume`.trim()})),this.elements.volume=E,y.appendChild(E)),C==="mute"&&E.appendChild(c.call(this,"mute")),C==="volume"&&!browser.isIos&&!browser.isIPadOS){const N={max:1,step:.05,value:this.config.volume};E.appendChild(f.call(this,"volume",extend(N,{id:`plyr-volume-${s.id}`})))}}if(C==="captions"&&y.appendChild(c.call(this,"captions",x)),C==="settings"&&!is$2.empty(this.config.settings)){const E=createElement("div",extend({},x,{class:`${x.class} plyr__menu`.trim(),hidden:""}));E.appendChild(c.call(this,"settings",{"aria-haspopup":!0,"aria-controls":`plyr-settings-${s.id}`,"aria-expanded":!1}));const N=createElement("div",{class:"plyr__menu__container",id:`plyr-settings-${s.id}`,hidden:""}),W=createElement("div"),q=createElement("div",{id:`plyr-settings-${s.id}-home`}),Y=createElement("div",{role:"menu"});q.appendChild(Y),W.appendChild(q),this.elements.settings.panels.home=q,this.config.settings.forEach(re=>{const se=createElement("button",extend(getAttributesFromSelector(this.config.selectors.buttons.settings),{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--forward`,role:"menuitem","aria-haspopup":!0,hidden:""}));l.call(this,se,re),on$1.call(this,se,"click",()=>{$.call(this,re,!1)});const de=createElement("span",null,i18n.get(re,this.config)),he=createElement("span",{class:this.config.classNames.menu.value});he.innerHTML=s[re],de.appendChild(he),se.appendChild(de),Y.appendChild(se);const ge=createElement("div",{id:`plyr-settings-${s.id}-${re}`,hidden:""}),Se=createElement("button",{type:"button",class:`${this.config.classNames.control} ${this.config.classNames.control}--back`});Se.appendChild(createElement("span",{"aria-hidden":!0},i18n.get(re,this.config))),Se.appendChild(createElement("span",{class:this.config.classNames.hidden},i18n.get("menuBack",this.config))),on$1.call(this,ge,"keydown",Ae=>{Ae.key==="ArrowLeft"&&(Ae.preventDefault(),Ae.stopPropagation(),$.call(this,"home",!0))},!1),on$1.call(this,Se,"click",()=>{$.call(this,"home",!1)}),ge.appendChild(Se),ge.appendChild(createElement("div",{role:"menu"})),W.appendChild(ge),this.elements.settings.buttons[re]=se,this.elements.settings.panels[re]=ge}),N.appendChild(W),E.appendChild(N),y.appendChild(E),this.elements.settings.popup=N,this.elements.settings.menu=E}if(C==="pip"&&support.pip&&y.appendChild(c.call(this,"pip",x)),C==="airplay"&&support.airplay&&y.appendChild(c.call(this,"airplay",x)),C==="download"){const E=extend({},x,{element:"a",href:this.download,target:"_blank"});this.isHTML5&&(E.download="");const{download:N}=this.config.urls;!is$2.url(N)&&this.isEmbed&&extend(E,{icon:`logo-${this.provider}`,label:this.provider}),y.appendChild(c.call(this,"download",E))}C==="fullscreen"&&y.appendChild(c.call(this,"fullscreen",x))}),this.isHTML5&&v.call(this,html5.getQualityOptions.call(this)),b.call(this),y},inject(){if(this.config.loadSprite){const f=controls.getIconUrl.call(this);f.cors&&loadSprite(f.url,"sprite-plyr")}this.id=Math.floor(1e4*Math.random());let s=null;this.elements.controls=null;const l={id:this.id,seektime:this.config.seekTime,title:this.config.title};let c=!0;is$2.function(this.config.controls)&&(this.config.controls=this.config.controls.call(this,l)),this.config.controls||(this.config.controls=[]),is$2.element(this.config.controls)||is$2.string(this.config.controls)?s=this.config.controls:(s=controls.create.call(this,{id:this.id,seektime:this.config.seekTime,speed:this.speed,quality:this.quality,captions:captions.getLabel.call(this)}),c=!1);let d;if(c&&is$2.string(this.config.controls)&&(s=(f=>{let g=f;return Object.entries(l).forEach(([v,b])=>{g=replaceAll(g,`{${v}}`,b)}),g})(s)),is$2.string(this.config.selectors.controls.container)&&(d=document.querySelector(this.config.selectors.controls.container)),is$2.element(d)||(d=this.elements.container),d[is$2.element(s)?"insertAdjacentElement":"insertAdjacentHTML"]("afterbegin",s),is$2.element(this.elements.controls)||controls.findElements.call(this),!is$2.empty(this.elements.buttons)){const f=g=>{const v=this.config.classNames.controlPressed;g.setAttribute("aria-pressed","false"),Object.defineProperty(g,"pressed",{configurable:!0,enumerable:!0,get:()=>hasClass(g,v),set(b=!1){toggleClass(g,v,b),g.setAttribute("aria-pressed",b?"true":"false")}})};Object.values(this.elements.buttons).filter(Boolean).forEach(g=>{is$2.array(g)||is$2.nodeList(g)?Array.from(g).filter(Boolean).forEach(f):f(g)})}if(browser.isEdge&&repaint(d),this.config.tooltips.controls){const{classNames:f,selectors:g}=this.config,v=`${g.controls.wrapper} ${g.labels} .${f.hidden}`,b=getElements.call(this,v);Array.from(b).forEach($=>{toggleClass($,this.config.classNames.hidden,!1),toggleClass($,this.config.classNames.tooltip,!0)})}},setMediaMetadata(){try{"mediaSession"in navigator&&(navigator.mediaSession.metadata=new window.MediaMetadata({title:this.config.mediaMetadata.title,artist:this.config.mediaMetadata.artist,album:this.config.mediaMetadata.album,artwork:this.config.mediaMetadata.artwork}))}catch{}},setMarkers(){var s,l;if(!this.duration||this.elements.markers)return;const c=(s=this.config.markers)===null||s===void 0||(l=s.points)===null||l===void 0?void 0:l.filter(({time:$})=>$>0&&$<this.duration);if(c==null||!c.length)return;const d=document.createDocumentFragment(),f=document.createDocumentFragment();let g=null;const v=`${this.config.classNames.tooltip}--visible`,b=$=>toggleClass(g,v,$);c.forEach($=>{const y=createElement("span",{class:this.config.classNames.marker},""),x=$.time/this.duration*100+"%";g&&(y.addEventListener("mouseenter",()=>{$.label||(g.style.left=x,g.innerHTML=$.label,b(!0))}),y.addEventListener("mouseleave",()=>{b(!1)})),y.addEventListener("click",()=>{this.currentTime=$.time}),y.style.left=x,f.appendChild(y)}),d.appendChild(f),this.config.tooltips.seek||(g=createElement("span",{class:this.config.classNames.tooltip},""),d.appendChild(g)),this.elements.markers={points:f,tip:g},this.elements.progress.appendChild(d)}};function parseUrl(s,l=!0){let c=s;if(l){const d=document.createElement("a");d.href=c,c=d.href}try{return new URL(c)}catch{return null}}function buildUrlParams(s){const l=new URLSearchParams;return is$2.object(s)&&Object.entries(s).forEach(([c,d])=>{l.set(c,d)}),l}const captions={setup(){if(!this.supported.ui)return;if(!this.isVideo||this.isYouTube||this.isHTML5&&!support.textTracks)return void(is$2.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&controls.setCaptionsMenu.call(this));if(is$2.element(this.elements.captions)||(this.elements.captions=createElement("div",getAttributesFromSelector(this.config.selectors.captions)),this.elements.captions.setAttribute("dir","auto"),insertAfter(this.elements.captions,this.elements.wrapper)),browser.isIE&&window.URL){const d=this.media.querySelectorAll("track");Array.from(d).forEach(f=>{const g=f.getAttribute("src"),v=parseUrl(g);v!==null&&v.hostname!==window.location.href.hostname&&["http:","https:"].includes(v.protocol)&&fetch$1(g,"blob").then(b=>{f.setAttribute("src",window.URL.createObjectURL(b))}).catch(()=>{removeElement(f)})})}const s=dedupe((navigator.languages||[navigator.language||navigator.userLanguage||"en"]).map(d=>d.split("-")[0]));let l=(this.storage.get("language")||this.config.captions.language||"auto").toLowerCase();l==="auto"&&([l]=s);let c=this.storage.get("captions");if(is$2.boolean(c)||({active:c}=this.config.captions),Object.assign(this.captions,{toggled:!1,active:c,language:l,languages:s}),this.isHTML5){const d=this.config.captions.update?"addtrack removetrack":"removetrack";on$1.call(this,this.media.textTracks,d,captions.update.bind(this))}setTimeout(captions.update.bind(this),0)},update(){const s=captions.getTracks.call(this,!0),{active:l,language:c,meta:d,currentTrackNode:f}=this.captions,g=!!s.find(v=>v.language===c);this.isHTML5&&this.isVideo&&s.filter(v=>!d.get(v)).forEach(v=>{this.debug.log("Track added",v),d.set(v,{default:v.mode==="showing"}),v.mode==="showing"&&(v.mode="hidden"),on$1.call(this,v,"cuechange",()=>captions.updateCues.call(this))}),(g&&this.language!==c||!s.includes(f))&&(captions.setLanguage.call(this,c),captions.toggle.call(this,l&&g)),this.elements&&toggleClass(this.elements.container,this.config.classNames.captions.enabled,!is$2.empty(s)),is$2.array(this.config.controls)&&this.config.controls.includes("settings")&&this.config.settings.includes("captions")&&controls.setCaptionsMenu.call(this)},toggle(s,l=!0){if(!this.supported.ui)return;const{toggled:c}=this.captions,d=this.config.classNames.captions.active,f=is$2.nullOrUndefined(s)?!c:s;if(f!==c){if(l||(this.captions.active=f,this.storage.set({captions:f})),!this.language&&f&&!l){const g=captions.getTracks.call(this),v=captions.findTrack.call(this,[this.captions.language,...this.captions.languages],!0);return this.captions.language=v.language,void captions.set.call(this,g.indexOf(v))}this.elements.buttons.captions&&(this.elements.buttons.captions.pressed=f),toggleClass(this.elements.container,d,f),this.captions.toggled=f,controls.updateSetting.call(this,"captions"),triggerEvent.call(this,this.media,f?"captionsenabled":"captionsdisabled")}setTimeout(()=>{f&&this.captions.toggled&&(this.captions.currentTrackNode.mode="hidden")})},set(s,l=!0){const c=captions.getTracks.call(this);if(s!==-1)if(is$2.number(s))if(s in c){if(this.captions.currentTrack!==s){this.captions.currentTrack=s;const d=c[s],{language:f}=d||{};this.captions.currentTrackNode=d,controls.updateSetting.call(this,"captions"),l||(this.captions.language=f,this.storage.set({language:f})),this.isVimeo&&this.embed.enableTextTrack(f),triggerEvent.call(this,this.media,"languagechange")}captions.toggle.call(this,!0,l),this.isHTML5&&this.isVideo&&captions.updateCues.call(this)}else this.debug.warn("Track not found",s);else this.debug.warn("Invalid caption argument",s);else captions.toggle.call(this,!1,l)},setLanguage(s,l=!0){if(!is$2.string(s))return void this.debug.warn("Invalid language argument",s);const c=s.toLowerCase();this.captions.language=c;const d=captions.getTracks.call(this),f=captions.findTrack.call(this,[c]);captions.set.call(this,d.indexOf(f),l)},getTracks(s=!1){return Array.from((this.media||{}).textTracks||[]).filter(l=>!this.isHTML5||s||this.captions.meta.has(l)).filter(l=>["captions","subtitles"].includes(l.kind))},findTrack(s,l=!1){const c=captions.getTracks.call(this),d=v=>Number((this.captions.meta.get(v)||{}).default),f=Array.from(c).sort((v,b)=>d(b)-d(v));let g;return s.every(v=>(g=f.find(b=>b.language===v),!g)),g||(l?f[0]:void 0)},getCurrentTrack(){return captions.getTracks.call(this)[this.currentTrack]},getLabel(s){let l=s;return!is$2.track(l)&&support.textTracks&&this.captions.toggled&&(l=captions.getCurrentTrack.call(this)),is$2.track(l)?is$2.empty(l.label)?is$2.empty(l.language)?i18n.get("enabled",this.config):s.language.toUpperCase():l.label:i18n.get("disabled",this.config)},updateCues(s){if(!this.supported.ui)return;if(!is$2.element(this.elements.captions))return void this.debug.warn("No captions element to render to");if(!is$2.nullOrUndefined(s)&&!Array.isArray(s))return void this.debug.warn("updateCues: Invalid input",s);let l=s;if(!l){const d=captions.getCurrentTrack.call(this);l=Array.from((d||{}).activeCues||[]).map(f=>f.getCueAsHTML()).map(getHTML)}const c=l.map(d=>d.trim()).join(`
`);if(c!==this.elements.captions.innerHTML){emptyElement(this.elements.captions);const d=createElement("span",getAttributesFromSelector(this.config.selectors.caption));d.innerHTML=c,this.elements.captions.appendChild(d),triggerEvent.call(this,this.media,"cuechange")}}},defaults={enabled:!0,title:"",debug:!1,autoplay:!1,autopause:!0,playsinline:!0,seekTime:10,volume:1,muted:!1,duration:null,displayDuration:!0,invertTime:!0,toggleInvert:!0,ratio:null,clickToPlay:!0,hideControls:!0,resetOnEnd:!1,disableContextMenu:!0,loadSprite:!0,iconPrefix:"plyr",iconUrl:"https://cdn.plyr.io/3.7.8/plyr.svg",blankVideo:"https://cdn.plyr.io/static/blank.mp4",quality:{default:576,options:[4320,2880,2160,1440,1080,720,576,480,360,240],forced:!1,onChange:null},loop:{active:!1},speed:{selected:1,options:[.5,.75,1,1.25,1.5,1.75,2,4]},keyboard:{focused:!0,global:!1},tooltips:{controls:!1,seek:!0},captions:{active:!1,language:"auto",update:!1},fullscreen:{enabled:!0,fallback:!0,iosNative:!1},storage:{enabled:!0,key:"plyr"},controls:["play-large","play","progress","current-time","mute","volume","captions","settings","pip","airplay","fullscreen"],settings:["captions","quality","speed"],i18n:{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled",advertisement:"Ad",qualityBadge:{2160:"4K",1440:"HD",1080:"HD",720:"HD",576:"SD",480:"SD"}},urls:{download:null,vimeo:{sdk:"https://player.vimeo.com/api/player.js",iframe:"https://player.vimeo.com/video/{0}?{1}",api:"https://vimeo.com/api/oembed.json?url={0}"},youtube:{sdk:"https://www.youtube.com/iframe_api",api:"https://noembed.com/embed?url=https://www.youtube.com/watch?v={0}"},googleIMA:{sdk:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}},listeners:{seek:null,play:null,pause:null,restart:null,rewind:null,fastForward:null,mute:null,volume:null,captions:null,download:null,fullscreen:null,pip:null,airplay:null,speed:null,quality:null,loop:null,language:null},events:["ended","progress","stalled","playing","waiting","canplay","canplaythrough","loadstart","loadeddata","loadedmetadata","timeupdate","volumechange","play","pause","error","seeking","seeked","emptied","ratechange","cuechange","download","enterfullscreen","exitfullscreen","captionsenabled","captionsdisabled","languagechange","controlshidden","controlsshown","ready","statechange","qualitychange","adsloaded","adscontentpause","adscontentresume","adstarted","adsmidpoint","adscomplete","adsallcomplete","adsimpression","adsclick"],selectors:{editable:"input, textarea, select, [contenteditable]",container:".plyr",controls:{container:null,wrapper:".plyr__controls"},labels:"[data-plyr]",buttons:{play:'[data-plyr="play"]',pause:'[data-plyr="pause"]',restart:'[data-plyr="restart"]',rewind:'[data-plyr="rewind"]',fastForward:'[data-plyr="fast-forward"]',mute:'[data-plyr="mute"]',captions:'[data-plyr="captions"]',download:'[data-plyr="download"]',fullscreen:'[data-plyr="fullscreen"]',pip:'[data-plyr="pip"]',airplay:'[data-plyr="airplay"]',settings:'[data-plyr="settings"]',loop:'[data-plyr="loop"]'},inputs:{seek:'[data-plyr="seek"]',volume:'[data-plyr="volume"]',speed:'[data-plyr="speed"]',language:'[data-plyr="language"]',quality:'[data-plyr="quality"]'},display:{currentTime:".plyr__time--current",duration:".plyr__time--duration",buffer:".plyr__progress__buffer",loop:".plyr__progress__loop",volume:".plyr__volume--display"},progress:".plyr__progress",captions:".plyr__captions",caption:".plyr__caption"},classNames:{type:"plyr--{0}",provider:"plyr--{0}",video:"plyr__video-wrapper",embed:"plyr__video-embed",videoFixedRatio:"plyr__video-wrapper--fixed-ratio",embedContainer:"plyr__video-embed__container",poster:"plyr__poster",posterEnabled:"plyr__poster-enabled",ads:"plyr__ads",control:"plyr__control",controlPressed:"plyr__control--pressed",playing:"plyr--playing",paused:"plyr--paused",stopped:"plyr--stopped",loading:"plyr--loading",hover:"plyr--hover",tooltip:"plyr__tooltip",cues:"plyr__cues",marker:"plyr__progress__marker",hidden:"plyr__sr-only",hideControls:"plyr--hide-controls",isTouch:"plyr--is-touch",uiSupported:"plyr--full-ui",noTransition:"plyr--no-transition",display:{time:"plyr__time"},menu:{value:"plyr__menu__value",badge:"plyr__badge",open:"plyr--menu-open"},captions:{enabled:"plyr--captions-enabled",active:"plyr--captions-active"},fullscreen:{enabled:"plyr--fullscreen-enabled",fallback:"plyr--fullscreen-fallback"},pip:{supported:"plyr--pip-supported",active:"plyr--pip-active"},airplay:{supported:"plyr--airplay-supported",active:"plyr--airplay-active"},previewThumbnails:{thumbContainer:"plyr__preview-thumb",thumbContainerShown:"plyr__preview-thumb--is-shown",imageContainer:"plyr__preview-thumb__image-container",timeContainer:"plyr__preview-thumb__time-container",scrubbingContainer:"plyr__preview-scrubbing",scrubbingContainerShown:"plyr__preview-scrubbing--is-shown"}},attributes:{embed:{provider:"data-plyr-provider",id:"data-plyr-embed-id",hash:"data-plyr-embed-hash"}},ads:{enabled:!1,publisherId:"",tagUrl:""},previewThumbnails:{enabled:!1,src:""},vimeo:{byline:!1,portrait:!1,title:!1,speed:!0,transparent:!1,customControls:!0,referrerPolicy:null,premium:!1},youtube:{rel:0,showinfo:0,iv_load_policy:3,modestbranding:1,customControls:!0,noCookie:!1},mediaMetadata:{title:"",artist:"",album:"",artwork:[]},markers:{enabled:!1,points:[]}},pip={active:"picture-in-picture",inactive:"inline"},providers={html5:"html5",youtube:"youtube",vimeo:"vimeo"},types={audio:"audio",video:"video"};function getProviderByUrl(s){return/^(https?:\/\/)?(www\.)?(youtube\.com|youtube-nocookie\.com|youtu\.?be)\/.+$/.test(s)?providers.youtube:/^https?:\/\/player.vimeo.com\/video\/\d{0,9}(?=\b|\/)/.test(s)?providers.vimeo:null}const noop=()=>{};class Console{constructor(l=!1){this.enabled=window.console&&l,this.enabled&&this.log("Debugging enabled")}get log(){return this.enabled?Function.prototype.bind.call(console.log,console):noop}get warn(){return this.enabled?Function.prototype.bind.call(console.warn,console):noop}get error(){return this.enabled?Function.prototype.bind.call(console.error,console):noop}}class Fullscreen{constructor(l){_defineProperty$1(this,"onChange",()=>{if(!this.supported)return;const c=this.player.elements.buttons.fullscreen;is$2.element(c)&&(c.pressed=this.active);const d=this.target===this.player.media?this.target:this.player.elements.container;triggerEvent.call(this.player,d,this.active?"enterfullscreen":"exitfullscreen",!0)}),_defineProperty$1(this,"toggleFallback",(c=!1)=>{if(c?this.scrollPosition={x:window.scrollX??0,y:window.scrollY??0}:window.scrollTo(this.scrollPosition.x,this.scrollPosition.y),document.body.style.overflow=c?"hidden":"",toggleClass(this.target,this.player.config.classNames.fullscreen.fallback,c),browser.isIos){let d=document.head.querySelector('meta[name="viewport"]');const f="viewport-fit=cover";d||(d=document.createElement("meta"),d.setAttribute("name","viewport"));const g=is$2.string(d.content)&&d.content.includes(f);c?(this.cleanupViewport=!g,g||(d.content+=`,${f}`)):this.cleanupViewport&&(d.content=d.content.split(",").filter(v=>v.trim()!==f).join(","))}this.onChange()}),_defineProperty$1(this,"trapFocus",c=>{if(browser.isIos||browser.isIPadOS||!this.active||c.key!=="Tab")return;const d=document.activeElement,f=getElements.call(this.player,"a[href], button:not(:disabled), input:not(:disabled), [tabindex]"),[g]=f,v=f[f.length-1];d!==v||c.shiftKey?d===g&&c.shiftKey&&(v.focus(),c.preventDefault()):(g.focus(),c.preventDefault())}),_defineProperty$1(this,"update",()=>{if(this.supported){let c;c=this.forceFallback?"Fallback (forced)":Fullscreen.nativeSupported?"Native":"Fallback",this.player.debug.log(`${c} fullscreen enabled`)}else this.player.debug.log("Fullscreen not supported and fallback disabled");toggleClass(this.player.elements.container,this.player.config.classNames.fullscreen.enabled,this.supported)}),_defineProperty$1(this,"enter",()=>{this.supported&&(browser.isIos&&this.player.config.fullscreen.iosNative?this.player.isVimeo?this.player.embed.requestFullscreen():this.target.webkitEnterFullscreen():!Fullscreen.nativeSupported||this.forceFallback?this.toggleFallback(!0):this.prefix?is$2.empty(this.prefix)||this.target[`${this.prefix}Request${this.property}`]():this.target.requestFullscreen({navigationUI:"hide"}))}),_defineProperty$1(this,"exit",()=>{if(this.supported)if(browser.isIos&&this.player.config.fullscreen.iosNative)this.player.isVimeo?this.player.embed.exitFullscreen():this.target.webkitEnterFullscreen(),silencePromise(this.player.play());else if(!Fullscreen.nativeSupported||this.forceFallback)this.toggleFallback(!1);else if(this.prefix){if(!is$2.empty(this.prefix)){const c=this.prefix==="moz"?"Cancel":"Exit";document[`${this.prefix}${c}${this.property}`]()}}else(document.cancelFullScreen||document.exitFullscreen).call(document)}),_defineProperty$1(this,"toggle",()=>{this.active?this.exit():this.enter()}),this.player=l,this.prefix=Fullscreen.prefix,this.property=Fullscreen.property,this.scrollPosition={x:0,y:0},this.forceFallback=l.config.fullscreen.fallback==="force",this.player.elements.fullscreen=l.config.fullscreen.container&&closest$1(this.player.elements.container,l.config.fullscreen.container),on$1.call(this.player,document,this.prefix==="ms"?"MSFullscreenChange":`${this.prefix}fullscreenchange`,()=>{this.onChange()}),on$1.call(this.player,this.player.elements.container,"dblclick",c=>{is$2.element(this.player.elements.controls)&&this.player.elements.controls.contains(c.target)||this.player.listeners.proxy(c,this.toggle,"fullscreen")}),on$1.call(this,this.player.elements.container,"keydown",c=>this.trapFocus(c)),this.update()}static get nativeSupported(){return!!(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled)}get useNative(){return Fullscreen.nativeSupported&&!this.forceFallback}static get prefix(){if(is$2.function(document.exitFullscreen))return"";let l="";return["webkit","moz","ms"].some(c=>!(!is$2.function(document[`${c}ExitFullscreen`])&&!is$2.function(document[`${c}CancelFullScreen`]))&&(l=c,!0)),l}static get property(){return this.prefix==="moz"?"FullScreen":"Fullscreen"}get supported(){return[this.player.config.fullscreen.enabled,this.player.isVideo,Fullscreen.nativeSupported||this.player.config.fullscreen.fallback,!this.player.isYouTube||Fullscreen.nativeSupported||!browser.isIos||this.player.config.playsinline&&!this.player.config.fullscreen.iosNative].every(Boolean)}get active(){if(!this.supported)return!1;if(!Fullscreen.nativeSupported||this.forceFallback)return hasClass(this.target,this.player.config.classNames.fullscreen.fallback);const l=this.prefix?this.target.getRootNode()[`${this.prefix}${this.property}Element`]:this.target.getRootNode().fullscreenElement;return l&&l.shadowRoot?l===this.target.getRootNode().host:l===this.target}get target(){return browser.isIos&&this.player.config.fullscreen.iosNative?this.player.media:this.player.elements.fullscreen??this.player.elements.container}}function loadImage(s,l=1){return new Promise((c,d)=>{const f=new Image,g=()=>{delete f.onload,delete f.onerror,(f.naturalWidth>=l?c:d)(f)};Object.assign(f,{onload:g,onerror:g,src:s})})}const ui$1={addStyleHook(){toggleClass(this.elements.container,this.config.selectors.container.replace(".",""),!0),toggleClass(this.elements.container,this.config.classNames.uiSupported,this.supported.ui)},toggleNativeControls(s=!1){s&&this.isHTML5?this.media.setAttribute("controls",""):this.media.removeAttribute("controls")},build(){if(this.listeners.media(),!this.supported.ui)return this.debug.warn(`Basic support only for ${this.provider} ${this.type}`),void ui$1.toggleNativeControls.call(this,!0);is$2.element(this.elements.controls)||(controls.inject.call(this),this.listeners.controls()),ui$1.toggleNativeControls.call(this),this.isHTML5&&captions.setup.call(this),this.volume=null,this.muted=null,this.loop=null,this.quality=null,this.speed=null,controls.updateVolume.call(this),controls.timeUpdate.call(this),controls.durationUpdate.call(this),ui$1.checkPlaying.call(this),toggleClass(this.elements.container,this.config.classNames.pip.supported,support.pip&&this.isHTML5&&this.isVideo),toggleClass(this.elements.container,this.config.classNames.airplay.supported,support.airplay&&this.isHTML5),toggleClass(this.elements.container,this.config.classNames.isTouch,this.touch),this.ready=!0,setTimeout(()=>{triggerEvent.call(this,this.media,"ready")},0),ui$1.setTitle.call(this),this.poster&&ui$1.setPoster.call(this,this.poster,!1).catch(()=>{}),this.config.duration&&controls.durationUpdate.call(this),this.config.mediaMetadata&&controls.setMediaMetadata.call(this)},setTitle(){let s=i18n.get("play",this.config);if(is$2.string(this.config.title)&&!is$2.empty(this.config.title)&&(s+=`, ${this.config.title}`),Array.from(this.elements.buttons.play||[]).forEach(l=>{l.setAttribute("aria-label",s)}),this.isEmbed){const l=getElement.call(this,"iframe");if(!is$2.element(l))return;const c=is$2.empty(this.config.title)?"video":this.config.title,d=i18n.get("frameTitle",this.config);l.setAttribute("title",d.replace("{title}",c))}},togglePoster(s){toggleClass(this.elements.container,this.config.classNames.posterEnabled,s)},setPoster(s,l=!0){return l&&this.poster?Promise.reject(new Error("Poster already set")):(this.media.setAttribute("data-poster",s),this.elements.poster.removeAttribute("hidden"),ready.call(this).then(()=>loadImage(s)).catch(c=>{throw s===this.poster&&ui$1.togglePoster.call(this,!1),c}).then(()=>{if(s!==this.poster)throw new Error("setPoster cancelled by later call to setPoster")}).then(()=>(Object.assign(this.elements.poster.style,{backgroundImage:`url('${s}')`,backgroundSize:""}),ui$1.togglePoster.call(this,!0),s)))},checkPlaying(s){toggleClass(this.elements.container,this.config.classNames.playing,this.playing),toggleClass(this.elements.container,this.config.classNames.paused,this.paused),toggleClass(this.elements.container,this.config.classNames.stopped,this.stopped),Array.from(this.elements.buttons.play||[]).forEach(l=>{Object.assign(l,{pressed:this.playing}),l.setAttribute("aria-label",i18n.get(this.playing?"pause":"play",this.config))}),is$2.event(s)&&s.type==="timeupdate"||ui$1.toggleControls.call(this)},checkLoading(s){this.loading=["stalled","waiting"].includes(s.type),clearTimeout(this.timers.loading),this.timers.loading=setTimeout(()=>{toggleClass(this.elements.container,this.config.classNames.loading,this.loading),ui$1.toggleControls.call(this)},this.loading?250:0)},toggleControls(s){const{controls:l}=this.elements;if(l&&this.config.hideControls){const c=this.touch&&this.lastSeekTime+2e3>Date.now();this.toggleControls(!!(s||this.loading||this.paused||l.pressed||l.hover||c))}},migrateStyles(){Object.values({...this.media.style}).filter(s=>!is$2.empty(s)&&is$2.string(s)&&s.startsWith("--plyr")).forEach(s=>{this.elements.container.style.setProperty(s,this.media.style.getPropertyValue(s)),this.media.style.removeProperty(s)}),is$2.empty(this.media.style)&&this.media.removeAttribute("style")}};class Listeners{constructor(l){_defineProperty$1(this,"firstTouch",()=>{const{player:c}=this,{elements:d}=c;c.touch=!0,toggleClass(d.container,c.config.classNames.isTouch,!0)}),_defineProperty$1(this,"global",(c=!0)=>{const{player:d}=this;d.config.keyboard.global&&toggleListener.call(d,window,"keydown keyup",this.handleKey,c,!1),toggleListener.call(d,document.body,"click",this.toggleMenu,c),once.call(d,document.body,"touchstart",this.firstTouch)}),_defineProperty$1(this,"container",()=>{const{player:c}=this,{config:d,elements:f,timers:g}=c;!d.keyboard.global&&d.keyboard.focused&&on$1.call(c,f.container,"keydown keyup",this.handleKey,!1),on$1.call(c,f.container,"mousemove mouseleave touchstart touchmove enterfullscreen exitfullscreen",$=>{const{controls:y}=f;y&&$.type==="enterfullscreen"&&(y.pressed=!1,y.hover=!1);let x=0;["touchstart","touchmove","mousemove"].includes($.type)&&(ui$1.toggleControls.call(c,!0),x=c.touch?3e3:2e3),clearTimeout(g.controls),g.controls=setTimeout(()=>ui$1.toggleControls.call(c,!1),x)});const v=()=>{if(!c.isVimeo||c.config.vimeo.premium)return;const $=f.wrapper,{active:y}=c.fullscreen,[x,C]=getAspectRatio.call(c),E=supportsCSS(`aspect-ratio: ${x} / ${C}`);if(!y)return void(E?($.style.width=null,$.style.height=null):($.style.maxWidth=null,$.style.margin=null));const[N,W]=getViewportSize(),q=N/W>x/C;E?($.style.width=q?"auto":"100%",$.style.height=q?"100%":"auto"):($.style.maxWidth=q?W/C*x+"px":null,$.style.margin=q?"0 auto":null)},b=()=>{clearTimeout(g.resized),g.resized=setTimeout(v,50)};on$1.call(c,f.container,"enterfullscreen exitfullscreen",$=>{const{target:y}=c.fullscreen;y===f.container&&(!c.isEmbed&&is$2.empty(c.config.ratio)||(v(),($.type==="enterfullscreen"?on$1:off).call(c,window,"resize",b)))})}),_defineProperty$1(this,"media",()=>{const{player:c}=this,{elements:d}=c;if(on$1.call(c,c.media,"timeupdate seeking seeked",g=>controls.timeUpdate.call(c,g)),on$1.call(c,c.media,"durationchange loadeddata loadedmetadata",g=>controls.durationUpdate.call(c,g)),on$1.call(c,c.media,"ended",()=>{c.isHTML5&&c.isVideo&&c.config.resetOnEnd&&(c.restart(),c.pause())}),on$1.call(c,c.media,"progress playing seeking seeked",g=>controls.updateProgress.call(c,g)),on$1.call(c,c.media,"volumechange",g=>controls.updateVolume.call(c,g)),on$1.call(c,c.media,"playing play pause ended emptied timeupdate",g=>ui$1.checkPlaying.call(c,g)),on$1.call(c,c.media,"waiting canplay seeked playing",g=>ui$1.checkLoading.call(c,g)),c.supported.ui&&c.config.clickToPlay&&!c.isAudio){const g=getElement.call(c,`.${c.config.classNames.video}`);if(!is$2.element(g))return;on$1.call(c,d.container,"click",v=>{([d.container,g].includes(v.target)||g.contains(v.target))&&(c.touch&&c.config.hideControls||(c.ended?(this.proxy(v,c.restart,"restart"),this.proxy(v,()=>{silencePromise(c.play())},"play")):this.proxy(v,()=>{silencePromise(c.togglePlay())},"play")))})}c.supported.ui&&c.config.disableContextMenu&&on$1.call(c,d.wrapper,"contextmenu",g=>{g.preventDefault()},!1),on$1.call(c,c.media,"volumechange",()=>{c.storage.set({volume:c.volume,muted:c.muted})}),on$1.call(c,c.media,"ratechange",()=>{controls.updateSetting.call(c,"speed"),c.storage.set({speed:c.speed})}),on$1.call(c,c.media,"qualitychange",g=>{controls.updateSetting.call(c,"quality",null,g.detail.quality)}),on$1.call(c,c.media,"ready qualitychange",()=>{controls.setDownloadUrl.call(c)});const f=c.config.events.concat(["keyup","keydown"]).join(" ");on$1.call(c,c.media,f,g=>{let{detail:v={}}=g;g.type==="error"&&(v=c.media.error),triggerEvent.call(c,d.container,g.type,!0,v)})}),_defineProperty$1(this,"proxy",(c,d,f)=>{const{player:g}=this,v=g.config.listeners[f];let b=!0;is$2.function(v)&&(b=v.call(g,c)),b!==!1&&is$2.function(d)&&d.call(g,c)}),_defineProperty$1(this,"bind",(c,d,f,g,v=!0)=>{const{player:b}=this,$=b.config.listeners[g],y=is$2.function($);on$1.call(b,c,d,x=>this.proxy(x,f,g),v&&!y)}),_defineProperty$1(this,"controls",()=>{const{player:c}=this,{elements:d}=c,f=browser.isIE?"change":"input";if(d.buttons.play&&Array.from(d.buttons.play).forEach(g=>{this.bind(g,"click",()=>{silencePromise(c.togglePlay())},"play")}),this.bind(d.buttons.restart,"click",c.restart,"restart"),this.bind(d.buttons.rewind,"click",()=>{c.lastSeekTime=Date.now(),c.rewind()},"rewind"),this.bind(d.buttons.fastForward,"click",()=>{c.lastSeekTime=Date.now(),c.forward()},"fastForward"),this.bind(d.buttons.mute,"click",()=>{c.muted=!c.muted},"mute"),this.bind(d.buttons.captions,"click",()=>c.toggleCaptions()),this.bind(d.buttons.download,"click",()=>{triggerEvent.call(c,c.media,"download")},"download"),this.bind(d.buttons.fullscreen,"click",()=>{c.fullscreen.toggle()},"fullscreen"),this.bind(d.buttons.pip,"click",()=>{c.pip="toggle"},"pip"),this.bind(d.buttons.airplay,"click",c.airplay,"airplay"),this.bind(d.buttons.settings,"click",g=>{g.stopPropagation(),g.preventDefault(),controls.toggleMenu.call(c,g)},null,!1),this.bind(d.buttons.settings,"keyup",g=>{[" ","Enter"].includes(g.key)&&(g.key!=="Enter"?(g.preventDefault(),g.stopPropagation(),controls.toggleMenu.call(c,g)):controls.focusFirstMenuItem.call(c,null,!0))},null,!1),this.bind(d.settings.menu,"keydown",g=>{g.key==="Escape"&&controls.toggleMenu.call(c,g)}),this.bind(d.inputs.seek,"mousedown mousemove",g=>{const v=d.progress.getBoundingClientRect(),b=100/v.width*(g.pageX-v.left);g.currentTarget.setAttribute("seek-value",b)}),this.bind(d.inputs.seek,"mousedown mouseup keydown keyup touchstart touchend",g=>{const v=g.currentTarget,b="play-on-seeked";if(is$2.keyboardEvent(g)&&!["ArrowLeft","ArrowRight"].includes(g.key))return;c.lastSeekTime=Date.now();const $=v.hasAttribute(b),y=["mouseup","touchend","keyup"].includes(g.type);$&&y?(v.removeAttribute(b),silencePromise(c.play())):!y&&c.playing&&(v.setAttribute(b,""),c.pause())}),browser.isIos){const g=getElements.call(c,'input[type="range"]');Array.from(g).forEach(v=>this.bind(v,f,b=>repaint(b.target)))}this.bind(d.inputs.seek,f,g=>{const v=g.currentTarget;let b=v.getAttribute("seek-value");is$2.empty(b)&&(b=v.value),v.removeAttribute("seek-value"),c.currentTime=b/v.max*c.duration},"seek"),this.bind(d.progress,"mouseenter mouseleave mousemove",g=>controls.updateSeekTooltip.call(c,g)),this.bind(d.progress,"mousemove touchmove",g=>{const{previewThumbnails:v}=c;v&&v.loaded&&v.startMove(g)}),this.bind(d.progress,"mouseleave touchend click",()=>{const{previewThumbnails:g}=c;g&&g.loaded&&g.endMove(!1,!0)}),this.bind(d.progress,"mousedown touchstart",g=>{const{previewThumbnails:v}=c;v&&v.loaded&&v.startScrubbing(g)}),this.bind(d.progress,"mouseup touchend",g=>{const{previewThumbnails:v}=c;v&&v.loaded&&v.endScrubbing(g)}),browser.isWebKit&&Array.from(getElements.call(c,'input[type="range"]')).forEach(g=>{this.bind(g,"input",v=>controls.updateRangeFill.call(c,v.target))}),c.config.toggleInvert&&!is$2.element(d.display.duration)&&this.bind(d.display.currentTime,"click",()=>{c.currentTime!==0&&(c.config.invertTime=!c.config.invertTime,controls.timeUpdate.call(c))}),this.bind(d.inputs.volume,f,g=>{c.volume=g.target.value},"volume"),this.bind(d.controls,"mouseenter mouseleave",g=>{d.controls.hover=!c.touch&&g.type==="mouseenter"}),d.fullscreen&&Array.from(d.fullscreen.children).filter(g=>!g.contains(d.container)).forEach(g=>{this.bind(g,"mouseenter mouseleave",v=>{d.controls&&(d.controls.hover=!c.touch&&v.type==="mouseenter")})}),this.bind(d.controls,"mousedown mouseup touchstart touchend touchcancel",g=>{d.controls.pressed=["mousedown","touchstart"].includes(g.type)}),this.bind(d.controls,"focusin",()=>{const{config:g,timers:v}=c;toggleClass(d.controls,g.classNames.noTransition,!0),ui$1.toggleControls.call(c,!0),setTimeout(()=>{toggleClass(d.controls,g.classNames.noTransition,!1)},0);const b=this.touch?3e3:4e3;clearTimeout(v.controls),v.controls=setTimeout(()=>ui$1.toggleControls.call(c,!1),b)}),this.bind(d.inputs.volume,"wheel",g=>{const v=g.webkitDirectionInvertedFromDevice,[b,$]=[g.deltaX,-g.deltaY].map(C=>v?-C:C),y=Math.sign(Math.abs(b)>Math.abs($)?b:$);c.increaseVolume(y/50);const{volume:x}=c.media;(y===1&&x<1||y===-1&&x>0)&&g.preventDefault()},"volume",!1)}),this.player=l,this.lastKey=null,this.focusTimer=null,this.lastKeyDown=null,this.handleKey=this.handleKey.bind(this),this.toggleMenu=this.toggleMenu.bind(this),this.firstTouch=this.firstTouch.bind(this)}handleKey(l){const{player:c}=this,{elements:d}=c,{key:f,type:g,altKey:v,ctrlKey:b,metaKey:$,shiftKey:y}=l,x=g==="keydown",C=x&&f===this.lastKey;if(!(v||b||$||y)&&f){if(x){const N=document.activeElement;if(is$2.element(N)){const{editable:W}=c.config.selectors,{seek:q}=d.inputs;if(N!==q&&matches(N,W)||l.key===" "&&matches(N,'button, [role^="menuitem"]'))return}switch([" ","ArrowLeft","ArrowUp","ArrowRight","ArrowDown","0","1","2","3","4","5","6","7","8","9","c","f","k","l","m"].includes(f)&&(l.preventDefault(),l.stopPropagation()),f){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":C||(E=parseInt(f,10),c.currentTime=c.duration/10*E);break;case" ":case"k":C||silencePromise(c.togglePlay());break;case"ArrowUp":c.increaseVolume(.1);break;case"ArrowDown":c.decreaseVolume(.1);break;case"m":C||(c.muted=!c.muted);break;case"ArrowRight":c.forward();break;case"ArrowLeft":c.rewind();break;case"f":c.fullscreen.toggle();break;case"c":C||c.toggleCaptions();break;case"l":c.loop=!c.loop}f==="Escape"&&!c.fullscreen.usingNative&&c.fullscreen.active&&c.fullscreen.toggle(),this.lastKey=f}else this.lastKey=null;var E}}toggleMenu(l){controls.toggleMenu.call(this.player,l)}}function createCommonjsModule(s,l){return s(l={exports:{}},l.exports),l.exports}var loadjs_umd=createCommonjsModule(function(s,l){s.exports=function(){var c=function(){},d={},f={},g={};function v(E,N){E=E.push?E:[E];var W,q,Y,re=[],se=E.length,de=se;for(W=function(he,ge){ge.length&&re.push(he),--de||N(re)};se--;)q=E[se],(Y=f[q])?W(q,Y):(g[q]=g[q]||[]).push(W)}function b(E,N){if(E){var W=g[E];if(f[E]=N,W)for(;W.length;)W[0](E,N),W.splice(0,1)}}function $(E,N){E.call&&(E={success:E}),N.length?(E.error||c)(N):(E.success||c)(E)}function y(E,N,W,q){var Y,re,se=document,de=W.async,he=(W.numRetries||0)+1,ge=W.before||c,Se=E.replace(/[\?|#].*$/,""),Ae=E.replace(/^(css|img)!/,"");q=q||0,/(^css!|\.css$)/.test(Se)?((re=se.createElement("link")).rel="stylesheet",re.href=Ae,(Y="hideFocus"in re)&&re.relList&&(Y=0,re.rel="preload",re.as="style")):/(^img!|\.(png|gif|jpg|svg|webp)$)/.test(Se)?(re=se.createElement("img")).src=Ae:((re=se.createElement("script")).src=E,re.async=de===void 0||de),re.onload=re.onerror=re.onbeforeload=function(Re){var Be=Re.type[0];if(Y)try{re.sheet.cssText.length||(Be="e")}catch(Ke){Ke.code!=18&&(Be="e")}if(Be=="e"){if((q+=1)<he)return y(E,N,W,q)}else if(re.rel=="preload"&&re.as=="style")return re.rel="stylesheet";N(E,Be,Re.defaultPrevented)},ge(E,re)!==!1&&se.head.appendChild(re)}function x(E,N,W){var q,Y,re=(E=E.push?E:[E]).length,se=re,de=[];for(q=function(he,ge,Se){if(ge=="e"&&de.push(he),ge=="b"){if(!Se)return;de.push(he)}--re||N(de)},Y=0;Y<se;Y++)y(E[Y],q,W)}function C(E,N,W){var q,Y;if(N&&N.trim&&(q=N),Y=(q?W:N)||{},q){if(q in d)throw"LoadJS";d[q]=!0}function re(se,de){x(E,function(he){$(Y,he),se&&$({success:se,error:de},he),b(q,he)},Y)}if(Y.returnPromise)return new Promise(re);re()}return C.ready=function(E,N){return v(E,function(W){$(N,W)}),C},C.done=function(E){b(E,[])},C.reset=function(){d={},f={},g={}},C.isDefined=function(E){return E in d},C}()});function loadScript(s){return new Promise((l,c)=>{loadjs_umd(s,{success:l,error:c})})}function parseId$1(s){return is$2.empty(s)?null:is$2.number(Number(s))?s:s.match(/^.*(vimeo.com\/|video\/)(\d+).*/)?RegExp.$2:s}function parseHash(s){const l=s.match(/^.*(vimeo.com\/|video\/)(\d+)(\?.*&*h=|\/)+([\d,a-f]+)/);return l&&l.length===5?l[4]:null}function assurePlaybackState$1(s){s&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===s&&(this.media.paused=!s,triggerEvent.call(this,this.media,s?"play":"pause"))}const vimeo={setup(){const s=this;toggleClass(s.elements.wrapper,s.config.classNames.embed,!0),s.options.speed=s.config.speed.options,setAspectRatio.call(s),is$2.object(window.Vimeo)?vimeo.ready.call(s):loadScript(s.config.urls.vimeo.sdk).then(()=>{vimeo.ready.call(s)}).catch(l=>{s.debug.warn("Vimeo SDK (player.js) failed to load",l)})},ready(){const s=this,l=s.config.vimeo,{premium:c,referrerPolicy:d,...f}=l;let g=s.media.getAttribute("src"),v="";is$2.empty(g)?(g=s.media.getAttribute(s.config.attributes.embed.id),v=s.media.getAttribute(s.config.attributes.embed.hash)):v=parseHash(g);const b=v?{h:v}:{};c&&Object.assign(f,{controls:!1,sidedock:!1});const $=buildUrlParams({loop:s.config.loop.active,autoplay:s.autoplay,muted:s.muted,gesture:"media",playsinline:s.config.playsinline,...b,...f}),y=parseId$1(g),x=createElement("iframe"),C=format(s.config.urls.vimeo.iframe,y,$);if(x.setAttribute("src",C),x.setAttribute("allowfullscreen",""),x.setAttribute("allow",["autoplay","fullscreen","picture-in-picture","encrypted-media","accelerometer","gyroscope"].join("; ")),is$2.empty(d)||x.setAttribute("referrerPolicy",d),c||!l.customControls)x.setAttribute("data-poster",s.poster),s.media=replaceElement(x,s.media);else{const se=createElement("div",{class:s.config.classNames.embedContainer,"data-poster":s.poster});se.appendChild(x),s.media=replaceElement(se,s.media)}l.customControls||fetch$1(format(s.config.urls.vimeo.api,C)).then(se=>{!is$2.empty(se)&&se.thumbnail_url&&ui$1.setPoster.call(s,se.thumbnail_url).catch(()=>{})}),s.embed=new window.Vimeo.Player(x,{autopause:s.config.autopause,muted:s.muted}),s.media.paused=!0,s.media.currentTime=0,s.supported.ui&&s.embed.disableTextTrack(),s.media.play=()=>(assurePlaybackState$1.call(s,!0),s.embed.play()),s.media.pause=()=>(assurePlaybackState$1.call(s,!1),s.embed.pause()),s.media.stop=()=>{s.pause(),s.currentTime=0};let{currentTime:E}=s.media;Object.defineProperty(s.media,"currentTime",{get:()=>E,set(se){const{embed:de,media:he,paused:ge,volume:Se}=s,Ae=ge&&!de.hasPlayed;he.seeking=!0,triggerEvent.call(s,he,"seeking"),Promise.resolve(Ae&&de.setVolume(0)).then(()=>de.setCurrentTime(se)).then(()=>Ae&&de.pause()).then(()=>Ae&&de.setVolume(Se)).catch(()=>{})}});let N=s.config.speed.selected;Object.defineProperty(s.media,"playbackRate",{get:()=>N,set(se){s.embed.setPlaybackRate(se).then(()=>{N=se,triggerEvent.call(s,s.media,"ratechange")}).catch(()=>{s.options.speed=[1]})}});let{volume:W}=s.config;Object.defineProperty(s.media,"volume",{get:()=>W,set(se){s.embed.setVolume(se).then(()=>{W=se,triggerEvent.call(s,s.media,"volumechange")})}});let{muted:q}=s.config;Object.defineProperty(s.media,"muted",{get:()=>q,set(se){const de=!!is$2.boolean(se)&&se;s.embed.setMuted(!!de||s.config.muted).then(()=>{q=de,triggerEvent.call(s,s.media,"volumechange")})}});let Y,{loop:re}=s.config;Object.defineProperty(s.media,"loop",{get:()=>re,set(se){const de=is$2.boolean(se)?se:s.config.loop.active;s.embed.setLoop(de).then(()=>{re=de})}}),s.embed.getVideoUrl().then(se=>{Y=se,controls.setDownloadUrl.call(s)}).catch(se=>{this.debug.warn(se)}),Object.defineProperty(s.media,"currentSrc",{get:()=>Y}),Object.defineProperty(s.media,"ended",{get:()=>s.currentTime===s.duration}),Promise.all([s.embed.getVideoWidth(),s.embed.getVideoHeight()]).then(se=>{const[de,he]=se;s.embed.ratio=roundAspectRatio(de,he),setAspectRatio.call(this)}),s.embed.setAutopause(s.config.autopause).then(se=>{s.config.autopause=se}),s.embed.getVideoTitle().then(se=>{s.config.title=se,ui$1.setTitle.call(this)}),s.embed.getCurrentTime().then(se=>{E=se,triggerEvent.call(s,s.media,"timeupdate")}),s.embed.getDuration().then(se=>{s.media.duration=se,triggerEvent.call(s,s.media,"durationchange")}),s.embed.getTextTracks().then(se=>{s.media.textTracks=se,captions.setup.call(s)}),s.embed.on("cuechange",({cues:se=[]})=>{const de=se.map(he=>stripHTML(he.text));captions.updateCues.call(s,de)}),s.embed.on("loaded",()=>{s.embed.getPaused().then(se=>{assurePlaybackState$1.call(s,!se),se||triggerEvent.call(s,s.media,"playing")}),is$2.element(s.embed.element)&&s.supported.ui&&s.embed.element.setAttribute("tabindex",-1)}),s.embed.on("bufferstart",()=>{triggerEvent.call(s,s.media,"waiting")}),s.embed.on("bufferend",()=>{triggerEvent.call(s,s.media,"playing")}),s.embed.on("play",()=>{assurePlaybackState$1.call(s,!0),triggerEvent.call(s,s.media,"playing")}),s.embed.on("pause",()=>{assurePlaybackState$1.call(s,!1)}),s.embed.on("timeupdate",se=>{s.media.seeking=!1,E=se.seconds,triggerEvent.call(s,s.media,"timeupdate")}),s.embed.on("progress",se=>{s.media.buffered=se.percent,triggerEvent.call(s,s.media,"progress"),parseInt(se.percent,10)===1&&triggerEvent.call(s,s.media,"canplaythrough"),s.embed.getDuration().then(de=>{de!==s.media.duration&&(s.media.duration=de,triggerEvent.call(s,s.media,"durationchange"))})}),s.embed.on("seeked",()=>{s.media.seeking=!1,triggerEvent.call(s,s.media,"seeked")}),s.embed.on("ended",()=>{s.media.paused=!0,triggerEvent.call(s,s.media,"ended")}),s.embed.on("error",se=>{s.media.error=se,triggerEvent.call(s,s.media,"error")}),l.customControls&&setTimeout(()=>ui$1.build.call(s),0)}};function parseId(s){return is$2.empty(s)?null:s.match(/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/)?RegExp.$2:s}function assurePlaybackState(s){s&&!this.embed.hasPlayed&&(this.embed.hasPlayed=!0),this.media.paused===s&&(this.media.paused=!s,triggerEvent.call(this,this.media,s?"play":"pause"))}function getHost(s){return s.noCookie?"https://www.youtube-nocookie.com":window.location.protocol==="http:"?"http://www.youtube.com":void 0}const youtube={setup(){if(toggleClass(this.elements.wrapper,this.config.classNames.embed,!0),is$2.object(window.YT)&&is$2.function(window.YT.Player))youtube.ready.call(this);else{const s=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=()=>{is$2.function(s)&&s(),youtube.ready.call(this)},loadScript(this.config.urls.youtube.sdk).catch(l=>{this.debug.warn("YouTube API failed to load",l)})}},getTitle(s){fetch$1(format(this.config.urls.youtube.api,s)).then(l=>{if(is$2.object(l)){const{title:c,height:d,width:f}=l;this.config.title=c,ui$1.setTitle.call(this),this.embed.ratio=roundAspectRatio(f,d)}setAspectRatio.call(this)}).catch(()=>{setAspectRatio.call(this)})},ready(){const s=this,l=s.config.youtube,c=s.media&&s.media.getAttribute("id");if(!is$2.empty(c)&&c.startsWith("youtube-"))return;let d=s.media.getAttribute("src");is$2.empty(d)&&(d=s.media.getAttribute(this.config.attributes.embed.id));const f=parseId(d),g=createElement("div",{id:generateId(s.provider),"data-poster":l.customControls?s.poster:void 0});if(s.media=replaceElement(g,s.media),l.customControls){const v=b=>`https://i.ytimg.com/vi/${f}/${b}default.jpg`;loadImage(v("maxres"),121).catch(()=>loadImage(v("sd"),121)).catch(()=>loadImage(v("hq"))).then(b=>ui$1.setPoster.call(s,b.src)).then(b=>{b.includes("maxres")||(s.elements.poster.style.backgroundSize="cover")}).catch(()=>{})}s.embed=new window.YT.Player(s.media,{videoId:f,host:getHost(l),playerVars:extend({},{autoplay:s.config.autoplay?1:0,hl:s.config.hl,controls:s.supported.ui&&l.customControls?0:1,disablekb:1,playsinline:s.config.playsinline&&!s.config.fullscreen.iosNative?1:0,cc_load_policy:s.captions.active?1:0,cc_lang_pref:s.config.captions.language,widget_referrer:window?window.location.href:null},l),events:{onError(v){if(!s.media.error){const b=v.data,$={2:"The request contains an invalid parameter value. For example, this error occurs if you specify a video ID that does not have 11 characters, or if the video ID contains invalid characters, such as exclamation points or asterisks.",5:"The requested content cannot be played in an HTML5 player or another error related to the HTML5 player has occurred.",100:"The video requested was not found. This error occurs when a video has been removed (for any reason) or has been marked as private.",101:"The owner of the requested video does not allow it to be played in embedded players.",150:"The owner of the requested video does not allow it to be played in embedded players."}[b]||"An unknown error occurred";s.media.error={code:b,message:$},triggerEvent.call(s,s.media,"error")}},onPlaybackRateChange(v){const b=v.target;s.media.playbackRate=b.getPlaybackRate(),triggerEvent.call(s,s.media,"ratechange")},onReady(v){if(is$2.function(s.media.play))return;const b=v.target;youtube.getTitle.call(s,f),s.media.play=()=>{assurePlaybackState.call(s,!0),b.playVideo()},s.media.pause=()=>{assurePlaybackState.call(s,!1),b.pauseVideo()},s.media.stop=()=>{b.stopVideo()},s.media.duration=b.getDuration(),s.media.paused=!0,s.media.currentTime=0,Object.defineProperty(s.media,"currentTime",{get:()=>Number(b.getCurrentTime()),set(C){s.paused&&!s.embed.hasPlayed&&s.embed.mute(),s.media.seeking=!0,triggerEvent.call(s,s.media,"seeking"),b.seekTo(C)}}),Object.defineProperty(s.media,"playbackRate",{get:()=>b.getPlaybackRate(),set(C){b.setPlaybackRate(C)}});let{volume:$}=s.config;Object.defineProperty(s.media,"volume",{get:()=>$,set(C){$=C,b.setVolume(100*$),triggerEvent.call(s,s.media,"volumechange")}});let{muted:y}=s.config;Object.defineProperty(s.media,"muted",{get:()=>y,set(C){const E=is$2.boolean(C)?C:y;y=E,b[E?"mute":"unMute"](),b.setVolume(100*$),triggerEvent.call(s,s.media,"volumechange")}}),Object.defineProperty(s.media,"currentSrc",{get:()=>b.getVideoUrl()}),Object.defineProperty(s.media,"ended",{get:()=>s.currentTime===s.duration});const x=b.getAvailablePlaybackRates();s.options.speed=x.filter(C=>s.config.speed.options.includes(C)),s.supported.ui&&l.customControls&&s.media.setAttribute("tabindex",-1),triggerEvent.call(s,s.media,"timeupdate"),triggerEvent.call(s,s.media,"durationchange"),clearInterval(s.timers.buffering),s.timers.buffering=setInterval(()=>{s.media.buffered=b.getVideoLoadedFraction(),(s.media.lastBuffered===null||s.media.lastBuffered<s.media.buffered)&&triggerEvent.call(s,s.media,"progress"),s.media.lastBuffered=s.media.buffered,s.media.buffered===1&&(clearInterval(s.timers.buffering),triggerEvent.call(s,s.media,"canplaythrough"))},200),l.customControls&&setTimeout(()=>ui$1.build.call(s),50)},onStateChange(v){const b=v.target;switch(clearInterval(s.timers.playing),s.media.seeking&&[1,2].includes(v.data)&&(s.media.seeking=!1,triggerEvent.call(s,s.media,"seeked")),v.data){case-1:triggerEvent.call(s,s.media,"timeupdate"),s.media.buffered=b.getVideoLoadedFraction(),triggerEvent.call(s,s.media,"progress");break;case 0:assurePlaybackState.call(s,!1),s.media.loop?(b.stopVideo(),b.playVideo()):triggerEvent.call(s,s.media,"ended");break;case 1:l.customControls&&!s.config.autoplay&&s.media.paused&&!s.embed.hasPlayed?s.media.pause():(assurePlaybackState.call(s,!0),triggerEvent.call(s,s.media,"playing"),s.timers.playing=setInterval(()=>{triggerEvent.call(s,s.media,"timeupdate")},50),s.media.duration!==b.getDuration()&&(s.media.duration=b.getDuration(),triggerEvent.call(s,s.media,"durationchange")));break;case 2:s.muted||s.embed.unMute(),assurePlaybackState.call(s,!1);break;case 3:triggerEvent.call(s,s.media,"waiting")}triggerEvent.call(s,s.elements.container,"statechange",!1,{code:v.data})}}})}},media={setup(){this.media?(toggleClass(this.elements.container,this.config.classNames.type.replace("{0}",this.type),!0),toggleClass(this.elements.container,this.config.classNames.provider.replace("{0}",this.provider),!0),this.isEmbed&&toggleClass(this.elements.container,this.config.classNames.type.replace("{0}","video"),!0),this.isVideo&&(this.elements.wrapper=createElement("div",{class:this.config.classNames.video}),wrap(this.media,this.elements.wrapper),this.elements.poster=createElement("div",{class:this.config.classNames.poster}),this.elements.wrapper.appendChild(this.elements.poster)),this.isHTML5?html5.setup.call(this):this.isYouTube?youtube.setup.call(this):this.isVimeo&&vimeo.setup.call(this)):this.debug.warn("No media element found!")}};class Ads{constructor(l){_defineProperty$1(this,"load",()=>{this.enabled&&(is$2.object(window.google)&&is$2.object(window.google.ima)?this.ready():loadScript(this.player.config.urls.googleIMA.sdk).then(()=>{this.ready()}).catch(()=>{this.trigger("error",new Error("Google IMA SDK failed to load"))}))}),_defineProperty$1(this,"ready",()=>{var c;this.enabled||((c=this).manager&&c.manager.destroy(),c.elements.displayContainer&&c.elements.displayContainer.destroy(),c.elements.container.remove()),this.startSafetyTimer(12e3,"ready()"),this.managerPromise.then(()=>{this.clearSafetyTimer("onAdsManagerLoaded()")}),this.listeners(),this.setupIMA()}),_defineProperty$1(this,"setupIMA",()=>{this.elements.container=createElement("div",{class:this.player.config.classNames.ads}),this.player.elements.container.appendChild(this.elements.container),google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setLocale(this.player.config.ads.language),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(this.player.config.playsinline),this.elements.displayContainer=new google.ima.AdDisplayContainer(this.elements.container,this.player.media),this.loader=new google.ima.AdsLoader(this.elements.displayContainer),this.loader.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,c=>this.onAdsManagerLoaded(c),!1),this.loader.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,c=>this.onAdError(c),!1),this.requestAds()}),_defineProperty$1(this,"requestAds",()=>{const{container:c}=this.player.elements;try{const d=new google.ima.AdsRequest;d.adTagUrl=this.tagUrl,d.linearAdSlotWidth=c.offsetWidth,d.linearAdSlotHeight=c.offsetHeight,d.nonLinearAdSlotWidth=c.offsetWidth,d.nonLinearAdSlotHeight=c.offsetHeight,d.forceNonLinearFullSlot=!1,d.setAdWillPlayMuted(!this.player.muted),this.loader.requestAds(d)}catch(d){this.onAdError(d)}}),_defineProperty$1(this,"pollCountdown",(c=!1)=>{if(!c)return clearInterval(this.countdownTimer),void this.elements.container.removeAttribute("data-badge-text");this.countdownTimer=setInterval(()=>{const d=formatTime(Math.max(this.manager.getRemainingTime(),0)),f=`${i18n.get("advertisement",this.player.config)} - ${d}`;this.elements.container.setAttribute("data-badge-text",f)},100)}),_defineProperty$1(this,"onAdsManagerLoaded",c=>{if(!this.enabled)return;const d=new google.ima.AdsRenderingSettings;d.restoreCustomPlaybackStateOnAdBreakComplete=!0,d.enablePreloading=!0,this.manager=c.getAdsManager(this.player,d),this.cuePoints=this.manager.getCuePoints(),this.manager.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,f=>this.onAdError(f)),Object.keys(google.ima.AdEvent.Type).forEach(f=>{this.manager.addEventListener(google.ima.AdEvent.Type[f],g=>this.onAdEvent(g))}),this.trigger("loaded")}),_defineProperty$1(this,"addCuePoints",()=>{is$2.empty(this.cuePoints)||this.cuePoints.forEach(c=>{if(c!==0&&c!==-1&&c<this.player.duration){const d=this.player.elements.progress;if(is$2.element(d)){const f=100/this.player.duration*c,g=createElement("span",{class:this.player.config.classNames.cues});g.style.left=`${f.toString()}%`,d.appendChild(g)}}})}),_defineProperty$1(this,"onAdEvent",c=>{const{container:d}=this.player.elements,f=c.getAd(),g=c.getAdData();switch((v=>{triggerEvent.call(this.player,this.player.media,`ads${v.replace(/_/g,"").toLowerCase()}`)})(c.type),c.type){case google.ima.AdEvent.Type.LOADED:this.trigger("loaded"),this.pollCountdown(!0),f.isLinear()||(f.width=d.offsetWidth,f.height=d.offsetHeight);break;case google.ima.AdEvent.Type.STARTED:this.manager.setVolume(this.player.volume);break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:this.player.ended?this.loadAds():this.loader.contentComplete();break;case google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED:this.pauseContent();break;case google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED:this.pollCountdown(),this.resumeContent();break;case google.ima.AdEvent.Type.LOG:g.adError&&this.player.debug.warn(`Non-fatal ad error: ${g.adError.getMessage()}`)}}),_defineProperty$1(this,"onAdError",c=>{this.cancel(),this.player.debug.warn("Ads error",c)}),_defineProperty$1(this,"listeners",()=>{const{container:c}=this.player.elements;let d;this.player.on("canplay",()=>{this.addCuePoints()}),this.player.on("ended",()=>{this.loader.contentComplete()}),this.player.on("timeupdate",()=>{d=this.player.currentTime}),this.player.on("seeked",()=>{const f=this.player.currentTime;is$2.empty(this.cuePoints)||this.cuePoints.forEach((g,v)=>{d<g&&g<f&&(this.manager.discardAdBreak(),this.cuePoints.splice(v,1))})}),window.addEventListener("resize",()=>{this.manager&&this.manager.resize(c.offsetWidth,c.offsetHeight,google.ima.ViewMode.NORMAL)})}),_defineProperty$1(this,"play",()=>{const{container:c}=this.player.elements;this.managerPromise||this.resumeContent(),this.managerPromise.then(()=>{this.manager.setVolume(this.player.volume),this.elements.displayContainer.initialize();try{this.initialized||(this.manager.init(c.offsetWidth,c.offsetHeight,google.ima.ViewMode.NORMAL),this.manager.start()),this.initialized=!0}catch(d){this.onAdError(d)}}).catch(()=>{})}),_defineProperty$1(this,"resumeContent",()=>{this.elements.container.style.zIndex="",this.playing=!1,silencePromise(this.player.media.play())}),_defineProperty$1(this,"pauseContent",()=>{this.elements.container.style.zIndex=3,this.playing=!0,this.player.media.pause()}),_defineProperty$1(this,"cancel",()=>{this.initialized&&this.resumeContent(),this.trigger("error"),this.loadAds()}),_defineProperty$1(this,"loadAds",()=>{this.managerPromise.then(()=>{this.manager&&this.manager.destroy(),this.managerPromise=new Promise(c=>{this.on("loaded",c),this.player.debug.log(this.manager)}),this.initialized=!1,this.requestAds()}).catch(()=>{})}),_defineProperty$1(this,"trigger",(c,...d)=>{const f=this.events[c];is$2.array(f)&&f.forEach(g=>{is$2.function(g)&&g.apply(this,d)})}),_defineProperty$1(this,"on",(c,d)=>(is$2.array(this.events[c])||(this.events[c]=[]),this.events[c].push(d),this)),_defineProperty$1(this,"startSafetyTimer",(c,d)=>{this.player.debug.log(`Safety timer invoked from: ${d}`),this.safetyTimer=setTimeout(()=>{this.cancel(),this.clearSafetyTimer("startSafetyTimer()")},c)}),_defineProperty$1(this,"clearSafetyTimer",c=>{is$2.nullOrUndefined(this.safetyTimer)||(this.player.debug.log(`Safety timer cleared from: ${c}`),clearTimeout(this.safetyTimer),this.safetyTimer=null)}),this.player=l,this.config=l.config.ads,this.playing=!1,this.initialized=!1,this.elements={container:null,displayContainer:null},this.manager=null,this.loader=null,this.cuePoints=null,this.events={},this.safetyTimer=null,this.countdownTimer=null,this.managerPromise=new Promise((c,d)=>{this.on("loaded",c),this.on("error",d)}),this.load()}get enabled(){const{config:l}=this;return this.player.isHTML5&&this.player.isVideo&&l.enabled&&(!is$2.empty(l.publisherId)||is$2.url(l.tagUrl))}get tagUrl(){const{config:l}=this;return is$2.url(l.tagUrl)?l.tagUrl:`https://go.aniview.com/api/adserver6/vast/?${buildUrlParams({AV_PUBLISHERID:"58c25bb0073ef448b1087ad6",AV_CHANNELID:"5a0458dc28a06145e4519d21",AV_URL:window.location.hostname,cb:Date.now(),AV_WIDTH:640,AV_HEIGHT:480,AV_CDIM2:l.publisherId})}`}}function clamp(s=0,l=0,c=255){return Math.min(Math.max(s,l),c)}const parseVtt=s=>{const l=[];return s.split(/\r\n\r\n|\n\n|\r\r/).forEach(c=>{const d={};c.split(/\r\n|\n|\r/).forEach(f=>{if(is$2.number(d.startTime)){if(!is$2.empty(f.trim())&&is$2.empty(d.text)){const g=f.trim().split("#xywh=");[d.text]=g,g[1]&&([d.x,d.y,d.w,d.h]=g[1].split(","))}}else{const g=f.match(/([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})( ?--> ?)([0-9]{2})?:?([0-9]{2}):([0-9]{2}).([0-9]{2,3})/);g&&(d.startTime=60*Number(g[1]||0)*60+60*Number(g[2])+Number(g[3])+ +`0.${g[4]}`,d.endTime=60*Number(g[6]||0)*60+60*Number(g[7])+Number(g[8])+ +`0.${g[9]}`)}}),d.text&&l.push(d)}),l},fitRatio=(s,l)=>{const c={};return s>l.width/l.height?(c.width=l.width,c.height=1/s*l.width):(c.height=l.height,c.width=s*l.height),c};class PreviewThumbnails{constructor(l){_defineProperty$1(this,"load",()=>{this.player.elements.display.seekTooltip&&(this.player.elements.display.seekTooltip.hidden=this.enabled),this.enabled&&this.getThumbnails().then(()=>{this.enabled&&(this.render(),this.determineContainerAutoSizing(),this.listeners(),this.loaded=!0)})}),_defineProperty$1(this,"getThumbnails",()=>new Promise(c=>{const{src:d}=this.player.config.previewThumbnails;if(is$2.empty(d))throw new Error("Missing previewThumbnails.src config attribute");const f=()=>{this.thumbnails.sort((g,v)=>g.height-v.height),this.player.debug.log("Preview thumbnails",this.thumbnails),c()};if(is$2.function(d))d(g=>{this.thumbnails=g,f()});else{const g=(is$2.string(d)?[d]:d).map(v=>this.getThumbnail(v));Promise.all(g).then(f)}})),_defineProperty$1(this,"getThumbnail",c=>new Promise(d=>{fetch$1(c).then(f=>{const g={frames:parseVtt(f),height:null,urlPrefix:""};g.frames[0].text.startsWith("/")||g.frames[0].text.startsWith("http://")||g.frames[0].text.startsWith("https://")||(g.urlPrefix=c.substring(0,c.lastIndexOf("/")+1));const v=new Image;v.onload=()=>{g.height=v.naturalHeight,g.width=v.naturalWidth,this.thumbnails.push(g),d()},v.src=g.urlPrefix+g.frames[0].text})})),_defineProperty$1(this,"startMove",c=>{if(this.loaded&&is$2.event(c)&&["touchmove","mousemove"].includes(c.type)&&this.player.media.duration){if(c.type==="touchmove")this.seekTime=this.player.media.duration*(this.player.elements.inputs.seek.value/100);else{var d,f;const g=this.player.elements.progress.getBoundingClientRect(),v=100/g.width*(c.pageX-g.left);this.seekTime=this.player.media.duration*(v/100),this.seekTime<0&&(this.seekTime=0),this.seekTime>this.player.media.duration-1&&(this.seekTime=this.player.media.duration-1),this.mousePosX=c.pageX,this.elements.thumb.time.innerText=formatTime(this.seekTime);const b=(d=this.player.config.markers)===null||d===void 0||(f=d.points)===null||f===void 0?void 0:f.find(({time:$})=>$===Math.round(this.seekTime));b&&this.elements.thumb.time.insertAdjacentHTML("afterbegin",`${b.label}<br>`)}this.showImageAtCurrentTime()}}),_defineProperty$1(this,"endMove",()=>{this.toggleThumbContainer(!1,!0)}),_defineProperty$1(this,"startScrubbing",c=>{(is$2.nullOrUndefined(c.button)||c.button===!1||c.button===0)&&(this.mouseDown=!0,this.player.media.duration&&(this.toggleScrubbingContainer(!0),this.toggleThumbContainer(!1,!0),this.showImageAtCurrentTime()))}),_defineProperty$1(this,"endScrubbing",()=>{this.mouseDown=!1,Math.ceil(this.lastTime)===Math.ceil(this.player.media.currentTime)?this.toggleScrubbingContainer(!1):once.call(this.player,this.player.media,"timeupdate",()=>{this.mouseDown||this.toggleScrubbingContainer(!1)})}),_defineProperty$1(this,"listeners",()=>{this.player.on("play",()=>{this.toggleThumbContainer(!1,!0)}),this.player.on("seeked",()=>{this.toggleThumbContainer(!1)}),this.player.on("timeupdate",()=>{this.lastTime=this.player.media.currentTime})}),_defineProperty$1(this,"render",()=>{this.elements.thumb.container=createElement("div",{class:this.player.config.classNames.previewThumbnails.thumbContainer}),this.elements.thumb.imageContainer=createElement("div",{class:this.player.config.classNames.previewThumbnails.imageContainer}),this.elements.thumb.container.appendChild(this.elements.thumb.imageContainer);const c=createElement("div",{class:this.player.config.classNames.previewThumbnails.timeContainer});this.elements.thumb.time=createElement("span",{},"00:00"),c.appendChild(this.elements.thumb.time),this.elements.thumb.imageContainer.appendChild(c),is$2.element(this.player.elements.progress)&&this.player.elements.progress.appendChild(this.elements.thumb.container),this.elements.scrubbing.container=createElement("div",{class:this.player.config.classNames.previewThumbnails.scrubbingContainer}),this.player.elements.wrapper.appendChild(this.elements.scrubbing.container)}),_defineProperty$1(this,"destroy",()=>{this.elements.thumb.container&&this.elements.thumb.container.remove(),this.elements.scrubbing.container&&this.elements.scrubbing.container.remove()}),_defineProperty$1(this,"showImageAtCurrentTime",()=>{this.mouseDown?this.setScrubbingContainerSize():this.setThumbContainerSizeAndPos();const c=this.thumbnails[0].frames.findIndex(g=>this.seekTime>=g.startTime&&this.seekTime<=g.endTime),d=c>=0;let f=0;this.mouseDown||this.toggleThumbContainer(d),d&&(this.thumbnails.forEach((g,v)=>{this.loadedImages.includes(g.frames[c].text)&&(f=v)}),c!==this.showingThumb&&(this.showingThumb=c,this.loadImage(f)))}),_defineProperty$1(this,"loadImage",(c=0)=>{const d=this.showingThumb,f=this.thumbnails[c],{urlPrefix:g}=f,v=f.frames[d],b=f.frames[d].text,$=g+b;if(this.currentImageElement&&this.currentImageElement.dataset.filename===b)this.showImage(this.currentImageElement,v,c,d,b,!1),this.currentImageElement.dataset.index=d,this.removeOldImages(this.currentImageElement);else{this.loadingImage&&this.usingSprites&&(this.loadingImage.onload=null);const y=new Image;y.src=$,y.dataset.index=d,y.dataset.filename=b,this.showingThumbFilename=b,this.player.debug.log(`Loading image: ${$}`),y.onload=()=>this.showImage(y,v,c,d,b,!0),this.loadingImage=y,this.removeOldImages(y)}}),_defineProperty$1(this,"showImage",(c,d,f,g,v,b=!0)=>{this.player.debug.log(`Showing thumb: ${v}. num: ${g}. qual: ${f}. newimg: ${b}`),this.setImageSizeAndOffset(c,d),b&&(this.currentImageContainer.appendChild(c),this.currentImageElement=c,this.loadedImages.includes(v)||this.loadedImages.push(v)),this.preloadNearby(g,!0).then(this.preloadNearby(g,!1)).then(this.getHigherQuality(f,c,d,v))}),_defineProperty$1(this,"removeOldImages",c=>{Array.from(this.currentImageContainer.children).forEach(d=>{if(d.tagName.toLowerCase()!=="img")return;const f=this.usingSprites?500:1e3;if(d.dataset.index!==c.dataset.index&&!d.dataset.deleting){d.dataset.deleting=!0;const{currentImageContainer:g}=this;setTimeout(()=>{g.removeChild(d),this.player.debug.log(`Removing thumb: ${d.dataset.filename}`)},f)}})}),_defineProperty$1(this,"preloadNearby",(c,d=!0)=>new Promise(f=>{setTimeout(()=>{const g=this.thumbnails[0].frames[c].text;if(this.showingThumbFilename===g){let v;v=d?this.thumbnails[0].frames.slice(c):this.thumbnails[0].frames.slice(0,c).reverse();let b=!1;v.forEach($=>{const y=$.text;if(y!==g&&!this.loadedImages.includes(y)){b=!0,this.player.debug.log(`Preloading thumb filename: ${y}`);const{urlPrefix:x}=this.thumbnails[0],C=x+y,E=new Image;E.src=C,E.onload=()=>{this.player.debug.log(`Preloaded thumb filename: ${y}`),this.loadedImages.includes(y)||this.loadedImages.push(y),f()}}}),b||f()}},300)})),_defineProperty$1(this,"getHigherQuality",(c,d,f,g)=>{if(c<this.thumbnails.length-1){let v=d.naturalHeight;this.usingSprites&&(v=f.h),v<this.thumbContainerHeight&&setTimeout(()=>{this.showingThumbFilename===g&&(this.player.debug.log(`Showing higher quality thumb for: ${g}`),this.loadImage(c+1))},300)}}),_defineProperty$1(this,"toggleThumbContainer",(c=!1,d=!1)=>{const f=this.player.config.classNames.previewThumbnails.thumbContainerShown;this.elements.thumb.container.classList.toggle(f,c),!c&&d&&(this.showingThumb=null,this.showingThumbFilename=null)}),_defineProperty$1(this,"toggleScrubbingContainer",(c=!1)=>{const d=this.player.config.classNames.previewThumbnails.scrubbingContainerShown;this.elements.scrubbing.container.classList.toggle(d,c),c||(this.showingThumb=null,this.showingThumbFilename=null)}),_defineProperty$1(this,"determineContainerAutoSizing",()=>{(this.elements.thumb.imageContainer.clientHeight>20||this.elements.thumb.imageContainer.clientWidth>20)&&(this.sizeSpecifiedInCSS=!0)}),_defineProperty$1(this,"setThumbContainerSizeAndPos",()=>{const{imageContainer:c}=this.elements.thumb;if(this.sizeSpecifiedInCSS){if(c.clientHeight>20&&c.clientWidth<20){const d=Math.floor(c.clientHeight*this.thumbAspectRatio);c.style.width=`${d}px`}else if(c.clientHeight<20&&c.clientWidth>20){const d=Math.floor(c.clientWidth/this.thumbAspectRatio);c.style.height=`${d}px`}}else{const d=Math.floor(this.thumbContainerHeight*this.thumbAspectRatio);c.style.height=`${this.thumbContainerHeight}px`,c.style.width=`${d}px`}this.setThumbContainerPos()}),_defineProperty$1(this,"setThumbContainerPos",()=>{const c=this.player.elements.progress.getBoundingClientRect(),d=this.player.elements.container.getBoundingClientRect(),{container:f}=this.elements.thumb,g=d.left-c.left+10,v=d.right-c.left-f.clientWidth-10,b=this.mousePosX-c.left-f.clientWidth/2,$=clamp(b,g,v);f.style.left=`${$}px`,f.style.setProperty("--preview-arrow-offset",b-$+"px")}),_defineProperty$1(this,"setScrubbingContainerSize",()=>{const{width:c,height:d}=fitRatio(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});this.elements.scrubbing.container.style.width=`${c}px`,this.elements.scrubbing.container.style.height=`${d}px`}),_defineProperty$1(this,"setImageSizeAndOffset",(c,d)=>{if(!this.usingSprites)return;const f=this.thumbContainerHeight/d.h;c.style.height=c.naturalHeight*f+"px",c.style.width=c.naturalWidth*f+"px",c.style.left=`-${d.x*f}px`,c.style.top=`-${d.y*f}px`}),this.player=l,this.thumbnails=[],this.loaded=!1,this.lastMouseMoveTime=Date.now(),this.mouseDown=!1,this.loadedImages=[],this.elements={thumb:{},scrubbing:{}},this.load()}get enabled(){return this.player.isHTML5&&this.player.isVideo&&this.player.config.previewThumbnails.enabled}get currentImageContainer(){return this.mouseDown?this.elements.scrubbing.container:this.elements.thumb.imageContainer}get usingSprites(){return Object.keys(this.thumbnails[0].frames[0]).includes("w")}get thumbAspectRatio(){return this.usingSprites?this.thumbnails[0].frames[0].w/this.thumbnails[0].frames[0].h:this.thumbnails[0].width/this.thumbnails[0].height}get thumbContainerHeight(){if(this.mouseDown){const{height:l}=fitRatio(this.thumbAspectRatio,{width:this.player.media.clientWidth,height:this.player.media.clientHeight});return l}return this.sizeSpecifiedInCSS?this.elements.thumb.imageContainer.clientHeight:Math.floor(this.player.media.clientWidth/this.thumbAspectRatio/4)}get currentImageElement(){return this.mouseDown?this.currentScrubbingImageElement:this.currentThumbnailImageElement}set currentImageElement(l){this.mouseDown?this.currentScrubbingImageElement=l:this.currentThumbnailImageElement=l}}const source={insertElements(s,l){is$2.string(l)?insertElement(s,this.media,{src:l}):is$2.array(l)&&l.forEach(c=>{insertElement(s,this.media,c)})},change(s){getDeep(s,"sources.length")?(html5.cancelRequests.call(this),this.destroy.call(this,()=>{this.options.quality=[],removeElement(this.media),this.media=null,is$2.element(this.elements.container)&&this.elements.container.removeAttribute("class");const{sources:l,type:c}=s,[{provider:d=providers.html5,src:f}]=l,g=d==="html5"?c:"div",v=d==="html5"?{}:{src:f};Object.assign(this,{provider:d,type:c,supported:support.check(c,d,this.config.playsinline),media:createElement(g,v)}),this.elements.container.appendChild(this.media),is$2.boolean(s.autoplay)&&(this.config.autoplay=s.autoplay),this.isHTML5&&(this.config.crossorigin&&this.media.setAttribute("crossorigin",""),this.config.autoplay&&this.media.setAttribute("autoplay",""),is$2.empty(s.poster)||(this.poster=s.poster),this.config.loop.active&&this.media.setAttribute("loop",""),this.config.muted&&this.media.setAttribute("muted",""),this.config.playsinline&&this.media.setAttribute("playsinline","")),ui$1.addStyleHook.call(this),this.isHTML5&&source.insertElements.call(this,"source",l),this.config.title=s.title,media.setup.call(this),this.isHTML5&&Object.keys(s).includes("tracks")&&source.insertElements.call(this,"track",s.tracks),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&ui$1.build.call(this),this.isHTML5&&this.media.load(),is$2.empty(s.previewThumbnails)||(Object.assign(this.config.previewThumbnails,s.previewThumbnails),this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new PreviewThumbnails(this))),this.fullscreen.update()},!0)):this.debug.warn("Invalid source format")}};class Plyr{constructor(l,c){if(_defineProperty$1(this,"play",()=>is$2.function(this.media.play)?(this.ads&&this.ads.enabled&&this.ads.managerPromise.then(()=>this.ads.play()).catch(()=>silencePromise(this.media.play())),this.media.play()):null),_defineProperty$1(this,"pause",()=>this.playing&&is$2.function(this.media.pause)?this.media.pause():null),_defineProperty$1(this,"togglePlay",b=>(is$2.boolean(b)?b:!this.playing)?this.play():this.pause()),_defineProperty$1(this,"stop",()=>{this.isHTML5?(this.pause(),this.restart()):is$2.function(this.media.stop)&&this.media.stop()}),_defineProperty$1(this,"restart",()=>{this.currentTime=0}),_defineProperty$1(this,"rewind",b=>{this.currentTime-=is$2.number(b)?b:this.config.seekTime}),_defineProperty$1(this,"forward",b=>{this.currentTime+=is$2.number(b)?b:this.config.seekTime}),_defineProperty$1(this,"increaseVolume",b=>{const $=this.media.muted?0:this.volume;this.volume=$+(is$2.number(b)?b:0)}),_defineProperty$1(this,"decreaseVolume",b=>{this.increaseVolume(-b)}),_defineProperty$1(this,"airplay",()=>{support.airplay&&this.media.webkitShowPlaybackTargetPicker()}),_defineProperty$1(this,"toggleControls",b=>{if(this.supported.ui&&!this.isAudio){const $=hasClass(this.elements.container,this.config.classNames.hideControls),y=b===void 0?void 0:!b,x=toggleClass(this.elements.container,this.config.classNames.hideControls,y);if(x&&is$2.array(this.config.controls)&&this.config.controls.includes("settings")&&!is$2.empty(this.config.settings)&&controls.toggleMenu.call(this,!1),x!==$){const C=x?"controlshidden":"controlsshown";triggerEvent.call(this,this.media,C)}return!x}return!1}),_defineProperty$1(this,"on",(b,$)=>{on$1.call(this,this.elements.container,b,$)}),_defineProperty$1(this,"once",(b,$)=>{once.call(this,this.elements.container,b,$)}),_defineProperty$1(this,"off",(b,$)=>{off(this.elements.container,b,$)}),_defineProperty$1(this,"destroy",(b,$=!1)=>{if(!this.ready)return;const y=()=>{document.body.style.overflow="",this.embed=null,$?(Object.keys(this.elements).length&&(removeElement(this.elements.buttons.play),removeElement(this.elements.captions),removeElement(this.elements.controls),removeElement(this.elements.wrapper),this.elements.buttons.play=null,this.elements.captions=null,this.elements.controls=null,this.elements.wrapper=null),is$2.function(b)&&b()):(unbindListeners.call(this),html5.cancelRequests.call(this),replaceElement(this.elements.original,this.elements.container),triggerEvent.call(this,this.elements.original,"destroyed",!0),is$2.function(b)&&b.call(this.elements.original),this.ready=!1,setTimeout(()=>{this.elements=null,this.media=null},200))};this.stop(),clearTimeout(this.timers.loading),clearTimeout(this.timers.controls),clearTimeout(this.timers.resized),this.isHTML5?(ui$1.toggleNativeControls.call(this,!0),y()):this.isYouTube?(clearInterval(this.timers.buffering),clearInterval(this.timers.playing),this.embed!==null&&is$2.function(this.embed.destroy)&&this.embed.destroy(),y()):this.isVimeo&&(this.embed!==null&&this.embed.unload().then(y),setTimeout(y,200))}),_defineProperty$1(this,"supports",b=>support.mime.call(this,b)),this.timers={},this.ready=!1,this.loading=!1,this.failed=!1,this.touch=support.touch,this.media=l,is$2.string(this.media)&&(this.media=document.querySelectorAll(this.media)),(window.jQuery&&this.media instanceof jQuery||is$2.nodeList(this.media)||is$2.array(this.media))&&(this.media=this.media[0]),this.config=extend({},defaults,Plyr.defaults,c||{},(()=>{try{return JSON.parse(this.media.getAttribute("data-plyr-config"))}catch{return{}}})()),this.elements={container:null,fullscreen:null,captions:null,buttons:{},display:{},progress:{},inputs:{},settings:{popup:null,menu:null,panels:{},buttons:{}}},this.captions={active:null,currentTrack:-1,meta:new WeakMap},this.fullscreen={active:!1},this.options={speed:[],quality:[]},this.debug=new Console(this.config.debug),this.debug.log("Config",this.config),this.debug.log("Support",support),is$2.nullOrUndefined(this.media)||!is$2.element(this.media))return void this.debug.error("Setup failed: no suitable element passed");if(this.media.plyr)return void this.debug.warn("Target already setup");if(!this.config.enabled)return void this.debug.error("Setup failed: disabled by config");if(!support.check().api)return void this.debug.error("Setup failed: no support");const d=this.media.cloneNode(!0);d.autoplay=!1,this.elements.original=d;const f=this.media.tagName.toLowerCase();let g=null,v=null;switch(f){case"div":if(g=this.media.querySelector("iframe"),is$2.element(g)){if(v=parseUrl(g.getAttribute("src")),this.provider=getProviderByUrl(v.toString()),this.elements.container=this.media,this.media=g,this.elements.container.className="",v.search.length){const b=["1","true"];b.includes(v.searchParams.get("autoplay"))&&(this.config.autoplay=!0),b.includes(v.searchParams.get("loop"))&&(this.config.loop.active=!0),this.isYouTube?(this.config.playsinline=b.includes(v.searchParams.get("playsinline")),this.config.youtube.hl=v.searchParams.get("hl")):this.config.playsinline=!0}}else this.provider=this.media.getAttribute(this.config.attributes.embed.provider),this.media.removeAttribute(this.config.attributes.embed.provider);if(is$2.empty(this.provider)||!Object.values(providers).includes(this.provider))return void this.debug.error("Setup failed: Invalid provider");this.type=types.video;break;case"video":case"audio":this.type=f,this.provider=providers.html5,this.media.hasAttribute("crossorigin")&&(this.config.crossorigin=!0),this.media.hasAttribute("autoplay")&&(this.config.autoplay=!0),(this.media.hasAttribute("playsinline")||this.media.hasAttribute("webkit-playsinline"))&&(this.config.playsinline=!0),this.media.hasAttribute("muted")&&(this.config.muted=!0),this.media.hasAttribute("loop")&&(this.config.loop.active=!0);break;default:return void this.debug.error("Setup failed: unsupported type")}this.supported=support.check(this.type,this.provider),this.supported.api?(this.eventListeners=[],this.listeners=new Listeners(this),this.storage=new Storage(this),this.media.plyr=this,is$2.element(this.elements.container)||(this.elements.container=createElement("div"),wrap(this.media,this.elements.container)),ui$1.migrateStyles.call(this),ui$1.addStyleHook.call(this),media.setup.call(this),this.config.debug&&on$1.call(this,this.elements.container,this.config.events.join(" "),b=>{this.debug.log(`event: ${b.type}`)}),this.fullscreen=new Fullscreen(this),(this.isHTML5||this.isEmbed&&!this.supported.ui)&&ui$1.build.call(this),this.listeners.container(),this.listeners.global(),this.config.ads.enabled&&(this.ads=new Ads(this)),this.isHTML5&&this.config.autoplay&&this.once("canplay",()=>silencePromise(this.play())),this.lastSeekTime=0,this.config.previewThumbnails.enabled&&(this.previewThumbnails=new PreviewThumbnails(this))):this.debug.error("Setup failed: no support")}get isHTML5(){return this.provider===providers.html5}get isEmbed(){return this.isYouTube||this.isVimeo}get isYouTube(){return this.provider===providers.youtube}get isVimeo(){return this.provider===providers.vimeo}get isVideo(){return this.type===types.video}get isAudio(){return this.type===types.audio}get playing(){return!!(this.ready&&!this.paused&&!this.ended)}get paused(){return!!this.media.paused}get stopped(){return!!(this.paused&&this.currentTime===0)}get ended(){return!!this.media.ended}set currentTime(l){if(!this.duration)return;const c=is$2.number(l)&&l>0;this.media.currentTime=c?Math.min(l,this.duration):0,this.debug.log(`Seeking to ${this.currentTime} seconds`)}get currentTime(){return Number(this.media.currentTime)}get buffered(){const{buffered:l}=this.media;return is$2.number(l)?l:l&&l.length&&this.duration>0?l.end(0)/this.duration:0}get seeking(){return!!this.media.seeking}get duration(){const l=parseFloat(this.config.duration),c=(this.media||{}).duration,d=is$2.number(c)&&c!==1/0?c:0;return l||d}set volume(l){let c=l;is$2.string(c)&&(c=Number(c)),is$2.number(c)||(c=this.storage.get("volume")),is$2.number(c)||({volume:c}=this.config),c>1&&(c=1),c<0&&(c=0),this.config.volume=c,this.media.volume=c,!is$2.empty(l)&&this.muted&&c>0&&(this.muted=!1)}get volume(){return Number(this.media.volume)}set muted(l){let c=l;is$2.boolean(c)||(c=this.storage.get("muted")),is$2.boolean(c)||(c=this.config.muted),this.config.muted=c,this.media.muted=c}get muted(){return!!this.media.muted}get hasAudio(){return!this.isHTML5||!!this.isAudio||!!this.media.mozHasAudio||!!this.media.webkitAudioDecodedByteCount||!!(this.media.audioTracks&&this.media.audioTracks.length)}set speed(l){let c=null;is$2.number(l)&&(c=l),is$2.number(c)||(c=this.storage.get("speed")),is$2.number(c)||(c=this.config.speed.selected);const{minimumSpeed:d,maximumSpeed:f}=this;c=clamp(c,d,f),this.config.speed.selected=c,setTimeout(()=>{this.media&&(this.media.playbackRate=c)},0)}get speed(){return Number(this.media.playbackRate)}get minimumSpeed(){return this.isYouTube?Math.min(...this.options.speed):this.isVimeo?.5:.0625}get maximumSpeed(){return this.isYouTube?Math.max(...this.options.speed):this.isVimeo?2:16}set quality(l){const c=this.config.quality,d=this.options.quality;if(!d.length)return;let f=[!is$2.empty(l)&&Number(l),this.storage.get("quality"),c.selected,c.default].find(is$2.number),g=!0;if(!d.includes(f)){const v=closest(d,f);this.debug.warn(`Unsupported quality option: ${f}, using ${v} instead`),f=v,g=!1}c.selected=f,this.media.quality=f,g&&this.storage.set({quality:f})}get quality(){return this.media.quality}set loop(l){const c=is$2.boolean(l)?l:this.config.loop.active;this.config.loop.active=c,this.media.loop=c}get loop(){return!!this.media.loop}set source(l){source.change.call(this,l)}get source(){return this.media.currentSrc}get download(){const{download:l}=this.config.urls;return is$2.url(l)?l:this.source}set download(l){is$2.url(l)&&(this.config.urls.download=l,controls.setDownloadUrl.call(this))}set poster(l){this.isVideo?ui$1.setPoster.call(this,l,!1).catch(()=>{}):this.debug.warn("Poster can only be set for video")}get poster(){return this.isVideo?this.media.getAttribute("poster")||this.media.getAttribute("data-poster"):null}get ratio(){if(!this.isVideo)return null;const l=reduceAspectRatio(getAspectRatio.call(this));return is$2.array(l)?l.join(":"):l}set ratio(l){this.isVideo?is$2.string(l)&&validateAspectRatio(l)?(this.config.ratio=reduceAspectRatio(l),setAspectRatio.call(this)):this.debug.error(`Invalid aspect ratio specified (${l})`):this.debug.warn("Aspect ratio can only be set for video")}set autoplay(l){this.config.autoplay=is$2.boolean(l)?l:this.config.autoplay}get autoplay(){return!!this.config.autoplay}toggleCaptions(l){captions.toggle.call(this,l,!1)}set currentTrack(l){captions.set.call(this,l,!1),captions.setup.call(this)}get currentTrack(){const{toggled:l,currentTrack:c}=this.captions;return l?c:-1}set language(l){captions.setLanguage.call(this,l,!1)}get language(){return(captions.getCurrentTrack.call(this)||{}).language}set pip(l){if(!support.pip)return;const c=is$2.boolean(l)?l:!this.pip;is$2.function(this.media.webkitSetPresentationMode)&&this.media.webkitSetPresentationMode(c?pip.active:pip.inactive),is$2.function(this.media.requestPictureInPicture)&&(!this.pip&&c?this.media.requestPictureInPicture():this.pip&&!c&&document.exitPictureInPicture())}get pip(){return support.pip?is$2.empty(this.media.webkitPresentationMode)?this.media===document.pictureInPictureElement:this.media.webkitPresentationMode===pip.active:null}setPreviewThumbnails(l){this.previewThumbnails&&this.previewThumbnails.loaded&&(this.previewThumbnails.destroy(),this.previewThumbnails=null),Object.assign(this.config.previewThumbnails,l),this.config.previewThumbnails.enabled&&(this.previewThumbnails=new PreviewThumbnails(this))}static supported(l,c){return support.check(l,c)}static loadSprite(l,c){return loadSprite(l,c)}static setup(l,c={}){let d=null;return is$2.string(l)?d=Array.from(document.querySelectorAll(l)):is$2.nodeList(l)?d=Array.from(l):is$2.array(l)&&(d=l.filter(is$2.element)),is$2.empty(d)?null:d.map(f=>new Plyr(f,c))}}Plyr.defaults=cloneDeep(defaults);const BYTE_UNITS=["B","kB","MB","GB","TB","PB","EB","ZB","YB"],BIBYTE_UNITS=["B","KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],BIT_UNITS=["b","kbit","Mbit","Gbit","Tbit","Pbit","Ebit","Zbit","Ybit"],BIBIT_UNITS=["b","kibit","Mibit","Gibit","Tibit","Pibit","Eibit","Zibit","Yibit"],toLocaleString=(s,l,c)=>{let d=s;return typeof l=="string"||Array.isArray(l)?d=s.toLocaleString(l,c):(l===!0||c!==void 0)&&(d=s.toLocaleString(void 0,c)),d};function prettyBytes(s,l){if(!Number.isFinite(s))throw new TypeError(`Expected a finite number, got ${typeof s}: ${s}`);l={bits:!1,binary:!1,space:!0,...l};const c=l.bits?l.binary?BIBIT_UNITS:BIT_UNITS:l.binary?BIBYTE_UNITS:BYTE_UNITS,d=l.space?" ":"";if(l.signed&&s===0)return` 0${d}${c[0]}`;const f=s<0,g=f?"-":l.signed?"+":"";f&&(s=-s);let v;if(l.minimumFractionDigits!==void 0&&(v={minimumFractionDigits:l.minimumFractionDigits}),l.maximumFractionDigits!==void 0&&(v={maximumFractionDigits:l.maximumFractionDigits,...v}),s<1){const x=toLocaleString(s,l.locale,v);return g+x+d+c[0]}const b=Math.min(Math.floor(l.binary?Math.log(s)/Math.log(1024):Math.log10(s)/3),c.length-1);s/=(l.binary?1024:1e3)**b,v||(s=s.toPrecision(3));const $=toLocaleString(Number(s),l.locale,v),y=c[b];return g+$+d+y}class SourceLocation{constructor(l,c,d){this.lexer=void 0,this.start=void 0,this.end=void 0,this.lexer=l,this.start=c,this.end=d}static range(l,c){return c?!l||!l.loc||!c.loc||l.loc.lexer!==c.loc.lexer?null:new SourceLocation(l.loc.lexer,l.loc.start,c.loc.end):l&&l.loc}}class Token{constructor(l,c){this.text=void 0,this.loc=void 0,this.noexpand=void 0,this.treatAsRelax=void 0,this.text=l,this.loc=c}range(l,c){return new Token(c,SourceLocation.range(this,l))}}class ParseError{constructor(l,c){this.name=void 0,this.position=void 0,this.length=void 0,this.rawMessage=void 0;var d="KaTeX parse error: "+l,f,g,v=c&&c.loc;if(v&&v.start<=v.end){var b=v.lexer.input;f=v.start,g=v.end,f===b.length?d+=" at end of input: ":d+=" at position "+(f+1)+": ";var $=b.slice(f,g).replace(/[^]/g,"$&"),y;f>15?y=""+b.slice(f-15,f):y=b.slice(0,f);var x;g+15<b.length?x=b.slice(g,g+15)+"":x=b.slice(g),d+=y+$+x}var C=new Error(d);return C.name="ParseError",C.__proto__=ParseError.prototype,C.position=f,f!=null&&g!=null&&(C.length=g-f),C.rawMessage=l,C}}ParseError.prototype.__proto__=Error.prototype;var contains=function s(l,c){return l.indexOf(c)!==-1},deflt=function s(l,c){return l===void 0?c:l},uppercase=/([A-Z])/g,hyphenate=function s(l){return l.replace(uppercase,"-$1").toLowerCase()},ESCAPE_LOOKUP={"&":"&amp;",">":"&gt;","<":"&lt;",'"':"&quot;","'":"&#x27;"},ESCAPE_REGEX=/[&><"']/g;function escape$1(s){return String(s).replace(ESCAPE_REGEX,l=>ESCAPE_LOOKUP[l])}var getBaseElem=function s(l){return l.type==="ordgroup"||l.type==="color"?l.body.length===1?s(l.body[0]):l:l.type==="font"?s(l.body):l},isCharacterBox=function s(l){var c=getBaseElem(l);return c.type==="mathord"||c.type==="textord"||c.type==="atom"},assert=function s(l){if(!l)throw new Error("Expected non-null, but got "+String(l));return l},protocolFromUrl=function s(l){var c=/^[\x00-\x20]*([^\\/#?]*?)(:|&#0*58|&#x0*3a|&colon)/i.exec(l);return c?c[2]!==":"||!/^[a-zA-Z][a-zA-Z0-9+\-.]*$/.test(c[1])?null:c[1].toLowerCase():"_relative"},utils$3={contains,deflt,escape:escape$1,hyphenate,getBaseElem,isCharacterBox,protocolFromUrl},SETTINGS_SCHEMA={displayMode:{type:"boolean",description:"Render math in display mode, which puts the math in display style (so \\int and \\sum are large, for example), and centers the math on the page on its own line.",cli:"-d, --display-mode"},output:{type:{enum:["htmlAndMathml","html","mathml"]},description:"Determines the markup language of the output.",cli:"-F, --format <type>"},leqno:{type:"boolean",description:"Render display math in leqno style (left-justified tags)."},fleqn:{type:"boolean",description:"Render display math flush left."},throwOnError:{type:"boolean",default:!0,cli:"-t, --no-throw-on-error",cliDescription:"Render errors (in the color given by --error-color) instead of throwing a ParseError exception when encountering an error."},errorColor:{type:"string",default:"#cc0000",cli:"-c, --error-color <color>",cliDescription:"A color string given in the format 'rgb' or 'rrggbb' (no #). This option determines the color of errors rendered by the -t option.",cliProcessor:s=>"#"+s},macros:{type:"object",cli:"-m, --macro <def>",cliDescription:"Define custom macro of the form '\\foo:expansion' (use multiple -m arguments for multiple macros).",cliDefault:[],cliProcessor:(s,l)=>(l.push(s),l)},minRuleThickness:{type:"number",description:"Specifies a minimum thickness, in ems, for fraction lines, `\\sqrt` top lines, `{array}` vertical lines, `\\hline`, `\\hdashline`, `\\underline`, `\\overline`, and the borders of `\\fbox`, `\\boxed`, and `\\fcolorbox`.",processor:s=>Math.max(0,s),cli:"--min-rule-thickness <size>",cliProcessor:parseFloat},colorIsTextColor:{type:"boolean",description:"Makes \\color behave like LaTeX's 2-argument \\textcolor, instead of LaTeX's one-argument \\color mode change.",cli:"-b, --color-is-text-color"},strict:{type:[{enum:["warn","ignore","error"]},"boolean","function"],description:"Turn on strict / LaTeX faithfulness mode, which throws an error if the input uses features that are not supported by LaTeX.",cli:"-S, --strict",cliDefault:!1},trust:{type:["boolean","function"],description:"Trust the input, enabling all HTML features such as \\url.",cli:"-T, --trust"},maxSize:{type:"number",default:1/0,description:"If non-zero, all user-specified sizes, e.g. in \\rule{500em}{500em}, will be capped to maxSize ems. Otherwise, elements and spaces can be arbitrarily large",processor:s=>Math.max(0,s),cli:"-s, --max-size <n>",cliProcessor:parseInt},maxExpand:{type:"number",default:1e3,description:"Limit the number of macro expansions to the specified number, to prevent e.g. infinite macro loops. If set to Infinity, the macro expander will try to fully expand as in LaTeX.",processor:s=>Math.max(0,s),cli:"-e, --max-expand <n>",cliProcessor:s=>s==="Infinity"?1/0:parseInt(s)},globalGroup:{type:"boolean",cli:!1}};function getDefaultValue(s){if(s.default)return s.default;var l=s.type,c=Array.isArray(l)?l[0]:l;if(typeof c!="string")return c.enum[0];switch(c){case"boolean":return!1;case"string":return"";case"number":return 0;case"object":return{}}}class Settings{constructor(l){this.displayMode=void 0,this.output=void 0,this.leqno=void 0,this.fleqn=void 0,this.throwOnError=void 0,this.errorColor=void 0,this.macros=void 0,this.minRuleThickness=void 0,this.colorIsTextColor=void 0,this.strict=void 0,this.trust=void 0,this.maxSize=void 0,this.maxExpand=void 0,this.globalGroup=void 0,l=l||{};for(var c in SETTINGS_SCHEMA)if(SETTINGS_SCHEMA.hasOwnProperty(c)){var d=SETTINGS_SCHEMA[c];this[c]=l[c]!==void 0?d.processor?d.processor(l[c]):l[c]:getDefaultValue(d)}}reportNonstrict(l,c,d){var f=this.strict;if(typeof f=="function"&&(f=f(l,c,d)),!(!f||f==="ignore")){if(f===!0||f==="error")throw new ParseError("LaTeX-incompatible input and strict mode is set to 'error': "+(c+" ["+l+"]"),d);f==="warn"?typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(c+" ["+l+"]")):typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+f+"': "+c+" ["+l+"]"))}}useStrictBehavior(l,c,d){var f=this.strict;if(typeof f=="function")try{f=f(l,c,d)}catch{f="error"}return!f||f==="ignore"?!1:f===!0||f==="error"?!0:f==="warn"?(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to 'warn': "+(c+" ["+l+"]")),!1):(typeof console<"u"&&console.warn("LaTeX-incompatible input and strict mode is set to "+("unrecognized '"+f+"': "+c+" ["+l+"]")),!1)}isTrusted(l){if(l.url&&!l.protocol){var c=utils$3.protocolFromUrl(l.url);if(c==null)return!1;l.protocol=c}var d=typeof this.trust=="function"?this.trust(l):this.trust;return!!d}}class Style{constructor(l,c,d){this.id=void 0,this.size=void 0,this.cramped=void 0,this.id=l,this.size=c,this.cramped=d}sup(){return styles[sup[this.id]]}sub(){return styles[sub[this.id]]}fracNum(){return styles[fracNum[this.id]]}fracDen(){return styles[fracDen[this.id]]}cramp(){return styles[cramp[this.id]]}text(){return styles[text$1[this.id]]}isTight(){return this.size>=2}}var D$1=0,Dc$1=1,T$1=2,Tc$1=3,S$1=4,Sc$1=5,SS=6,SSc=7,styles=[new Style(D$1,0,!1),new Style(Dc$1,0,!0),new Style(T$1,1,!1),new Style(Tc$1,1,!0),new Style(S$1,2,!1),new Style(Sc$1,2,!0),new Style(SS,3,!1),new Style(SSc,3,!0)],sup=[S$1,Sc$1,S$1,Sc$1,SS,SSc,SS,SSc],sub=[Sc$1,Sc$1,Sc$1,Sc$1,SSc,SSc,SSc,SSc],fracNum=[T$1,Tc$1,S$1,Sc$1,SS,SSc,SS,SSc],fracDen=[Tc$1,Tc$1,Sc$1,Sc$1,SSc,SSc,SSc,SSc],cramp=[Dc$1,Dc$1,Tc$1,Tc$1,Sc$1,Sc$1,SSc,SSc],text$1=[D$1,Dc$1,T$1,Tc$1,T$1,Tc$1,T$1,Tc$1],Style$1={DISPLAY:styles[D$1],TEXT:styles[T$1],SCRIPT:styles[S$1],SCRIPTSCRIPT:styles[SS]},scriptData=[{name:"latin",blocks:[[256,591],[768,879]]},{name:"cyrillic",blocks:[[1024,1279]]},{name:"armenian",blocks:[[1328,1423]]},{name:"brahmic",blocks:[[2304,4255]]},{name:"georgian",blocks:[[4256,4351]]},{name:"cjk",blocks:[[12288,12543],[19968,40879],[65280,65376]]},{name:"hangul",blocks:[[44032,55215]]}];function scriptFromCodepoint(s){for(var l=0;l<scriptData.length;l++)for(var c=scriptData[l],d=0;d<c.blocks.length;d++){var f=c.blocks[d];if(s>=f[0]&&s<=f[1])return c.name}return null}var allBlocks=[];scriptData.forEach(s=>s.blocks.forEach(l=>allBlocks.push(...l)));function supportedCodepoint(s){for(var l=0;l<allBlocks.length;l+=2)if(s>=allBlocks[l]&&s<=allBlocks[l+1])return!0;return!1}var hLinePad=80,sqrtMain=function s(l,c){return"M95,"+(622+l+c)+`
c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14
c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54
c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10
s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429
c69,-144,104.5,-217.7,106.5,-221
l`+l/2.075+" -"+l+`
c5.3,-9.3,12,-14,20,-14
H400000v`+(40+l)+`H845.2724
s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7
c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z
M`+(834+l)+" "+c+"h400000v"+(40+l)+"h-400000z"},sqrtSize1=function s(l,c){return"M263,"+(601+l+c)+`c0.7,0,18,39.7,52,119
c34,79.3,68.167,158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120
c340,-704.7,510.7,-1060.3,512,-1067
l`+l/2.084+" -"+l+`
c4.7,-7.3,11,-11,19,-11
H40000v`+(40+l)+`H1012.3
s-271.3,567,-271.3,567c-38.7,80.7,-84,175,-136,283c-52,108,-89.167,185.3,-111.5,232
c-22.3,46.7,-33.8,70.3,-34.5,71c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1
s-109,-253,-109,-253c-72.7,-168,-109.3,-252,-110,-252c-10.7,8,-22,16.7,-34,26
c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26s76,-59,76,-59s76,-60,76,-60z
M`+(1001+l)+" "+c+"h400000v"+(40+l)+"h-400000z"},sqrtSize2=function s(l,c){return"M983 "+(10+l+c)+`
l`+l/3.13+" -"+l+`
c4,-6.7,10,-10,18,-10 H400000v`+(40+l)+`
H1013.1s-83.4,268,-264.1,840c-180.7,572,-277,876.3,-289,913c-4.7,4.7,-12.7,7,-24,7
s-12,0,-12,0c-1.3,-3.3,-3.7,-11.7,-7,-25c-35.3,-125.3,-106.7,-373.3,-214,-744
c-10,12,-21,25,-33,39s-32,39,-32,39c-6,-5.3,-15,-14,-27,-26s25,-30,25,-30
c26.7,-32.7,52,-63,76,-91s52,-60,52,-60s208,722,208,722
c56,-175.3,126.3,-397.3,211,-666c84.7,-268.7,153.8,-488.2,207.5,-658.5
c53.7,-170.3,84.5,-266.8,92.5,-289.5z
M`+(1001+l)+" "+c+"h400000v"+(40+l)+"h-400000z"},sqrtSize3=function s(l,c){return"M424,"+(2398+l+c)+`
c-1.3,-0.7,-38.5,-172,-111.5,-514c-73,-342,-109.8,-513.3,-110.5,-514
c0,-2,-10.7,14.3,-32,49c-4.7,7.3,-9.8,15.7,-15.5,25c-5.7,9.3,-9.8,16,-12.5,20
s-5,7,-5,7c-4,-3.3,-8.3,-7.7,-13,-13s-13,-13,-13,-13s76,-122,76,-122s77,-121,77,-121
s209,968,209,968c0,-2,84.7,-361.7,254,-1079c169.3,-717.3,254.7,-1077.7,256,-1081
l`+l/4.223+" -"+l+`c4,-6.7,10,-10,18,-10 H400000
v`+(40+l)+`H1014.6
s-87.3,378.7,-272.6,1166c-185.3,787.3,-279.3,1182.3,-282,1185
c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2z M`+(1001+l)+" "+c+`
h400000v`+(40+l)+"h-400000z"},sqrtSize4=function s(l,c){return"M473,"+(2713+l+c)+`
c339.3,-1799.3,509.3,-2700,510,-2702 l`+l/5.298+" -"+l+`
c3.3,-7.3,9.3,-11,18,-11 H400000v`+(40+l)+`H1017.7
s-90.5,478,-276.2,1466c-185.7,988,-279.5,1483,-281.5,1485c-2,6,-10,9,-24,9
c-8,0,-12,-0.7,-12,-2c0,-1.3,-5.3,-32,-16,-92c-50.7,-293.3,-119.7,-693.3,-207,-1200
c0,-1.3,-5.3,8.7,-16,30c-10.7,21.3,-21.3,42.7,-32,64s-16,33,-16,33s-26,-26,-26,-26
s76,-153,76,-153s77,-151,77,-151c0.7,0.7,35.7,202,105,604c67.3,400.7,102,602.7,104,
606zM`+(1001+l)+" "+c+"h400000v"+(40+l)+"H1017.7z"},phasePath=function s(l){var c=l/2;return"M400000 "+l+" H0 L"+c+" 0 l65 45 L145 "+(l-80)+" H400000z"},sqrtTall=function s(l,c,d){var f=d-54-c-l;return"M702 "+(l+c)+"H400000"+(40+l)+`
H742v`+f+`l-4 4-4 4c-.667.7 -2 1.5-4 2.5s-4.167 1.833-6.5 2.5-5.5 1-9.5 1
h-12l-28-84c-16.667-52-96.667 -294.333-240-727l-212 -643 -85 170
c-4-3.333-8.333-7.667-13 -13l-13-13l77-155 77-156c66 199.333 139 419.667
219 661 l218 661zM702 `+c+"H400000v"+(40+l)+"H742z"},sqrtPath=function s(l,c,d){c=1e3*c;var f="";switch(l){case"sqrtMain":f=sqrtMain(c,hLinePad);break;case"sqrtSize1":f=sqrtSize1(c,hLinePad);break;case"sqrtSize2":f=sqrtSize2(c,hLinePad);break;case"sqrtSize3":f=sqrtSize3(c,hLinePad);break;case"sqrtSize4":f=sqrtSize4(c,hLinePad);break;case"sqrtTall":f=sqrtTall(c,hLinePad,d)}return f},innerPath=function s(l,c){switch(l){case"":return"M291 0 H417 V"+c+" H291z M291 0 H417 V"+c+" H291z";case"":return"M145 0 H188 V"+c+" H145z M145 0 H188 V"+c+" H145z";case"":return"M145 0 H188 V"+c+" H145z M145 0 H188 V"+c+" H145z"+("M367 0 H410 V"+c+" H367z M367 0 H410 V"+c+" H367z");case"":return"M457 0 H583 V"+c+" H457z M457 0 H583 V"+c+" H457z";case"":return"M319 0 H403 V"+c+" H319z M319 0 H403 V"+c+" H319z";case"":return"M263 0 H347 V"+c+" H263z M263 0 H347 V"+c+" H263z";case"":return"M384 0 H504 V"+c+" H384z M384 0 H504 V"+c+" H384z";case"":return"M312 0 H355 V"+c+" H312z M312 0 H355 V"+c+" H312z";case"":return"M257 0 H300 V"+c+" H257z M257 0 H300 V"+c+" H257z"+("M478 0 H521 V"+c+" H478z M478 0 H521 V"+c+" H478z");default:return""}},path={doubleleftarrow:`M262 157
l10-10c34-36 62.7-77 86-123 3.3-8 5-13.3 5-16 0-5.3-6.7-8-20-8-7.3
 0-12.2.5-14.5 1.5-2.3 1-4.8 4.5-7.5 10.5-49.3 97.3-121.7 169.3-217 216-28
 14-57.3 25-88 33-6.7 2-11 3.8-13 5.5-2 1.7-3 4.2-3 7.5s1 5.8 3 7.5
c2 1.7 6.3 3.5 13 5.5 68 17.3 128.2 47.8 180.5 91.5 52.3 43.7 93.8 96.2 124.5
 157.5 9.3 8 15.3 12.3 18 13h6c12-.7 18-4 18-10 0-2-1.7-7-5-15-23.3-46-52-87
-86-123l-10-10h399738v-40H218c328 0 0 0 0 0l-10-8c-26.7-20-65.7-43-117-69 2.7
-2 6-3.7 10-5 36.7-16 72.3-37.3 107-64l10-8h399782v-40z
m8 0v40h399730v-40zm0 194v40h399730v-40z`,doublerightarrow:`M399738 392l
-10 10c-34 36-62.7 77-86 123-3.3 8-5 13.3-5 16 0 5.3 6.7 8 20 8 7.3 0 12.2-.5
 14.5-1.5 2.3-1 4.8-4.5 7.5-10.5 49.3-97.3 121.7-169.3 217-216 28-14 57.3-25 88
-33 6.7-2 11-3.8 13-5.5 2-1.7 3-4.2 3-7.5s-1-5.8-3-7.5c-2-1.7-6.3-3.5-13-5.5-68
-17.3-128.2-47.8-180.5-91.5-52.3-43.7-93.8-96.2-124.5-157.5-9.3-8-15.3-12.3-18
-13h-6c-12 .7-18 4-18 10 0 2 1.7 7 5 15 23.3 46 52 87 86 123l10 10H0v40h399782
c-328 0 0 0 0 0l10 8c26.7 20 65.7 43 117 69-2.7 2-6 3.7-10 5-36.7 16-72.3 37.3
-107 64l-10 8H0v40zM0 157v40h399730v-40zm0 194v40h399730v-40z`,leftarrow:`M400000 241H110l3-3c68.7-52.7 113.7-120
 135-202 4-14.7 6-23 6-25 0-7.3-7-11-21-11-8 0-13.2.8-15.5 2.5-2.3 1.7-4.2 5.8
-5.5 12.5-1.3 4.7-2.7 10.3-4 17-12 48.7-34.8 92-68.5 130S65.3 228.3 18 247
c-10 4-16 7.7-18 11 0 8.7 6 14.3 18 17 47.3 18.7 87.8 47 121.5 85S196 441.3 208
 490c.7 2 1.3 5 2 9s1.2 6.7 1.5 8c.3 1.3 1 3.3 2 6s2.2 4.5 3.5 5.5c1.3 1 3.3
 1.8 6 2.5s6 1 10 1c14 0 21-3.7 21-11 0-2-2-10.3-6-25-20-79.3-65-146.7-135-202
 l-3-3h399890zM100 241v40h399900v-40z`,leftbrace:`M6 548l-6-6v-35l6-11c56-104 135.3-181.3 238-232 57.3-28.7 117
-45 179-50h399577v120H403c-43.3 7-81 15-113 26-100.7 33-179.7 91-237 174-2.7
 5-6 9-10 13-.7 1-7.3 1-20 1H6z`,leftbraceunder:`M0 6l6-6h17c12.688 0 19.313.3 20 1 4 4 7.313 8.3 10 13
 35.313 51.3 80.813 93.8 136.5 127.5 55.688 33.7 117.188 55.8 184.5 66.5.688
 0 2 .3 4 1 18.688 2.7 76 4.3 172 5h399450v120H429l-6-1c-124.688-8-235-61.7
-331-161C60.687 138.7 32.312 99.3 7 54L0 41V6z`,leftgroup:`M400000 80
H435C64 80 168.3 229.4 21 260c-5.9 1.2-18 0-18 0-2 0-3-1-3-3v-38C76 61 257 0
 435 0h399565z`,leftgroupunder:`M400000 262
H435C64 262 168.3 112.6 21 82c-5.9-1.2-18 0-18 0-2 0-3 1-3 3v38c76 158 257 219
 435 219h399565z`,leftharpoon:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3
-3.3 10.2-9.5 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5
-18.3 3-21-1.3-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7
-196 228-6.7 4.7-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40z`,leftharpoonplus:`M0 267c.7 5.3 3 10 7 14h399993v-40H93c3.3-3.3 10.2-9.5
 20.5-18.5s17.8-15.8 22.5-20.5c50.7-52 88-110.3 112-175 4-11.3 5-18.3 3-21-1.3
-4-7.3-6-18-6-8 0-13 .7-15 2s-4.7 6.7-8 16c-42 98.7-107.3 174.7-196 228-6.7 4.7
-10.7 8-12 10-1.3 2-2 5.7-2 11zm100-26v40h399900v-40zM0 435v40h400000v-40z
m0 0v40h400000v-40z`,leftharpoondown:`M7 241c-4 4-6.333 8.667-7 14 0 5.333.667 9 2 11s5.333
 5.333 12 10c90.667 54 156 130 196 228 3.333 10.667 6.333 16.333 9 17 2 .667 5
 1 9 1h5c10.667 0 16.667-2 18-6 2-2.667 1-9.667-3-21-32-87.333-82.667-157.667
-152-211l-3-3h399907v-40zM93 281 H400000 v-40L7 241z`,leftharpoondownplus:`M7 435c-4 4-6.3 8.7-7 14 0 5.3.7 9 2 11s5.3 5.3 12
 10c90.7 54 156 130 196 228 3.3 10.7 6.3 16.3 9 17 2 .7 5 1 9 1h5c10.7 0 16.7
-2 18-6 2-2.7 1-9.7-3-21-32-87.3-82.7-157.7-152-211l-3-3h399907v-40H7zm93 0
v40h399900v-40zM0 241v40h399900v-40zm0 0v40h399900v-40z`,lefthook:`M400000 281 H103s-33-11.2-61-33.5S0 197.3 0 164s14.2-61.2 42.5
-83.5C70.8 58.2 104 47 142 47 c16.7 0 25 6.7 25 20 0 12-8.7 18.7-26 20-40 3.3
-68.7 15.7-86 37-10 12-15 25.3-15 40 0 22.7 9.8 40.7 29.5 54 19.7 13.3 43.5 21
 71.5 23h399859zM103 281v-40h399897v40z`,leftlinesegment:`M40 281 V428 H0 V94 H40 V241 H400000 v40z
M40 281 V428 H0 V94 H40 V241 H400000 v40z`,leftmapsto:`M40 281 V448H0V74H40V241H400000v40z
M40 281 V448H0V74H40V241H400000v40z`,leftToFrom:`M0 147h400000v40H0zm0 214c68 40 115.7 95.7 143 167h22c15.3 0 23
-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69-70-101l-7-8h399905v-40H95l7-8
c28.7-32 52-65.7 70-101 10.7-23.3 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 265.3
 68 321 0 361zm0-174v-40h399900v40zm100 154v40h399900v-40z`,longequal:`M0 50 h400000 v40H0z m0 194h40000v40H0z
M0 50 h400000 v40H0z m0 194h40000v40H0z`,midbrace:`M200428 334
c-100.7-8.3-195.3-44-280-108-55.3-42-101.7-93-139-153l-9-14c-2.7 4-5.7 8.7-9 14
-53.3 86.7-123.7 153-211 199-66.7 36-137.3 56.3-212 62H0V214h199568c178.3-11.7
 311.7-78.3 403-201 6-8 9.7-12 11-12 .7-.7 6.7-1 18-1s17.3.3 18 1c1.3 0 5 4 11
 12 44.7 59.3 101.3 106.3 170 141s145.3 54.3 229 60h199572v120z`,midbraceunder:`M199572 214
c100.7 8.3 195.3 44 280 108 55.3 42 101.7 93 139 153l9 14c2.7-4 5.7-8.7 9-14
 53.3-86.7 123.7-153 211-199 66.7-36 137.3-56.3 212-62h199568v120H200432c-178.3
 11.7-311.7 78.3-403 201-6 8-9.7 12-11 12-.7.7-6.7 1-18 1s-17.3-.3-18-1c-1.3 0
-5-4-11-12-44.7-59.3-101.3-106.3-170-141s-145.3-54.3-229-60H0V214z`,oiintSize1:`M512.6 71.6c272.6 0 320.3 106.8 320.3 178.2 0 70.8-47.7 177.6
-320.3 177.6S193.1 320.6 193.1 249.8c0-71.4 46.9-178.2 319.5-178.2z
m368.1 178.2c0-86.4-60.9-215.4-368.1-215.4-306.4 0-367.3 129-367.3 215.4 0 85.8
60.9 214.8 367.3 214.8 307.2 0 368.1-129 368.1-214.8z`,oiintSize2:`M757.8 100.1c384.7 0 451.1 137.6 451.1 230 0 91.3-66.4 228.8
-451.1 228.8-386.3 0-452.7-137.5-452.7-228.8 0-92.4 66.4-230 452.7-230z
m502.4 230c0-111.2-82.4-277.2-502.4-277.2s-504 166-504 277.2
c0 110 84 276 504 276s502.4-166 502.4-276z`,oiiintSize1:`M681.4 71.6c408.9 0 480.5 106.8 480.5 178.2 0 70.8-71.6 177.6
-480.5 177.6S202.1 320.6 202.1 249.8c0-71.4 70.5-178.2 479.3-178.2z
m525.8 178.2c0-86.4-86.8-215.4-525.7-215.4-437.9 0-524.7 129-524.7 215.4 0
85.8 86.8 214.8 524.7 214.8 438.9 0 525.7-129 525.7-214.8z`,oiiintSize2:`M1021.2 53c603.6 0 707.8 165.8 707.8 277.2 0 110-104.2 275.8
-707.8 275.8-606 0-710.2-165.8-710.2-275.8C311 218.8 415.2 53 1021.2 53z
m770.4 277.1c0-131.2-126.4-327.6-770.5-327.6S248.4 198.9 248.4 330.1
c0 130 128.8 326.4 772.7 326.4s770.5-196.4 770.5-326.4z`,rightarrow:`M0 241v40h399891c-47.3 35.3-84 78-110 128
-16.7 32-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20
 11 8 0 13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7
 39-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85
-40.5-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
 151.7 139 205zm0 0v40h399900v-40z`,rightbrace:`M400000 542l
-6 6h-17c-12.7 0-19.3-.3-20-1-4-4-7.3-8.3-10-13-35.3-51.3-80.8-93.8-136.5-127.5
s-117.2-55.8-184.5-66.5c-.7 0-2-.3-4-1-18.7-2.7-76-4.3-172-5H0V214h399571l6 1
c124.7 8 235 61.7 331 161 31.3 33.3 59.7 72.7 85 118l7 13v35z`,rightbraceunder:`M399994 0l6 6v35l-6 11c-56 104-135.3 181.3-238 232-57.3
 28.7-117 45-179 50H-300V214h399897c43.3-7 81-15 113-26 100.7-33 179.7-91 237
-174 2.7-5 6-9 10-13 .7-1 7.3-1 20-1h17z`,rightgroup:`M0 80h399565c371 0 266.7 149.4 414 180 5.9 1.2 18 0 18 0 2 0
 3-1 3-3v-38c-76-158-257-219-435-219H0z`,rightgroupunder:`M0 262h399565c371 0 266.7-149.4 414-180 5.9-1.2 18 0 18
 0 2 0 3 1 3 3v38c-76 158-257 219-435 219H0z`,rightharpoon:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3
-3.7-15.3-11-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2
-10.7 0-16.7 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58
 69.2 92 94.5zm0 0v40h399900v-40z`,rightharpoonplus:`M0 241v40h399993c4.7-4.7 7-9.3 7-14 0-9.3-3.7-15.3-11
-18-92.7-56.7-159-133.7-199-231-3.3-9.3-6-14.7-8-16-2-1.3-7-2-15-2-10.7 0-16.7
 2-18 6-2 2.7-1 9.7 3 21 15.3 42 36.7 81.8 64 119.5 27.3 37.7 58 69.2 92 94.5z
m0 0v40h399900v-40z m100 194v40h399900v-40zm0 0v40h399900v-40z`,rightharpoondown:`M399747 511c0 7.3 6.7 11 20 11 8 0 13-.8 15-2.5s4.7-6.8
 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3 8.5-5.8 9.5
-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3-64.7 57-92 95
-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 241v40h399900v-40z`,rightharpoondownplus:`M399747 705c0 7.3 6.7 11 20 11 8 0 13-.8
 15-2.5s4.7-6.8 8-15.5c40-94 99.3-166.3 178-217 13.3-8 20.3-12.3 21-13 5.3-3.3
 8.5-5.8 9.5-7.5 1-1.7 1.5-5.2 1.5-10.5s-2.3-10.3-7-15H0v40h399908c-34 25.3
-64.7 57-92 95-27.3 38-48.7 77.7-64 119-3.3 8.7-5 14-5 16zM0 435v40h399900v-40z
m0-194v40h400000v-40zm0 0v40h400000v-40z`,righthook:`M399859 241c-764 0 0 0 0 0 40-3.3 68.7-15.7 86-37 10-12 15-25.3
 15-40 0-22.7-9.8-40.7-29.5-54-19.7-13.3-43.5-21-71.5-23-17.3-1.3-26-8-26-20 0
-13.3 8.7-20 26-20 38 0 71 11.2 99 33.5 0 0 7 5.6 21 16.7 14 11.2 21 33.5 21
 66.8s-14 61.2-42 83.5c-28 22.3-61 33.5-99 33.5L0 241z M0 281v-40h399859v40z`,rightlinesegment:`M399960 241 V94 h40 V428 h-40 V281 H0 v-40z
M399960 241 V94 h40 V428 h-40 V281 H0 v-40z`,rightToFrom:`M400000 167c-70.7-42-118-97.7-142-167h-23c-15.3 0-23 .3-23
 1 0 1.3 5.3 13.7 16 37 18 35.3 41.3 69 70 101l7 8H0v40h399905l-7 8c-28.7 32
-52 65.7-70 101-10.7 23.3-16 35.7-16 37 0 .7 7.7 1 23 1h23c24-69.3 71.3-125 142
-167z M100 147v40h399900v-40zM0 341v40h399900v-40z`,twoheadleftarrow:`M0 167c68 40
 115.7 95.7 143 167h22c15.3 0 23-.3 23-1 0-1.3-5.3-13.7-16-37-18-35.3-41.3-69
-70-101l-7-8h125l9 7c50.7 39.3 85 86 103 140h46c0-4.7-6.3-18.7-19-42-18-35.3
-40-67.3-66-96l-9-9h399716v-40H284l9-9c26-28.7 48-60.7 66-96 12.7-23.333 19
-37.333 19-42h-46c-18 54-52.3 100.7-103 140l-9 7H95l7-8c28.7-32 52-65.7 70-101
 10.7-23.333 16-35.7 16-37 0-.7-7.7-1-23-1h-22C115.7 71.3 68 127 0 167z`,twoheadrightarrow:`M400000 167
c-68-40-115.7-95.7-143-167h-22c-15.3 0-23 .3-23 1 0 1.3 5.3 13.7 16 37 18 35.3
 41.3 69 70 101l7 8h-125l-9-7c-50.7-39.3-85-86-103-140h-46c0 4.7 6.3 18.7 19 42
 18 35.3 40 67.3 66 96l9 9H0v40h399716l-9 9c-26 28.7-48 60.7-66 96-12.7 23.333
-19 37.333-19 42h46c18-54 52.3-100.7 103-140l9-7h125l-7 8c-28.7 32-52 65.7-70
 101-10.7 23.333-16 35.7-16 37 0 .7 7.7 1 23 1h22c27.3-71.3 75-127 143-167z`,tilde1:`M200 55.538c-77 0-168 73.953-177 73.953-3 0-7
-2.175-9-5.437L2 97c-1-2-2-4-2-6 0-4 2-7 5-9l20-12C116 12 171 0 207 0c86 0
 114 68 191 68 78 0 168-68 177-68 4 0 7 2 9 5l12 19c1 2.175 2 4.35 2 6.525 0
 4.35-2 7.613-5 9.788l-19 13.05c-92 63.077-116.937 75.308-183 76.128
-68.267.847-113-73.952-191-73.952z`,tilde2:`M344 55.266c-142 0-300.638 81.316-311.5 86.418
-8.01 3.762-22.5 10.91-23.5 5.562L1 120c-1-2-1-3-1-4 0-5 3-9 8-10l18.4-9C160.9
 31.9 283 0 358 0c148 0 188 122 331 122s314-97 326-97c4 0 8 2 10 7l7 21.114
c1 2.14 1 3.21 1 4.28 0 5.347-3 9.626-7 10.696l-22.3 12.622C852.6 158.372 751
 181.476 676 181.476c-149 0-189-126.21-332-126.21z`,tilde3:`M786 59C457 59 32 175.242 13 175.242c-6 0-10-3.457
-11-10.37L.15 138c-1-7 3-12 10-13l19.2-6.4C378.4 40.7 634.3 0 804.3 0c337 0
 411.8 157 746.8 157 328 0 754-112 773-112 5 0 10 3 11 9l1 14.075c1 8.066-.697
 16.595-6.697 17.492l-21.052 7.31c-367.9 98.146-609.15 122.696-778.15 122.696
 -338 0-409-156.573-744-156.573z`,tilde4:`M786 58C457 58 32 177.487 13 177.487c-6 0-10-3.345
-11-10.035L.15 143c-1-7 3-12 10-13l22-6.7C381.2 35 637.15 0 807.15 0c337 0 409
 177 744 177 328 0 754-127 773-127 5 0 10 3 11 9l1 14.794c1 7.805-3 13.38-9
 14.495l-20.7 5.574c-366.85 99.79-607.3 139.372-776.3 139.372-338 0-409
 -175.236-744-175.236z`,vec:`M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 5
3.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 11
10.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63
-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1
-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59
H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359
c-16-25.333-24-45-24-59z`,widehat1:`M529 0h5l519 115c5 1 9 5 9 10 0 1-1 2-1 3l-4 22
c-1 5-5 9-11 9h-2L532 67 19 159h-2c-5 0-9-4-11-9l-5-22c-1-6 2-12 8-13z`,widehat2:`M1181 0h2l1171 176c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 220h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat3:`M1181 0h2l1171 236c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 280h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widehat4:`M1181 0h2l1171 296c6 0 10 5 10 11l-2 23c-1 6-5 10
-11 10h-1L1182 67 15 340h-1c-6 0-10-4-11-10l-2-23c-1-6 4-11 10-11z`,widecheck1:`M529,159h5l519,-115c5,-1,9,-5,9,-10c0,-1,-1,-2,-1,-3l-4,-22c-1,
-5,-5,-9,-11,-9h-2l-512,92l-513,-92h-2c-5,0,-9,4,-11,9l-5,22c-1,6,2,12,8,13z`,widecheck2:`M1181,220h2l1171,-176c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,153l-1167,-153h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck3:`M1181,280h2l1171,-236c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,213l-1167,-213h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,widecheck4:`M1181,340h2l1171,-296c6,0,10,-5,10,-11l-2,-23c-1,-6,-5,-10,
-11,-10h-1l-1168,273l-1167,-273h-1c-6,0,-10,4,-11,10l-2,23c-1,6,4,11,10,11z`,baraboveleftarrow:`M400000 620h-399890l3 -3c68.7 -52.7 113.7 -120 135 -202
c4 -14.7 6 -23 6 -25c0 -7.3 -7 -11 -21 -11c-8 0 -13.2 0.8 -15.5 2.5
c-2.3 1.7 -4.2 5.8 -5.5 12.5c-1.3 4.7 -2.7 10.3 -4 17c-12 48.7 -34.8 92 -68.5 130
s-74.2 66.3 -121.5 85c-10 4 -16 7.7 -18 11c0 8.7 6 14.3 18 17c47.3 18.7 87.8 47
121.5 85s56.5 81.3 68.5 130c0.7 2 1.3 5 2 9s1.2 6.7 1.5 8c0.3 1.3 1 3.3 2 6
s2.2 4.5 3.5 5.5c1.3 1 3.3 1.8 6 2.5s6 1 10 1c14 0 21 -3.7 21 -11
c0 -2 -2 -10.3 -6 -25c-20 -79.3 -65 -146.7 -135 -202l-3 -3h399890z
M100 620v40h399900v-40z M0 241v40h399900v-40zM0 241v40h399900v-40z`,rightarrowabovebar:`M0 241v40h399891c-47.3 35.3-84 78-110 128-16.7 32
-27.7 63.7-33 95 0 1.3-.2 2.7-.5 4-.3 1.3-.5 2.3-.5 3 0 7.3 6.7 11 20 11 8 0
13.2-.8 15.5-2.5 2.3-1.7 4.2-5.5 5.5-11.5 2-13.3 5.7-27 11-41 14.7-44.7 39
-84.5 73-119.5s73.7-60.2 119-75.5c6-2 9-5.7 9-11s-3-9-9-11c-45.3-15.3-85-40.5
-119-75.5s-58.3-74.8-73-119.5c-4.7-14-8.3-27.3-11-40-1.3-6.7-3.2-10.8-5.5
-12.5-2.3-1.7-7.5-2.5-15.5-2.5-14 0-21 3.7-21 11 0 2 2 10.3 6 25 20.7 83.3 67
151.7 139 205zm96 379h399894v40H0zm0 0h399904v40H0z`,baraboveshortleftharpoon:`M507,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17
c2,0.7,5,1,9,1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21
c-32,-87.3,-82.7,-157.7,-152,-211c0,0,-3,-3,-3,-3l399351,0l0,-40
c-398570,0,-399437,0,-399437,0z M593 435 v40 H399500 v-40z
M0 281 v-40 H399908 v40z M0 281 v-40 H399908 v40z`,rightharpoonaboveshortbar:`M0,241 l0,40c399126,0,399993,0,399993,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M0 241 v40 H399908 v-40z M0 475 v-40 H399500 v40z M0 475 v-40 H399500 v40z`,shortbaraboveleftharpoon:`M7,435c-4,4,-6.3,8.7,-7,14c0,5.3,0.7,9,2,11
c1.3,2,5.3,5.3,12,10c90.7,54,156,130,196,228c3.3,10.7,6.3,16.3,9,17c2,0.7,5,1,9,
1c0,0,5,0,5,0c10.7,0,16.7,-2,18,-6c2,-2.7,1,-9.7,-3,-21c-32,-87.3,-82.7,-157.7,
-152,-211c0,0,-3,-3,-3,-3l399907,0l0,-40c-399126,0,-399993,0,-399993,0z
M93 435 v40 H400000 v-40z M500 241 v40 H400000 v-40z M500 241 v40 H400000 v-40z`,shortrightharpoonabovebar:`M53,241l0,40c398570,0,399437,0,399437,0
c4.7,-4.7,7,-9.3,7,-14c0,-9.3,-3.7,-15.3,-11,-18c-92.7,-56.7,-159,-133.7,-199,
-231c-3.3,-9.3,-6,-14.7,-8,-16c-2,-1.3,-7,-2,-15,-2c-10.7,0,-16.7,2,-18,6
c-2,2.7,-1,9.7,3,21c15.3,42,36.7,81.8,64,119.5c27.3,37.7,58,69.2,92,94.5z
M500 241 v40 H399408 v-40z M500 435 v40 H400000 v-40z`},tallDelim=function s(l,c){switch(l){case"lbrack":return"M403 1759 V84 H666 V0 H319 V1759 v"+c+` v1759 h347 v-84
H403z M403 1759 V0 H319 V1759 v`+c+" v1759 h84z";case"rbrack":return"M347 1759 V0 H0 V84 H263 V1759 v"+c+` v1759 H0 v84 H347z
M347 1759 V0 H263 V1759 v`+c+" v1759 h84z";case"vert":return"M145 15 v585 v"+c+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-c+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+c+" v585 h43z";case"doublevert":return"M145 15 v585 v"+c+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-c+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M188 15 H145 v585 v`+c+` v585 h43z
M367 15 v585 v`+c+` v585 c2.667,10,9.667,15,21,15
c10,0,16.667,-5,20,-15 v-585 v`+-c+` v-585 c-2.667,-10,-9.667,-15,-21,-15
c-10,0,-16.667,5,-20,15z M410 15 H367 v585 v`+c+" v585 h43z";case"lfloor":return"M319 602 V0 H403 V602 v"+c+` v1715 h263 v84 H319z
MM319 602 V0 H403 V602 v`+c+" v1715 H319z";case"rfloor":return"M319 602 V0 H403 V602 v"+c+` v1799 H0 v-84 H319z
MM319 602 V0 H403 V602 v`+c+" v1715 H319z";case"lceil":return"M403 1759 V84 H666 V0 H319 V1759 v"+c+` v602 h84z
M403 1759 V0 H319 V1759 v`+c+" v602 h84z";case"rceil":return"M347 1759 V0 H0 V84 H263 V1759 v"+c+` v602 h84z
M347 1759 V0 h-84 V1759 v`+c+" v602 h84z";case"lparen":return`M863,9c0,-2,-2,-5,-6,-9c0,0,-17,0,-17,0c-12.7,0,-19.3,0.3,-20,1
c-5.3,5.3,-10.3,11,-15,17c-242.7,294.7,-395.3,682,-458,1162c-21.3,163.3,-33.3,349,
-36,557 l0,`+(c+84)+`c0.2,6,0,26,0,60c2,159.3,10,310.7,24,454c53.3,528,210,
949.7,470,1265c4.7,6,9.7,11.7,15,17c0.7,0.7,7,1,19,1c0,0,18,0,18,0c4,-4,6,-7,6,-9
c0,-2.7,-3.3,-8.7,-10,-18c-135.3,-192.7,-235.5,-414.3,-300.5,-665c-65,-250.7,-102.5,
-544.7,-112.5,-882c-2,-104,-3,-167,-3,-189
l0,-`+(c+92)+`c0,-162.7,5.7,-314,17,-454c20.7,-272,63.7,-513,129,-723c65.3,
-210,155.3,-396.3,270,-559c6.7,-9.3,10,-15.3,10,-18z`;case"rparen":return`M76,0c-16.7,0,-25,3,-25,9c0,2,2,6.3,6,13c21.3,28.7,42.3,60.3,
63,95c96.7,156.7,172.8,332.5,228.5,527.5c55.7,195,92.8,416.5,111.5,664.5
c11.3,139.3,17,290.7,17,454c0,28,1.7,43,3.3,45l0,`+(c+9)+`
c-3,4,-3.3,16.7,-3.3,38c0,162,-5.7,313.7,-17,455c-18.7,248,-55.8,469.3,-111.5,664
c-55.7,194.7,-131.8,370.3,-228.5,527c-20.7,34.7,-41.7,66.3,-63,95c-2,3.3,-4,7,-6,11
c0,7.3,5.7,11,17,11c0,0,11,0,11,0c9.3,0,14.3,-0.3,15,-1c5.3,-5.3,10.3,-11,15,-17
c242.7,-294.7,395.3,-681.7,458,-1161c21.3,-164.7,33.3,-350.7,36,-558
l0,-`+(c+144)+`c-2,-159.3,-10,-310.7,-24,-454c-53.3,-528,-210,-949.7,
-470,-1265c-4.7,-6,-9.7,-11.7,-15,-17c-0.7,-0.7,-6.7,-1,-18,-1z`;default:throw new Error("Unknown stretchy delimiter.")}};class DocumentFragment{constructor(l){this.children=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.children=l,this.classes=[],this.height=0,this.depth=0,this.maxFontSize=0,this.style={}}hasClass(l){return utils$3.contains(this.classes,l)}toNode(){for(var l=document.createDocumentFragment(),c=0;c<this.children.length;c++)l.appendChild(this.children[c].toNode());return l}toMarkup(){for(var l="",c=0;c<this.children.length;c++)l+=this.children[c].toMarkup();return l}toText(){var l=c=>c.toText();return this.children.map(l).join("")}}var fontMetricsData={"AMS-Regular":{32:[0,0,0,0,.25],65:[0,.68889,0,0,.72222],66:[0,.68889,0,0,.66667],67:[0,.68889,0,0,.72222],68:[0,.68889,0,0,.72222],69:[0,.68889,0,0,.66667],70:[0,.68889,0,0,.61111],71:[0,.68889,0,0,.77778],72:[0,.68889,0,0,.77778],73:[0,.68889,0,0,.38889],74:[.16667,.68889,0,0,.5],75:[0,.68889,0,0,.77778],76:[0,.68889,0,0,.66667],77:[0,.68889,0,0,.94445],78:[0,.68889,0,0,.72222],79:[.16667,.68889,0,0,.77778],80:[0,.68889,0,0,.61111],81:[.16667,.68889,0,0,.77778],82:[0,.68889,0,0,.72222],83:[0,.68889,0,0,.55556],84:[0,.68889,0,0,.66667],85:[0,.68889,0,0,.72222],86:[0,.68889,0,0,.72222],87:[0,.68889,0,0,1],88:[0,.68889,0,0,.72222],89:[0,.68889,0,0,.72222],90:[0,.68889,0,0,.66667],107:[0,.68889,0,0,.55556],160:[0,0,0,0,.25],165:[0,.675,.025,0,.75],174:[.15559,.69224,0,0,.94666],240:[0,.68889,0,0,.55556],295:[0,.68889,0,0,.54028],710:[0,.825,0,0,2.33334],732:[0,.9,0,0,2.33334],770:[0,.825,0,0,2.33334],771:[0,.9,0,0,2.33334],989:[.08167,.58167,0,0,.77778],1008:[0,.43056,.04028,0,.66667],8245:[0,.54986,0,0,.275],8463:[0,.68889,0,0,.54028],8487:[0,.68889,0,0,.72222],8498:[0,.68889,0,0,.55556],8502:[0,.68889,0,0,.66667],8503:[0,.68889,0,0,.44445],8504:[0,.68889,0,0,.66667],8513:[0,.68889,0,0,.63889],8592:[-.03598,.46402,0,0,.5],8594:[-.03598,.46402,0,0,.5],8602:[-.13313,.36687,0,0,1],8603:[-.13313,.36687,0,0,1],8606:[.01354,.52239,0,0,1],8608:[.01354,.52239,0,0,1],8610:[.01354,.52239,0,0,1.11111],8611:[.01354,.52239,0,0,1.11111],8619:[0,.54986,0,0,1],8620:[0,.54986,0,0,1],8621:[-.13313,.37788,0,0,1.38889],8622:[-.13313,.36687,0,0,1],8624:[0,.69224,0,0,.5],8625:[0,.69224,0,0,.5],8630:[0,.43056,0,0,1],8631:[0,.43056,0,0,1],8634:[.08198,.58198,0,0,.77778],8635:[.08198,.58198,0,0,.77778],8638:[.19444,.69224,0,0,.41667],8639:[.19444,.69224,0,0,.41667],8642:[.19444,.69224,0,0,.41667],8643:[.19444,.69224,0,0,.41667],8644:[.1808,.675,0,0,1],8646:[.1808,.675,0,0,1],8647:[.1808,.675,0,0,1],8648:[.19444,.69224,0,0,.83334],8649:[.1808,.675,0,0,1],8650:[.19444,.69224,0,0,.83334],8651:[.01354,.52239,0,0,1],8652:[.01354,.52239,0,0,1],8653:[-.13313,.36687,0,0,1],8654:[-.13313,.36687,0,0,1],8655:[-.13313,.36687,0,0,1],8666:[.13667,.63667,0,0,1],8667:[.13667,.63667,0,0,1],8669:[-.13313,.37788,0,0,1],8672:[-.064,.437,0,0,1.334],8674:[-.064,.437,0,0,1.334],8705:[0,.825,0,0,.5],8708:[0,.68889,0,0,.55556],8709:[.08167,.58167,0,0,.77778],8717:[0,.43056,0,0,.42917],8722:[-.03598,.46402,0,0,.5],8724:[.08198,.69224,0,0,.77778],8726:[.08167,.58167,0,0,.77778],8733:[0,.69224,0,0,.77778],8736:[0,.69224,0,0,.72222],8737:[0,.69224,0,0,.72222],8738:[.03517,.52239,0,0,.72222],8739:[.08167,.58167,0,0,.22222],8740:[.25142,.74111,0,0,.27778],8741:[.08167,.58167,0,0,.38889],8742:[.25142,.74111,0,0,.5],8756:[0,.69224,0,0,.66667],8757:[0,.69224,0,0,.66667],8764:[-.13313,.36687,0,0,.77778],8765:[-.13313,.37788,0,0,.77778],8769:[-.13313,.36687,0,0,.77778],8770:[-.03625,.46375,0,0,.77778],8774:[.30274,.79383,0,0,.77778],8776:[-.01688,.48312,0,0,.77778],8778:[.08167,.58167,0,0,.77778],8782:[.06062,.54986,0,0,.77778],8783:[.06062,.54986,0,0,.77778],8785:[.08198,.58198,0,0,.77778],8786:[.08198,.58198,0,0,.77778],8787:[.08198,.58198,0,0,.77778],8790:[0,.69224,0,0,.77778],8791:[.22958,.72958,0,0,.77778],8796:[.08198,.91667,0,0,.77778],8806:[.25583,.75583,0,0,.77778],8807:[.25583,.75583,0,0,.77778],8808:[.25142,.75726,0,0,.77778],8809:[.25142,.75726,0,0,.77778],8812:[.25583,.75583,0,0,.5],8814:[.20576,.70576,0,0,.77778],8815:[.20576,.70576,0,0,.77778],8816:[.30274,.79383,0,0,.77778],8817:[.30274,.79383,0,0,.77778],8818:[.22958,.72958,0,0,.77778],8819:[.22958,.72958,0,0,.77778],8822:[.1808,.675,0,0,.77778],8823:[.1808,.675,0,0,.77778],8828:[.13667,.63667,0,0,.77778],8829:[.13667,.63667,0,0,.77778],8830:[.22958,.72958,0,0,.77778],8831:[.22958,.72958,0,0,.77778],8832:[.20576,.70576,0,0,.77778],8833:[.20576,.70576,0,0,.77778],8840:[.30274,.79383,0,0,.77778],8841:[.30274,.79383,0,0,.77778],8842:[.13597,.63597,0,0,.77778],8843:[.13597,.63597,0,0,.77778],8847:[.03517,.54986,0,0,.77778],8848:[.03517,.54986,0,0,.77778],8858:[.08198,.58198,0,0,.77778],8859:[.08198,.58198,0,0,.77778],8861:[.08198,.58198,0,0,.77778],8862:[0,.675,0,0,.77778],8863:[0,.675,0,0,.77778],8864:[0,.675,0,0,.77778],8865:[0,.675,0,0,.77778],8872:[0,.69224,0,0,.61111],8873:[0,.69224,0,0,.72222],8874:[0,.69224,0,0,.88889],8876:[0,.68889,0,0,.61111],8877:[0,.68889,0,0,.61111],8878:[0,.68889,0,0,.72222],8879:[0,.68889,0,0,.72222],8882:[.03517,.54986,0,0,.77778],8883:[.03517,.54986,0,0,.77778],8884:[.13667,.63667,0,0,.77778],8885:[.13667,.63667,0,0,.77778],8888:[0,.54986,0,0,1.11111],8890:[.19444,.43056,0,0,.55556],8891:[.19444,.69224,0,0,.61111],8892:[.19444,.69224,0,0,.61111],8901:[0,.54986,0,0,.27778],8903:[.08167,.58167,0,0,.77778],8905:[.08167,.58167,0,0,.77778],8906:[.08167,.58167,0,0,.77778],8907:[0,.69224,0,0,.77778],8908:[0,.69224,0,0,.77778],8909:[-.03598,.46402,0,0,.77778],8910:[0,.54986,0,0,.76042],8911:[0,.54986,0,0,.76042],8912:[.03517,.54986,0,0,.77778],8913:[.03517,.54986,0,0,.77778],8914:[0,.54986,0,0,.66667],8915:[0,.54986,0,0,.66667],8916:[0,.69224,0,0,.66667],8918:[.0391,.5391,0,0,.77778],8919:[.0391,.5391,0,0,.77778],8920:[.03517,.54986,0,0,1.33334],8921:[.03517,.54986,0,0,1.33334],8922:[.38569,.88569,0,0,.77778],8923:[.38569,.88569,0,0,.77778],8926:[.13667,.63667,0,0,.77778],8927:[.13667,.63667,0,0,.77778],8928:[.30274,.79383,0,0,.77778],8929:[.30274,.79383,0,0,.77778],8934:[.23222,.74111,0,0,.77778],8935:[.23222,.74111,0,0,.77778],8936:[.23222,.74111,0,0,.77778],8937:[.23222,.74111,0,0,.77778],8938:[.20576,.70576,0,0,.77778],8939:[.20576,.70576,0,0,.77778],8940:[.30274,.79383,0,0,.77778],8941:[.30274,.79383,0,0,.77778],8994:[.19444,.69224,0,0,.77778],8995:[.19444,.69224,0,0,.77778],9416:[.15559,.69224,0,0,.90222],9484:[0,.69224,0,0,.5],9488:[0,.69224,0,0,.5],9492:[0,.37788,0,0,.5],9496:[0,.37788,0,0,.5],9585:[.19444,.68889,0,0,.88889],9586:[.19444,.74111,0,0,.88889],9632:[0,.675,0,0,.77778],9633:[0,.675,0,0,.77778],9650:[0,.54986,0,0,.72222],9651:[0,.54986,0,0,.72222],9654:[.03517,.54986,0,0,.77778],9660:[0,.54986,0,0,.72222],9661:[0,.54986,0,0,.72222],9664:[.03517,.54986,0,0,.77778],9674:[.11111,.69224,0,0,.66667],9733:[.19444,.69224,0,0,.94445],10003:[0,.69224,0,0,.83334],10016:[0,.69224,0,0,.83334],10731:[.11111,.69224,0,0,.66667],10846:[.19444,.75583,0,0,.61111],10877:[.13667,.63667,0,0,.77778],10878:[.13667,.63667,0,0,.77778],10885:[.25583,.75583,0,0,.77778],10886:[.25583,.75583,0,0,.77778],10887:[.13597,.63597,0,0,.77778],10888:[.13597,.63597,0,0,.77778],10889:[.26167,.75726,0,0,.77778],10890:[.26167,.75726,0,0,.77778],10891:[.48256,.98256,0,0,.77778],10892:[.48256,.98256,0,0,.77778],10901:[.13667,.63667,0,0,.77778],10902:[.13667,.63667,0,0,.77778],10933:[.25142,.75726,0,0,.77778],10934:[.25142,.75726,0,0,.77778],10935:[.26167,.75726,0,0,.77778],10936:[.26167,.75726,0,0,.77778],10937:[.26167,.75726,0,0,.77778],10938:[.26167,.75726,0,0,.77778],10949:[.25583,.75583,0,0,.77778],10950:[.25583,.75583,0,0,.77778],10955:[.28481,.79383,0,0,.77778],10956:[.28481,.79383,0,0,.77778],57350:[.08167,.58167,0,0,.22222],57351:[.08167,.58167,0,0,.38889],57352:[.08167,.58167,0,0,.77778],57353:[0,.43056,.04028,0,.66667],57356:[.25142,.75726,0,0,.77778],57357:[.25142,.75726,0,0,.77778],57358:[.41951,.91951,0,0,.77778],57359:[.30274,.79383,0,0,.77778],57360:[.30274,.79383,0,0,.77778],57361:[.41951,.91951,0,0,.77778],57366:[.25142,.75726,0,0,.77778],57367:[.25142,.75726,0,0,.77778],57368:[.25142,.75726,0,0,.77778],57369:[.25142,.75726,0,0,.77778],57370:[.13597,.63597,0,0,.77778],57371:[.13597,.63597,0,0,.77778]},"Caligraphic-Regular":{32:[0,0,0,0,.25],65:[0,.68333,0,.19445,.79847],66:[0,.68333,.03041,.13889,.65681],67:[0,.68333,.05834,.13889,.52653],68:[0,.68333,.02778,.08334,.77139],69:[0,.68333,.08944,.11111,.52778],70:[0,.68333,.09931,.11111,.71875],71:[.09722,.68333,.0593,.11111,.59487],72:[0,.68333,.00965,.11111,.84452],73:[0,.68333,.07382,0,.54452],74:[.09722,.68333,.18472,.16667,.67778],75:[0,.68333,.01445,.05556,.76195],76:[0,.68333,0,.13889,.68972],77:[0,.68333,0,.13889,1.2009],78:[0,.68333,.14736,.08334,.82049],79:[0,.68333,.02778,.11111,.79611],80:[0,.68333,.08222,.08334,.69556],81:[.09722,.68333,0,.11111,.81667],82:[0,.68333,0,.08334,.8475],83:[0,.68333,.075,.13889,.60556],84:[0,.68333,.25417,0,.54464],85:[0,.68333,.09931,.08334,.62583],86:[0,.68333,.08222,0,.61278],87:[0,.68333,.08222,.08334,.98778],88:[0,.68333,.14643,.13889,.7133],89:[.09722,.68333,.08222,.08334,.66834],90:[0,.68333,.07944,.13889,.72473],160:[0,0,0,0,.25]},"Fraktur-Regular":{32:[0,0,0,0,.25],33:[0,.69141,0,0,.29574],34:[0,.69141,0,0,.21471],38:[0,.69141,0,0,.73786],39:[0,.69141,0,0,.21201],40:[.24982,.74947,0,0,.38865],41:[.24982,.74947,0,0,.38865],42:[0,.62119,0,0,.27764],43:[.08319,.58283,0,0,.75623],44:[0,.10803,0,0,.27764],45:[.08319,.58283,0,0,.75623],46:[0,.10803,0,0,.27764],47:[.24982,.74947,0,0,.50181],48:[0,.47534,0,0,.50181],49:[0,.47534,0,0,.50181],50:[0,.47534,0,0,.50181],51:[.18906,.47534,0,0,.50181],52:[.18906,.47534,0,0,.50181],53:[.18906,.47534,0,0,.50181],54:[0,.69141,0,0,.50181],55:[.18906,.47534,0,0,.50181],56:[0,.69141,0,0,.50181],57:[.18906,.47534,0,0,.50181],58:[0,.47534,0,0,.21606],59:[.12604,.47534,0,0,.21606],61:[-.13099,.36866,0,0,.75623],63:[0,.69141,0,0,.36245],65:[0,.69141,0,0,.7176],66:[0,.69141,0,0,.88397],67:[0,.69141,0,0,.61254],68:[0,.69141,0,0,.83158],69:[0,.69141,0,0,.66278],70:[.12604,.69141,0,0,.61119],71:[0,.69141,0,0,.78539],72:[.06302,.69141,0,0,.7203],73:[0,.69141,0,0,.55448],74:[.12604,.69141,0,0,.55231],75:[0,.69141,0,0,.66845],76:[0,.69141,0,0,.66602],77:[0,.69141,0,0,1.04953],78:[0,.69141,0,0,.83212],79:[0,.69141,0,0,.82699],80:[.18906,.69141,0,0,.82753],81:[.03781,.69141,0,0,.82699],82:[0,.69141,0,0,.82807],83:[0,.69141,0,0,.82861],84:[0,.69141,0,0,.66899],85:[0,.69141,0,0,.64576],86:[0,.69141,0,0,.83131],87:[0,.69141,0,0,1.04602],88:[0,.69141,0,0,.71922],89:[.18906,.69141,0,0,.83293],90:[.12604,.69141,0,0,.60201],91:[.24982,.74947,0,0,.27764],93:[.24982,.74947,0,0,.27764],94:[0,.69141,0,0,.49965],97:[0,.47534,0,0,.50046],98:[0,.69141,0,0,.51315],99:[0,.47534,0,0,.38946],100:[0,.62119,0,0,.49857],101:[0,.47534,0,0,.40053],102:[.18906,.69141,0,0,.32626],103:[.18906,.47534,0,0,.5037],104:[.18906,.69141,0,0,.52126],105:[0,.69141,0,0,.27899],106:[0,.69141,0,0,.28088],107:[0,.69141,0,0,.38946],108:[0,.69141,0,0,.27953],109:[0,.47534,0,0,.76676],110:[0,.47534,0,0,.52666],111:[0,.47534,0,0,.48885],112:[.18906,.52396,0,0,.50046],113:[.18906,.47534,0,0,.48912],114:[0,.47534,0,0,.38919],115:[0,.47534,0,0,.44266],116:[0,.62119,0,0,.33301],117:[0,.47534,0,0,.5172],118:[0,.52396,0,0,.5118],119:[0,.52396,0,0,.77351],120:[.18906,.47534,0,0,.38865],121:[.18906,.47534,0,0,.49884],122:[.18906,.47534,0,0,.39054],160:[0,0,0,0,.25],8216:[0,.69141,0,0,.21471],8217:[0,.69141,0,0,.21471],58112:[0,.62119,0,0,.49749],58113:[0,.62119,0,0,.4983],58114:[.18906,.69141,0,0,.33328],58115:[.18906,.69141,0,0,.32923],58116:[.18906,.47534,0,0,.50343],58117:[0,.69141,0,0,.33301],58118:[0,.62119,0,0,.33409],58119:[0,.47534,0,0,.50073]},"Main-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.35],34:[0,.69444,0,0,.60278],35:[.19444,.69444,0,0,.95833],36:[.05556,.75,0,0,.575],37:[.05556,.75,0,0,.95833],38:[0,.69444,0,0,.89444],39:[0,.69444,0,0,.31944],40:[.25,.75,0,0,.44722],41:[.25,.75,0,0,.44722],42:[0,.75,0,0,.575],43:[.13333,.63333,0,0,.89444],44:[.19444,.15556,0,0,.31944],45:[0,.44444,0,0,.38333],46:[0,.15556,0,0,.31944],47:[.25,.75,0,0,.575],48:[0,.64444,0,0,.575],49:[0,.64444,0,0,.575],50:[0,.64444,0,0,.575],51:[0,.64444,0,0,.575],52:[0,.64444,0,0,.575],53:[0,.64444,0,0,.575],54:[0,.64444,0,0,.575],55:[0,.64444,0,0,.575],56:[0,.64444,0,0,.575],57:[0,.64444,0,0,.575],58:[0,.44444,0,0,.31944],59:[.19444,.44444,0,0,.31944],60:[.08556,.58556,0,0,.89444],61:[-.10889,.39111,0,0,.89444],62:[.08556,.58556,0,0,.89444],63:[0,.69444,0,0,.54305],64:[0,.69444,0,0,.89444],65:[0,.68611,0,0,.86944],66:[0,.68611,0,0,.81805],67:[0,.68611,0,0,.83055],68:[0,.68611,0,0,.88194],69:[0,.68611,0,0,.75555],70:[0,.68611,0,0,.72361],71:[0,.68611,0,0,.90416],72:[0,.68611,0,0,.9],73:[0,.68611,0,0,.43611],74:[0,.68611,0,0,.59444],75:[0,.68611,0,0,.90138],76:[0,.68611,0,0,.69166],77:[0,.68611,0,0,1.09166],78:[0,.68611,0,0,.9],79:[0,.68611,0,0,.86388],80:[0,.68611,0,0,.78611],81:[.19444,.68611,0,0,.86388],82:[0,.68611,0,0,.8625],83:[0,.68611,0,0,.63889],84:[0,.68611,0,0,.8],85:[0,.68611,0,0,.88472],86:[0,.68611,.01597,0,.86944],87:[0,.68611,.01597,0,1.18888],88:[0,.68611,0,0,.86944],89:[0,.68611,.02875,0,.86944],90:[0,.68611,0,0,.70277],91:[.25,.75,0,0,.31944],92:[.25,.75,0,0,.575],93:[.25,.75,0,0,.31944],94:[0,.69444,0,0,.575],95:[.31,.13444,.03194,0,.575],97:[0,.44444,0,0,.55902],98:[0,.69444,0,0,.63889],99:[0,.44444,0,0,.51111],100:[0,.69444,0,0,.63889],101:[0,.44444,0,0,.52708],102:[0,.69444,.10903,0,.35139],103:[.19444,.44444,.01597,0,.575],104:[0,.69444,0,0,.63889],105:[0,.69444,0,0,.31944],106:[.19444,.69444,0,0,.35139],107:[0,.69444,0,0,.60694],108:[0,.69444,0,0,.31944],109:[0,.44444,0,0,.95833],110:[0,.44444,0,0,.63889],111:[0,.44444,0,0,.575],112:[.19444,.44444,0,0,.63889],113:[.19444,.44444,0,0,.60694],114:[0,.44444,0,0,.47361],115:[0,.44444,0,0,.45361],116:[0,.63492,0,0,.44722],117:[0,.44444,0,0,.63889],118:[0,.44444,.01597,0,.60694],119:[0,.44444,.01597,0,.83055],120:[0,.44444,0,0,.60694],121:[.19444,.44444,.01597,0,.60694],122:[0,.44444,0,0,.51111],123:[.25,.75,0,0,.575],124:[.25,.75,0,0,.31944],125:[.25,.75,0,0,.575],126:[.35,.34444,0,0,.575],160:[0,0,0,0,.25],163:[0,.69444,0,0,.86853],168:[0,.69444,0,0,.575],172:[0,.44444,0,0,.76666],176:[0,.69444,0,0,.86944],177:[.13333,.63333,0,0,.89444],184:[.17014,0,0,0,.51111],198:[0,.68611,0,0,1.04166],215:[.13333,.63333,0,0,.89444],216:[.04861,.73472,0,0,.89444],223:[0,.69444,0,0,.59722],230:[0,.44444,0,0,.83055],247:[.13333,.63333,0,0,.89444],248:[.09722,.54167,0,0,.575],305:[0,.44444,0,0,.31944],338:[0,.68611,0,0,1.16944],339:[0,.44444,0,0,.89444],567:[.19444,.44444,0,0,.35139],710:[0,.69444,0,0,.575],711:[0,.63194,0,0,.575],713:[0,.59611,0,0,.575],714:[0,.69444,0,0,.575],715:[0,.69444,0,0,.575],728:[0,.69444,0,0,.575],729:[0,.69444,0,0,.31944],730:[0,.69444,0,0,.86944],732:[0,.69444,0,0,.575],733:[0,.69444,0,0,.575],915:[0,.68611,0,0,.69166],916:[0,.68611,0,0,.95833],920:[0,.68611,0,0,.89444],923:[0,.68611,0,0,.80555],926:[0,.68611,0,0,.76666],928:[0,.68611,0,0,.9],931:[0,.68611,0,0,.83055],933:[0,.68611,0,0,.89444],934:[0,.68611,0,0,.83055],936:[0,.68611,0,0,.89444],937:[0,.68611,0,0,.83055],8211:[0,.44444,.03194,0,.575],8212:[0,.44444,.03194,0,1.14999],8216:[0,.69444,0,0,.31944],8217:[0,.69444,0,0,.31944],8220:[0,.69444,0,0,.60278],8221:[0,.69444,0,0,.60278],8224:[.19444,.69444,0,0,.51111],8225:[.19444,.69444,0,0,.51111],8242:[0,.55556,0,0,.34444],8407:[0,.72444,.15486,0,.575],8463:[0,.69444,0,0,.66759],8465:[0,.69444,0,0,.83055],8467:[0,.69444,0,0,.47361],8472:[.19444,.44444,0,0,.74027],8476:[0,.69444,0,0,.83055],8501:[0,.69444,0,0,.70277],8592:[-.10889,.39111,0,0,1.14999],8593:[.19444,.69444,0,0,.575],8594:[-.10889,.39111,0,0,1.14999],8595:[.19444,.69444,0,0,.575],8596:[-.10889,.39111,0,0,1.14999],8597:[.25,.75,0,0,.575],8598:[.19444,.69444,0,0,1.14999],8599:[.19444,.69444,0,0,1.14999],8600:[.19444,.69444,0,0,1.14999],8601:[.19444,.69444,0,0,1.14999],8636:[-.10889,.39111,0,0,1.14999],8637:[-.10889,.39111,0,0,1.14999],8640:[-.10889,.39111,0,0,1.14999],8641:[-.10889,.39111,0,0,1.14999],8656:[-.10889,.39111,0,0,1.14999],8657:[.19444,.69444,0,0,.70277],8658:[-.10889,.39111,0,0,1.14999],8659:[.19444,.69444,0,0,.70277],8660:[-.10889,.39111,0,0,1.14999],8661:[.25,.75,0,0,.70277],8704:[0,.69444,0,0,.63889],8706:[0,.69444,.06389,0,.62847],8707:[0,.69444,0,0,.63889],8709:[.05556,.75,0,0,.575],8711:[0,.68611,0,0,.95833],8712:[.08556,.58556,0,0,.76666],8715:[.08556,.58556,0,0,.76666],8722:[.13333,.63333,0,0,.89444],8723:[.13333,.63333,0,0,.89444],8725:[.25,.75,0,0,.575],8726:[.25,.75,0,0,.575],8727:[-.02778,.47222,0,0,.575],8728:[-.02639,.47361,0,0,.575],8729:[-.02639,.47361,0,0,.575],8730:[.18,.82,0,0,.95833],8733:[0,.44444,0,0,.89444],8734:[0,.44444,0,0,1.14999],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.31944],8741:[.25,.75,0,0,.575],8743:[0,.55556,0,0,.76666],8744:[0,.55556,0,0,.76666],8745:[0,.55556,0,0,.76666],8746:[0,.55556,0,0,.76666],8747:[.19444,.69444,.12778,0,.56875],8764:[-.10889,.39111,0,0,.89444],8768:[.19444,.69444,0,0,.31944],8771:[.00222,.50222,0,0,.89444],8773:[.027,.638,0,0,.894],8776:[.02444,.52444,0,0,.89444],8781:[.00222,.50222,0,0,.89444],8801:[.00222,.50222,0,0,.89444],8804:[.19667,.69667,0,0,.89444],8805:[.19667,.69667,0,0,.89444],8810:[.08556,.58556,0,0,1.14999],8811:[.08556,.58556,0,0,1.14999],8826:[.08556,.58556,0,0,.89444],8827:[.08556,.58556,0,0,.89444],8834:[.08556,.58556,0,0,.89444],8835:[.08556,.58556,0,0,.89444],8838:[.19667,.69667,0,0,.89444],8839:[.19667,.69667,0,0,.89444],8846:[0,.55556,0,0,.76666],8849:[.19667,.69667,0,0,.89444],8850:[.19667,.69667,0,0,.89444],8851:[0,.55556,0,0,.76666],8852:[0,.55556,0,0,.76666],8853:[.13333,.63333,0,0,.89444],8854:[.13333,.63333,0,0,.89444],8855:[.13333,.63333,0,0,.89444],8856:[.13333,.63333,0,0,.89444],8857:[.13333,.63333,0,0,.89444],8866:[0,.69444,0,0,.70277],8867:[0,.69444,0,0,.70277],8868:[0,.69444,0,0,.89444],8869:[0,.69444,0,0,.89444],8900:[-.02639,.47361,0,0,.575],8901:[-.02639,.47361,0,0,.31944],8902:[-.02778,.47222,0,0,.575],8968:[.25,.75,0,0,.51111],8969:[.25,.75,0,0,.51111],8970:[.25,.75,0,0,.51111],8971:[.25,.75,0,0,.51111],8994:[-.13889,.36111,0,0,1.14999],8995:[-.13889,.36111,0,0,1.14999],9651:[.19444,.69444,0,0,1.02222],9657:[-.02778,.47222,0,0,.575],9661:[.19444,.69444,0,0,1.02222],9667:[-.02778,.47222,0,0,.575],9711:[.19444,.69444,0,0,1.14999],9824:[.12963,.69444,0,0,.89444],9825:[.12963,.69444,0,0,.89444],9826:[.12963,.69444,0,0,.89444],9827:[.12963,.69444,0,0,.89444],9837:[0,.75,0,0,.44722],9838:[.19444,.69444,0,0,.44722],9839:[.19444,.69444,0,0,.44722],10216:[.25,.75,0,0,.44722],10217:[.25,.75,0,0,.44722],10815:[0,.68611,0,0,.9],10927:[.19667,.69667,0,0,.89444],10928:[.19667,.69667,0,0,.89444],57376:[.19444,.69444,0,0,0]},"Main-BoldItalic":{32:[0,0,0,0,.25],33:[0,.69444,.11417,0,.38611],34:[0,.69444,.07939,0,.62055],35:[.19444,.69444,.06833,0,.94444],37:[.05556,.75,.12861,0,.94444],38:[0,.69444,.08528,0,.88555],39:[0,.69444,.12945,0,.35555],40:[.25,.75,.15806,0,.47333],41:[.25,.75,.03306,0,.47333],42:[0,.75,.14333,0,.59111],43:[.10333,.60333,.03306,0,.88555],44:[.19444,.14722,0,0,.35555],45:[0,.44444,.02611,0,.41444],46:[0,.14722,0,0,.35555],47:[.25,.75,.15806,0,.59111],48:[0,.64444,.13167,0,.59111],49:[0,.64444,.13167,0,.59111],50:[0,.64444,.13167,0,.59111],51:[0,.64444,.13167,0,.59111],52:[.19444,.64444,.13167,0,.59111],53:[0,.64444,.13167,0,.59111],54:[0,.64444,.13167,0,.59111],55:[.19444,.64444,.13167,0,.59111],56:[0,.64444,.13167,0,.59111],57:[0,.64444,.13167,0,.59111],58:[0,.44444,.06695,0,.35555],59:[.19444,.44444,.06695,0,.35555],61:[-.10889,.39111,.06833,0,.88555],63:[0,.69444,.11472,0,.59111],64:[0,.69444,.09208,0,.88555],65:[0,.68611,0,0,.86555],66:[0,.68611,.0992,0,.81666],67:[0,.68611,.14208,0,.82666],68:[0,.68611,.09062,0,.87555],69:[0,.68611,.11431,0,.75666],70:[0,.68611,.12903,0,.72722],71:[0,.68611,.07347,0,.89527],72:[0,.68611,.17208,0,.8961],73:[0,.68611,.15681,0,.47166],74:[0,.68611,.145,0,.61055],75:[0,.68611,.14208,0,.89499],76:[0,.68611,0,0,.69777],77:[0,.68611,.17208,0,1.07277],78:[0,.68611,.17208,0,.8961],79:[0,.68611,.09062,0,.85499],80:[0,.68611,.0992,0,.78721],81:[.19444,.68611,.09062,0,.85499],82:[0,.68611,.02559,0,.85944],83:[0,.68611,.11264,0,.64999],84:[0,.68611,.12903,0,.7961],85:[0,.68611,.17208,0,.88083],86:[0,.68611,.18625,0,.86555],87:[0,.68611,.18625,0,1.15999],88:[0,.68611,.15681,0,.86555],89:[0,.68611,.19803,0,.86555],90:[0,.68611,.14208,0,.70888],91:[.25,.75,.1875,0,.35611],93:[.25,.75,.09972,0,.35611],94:[0,.69444,.06709,0,.59111],95:[.31,.13444,.09811,0,.59111],97:[0,.44444,.09426,0,.59111],98:[0,.69444,.07861,0,.53222],99:[0,.44444,.05222,0,.53222],100:[0,.69444,.10861,0,.59111],101:[0,.44444,.085,0,.53222],102:[.19444,.69444,.21778,0,.4],103:[.19444,.44444,.105,0,.53222],104:[0,.69444,.09426,0,.59111],105:[0,.69326,.11387,0,.35555],106:[.19444,.69326,.1672,0,.35555],107:[0,.69444,.11111,0,.53222],108:[0,.69444,.10861,0,.29666],109:[0,.44444,.09426,0,.94444],110:[0,.44444,.09426,0,.64999],111:[0,.44444,.07861,0,.59111],112:[.19444,.44444,.07861,0,.59111],113:[.19444,.44444,.105,0,.53222],114:[0,.44444,.11111,0,.50167],115:[0,.44444,.08167,0,.48694],116:[0,.63492,.09639,0,.385],117:[0,.44444,.09426,0,.62055],118:[0,.44444,.11111,0,.53222],119:[0,.44444,.11111,0,.76777],120:[0,.44444,.12583,0,.56055],121:[.19444,.44444,.105,0,.56166],122:[0,.44444,.13889,0,.49055],126:[.35,.34444,.11472,0,.59111],160:[0,0,0,0,.25],168:[0,.69444,.11473,0,.59111],176:[0,.69444,0,0,.94888],184:[.17014,0,0,0,.53222],198:[0,.68611,.11431,0,1.02277],216:[.04861,.73472,.09062,0,.88555],223:[.19444,.69444,.09736,0,.665],230:[0,.44444,.085,0,.82666],248:[.09722,.54167,.09458,0,.59111],305:[0,.44444,.09426,0,.35555],338:[0,.68611,.11431,0,1.14054],339:[0,.44444,.085,0,.82666],567:[.19444,.44444,.04611,0,.385],710:[0,.69444,.06709,0,.59111],711:[0,.63194,.08271,0,.59111],713:[0,.59444,.10444,0,.59111],714:[0,.69444,.08528,0,.59111],715:[0,.69444,0,0,.59111],728:[0,.69444,.10333,0,.59111],729:[0,.69444,.12945,0,.35555],730:[0,.69444,0,0,.94888],732:[0,.69444,.11472,0,.59111],733:[0,.69444,.11472,0,.59111],915:[0,.68611,.12903,0,.69777],916:[0,.68611,0,0,.94444],920:[0,.68611,.09062,0,.88555],923:[0,.68611,0,0,.80666],926:[0,.68611,.15092,0,.76777],928:[0,.68611,.17208,0,.8961],931:[0,.68611,.11431,0,.82666],933:[0,.68611,.10778,0,.88555],934:[0,.68611,.05632,0,.82666],936:[0,.68611,.10778,0,.88555],937:[0,.68611,.0992,0,.82666],8211:[0,.44444,.09811,0,.59111],8212:[0,.44444,.09811,0,1.18221],8216:[0,.69444,.12945,0,.35555],8217:[0,.69444,.12945,0,.35555],8220:[0,.69444,.16772,0,.62055],8221:[0,.69444,.07939,0,.62055]},"Main-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.12417,0,.30667],34:[0,.69444,.06961,0,.51444],35:[.19444,.69444,.06616,0,.81777],37:[.05556,.75,.13639,0,.81777],38:[0,.69444,.09694,0,.76666],39:[0,.69444,.12417,0,.30667],40:[.25,.75,.16194,0,.40889],41:[.25,.75,.03694,0,.40889],42:[0,.75,.14917,0,.51111],43:[.05667,.56167,.03694,0,.76666],44:[.19444,.10556,0,0,.30667],45:[0,.43056,.02826,0,.35778],46:[0,.10556,0,0,.30667],47:[.25,.75,.16194,0,.51111],48:[0,.64444,.13556,0,.51111],49:[0,.64444,.13556,0,.51111],50:[0,.64444,.13556,0,.51111],51:[0,.64444,.13556,0,.51111],52:[.19444,.64444,.13556,0,.51111],53:[0,.64444,.13556,0,.51111],54:[0,.64444,.13556,0,.51111],55:[.19444,.64444,.13556,0,.51111],56:[0,.64444,.13556,0,.51111],57:[0,.64444,.13556,0,.51111],58:[0,.43056,.0582,0,.30667],59:[.19444,.43056,.0582,0,.30667],61:[-.13313,.36687,.06616,0,.76666],63:[0,.69444,.1225,0,.51111],64:[0,.69444,.09597,0,.76666],65:[0,.68333,0,0,.74333],66:[0,.68333,.10257,0,.70389],67:[0,.68333,.14528,0,.71555],68:[0,.68333,.09403,0,.755],69:[0,.68333,.12028,0,.67833],70:[0,.68333,.13305,0,.65277],71:[0,.68333,.08722,0,.77361],72:[0,.68333,.16389,0,.74333],73:[0,.68333,.15806,0,.38555],74:[0,.68333,.14028,0,.525],75:[0,.68333,.14528,0,.76888],76:[0,.68333,0,0,.62722],77:[0,.68333,.16389,0,.89666],78:[0,.68333,.16389,0,.74333],79:[0,.68333,.09403,0,.76666],80:[0,.68333,.10257,0,.67833],81:[.19444,.68333,.09403,0,.76666],82:[0,.68333,.03868,0,.72944],83:[0,.68333,.11972,0,.56222],84:[0,.68333,.13305,0,.71555],85:[0,.68333,.16389,0,.74333],86:[0,.68333,.18361,0,.74333],87:[0,.68333,.18361,0,.99888],88:[0,.68333,.15806,0,.74333],89:[0,.68333,.19383,0,.74333],90:[0,.68333,.14528,0,.61333],91:[.25,.75,.1875,0,.30667],93:[.25,.75,.10528,0,.30667],94:[0,.69444,.06646,0,.51111],95:[.31,.12056,.09208,0,.51111],97:[0,.43056,.07671,0,.51111],98:[0,.69444,.06312,0,.46],99:[0,.43056,.05653,0,.46],100:[0,.69444,.10333,0,.51111],101:[0,.43056,.07514,0,.46],102:[.19444,.69444,.21194,0,.30667],103:[.19444,.43056,.08847,0,.46],104:[0,.69444,.07671,0,.51111],105:[0,.65536,.1019,0,.30667],106:[.19444,.65536,.14467,0,.30667],107:[0,.69444,.10764,0,.46],108:[0,.69444,.10333,0,.25555],109:[0,.43056,.07671,0,.81777],110:[0,.43056,.07671,0,.56222],111:[0,.43056,.06312,0,.51111],112:[.19444,.43056,.06312,0,.51111],113:[.19444,.43056,.08847,0,.46],114:[0,.43056,.10764,0,.42166],115:[0,.43056,.08208,0,.40889],116:[0,.61508,.09486,0,.33222],117:[0,.43056,.07671,0,.53666],118:[0,.43056,.10764,0,.46],119:[0,.43056,.10764,0,.66444],120:[0,.43056,.12042,0,.46389],121:[.19444,.43056,.08847,0,.48555],122:[0,.43056,.12292,0,.40889],126:[.35,.31786,.11585,0,.51111],160:[0,0,0,0,.25],168:[0,.66786,.10474,0,.51111],176:[0,.69444,0,0,.83129],184:[.17014,0,0,0,.46],198:[0,.68333,.12028,0,.88277],216:[.04861,.73194,.09403,0,.76666],223:[.19444,.69444,.10514,0,.53666],230:[0,.43056,.07514,0,.71555],248:[.09722,.52778,.09194,0,.51111],338:[0,.68333,.12028,0,.98499],339:[0,.43056,.07514,0,.71555],710:[0,.69444,.06646,0,.51111],711:[0,.62847,.08295,0,.51111],713:[0,.56167,.10333,0,.51111],714:[0,.69444,.09694,0,.51111],715:[0,.69444,0,0,.51111],728:[0,.69444,.10806,0,.51111],729:[0,.66786,.11752,0,.30667],730:[0,.69444,0,0,.83129],732:[0,.66786,.11585,0,.51111],733:[0,.69444,.1225,0,.51111],915:[0,.68333,.13305,0,.62722],916:[0,.68333,0,0,.81777],920:[0,.68333,.09403,0,.76666],923:[0,.68333,0,0,.69222],926:[0,.68333,.15294,0,.66444],928:[0,.68333,.16389,0,.74333],931:[0,.68333,.12028,0,.71555],933:[0,.68333,.11111,0,.76666],934:[0,.68333,.05986,0,.71555],936:[0,.68333,.11111,0,.76666],937:[0,.68333,.10257,0,.71555],8211:[0,.43056,.09208,0,.51111],8212:[0,.43056,.09208,0,1.02222],8216:[0,.69444,.12417,0,.30667],8217:[0,.69444,.12417,0,.30667],8220:[0,.69444,.1685,0,.51444],8221:[0,.69444,.06961,0,.51444],8463:[0,.68889,0,0,.54028]},"Main-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.27778],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.77778],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.19444,.10556,0,0,.27778],45:[0,.43056,0,0,.33333],46:[0,.10556,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.64444,0,0,.5],49:[0,.64444,0,0,.5],50:[0,.64444,0,0,.5],51:[0,.64444,0,0,.5],52:[0,.64444,0,0,.5],53:[0,.64444,0,0,.5],54:[0,.64444,0,0,.5],55:[0,.64444,0,0,.5],56:[0,.64444,0,0,.5],57:[0,.64444,0,0,.5],58:[0,.43056,0,0,.27778],59:[.19444,.43056,0,0,.27778],60:[.0391,.5391,0,0,.77778],61:[-.13313,.36687,0,0,.77778],62:[.0391,.5391,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.77778],65:[0,.68333,0,0,.75],66:[0,.68333,0,0,.70834],67:[0,.68333,0,0,.72222],68:[0,.68333,0,0,.76389],69:[0,.68333,0,0,.68056],70:[0,.68333,0,0,.65278],71:[0,.68333,0,0,.78472],72:[0,.68333,0,0,.75],73:[0,.68333,0,0,.36111],74:[0,.68333,0,0,.51389],75:[0,.68333,0,0,.77778],76:[0,.68333,0,0,.625],77:[0,.68333,0,0,.91667],78:[0,.68333,0,0,.75],79:[0,.68333,0,0,.77778],80:[0,.68333,0,0,.68056],81:[.19444,.68333,0,0,.77778],82:[0,.68333,0,0,.73611],83:[0,.68333,0,0,.55556],84:[0,.68333,0,0,.72222],85:[0,.68333,0,0,.75],86:[0,.68333,.01389,0,.75],87:[0,.68333,.01389,0,1.02778],88:[0,.68333,0,0,.75],89:[0,.68333,.025,0,.75],90:[0,.68333,0,0,.61111],91:[.25,.75,0,0,.27778],92:[.25,.75,0,0,.5],93:[.25,.75,0,0,.27778],94:[0,.69444,0,0,.5],95:[.31,.12056,.02778,0,.5],97:[0,.43056,0,0,.5],98:[0,.69444,0,0,.55556],99:[0,.43056,0,0,.44445],100:[0,.69444,0,0,.55556],101:[0,.43056,0,0,.44445],102:[0,.69444,.07778,0,.30556],103:[.19444,.43056,.01389,0,.5],104:[0,.69444,0,0,.55556],105:[0,.66786,0,0,.27778],106:[.19444,.66786,0,0,.30556],107:[0,.69444,0,0,.52778],108:[0,.69444,0,0,.27778],109:[0,.43056,0,0,.83334],110:[0,.43056,0,0,.55556],111:[0,.43056,0,0,.5],112:[.19444,.43056,0,0,.55556],113:[.19444,.43056,0,0,.52778],114:[0,.43056,0,0,.39167],115:[0,.43056,0,0,.39445],116:[0,.61508,0,0,.38889],117:[0,.43056,0,0,.55556],118:[0,.43056,.01389,0,.52778],119:[0,.43056,.01389,0,.72222],120:[0,.43056,0,0,.52778],121:[.19444,.43056,.01389,0,.52778],122:[0,.43056,0,0,.44445],123:[.25,.75,0,0,.5],124:[.25,.75,0,0,.27778],125:[.25,.75,0,0,.5],126:[.35,.31786,0,0,.5],160:[0,0,0,0,.25],163:[0,.69444,0,0,.76909],167:[.19444,.69444,0,0,.44445],168:[0,.66786,0,0,.5],172:[0,.43056,0,0,.66667],176:[0,.69444,0,0,.75],177:[.08333,.58333,0,0,.77778],182:[.19444,.69444,0,0,.61111],184:[.17014,0,0,0,.44445],198:[0,.68333,0,0,.90278],215:[.08333,.58333,0,0,.77778],216:[.04861,.73194,0,0,.77778],223:[0,.69444,0,0,.5],230:[0,.43056,0,0,.72222],247:[.08333,.58333,0,0,.77778],248:[.09722,.52778,0,0,.5],305:[0,.43056,0,0,.27778],338:[0,.68333,0,0,1.01389],339:[0,.43056,0,0,.77778],567:[.19444,.43056,0,0,.30556],710:[0,.69444,0,0,.5],711:[0,.62847,0,0,.5],713:[0,.56778,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.66786,0,0,.27778],730:[0,.69444,0,0,.75],732:[0,.66786,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.68333,0,0,.625],916:[0,.68333,0,0,.83334],920:[0,.68333,0,0,.77778],923:[0,.68333,0,0,.69445],926:[0,.68333,0,0,.66667],928:[0,.68333,0,0,.75],931:[0,.68333,0,0,.72222],933:[0,.68333,0,0,.77778],934:[0,.68333,0,0,.72222],936:[0,.68333,0,0,.77778],937:[0,.68333,0,0,.72222],8211:[0,.43056,.02778,0,.5],8212:[0,.43056,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5],8224:[.19444,.69444,0,0,.44445],8225:[.19444,.69444,0,0,.44445],8230:[0,.123,0,0,1.172],8242:[0,.55556,0,0,.275],8407:[0,.71444,.15382,0,.5],8463:[0,.68889,0,0,.54028],8465:[0,.69444,0,0,.72222],8467:[0,.69444,0,.11111,.41667],8472:[.19444,.43056,0,.11111,.63646],8476:[0,.69444,0,0,.72222],8501:[0,.69444,0,0,.61111],8592:[-.13313,.36687,0,0,1],8593:[.19444,.69444,0,0,.5],8594:[-.13313,.36687,0,0,1],8595:[.19444,.69444,0,0,.5],8596:[-.13313,.36687,0,0,1],8597:[.25,.75,0,0,.5],8598:[.19444,.69444,0,0,1],8599:[.19444,.69444,0,0,1],8600:[.19444,.69444,0,0,1],8601:[.19444,.69444,0,0,1],8614:[.011,.511,0,0,1],8617:[.011,.511,0,0,1.126],8618:[.011,.511,0,0,1.126],8636:[-.13313,.36687,0,0,1],8637:[-.13313,.36687,0,0,1],8640:[-.13313,.36687,0,0,1],8641:[-.13313,.36687,0,0,1],8652:[.011,.671,0,0,1],8656:[-.13313,.36687,0,0,1],8657:[.19444,.69444,0,0,.61111],8658:[-.13313,.36687,0,0,1],8659:[.19444,.69444,0,0,.61111],8660:[-.13313,.36687,0,0,1],8661:[.25,.75,0,0,.61111],8704:[0,.69444,0,0,.55556],8706:[0,.69444,.05556,.08334,.5309],8707:[0,.69444,0,0,.55556],8709:[.05556,.75,0,0,.5],8711:[0,.68333,0,0,.83334],8712:[.0391,.5391,0,0,.66667],8715:[.0391,.5391,0,0,.66667],8722:[.08333,.58333,0,0,.77778],8723:[.08333,.58333,0,0,.77778],8725:[.25,.75,0,0,.5],8726:[.25,.75,0,0,.5],8727:[-.03472,.46528,0,0,.5],8728:[-.05555,.44445,0,0,.5],8729:[-.05555,.44445,0,0,.5],8730:[.2,.8,0,0,.83334],8733:[0,.43056,0,0,.77778],8734:[0,.43056,0,0,1],8736:[0,.69224,0,0,.72222],8739:[.25,.75,0,0,.27778],8741:[.25,.75,0,0,.5],8743:[0,.55556,0,0,.66667],8744:[0,.55556,0,0,.66667],8745:[0,.55556,0,0,.66667],8746:[0,.55556,0,0,.66667],8747:[.19444,.69444,.11111,0,.41667],8764:[-.13313,.36687,0,0,.77778],8768:[.19444,.69444,0,0,.27778],8771:[-.03625,.46375,0,0,.77778],8773:[-.022,.589,0,0,.778],8776:[-.01688,.48312,0,0,.77778],8781:[-.03625,.46375,0,0,.77778],8784:[-.133,.673,0,0,.778],8801:[-.03625,.46375,0,0,.77778],8804:[.13597,.63597,0,0,.77778],8805:[.13597,.63597,0,0,.77778],8810:[.0391,.5391,0,0,1],8811:[.0391,.5391,0,0,1],8826:[.0391,.5391,0,0,.77778],8827:[.0391,.5391,0,0,.77778],8834:[.0391,.5391,0,0,.77778],8835:[.0391,.5391,0,0,.77778],8838:[.13597,.63597,0,0,.77778],8839:[.13597,.63597,0,0,.77778],8846:[0,.55556,0,0,.66667],8849:[.13597,.63597,0,0,.77778],8850:[.13597,.63597,0,0,.77778],8851:[0,.55556,0,0,.66667],8852:[0,.55556,0,0,.66667],8853:[.08333,.58333,0,0,.77778],8854:[.08333,.58333,0,0,.77778],8855:[.08333,.58333,0,0,.77778],8856:[.08333,.58333,0,0,.77778],8857:[.08333,.58333,0,0,.77778],8866:[0,.69444,0,0,.61111],8867:[0,.69444,0,0,.61111],8868:[0,.69444,0,0,.77778],8869:[0,.69444,0,0,.77778],8872:[.249,.75,0,0,.867],8900:[-.05555,.44445,0,0,.5],8901:[-.05555,.44445,0,0,.27778],8902:[-.03472,.46528,0,0,.5],8904:[.005,.505,0,0,.9],8942:[.03,.903,0,0,.278],8943:[-.19,.313,0,0,1.172],8945:[-.1,.823,0,0,1.282],8968:[.25,.75,0,0,.44445],8969:[.25,.75,0,0,.44445],8970:[.25,.75,0,0,.44445],8971:[.25,.75,0,0,.44445],8994:[-.14236,.35764,0,0,1],8995:[-.14236,.35764,0,0,1],9136:[.244,.744,0,0,.412],9137:[.244,.745,0,0,.412],9651:[.19444,.69444,0,0,.88889],9657:[-.03472,.46528,0,0,.5],9661:[.19444,.69444,0,0,.88889],9667:[-.03472,.46528,0,0,.5],9711:[.19444,.69444,0,0,1],9824:[.12963,.69444,0,0,.77778],9825:[.12963,.69444,0,0,.77778],9826:[.12963,.69444,0,0,.77778],9827:[.12963,.69444,0,0,.77778],9837:[0,.75,0,0,.38889],9838:[.19444,.69444,0,0,.38889],9839:[.19444,.69444,0,0,.38889],10216:[.25,.75,0,0,.38889],10217:[.25,.75,0,0,.38889],10222:[.244,.744,0,0,.412],10223:[.244,.745,0,0,.412],10229:[.011,.511,0,0,1.609],10230:[.011,.511,0,0,1.638],10231:[.011,.511,0,0,1.859],10232:[.024,.525,0,0,1.609],10233:[.024,.525,0,0,1.638],10234:[.024,.525,0,0,1.858],10236:[.011,.511,0,0,1.638],10815:[0,.68333,0,0,.75],10927:[.13597,.63597,0,0,.77778],10928:[.13597,.63597,0,0,.77778],57376:[.19444,.69444,0,0,0]},"Math-BoldItalic":{32:[0,0,0,0,.25],48:[0,.44444,0,0,.575],49:[0,.44444,0,0,.575],50:[0,.44444,0,0,.575],51:[.19444,.44444,0,0,.575],52:[.19444,.44444,0,0,.575],53:[.19444,.44444,0,0,.575],54:[0,.64444,0,0,.575],55:[.19444,.44444,0,0,.575],56:[0,.64444,0,0,.575],57:[.19444,.44444,0,0,.575],65:[0,.68611,0,0,.86944],66:[0,.68611,.04835,0,.8664],67:[0,.68611,.06979,0,.81694],68:[0,.68611,.03194,0,.93812],69:[0,.68611,.05451,0,.81007],70:[0,.68611,.15972,0,.68889],71:[0,.68611,0,0,.88673],72:[0,.68611,.08229,0,.98229],73:[0,.68611,.07778,0,.51111],74:[0,.68611,.10069,0,.63125],75:[0,.68611,.06979,0,.97118],76:[0,.68611,0,0,.75555],77:[0,.68611,.11424,0,1.14201],78:[0,.68611,.11424,0,.95034],79:[0,.68611,.03194,0,.83666],80:[0,.68611,.15972,0,.72309],81:[.19444,.68611,0,0,.86861],82:[0,.68611,.00421,0,.87235],83:[0,.68611,.05382,0,.69271],84:[0,.68611,.15972,0,.63663],85:[0,.68611,.11424,0,.80027],86:[0,.68611,.25555,0,.67778],87:[0,.68611,.15972,0,1.09305],88:[0,.68611,.07778,0,.94722],89:[0,.68611,.25555,0,.67458],90:[0,.68611,.06979,0,.77257],97:[0,.44444,0,0,.63287],98:[0,.69444,0,0,.52083],99:[0,.44444,0,0,.51342],100:[0,.69444,0,0,.60972],101:[0,.44444,0,0,.55361],102:[.19444,.69444,.11042,0,.56806],103:[.19444,.44444,.03704,0,.5449],104:[0,.69444,0,0,.66759],105:[0,.69326,0,0,.4048],106:[.19444,.69326,.0622,0,.47083],107:[0,.69444,.01852,0,.6037],108:[0,.69444,.0088,0,.34815],109:[0,.44444,0,0,1.0324],110:[0,.44444,0,0,.71296],111:[0,.44444,0,0,.58472],112:[.19444,.44444,0,0,.60092],113:[.19444,.44444,.03704,0,.54213],114:[0,.44444,.03194,0,.5287],115:[0,.44444,0,0,.53125],116:[0,.63492,0,0,.41528],117:[0,.44444,0,0,.68102],118:[0,.44444,.03704,0,.56666],119:[0,.44444,.02778,0,.83148],120:[0,.44444,0,0,.65903],121:[.19444,.44444,.03704,0,.59028],122:[0,.44444,.04213,0,.55509],160:[0,0,0,0,.25],915:[0,.68611,.15972,0,.65694],916:[0,.68611,0,0,.95833],920:[0,.68611,.03194,0,.86722],923:[0,.68611,0,0,.80555],926:[0,.68611,.07458,0,.84125],928:[0,.68611,.08229,0,.98229],931:[0,.68611,.05451,0,.88507],933:[0,.68611,.15972,0,.67083],934:[0,.68611,0,0,.76666],936:[0,.68611,.11653,0,.71402],937:[0,.68611,.04835,0,.8789],945:[0,.44444,0,0,.76064],946:[.19444,.69444,.03403,0,.65972],947:[.19444,.44444,.06389,0,.59003],948:[0,.69444,.03819,0,.52222],949:[0,.44444,0,0,.52882],950:[.19444,.69444,.06215,0,.50833],951:[.19444,.44444,.03704,0,.6],952:[0,.69444,.03194,0,.5618],953:[0,.44444,0,0,.41204],954:[0,.44444,0,0,.66759],955:[0,.69444,0,0,.67083],956:[.19444,.44444,0,0,.70787],957:[0,.44444,.06898,0,.57685],958:[.19444,.69444,.03021,0,.50833],959:[0,.44444,0,0,.58472],960:[0,.44444,.03704,0,.68241],961:[.19444,.44444,0,0,.6118],962:[.09722,.44444,.07917,0,.42361],963:[0,.44444,.03704,0,.68588],964:[0,.44444,.13472,0,.52083],965:[0,.44444,.03704,0,.63055],966:[.19444,.44444,0,0,.74722],967:[.19444,.44444,0,0,.71805],968:[.19444,.69444,.03704,0,.75833],969:[0,.44444,.03704,0,.71782],977:[0,.69444,0,0,.69155],981:[.19444,.69444,0,0,.7125],982:[0,.44444,.03194,0,.975],1009:[.19444,.44444,0,0,.6118],1013:[0,.44444,0,0,.48333],57649:[0,.44444,0,0,.39352],57911:[.19444,.44444,0,0,.43889]},"Math-Italic":{32:[0,0,0,0,.25],48:[0,.43056,0,0,.5],49:[0,.43056,0,0,.5],50:[0,.43056,0,0,.5],51:[.19444,.43056,0,0,.5],52:[.19444,.43056,0,0,.5],53:[.19444,.43056,0,0,.5],54:[0,.64444,0,0,.5],55:[.19444,.43056,0,0,.5],56:[0,.64444,0,0,.5],57:[.19444,.43056,0,0,.5],65:[0,.68333,0,.13889,.75],66:[0,.68333,.05017,.08334,.75851],67:[0,.68333,.07153,.08334,.71472],68:[0,.68333,.02778,.05556,.82792],69:[0,.68333,.05764,.08334,.7382],70:[0,.68333,.13889,.08334,.64306],71:[0,.68333,0,.08334,.78625],72:[0,.68333,.08125,.05556,.83125],73:[0,.68333,.07847,.11111,.43958],74:[0,.68333,.09618,.16667,.55451],75:[0,.68333,.07153,.05556,.84931],76:[0,.68333,0,.02778,.68056],77:[0,.68333,.10903,.08334,.97014],78:[0,.68333,.10903,.08334,.80347],79:[0,.68333,.02778,.08334,.76278],80:[0,.68333,.13889,.08334,.64201],81:[.19444,.68333,0,.08334,.79056],82:[0,.68333,.00773,.08334,.75929],83:[0,.68333,.05764,.08334,.6132],84:[0,.68333,.13889,.08334,.58438],85:[0,.68333,.10903,.02778,.68278],86:[0,.68333,.22222,0,.58333],87:[0,.68333,.13889,0,.94445],88:[0,.68333,.07847,.08334,.82847],89:[0,.68333,.22222,0,.58056],90:[0,.68333,.07153,.08334,.68264],97:[0,.43056,0,0,.52859],98:[0,.69444,0,0,.42917],99:[0,.43056,0,.05556,.43276],100:[0,.69444,0,.16667,.52049],101:[0,.43056,0,.05556,.46563],102:[.19444,.69444,.10764,.16667,.48959],103:[.19444,.43056,.03588,.02778,.47697],104:[0,.69444,0,0,.57616],105:[0,.65952,0,0,.34451],106:[.19444,.65952,.05724,0,.41181],107:[0,.69444,.03148,0,.5206],108:[0,.69444,.01968,.08334,.29838],109:[0,.43056,0,0,.87801],110:[0,.43056,0,0,.60023],111:[0,.43056,0,.05556,.48472],112:[.19444,.43056,0,.08334,.50313],113:[.19444,.43056,.03588,.08334,.44641],114:[0,.43056,.02778,.05556,.45116],115:[0,.43056,0,.05556,.46875],116:[0,.61508,0,.08334,.36111],117:[0,.43056,0,.02778,.57246],118:[0,.43056,.03588,.02778,.48472],119:[0,.43056,.02691,.08334,.71592],120:[0,.43056,0,.02778,.57153],121:[.19444,.43056,.03588,.05556,.49028],122:[0,.43056,.04398,.05556,.46505],160:[0,0,0,0,.25],915:[0,.68333,.13889,.08334,.61528],916:[0,.68333,0,.16667,.83334],920:[0,.68333,.02778,.08334,.76278],923:[0,.68333,0,.16667,.69445],926:[0,.68333,.07569,.08334,.74236],928:[0,.68333,.08125,.05556,.83125],931:[0,.68333,.05764,.08334,.77986],933:[0,.68333,.13889,.05556,.58333],934:[0,.68333,0,.08334,.66667],936:[0,.68333,.11,.05556,.61222],937:[0,.68333,.05017,.08334,.7724],945:[0,.43056,.0037,.02778,.6397],946:[.19444,.69444,.05278,.08334,.56563],947:[.19444,.43056,.05556,0,.51773],948:[0,.69444,.03785,.05556,.44444],949:[0,.43056,0,.08334,.46632],950:[.19444,.69444,.07378,.08334,.4375],951:[.19444,.43056,.03588,.05556,.49653],952:[0,.69444,.02778,.08334,.46944],953:[0,.43056,0,.05556,.35394],954:[0,.43056,0,0,.57616],955:[0,.69444,0,0,.58334],956:[.19444,.43056,0,.02778,.60255],957:[0,.43056,.06366,.02778,.49398],958:[.19444,.69444,.04601,.11111,.4375],959:[0,.43056,0,.05556,.48472],960:[0,.43056,.03588,0,.57003],961:[.19444,.43056,0,.08334,.51702],962:[.09722,.43056,.07986,.08334,.36285],963:[0,.43056,.03588,0,.57141],964:[0,.43056,.1132,.02778,.43715],965:[0,.43056,.03588,.02778,.54028],966:[.19444,.43056,0,.08334,.65417],967:[.19444,.43056,0,.05556,.62569],968:[.19444,.69444,.03588,.11111,.65139],969:[0,.43056,.03588,0,.62245],977:[0,.69444,0,.08334,.59144],981:[.19444,.69444,0,.08334,.59583],982:[0,.43056,.02778,0,.82813],1009:[.19444,.43056,0,.08334,.51702],1013:[0,.43056,0,.05556,.4059],57649:[0,.43056,0,.02778,.32246],57911:[.19444,.43056,0,.08334,.38403]},"SansSerif-Bold":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.36667],34:[0,.69444,0,0,.55834],35:[.19444,.69444,0,0,.91667],36:[.05556,.75,0,0,.55],37:[.05556,.75,0,0,1.02912],38:[0,.69444,0,0,.83056],39:[0,.69444,0,0,.30556],40:[.25,.75,0,0,.42778],41:[.25,.75,0,0,.42778],42:[0,.75,0,0,.55],43:[.11667,.61667,0,0,.85556],44:[.10556,.13056,0,0,.30556],45:[0,.45833,0,0,.36667],46:[0,.13056,0,0,.30556],47:[.25,.75,0,0,.55],48:[0,.69444,0,0,.55],49:[0,.69444,0,0,.55],50:[0,.69444,0,0,.55],51:[0,.69444,0,0,.55],52:[0,.69444,0,0,.55],53:[0,.69444,0,0,.55],54:[0,.69444,0,0,.55],55:[0,.69444,0,0,.55],56:[0,.69444,0,0,.55],57:[0,.69444,0,0,.55],58:[0,.45833,0,0,.30556],59:[.10556,.45833,0,0,.30556],61:[-.09375,.40625,0,0,.85556],63:[0,.69444,0,0,.51945],64:[0,.69444,0,0,.73334],65:[0,.69444,0,0,.73334],66:[0,.69444,0,0,.73334],67:[0,.69444,0,0,.70278],68:[0,.69444,0,0,.79445],69:[0,.69444,0,0,.64167],70:[0,.69444,0,0,.61111],71:[0,.69444,0,0,.73334],72:[0,.69444,0,0,.79445],73:[0,.69444,0,0,.33056],74:[0,.69444,0,0,.51945],75:[0,.69444,0,0,.76389],76:[0,.69444,0,0,.58056],77:[0,.69444,0,0,.97778],78:[0,.69444,0,0,.79445],79:[0,.69444,0,0,.79445],80:[0,.69444,0,0,.70278],81:[.10556,.69444,0,0,.79445],82:[0,.69444,0,0,.70278],83:[0,.69444,0,0,.61111],84:[0,.69444,0,0,.73334],85:[0,.69444,0,0,.76389],86:[0,.69444,.01528,0,.73334],87:[0,.69444,.01528,0,1.03889],88:[0,.69444,0,0,.73334],89:[0,.69444,.0275,0,.73334],90:[0,.69444,0,0,.67223],91:[.25,.75,0,0,.34306],93:[.25,.75,0,0,.34306],94:[0,.69444,0,0,.55],95:[.35,.10833,.03056,0,.55],97:[0,.45833,0,0,.525],98:[0,.69444,0,0,.56111],99:[0,.45833,0,0,.48889],100:[0,.69444,0,0,.56111],101:[0,.45833,0,0,.51111],102:[0,.69444,.07639,0,.33611],103:[.19444,.45833,.01528,0,.55],104:[0,.69444,0,0,.56111],105:[0,.69444,0,0,.25556],106:[.19444,.69444,0,0,.28611],107:[0,.69444,0,0,.53056],108:[0,.69444,0,0,.25556],109:[0,.45833,0,0,.86667],110:[0,.45833,0,0,.56111],111:[0,.45833,0,0,.55],112:[.19444,.45833,0,0,.56111],113:[.19444,.45833,0,0,.56111],114:[0,.45833,.01528,0,.37222],115:[0,.45833,0,0,.42167],116:[0,.58929,0,0,.40417],117:[0,.45833,0,0,.56111],118:[0,.45833,.01528,0,.5],119:[0,.45833,.01528,0,.74445],120:[0,.45833,0,0,.5],121:[.19444,.45833,.01528,0,.5],122:[0,.45833,0,0,.47639],126:[.35,.34444,0,0,.55],160:[0,0,0,0,.25],168:[0,.69444,0,0,.55],176:[0,.69444,0,0,.73334],180:[0,.69444,0,0,.55],184:[.17014,0,0,0,.48889],305:[0,.45833,0,0,.25556],567:[.19444,.45833,0,0,.28611],710:[0,.69444,0,0,.55],711:[0,.63542,0,0,.55],713:[0,.63778,0,0,.55],728:[0,.69444,0,0,.55],729:[0,.69444,0,0,.30556],730:[0,.69444,0,0,.73334],732:[0,.69444,0,0,.55],733:[0,.69444,0,0,.55],915:[0,.69444,0,0,.58056],916:[0,.69444,0,0,.91667],920:[0,.69444,0,0,.85556],923:[0,.69444,0,0,.67223],926:[0,.69444,0,0,.73334],928:[0,.69444,0,0,.79445],931:[0,.69444,0,0,.79445],933:[0,.69444,0,0,.85556],934:[0,.69444,0,0,.79445],936:[0,.69444,0,0,.85556],937:[0,.69444,0,0,.79445],8211:[0,.45833,.03056,0,.55],8212:[0,.45833,.03056,0,1.10001],8216:[0,.69444,0,0,.30556],8217:[0,.69444,0,0,.30556],8220:[0,.69444,0,0,.55834],8221:[0,.69444,0,0,.55834]},"SansSerif-Italic":{32:[0,0,0,0,.25],33:[0,.69444,.05733,0,.31945],34:[0,.69444,.00316,0,.5],35:[.19444,.69444,.05087,0,.83334],36:[.05556,.75,.11156,0,.5],37:[.05556,.75,.03126,0,.83334],38:[0,.69444,.03058,0,.75834],39:[0,.69444,.07816,0,.27778],40:[.25,.75,.13164,0,.38889],41:[.25,.75,.02536,0,.38889],42:[0,.75,.11775,0,.5],43:[.08333,.58333,.02536,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,.01946,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,.13164,0,.5],48:[0,.65556,.11156,0,.5],49:[0,.65556,.11156,0,.5],50:[0,.65556,.11156,0,.5],51:[0,.65556,.11156,0,.5],52:[0,.65556,.11156,0,.5],53:[0,.65556,.11156,0,.5],54:[0,.65556,.11156,0,.5],55:[0,.65556,.11156,0,.5],56:[0,.65556,.11156,0,.5],57:[0,.65556,.11156,0,.5],58:[0,.44444,.02502,0,.27778],59:[.125,.44444,.02502,0,.27778],61:[-.13,.37,.05087,0,.77778],63:[0,.69444,.11809,0,.47222],64:[0,.69444,.07555,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,.08293,0,.66667],67:[0,.69444,.11983,0,.63889],68:[0,.69444,.07555,0,.72223],69:[0,.69444,.11983,0,.59722],70:[0,.69444,.13372,0,.56945],71:[0,.69444,.11983,0,.66667],72:[0,.69444,.08094,0,.70834],73:[0,.69444,.13372,0,.27778],74:[0,.69444,.08094,0,.47222],75:[0,.69444,.11983,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,.08094,0,.875],78:[0,.69444,.08094,0,.70834],79:[0,.69444,.07555,0,.73611],80:[0,.69444,.08293,0,.63889],81:[.125,.69444,.07555,0,.73611],82:[0,.69444,.08293,0,.64584],83:[0,.69444,.09205,0,.55556],84:[0,.69444,.13372,0,.68056],85:[0,.69444,.08094,0,.6875],86:[0,.69444,.1615,0,.66667],87:[0,.69444,.1615,0,.94445],88:[0,.69444,.13372,0,.66667],89:[0,.69444,.17261,0,.66667],90:[0,.69444,.11983,0,.61111],91:[.25,.75,.15942,0,.28889],93:[.25,.75,.08719,0,.28889],94:[0,.69444,.0799,0,.5],95:[.35,.09444,.08616,0,.5],97:[0,.44444,.00981,0,.48056],98:[0,.69444,.03057,0,.51667],99:[0,.44444,.08336,0,.44445],100:[0,.69444,.09483,0,.51667],101:[0,.44444,.06778,0,.44445],102:[0,.69444,.21705,0,.30556],103:[.19444,.44444,.10836,0,.5],104:[0,.69444,.01778,0,.51667],105:[0,.67937,.09718,0,.23889],106:[.19444,.67937,.09162,0,.26667],107:[0,.69444,.08336,0,.48889],108:[0,.69444,.09483,0,.23889],109:[0,.44444,.01778,0,.79445],110:[0,.44444,.01778,0,.51667],111:[0,.44444,.06613,0,.5],112:[.19444,.44444,.0389,0,.51667],113:[.19444,.44444,.04169,0,.51667],114:[0,.44444,.10836,0,.34167],115:[0,.44444,.0778,0,.38333],116:[0,.57143,.07225,0,.36111],117:[0,.44444,.04169,0,.51667],118:[0,.44444,.10836,0,.46111],119:[0,.44444,.10836,0,.68334],120:[0,.44444,.09169,0,.46111],121:[.19444,.44444,.10836,0,.46111],122:[0,.44444,.08752,0,.43472],126:[.35,.32659,.08826,0,.5],160:[0,0,0,0,.25],168:[0,.67937,.06385,0,.5],176:[0,.69444,0,0,.73752],184:[.17014,0,0,0,.44445],305:[0,.44444,.04169,0,.23889],567:[.19444,.44444,.04169,0,.26667],710:[0,.69444,.0799,0,.5],711:[0,.63194,.08432,0,.5],713:[0,.60889,.08776,0,.5],714:[0,.69444,.09205,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,.09483,0,.5],729:[0,.67937,.07774,0,.27778],730:[0,.69444,0,0,.73752],732:[0,.67659,.08826,0,.5],733:[0,.69444,.09205,0,.5],915:[0,.69444,.13372,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,.07555,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,.12816,0,.66667],928:[0,.69444,.08094,0,.70834],931:[0,.69444,.11983,0,.72222],933:[0,.69444,.09031,0,.77778],934:[0,.69444,.04603,0,.72222],936:[0,.69444,.09031,0,.77778],937:[0,.69444,.08293,0,.72222],8211:[0,.44444,.08616,0,.5],8212:[0,.44444,.08616,0,1],8216:[0,.69444,.07816,0,.27778],8217:[0,.69444,.07816,0,.27778],8220:[0,.69444,.14205,0,.5],8221:[0,.69444,.00316,0,.5]},"SansSerif-Regular":{32:[0,0,0,0,.25],33:[0,.69444,0,0,.31945],34:[0,.69444,0,0,.5],35:[.19444,.69444,0,0,.83334],36:[.05556,.75,0,0,.5],37:[.05556,.75,0,0,.83334],38:[0,.69444,0,0,.75834],39:[0,.69444,0,0,.27778],40:[.25,.75,0,0,.38889],41:[.25,.75,0,0,.38889],42:[0,.75,0,0,.5],43:[.08333,.58333,0,0,.77778],44:[.125,.08333,0,0,.27778],45:[0,.44444,0,0,.33333],46:[0,.08333,0,0,.27778],47:[.25,.75,0,0,.5],48:[0,.65556,0,0,.5],49:[0,.65556,0,0,.5],50:[0,.65556,0,0,.5],51:[0,.65556,0,0,.5],52:[0,.65556,0,0,.5],53:[0,.65556,0,0,.5],54:[0,.65556,0,0,.5],55:[0,.65556,0,0,.5],56:[0,.65556,0,0,.5],57:[0,.65556,0,0,.5],58:[0,.44444,0,0,.27778],59:[.125,.44444,0,0,.27778],61:[-.13,.37,0,0,.77778],63:[0,.69444,0,0,.47222],64:[0,.69444,0,0,.66667],65:[0,.69444,0,0,.66667],66:[0,.69444,0,0,.66667],67:[0,.69444,0,0,.63889],68:[0,.69444,0,0,.72223],69:[0,.69444,0,0,.59722],70:[0,.69444,0,0,.56945],71:[0,.69444,0,0,.66667],72:[0,.69444,0,0,.70834],73:[0,.69444,0,0,.27778],74:[0,.69444,0,0,.47222],75:[0,.69444,0,0,.69445],76:[0,.69444,0,0,.54167],77:[0,.69444,0,0,.875],78:[0,.69444,0,0,.70834],79:[0,.69444,0,0,.73611],80:[0,.69444,0,0,.63889],81:[.125,.69444,0,0,.73611],82:[0,.69444,0,0,.64584],83:[0,.69444,0,0,.55556],84:[0,.69444,0,0,.68056],85:[0,.69444,0,0,.6875],86:[0,.69444,.01389,0,.66667],87:[0,.69444,.01389,0,.94445],88:[0,.69444,0,0,.66667],89:[0,.69444,.025,0,.66667],90:[0,.69444,0,0,.61111],91:[.25,.75,0,0,.28889],93:[.25,.75,0,0,.28889],94:[0,.69444,0,0,.5],95:[.35,.09444,.02778,0,.5],97:[0,.44444,0,0,.48056],98:[0,.69444,0,0,.51667],99:[0,.44444,0,0,.44445],100:[0,.69444,0,0,.51667],101:[0,.44444,0,0,.44445],102:[0,.69444,.06944,0,.30556],103:[.19444,.44444,.01389,0,.5],104:[0,.69444,0,0,.51667],105:[0,.67937,0,0,.23889],106:[.19444,.67937,0,0,.26667],107:[0,.69444,0,0,.48889],108:[0,.69444,0,0,.23889],109:[0,.44444,0,0,.79445],110:[0,.44444,0,0,.51667],111:[0,.44444,0,0,.5],112:[.19444,.44444,0,0,.51667],113:[.19444,.44444,0,0,.51667],114:[0,.44444,.01389,0,.34167],115:[0,.44444,0,0,.38333],116:[0,.57143,0,0,.36111],117:[0,.44444,0,0,.51667],118:[0,.44444,.01389,0,.46111],119:[0,.44444,.01389,0,.68334],120:[0,.44444,0,0,.46111],121:[.19444,.44444,.01389,0,.46111],122:[0,.44444,0,0,.43472],126:[.35,.32659,0,0,.5],160:[0,0,0,0,.25],168:[0,.67937,0,0,.5],176:[0,.69444,0,0,.66667],184:[.17014,0,0,0,.44445],305:[0,.44444,0,0,.23889],567:[.19444,.44444,0,0,.26667],710:[0,.69444,0,0,.5],711:[0,.63194,0,0,.5],713:[0,.60889,0,0,.5],714:[0,.69444,0,0,.5],715:[0,.69444,0,0,.5],728:[0,.69444,0,0,.5],729:[0,.67937,0,0,.27778],730:[0,.69444,0,0,.66667],732:[0,.67659,0,0,.5],733:[0,.69444,0,0,.5],915:[0,.69444,0,0,.54167],916:[0,.69444,0,0,.83334],920:[0,.69444,0,0,.77778],923:[0,.69444,0,0,.61111],926:[0,.69444,0,0,.66667],928:[0,.69444,0,0,.70834],931:[0,.69444,0,0,.72222],933:[0,.69444,0,0,.77778],934:[0,.69444,0,0,.72222],936:[0,.69444,0,0,.77778],937:[0,.69444,0,0,.72222],8211:[0,.44444,.02778,0,.5],8212:[0,.44444,.02778,0,1],8216:[0,.69444,0,0,.27778],8217:[0,.69444,0,0,.27778],8220:[0,.69444,0,0,.5],8221:[0,.69444,0,0,.5]},"Script-Regular":{32:[0,0,0,0,.25],65:[0,.7,.22925,0,.80253],66:[0,.7,.04087,0,.90757],67:[0,.7,.1689,0,.66619],68:[0,.7,.09371,0,.77443],69:[0,.7,.18583,0,.56162],70:[0,.7,.13634,0,.89544],71:[0,.7,.17322,0,.60961],72:[0,.7,.29694,0,.96919],73:[0,.7,.19189,0,.80907],74:[.27778,.7,.19189,0,1.05159],75:[0,.7,.31259,0,.91364],76:[0,.7,.19189,0,.87373],77:[0,.7,.15981,0,1.08031],78:[0,.7,.3525,0,.9015],79:[0,.7,.08078,0,.73787],80:[0,.7,.08078,0,1.01262],81:[0,.7,.03305,0,.88282],82:[0,.7,.06259,0,.85],83:[0,.7,.19189,0,.86767],84:[0,.7,.29087,0,.74697],85:[0,.7,.25815,0,.79996],86:[0,.7,.27523,0,.62204],87:[0,.7,.27523,0,.80532],88:[0,.7,.26006,0,.94445],89:[0,.7,.2939,0,.70961],90:[0,.7,.24037,0,.8212],160:[0,0,0,0,.25]},"Size1-Regular":{32:[0,0,0,0,.25],40:[.35001,.85,0,0,.45834],41:[.35001,.85,0,0,.45834],47:[.35001,.85,0,0,.57778],91:[.35001,.85,0,0,.41667],92:[.35001,.85,0,0,.57778],93:[.35001,.85,0,0,.41667],123:[.35001,.85,0,0,.58334],125:[.35001,.85,0,0,.58334],160:[0,0,0,0,.25],710:[0,.72222,0,0,.55556],732:[0,.72222,0,0,.55556],770:[0,.72222,0,0,.55556],771:[0,.72222,0,0,.55556],8214:[-99e-5,.601,0,0,.77778],8593:[1e-5,.6,0,0,.66667],8595:[1e-5,.6,0,0,.66667],8657:[1e-5,.6,0,0,.77778],8659:[1e-5,.6,0,0,.77778],8719:[.25001,.75,0,0,.94445],8720:[.25001,.75,0,0,.94445],8721:[.25001,.75,0,0,1.05556],8730:[.35001,.85,0,0,1],8739:[-.00599,.606,0,0,.33333],8741:[-.00599,.606,0,0,.55556],8747:[.30612,.805,.19445,0,.47222],8748:[.306,.805,.19445,0,.47222],8749:[.306,.805,.19445,0,.47222],8750:[.30612,.805,.19445,0,.47222],8896:[.25001,.75,0,0,.83334],8897:[.25001,.75,0,0,.83334],8898:[.25001,.75,0,0,.83334],8899:[.25001,.75,0,0,.83334],8968:[.35001,.85,0,0,.47222],8969:[.35001,.85,0,0,.47222],8970:[.35001,.85,0,0,.47222],8971:[.35001,.85,0,0,.47222],9168:[-99e-5,.601,0,0,.66667],10216:[.35001,.85,0,0,.47222],10217:[.35001,.85,0,0,.47222],10752:[.25001,.75,0,0,1.11111],10753:[.25001,.75,0,0,1.11111],10754:[.25001,.75,0,0,1.11111],10756:[.25001,.75,0,0,.83334],10758:[.25001,.75,0,0,.83334]},"Size2-Regular":{32:[0,0,0,0,.25],40:[.65002,1.15,0,0,.59722],41:[.65002,1.15,0,0,.59722],47:[.65002,1.15,0,0,.81111],91:[.65002,1.15,0,0,.47222],92:[.65002,1.15,0,0,.81111],93:[.65002,1.15,0,0,.47222],123:[.65002,1.15,0,0,.66667],125:[.65002,1.15,0,0,.66667],160:[0,0,0,0,.25],710:[0,.75,0,0,1],732:[0,.75,0,0,1],770:[0,.75,0,0,1],771:[0,.75,0,0,1],8719:[.55001,1.05,0,0,1.27778],8720:[.55001,1.05,0,0,1.27778],8721:[.55001,1.05,0,0,1.44445],8730:[.65002,1.15,0,0,1],8747:[.86225,1.36,.44445,0,.55556],8748:[.862,1.36,.44445,0,.55556],8749:[.862,1.36,.44445,0,.55556],8750:[.86225,1.36,.44445,0,.55556],8896:[.55001,1.05,0,0,1.11111],8897:[.55001,1.05,0,0,1.11111],8898:[.55001,1.05,0,0,1.11111],8899:[.55001,1.05,0,0,1.11111],8968:[.65002,1.15,0,0,.52778],8969:[.65002,1.15,0,0,.52778],8970:[.65002,1.15,0,0,.52778],8971:[.65002,1.15,0,0,.52778],10216:[.65002,1.15,0,0,.61111],10217:[.65002,1.15,0,0,.61111],10752:[.55001,1.05,0,0,1.51112],10753:[.55001,1.05,0,0,1.51112],10754:[.55001,1.05,0,0,1.51112],10756:[.55001,1.05,0,0,1.11111],10758:[.55001,1.05,0,0,1.11111]},"Size3-Regular":{32:[0,0,0,0,.25],40:[.95003,1.45,0,0,.73611],41:[.95003,1.45,0,0,.73611],47:[.95003,1.45,0,0,1.04445],91:[.95003,1.45,0,0,.52778],92:[.95003,1.45,0,0,1.04445],93:[.95003,1.45,0,0,.52778],123:[.95003,1.45,0,0,.75],125:[.95003,1.45,0,0,.75],160:[0,0,0,0,.25],710:[0,.75,0,0,1.44445],732:[0,.75,0,0,1.44445],770:[0,.75,0,0,1.44445],771:[0,.75,0,0,1.44445],8730:[.95003,1.45,0,0,1],8968:[.95003,1.45,0,0,.58334],8969:[.95003,1.45,0,0,.58334],8970:[.95003,1.45,0,0,.58334],8971:[.95003,1.45,0,0,.58334],10216:[.95003,1.45,0,0,.75],10217:[.95003,1.45,0,0,.75]},"Size4-Regular":{32:[0,0,0,0,.25],40:[1.25003,1.75,0,0,.79167],41:[1.25003,1.75,0,0,.79167],47:[1.25003,1.75,0,0,1.27778],91:[1.25003,1.75,0,0,.58334],92:[1.25003,1.75,0,0,1.27778],93:[1.25003,1.75,0,0,.58334],123:[1.25003,1.75,0,0,.80556],125:[1.25003,1.75,0,0,.80556],160:[0,0,0,0,.25],710:[0,.825,0,0,1.8889],732:[0,.825,0,0,1.8889],770:[0,.825,0,0,1.8889],771:[0,.825,0,0,1.8889],8730:[1.25003,1.75,0,0,1],8968:[1.25003,1.75,0,0,.63889],8969:[1.25003,1.75,0,0,.63889],8970:[1.25003,1.75,0,0,.63889],8971:[1.25003,1.75,0,0,.63889],9115:[.64502,1.155,0,0,.875],9116:[1e-5,.6,0,0,.875],9117:[.64502,1.155,0,0,.875],9118:[.64502,1.155,0,0,.875],9119:[1e-5,.6,0,0,.875],9120:[.64502,1.155,0,0,.875],9121:[.64502,1.155,0,0,.66667],9122:[-99e-5,.601,0,0,.66667],9123:[.64502,1.155,0,0,.66667],9124:[.64502,1.155,0,0,.66667],9125:[-99e-5,.601,0,0,.66667],9126:[.64502,1.155,0,0,.66667],9127:[1e-5,.9,0,0,.88889],9128:[.65002,1.15,0,0,.88889],9129:[.90001,0,0,0,.88889],9130:[0,.3,0,0,.88889],9131:[1e-5,.9,0,0,.88889],9132:[.65002,1.15,0,0,.88889],9133:[.90001,0,0,0,.88889],9143:[.88502,.915,0,0,1.05556],10216:[1.25003,1.75,0,0,.80556],10217:[1.25003,1.75,0,0,.80556],57344:[-.00499,.605,0,0,1.05556],57345:[-.00499,.605,0,0,1.05556],57680:[0,.12,0,0,.45],57681:[0,.12,0,0,.45],57682:[0,.12,0,0,.45],57683:[0,.12,0,0,.45]},"Typewriter-Regular":{32:[0,0,0,0,.525],33:[0,.61111,0,0,.525],34:[0,.61111,0,0,.525],35:[0,.61111,0,0,.525],36:[.08333,.69444,0,0,.525],37:[.08333,.69444,0,0,.525],38:[0,.61111,0,0,.525],39:[0,.61111,0,0,.525],40:[.08333,.69444,0,0,.525],41:[.08333,.69444,0,0,.525],42:[0,.52083,0,0,.525],43:[-.08056,.53055,0,0,.525],44:[.13889,.125,0,0,.525],45:[-.08056,.53055,0,0,.525],46:[0,.125,0,0,.525],47:[.08333,.69444,0,0,.525],48:[0,.61111,0,0,.525],49:[0,.61111,0,0,.525],50:[0,.61111,0,0,.525],51:[0,.61111,0,0,.525],52:[0,.61111,0,0,.525],53:[0,.61111,0,0,.525],54:[0,.61111,0,0,.525],55:[0,.61111,0,0,.525],56:[0,.61111,0,0,.525],57:[0,.61111,0,0,.525],58:[0,.43056,0,0,.525],59:[.13889,.43056,0,0,.525],60:[-.05556,.55556,0,0,.525],61:[-.19549,.41562,0,0,.525],62:[-.05556,.55556,0,0,.525],63:[0,.61111,0,0,.525],64:[0,.61111,0,0,.525],65:[0,.61111,0,0,.525],66:[0,.61111,0,0,.525],67:[0,.61111,0,0,.525],68:[0,.61111,0,0,.525],69:[0,.61111,0,0,.525],70:[0,.61111,0,0,.525],71:[0,.61111,0,0,.525],72:[0,.61111,0,0,.525],73:[0,.61111,0,0,.525],74:[0,.61111,0,0,.525],75:[0,.61111,0,0,.525],76:[0,.61111,0,0,.525],77:[0,.61111,0,0,.525],78:[0,.61111,0,0,.525],79:[0,.61111,0,0,.525],80:[0,.61111,0,0,.525],81:[.13889,.61111,0,0,.525],82:[0,.61111,0,0,.525],83:[0,.61111,0,0,.525],84:[0,.61111,0,0,.525],85:[0,.61111,0,0,.525],86:[0,.61111,0,0,.525],87:[0,.61111,0,0,.525],88:[0,.61111,0,0,.525],89:[0,.61111,0,0,.525],90:[0,.61111,0,0,.525],91:[.08333,.69444,0,0,.525],92:[.08333,.69444,0,0,.525],93:[.08333,.69444,0,0,.525],94:[0,.61111,0,0,.525],95:[.09514,0,0,0,.525],96:[0,.61111,0,0,.525],97:[0,.43056,0,0,.525],98:[0,.61111,0,0,.525],99:[0,.43056,0,0,.525],100:[0,.61111,0,0,.525],101:[0,.43056,0,0,.525],102:[0,.61111,0,0,.525],103:[.22222,.43056,0,0,.525],104:[0,.61111,0,0,.525],105:[0,.61111,0,0,.525],106:[.22222,.61111,0,0,.525],107:[0,.61111,0,0,.525],108:[0,.61111,0,0,.525],109:[0,.43056,0,0,.525],110:[0,.43056,0,0,.525],111:[0,.43056,0,0,.525],112:[.22222,.43056,0,0,.525],113:[.22222,.43056,0,0,.525],114:[0,.43056,0,0,.525],115:[0,.43056,0,0,.525],116:[0,.55358,0,0,.525],117:[0,.43056,0,0,.525],118:[0,.43056,0,0,.525],119:[0,.43056,0,0,.525],120:[0,.43056,0,0,.525],121:[.22222,.43056,0,0,.525],122:[0,.43056,0,0,.525],123:[.08333,.69444,0,0,.525],124:[.08333,.69444,0,0,.525],125:[.08333,.69444,0,0,.525],126:[0,.61111,0,0,.525],127:[0,.61111,0,0,.525],160:[0,0,0,0,.525],176:[0,.61111,0,0,.525],184:[.19445,0,0,0,.525],305:[0,.43056,0,0,.525],567:[.22222,.43056,0,0,.525],711:[0,.56597,0,0,.525],713:[0,.56555,0,0,.525],714:[0,.61111,0,0,.525],715:[0,.61111,0,0,.525],728:[0,.61111,0,0,.525],730:[0,.61111,0,0,.525],770:[0,.61111,0,0,.525],771:[0,.61111,0,0,.525],776:[0,.61111,0,0,.525],915:[0,.61111,0,0,.525],916:[0,.61111,0,0,.525],920:[0,.61111,0,0,.525],923:[0,.61111,0,0,.525],926:[0,.61111,0,0,.525],928:[0,.61111,0,0,.525],931:[0,.61111,0,0,.525],933:[0,.61111,0,0,.525],934:[0,.61111,0,0,.525],936:[0,.61111,0,0,.525],937:[0,.61111,0,0,.525],8216:[0,.61111,0,0,.525],8217:[0,.61111,0,0,.525],8242:[0,.61111,0,0,.525],9251:[.11111,.21944,0,0,.525]}},sigmasAndXis={slant:[.25,.25,.25],space:[0,0,0],stretch:[0,0,0],shrink:[0,0,0],xHeight:[.431,.431,.431],quad:[1,1.171,1.472],extraSpace:[0,0,0],num1:[.677,.732,.925],num2:[.394,.384,.387],num3:[.444,.471,.504],denom1:[.686,.752,1.025],denom2:[.345,.344,.532],sup1:[.413,.503,.504],sup2:[.363,.431,.404],sup3:[.289,.286,.294],sub1:[.15,.143,.2],sub2:[.247,.286,.4],supDrop:[.386,.353,.494],subDrop:[.05,.071,.1],delim1:[2.39,1.7,1.98],delim2:[1.01,1.157,1.42],axisHeight:[.25,.25,.25],defaultRuleThickness:[.04,.049,.049],bigOpSpacing1:[.111,.111,.111],bigOpSpacing2:[.166,.166,.166],bigOpSpacing3:[.2,.2,.2],bigOpSpacing4:[.6,.611,.611],bigOpSpacing5:[.1,.143,.143],sqrtRuleThickness:[.04,.04,.04],ptPerEm:[10,10,10],doubleRuleSep:[.2,.2,.2],arrayRuleWidth:[.04,.04,.04],fboxsep:[.3,.3,.3],fboxrule:[.04,.04,.04]},extraCharacterMap={:"A",:"D",:"o",:"a",:"d",:"o",:"A",:"B",:"B",:"F",:"A",:"E",:"K",:"3",:"N",:"N",:"K",:"N",:"M",:"H",:"O",:"N",:"P",:"C",:"T",:"y",:"O",:"X",:"U",:"h",:"W",:"W",:"B",:"X",:"B",:"3",:"X",:"R",:"a",:"b",:"a",:"r",:"y",:"e",:"m",:"e",:"n",:"n",:"n",:"n",:"m",:"n",:"o",:"n",:"p",:"c",:"o",:"y",:"b",:"x",:"n",:"n",:"w",:"w",:"a",:"m",:"a",:"e",:"m",:"r"};function setFontMetrics(s,l){fontMetricsData[s]=l}function getCharacterMetrics(s,l,c){if(!fontMetricsData[l])throw new Error("Font metrics not found for font: "+l+".");var d=s.charCodeAt(0),f=fontMetricsData[l][d];if(!f&&s[0]in extraCharacterMap&&(d=extraCharacterMap[s[0]].charCodeAt(0),f=fontMetricsData[l][d]),!f&&c==="text"&&supportedCodepoint(d)&&(f=fontMetricsData[l][77]),f)return{depth:f[0],height:f[1],italic:f[2],skew:f[3],width:f[4]}}var fontMetricsBySizeIndex={};function getGlobalMetrics(s){var l;if(s>=5?l=0:s>=3?l=1:l=2,!fontMetricsBySizeIndex[l]){var c=fontMetricsBySizeIndex[l]={cssEmPerMu:sigmasAndXis.quad[l]/18};for(var d in sigmasAndXis)sigmasAndXis.hasOwnProperty(d)&&(c[d]=sigmasAndXis[d][l])}return fontMetricsBySizeIndex[l]}var sizeStyleMap=[[1,1,1],[2,1,1],[3,1,1],[4,2,1],[5,2,1],[6,3,1],[7,4,2],[8,6,3],[9,7,6],[10,8,7],[11,10,9]],sizeMultipliers=[.5,.6,.7,.8,.9,1,1.2,1.44,1.728,2.074,2.488],sizeAtStyle=function s(l,c){return c.size<2?l:sizeStyleMap[l-1][c.size-1]};class Options{constructor(l){this.style=void 0,this.color=void 0,this.size=void 0,this.textSize=void 0,this.phantom=void 0,this.font=void 0,this.fontFamily=void 0,this.fontWeight=void 0,this.fontShape=void 0,this.sizeMultiplier=void 0,this.maxSize=void 0,this.minRuleThickness=void 0,this._fontMetrics=void 0,this.style=l.style,this.color=l.color,this.size=l.size||Options.BASESIZE,this.textSize=l.textSize||this.size,this.phantom=!!l.phantom,this.font=l.font||"",this.fontFamily=l.fontFamily||"",this.fontWeight=l.fontWeight||"",this.fontShape=l.fontShape||"",this.sizeMultiplier=sizeMultipliers[this.size-1],this.maxSize=l.maxSize,this.minRuleThickness=l.minRuleThickness,this._fontMetrics=void 0}extend(l){var c={style:this.style,size:this.size,textSize:this.textSize,color:this.color,phantom:this.phantom,font:this.font,fontFamily:this.fontFamily,fontWeight:this.fontWeight,fontShape:this.fontShape,maxSize:this.maxSize,minRuleThickness:this.minRuleThickness};for(var d in l)l.hasOwnProperty(d)&&(c[d]=l[d]);return new Options(c)}havingStyle(l){return this.style===l?this:this.extend({style:l,size:sizeAtStyle(this.textSize,l)})}havingCrampedStyle(){return this.havingStyle(this.style.cramp())}havingSize(l){return this.size===l&&this.textSize===l?this:this.extend({style:this.style.text(),size:l,textSize:l,sizeMultiplier:sizeMultipliers[l-1]})}havingBaseStyle(l){l=l||this.style.text();var c=sizeAtStyle(Options.BASESIZE,l);return this.size===c&&this.textSize===Options.BASESIZE&&this.style===l?this:this.extend({style:l,size:c})}havingBaseSizing(){var l;switch(this.style.id){case 4:case 5:l=3;break;case 6:case 7:l=1;break;default:l=6}return this.extend({style:this.style.text(),size:l})}withColor(l){return this.extend({color:l})}withPhantom(){return this.extend({phantom:!0})}withFont(l){return this.extend({font:l})}withTextFontFamily(l){return this.extend({fontFamily:l,font:""})}withTextFontWeight(l){return this.extend({fontWeight:l,font:""})}withTextFontShape(l){return this.extend({fontShape:l,font:""})}sizingClasses(l){return l.size!==this.size?["sizing","reset-size"+l.size,"size"+this.size]:[]}baseSizingClasses(){return this.size!==Options.BASESIZE?["sizing","reset-size"+this.size,"size"+Options.BASESIZE]:[]}fontMetrics(){return this._fontMetrics||(this._fontMetrics=getGlobalMetrics(this.size)),this._fontMetrics}getColor(){return this.phantom?"transparent":this.color}}Options.BASESIZE=6;var ptPerUnit={pt:1,mm:7227/2540,cm:7227/254,in:72.27,bp:803/800,pc:12,dd:1238/1157,cc:14856/1157,nd:685/642,nc:1370/107,sp:1/65536,px:803/800},relativeUnit={ex:!0,em:!0,mu:!0},validUnit=function s(l){return typeof l!="string"&&(l=l.unit),l in ptPerUnit||l in relativeUnit||l==="ex"},calculateSize=function s(l,c){var d;if(l.unit in ptPerUnit)d=ptPerUnit[l.unit]/c.fontMetrics().ptPerEm/c.sizeMultiplier;else if(l.unit==="mu")d=c.fontMetrics().cssEmPerMu;else{var f;if(c.style.isTight()?f=c.havingStyle(c.style.text()):f=c,l.unit==="ex")d=f.fontMetrics().xHeight;else if(l.unit==="em")d=f.fontMetrics().quad;else throw new ParseError("Invalid unit: '"+l.unit+"'");f!==c&&(d*=f.sizeMultiplier/c.sizeMultiplier)}return Math.min(l.number*d,c.maxSize)},makeEm=function s(l){return+l.toFixed(4)+"em"},createClass=function s(l){return l.filter(c=>c).join(" ")},initNode=function s(l,c,d){if(this.classes=l||[],this.attributes={},this.height=0,this.depth=0,this.maxFontSize=0,this.style=d||{},c){c.style.isTight()&&this.classes.push("mtight");var f=c.getColor();f&&(this.style.color=f)}},toNode=function s(l){var c=document.createElement(l);c.className=createClass(this.classes);for(var d in this.style)this.style.hasOwnProperty(d)&&(c.style[d]=this.style[d]);for(var f in this.attributes)this.attributes.hasOwnProperty(f)&&c.setAttribute(f,this.attributes[f]);for(var g=0;g<this.children.length;g++)c.appendChild(this.children[g].toNode());return c},toMarkup=function s(l){var c="<"+l;this.classes.length&&(c+=' class="'+utils$3.escape(createClass(this.classes))+'"');var d="";for(var f in this.style)this.style.hasOwnProperty(f)&&(d+=utils$3.hyphenate(f)+":"+this.style[f]+";");d&&(c+=' style="'+utils$3.escape(d)+'"');for(var g in this.attributes)this.attributes.hasOwnProperty(g)&&(c+=" "+g+'="'+utils$3.escape(this.attributes[g])+'"');c+=">";for(var v=0;v<this.children.length;v++)c+=this.children[v].toMarkup();return c+="</"+l+">",c};class Span{constructor(l,c,d,f){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.width=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,l,d,f),this.children=c||[]}setAttribute(l,c){this.attributes[l]=c}hasClass(l){return utils$3.contains(this.classes,l)}toNode(){return toNode.call(this,"span")}toMarkup(){return toMarkup.call(this,"span")}}class Anchor{constructor(l,c,d,f){this.children=void 0,this.attributes=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,initNode.call(this,c,f),this.children=d||[],this.setAttribute("href",l)}setAttribute(l,c){this.attributes[l]=c}hasClass(l){return utils$3.contains(this.classes,l)}toNode(){return toNode.call(this,"a")}toMarkup(){return toMarkup.call(this,"a")}}class Img{constructor(l,c,d){this.src=void 0,this.alt=void 0,this.classes=void 0,this.height=void 0,this.depth=void 0,this.maxFontSize=void 0,this.style=void 0,this.alt=c,this.src=l,this.classes=["mord"],this.style=d}hasClass(l){return utils$3.contains(this.classes,l)}toNode(){var l=document.createElement("img");l.src=this.src,l.alt=this.alt,l.className="mord";for(var c in this.style)this.style.hasOwnProperty(c)&&(l.style[c]=this.style[c]);return l}toMarkup(){var l='<img src="'+utils$3.escape(this.src)+'"'+(' alt="'+utils$3.escape(this.alt)+'"'),c="";for(var d in this.style)this.style.hasOwnProperty(d)&&(c+=utils$3.hyphenate(d)+":"+this.style[d]+";");return c&&(l+=' style="'+utils$3.escape(c)+'"'),l+="'/>",l}}var iCombinations={:"",:"",:"",:""};class SymbolNode{constructor(l,c,d,f,g,v,b,$){this.text=void 0,this.height=void 0,this.depth=void 0,this.italic=void 0,this.skew=void 0,this.width=void 0,this.maxFontSize=void 0,this.classes=void 0,this.style=void 0,this.text=l,this.height=c||0,this.depth=d||0,this.italic=f||0,this.skew=g||0,this.width=v||0,this.classes=b||[],this.style=$||{},this.maxFontSize=0;var y=scriptFromCodepoint(this.text.charCodeAt(0));y&&this.classes.push(y+"_fallback"),/[]/.test(this.text)&&(this.text=iCombinations[this.text])}hasClass(l){return utils$3.contains(this.classes,l)}toNode(){var l=document.createTextNode(this.text),c=null;this.italic>0&&(c=document.createElement("span"),c.style.marginRight=makeEm(this.italic)),this.classes.length>0&&(c=c||document.createElement("span"),c.className=createClass(this.classes));for(var d in this.style)this.style.hasOwnProperty(d)&&(c=c||document.createElement("span"),c.style[d]=this.style[d]);return c?(c.appendChild(l),c):l}toMarkup(){var l=!1,c="<span";this.classes.length&&(l=!0,c+=' class="',c+=utils$3.escape(createClass(this.classes)),c+='"');var d="";this.italic>0&&(d+="margin-right:"+this.italic+"em;");for(var f in this.style)this.style.hasOwnProperty(f)&&(d+=utils$3.hyphenate(f)+":"+this.style[f]+";");d&&(l=!0,c+=' style="'+utils$3.escape(d)+'"');var g=utils$3.escape(this.text);return l?(c+=">",c+=g,c+="</span>",c):g}}class SvgNode{constructor(l,c){this.children=void 0,this.attributes=void 0,this.children=l||[],this.attributes=c||{}}toNode(){var l="http://www.w3.org/2000/svg",c=document.createElementNS(l,"svg");for(var d in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,d)&&c.setAttribute(d,this.attributes[d]);for(var f=0;f<this.children.length;f++)c.appendChild(this.children[f].toNode());return c}toMarkup(){var l='<svg xmlns="http://www.w3.org/2000/svg"';for(var c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&(l+=" "+c+'="'+utils$3.escape(this.attributes[c])+'"');l+=">";for(var d=0;d<this.children.length;d++)l+=this.children[d].toMarkup();return l+="</svg>",l}}class PathNode{constructor(l,c){this.pathName=void 0,this.alternate=void 0,this.pathName=l,this.alternate=c}toNode(){var l="http://www.w3.org/2000/svg",c=document.createElementNS(l,"path");return this.alternate?c.setAttribute("d",this.alternate):c.setAttribute("d",path[this.pathName]),c}toMarkup(){return this.alternate?'<path d="'+utils$3.escape(this.alternate)+'"/>':'<path d="'+utils$3.escape(path[this.pathName])+'"/>'}}class LineNode{constructor(l){this.attributes=void 0,this.attributes=l||{}}toNode(){var l="http://www.w3.org/2000/svg",c=document.createElementNS(l,"line");for(var d in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,d)&&c.setAttribute(d,this.attributes[d]);return c}toMarkup(){var l="<line";for(var c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&(l+=" "+c+'="'+utils$3.escape(this.attributes[c])+'"');return l+="/>",l}}function assertSymbolDomNode(s){if(s instanceof SymbolNode)return s;throw new Error("Expected symbolNode but got "+String(s)+".")}function assertSpan(s){if(s instanceof Span)return s;throw new Error("Expected span<HtmlDomNode> but got "+String(s)+".")}var ATOMS={bin:1,close:1,inner:1,open:1,punct:1,rel:1},NON_ATOMS={"accent-token":1,mathord:1,"op-token":1,spacing:1,textord:1},symbols={math:{},text:{}};function defineSymbol(s,l,c,d,f,g){symbols[s][f]={font:l,group:c,replace:d},g&&d&&(symbols[s][d]=symbols[s][f])}var math="math",text="text",main="main",ams="ams",accent="accent-token",bin="bin",close="close",inner="inner",mathord="mathord",op$1="op-token",open$1="open",punct="punct",rel="rel",spacing="spacing",textord="textord";defineSymbol(math,main,rel,"","\\equiv",!0);defineSymbol(math,main,rel,"","\\prec",!0);defineSymbol(math,main,rel,"","\\succ",!0);defineSymbol(math,main,rel,"","\\sim",!0);defineSymbol(math,main,rel,"","\\perp");defineSymbol(math,main,rel,"","\\preceq",!0);defineSymbol(math,main,rel,"","\\succeq",!0);defineSymbol(math,main,rel,"","\\simeq",!0);defineSymbol(math,main,rel,"","\\mid",!0);defineSymbol(math,main,rel,"","\\ll",!0);defineSymbol(math,main,rel,"","\\gg",!0);defineSymbol(math,main,rel,"","\\asymp",!0);defineSymbol(math,main,rel,"","\\parallel");defineSymbol(math,main,rel,"","\\bowtie",!0);defineSymbol(math,main,rel,"","\\smile",!0);defineSymbol(math,main,rel,"","\\sqsubseteq",!0);defineSymbol(math,main,rel,"","\\sqsupseteq",!0);defineSymbol(math,main,rel,"","\\doteq",!0);defineSymbol(math,main,rel,"","\\frown",!0);defineSymbol(math,main,rel,"","\\ni",!0);defineSymbol(math,main,rel,"","\\propto",!0);defineSymbol(math,main,rel,"","\\vdash",!0);defineSymbol(math,main,rel,"","\\dashv",!0);defineSymbol(math,main,rel,"","\\owns");defineSymbol(math,main,punct,".","\\ldotp");defineSymbol(math,main,punct,"","\\cdotp");defineSymbol(math,main,textord,"#","\\#");defineSymbol(text,main,textord,"#","\\#");defineSymbol(math,main,textord,"&","\\&");defineSymbol(text,main,textord,"&","\\&");defineSymbol(math,main,textord,"","\\aleph",!0);defineSymbol(math,main,textord,"","\\forall",!0);defineSymbol(math,main,textord,"","\\hbar",!0);defineSymbol(math,main,textord,"","\\exists",!0);defineSymbol(math,main,textord,"","\\nabla",!0);defineSymbol(math,main,textord,"","\\flat",!0);defineSymbol(math,main,textord,"","\\ell",!0);defineSymbol(math,main,textord,"","\\natural",!0);defineSymbol(math,main,textord,"","\\clubsuit",!0);defineSymbol(math,main,textord,"","\\wp",!0);defineSymbol(math,main,textord,"","\\sharp",!0);defineSymbol(math,main,textord,"","\\diamondsuit",!0);defineSymbol(math,main,textord,"","\\Re",!0);defineSymbol(math,main,textord,"","\\heartsuit",!0);defineSymbol(math,main,textord,"","\\Im",!0);defineSymbol(math,main,textord,"","\\spadesuit",!0);defineSymbol(math,main,textord,"","\\S",!0);defineSymbol(text,main,textord,"","\\S");defineSymbol(math,main,textord,"","\\P",!0);defineSymbol(text,main,textord,"","\\P");defineSymbol(math,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\dag");defineSymbol(text,main,textord,"","\\textdagger");defineSymbol(math,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\ddag");defineSymbol(text,main,textord,"","\\textdaggerdbl");defineSymbol(math,main,close,"","\\rmoustache",!0);defineSymbol(math,main,open$1,"","\\lmoustache",!0);defineSymbol(math,main,close,"","\\rgroup",!0);defineSymbol(math,main,open$1,"","\\lgroup",!0);defineSymbol(math,main,bin,"","\\mp",!0);defineSymbol(math,main,bin,"","\\ominus",!0);defineSymbol(math,main,bin,"","\\uplus",!0);defineSymbol(math,main,bin,"","\\sqcap",!0);defineSymbol(math,main,bin,"","\\ast");defineSymbol(math,main,bin,"","\\sqcup",!0);defineSymbol(math,main,bin,"","\\bigcirc",!0);defineSymbol(math,main,bin,"","\\bullet",!0);defineSymbol(math,main,bin,"","\\ddagger");defineSymbol(math,main,bin,"","\\wr",!0);defineSymbol(math,main,bin,"","\\amalg");defineSymbol(math,main,bin,"&","\\And");defineSymbol(math,main,rel,"","\\longleftarrow",!0);defineSymbol(math,main,rel,"","\\Leftarrow",!0);defineSymbol(math,main,rel,"","\\Longleftarrow",!0);defineSymbol(math,main,rel,"","\\longrightarrow",!0);defineSymbol(math,main,rel,"","\\Rightarrow",!0);defineSymbol(math,main,rel,"","\\Longrightarrow",!0);defineSymbol(math,main,rel,"","\\leftrightarrow",!0);defineSymbol(math,main,rel,"","\\longleftrightarrow",!0);defineSymbol(math,main,rel,"","\\Leftrightarrow",!0);defineSymbol(math,main,rel,"","\\Longleftrightarrow",!0);defineSymbol(math,main,rel,"","\\mapsto",!0);defineSymbol(math,main,rel,"","\\longmapsto",!0);defineSymbol(math,main,rel,"","\\nearrow",!0);defineSymbol(math,main,rel,"","\\hookleftarrow",!0);defineSymbol(math,main,rel,"","\\hookrightarrow",!0);defineSymbol(math,main,rel,"","\\searrow",!0);defineSymbol(math,main,rel,"","\\leftharpoonup",!0);defineSymbol(math,main,rel,"","\\rightharpoonup",!0);defineSymbol(math,main,rel,"","\\swarrow",!0);defineSymbol(math,main,rel,"","\\leftharpoondown",!0);defineSymbol(math,main,rel,"","\\rightharpoondown",!0);defineSymbol(math,main,rel,"","\\nwarrow",!0);defineSymbol(math,main,rel,"","\\rightleftharpoons",!0);defineSymbol(math,ams,rel,"","\\nless",!0);defineSymbol(math,ams,rel,"","\\@nleqslant");defineSymbol(math,ams,rel,"","\\@nleqq");defineSymbol(math,ams,rel,"","\\lneq",!0);defineSymbol(math,ams,rel,"","\\lneqq",!0);defineSymbol(math,ams,rel,"","\\@lvertneqq");defineSymbol(math,ams,rel,"","\\lnsim",!0);defineSymbol(math,ams,rel,"","\\lnapprox",!0);defineSymbol(math,ams,rel,"","\\nprec",!0);defineSymbol(math,ams,rel,"","\\npreceq",!0);defineSymbol(math,ams,rel,"","\\precnsim",!0);defineSymbol(math,ams,rel,"","\\precnapprox",!0);defineSymbol(math,ams,rel,"","\\nsim",!0);defineSymbol(math,ams,rel,"","\\@nshortmid");defineSymbol(math,ams,rel,"","\\nmid",!0);defineSymbol(math,ams,rel,"","\\nvdash",!0);defineSymbol(math,ams,rel,"","\\nvDash",!0);defineSymbol(math,ams,rel,"","\\ntriangleleft");defineSymbol(math,ams,rel,"","\\ntrianglelefteq",!0);defineSymbol(math,ams,rel,"","\\subsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneq");defineSymbol(math,ams,rel,"","\\subsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsubsetneqq");defineSymbol(math,ams,rel,"","\\ngtr",!0);defineSymbol(math,ams,rel,"","\\@ngeqslant");defineSymbol(math,ams,rel,"","\\@ngeqq");defineSymbol(math,ams,rel,"","\\gneq",!0);defineSymbol(math,ams,rel,"","\\gneqq",!0);defineSymbol(math,ams,rel,"","\\@gvertneqq");defineSymbol(math,ams,rel,"","\\gnsim",!0);defineSymbol(math,ams,rel,"","\\gnapprox",!0);defineSymbol(math,ams,rel,"","\\nsucc",!0);defineSymbol(math,ams,rel,"","\\nsucceq",!0);defineSymbol(math,ams,rel,"","\\succnsim",!0);defineSymbol(math,ams,rel,"","\\succnapprox",!0);defineSymbol(math,ams,rel,"","\\ncong",!0);defineSymbol(math,ams,rel,"","\\@nshortparallel");defineSymbol(math,ams,rel,"","\\nparallel",!0);defineSymbol(math,ams,rel,"","\\nVDash",!0);defineSymbol(math,ams,rel,"","\\ntriangleright");defineSymbol(math,ams,rel,"","\\ntrianglerighteq",!0);defineSymbol(math,ams,rel,"","\\@nsupseteqq");defineSymbol(math,ams,rel,"","\\supsetneq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneq");defineSymbol(math,ams,rel,"","\\supsetneqq",!0);defineSymbol(math,ams,rel,"","\\@varsupsetneqq");defineSymbol(math,ams,rel,"","\\nVdash",!0);defineSymbol(math,ams,rel,"","\\precneqq",!0);defineSymbol(math,ams,rel,"","\\succneqq",!0);defineSymbol(math,ams,rel,"","\\@nsubseteqq");defineSymbol(math,ams,bin,"","\\unlhd");defineSymbol(math,ams,bin,"","\\unrhd");defineSymbol(math,ams,rel,"","\\nleftarrow",!0);defineSymbol(math,ams,rel,"","\\nrightarrow",!0);defineSymbol(math,ams,rel,"","\\nLeftarrow",!0);defineSymbol(math,ams,rel,"","\\nRightarrow",!0);defineSymbol(math,ams,rel,"","\\nleftrightarrow",!0);defineSymbol(math,ams,rel,"","\\nLeftrightarrow",!0);defineSymbol(math,ams,rel,"","\\vartriangle");defineSymbol(math,ams,textord,"","\\hslash");defineSymbol(math,ams,textord,"","\\triangledown");defineSymbol(math,ams,textord,"","\\lozenge");defineSymbol(math,ams,textord,"","\\circledS");defineSymbol(math,ams,textord,"","\\circledR");defineSymbol(text,ams,textord,"","\\circledR");defineSymbol(math,ams,textord,"","\\measuredangle",!0);defineSymbol(math,ams,textord,"","\\nexists");defineSymbol(math,ams,textord,"","\\mho");defineSymbol(math,ams,textord,"","\\Finv",!0);defineSymbol(math,ams,textord,"","\\Game",!0);defineSymbol(math,ams,textord,"","\\backprime");defineSymbol(math,ams,textord,"","\\blacktriangle");defineSymbol(math,ams,textord,"","\\blacktriangledown");defineSymbol(math,ams,textord,"","\\blacksquare");defineSymbol(math,ams,textord,"","\\blacklozenge");defineSymbol(math,ams,textord,"","\\bigstar");defineSymbol(math,ams,textord,"","\\sphericalangle",!0);defineSymbol(math,ams,textord,"","\\complement",!0);defineSymbol(math,ams,textord,"","\\eth",!0);defineSymbol(text,main,textord,"","");defineSymbol(math,ams,textord,"","\\diagup");defineSymbol(math,ams,textord,"","\\diagdown");defineSymbol(math,ams,textord,"","\\square");defineSymbol(math,ams,textord,"","\\Box");defineSymbol(math,ams,textord,"","\\Diamond");defineSymbol(math,ams,textord,"","\\yen",!0);defineSymbol(text,ams,textord,"","\\yen",!0);defineSymbol(math,ams,textord,"","\\checkmark",!0);defineSymbol(text,ams,textord,"","\\checkmark");defineSymbol(math,ams,textord,"","\\beth",!0);defineSymbol(math,ams,textord,"","\\daleth",!0);defineSymbol(math,ams,textord,"","\\gimel",!0);defineSymbol(math,ams,textord,"","\\digamma",!0);defineSymbol(math,ams,textord,"","\\varkappa");defineSymbol(math,ams,open$1,"","\\@ulcorner",!0);defineSymbol(math,ams,close,"","\\@urcorner",!0);defineSymbol(math,ams,open$1,"","\\@llcorner",!0);defineSymbol(math,ams,close,"","\\@lrcorner",!0);defineSymbol(math,ams,rel,"","\\leqq",!0);defineSymbol(math,ams,rel,"","\\leqslant",!0);defineSymbol(math,ams,rel,"","\\eqslantless",!0);defineSymbol(math,ams,rel,"","\\lesssim",!0);defineSymbol(math,ams,rel,"","\\lessapprox",!0);defineSymbol(math,ams,rel,"","\\approxeq",!0);defineSymbol(math,ams,bin,"","\\lessdot");defineSymbol(math,ams,rel,"","\\lll",!0);defineSymbol(math,ams,rel,"","\\lessgtr",!0);defineSymbol(math,ams,rel,"","\\lesseqgtr",!0);defineSymbol(math,ams,rel,"","\\lesseqqgtr",!0);defineSymbol(math,ams,rel,"","\\doteqdot");defineSymbol(math,ams,rel,"","\\risingdotseq",!0);defineSymbol(math,ams,rel,"","\\fallingdotseq",!0);defineSymbol(math,ams,rel,"","\\backsim",!0);defineSymbol(math,ams,rel,"","\\backsimeq",!0);defineSymbol(math,ams,rel,"","\\subseteqq",!0);defineSymbol(math,ams,rel,"","\\Subset",!0);defineSymbol(math,ams,rel,"","\\sqsubset",!0);defineSymbol(math,ams,rel,"","\\preccurlyeq",!0);defineSymbol(math,ams,rel,"","\\curlyeqprec",!0);defineSymbol(math,ams,rel,"","\\precsim",!0);defineSymbol(math,ams,rel,"","\\precapprox",!0);defineSymbol(math,ams,rel,"","\\vartriangleleft");defineSymbol(math,ams,rel,"","\\trianglelefteq");defineSymbol(math,ams,rel,"","\\vDash",!0);defineSymbol(math,ams,rel,"","\\Vvdash",!0);defineSymbol(math,ams,rel,"","\\smallsmile");defineSymbol(math,ams,rel,"","\\smallfrown");defineSymbol(math,ams,rel,"","\\bumpeq",!0);defineSymbol(math,ams,rel,"","\\Bumpeq",!0);defineSymbol(math,ams,rel,"","\\geqq",!0);defineSymbol(math,ams,rel,"","\\geqslant",!0);defineSymbol(math,ams,rel,"","\\eqslantgtr",!0);defineSymbol(math,ams,rel,"","\\gtrsim",!0);defineSymbol(math,ams,rel,"","\\gtrapprox",!0);defineSymbol(math,ams,bin,"","\\gtrdot");defineSymbol(math,ams,rel,"","\\ggg",!0);defineSymbol(math,ams,rel,"","\\gtrless",!0);defineSymbol(math,ams,rel,"","\\gtreqless",!0);defineSymbol(math,ams,rel,"","\\gtreqqless",!0);defineSymbol(math,ams,rel,"","\\eqcirc",!0);defineSymbol(math,ams,rel,"","\\circeq",!0);defineSymbol(math,ams,rel,"","\\triangleq",!0);defineSymbol(math,ams,rel,"","\\thicksim");defineSymbol(math,ams,rel,"","\\thickapprox");defineSymbol(math,ams,rel,"","\\supseteqq",!0);defineSymbol(math,ams,rel,"","\\Supset",!0);defineSymbol(math,ams,rel,"","\\sqsupset",!0);defineSymbol(math,ams,rel,"","\\succcurlyeq",!0);defineSymbol(math,ams,rel,"","\\curlyeqsucc",!0);defineSymbol(math,ams,rel,"","\\succsim",!0);defineSymbol(math,ams,rel,"","\\succapprox",!0);defineSymbol(math,ams,rel,"","\\vartriangleright");defineSymbol(math,ams,rel,"","\\trianglerighteq");defineSymbol(math,ams,rel,"","\\Vdash",!0);defineSymbol(math,ams,rel,"","\\shortmid");defineSymbol(math,ams,rel,"","\\shortparallel");defineSymbol(math,ams,rel,"","\\between",!0);defineSymbol(math,ams,rel,"","\\pitchfork",!0);defineSymbol(math,ams,rel,"","\\varpropto");defineSymbol(math,ams,rel,"","\\blacktriangleleft");defineSymbol(math,ams,rel,"","\\therefore",!0);defineSymbol(math,ams,rel,"","\\backepsilon");defineSymbol(math,ams,rel,"","\\blacktriangleright");defineSymbol(math,ams,rel,"","\\because",!0);defineSymbol(math,ams,rel,"","\\llless");defineSymbol(math,ams,rel,"","\\gggtr");defineSymbol(math,ams,bin,"","\\lhd");defineSymbol(math,ams,bin,"","\\rhd");defineSymbol(math,ams,rel,"","\\eqsim",!0);defineSymbol(math,main,rel,"","\\Join");defineSymbol(math,ams,rel,"","\\Doteq",!0);defineSymbol(math,ams,bin,"","\\dotplus",!0);defineSymbol(math,ams,bin,"","\\smallsetminus");defineSymbol(math,ams,bin,"","\\Cap",!0);defineSymbol(math,ams,bin,"","\\Cup",!0);defineSymbol(math,ams,bin,"","\\doublebarwedge",!0);defineSymbol(math,ams,bin,"","\\boxminus",!0);defineSymbol(math,ams,bin,"","\\boxplus",!0);defineSymbol(math,ams,bin,"","\\divideontimes",!0);defineSymbol(math,ams,bin,"","\\ltimes",!0);defineSymbol(math,ams,bin,"","\\rtimes",!0);defineSymbol(math,ams,bin,"","\\leftthreetimes",!0);defineSymbol(math,ams,bin,"","\\rightthreetimes",!0);defineSymbol(math,ams,bin,"","\\curlywedge",!0);defineSymbol(math,ams,bin,"","\\curlyvee",!0);defineSymbol(math,ams,bin,"","\\circleddash",!0);defineSymbol(math,ams,bin,"","\\circledast",!0);defineSymbol(math,ams,bin,"","\\centerdot");defineSymbol(math,ams,bin,"","\\intercal",!0);defineSymbol(math,ams,bin,"","\\doublecap");defineSymbol(math,ams,bin,"","\\doublecup");defineSymbol(math,ams,bin,"","\\boxtimes",!0);defineSymbol(math,ams,rel,"","\\dashrightarrow",!0);defineSymbol(math,ams,rel,"","\\dashleftarrow",!0);defineSymbol(math,ams,rel,"","\\leftleftarrows",!0);defineSymbol(math,ams,rel,"","\\leftrightarrows",!0);defineSymbol(math,ams,rel,"","\\Lleftarrow",!0);defineSymbol(math,ams,rel,"","\\twoheadleftarrow",!0);defineSymbol(math,ams,rel,"","\\leftarrowtail",!0);defineSymbol(math,ams,rel,"","\\looparrowleft",!0);defineSymbol(math,ams,rel,"","\\leftrightharpoons",!0);defineSymbol(math,ams,rel,"","\\curvearrowleft",!0);defineSymbol(math,ams,rel,"","\\circlearrowleft",!0);defineSymbol(math,ams,rel,"","\\Lsh",!0);defineSymbol(math,ams,rel,"","\\upuparrows",!0);defineSymbol(math,ams,rel,"","\\upharpoonleft",!0);defineSymbol(math,ams,rel,"","\\downharpoonleft",!0);defineSymbol(math,main,rel,"","\\origof",!0);defineSymbol(math,main,rel,"","\\imageof",!0);defineSymbol(math,ams,rel,"","\\multimap",!0);defineSymbol(math,ams,rel,"","\\leftrightsquigarrow",!0);defineSymbol(math,ams,rel,"","\\rightrightarrows",!0);defineSymbol(math,ams,rel,"","\\rightleftarrows",!0);defineSymbol(math,ams,rel,"","\\twoheadrightarrow",!0);defineSymbol(math,ams,rel,"","\\rightarrowtail",!0);defineSymbol(math,ams,rel,"","\\looparrowright",!0);defineSymbol(math,ams,rel,"","\\curvearrowright",!0);defineSymbol(math,ams,rel,"","\\circlearrowright",!0);defineSymbol(math,ams,rel,"","\\Rsh",!0);defineSymbol(math,ams,rel,"","\\downdownarrows",!0);defineSymbol(math,ams,rel,"","\\upharpoonright",!0);defineSymbol(math,ams,rel,"","\\downharpoonright",!0);defineSymbol(math,ams,rel,"","\\rightsquigarrow",!0);defineSymbol(math,ams,rel,"","\\leadsto");defineSymbol(math,ams,rel,"","\\Rrightarrow",!0);defineSymbol(math,ams,rel,"","\\restriction");defineSymbol(math,main,textord,"","`");defineSymbol(math,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\$");defineSymbol(text,main,textord,"$","\\textdollar");defineSymbol(math,main,textord,"%","\\%");defineSymbol(text,main,textord,"%","\\%");defineSymbol(math,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\_");defineSymbol(text,main,textord,"_","\\textunderscore");defineSymbol(math,main,textord,"","\\angle",!0);defineSymbol(math,main,textord,"","\\infty",!0);defineSymbol(math,main,textord,"","\\prime");defineSymbol(math,main,textord,"","\\triangle");defineSymbol(math,main,textord,"","\\Gamma",!0);defineSymbol(math,main,textord,"","\\Delta",!0);defineSymbol(math,main,textord,"","\\Theta",!0);defineSymbol(math,main,textord,"","\\Lambda",!0);defineSymbol(math,main,textord,"","\\Xi",!0);defineSymbol(math,main,textord,"","\\Pi",!0);defineSymbol(math,main,textord,"","\\Sigma",!0);defineSymbol(math,main,textord,"","\\Upsilon",!0);defineSymbol(math,main,textord,"","\\Phi",!0);defineSymbol(math,main,textord,"","\\Psi",!0);defineSymbol(math,main,textord,"","\\Omega",!0);defineSymbol(math,main,textord,"A","");defineSymbol(math,main,textord,"B","");defineSymbol(math,main,textord,"E","");defineSymbol(math,main,textord,"Z","");defineSymbol(math,main,textord,"H","");defineSymbol(math,main,textord,"I","");defineSymbol(math,main,textord,"K","");defineSymbol(math,main,textord,"M","");defineSymbol(math,main,textord,"N","");defineSymbol(math,main,textord,"O","");defineSymbol(math,main,textord,"P","");defineSymbol(math,main,textord,"T","");defineSymbol(math,main,textord,"X","");defineSymbol(math,main,textord,"","\\neg",!0);defineSymbol(math,main,textord,"","\\lnot");defineSymbol(math,main,textord,"","\\top");defineSymbol(math,main,textord,"","\\bot");defineSymbol(math,main,textord,"","\\emptyset");defineSymbol(math,ams,textord,"","\\varnothing");defineSymbol(math,main,mathord,"","\\alpha",!0);defineSymbol(math,main,mathord,"","\\beta",!0);defineSymbol(math,main,mathord,"","\\gamma",!0);defineSymbol(math,main,mathord,"","\\delta",!0);defineSymbol(math,main,mathord,"","\\epsilon",!0);defineSymbol(math,main,mathord,"","\\zeta",!0);defineSymbol(math,main,mathord,"","\\eta",!0);defineSymbol(math,main,mathord,"","\\theta",!0);defineSymbol(math,main,mathord,"","\\iota",!0);defineSymbol(math,main,mathord,"","\\kappa",!0);defineSymbol(math,main,mathord,"","\\lambda",!0);defineSymbol(math,main,mathord,"","\\mu",!0);defineSymbol(math,main,mathord,"","\\nu",!0);defineSymbol(math,main,mathord,"","\\xi",!0);defineSymbol(math,main,mathord,"","\\omicron",!0);defineSymbol(math,main,mathord,"","\\pi",!0);defineSymbol(math,main,mathord,"","\\rho",!0);defineSymbol(math,main,mathord,"","\\sigma",!0);defineSymbol(math,main,mathord,"","\\tau",!0);defineSymbol(math,main,mathord,"","\\upsilon",!0);defineSymbol(math,main,mathord,"","\\phi",!0);defineSymbol(math,main,mathord,"","\\chi",!0);defineSymbol(math,main,mathord,"","\\psi",!0);defineSymbol(math,main,mathord,"","\\omega",!0);defineSymbol(math,main,mathord,"","\\varepsilon",!0);defineSymbol(math,main,mathord,"","\\vartheta",!0);defineSymbol(math,main,mathord,"","\\varpi",!0);defineSymbol(math,main,mathord,"","\\varrho",!0);defineSymbol(math,main,mathord,"","\\varsigma",!0);defineSymbol(math,main,mathord,"","\\varphi",!0);defineSymbol(math,main,bin,"","*",!0);defineSymbol(math,main,bin,"+","+");defineSymbol(math,main,bin,"","-",!0);defineSymbol(math,main,bin,"","\\cdot",!0);defineSymbol(math,main,bin,"","\\circ",!0);defineSymbol(math,main,bin,"","\\div",!0);defineSymbol(math,main,bin,"","\\pm",!0);defineSymbol(math,main,bin,"","\\times",!0);defineSymbol(math,main,bin,"","\\cap",!0);defineSymbol(math,main,bin,"","\\cup",!0);defineSymbol(math,main,bin,"","\\setminus",!0);defineSymbol(math,main,bin,"","\\land");defineSymbol(math,main,bin,"","\\lor");defineSymbol(math,main,bin,"","\\wedge",!0);defineSymbol(math,main,bin,"","\\vee",!0);defineSymbol(math,main,textord,"","\\surd");defineSymbol(math,main,open$1,"","\\langle",!0);defineSymbol(math,main,open$1,"","\\lvert");defineSymbol(math,main,open$1,"","\\lVert");defineSymbol(math,main,close,"?","?");defineSymbol(math,main,close,"!","!");defineSymbol(math,main,close,"","\\rangle",!0);defineSymbol(math,main,close,"","\\rvert");defineSymbol(math,main,close,"","\\rVert");defineSymbol(math,main,rel,"=","=");defineSymbol(math,main,rel,":",":");defineSymbol(math,main,rel,"","\\approx",!0);defineSymbol(math,main,rel,"","\\cong",!0);defineSymbol(math,main,rel,"","\\ge");defineSymbol(math,main,rel,"","\\geq",!0);defineSymbol(math,main,rel,"","\\gets");defineSymbol(math,main,rel,">","\\gt",!0);defineSymbol(math,main,rel,"","\\in",!0);defineSymbol(math,main,rel,"","\\@not");defineSymbol(math,main,rel,"","\\subset",!0);defineSymbol(math,main,rel,"","\\supset",!0);defineSymbol(math,main,rel,"","\\subseteq",!0);defineSymbol(math,main,rel,"","\\supseteq",!0);defineSymbol(math,ams,rel,"","\\nsubseteq",!0);defineSymbol(math,ams,rel,"","\\nsupseteq",!0);defineSymbol(math,main,rel,"","\\models");defineSymbol(math,main,rel,"","\\leftarrow",!0);defineSymbol(math,main,rel,"","\\le");defineSymbol(math,main,rel,"","\\leq",!0);defineSymbol(math,main,rel,"<","\\lt",!0);defineSymbol(math,main,rel,"","\\rightarrow",!0);defineSymbol(math,main,rel,"","\\to");defineSymbol(math,ams,rel,"","\\ngeq",!0);defineSymbol(math,ams,rel,"","\\nleq",!0);defineSymbol(math,main,spacing,"","\\ ");defineSymbol(math,main,spacing,"","\\space");defineSymbol(math,main,spacing,"","\\nobreakspace");defineSymbol(text,main,spacing,"","\\ ");defineSymbol(text,main,spacing,""," ");defineSymbol(text,main,spacing,"","\\space");defineSymbol(text,main,spacing,"","\\nobreakspace");defineSymbol(math,main,spacing,null,"\\nobreak");defineSymbol(math,main,spacing,null,"\\allowbreak");defineSymbol(math,main,punct,",",",");defineSymbol(math,main,punct,";",";");defineSymbol(math,ams,bin,"","\\barwedge",!0);defineSymbol(math,ams,bin,"","\\veebar",!0);defineSymbol(math,main,bin,"","\\odot",!0);defineSymbol(math,main,bin,"","\\oplus",!0);defineSymbol(math,main,bin,"","\\otimes",!0);defineSymbol(math,main,textord,"","\\partial",!0);defineSymbol(math,main,bin,"","\\oslash",!0);defineSymbol(math,ams,bin,"","\\circledcirc",!0);defineSymbol(math,ams,bin,"","\\boxdot",!0);defineSymbol(math,main,bin,"","\\bigtriangleup");defineSymbol(math,main,bin,"","\\bigtriangledown");defineSymbol(math,main,bin,"","\\dagger");defineSymbol(math,main,bin,"","\\diamond");defineSymbol(math,main,bin,"","\\star");defineSymbol(math,main,bin,"","\\triangleleft");defineSymbol(math,main,bin,"","\\triangleright");defineSymbol(math,main,open$1,"{","\\{");defineSymbol(text,main,textord,"{","\\{");defineSymbol(text,main,textord,"{","\\textbraceleft");defineSymbol(math,main,close,"}","\\}");defineSymbol(text,main,textord,"}","\\}");defineSymbol(text,main,textord,"}","\\textbraceright");defineSymbol(math,main,open$1,"{","\\lbrace");defineSymbol(math,main,close,"}","\\rbrace");defineSymbol(math,main,open$1,"[","\\lbrack",!0);defineSymbol(text,main,textord,"[","\\lbrack",!0);defineSymbol(math,main,close,"]","\\rbrack",!0);defineSymbol(text,main,textord,"]","\\rbrack",!0);defineSymbol(math,main,open$1,"(","\\lparen",!0);defineSymbol(math,main,close,")","\\rparen",!0);defineSymbol(text,main,textord,"<","\\textless",!0);defineSymbol(text,main,textord,">","\\textgreater",!0);defineSymbol(math,main,open$1,"","\\lfloor",!0);defineSymbol(math,main,close,"","\\rfloor",!0);defineSymbol(math,main,open$1,"","\\lceil",!0);defineSymbol(math,main,close,"","\\rceil",!0);defineSymbol(math,main,textord,"\\","\\backslash");defineSymbol(math,main,textord,"","|");defineSymbol(math,main,textord,"","\\vert");defineSymbol(text,main,textord,"|","\\textbar",!0);defineSymbol(math,main,textord,"","\\|");defineSymbol(math,main,textord,"","\\Vert");defineSymbol(text,main,textord,"","\\textbardbl");defineSymbol(text,main,textord,"~","\\textasciitilde");defineSymbol(text,main,textord,"\\","\\textbackslash");defineSymbol(text,main,textord,"^","\\textasciicircum");defineSymbol(math,main,rel,"","\\uparrow",!0);defineSymbol(math,main,rel,"","\\Uparrow",!0);defineSymbol(math,main,rel,"","\\downarrow",!0);defineSymbol(math,main,rel,"","\\Downarrow",!0);defineSymbol(math,main,rel,"","\\updownarrow",!0);defineSymbol(math,main,rel,"","\\Updownarrow",!0);defineSymbol(math,main,op$1,"","\\coprod");defineSymbol(math,main,op$1,"","\\bigvee");defineSymbol(math,main,op$1,"","\\bigwedge");defineSymbol(math,main,op$1,"","\\biguplus");defineSymbol(math,main,op$1,"","\\bigcap");defineSymbol(math,main,op$1,"","\\bigcup");defineSymbol(math,main,op$1,"","\\int");defineSymbol(math,main,op$1,"","\\intop");defineSymbol(math,main,op$1,"","\\iint");defineSymbol(math,main,op$1,"","\\iiint");defineSymbol(math,main,op$1,"","\\prod");defineSymbol(math,main,op$1,"","\\sum");defineSymbol(math,main,op$1,"","\\bigotimes");defineSymbol(math,main,op$1,"","\\bigoplus");defineSymbol(math,main,op$1,"","\\bigodot");defineSymbol(math,main,op$1,"","\\oint");defineSymbol(math,main,op$1,"","\\oiint");defineSymbol(math,main,op$1,"","\\oiiint");defineSymbol(math,main,op$1,"","\\bigsqcup");defineSymbol(math,main,op$1,"","\\smallint");defineSymbol(text,main,inner,"","\\textellipsis");defineSymbol(math,main,inner,"","\\mathellipsis");defineSymbol(text,main,inner,"","\\ldots",!0);defineSymbol(math,main,inner,"","\\ldots",!0);defineSymbol(math,main,inner,"","\\@cdots",!0);defineSymbol(math,main,inner,"","\\ddots",!0);defineSymbol(math,main,textord,"","\\varvdots");defineSymbol(math,main,accent,"","\\acute");defineSymbol(math,main,accent,"","\\grave");defineSymbol(math,main,accent,"","\\ddot");defineSymbol(math,main,accent,"~","\\tilde");defineSymbol(math,main,accent,"","\\bar");defineSymbol(math,main,accent,"","\\breve");defineSymbol(math,main,accent,"","\\check");defineSymbol(math,main,accent,"^","\\hat");defineSymbol(math,main,accent,"","\\vec");defineSymbol(math,main,accent,"","\\dot");defineSymbol(math,main,accent,"","\\mathring");defineSymbol(math,main,mathord,"","\\@imath");defineSymbol(math,main,mathord,"","\\@jmath");defineSymbol(math,main,textord,"","");defineSymbol(math,main,textord,"","");defineSymbol(text,main,textord,"","\\i",!0);defineSymbol(text,main,textord,"","\\j",!0);defineSymbol(text,main,textord,"","\\ss",!0);defineSymbol(text,main,textord,"","\\ae",!0);defineSymbol(text,main,textord,"","\\oe",!0);defineSymbol(text,main,textord,"","\\o",!0);defineSymbol(text,main,textord,"","\\AE",!0);defineSymbol(text,main,textord,"","\\OE",!0);defineSymbol(text,main,textord,"","\\O",!0);defineSymbol(text,main,accent,"","\\'");defineSymbol(text,main,accent,"","\\`");defineSymbol(text,main,accent,"","\\^");defineSymbol(text,main,accent,"","\\~");defineSymbol(text,main,accent,"","\\=");defineSymbol(text,main,accent,"","\\u");defineSymbol(text,main,accent,"","\\.");defineSymbol(text,main,accent,"","\\c");defineSymbol(text,main,accent,"","\\r");defineSymbol(text,main,accent,"","\\v");defineSymbol(text,main,accent,"",'\\"');defineSymbol(text,main,accent,"","\\H");defineSymbol(text,main,accent,"","\\textcircled");var ligatures={"--":!0,"---":!0,"``":!0,"''":!0};defineSymbol(text,main,textord,"","--",!0);defineSymbol(text,main,textord,"","\\textendash");defineSymbol(text,main,textord,"","---",!0);defineSymbol(text,main,textord,"","\\textemdash");defineSymbol(text,main,textord,"","`",!0);defineSymbol(text,main,textord,"","\\textquoteleft");defineSymbol(text,main,textord,"","'",!0);defineSymbol(text,main,textord,"","\\textquoteright");defineSymbol(text,main,textord,"","``",!0);defineSymbol(text,main,textord,"","\\textquotedblleft");defineSymbol(text,main,textord,"","''",!0);defineSymbol(text,main,textord,"","\\textquotedblright");defineSymbol(math,main,textord,"","\\degree",!0);defineSymbol(text,main,textord,"","\\degree");defineSymbol(text,main,textord,"","\\textdegree",!0);defineSymbol(math,main,textord,"","\\pounds");defineSymbol(math,main,textord,"","\\mathsterling",!0);defineSymbol(text,main,textord,"","\\pounds");defineSymbol(text,main,textord,"","\\textsterling",!0);defineSymbol(math,ams,textord,"","\\maltese");defineSymbol(text,ams,textord,"","\\maltese");var mathTextSymbols='0123456789/@."';for(var i=0;i<mathTextSymbols.length;i++){var ch$1=mathTextSymbols.charAt(i);defineSymbol(math,main,textord,ch$1,ch$1)}var textSymbols='0123456789!@*()-=+";:?/.,';for(var _i$1=0;_i$1<textSymbols.length;_i$1++){var _ch=textSymbols.charAt(_i$1);defineSymbol(text,main,textord,_ch,_ch)}var letters="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";for(var _i2=0;_i2<letters.length;_i2++){var _ch2=letters.charAt(_i2);defineSymbol(math,main,mathord,_ch2,_ch2),defineSymbol(text,main,textord,_ch2,_ch2)}defineSymbol(math,ams,textord,"C","");defineSymbol(text,ams,textord,"C","");defineSymbol(math,ams,textord,"H","");defineSymbol(text,ams,textord,"H","");defineSymbol(math,ams,textord,"N","");defineSymbol(text,ams,textord,"N","");defineSymbol(math,ams,textord,"P","");defineSymbol(text,ams,textord,"P","");defineSymbol(math,ams,textord,"Q","");defineSymbol(text,ams,textord,"Q","");defineSymbol(math,ams,textord,"R","");defineSymbol(text,ams,textord,"R","");defineSymbol(math,ams,textord,"Z","");defineSymbol(text,ams,textord,"Z","");defineSymbol(math,main,mathord,"h","");defineSymbol(text,main,mathord,"h","");var wideChar="";for(var _i3=0;_i3<letters.length;_i3++){var _ch3=letters.charAt(_i3);wideChar=String.fromCharCode(55349,56320+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56372+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56424+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56580+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56684+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56736+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56788+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56840+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56944+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),_i3<26&&(wideChar=String.fromCharCode(55349,56632+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar),wideChar=String.fromCharCode(55349,56476+_i3),defineSymbol(math,main,mathord,_ch3,wideChar),defineSymbol(text,main,textord,_ch3,wideChar))}wideChar="";defineSymbol(math,main,mathord,"k",wideChar);defineSymbol(text,main,textord,"k",wideChar);for(var _i4=0;_i4<10;_i4++){var _ch4=_i4.toString();wideChar=String.fromCharCode(55349,57294+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57314+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57324+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar),wideChar=String.fromCharCode(55349,57334+_i4),defineSymbol(math,main,mathord,_ch4,wideChar),defineSymbol(text,main,textord,_ch4,wideChar)}var extraLatin="";for(var _i5=0;_i5<extraLatin.length;_i5++){var _ch5=extraLatin.charAt(_i5);defineSymbol(math,main,mathord,_ch5,_ch5),defineSymbol(text,main,textord,_ch5,_ch5)}var wideLatinLetterData=[["mathbf","textbf","Main-Bold"],["mathbf","textbf","Main-Bold"],["mathnormal","textit","Math-Italic"],["mathnormal","textit","Math-Italic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["boldsymbol","boldsymbol","Main-BoldItalic"],["mathscr","textscr","Script-Regular"],["","",""],["","",""],["","",""],["mathfrak","textfrak","Fraktur-Regular"],["mathfrak","textfrak","Fraktur-Regular"],["mathbb","textbb","AMS-Regular"],["mathbb","textbb","AMS-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathboldfrak","textboldfrak","Fraktur-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathitsf","textitsf","SansSerif-Italic"],["mathitsf","textitsf","SansSerif-Italic"],["","",""],["","",""],["mathtt","texttt","Typewriter-Regular"],["mathtt","texttt","Typewriter-Regular"]],wideNumeralData=[["mathbf","textbf","Main-Bold"],["","",""],["mathsf","textsf","SansSerif-Regular"],["mathboldsf","textboldsf","SansSerif-Bold"],["mathtt","texttt","Typewriter-Regular"]],wideCharacterFont=function s(l,c){var d=l.charCodeAt(0),f=l.charCodeAt(1),g=(d-55296)*1024+(f-56320)+65536,v=c==="math"?0:1;if(119808<=g&&g<120484){var b=Math.floor((g-119808)/26);return[wideLatinLetterData[b][2],wideLatinLetterData[b][v]]}else if(120782<=g&&g<=120831){var $=Math.floor((g-120782)/10);return[wideNumeralData[$][2],wideNumeralData[$][v]]}else{if(g===120485||g===120486)return[wideLatinLetterData[0][2],wideLatinLetterData[0][v]];if(120486<g&&g<120782)return["",""];throw new ParseError("Unsupported character: "+l)}},lookupSymbol=function s(l,c,d){return symbols[d][l]&&symbols[d][l].replace&&(l=symbols[d][l].replace),{value:l,metrics:getCharacterMetrics(l,c,d)}},makeSymbol=function s(l,c,d,f,g){var v=lookupSymbol(l,c,d),b=v.metrics;l=v.value;var $;if(b){var y=b.italic;(d==="text"||f&&f.font==="mathit")&&(y=0),$=new SymbolNode(l,b.height,b.depth,y,b.skew,b.width,g)}else typeof console<"u"&&console.warn("No character metrics "+("for '"+l+"' in style '"+c+"' and mode '"+d+"'")),$=new SymbolNode(l,0,0,0,0,0,g);if(f){$.maxFontSize=f.sizeMultiplier,f.style.isTight()&&$.classes.push("mtight");var x=f.getColor();x&&($.style.color=x)}return $},mathsym=function s(l,c,d,f){return f===void 0&&(f=[]),d.font==="boldsymbol"&&lookupSymbol(l,"Main-Bold",c).metrics?makeSymbol(l,"Main-Bold",c,d,f.concat(["mathbf"])):l==="\\"||symbols[c][l].font==="main"?makeSymbol(l,"Main-Regular",c,d,f):makeSymbol(l,"AMS-Regular",c,d,f.concat(["amsrm"]))},boldsymbol=function s(l,c,d,f,g){return g!=="textord"&&lookupSymbol(l,"Math-BoldItalic",c).metrics?{fontName:"Math-BoldItalic",fontClass:"boldsymbol"}:{fontName:"Main-Bold",fontClass:"mathbf"}},makeOrd=function s(l,c,d){var f=l.mode,g=l.text,v=["mord"],b=f==="math"||f==="text"&&c.font,$=b?c.font:c.fontFamily,y="",x="";if(g.charCodeAt(0)===55349&&([y,x]=wideCharacterFont(g,f)),y.length>0)return makeSymbol(g,y,f,c,v.concat(x));if($){var C,E;if($==="boldsymbol"){var N=boldsymbol(g,f,c,v,d);C=N.fontName,E=[N.fontClass]}else b?(C=fontMap[$].fontName,E=[$]):(C=retrieveTextFontName($,c.fontWeight,c.fontShape),E=[$,c.fontWeight,c.fontShape]);if(lookupSymbol(g,C,f).metrics)return makeSymbol(g,C,f,c,v.concat(E));if(ligatures.hasOwnProperty(g)&&C.slice(0,10)==="Typewriter"){for(var W=[],q=0;q<g.length;q++)W.push(makeSymbol(g[q],C,f,c,v.concat(E)));return makeFragment(W)}}if(d==="mathord")return makeSymbol(g,"Math-Italic",f,c,v.concat(["mathnormal"]));if(d==="textord"){var Y=symbols[f][g]&&symbols[f][g].font;if(Y==="ams"){var re=retrieveTextFontName("amsrm",c.fontWeight,c.fontShape);return makeSymbol(g,re,f,c,v.concat("amsrm",c.fontWeight,c.fontShape))}else if(Y==="main"||!Y){var se=retrieveTextFontName("textrm",c.fontWeight,c.fontShape);return makeSymbol(g,se,f,c,v.concat(c.fontWeight,c.fontShape))}else{var de=retrieveTextFontName(Y,c.fontWeight,c.fontShape);return makeSymbol(g,de,f,c,v.concat(de,c.fontWeight,c.fontShape))}}else throw new Error("unexpected type: "+d+" in makeOrd")},canCombine=(s,l)=>{if(createClass(s.classes)!==createClass(l.classes)||s.skew!==l.skew||s.maxFontSize!==l.maxFontSize)return!1;if(s.classes.length===1){var c=s.classes[0];if(c==="mbin"||c==="mord")return!1}for(var d in s.style)if(s.style.hasOwnProperty(d)&&s.style[d]!==l.style[d])return!1;for(var f in l.style)if(l.style.hasOwnProperty(f)&&s.style[f]!==l.style[f])return!1;return!0},tryCombineChars=s=>{for(var l=0;l<s.length-1;l++){var c=s[l],d=s[l+1];c instanceof SymbolNode&&d instanceof SymbolNode&&canCombine(c,d)&&(c.text+=d.text,c.height=Math.max(c.height,d.height),c.depth=Math.max(c.depth,d.depth),c.italic=d.italic,s.splice(l+1,1),l--)}return s},sizeElementFromChildren=function s(l){for(var c=0,d=0,f=0,g=0;g<l.children.length;g++){var v=l.children[g];v.height>c&&(c=v.height),v.depth>d&&(d=v.depth),v.maxFontSize>f&&(f=v.maxFontSize)}l.height=c,l.depth=d,l.maxFontSize=f},makeSpan$2=function s(l,c,d,f){var g=new Span(l,c,d,f);return sizeElementFromChildren(g),g},makeSvgSpan=(s,l,c,d)=>new Span(s,l,c,d),makeLineSpan=function s(l,c,d){var f=makeSpan$2([l],[],c);return f.height=Math.max(d||c.fontMetrics().defaultRuleThickness,c.minRuleThickness),f.style.borderBottomWidth=makeEm(f.height),f.maxFontSize=1,f},makeAnchor=function s(l,c,d,f){var g=new Anchor(l,c,d,f);return sizeElementFromChildren(g),g},makeFragment=function s(l){var c=new DocumentFragment(l);return sizeElementFromChildren(c),c},wrapFragment=function s(l,c){return l instanceof DocumentFragment?makeSpan$2([],[l],c):l},getVListChildrenAndDepth=function s(l){if(l.positionType==="individualShift"){for(var c=l.children,d=[c[0]],f=-c[0].shift-c[0].elem.depth,g=f,v=1;v<c.length;v++){var b=-c[v].shift-g-c[v].elem.depth,$=b-(c[v-1].elem.height+c[v-1].elem.depth);g=g+b,d.push({type:"kern",size:$}),d.push(c[v])}return{children:d,depth:f}}var y;if(l.positionType==="top"){for(var x=l.positionData,C=0;C<l.children.length;C++){var E=l.children[C];x-=E.type==="kern"?E.size:E.elem.height+E.elem.depth}y=x}else if(l.positionType==="bottom")y=-l.positionData;else{var N=l.children[0];if(N.type!=="elem")throw new Error('First child must have type "elem".');if(l.positionType==="shift")y=-N.elem.depth-l.positionData;else if(l.positionType==="firstBaseline")y=-N.elem.depth;else throw new Error("Invalid positionType "+l.positionType+".")}return{children:l.children,depth:y}},makeVList=function s(l,c){for(var{children:d,depth:f}=getVListChildrenAndDepth(l),g=0,v=0;v<d.length;v++){var b=d[v];if(b.type==="elem"){var $=b.elem;g=Math.max(g,$.maxFontSize,$.height)}}g+=2;var y=makeSpan$2(["pstrut"],[]);y.style.height=makeEm(g);for(var x=[],C=f,E=f,N=f,W=0;W<d.length;W++){var q=d[W];if(q.type==="kern")N+=q.size;else{var Y=q.elem,re=q.wrapperClasses||[],se=q.wrapperStyle||{},de=makeSpan$2(re,[y,Y],void 0,se);de.style.top=makeEm(-g-N-Y.depth),q.marginLeft&&(de.style.marginLeft=q.marginLeft),q.marginRight&&(de.style.marginRight=q.marginRight),x.push(de),N+=Y.height+Y.depth}C=Math.min(C,N),E=Math.max(E,N)}var he=makeSpan$2(["vlist"],x);he.style.height=makeEm(E);var ge;if(C<0){var Se=makeSpan$2([],[]),Ae=makeSpan$2(["vlist"],[Se]);Ae.style.height=makeEm(-C);var Re=makeSpan$2(["vlist-s"],[new SymbolNode("")]);ge=[makeSpan$2(["vlist-r"],[he,Re]),makeSpan$2(["vlist-r"],[Ae])]}else ge=[makeSpan$2(["vlist-r"],[he])];var Be=makeSpan$2(["vlist-t"],ge);return ge.length===2&&Be.classes.push("vlist-t2"),Be.height=E,Be.depth=-C,Be},makeGlue=(s,l)=>{var c=makeSpan$2(["mspace"],[],l),d=calculateSize(s,l);return c.style.marginRight=makeEm(d),c},retrieveTextFontName=function s(l,c,d){var f="";switch(l){case"amsrm":f="AMS";break;case"textrm":f="Main";break;case"textsf":f="SansSerif";break;case"texttt":f="Typewriter";break;default:f=l}var g;return c==="textbf"&&d==="textit"?g="BoldItalic":c==="textbf"?g="Bold":c==="textit"?g="Italic":g="Regular",f+"-"+g},fontMap={mathbf:{variant:"bold",fontName:"Main-Bold"},mathrm:{variant:"normal",fontName:"Main-Regular"},textit:{variant:"italic",fontName:"Main-Italic"},mathit:{variant:"italic",fontName:"Main-Italic"},mathnormal:{variant:"italic",fontName:"Math-Italic"},mathbb:{variant:"double-struck",fontName:"AMS-Regular"},mathcal:{variant:"script",fontName:"Caligraphic-Regular"},mathfrak:{variant:"fraktur",fontName:"Fraktur-Regular"},mathscr:{variant:"script",fontName:"Script-Regular"},mathsf:{variant:"sans-serif",fontName:"SansSerif-Regular"},mathtt:{variant:"monospace",fontName:"Typewriter-Regular"}},svgData={vec:["vec",.471,.714],oiintSize1:["oiintSize1",.957,.499],oiintSize2:["oiintSize2",1.472,.659],oiiintSize1:["oiiintSize1",1.304,.499],oiiintSize2:["oiiintSize2",1.98,.659]},staticSvg=function s(l,c){var[d,f,g]=svgData[l],v=new PathNode(d),b=new SvgNode([v],{width:makeEm(f),height:makeEm(g),style:"width:"+makeEm(f),viewBox:"0 0 "+1e3*f+" "+1e3*g,preserveAspectRatio:"xMinYMin"}),$=makeSvgSpan(["overlay"],[b],c);return $.height=g,$.style.height=makeEm(g),$.style.width=makeEm(f),$},buildCommon={fontMap,makeSymbol,mathsym,makeSpan:makeSpan$2,makeSvgSpan,makeLineSpan,makeAnchor,makeFragment,wrapFragment,makeVList,makeOrd,makeGlue,staticSvg,svgData,tryCombineChars},thinspace={number:3,unit:"mu"},mediumspace={number:4,unit:"mu"},thickspace={number:5,unit:"mu"},spacings={mord:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mop:{mord:thinspace,mop:thinspace,mrel:thickspace,minner:thinspace},mbin:{mord:mediumspace,mop:mediumspace,mopen:mediumspace,minner:mediumspace},mrel:{mord:thickspace,mop:thickspace,mopen:thickspace,minner:thickspace},mopen:{},mclose:{mop:thinspace,mbin:mediumspace,mrel:thickspace,minner:thinspace},mpunct:{mord:thinspace,mop:thinspace,mrel:thickspace,mopen:thinspace,mclose:thinspace,mpunct:thinspace,minner:thinspace},minner:{mord:thinspace,mop:thinspace,mbin:mediumspace,mrel:thickspace,mopen:thinspace,mpunct:thinspace,minner:thinspace}},tightSpacings={mord:{mop:thinspace},mop:{mord:thinspace,mop:thinspace},mbin:{},mrel:{},mopen:{},mclose:{mop:thinspace},mpunct:{},minner:{mop:thinspace}},_functions={},_htmlGroupBuilders={},_mathmlGroupBuilders={};function defineFunction(s){for(var{type:l,names:c,props:d,handler:f,htmlBuilder:g,mathmlBuilder:v}=s,b={type:l,numArgs:d.numArgs,argTypes:d.argTypes,allowedInArgument:!!d.allowedInArgument,allowedInText:!!d.allowedInText,allowedInMath:d.allowedInMath===void 0?!0:d.allowedInMath,numOptionalArgs:d.numOptionalArgs||0,infix:!!d.infix,primitive:!!d.primitive,handler:f},$=0;$<c.length;++$)_functions[c[$]]=b;l&&(g&&(_htmlGroupBuilders[l]=g),v&&(_mathmlGroupBuilders[l]=v))}function defineFunctionBuilders(s){var{type:l,htmlBuilder:c,mathmlBuilder:d}=s;defineFunction({type:l,names:[],props:{numArgs:0},handler(){throw new Error("Should never be called.")},htmlBuilder:c,mathmlBuilder:d})}var normalizeArgument=function s(l){return l.type==="ordgroup"&&l.body.length===1?l.body[0]:l},ordargument=function s(l){return l.type==="ordgroup"?l.body:[l]},makeSpan$1=buildCommon.makeSpan,binLeftCanceller=["leftmost","mbin","mopen","mrel","mop","mpunct"],binRightCanceller=["rightmost","mrel","mclose","mpunct"],styleMap$1={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT},DomEnum={mord:"mord",mop:"mop",mbin:"mbin",mrel:"mrel",mopen:"mopen",mclose:"mclose",mpunct:"mpunct",minner:"minner"},buildExpression$1=function s(l,c,d,f){f===void 0&&(f=[null,null]);for(var g=[],v=0;v<l.length;v++){var b=buildGroup$1(l[v],c);if(b instanceof DocumentFragment){var $=b.children;g.push(...$)}else g.push(b)}if(buildCommon.tryCombineChars(g),!d)return g;var y=c;if(l.length===1){var x=l[0];x.type==="sizing"?y=c.havingSize(x.size):x.type==="styling"&&(y=c.havingStyle(styleMap$1[x.style]))}var C=makeSpan$1([f[0]||"leftmost"],[],c),E=makeSpan$1([f[1]||"rightmost"],[],c),N=d==="root";return traverseNonSpaceNodes(g,(W,q)=>{var Y=q.classes[0],re=W.classes[0];Y==="mbin"&&utils$3.contains(binRightCanceller,re)?q.classes[0]="mord":re==="mbin"&&utils$3.contains(binLeftCanceller,Y)&&(W.classes[0]="mord")},{node:C},E,N),traverseNonSpaceNodes(g,(W,q)=>{var Y=getTypeOfDomTree(q),re=getTypeOfDomTree(W),se=Y&&re?W.hasClass("mtight")?tightSpacings[Y][re]:spacings[Y][re]:null;if(se)return buildCommon.makeGlue(se,y)},{node:C},E,N),g},traverseNonSpaceNodes=function s(l,c,d,f,g){f&&l.push(f);for(var v=0;v<l.length;v++){var b=l[v],$=checkPartialGroup(b);if($){s($.children,c,d,null,g);continue}var y=!b.hasClass("mspace");if(y){var x=c(b,d.node);x&&(d.insertAfter?d.insertAfter(x):(l.unshift(x),v++))}y?d.node=b:g&&b.hasClass("newline")&&(d.node=makeSpan$1(["leftmost"])),d.insertAfter=(C=>E=>{l.splice(C+1,0,E),v++})(v)}f&&l.pop()},checkPartialGroup=function s(l){return l instanceof DocumentFragment||l instanceof Anchor||l instanceof Span&&l.hasClass("enclosing")?l:null},getOutermostNode=function s(l,c){var d=checkPartialGroup(l);if(d){var f=d.children;if(f.length){if(c==="right")return s(f[f.length-1],"right");if(c==="left")return s(f[0],"left")}}return l},getTypeOfDomTree=function s(l,c){return l?(c&&(l=getOutermostNode(l,c)),DomEnum[l.classes[0]]||null):null},makeNullDelimiter=function s(l,c){var d=["nulldelimiter"].concat(l.baseSizingClasses());return makeSpan$1(c.concat(d))},buildGroup$1=function s(l,c,d){if(!l)return makeSpan$1();if(_htmlGroupBuilders[l.type]){var f=_htmlGroupBuilders[l.type](l,c);if(d&&c.size!==d.size){f=makeSpan$1(c.sizingClasses(d),[f],c);var g=c.sizeMultiplier/d.sizeMultiplier;f.height*=g,f.depth*=g}return f}else throw new ParseError("Got group of unknown type: '"+l.type+"'")};function buildHTMLUnbreakable(s,l){var c=makeSpan$1(["base"],s,l),d=makeSpan$1(["strut"]);return d.style.height=makeEm(c.height+c.depth),c.depth&&(d.style.verticalAlign=makeEm(-c.depth)),c.children.unshift(d),c}function buildHTML(s,l){var c=null;s.length===1&&s[0].type==="tag"&&(c=s[0].tag,s=s[0].body);var d=buildExpression$1(s,l,"root"),f;d.length===2&&d[1].hasClass("tag")&&(f=d.pop());for(var g=[],v=[],b=0;b<d.length;b++)if(v.push(d[b]),d[b].hasClass("mbin")||d[b].hasClass("mrel")||d[b].hasClass("allowbreak")){for(var $=!1;b<d.length-1&&d[b+1].hasClass("mspace")&&!d[b+1].hasClass("newline");)b++,v.push(d[b]),d[b].hasClass("nobreak")&&($=!0);$||(g.push(buildHTMLUnbreakable(v,l)),v=[])}else d[b].hasClass("newline")&&(v.pop(),v.length>0&&(g.push(buildHTMLUnbreakable(v,l)),v=[]),g.push(d[b]));v.length>0&&g.push(buildHTMLUnbreakable(v,l));var y;c?(y=buildHTMLUnbreakable(buildExpression$1(c,l,!0)),y.classes=["tag"],g.push(y)):f&&g.push(f);var x=makeSpan$1(["katex-html"],g);if(x.setAttribute("aria-hidden","true"),y){var C=y.children[0];C.style.height=makeEm(x.height+x.depth),x.depth&&(C.style.verticalAlign=makeEm(-x.depth))}return x}function newDocumentFragment(s){return new DocumentFragment(s)}class MathNode{constructor(l,c,d){this.type=void 0,this.attributes=void 0,this.children=void 0,this.classes=void 0,this.type=l,this.attributes={},this.children=c||[],this.classes=d||[]}setAttribute(l,c){this.attributes[l]=c}getAttribute(l){return this.attributes[l]}toNode(){var l=document.createElementNS("http://www.w3.org/1998/Math/MathML",this.type);for(var c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&l.setAttribute(c,this.attributes[c]);this.classes.length>0&&(l.className=createClass(this.classes));for(var d=0;d<this.children.length;d++)l.appendChild(this.children[d].toNode());return l}toMarkup(){var l="<"+this.type;for(var c in this.attributes)Object.prototype.hasOwnProperty.call(this.attributes,c)&&(l+=" "+c+'="',l+=utils$3.escape(this.attributes[c]),l+='"');this.classes.length>0&&(l+=' class ="'+utils$3.escape(createClass(this.classes))+'"'),l+=">";for(var d=0;d<this.children.length;d++)l+=this.children[d].toMarkup();return l+="</"+this.type+">",l}toText(){return this.children.map(l=>l.toText()).join("")}}class TextNode{constructor(l){this.text=void 0,this.text=l}toNode(){return document.createTextNode(this.text)}toMarkup(){return utils$3.escape(this.toText())}toText(){return this.text}}class SpaceNode{constructor(l){this.width=void 0,this.character=void 0,this.width=l,l>=.05555&&l<=.05556?this.character="":l>=.1666&&l<=.1667?this.character="":l>=.2222&&l<=.2223?this.character="":l>=.2777&&l<=.2778?this.character="":l>=-.05556&&l<=-.05555?this.character="":l>=-.1667&&l<=-.1666?this.character="":l>=-.2223&&l<=-.2222?this.character="":l>=-.2778&&l<=-.2777?this.character="":this.character=null}toNode(){if(this.character)return document.createTextNode(this.character);var l=document.createElementNS("http://www.w3.org/1998/Math/MathML","mspace");return l.setAttribute("width",makeEm(this.width)),l}toMarkup(){return this.character?"<mtext>"+this.character+"</mtext>":'<mspace width="'+makeEm(this.width)+'"/>'}toText(){return this.character?this.character:" "}}var mathMLTree={MathNode,TextNode,SpaceNode,newDocumentFragment},makeText=function s(l,c,d){return symbols[c][l]&&symbols[c][l].replace&&l.charCodeAt(0)!==55349&&!(ligatures.hasOwnProperty(l)&&d&&(d.fontFamily&&d.fontFamily.slice(4,6)==="tt"||d.font&&d.font.slice(4,6)==="tt"))&&(l=symbols[c][l].replace),new mathMLTree.TextNode(l)},makeRow=function s(l){return l.length===1?l[0]:new mathMLTree.MathNode("mrow",l)},getVariant=function s(l,c){if(c.fontFamily==="texttt")return"monospace";if(c.fontFamily==="textsf")return c.fontShape==="textit"&&c.fontWeight==="textbf"?"sans-serif-bold-italic":c.fontShape==="textit"?"sans-serif-italic":c.fontWeight==="textbf"?"bold-sans-serif":"sans-serif";if(c.fontShape==="textit"&&c.fontWeight==="textbf")return"bold-italic";if(c.fontShape==="textit")return"italic";if(c.fontWeight==="textbf")return"bold";var d=c.font;if(!d||d==="mathnormal")return null;var f=l.mode;if(d==="mathit")return"italic";if(d==="boldsymbol")return l.type==="textord"?"bold":"bold-italic";if(d==="mathbf")return"bold";if(d==="mathbb")return"double-struck";if(d==="mathfrak")return"fraktur";if(d==="mathscr"||d==="mathcal")return"script";if(d==="mathsf")return"sans-serif";if(d==="mathtt")return"monospace";var g=l.text;if(utils$3.contains(["\\imath","\\jmath"],g))return null;symbols[f][g]&&symbols[f][g].replace&&(g=symbols[f][g].replace);var v=buildCommon.fontMap[d].fontName;return getCharacterMetrics(g,v,f)?buildCommon.fontMap[d].variant:null},buildExpression=function s(l,c,d){if(l.length===1){var f=buildGroup(l[0],c);return d&&f instanceof MathNode&&f.type==="mo"&&(f.setAttribute("lspace","0em"),f.setAttribute("rspace","0em")),[f]}for(var g=[],v,b=0;b<l.length;b++){var $=buildGroup(l[b],c);if($ instanceof MathNode&&v instanceof MathNode){if($.type==="mtext"&&v.type==="mtext"&&$.getAttribute("mathvariant")===v.getAttribute("mathvariant")){v.children.push(...$.children);continue}else if($.type==="mn"&&v.type==="mn"){v.children.push(...$.children);continue}else if($.type==="mi"&&$.children.length===1&&v.type==="mn"){var y=$.children[0];if(y instanceof TextNode&&y.text==="."){v.children.push(...$.children);continue}}else if(v.type==="mi"&&v.children.length===1){var x=v.children[0];if(x instanceof TextNode&&x.text===""&&($.type==="mo"||$.type==="mi"||$.type==="mn")){var C=$.children[0];C instanceof TextNode&&C.text.length>0&&(C.text=C.text.slice(0,1)+""+C.text.slice(1),g.pop())}}}g.push($),v=$}return g},buildExpressionRow=function s(l,c,d){return makeRow(buildExpression(l,c,d))},buildGroup=function s(l,c){if(!l)return new mathMLTree.MathNode("mrow");if(_mathmlGroupBuilders[l.type]){var d=_mathmlGroupBuilders[l.type](l,c);return d}else throw new ParseError("Got group of unknown type: '"+l.type+"'")};function buildMathML(s,l,c,d,f){var g=buildExpression(s,c),v;g.length===1&&g[0]instanceof MathNode&&utils$3.contains(["mrow","mtable"],g[0].type)?v=g[0]:v=new mathMLTree.MathNode("mrow",g);var b=new mathMLTree.MathNode("annotation",[new mathMLTree.TextNode(l)]);b.setAttribute("encoding","application/x-tex");var $=new mathMLTree.MathNode("semantics",[v,b]),y=new mathMLTree.MathNode("math",[$]);y.setAttribute("xmlns","http://www.w3.org/1998/Math/MathML"),d&&y.setAttribute("display","block");var x=f?"katex":"katex-mathml";return buildCommon.makeSpan([x],[y])}var optionsFromSettings=function s(l){return new Options({style:l.displayMode?Style$1.DISPLAY:Style$1.TEXT,maxSize:l.maxSize,minRuleThickness:l.minRuleThickness})},displayWrap=function s(l,c){if(c.displayMode){var d=["katex-display"];c.leqno&&d.push("leqno"),c.fleqn&&d.push("fleqn"),l=buildCommon.makeSpan(d,[l])}return l},buildTree=function s(l,c,d){var f=optionsFromSettings(d),g;if(d.output==="mathml")return buildMathML(l,c,f,d.displayMode,!0);if(d.output==="html"){var v=buildHTML(l,f);g=buildCommon.makeSpan(["katex"],[v])}else{var b=buildMathML(l,c,f,d.displayMode,!1),$=buildHTML(l,f);g=buildCommon.makeSpan(["katex"],[b,$])}return displayWrap(g,d)},buildHTMLTree=function s(l,c,d){var f=optionsFromSettings(d),g=buildHTML(l,f),v=buildCommon.makeSpan(["katex"],[g]);return displayWrap(v,d)},stretchyCodePoint={widehat:"^",widecheck:"",widetilde:"~",utilde:"~",overleftarrow:"",underleftarrow:"",xleftarrow:"",overrightarrow:"",underrightarrow:"",xrightarrow:"",underbrace:"",overbrace:"",overgroup:"",undergroup:"",overleftrightarrow:"",underleftrightarrow:"",xleftrightarrow:"",Overrightarrow:"",xRightarrow:"",overleftharpoon:"",xleftharpoonup:"",overrightharpoon:"",xrightharpoonup:"",xLeftarrow:"",xLeftrightarrow:"",xhookleftarrow:"",xhookrightarrow:"",xmapsto:"",xrightharpoondown:"",xleftharpoondown:"",xrightleftharpoons:"",xleftrightharpoons:"",xtwoheadleftarrow:"",xtwoheadrightarrow:"",xlongequal:"=",xtofrom:"",xrightleftarrows:"",xrightequilibrium:"",xleftequilibrium:"","\\cdrightarrow":"","\\cdleftarrow":"","\\cdlongequal":"="},mathMLnode=function s(l){var c=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(stretchyCodePoint[l.replace(/^\\/,"")])]);return c.setAttribute("stretchy","true"),c},katexImagesData={overrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],overleftarrow:[["leftarrow"],.888,522,"xMinYMin"],underrightarrow:[["rightarrow"],.888,522,"xMaxYMin"],underleftarrow:[["leftarrow"],.888,522,"xMinYMin"],xrightarrow:[["rightarrow"],1.469,522,"xMaxYMin"],"\\cdrightarrow":[["rightarrow"],3,522,"xMaxYMin"],xleftarrow:[["leftarrow"],1.469,522,"xMinYMin"],"\\cdleftarrow":[["leftarrow"],3,522,"xMinYMin"],Overrightarrow:[["doublerightarrow"],.888,560,"xMaxYMin"],xRightarrow:[["doublerightarrow"],1.526,560,"xMaxYMin"],xLeftarrow:[["doubleleftarrow"],1.526,560,"xMinYMin"],overleftharpoon:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoonup:[["leftharpoon"],.888,522,"xMinYMin"],xleftharpoondown:[["leftharpoondown"],.888,522,"xMinYMin"],overrightharpoon:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoonup:[["rightharpoon"],.888,522,"xMaxYMin"],xrightharpoondown:[["rightharpoondown"],.888,522,"xMaxYMin"],xlongequal:[["longequal"],.888,334,"xMinYMin"],"\\cdlongequal":[["longequal"],3,334,"xMinYMin"],xtwoheadleftarrow:[["twoheadleftarrow"],.888,334,"xMinYMin"],xtwoheadrightarrow:[["twoheadrightarrow"],.888,334,"xMaxYMin"],overleftrightarrow:[["leftarrow","rightarrow"],.888,522],overbrace:[["leftbrace","midbrace","rightbrace"],1.6,548],underbrace:[["leftbraceunder","midbraceunder","rightbraceunder"],1.6,548],underleftrightarrow:[["leftarrow","rightarrow"],.888,522],xleftrightarrow:[["leftarrow","rightarrow"],1.75,522],xLeftrightarrow:[["doubleleftarrow","doublerightarrow"],1.75,560],xrightleftharpoons:[["leftharpoondownplus","rightharpoonplus"],1.75,716],xleftrightharpoons:[["leftharpoonplus","rightharpoondownplus"],1.75,716],xhookleftarrow:[["leftarrow","righthook"],1.08,522],xhookrightarrow:[["lefthook","rightarrow"],1.08,522],overlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],underlinesegment:[["leftlinesegment","rightlinesegment"],.888,522],overgroup:[["leftgroup","rightgroup"],.888,342],undergroup:[["leftgroupunder","rightgroupunder"],.888,342],xmapsto:[["leftmapsto","rightarrow"],1.5,522],xtofrom:[["leftToFrom","rightToFrom"],1.75,528],xrightleftarrows:[["baraboveleftarrow","rightarrowabovebar"],1.75,901],xrightequilibrium:[["baraboveshortleftharpoon","rightharpoonaboveshortbar"],1.75,716],xleftequilibrium:[["shortbaraboveleftharpoon","shortrightharpoonabovebar"],1.75,716]},groupLength=function s(l){return l.type==="ordgroup"?l.body.length:1},svgSpan=function s(l,c){function d(){var b=4e5,$=l.label.slice(1);if(utils$3.contains(["widehat","widecheck","widetilde","utilde"],$)){var y=l,x=groupLength(y.base),C,E,N;if(x>5)$==="widehat"||$==="widecheck"?(C=420,b=2364,N=.42,E=$+"4"):(C=312,b=2340,N=.34,E="tilde4");else{var W=[1,1,2,2,3,3][x];$==="widehat"||$==="widecheck"?(b=[0,1062,2364,2364,2364][W],C=[0,239,300,360,420][W],N=[0,.24,.3,.3,.36,.42][W],E=$+W):(b=[0,600,1033,2339,2340][W],C=[0,260,286,306,312][W],N=[0,.26,.286,.3,.306,.34][W],E="tilde"+W)}var q=new PathNode(E),Y=new SvgNode([q],{width:"100%",height:makeEm(N),viewBox:"0 0 "+b+" "+C,preserveAspectRatio:"none"});return{span:buildCommon.makeSvgSpan([],[Y],c),minWidth:0,height:N}}else{var re=[],se=katexImagesData[$],[de,he,ge]=se,Se=ge/1e3,Ae=de.length,Re,Be;if(Ae===1){var Ke=se[3];Re=["hide-tail"],Be=[Ke]}else if(Ae===2)Re=["halfarrow-left","halfarrow-right"],Be=["xMinYMin","xMaxYMin"];else if(Ae===3)Re=["brace-left","brace-center","brace-right"],Be=["xMinYMin","xMidYMin","xMaxYMin"];else throw new Error(`Correct katexImagesData or update code here to support
                    `+Ae+" children.");for(var Lr=0;Lr<Ae;Lr++){var _y=new PathNode(de[Lr]),by=new SvgNode([_y],{width:"400em",height:makeEm(Se),viewBox:"0 0 "+b+" "+ge,preserveAspectRatio:Be[Lr]+" slice"}),yy=buildCommon.makeSvgSpan([Re[Lr]],[by],c);if(Ae===1)return{span:yy,minWidth:he,height:Se};yy.style.height=makeEm(Se),re.push(yy)}return{span:buildCommon.makeSpan(["stretchy"],re,c),minWidth:he,height:Se}}}var{span:f,minWidth:g,height:v}=d();return f.height=v,f.style.height=makeEm(v),g>0&&(f.style.minWidth=makeEm(g)),f},encloseSpan=function s(l,c,d,f,g){var v,b=l.height+l.depth+d+f;if(/fbox|color|angl/.test(c)){if(v=buildCommon.makeSpan(["stretchy",c],[],g),c==="fbox"){var $=g.color&&g.getColor();$&&(v.style.borderColor=$)}}else{var y=[];/^[bx]cancel$/.test(c)&&y.push(new LineNode({x1:"0",y1:"0",x2:"100%",y2:"100%","stroke-width":"0.046em"})),/^x?cancel$/.test(c)&&y.push(new LineNode({x1:"0",y1:"100%",x2:"100%",y2:"0","stroke-width":"0.046em"}));var x=new SvgNode(y,{width:"100%",height:makeEm(b)});v=buildCommon.makeSvgSpan([],[x],g)}return v.height=b,v.style.height=makeEm(b),v},stretchy={encloseSpan,mathMLnode,svgSpan};function assertNodeType(s,l){if(!s||s.type!==l)throw new Error("Expected node of type "+l+", but got "+(s?"node of type "+s.type:String(s)));return s}function assertSymbolNodeType(s){var l=checkSymbolNodeType(s);if(!l)throw new Error("Expected node of symbol group type, but got "+(s?"node of type "+s.type:String(s)));return l}function checkSymbolNodeType(s){return s&&(s.type==="atom"||NON_ATOMS.hasOwnProperty(s.type))?s:null}var htmlBuilder$a=(s,l)=>{var c,d,f;s&&s.type==="supsub"?(d=assertNodeType(s.base,"accent"),c=d.base,s.base=c,f=assertSpan(buildGroup$1(s,l)),s.base=d):(d=assertNodeType(s,"accent"),c=d.base);var g=buildGroup$1(c,l.havingCrampedStyle()),v=d.isShifty&&utils$3.isCharacterBox(c),b=0;if(v){var $=utils$3.getBaseElem(c),y=buildGroup$1($,l.havingCrampedStyle());b=assertSymbolDomNode(y).skew}var x=d.label==="\\c",C=x?g.height+g.depth:Math.min(g.height,l.fontMetrics().xHeight),E;if(d.isStretchy)E=stretchy.svgSpan(d,l),E=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:g},{type:"elem",elem:E,wrapperClasses:["svg-align"],wrapperStyle:b>0?{width:"calc(100% - "+makeEm(2*b)+")",marginLeft:makeEm(2*b)}:void 0}]},l);else{var N,W;d.label==="\\vec"?(N=buildCommon.staticSvg("vec",l),W=buildCommon.svgData.vec[1]):(N=buildCommon.makeOrd({mode:d.mode,text:d.label},l,"textord"),N=assertSymbolDomNode(N),N.italic=0,W=N.width,x&&(C+=N.depth)),E=buildCommon.makeSpan(["accent-body"],[N]);var q=d.label==="\\textcircled";q&&(E.classes.push("accent-full"),C=g.height);var Y=b;q||(Y-=W/2),E.style.left=makeEm(Y),d.label==="\\textcircled"&&(E.style.top=".2em"),E=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:g},{type:"kern",size:-C},{type:"elem",elem:E}]},l)}var re=buildCommon.makeSpan(["mord","accent"],[E],l);return f?(f.children[0]=re,f.height=Math.max(re.height,f.height),f.classes[0]="mord",f):re},mathmlBuilder$9=(s,l)=>{var c=s.isStretchy?stretchy.mathMLnode(s.label):new mathMLTree.MathNode("mo",[makeText(s.label,s.mode)]),d=new mathMLTree.MathNode("mover",[buildGroup(s.base,l),c]);return d.setAttribute("accent","true"),d},NON_STRETCHY_ACCENT_REGEX=new RegExp(["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring"].map(s=>"\\"+s).join("|"));defineFunction({type:"accent",names:["\\acute","\\grave","\\ddot","\\tilde","\\bar","\\breve","\\check","\\hat","\\vec","\\dot","\\mathring","\\widecheck","\\widehat","\\widetilde","\\overrightarrow","\\overleftarrow","\\Overrightarrow","\\overleftrightarrow","\\overgroup","\\overlinesegment","\\overleftharpoon","\\overrightharpoon"],props:{numArgs:1},handler:(s,l)=>{var c=normalizeArgument(l[0]),d=!NON_STRETCHY_ACCENT_REGEX.test(s.funcName),f=!d||s.funcName==="\\widehat"||s.funcName==="\\widetilde"||s.funcName==="\\widecheck";return{type:"accent",mode:s.parser.mode,label:s.funcName,isStretchy:d,isShifty:f,base:c}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accent",names:["\\'","\\`","\\^","\\~","\\=","\\u","\\.",'\\"',"\\c","\\r","\\H","\\v","\\textcircled"],props:{numArgs:1,allowedInText:!0,allowedInMath:!0,argTypes:["primitive"]},handler:(s,l)=>{var c=l[0],d=s.parser.mode;return d==="math"&&(s.parser.settings.reportNonstrict("mathVsTextAccents","LaTeX's accent "+s.funcName+" works only in text mode"),d="text"),{type:"accent",mode:d,label:s.funcName,isStretchy:!1,isShifty:!0,base:c}},htmlBuilder:htmlBuilder$a,mathmlBuilder:mathmlBuilder$9});defineFunction({type:"accentUnder",names:["\\underleftarrow","\\underrightarrow","\\underleftrightarrow","\\undergroup","\\underlinesegment","\\utilde"],props:{numArgs:1},handler:(s,l)=>{var{parser:c,funcName:d}=s,f=l[0];return{type:"accentUnder",mode:c.mode,label:d,base:f}},htmlBuilder:(s,l)=>{var c=buildGroup$1(s.base,l),d=stretchy.svgSpan(s,l),f=s.label==="\\utilde"?.12:0,g=buildCommon.makeVList({positionType:"top",positionData:c.height,children:[{type:"elem",elem:d,wrapperClasses:["svg-align"]},{type:"kern",size:f},{type:"elem",elem:c}]},l);return buildCommon.makeSpan(["mord","accentunder"],[g],l)},mathmlBuilder:(s,l)=>{var c=stretchy.mathMLnode(s.label),d=new mathMLTree.MathNode("munder",[buildGroup(s.base,l),c]);return d.setAttribute("accentunder","true"),d}});var paddedNode=s=>{var l=new mathMLTree.MathNode("mpadded",s?[s]:[]);return l.setAttribute("width","+0.6em"),l.setAttribute("lspace","0.3em"),l};defineFunction({type:"xArrow",names:["\\xleftarrow","\\xrightarrow","\\xLeftarrow","\\xRightarrow","\\xleftrightarrow","\\xLeftrightarrow","\\xhookleftarrow","\\xhookrightarrow","\\xmapsto","\\xrightharpoondown","\\xrightharpoonup","\\xleftharpoondown","\\xleftharpoonup","\\xrightleftharpoons","\\xleftrightharpoons","\\xlongequal","\\xtwoheadrightarrow","\\xtwoheadleftarrow","\\xtofrom","\\xrightleftarrows","\\xrightequilibrium","\\xleftequilibrium","\\\\cdrightarrow","\\\\cdleftarrow","\\\\cdlongequal"],props:{numArgs:1,numOptionalArgs:1},handler(s,l,c){var{parser:d,funcName:f}=s;return{type:"xArrow",mode:d.mode,label:f,body:l[0],below:c[0]}},htmlBuilder(s,l){var c=l.style,d=l.havingStyle(c.sup()),f=buildCommon.wrapFragment(buildGroup$1(s.body,d,l),l),g=s.label.slice(0,2)==="\\x"?"x":"cd";f.classes.push(g+"-arrow-pad");var v;s.below&&(d=l.havingStyle(c.sub()),v=buildCommon.wrapFragment(buildGroup$1(s.below,d,l),l),v.classes.push(g+"-arrow-pad"));var b=stretchy.svgSpan(s,l),$=-l.fontMetrics().axisHeight+.5*b.height,y=-l.fontMetrics().axisHeight-.5*b.height-.111;(f.depth>.25||s.label==="\\xleftequilibrium")&&(y-=f.depth);var x;if(v){var C=-l.fontMetrics().axisHeight+v.height+.5*b.height+.111;x=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:y},{type:"elem",elem:b,shift:$},{type:"elem",elem:v,shift:C}]},l)}else x=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:f,shift:y},{type:"elem",elem:b,shift:$}]},l);return x.children[0].children[0].children[1].classes.push("svg-align"),buildCommon.makeSpan(["mrel","x-arrow"],[x],l)},mathmlBuilder(s,l){var c=stretchy.mathMLnode(s.label);c.setAttribute("minsize",s.label.charAt(0)==="x"?"1.75em":"3.0em");var d;if(s.body){var f=paddedNode(buildGroup(s.body,l));if(s.below){var g=paddedNode(buildGroup(s.below,l));d=new mathMLTree.MathNode("munderover",[c,g,f])}else d=new mathMLTree.MathNode("mover",[c,f])}else if(s.below){var v=paddedNode(buildGroup(s.below,l));d=new mathMLTree.MathNode("munder",[c,v])}else d=paddedNode(),d=new mathMLTree.MathNode("mover",[c,d]);return d}});var makeSpan=buildCommon.makeSpan;function htmlBuilder$9(s,l){var c=buildExpression$1(s.body,l,!0);return makeSpan([s.mclass],c,l)}function mathmlBuilder$8(s,l){var c,d=buildExpression(s.body,l);return s.mclass==="minner"?c=new mathMLTree.MathNode("mpadded",d):s.mclass==="mord"?s.isCharacterBox?(c=d[0],c.type="mi"):c=new mathMLTree.MathNode("mi",d):(s.isCharacterBox?(c=d[0],c.type="mo"):c=new mathMLTree.MathNode("mo",d),s.mclass==="mbin"?(c.attributes.lspace="0.22em",c.attributes.rspace="0.22em"):s.mclass==="mpunct"?(c.attributes.lspace="0em",c.attributes.rspace="0.17em"):s.mclass==="mopen"||s.mclass==="mclose"?(c.attributes.lspace="0em",c.attributes.rspace="0em"):s.mclass==="minner"&&(c.attributes.lspace="0.0556em",c.attributes.width="+0.1111em")),c}defineFunction({type:"mclass",names:["\\mathord","\\mathbin","\\mathrel","\\mathopen","\\mathclose","\\mathpunct","\\mathinner"],props:{numArgs:1,primitive:!0},handler(s,l){var{parser:c,funcName:d}=s,f=l[0];return{type:"mclass",mode:c.mode,mclass:"m"+d.slice(5),body:ordargument(f),isCharacterBox:utils$3.isCharacterBox(f)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});var binrelClass=s=>{var l=s.type==="ordgroup"&&s.body.length?s.body[0]:s;return l.type==="atom"&&(l.family==="bin"||l.family==="rel")?"m"+l.family:"mord"};defineFunction({type:"mclass",names:["\\@binrel"],props:{numArgs:2},handler(s,l){var{parser:c}=s;return{type:"mclass",mode:c.mode,mclass:binrelClass(l[0]),body:ordargument(l[1]),isCharacterBox:utils$3.isCharacterBox(l[1])}}});defineFunction({type:"mclass",names:["\\stackrel","\\overset","\\underset"],props:{numArgs:2},handler(s,l){var{parser:c,funcName:d}=s,f=l[1],g=l[0],v;d!=="\\stackrel"?v=binrelClass(f):v="mrel";var b={type:"op",mode:f.mode,limits:!0,alwaysHandleSupSub:!0,parentIsSupSub:!1,symbol:!1,suppressBaseShift:d!=="\\stackrel",body:ordargument(f)},$={type:"supsub",mode:g.mode,base:b,sup:d==="\\underset"?null:g,sub:d==="\\underset"?g:null};return{type:"mclass",mode:c.mode,mclass:v,body:[$],isCharacterBox:utils$3.isCharacterBox($)}},htmlBuilder:htmlBuilder$9,mathmlBuilder:mathmlBuilder$8});defineFunction({type:"pmb",names:["\\pmb"],props:{numArgs:1,allowedInText:!0},handler(s,l){var{parser:c}=s;return{type:"pmb",mode:c.mode,mclass:binrelClass(l[0]),body:ordargument(l[0])}},htmlBuilder(s,l){var c=buildExpression$1(s.body,l,!0),d=buildCommon.makeSpan([s.mclass],c,l);return d.style.textShadow="0.02em 0.01em 0.04px",d},mathmlBuilder(s,l){var c=buildExpression(s.body,l),d=new mathMLTree.MathNode("mstyle",c);return d.setAttribute("style","text-shadow: 0.02em 0.01em 0.04px"),d}});var cdArrowFunctionName={">":"\\\\cdrightarrow","<":"\\\\cdleftarrow","=":"\\\\cdlongequal",A:"\\uparrow",V:"\\downarrow","|":"\\Vert",".":"no arrow"},newCell=()=>({type:"styling",body:[],mode:"math",style:"display"}),isStartOfArrow=s=>s.type==="textord"&&s.text==="@",isLabelEnd=(s,l)=>(s.type==="mathord"||s.type==="atom")&&s.text===l;function cdArrow(s,l,c){var d=cdArrowFunctionName[s];switch(d){case"\\\\cdrightarrow":case"\\\\cdleftarrow":return c.callFunction(d,[l[0]],[l[1]]);case"\\uparrow":case"\\downarrow":{var f=c.callFunction("\\\\cdleft",[l[0]],[]),g={type:"atom",text:d,mode:"math",family:"rel"},v=c.callFunction("\\Big",[g],[]),b=c.callFunction("\\\\cdright",[l[1]],[]),$={type:"ordgroup",mode:"math",body:[f,v,b]};return c.callFunction("\\\\cdparent",[$],[])}case"\\\\cdlongequal":return c.callFunction("\\\\cdlongequal",[],[]);case"\\Vert":{var y={type:"textord",text:"\\Vert",mode:"math"};return c.callFunction("\\Big",[y],[])}default:return{type:"textord",text:" ",mode:"math"}}}function parseCD(s){var l=[];for(s.gullet.beginGroup(),s.gullet.macros.set("\\cr","\\\\\\relax"),s.gullet.beginGroup();;){l.push(s.parseExpression(!1,"\\\\")),s.gullet.endGroup(),s.gullet.beginGroup();var c=s.fetch().text;if(c==="&"||c==="\\\\")s.consume();else if(c==="\\end"){l[l.length-1].length===0&&l.pop();break}else throw new ParseError("Expected \\\\ or \\cr or \\end",s.nextToken)}for(var d=[],f=[d],g=0;g<l.length;g++){for(var v=l[g],b=newCell(),$=0;$<v.length;$++)if(!isStartOfArrow(v[$]))b.body.push(v[$]);else{d.push(b),$+=1;var y=assertSymbolNodeType(v[$]).text,x=new Array(2);if(x[0]={type:"ordgroup",mode:"math",body:[]},x[1]={type:"ordgroup",mode:"math",body:[]},!("=|.".indexOf(y)>-1))if("<>AV".indexOf(y)>-1)for(var C=0;C<2;C++){for(var E=!0,N=$+1;N<v.length;N++){if(isLabelEnd(v[N],y)){E=!1,$=N;break}if(isStartOfArrow(v[N]))throw new ParseError("Missing a "+y+" character to complete a CD arrow.",v[N]);x[C].body.push(v[N])}if(E)throw new ParseError("Missing a "+y+" character to complete a CD arrow.",v[$])}else throw new ParseError('Expected one of "<>AV=|." after @',v[$]);var W=cdArrow(y,x,s),q={type:"styling",body:[W],mode:"math",style:"display"};d.push(q),b=newCell()}g%2===0?d.push(b):d.shift(),d=[],f.push(d)}s.gullet.endGroup(),s.gullet.endGroup();var Y=new Array(f[0].length).fill({type:"align",align:"c",pregap:.25,postgap:.25});return{type:"array",mode:"math",body:f,arraystretch:1,addJot:!0,rowGaps:[null],cols:Y,colSeparationType:"CD",hLinesBeforeRow:new Array(f.length+1).fill([])}}defineFunction({type:"cdlabel",names:["\\\\cdleft","\\\\cdright"],props:{numArgs:1},handler(s,l){var{parser:c,funcName:d}=s;return{type:"cdlabel",mode:c.mode,side:d.slice(4),label:l[0]}},htmlBuilder(s,l){var c=l.havingStyle(l.style.sup()),d=buildCommon.wrapFragment(buildGroup$1(s.label,c,l),l);return d.classes.push("cd-label-"+s.side),d.style.bottom=makeEm(.8-d.depth),d.height=0,d.depth=0,d},mathmlBuilder(s,l){var c=new mathMLTree.MathNode("mrow",[buildGroup(s.label,l)]);return c=new mathMLTree.MathNode("mpadded",[c]),c.setAttribute("width","0"),s.side==="left"&&c.setAttribute("lspace","-1width"),c.setAttribute("voffset","0.7em"),c=new mathMLTree.MathNode("mstyle",[c]),c.setAttribute("displaystyle","false"),c.setAttribute("scriptlevel","1"),c}});defineFunction({type:"cdlabelparent",names:["\\\\cdparent"],props:{numArgs:1},handler(s,l){var{parser:c}=s;return{type:"cdlabelparent",mode:c.mode,fragment:l[0]}},htmlBuilder(s,l){var c=buildCommon.wrapFragment(buildGroup$1(s.fragment,l),l);return c.classes.push("cd-vert-arrow"),c},mathmlBuilder(s,l){return new mathMLTree.MathNode("mrow",[buildGroup(s.fragment,l)])}});defineFunction({type:"textord",names:["\\@char"],props:{numArgs:1,allowedInText:!0},handler(s,l){for(var{parser:c}=s,d=assertNodeType(l[0],"ordgroup"),f=d.body,g="",v=0;v<f.length;v++){var b=assertNodeType(f[v],"textord");g+=b.text}var $=parseInt(g),y;if(isNaN($))throw new ParseError("\\@char has non-numeric argument "+g);if($<0||$>=1114111)throw new ParseError("\\@char with invalid code point "+g);return $<=65535?y=String.fromCharCode($):($-=65536,y=String.fromCharCode(($>>10)+55296,($&1023)+56320)),{type:"textord",mode:c.mode,text:y}}});var htmlBuilder$8=(s,l)=>{var c=buildExpression$1(s.body,l.withColor(s.color),!1);return buildCommon.makeFragment(c)},mathmlBuilder$7=(s,l)=>{var c=buildExpression(s.body,l.withColor(s.color)),d=new mathMLTree.MathNode("mstyle",c);return d.setAttribute("mathcolor",s.color),d};defineFunction({type:"color",names:["\\textcolor"],props:{numArgs:2,allowedInText:!0,argTypes:["color","original"]},handler(s,l){var{parser:c}=s,d=assertNodeType(l[0],"color-token").color,f=l[1];return{type:"color",mode:c.mode,color:d,body:ordargument(f)}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"color",names:["\\color"],props:{numArgs:1,allowedInText:!0,argTypes:["color"]},handler(s,l){var{parser:c,breakOnTokenText:d}=s,f=assertNodeType(l[0],"color-token").color;c.gullet.macros.set("\\current@color",f);var g=c.parseExpression(!0,d);return{type:"color",mode:c.mode,color:f,body:g}},htmlBuilder:htmlBuilder$8,mathmlBuilder:mathmlBuilder$7});defineFunction({type:"cr",names:["\\\\"],props:{numArgs:0,numOptionalArgs:0,allowedInText:!0},handler(s,l,c){var{parser:d}=s,f=d.gullet.future().text==="["?d.parseSizeGroup(!0):null,g=!d.settings.displayMode||!d.settings.useStrictBehavior("newLineInDisplayMode","In LaTeX, \\\\ or \\newline does nothing in display mode");return{type:"cr",mode:d.mode,newLine:g,size:f&&assertNodeType(f,"size").value}},htmlBuilder(s,l){var c=buildCommon.makeSpan(["mspace"],[],l);return s.newLine&&(c.classes.push("newline"),s.size&&(c.style.marginTop=makeEm(calculateSize(s.size,l)))),c},mathmlBuilder(s,l){var c=new mathMLTree.MathNode("mspace");return s.newLine&&(c.setAttribute("linebreak","newline"),s.size&&c.setAttribute("height",makeEm(calculateSize(s.size,l)))),c}});var globalMap={"\\global":"\\global","\\long":"\\\\globallong","\\\\globallong":"\\\\globallong","\\def":"\\gdef","\\gdef":"\\gdef","\\edef":"\\xdef","\\xdef":"\\xdef","\\let":"\\\\globallet","\\futurelet":"\\\\globalfuture"},checkControlSequence=s=>{var l=s.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(l))throw new ParseError("Expected a control sequence",s);return l},getRHS=s=>{var l=s.gullet.popToken();return l.text==="="&&(l=s.gullet.popToken(),l.text===" "&&(l=s.gullet.popToken())),l},letCommand=(s,l,c,d)=>{var f=s.gullet.macros.get(c.text);f==null&&(c.noexpand=!0,f={tokens:[c],numArgs:0,unexpandable:!s.gullet.isExpandable(c.text)}),s.gullet.macros.set(l,f,d)};defineFunction({type:"internal",names:["\\global","\\long","\\\\globallong"],props:{numArgs:0,allowedInText:!0},handler(s){var{parser:l,funcName:c}=s;l.consumeSpaces();var d=l.fetch();if(globalMap[d.text])return(c==="\\global"||c==="\\\\globallong")&&(d.text=globalMap[d.text]),assertNodeType(l.parseFunction(),"internal");throw new ParseError("Invalid token after macro prefix",d)}});defineFunction({type:"internal",names:["\\def","\\gdef","\\edef","\\xdef"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(s){var{parser:l,funcName:c}=s,d=l.gullet.popToken(),f=d.text;if(/^(?:[\\{}$&#^_]|EOF)$/.test(f))throw new ParseError("Expected a control sequence",d);for(var g=0,v,b=[[]];l.gullet.future().text!=="{";)if(d=l.gullet.popToken(),d.text==="#"){if(l.gullet.future().text==="{"){v=l.gullet.future(),b[g].push("{");break}if(d=l.gullet.popToken(),!/^[1-9]$/.test(d.text))throw new ParseError('Invalid argument number "'+d.text+'"');if(parseInt(d.text)!==g+1)throw new ParseError('Argument number "'+d.text+'" out of order');g++,b.push([])}else{if(d.text==="EOF")throw new ParseError("Expected a macro definition");b[g].push(d.text)}var{tokens:$}=l.gullet.consumeArg();return v&&$.unshift(v),(c==="\\edef"||c==="\\xdef")&&($=l.gullet.expandTokens($),$.reverse()),l.gullet.macros.set(f,{tokens:$,numArgs:g,delimiters:b},c===globalMap[c]),{type:"internal",mode:l.mode}}});defineFunction({type:"internal",names:["\\let","\\\\globallet"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(s){var{parser:l,funcName:c}=s,d=checkControlSequence(l.gullet.popToken());l.gullet.consumeSpaces();var f=getRHS(l);return letCommand(l,d,f,c==="\\\\globallet"),{type:"internal",mode:l.mode}}});defineFunction({type:"internal",names:["\\futurelet","\\\\globalfuture"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(s){var{parser:l,funcName:c}=s,d=checkControlSequence(l.gullet.popToken()),f=l.gullet.popToken(),g=l.gullet.popToken();return letCommand(l,d,g,c==="\\\\globalfuture"),l.gullet.pushToken(g),l.gullet.pushToken(f),{type:"internal",mode:l.mode}}});var getMetrics=function s(l,c,d){var f=symbols.math[l]&&symbols.math[l].replace,g=getCharacterMetrics(f||l,c,d);if(!g)throw new Error("Unsupported symbol "+l+" and font size "+c+".");return g},styleWrap=function s(l,c,d,f){var g=d.havingBaseStyle(c),v=buildCommon.makeSpan(f.concat(g.sizingClasses(d)),[l],d),b=g.sizeMultiplier/d.sizeMultiplier;return v.height*=b,v.depth*=b,v.maxFontSize=g.sizeMultiplier,v},centerSpan=function s(l,c,d){var f=c.havingBaseStyle(d),g=(1-c.sizeMultiplier/f.sizeMultiplier)*c.fontMetrics().axisHeight;l.classes.push("delimcenter"),l.style.top=makeEm(g),l.height-=g,l.depth+=g},makeSmallDelim=function s(l,c,d,f,g,v){var b=buildCommon.makeSymbol(l,"Main-Regular",g,f),$=styleWrap(b,c,f,v);return d&&centerSpan($,f,c),$},mathrmSize=function s(l,c,d,f){return buildCommon.makeSymbol(l,"Size"+c+"-Regular",d,f)},makeLargeDelim=function s(l,c,d,f,g,v){var b=mathrmSize(l,c,g,f),$=styleWrap(buildCommon.makeSpan(["delimsizing","size"+c],[b],f),Style$1.TEXT,f,v);return d&&centerSpan($,f,Style$1.TEXT),$},makeGlyphSpan=function s(l,c,d){var f;c==="Size1-Regular"?f="delim-size1":f="delim-size4";var g=buildCommon.makeSpan(["delimsizinginner",f],[buildCommon.makeSpan([],[buildCommon.makeSymbol(l,c,d)])]);return{type:"elem",elem:g}},makeInner=function s(l,c,d){var f=fontMetricsData["Size4-Regular"][l.charCodeAt(0)]?fontMetricsData["Size4-Regular"][l.charCodeAt(0)][4]:fontMetricsData["Size1-Regular"][l.charCodeAt(0)][4],g=new PathNode("inner",innerPath(l,Math.round(1e3*c))),v=new SvgNode([g],{width:makeEm(f),height:makeEm(c),style:"width:"+makeEm(f),viewBox:"0 0 "+1e3*f+" "+Math.round(1e3*c),preserveAspectRatio:"xMinYMin"}),b=buildCommon.makeSvgSpan([],[v],d);return b.height=c,b.style.height=makeEm(c),b.style.width=makeEm(f),{type:"elem",elem:b}},lapInEms=.008,lap={type:"kern",size:-1*lapInEms},verts=["|","\\lvert","\\rvert","\\vert"],doubleVerts=["\\|","\\lVert","\\rVert","\\Vert"],makeStackedDelim=function s(l,c,d,f,g,v){var b,$,y,x,C="",E=0;b=y=x=l,$=null;var N="Size1-Regular";l==="\\uparrow"?y=x="":l==="\\Uparrow"?y=x="":l==="\\downarrow"?b=y="":l==="\\Downarrow"?b=y="":l==="\\updownarrow"?(b="\\uparrow",y="",x="\\downarrow"):l==="\\Updownarrow"?(b="\\Uparrow",y="",x="\\Downarrow"):utils$3.contains(verts,l)?(y="",C="vert",E=333):utils$3.contains(doubleVerts,l)?(y="",C="doublevert",E=556):l==="["||l==="\\lbrack"?(b="",y="",x="",N="Size4-Regular",C="lbrack",E=667):l==="]"||l==="\\rbrack"?(b="",y="",x="",N="Size4-Regular",C="rbrack",E=667):l==="\\lfloor"||l===""?(y=b="",x="",N="Size4-Regular",C="lfloor",E=667):l==="\\lceil"||l===""?(b="",y=x="",N="Size4-Regular",C="lceil",E=667):l==="\\rfloor"||l===""?(y=b="",x="",N="Size4-Regular",C="rfloor",E=667):l==="\\rceil"||l===""?(b="",y=x="",N="Size4-Regular",C="rceil",E=667):l==="("||l==="\\lparen"?(b="",y="",x="",N="Size4-Regular",C="lparen",E=875):l===")"||l==="\\rparen"?(b="",y="",x="",N="Size4-Regular",C="rparen",E=875):l==="\\{"||l==="\\lbrace"?(b="",$="",x="",y="",N="Size4-Regular"):l==="\\}"||l==="\\rbrace"?(b="",$="",x="",y="",N="Size4-Regular"):l==="\\lgroup"||l===""?(b="",x="",y="",N="Size4-Regular"):l==="\\rgroup"||l===""?(b="",x="",y="",N="Size4-Regular"):l==="\\lmoustache"||l===""?(b="",x="",y="",N="Size4-Regular"):(l==="\\rmoustache"||l==="")&&(b="",x="",y="",N="Size4-Regular");var W=getMetrics(b,N,g),q=W.height+W.depth,Y=getMetrics(y,N,g),re=Y.height+Y.depth,se=getMetrics(x,N,g),de=se.height+se.depth,he=0,ge=1;if($!==null){var Se=getMetrics($,N,g);he=Se.height+Se.depth,ge=2}var Ae=q+de+he,Re=Math.max(0,Math.ceil((c-Ae)/(ge*re))),Be=Ae+Re*ge*re,Ke=f.fontMetrics().axisHeight;d&&(Ke*=f.sizeMultiplier);var Lr=Be/2-Ke,_y=[];if(C.length>0){var by=Be-q-de,yy=Math.round(Be*1e3),my=tallDelim(C,Math.round(by*1e3)),$t=new PathNode(C,my),K$=(E/1e3).toFixed(3)+"em",Y$=(yy/1e3).toFixed(3)+"em",W$=new SvgNode([$t],{width:K$,height:Y$,viewBox:"0 0 "+E+" "+yy}),U$=buildCommon.makeSvgSpan([],[W$],f);U$.height=yy/1e3,U$.style.width=K$,U$.style.height=Y$,_y.push({type:"elem",elem:U$})}else{if(_y.push(makeGlyphSpan(x,N,g)),_y.push(lap),$===null){var hy=Be-q-de+2*lapInEms;_y.push(makeInner(y,hy,f))}else{var G$=(Be-q-de-he)/2+2*lapInEms;_y.push(makeInner(y,G$,f)),_y.push(lap),_y.push(makeGlyphSpan($,N,g)),_y.push(lap),_y.push(makeInner(y,G$,f))}_y.push(lap),_y.push(makeGlyphSpan(b,N,g))}var ky=f.havingBaseStyle(Style$1.TEXT),$y=buildCommon.makeVList({positionType:"bottom",positionData:Lr,children:_y},ky);return styleWrap(buildCommon.makeSpan(["delimsizing","mult"],[$y],ky),Style$1.TEXT,f,v)},vbPad=80,emPad=.08,sqrtSvg=function s(l,c,d,f,g){var v=sqrtPath(l,f,d),b=new PathNode(l,v),$=new SvgNode([b],{width:"400em",height:makeEm(c),viewBox:"0 0 400000 "+d,preserveAspectRatio:"xMinYMin slice"});return buildCommon.makeSvgSpan(["hide-tail"],[$],g)},makeSqrtImage=function s(l,c){var d=c.havingBaseSizing(),f=traverseSequence("\\surd",l*d.sizeMultiplier,stackLargeDelimiterSequence,d),g=d.sizeMultiplier,v=Math.max(0,c.minRuleThickness-c.fontMetrics().sqrtRuleThickness),b,$=0,y=0,x=0,C;return f.type==="small"?(x=1e3+1e3*v+vbPad,l<1?g=1:l<1.4&&(g=.7),$=(1+v+emPad)/g,y=(1+v)/g,b=sqrtSvg("sqrtMain",$,x,v,c),b.style.minWidth="0.853em",C=.833/g):f.type==="large"?(x=(1e3+vbPad)*sizeToMaxHeight[f.size],y=(sizeToMaxHeight[f.size]+v)/g,$=(sizeToMaxHeight[f.size]+v+emPad)/g,b=sqrtSvg("sqrtSize"+f.size,$,x,v,c),b.style.minWidth="1.02em",C=1/g):($=l+v+emPad,y=l+v,x=Math.floor(1e3*l+v)+vbPad,b=sqrtSvg("sqrtTall",$,x,v,c),b.style.minWidth="0.742em",C=1.056),b.height=y,b.style.height=makeEm($),{span:b,advanceWidth:C,ruleWidth:(c.fontMetrics().sqrtRuleThickness+v)*g}},stackLargeDelimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","\\surd"],stackAlwaysDelimiters=["\\uparrow","\\downarrow","\\updownarrow","\\Uparrow","\\Downarrow","\\Updownarrow","|","\\|","\\vert","\\Vert","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","",""],stackNeverDelimiters=["<",">","\\langle","\\rangle","/","\\backslash","\\lt","\\gt"],sizeToMaxHeight=[0,1.2,1.8,2.4,3],makeSizedDelim=function s(l,c,d,f,g){if(l==="<"||l==="\\lt"||l===""?l="\\langle":(l===">"||l==="\\gt"||l==="")&&(l="\\rangle"),utils$3.contains(stackLargeDelimiters,l)||utils$3.contains(stackNeverDelimiters,l))return makeLargeDelim(l,c,!1,d,f,g);if(utils$3.contains(stackAlwaysDelimiters,l))return makeStackedDelim(l,sizeToMaxHeight[c],!1,d,f,g);throw new ParseError("Illegal delimiter: '"+l+"'")},stackNeverDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4}],stackAlwaysDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"stack"}],stackLargeDelimiterSequence=[{type:"small",style:Style$1.SCRIPTSCRIPT},{type:"small",style:Style$1.SCRIPT},{type:"small",style:Style$1.TEXT},{type:"large",size:1},{type:"large",size:2},{type:"large",size:3},{type:"large",size:4},{type:"stack"}],delimTypeToFont=function s(l){if(l.type==="small")return"Main-Regular";if(l.type==="large")return"Size"+l.size+"-Regular";if(l.type==="stack")return"Size4-Regular";throw new Error("Add support for delim type '"+l.type+"' here.")},traverseSequence=function s(l,c,d,f){for(var g=Math.min(2,3-f.style.size),v=g;v<d.length&&d[v].type!=="stack";v++){var b=getMetrics(l,delimTypeToFont(d[v]),"math"),$=b.height+b.depth;if(d[v].type==="small"){var y=f.havingBaseStyle(d[v].style);$*=y.sizeMultiplier}if($>c)return d[v]}return d[d.length-1]},makeCustomSizedDelim=function s(l,c,d,f,g,v){l==="<"||l==="\\lt"||l===""?l="\\langle":(l===">"||l==="\\gt"||l==="")&&(l="\\rangle");var b;utils$3.contains(stackNeverDelimiters,l)?b=stackNeverDelimiterSequence:utils$3.contains(stackLargeDelimiters,l)?b=stackLargeDelimiterSequence:b=stackAlwaysDelimiterSequence;var $=traverseSequence(l,c,b,f);return $.type==="small"?makeSmallDelim(l,$.style,d,f,g,v):$.type==="large"?makeLargeDelim(l,$.size,d,f,g,v):makeStackedDelim(l,c,d,f,g,v)},makeLeftRightDelim=function s(l,c,d,f,g,v){var b=f.fontMetrics().axisHeight*f.sizeMultiplier,$=901,y=5/f.fontMetrics().ptPerEm,x=Math.max(c-b,d+b),C=Math.max(x/500*$,2*x-y);return makeCustomSizedDelim(l,C,!0,f,g,v)},delimiter={sqrtImage:makeSqrtImage,sizedDelim:makeSizedDelim,sizeToMaxHeight,customSizedDelim:makeCustomSizedDelim,leftRightDelim:makeLeftRightDelim},delimiterSizes={"\\bigl":{mclass:"mopen",size:1},"\\Bigl":{mclass:"mopen",size:2},"\\biggl":{mclass:"mopen",size:3},"\\Biggl":{mclass:"mopen",size:4},"\\bigr":{mclass:"mclose",size:1},"\\Bigr":{mclass:"mclose",size:2},"\\biggr":{mclass:"mclose",size:3},"\\Biggr":{mclass:"mclose",size:4},"\\bigm":{mclass:"mrel",size:1},"\\Bigm":{mclass:"mrel",size:2},"\\biggm":{mclass:"mrel",size:3},"\\Biggm":{mclass:"mrel",size:4},"\\big":{mclass:"mord",size:1},"\\Big":{mclass:"mord",size:2},"\\bigg":{mclass:"mord",size:3},"\\Bigg":{mclass:"mord",size:4}},delimiters=["(","\\lparen",")","\\rparen","[","\\lbrack","]","\\rbrack","\\{","\\lbrace","\\}","\\rbrace","\\lfloor","\\rfloor","","","\\lceil","\\rceil","","","<",">","\\langle","","\\rangle","","\\lt","\\gt","\\lvert","\\rvert","\\lVert","\\rVert","\\lgroup","\\rgroup","","","\\lmoustache","\\rmoustache","","","/","\\backslash","|","\\vert","\\|","\\Vert","\\uparrow","\\Uparrow","\\downarrow","\\Downarrow","\\updownarrow","\\Updownarrow","."];function checkDelimiter(s,l){var c=checkSymbolNodeType(s);if(c&&utils$3.contains(delimiters,c.text))return c;throw c?new ParseError("Invalid delimiter '"+c.text+"' after '"+l.funcName+"'",s):new ParseError("Invalid delimiter type '"+s.type+"'",s)}defineFunction({type:"delimsizing",names:["\\bigl","\\Bigl","\\biggl","\\Biggl","\\bigr","\\Bigr","\\biggr","\\Biggr","\\bigm","\\Bigm","\\biggm","\\Biggm","\\big","\\Big","\\bigg","\\Bigg"],props:{numArgs:1,argTypes:["primitive"]},handler:(s,l)=>{var c=checkDelimiter(l[0],s);return{type:"delimsizing",mode:s.parser.mode,size:delimiterSizes[s.funcName].size,mclass:delimiterSizes[s.funcName].mclass,delim:c.text}},htmlBuilder:(s,l)=>s.delim==="."?buildCommon.makeSpan([s.mclass]):delimiter.sizedDelim(s.delim,s.size,l,s.mode,[s.mclass]),mathmlBuilder:s=>{var l=[];s.delim!=="."&&l.push(makeText(s.delim,s.mode));var c=new mathMLTree.MathNode("mo",l);s.mclass==="mopen"||s.mclass==="mclose"?c.setAttribute("fence","true"):c.setAttribute("fence","false"),c.setAttribute("stretchy","true");var d=makeEm(delimiter.sizeToMaxHeight[s.size]);return c.setAttribute("minsize",d),c.setAttribute("maxsize",d),c}});function assertParsed(s){if(!s.body)throw new Error("Bug: The leftright ParseNode wasn't fully parsed.")}defineFunction({type:"leftright-right",names:["\\right"],props:{numArgs:1,primitive:!0},handler:(s,l)=>{var c=s.parser.gullet.macros.get("\\current@color");if(c&&typeof c!="string")throw new ParseError("\\current@color set to non-string in \\right");return{type:"leftright-right",mode:s.parser.mode,delim:checkDelimiter(l[0],s).text,color:c}}});defineFunction({type:"leftright",names:["\\left"],props:{numArgs:1,primitive:!0},handler:(s,l)=>{var c=checkDelimiter(l[0],s),d=s.parser;++d.leftrightDepth;var f=d.parseExpression(!1);--d.leftrightDepth,d.expect("\\right",!1);var g=assertNodeType(d.parseFunction(),"leftright-right");return{type:"leftright",mode:d.mode,body:f,left:c.text,right:g.delim,rightColor:g.color}},htmlBuilder:(s,l)=>{assertParsed(s);for(var c=buildExpression$1(s.body,l,!0,["mopen","mclose"]),d=0,f=0,g=!1,v=0;v<c.length;v++)c[v].isMiddle?g=!0:(d=Math.max(c[v].height,d),f=Math.max(c[v].depth,f));d*=l.sizeMultiplier,f*=l.sizeMultiplier;var b;if(s.left==="."?b=makeNullDelimiter(l,["mopen"]):b=delimiter.leftRightDelim(s.left,d,f,l,s.mode,["mopen"]),c.unshift(b),g)for(var $=1;$<c.length;$++){var y=c[$],x=y.isMiddle;x&&(c[$]=delimiter.leftRightDelim(x.delim,d,f,x.options,s.mode,[]))}var C;if(s.right===".")C=makeNullDelimiter(l,["mclose"]);else{var E=s.rightColor?l.withColor(s.rightColor):l;C=delimiter.leftRightDelim(s.right,d,f,E,s.mode,["mclose"])}return c.push(C),buildCommon.makeSpan(["minner"],c,l)},mathmlBuilder:(s,l)=>{assertParsed(s);var c=buildExpression(s.body,l);if(s.left!=="."){var d=new mathMLTree.MathNode("mo",[makeText(s.left,s.mode)]);d.setAttribute("fence","true"),c.unshift(d)}if(s.right!=="."){var f=new mathMLTree.MathNode("mo",[makeText(s.right,s.mode)]);f.setAttribute("fence","true"),s.rightColor&&f.setAttribute("mathcolor",s.rightColor),c.push(f)}return makeRow(c)}});defineFunction({type:"middle",names:["\\middle"],props:{numArgs:1,primitive:!0},handler:(s,l)=>{var c=checkDelimiter(l[0],s);if(!s.parser.leftrightDepth)throw new ParseError("\\middle without preceding \\left",c);return{type:"middle",mode:s.parser.mode,delim:c.text}},htmlBuilder:(s,l)=>{var c;if(s.delim===".")c=makeNullDelimiter(l,[]);else{c=delimiter.sizedDelim(s.delim,1,l,s.mode,[]);var d={delim:s.delim,options:l};c.isMiddle=d}return c},mathmlBuilder:(s,l)=>{var c=s.delim==="\\vert"||s.delim==="|"?makeText("|","text"):makeText(s.delim,s.mode),d=new mathMLTree.MathNode("mo",[c]);return d.setAttribute("fence","true"),d.setAttribute("lspace","0.05em"),d.setAttribute("rspace","0.05em"),d}});var htmlBuilder$7=(s,l)=>{var c=buildCommon.wrapFragment(buildGroup$1(s.body,l),l),d=s.label.slice(1),f=l.sizeMultiplier,g,v=0,b=utils$3.isCharacterBox(s.body);if(d==="sout")g=buildCommon.makeSpan(["stretchy","sout"]),g.height=l.fontMetrics().defaultRuleThickness/f,v=-.5*l.fontMetrics().xHeight;else if(d==="phase"){var $=calculateSize({number:.6,unit:"pt"},l),y=calculateSize({number:.35,unit:"ex"},l),x=l.havingBaseSizing();f=f/x.sizeMultiplier;var C=c.height+c.depth+$+y;c.style.paddingLeft=makeEm(C/2+$);var E=Math.floor(1e3*C*f),N=phasePath(E),W=new SvgNode([new PathNode("phase",N)],{width:"400em",height:makeEm(E/1e3),viewBox:"0 0 400000 "+E,preserveAspectRatio:"xMinYMin slice"});g=buildCommon.makeSvgSpan(["hide-tail"],[W],l),g.style.height=makeEm(C),v=c.depth+$+y}else{/cancel/.test(d)?b||c.classes.push("cancel-pad"):d==="angl"?c.classes.push("anglpad"):c.classes.push("boxpad");var q=0,Y=0,re=0;/box/.test(d)?(re=Math.max(l.fontMetrics().fboxrule,l.minRuleThickness),q=l.fontMetrics().fboxsep+(d==="colorbox"?0:re),Y=q):d==="angl"?(re=Math.max(l.fontMetrics().defaultRuleThickness,l.minRuleThickness),q=4*re,Y=Math.max(0,.25-c.depth)):(q=b?.2:0,Y=q),g=stretchy.encloseSpan(c,d,q,Y,l),/fbox|boxed|fcolorbox/.test(d)?(g.style.borderStyle="solid",g.style.borderWidth=makeEm(re)):d==="angl"&&re!==.049&&(g.style.borderTopWidth=makeEm(re),g.style.borderRightWidth=makeEm(re)),v=c.depth+Y,s.backgroundColor&&(g.style.backgroundColor=s.backgroundColor,s.borderColor&&(g.style.borderColor=s.borderColor))}var se;if(s.backgroundColor)se=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:g,shift:v},{type:"elem",elem:c,shift:0}]},l);else{var de=/cancel|phase/.test(d)?["svg-align"]:[];se=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:c,shift:0},{type:"elem",elem:g,shift:v,wrapperClasses:de}]},l)}return/cancel/.test(d)&&(se.height=c.height,se.depth=c.depth),/cancel/.test(d)&&!b?buildCommon.makeSpan(["mord","cancel-lap"],[se],l):buildCommon.makeSpan(["mord"],[se],l)},mathmlBuilder$6=(s,l)=>{var c=0,d=new mathMLTree.MathNode(s.label.indexOf("colorbox")>-1?"mpadded":"menclose",[buildGroup(s.body,l)]);switch(s.label){case"\\cancel":d.setAttribute("notation","updiagonalstrike");break;case"\\bcancel":d.setAttribute("notation","downdiagonalstrike");break;case"\\phase":d.setAttribute("notation","phasorangle");break;case"\\sout":d.setAttribute("notation","horizontalstrike");break;case"\\fbox":d.setAttribute("notation","box");break;case"\\angl":d.setAttribute("notation","actuarial");break;case"\\fcolorbox":case"\\colorbox":if(c=l.fontMetrics().fboxsep*l.fontMetrics().ptPerEm,d.setAttribute("width","+"+2*c+"pt"),d.setAttribute("height","+"+2*c+"pt"),d.setAttribute("lspace",c+"pt"),d.setAttribute("voffset",c+"pt"),s.label==="\\fcolorbox"){var f=Math.max(l.fontMetrics().fboxrule,l.minRuleThickness);d.setAttribute("style","border: "+f+"em solid "+String(s.borderColor))}break;case"\\xcancel":d.setAttribute("notation","updiagonalstrike downdiagonalstrike");break}return s.backgroundColor&&d.setAttribute("mathbackground",s.backgroundColor),d};defineFunction({type:"enclose",names:["\\colorbox"],props:{numArgs:2,allowedInText:!0,argTypes:["color","text"]},handler(s,l,c){var{parser:d,funcName:f}=s,g=assertNodeType(l[0],"color-token").color,v=l[1];return{type:"enclose",mode:d.mode,label:f,backgroundColor:g,body:v}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fcolorbox"],props:{numArgs:3,allowedInText:!0,argTypes:["color","color","text"]},handler(s,l,c){var{parser:d,funcName:f}=s,g=assertNodeType(l[0],"color-token").color,v=assertNodeType(l[1],"color-token").color,b=l[2];return{type:"enclose",mode:d.mode,label:f,backgroundColor:v,borderColor:g,body:b}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\fbox"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!0},handler(s,l){var{parser:c}=s;return{type:"enclose",mode:c.mode,label:"\\fbox",body:l[0]}}});defineFunction({type:"enclose",names:["\\cancel","\\bcancel","\\xcancel","\\sout","\\phase"],props:{numArgs:1},handler(s,l){var{parser:c,funcName:d}=s,f=l[0];return{type:"enclose",mode:c.mode,label:d,body:f}},htmlBuilder:htmlBuilder$7,mathmlBuilder:mathmlBuilder$6});defineFunction({type:"enclose",names:["\\angl"],props:{numArgs:1,argTypes:["hbox"],allowedInText:!1},handler(s,l){var{parser:c}=s;return{type:"enclose",mode:c.mode,label:"\\angl",body:l[0]}}});var _environments={};function defineEnvironment(s){for(var{type:l,names:c,props:d,handler:f,htmlBuilder:g,mathmlBuilder:v}=s,b={type:l,numArgs:d.numArgs||0,allowedInText:!1,numOptionalArgs:0,handler:f},$=0;$<c.length;++$)_environments[c[$]]=b;g&&(_htmlGroupBuilders[l]=g),v&&(_mathmlGroupBuilders[l]=v)}var _macros={};function defineMacro(s,l){_macros[s]=l}function getHLines(s){var l=[];s.consumeSpaces();var c=s.fetch().text;for(c==="\\relax"&&(s.consume(),s.consumeSpaces(),c=s.fetch().text);c==="\\hline"||c==="\\hdashline";)s.consume(),l.push(c==="\\hdashline"),s.consumeSpaces(),c=s.fetch().text;return l}var validateAmsEnvironmentContext=s=>{var l=s.parser.settings;if(!l.displayMode)throw new ParseError("{"+s.envName+"} can be used only in display mode.")};function getAutoTag(s){if(s.indexOf("ed")===-1)return s.indexOf("*")===-1}function parseArray(s,l,c){var{hskipBeforeAndAfter:d,addJot:f,cols:g,arraystretch:v,colSeparationType:b,autoTag:$,singleRow:y,emptySingleRow:x,maxNumCols:C,leqno:E}=l;if(s.gullet.beginGroup(),y||s.gullet.macros.set("\\cr","\\\\\\relax"),!v){var N=s.gullet.expandMacroAsText("\\arraystretch");if(N==null)v=1;else if(v=parseFloat(N),!v||v<0)throw new ParseError("Invalid \\arraystretch: "+N)}s.gullet.beginGroup();var W=[],q=[W],Y=[],re=[],se=$!=null?[]:void 0;function de(){$&&s.gullet.macros.set("\\@eqnsw","1",!0)}function he(){se&&(s.gullet.macros.get("\\df@tag")?(se.push(s.subparse([new Token("\\df@tag")])),s.gullet.macros.set("\\df@tag",void 0,!0)):se.push(!!$&&s.gullet.macros.get("\\@eqnsw")==="1"))}for(de(),re.push(getHLines(s));;){var ge=s.parseExpression(!1,y?"\\end":"\\\\");s.gullet.endGroup(),s.gullet.beginGroup(),ge={type:"ordgroup",mode:s.mode,body:ge},c&&(ge={type:"styling",mode:s.mode,style:c,body:[ge]}),W.push(ge);var Se=s.fetch().text;if(Se==="&"){if(C&&W.length===C){if(y||b)throw new ParseError("Too many tab characters: &",s.nextToken);s.settings.reportNonstrict("textEnv","Too few columns specified in the {array} column argument.")}s.consume()}else if(Se==="\\end"){he(),W.length===1&&ge.type==="styling"&&ge.body[0].body.length===0&&(q.length>1||!x)&&q.pop(),re.length<q.length+1&&re.push([]);break}else if(Se==="\\\\"){s.consume();var Ae=void 0;s.gullet.future().text!==" "&&(Ae=s.parseSizeGroup(!0)),Y.push(Ae?Ae.value:null),he(),re.push(getHLines(s)),W=[],q.push(W),de()}else throw new ParseError("Expected & or \\\\ or \\cr or \\end",s.nextToken)}return s.gullet.endGroup(),s.gullet.endGroup(),{type:"array",mode:s.mode,addJot:f,arraystretch:v,body:q,cols:g,rowGaps:Y,hskipBeforeAndAfter:d,hLinesBeforeRow:re,colSeparationType:b,tags:se,leqno:E}}function dCellStyle(s){return s.slice(0,1)==="d"?"display":"text"}var htmlBuilder$6=function s(l,c){var d,f,g=l.body.length,v=l.hLinesBeforeRow,b=0,$=new Array(g),y=[],x=Math.max(c.fontMetrics().arrayRuleWidth,c.minRuleThickness),C=1/c.fontMetrics().ptPerEm,E=5*C;if(l.colSeparationType&&l.colSeparationType==="small"){var N=c.havingStyle(Style$1.SCRIPT).sizeMultiplier;E=.2778*(N/c.sizeMultiplier)}var W=l.colSeparationType==="CD"?calculateSize({number:3,unit:"ex"},c):12*C,q=3*C,Y=l.arraystretch*W,re=.7*Y,se=.3*Y,de=0;function he(tS){for(var yS=0;yS<tS.length;++yS)yS>0&&(de+=.25),y.push({pos:de,isDashed:tS[yS]})}for(he(v[0]),d=0;d<l.body.length;++d){var ge=l.body[d],Se=re,Ae=se;b<ge.length&&(b=ge.length);var Re=new Array(ge.length);for(f=0;f<ge.length;++f){var Be=buildGroup$1(ge[f],c);Ae<Be.depth&&(Ae=Be.depth),Se<Be.height&&(Se=Be.height),Re[f]=Be}var Ke=l.rowGaps[d],Lr=0;Ke&&(Lr=calculateSize(Ke,c),Lr>0&&(Lr+=se,Ae<Lr&&(Ae=Lr),Lr=0)),l.addJot&&(Ae+=q),Re.height=Se,Re.depth=Ae,de+=Se,Re.pos=de,de+=Ae+Lr,$[d]=Re,he(v[d+1])}var _y=de/2+c.fontMetrics().axisHeight,by=l.cols||[],yy=[],my,$t,K$=[];if(l.tags&&l.tags.some(tS=>tS))for(d=0;d<g;++d){var Y$=$[d],W$=Y$.pos-_y,U$=l.tags[d],hy=void 0;U$===!0?hy=buildCommon.makeSpan(["eqn-num"],[],c):U$===!1?hy=buildCommon.makeSpan([],[],c):hy=buildCommon.makeSpan([],buildExpression$1(U$,c,!0),c),hy.depth=Y$.depth,hy.height=Y$.height,K$.push({type:"elem",elem:hy,shift:W$})}for(f=0,$t=0;f<b||$t<by.length;++f,++$t){for(var G$=by[$t]||{},ky=!0;G$.type==="separator";){if(ky||(my=buildCommon.makeSpan(["arraycolsep"],[]),my.style.width=makeEm(c.fontMetrics().doubleRuleSep),yy.push(my)),G$.separator==="|"||G$.separator===":"){var $y=G$.separator==="|"?"solid":"dashed",rS=buildCommon.makeSpan(["vertical-separator"],[],c);rS.style.height=makeEm(de),rS.style.borderRightWidth=makeEm(x),rS.style.borderRightStyle=$y,rS.style.margin="0 "+makeEm(-x/2);var lS=de-_y;lS&&(rS.style.verticalAlign=makeEm(-lS)),yy.push(rS)}else throw new ParseError("Invalid separator type: "+G$.separator);$t++,G$=by[$t]||{},ky=!1}if(!(f>=b)){var bS=void 0;(f>0||l.hskipBeforeAndAfter)&&(bS=utils$3.deflt(G$.pregap,E),bS!==0&&(my=buildCommon.makeSpan(["arraycolsep"],[]),my.style.width=makeEm(bS),yy.push(my)));var IS=[];for(d=0;d<g;++d){var BS=$[d],MS=BS[f];if(MS){var zS=BS.pos-_y;MS.depth=BS.depth,MS.height=BS.height,IS.push({type:"elem",elem:MS,shift:zS})}}IS=buildCommon.makeVList({positionType:"individualShift",children:IS},c),IS=buildCommon.makeSpan(["col-align-"+(G$.align||"c")],[IS]),yy.push(IS),(f<b-1||l.hskipBeforeAndAfter)&&(bS=utils$3.deflt(G$.postgap,E),bS!==0&&(my=buildCommon.makeSpan(["arraycolsep"],[]),my.style.width=makeEm(bS),yy.push(my)))}}if($=buildCommon.makeSpan(["mtable"],yy),y.length>0){for(var LS=buildCommon.makeLineSpan("hline",c,x),nS=buildCommon.makeLineSpan("hdashline",c,x),Z$=[{type:"elem",elem:$,shift:0}];y.length>0;){var dS=y.pop(),ES=dS.pos-_y;dS.isDashed?Z$.push({type:"elem",elem:nS,shift:ES}):Z$.push({type:"elem",elem:LS,shift:ES})}$=buildCommon.makeVList({positionType:"individualShift",children:Z$},c)}if(K$.length===0)return buildCommon.makeSpan(["mord"],[$],c);var wy=buildCommon.makeVList({positionType:"individualShift",children:K$},c);return wy=buildCommon.makeSpan(["tag"],[wy],c),buildCommon.makeFragment([$,wy])},alignMap={c:"center ",l:"left ",r:"right "},mathmlBuilder$5=function s(l,c){for(var d=[],f=new mathMLTree.MathNode("mtd",[],["mtr-glue"]),g=new mathMLTree.MathNode("mtd",[],["mml-eqn-num"]),v=0;v<l.body.length;v++){for(var b=l.body[v],$=[],y=0;y<b.length;y++)$.push(new mathMLTree.MathNode("mtd",[buildGroup(b[y],c)]));l.tags&&l.tags[v]&&($.unshift(f),$.push(f),l.leqno?$.unshift(g):$.push(g)),d.push(new mathMLTree.MathNode("mtr",$))}var x=new mathMLTree.MathNode("mtable",d),C=l.arraystretch===.5?.1:.16+l.arraystretch-1+(l.addJot?.09:0);x.setAttribute("rowspacing",makeEm(C));var E="",N="";if(l.cols&&l.cols.length>0){var W=l.cols,q="",Y=!1,re=0,se=W.length;W[0].type==="separator"&&(E+="top ",re=1),W[W.length-1].type==="separator"&&(E+="bottom ",se-=1);for(var de=re;de<se;de++)W[de].type==="align"?(N+=alignMap[W[de].align],Y&&(q+="none "),Y=!0):W[de].type==="separator"&&Y&&(q+=W[de].separator==="|"?"solid ":"dashed ",Y=!1);x.setAttribute("columnalign",N.trim()),/[sd]/.test(q)&&x.setAttribute("columnlines",q.trim())}if(l.colSeparationType==="align"){for(var he=l.cols||[],ge="",Se=1;Se<he.length;Se++)ge+=Se%2?"0em ":"1em ";x.setAttribute("columnspacing",ge.trim())}else l.colSeparationType==="alignat"||l.colSeparationType==="gather"?x.setAttribute("columnspacing","0em"):l.colSeparationType==="small"?x.setAttribute("columnspacing","0.2778em"):l.colSeparationType==="CD"?x.setAttribute("columnspacing","0.5em"):x.setAttribute("columnspacing","1em");var Ae="",Re=l.hLinesBeforeRow;E+=Re[0].length>0?"left ":"",E+=Re[Re.length-1].length>0?"right ":"";for(var Be=1;Be<Re.length-1;Be++)Ae+=Re[Be].length===0?"none ":Re[Be][0]?"dashed ":"solid ";return/[sd]/.test(Ae)&&x.setAttribute("rowlines",Ae.trim()),E!==""&&(x=new mathMLTree.MathNode("menclose",[x]),x.setAttribute("notation",E.trim())),l.arraystretch&&l.arraystretch<1&&(x=new mathMLTree.MathNode("mstyle",[x]),x.setAttribute("scriptlevel","1")),x},alignedHandler=function s(l,c){l.envName.indexOf("ed")===-1&&validateAmsEnvironmentContext(l);var d=[],f=l.envName.indexOf("at")>-1?"alignat":"align",g=l.envName==="split",v=parseArray(l.parser,{cols:d,addJot:!0,autoTag:g?void 0:getAutoTag(l.envName),emptySingleRow:!0,colSeparationType:f,maxNumCols:g?2:void 0,leqno:l.parser.settings.leqno},"display"),b,$=0,y={type:"ordgroup",mode:l.mode,body:[]};if(c[0]&&c[0].type==="ordgroup"){for(var x="",C=0;C<c[0].body.length;C++){var E=assertNodeType(c[0].body[C],"textord");x+=E.text}b=Number(x),$=b*2}var N=!$;v.body.forEach(function(re){for(var se=1;se<re.length;se+=2){var de=assertNodeType(re[se],"styling"),he=assertNodeType(de.body[0],"ordgroup");he.body.unshift(y)}if(N)$<re.length&&($=re.length);else{var ge=re.length/2;if(b<ge)throw new ParseError("Too many math in a row: "+("expected "+b+", but got "+ge),re[0])}});for(var W=0;W<$;++W){var q="r",Y=0;W%2===1?q="l":W>0&&N&&(Y=1),d[W]={type:"align",align:q,pregap:Y,postgap:0}}return v.colSeparationType=N?"align":"alignat",v};defineEnvironment({type:"array",names:["array","darray"],props:{numArgs:1},handler(s,l){var c=checkSymbolNodeType(l[0]),d=c?[l[0]]:assertNodeType(l[0],"ordgroup").body,f=d.map(function(v){var b=assertSymbolNodeType(v),$=b.text;if("lcr".indexOf($)!==-1)return{type:"align",align:$};if($==="|")return{type:"separator",separator:"|"};if($===":")return{type:"separator",separator:":"};throw new ParseError("Unknown column alignment: "+$,v)}),g={cols:f,hskipBeforeAndAfter:!0,maxNumCols:f.length};return parseArray(s.parser,g,dCellStyle(s.envName))},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["matrix","pmatrix","bmatrix","Bmatrix","vmatrix","Vmatrix","matrix*","pmatrix*","bmatrix*","Bmatrix*","vmatrix*","Vmatrix*"],props:{numArgs:0},handler(s){var l={matrix:null,pmatrix:["(",")"],bmatrix:["[","]"],Bmatrix:["\\{","\\}"],vmatrix:["|","|"],Vmatrix:["\\Vert","\\Vert"]}[s.envName.replace("*","")],c="c",d={hskipBeforeAndAfter:!1,cols:[{type:"align",align:c}]};if(s.envName.charAt(s.envName.length-1)==="*"){var f=s.parser;if(f.consumeSpaces(),f.fetch().text==="["){if(f.consume(),f.consumeSpaces(),c=f.fetch().text,"lcr".indexOf(c)===-1)throw new ParseError("Expected l or c or r",f.nextToken);f.consume(),f.consumeSpaces(),f.expect("]"),f.consume(),d.cols=[{type:"align",align:c}]}}var g=parseArray(s.parser,d,dCellStyle(s.envName)),v=Math.max(0,...g.body.map(b=>b.length));return g.cols=new Array(v).fill({type:"align",align:c}),l?{type:"leftright",mode:s.mode,body:[g],left:l[0],right:l[1],rightColor:void 0}:g},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["smallmatrix"],props:{numArgs:0},handler(s){var l={arraystretch:.5},c=parseArray(s.parser,l,"script");return c.colSeparationType="small",c},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["subarray"],props:{numArgs:1},handler(s,l){var c=checkSymbolNodeType(l[0]),d=c?[l[0]]:assertNodeType(l[0],"ordgroup").body,f=d.map(function(v){var b=assertSymbolNodeType(v),$=b.text;if("lc".indexOf($)!==-1)return{type:"align",align:$};throw new ParseError("Unknown column alignment: "+$,v)});if(f.length>1)throw new ParseError("{subarray} can contain only one column");var g={cols:f,hskipBeforeAndAfter:!1,arraystretch:.5};if(g=parseArray(s.parser,g,"script"),g.body.length>0&&g.body[0].length>1)throw new ParseError("{subarray} can contain only one column");return g},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["cases","dcases","rcases","drcases"],props:{numArgs:0},handler(s){var l={arraystretch:1.2,cols:[{type:"align",align:"l",pregap:0,postgap:1},{type:"align",align:"l",pregap:0,postgap:0}]},c=parseArray(s.parser,l,dCellStyle(s.envName));return{type:"leftright",mode:s.mode,body:[c],left:s.envName.indexOf("r")>-1?".":"\\{",right:s.envName.indexOf("r")>-1?"\\}":".",rightColor:void 0}},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["align","align*","aligned","split"],props:{numArgs:0},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["gathered","gather","gather*"],props:{numArgs:0},handler(s){utils$3.contains(["gather","gather*"],s.envName)&&validateAmsEnvironmentContext(s);var l={cols:[{type:"align",align:"c"}],addJot:!0,colSeparationType:"gather",autoTag:getAutoTag(s.envName),emptySingleRow:!0,leqno:s.parser.settings.leqno};return parseArray(s.parser,l,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["alignat","alignat*","alignedat"],props:{numArgs:1},handler:alignedHandler,htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["equation","equation*"],props:{numArgs:0},handler(s){validateAmsEnvironmentContext(s);var l={autoTag:getAutoTag(s.envName),emptySingleRow:!0,singleRow:!0,maxNumCols:1,leqno:s.parser.settings.leqno};return parseArray(s.parser,l,"display")},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineEnvironment({type:"array",names:["CD"],props:{numArgs:0},handler(s){return validateAmsEnvironmentContext(s),parseCD(s.parser)},htmlBuilder:htmlBuilder$6,mathmlBuilder:mathmlBuilder$5});defineMacro("\\nonumber","\\gdef\\@eqnsw{0}");defineMacro("\\notag","\\nonumber");defineFunction({type:"text",names:["\\hline","\\hdashline"],props:{numArgs:0,allowedInText:!0,allowedInMath:!0},handler(s,l){throw new ParseError(s.funcName+" valid only within array environment")}});var environments=_environments;defineFunction({type:"environment",names:["\\begin","\\end"],props:{numArgs:1,argTypes:["text"]},handler(s,l){var{parser:c,funcName:d}=s,f=l[0];if(f.type!=="ordgroup")throw new ParseError("Invalid environment name",f);for(var g="",v=0;v<f.body.length;++v)g+=assertNodeType(f.body[v],"textord").text;if(d==="\\begin"){if(!environments.hasOwnProperty(g))throw new ParseError("No such environment: "+g,f);var b=environments[g],{args:$,optArgs:y}=c.parseArguments("\\begin{"+g+"}",b),x={mode:c.mode,envName:g,parser:c},C=b.handler(x,$,y);c.expect("\\end",!1);var E=c.nextToken,N=assertNodeType(c.parseFunction(),"environment");if(N.name!==g)throw new ParseError("Mismatch: \\begin{"+g+"} matched by \\end{"+N.name+"}",E);return C}return{type:"environment",mode:c.mode,name:g,nameGroup:f}}});var htmlBuilder$5=(s,l)=>{var c=s.font,d=l.withFont(c);return buildGroup$1(s.body,d)},mathmlBuilder$4=(s,l)=>{var c=s.font,d=l.withFont(c);return buildGroup(s.body,d)},fontAliases={"\\Bbb":"\\mathbb","\\bold":"\\mathbf","\\frak":"\\mathfrak","\\bm":"\\boldsymbol"};defineFunction({type:"font",names:["\\mathrm","\\mathit","\\mathbf","\\mathnormal","\\mathbb","\\mathcal","\\mathfrak","\\mathscr","\\mathsf","\\mathtt","\\Bbb","\\bold","\\frak"],props:{numArgs:1,allowedInArgument:!0},handler:(s,l)=>{var{parser:c,funcName:d}=s,f=normalizeArgument(l[0]),g=d;return g in fontAliases&&(g=fontAliases[g]),{type:"font",mode:c.mode,font:g.slice(1),body:f}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});defineFunction({type:"mclass",names:["\\boldsymbol","\\bm"],props:{numArgs:1},handler:(s,l)=>{var{parser:c}=s,d=l[0],f=utils$3.isCharacterBox(d);return{type:"mclass",mode:c.mode,mclass:binrelClass(d),body:[{type:"font",mode:c.mode,font:"boldsymbol",body:d}],isCharacterBox:f}}});defineFunction({type:"font",names:["\\rm","\\sf","\\tt","\\bf","\\it","\\cal"],props:{numArgs:0,allowedInText:!0},handler:(s,l)=>{var{parser:c,funcName:d,breakOnTokenText:f}=s,{mode:g}=c,v=c.parseExpression(!0,f),b="math"+d.slice(1);return{type:"font",mode:g,font:b,body:{type:"ordgroup",mode:c.mode,body:v}}},htmlBuilder:htmlBuilder$5,mathmlBuilder:mathmlBuilder$4});var adjustStyle=(s,l)=>{var c=l;return s==="display"?c=c.id>=Style$1.SCRIPT.id?c.text():Style$1.DISPLAY:s==="text"&&c.size===Style$1.DISPLAY.size?c=Style$1.TEXT:s==="script"?c=Style$1.SCRIPT:s==="scriptscript"&&(c=Style$1.SCRIPTSCRIPT),c},htmlBuilder$4=(s,l)=>{var c=adjustStyle(s.size,l.style),d=c.fracNum(),f=c.fracDen(),g;g=l.havingStyle(d);var v=buildGroup$1(s.numer,g,l);if(s.continued){var b=8.5/l.fontMetrics().ptPerEm,$=3.5/l.fontMetrics().ptPerEm;v.height=v.height<b?b:v.height,v.depth=v.depth<$?$:v.depth}g=l.havingStyle(f);var y=buildGroup$1(s.denom,g,l),x,C,E;s.hasBarLine?(s.barSize?(C=calculateSize(s.barSize,l),x=buildCommon.makeLineSpan("frac-line",l,C)):x=buildCommon.makeLineSpan("frac-line",l),C=x.height,E=x.height):(x=null,C=0,E=l.fontMetrics().defaultRuleThickness);var N,W,q;c.size===Style$1.DISPLAY.size||s.size==="display"?(N=l.fontMetrics().num1,C>0?W=3*E:W=7*E,q=l.fontMetrics().denom1):(C>0?(N=l.fontMetrics().num2,W=E):(N=l.fontMetrics().num3,W=3*E),q=l.fontMetrics().denom2);var Y;if(x){var se=l.fontMetrics().axisHeight;N-v.depth-(se+.5*C)<W&&(N+=W-(N-v.depth-(se+.5*C))),se-.5*C-(y.height-q)<W&&(q+=W-(se-.5*C-(y.height-q)));var de=-(se-.5*C);Y=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:y,shift:q},{type:"elem",elem:x,shift:de},{type:"elem",elem:v,shift:-N}]},l)}else{var re=N-v.depth-(y.height-q);re<W&&(N+=.5*(W-re),q+=.5*(W-re)),Y=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:y,shift:q},{type:"elem",elem:v,shift:-N}]},l)}g=l.havingStyle(c),Y.height*=g.sizeMultiplier/l.sizeMultiplier,Y.depth*=g.sizeMultiplier/l.sizeMultiplier;var he;c.size===Style$1.DISPLAY.size?he=l.fontMetrics().delim1:c.size===Style$1.SCRIPTSCRIPT.size?he=l.havingStyle(Style$1.SCRIPT).fontMetrics().delim2:he=l.fontMetrics().delim2;var ge,Se;return s.leftDelim==null?ge=makeNullDelimiter(l,["mopen"]):ge=delimiter.customSizedDelim(s.leftDelim,he,!0,l.havingStyle(c),s.mode,["mopen"]),s.continued?Se=buildCommon.makeSpan([]):s.rightDelim==null?Se=makeNullDelimiter(l,["mclose"]):Se=delimiter.customSizedDelim(s.rightDelim,he,!0,l.havingStyle(c),s.mode,["mclose"]),buildCommon.makeSpan(["mord"].concat(g.sizingClasses(l)),[ge,buildCommon.makeSpan(["mfrac"],[Y]),Se],l)},mathmlBuilder$3=(s,l)=>{var c=new mathMLTree.MathNode("mfrac",[buildGroup(s.numer,l),buildGroup(s.denom,l)]);if(!s.hasBarLine)c.setAttribute("linethickness","0px");else if(s.barSize){var d=calculateSize(s.barSize,l);c.setAttribute("linethickness",makeEm(d))}var f=adjustStyle(s.size,l.style);if(f.size!==l.style.size){c=new mathMLTree.MathNode("mstyle",[c]);var g=f.size===Style$1.DISPLAY.size?"true":"false";c.setAttribute("displaystyle",g),c.setAttribute("scriptlevel","0")}if(s.leftDelim!=null||s.rightDelim!=null){var v=[];if(s.leftDelim!=null){var b=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(s.leftDelim.replace("\\",""))]);b.setAttribute("fence","true"),v.push(b)}if(v.push(c),s.rightDelim!=null){var $=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode(s.rightDelim.replace("\\",""))]);$.setAttribute("fence","true"),v.push($)}return makeRow(v)}return c};defineFunction({type:"genfrac",names:["\\dfrac","\\frac","\\tfrac","\\dbinom","\\binom","\\tbinom","\\\\atopfrac","\\\\bracefrac","\\\\brackfrac"],props:{numArgs:2,allowedInArgument:!0},handler:(s,l)=>{var{parser:c,funcName:d}=s,f=l[0],g=l[1],v,b=null,$=null,y="auto";switch(d){case"\\dfrac":case"\\frac":case"\\tfrac":v=!0;break;case"\\\\atopfrac":v=!1;break;case"\\dbinom":case"\\binom":case"\\tbinom":v=!1,b="(",$=")";break;case"\\\\bracefrac":v=!1,b="\\{",$="\\}";break;case"\\\\brackfrac":v=!1,b="[",$="]";break;default:throw new Error("Unrecognized genfrac command")}switch(d){case"\\dfrac":case"\\dbinom":y="display";break;case"\\tfrac":case"\\tbinom":y="text";break}return{type:"genfrac",mode:c.mode,continued:!1,numer:f,denom:g,hasBarLine:v,leftDelim:b,rightDelim:$,size:y,barSize:null}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"genfrac",names:["\\cfrac"],props:{numArgs:2},handler:(s,l)=>{var{parser:c,funcName:d}=s,f=l[0],g=l[1];return{type:"genfrac",mode:c.mode,continued:!0,numer:f,denom:g,hasBarLine:!0,leftDelim:null,rightDelim:null,size:"display",barSize:null}}});defineFunction({type:"infix",names:["\\over","\\choose","\\atop","\\brace","\\brack"],props:{numArgs:0,infix:!0},handler(s){var{parser:l,funcName:c,token:d}=s,f;switch(c){case"\\over":f="\\frac";break;case"\\choose":f="\\binom";break;case"\\atop":f="\\\\atopfrac";break;case"\\brace":f="\\\\bracefrac";break;case"\\brack":f="\\\\brackfrac";break;default:throw new Error("Unrecognized infix genfrac command")}return{type:"infix",mode:l.mode,replaceWith:f,token:d}}});var stylArray=["display","text","script","scriptscript"],delimFromValue=function s(l){var c=null;return l.length>0&&(c=l,c=c==="."?null:c),c};defineFunction({type:"genfrac",names:["\\genfrac"],props:{numArgs:6,allowedInArgument:!0,argTypes:["math","math","size","text","math","math"]},handler(s,l){var{parser:c}=s,d=l[4],f=l[5],g=normalizeArgument(l[0]),v=g.type==="atom"&&g.family==="open"?delimFromValue(g.text):null,b=normalizeArgument(l[1]),$=b.type==="atom"&&b.family==="close"?delimFromValue(b.text):null,y=assertNodeType(l[2],"size"),x,C=null;y.isBlank?x=!0:(C=y.value,x=C.number>0);var E="auto",N=l[3];if(N.type==="ordgroup"){if(N.body.length>0){var W=assertNodeType(N.body[0],"textord");E=stylArray[Number(W.text)]}}else N=assertNodeType(N,"textord"),E=stylArray[Number(N.text)];return{type:"genfrac",mode:c.mode,numer:d,denom:f,continued:!1,hasBarLine:x,barSize:C,leftDelim:v,rightDelim:$,size:E}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});defineFunction({type:"infix",names:["\\above"],props:{numArgs:1,argTypes:["size"],infix:!0},handler(s,l){var{parser:c,funcName:d,token:f}=s;return{type:"infix",mode:c.mode,replaceWith:"\\\\abovefrac",size:assertNodeType(l[0],"size").value,token:f}}});defineFunction({type:"genfrac",names:["\\\\abovefrac"],props:{numArgs:3,argTypes:["math","size","math"]},handler:(s,l)=>{var{parser:c,funcName:d}=s,f=l[0],g=assert(assertNodeType(l[1],"infix").size),v=l[2],b=g.number>0;return{type:"genfrac",mode:c.mode,numer:f,denom:v,continued:!1,hasBarLine:b,barSize:g,leftDelim:null,rightDelim:null,size:"auto"}},htmlBuilder:htmlBuilder$4,mathmlBuilder:mathmlBuilder$3});var htmlBuilder$3=(s,l)=>{var c=l.style,d,f;s.type==="supsub"?(d=s.sup?buildGroup$1(s.sup,l.havingStyle(c.sup()),l):buildGroup$1(s.sub,l.havingStyle(c.sub()),l),f=assertNodeType(s.base,"horizBrace")):f=assertNodeType(s,"horizBrace");var g=buildGroup$1(f.base,l.havingBaseStyle(Style$1.DISPLAY)),v=stretchy.svgSpan(f,l),b;if(f.isOver?(b=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:g},{type:"kern",size:.1},{type:"elem",elem:v}]},l),b.children[0].children[0].children[1].classes.push("svg-align")):(b=buildCommon.makeVList({positionType:"bottom",positionData:g.depth+.1+v.height,children:[{type:"elem",elem:v},{type:"kern",size:.1},{type:"elem",elem:g}]},l),b.children[0].children[0].children[0].classes.push("svg-align")),d){var $=buildCommon.makeSpan(["mord",f.isOver?"mover":"munder"],[b],l);f.isOver?b=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:$},{type:"kern",size:.2},{type:"elem",elem:d}]},l):b=buildCommon.makeVList({positionType:"bottom",positionData:$.depth+.2+d.height+d.depth,children:[{type:"elem",elem:d},{type:"kern",size:.2},{type:"elem",elem:$}]},l)}return buildCommon.makeSpan(["mord",f.isOver?"mover":"munder"],[b],l)},mathmlBuilder$2=(s,l)=>{var c=stretchy.mathMLnode(s.label);return new mathMLTree.MathNode(s.isOver?"mover":"munder",[buildGroup(s.base,l),c])};defineFunction({type:"horizBrace",names:["\\overbrace","\\underbrace"],props:{numArgs:1},handler(s,l){var{parser:c,funcName:d}=s;return{type:"horizBrace",mode:c.mode,label:d,isOver:/^\\over/.test(d),base:l[0]}},htmlBuilder:htmlBuilder$3,mathmlBuilder:mathmlBuilder$2});defineFunction({type:"href",names:["\\href"],props:{numArgs:2,argTypes:["url","original"],allowedInText:!0},handler:(s,l)=>{var{parser:c}=s,d=l[1],f=assertNodeType(l[0],"url").url;return c.settings.isTrusted({command:"\\href",url:f})?{type:"href",mode:c.mode,href:f,body:ordargument(d)}:c.formatUnsupportedCmd("\\href")},htmlBuilder:(s,l)=>{var c=buildExpression$1(s.body,l,!1);return buildCommon.makeAnchor(s.href,[],c,l)},mathmlBuilder:(s,l)=>{var c=buildExpressionRow(s.body,l);return c instanceof MathNode||(c=new MathNode("mrow",[c])),c.setAttribute("href",s.href),c}});defineFunction({type:"href",names:["\\url"],props:{numArgs:1,argTypes:["url"],allowedInText:!0},handler:(s,l)=>{var{parser:c}=s,d=assertNodeType(l[0],"url").url;if(!c.settings.isTrusted({command:"\\url",url:d}))return c.formatUnsupportedCmd("\\url");for(var f=[],g=0;g<d.length;g++){var v=d[g];v==="~"&&(v="\\textasciitilde"),f.push({type:"textord",mode:"text",text:v})}var b={type:"text",mode:c.mode,font:"\\texttt",body:f};return{type:"href",mode:c.mode,href:d,body:ordargument(b)}}});defineFunction({type:"hbox",names:["\\hbox"],props:{numArgs:1,argTypes:["text"],allowedInText:!0,primitive:!0},handler(s,l){var{parser:c}=s;return{type:"hbox",mode:c.mode,body:ordargument(l[0])}},htmlBuilder(s,l){var c=buildExpression$1(s.body,l,!1);return buildCommon.makeFragment(c)},mathmlBuilder(s,l){return new mathMLTree.MathNode("mrow",buildExpression(s.body,l))}});defineFunction({type:"html",names:["\\htmlClass","\\htmlId","\\htmlStyle","\\htmlData"],props:{numArgs:2,argTypes:["raw","original"],allowedInText:!0},handler:(s,l)=>{var{parser:c,funcName:d,token:f}=s,g=assertNodeType(l[0],"raw").string,v=l[1];c.settings.strict&&c.settings.reportNonstrict("htmlExtension","HTML extension is disabled on strict mode");var b,$={};switch(d){case"\\htmlClass":$.class=g,b={command:"\\htmlClass",class:g};break;case"\\htmlId":$.id=g,b={command:"\\htmlId",id:g};break;case"\\htmlStyle":$.style=g,b={command:"\\htmlStyle",style:g};break;case"\\htmlData":{for(var y=g.split(","),x=0;x<y.length;x++){var C=y[x].split("=");if(C.length!==2)throw new ParseError("Error parsing key-value for \\htmlData");$["data-"+C[0].trim()]=C[1].trim()}b={command:"\\htmlData",attributes:$};break}default:throw new Error("Unrecognized html command")}return c.settings.isTrusted(b)?{type:"html",mode:c.mode,attributes:$,body:ordargument(v)}:c.formatUnsupportedCmd(d)},htmlBuilder:(s,l)=>{var c=buildExpression$1(s.body,l,!1),d=["enclosing"];s.attributes.class&&d.push(...s.attributes.class.trim().split(/\s+/));var f=buildCommon.makeSpan(d,c,l);for(var g in s.attributes)g!=="class"&&s.attributes.hasOwnProperty(g)&&f.setAttribute(g,s.attributes[g]);return f},mathmlBuilder:(s,l)=>buildExpressionRow(s.body,l)});defineFunction({type:"htmlmathml",names:["\\html@mathml"],props:{numArgs:2,allowedInText:!0},handler:(s,l)=>{var{parser:c}=s;return{type:"htmlmathml",mode:c.mode,html:ordargument(l[0]),mathml:ordargument(l[1])}},htmlBuilder:(s,l)=>{var c=buildExpression$1(s.html,l,!1);return buildCommon.makeFragment(c)},mathmlBuilder:(s,l)=>buildExpressionRow(s.mathml,l)});var sizeData=function s(l){if(/^[-+]? *(\d+(\.\d*)?|\.\d+)$/.test(l))return{number:+l,unit:"bp"};var c=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(l);if(!c)throw new ParseError("Invalid size: '"+l+"' in \\includegraphics");var d={number:+(c[1]+c[2]),unit:c[3]};if(!validUnit(d))throw new ParseError("Invalid unit: '"+d.unit+"' in \\includegraphics.");return d};defineFunction({type:"includegraphics",names:["\\includegraphics"],props:{numArgs:1,numOptionalArgs:1,argTypes:["raw","url"],allowedInText:!1},handler:(s,l,c)=>{var{parser:d}=s,f={number:0,unit:"em"},g={number:.9,unit:"em"},v={number:0,unit:"em"},b="";if(c[0])for(var $=assertNodeType(c[0],"raw").string,y=$.split(","),x=0;x<y.length;x++){var C=y[x].split("=");if(C.length===2){var E=C[1].trim();switch(C[0].trim()){case"alt":b=E;break;case"width":f=sizeData(E);break;case"height":g=sizeData(E);break;case"totalheight":v=sizeData(E);break;default:throw new ParseError("Invalid key: '"+C[0]+"' in \\includegraphics.")}}}var N=assertNodeType(l[0],"url").url;return b===""&&(b=N,b=b.replace(/^.*[\\/]/,""),b=b.substring(0,b.lastIndexOf("."))),d.settings.isTrusted({command:"\\includegraphics",url:N})?{type:"includegraphics",mode:d.mode,alt:b,width:f,height:g,totalheight:v,src:N}:d.formatUnsupportedCmd("\\includegraphics")},htmlBuilder:(s,l)=>{var c=calculateSize(s.height,l),d=0;s.totalheight.number>0&&(d=calculateSize(s.totalheight,l)-c);var f=0;s.width.number>0&&(f=calculateSize(s.width,l));var g={height:makeEm(c+d)};f>0&&(g.width=makeEm(f)),d>0&&(g.verticalAlign=makeEm(-d));var v=new Img(s.src,s.alt,g);return v.height=c,v.depth=d,v},mathmlBuilder:(s,l)=>{var c=new mathMLTree.MathNode("mglyph",[]);c.setAttribute("alt",s.alt);var d=calculateSize(s.height,l),f=0;if(s.totalheight.number>0&&(f=calculateSize(s.totalheight,l)-d,c.setAttribute("valign",makeEm(-f))),c.setAttribute("height",makeEm(d+f)),s.width.number>0){var g=calculateSize(s.width,l);c.setAttribute("width",makeEm(g))}return c.setAttribute("src",s.src),c}});defineFunction({type:"kern",names:["\\kern","\\mkern","\\hskip","\\mskip"],props:{numArgs:1,argTypes:["size"],primitive:!0,allowedInText:!0},handler(s,l){var{parser:c,funcName:d}=s,f=assertNodeType(l[0],"size");if(c.settings.strict){var g=d[1]==="m",v=f.value.unit==="mu";g?(v||c.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+d+" supports only mu units, "+("not "+f.value.unit+" units")),c.mode!=="math"&&c.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+d+" works only in math mode")):v&&c.settings.reportNonstrict("mathVsTextUnits","LaTeX's "+d+" doesn't support mu units")}return{type:"kern",mode:c.mode,dimension:f.value}},htmlBuilder(s,l){return buildCommon.makeGlue(s.dimension,l)},mathmlBuilder(s,l){var c=calculateSize(s.dimension,l);return new mathMLTree.SpaceNode(c)}});defineFunction({type:"lap",names:["\\mathllap","\\mathrlap","\\mathclap"],props:{numArgs:1,allowedInText:!0},handler:(s,l)=>{var{parser:c,funcName:d}=s,f=l[0];return{type:"lap",mode:c.mode,alignment:d.slice(5),body:f}},htmlBuilder:(s,l)=>{var c;s.alignment==="clap"?(c=buildCommon.makeSpan([],[buildGroup$1(s.body,l)]),c=buildCommon.makeSpan(["inner"],[c],l)):c=buildCommon.makeSpan(["inner"],[buildGroup$1(s.body,l)]);var d=buildCommon.makeSpan(["fix"],[]),f=buildCommon.makeSpan([s.alignment],[c,d],l),g=buildCommon.makeSpan(["strut"]);return g.style.height=makeEm(f.height+f.depth),f.depth&&(g.style.verticalAlign=makeEm(-f.depth)),f.children.unshift(g),f=buildCommon.makeSpan(["thinbox"],[f],l),buildCommon.makeSpan(["mord","vbox"],[f],l)},mathmlBuilder:(s,l)=>{var c=new mathMLTree.MathNode("mpadded",[buildGroup(s.body,l)]);if(s.alignment!=="rlap"){var d=s.alignment==="llap"?"-1":"-0.5";c.setAttribute("lspace",d+"width")}return c.setAttribute("width","0px"),c}});defineFunction({type:"styling",names:["\\(","$"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(s,l){var{funcName:c,parser:d}=s,f=d.mode;d.switchMode("math");var g=c==="\\("?"\\)":"$",v=d.parseExpression(!1,g);return d.expect(g),d.switchMode(f),{type:"styling",mode:d.mode,style:"text",body:v}}});defineFunction({type:"text",names:["\\)","\\]"],props:{numArgs:0,allowedInText:!0,allowedInMath:!1},handler(s,l){throw new ParseError("Mismatched "+s.funcName)}});var chooseMathStyle=(s,l)=>{switch(l.style.size){case Style$1.DISPLAY.size:return s.display;case Style$1.TEXT.size:return s.text;case Style$1.SCRIPT.size:return s.script;case Style$1.SCRIPTSCRIPT.size:return s.scriptscript;default:return s.text}};defineFunction({type:"mathchoice",names:["\\mathchoice"],props:{numArgs:4,primitive:!0},handler:(s,l)=>{var{parser:c}=s;return{type:"mathchoice",mode:c.mode,display:ordargument(l[0]),text:ordargument(l[1]),script:ordargument(l[2]),scriptscript:ordargument(l[3])}},htmlBuilder:(s,l)=>{var c=chooseMathStyle(s,l),d=buildExpression$1(c,l,!1);return buildCommon.makeFragment(d)},mathmlBuilder:(s,l)=>{var c=chooseMathStyle(s,l);return buildExpressionRow(c,l)}});var assembleSupSub=(s,l,c,d,f,g,v)=>{s=buildCommon.makeSpan([],[s]);var b=c&&utils$3.isCharacterBox(c),$,y;if(l){var x=buildGroup$1(l,d.havingStyle(f.sup()),d);y={elem:x,kern:Math.max(d.fontMetrics().bigOpSpacing1,d.fontMetrics().bigOpSpacing3-x.depth)}}if(c){var C=buildGroup$1(c,d.havingStyle(f.sub()),d);$={elem:C,kern:Math.max(d.fontMetrics().bigOpSpacing2,d.fontMetrics().bigOpSpacing4-C.height)}}var E;if(y&&$){var N=d.fontMetrics().bigOpSpacing5+$.elem.height+$.elem.depth+$.kern+s.depth+v;E=buildCommon.makeVList({positionType:"bottom",positionData:N,children:[{type:"kern",size:d.fontMetrics().bigOpSpacing5},{type:"elem",elem:$.elem,marginLeft:makeEm(-g)},{type:"kern",size:$.kern},{type:"elem",elem:s},{type:"kern",size:y.kern},{type:"elem",elem:y.elem,marginLeft:makeEm(g)},{type:"kern",size:d.fontMetrics().bigOpSpacing5}]},d)}else if($){var W=s.height-v;E=buildCommon.makeVList({positionType:"top",positionData:W,children:[{type:"kern",size:d.fontMetrics().bigOpSpacing5},{type:"elem",elem:$.elem,marginLeft:makeEm(-g)},{type:"kern",size:$.kern},{type:"elem",elem:s}]},d)}else if(y){var q=s.depth+v;E=buildCommon.makeVList({positionType:"bottom",positionData:q,children:[{type:"elem",elem:s},{type:"kern",size:y.kern},{type:"elem",elem:y.elem,marginLeft:makeEm(g)},{type:"kern",size:d.fontMetrics().bigOpSpacing5}]},d)}else return s;var Y=[E];if($&&g!==0&&!b){var re=buildCommon.makeSpan(["mspace"],[],d);re.style.marginRight=makeEm(g),Y.unshift(re)}return buildCommon.makeSpan(["mop","op-limits"],Y,d)},noSuccessor=["\\smallint"],htmlBuilder$2=(s,l)=>{var c,d,f=!1,g;s.type==="supsub"?(c=s.sup,d=s.sub,g=assertNodeType(s.base,"op"),f=!0):g=assertNodeType(s,"op");var v=l.style,b=!1;v.size===Style$1.DISPLAY.size&&g.symbol&&!utils$3.contains(noSuccessor,g.name)&&(b=!0);var $;if(g.symbol){var y=b?"Size2-Regular":"Size1-Regular",x="";if((g.name==="\\oiint"||g.name==="\\oiiint")&&(x=g.name.slice(1),g.name=x==="oiint"?"\\iint":"\\iiint"),$=buildCommon.makeSymbol(g.name,y,"math",l,["mop","op-symbol",b?"large-op":"small-op"]),x.length>0){var C=$.italic,E=buildCommon.staticSvg(x+"Size"+(b?"2":"1"),l);$=buildCommon.makeVList({positionType:"individualShift",children:[{type:"elem",elem:$,shift:0},{type:"elem",elem:E,shift:b?.08:0}]},l),g.name="\\"+x,$.classes.unshift("mop"),$.italic=C}}else if(g.body){var N=buildExpression$1(g.body,l,!0);N.length===1&&N[0]instanceof SymbolNode?($=N[0],$.classes[0]="mop"):$=buildCommon.makeSpan(["mop"],N,l)}else{for(var W=[],q=1;q<g.name.length;q++)W.push(buildCommon.mathsym(g.name[q],g.mode,l));$=buildCommon.makeSpan(["mop"],W,l)}var Y=0,re=0;return($ instanceof SymbolNode||g.name==="\\oiint"||g.name==="\\oiiint")&&!g.suppressBaseShift&&(Y=($.height-$.depth)/2-l.fontMetrics().axisHeight,re=$.italic),f?assembleSupSub($,c,d,l,v,re,Y):(Y&&($.style.position="relative",$.style.top=makeEm(Y)),$)},mathmlBuilder$1=(s,l)=>{var c;if(s.symbol)c=new MathNode("mo",[makeText(s.name,s.mode)]),utils$3.contains(noSuccessor,s.name)&&c.setAttribute("largeop","false");else if(s.body)c=new MathNode("mo",buildExpression(s.body,l));else{c=new MathNode("mi",[new TextNode(s.name.slice(1))]);var d=new MathNode("mo",[makeText("","text")]);s.parentIsSupSub?c=new MathNode("mrow",[c,d]):c=newDocumentFragment([c,d])}return c},singleCharBigOps={"":"\\prod","":"\\coprod","":"\\sum","":"\\bigwedge","":"\\bigvee","":"\\bigcap","":"\\bigcup","":"\\bigodot","":"\\bigoplus","":"\\bigotimes","":"\\biguplus","":"\\bigsqcup"};defineFunction({type:"op",names:["\\coprod","\\bigvee","\\bigwedge","\\biguplus","\\bigcap","\\bigcup","\\intop","\\prod","\\sum","\\bigotimes","\\bigoplus","\\bigodot","\\bigsqcup","\\smallint","","","","","","","","","","","",""],props:{numArgs:0},handler:(s,l)=>{var{parser:c,funcName:d}=s,f=d;return f.length===1&&(f=singleCharBigOps[f]),{type:"op",mode:c.mode,limits:!0,parentIsSupSub:!1,symbol:!0,name:f}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\mathop"],props:{numArgs:1,primitive:!0},handler:(s,l)=>{var{parser:c}=s,d=l[0];return{type:"op",mode:c.mode,limits:!1,parentIsSupSub:!1,symbol:!1,body:ordargument(d)}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var singleCharIntegrals={"":"\\int","":"\\iint","":"\\iiint","":"\\oint","":"\\oiint","":"\\oiiint"};defineFunction({type:"op",names:["\\arcsin","\\arccos","\\arctan","\\arctg","\\arcctg","\\arg","\\ch","\\cos","\\cosec","\\cosh","\\cot","\\cotg","\\coth","\\csc","\\ctg","\\cth","\\deg","\\dim","\\exp","\\hom","\\ker","\\lg","\\ln","\\log","\\sec","\\sin","\\sinh","\\sh","\\tan","\\tanh","\\tg","\\th"],props:{numArgs:0},handler(s){var{parser:l,funcName:c}=s;return{type:"op",mode:l.mode,limits:!1,parentIsSupSub:!1,symbol:!1,name:c}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\det","\\gcd","\\inf","\\lim","\\max","\\min","\\Pr","\\sup"],props:{numArgs:0},handler(s){var{parser:l,funcName:c}=s;return{type:"op",mode:l.mode,limits:!0,parentIsSupSub:!1,symbol:!1,name:c}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});defineFunction({type:"op",names:["\\int","\\iint","\\iiint","\\oint","\\oiint","\\oiiint","","","","","",""],props:{numArgs:0},handler(s){var{parser:l,funcName:c}=s,d=c;return d.length===1&&(d=singleCharIntegrals[d]),{type:"op",mode:l.mode,limits:!1,parentIsSupSub:!1,symbol:!0,name:d}},htmlBuilder:htmlBuilder$2,mathmlBuilder:mathmlBuilder$1});var htmlBuilder$1=(s,l)=>{var c,d,f=!1,g;s.type==="supsub"?(c=s.sup,d=s.sub,g=assertNodeType(s.base,"operatorname"),f=!0):g=assertNodeType(s,"operatorname");var v;if(g.body.length>0){for(var b=g.body.map(C=>{var E=C.text;return typeof E=="string"?{type:"textord",mode:C.mode,text:E}:C}),$=buildExpression$1(b,l.withFont("mathrm"),!0),y=0;y<$.length;y++){var x=$[y];x instanceof SymbolNode&&(x.text=x.text.replace(/\u2212/,"-").replace(/\u2217/,"*"))}v=buildCommon.makeSpan(["mop"],$,l)}else v=buildCommon.makeSpan(["mop"],[],l);return f?assembleSupSub(v,c,d,l,l.style,0,0):v},mathmlBuilder=(s,l)=>{for(var c=buildExpression(s.body,l.withFont("mathrm")),d=!0,f=0;f<c.length;f++){var g=c[f];if(!(g instanceof mathMLTree.SpaceNode))if(g instanceof mathMLTree.MathNode)switch(g.type){case"mi":case"mn":case"ms":case"mspace":case"mtext":break;case"mo":{var v=g.children[0];g.children.length===1&&v instanceof mathMLTree.TextNode?v.text=v.text.replace(/\u2212/,"-").replace(/\u2217/,"*"):d=!1;break}default:d=!1}else d=!1}if(d){var b=c.map(x=>x.toText()).join("");c=[new mathMLTree.TextNode(b)]}var $=new mathMLTree.MathNode("mi",c);$.setAttribute("mathvariant","normal");var y=new mathMLTree.MathNode("mo",[makeText("","text")]);return s.parentIsSupSub?new mathMLTree.MathNode("mrow",[$,y]):mathMLTree.newDocumentFragment([$,y])};defineFunction({type:"operatorname",names:["\\operatorname@","\\operatornamewithlimits"],props:{numArgs:1},handler:(s,l)=>{var{parser:c,funcName:d}=s,f=l[0];return{type:"operatorname",mode:c.mode,body:ordargument(f),alwaysHandleSupSub:d==="\\operatornamewithlimits",limits:!1,parentIsSupSub:!1}},htmlBuilder:htmlBuilder$1,mathmlBuilder});defineMacro("\\operatorname","\\@ifstar\\operatornamewithlimits\\operatorname@");defineFunctionBuilders({type:"ordgroup",htmlBuilder(s,l){return s.semisimple?buildCommon.makeFragment(buildExpression$1(s.body,l,!1)):buildCommon.makeSpan(["mord"],buildExpression$1(s.body,l,!0),l)},mathmlBuilder(s,l){return buildExpressionRow(s.body,l,!0)}});defineFunction({type:"overline",names:["\\overline"],props:{numArgs:1},handler(s,l){var{parser:c}=s,d=l[0];return{type:"overline",mode:c.mode,body:d}},htmlBuilder(s,l){var c=buildGroup$1(s.body,l.havingCrampedStyle()),d=buildCommon.makeLineSpan("overline-line",l),f=l.fontMetrics().defaultRuleThickness,g=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c},{type:"kern",size:3*f},{type:"elem",elem:d},{type:"kern",size:f}]},l);return buildCommon.makeSpan(["mord","overline"],[g],l)},mathmlBuilder(s,l){var c=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);c.setAttribute("stretchy","true");var d=new mathMLTree.MathNode("mover",[buildGroup(s.body,l),c]);return d.setAttribute("accent","true"),d}});defineFunction({type:"phantom",names:["\\phantom"],props:{numArgs:1,allowedInText:!0},handler:(s,l)=>{var{parser:c}=s,d=l[0];return{type:"phantom",mode:c.mode,body:ordargument(d)}},htmlBuilder:(s,l)=>{var c=buildExpression$1(s.body,l.withPhantom(),!1);return buildCommon.makeFragment(c)},mathmlBuilder:(s,l)=>{var c=buildExpression(s.body,l);return new mathMLTree.MathNode("mphantom",c)}});defineFunction({type:"hphantom",names:["\\hphantom"],props:{numArgs:1,allowedInText:!0},handler:(s,l)=>{var{parser:c}=s,d=l[0];return{type:"hphantom",mode:c.mode,body:d}},htmlBuilder:(s,l)=>{var c=buildCommon.makeSpan([],[buildGroup$1(s.body,l.withPhantom())]);if(c.height=0,c.depth=0,c.children)for(var d=0;d<c.children.length;d++)c.children[d].height=0,c.children[d].depth=0;return c=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c}]},l),buildCommon.makeSpan(["mord"],[c],l)},mathmlBuilder:(s,l)=>{var c=buildExpression(ordargument(s.body),l),d=new mathMLTree.MathNode("mphantom",c),f=new mathMLTree.MathNode("mpadded",[d]);return f.setAttribute("height","0px"),f.setAttribute("depth","0px"),f}});defineFunction({type:"vphantom",names:["\\vphantom"],props:{numArgs:1,allowedInText:!0},handler:(s,l)=>{var{parser:c}=s,d=l[0];return{type:"vphantom",mode:c.mode,body:d}},htmlBuilder:(s,l)=>{var c=buildCommon.makeSpan(["inner"],[buildGroup$1(s.body,l.withPhantom())]),d=buildCommon.makeSpan(["fix"],[]);return buildCommon.makeSpan(["mord","rlap"],[c,d],l)},mathmlBuilder:(s,l)=>{var c=buildExpression(ordargument(s.body),l),d=new mathMLTree.MathNode("mphantom",c),f=new mathMLTree.MathNode("mpadded",[d]);return f.setAttribute("width","0px"),f}});defineFunction({type:"raisebox",names:["\\raisebox"],props:{numArgs:2,argTypes:["size","hbox"],allowedInText:!0},handler(s,l){var{parser:c}=s,d=assertNodeType(l[0],"size").value,f=l[1];return{type:"raisebox",mode:c.mode,dy:d,body:f}},htmlBuilder(s,l){var c=buildGroup$1(s.body,l),d=calculateSize(s.dy,l);return buildCommon.makeVList({positionType:"shift",positionData:-d,children:[{type:"elem",elem:c}]},l)},mathmlBuilder(s,l){var c=new mathMLTree.MathNode("mpadded",[buildGroup(s.body,l)]),d=s.dy.number+s.dy.unit;return c.setAttribute("voffset",d),c}});defineFunction({type:"internal",names:["\\relax"],props:{numArgs:0,allowedInText:!0},handler(s){var{parser:l}=s;return{type:"internal",mode:l.mode}}});defineFunction({type:"rule",names:["\\rule"],props:{numArgs:2,numOptionalArgs:1,argTypes:["size","size","size"]},handler(s,l,c){var{parser:d}=s,f=c[0],g=assertNodeType(l[0],"size"),v=assertNodeType(l[1],"size");return{type:"rule",mode:d.mode,shift:f&&assertNodeType(f,"size").value,width:g.value,height:v.value}},htmlBuilder(s,l){var c=buildCommon.makeSpan(["mord","rule"],[],l),d=calculateSize(s.width,l),f=calculateSize(s.height,l),g=s.shift?calculateSize(s.shift,l):0;return c.style.borderRightWidth=makeEm(d),c.style.borderTopWidth=makeEm(f),c.style.bottom=makeEm(g),c.width=d,c.height=f+g,c.depth=-g,c.maxFontSize=f*1.125*l.sizeMultiplier,c},mathmlBuilder(s,l){var c=calculateSize(s.width,l),d=calculateSize(s.height,l),f=s.shift?calculateSize(s.shift,l):0,g=l.color&&l.getColor()||"black",v=new mathMLTree.MathNode("mspace");v.setAttribute("mathbackground",g),v.setAttribute("width",makeEm(c)),v.setAttribute("height",makeEm(d));var b=new mathMLTree.MathNode("mpadded",[v]);return f>=0?b.setAttribute("height",makeEm(f)):(b.setAttribute("height",makeEm(f)),b.setAttribute("depth",makeEm(-f))),b.setAttribute("voffset",makeEm(f)),b}});function sizingGroup(s,l,c){for(var d=buildExpression$1(s,l,!1),f=l.sizeMultiplier/c.sizeMultiplier,g=0;g<d.length;g++){var v=d[g].classes.indexOf("sizing");v<0?Array.prototype.push.apply(d[g].classes,l.sizingClasses(c)):d[g].classes[v+1]==="reset-size"+l.size&&(d[g].classes[v+1]="reset-size"+c.size),d[g].height*=f,d[g].depth*=f}return buildCommon.makeFragment(d)}var sizeFuncs=["\\tiny","\\sixptsize","\\scriptsize","\\footnotesize","\\small","\\normalsize","\\large","\\Large","\\LARGE","\\huge","\\Huge"],htmlBuilder=(s,l)=>{var c=l.havingSize(s.size);return sizingGroup(s.body,c,l)};defineFunction({type:"sizing",names:sizeFuncs,props:{numArgs:0,allowedInText:!0},handler:(s,l)=>{var{breakOnTokenText:c,funcName:d,parser:f}=s,g=f.parseExpression(!1,c);return{type:"sizing",mode:f.mode,size:sizeFuncs.indexOf(d)+1,body:g}},htmlBuilder,mathmlBuilder:(s,l)=>{var c=l.havingSize(s.size),d=buildExpression(s.body,c),f=new mathMLTree.MathNode("mstyle",d);return f.setAttribute("mathsize",makeEm(c.sizeMultiplier)),f}});defineFunction({type:"smash",names:["\\smash"],props:{numArgs:1,numOptionalArgs:1,allowedInText:!0},handler:(s,l,c)=>{var{parser:d}=s,f=!1,g=!1,v=c[0]&&assertNodeType(c[0],"ordgroup");if(v)for(var b="",$=0;$<v.body.length;++$){var y=v.body[$];if(b=y.text,b==="t")f=!0;else if(b==="b")g=!0;else{f=!1,g=!1;break}}else f=!0,g=!0;var x=l[0];return{type:"smash",mode:d.mode,body:x,smashHeight:f,smashDepth:g}},htmlBuilder:(s,l)=>{var c=buildCommon.makeSpan([],[buildGroup$1(s.body,l)]);if(!s.smashHeight&&!s.smashDepth)return c;if(s.smashHeight&&(c.height=0,c.children))for(var d=0;d<c.children.length;d++)c.children[d].height=0;if(s.smashDepth&&(c.depth=0,c.children))for(var f=0;f<c.children.length;f++)c.children[f].depth=0;var g=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c}]},l);return buildCommon.makeSpan(["mord"],[g],l)},mathmlBuilder:(s,l)=>{var c=new mathMLTree.MathNode("mpadded",[buildGroup(s.body,l)]);return s.smashHeight&&c.setAttribute("height","0px"),s.smashDepth&&c.setAttribute("depth","0px"),c}});defineFunction({type:"sqrt",names:["\\sqrt"],props:{numArgs:1,numOptionalArgs:1},handler(s,l,c){var{parser:d}=s,f=c[0],g=l[0];return{type:"sqrt",mode:d.mode,body:g,index:f}},htmlBuilder(s,l){var c=buildGroup$1(s.body,l.havingCrampedStyle());c.height===0&&(c.height=l.fontMetrics().xHeight),c=buildCommon.wrapFragment(c,l);var d=l.fontMetrics(),f=d.defaultRuleThickness,g=f;l.style.id<Style$1.TEXT.id&&(g=l.fontMetrics().xHeight);var v=f+g/4,b=c.height+c.depth+v+f,{span:$,ruleWidth:y,advanceWidth:x}=delimiter.sqrtImage(b,l),C=$.height-y;C>c.height+c.depth+v&&(v=(v+C-c.height-c.depth)/2);var E=$.height-c.height-v-y;c.style.paddingLeft=makeEm(x);var N=buildCommon.makeVList({positionType:"firstBaseline",children:[{type:"elem",elem:c,wrapperClasses:["svg-align"]},{type:"kern",size:-(c.height+E)},{type:"elem",elem:$},{type:"kern",size:y}]},l);if(s.index){var W=l.havingStyle(Style$1.SCRIPTSCRIPT),q=buildGroup$1(s.index,W,l),Y=.6*(N.height-N.depth),re=buildCommon.makeVList({positionType:"shift",positionData:-Y,children:[{type:"elem",elem:q}]},l),se=buildCommon.makeSpan(["root"],[re]);return buildCommon.makeSpan(["mord","sqrt"],[se,N],l)}else return buildCommon.makeSpan(["mord","sqrt"],[N],l)},mathmlBuilder(s,l){var{body:c,index:d}=s;return d?new mathMLTree.MathNode("mroot",[buildGroup(c,l),buildGroup(d,l)]):new mathMLTree.MathNode("msqrt",[buildGroup(c,l)])}});var styleMap={display:Style$1.DISPLAY,text:Style$1.TEXT,script:Style$1.SCRIPT,scriptscript:Style$1.SCRIPTSCRIPT};defineFunction({type:"styling",names:["\\displaystyle","\\textstyle","\\scriptstyle","\\scriptscriptstyle"],props:{numArgs:0,allowedInText:!0,primitive:!0},handler(s,l){var{breakOnTokenText:c,funcName:d,parser:f}=s,g=f.parseExpression(!0,c),v=d.slice(1,d.length-5);return{type:"styling",mode:f.mode,style:v,body:g}},htmlBuilder(s,l){var c=styleMap[s.style],d=l.havingStyle(c).withFont("");return sizingGroup(s.body,d,l)},mathmlBuilder(s,l){var c=styleMap[s.style],d=l.havingStyle(c),f=buildExpression(s.body,d),g=new mathMLTree.MathNode("mstyle",f),v={display:["0","true"],text:["0","false"],script:["1","false"],scriptscript:["2","false"]},b=v[s.style];return g.setAttribute("scriptlevel",b[0]),g.setAttribute("displaystyle",b[1]),g}});var htmlBuilderDelegate=function s(l,c){var d=l.base;if(d)if(d.type==="op"){var f=d.limits&&(c.style.size===Style$1.DISPLAY.size||d.alwaysHandleSupSub);return f?htmlBuilder$2:null}else if(d.type==="operatorname"){var g=d.alwaysHandleSupSub&&(c.style.size===Style$1.DISPLAY.size||d.limits);return g?htmlBuilder$1:null}else{if(d.type==="accent")return utils$3.isCharacterBox(d.base)?htmlBuilder$a:null;if(d.type==="horizBrace"){var v=!l.sub;return v===d.isOver?htmlBuilder$3:null}else return null}else return null};defineFunctionBuilders({type:"supsub",htmlBuilder(s,l){var c=htmlBuilderDelegate(s,l);if(c)return c(s,l);var{base:d,sup:f,sub:g}=s,v=buildGroup$1(d,l),b,$,y=l.fontMetrics(),x=0,C=0,E=d&&utils$3.isCharacterBox(d);if(f){var N=l.havingStyle(l.style.sup());b=buildGroup$1(f,N,l),E||(x=v.height-N.fontMetrics().supDrop*N.sizeMultiplier/l.sizeMultiplier)}if(g){var W=l.havingStyle(l.style.sub());$=buildGroup$1(g,W,l),E||(C=v.depth+W.fontMetrics().subDrop*W.sizeMultiplier/l.sizeMultiplier)}var q;l.style===Style$1.DISPLAY?q=y.sup1:l.style.cramped?q=y.sup3:q=y.sup2;var Y=l.sizeMultiplier,re=makeEm(.5/y.ptPerEm/Y),se=null;if($){var de=s.base&&s.base.type==="op"&&s.base.name&&(s.base.name==="\\oiint"||s.base.name==="\\oiiint");(v instanceof SymbolNode||de)&&(se=makeEm(-v.italic))}var he;if(b&&$){x=Math.max(x,q,b.depth+.25*y.xHeight),C=Math.max(C,y.sub2);var ge=y.defaultRuleThickness,Se=4*ge;if(x-b.depth-($.height-C)<Se){C=Se-(x-b.depth)+$.height;var Ae=.8*y.xHeight-(x-b.depth);Ae>0&&(x+=Ae,C-=Ae)}var Re=[{type:"elem",elem:$,shift:C,marginRight:re,marginLeft:se},{type:"elem",elem:b,shift:-x,marginRight:re}];he=buildCommon.makeVList({positionType:"individualShift",children:Re},l)}else if($){C=Math.max(C,y.sub1,$.height-.8*y.xHeight);var Be=[{type:"elem",elem:$,marginLeft:se,marginRight:re}];he=buildCommon.makeVList({positionType:"shift",positionData:C,children:Be},l)}else if(b)x=Math.max(x,q,b.depth+.25*y.xHeight),he=buildCommon.makeVList({positionType:"shift",positionData:-x,children:[{type:"elem",elem:b,marginRight:re}]},l);else throw new Error("supsub must have either sup or sub.");var Ke=getTypeOfDomTree(v,"right")||"mord";return buildCommon.makeSpan([Ke],[v,buildCommon.makeSpan(["msupsub"],[he])],l)},mathmlBuilder(s,l){var c=!1,d,f;s.base&&s.base.type==="horizBrace"&&(f=!!s.sup,f===s.base.isOver&&(c=!0,d=s.base.isOver)),s.base&&(s.base.type==="op"||s.base.type==="operatorname")&&(s.base.parentIsSupSub=!0);var g=[buildGroup(s.base,l)];s.sub&&g.push(buildGroup(s.sub,l)),s.sup&&g.push(buildGroup(s.sup,l));var v;if(c)v=d?"mover":"munder";else if(s.sub)if(s.sup){var y=s.base;y&&y.type==="op"&&y.limits&&l.style===Style$1.DISPLAY||y&&y.type==="operatorname"&&y.alwaysHandleSupSub&&(l.style===Style$1.DISPLAY||y.limits)?v="munderover":v="msubsup"}else{var $=s.base;$&&$.type==="op"&&$.limits&&(l.style===Style$1.DISPLAY||$.alwaysHandleSupSub)||$&&$.type==="operatorname"&&$.alwaysHandleSupSub&&($.limits||l.style===Style$1.DISPLAY)?v="munder":v="msub"}else{var b=s.base;b&&b.type==="op"&&b.limits&&(l.style===Style$1.DISPLAY||b.alwaysHandleSupSub)||b&&b.type==="operatorname"&&b.alwaysHandleSupSub&&(b.limits||l.style===Style$1.DISPLAY)?v="mover":v="msup"}return new mathMLTree.MathNode(v,g)}});defineFunctionBuilders({type:"atom",htmlBuilder(s,l){return buildCommon.mathsym(s.text,s.mode,l,["m"+s.family])},mathmlBuilder(s,l){var c=new mathMLTree.MathNode("mo",[makeText(s.text,s.mode)]);if(s.family==="bin"){var d=getVariant(s,l);d==="bold-italic"&&c.setAttribute("mathvariant",d)}else s.family==="punct"?c.setAttribute("separator","true"):(s.family==="open"||s.family==="close")&&c.setAttribute("stretchy","false");return c}});var defaultVariant={mi:"italic",mn:"normal",mtext:"normal"};defineFunctionBuilders({type:"mathord",htmlBuilder(s,l){return buildCommon.makeOrd(s,l,"mathord")},mathmlBuilder(s,l){var c=new mathMLTree.MathNode("mi",[makeText(s.text,s.mode,l)]),d=getVariant(s,l)||"italic";return d!==defaultVariant[c.type]&&c.setAttribute("mathvariant",d),c}});defineFunctionBuilders({type:"textord",htmlBuilder(s,l){return buildCommon.makeOrd(s,l,"textord")},mathmlBuilder(s,l){var c=makeText(s.text,s.mode,l),d=getVariant(s,l)||"normal",f;return s.mode==="text"?f=new mathMLTree.MathNode("mtext",[c]):/[0-9]/.test(s.text)?f=new mathMLTree.MathNode("mn",[c]):s.text==="\\prime"?f=new mathMLTree.MathNode("mo",[c]):f=new mathMLTree.MathNode("mi",[c]),d!==defaultVariant[f.type]&&f.setAttribute("mathvariant",d),f}});var cssSpace={"\\nobreak":"nobreak","\\allowbreak":"allowbreak"},regularSpace={" ":{},"\\ ":{},"~":{className:"nobreak"},"\\space":{},"\\nobreakspace":{className:"nobreak"}};defineFunctionBuilders({type:"spacing",htmlBuilder(s,l){if(regularSpace.hasOwnProperty(s.text)){var c=regularSpace[s.text].className||"";if(s.mode==="text"){var d=buildCommon.makeOrd(s,l,"textord");return d.classes.push(c),d}else return buildCommon.makeSpan(["mspace",c],[buildCommon.mathsym(s.text,s.mode,l)],l)}else{if(cssSpace.hasOwnProperty(s.text))return buildCommon.makeSpan(["mspace",cssSpace[s.text]],[],l);throw new ParseError('Unknown type of space "'+s.text+'"')}},mathmlBuilder(s,l){var c;if(regularSpace.hasOwnProperty(s.text))c=new mathMLTree.MathNode("mtext",[new mathMLTree.TextNode("")]);else{if(cssSpace.hasOwnProperty(s.text))return new mathMLTree.MathNode("mspace");throw new ParseError('Unknown type of space "'+s.text+'"')}return c}});var pad=()=>{var s=new mathMLTree.MathNode("mtd",[]);return s.setAttribute("width","50%"),s};defineFunctionBuilders({type:"tag",mathmlBuilder(s,l){var c=new mathMLTree.MathNode("mtable",[new mathMLTree.MathNode("mtr",[pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(s.body,l)]),pad(),new mathMLTree.MathNode("mtd",[buildExpressionRow(s.tag,l)])])]);return c.setAttribute("width","100%"),c}});var textFontFamilies={"\\text":void 0,"\\textrm":"textrm","\\textsf":"textsf","\\texttt":"texttt","\\textnormal":"textrm"},textFontWeights={"\\textbf":"textbf","\\textmd":"textmd"},textFontShapes={"\\textit":"textit","\\textup":"textup"},optionsWithFont=(s,l)=>{var c=s.font;if(c){if(textFontFamilies[c])return l.withTextFontFamily(textFontFamilies[c]);if(textFontWeights[c])return l.withTextFontWeight(textFontWeights[c]);if(c==="\\emph")return l.fontShape==="textit"?l.withTextFontShape("textup"):l.withTextFontShape("textit")}else return l;return l.withTextFontShape(textFontShapes[c])};defineFunction({type:"text",names:["\\text","\\textrm","\\textsf","\\texttt","\\textnormal","\\textbf","\\textmd","\\textit","\\textup","\\emph"],props:{numArgs:1,argTypes:["text"],allowedInArgument:!0,allowedInText:!0},handler(s,l){var{parser:c,funcName:d}=s,f=l[0];return{type:"text",mode:c.mode,body:ordargument(f),font:d}},htmlBuilder(s,l){var c=optionsWithFont(s,l),d=buildExpression$1(s.body,c,!0);return buildCommon.makeSpan(["mord","text"],d,c)},mathmlBuilder(s,l){var c=optionsWithFont(s,l);return buildExpressionRow(s.body,c)}});defineFunction({type:"underline",names:["\\underline"],props:{numArgs:1,allowedInText:!0},handler(s,l){var{parser:c}=s;return{type:"underline",mode:c.mode,body:l[0]}},htmlBuilder(s,l){var c=buildGroup$1(s.body,l),d=buildCommon.makeLineSpan("underline-line",l),f=l.fontMetrics().defaultRuleThickness,g=buildCommon.makeVList({positionType:"top",positionData:c.height,children:[{type:"kern",size:f},{type:"elem",elem:d},{type:"kern",size:3*f},{type:"elem",elem:c}]},l);return buildCommon.makeSpan(["mord","underline"],[g],l)},mathmlBuilder(s,l){var c=new mathMLTree.MathNode("mo",[new mathMLTree.TextNode("")]);c.setAttribute("stretchy","true");var d=new mathMLTree.MathNode("munder",[buildGroup(s.body,l),c]);return d.setAttribute("accentunder","true"),d}});defineFunction({type:"vcenter",names:["\\vcenter"],props:{numArgs:1,argTypes:["original"],allowedInText:!1},handler(s,l){var{parser:c}=s;return{type:"vcenter",mode:c.mode,body:l[0]}},htmlBuilder(s,l){var c=buildGroup$1(s.body,l),d=l.fontMetrics().axisHeight,f=.5*(c.height-d-(c.depth+d));return buildCommon.makeVList({positionType:"shift",positionData:f,children:[{type:"elem",elem:c}]},l)},mathmlBuilder(s,l){return new mathMLTree.MathNode("mpadded",[buildGroup(s.body,l)],["vcenter"])}});defineFunction({type:"verb",names:["\\verb"],props:{numArgs:0,allowedInText:!0},handler(s,l,c){throw new ParseError("\\verb ended by end of line instead of matching delimiter")},htmlBuilder(s,l){for(var c=makeVerb(s),d=[],f=l.havingStyle(l.style.text()),g=0;g<c.length;g++){var v=c[g];v==="~"&&(v="\\textasciitilde"),d.push(buildCommon.makeSymbol(v,"Typewriter-Regular",s.mode,f,["mord","texttt"]))}return buildCommon.makeSpan(["mord","text"].concat(f.sizingClasses(l)),buildCommon.tryCombineChars(d),f)},mathmlBuilder(s,l){var c=new mathMLTree.TextNode(makeVerb(s)),d=new mathMLTree.MathNode("mtext",[c]);return d.setAttribute("mathvariant","monospace"),d}});var makeVerb=s=>s.body.replace(/ /g,s.star?"":""),functions=_functions,spaceRegexString=`[ \r
	]`,controlWordRegexString="\\\\[a-zA-Z@]+",controlSymbolRegexString="\\\\[^\uD800-\uDFFF]",controlWordWhitespaceRegexString="("+controlWordRegexString+")"+spaceRegexString+"*",controlSpaceRegexString=`\\\\(
|[ \r	]+
?)[ \r	]*`,combiningDiacriticalMarkString="[-]",combiningDiacriticalMarksEndRegex=new RegExp(combiningDiacriticalMarkString+"+$"),tokenRegexString="("+spaceRegexString+"+)|"+(controlSpaceRegexString+"|")+"([!-\\[\\]---]"+(combiningDiacriticalMarkString+"*")+"|[\uD800-\uDBFF][\uDC00-\uDFFF]"+(combiningDiacriticalMarkString+"*")+"|\\\\verb\\*([^]).*?\\4|\\\\verb([^*a-zA-Z]).*?\\5"+("|"+controlWordWhitespaceRegexString)+("|"+controlSymbolRegexString+")");class Lexer{constructor(l,c){this.input=void 0,this.settings=void 0,this.tokenRegex=void 0,this.catcodes=void 0,this.input=l,this.settings=c,this.tokenRegex=new RegExp(tokenRegexString,"g"),this.catcodes={"%":14,"~":13}}setCatcode(l,c){this.catcodes[l]=c}lex(){var l=this.input,c=this.tokenRegex.lastIndex;if(c===l.length)return new Token("EOF",new SourceLocation(this,c,c));var d=this.tokenRegex.exec(l);if(d===null||d.index!==c)throw new ParseError("Unexpected character: '"+l[c]+"'",new Token(l[c],new SourceLocation(this,c,c+1)));var f=d[6]||d[3]||(d[2]?"\\ ":" ");if(this.catcodes[f]===14){var g=l.indexOf(`
`,this.tokenRegex.lastIndex);return g===-1?(this.tokenRegex.lastIndex=l.length,this.settings.reportNonstrict("commentAtEnd","% comment has no terminating newline; LaTeX would fail because of commenting the end of math mode (e.g. $)")):this.tokenRegex.lastIndex=g+1,this.lex()}return new Token(f,new SourceLocation(this,c,this.tokenRegex.lastIndex))}}class Namespace{constructor(l,c){l===void 0&&(l={}),c===void 0&&(c={}),this.current=void 0,this.builtins=void 0,this.undefStack=void 0,this.current=c,this.builtins=l,this.undefStack=[]}beginGroup(){this.undefStack.push({})}endGroup(){if(this.undefStack.length===0)throw new ParseError("Unbalanced namespace destruction: attempt to pop global namespace; please report this as a bug");var l=this.undefStack.pop();for(var c in l)l.hasOwnProperty(c)&&(l[c]==null?delete this.current[c]:this.current[c]=l[c])}endGroups(){for(;this.undefStack.length>0;)this.endGroup()}has(l){return this.current.hasOwnProperty(l)||this.builtins.hasOwnProperty(l)}get(l){return this.current.hasOwnProperty(l)?this.current[l]:this.builtins[l]}set(l,c,d){if(d===void 0&&(d=!1),d){for(var f=0;f<this.undefStack.length;f++)delete this.undefStack[f][l];this.undefStack.length>0&&(this.undefStack[this.undefStack.length-1][l]=c)}else{var g=this.undefStack[this.undefStack.length-1];g&&!g.hasOwnProperty(l)&&(g[l]=this.current[l])}c==null?delete this.current[l]:this.current[l]=c}}var macros=_macros;defineMacro("\\noexpand",function(s){var l=s.popToken();return s.isExpandable(l.text)&&(l.noexpand=!0,l.treatAsRelax=!0),{tokens:[l],numArgs:0}});defineMacro("\\expandafter",function(s){var l=s.popToken();return s.expandOnce(!0),{tokens:[l],numArgs:0}});defineMacro("\\@firstoftwo",function(s){var l=s.consumeArgs(2);return{tokens:l[0],numArgs:0}});defineMacro("\\@secondoftwo",function(s){var l=s.consumeArgs(2);return{tokens:l[1],numArgs:0}});defineMacro("\\@ifnextchar",function(s){var l=s.consumeArgs(3);s.consumeSpaces();var c=s.future();return l[0].length===1&&l[0][0].text===c.text?{tokens:l[1],numArgs:0}:{tokens:l[2],numArgs:0}});defineMacro("\\@ifstar","\\@ifnextchar *{\\@firstoftwo{#1}}");defineMacro("\\TextOrMath",function(s){var l=s.consumeArgs(2);return s.mode==="text"?{tokens:l[0],numArgs:0}:{tokens:l[1],numArgs:0}});var digitToNumber={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};defineMacro("\\char",function(s){var l=s.popToken(),c,d="";if(l.text==="'")c=8,l=s.popToken();else if(l.text==='"')c=16,l=s.popToken();else if(l.text==="`")if(l=s.popToken(),l.text[0]==="\\")d=l.text.charCodeAt(1);else{if(l.text==="EOF")throw new ParseError("\\char` missing argument");d=l.text.charCodeAt(0)}else c=10;if(c){if(d=digitToNumber[l.text],d==null||d>=c)throw new ParseError("Invalid base-"+c+" digit "+l.text);for(var f;(f=digitToNumber[s.future().text])!=null&&f<c;)d*=c,d+=f,s.popToken()}return"\\@char{"+d+"}"});var newcommand=(s,l,c)=>{var d=s.consumeArg().tokens;if(d.length!==1)throw new ParseError("\\newcommand's first argument must be a macro name");var f=d[0].text,g=s.isDefined(f);if(g&&!l)throw new ParseError("\\newcommand{"+f+"} attempting to redefine "+(f+"; use \\renewcommand"));if(!g&&!c)throw new ParseError("\\renewcommand{"+f+"} when command "+f+" does not yet exist; use \\newcommand");var v=0;if(d=s.consumeArg().tokens,d.length===1&&d[0].text==="["){for(var b="",$=s.expandNextToken();$.text!=="]"&&$.text!=="EOF";)b+=$.text,$=s.expandNextToken();if(!b.match(/^\s*[0-9]+\s*$/))throw new ParseError("Invalid number of arguments: "+b);v=parseInt(b),d=s.consumeArg().tokens}return s.macros.set(f,{tokens:d,numArgs:v}),""};defineMacro("\\newcommand",s=>newcommand(s,!1,!0));defineMacro("\\renewcommand",s=>newcommand(s,!0,!1));defineMacro("\\providecommand",s=>newcommand(s,!0,!0));defineMacro("\\message",s=>{var l=s.consumeArgs(1)[0];return console.log(l.reverse().map(c=>c.text).join("")),""});defineMacro("\\errmessage",s=>{var l=s.consumeArgs(1)[0];return console.error(l.reverse().map(c=>c.text).join("")),""});defineMacro("\\show",s=>{var l=s.popToken(),c=l.text;return console.log(l,s.macros.get(c),functions[c],symbols.math[c],symbols.text[c]),""});defineMacro("\\bgroup","{");defineMacro("\\egroup","}");defineMacro("~","\\nobreakspace");defineMacro("\\lq","`");defineMacro("\\rq","'");defineMacro("\\aa","\\r a");defineMacro("\\AA","\\r A");defineMacro("\\textcopyright","\\html@mathml{\\textcircled{c}}{\\char`}");defineMacro("\\copyright","\\TextOrMath{\\textcopyright}{\\text{\\textcopyright}}");defineMacro("\\textregistered","\\html@mathml{\\textcircled{\\scriptsize R}}{\\char`}");defineMacro("","\\mathscr{B}");defineMacro("","\\mathscr{E}");defineMacro("","\\mathscr{F}");defineMacro("","\\mathscr{H}");defineMacro("","\\mathscr{I}");defineMacro("","\\mathscr{L}");defineMacro("","\\mathscr{M}");defineMacro("","\\mathscr{R}");defineMacro("","\\mathfrak{C}");defineMacro("","\\mathfrak{H}");defineMacro("","\\mathfrak{Z}");defineMacro("\\Bbbk","\\Bbb{k}");defineMacro("","\\cdotp");defineMacro("\\llap","\\mathllap{\\textrm{#1}}");defineMacro("\\rlap","\\mathrlap{\\textrm{#1}}");defineMacro("\\clap","\\mathclap{\\textrm{#1}}");defineMacro("\\mathstrut","\\vphantom{(}");defineMacro("\\underbar","\\underline{\\text{#1}}");defineMacro("\\not",'\\html@mathml{\\mathrel{\\mathrlap\\@not}}{\\char"338}');defineMacro("\\neq","\\html@mathml{\\mathrel{\\not=}}{\\mathrel{\\char`}}");defineMacro("\\ne","\\neq");defineMacro("","\\neq");defineMacro("\\notin","\\html@mathml{\\mathrel{{\\in}\\mathllap{/\\mskip1mu}}}{\\mathrel{\\char`}}");defineMacro("","\\notin");defineMacro("","\\html@mathml{\\mathrel{=\\kern{-1em}\\raisebox{0.4em}{$\\scriptsize\\frown$}}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\wedge}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\vee}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\scriptsize\\star}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{def}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny\\mathrm{m}}{=}}{\\mathrel{\\char`}}");defineMacro("","\\html@mathml{\\stackrel{\\tiny?}{=}}{\\mathrel{\\char`}}");defineMacro("","\\perp");defineMacro("","\\mathclose{!\\mkern-0.8mu!}");defineMacro("","\\notni");defineMacro("","\\ulcorner");defineMacro("","\\urcorner");defineMacro("","\\llcorner");defineMacro("","\\lrcorner");defineMacro("","\\copyright");defineMacro("","\\textregistered");defineMacro("","\\textregistered");defineMacro("\\ulcorner",'\\html@mathml{\\@ulcorner}{\\mathop{\\char"231c}}');defineMacro("\\urcorner",'\\html@mathml{\\@urcorner}{\\mathop{\\char"231d}}');defineMacro("\\llcorner",'\\html@mathml{\\@llcorner}{\\mathop{\\char"231e}}');defineMacro("\\lrcorner",'\\html@mathml{\\@lrcorner}{\\mathop{\\char"231f}}');defineMacro("\\vdots","\\mathord{\\varvdots\\rule{0pt}{15pt}}");defineMacro("","\\vdots");defineMacro("\\varGamma","\\mathit{\\Gamma}");defineMacro("\\varDelta","\\mathit{\\Delta}");defineMacro("\\varTheta","\\mathit{\\Theta}");defineMacro("\\varLambda","\\mathit{\\Lambda}");defineMacro("\\varXi","\\mathit{\\Xi}");defineMacro("\\varPi","\\mathit{\\Pi}");defineMacro("\\varSigma","\\mathit{\\Sigma}");defineMacro("\\varUpsilon","\\mathit{\\Upsilon}");defineMacro("\\varPhi","\\mathit{\\Phi}");defineMacro("\\varPsi","\\mathit{\\Psi}");defineMacro("\\varOmega","\\mathit{\\Omega}");defineMacro("\\substack","\\begin{subarray}{c}#1\\end{subarray}");defineMacro("\\colon","\\nobreak\\mskip2mu\\mathpunct{}\\mathchoice{\\mkern-3mu}{\\mkern-3mu}{}{}{:}\\mskip6mu\\relax");defineMacro("\\boxed","\\fbox{$\\displaystyle{#1}$}");defineMacro("\\iff","\\DOTSB\\;\\Longleftrightarrow\\;");defineMacro("\\implies","\\DOTSB\\;\\Longrightarrow\\;");defineMacro("\\impliedby","\\DOTSB\\;\\Longleftarrow\\;");var dotsByToken={",":"\\dotsc","\\not":"\\dotsb","+":"\\dotsb","=":"\\dotsb","<":"\\dotsb",">":"\\dotsb","-":"\\dotsb","*":"\\dotsb",":":"\\dotsb","\\DOTSB":"\\dotsb","\\coprod":"\\dotsb","\\bigvee":"\\dotsb","\\bigwedge":"\\dotsb","\\biguplus":"\\dotsb","\\bigcap":"\\dotsb","\\bigcup":"\\dotsb","\\prod":"\\dotsb","\\sum":"\\dotsb","\\bigotimes":"\\dotsb","\\bigoplus":"\\dotsb","\\bigodot":"\\dotsb","\\bigsqcup":"\\dotsb","\\And":"\\dotsb","\\longrightarrow":"\\dotsb","\\Longrightarrow":"\\dotsb","\\longleftarrow":"\\dotsb","\\Longleftarrow":"\\dotsb","\\longleftrightarrow":"\\dotsb","\\Longleftrightarrow":"\\dotsb","\\mapsto":"\\dotsb","\\longmapsto":"\\dotsb","\\hookrightarrow":"\\dotsb","\\doteq":"\\dotsb","\\mathbin":"\\dotsb","\\mathrel":"\\dotsb","\\relbar":"\\dotsb","\\Relbar":"\\dotsb","\\xrightarrow":"\\dotsb","\\xleftarrow":"\\dotsb","\\DOTSI":"\\dotsi","\\int":"\\dotsi","\\oint":"\\dotsi","\\iint":"\\dotsi","\\iiint":"\\dotsi","\\iiiint":"\\dotsi","\\idotsint":"\\dotsi","\\DOTSX":"\\dotsx"};defineMacro("\\dots",function(s){var l="\\dotso",c=s.expandAfterFuture().text;return c in dotsByToken?l=dotsByToken[c]:(c.slice(0,4)==="\\not"||c in symbols.math&&utils$3.contains(["bin","rel"],symbols.math[c].group))&&(l="\\dotsb"),l});var spaceAfterDots={")":!0,"]":!0,"\\rbrack":!0,"\\}":!0,"\\rbrace":!0,"\\rangle":!0,"\\rceil":!0,"\\rfloor":!0,"\\rgroup":!0,"\\rmoustache":!0,"\\right":!0,"\\bigr":!0,"\\biggr":!0,"\\Bigr":!0,"\\Biggr":!0,$:!0,";":!0,".":!0,",":!0};defineMacro("\\dotso",function(s){var l=s.future().text;return l in spaceAfterDots?"\\ldots\\,":"\\ldots"});defineMacro("\\dotsc",function(s){var l=s.future().text;return l in spaceAfterDots&&l!==","?"\\ldots\\,":"\\ldots"});defineMacro("\\cdots",function(s){var l=s.future().text;return l in spaceAfterDots?"\\@cdots\\,":"\\@cdots"});defineMacro("\\dotsb","\\cdots");defineMacro("\\dotsm","\\cdots");defineMacro("\\dotsi","\\!\\cdots");defineMacro("\\dotsx","\\ldots\\,");defineMacro("\\DOTSI","\\relax");defineMacro("\\DOTSB","\\relax");defineMacro("\\DOTSX","\\relax");defineMacro("\\tmspace","\\TextOrMath{\\kern#1#3}{\\mskip#1#2}\\relax");defineMacro("\\,","\\tmspace+{3mu}{.1667em}");defineMacro("\\thinspace","\\,");defineMacro("\\>","\\mskip{4mu}");defineMacro("\\:","\\tmspace+{4mu}{.2222em}");defineMacro("\\medspace","\\:");defineMacro("\\;","\\tmspace+{5mu}{.2777em}");defineMacro("\\thickspace","\\;");defineMacro("\\!","\\tmspace-{3mu}{.1667em}");defineMacro("\\negthinspace","\\!");defineMacro("\\negmedspace","\\tmspace-{4mu}{.2222em}");defineMacro("\\negthickspace","\\tmspace-{5mu}{.277em}");defineMacro("\\enspace","\\kern.5em ");defineMacro("\\enskip","\\hskip.5em\\relax");defineMacro("\\quad","\\hskip1em\\relax");defineMacro("\\qquad","\\hskip2em\\relax");defineMacro("\\tag","\\@ifstar\\tag@literal\\tag@paren");defineMacro("\\tag@paren","\\tag@literal{({#1})}");defineMacro("\\tag@literal",s=>{if(s.macros.get("\\df@tag"))throw new ParseError("Multiple \\tag");return"\\gdef\\df@tag{\\text{#1}}"});defineMacro("\\bmod","\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}\\mathbin{\\rm mod}\\mathchoice{\\mskip1mu}{\\mskip1mu}{\\mskip5mu}{\\mskip5mu}");defineMacro("\\pod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern8mu}{\\mkern8mu}{\\mkern8mu}(#1)");defineMacro("\\pmod","\\pod{{\\rm mod}\\mkern6mu#1}");defineMacro("\\mod","\\allowbreak\\mathchoice{\\mkern18mu}{\\mkern12mu}{\\mkern12mu}{\\mkern12mu}{\\rm mod}\\,\\,#1");defineMacro("\\newline","\\\\\\relax");defineMacro("\\TeX","\\textrm{\\html@mathml{T\\kern-.1667em\\raisebox{-.5ex}{E}\\kern-.125emX}{TeX}}");var latexRaiseA=makeEm(fontMetricsData["Main-Regular"][84][1]-.7*fontMetricsData["Main-Regular"][65][1]);defineMacro("\\LaTeX","\\textrm{\\html@mathml{"+("L\\kern-.36em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{LaTeX}}");defineMacro("\\KaTeX","\\textrm{\\html@mathml{"+("K\\kern-.17em\\raisebox{"+latexRaiseA+"}{\\scriptstyle A}")+"\\kern-.15em\\TeX}{KaTeX}}");defineMacro("\\hspace","\\@ifstar\\@hspacer\\@hspace");defineMacro("\\@hspace","\\hskip #1\\relax");defineMacro("\\@hspacer","\\rule{0pt}{0pt}\\hskip #1\\relax");defineMacro("\\ordinarycolon",":");defineMacro("\\vcentcolon","\\mathrel{\\mathop\\ordinarycolon}");defineMacro("\\dblcolon",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-.9mu}\\vcentcolon}}{\\mathop{\\char"2237}}');defineMacro("\\coloneqq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2254}}');defineMacro("\\Coloneqq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}=}}{\\mathop{\\char"2237\\char"3d}}');defineMacro("\\coloneq",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"3a\\char"2212}}');defineMacro("\\Coloneq",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\mathrel{-}}}{\\mathop{\\char"2237\\char"2212}}');defineMacro("\\eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2255}}');defineMacro("\\Eqqcolon",'\\html@mathml{\\mathrel{=\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"3d\\char"2237}}');defineMacro("\\eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\vcentcolon}}{\\mathop{\\char"2239}}');defineMacro("\\Eqcolon",'\\html@mathml{\\mathrel{\\mathrel{-}\\mathrel{\\mkern-1.2mu}\\dblcolon}}{\\mathop{\\char"2212\\char"2237}}');defineMacro("\\colonapprox",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"3a\\char"2248}}');defineMacro("\\Colonapprox",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\approx}}{\\mathop{\\char"2237\\char"2248}}');defineMacro("\\colonsim",'\\html@mathml{\\mathrel{\\vcentcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"3a\\char"223c}}');defineMacro("\\Colonsim",'\\html@mathml{\\mathrel{\\dblcolon\\mathrel{\\mkern-1.2mu}\\sim}}{\\mathop{\\char"2237\\char"223c}}');defineMacro("","\\dblcolon");defineMacro("","\\eqcolon");defineMacro("","\\coloneqq");defineMacro("","\\eqqcolon");defineMacro("","\\Coloneqq");defineMacro("\\ratio","\\vcentcolon");defineMacro("\\coloncolon","\\dblcolon");defineMacro("\\colonequals","\\coloneqq");defineMacro("\\coloncolonequals","\\Coloneqq");defineMacro("\\equalscolon","\\eqqcolon");defineMacro("\\equalscoloncolon","\\Eqqcolon");defineMacro("\\colonminus","\\coloneq");defineMacro("\\coloncolonminus","\\Coloneq");defineMacro("\\minuscolon","\\eqcolon");defineMacro("\\minuscoloncolon","\\Eqcolon");defineMacro("\\coloncolonapprox","\\Colonapprox");defineMacro("\\coloncolonsim","\\Colonsim");defineMacro("\\simcolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\simcoloncolon","\\mathrel{\\sim\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\approxcolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\vcentcolon}");defineMacro("\\approxcoloncolon","\\mathrel{\\approx\\mathrel{\\mkern-1.2mu}\\dblcolon}");defineMacro("\\notni","\\html@mathml{\\not\\ni}{\\mathrel{\\char`}}");defineMacro("\\limsup","\\DOTSB\\operatorname*{lim\\,sup}");defineMacro("\\liminf","\\DOTSB\\operatorname*{lim\\,inf}");defineMacro("\\injlim","\\DOTSB\\operatorname*{inj\\,lim}");defineMacro("\\projlim","\\DOTSB\\operatorname*{proj\\,lim}");defineMacro("\\varlimsup","\\DOTSB\\operatorname*{\\overline{lim}}");defineMacro("\\varliminf","\\DOTSB\\operatorname*{\\underline{lim}}");defineMacro("\\varinjlim","\\DOTSB\\operatorname*{\\underrightarrow{lim}}");defineMacro("\\varprojlim","\\DOTSB\\operatorname*{\\underleftarrow{lim}}");defineMacro("\\gvertneqq","\\html@mathml{\\@gvertneqq}{}");defineMacro("\\lvertneqq","\\html@mathml{\\@lvertneqq}{}");defineMacro("\\ngeqq","\\html@mathml{\\@ngeqq}{}");defineMacro("\\ngeqslant","\\html@mathml{\\@ngeqslant}{}");defineMacro("\\nleqq","\\html@mathml{\\@nleqq}{}");defineMacro("\\nleqslant","\\html@mathml{\\@nleqslant}{}");defineMacro("\\nshortmid","\\html@mathml{\\@nshortmid}{}");defineMacro("\\nshortparallel","\\html@mathml{\\@nshortparallel}{}");defineMacro("\\nsubseteqq","\\html@mathml{\\@nsubseteqq}{}");defineMacro("\\nsupseteqq","\\html@mathml{\\@nsupseteqq}{}");defineMacro("\\varsubsetneq","\\html@mathml{\\@varsubsetneq}{}");defineMacro("\\varsubsetneqq","\\html@mathml{\\@varsubsetneqq}{}");defineMacro("\\varsupsetneq","\\html@mathml{\\@varsupsetneq}{}");defineMacro("\\varsupsetneqq","\\html@mathml{\\@varsupsetneqq}{}");defineMacro("\\imath","\\html@mathml{\\@imath}{}");defineMacro("\\jmath","\\html@mathml{\\@jmath}{}");defineMacro("\\llbracket","\\html@mathml{\\mathopen{[\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rrbracket","\\html@mathml{\\mathclose{]\\mkern-3.2mu]}}{\\mathclose{\\char`}}");defineMacro("","\\llbracket");defineMacro("","\\rrbracket");defineMacro("\\lBrace","\\html@mathml{\\mathopen{\\{\\mkern-3.2mu[}}{\\mathopen{\\char`}}");defineMacro("\\rBrace","\\html@mathml{\\mathclose{]\\mkern-3.2mu\\}}}{\\mathclose{\\char`}}");defineMacro("","\\lBrace");defineMacro("","\\rBrace");defineMacro("\\minuso","\\mathbin{\\html@mathml{{\\mathrlap{\\mathchoice{\\kern{0.145em}}{\\kern{0.145em}}{\\kern{0.1015em}}{\\kern{0.0725em}}\\circ}{-}}}{\\char`}}");defineMacro("","\\minuso");defineMacro("\\darr","\\downarrow");defineMacro("\\dArr","\\Downarrow");defineMacro("\\Darr","\\Downarrow");defineMacro("\\lang","\\langle");defineMacro("\\rang","\\rangle");defineMacro("\\uarr","\\uparrow");defineMacro("\\uArr","\\Uparrow");defineMacro("\\Uarr","\\Uparrow");defineMacro("\\N","\\mathbb{N}");defineMacro("\\R","\\mathbb{R}");defineMacro("\\Z","\\mathbb{Z}");defineMacro("\\alef","\\aleph");defineMacro("\\alefsym","\\aleph");defineMacro("\\Alpha","\\mathrm{A}");defineMacro("\\Beta","\\mathrm{B}");defineMacro("\\bull","\\bullet");defineMacro("\\Chi","\\mathrm{X}");defineMacro("\\clubs","\\clubsuit");defineMacro("\\cnums","\\mathbb{C}");defineMacro("\\Complex","\\mathbb{C}");defineMacro("\\Dagger","\\ddagger");defineMacro("\\diamonds","\\diamondsuit");defineMacro("\\empty","\\emptyset");defineMacro("\\Epsilon","\\mathrm{E}");defineMacro("\\Eta","\\mathrm{H}");defineMacro("\\exist","\\exists");defineMacro("\\harr","\\leftrightarrow");defineMacro("\\hArr","\\Leftrightarrow");defineMacro("\\Harr","\\Leftrightarrow");defineMacro("\\hearts","\\heartsuit");defineMacro("\\image","\\Im");defineMacro("\\infin","\\infty");defineMacro("\\Iota","\\mathrm{I}");defineMacro("\\isin","\\in");defineMacro("\\Kappa","\\mathrm{K}");defineMacro("\\larr","\\leftarrow");defineMacro("\\lArr","\\Leftarrow");defineMacro("\\Larr","\\Leftarrow");defineMacro("\\lrarr","\\leftrightarrow");defineMacro("\\lrArr","\\Leftrightarrow");defineMacro("\\Lrarr","\\Leftrightarrow");defineMacro("\\Mu","\\mathrm{M}");defineMacro("\\natnums","\\mathbb{N}");defineMacro("\\Nu","\\mathrm{N}");defineMacro("\\Omicron","\\mathrm{O}");defineMacro("\\plusmn","\\pm");defineMacro("\\rarr","\\rightarrow");defineMacro("\\rArr","\\Rightarrow");defineMacro("\\Rarr","\\Rightarrow");defineMacro("\\real","\\Re");defineMacro("\\reals","\\mathbb{R}");defineMacro("\\Reals","\\mathbb{R}");defineMacro("\\Rho","\\mathrm{P}");defineMacro("\\sdot","\\cdot");defineMacro("\\sect","\\S");defineMacro("\\spades","\\spadesuit");defineMacro("\\sub","\\subset");defineMacro("\\sube","\\subseteq");defineMacro("\\supe","\\supseteq");defineMacro("\\Tau","\\mathrm{T}");defineMacro("\\thetasym","\\vartheta");defineMacro("\\weierp","\\wp");defineMacro("\\Zeta","\\mathrm{Z}");defineMacro("\\argmin","\\DOTSB\\operatorname*{arg\\,min}");defineMacro("\\argmax","\\DOTSB\\operatorname*{arg\\,max}");defineMacro("\\plim","\\DOTSB\\mathop{\\operatorname{plim}}\\limits");defineMacro("\\bra","\\mathinner{\\langle{#1}|}");defineMacro("\\ket","\\mathinner{|{#1}\\rangle}");defineMacro("\\braket","\\mathinner{\\langle{#1}\\rangle}");defineMacro("\\Bra","\\left\\langle#1\\right|");defineMacro("\\Ket","\\left|#1\\right\\rangle");var braketHelper=s=>l=>{var c=l.consumeArg().tokens,d=l.consumeArg().tokens,f=l.consumeArg().tokens,g=l.consumeArg().tokens,v=l.macros.get("|"),b=l.macros.get("\\|");l.macros.beginGroup();var $=C=>E=>{s&&(E.macros.set("|",v),f.length&&E.macros.set("\\|",b));var N=C;if(!C&&f.length){var W=E.future();W.text==="|"&&(E.popToken(),N=!0)}return{tokens:N?f:d,numArgs:0}};l.macros.set("|",$(!1)),f.length&&l.macros.set("\\|",$(!0));var y=l.consumeArg().tokens,x=l.expandTokens([...g,...y,...c]);return l.macros.endGroup(),{tokens:x.reverse(),numArgs:0}};defineMacro("\\bra@ket",braketHelper(!1));defineMacro("\\bra@set",braketHelper(!0));defineMacro("\\Braket","\\bra@ket{\\left\\langle}{\\,\\middle\\vert\\,}{\\,\\middle\\vert\\,}{\\right\\rangle}");defineMacro("\\Set","\\bra@set{\\left\\{\\:}{\\;\\middle\\vert\\;}{\\;\\middle\\Vert\\;}{\\:\\right\\}}");defineMacro("\\set","\\bra@set{\\{\\,}{\\mid}{}{\\,\\}}");defineMacro("\\angln","{\\angl n}");defineMacro("\\blue","\\textcolor{##6495ed}{#1}");defineMacro("\\orange","\\textcolor{##ffa500}{#1}");defineMacro("\\pink","\\textcolor{##ff00af}{#1}");defineMacro("\\red","\\textcolor{##df0030}{#1}");defineMacro("\\green","\\textcolor{##28ae7b}{#1}");defineMacro("\\gray","\\textcolor{gray}{#1}");defineMacro("\\purple","\\textcolor{##9d38bd}{#1}");defineMacro("\\blueA","\\textcolor{##ccfaff}{#1}");defineMacro("\\blueB","\\textcolor{##80f6ff}{#1}");defineMacro("\\blueC","\\textcolor{##63d9ea}{#1}");defineMacro("\\blueD","\\textcolor{##11accd}{#1}");defineMacro("\\blueE","\\textcolor{##0c7f99}{#1}");defineMacro("\\tealA","\\textcolor{##94fff5}{#1}");defineMacro("\\tealB","\\textcolor{##26edd5}{#1}");defineMacro("\\tealC","\\textcolor{##01d1c1}{#1}");defineMacro("\\tealD","\\textcolor{##01a995}{#1}");defineMacro("\\tealE","\\textcolor{##208170}{#1}");defineMacro("\\greenA","\\textcolor{##b6ffb0}{#1}");defineMacro("\\greenB","\\textcolor{##8af281}{#1}");defineMacro("\\greenC","\\textcolor{##74cf70}{#1}");defineMacro("\\greenD","\\textcolor{##1fab54}{#1}");defineMacro("\\greenE","\\textcolor{##0d923f}{#1}");defineMacro("\\goldA","\\textcolor{##ffd0a9}{#1}");defineMacro("\\goldB","\\textcolor{##ffbb71}{#1}");defineMacro("\\goldC","\\textcolor{##ff9c39}{#1}");defineMacro("\\goldD","\\textcolor{##e07d10}{#1}");defineMacro("\\goldE","\\textcolor{##a75a05}{#1}");defineMacro("\\redA","\\textcolor{##fca9a9}{#1}");defineMacro("\\redB","\\textcolor{##ff8482}{#1}");defineMacro("\\redC","\\textcolor{##f9685d}{#1}");defineMacro("\\redD","\\textcolor{##e84d39}{#1}");defineMacro("\\redE","\\textcolor{##bc2612}{#1}");defineMacro("\\maroonA","\\textcolor{##ffbde0}{#1}");defineMacro("\\maroonB","\\textcolor{##ff92c6}{#1}");defineMacro("\\maroonC","\\textcolor{##ed5fa6}{#1}");defineMacro("\\maroonD","\\textcolor{##ca337c}{#1}");defineMacro("\\maroonE","\\textcolor{##9e034e}{#1}");defineMacro("\\purpleA","\\textcolor{##ddd7ff}{#1}");defineMacro("\\purpleB","\\textcolor{##c6b9fc}{#1}");defineMacro("\\purpleC","\\textcolor{##aa87ff}{#1}");defineMacro("\\purpleD","\\textcolor{##7854ab}{#1}");defineMacro("\\purpleE","\\textcolor{##543b78}{#1}");defineMacro("\\mintA","\\textcolor{##f5f9e8}{#1}");defineMacro("\\mintB","\\textcolor{##edf2df}{#1}");defineMacro("\\mintC","\\textcolor{##e0e5cc}{#1}");defineMacro("\\grayA","\\textcolor{##f6f7f7}{#1}");defineMacro("\\grayB","\\textcolor{##f0f1f2}{#1}");defineMacro("\\grayC","\\textcolor{##e3e5e6}{#1}");defineMacro("\\grayD","\\textcolor{##d6d8da}{#1}");defineMacro("\\grayE","\\textcolor{##babec2}{#1}");defineMacro("\\grayF","\\textcolor{##888d93}{#1}");defineMacro("\\grayG","\\textcolor{##626569}{#1}");defineMacro("\\grayH","\\textcolor{##3b3e40}{#1}");defineMacro("\\grayI","\\textcolor{##21242c}{#1}");defineMacro("\\kaBlue","\\textcolor{##314453}{#1}");defineMacro("\\kaGreen","\\textcolor{##71B307}{#1}");var implicitCommands={"^":!0,_:!0,"\\limits":!0,"\\nolimits":!0};class MacroExpander{constructor(l,c,d){this.settings=void 0,this.expansionCount=void 0,this.lexer=void 0,this.macros=void 0,this.stack=void 0,this.mode=void 0,this.settings=c,this.expansionCount=0,this.feed(l),this.macros=new Namespace(macros,c.macros),this.mode=d,this.stack=[]}feed(l){this.lexer=new Lexer(l,this.settings)}switchMode(l){this.mode=l}beginGroup(){this.macros.beginGroup()}endGroup(){this.macros.endGroup()}endGroups(){this.macros.endGroups()}future(){return this.stack.length===0&&this.pushToken(this.lexer.lex()),this.stack[this.stack.length-1]}popToken(){return this.future(),this.stack.pop()}pushToken(l){this.stack.push(l)}pushTokens(l){this.stack.push(...l)}scanArgument(l){var c,d,f;if(l){if(this.consumeSpaces(),this.future().text!=="[")return null;c=this.popToken(),{tokens:f,end:d}=this.consumeArg(["]"])}else({tokens:f,start:c,end:d}=this.consumeArg());return this.pushToken(new Token("EOF",d.loc)),this.pushTokens(f),c.range(d,"")}consumeSpaces(){for(;;){var l=this.future();if(l.text===" ")this.stack.pop();else break}}consumeArg(l){var c=[],d=l&&l.length>0;d||this.consumeSpaces();var f=this.future(),g,v=0,b=0;do{if(g=this.popToken(),c.push(g),g.text==="{")++v;else if(g.text==="}"){if(--v,v===-1)throw new ParseError("Extra }",g)}else if(g.text==="EOF")throw new ParseError("Unexpected end of input in a macro argument, expected '"+(l&&d?l[b]:"}")+"'",g);if(l&&d)if((v===0||v===1&&l[b]==="{")&&g.text===l[b]){if(++b,b===l.length){c.splice(-b,b);break}}else b=0}while(v!==0||d);return f.text==="{"&&c[c.length-1].text==="}"&&(c.pop(),c.shift()),c.reverse(),{tokens:c,start:f,end:g}}consumeArgs(l,c){if(c){if(c.length!==l+1)throw new ParseError("The length of delimiters doesn't match the number of args!");for(var d=c[0],f=0;f<d.length;f++){var g=this.popToken();if(d[f]!==g.text)throw new ParseError("Use of the macro doesn't match its definition",g)}}for(var v=[],b=0;b<l;b++)v.push(this.consumeArg(c&&c[b+1]).tokens);return v}countExpansion(l){if(this.expansionCount+=l,this.expansionCount>this.settings.maxExpand)throw new ParseError("Too many expansions: infinite loop or need to increase maxExpand setting")}expandOnce(l){var c=this.popToken(),d=c.text,f=c.noexpand?null:this._getExpansion(d);if(f==null||l&&f.unexpandable){if(l&&f==null&&d[0]==="\\"&&!this.isDefined(d))throw new ParseError("Undefined control sequence: "+d);return this.pushToken(c),!1}this.countExpansion(1);var g=f.tokens,v=this.consumeArgs(f.numArgs,f.delimiters);if(f.numArgs){g=g.slice();for(var b=g.length-1;b>=0;--b){var $=g[b];if($.text==="#"){if(b===0)throw new ParseError("Incomplete placeholder at end of macro body",$);if($=g[--b],$.text==="#")g.splice(b+1,1);else if(/^[1-9]$/.test($.text))g.splice(b,2,...v[+$.text-1]);else throw new ParseError("Not a valid argument number",$)}}}return this.pushTokens(g),g.length}expandAfterFuture(){return this.expandOnce(),this.future()}expandNextToken(){for(;;)if(this.expandOnce()===!1){var l=this.stack.pop();return l.treatAsRelax&&(l.text="\\relax"),l}throw new Error}expandMacro(l){return this.macros.has(l)?this.expandTokens([new Token(l)]):void 0}expandTokens(l){var c=[],d=this.stack.length;for(this.pushTokens(l);this.stack.length>d;)if(this.expandOnce(!0)===!1){var f=this.stack.pop();f.treatAsRelax&&(f.noexpand=!1,f.treatAsRelax=!1),c.push(f)}return this.countExpansion(c.length),c}expandMacroAsText(l){var c=this.expandMacro(l);return c&&c.map(d=>d.text).join("")}_getExpansion(l){var c=this.macros.get(l);if(c==null)return c;if(l.length===1){var d=this.lexer.catcodes[l];if(d!=null&&d!==13)return}var f=typeof c=="function"?c(this):c;if(typeof f=="string"){var g=0;if(f.indexOf("#")!==-1)for(var v=f.replace(/##/g,"");v.indexOf("#"+(g+1))!==-1;)++g;for(var b=new Lexer(f,this.settings),$=[],y=b.lex();y.text!=="EOF";)$.push(y),y=b.lex();$.reverse();var x={tokens:$,numArgs:g};return x}return f}isDefined(l){return this.macros.has(l)||functions.hasOwnProperty(l)||symbols.math.hasOwnProperty(l)||symbols.text.hasOwnProperty(l)||implicitCommands.hasOwnProperty(l)}isExpandable(l){var c=this.macros.get(l);return c!=null?typeof c=="string"||typeof c=="function"||!c.unexpandable:functions.hasOwnProperty(l)&&!functions[l].primitive}}var unicodeSubRegEx=/^[]/,uSubsAndSups=Object.freeze({"":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"a","":"e","":"h","":"i","":"j","":"k","":"l","":"m","":"n","":"o","":"p","":"r","":"s","":"t","":"u","":"v","":"x","":"","":"","":"","":"","":"","":"+","":"-","":"=","":"(","":")","":"0","":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"A","":"B","":"D","":"E","":"G","":"H","":"I","":"J","":"K","":"L","":"M","":"N","":"O","":"P","":"R","":"T","":"U","":"V","":"W","":"a","":"b","":"c","":"d","":"e","":"f","":"g",:"h","":"i",:"j","":"k",:"l","":"m",:"n","":"o","":"p",:"r",:"s","":"t","":"u","":"v",:"w",:"x",:"y","":"z","":"","":"","":"","":"","":"","":""}),unicodeAccents={"":{text:"\\'",math:"\\acute"},"":{text:"\\`",math:"\\grave"},"":{text:'\\"',math:"\\ddot"},"":{text:"\\~",math:"\\tilde"},"":{text:"\\=",math:"\\bar"},"":{text:"\\u",math:"\\breve"},"":{text:"\\v",math:"\\check"},"":{text:"\\^",math:"\\hat"},"":{text:"\\.",math:"\\dot"},"":{text:"\\r",math:"\\mathring"},"":{text:"\\H"},"":{text:"\\c"}},unicodeSymbols={:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"a",:"b",:"c",:"c",:"c",:"c",:"c",:"c",:"d",:"d",:"d",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"e",:"f",:"g",:"g",:"g",:"g",:"g",:"g",:"g",:"h",:"h",:"h",:"h",:"h",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"i",:"j",:"j",:"k",:"k",:"k",:"l",:"l",:"l",:"m",:"m",:"n",:"n",:"n",:"n",:"n",:"n",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"o",:"p",:"p",:"r",:"r",:"r",:"r",:"s",:"s",:"s",:"s",:"s",:"s",:"s",:"t",:"t",:"t",:"t",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"u",:"v",:"w",:"w",:"w",:"w",:"w",:"w",:"x",:"x",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"y",:"z",:"z",:"z",:"z",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"A",:"B",:"C",:"C",:"C",:"C",:"C",:"C",:"D",:"D",:"D",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"E",:"F",:"G",:"G",:"G",:"G",:"G",:"G",:"G",:"H",:"H",:"H",:"H",:"H",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"I",:"J",:"K",:"K",:"K",:"L",:"L",:"L",:"M",:"M",:"N",:"N",:"N",:"N",:"N",:"N",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"O",:"P",:"P",:"R",:"R",:"R",:"R",:"S",:"S",:"S",:"S",:"S",:"S",:"S",:"T",:"T",:"T",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"U",:"V",:"W",:"W",:"W",:"W",:"W",:"X",:"X",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Y",:"Z",:"Z",:"Z",:"Z",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:"",:""};class Parser{constructor(l,c){this.mode=void 0,this.gullet=void 0,this.settings=void 0,this.leftrightDepth=void 0,this.nextToken=void 0,this.mode="math",this.gullet=new MacroExpander(l,c,this.mode),this.settings=c,this.leftrightDepth=0}expect(l,c){if(c===void 0&&(c=!0),this.fetch().text!==l)throw new ParseError("Expected '"+l+"', got '"+this.fetch().text+"'",this.fetch());c&&this.consume()}consume(){this.nextToken=null}fetch(){return this.nextToken==null&&(this.nextToken=this.gullet.expandNextToken()),this.nextToken}switchMode(l){this.mode=l,this.gullet.switchMode(l)}parse(){this.settings.globalGroup||this.gullet.beginGroup(),this.settings.colorIsTextColor&&this.gullet.macros.set("\\color","\\textcolor");try{var l=this.parseExpression(!1);return this.expect("EOF"),this.settings.globalGroup||this.gullet.endGroup(),l}finally{this.gullet.endGroups()}}subparse(l){var c=this.nextToken;this.consume(),this.gullet.pushToken(new Token("}")),this.gullet.pushTokens(l);var d=this.parseExpression(!1);return this.expect("}"),this.nextToken=c,d}parseExpression(l,c){for(var d=[];;){this.mode==="math"&&this.consumeSpaces();var f=this.fetch();if(Parser.endOfExpression.indexOf(f.text)!==-1||c&&f.text===c||l&&functions[f.text]&&functions[f.text].infix)break;var g=this.parseAtom(c);if(g){if(g.type==="internal")continue}else break;d.push(g)}return this.mode==="text"&&this.formLigatures(d),this.handleInfixNodes(d)}handleInfixNodes(l){for(var c=-1,d,f=0;f<l.length;f++)if(l[f].type==="infix"){if(c!==-1)throw new ParseError("only one infix operator per group",l[f].token);c=f,d=l[f].replaceWith}if(c!==-1&&d){var g,v,b=l.slice(0,c),$=l.slice(c+1);b.length===1&&b[0].type==="ordgroup"?g=b[0]:g={type:"ordgroup",mode:this.mode,body:b},$.length===1&&$[0].type==="ordgroup"?v=$[0]:v={type:"ordgroup",mode:this.mode,body:$};var y;return d==="\\\\abovefrac"?y=this.callFunction(d,[g,l[c],v],[]):y=this.callFunction(d,[g,v],[]),[y]}else return l}handleSupSubscript(l){var c=this.fetch(),d=c.text;this.consume(),this.consumeSpaces();var f=this.parseGroup(l);if(!f)throw new ParseError("Expected group after '"+d+"'",c);return f}formatUnsupportedCmd(l){for(var c=[],d=0;d<l.length;d++)c.push({type:"textord",mode:"text",text:l[d]});var f={type:"text",mode:this.mode,body:c},g={type:"color",mode:this.mode,color:this.settings.errorColor,body:[f]};return g}parseAtom(l){var c=this.parseGroup("atom",l);if(this.mode==="text")return c;for(var d,f;;){this.consumeSpaces();var g=this.fetch();if(g.text==="\\limits"||g.text==="\\nolimits"){if(c&&c.type==="op"){var v=g.text==="\\limits";c.limits=v,c.alwaysHandleSupSub=!0}else if(c&&c.type==="operatorname")c.alwaysHandleSupSub&&(c.limits=g.text==="\\limits");else throw new ParseError("Limit controls must follow a math operator",g);this.consume()}else if(g.text==="^"){if(d)throw new ParseError("Double superscript",g);d=this.handleSupSubscript("superscript")}else if(g.text==="_"){if(f)throw new ParseError("Double subscript",g);f=this.handleSupSubscript("subscript")}else if(g.text==="'"){if(d)throw new ParseError("Double superscript",g);var b={type:"textord",mode:this.mode,text:"\\prime"},$=[b];for(this.consume();this.fetch().text==="'";)$.push(b),this.consume();this.fetch().text==="^"&&$.push(this.handleSupSubscript("superscript")),d={type:"ordgroup",mode:this.mode,body:$}}else if(uSubsAndSups[g.text]){var y=unicodeSubRegEx.test(g.text),x=[];for(x.push(new Token(uSubsAndSups[g.text])),this.consume();;){var C=this.fetch().text;if(!uSubsAndSups[C]||unicodeSubRegEx.test(C)!==y)break;x.unshift(new Token(uSubsAndSups[C])),this.consume()}var E=this.subparse(x);y?f={type:"ordgroup",mode:"math",body:E}:d={type:"ordgroup",mode:"math",body:E}}else break}return d||f?{type:"supsub",mode:this.mode,base:c,sup:d,sub:f}:c}parseFunction(l,c){var d=this.fetch(),f=d.text,g=functions[f];if(!g)return null;if(this.consume(),c&&c!=="atom"&&!g.allowedInArgument)throw new ParseError("Got function '"+f+"' with no arguments"+(c?" as "+c:""),d);if(this.mode==="text"&&!g.allowedInText)throw new ParseError("Can't use function '"+f+"' in text mode",d);if(this.mode==="math"&&g.allowedInMath===!1)throw new ParseError("Can't use function '"+f+"' in math mode",d);var{args:v,optArgs:b}=this.parseArguments(f,g);return this.callFunction(f,v,b,d,l)}callFunction(l,c,d,f,g){var v={funcName:l,parser:this,token:f,breakOnTokenText:g},b=functions[l];if(b&&b.handler)return b.handler(v,c,d);throw new ParseError("No function handler for "+l)}parseArguments(l,c){var d=c.numArgs+c.numOptionalArgs;if(d===0)return{args:[],optArgs:[]};for(var f=[],g=[],v=0;v<d;v++){var b=c.argTypes&&c.argTypes[v],$=v<c.numOptionalArgs;(c.primitive&&b==null||c.type==="sqrt"&&v===1&&g[0]==null)&&(b="primitive");var y=this.parseGroupOfType("argument to '"+l+"'",b,$);if($)g.push(y);else if(y!=null)f.push(y);else throw new ParseError("Null argument, please report this as a bug")}return{args:f,optArgs:g}}parseGroupOfType(l,c,d){switch(c){case"color":return this.parseColorGroup(d);case"size":return this.parseSizeGroup(d);case"url":return this.parseUrlGroup(d);case"math":case"text":return this.parseArgumentGroup(d,c);case"hbox":{var f=this.parseArgumentGroup(d,"text");return f!=null?{type:"styling",mode:f.mode,body:[f],style:"text"}:null}case"raw":{var g=this.parseStringGroup("raw",d);return g!=null?{type:"raw",mode:"text",string:g.text}:null}case"primitive":{if(d)throw new ParseError("A primitive argument cannot be optional");var v=this.parseGroup(l);if(v==null)throw new ParseError("Expected group as "+l,this.fetch());return v}case"original":case null:case void 0:return this.parseArgumentGroup(d);default:throw new ParseError("Unknown group type as "+l,this.fetch())}}consumeSpaces(){for(;this.fetch().text===" ";)this.consume()}parseStringGroup(l,c){var d=this.gullet.scanArgument(c);if(d==null)return null;for(var f="",g;(g=this.fetch()).text!=="EOF";)f+=g.text,this.consume();return this.consume(),d.text=f,d}parseRegexGroup(l,c){for(var d=this.fetch(),f=d,g="",v;(v=this.fetch()).text!=="EOF"&&l.test(g+v.text);)f=v,g+=f.text,this.consume();if(g==="")throw new ParseError("Invalid "+c+": '"+d.text+"'",d);return d.range(f,g)}parseColorGroup(l){var c=this.parseStringGroup("color",l);if(c==null)return null;var d=/^(#[a-f0-9]{3}|#?[a-f0-9]{6}|[a-z]+)$/i.exec(c.text);if(!d)throw new ParseError("Invalid color: '"+c.text+"'",c);var f=d[0];return/^[0-9a-f]{6}$/i.test(f)&&(f="#"+f),{type:"color-token",mode:this.mode,color:f}}parseSizeGroup(l){var c,d=!1;if(this.gullet.consumeSpaces(),!l&&this.gullet.future().text!=="{"?c=this.parseRegexGroup(/^[-+]? *(?:$|\d+|\d+\.\d*|\.\d*) *[a-z]{0,2} *$/,"size"):c=this.parseStringGroup("size",l),!c)return null;!l&&c.text.length===0&&(c.text="0pt",d=!0);var f=/([-+]?) *(\d+(?:\.\d*)?|\.\d+) *([a-z]{2})/.exec(c.text);if(!f)throw new ParseError("Invalid size: '"+c.text+"'",c);var g={number:+(f[1]+f[2]),unit:f[3]};if(!validUnit(g))throw new ParseError("Invalid unit: '"+g.unit+"'",c);return{type:"size",mode:this.mode,value:g,isBlank:d}}parseUrlGroup(l){this.gullet.lexer.setCatcode("%",13),this.gullet.lexer.setCatcode("~",12);var c=this.parseStringGroup("url",l);if(this.gullet.lexer.setCatcode("%",14),this.gullet.lexer.setCatcode("~",13),c==null)return null;var d=c.text.replace(/\\([#$%&~_^{}])/g,"$1");return{type:"url",mode:this.mode,url:d}}parseArgumentGroup(l,c){var d=this.gullet.scanArgument(l);if(d==null)return null;var f=this.mode;c&&this.switchMode(c),this.gullet.beginGroup();var g=this.parseExpression(!1,"EOF");this.expect("EOF"),this.gullet.endGroup();var v={type:"ordgroup",mode:this.mode,loc:d.loc,body:g};return c&&this.switchMode(f),v}parseGroup(l,c){var d=this.fetch(),f=d.text,g;if(f==="{"||f==="\\begingroup"){this.consume();var v=f==="{"?"}":"\\endgroup";this.gullet.beginGroup();var b=this.parseExpression(!1,v),$=this.fetch();this.expect(v),this.gullet.endGroup(),g={type:"ordgroup",mode:this.mode,loc:SourceLocation.range(d,$),body:b,semisimple:f==="\\begingroup"||void 0}}else if(g=this.parseFunction(c,l)||this.parseSymbol(),g==null&&f[0]==="\\"&&!implicitCommands.hasOwnProperty(f)){if(this.settings.throwOnError)throw new ParseError("Undefined control sequence: "+f,d);g=this.formatUnsupportedCmd(f),this.consume()}return g}formLigatures(l){for(var c=l.length-1,d=0;d<c;++d){var f=l[d],g=f.text;g==="-"&&l[d+1].text==="-"&&(d+1<c&&l[d+2].text==="-"?(l.splice(d,3,{type:"textord",mode:"text",loc:SourceLocation.range(f,l[d+2]),text:"---"}),c-=2):(l.splice(d,2,{type:"textord",mode:"text",loc:SourceLocation.range(f,l[d+1]),text:"--"}),c-=1)),(g==="'"||g==="`")&&l[d+1].text===g&&(l.splice(d,2,{type:"textord",mode:"text",loc:SourceLocation.range(f,l[d+1]),text:g+g}),c-=1)}}parseSymbol(){var l=this.fetch(),c=l.text;if(/^\\verb[^a-zA-Z]/.test(c)){this.consume();var d=c.slice(5),f=d.charAt(0)==="*";if(f&&(d=d.slice(1)),d.length<2||d.charAt(0)!==d.slice(-1))throw new ParseError(`\\verb assertion failed --
                    please report what input caused this bug`);return d=d.slice(1,-1),{type:"verb",mode:"text",body:d,star:f}}unicodeSymbols.hasOwnProperty(c[0])&&!symbols[this.mode][c[0]]&&(this.settings.strict&&this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Accented Unicode text character "'+c[0]+'" used in math mode',l),c=unicodeSymbols[c[0]]+c.slice(1));var g=combiningDiacriticalMarksEndRegex.exec(c);g&&(c=c.substring(0,g.index),c==="i"?c="":c==="j"&&(c=""));var v;if(symbols[this.mode][c]){this.settings.strict&&this.mode==="math"&&extraLatin.indexOf(c)>=0&&this.settings.reportNonstrict("unicodeTextInMathMode",'Latin-1/Unicode text character "'+c[0]+'" used in math mode',l);var b=symbols[this.mode][c].group,$=SourceLocation.range(l),y;if(ATOMS.hasOwnProperty(b)){var x=b;y={type:"atom",mode:this.mode,family:x,loc:$,text:c}}else y={type:b,mode:this.mode,loc:$,text:c};v=y}else if(c.charCodeAt(0)>=128)this.settings.strict&&(supportedCodepoint(c.charCodeAt(0))?this.mode==="math"&&this.settings.reportNonstrict("unicodeTextInMathMode",'Unicode text character "'+c[0]+'" used in math mode',l):this.settings.reportNonstrict("unknownSymbol",'Unrecognized Unicode character "'+c[0]+'"'+(" ("+c.charCodeAt(0)+")"),l)),v={type:"textord",mode:"text",loc:SourceLocation.range(l),text:c};else return null;if(this.consume(),g)for(var C=0;C<g[0].length;C++){var E=g[0][C];if(!unicodeAccents[E])throw new ParseError("Unknown accent ' "+E+"'",l);var N=unicodeAccents[E][this.mode]||unicodeAccents[E].text;if(!N)throw new ParseError("Accent "+E+" unsupported in "+this.mode+" mode",l);v={type:"accent",mode:this.mode,loc:SourceLocation.range(l),label:N,isStretchy:!1,isShifty:!0,base:v}}return v}}Parser.endOfExpression=["}","\\endgroup","\\end","\\right","&"];var parseTree=function s(l,c){if(!(typeof l=="string"||l instanceof String))throw new TypeError("KaTeX can only parse string typed expression");var d=new Parser(l,c);delete d.gullet.macros.current["\\df@tag"];var f=d.parse();if(delete d.gullet.macros.current["\\current@color"],delete d.gullet.macros.current["\\color"],d.gullet.macros.get("\\df@tag")){if(!c.displayMode)throw new ParseError("\\tag works only in display equations");f=[{type:"tag",mode:"text",body:f,tag:d.subparse([new Token("\\df@tag")])}]}return f},render=function s(l,c,d){c.textContent="";var f=renderToDomTree(l,d).toNode();c.appendChild(f)};typeof document<"u"&&document.compatMode!=="CSS1Compat"&&(typeof console<"u"&&console.warn("Warning: KaTeX doesn't work in quirks mode. Make sure your website has a suitable doctype."),render=function(){throw new ParseError("KaTeX doesn't work in quirks mode.")});var renderToString=function s(l,c){var d=renderToDomTree(l,c).toMarkup();return d},generateParseTree=function s(l,c){var d=new Settings(c);return parseTree(l,d)},renderError=function s(l,c,d){if(d.throwOnError||!(l instanceof ParseError))throw l;var f=buildCommon.makeSpan(["katex-error"],[new SymbolNode(c)]);return f.setAttribute("title",l.toString()),f.setAttribute("style","color:"+d.errorColor),f},renderToDomTree=function s(l,c){var d=new Settings(c);try{var f=parseTree(l,d);return buildTree(f,l,d)}catch(g){return renderError(g,l,d)}},renderToHTMLTree=function s(l,c){var d=new Settings(c);try{var f=parseTree(l,d);return buildHTMLTree(f,l,d)}catch(g){return renderError(g,l,d)}},katex={version:"0.16.11",render,renderToString,ParseError,SETTINGS_SCHEMA,__parse:generateParseTree,__renderToDomTree:renderToDomTree,__renderToHTMLTree:renderToHTMLTree,__setFontMetrics:setFontMetrics,__defineSymbol:defineSymbol,__defineFunction:defineFunction,__defineMacro:defineMacro,__domTree:{Span,Anchor,SymbolNode,SvgNode,PathNode,LineNode}};const katex$1=Object.freeze(Object.defineProperty({__proto__:null,default:katex},Symbol.toStringTag,{value:"Module"}));var readFromCache,addToCache;if(typeof WeakMap<"u"){let s=new WeakMap;readFromCache=l=>s.get(l),addToCache=(l,c)=>(s.set(l,c),c)}else{const s=[];let c=0;readFromCache=d=>{for(let f=0;f<s.length;f+=2)if(s[f]==d)return s[f+1]},addToCache=(d,f)=>(c==10&&(c=0),s[c++]=d,s[c++]=f)}var TableMap=class{constructor(s,l,c,d){this.width=s,this.height=l,this.map=c,this.problems=d}findCell(s){for(let l=0;l<this.map.length;l++){const c=this.map[l];if(c!=s)continue;const d=l%this.width,f=l/this.width|0;let g=d+1,v=f+1;for(let b=1;g<this.width&&this.map[l+b]==c;b++)g++;for(let b=1;v<this.height&&this.map[l+this.width*b]==c;b++)v++;return{left:d,top:f,right:g,bottom:v}}throw new RangeError(`No cell with offset ${s} found`)}colCount(s){for(let l=0;l<this.map.length;l++)if(this.map[l]==s)return l%this.width;throw new RangeError(`No cell with offset ${s} found`)}nextCell(s,l,c){const{left:d,right:f,top:g,bottom:v}=this.findCell(s);return l=="horiz"?(c<0?d==0:f==this.width)?null:this.map[g*this.width+(c<0?d-1:f)]:(c<0?g==0:v==this.height)?null:this.map[d+this.width*(c<0?g-1:v)]}rectBetween(s,l){const{left:c,right:d,top:f,bottom:g}=this.findCell(s),{left:v,right:b,top:$,bottom:y}=this.findCell(l);return{left:Math.min(c,v),top:Math.min(f,$),right:Math.max(d,b),bottom:Math.max(g,y)}}cellsInRect(s){const l=[],c={};for(let d=s.top;d<s.bottom;d++)for(let f=s.left;f<s.right;f++){const g=d*this.width+f,v=this.map[g];c[v]||(c[v]=!0,!(f==s.left&&f&&this.map[g-1]==v||d==s.top&&d&&this.map[g-this.width]==v)&&l.push(v))}return l}positionAt(s,l,c){for(let d=0,f=0;;d++){const g=f+c.child(d).nodeSize;if(d==s){let v=l+s*this.width;const b=(s+1)*this.width;for(;v<b&&this.map[v]<f;)v++;return v==b?g-1:this.map[v]}f=g}}static get(s){return readFromCache(s)||addToCache(s,computeMap(s))}};function computeMap(s){if(s.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+s.type.name);const l=findWidth(s),c=s.childCount,d=[];let f=0,g=null;const v=[];for(let y=0,x=l*c;y<x;y++)d[y]=0;for(let y=0,x=0;y<c;y++){const C=s.child(y);x++;for(let W=0;;W++){for(;f<d.length&&d[f]!=0;)f++;if(W==C.childCount)break;const q=C.child(W),{colspan:Y,rowspan:re,colwidth:se}=q.attrs;for(let de=0;de<re;de++){if(de+y>=c){(g||(g=[])).push({type:"overlong_rowspan",pos:x,n:re-de});break}const he=f+de*l;for(let ge=0;ge<Y;ge++){d[he+ge]==0?d[he+ge]=x:(g||(g=[])).push({type:"collision",row:y,pos:x,n:Y-ge});const Se=se&&se[ge];if(Se){const Ae=(he+ge)%l*2,Re=v[Ae];Re==null||Re!=Se&&v[Ae+1]==1?(v[Ae]=Se,v[Ae+1]=1):Re==Se&&v[Ae+1]++}}}f+=Y,x+=q.nodeSize}const E=(y+1)*l;let N=0;for(;f<E;)d[f++]==0&&N++;N&&(g||(g=[])).push({type:"missing",row:y,n:N}),x++}const b=new TableMap(l,c,d,g);let $=!1;for(let y=0;!$&&y<v.length;y+=2)v[y]!=null&&v[y+1]<c&&($=!0);return $&&findBadColWidths(b,v,s),b}function findWidth(s){let l=-1,c=!1;for(let d=0;d<s.childCount;d++){const f=s.child(d);let g=0;if(c)for(let v=0;v<d;v++){const b=s.child(v);for(let $=0;$<b.childCount;$++){const y=b.child($);v+y.attrs.rowspan>d&&(g+=y.attrs.colspan)}}for(let v=0;v<f.childCount;v++){const b=f.child(v);g+=b.attrs.colspan,b.attrs.rowspan>1&&(c=!0)}l==-1?l=g:l!=g&&(l=Math.max(l,g))}return l}function findBadColWidths(s,l,c){s.problems||(s.problems=[]);const d={};for(let f=0;f<s.map.length;f++){const g=s.map[f];if(d[g])continue;d[g]=!0;const v=c.nodeAt(g);if(!v)throw new RangeError(`No cell with offset ${g} found`);let b=null;const $=v.attrs;for(let y=0;y<$.colspan;y++){const x=(f+y)%s.width,C=l[x*2];C!=null&&(!$.colwidth||$.colwidth[y]!=C)&&((b||(b=freshColWidth($)))[y]=C)}b&&s.problems.unshift({type:"colwidth mismatch",pos:g,colwidth:b})}}function freshColWidth(s){if(s.colwidth)return s.colwidth.slice();const l=[];for(let c=0;c<s.colspan;c++)l.push(0);return l}function tableNodeTypes(s){let l=s.cached.tableNodeTypes;if(!l){l=s.cached.tableNodeTypes={};for(const c in s.nodes){const d=s.nodes[c],f=d.spec.tableRole;f&&(l[f]=d)}}return l}var tableEditingKey=new PluginKey("selectingCells");function cellAround(s){for(let l=s.depth-1;l>0;l--)if(s.node(l).type.spec.tableRole=="row")return s.node(0).resolve(s.before(l+1));return null}function cellWrapping(s){for(let l=s.depth;l>0;l--){const c=s.node(l).type.spec.tableRole;if(c==="cell"||c==="header_cell")return s.node(l)}return null}function isInTable(s){const l=s.selection.$head;for(let c=l.depth;c>0;c--)if(l.node(c).type.spec.tableRole=="row")return!0;return!1}function selectionCell(s){const l=s.selection;if("$anchorCell"in l&&l.$anchorCell)return l.$anchorCell.pos>l.$headCell.pos?l.$anchorCell:l.$headCell;if("node"in l&&l.node&&l.node.type.spec.tableRole=="cell")return l.$anchor;const c=cellAround(l.$head)||cellNear(l.$head);if(c)return c;throw new RangeError(`No cell found around position ${l.head}`)}function cellNear(s){for(let l=s.nodeAfter,c=s.pos;l;l=l.firstChild,c++){const d=l.type.spec.tableRole;if(d=="cell"||d=="header_cell")return s.doc.resolve(c)}for(let l=s.nodeBefore,c=s.pos;l;l=l.lastChild,c--){const d=l.type.spec.tableRole;if(d=="cell"||d=="header_cell")return s.doc.resolve(c-l.nodeSize)}}function pointsAtCell(s){return s.parent.type.spec.tableRole=="row"&&!!s.nodeAfter}function moveCellForward(s){return s.node(0).resolve(s.pos+s.nodeAfter.nodeSize)}function inSameTable(s,l){return s.depth==l.depth&&s.pos>=l.start(-1)&&s.pos<=l.end(-1)}function nextCell(s,l,c){const d=s.node(-1),f=TableMap.get(d),g=s.start(-1),v=f.nextCell(s.pos-g,l,c);return v==null?null:s.node(0).resolve(g+v)}function removeColSpan(s,l,c=1){const d={...s,colspan:s.colspan-c};return d.colwidth&&(d.colwidth=d.colwidth.slice(),d.colwidth.splice(l,c),d.colwidth.some(f=>f>0)||(d.colwidth=null)),d}function addColSpan(s,l,c=1){const d={...s,colspan:s.colspan+c};if(d.colwidth){d.colwidth=d.colwidth.slice();for(let f=0;f<c;f++)d.colwidth.splice(l,0,0)}return d}function columnIsHeader(s,l,c){const d=tableNodeTypes(l.type.schema).header_cell;for(let f=0;f<s.height;f++)if(l.nodeAt(s.map[c+f*s.width]).type!=d)return!1;return!0}var CellSelection=class v_e extends Selection$2{constructor(l,c=l){const d=l.node(-1),f=TableMap.get(d),g=l.start(-1),v=f.rectBetween(l.pos-g,c.pos-g),b=l.node(0),$=f.cellsInRect(v).filter(x=>x!=c.pos-g);$.unshift(c.pos-g);const y=$.map(x=>{const C=d.nodeAt(x);if(!C)throw RangeError(`No cell with offset ${x} found`);const E=g+x+1;return new SelectionRange(b.resolve(E),b.resolve(E+C.content.size))});super(y[0].$from,y[0].$to,y),this.$anchorCell=l,this.$headCell=c}map(l,c){const d=l.resolve(c.map(this.$anchorCell.pos)),f=l.resolve(c.map(this.$headCell.pos));if(pointsAtCell(d)&&pointsAtCell(f)&&inSameTable(d,f)){const g=this.$anchorCell.node(-1)!=d.node(-1);return g&&this.isRowSelection()?v_e.rowSelection(d,f):g&&this.isColSelection()?v_e.colSelection(d,f):new v_e(d,f)}return TextSelection.between(d,f)}content(){const l=this.$anchorCell.node(-1),c=TableMap.get(l),d=this.$anchorCell.start(-1),f=c.rectBetween(this.$anchorCell.pos-d,this.$headCell.pos-d),g={},v=[];for(let $=f.top;$<f.bottom;$++){const y=[];for(let x=$*c.width+f.left,C=f.left;C<f.right;C++,x++){const E=c.map[x];if(g[E])continue;g[E]=!0;const N=c.findCell(E);let W=l.nodeAt(E);if(!W)throw RangeError(`No cell with offset ${E} found`);const q=f.left-N.left,Y=N.right-f.right;if(q>0||Y>0){let re=W.attrs;if(q>0&&(re=removeColSpan(re,0,q)),Y>0&&(re=removeColSpan(re,re.colspan-Y,Y)),N.left<f.left){if(W=W.type.createAndFill(re),!W)throw RangeError(`Could not create cell with attrs ${JSON.stringify(re)}`)}else W=W.type.create(re,W.content)}if(N.top<f.top||N.bottom>f.bottom){const re={...W.attrs,rowspan:Math.min(N.bottom,f.bottom)-Math.max(N.top,f.top)};N.top<f.top?W=W.type.createAndFill(re):W=W.type.create(re,W.content)}y.push(W)}v.push(l.child($).copy(Fragment.from(y)))}const b=this.isColSelection()&&this.isRowSelection()?l:v;return new Slice(Fragment.from(b),1,1)}replace(l,c=Slice.empty){const d=l.steps.length,f=this.ranges;for(let v=0;v<f.length;v++){const{$from:b,$to:$}=f[v],y=l.mapping.slice(d);l.replace(y.map(b.pos),y.map($.pos),v?Slice.empty:c)}const g=Selection$2.findFrom(l.doc.resolve(l.mapping.slice(d).map(this.to)),-1);g&&l.setSelection(g)}replaceWith(l,c){this.replace(l,new Slice(Fragment.from(c),0,0))}forEachCell(l){const c=this.$anchorCell.node(-1),d=TableMap.get(c),f=this.$anchorCell.start(-1),g=d.cellsInRect(d.rectBetween(this.$anchorCell.pos-f,this.$headCell.pos-f));for(let v=0;v<g.length;v++)l(c.nodeAt(g[v]),f+g[v])}isColSelection(){const l=this.$anchorCell.index(-1),c=this.$headCell.index(-1);if(Math.min(l,c)>0)return!1;const d=l+this.$anchorCell.nodeAfter.attrs.rowspan,f=c+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(d,f)==this.$headCell.node(-1).childCount}static colSelection(l,c=l){const d=l.node(-1),f=TableMap.get(d),g=l.start(-1),v=f.findCell(l.pos-g),b=f.findCell(c.pos-g),$=l.node(0);return v.top<=b.top?(v.top>0&&(l=$.resolve(g+f.map[v.left])),b.bottom<f.height&&(c=$.resolve(g+f.map[f.width*(f.height-1)+b.right-1]))):(b.top>0&&(c=$.resolve(g+f.map[b.left])),v.bottom<f.height&&(l=$.resolve(g+f.map[f.width*(f.height-1)+v.right-1]))),new v_e(l,c)}isRowSelection(){const l=this.$anchorCell.node(-1),c=TableMap.get(l),d=this.$anchorCell.start(-1),f=c.colCount(this.$anchorCell.pos-d),g=c.colCount(this.$headCell.pos-d);if(Math.min(f,g)>0)return!1;const v=f+this.$anchorCell.nodeAfter.attrs.colspan,b=g+this.$headCell.nodeAfter.attrs.colspan;return Math.max(v,b)==c.width}eq(l){return l instanceof v_e&&l.$anchorCell.pos==this.$anchorCell.pos&&l.$headCell.pos==this.$headCell.pos}static rowSelection(l,c=l){const d=l.node(-1),f=TableMap.get(d),g=l.start(-1),v=f.findCell(l.pos-g),b=f.findCell(c.pos-g),$=l.node(0);return v.left<=b.left?(v.left>0&&(l=$.resolve(g+f.map[v.top*f.width])),b.right<f.width&&(c=$.resolve(g+f.map[f.width*(b.top+1)-1]))):(b.left>0&&(c=$.resolve(g+f.map[b.top*f.width])),v.right<f.width&&(l=$.resolve(g+f.map[f.width*(v.top+1)-1]))),new v_e(l,c)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(l,c){return new v_e(l.resolve(c.anchor),l.resolve(c.head))}static create(l,c,d=c){return new v_e(l.resolve(c),l.resolve(d))}getBookmark(){return new CellBookmark(this.$anchorCell.pos,this.$headCell.pos)}};CellSelection.prototype.visible=!1;Selection$2.jsonID("cell",CellSelection);var CellBookmark=class D3e{constructor(l,c){this.anchor=l,this.head=c}map(l){return new D3e(l.map(this.anchor),l.map(this.head))}resolve(l){const c=l.resolve(this.anchor),d=l.resolve(this.head);return c.parent.type.spec.tableRole=="row"&&d.parent.type.spec.tableRole=="row"&&c.index()<c.parent.childCount&&d.index()<d.parent.childCount&&inSameTable(c,d)?new CellSelection(c,d):Selection$2.near(d,1)}};function drawCellSelection(s){if(!(s.selection instanceof CellSelection))return null;const l=[];return s.selection.forEachCell((c,d)=>{l.push(Decoration.node(d,d+c.nodeSize,{class:"selectedCell"}))}),DecorationSet.create(s.doc,l)}function isCellBoundarySelection({$from:s,$to:l}){if(s.pos==l.pos||s.pos<s.pos-6)return!1;let c=s.pos,d=l.pos,f=s.depth;for(;f>=0&&!(s.after(f+1)<s.end(f));f--,c++);for(let g=l.depth;g>=0&&!(l.before(g+1)>l.start(g));g--,d--);return c==d&&/row|table/.test(s.node(f).type.spec.tableRole)}function isTextSelectionAcrossCells({$from:s,$to:l}){let c,d;for(let f=s.depth;f>0;f--){const g=s.node(f);if(g.type.spec.tableRole==="cell"||g.type.spec.tableRole==="header_cell"){c=g;break}}for(let f=l.depth;f>0;f--){const g=l.node(f);if(g.type.spec.tableRole==="cell"||g.type.spec.tableRole==="header_cell"){d=g;break}}return c!==d&&l.parentOffset===0}function normalizeSelection(s,l,c){const d=(l||s).selection,f=(l||s).doc;let g,v;if(d instanceof NodeSelection&&(v=d.node.type.spec.tableRole)){if(v=="cell"||v=="header_cell")g=CellSelection.create(f,d.from);else if(v=="row"){const b=f.resolve(d.from+1);g=CellSelection.rowSelection(b,b)}else if(!c){const b=TableMap.get(d.node),$=d.from+1,y=$+b.map[b.width*b.height-1];g=CellSelection.create(f,$+1,y)}}else d instanceof TextSelection&&isCellBoundarySelection(d)?g=TextSelection.create(f,d.from):d instanceof TextSelection&&isTextSelectionAcrossCells(d)&&(g=TextSelection.create(f,d.$from.start(),d.$from.end()));return g&&(l||(l=s.tr)).setSelection(g),l}var fixTablesKey=new PluginKey("fix-tables");function changedDescendants(s,l,c,d){const f=s.childCount,g=l.childCount;e:for(let v=0,b=0;v<g;v++){const $=l.child(v);for(let y=b,x=Math.min(f,v+3);y<x;y++)if(s.child(y)==$){b=y+1,c+=$.nodeSize;continue e}d($,c),b<f&&s.child(b).sameMarkup($)?changedDescendants(s.child(b),$,c+1,d):$.nodesBetween(0,$.content.size,d,c+1),c+=$.nodeSize}}function fixTables(s,l){let c;const d=(f,g)=>{f.type.spec.tableRole=="table"&&(c=fixTable(s,f,g,c))};return l?l.doc!=s.doc&&changedDescendants(l.doc,s.doc,0,d):s.doc.descendants(d),c}function fixTable(s,l,c,d){const f=TableMap.get(l);if(!f.problems)return d;d||(d=s.tr);const g=[];for(let $=0;$<f.height;$++)g.push(0);for(let $=0;$<f.problems.length;$++){const y=f.problems[$];if(y.type=="collision"){const x=l.nodeAt(y.pos);if(!x)continue;const C=x.attrs;for(let E=0;E<C.rowspan;E++)g[y.row+E]+=y.n;d.setNodeMarkup(d.mapping.map(c+1+y.pos),null,removeColSpan(C,C.colspan-y.n,y.n))}else if(y.type=="missing")g[y.row]+=y.n;else if(y.type=="overlong_rowspan"){const x=l.nodeAt(y.pos);if(!x)continue;d.setNodeMarkup(d.mapping.map(c+1+y.pos),null,{...x.attrs,rowspan:x.attrs.rowspan-y.n})}else if(y.type=="colwidth mismatch"){const x=l.nodeAt(y.pos);if(!x)continue;d.setNodeMarkup(d.mapping.map(c+1+y.pos),null,{...x.attrs,colwidth:y.colwidth})}}let v,b;for(let $=0;$<g.length;$++)g[$]&&(v==null&&(v=$),b=$);for(let $=0,y=c+1;$<f.height;$++){const x=l.child($),C=y+x.nodeSize,E=g[$];if(E>0){let N="cell";x.firstChild&&(N=x.firstChild.type.spec.tableRole);const W=[];for(let Y=0;Y<E;Y++){const re=tableNodeTypes(s.schema)[N].createAndFill();re&&W.push(re)}const q=($==0||v==$-1)&&b==$?y+1:C-1;d.insert(d.mapping.map(q),W)}y=C}return d.setMeta(fixTablesKey,{fixTables:!0})}function selectedRect(s){const l=s.selection,c=selectionCell(s),d=c.node(-1),f=c.start(-1),g=TableMap.get(d);return{...l instanceof CellSelection?g.rectBetween(l.$anchorCell.pos-f,l.$headCell.pos-f):g.findCell(c.pos-f),tableStart:f,map:g,table:d}}function addColumn(s,{map:l,tableStart:c,table:d},f){let g=f>0?-1:0;columnIsHeader(l,d,f+g)&&(g=f==0||f==l.width?null:0);for(let v=0;v<l.height;v++){const b=v*l.width+f;if(f>0&&f<l.width&&l.map[b-1]==l.map[b]){const $=l.map[b],y=d.nodeAt($);s.setNodeMarkup(s.mapping.map(c+$),null,addColSpan(y.attrs,f-l.colCount($))),v+=y.attrs.rowspan-1}else{const $=g==null?tableNodeTypes(d.type.schema).cell:d.nodeAt(l.map[b+g]).type,y=l.positionAt(v,f,d);s.insert(s.mapping.map(c+y),$.createAndFill())}}return s}function addColumnBefore(s,l){if(!isInTable(s))return!1;if(l){const c=selectedRect(s);l(addColumn(s.tr,c,c.left))}return!0}function addColumnAfter(s,l){if(!isInTable(s))return!1;if(l){const c=selectedRect(s);l(addColumn(s.tr,c,c.right))}return!0}function removeColumn(s,{map:l,table:c,tableStart:d},f){const g=s.mapping.maps.length;for(let v=0;v<l.height;){const b=v*l.width+f,$=l.map[b],y=c.nodeAt($),x=y.attrs;if(f>0&&l.map[b-1]==$||f<l.width-1&&l.map[b+1]==$)s.setNodeMarkup(s.mapping.slice(g).map(d+$),null,removeColSpan(x,f-l.colCount($)));else{const C=s.mapping.slice(g).map(d+$);s.delete(C,C+y.nodeSize)}v+=x.rowspan}}function deleteColumn(s,l){if(!isInTable(s))return!1;if(l){const c=selectedRect(s),d=s.tr;if(c.left==0&&c.right==c.map.width)return!1;for(let f=c.right-1;removeColumn(d,c,f),f!=c.left;f--){const g=c.tableStart?d.doc.nodeAt(c.tableStart-1):d.doc;if(!g)throw RangeError("No table found");c.table=g,c.map=TableMap.get(g)}l(d)}return!0}function rowIsHeader(s,l,c){var d;const f=tableNodeTypes(l.type.schema).header_cell;for(let g=0;g<s.width;g++)if(((d=l.nodeAt(s.map[g+c*s.width]))==null?void 0:d.type)!=f)return!1;return!0}function addRow(s,{map:l,tableStart:c,table:d},f){var g;let v=c;for(let y=0;y<f;y++)v+=d.child(y).nodeSize;const b=[];let $=f>0?-1:0;rowIsHeader(l,d,f+$)&&($=f==0||f==l.height?null:0);for(let y=0,x=l.width*f;y<l.width;y++,x++)if(f>0&&f<l.height&&l.map[x]==l.map[x-l.width]){const C=l.map[x],E=d.nodeAt(C).attrs;s.setNodeMarkup(c+C,null,{...E,rowspan:E.rowspan+1}),y+=E.colspan-1}else{const C=$==null?tableNodeTypes(d.type.schema).cell:(g=d.nodeAt(l.map[x+$*l.width]))==null?void 0:g.type,E=C==null?void 0:C.createAndFill();E&&b.push(E)}return s.insert(v,tableNodeTypes(d.type.schema).row.create(null,b)),s}function addRowBefore(s,l){if(!isInTable(s))return!1;if(l){const c=selectedRect(s);l(addRow(s.tr,c,c.top))}return!0}function addRowAfter(s,l){if(!isInTable(s))return!1;if(l){const c=selectedRect(s);l(addRow(s.tr,c,c.bottom))}return!0}function removeRow(s,{map:l,table:c,tableStart:d},f){let g=0;for(let y=0;y<f;y++)g+=c.child(y).nodeSize;const v=g+c.child(f).nodeSize,b=s.mapping.maps.length;s.delete(g+d,v+d);const $=new Set;for(let y=0,x=f*l.width;y<l.width;y++,x++){const C=l.map[x];if(!$.has(C)){if($.add(C),f>0&&C==l.map[x-l.width]){const E=c.nodeAt(C).attrs;s.setNodeMarkup(s.mapping.slice(b).map(C+d),null,{...E,rowspan:E.rowspan-1}),y+=E.colspan-1}else if(f<l.height&&C==l.map[x+l.width]){const E=c.nodeAt(C),N=E.attrs,W=E.type.create({...N,rowspan:E.attrs.rowspan-1},E.content),q=l.positionAt(f+1,y,c);s.insert(s.mapping.slice(b).map(d+q),W),y+=N.colspan-1}}}}function deleteRow(s,l){if(!isInTable(s))return!1;if(l){const c=selectedRect(s),d=s.tr;if(c.top==0&&c.bottom==c.map.height)return!1;for(let f=c.bottom-1;removeRow(d,c,f),f!=c.top;f--){const g=c.tableStart?d.doc.nodeAt(c.tableStart-1):d.doc;if(!g)throw RangeError("No table found");c.table=g,c.map=TableMap.get(c.table)}l(d)}return!0}function isEmpty(s){const l=s.content;return l.childCount==1&&l.child(0).isTextblock&&l.child(0).childCount==0}function cellsOverlapRectangle({width:s,height:l,map:c},d){let f=d.top*s+d.left,g=f,v=(d.bottom-1)*s+d.left,b=f+(d.right-d.left-1);for(let $=d.top;$<d.bottom;$++){if(d.left>0&&c[g]==c[g-1]||d.right<s&&c[b]==c[b+1])return!0;g+=s,b+=s}for(let $=d.left;$<d.right;$++){if(d.top>0&&c[f]==c[f-s]||d.bottom<l&&c[v]==c[v+s])return!0;f++,v++}return!1}function mergeCells(s,l){const c=s.selection;if(!(c instanceof CellSelection)||c.$anchorCell.pos==c.$headCell.pos)return!1;const d=selectedRect(s),{map:f}=d;if(cellsOverlapRectangle(f,d))return!1;if(l){const g=s.tr,v={};let b=Fragment.empty,$,y;for(let x=d.top;x<d.bottom;x++)for(let C=d.left;C<d.right;C++){const E=f.map[x*f.width+C],N=d.table.nodeAt(E);if(!(v[E]||!N))if(v[E]=!0,$==null)$=E,y=N;else{isEmpty(N)||(b=b.append(N.content));const W=g.mapping.map(E+d.tableStart);g.delete(W,W+N.nodeSize)}}if($==null||y==null)return!0;if(g.setNodeMarkup($+d.tableStart,null,{...addColSpan(y.attrs,y.attrs.colspan,d.right-d.left-y.attrs.colspan),rowspan:d.bottom-d.top}),b.size){const x=$+1+y.content.size,C=isEmpty(y)?$+1:x;g.replaceWith(C+d.tableStart,x+d.tableStart,b)}g.setSelection(new CellSelection(g.doc.resolve($+d.tableStart))),l(g)}return!0}function splitCell(s,l){const c=tableNodeTypes(s.schema);return splitCellWithType(({node:d})=>c[d.type.spec.tableRole])(s,l)}function splitCellWithType(s){return(l,c)=>{var d;const f=l.selection;let g,v;if(f instanceof CellSelection){if(f.$anchorCell.pos!=f.$headCell.pos)return!1;g=f.$anchorCell.nodeAfter,v=f.$anchorCell.pos}else{if(g=cellWrapping(f.$from),!g)return!1;v=(d=cellAround(f.$from))==null?void 0:d.pos}if(g==null||v==null||g.attrs.colspan==1&&g.attrs.rowspan==1)return!1;if(c){let b=g.attrs;const $=[],y=b.colwidth;b.rowspan>1&&(b={...b,rowspan:1}),b.colspan>1&&(b={...b,colspan:1});const x=selectedRect(l),C=l.tr;for(let N=0;N<x.right-x.left;N++)$.push(y?{...b,colwidth:y&&y[N]?[y[N]]:null}:b);let E;for(let N=x.top;N<x.bottom;N++){let W=x.map.positionAt(N,x.left,x.table);N==x.top&&(W+=g.nodeSize);for(let q=x.left,Y=0;q<x.right;q++,Y++)q==x.left&&N==x.top||C.insert(E=C.mapping.map(W+x.tableStart,1),s({node:g,row:N,col:q}).createAndFill($[Y]))}C.setNodeMarkup(v,s({node:g,row:x.top,col:x.left}),$[0]),f instanceof CellSelection&&C.setSelection(new CellSelection(C.doc.resolve(f.$anchorCell.pos),E?C.doc.resolve(E):void 0)),c(C)}return!0}}function setCellAttr(s,l){return function(c,d){if(!isInTable(c))return!1;const f=selectionCell(c);if(f.nodeAfter.attrs[s]===l)return!1;if(d){const g=c.tr;c.selection instanceof CellSelection?c.selection.forEachCell((v,b)=>{v.attrs[s]!==l&&g.setNodeMarkup(b,null,{...v.attrs,[s]:l})}):g.setNodeMarkup(f.pos,null,{...f.nodeAfter.attrs,[s]:l}),d(g)}return!0}}function deprecated_toggleHeader(s){return function(l,c){if(!isInTable(l))return!1;if(c){const d=tableNodeTypes(l.schema),f=selectedRect(l),g=l.tr,v=f.map.cellsInRect(s=="column"?{left:f.left,top:0,right:f.right,bottom:f.map.height}:s=="row"?{left:0,top:f.top,right:f.map.width,bottom:f.bottom}:f),b=v.map($=>f.table.nodeAt($));for(let $=0;$<v.length;$++)b[$].type==d.header_cell&&g.setNodeMarkup(f.tableStart+v[$],d.cell,b[$].attrs);if(g.steps.length==0)for(let $=0;$<v.length;$++)g.setNodeMarkup(f.tableStart+v[$],d.header_cell,b[$].attrs);c(g)}return!0}}function isHeaderEnabledByType(s,l,c){const d=l.map.cellsInRect({left:0,top:0,right:s=="row"?l.map.width:1,bottom:s=="column"?l.map.height:1});for(let f=0;f<d.length;f++){const g=l.table.nodeAt(d[f]);if(g&&g.type!==c.header_cell)return!1}return!0}function toggleHeader(s,l){return l=l||{useDeprecatedLogic:!1},l.useDeprecatedLogic?deprecated_toggleHeader(s):function(c,d){if(!isInTable(c))return!1;if(d){const f=tableNodeTypes(c.schema),g=selectedRect(c),v=c.tr,b=isHeaderEnabledByType("row",g,f),$=isHeaderEnabledByType("column",g,f),x=(s==="column"?b:s==="row"?$:!1)?1:0,C=s=="column"?{left:0,top:x,right:1,bottom:g.map.height}:s=="row"?{left:x,top:0,right:g.map.width,bottom:1}:g,E=s=="column"?$?f.cell:f.header_cell:s=="row"?b?f.cell:f.header_cell:f.cell;g.map.cellsInRect(C).forEach(N=>{const W=N+g.tableStart,q=v.doc.nodeAt(W);q&&v.setNodeMarkup(W,E,q.attrs)}),d(v)}return!0}}toggleHeader("row",{useDeprecatedLogic:!0});toggleHeader("column",{useDeprecatedLogic:!0});var toggleHeaderCell=toggleHeader("cell",{useDeprecatedLogic:!0});function findNextCell(s,l){if(l<0){const c=s.nodeBefore;if(c)return s.pos-c.nodeSize;for(let d=s.index(-1)-1,f=s.before();d>=0;d--){const g=s.node(-1).child(d),v=g.lastChild;if(v)return f-1-v.nodeSize;f-=g.nodeSize}}else{if(s.index()<s.parent.childCount-1)return s.pos+s.nodeAfter.nodeSize;const c=s.node(-1);for(let d=s.indexAfter(-1),f=s.after();d<c.childCount;d++){const g=c.child(d);if(g.childCount)return f+1;f+=g.nodeSize}}return null}function goToNextCell(s){return function(l,c){if(!isInTable(l))return!1;const d=findNextCell(selectionCell(l),s);if(d==null)return!1;if(c){const f=l.doc.resolve(d);c(l.tr.setSelection(TextSelection.between(f,moveCellForward(f))).scrollIntoView())}return!0}}function deleteTable(s,l){const c=s.selection.$anchor;for(let d=c.depth;d>0;d--)if(c.node(d).type.spec.tableRole=="table")return l&&l(s.tr.delete(c.before(d),c.after(d)).scrollIntoView()),!0;return!1}function deleteCellSelection(s,l){const c=s.selection;if(!(c instanceof CellSelection))return!1;if(l){const d=s.tr,f=tableNodeTypes(s.schema).cell.createAndFill().content;c.forEachCell((g,v)=>{g.content.eq(f)||d.replace(d.mapping.map(v+1),d.mapping.map(v+g.nodeSize-1),new Slice(f,0,0))}),d.docChanged&&l(d)}return!0}function pastedCells(s){if(!s.size)return null;let{content:l,openStart:c,openEnd:d}=s;for(;l.childCount==1&&(c>0&&d>0||l.child(0).type.spec.tableRole=="table");)c--,d--,l=l.child(0).content;const f=l.child(0),g=f.type.spec.tableRole,v=f.type.schema,b=[];if(g=="row")for(let $=0;$<l.childCount;$++){let y=l.child($).content;const x=$?0:Math.max(0,c-1),C=$<l.childCount-1?0:Math.max(0,d-1);(x||C)&&(y=fitSlice(tableNodeTypes(v).row,new Slice(y,x,C)).content),b.push(y)}else if(g=="cell"||g=="header_cell")b.push(c||d?fitSlice(tableNodeTypes(v).row,new Slice(l,c,d)).content:l);else return null;return ensureRectangular(v,b)}function ensureRectangular(s,l){const c=[];for(let f=0;f<l.length;f++){const g=l[f];for(let v=g.childCount-1;v>=0;v--){const{rowspan:b,colspan:$}=g.child(v).attrs;for(let y=f;y<f+b;y++)c[y]=(c[y]||0)+$}}let d=0;for(let f=0;f<c.length;f++)d=Math.max(d,c[f]);for(let f=0;f<c.length;f++)if(f>=l.length&&l.push(Fragment.empty),c[f]<d){const g=tableNodeTypes(s).cell.createAndFill(),v=[];for(let b=c[f];b<d;b++)v.push(g);l[f]=l[f].append(Fragment.from(v))}return{height:l.length,width:d,rows:l}}function fitSlice(s,l){const c=s.createAndFill();return new Transform$1(c).replace(0,c.content.size,l).doc}function clipCells({width:s,height:l,rows:c},d,f){if(s!=d){const g=[],v=[];for(let b=0;b<c.length;b++){const $=c[b],y=[];for(let x=g[b]||0,C=0;x<d;C++){let E=$.child(C%$.childCount);x+E.attrs.colspan>d&&(E=E.type.createChecked(removeColSpan(E.attrs,E.attrs.colspan,x+E.attrs.colspan-d),E.content)),y.push(E),x+=E.attrs.colspan;for(let N=1;N<E.attrs.rowspan;N++)g[b+N]=(g[b+N]||0)+E.attrs.colspan}v.push(Fragment.from(y))}c=v,s=d}if(l!=f){const g=[];for(let v=0,b=0;v<f;v++,b++){const $=[],y=c[b%l];for(let x=0;x<y.childCount;x++){let C=y.child(x);v+C.attrs.rowspan>f&&(C=C.type.create({...C.attrs,rowspan:Math.max(1,f-C.attrs.rowspan)},C.content)),$.push(C)}g.push(Fragment.from($))}c=g,l=f}return{width:s,height:l,rows:c}}function growTable(s,l,c,d,f,g,v){const b=s.doc.type.schema,$=tableNodeTypes(b);let y,x;if(f>l.width)for(let C=0,E=0;C<l.height;C++){const N=c.child(C);E+=N.nodeSize;const W=[];let q;N.lastChild==null||N.lastChild.type==$.cell?q=y||(y=$.cell.createAndFill()):q=x||(x=$.header_cell.createAndFill());for(let Y=l.width;Y<f;Y++)W.push(q);s.insert(s.mapping.slice(v).map(E-1+d),W)}if(g>l.height){const C=[];for(let W=0,q=(l.height-1)*l.width;W<Math.max(l.width,f);W++){const Y=W>=l.width?!1:c.nodeAt(l.map[q+W]).type==$.header_cell;C.push(Y?x||(x=$.header_cell.createAndFill()):y||(y=$.cell.createAndFill()))}const E=$.row.create(null,Fragment.from(C)),N=[];for(let W=l.height;W<g;W++)N.push(E);s.insert(s.mapping.slice(v).map(d+c.nodeSize-2),N)}return!!(y||x)}function isolateHorizontal(s,l,c,d,f,g,v,b){if(v==0||v==l.height)return!1;let $=!1;for(let y=f;y<g;y++){const x=v*l.width+y,C=l.map[x];if(l.map[x-l.width]==C){$=!0;const E=c.nodeAt(C),{top:N,left:W}=l.findCell(C);s.setNodeMarkup(s.mapping.slice(b).map(C+d),null,{...E.attrs,rowspan:v-N}),s.insert(s.mapping.slice(b).map(l.positionAt(v,W,c)),E.type.createAndFill({...E.attrs,rowspan:N+E.attrs.rowspan-v})),y+=E.attrs.colspan-1}}return $}function isolateVertical(s,l,c,d,f,g,v,b){if(v==0||v==l.width)return!1;let $=!1;for(let y=f;y<g;y++){const x=y*l.width+v,C=l.map[x];if(l.map[x-1]==C){$=!0;const E=c.nodeAt(C),N=l.colCount(C),W=s.mapping.slice(b).map(C+d);s.setNodeMarkup(W,null,removeColSpan(E.attrs,v-N,E.attrs.colspan-(v-N))),s.insert(W+E.nodeSize,E.type.createAndFill(removeColSpan(E.attrs,0,v-N))),y+=E.attrs.rowspan-1}}return $}function insertCells(s,l,c,d,f){let g=c?s.doc.nodeAt(c-1):s.doc;if(!g)throw new Error("No table found");let v=TableMap.get(g);const{top:b,left:$}=d,y=$+f.width,x=b+f.height,C=s.tr;let E=0;function N(){if(g=c?C.doc.nodeAt(c-1):C.doc,!g)throw new Error("No table found");v=TableMap.get(g),E=C.mapping.maps.length}growTable(C,v,g,c,y,x,E)&&N(),isolateHorizontal(C,v,g,c,$,y,b,E)&&N(),isolateHorizontal(C,v,g,c,$,y,x,E)&&N(),isolateVertical(C,v,g,c,b,x,$,E)&&N(),isolateVertical(C,v,g,c,b,x,y,E)&&N();for(let W=b;W<x;W++){const q=v.positionAt(W,$,g),Y=v.positionAt(W,y,g);C.replace(C.mapping.slice(E).map(q+c),C.mapping.slice(E).map(Y+c),new Slice(f.rows[W-b],0,0))}N(),C.setSelection(new CellSelection(C.doc.resolve(c+v.positionAt(b,$,g)),C.doc.resolve(c+v.positionAt(x-1,y-1,g)))),l(C)}var handleKeyDown=keydownHandler({ArrowLeft:arrow("horiz",-1),ArrowRight:arrow("horiz",1),ArrowUp:arrow("vert",-1),ArrowDown:arrow("vert",1),"Shift-ArrowLeft":shiftArrow("horiz",-1),"Shift-ArrowRight":shiftArrow("horiz",1),"Shift-ArrowUp":shiftArrow("vert",-1),"Shift-ArrowDown":shiftArrow("vert",1),Backspace:deleteCellSelection,"Mod-Backspace":deleteCellSelection,Delete:deleteCellSelection,"Mod-Delete":deleteCellSelection});function maybeSetSelection(s,l,c){return c.eq(s.selection)?!1:(l&&l(s.tr.setSelection(c).scrollIntoView()),!0)}function arrow(s,l){return(c,d,f)=>{if(!f)return!1;const g=c.selection;if(g instanceof CellSelection)return maybeSetSelection(c,d,Selection$2.near(g.$headCell,l));if(s!="horiz"&&!g.empty)return!1;const v=atEndOfCell(f,s,l);if(v==null)return!1;if(s=="horiz")return maybeSetSelection(c,d,Selection$2.near(c.doc.resolve(g.head+l),l));{const b=c.doc.resolve(v),$=nextCell(b,s,l);let y;return $?y=Selection$2.near($,1):l<0?y=Selection$2.near(c.doc.resolve(b.before(-1)),-1):y=Selection$2.near(c.doc.resolve(b.after(-1)),1),maybeSetSelection(c,d,y)}}}function shiftArrow(s,l){return(c,d,f)=>{if(!f)return!1;const g=c.selection;let v;if(g instanceof CellSelection)v=g;else{const $=atEndOfCell(f,s,l);if($==null)return!1;v=new CellSelection(c.doc.resolve($))}const b=nextCell(v.$headCell,s,l);return b?maybeSetSelection(c,d,new CellSelection(v.$anchorCell,b)):!1}}function handleTripleClick(s,l){const c=s.state.doc,d=cellAround(c.resolve(l));return d?(s.dispatch(s.state.tr.setSelection(new CellSelection(d))),!0):!1}function handlePaste(s,l,c){if(!isInTable(s.state))return!1;let d=pastedCells(c);const f=s.state.selection;if(f instanceof CellSelection){d||(d={width:1,height:1,rows:[Fragment.from(fitSlice(tableNodeTypes(s.state.schema).cell,c))]});const g=f.$anchorCell.node(-1),v=f.$anchorCell.start(-1),b=TableMap.get(g).rectBetween(f.$anchorCell.pos-v,f.$headCell.pos-v);return d=clipCells(d,b.right-b.left,b.bottom-b.top),insertCells(s.state,s.dispatch,v,b,d),!0}else if(d){const g=selectionCell(s.state),v=g.start(-1);return insertCells(s.state,s.dispatch,v,TableMap.get(g.node(-1)).findCell(g.pos-v),d),!0}else return!1}function handleMouseDown(s,l){var c;if(l.ctrlKey||l.metaKey)return;const d=domInCell(s,l.target);let f;if(l.shiftKey&&s.state.selection instanceof CellSelection)g(s.state.selection.$anchorCell,l),l.preventDefault();else if(l.shiftKey&&d&&(f=cellAround(s.state.selection.$anchor))!=null&&((c=cellUnderMouse(s,l))==null?void 0:c.pos)!=f.pos)g(f,l),l.preventDefault();else if(!d)return;function g($,y){let x=cellUnderMouse(s,y);const C=tableEditingKey.getState(s.state)==null;if(!x||!inSameTable($,x))if(C)x=$;else return;const E=new CellSelection($,x);if(C||!s.state.selection.eq(E)){const N=s.state.tr.setSelection(E);C&&N.setMeta(tableEditingKey,$.pos),s.dispatch(N)}}function v(){s.root.removeEventListener("mouseup",v),s.root.removeEventListener("dragstart",v),s.root.removeEventListener("mousemove",b),tableEditingKey.getState(s.state)!=null&&s.dispatch(s.state.tr.setMeta(tableEditingKey,-1))}function b($){const y=$,x=tableEditingKey.getState(s.state);let C;if(x!=null)C=s.state.doc.resolve(x);else if(domInCell(s,y.target)!=d&&(C=cellUnderMouse(s,l),!C))return v();C&&g(C,y)}s.root.addEventListener("mouseup",v),s.root.addEventListener("dragstart",v),s.root.addEventListener("mousemove",b)}function atEndOfCell(s,l,c){if(!(s.state.selection instanceof TextSelection))return null;const{$head:d}=s.state.selection;for(let f=d.depth-1;f>=0;f--){const g=d.node(f);if((c<0?d.index(f):d.indexAfter(f))!=(c<0?0:g.childCount))return null;if(g.type.spec.tableRole=="cell"||g.type.spec.tableRole=="header_cell"){const b=d.before(f),$=l=="vert"?c>0?"down":"up":c>0?"right":"left";return s.endOfTextblock($)?b:null}}return null}function domInCell(s,l){for(;l&&l!=s.dom;l=l.parentNode)if(l.nodeName=="TD"||l.nodeName=="TH")return l;return null}function cellUnderMouse(s,l){const c=s.posAtCoords({left:l.clientX,top:l.clientY});return c&&c?cellAround(s.state.doc.resolve(c.pos)):null}var TableView$1=class{constructor(l,c){this.node=l,this.cellMinWidth=c,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),updateColumnsOnResize(l,this.colgroup,this.table,c),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(l){return l.type!=this.node.type?!1:(this.node=l,updateColumnsOnResize(l,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(l){return l.type=="attributes"&&(l.target==this.table||this.colgroup.contains(l.target))}};function updateColumnsOnResize(s,l,c,d,f,g){var v;let b=0,$=!0,y=l.firstChild;const x=s.firstChild;if(x){for(let C=0,E=0;C<x.childCount;C++){const{colspan:N,colwidth:W}=x.child(C).attrs;for(let q=0;q<N;q++,E++){const Y=f==E?g:W&&W[q],re=Y?Y+"px":"";b+=Y||d,Y||($=!1),y?(y.style.width!=re&&(y.style.width=re),y=y.nextSibling):l.appendChild(document.createElement("col")).style.width=re}}for(;y;){const C=y.nextSibling;(v=y.parentNode)==null||v.removeChild(y),y=C}$?(c.style.width=b+"px",c.style.minWidth=""):(c.style.width="",c.style.minWidth=b+"px")}}var columnResizingPluginKey=new PluginKey("tableColumnResizing");function columnResizing({handleWidth:s=5,cellMinWidth:l=25,View:c=TableView$1,lastColumnResizable:d=!0}={}){const f=new Plugin({key:columnResizingPluginKey,state:{init(g,v){var b,$;const y=($=(b=f.spec)==null?void 0:b.props)==null?void 0:$.nodeViews,x=tableNodeTypes(v.schema).table.name;return c&&y&&(y[x]=(C,E)=>new c(C,l,E)),new ResizeState(-1,!1)},apply(g,v){return v.apply(g)}},props:{attributes:g=>{const v=columnResizingPluginKey.getState(g);return v&&v.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(g,v)=>{handleMouseMove(g,v,s,l,d)},mouseleave:g=>{handleMouseLeave(g)},mousedown:(g,v)=>{handleMouseDown2(g,v,l)}},decorations:g=>{const v=columnResizingPluginKey.getState(g);if(v&&v.activeHandle>-1)return handleDecorations(g,v.activeHandle)},nodeViews:{}}});return f}var ResizeState=class Mxe{constructor(l,c){this.activeHandle=l,this.dragging=c}apply(l){const c=this,d=l.getMeta(columnResizingPluginKey);if(d&&d.setHandle!=null)return new Mxe(d.setHandle,!1);if(d&&d.setDragging!==void 0)return new Mxe(c.activeHandle,d.setDragging);if(c.activeHandle>-1&&l.docChanged){let f=l.mapping.map(c.activeHandle,-1);return pointsAtCell(l.doc.resolve(f))||(f=-1),new Mxe(f,c.dragging)}return c}};function handleMouseMove(s,l,c,d,f){const g=columnResizingPluginKey.getState(s.state);if(g&&!g.dragging){const v=domCellAround(l.target);let b=-1;if(v){const{left:$,right:y}=v.getBoundingClientRect();l.clientX-$<=c?b=edgeCell(s,l,"left",c):y-l.clientX<=c&&(b=edgeCell(s,l,"right",c))}if(b!=g.activeHandle){if(!f&&b!==-1){const $=s.state.doc.resolve(b),y=$.node(-1),x=TableMap.get(y),C=$.start(-1);if(x.colCount($.pos-C)+$.nodeAfter.attrs.colspan-1==x.width-1)return}updateHandle(s,b)}}}function handleMouseLeave(s){const l=columnResizingPluginKey.getState(s.state);l&&l.activeHandle>-1&&!l.dragging&&updateHandle(s,-1)}function handleMouseDown2(s,l,c){var d;const f=(d=s.dom.ownerDocument.defaultView)!=null?d:window,g=columnResizingPluginKey.getState(s.state);if(!g||g.activeHandle==-1||g.dragging)return!1;const v=s.state.doc.nodeAt(g.activeHandle),b=currentColWidth(s,g.activeHandle,v.attrs);s.dispatch(s.state.tr.setMeta(columnResizingPluginKey,{setDragging:{startX:l.clientX,startWidth:b}}));function $(x){f.removeEventListener("mouseup",$),f.removeEventListener("mousemove",y);const C=columnResizingPluginKey.getState(s.state);C!=null&&C.dragging&&(updateColumnWidth(s,C.activeHandle,draggedWidth(C.dragging,x,c)),s.dispatch(s.state.tr.setMeta(columnResizingPluginKey,{setDragging:null})))}function y(x){if(!x.which)return $(x);const C=columnResizingPluginKey.getState(s.state);if(C&&C.dragging){const E=draggedWidth(C.dragging,x,c);displayColumnWidth(s,C.activeHandle,E,c)}}return f.addEventListener("mouseup",$),f.addEventListener("mousemove",y),l.preventDefault(),!0}function currentColWidth(s,l,{colspan:c,colwidth:d}){const f=d&&d[d.length-1];if(f)return f;const g=s.domAtPos(l);let b=g.node.childNodes[g.offset].offsetWidth,$=c;if(d)for(let y=0;y<c;y++)d[y]&&(b-=d[y],$--);return b/$}function domCellAround(s){for(;s&&s.nodeName!="TD"&&s.nodeName!="TH";)s=s.classList&&s.classList.contains("ProseMirror")?null:s.parentNode;return s}function edgeCell(s,l,c,d){const f=c=="right"?-d:d,g=s.posAtCoords({left:l.clientX+f,top:l.clientY});if(!g)return-1;const{pos:v}=g,b=cellAround(s.state.doc.resolve(v));if(!b)return-1;if(c=="right")return b.pos;const $=TableMap.get(b.node(-1)),y=b.start(-1),x=$.map.indexOf(b.pos-y);return x%$.width==0?-1:y+$.map[x-1]}function draggedWidth(s,l,c){const d=l.clientX-s.startX;return Math.max(c,s.startWidth+d)}function updateHandle(s,l){s.dispatch(s.state.tr.setMeta(columnResizingPluginKey,{setHandle:l}))}function updateColumnWidth(s,l,c){const d=s.state.doc.resolve(l),f=d.node(-1),g=TableMap.get(f),v=d.start(-1),b=g.colCount(d.pos-v)+d.nodeAfter.attrs.colspan-1,$=s.state.tr;for(let y=0;y<g.height;y++){const x=y*g.width+b;if(y&&g.map[x]==g.map[x-g.width])continue;const C=g.map[x],E=f.nodeAt(C).attrs,N=E.colspan==1?0:b-g.colCount(C);if(E.colwidth&&E.colwidth[N]==c)continue;const W=E.colwidth?E.colwidth.slice():zeroes(E.colspan);W[N]=c,$.setNodeMarkup(v+C,null,{...E,colwidth:W})}$.docChanged&&s.dispatch($)}function displayColumnWidth(s,l,c,d){const f=s.state.doc.resolve(l),g=f.node(-1),v=f.start(-1),b=TableMap.get(g).colCount(f.pos-v)+f.nodeAfter.attrs.colspan-1;let $=s.domAtPos(f.start(-1)).node;for(;$&&$.nodeName!="TABLE";)$=$.parentNode;$&&updateColumnsOnResize(g,$.firstChild,$,d,b,c)}function zeroes(s){return Array(s).fill(0)}function handleDecorations(s,l){const c=[],d=s.doc.resolve(l),f=d.node(-1);if(!f)return DecorationSet.empty;const g=TableMap.get(f),v=d.start(-1),b=g.colCount(d.pos-v)+d.nodeAfter.attrs.colspan-1;for(let $=0;$<g.height;$++){const y=b+$*g.width;if((b==g.width-1||g.map[y]!=g.map[y+1])&&($==0||g.map[y]!=g.map[y-g.width])){const x=g.map[y],C=v+x+f.nodeAt(x).nodeSize-1,E=document.createElement("div");E.className="column-resize-handle",c.push(Decoration.widget(C,E))}}return DecorationSet.create(s.doc,c)}function tableEditing({allowTableNodeSelection:s=!1}={}){return new Plugin({key:tableEditingKey,state:{init(){return null},apply(l,c){const d=l.getMeta(tableEditingKey);if(d!=null)return d==-1?null:d;if(c==null||!l.docChanged)return c;const{deleted:f,pos:g}=l.mapping.mapResult(c);return f?null:g}},props:{decorations:drawCellSelection,handleDOMEvents:{mousedown:handleMouseDown},createSelectionBetween(l){return tableEditingKey.getState(l.state)!=null?l.state.selection:null},handleTripleClick,handleKeyDown,handlePaste},appendTransaction(l,c,d){return normalizeSelection(d,fixTables(d,c),s)}})}function updateColumns(s,l,c,d,f,g){let v=0,b=!0,$=l.firstChild;const y=s.firstChild;for(let x=0,C=0;x<y.childCount;x+=1){const{colspan:E,colwidth:N}=y.child(x).attrs;for(let W=0;W<E;W+=1,C+=1){const q=f===C?g:N&&N[W],Y=q?`${q}px`:"";v+=q||d,q||(b=!1),$?($.style.width!==Y&&($.style.width=Y),$=$.nextSibling):l.appendChild(document.createElement("col")).style.width=Y}}for(;$;){const x=$.nextSibling;$.parentNode.removeChild($),$=x}b?(c.style.width=`${v}px`,c.style.minWidth=""):(c.style.width="",c.style.minWidth=`${v}px`)}class TableView{constructor(l,c){this.node=l,this.cellMinWidth=c,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),updateColumns(l,this.colgroup,this.table,c),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(l){return l.type!==this.node.type?!1:(this.node=l,updateColumns(l,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(l){return l.type==="attributes"&&(l.target===this.table||this.colgroup.contains(l.target))}}function createColGroup(s,l,c,d){let f=0,g=!0;const v=[],b=s.firstChild;if(!b)return{};for(let C=0,E=0;C<b.childCount;C+=1){const{colspan:N,colwidth:W}=b.child(C).attrs;for(let q=0;q<N;q+=1,E+=1){const Y=c===E?d:W&&W[q],re=Y?`${Y}px`:"";f+=Y||l,Y||(g=!1),v.push(["col",re?{style:`width: ${re}`}:{}])}}const $=g?`${f}px`:"",y=g?"":`${f}px`;return{colgroup:["colgroup",{},...v],tableWidth:$,tableMinWidth:y}}function createCell(s,l){return s.createAndFill()}function getTableNodeTypes(s){if(s.cached.tableNodeTypes)return s.cached.tableNodeTypes;const l={};return Object.keys(s.nodes).forEach(c=>{const d=s.nodes[c];d.spec.tableRole&&(l[d.spec.tableRole]=d)}),s.cached.tableNodeTypes=l,l}function createTable(s,l,c,d,f){const g=getTableNodeTypes(s),v=[],b=[];for(let y=0;y<c;y+=1){const x=createCell(g.cell);if(x&&b.push(x),d){const C=createCell(g.header_cell);C&&v.push(C)}}const $=[];for(let y=0;y<l;y+=1)$.push(g.row.createChecked(null,d&&y===0?v:b));return g.table.createChecked(null,$)}function isCellSelection(s){return s instanceof CellSelection}const deleteTableWhenAllCellsSelected=({editor:s})=>{const{selection:l}=s.state;if(!isCellSelection(l))return!1;let c=0;const d=findParentNodeClosestToPos(l.ranges[0].$from,g=>g.type.name==="table");return d==null||d.node.descendants(g=>{if(g.type.name==="table")return!1;["tableCell","tableHeader"].includes(g.type.name)&&(c+=1)}),c===l.ranges.length?(s.commands.deleteTable(),!0):!1},Table=Node$1.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:TableView,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:s,HTMLAttributes:l}){const{colgroup:c,tableWidth:d,tableMinWidth:f}=createColGroup(s,this.options.cellMinWidth);return["table",mergeAttributes(this.options.HTMLAttributes,l,{style:d?`width: ${d}`:`min-width: ${f}`}),c,["tbody",0]]},addCommands(){return{insertTable:({rows:s=3,cols:l=3,withHeaderRow:c=!0}={})=>({tr:d,dispatch:f,editor:g})=>{const v=createTable(g.schema,s,l,c);if(f){const b=d.selection.from+1;d.replaceSelectionWith(v).scrollIntoView().setSelection(TextSelection.near(d.doc.resolve(b)))}return!0},addColumnBefore:()=>({state:s,dispatch:l})=>addColumnBefore(s,l),addColumnAfter:()=>({state:s,dispatch:l})=>addColumnAfter(s,l),deleteColumn:()=>({state:s,dispatch:l})=>deleteColumn(s,l),addRowBefore:()=>({state:s,dispatch:l})=>addRowBefore(s,l),addRowAfter:()=>({state:s,dispatch:l})=>addRowAfter(s,l),deleteRow:()=>({state:s,dispatch:l})=>deleteRow(s,l),deleteTable:()=>({state:s,dispatch:l})=>deleteTable(s,l),mergeCells:()=>({state:s,dispatch:l})=>mergeCells(s,l),splitCell:()=>({state:s,dispatch:l})=>splitCell(s,l),toggleHeaderColumn:()=>({state:s,dispatch:l})=>toggleHeader("column")(s,l),toggleHeaderRow:()=>({state:s,dispatch:l})=>toggleHeader("row")(s,l),toggleHeaderCell:()=>({state:s,dispatch:l})=>toggleHeaderCell(s,l),mergeOrSplit:()=>({state:s,dispatch:l})=>mergeCells(s,l)?!0:splitCell(s,l),setCellAttribute:(s,l)=>({state:c,dispatch:d})=>setCellAttr(s,l)(c,d),goToNextCell:()=>({state:s,dispatch:l})=>goToNextCell(1)(s,l),goToPreviousCell:()=>({state:s,dispatch:l})=>goToNextCell(-1)(s,l),fixTables:()=>({state:s,dispatch:l})=>(l&&fixTables(s),!0),setCellSelection:s=>({tr:l,dispatch:c})=>{if(c){const d=CellSelection.create(l.doc,s.anchorCell,s.headCell);l.setSelection(d)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:deleteTableWhenAllCellsSelected,"Mod-Backspace":deleteTableWhenAllCellsSelected,Delete:deleteTableWhenAllCellsSelected,"Mod-Delete":deleteTableWhenAllCellsSelected}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[columnResizing({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],tableEditing({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(s){const l={name:s.name,options:s.options,storage:s.storage};return{tableRole:callOrReturn(getExtensionField(s,"tableRole",l))}}}),TableCell=Node$1.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:s=>{const l=s.getAttribute("colwidth");return l?[parseInt(l,10)]:null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:s}){return["td",mergeAttributes(this.options.HTMLAttributes,s),0]}}),TableHeader=Node$1.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:s=>{const l=s.getAttribute("colwidth");return l?[parseInt(l,10)]:null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:s}){return["th",mergeAttributes(this.options.HTMLAttributes,s),0]}}),TableRow=Node$1.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:s}){return["tr",mergeAttributes(this.options.HTMLAttributes,s),0]}}),emDash=s=>textInputRule({find:/--$/,replace:s??""}),ellipsis=s=>textInputRule({find:/\.\.\.$/,replace:s??""}),openDoubleQuote=s=>textInputRule({find:/(?:^|[\s{[(<'"\u2018\u201C])(")$/,replace:s??""}),closeDoubleQuote=s=>textInputRule({find:/"$/,replace:s??""}),openSingleQuote=s=>textInputRule({find:/(?:^|[\s{[(<'"\u2018\u201C])(')$/,replace:s??""}),closeSingleQuote=s=>textInputRule({find:/'$/,replace:s??""}),leftArrow=s=>textInputRule({find:/<-$/,replace:s??""}),rightArrow=s=>textInputRule({find:/->$/,replace:s??""}),copyright=s=>textInputRule({find:/\(c\)$/,replace:s??""}),trademark=s=>textInputRule({find:/\(tm\)$/,replace:s??""}),servicemark=s=>textInputRule({find:/\(sm\)$/,replace:s??""}),registeredTrademark=s=>textInputRule({find:/\(r\)$/,replace:s??""}),oneHalf=s=>textInputRule({find:/(?:^|\s)(1\/2)\s$/,replace:s??""}),plusMinus=s=>textInputRule({find:/\+\/-$/,replace:s??""}),notEqual=s=>textInputRule({find:/!=$/,replace:s??""}),laquo=s=>textInputRule({find:/<<$/,replace:s??""}),raquo=s=>textInputRule({find:/>>$/,replace:s??""}),multiplication=s=>textInputRule({find:/\d+\s?([*x])\s?\d+$/,replace:s??""}),superscriptTwo=s=>textInputRule({find:/\^2$/,replace:s??""}),superscriptThree=s=>textInputRule({find:/\^3$/,replace:s??""}),oneQuarter=s=>textInputRule({find:/(?:^|\s)(1\/4)\s$/,replace:s??""}),threeQuarters=s=>textInputRule({find:/(?:^|\s)(3\/4)\s$/,replace:s??""}),Typography=Extension.create({name:"typography",addOptions(){return{closeDoubleQuote:"",closeSingleQuote:"",copyright:"",ellipsis:"",emDash:"",laquo:"",leftArrow:"",multiplication:"",notEqual:"",oneHalf:"",oneQuarter:"",openDoubleQuote:"",openSingleQuote:"",plusMinus:"",raquo:"",registeredTrademark:"",rightArrow:"",servicemark:"",superscriptThree:"",superscriptTwo:"",threeQuarters:"",trademark:""}},addInputRules(){const s=[];return this.options.emDash!==!1&&s.push(emDash(this.options.emDash)),this.options.ellipsis!==!1&&s.push(ellipsis(this.options.ellipsis)),this.options.openDoubleQuote!==!1&&s.push(openDoubleQuote(this.options.openDoubleQuote)),this.options.closeDoubleQuote!==!1&&s.push(closeDoubleQuote(this.options.closeDoubleQuote)),this.options.openSingleQuote!==!1&&s.push(openSingleQuote(this.options.openSingleQuote)),this.options.closeSingleQuote!==!1&&s.push(closeSingleQuote(this.options.closeSingleQuote)),this.options.leftArrow!==!1&&s.push(leftArrow(this.options.leftArrow)),this.options.rightArrow!==!1&&s.push(rightArrow(this.options.rightArrow)),this.options.copyright!==!1&&s.push(copyright(this.options.copyright)),this.options.trademark!==!1&&s.push(trademark(this.options.trademark)),this.options.servicemark!==!1&&s.push(servicemark(this.options.servicemark)),this.options.registeredTrademark!==!1&&s.push(registeredTrademark(this.options.registeredTrademark)),this.options.oneHalf!==!1&&s.push(oneHalf(this.options.oneHalf)),this.options.plusMinus!==!1&&s.push(plusMinus(this.options.plusMinus)),this.options.notEqual!==!1&&s.push(notEqual(this.options.notEqual)),this.options.laquo!==!1&&s.push(laquo(this.options.laquo)),this.options.raquo!==!1&&s.push(raquo(this.options.raquo)),this.options.multiplication!==!1&&s.push(multiplication(this.options.multiplication)),this.options.superscriptTwo!==!1&&s.push(superscriptTwo(this.options.superscriptTwo)),this.options.superscriptThree!==!1&&s.push(superscriptThree(this.options.superscriptThree)),this.options.oneQuarter!==!1&&s.push(oneQuarter(this.options.oneQuarter)),this.options.threeQuarters!==!1&&s.push(threeQuarters(this.options.threeQuarters)),s}}),CharacterCount=Extension.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:s=>s.length,wordCounter:s=>s.split(" ").filter(l=>l!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=s=>{const l=(s==null?void 0:s.node)||this.editor.state.doc;if(((s==null?void 0:s.mode)||this.options.mode)==="textSize"){const d=l.textBetween(0,l.content.size,void 0," ");return this.options.textCounter(d)}return l.nodeSize},this.storage.words=s=>{const l=(s==null?void 0:s.node)||this.editor.state.doc,c=l.textBetween(0,l.content.size," "," ");return this.options.wordCounter(c)}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("characterCount"),filterTransaction:(s,l)=>{const c=this.options.limit;if(!s.docChanged||c===0||c===null||c===void 0)return!0;const d=this.storage.characters({node:l.doc}),f=this.storage.characters({node:s.doc});if(f<=c||d>c&&f>c&&f<=d)return!0;if(d>c&&f>c&&f>d||!s.getMeta("paste"))return!1;const v=s.selection.$head.pos,b=f-c,$=v-b,y=v;return s.deleteRange($,y),!(this.storage.characters({node:s.doc})>c)}})]}});var FileSaver_min={exports:{}};(function(s,l){(function(c,d){d()})(commonjsGlobal,function(){function c(y,x){return typeof x>"u"?x={autoBom:!1}:typeof x!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),x={autoBom:!x}),x.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(y.type)?new Blob(["\uFEFF",y],{type:y.type}):y}function d(y,x,C){var E=new XMLHttpRequest;E.open("GET",y),E.responseType="blob",E.onload=function(){$(E.response,x,C)},E.onerror=function(){console.error("could not download file")},E.send()}function f(y){var x=new XMLHttpRequest;x.open("HEAD",y,!1);try{x.send()}catch{}return 200<=x.status&&299>=x.status}function g(y){try{y.dispatchEvent(new MouseEvent("click"))}catch{var x=document.createEvent("MouseEvents");x.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),y.dispatchEvent(x)}}var v=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof commonjsGlobal=="object"&&commonjsGlobal.global===commonjsGlobal?commonjsGlobal:void 0,b=v.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),$=v.saveAs||(typeof window!="object"||window!==v?function(){}:"download"in HTMLAnchorElement.prototype&&!b?function(y,x,C){var E=v.URL||v.webkitURL,N=document.createElement("a");x=x||y.name||"download",N.download=x,N.rel="noopener",typeof y=="string"?(N.href=y,N.origin===location.origin?g(N):f(N.href)?d(y,x,C):g(N,N.target="_blank")):(N.href=E.createObjectURL(y),setTimeout(function(){E.revokeObjectURL(N.href)},4e4),setTimeout(function(){g(N)},0))}:"msSaveOrOpenBlob"in navigator?function(y,x,C){if(x=x||y.name||"download",typeof y!="string")navigator.msSaveOrOpenBlob(c(y,C),x);else if(f(y))d(y,x,C);else{var E=document.createElement("a");E.href=y,E.target="_blank",setTimeout(function(){g(E)})}}:function(y,x,C,E){if(E=E||open("","_blank"),E&&(E.document.title=E.document.body.innerText="downloading..."),typeof y=="string")return d(y,x,C);var N=y.type==="application/octet-stream",W=/constructor/i.test(v.HTMLElement)||v.safari,q=/CriOS\/[\d]+/.test(navigator.userAgent);if((q||N&&W||b)&&typeof FileReader<"u"){var Y=new FileReader;Y.onloadend=function(){var de=Y.result;de=q?de:de.replace(/^data:[^;]*;/,"data:attachment/file;"),E?E.location.href=de:location=de,E=null},Y.readAsDataURL(y)}else{var re=v.URL||v.webkitURL,se=re.createObjectURL(y);E?E.location=se:location.href=se,E=null,setTimeout(function(){re.revokeObjectURL(se)},4e4)}});v.saveAs=$.saveAs=$,s.exports=$})})(FileSaver_min);var FileSaver_minExports=FileSaver_min.exports,domToImageMore_min={exports:{}};/*! dom-to-image-more 13-09-2024 */(function(s,l){(c=>{let d=(()=>{let Ae=0;return{escape:function(by){return by.replace(/([.*+?^${}()|[\]/\\])/g,"\\$1")},isDataUrl:function(by){return by.search(/^(data:)/)!==-1},canvasToBlob:function(by){return by.toBlob?new Promise(function(yy){by.toBlob(yy)}):(yy=>new Promise(function(my){var $t=N(yy.toDataURL().split(",")[1]),K$=$t.length,Y$=new Uint8Array(K$);for(let W$=0;W$<K$;W$++)Y$[W$]=$t.charCodeAt(W$);my(new Blob([Y$],{type:"image/png"}))}))(by)},resolveUrl:function(by,yy){var my=document.implementation.createHTMLDocument(),$t=my.createElement("base"),K$=(my.head.appendChild($t),my.createElement("a"));return my.body.appendChild(K$),$t.href=yy,K$.href=by,K$.href},getAndEncode:function(by){let yy=x.impl.urlCache.find(function(my){return my.url===by});return yy||(yy={url:by,promise:null},x.impl.urlCache.push(yy)),yy.promise===null&&(x.impl.options.cacheBust&&(by+=(/\?/.test(by)?"&":"?")+new Date().getTime()),yy.promise=new Promise(function(my){let $t=x.impl.options.httpTimeout,K$=new XMLHttpRequest;if(K$.onreadystatechange=function(){if(K$.readyState===4)if(300<=K$.status)W$?my(W$):U$(`cannot fetch resource: ${by}, status: `+K$.status);else{let hy=new FileReader;hy.onloadend=function(){my(hy.result)},hy.readAsDataURL(K$.response)}},K$.ontimeout=function(){W$?my(W$):U$(`timeout of ${$t}ms occured while fetching resource: `+by)},K$.responseType="blob",K$.timeout=$t,0<x.impl.options.useCredentialsFilters.length&&(x.impl.options.useCredentials=0<x.impl.options.useCredentialsFilters.filter(hy=>0<=by.search(hy)).length),x.impl.options.useCredentials&&(K$.withCredentials=!0),x.impl.options.corsImg&&by.indexOf("http")===0&&by.indexOf(window.location.origin)===-1){var Y$=(x.impl.options.corsImg.method||"GET").toUpperCase()==="POST"?"POST":"GET";K$.open(Y$,(x.impl.options.corsImg.url||"").replace("#{cors}",by),!0);let hy=!1,G$=x.impl.options.corsImg.headers||{},ky=(Object.keys(G$).forEach(function($y){G$[$y].indexOf("application/json")!==-1&&(hy=!0),K$.setRequestHeader($y,G$[$y])}),($y=>{try{return JSON.parse(JSON.stringify($y))}catch(rS){U$("corsImg.data is missing or invalid:"+rS.toString())}})(x.impl.options.corsImg.data||""));Object.keys(ky).forEach(function($y){typeof ky[$y]=="string"&&(ky[$y]=ky[$y].replace("#{cors}",by))}),K$.send(hy?JSON.stringify(ky):ky)}else K$.open("GET",by,!0),K$.send();let W$;function U$(hy){console.error(hy),my("")}x.impl.options.imagePlaceholder&&(Y$=x.impl.options.imagePlaceholder.split(/,/))&&Y$[1]&&(W$=Y$[1])})),yy.promise},uid:function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+Ae++},delay:function(by){return function(yy){return new Promise(function(my){setTimeout(function(){my(yy)},by)})}},asArray:function(by){var yy=[],my=by.length;for(let $t=0;$t<my;$t++)yy.push(by[$t]);return yy},escapeXhtml:function(by){return by.replace(/%/g,"%25").replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(by){return by!=="data:,"?new Promise(function(yy,my){let $t=new Image;x.impl.options.useCredentials&&($t.crossOrigin="use-credentials"),$t.onload=function(){window&&window.requestAnimationFrame?window.requestAnimationFrame(function(){yy($t)}):yy($t)},$t.onerror=my,$t.src=by}):Promise.resolve()},width:function(by){var yy=_y(by,"width");if(!isNaN(yy))return yy;var yy=_y(by,"border-left-width"),my=_y(by,"border-right-width");return by.scrollWidth+yy+my},height:function(by){var yy=_y(by,"height");if(!isNaN(yy))return yy;var yy=_y(by,"border-top-width"),my=_y(by,"border-bottom-width");return by.scrollHeight+yy+my},getWindow:Re,isElement:Lr,isElementHostForOpenShadowRoot:function(by){return Lr(by)&&by.shadowRoot!==null},isShadowRoot:Be,isInShadowRoot:Ke,isHTMLElement:function(by){return by instanceof Re(by).HTMLElement},isHTMLCanvasElement:function(by){return by instanceof Re(by).HTMLCanvasElement},isHTMLInputElement:function(by){return by instanceof Re(by).HTMLInputElement},isHTMLImageElement:function(by){return by instanceof Re(by).HTMLImageElement},isHTMLLinkElement:function(by){return by instanceof Re(by).HTMLLinkElement},isHTMLScriptElement:function(by){return by instanceof Re(by).HTMLScriptElement},isHTMLStyleElement:function(by){return by instanceof Re(by).HTMLStyleElement},isHTMLTextAreaElement:function(by){return by instanceof Re(by).HTMLTextAreaElement},isShadowSlotElement:function(by){return Ke(by)&&by instanceof Re(by).HTMLSlotElement},isSVGElement:function(by){return by instanceof Re(by).SVGElement},isSVGRectElement:function(by){return by instanceof Re(by).SVGRectElement},isDimensionMissing:function(by){return isNaN(by)||by<=0}};function Re(by){return by=by?by.ownerDocument:void 0,(by?by.defaultView:void 0)||window||c}function Be(by){return by instanceof Re(by).ShadowRoot}function Ke(by){return by!=null&&by.getRootNode!==void 0&&Be(by.getRootNode())}function Lr(by){return by instanceof Re(by).Element}function _y(by,yy){if(by.nodeType===C){let my=E(by).getPropertyValue(yy);if(my.slice(-2)==="px")return my=my.slice(0,-2),parseFloat(my)}return NaN}})(),f=(()=>{let Ae=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(Lr,_y,by){return Re(Lr)?Promise.resolve(Lr).then(Be).then(function(yy){let my=Promise.resolve(Lr);return yy.forEach(function($t){my=my.then(function(K$){return Ke(K$,$t,_y,by)})}),my}):Promise.resolve(Lr)},shouldProcess:Re,impl:{readUrls:Be,inline:Ke}};function Re(Lr){return Lr.search(Ae)!==-1}function Be(Lr){for(var _y,by=[];(_y=Ae.exec(Lr))!==null;)by.push(_y[1]);return by.filter(function(yy){return!d.isDataUrl(yy)})}function Ke(Lr,_y,by,yy){return Promise.resolve(_y).then(function(my){return by?d.resolveUrl(my,by):my}).then(yy||d.getAndEncode).then(function(my){return Lr.replace(($t=_y,new RegExp(`(url\\(['"]?)(${d.escape($t)})(['"]?\\))`,"g")),`$1${my}$3`);var $t})}})(),g={resolveAll:function(){return v().then(function(Ae){return Promise.all(Ae.map(function(Re){return Re.resolve()}))}).then(function(Ae){return Ae.join(`
`)})},impl:{readAll:v}};function v(){return Promise.resolve(d.asArray(document.styleSheets)).then(function(Re){let Be=[];return Re.forEach(function(Ke){var Lr=Object.getPrototypeOf(Ke);if(Object.prototype.hasOwnProperty.call(Lr,"cssRules"))try{d.asArray(Ke.cssRules||[]).forEach(Be.push.bind(Be))}catch(_y){console.error("domtoimage: Error while reading CSS rules from "+Ke.href,_y.toString())}}),Be}).then(function(Re){return Re.filter(function(Be){return Be.type===CSSRule.FONT_FACE_RULE}).filter(function(Be){return f.shouldProcess(Be.style.getPropertyValue("src"))})}).then(function(Re){return Re.map(Ae)});function Ae(Re){return{resolve:function(){var Be=(Re.parentStyleSheet||{}).href;return f.inlineAll(Re.cssText,Be)},src:function(){return Re.style.getPropertyValue("src")}}}}let b={inlineAll:function Ae(Re){if(!d.isElement(Re))return Promise.resolve(Re);return Be(Re).then(function(){return d.isHTMLImageElement(Re)?$(Re).inline():Promise.all(d.asArray(Re.childNodes).map(function(Ke){return Ae(Ke)}))});function Be(Ke){let Lr=["background","background-image"],_y=Lr.map(function(by){let yy=Ke.style.getPropertyValue(by),my=Ke.style.getPropertyPriority(by);return yy?f.inlineAll(yy).then(function($t){Ke.style.setProperty(by,$t,my)}):Promise.resolve()});return Promise.all(_y).then(function(){return Ke})}},impl:{newImage:$}};function $(Ae){return{inline:function(Re){return d.isDataUrl(Ae.src)?Promise.resolve():Promise.resolve(Ae.src).then(Re||d.getAndEncode).then(function(Be){return new Promise(function(Ke){Ae.onload=Ke,Ae.onerror=Ke,Ae.src=Be})})}}}let y={copyDefaultStyles:!0,imagePlaceholder:void 0,cacheBust:!1,useCredentials:!1,useCredentialsFilters:[],httpTimeout:3e4,styleCaching:"strict",corsImg:void 0,adjustClonedNode:void 0},x={toSvg:W,toPng:function(Ae,Re){return q(Ae,Re).then(function(Be){return Be.toDataURL()})},toJpeg:function(Ae,Re){return q(Ae,Re).then(function(Be){return Be.toDataURL("image/jpeg",(Re?Re.quality:void 0)||1)})},toBlob:function(Ae,Re){return q(Ae,Re).then(d.canvasToBlob)},toPixelData:function(Ae,Re){return q(Ae,Re).then(function(Be){return Be.getContext("2d").getImageData(0,0,d.width(Ae),d.height(Ae)).data})},toCanvas:q,impl:{fontFaces:g,images:b,util:d,inliner:f,urlCache:[],options:{}}},C=(s.exports=x,(typeof Node<"u"?Node.ELEMENT_NODE:void 0)||1),E=(c!==void 0?c.getComputedStyle:void 0)||(typeof window<"u"?window.getComputedStyle:void 0)||globalThis.getComputedStyle,N=(c!==void 0?c.atob:void 0)||(typeof window<"u"?window.atob:void 0)||globalThis.atob;function W(Ae,Re){x.impl.util.getWindow(Ae);var Be=Re=Re||{};Be.copyDefaultStyles===void 0?x.impl.options.copyDefaultStyles=y.copyDefaultStyles:x.impl.options.copyDefaultStyles=Be.copyDefaultStyles,x.impl.options.imagePlaceholder=(Be.imagePlaceholder===void 0?y:Be).imagePlaceholder,x.impl.options.cacheBust=(Be.cacheBust===void 0?y:Be).cacheBust,x.impl.options.corsImg=(Be.corsImg===void 0?y:Be).corsImg,x.impl.options.useCredentials=(Be.useCredentials===void 0?y:Be).useCredentials,x.impl.options.useCredentialsFilters=(Be.useCredentialsFilters===void 0?y:Be).useCredentialsFilters,x.impl.options.httpTimeout=(Be.httpTimeout===void 0?y:Be).httpTimeout,x.impl.options.styleCaching=(Be.styleCaching===void 0?y:Be).styleCaching;let Ke=[];return Promise.resolve(Ae).then(function(Lr){if(Lr.nodeType===C)return Lr;var _y=Lr,by=Lr.parentNode,yy=document.createElement("span");return by.replaceChild(yy,_y),yy.append(Lr),Ke.push({parent:by,child:_y,wrapper:yy}),yy}).then(function(Lr){return function _y(by,yy,my,$t){let K$=yy.filter;if(by===Y||d.isHTMLScriptElement(by)||d.isHTMLStyleElement(by)||d.isHTMLLinkElement(by)||my!==null&&K$&&!K$(by))return Promise.resolve();return Promise.resolve(by).then(Y$).then(W$).then(function($y){return G$($y,hy(by))}).then(U$).then(function($y){return ky($y,by)});function Y$($y){return d.isHTMLCanvasElement($y)?d.makeImage($y.toDataURL()):$y.cloneNode(!1)}function W$($y){return yy.adjustClonedNode&&yy.adjustClonedNode(by,$y,!1),Promise.resolve($y)}function U$($y){return yy.adjustClonedNode&&yy.adjustClonedNode(by,$y,!0),Promise.resolve($y)}function hy($y){return d.isElementHostForOpenShadowRoot($y)?$y.shadowRoot:$y}function G$($y,rS){let lS=BS(rS),bS=Promise.resolve();if(lS.length!==0){let MS=E(IS(rS));d.asArray(lS).forEach(function(zS){bS=bS.then(function(){return _y(zS,yy,MS).then(function(LS){LS&&$y.appendChild(LS)})})})}return bS.then(function(){return $y});function IS(MS){return d.isShadowRoot(MS)?MS.host:MS}function BS(MS){if(d.isShadowSlotElement(MS)){let zS=MS.assignedNodes();if(zS&&0<zS.length)return zS}return MS.childNodes}}function ky($y,rS){return!d.isElement($y)||d.isShadowSlotElement(rS)?Promise.resolve($y):Promise.resolve().then(lS).then(bS).then(IS).then(BS).then(function(){return $y});function lS(){function MS(LS,nS){nS.font=LS.font,nS.fontFamily=LS.fontFamily,nS.fontFeatureSettings=LS.fontFeatureSettings,nS.fontKerning=LS.fontKerning,nS.fontSize=LS.fontSize,nS.fontStretch=LS.fontStretch,nS.fontStyle=LS.fontStyle,nS.fontVariant=LS.fontVariant,nS.fontVariantCaps=LS.fontVariantCaps,nS.fontVariantEastAsian=LS.fontVariantEastAsian,nS.fontVariantLigatures=LS.fontVariantLigatures,nS.fontVariantNumeric=LS.fontVariantNumeric,nS.fontVariationSettings=LS.fontVariationSettings,nS.fontWeight=LS.fontWeight}function zS(LS,nS){let Z$=E(LS);Z$.cssText?(nS.style.cssText=Z$.cssText,MS(Z$,nS.style)):(de(yy,LS,Z$,my,nS),my===null&&(["inset-block","inset-block-start","inset-block-end"].forEach(dS=>nS.style.removeProperty(dS)),["left","right","top","bottom"].forEach(dS=>{nS.style.getPropertyValue(dS)&&nS.style.setProperty(dS,"0px")})))}zS(rS,$y)}function bS(){let MS=d.uid();function zS(LS){let nS=E(rS,LS),Z$=nS.getPropertyValue("content");if(Z$!==""&&Z$!=="none"){let wy=function(){let tS=`.${MS}:`+LS,yS=(nS.cssText?Q$:eS)();return document.createTextNode(tS+`{${yS}}`);function Q$(){return`${nS.cssText} content: ${Z$};`}function eS(){return d.asArray(nS).map(wS).join("; ")+";";function wS(xS){let OS=nS.getPropertyValue(xS),mS=nS.getPropertyPriority(xS)?" !important":"";return xS+": "+OS+mS}}},dS=$y.getAttribute("class")||"",ES=($y.setAttribute("class",dS+" "+MS),document.createElement("style"));ES.appendChild(wy()),$y.appendChild(ES)}}[":before",":after"].forEach(function(LS){zS(LS)})}function IS(){d.isHTMLTextAreaElement(rS)&&($y.innerHTML=rS.value),d.isHTMLInputElement(rS)&&$y.setAttribute("value",rS.value)}function BS(){d.isSVGElement($y)&&($y.setAttribute("xmlns","http://www.w3.org/2000/svg"),d.isSVGRectElement($y))&&["width","height"].forEach(function(MS){let zS=$y.getAttribute(MS);zS&&$y.style.setProperty(MS,zS)})}}}(Lr,Re,null)}).then(Re.disableEmbedFonts?Promise.resolve(Ae):re).then(se).then(function(Lr){Re.bgcolor&&(Lr.style.backgroundColor=Re.bgcolor),Re.width&&(Lr.style.width=Re.width+"px"),Re.height&&(Lr.style.height=Re.height+"px"),Re.style&&Object.keys(Re.style).forEach(function(by){Lr.style[by]=Re.style[by]});let _y=null;return typeof Re.onclone=="function"&&(_y=Re.onclone(Lr)),Promise.resolve(_y).then(function(){return Lr})}).then(function(Lr){let _y=Re.width||d.width(Lr),by=Re.height||d.height(Lr);return Promise.resolve(Lr).then(function(yy){return yy.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),new XMLSerializer().serializeToString(yy)}).then(d.escapeXhtml).then(function(yy){var my=(d.isDimensionMissing(_y)?' width="100%"':` width="${_y}"`)+(d.isDimensionMissing(by)?' height="100%"':` height="${by}"`);return`<svg xmlns="http://www.w3.org/2000/svg"${(d.isDimensionMissing(_y)?"":` width="${_y}"`)+(d.isDimensionMissing(by)?"":` height="${by}"`)}><foreignObject${my}>${yy}</foreignObject></svg>`}).then(function(yy){return"data:image/svg+xml;charset=utf-8,"+yy})}).then(function(Lr){for(;0<Ke.length;){var _y=Ke.pop();_y.parent.replaceChild(_y.child,_y.wrapper)}return Lr}).then(function(Lr){return x.impl.urlCache=[],Y&&(document.body.removeChild(Y),Y=null),he&&clearTimeout(he),he=setTimeout(()=>{he=null,ge={}},2e4),Lr})}function q(Ae,Re){return W(Ae,Re=Re||{}).then(d.makeImage).then(function(Be){var Ke=typeof Re.scale!="number"?1:Re.scale,Lr=((by,yy)=>{let my=Re.width||d.width(by),$t=Re.height||d.height(by);return d.isDimensionMissing(my)&&(my=d.isDimensionMissing($t)?300:2*$t),d.isDimensionMissing($t)&&($t=my/2),(by=document.createElement("canvas")).width=my*yy,by.height=$t*yy,Re.bgcolor&&((yy=by.getContext("2d")).fillStyle=Re.bgcolor,yy.fillRect(0,0,by.width,by.height)),by})(Ae,Ke),_y=Lr.getContext("2d");return _y.msImageSmoothingEnabled=!1,_y.imageSmoothingEnabled=!1,Be&&(_y.scale(Ke,Ke),_y.drawImage(Be,0,0)),Lr})}let Y=null;function re(Ae){return g.resolveAll().then(function(Re){var Be;return Re!==""&&(Be=document.createElement("style"),Ae.appendChild(Be),Be.appendChild(document.createTextNode(Re))),Ae})}function se(Ae){return b.inlineAll(Ae).then(function(){return Ae})}function de(Ae,Re,Be,Ke,Lr){let _y=x.impl.options.copyDefaultStyles?((yy,my)=>{var $t,K$=(U$=>(yy.styleCaching!=="relaxed"?U$:U$.filter((hy,G$,ky)=>G$===0||G$===ky.length-1)).join(">"))(my=(U$=>{var hy=[];do if(U$.nodeType===C){var G$=U$.tagName;if(hy.push(G$),Se.includes(G$))break}while(U$=U$.parentNode);return hy})(my));{if(ge[K$])return ge[K$];my=((U$,hy)=>{let G$=U$.body;do{var ky=hy.pop(),ky=U$.createElement(ky);G$.appendChild(ky),G$=ky}while(0<hy.length);return G$.textContent="",G$})(($t=(()=>{if(Y)return Y.contentWindow;hy=document.characterSet||"UTF-8",U$=(U$=document.doctype)?(`<!DOCTYPE ${bS(U$.name)} ${bS(U$.publicId)} `+bS(U$.systemId)).trim()+">":"",(Y=document.createElement("iframe")).id="domtoimage-sandbox-"+d.uid(),Y.style.visibility="hidden",Y.style.position="fixed",document.body.appendChild(Y);var U$,hy,G$=Y,ky="domtoimage-sandbox";try{return G$.contentWindow.document.write(U$+`<html><head><meta charset='${hy}'><title>${ky}</title></head><body></body></html>`),G$.contentWindow}catch{}var $y=document.createElement("meta");$y.setAttribute("charset",hy);try{var rS=document.implementation.createHTMLDocument(ky),lS=(rS.head.appendChild($y),U$+rS.documentElement.outerHTML);return G$.setAttribute("srcdoc",lS),G$.contentWindow}catch{}return G$.contentDocument.head.appendChild($y),G$.contentDocument.title=ky,G$.contentWindow;function bS(IS){var BS;return IS?((BS=document.createElement("div")).innerText=IS,BS.innerHTML):""}})()).document,my),$t=((U$,hy)=>{let G$={},ky=U$.getComputedStyle(hy);return d.asArray(ky).forEach(function($y){G$[$y]=$y==="width"||$y==="height"?"auto":ky.getPropertyValue($y)}),G$})($t,my);var Y$=my;do{var W$=Y$.parentElement;W$!==null&&W$.removeChild(Y$),Y$=W$}while(Y$&&Y$.tagName!=="BODY");return ge[K$]=$t}})(Ae,Re):{},by=Lr.style;d.asArray(Be).forEach(function(yy){var my,$t=Be.getPropertyValue(yy),K$=_y[yy],Y$=Ke?Ke.getPropertyValue(yy):void 0;by.getPropertyValue(yy)||($t!==K$||Ke&&$t!==Y$)&&(K$=Be.getPropertyPriority(yy),Y$=by,$t=$t,K$=K$,my=0<=["background-clip"].indexOf(yy=yy),K$?(Y$.setProperty(yy,$t,K$),my&&Y$.setProperty("-webkit-"+yy,$t,K$)):(Y$.setProperty(yy,$t),my&&Y$.setProperty("-webkit-"+yy,$t)))})}let he=null,ge={},Se=["ADDRESS","ARTICLE","ASIDE","BLOCKQUOTE","DETAILS","DIALOG","DD","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","MAIN","NAV","OL","P","PRE","SECTION","SVG","TABLE","UL","math","svg","BODY","HEAD","HTML"]})(commonjsGlobal)})(domToImageMore_min);var domToImageMore_minExports=domToImageMore_min.exports,utils$2={},REG_NUMBER=/^([+-])?0*(\d+)(\.(\d+))?$/,REG_E=/^([+-])?0*(\d+)(\.(\d+))?e(([+-])?(\d+))$/i,e2ten=utils$2.e2ten=function(s){var l=REG_E.exec(s.toString());if(!l)return s;var c=l[2],d=l[4]||"",f=l[5]?+l[5]:0;if(f>0){var g=d.substr(0,f);g=g.length<f?g+new Array(f-g.length+1).join("0"):g,d=d.substr(f),c+=g}else{f=-f;var v=c.length-f;v=v<0?0:v;var b=c.substr(v,f);b=b.length<f?new Array(f-b.length+1).join("0")+b:b,c=c.substring(0,v),d=b+d}return c=c==""?"0":c,(l[1]=="-"?"-":"")+c+(d?"."+d:"")};utils$2.getNumbResult=function(s){var l=REG_NUMBER.exec(s.toString());if(!l&&REG_E.test(s.toString())&&(l=REG_NUMBER.exec(e2ten(s.toString()))),l)return{int:l[2],decimal:l[4],minus:l[1]=="-",num:l.slice(1,3).join("")}};utils$2.centerArray=function s(l,c){if(l.splice.apply(l,[0,c.length].concat(c.splice(0,c.length))),arguments.length>2){var d=[].slice.call(arguments,2);d.unshift(l),s.apply(null,d)}return l};var hasAttr=utils$2.hasAttr=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)};utils$2.extend=function(s){for(var l,c=arguments[0]||{},d=Array.prototype.slice.call(arguments,1),f=0;f<d.length;f++){var g=d[f];for(l in g)hasAttr(g,l)&&(c[l]=g[l])}return c};utils$2.getDigit=function(s){return s>=5?(s-4)*4+4:s};utils$2.unshiftZero=function(s,l){if(l==null&&(l=1),!(l<=0))for(;l--;)s.unshift(0)};utils$2.clearZero=function(s,l,c){if(s==null)return"";var d=~"*.?+$^[](){}|\\/".indexOf(l)?"\\"+l:l,f=new RegExp("^"+d+"+"),g=new RegExp(d+"+$"),v=new RegExp(d+"{2}","g");return s=s.toString(),c=="^"&&(s=s.replace(f,"")),(!c||c=="$")&&(s=s.replace(g,"")),(!c||c=="nto1")&&(s=s.replace(v,l)),s};var utils$1=utils$2;function CL$1(s,l){var c=utils$1.getNumbResult(s);if(!c)return s;l=l||{};var d=this.ch,f=this.ch_u,g=this.ch_f||"",v=this.ch_d||".",b=d.charAt(0),$=c.int,y=c.decimal,x=c.minus,C="",E="",N=x?g:"",W=function de(he,ge,Se){he=utils$1.getNumbResult(he).int;var Ae="",Re=arguments.length>1?arguments[1]:l.tenMin,Be=he.length;if(Be==1)return d.charAt(+he);if(Be<=4)for(var Ke=0,Lr=Be;Lr--;){var _y=+he.charAt(Ke);Ae+=Re&&Be==2&&Ke==0&&_y==1?"":d.charAt(_y),Ae+=_y&&Lr?f.charAt(Lr):"",Ke++}else{for(var by=he.length/4>>0,yy=he.length%4;yy==0||!f.charAt(3+by);)yy+=4,by--;var my=he.substr(0,yy),$t=he.substr(yy);Ae=de(my,Re)+f.charAt(3+by)+($t.charAt(0)=="0"?b:"")+de($t,$t.length>4?Re:!1)}return Ae=utils$1.clearZero(Ae,b),Ae};if(y){y=utils$1.clearZero(y,"0","$");for(var q=0;q<y.length;q++)E+=d.charAt(+y.charAt(q));E=E?v+E:""}if(C=W($),l.ww&&f.length>5){var Y=f.charAt(4),re=f.charAt(5),se=C.lastIndexOf(re);~se&&(C=C.substring(0,se).replace(new RegExp(re,"g"),Y+Y)+C.substring(se))}return N+C+E}function unCL(s){s=s.toString();var l=s.split(this.ch_d),c=l[0].replace(this.ch_f,""),d=l[1],f=!!~l[0].indexOf(this.ch_f),g=this.ch_u.charAt(1),v=this.ch_u.charAt(4),b=this.ch_u.charAt(5);c=c.replace(new RegExp(v+"{2}","g"),b);for(var $=c.split(""),y=0,x=0,C=[],E=[],N=[],W=0;W<$.length;W++){var q=$[W],Y=0,re=0;if(~(Y=this.ch.indexOf(q)))Y>0&&N.unshift(Y);else if(~(re=this.ch_u.indexOf(q))){var se=utils$1.getDigit(re);y>re?(utils$1.unshiftZero(N,se),utils$1.centerArray(E,N)):re>=x?(W==0&&(N=[1]),utils$1.centerArray(C,E,N),C.length>0&&utils$1.unshiftZero(C,se),x=re):(N.length==0&&g==q&&(N=[1]),utils$1.centerArray(E,N),utils$1.unshiftZero(E,utils$1.getDigit(re)),y=re)}}utils$1.centerArray(C,E,N).reverse(),C.length==0&&C.push(0);var de=0;if(d){C.push("."),de="0.";for(var W=0;W<d.length;W++)de+=this.ch.indexOf(d.charAt(W)),C.push(this.ch.indexOf(d.charAt(W)));de=+de}return f&&C.unshift("-"),parseFloat(C.join(""))}function toMoney(s,l){var c={ww:!0,complete:!1,outSymbol:!0,unOmitYuan:!1,forceZheng:!1},d=utils$1.getNumbResult(s),f=this.ch.charAt(0);if(l=typeof l=="object"?l:{},!d)return s;l=utils$1.extend(c,l);var g=d.int,v=d.decimal||"",b=l.outSymbol?this.m_t:"",$=d.minus?this.ch_f:"",y="";if(l.complete){for(var x=1;x<this.m_u.length;x++)y+=CL$1.call(this,v.charAt(x-1)||"0")+this.m_u.charAt(x);$+=CL$1.call(this,g,l)+this.m_u.charAt(0)}else{var C=l.unOmitYuan||g!=="0";if(v=v.substr(0,this.m_u.length-1),v=utils$1.clearZero(v,"0","$"),v)for(var E,x=0;x<this.m_u.length-1;x++)v.charAt(x)&&v.charAt(x)!="0"&&(y+=CL$1.call(this,v.charAt(x))+this.m_u.charAt(x+1),E=!1),v.charAt(x)==="0"&&!E&&((x!=0||g!=="0")&&(y+=f),E=!0);(C||!y)&&($+=CL$1.call(this,g,l)+this.m_u.charAt(0)),l.forceZheng?(y==""||y.charAt(y.length-1)!==this.m_u[2])&&(y+=this.m_z):$+=d.decimal?"":this.m_z,l.forceZheng}return b+$+y}var src={CL:CL$1,unCL,toMoney},nzhClass=src,utils=utils$2;function getNzhObjByLang$1(s,l){return{encodeS:function(c,d){return d=utils.extend({ww:!0,tenMin:!0},d),nzhClass.CL.call(s,c,d)},encodeB:function(c,d){return d=utils.extend({ww:!0},d),nzhClass.CL.call(l,c,d)},decodeS:function(){return nzhClass.unCL.apply(s,arguments)},decodeB:function(){return nzhClass.unCL.apply(l,arguments)},toMoney:function(c,d){return d=utils.extend({ww:!0},d),nzhClass.toMoney.call(l,c,d)}}}var autoGet=getNzhObjByLang$1,cn_s={ch:"",ch_u:"",ch_f:"",ch_d:""},cn_b={ch:"",ch_u:"",ch_f:"",ch_d:"",m_t:"",m_z:"",m_u:""},getNzhObjByLang=autoGet,langs={s:cn_s,b:cn_b},cn$1=getNzhObjByLang(langs.s,langs.b);const Vo=getDefaultExportFromCjs(cn$1);var define_process_env_default={},V$=Object.defineProperty,Ap=s=>{throw TypeError(s)},H$=(s,l,c)=>l in s?V$(s,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[l]=c,mt=(s,l,c)=>H$(s,typeof l!="symbol"?l+"":l,c),Tp=(s,l,c)=>l.has(s)||Ap("Cannot "+c),gn=(s,l,c)=>(Tp(s,l,"read from private field"),c?c.call(s):l.get(s)),nr=(s,l,c)=>l.has(s)?Ap("Cannot add the same private member more than once"):l instanceof WeakSet?l.add(s):l.set(s,c),Sr=(s,l,c,d)=>(Tp(s,l,"write to private field"),l.set(s,c),c);/**
 * @umoteam/editor 4.5.0
 * @license MIT
 * @author umodoc https://www.umodoc.com
 * @see https://editor.umodoc.com/en/docs
 **/if(typeof window<"u"){let s=function(){var l=document.body,c=document.getElementById("__umo__svg__icons__dom__");c||(c=document.createElementNS("http://www.w3.org/2000/svg","svg"),c.style.position="absolute",c.style.width="0",c.style.height="0",c.id="__umo__svg__icons__dom__",c.setAttribute("xmlns","http://www.w3.org/2000/svg"),c.setAttribute("xmlns:link","http://www.w3.org/1999/xlink")),c.innerHTML='<symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-align-center"><path d="M1.75 2.25h12.504M4.754 8h6.496m-9.5 5.75h12.504" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-align-distributed"><path d="M1.75 9.834h12.504M1.75 13.75h12.504m0-9.5-2-2m2 2-2 2m2-2H1.8m2-2-2 2m0 0 2 2" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-align-justify"><path d="M1.75 2.25h12.504M1.75 8h12.504M1.75 13.75h12.504" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-align-left"><path d="M1.75 2.25h12.504M1.75 8h6.496M1.75 13.75h12.504" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-align-right"><path d="M1.75 2.25h12.504M7.754 8h6.496m-12.5 5.75h12.504" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-arrow-down"><path d="M36 18 24 30 12 18" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 1024 1024"  id="umo-icon-assistant"><path d="M510.896 0c283.552 0 513.12 229.056 513.12 512 0 280.704-231.808 512-513.12 512-87.776 0-173.28-22.464-249.792-65.12h-2.24L78.8 994.816h-6.752c-11.264 0-20.256-4.48-27.008-11.232a41.376 41.376 0 0 1-11.264-35.936L69.808 772.48v-2.24C22.544 691.648.016 601.824.016 512-2.224 229.056 227.344 0 510.896 0zm-43.552 306.656H366.096l-4.16 4.224-135.04 396.448v8.448l4.288 4.224h80.096l4.224-4.224 33.728-97.056h139.2l33.728 92.832 8.448 8.448h75.936l4.224-4.224 4.16-4.224v-8.448L471.568 310.88l-4.224-4.224zm261.472-4.32h-67.52l-4.192 4.224h-4.288v4.16l-4.224 4.256V707.2l4.224 8.416 4.288 4.16h75.904l4.224-4.192v-4.224l4.192-4.224V319.2l-4.224-8.448-8.416-8.416zm-316.288 97.12 4.224 12.64 12.64 33.76 33.728 92.768h-97.024l21.12-63.232 25.28-75.936z" fill="var(--umo-primary-color)" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-audio"><rect x="16" y="4" width="16" height="28" rx="8" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M10 21v3c0 7.732 6.268 14 14 14s14-6.268 14-14v-3M24 5v6m-8 5h5m6 0h5m-16 6h5m6 0h5" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M24 38v6" stroke="currentColor" stroke-width="3" /><path d="M16 44h16" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-auto-width"><path d="M6 7h36M8 24h32" stroke="currentColor" stroke-width="3" stroke-linecap="round" /><path d="M13.99 30 8 24.005 14 18m20.01 0L40 23.995 34 30" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 41h36" stroke="currentColor" stroke-width="3" stroke-linecap="round" /></symbol><symbol  viewBox="0 0 24 24" id="umo-icon-background-color"><g stroke="currentColor" stroke-width="2" fill="none" fill-rule="evenodd"><rect x=".5" y=".5" width="23" height="23" rx="3" /><path stroke-linecap="round" stroke-linejoin="round" d="m12.167 5-7.5 14m3-4.384h9M12.167 5l7.5 14" /></g></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-barcode"><path d="M16 6H8a2 2 0 0 0-2 2v8m10 26H8a2 2 0 0 1-2-2v-8m26 10h8a2 2 0 0 0 2-2v-8M32 6h8a2 2 0 0 1 2 2v8m-18 0v16m8-16v16M16 16v16" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-block-add"><path d="m24.06 10-.036 28M10 24h28" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-block-menu"><path fill-rule="evenodd" clip-rule="evenodd" d="M19 10a4 4 0 1 1-8 0 4 4 0 0 1 8 0zm-4 18a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm0 14a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm22-32a4 4 0 1 1-8 0 4 4 0 0 1 8 0zm-4 18a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm0 14a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" fill="currentColor" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-bold"><path d="M3.25 7.75h5.5a3 3 0 1 0 0-6h-4a1.5 1.5 0 0 0-1.5 1.5v4.5zm0 0H9.5a3.25 3.25 0 0 1 0 6.5H4.75a1.5 1.5 0 0 1-1.5-1.5v-5z" vector-effect="non-scaling-stroke" stroke="currentColor" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-bullet-list-2"><path d="M9 42a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm0-28a4 4 0 1 0 0-8 4 4 0 0 0 0 8zm0 14a4 4 0 1 0 0-8 4 4 0 0 0 0 8z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M21 24h22M21 38h22M21 10h22" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol  viewBox="0 0 44 44" id="umo-icon-bullet-list-circle"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163" /><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4zm0-10a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0 1a2 2 0 1 0 0 4 2 2 0 0 0 0-4z" /></symbol><symbol  viewBox="0 0 44 44" id="umo-icon-bullet-list-disc"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163" /><path d="M11 27a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm0-9a3 3 0 1 1 0 6 3 3 0 0 1 0-6z" /></symbol><symbol  viewBox="0 0 44 44" id="umo-icon-bullet-list-square"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163" /><path d="M14 27v6H8v-6h6zm0-9v6H8v-6h6zm0-9v6H8V9h6z" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-bullet-list"><path d="M5.734 7.747h8.5m-8.5 5.5h8.5M5.734 2.25h8.5" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /><path d="M2.25 3.5a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5zM3.5 7.748a1.25 1.25 0 1 1-2.5 0 1.25 1.25 0 0 1 2.5 0zm-1.25 6.748a1.25 1.25 0 1 0 0-2.5 1.25 1.25 0 0 0 0 2.5z" fill="var(--umo-primary-color)" fill-rule="evenodd" clip-rule="evenodd" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-check"><path d="M24 44a19.937 19.937 0 0 0 14.142-5.858A19.937 19.937 0 0 0 44 24a19.938 19.938 0 0 0-5.858-14.142A19.937 19.937 0 0 0 24 4 19.938 19.938 0 0 0 9.858 9.858 19.938 19.938 0 0 0 4 24a19.937 19.937 0 0 0 5.858 14.142A19.938 19.938 0 0 0 24 44z" stroke="currentColor" stroke-width="4" stroke-linejoin="round" /><path d="m16 24 6 6 12-12" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-chinese-case"><path d="M38 10 10 38M6 6l6 8 6-8M5 14h14M5 20h14m-7-6v12m20.846 0H42v16H22v-5.85" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-clear-cache"><path d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M33.542 27c-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7v6m19.084-18v6c-1.274-4.057-5.064-7-9.542-7-4.477 0-8.268 2.943-9.542 7" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-clear-format"><g stroke="currentColor"><path d="m13.83 6.061-3.37-3.37a1.5 1.5 0 0 0-2.121 0L2.223 8.807a1.5 1.5 0 0 0 0 2.122l3.322 3.322h2.218l6.068-6.068a1.5 1.5 0 0 0 0-2.122zm-9.908.569 6.081 6.081" vector-effect="non-scaling-stroke" /><path d="M6 14.25h8.25" stroke-linecap="round" vector-effect="non-scaling-stroke" /></g></symbol><symbol  fill="none" viewBox="0 0 24 24" id="umo-icon-close"><path fill="currentColor" d="M7.05 5.64 12 10.59l4.95-4.95 1.41 1.41L13.41 12l4.95 4.95-1.41 1.41L12 13.41l-4.95 4.95-1.41-1.41L10.59 12 5.64 7.05l1.41-1.41z" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-code-block"><path d="M23 40H7a3 3 0 0 1-3-3V11a3 3 0 0 1 3-3h34a3 3 0 0 1 3 3v14.882" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 11a3 3 0 0 1 3-3h34a3 3 0 0 1 3 3v9H4v-9z" stroke="currentColor" stroke-width="3" /><path d="m34 33-4 4 4 4m6-8 4 4-4 4" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><circle r="2" transform="matrix(0 -1 -1 0 10 14)" fill="currentColor" /><circle r="2" transform="matrix(0 -1 -1 0 16 14)" fill="currentColor" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-code-line-number"><path d="M9 4v9m3 0H6m6 14H6m0-7s3-3 5 0-5 7-5 7m0 7.5s2-3 5-1 0 4.5 0 4.5 3 2.5 0 4.5-5-1-5-1m5-3.5H9M9 4 6 6m15 18h22M21 38h22M21 10h22" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-code-word-wrap"><path d="M6 9h36M6 19h36M6 29h18M6 39h10m8 0h13a5 5 0 0 0 0-10h-5m-8 10 4-4m-4 4 4 4" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-code"><path d="M16 13 4 25.432 16 37m16-24 12 12.432L32 37" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /><path d="m28 4-7 40" stroke="currentColor" stroke-width="4" stroke-linecap="round" /></symbol><symbol  viewBox="0 0 24 24" id="umo-icon-color"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M12.5 2.5 4 21.5m3.4-6.045h10.2M12.5 2.5l8.5 19" /></g></symbol><symbol  fill="none" stroke-width="1.2" viewBox="0 0 16 16" id="umo-icon-comment"><path d="M1.75 3.25a1.5 1.5 0 0 1 1.5-1.5h9.5a1.5 1.5 0 0 1 1.5 1.5v7.513a1.5 1.5 0 0 1-1.5 1.5H8.782l-2.521 2.554a.3.3 0 0 1-.514-.21v-2.344H3.25a1.5 1.5 0 0 1-1.5-1.5V3.25zm4 3.75H8m0 0h2.25M8 7V4.75M8 7v2.25" vector-effect="non-scaling-stroke" stroke="currentColor" stroke-linecap="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-copy"><path d="M13 38h28V16H30V4H13v34zM30 4l11 12" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /><path d="M7 20v24h21" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /><path d="M19 20h4m-4 8h12" stroke="currentColor" stroke-width="4" stroke-linecap="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-date"><path stroke="currentColor" stroke-width="3" stroke-linejoin="round" d="M4 8h40v36H4z" /><path clip-rule="evenodd" d="M28 20v14h8V20h-8z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M17 4v8m14-8v8m-19 8h8v14h-8m8-7h-6" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-diagrams"><path d="M40.99 8.027H12.182C9.455 8.027 4 9.55 4 15.967 4 22.384 9.455 24 12.182 24h23.812C38.72 24 44 25.568 44 31.985c0 6.416-5.279 8.018-8.006 8.018H6.065" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="m8.046 35.993-3.979 4.066L8.046 44M38.043 3.954 42.02 8.02l-3.978 3.941" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-download"><path d="M6 24.008V42h36V24" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /><path d="m33 23-9 9-9-9m8.992-17v26" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-edit"><path d="M5.325 43.5h8.485l31.113-31.113-8.486-8.485L5.325 35.015V43.5z" stroke="currentColor" stroke-width="4" stroke-linejoin="round" /><path d="m27.952 12.387 8.485 8.485" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-embed"><rect x="4" y="8" width="40" height="32" rx="3" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M4 11a3 3 0 0 1 3-3h34a3 3 0 0 1 3 3v9H4v-9z" stroke="currentColor" stroke-width="3" /><circle r="2" transform="matrix(0 -1 -1 0 10 14)" fill="currentColor" /><circle r="2" transform="matrix(0 -1 -1 0 16 14)" fill="currentColor" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-emoji"><path d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M31 18v1m-14-1v1m14 12s-2 4-7 4-7-4-7-4" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-equal-proportion"><path d="M42 7H6a2 2 0 0 0-2 2v30a2 2 0 0 0 2 2h36a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z" stroke="currentColor" stroke-width="4" /><path d="M12 20.58 16 18v12m15-9.42L35 18v12" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /><path d="M24 20v1m0 6v1" stroke="currentColor" stroke-width="4" stroke-linecap="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-exit"><path d="M23.992 6H6v36h18m9-9 9-9-9-9m-17 8.992h26" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-expand-down"><path d="M6 9h36M6 19h36M6 26l18 14 18-14" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-file"><path d="M10 44h28a2 2 0 0 0 2-2V14H30V4H10a2 2 0 0 0-2 2v36a2 2 0 0 0 2 2ZM30 4l10 10M24 21v14M17 28h14" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-font-size-decrease"><path d="m2 13.5 1.422-3.412m0 0 3.301-7.923a.3.3 0 0 1 .554 0l3.301 7.923m-7.156 0h7.156m0 0L12 13.5" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /><path d="M11.043 2.75h3.173" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="var(--umo-primary-color)" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-font-size-increase"><path d="m2 13.5 1.422-3.412m0 0 3.301-7.923a.3.3 0 0 1 .554 0l3.301 7.923m-7.156 0h7.156m0 0L12 13.5" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /><path d="M11 2.75h3.476M12.75 4.549V1" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="var(--umo-primary-color)" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-format-painter"><path d="M6.543 3.961s-1.03 1.203-2.494 1.892c-1.006.473-2.181.585-2.734.626-.2.015-.344.21-.277.398.293.82 1.112 2.801 2.658 4.347 2.126 2.126 3.659 2.968 4.142 3.202.1.048.215.03.299-.04.385-.326 1.5-1.278 2.21-1.987.891-.89 2.186-2.447 2.186-2.447m.48.055a.3.3 0 0 1-.425 0L6.325 3.743a.3.3 0 0 1 0-.424l.68-.68a1.5 1.5 0 0 1 2.121 0l1.357 1.356 1.604-2.02a1.629 1.629 0 1 1 2.279 2.295L12.34 5.853l1.353 1.352a1.5 1.5 0 0 1 0 2.121l-.68.68z" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-format"><path stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" d="M8 24h32v18H8zM4 13h14V6h12v7h14v11H4V13Z" /><path d="M16 32v10" stroke="currentColor" stroke-width="3" stroke-linecap="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-full-screen-exit"><path d="M33 6v9h9M15 6v9H6M15 42v-9H6M33 42v-9h8.9" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-full-screen"><path d="M33 6h9v9M42 33v9h-9M15 42H6v-9M6 15V6h9" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-hard-break"><path d="M6 9h36M6 19h36M6 29h18M6 39h10m8 0h13a5 5 0 0 0 0-10h-5m-8 10 4-4m-4 4 4 4" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-heading"><path d="M12 5v38M36 5v38M12 24h24" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-help"><path d="M24 44a19.937 19.937 0 0 0 14.142-5.858A19.937 19.937 0 0 0 44 24a19.938 19.938 0 0 0-5.858-14.142A19.937 19.937 0 0 0 24 4 19.938 19.938 0 0 0 9.858 9.858 19.938 19.938 0 0 0 4 24a19.937 19.937 0 0 0 5.858 14.142A19.938 19.938 0 0 0 24 44z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M24 28.625v-4a6 6 0 1 0-6-6" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M24 37.625a2.5 2.5 0 1 0 0-5 2.5 2.5 0 0 0 0 5z" fill="currentColor" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-hide-toolbar"><rect x="6" y="6" width="36" height="36" rx="3" stroke="currentColor" stroke-width="2" stroke-linejoin="round" /><path d="M6 16h36M20 32l4-4 4 4M6 10v12M42 10v12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-highlight"><path d="M6 44V25h6v-8h24v8h6v19H6z" stroke="currentColor" stroke-width="4" stroke-linejoin="round" /><path d="M17 17V8l14-4v13" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-home-page"><path clip-rule="evenodd" d="M24 44c11.046 0 20-8.954 20-20S35.046 4 24 4 4 12.954 4 24s8.954 20 20 20z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 24h40" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path clip-rule="evenodd" d="M24 44c4.418 0 8-8.954 8-20S28.418 4 24 4s-8 8.954-8 20 3.582 20 8 20z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M9.858 10.142A19.937 19.937 0 0 0 24 16a19.937 19.937 0 0 0 14.142-5.858m0 27.716A19.937 19.937 0 0 0 24 32a19.937 19.937 0 0 0-14.142 5.858" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-hr"><path d="M5 24h38M21 38h6m10 0h6M21 10h6M5 38h6M5 10h6m26 0h6" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-html5"><path d="M37.804 5H10.196a2 2 0 0 0-1.991 2.187l2.688 28.666a2 2 0 0 0 1.153 1.63l11.116 5.13a2 2 0 0 0 1.676 0l11.116-5.13a2 2 0 0 0 1.154-1.63l2.687-28.666A2 2 0 0 0 37.804 5z" stroke="currentColor" stroke-width="3" /><path d="M32 12H16l1 9h14l-1 11-6 3-6-3-.5-5" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-image-draggable"><path d="M9.583 27.182C7.867 28.354 7.009 30.293 7.009 33c0 4.06 4.991 11 9.492 11h11.515c4.405 0 7.08-3.85 7.08-6.94V24.6a3.253 3.253 0 0 0-3.243-3.253 3.235 3.235 0 0 0-3.245 3.226v.11" stroke="currentColor" stroke-width="3" stroke-linecap="round" /><path d="M10.981 29.445V7.662a3.217 3.217 0 0 1 6.435 0v15.986" stroke="currentColor" stroke-width="3" stroke-linecap="round" /><path d="M17.416 24v-4.192a2.804 2.804 0 0 1 5.608 0v4.62" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M23 24.658v-2.85a2.804 2.804 0 0 1 5.608 0v3.195" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M11 8h30" stroke="currentColor" stroke-width="3" stroke-linecap="round" /><path d="m36 12.5 1.667-1.5L41 8l-3.333-3L36 3.5" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 1024 1024"  id="umo-icon-image-failed"><path d="M480 164.571 580.571 376.87 461.824 512l158.5 193.06-79.25 154.369H73.143V164.57z" opacity=".12" /><path d="m566.857 164.571 99.109 212.444-118.547 134.948 159.16 193.354-79.58 154.112h323.858V164.57z" fill-opacity=".12" /><path d="M182.894 749.714v-85.357L315.209 525.75l157.312 132.206 56.759-63.744 90.917 110.884-22.803 44.617zm658.249 0H683.575l22.985-44.47-132.681-161.207 93.257-105.18 174.062 215.845z" fill-opacity=".12" /><path d="M256 347.429a73.143 73.143 0 1 0 146.286 0 73.143 73.143 0 1 0-146.286 0z" opacity=".12" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-image-flip"><path d="M24 6v36" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /><path d="m4 34 12-22v22H4zm40 0H32V12l12 22z" stroke="currentColor" stroke-width="4" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-image-open"><path d="M42 18v22a2 2 0 0 1-2 2H8a2 2 0 0 1-2-2V18" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 8a2 2 0 0 1 2-2h32a2 2 0 0 1 2 2v10H6V8z" stroke="currentColor" stroke-width="4" stroke-linejoin="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M12 14a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm6 0a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" fill="currentColor" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-image-preview"><path d="M44 24a2 2 0 1 0-4 0h4zM24 8a2 2 0 1 0 0-4v4zm15 32H9v4h30v-4zM8 39V9H4v30h4zm32-15v15h4V24h-4zM9 8h15V4H9v4zm0 32a1 1 0 0 1-1-1H4a5 5 0 0 0 5 5v-4zm30 4a5 5 0 0 0 5-5h-4a1 1 0 0 1-1 1v4zM8 9a1 1 0 0 1 1-1V4a5 5 0 0 0-5 5h4z" fill="currentColor" /><path d="m6 35 10.693-9.802a2 2 0 0 1 2.653-.044L32 36m-4-5 4.773-4.773a2 2 0 0 1 2.615-.186L42 31M30 12h12m-6-6v12" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-image-remove-background"><path d="M44 23.994a2 2 0 0 0-4 0h4zm-20-16a2 2 0 1 0 0-4v4zm15 32H9v4h30v-4zm-31-1v-30H4v30h4zm32-15v15h4v-15h-4zm-31-16h15v-4H9v4zm0 32a1 1 0 0 1-1-1H4a5 5 0 0 0 5 5v-4zm30 4a5 5 0 0 0 5-5h-4a1 1 0 0 1-1 1v4zm-31-35a1 1 0 0 1 1-1v-4a5 5 0 0 0-5 5h4z" fill="currentColor" /><path d="m6 35 10.693-9.802a2 2 0 0 1 2.653-.044L32 36m-4-5 4.773-4.773a2 2 0 0 1 2.615-.186L42 31M33 7l8 8m0-8-8 8" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-image-reset"><path d="M11.272 36.728A17.943 17.943 0 0 0 24 42c9.941 0 18-8.059 18-18S33.941 6 24 6c-4.97 0-9.47 2.015-12.728 5.272C9.614 12.93 6 17 6 17" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /><path d="M6 9v8h8" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-image-rotate"><path d="M12 24h30v18H12V24z" stroke="currentColor" stroke-width="4" stroke-linejoin="round" /><path d="M6 8v9h9" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M38.475 13.299C35.195 8.87 29.933 6 24 6c-5.821 0-10.997 2.763-14.287 7.05L6 17" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-image"><path clip-rule="evenodd" d="M5 10a2 2 0 0 1 2-2h34a2 2 0 0 1 2 2v28a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V10z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path clip-rule="evenodd" d="M14.5 18a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="m15 24 5 4 6-7 17 13v4a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-4l10-10z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-indent"><path d="M1.75 2.25h12.504M1.75 8h7.496M1.75 13.75h12.504" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /><path d="m12.25 6 1.993 1.993a.01.01 0 0 1 0 .014L12.25 10" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="var(--umo-primary-color)" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-italic"><path d="M7.75 1.75h5.5M10.5 2l-5 12m-2.75.25h5.5" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-laser-pointer"><g clip-path="url(#umo-icon-laser-pointer_a)"><rect x="35.193" y="5.322" width="12" height="38" rx="6" transform="rotate(45 35.193 5.322)" stroke="currentColor" stroke-width="4" /><path d="m18 23 8 8M6 43l6-6" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><rect x="33.268" y="12.34" width="4" height="4" rx="2" transform="rotate(30 33.268 12.34)" fill="currentColor" /></g><defs><clipPath id="umo-icon-laser-pointer_a"><path fill="currentColor" d="M0 0h48v48H0z" /></clipPath></defs></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-line-height"><path d="m1.75 3.806 2-2.056 2 2.056m-2 10.144-2-2.056m2 2.056 2-2.056m-2 2.056.012-12.187" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="var(--umo-primary-color)" /><path d="M8.754 13.75h5.5m-5.5-4h5.5m-5.5-4h5.5m-5.504-4h5.504" vector-effect="non-scaling-stroke" stroke="currentColor" stroke-linecap="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-line-number"><path d="M9 4v9m3 0H6m6 14H6m0-7s3-3 5 0-5 7-5 7m0 7.5s2-3 5-1 0 4.5 0 4.5 3 2.5 0 4.5-5-1-5-1m5-3.5H9M9 4 6 6m15 18h22M21 38h22M21 10h22" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-link"><path d="m26.24 16.373-9.14-9.14c-2.661-2.661-7.035-2.603-9.768.131-2.734 2.734-2.793 7.107-.131 9.768l7.935 7.936m17.767-2.065 7.935 7.935c2.661 2.662 2.603 7.035-.13 9.769-2.735 2.734-7.108 2.792-9.77.13l-9.14-9.14m4.312-5.555c2.733-2.734 2.792-7.108.13-9.769m-4.441 5.425c-2.734 2.734-2.792 7.108-.131 9.769" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-loading"><path d="M4 24c0 11.046 8.954 20 20 20s20-8.954 20-20S35.046 4 24 4" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol  viewBox="0 0 22 22" id="umo-icon-margin"><g fill="none" fill-rule="evenodd"><path d="M2 3h18M2 20h18" stroke="var(--umo-primary-color)" stroke-width="2" stroke-linecap="round" /><path d="M0 0h22v22H0z" /><path d="M11 6 6 17m2-3.5h6M11 6l5 11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></g></symbol><symbol viewBox="0 0 1024 1024"  id="umo-icon-markdown"><path stroke="currentColor" d="M896 192a64 64 0 0 1 64 64v512a64 64 0 0 1-64 64H128a64 64 0 0 1-64-64V256a64 64 0 0 1 64-64h768zm-768-64A128 128 0 0 0 0 256v512a128 128 0 0 0 128 128h768a128 128 0 0 0 128-128V256a128 128 0 0 0-128-128H128z" data-spm-anchor-id="a313x.search_index.0.i1.3d203a817x9KY2" /><path stroke="currentColor" d="M585.344 521.344a32 32 0 0 1 45.312 0L736 626.752l105.344-105.408a32.064 32.064 0 0 1 45.312 45.312l-128 128a31.872 31.872 0 0 1-45.312 0l-128-128a32 32 0 0 1 0-45.312z" /><path stroke="currentColor" d="M736 320a32 32 0 0 1 32 32v256a32 32 0 0 1-64 0V352a32 32 0 0 1 32-32zM227.84 704V448.64h3.584l91.392 207.296h49.536l90.88-207.36h3.584V704h68.672V320.064h-76.8L349.248 569.28h-2.496l-109.44-249.216H160V704h67.84z" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-math"><path d="m40 9-3-3H8l18 18L8 42h29l3-3" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-menu"><path d="M7.95 11.95h32m-32 12h32m-32 12h32" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-mermaid"><path d="M41 14 24 4 7 14v20l17 10 17-10V14z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M16 18.998 23.993 24l8.002-5.002M24 24v9" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-message"><path d="M43 5 29.7 43l-7.6-17.1L5 18.3 43 5z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M43 5 22.1 25.9" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-mind-map"><path d="M8 28a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM42 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M32 6H20v36h12M12 24h20" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-minus"><path d="M10.5 24h28" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-node-add"><path d="M16 6H8a2 2 0 0 0-2 2v8m10 26H8a2 2 0 0 1-2-2v-8m26 10h8a2 2 0 0 0 2-2v-8M32 6h8a2 2 0 0 1 2 2v8m-10 8H16m8 8V16" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol  fill="none" viewBox="0 0 16 16" id="umo-icon-node-clear-format"><g stroke="currentColor"><path d="m13.83 6.061-3.37-3.37a1.5 1.5 0 0 0-2.121 0L2.223 8.807a1.5 1.5 0 0 0 0 2.122l3.322 3.322h2.218l6.068-6.068a1.5 1.5 0 0 0 0-2.122zm-9.908.569 6.081 6.081" vector-effect="non-scaling-stroke" /><path d="M6 14.25h8.25" stroke-linecap="round" vector-effect="non-scaling-stroke" /></g></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-node-copy"><path d="M13 12.432v-4.62A2.813 2.813 0 0 1 15.813 5h24.374A2.813 2.813 0 0 1 43 7.813v24.375A2.813 2.813 0 0 1 40.187 35h-4.67" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M32.188 13H7.811A2.813 2.813 0 0 0 5 15.813v24.374A2.813 2.813 0 0 0 7.813 43h24.375A2.813 2.813 0 0 0 35 40.187V15.814A2.813 2.813 0 0 0 32.187 13z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-node-cut"><path fill="#fff" fill-opacity=".01" d="M0 0h48v48H0z" /><path d="M11 42a5 5 0 1 0 0-10 5 5 0 0 0 0 10zm26 0a5 5 0 1 0 0-10 5 5 0 0 0 0 10z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="m15.377 39.413 2.123-3.597 17-29.445" stroke="currentColor" stroke-width="3" stroke-linecap="round" /><path d="m13.496 6.175 17 29.445 2.13 3.793" stroke="currentColor" stroke-width="3" stroke-linecap="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-node-delete-2"><path d="M9 10v34h30V10H9z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M20 20v13m8-13v13M4 10h40" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="m16 10 3.289-6h9.488L32 10H16z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-node-delete"><path d="M9 10v34h30V10H9z" stroke="currentColor" stroke-width="4" stroke-linejoin="round" /><path d="M20 20v13m8-13v13M4 10h40" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /><path d="m16 10 3.289-6h9.488L32 10H16z" stroke="currentColor" stroke-width="4" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-node-duplicate"><path d="M24 30v-6M6 30h36v12H6V30zm0-17.5v-1M6 18v-1M6 7V6m36 6.5v-1m0 6.5v-1m0-10V6m0 12h-1M7 18H6M7 6H6m8 0h-1m8 0h-1m1 12h-1m8-12h-1M14 18h-1m15 0h-1m8-12h-1m1 12h-1m8-12h-1" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-ordered-list-2"><path d="M9 4v9m3 0H6m6 14H6m0-7s3-3 5 0-5 7-5 7m0 7.5s2-3 5-1 0 4.5 0 4.5 3 2.5 0 4.5-5-1-5-1m5-3.5H9M9 4 6 6m15 18h22M21 38h22M21 10h22" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol  viewBox="0 0 44 44" id="umo-icon-ordered-list-decimal-leading-zero"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163" /><path d="M5.714 15.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm6.078.914V8.531H10.79c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.344 0v-1.235h-1.235V15h1.235zm-9.422 9.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm7.088.914v-1.147H10.35c.065-.111.149-.226.253-.343.104-.117.35-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.493-.824.104-.263.156-.539.156-.829 0-.51-.181-.936-.544-1.279-.364-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.152-.155.357-.233.615-.233.261 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.467.536-1.024 1.055-.691.641-1.154 1.156-1.388 1.544-.235.389-.375.8-.422 1.233h4.328zm2.334 0v-1.235h-1.235V24h1.235zM5.714 34.11c.624 0 1.11-.22 1.46-.66.421-.533.632-1.408.632-2.627 0-1.222-.21-2.096-.629-2.624-.351-.445-.839-.668-1.463-.668-.624 0-1.11.22-1.459.66-.422.533-.633 1.406-.633 2.619 0 1.236.192 2.095.576 2.577.384.482.89.723 1.516.723zm0-1.024a.614.614 0 0 1-.398-.14c-.115-.094-.211-.283-.287-.565-.077-.283-.115-.802-.115-1.558s.043-1.294.128-1.613c.064-.246.155-.417.272-.512a.617.617 0 0 1 .4-.143.61.61 0 0 1 .398.143c.116.095.211.284.288.567.076.283.114.802.114 1.558s-.043 1.292-.128 1.608c-.064.246-.155.417-.272.512a.617.617 0 0 1-.4.143zm4.992 1.024c.616 0 1.13-.2 1.543-.598.413-.398.62-.88.62-1.446 0-.39-.111-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.618-.337.927-.788.927-1.353 0-.399-.15-.756-.452-1.073-.366-.386-.853-.58-1.46-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.667.55c-.16.232-.28.544-.359.933l1.139.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.214 0 .386.065.515.194s.193.302.193.518c0 .255-.088.46-.264.613-.175.154-.43.227-.764.218l-.136 1.006c.22-.061.408-.092.566-.092.24 0 .444.09.611.272.167.182.25.428.25.739 0 .328-.086.589-.26.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.308-.698l-1.195.145c.062.542.284.98.668 1.316.384.335.867.503 1.45.503zm4.43-.11v-1.235h-1.235V34h1.235z" /></symbol><symbol  viewBox="0 0 44 44" id="umo-icon-ordered-list-decimal"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163" /><path d="M10.29 15V8.531H9.286c-.14.393-.4.736-.778 1.03-.378.295-.728.495-1.05.6v1.121a4.257 4.257 0 0 0 1.595-.936V15h1.235zm3.343 0v-1.235h-1.235V15h1.235zM11.3 24v-1.147H8.848c.064-.111.148-.226.252-.343.104-.117.351-.354.74-.712.39-.357.66-.631.81-.821.225-.288.39-.562.494-.824.104-.263.156-.539.156-.829 0-.51-.182-.936-.545-1.279-.363-.342-.863-.514-1.499-.514-.58 0-1.063.148-1.45.444-.387.296-.617.784-.69 1.463l1.23.124c.024-.36.112-.619.264-.774.153-.155.358-.233.616-.233.26 0 .465.074.613.222.148.148.222.36.222.635 0 .25-.085.501-.255.756-.126.185-.468.536-1.024 1.055-.692.641-1.155 1.156-1.389 1.544-.234.389-.375.8-.422 1.233H11.3zm2.333 0v-1.235h-1.235V24h1.235zM9.204 34.11c.615 0 1.129-.2 1.542-.598.413-.398.62-.88.62-1.446 0-.39-.11-.722-.332-.997a1.5 1.5 0 0 0-.886-.532c.619-.337.928-.788.928-1.353 0-.399-.151-.756-.453-1.073-.366-.386-.852-.58-1.459-.58a2.25 2.25 0 0 0-.96.2 1.617 1.617 0 0 0-.668.55c-.16.232-.28.544-.358.933l1.138.194c.032-.282.123-.495.272-.642.15-.146.33-.22.54-.22.215 0 .386.065.515.194s.193.302.193.518c0 .255-.087.46-.263.613-.176.154-.43.227-.765.218l-.136 1.006c.22-.061.409-.092.567-.092.24 0 .444.09.61.272.168.182.251.428.251.739 0 .328-.087.589-.261.782a.833.833 0 0 1-.644.29.841.841 0 0 1-.607-.242c-.167-.16-.27-.394-.307-.698l-1.196.145c.062.542.285.98.668 1.316.384.335.868.503 1.45.503zm4.43-.11v-1.235h-1.236V34h1.235z" /></symbol><symbol  viewBox="0 0 44 44" id="umo-icon-ordered-list-lower-latin"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163" /><path d="M9.62 14.105c.272 0 .528-.05.768-.153s.466-.257.677-.462c.009.024.023.072.044.145.047.161.086.283.119.365h1.221a2.649 2.649 0 0 1-.222-.626c-.04-.195-.059-.498-.059-.908l.013-1.441c0-.536-.055-.905-.165-1.105-.11-.201-.3-.367-.569-.497-.27-.13-.68-.195-1.23-.195-.607 0-1.064.108-1.371.325-.308.217-.525.55-.65 1.002l1.12.202c.076-.217.176-.369.299-.455.123-.086.294-.13.514-.13.325 0 .546.05.663.152.118.101.176.27.176.508v.123c-.222.093-.622.194-1.2.303-.427.082-.755.178-.982.288-.227.11-.403.268-.53.474a1.327 1.327 0 0 0-.188.706c0 .398.138.728.415.988.277.261.656.391 1.136.391zm.368-.87a.675.675 0 0 1-.492-.189.606.606 0 0 1-.193-.448c0-.176.08-.32.241-.435.106-.07.33-.142.673-.215a7.19 7.19 0 0 0 .751-.19v.247c0 .296-.016.496-.048.602a.773.773 0 0 1-.295.409 1.07 1.07 0 0 1-.637.22zm4.645.765v-1.235h-1.235V14h1.235zM10.2 25.105c.542 0 1.003-.215 1.382-.646.38-.43.57-1.044.57-1.84 0-.771-.187-1.362-.559-1.774a1.82 1.82 0 0 0-1.41-.617c-.522 0-.973.216-1.354.65v-2.32H7.594V25h1.147v-.686a1.9 1.9 0 0 0 .67.592c.26.133.523.2.79.2zm-.299-.975c-.354 0-.638-.164-.852-.492-.153-.232-.229-.59-.229-1.073 0-.468.098-.818.295-1.048a.93.93 0 0 1 .738-.345c.302 0 .55.118.743.354.193.236.29.62.29 1.154 0 .5-.096.868-.288 1.1-.192.233-.424.35-.697.35zm4.478.87v-1.235h-1.234V25h1.234zm-4.017 9.105c.6 0 1.08-.142 1.437-.426.357-.284.599-.704.725-1.261l-1.213-.207c-.061.326-.167.555-.316.688a.832.832 0 0 1-.576.2.916.916 0 0 1-.75-.343c-.185-.228-.278-.62-.278-1.173 0-.498.091-.853.274-1.066.183-.212.429-.318.736-.318.232 0 .42.061.565.184.145.123.238.306.28.55l1.216-.22c-.146-.501-.387-.874-.722-1.119-.336-.244-.788-.366-1.356-.366-.695 0-1.245.214-1.653.643-.407.43-.61 1.03-.61 1.8 0 .762.202 1.358.608 1.788.406.431.95.646 1.633.646zM14.633 34v-1.235h-1.235V34h1.235z" /></symbol><symbol  viewBox="0 0 44 44" id="umo-icon-ordered-list-lower-roman"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163" /><path d="M11.88 8.7V7.558h-1.234V8.7h1.234zm0 5.3V9.333h-1.234V14h1.234zm2.5 0v-1.235h-1.234V14h1.235zm-4.75 4.7v-1.142H8.395V18.7H9.63zm0 5.3v-4.667H8.395V24H9.63zm2.5-5.3v-1.142h-1.234V18.7h1.235zm0 5.3v-4.667h-1.234V24h1.235zm2.501 0v-1.235h-1.235V24h1.235zM7.38 28.7v-1.142H6.145V28.7H7.38zm0 5.3v-4.667H6.145V34H7.38zm2.5-5.3v-1.142H8.646V28.7H9.88zm0 5.3v-4.667H8.646V34H9.88zm2.5-5.3v-1.142h-1.234V28.7h1.235zm0 5.3v-4.667h-1.234V34h1.235zm2.501 0v-1.235h-1.235V34h1.235z" /></symbol><symbol  viewBox="0 0 44 44" id="umo-icon-ordered-list-simp-chinese-formal"><g fill="none" fill-rule="evenodd"><path d="M36 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H19a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H19a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H19a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163" fill="#000" fill-rule="nonzero" /><path d="M0 0h44v44H0z" /><path d="M9.648 11.728v.624h4.704v-.624H9.648zm-.136.968v1.712h.816l.216.512H8.432v.696h7.128v-.696h-2.136l.248-.512h.816v-1.712H9.512zm1.872 2.224-.216-.512h1.624l-.248.512h-1.16zm2.28-1.136h-3.328v-.48h3.328v.48zM8.696 8.816v.672H11.6v.328H9.2v.64h5.712v-.64H12.4v-.328h2.928v-.672H12.4v-.4h-.8v.4H8.696zm6.712 1.936H8.584v1.28h.768v-.624h5.288v.624h.768v-1.28zM8.36 18.16v.752h4.624c.032 1.232.128 2.312.272 3.232.264 1.728.712 2.608 1.344 2.64.48 0 .848-.624 1.112-1.856l-.696-.392c-.168.856-.304 1.288-.416 1.288-.128-.008-.288-.44-.48-1.288-.184-.912-.296-2.12-.336-3.624h1.808v-.752h-.44a4.676 4.676 0 0 0-.392-.776l-.72.264c.12.16.232.328.328.512h-.6c-.008-.248-.008-.504-.008-.776h-.8c0 .256 0 .512.008.776H8.36zm.72 1.032v.608h3.256v-.608H9.08zm-.448.888v.624h4.128v-.624H8.632zm3.936.936H8.832v2.424h.824v-1.784h2.088v1.72h.824v-2.36zm-1.264 2.336-.472.584c.64.288 1.16.608 1.576.96l.544-.656a9.288 9.288 0 0 0-1.648-.888zm-1.016-1.408v.464c-.032.456-.168.824-.424 1.112-.256.256-.744.48-1.48.656l.44.696c.784-.2 1.344-.488 1.696-.856.368-.4.568-.936.6-1.608v-.464h-.832zm-.128 8.736v.384h3.688v-.44a7.26 7.26 0 0 0 1.536.824l.352-.736c-.896-.28-1.576-.656-2.04-1.12h1.792v-.752h-3.576c.096-.176.176-.36.24-.552.592-.032 1.16-.056 1.712-.088.168.176.32.344.456.512l.688-.48c-.4-.448-.968-.968-1.704-1.576l-.632.4c.192.168.376.336.552.504-.824.04-1.664.072-2.528.104.432-.288.864-.624 1.288-1.008l-.8-.272c-.832.832-1.472 1.264-1.912 1.312l.136.68c.648-.016 1.272-.04 1.88-.056-.072.176-.16.352-.264.52H8.512v.752h1.872c-.52.464-1.232.84-2.128 1.12l.376.744a8.521 8.521 0 0 0 1.528-.776zm1.256-1.088H12.8c.192.264.424.512.696.752h-2.864c.296-.232.56-.48.784-.752zm-1.68 1.96v.728h4.52v-.728h-4.52zM8.848 32.8v.768h6.296V32.8H8.848z" fill="#000" fill-rule="nonzero" /></g></symbol><symbol  viewBox="0 0 44 44" id="umo-icon-ordered-list-trad-chinese-informal"><g fill="none" fill-rule="evenodd"><path d="M36 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H19a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H19a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H19a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163" fill="#000" fill-rule="nonzero" /><path d="M15.416 12.416H8.584v-.88h6.832zm-.296 6.992H8.864v-.888h6.256v.888zm.448 4.704H8.432v-.888h7.136v.888zm-.384 3.944h-6.4v-.848h6.4v.848zm.384 5.584H8.416v-.84h7.152v.84zm-.72-2.912H9.192v-.848h5.656v.848z" fill="#000" fill-rule="nonzero" /><path d="M0 0h44v44H0z" /></g></symbol><symbol  viewBox="0 0 44 44" id="umo-icon-ordered-list-upper-latin"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163" /><path d="m7.88 15 .532-1.463h2.575L11.549 15h1.415l-2.58-6.442H9.01L6.5 15h1.38zm2.69-2.549H8.811l.87-2.39.887 2.39zM14.88 15v-1.235h-1.234V15h1.234zM9.352 25c.83-.006 1.352-.02 1.569-.044.346-.038.636-.14.872-.305.236-.166.422-.387.558-.664.137-.277.205-.562.205-.855 0-.372-.106-.695-.317-.97-.21-.276-.512-.471-.905-.585a1.51 1.51 0 0 0 .661-.567 1.5 1.5 0 0 0 .244-.83c0-.28-.066-.53-.197-.754a1.654 1.654 0 0 0-.495-.539 1.676 1.676 0 0 0-.672-.266c-.25-.042-.63-.063-1.14-.063H7.158V25h2.193zm.142-3.88H8.46v-1.49h.747c.612 0 .983.007 1.112.022.217.026.38.102.49.226.11.125.165.287.165.486a.68.68 0 0 1-.192.503.86.86 0 0 1-.525.23 11.47 11.47 0 0 1-.944.023h.18zm.17 2.795H8.46v-1.723h1.05c.592 0 .977.03 1.154.092.177.062.313.16.406.295a.84.84 0 0 1 .14.492c0 .228-.06.41-.181.547a.806.806 0 0 1-.473.257c-.126.026-.423.04-.892.04zM14.88 25v-1.235h-1.234V25h1.234zm-5.018 9.11c.691 0 1.262-.17 1.711-.512.45-.341.772-.864.965-1.567l-1.261-.4c-.109.472-.287.818-.536 1.037-.25.22-.547.33-.892.33-.47 0-.85-.173-1.143-.519-.293-.345-.44-.925-.44-1.74 0-.767.15-1.322.447-1.665.297-.343.684-.514 1.162-.514.346 0 .64.096.881.29.242.193.4.457.477.79l1.288-.307c-.147-.516-.367-.911-.66-1.187-.492-.465-1.132-.698-1.92-.698-.902 0-1.63.296-2.184.89-.554.593-.83 1.426-.83 2.498 0 1.014.275 1.813.825 2.397.551.585 1.254.877 2.11.877zM14.88 34v-1.235h-1.234V34h1.234z" /></symbol><symbol viewBox="0 0 44 44" id="umo-icon-ordered-list-upper-roman"><path d="M35 29a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17zm0-9a1 1 0 0 1 1 1v1a1 1 0 0 1-1 1H18a1 1 0 0 1-1-1v-1a1 1 0 0 1 1-1h17z" fill-opacity=".163" /><path d="M11.916 15V8.558h-1.301V15h1.3zm2.465 0v-1.235h-1.235V15h1.235zM9.665 25v-6.442h-1.3V25h1.3zm2.5 0v-6.442h-1.3V25h1.3zm2.466 0v-1.235h-1.235V25h1.235zm-7.216 9v-6.442h-1.3V34h1.3zm2.5 0v-6.442h-1.3V34h1.3zm2.501 0v-6.442h-1.3V34h1.3zm2.465 0v-1.235h-1.235V34h1.235z" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-ordered-list"><path d="M7.734 7.747h6.5m-6.5 5.5h6.5M7.734 2.25h6.5" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /><path d="M2.75 6.113V2.127l-.817.802a.546.546 0 0 1-.778-.011.56.56 0 0 1 .012-.786L2.407.914C2.948.384 3.85.77 3.85 1.53v4.583a.553.553 0 0 1-.55.556.553.553 0 0 1-.55-.556zm-.267 2.879c.409-.322.904-.322 1.312 0 .383.301.493.87.204 1.277a4.4 4.4 0 0 1-.23.29c-.197.23-.456.508-.744.803a56.575 56.575 0 0 1-1.709 1.66c-.557.521-.181 1.447.588 1.447H4.64c.304 0 .55-.242.55-.54a.545.545 0 0 0-.55-.542H2.517a49.34 49.34 0 0 0 1.3-1.275c.297-.303.575-.6.795-.858.109-.128.208-.252.289-.366.075-.105.157-.233.205-.363.318-.857.158-1.761-.623-2.377a2.125 2.125 0 0 0-2.688 0c-.594.469-.692 1.098-.706 1.484a.545.545 0 0 0 .53.56.546.546 0 0 0 .569-.521c.01-.26.068-.5.295-.68z" fill="var(--umo-primary-color)" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-outdent"><path d="M1.75 2.25h12.504M6.754 8h7.496m-12.5 5.75h12.504" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /><path d="M3.75 6 1.757 7.993a.01.01 0 0 0 0 .014L3.75 10" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="var(--umo-primary-color)" /></symbol><symbol  viewBox="0 0 24 24" id="umo-icon-page-background"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><rect stroke="currentColor" stroke-width="1.5" x="3.5" y="1.5" width="17" height="21" rx="1" /></g></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-page-break"><path d="M8 6v6h32V6" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M14 24h20" stroke="currentColor" stroke-width="3" stroke-linecap="round" /><path d="M8 42v-6h32v6" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol  viewBox="0 0 24 24" id="umo-icon-page-footer"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><rect stroke="currentColor" stroke-width="1.5" x="3.5" y="1.5" width="17" height="21" rx="1" /><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M3.5 18.5h17" /></g></symbol><symbol  viewBox="0 0 24 24" id="umo-icon-page-header"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><rect stroke="currentColor" x="3.5" stroke-width="1.5" y="1.5" width="17" height="21" rx="1" /><path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" d="M3.5 5.5h17" /></g></symbol><symbol  viewBox="0 0 24 24" id="umo-icon-page-margin"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><rect stroke="currentColor" x="3.5" y="1.5" stroke-width="1.5" width="17" height="21" rx="1" /><path d="M3.5 4.5h17m-14 18v-21m11 21v-21m-14 18h17" stroke="currentColor" opacity=".3" stroke-linecap="round" stroke-linejoin="round" /></g></symbol><symbol  viewBox="0 0 24 24" id="umo-icon-page-orientation"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><rect stroke="currentColor" x="1" y="2.5" stroke-width="1.5" width="13" height="18" rx="1" /><rect stroke="currentColor" transform="rotate(90 15.5 17.5)" x="10" y="10" stroke-width="1.5" width="11" height="15" rx="1" /></g></symbol><symbol  viewBox="0 0 24 24" id="umo-icon-page-size"><g fill="none" fill-rule="evenodd" stroke-width="1.5"><path d="M0 0h24v24H0z" /><path d="M4.5 2.5h11a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-11a1 1 0 0 1-1-1v-14a1 1 0 0 1 1-1z" stroke="currentColor" /><path d="m15 20.5 1.5 1.5-1.5 1.5m-10-3L3.5 22 5 23.5M3.5 22h12m6-5L20 18.5 18.5 17m3-13L20 2.5 18.5 4M20 2.5V18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" /></g></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-page"><path d="M10 44h28a2 2 0 0 0 2-2V14H30V4H10a2 2 0 0 0-2 2v36a2 2 0 0 0 2 2zM30 4l10 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-palette-color"><path d="M24 44c5.96 0 2.336-8.864 6-13 3.126-3.53 14-1.914 14-7 0-11.046-8.954-20-20-20S4 12.954 4 24s8.954 20 20 20z" stroke="currentColor" stroke-width="4" stroke-linejoin="round" /><path d="M28 17a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm-12 4a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm1 13a3 3 0 1 0 0-6 3 3 0 0 0 0 6z" stroke="currentColor" stroke-width="4" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-paragraph"><path d="M8 10.933V6h32v4.933M24 6v36m-8 0h16" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-pdf"><path d="M10 4h20l10 10v28a2 2 0 0 1-2 2H10a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path clip-rule="evenodd" d="M18 18h12v7.992L18.008 26 18 18z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M18 18v16" stroke="currentColor" stroke-width="3" stroke-linecap="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-plus"><path d="m24.06 10-.036 28M10 24h28" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-preview"><path d="M12 35.014H4V8.013a2 2 0 0 1 2-2h36a2 2 0 0 1 2 2v27h-8" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M24 32 14 42h20L24 32Z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-print"><path d="M37 32H11v12h26V32z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path clip-rule="evenodd" d="M4 20h40v18h-6.983v-6H10.98v6H4V20z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M38 4H10v16h28V4z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-qrcode"><path stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" d="M32 6h10v10H32zm0 26h10v10H32zM6 32h10v10H6zM6 6h10v10H6zm2 18h22m8 0h2M24 37v2m0-22v14m0-23v2" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-quote"><path fill-rule="evenodd" clip-rule="evenodd" d="M18.853 9.116C11.323 13.952 7.14 19.58 6.303 26.003 5 36 13.94 40.893 18.47 36.497 23 32.1 20.285 26.52 17.005 24.994c-3.28-1.525-5.286-.994-4.936-3.033.35-2.038 5.016-7.69 9.116-10.322a.749.749 0 0 0 .114-1.02L20.285 9.3c-.44-.572-.862-.55-1.432-.185zm19.826 0c-7.53 4.836-11.714 10.465-12.55 16.887-1.303 9.997 7.637 14.89 12.167 10.494 4.53-4.397 1.815-9.977-1.466-11.503-3.28-1.525-5.286-.994-4.936-3.033.35-2.038 5.017-7.69 9.117-10.322a.749.749 0 0 0 .113-1.02L40.11 9.3c-.44-.572-.862-.55-1.431-.185z" fill="currentColor" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-redo"><g stroke="currentColor" stroke-linecap="round"><path d="M14.113 4.75h-7.5a4.75 4.75 0 0 0 0 9.5h3.75" vector-effect="non-scaling-stroke" /><path d="m11.113 1.75 2.993 2.993a.01.01 0 0 1 0 .014L11.113 7.75" vector-effect="non-scaling-stroke" /></g></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-reload"><path d="M42 8v16M6 24v16m36-16c0-9.941-8.059-18-18-18a17.947 17.947 0 0 0-12.952 5.5M6 24c0 9.941 8.059 18 18 18a17.94 17.94 0 0 0 12.5-5.048" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-reply"><path d="M33 38H22v-8h14v-8h8v16h-5l-3 3-3-3z" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 6h32v24H17l-4 4-4-4H4V6z" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /><path d="M12 22h6m-6-8h12" stroke="currentColor" stroke-width="4" stroke-linecap="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-seal"><path d="M5 37a2 2 0 0 1 2-2h34a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-5Z" stroke="currentColor" stroke-width="3" /><path d="M5 31a2 2 0 0 1 2-2h34a2 2 0 0 1 2 2v11a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V31Z" stroke="currentColor" stroke-width="3" /><path d="M18.763 15.664a1 1 0 0 1 .942-.664h8.59a1 1 0 0 1 .942.664L34 29H14l4.763-13.336Z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><rect x="15" y="4" width="18" height="10.8" rx="5.4" stroke="currentColor" stroke-width="3" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-search-replace"><path d="M40 27V6a2 2 0 0 0-2-2H10a2 2 0 0 0-2 2v36a2 2 0 0 0 2 2h11m-4-32h14m-14 8h14m-14 8h6" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M37 37c0 1.38-.56 2.63-1.465 3.535A5 5 0 1 1 37 37z" /><path d="m39 44-3.465-3.465m0 0a5 5 0 1 0-7.071-7.07 5 5 0 0 0 7.072 7.07z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-select-all"><path d="M32 16h9a2 2 0 0 1 2 2v23a2 2 0 0 1-2 2H18a2 2 0 0 1-2-2v-9" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M32 16V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v23a2 2 0 0 0 2 2h9m25-16L17 40M32 7 7 32m25-16L16 32m27-8L24 43m0-38L5 24m38 10-9 9M14 5l-9 9" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-setting"><path d="M1.853 3.966a.01.01 0 0 0-.016.003 4.307 4.307 0 0 0 5.714 5.7l4.87 4.871a1.5 1.5 0 1 0 2.122-2.12L9.671 7.546a4.307 4.307 0 0 0-5.713-5.704.01.01 0 0 0-.003.016l2.6 2.6L4.45 6.563 1.853 3.966z" vector-effect="non-scaling-stroke" stroke="currentColor" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-share"><path d="M35 16a5 5 0 1 0 0-10 5 5 0 0 0 0 10zM13 29a5 5 0 1 0 0-10 5 5 0 0 0 0 10z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="m30 13.575-12.66 7.67m-.002 5.319 13.34 7.883" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M35 32a5 5 0 1 1 0 10 5 5 0 0 1 0-10z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-shortcut"><path d="M42 7H6a2 2 0 0 0-2 2v28a2 2 0 0 0 2 2h36a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M12 19h2m7 0h2m6 0h7m-24 9h24" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-signature"><path clip-rule="evenodd" d="M24 24v-5L39 4l5 5-15 15h-5z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M16 24H9a5 5 0 0 0 0 10h30a5 5 0 0 1 0 10H18" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-spellcheck"><path d="m34 10 8 8m0-8-8 8m10 12-7 8-4-4m-7-24H4v8h22v-8zm0 20H4v8h22v-8z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-strike"><path d="M1.5 8.25h13m-11.75 6 1.415-3.503m9.085 3.504-1.401-3.504M6.178 5.28l1.544-3.872a.3.3 0 0 1 .556 0L9.816 5.28" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-subscript"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.266 10.905a.402.402 0 0 0 .399.446h.171c.236 0 .424-.208.464-.46v-.005c.03-.16.078-.305.142-.432a.841.841 0 0 1 .253-.316.633.633 0 0 1 .395-.124c.228 0 .414.08.558.24.15.155.224.374.224.657a.983.983 0 0 1-.112.473c-.07.139-.159.263-.268.374-.104.11-.221.213-.35.308-.13.088-.25.177-.365.265-.223.172-.437.341-.64.507a3.246 3.246 0 0 0-.521.549l-.037.048a2.273 2.273 0 0 0-.328.614c-.084.25-.108.951.699.951h2.581c.236 0 .428-.207.428-.461v-.091c0-.255-.192-.462-.428-.462h-2.037l.036-.056c.12-.187.258-.4.411-.535.169-.15.342-.288.521-.416.179-.132.355-.265.529-.398.178-.133.337-.28.476-.44.14-.167.25-.355.335-.566a2.03 2.03 0 0 0 .127-.756c0-.282-.05-.537-.149-.764a1.648 1.648 0 0 0-.96-.93A1.851 1.851 0 0 0 14.141 9c-.313 0-.59.06-.834.183a1.602 1.602 0 0 0-.595.498c-.16.21-.278.46-.358.748-.043.151-.072.31-.09.476z" fill="var(--umo-primary-color)" /><path d="m10.75 1.75-9 12.5m9 0-9-12.5" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-superscript"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.665 3.351a.402.402 0 0 1-.4-.446c.018-.166.047-.325.09-.476.08-.288.199-.537.357-.748a1.61 1.61 0 0 1 .596-.498c.243-.122.521-.183.834-.183.238 0 .464.042.678.125a1.648 1.648 0 0 1 .96.93c.1.227.149.482.149.764 0 .294-.042.546-.127.756a2.08 2.08 0 0 1-.335.565c-.139.16-.298.308-.476.44-.174.134-.35.266-.529.4a6.289 6.289 0 0 0-.521.415c-.153.136-.29.348-.41.535l-.037.056h2.037c.236 0 .428.207.428.462v.09c0 .255-.192.462-.428.462H12.95c-.807 0-.783-.701-.7-.95.083-.229.196-.443.329-.615l.037-.049c.149-.199.322-.382.52-.548.204-.166.418-.335.641-.507a7.68 7.68 0 0 1 .365-.265c.129-.095.246-.197.35-.308.11-.11.198-.235.268-.374a.984.984 0 0 0 .112-.473c0-.283-.075-.501-.224-.657a.715.715 0 0 0-.558-.24.633.633 0 0 0-.395.124.842.842 0 0 0-.253.316 1.593 1.593 0 0 0-.141.432l-.001.006c-.04.251-.228.46-.464.46h-.171z" fill="var(--umo-primary-color)" /><path d="m10.75 1.75-9 12.5m9 0-9-12.5" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-symbol"><path d="M4 40.003h14.004C11.334 35.636 8 30.301 8 24c0-9.453 7.017-16 16.008-16C33 8 40 15 40 24c0 6-3.331 11.334-9.993 16.003H44" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-add-column-after"><path stroke="currentColor" stroke-width="4" stroke-linejoin="round" d="M14.5 17h28v14h-28z" /><path d="M6.5 6v36" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-add-column-before"><path stroke="currentColor" stroke-width="4" stroke-linejoin="round" d="M6 17h28v14H6z" /><path d="M42 6v36" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-add-row-after"><path stroke="currentColor" stroke-width="4" stroke-linejoin="round" d="M17 6h14v28H17z" /><path d="M42 42H6" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-add-row-before"><path stroke="currentColor" stroke-width="4" stroke-linejoin="round" d="M17 14.5h14v28H17z" /><path d="M42 6.5H6" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-cells-align"><rect x="6" y="6" width="36" height="36" rx="3" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M22 30h4m-8-6h12m-10-6h8" stroke="currentColor" stroke-width="3" stroke-linecap="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-cells-background"><path fill-rule="evenodd" clip-rule="evenodd" d="M37 37a4 4 0 0 0 4-4c0-1.473-1.333-3.473-4-6-2.667 2.527-4 4.527-4 6a4 4 0 0 0 4 4z" fill="currentColor" /><path d="m20.854 5.504 3.535 3.536" stroke="currentColor" stroke-width="3" stroke-linecap="round" /><path d="M23.682 8.333 8.125 23.889 19.44 35.203l15.556-15.557L23.682 8.333z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="m12 20.073 16.961 5.577M4 43h40" stroke="currentColor" stroke-width="3" stroke-linecap="round" /></symbol><symbol  viewBox="0 0 24 24" id="umo-icon-table-delete-column"><g fill="none" fill-rule="evenodd"><path d="m10 17.5 4 4m-4 0 4-4m-4-4v-11h4v11h-4z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M0 0v24h24V0z" /><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M3 21.5v-19m18 18.75v-19" /></g></symbol><symbol  viewBox="0 0 24 24" id="umo-icon-table-delete-row"><g fill="none" fill-rule="evenodd"><path d="m17.5 14 4-4m0 4-4-4m-4 4h-11v-4h11v4z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" /><path d="M0 24h24V0H0z" /><path stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" d="M21.5 21h-19M21.25 3h-19" /></g></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-delete"><path d="M14 11 4 24l10 13h30V11H14zm7 8 10 10m0-10L21 29" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-fix"><rect x="5" y="5" width="38" height="38" rx="2" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M5 18h38M5 30h38M17 5v38M30 5v38" stroke="currentColor" stroke-width="3" stroke-linecap="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-header-cell"><path d="M40 6H8a2 2 0 0 0-2 2v32a2 2 0 0 0 2 2h32a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2z" stroke="currentColor" stroke-width="4" stroke-linejoin="round" /><path d="M16.123 6 6 15m20.003-9L6 24M35 6 6 33m13-3L6 42m35-32L29.243 20.852M19 21v21m0-21h23" stroke="currentColor" stroke-width="4" stroke-linecap="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-header-column"><path d="M40 6H8a2 2 0 0 0-2 2v32a2 2 0 0 0 2 2h32a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2z" stroke="currentColor" stroke-width="4" stroke-linejoin="round" /><path d="M16.123 6 6 15m13-3L6 24m13-3L6 33m13-3L6 42M19 6v36" stroke="currentColor" stroke-width="4" stroke-linecap="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-header-row"><path d="M40 6H8a2 2 0 0 0-2 2v32a2 2 0 0 0 2 2h32a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2z" stroke="currentColor" stroke-width="4" stroke-linejoin="round" /><path d="M6 19.059h36M16.123 6 6 15m36-4.993L32 19M26.123 6l-14.2 12.624M36.123 6l-14.2 12.624" stroke="currentColor" stroke-width="4" stroke-linecap="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-merge-cell"><path d="M20 14V5a1 1 0 0 0-1-1H5a1 1 0 0 0-1 1v38a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-9m8 0v9a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1V5a1 1 0 0 0-1-1H29a1 1 0 0 0-1 1v9m0 10h16M5 24h15" stroke="currentColor" stroke-width="4" stroke-linecap="round" /><path d="m32.748 28.818-1.59-1.59-3.182-3.183 3.181-3.182 1.591-1.59m-17.373 9.545 1.591-1.59 3.182-3.183-3.182-3.182-1.591-1.59" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-next-cell"><path d="M42 19V9a3 3 0 0 0-3-3H9a3 3 0 0 0-3 3v30a3 3 0 0 0 3 3h10" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /><path d="m34 24 8 8-8 8m-10-8h18" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-previous-cell"><path d="M42 19V9a3 3 0 0 0-3-3H9a3 3 0 0 0-3 3v30a3 3 0 0 0 3 3h10" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /><path d="m32 24-8 8 8 8m-8-8h18" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table-split-cell"><path d="M4 14V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v38a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-9m40 0v9a1 1 0 0 1-1 1H29a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h14a1 1 0 0 1 1 1v9M28 24l16 .013m-40 0L20 24" stroke="currentColor" stroke-width="4" stroke-linecap="round" /><path d="m39.227 28.778 1.592-1.591L44 24.005l-3.181-3.182-1.592-1.591M8.755 28.786l-1.59-1.59-3.183-3.183 3.182-3.182 1.591-1.59" stroke="currentColor" stroke-width="4" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-table"><path d="M42 6H6a2 2 0 0 0-2 2v32a2 2 0 0 0 2 2h36a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M4 18h40m-26.5 0v24m13-24v24M4 30h40m0-22v32a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V8" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-task-list-2"><g clip-path="url(#umo-icon-task-list-2_a)" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><path d="M42 20v19a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9a3 3 0 0 1 3-3h21" /><path d="m16 20 10 8L41 7" /></g><defs><clipPath id="umo-icon-task-list-2_a"><path fill="currentColor" d="M0 0h48v48H0z" /></clipPath></defs></symbol><symbol  viewBox="0 0 14 14" id="umo-icon-task-list"><g fill="none" fill-rule="evenodd"><path d="M0 0h14v14H0z" /><path d="M13 5.667V12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1h7" stroke="currentColor" stroke-width="1.333" stroke-linecap="round" stroke-linejoin="round" /><path stroke="var(--umo-primary-color)" stroke-width="1.333" stroke-linecap="round" stroke-linejoin="round" d="m4.333 5.667 3.334 2.666 5-7" /></g></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-template"><path d="M23 4H4v22h19V4zm21 30H4v9h40v-9zm0-30H31v8h13V4zm0 14H31v8h13v-8z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-text-box"><path d="M12 4H4v8h8V4zm32 32h-8v8h8v-8zm-32 0H4v8h8v-8zM44 4h-8v8h8V4z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M8 36V12m32 24V12M12 8h24M12 40h24" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-text"><path d="M10 44h28a2 2 0 0 0 2-2V14H30V4H10a2 2 0 0 0-2 2v36a2 2 0 0 0 2 2zM30 4l10 10m-16 8v14m-6-14h12" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-toc"><rect x="8" y="4" width="32" height="40" rx="2" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M21 14h12M21 24h12M21 34h12" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path fill-rule="evenodd" clip-rule="evenodd" d="M15 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm0 10a2 2 0 1 0 0-4 2 2 0 0 0 0 4z" fill="currentColor" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-toolbar-classic"><rect x="6" y="6" width="36" height="36" rx="3" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M6 16h36M6 13v6m36-6v6" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-toolbar-ribbon"><rect x="6" y="6" width="36" height="36" rx="3" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M6 32h36M6 29v6m36-6v6" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-toolbar-source"><rect x="4" y="8" width="40" height="32" rx="2" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 10a2 2 0 0 1 2-2h36a2 2 0 0 1 2 2v6H4v-6z" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="m25 23-2 11" stroke="currentColor" stroke-width="3" stroke-linecap="round" /><path d="m31 23 6 5-6 6M17 23l-6 5 6 6" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-underline"><path d="M12.25 1.75V7a4.25 4.25 0 0 1-8.5 0V1.75m-.5 12.5h9.5" stroke-linecap="round" vector-effect="non-scaling-stroke" stroke="currentColor" /></symbol><symbol  fill="none" stroke-width="1.5" viewBox="0 0 16 16" id="umo-icon-undo"><g stroke="currentColor" stroke-linecap="round"><path d="M2 4.75h7.5a4.75 4.75 0 1 1 0 9.5H5.75" vector-effect="non-scaling-stroke" /><path d="M4.886 1.75 1.894 4.743a.01.01 0 0 0 0 .014L4.886 7.75" vector-effect="non-scaling-stroke" /></g></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-video"><path d="M4 10a2 2 0 0 1 2-2h36a2 2 0 0 1 2 2v28a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V10z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="M36 8v32M12 8v32m26-22h6m-6 12h6M4 18h6m-6-2v4M9 8h6M9 40h6M33 8h6m-6 32h6M4 30h6m-6-2v4m40-4v4m0-16v4" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="m21 19 8 5-8 5V19z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /></symbol><symbol  viewBox="0 0 24 24" id="umo-icon-watermark"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z" /><rect stroke="currentColor" stroke-width="1.5" x="3.5" y="1.5" width="17" height="21" rx="1" /><path d="m8.5 4.5-3 3m13 9L16 19M13.5 4.5l-8 8m13-7-13 13m13-7L11 19" opacity=".334" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" /></g></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-web-page"><path d="M25 40H7a3 3 0 0 1-3-3V11a3 3 0 0 1 3-3h34a3 3 0 0 1 3 3v13.941" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><path d="M4 11a3 3 0 0 1 3-3h34a3 3 0 0 1 3 3v9H4v-9z" stroke="currentColor" stroke-width="3" /><path d="M32 35h12m-6-6v12" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /><circle r="2" transform="matrix(0 -1 -1 0 10 14)" fill="currentColor" /><circle r="2" transform="matrix(0 -1 -1 0 16 14)" fill="currentColor" /></symbol><symbol viewBox="0 0 48 48" fill="none"  id="umo-icon-word"><path d="M10 4h20l10 10v28a2 2 0 0 1-2 2H10a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2z" stroke="currentColor" stroke-width="3" stroke-linejoin="round" /><path d="m16.008 20 3 14 5-10 5 10 3-14" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" /></symbol>',l.insertBefore(c,l.lastChild)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",s):s()}function _d(s,l){(l==null||l>s.length)&&(l=s.length);for(var c=0,d=Array(l);c<l;c++)d[c]=s[c];return d}function YS(s){if(Array.isArray(s))return _d(s)}function ZS(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function Sy(s,l){if(s){if(typeof s=="string")return _d(s,l);var c={}.toString.call(s).slice(8,-1);return c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set"?Array.from(s):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?_d(s,l):void 0}}function XS(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wt(s){return YS(s)||ZS(s)||Sy(s)||XS()}function Zt(s){"@babel/helpers - typeof";return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},Zt(s)}function JS(s,l){if(Zt(s)!="object"||!s)return s;var c=s[Symbol.toPrimitive];if(c!==void 0){var d=c.call(s,l||"default");if(Zt(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(s)}function xy(s){var l=JS(s,"string");return Zt(l)=="symbol"?l:l+""}function ne(s,l,c){return(l=xy(l))in s?Object.defineProperty(s,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[l]=c,s}var Qo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ot(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}function QS(s){var l=typeof s;return s!=null&&(l=="object"||l=="function")}var ln=QS;const jt=ot(ln);var e4=typeof Qo=="object"&&Qo&&Qo.Object===Object&&Qo,Oy=e4,t4=Oy,n4=typeof self=="object"&&self&&self.Object===Object&&self,r4=t4||n4||Function("return this")(),Ln=r4,a4=Ln,o4=a4.Symbol,bo=o4,jp=bo,Ey=Object.prototype,i4=Ey.hasOwnProperty,l4=Ey.toString,Ho=jp?jp.toStringTag:void 0;function s4(s){var l=i4.call(s,Ho),c=s[Ho];try{s[Ho]=void 0;var d=!0}catch{}var f=l4.call(s);return d&&(l?s[Ho]=c:delete s[Ho]),f}var u4=s4,c4=Object.prototype,d4=c4.toString;function f4(s){return d4.call(s)}var v4=f4,Dp=bo,p4=u4,m4=v4,h4="[object Null]",g4="[object Undefined]",Bp=Dp?Dp.toStringTag:void 0;function b4(s){return s==null?s===void 0?g4:h4:Bp&&Bp in Object(s)?p4(s):m4(s)}var _r=b4,y4=_r,_4=ln,w4="[object AsyncFunction]",C4="[object Function]",k4="[object GeneratorFunction]",$4="[object Proxy]";function S4(s){if(!_4(s))return!1;var l=y4(s);return l==C4||l==k4||l==w4||l==$4}var js=S4;const rt=ot(js);var x4=Ln,O4=x4["__core-js_shared__"],E4=O4,wc=E4,Fp=function(){var s=/[^.]+$/.exec(wc&&wc.keys&&wc.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function A4(s){return!!Fp&&Fp in s}var T4=A4,P4=Function.prototype,M4=P4.toString;function I4(s){if(s!=null){try{return M4.call(s)}catch{}try{return s+""}catch{}}return""}var Ay=I4,N4=js,j4=T4,D4=ln,B4=Ay,F4=/[\\^$.*+?()[\]{}|]/g,L4=/^\[object .+?Constructor\]$/,R4=Function.prototype,z4=Object.prototype,V4=R4.toString,H4=z4.hasOwnProperty,U4=RegExp("^"+V4.call(H4).replace(F4,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function K4(s){if(!D4(s)||j4(s))return!1;var l=N4(s)?U4:L4;return l.test(B4(s))}var W4=K4;function G4(s,l){return s==null?void 0:s[l]}var q4=G4,Y4=W4,Z4=q4;function X4(s,l){var c=Z4(s,l);return Y4(c)?c:void 0}var xa=X4,J4=xa,Q4=function(){try{var s=J4(Object,"defineProperty");return s({},"",{}),s}catch{}}(),Ty=Q4,Lp=Ty;function ex(s,l,c){l=="__proto__"&&Lp?Lp(s,l,{configurable:!0,enumerable:!0,value:c,writable:!0}):s[l]=c}var Ds=ex;function tx(s){return function(l,c,d){for(var f=-1,g=Object(l),v=d(l),b=v.length;b--;){var $=v[s?b:++f];if(c(g[$],$,g)===!1)break}return l}}var nx=tx,rx=nx,ax=rx(),Py=ax;function ox(s,l){for(var c=-1,d=Array(s);++c<s;)d[c]=l(c);return d}var ix=ox;function lx(s){return s!=null&&typeof s=="object"}var Tn=lx,sx=_r,ux=Tn,cx="[object Arguments]";function dx(s){return ux(s)&&sx(s)==cx}var fx=dx,Rp=fx,vx=Tn,My=Object.prototype,px=My.hasOwnProperty,mx=My.propertyIsEnumerable,hx=Rp(function(){return arguments}())?Rp:function(s){return vx(s)&&px.call(s,"callee")&&!mx.call(s,"callee")},Pi=hx,gx=Array.isArray,sn=gx;const at=ot(sn);var Yl={exports:{}};function bx(){return!1}var yx=bx;Yl.exports;(function(s,l){var c=Ln,d=yx,f=l&&!l.nodeType&&l,g=f&&!0&&s&&!s.nodeType&&s,v=g&&g.exports===f,b=v?c.Buffer:void 0,$=b?b.isBuffer:void 0,y=$||d;s.exports=y})(Yl,Yl.exports);var Mi=Yl.exports,_x=9007199254740991,wx=/^(?:0|[1-9]\d*)$/;function Cx(s,l){var c=typeof s;return l=l??_x,!!l&&(c=="number"||c!="symbol"&&wx.test(s))&&s>-1&&s%1==0&&s<l}var Bs=Cx,kx=9007199254740991;function $x(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=kx}var jf=$x,Sx=_r,xx=jf,Ox=Tn,Ex="[object Arguments]",Ax="[object Array]",Tx="[object Boolean]",Px="[object Date]",Mx="[object Error]",Ix="[object Function]",Nx="[object Map]",jx="[object Number]",Dx="[object Object]",Bx="[object RegExp]",Fx="[object Set]",Lx="[object String]",Rx="[object WeakMap]",zx="[object ArrayBuffer]",Vx="[object DataView]",Hx="[object Float32Array]",Ux="[object Float64Array]",Kx="[object Int8Array]",Wx="[object Int16Array]",Gx="[object Int32Array]",qx="[object Uint8Array]",Yx="[object Uint8ClampedArray]",Zx="[object Uint16Array]",Xx="[object Uint32Array]",ut={};ut[Hx]=ut[Ux]=ut[Kx]=ut[Wx]=ut[Gx]=ut[qx]=ut[Yx]=ut[Zx]=ut[Xx]=!0;ut[Ex]=ut[Ax]=ut[zx]=ut[Tx]=ut[Vx]=ut[Px]=ut[Mx]=ut[Ix]=ut[Nx]=ut[jx]=ut[Dx]=ut[Bx]=ut[Fx]=ut[Lx]=ut[Rx]=!1;function Jx(s){return Ox(s)&&xx(s.length)&&!!ut[Sx(s)]}var Qx=Jx;function eO(s){return function(l){return s(l)}}var Fs=eO,Zl={exports:{}};Zl.exports;(function(s,l){var c=Oy,d=l&&!l.nodeType&&l,f=d&&!0&&s&&!s.nodeType&&s,g=f&&f.exports===d,v=g&&c.process,b=function(){try{var $=f&&f.require&&f.require("util").types;return $||v&&v.binding&&v.binding("util")}catch{}}();s.exports=b})(Zl,Zl.exports);var Df=Zl.exports,tO=Qx,nO=Fs,zp=Df,Vp=zp&&zp.isTypedArray,rO=Vp?nO(Vp):tO,Ls=rO,aO=ix,oO=Pi,iO=sn,lO=Mi,sO=Bs,uO=Ls,cO=Object.prototype,dO=cO.hasOwnProperty;function fO(s,l){var c=iO(s),d=!c&&oO(s),f=!c&&!d&&lO(s),g=!c&&!d&&!f&&uO(s),v=c||d||f||g,b=v?aO(s.length,String):[],$=b.length;for(var y in s)(l||dO.call(s,y))&&!(v&&(y=="length"||f&&(y=="offset"||y=="parent")||g&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||sO(y,$)))&&b.push(y);return b}var Iy=fO,vO=Object.prototype;function pO(s){var l=s&&s.constructor,c=typeof l=="function"&&l.prototype||vO;return s===c}var Rs=pO;function mO(s,l){return function(c){return s(l(c))}}var Ny=mO,hO=Ny,gO=hO(Object.keys,Object),bO=gO,yO=Rs,_O=bO,wO=Object.prototype,CO=wO.hasOwnProperty;function kO(s){if(!yO(s))return _O(s);var l=[];for(var c in Object(s))CO.call(s,c)&&c!="constructor"&&l.push(c);return l}var jy=kO,$O=js,SO=jf;function xO(s){return s!=null&&SO(s.length)&&!$O(s)}var Ii=xO,OO=Iy,EO=jy,AO=Ii;function TO(s){return AO(s)?OO(s):EO(s)}var Ni=TO,PO=Py,MO=Ni;function IO(s,l){return s&&PO(s,l,MO)}var NO=IO;function jO(){this.__data__=[],this.size=0}var DO=jO;function BO(s,l){return s===l||s!==s&&l!==l}var ji=BO,FO=ji;function LO(s,l){for(var c=s.length;c--;)if(FO(s[c][0],l))return c;return-1}var zs=LO,RO=zs,zO=Array.prototype,VO=zO.splice;function HO(s){var l=this.__data__,c=RO(l,s);if(c<0)return!1;var d=l.length-1;return c==d?l.pop():VO.call(l,c,1),--this.size,!0}var UO=HO,KO=zs;function WO(s){var l=this.__data__,c=KO(l,s);return c<0?void 0:l[c][1]}var GO=WO,qO=zs;function YO(s){return qO(this.__data__,s)>-1}var ZO=YO,XO=zs;function JO(s,l){var c=this.__data__,d=XO(c,s);return d<0?(++this.size,c.push([s,l])):c[d][1]=l,this}var QO=JO,e3=DO,t3=UO,n3=GO,r3=ZO,a3=QO;function yo(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var d=s[l];this.set(d[0],d[1])}}yo.prototype.clear=e3;yo.prototype.delete=t3;yo.prototype.get=n3;yo.prototype.has=r3;yo.prototype.set=a3;var Vs=yo,o3=Vs;function i3(){this.__data__=new o3,this.size=0}var l3=i3;function s3(s){var l=this.__data__,c=l.delete(s);return this.size=l.size,c}var u3=s3;function c3(s){return this.__data__.get(s)}var d3=c3;function f3(s){return this.__data__.has(s)}var v3=f3,p3=xa,m3=Ln,h3=p3(m3,"Map"),Bf=h3,g3=xa,b3=g3(Object,"create"),Hs=b3,Hp=Hs;function y3(){this.__data__=Hp?Hp(null):{},this.size=0}var _3=y3;function w3(s){var l=this.has(s)&&delete this.__data__[s];return this.size-=l?1:0,l}var C3=w3,k3=Hs,$3="__lodash_hash_undefined__",S3=Object.prototype,x3=S3.hasOwnProperty;function O3(s){var l=this.__data__;if(k3){var c=l[s];return c===$3?void 0:c}return x3.call(l,s)?l[s]:void 0}var E3=O3,A3=Hs,T3=Object.prototype,P3=T3.hasOwnProperty;function M3(s){var l=this.__data__;return A3?l[s]!==void 0:P3.call(l,s)}var I3=M3,N3=Hs,j3="__lodash_hash_undefined__";function D3(s,l){var c=this.__data__;return this.size+=this.has(s)?0:1,c[s]=N3&&l===void 0?j3:l,this}var B3=D3,F3=_3,L3=C3,R3=E3,z3=I3,V3=B3;function _o(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var d=s[l];this.set(d[0],d[1])}}_o.prototype.clear=F3;_o.prototype.delete=L3;_o.prototype.get=R3;_o.prototype.has=z3;_o.prototype.set=V3;var H3=_o,Up=H3,U3=Vs,K3=Bf;function W3(){this.size=0,this.__data__={hash:new Up,map:new(K3||U3),string:new Up}}var G3=W3;function q3(s){var l=typeof s;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?s!=="__proto__":s===null}var Y3=q3,Z3=Y3;function X3(s,l){var c=s.__data__;return Z3(l)?c[typeof l=="string"?"string":"hash"]:c.map}var Us=X3,J3=Us;function Q3(s){var l=J3(this,s).delete(s);return this.size-=l?1:0,l}var e5=Q3,t5=Us;function n5(s){return t5(this,s).get(s)}var r5=n5,a5=Us;function o5(s){return a5(this,s).has(s)}var i5=o5,l5=Us;function s5(s,l){var c=l5(this,s),d=c.size;return c.set(s,l),this.size+=c.size==d?0:1,this}var u5=s5,c5=G3,d5=e5,f5=r5,v5=i5,p5=u5;function wo(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var d=s[l];this.set(d[0],d[1])}}wo.prototype.clear=c5;wo.prototype.delete=d5;wo.prototype.get=f5;wo.prototype.has=v5;wo.prototype.set=p5;var Ff=wo,m5=Vs,h5=Bf,g5=Ff,b5=200;function y5(s,l){var c=this.__data__;if(c instanceof m5){var d=c.__data__;if(!h5||d.length<b5-1)return d.push([s,l]),this.size=++c.size,this;c=this.__data__=new g5(d)}return c.set(s,l),this.size=c.size,this}var _5=y5,w5=Vs,C5=l3,k5=u3,$5=d3,S5=v3,x5=_5;function Co(s){var l=this.__data__=new w5(s);this.size=l.size}Co.prototype.clear=C5;Co.prototype.delete=k5;Co.prototype.get=$5;Co.prototype.has=S5;Co.prototype.set=x5;var Ks=Co,O5="__lodash_hash_undefined__";function E5(s){return this.__data__.set(s,O5),this}var A5=E5;function T5(s){return this.__data__.has(s)}var P5=T5,M5=Ff,I5=A5,N5=P5;function Xl(s){var l=-1,c=s==null?0:s.length;for(this.__data__=new M5;++l<c;)this.add(s[l])}Xl.prototype.add=Xl.prototype.push=I5;Xl.prototype.has=N5;var Dy=Xl;function j5(s,l){for(var c=-1,d=s==null?0:s.length;++c<d;)if(l(s[c],c,s))return!0;return!1}var D5=j5;function B5(s,l){return s.has(l)}var By=B5,F5=Dy,L5=D5,R5=By,z5=1,V5=2;function H5(s,l,c,d,f,g){var v=c&z5,b=s.length,$=l.length;if(b!=$&&!(v&&$>b))return!1;var y=g.get(s),x=g.get(l);if(y&&x)return y==l&&x==s;var C=-1,E=!0,N=c&V5?new F5:void 0;for(g.set(s,l),g.set(l,s);++C<b;){var W=s[C],q=l[C];if(d)var Y=v?d(q,W,C,l,s,g):d(W,q,C,s,l,g);if(Y!==void 0){if(Y)continue;E=!1;break}if(N){if(!L5(l,function(re,se){if(!R5(N,se)&&(W===re||f(W,re,c,d,g)))return N.push(se)})){E=!1;break}}else if(!(W===q||f(W,q,c,d,g))){E=!1;break}}return g.delete(s),g.delete(l),E}var Fy=H5,U5=Ln,K5=U5.Uint8Array,Ly=K5;function W5(s){var l=-1,c=Array(s.size);return s.forEach(function(d,f){c[++l]=[f,d]}),c}var G5=W5;function q5(s){var l=-1,c=Array(s.size);return s.forEach(function(d){c[++l]=d}),c}var Y5=q5,Kp=bo,Wp=Ly,Z5=ji,X5=Fy,J5=G5,Q5=Y5,eE=1,tE=2,nE="[object Boolean]",rE="[object Date]",aE="[object Error]",oE="[object Map]",iE="[object Number]",lE="[object RegExp]",sE="[object Set]",uE="[object String]",cE="[object Symbol]",dE="[object ArrayBuffer]",fE="[object DataView]",Gp=Kp?Kp.prototype:void 0,Cc=Gp?Gp.valueOf:void 0;function vE(s,l,c,d,f,g,v){switch(c){case fE:if(s.byteLength!=l.byteLength||s.byteOffset!=l.byteOffset)return!1;s=s.buffer,l=l.buffer;case dE:return!(s.byteLength!=l.byteLength||!g(new Wp(s),new Wp(l)));case nE:case rE:case iE:return Z5(+s,+l);case aE:return s.name==l.name&&s.message==l.message;case lE:case uE:return s==l+"";case oE:var b=J5;case sE:var $=d&eE;if(b||(b=Q5),s.size!=l.size&&!$)return!1;var y=v.get(s);if(y)return y==l;d|=tE,v.set(s,l);var x=X5(b(s),b(l),d,f,g,v);return v.delete(s),x;case cE:if(Cc)return Cc.call(s)==Cc.call(l)}return!1}var pE=vE;function mE(s,l){for(var c=-1,d=l.length,f=s.length;++c<d;)s[f+c]=l[c];return s}var Lf=mE,hE=Lf,gE=sn;function bE(s,l,c){var d=l(s);return gE(s)?d:hE(d,c(s))}var Ry=bE;function yE(s,l){for(var c=-1,d=s==null?0:s.length,f=0,g=[];++c<d;){var v=s[c];l(v,c,s)&&(g[f++]=v)}return g}var _E=yE;function wE(){return[]}var zy=wE,CE=_E,kE=zy,$E=Object.prototype,SE=$E.propertyIsEnumerable,qp=Object.getOwnPropertySymbols,xE=qp?function(s){return s==null?[]:(s=Object(s),CE(qp(s),function(l){return SE.call(s,l)}))}:kE,Rf=xE,OE=Ry,EE=Rf,AE=Ni;function TE(s){return OE(s,AE,EE)}var Vy=TE,Yp=Vy,PE=1,ME=Object.prototype,IE=ME.hasOwnProperty;function NE(s,l,c,d,f,g){var v=c&PE,b=Yp(s),$=b.length,y=Yp(l),x=y.length;if($!=x&&!v)return!1;for(var C=$;C--;){var E=b[C];if(!(v?E in l:IE.call(l,E)))return!1}var N=g.get(s),W=g.get(l);if(N&&W)return N==l&&W==s;var q=!0;g.set(s,l),g.set(l,s);for(var Y=v;++C<$;){E=b[C];var re=s[E],se=l[E];if(d)var de=v?d(se,re,E,l,s,g):d(re,se,E,s,l,g);if(!(de===void 0?re===se||f(re,se,c,d,g):de)){q=!1;break}Y||(Y=E=="constructor")}if(q&&!Y){var he=s.constructor,ge=l.constructor;he!=ge&&"constructor"in s&&"constructor"in l&&!(typeof he=="function"&&he instanceof he&&typeof ge=="function"&&ge instanceof ge)&&(q=!1)}return g.delete(s),g.delete(l),q}var jE=NE,DE=xa,BE=Ln,FE=DE(BE,"DataView"),LE=FE,RE=xa,zE=Ln,VE=RE(zE,"Promise"),HE=VE,UE=xa,KE=Ln,WE=UE(KE,"Set"),GE=WE,qE=xa,YE=Ln,ZE=qE(YE,"WeakMap"),XE=ZE,wd=LE,Cd=Bf,kd=HE,$d=GE,Sd=XE,Hy=_r,ko=Ay,Zp="[object Map]",JE="[object Object]",Xp="[object Promise]",Jp="[object Set]",Qp="[object WeakMap]",em="[object DataView]",QE=ko(wd),e8=ko(Cd),t8=ko(kd),n8=ko($d),r8=ko(Sd),Qr=Hy;(wd&&Qr(new wd(new ArrayBuffer(1)))!=em||Cd&&Qr(new Cd)!=Zp||kd&&Qr(kd.resolve())!=Xp||$d&&Qr(new $d)!=Jp||Sd&&Qr(new Sd)!=Qp)&&(Qr=function(s){var l=Hy(s),c=l==JE?s.constructor:void 0,d=c?ko(c):"";if(d)switch(d){case QE:return em;case e8:return Zp;case t8:return Xp;case n8:return Jp;case r8:return Qp}return l});var Di=Qr,kc=Ks,a8=Fy,o8=pE,i8=jE,tm=Di,nm=sn,rm=Mi,l8=Ls,s8=1,am="[object Arguments]",om="[object Array]",ll="[object Object]",u8=Object.prototype,im=u8.hasOwnProperty;function c8(s,l,c,d,f,g){var v=nm(s),b=nm(l),$=v?om:tm(s),y=b?om:tm(l);$=$==am?ll:$,y=y==am?ll:y;var x=$==ll,C=y==ll,E=$==y;if(E&&rm(s)){if(!rm(l))return!1;v=!0,x=!1}if(E&&!x)return g||(g=new kc),v||l8(s)?a8(s,l,c,d,f,g):o8(s,l,$,c,d,f,g);if(!(c&s8)){var N=x&&im.call(s,"__wrapped__"),W=C&&im.call(l,"__wrapped__");if(N||W){var q=N?s.value():s,Y=W?l.value():l;return g||(g=new kc),f(q,Y,c,d,g)}}return E?(g||(g=new kc),i8(s,l,c,d,f,g)):!1}var d8=c8,f8=d8,lm=Tn;function Uy(s,l,c,d,f){return s===l?!0:s==null||l==null||!lm(s)&&!lm(l)?s!==s&&l!==l:f8(s,l,c,d,Uy,f)}var zf=Uy,v8=Ks,p8=zf,m8=1,h8=2;function g8(s,l,c,d){var f=c.length,g=f,v=!d;if(s==null)return!g;for(s=Object(s);f--;){var b=c[f];if(v&&b[2]?b[1]!==s[b[0]]:!(b[0]in s))return!1}for(;++f<g;){b=c[f];var $=b[0],y=s[$],x=b[1];if(v&&b[2]){if(y===void 0&&!($ in s))return!1}else{var C=new v8;if(d)var E=d(y,x,$,s,l,C);if(!(E===void 0?p8(x,y,m8|h8,d,C):E))return!1}}return!0}var b8=g8,y8=ln;function _8(s){return s===s&&!y8(s)}var Ky=_8,w8=Ky,C8=Ni;function k8(s){for(var l=C8(s),c=l.length;c--;){var d=l[c],f=s[d];l[c]=[d,f,w8(f)]}return l}var $8=k8;function S8(s,l){return function(c){return c==null?!1:c[s]===l&&(l!==void 0||s in Object(c))}}var Wy=S8,x8=b8,O8=$8,E8=Wy;function A8(s){var l=O8(s);return l.length==1&&l[0][2]?E8(l[0][0],l[0][1]):function(c){return c===s||x8(c,s,l)}}var T8=A8,P8=_r,M8=Tn,I8="[object Symbol]";function N8(s){return typeof s=="symbol"||M8(s)&&P8(s)==I8}var Ws=N8,j8=sn,D8=Ws,B8=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,F8=/^\w*$/;function L8(s,l){if(j8(s))return!1;var c=typeof s;return c=="number"||c=="symbol"||c=="boolean"||s==null||D8(s)?!0:F8.test(s)||!B8.test(s)||l!=null&&s in Object(l)}var Vf=L8,Gy=Ff,R8="Expected a function";function Hf(s,l){if(typeof s!="function"||l!=null&&typeof l!="function")throw new TypeError(R8);var c=function(){var d=arguments,f=l?l.apply(this,d):d[0],g=c.cache;if(g.has(f))return g.get(f);var v=s.apply(this,d);return c.cache=g.set(f,v)||g,v};return c.cache=new(Hf.Cache||Gy),c}Hf.Cache=Gy;var z8=Hf,V8=z8,H8=500;function U8(s){var l=V8(s,function(d){return c.size===H8&&c.clear(),d}),c=l.cache;return l}var K8=U8,W8=K8,G8=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,q8=/\\(\\)?/g,Y8=W8(function(s){var l=[];return s.charCodeAt(0)===46&&l.push(""),s.replace(G8,function(c,d,f,g){l.push(f?g.replace(q8,"$1"):d||c)}),l}),Z8=Y8;function X8(s,l){for(var c=-1,d=s==null?0:s.length,f=Array(d);++c<d;)f[c]=l(s[c],c,s);return f}var Bi=X8,sm=bo,J8=Bi,Q8=sn,e6=Ws,t6=1/0,um=sm?sm.prototype:void 0,cm=um?um.toString:void 0;function qy(s){if(typeof s=="string")return s;if(Q8(s))return J8(s,qy)+"";if(e6(s))return cm?cm.call(s):"";var l=s+"";return l=="0"&&1/s==-t6?"-0":l}var n6=qy,r6=n6;function a6(s){return s==null?"":r6(s)}var Fi=a6,o6=sn,i6=Vf,l6=Z8,s6=Fi;function u6(s,l){return o6(s)?s:i6(s,l)?[s]:l6(s6(s))}var $o=u6,c6=Ws,d6=1/0;function f6(s){if(typeof s=="string"||c6(s))return s;var l=s+"";return l=="0"&&1/s==-d6?"-0":l}var So=f6,v6=$o,p6=So;function m6(s,l){l=v6(l,s);for(var c=0,d=l.length;s!=null&&c<d;)s=s[p6(l[c++])];return c&&c==d?s:void 0}var Gs=m6,h6=Gs;function g6(s,l,c){var d=s==null?void 0:h6(s,l);return d===void 0?c:d}var Yy=g6;const sr=ot(Yy);function b6(s,l){return s!=null&&l in Object(s)}var y6=b6,_6=$o,w6=Pi,C6=sn,k6=Bs,$6=jf,S6=So;function x6(s,l,c){l=_6(l,s);for(var d=-1,f=l.length,g=!1;++d<f;){var v=S6(l[d]);if(!(g=s!=null&&c(s,v)))break;s=s[v]}return g||++d!=f?g:(f=s==null?0:s.length,!!f&&$6(f)&&k6(v,f)&&(C6(s)||w6(s)))}var O6=x6,E6=y6,A6=O6;function T6(s,l){return s!=null&&A6(s,l,E6)}var Zy=T6,P6=zf,M6=Yy,I6=Zy,N6=Vf,j6=Ky,D6=Wy,B6=So,F6=1,L6=2;function R6(s,l){return N6(s)&&j6(l)?D6(B6(s),l):function(c){var d=M6(c,s);return d===void 0&&d===l?I6(c,s):P6(l,d,F6|L6)}}var z6=R6;function V6(s){return s}var Uf=V6;function H6(s){return function(l){return l==null?void 0:l[s]}}var U6=H6,K6=Gs;function W6(s){return function(l){return K6(l,s)}}var G6=W6,q6=U6,Y6=G6,Z6=Vf,X6=So;function J6(s){return Z6(s)?q6(X6(s)):Y6(s)}var Q6=J6,eA=T8,tA=z6,nA=Uf,rA=sn,aA=Q6;function oA(s){return typeof s=="function"?s:s==null?nA:typeof s=="object"?rA(s)?tA(s[0],s[1]):eA(s):aA(s)}var Xy=oA,iA=Ds,lA=NO,sA=Xy;function uA(s,l){var c={};return l=sA(l),lA(s,function(d,f,g){iA(c,l(d,f,g),d)}),c}var cA=uA;const dA=ot(cA);var fA=zf;function vA(s,l){return fA(s,l)}var pA=vA;const mA=ot(pA);var hA=Ds,gA=ji;function bA(s,l,c){(c!==void 0&&!gA(s[l],c)||c===void 0&&!(l in s))&&hA(s,l,c)}var Jy=bA,Jl={exports:{}};Jl.exports;(function(s,l){var c=Ln,d=l&&!l.nodeType&&l,f=d&&!0&&s&&!s.nodeType&&s,g=f&&f.exports===d,v=g?c.Buffer:void 0,b=v?v.allocUnsafe:void 0;function $(y,x){if(x)return y.slice();var C=y.length,E=b?b(C):new y.constructor(C);return y.copy(E),E}s.exports=$})(Jl,Jl.exports);var Qy=Jl.exports,dm=Ly;function yA(s){var l=new s.constructor(s.byteLength);return new dm(l).set(new dm(s)),l}var Kf=yA,_A=Kf;function wA(s,l){var c=l?_A(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.length)}var e_=wA;function CA(s,l){var c=-1,d=s.length;for(l||(l=Array(d));++c<d;)l[c]=s[c];return l}var t_=CA,kA=ln,fm=Object.create,$A=function(){function s(){}return function(l){if(!kA(l))return{};if(fm)return fm(l);s.prototype=l;var c=new s;return s.prototype=void 0,c}}(),SA=$A,xA=Ny,OA=xA(Object.getPrototypeOf,Object),Wf=OA,EA=SA,AA=Wf,TA=Rs;function PA(s){return typeof s.constructor=="function"&&!TA(s)?EA(AA(s)):{}}var n_=PA,MA=Ii,IA=Tn;function NA(s){return IA(s)&&MA(s)}var r_=NA,jA=_r,DA=Wf,BA=Tn,FA="[object Object]",LA=Function.prototype,RA=Object.prototype,a_=LA.toString,zA=RA.hasOwnProperty,VA=a_.call(Object);function HA(s){if(!BA(s)||jA(s)!=FA)return!1;var l=DA(s);if(l===null)return!0;var c=zA.call(l,"constructor")&&l.constructor;return typeof c=="function"&&c instanceof c&&a_.call(c)==VA}var o_=HA;function UA(s,l){if(!(l==="constructor"&&typeof s[l]=="function")&&l!="__proto__")return s[l]}var i_=UA,KA=Ds,WA=ji,GA=Object.prototype,qA=GA.hasOwnProperty;function YA(s,l,c){var d=s[l];(!(qA.call(s,l)&&WA(d,c))||c===void 0&&!(l in s))&&KA(s,l,c)}var Gf=YA,ZA=Gf,XA=Ds;function JA(s,l,c,d){var f=!c;c||(c={});for(var g=-1,v=l.length;++g<v;){var b=l[g],$=d?d(c[b],s[b],b,c,s):void 0;$===void 0&&($=s[b]),f?XA(c,b,$):ZA(c,b,$)}return c}var xo=JA;function QA(s){var l=[];if(s!=null)for(var c in Object(s))l.push(c);return l}var eT=QA,tT=ln,nT=Rs,rT=eT,aT=Object.prototype,oT=aT.hasOwnProperty;function iT(s){if(!tT(s))return rT(s);var l=nT(s),c=[];for(var d in s)d=="constructor"&&(l||!oT.call(s,d))||c.push(d);return c}var lT=iT,sT=Iy,uT=lT,cT=Ii;function dT(s){return cT(s)?sT(s,!0):uT(s)}var Li=dT,fT=xo,vT=Li;function pT(s){return fT(s,vT(s))}var mT=pT,vm=Jy,hT=Qy,gT=e_,bT=t_,yT=n_,pm=Pi,mm=sn,_T=r_,wT=Mi,CT=js,kT=ln,$T=o_,ST=Ls,hm=i_,xT=mT;function OT(s,l,c,d,f,g,v){var b=hm(s,c),$=hm(l,c),y=v.get($);if(y){vm(s,c,y);return}var x=g?g(b,$,c+"",s,l,v):void 0,C=x===void 0;if(C){var E=mm($),N=!E&&wT($),W=!E&&!N&&ST($);x=$,E||N||W?mm(b)?x=b:_T(b)?x=bT(b):N?(C=!1,x=hT($,!0)):W?(C=!1,x=gT($,!0)):x=[]:$T($)||pm($)?(x=b,pm(b)?x=xT(b):(!kT(b)||CT(b))&&(x=yT($))):C=!1}C&&(v.set($,x),f(x,$,d,g,v),v.delete($)),vm(s,c,x)}var ET=OT,AT=Ks,TT=Jy,PT=Py,MT=ET,IT=ln,NT=Li,jT=i_;function l_(s,l,c,d,f){s!==l&&PT(l,function(g,v){if(f||(f=new AT),IT(g))MT(s,l,v,c,l_,d,f);else{var b=d?d(jT(s,v),g,v+"",s,l,f):void 0;b===void 0&&(b=g),TT(s,v,b)}},NT)}var s_=l_;function DT(s,l,c){switch(c.length){case 0:return s.call(l);case 1:return s.call(l,c[0]);case 2:return s.call(l,c[0],c[1]);case 3:return s.call(l,c[0],c[1],c[2])}return s.apply(l,c)}var BT=DT,FT=BT,gm=Math.max;function LT(s,l,c){return l=gm(l===void 0?s.length-1:l,0),function(){for(var d=arguments,f=-1,g=gm(d.length-l,0),v=Array(g);++f<g;)v[f]=d[l+f];f=-1;for(var b=Array(l+1);++f<l;)b[f]=d[f];return b[l]=c(v),FT(s,this,b)}}var u_=LT;function RT(s){return function(){return s}}var zT=RT,VT=zT,bm=Ty,HT=Uf,UT=bm?function(s,l){return bm(s,"toString",{configurable:!0,enumerable:!1,value:VT(l),writable:!0})}:HT,KT=UT,WT=800,GT=16,qT=Date.now;function YT(s){var l=0,c=0;return function(){var d=qT(),f=GT-(d-c);if(c=d,f>0){if(++l>=WT)return arguments[0]}else l=0;return s.apply(void 0,arguments)}}var ZT=YT,XT=KT,JT=ZT,QT=JT(XT),c_=QT,eP=Uf,tP=u_,nP=c_;function rP(s,l){return nP(tP(s,l,eP),s+"")}var d_=rP,aP=ji,oP=Ii,iP=Bs,lP=ln;function sP(s,l,c){if(!lP(c))return!1;var d=typeof l;return(d=="number"?oP(c)&&iP(l,c.length):d=="string"&&l in c)?aP(c[l],s):!1}var uP=sP,cP=d_,dP=uP;function fP(s){return cP(function(l,c){var d=-1,f=c.length,g=f>1?c[f-1]:void 0,v=f>2?c[2]:void 0;for(g=s.length>3&&typeof g=="function"?(f--,g):void 0,v&&dP(c[0],c[1],v)&&(g=f<3?void 0:g,f=1),l=Object(l);++d<f;){var b=c[d];b&&s(l,b,d,g)}return l})}var f_=fP,vP=s_,pP=f_,mP=pP(function(s,l,c){vP(s,l,c)}),hP=mP;const qf=ot(hP);function gP(s){if(Array.isArray(s))return s}function bP(s,l){var c=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(c!=null){var d,f,g,v,b=[],$=!0,y=!1;try{if(g=(c=c.call(s)).next,l===0){if(Object(c)!==c)return;$=!1}else for(;!($=(d=g.call(c)).done)&&(b.push(d.value),b.length!==l);$=!0);}catch(x){y=!0,f=x}finally{try{if(!$&&c.return!=null&&(v=c.return(),Object(v)!==v))return}finally{if(y)throw f}}return b}}function yP(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function je(s,l){return gP(s)||bP(s,l)||Sy(s,l)||yP()}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function ao(s,l){var c=Object.keys(l);c.forEach(function(d){s.style[d]=l[d]})}function _P(s,l){if(s==null)return{};var c={};for(var d in s)if({}.hasOwnProperty.call(s,d)){if(l.includes(d))continue;c[d]=s[d]}return c}function Ri(s,l){if(s==null)return{};var c,d,f=_P(s,l);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(s);for(d=0;d<g.length;d++)c=g[d],l.includes(c)||{}.propertyIsEnumerable.call(s,c)&&(f[c]=s[c])}return f}var wP=_r,CP=sn,kP=Tn,$P="[object String]";function SP(s){return typeof s=="string"||!CP(s)&&kP(s)&&wP(s)==$P}var xP=SP;const Qe=ot(xP);function OP(s){return s===null}var EP=OP;const ym=ot(EP);function AP(s){return s===void 0}var TP=AP;const ma=ot(TP);var PP=_r,MP=Tn,IP="[object Number]";function NP(s){return typeof s=="number"||MP(s)&&PP(s)==IP}var jP=NP;const Vt=ot(jP);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function v_(){if(typeof navigator>"u"||!navigator)return Number.MAX_SAFE_INTEGER;var s=navigator,l=s.userAgent,c=l.indexOf("compatible")>-1&&l.indexOf("MSIE")>-1,d=l.indexOf("Trident")>-1&&l.indexOf("rv:11.0")>-1;if(c){var f=new RegExp("MSIE (\\d+\\.\\d+);"),g=l.match(f);if(!g)return-1;var v=parseFloat(g[1]);return v<7?6:v}return d?11:Number.MAX_SAFE_INTEGER}function DP(){var s,l,c;if(typeof navigator>"u"||!navigator)return!1;var d=navigator.userAgent,f=d.match(/AppleWebKit.+Chrome\/(.+) Safari\/.+/i);if(Number(f==null||(s=f[1])===null||s===void 0?void 0:s.split(".")[0])<100)return!0;var g=d.match(/AppleWebKit.+Version\/(.+) Safari\/.+/i);if(Number(g==null||(l=g[1])===null||l===void 0?void 0:l.split(".")[0])<12)return!0;var v=v_();if(v<=11)return!0;var b=d.match(/Firefox\/(.+)/i);return Number(b==null||(c=b[1])===null||c===void 0?void 0:c.split(".")[0])<100}function ca(s,l){var c=Vt(l);if(!s||s.length===0)return c?{length:0,characters:s}:0;for(var d=0,f=0;f<s.length;f++){var g=0;if(s.charCodeAt(f)>127?g=2:g=1,c&&d+g>l)return{length:d,characters:s.slice(0,f)};d+=g}return c?{length:d,characters:s}:d}function BP(s){return wt(s??"").length}function FP(s,l,c){return wt("").slice().length===l?"":wt(s??"").slice(0,l).join("")}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function _m(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function sl(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?_m(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):_m(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function LP(s){var l,c,d,f={};if(!(!s||typeof window>"u")){var g=(l=window)===null||l===void 0||(c=l.getComputedStyle)===null||c===void 0?void 0:c.call(l,s),v=g.color,b=g.fontSize,$=(d=window)===null||d===void 0||(d=d.navigator)===null||d===void 0?void 0:d.userAgent,y=/Safari/.test($)&&!/Chrome/.test($),x=/(?=.*iPhone)[?=.*MicroMessenger]/.test($)&&!/Chrome/.test($);if((y||x)&&(f={transformOrigin:"0px 0px",transform:"scale(".concat(parseInt(b,10)/12,")")}),v&&v_()>11){var C=v.match(/[\d.]+/g),E=C?"rgba(".concat(C[0],", ").concat(C[1],", ").concat(C[2],", 0)"):"";ao(s,sl(sl({},f),{},{background:"conic-gradient(from 90deg at 50% 50%,".concat(E," 0deg, ").concat(v," 360deg)")}))}else ao(s,sl(sl({},f),{},{background:""}))}}function RP(s,l){for(var c=-1,d=s==null?0:s.length;++c<d&&l(s[c],c,s)!==!1;);return s}var zP=RP,VP=xo,HP=Ni;function UP(s,l){return s&&VP(l,HP(l),s)}var KP=UP,WP=xo,GP=Li;function qP(s,l){return s&&WP(l,GP(l),s)}var YP=qP,ZP=xo,XP=Rf;function JP(s,l){return ZP(s,XP(s),l)}var QP=JP,eM=Lf,tM=Wf,nM=Rf,rM=zy,aM=Object.getOwnPropertySymbols,oM=aM?function(s){for(var l=[];s;)eM(l,nM(s)),s=tM(s);return l}:rM,p_=oM,iM=xo,lM=p_;function sM(s,l){return iM(s,lM(s),l)}var uM=sM,cM=Ry,dM=p_,fM=Li;function vM(s){return cM(s,fM,dM)}var Yf=vM,pM=Object.prototype,mM=pM.hasOwnProperty;function hM(s){var l=s.length,c=new s.constructor(l);return l&&typeof s[0]=="string"&&mM.call(s,"index")&&(c.index=s.index,c.input=s.input),c}var gM=hM,bM=Kf;function yM(s,l){var c=l?bM(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.byteLength)}var _M=yM,wM=/\w*$/;function CM(s){var l=new s.constructor(s.source,wM.exec(s));return l.lastIndex=s.lastIndex,l}var kM=CM,wm=bo,Cm=wm?wm.prototype:void 0,km=Cm?Cm.valueOf:void 0;function $M(s){return km?Object(km.call(s)):{}}var SM=$M,xM=Kf,OM=_M,EM=kM,AM=SM,TM=e_,PM="[object Boolean]",MM="[object Date]",IM="[object Map]",NM="[object Number]",jM="[object RegExp]",DM="[object Set]",BM="[object String]",FM="[object Symbol]",LM="[object ArrayBuffer]",RM="[object DataView]",zM="[object Float32Array]",VM="[object Float64Array]",HM="[object Int8Array]",UM="[object Int16Array]",KM="[object Int32Array]",WM="[object Uint8Array]",GM="[object Uint8ClampedArray]",qM="[object Uint16Array]",YM="[object Uint32Array]";function ZM(s,l,c){var d=s.constructor;switch(l){case LM:return xM(s);case PM:case MM:return new d(+s);case RM:return OM(s,c);case zM:case VM:case HM:case UM:case KM:case WM:case GM:case qM:case YM:return TM(s,c);case IM:return new d;case NM:case BM:return new d(s);case jM:return EM(s);case DM:return new d;case FM:return AM(s)}}var XM=ZM,JM=Di,QM=Tn,eI="[object Map]";function tI(s){return QM(s)&&JM(s)==eI}var nI=tI,rI=nI,aI=Fs,$m=Df,Sm=$m&&$m.isMap,oI=Sm?aI(Sm):rI,iI=oI,lI=Di,sI=Tn,uI="[object Set]";function cI(s){return sI(s)&&lI(s)==uI}var dI=cI,fI=dI,vI=Fs,xm=Df,Om=xm&&xm.isSet,pI=Om?vI(Om):fI,mI=pI,hI=Ks,gI=zP,bI=Gf,yI=KP,_I=YP,wI=Qy,CI=t_,kI=QP,$I=uM,SI=Vy,xI=Yf,OI=Di,EI=gM,AI=XM,TI=n_,PI=sn,MI=Mi,II=iI,NI=ln,jI=mI,DI=Ni,BI=Li,FI=1,LI=2,RI=4,m_="[object Arguments]",zI="[object Array]",VI="[object Boolean]",HI="[object Date]",UI="[object Error]",h_="[object Function]",KI="[object GeneratorFunction]",WI="[object Map]",GI="[object Number]",g_="[object Object]",qI="[object RegExp]",YI="[object Set]",ZI="[object String]",XI="[object Symbol]",JI="[object WeakMap]",QI="[object ArrayBuffer]",e7="[object DataView]",t7="[object Float32Array]",n7="[object Float64Array]",r7="[object Int8Array]",a7="[object Int16Array]",o7="[object Int32Array]",i7="[object Uint8Array]",l7="[object Uint8ClampedArray]",s7="[object Uint16Array]",u7="[object Uint32Array]",it={};it[m_]=it[zI]=it[QI]=it[e7]=it[VI]=it[HI]=it[t7]=it[n7]=it[r7]=it[a7]=it[o7]=it[WI]=it[GI]=it[g_]=it[qI]=it[YI]=it[ZI]=it[XI]=it[i7]=it[l7]=it[s7]=it[u7]=!0;it[UI]=it[h_]=it[JI]=!1;function Ml(s,l,c,d,f,g){var v,b=l&FI,$=l&LI,y=l&RI;if(c&&(v=f?c(s,d,f,g):c(s)),v!==void 0)return v;if(!NI(s))return s;var x=PI(s);if(x){if(v=EI(s),!b)return CI(s,v)}else{var C=OI(s),E=C==h_||C==KI;if(MI(s))return wI(s,b);if(C==g_||C==m_||E&&!f){if(v=$||E?{}:TI(s),!b)return $?$I(s,_I(v,s)):kI(s,yI(v,s))}else{if(!it[C])return f?s:{};v=AI(s,C,b)}}g||(g=new hI);var N=g.get(s);if(N)return N;g.set(s,v),jI(s)?s.forEach(function(Y){v.add(Ml(Y,l,c,Y,s,g))}):II(s)&&s.forEach(function(Y,re){v.set(re,Ml(Y,l,c,re,s,g))});var W=y?$?xI:SI:$?BI:DI,q=x?void 0:W(s);return gI(q||s,function(Y,re){q&&(re=Y,Y=s[re]),bI(v,re,Ml(Y,l,c,re,s,g))}),v}var b_=Ml,c7=b_,d7=1,f7=4;function v7(s){return c7(s,d7|f7)}var p7=v7;const Pr=ot(p7);var m7=s_,h7=f_,g7=h7(function(s,l,c,d){m7(s,l,c,d)}),b7=g7;const y7=ot(b7);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var _7={classPrefix:"t",animation:{include:["ripple","expand","fade"],exclude:[]},calendar:{firstDayOfWeek:1,fillWithZero:!0,controllerConfig:void 0},icon:{},input:{autocomplete:""},dialog:{closeOnEscKeydown:!0,closeOnOverlayClick:!0,confirmBtnTheme:{default:"primary",info:"primary",warning:"primary",danger:"primary",success:"primary"}},message:{},popconfirm:{confirmBtnTheme:{default:"primary",warning:"primary",danger:"primary"}},table:{expandIcon:void 0,sortIcon:void 0,filterIcon:void 0,treeExpandAndFoldIcon:void 0,hideSortTips:!1,size:"medium"},select:{clearIcon:void 0,filterable:!1},drawer:{closeOnEscKeydown:!0,closeOnOverlayClick:!0,size:"small"},tree:{folderIcon:void 0},datePicker:{firstDayOfWeek:1},steps:{checkIcon:void 0,errorIcon:void 0},tag:{closeIcon:void 0},form:{requiredMark:void 0},empty:{titleText:{maintenance:void 0,success:void 0,fail:void 0,empty:void 0,networkError:void 0},image:{maintenance:void 0,success:void 0,fail:void 0,empty:void 0,networkError:void 0}}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var y_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Zf(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var w7={exports:{}};(function(s,l){(function(c,d){s.exports=d()})(Qo,function(){var c=1e3,d=6e4,f=36e5,g="millisecond",v="second",b="minute",$="hour",y="day",x="week",C="month",E="quarter",N="year",W="date",q="Invalid Date",Y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,re=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,se={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(yy){var my=["th","st","nd","rd"],$t=yy%100;return"["+yy+(my[($t-20)%10]||my[$t]||my[0])+"]"}},de=function(yy,my,$t){var K$=String(yy);return!K$||K$.length>=my?yy:""+Array(my+1-K$.length).join($t)+yy},he={s:de,z:function(yy){var my=-yy.utcOffset(),$t=Math.abs(my),K$=Math.floor($t/60),Y$=$t%60;return(my<=0?"+":"-")+de(K$,2,"0")+":"+de(Y$,2,"0")},m:function yy(my,$t){if(my.date()<$t.date())return-yy($t,my);var K$=12*($t.year()-my.year())+($t.month()-my.month()),Y$=my.clone().add(K$,C),W$=$t-Y$<0,U$=my.clone().add(K$+(W$?-1:1),C);return+(-(K$+($t-Y$)/(W$?Y$-U$:U$-Y$))||0)},a:function(yy){return yy<0?Math.ceil(yy)||0:Math.floor(yy)},p:function(yy){return{M:C,y:N,w:x,d:y,D:W,h:$,m:b,s:v,ms:g,Q:E}[yy]||String(yy||"").toLowerCase().replace(/s$/,"")},u:function(yy){return yy===void 0}},ge="en",Se={};Se[ge]=se;var Ae="$isDayjsObject",Re=function(yy){return yy instanceof _y||!(!yy||!yy[Ae])},Be=function yy(my,$t,K$){var Y$;if(!my)return ge;if(typeof my=="string"){var W$=my.toLowerCase();Se[W$]&&(Y$=W$),$t&&(Se[W$]=$t,Y$=W$);var U$=my.split("-");if(!Y$&&U$.length>1)return yy(U$[0])}else{var hy=my.name;Se[hy]=my,Y$=hy}return!K$&&Y$&&(ge=Y$),Y$||!K$&&ge},Ke=function(yy,my){if(Re(yy))return yy.clone();var $t=typeof my=="object"?my:{};return $t.date=yy,$t.args=arguments,new _y($t)},Lr=he;Lr.l=Be,Lr.i=Re,Lr.w=function(yy,my){return Ke(yy,{locale:my.$L,utc:my.$u,x:my.$x,$offset:my.$offset})};var _y=function(){function yy($t){this.$L=Be($t.locale,null,!0),this.parse($t),this.$x=this.$x||$t.x||{},this[Ae]=!0}var my=yy.prototype;return my.parse=function($t){this.$d=function(K$){var Y$=K$.date,W$=K$.utc;if(Y$===null)return new Date(NaN);if(Lr.u(Y$))return new Date;if(Y$ instanceof Date)return new Date(Y$);if(typeof Y$=="string"&&!/Z$/i.test(Y$)){var U$=Y$.match(Y);if(U$){var hy=U$[2]-1||0,G$=(U$[7]||"0").substring(0,3);return W$?new Date(Date.UTC(U$[1],hy,U$[3]||1,U$[4]||0,U$[5]||0,U$[6]||0,G$)):new Date(U$[1],hy,U$[3]||1,U$[4]||0,U$[5]||0,U$[6]||0,G$)}}return new Date(Y$)}($t),this.init()},my.init=function(){var $t=this.$d;this.$y=$t.getFullYear(),this.$M=$t.getMonth(),this.$D=$t.getDate(),this.$W=$t.getDay(),this.$H=$t.getHours(),this.$m=$t.getMinutes(),this.$s=$t.getSeconds(),this.$ms=$t.getMilliseconds()},my.$utils=function(){return Lr},my.isValid=function(){return this.$d.toString()!==q},my.isSame=function($t,K$){var Y$=Ke($t);return this.startOf(K$)<=Y$&&Y$<=this.endOf(K$)},my.isAfter=function($t,K$){return Ke($t)<this.startOf(K$)},my.isBefore=function($t,K$){return this.endOf(K$)<Ke($t)},my.$g=function($t,K$,Y$){return Lr.u($t)?this[K$]:this.set(Y$,$t)},my.unix=function(){return Math.floor(this.valueOf()/1e3)},my.valueOf=function(){return this.$d.getTime()},my.startOf=function($t,K$){var Y$=this,W$=!!Lr.u(K$)||K$,U$=Lr.p($t),hy=function(BS,MS){var zS=Lr.w(Y$.$u?Date.UTC(Y$.$y,MS,BS):new Date(Y$.$y,MS,BS),Y$);return W$?zS:zS.endOf(y)},G$=function(BS,MS){return Lr.w(Y$.toDate()[BS].apply(Y$.toDate("s"),(W$?[0,0,0,0]:[23,59,59,999]).slice(MS)),Y$)},ky=this.$W,$y=this.$M,rS=this.$D,lS="set"+(this.$u?"UTC":"");switch(U$){case N:return W$?hy(1,0):hy(31,11);case C:return W$?hy(1,$y):hy(0,$y+1);case x:var bS=this.$locale().weekStart||0,IS=(ky<bS?ky+7:ky)-bS;return hy(W$?rS-IS:rS+(6-IS),$y);case y:case W:return G$(lS+"Hours",0);case $:return G$(lS+"Minutes",1);case b:return G$(lS+"Seconds",2);case v:return G$(lS+"Milliseconds",3);default:return this.clone()}},my.endOf=function($t){return this.startOf($t,!1)},my.$set=function($t,K$){var Y$,W$=Lr.p($t),U$="set"+(this.$u?"UTC":""),hy=(Y$={},Y$[y]=U$+"Date",Y$[W]=U$+"Date",Y$[C]=U$+"Month",Y$[N]=U$+"FullYear",Y$[$]=U$+"Hours",Y$[b]=U$+"Minutes",Y$[v]=U$+"Seconds",Y$[g]=U$+"Milliseconds",Y$)[W$],G$=W$===y?this.$D+(K$-this.$W):K$;if(W$===C||W$===N){var ky=this.clone().set(W,1);ky.$d[hy](G$),ky.init(),this.$d=ky.set(W,Math.min(this.$D,ky.daysInMonth())).$d}else hy&&this.$d[hy](G$);return this.init(),this},my.set=function($t,K$){return this.clone().$set($t,K$)},my.get=function($t){return this[Lr.p($t)]()},my.add=function($t,K$){var Y$,W$=this;$t=Number($t);var U$=Lr.p(K$),hy=function($y){var rS=Ke(W$);return Lr.w(rS.date(rS.date()+Math.round($y*$t)),W$)};if(U$===C)return this.set(C,this.$M+$t);if(U$===N)return this.set(N,this.$y+$t);if(U$===y)return hy(1);if(U$===x)return hy(7);var G$=(Y$={},Y$[b]=d,Y$[$]=f,Y$[v]=c,Y$)[U$]||1,ky=this.$d.getTime()+$t*G$;return Lr.w(ky,this)},my.subtract=function($t,K$){return this.add(-1*$t,K$)},my.format=function($t){var K$=this,Y$=this.$locale();if(!this.isValid())return Y$.invalidDate||q;var W$=$t||"YYYY-MM-DDTHH:mm:ssZ",U$=Lr.z(this),hy=this.$H,G$=this.$m,ky=this.$M,$y=Y$.weekdays,rS=Y$.months,lS=Y$.meridiem,bS=function(MS,zS,LS,nS){return MS&&(MS[zS]||MS(K$,W$))||LS[zS].slice(0,nS)},IS=function(MS){return Lr.s(hy%12||12,MS,"0")},BS=lS||function(MS,zS,LS){var nS=MS<12?"AM":"PM";return LS?nS.toLowerCase():nS};return W$.replace(re,function(MS,zS){return zS||function(LS){switch(LS){case"YY":return String(K$.$y).slice(-2);case"YYYY":return Lr.s(K$.$y,4,"0");case"M":return ky+1;case"MM":return Lr.s(ky+1,2,"0");case"MMM":return bS(Y$.monthsShort,ky,rS,3);case"MMMM":return bS(rS,ky);case"D":return K$.$D;case"DD":return Lr.s(K$.$D,2,"0");case"d":return String(K$.$W);case"dd":return bS(Y$.weekdaysMin,K$.$W,$y,2);case"ddd":return bS(Y$.weekdaysShort,K$.$W,$y,3);case"dddd":return $y[K$.$W];case"H":return String(hy);case"HH":return Lr.s(hy,2,"0");case"h":return IS(1);case"hh":return IS(2);case"a":return BS(hy,G$,!0);case"A":return BS(hy,G$,!1);case"m":return String(G$);case"mm":return Lr.s(G$,2,"0");case"s":return String(K$.$s);case"ss":return Lr.s(K$.$s,2,"0");case"SSS":return Lr.s(K$.$ms,3,"0");case"Z":return U$}return null}(MS)||U$.replace(":","")})},my.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},my.diff=function($t,K$,Y$){var W$,U$=this,hy=Lr.p(K$),G$=Ke($t),ky=(G$.utcOffset()-this.utcOffset())*d,$y=this-G$,rS=function(){return Lr.m(U$,G$)};switch(hy){case N:W$=rS()/12;break;case C:W$=rS();break;case E:W$=rS()/3;break;case x:W$=($y-ky)/6048e5;break;case y:W$=($y-ky)/864e5;break;case $:W$=$y/f;break;case b:W$=$y/d;break;case v:W$=$y/c;break;default:W$=$y}return Y$?W$:Lr.a(W$)},my.daysInMonth=function(){return this.endOf(C).$D},my.$locale=function(){return Se[this.$L]},my.locale=function($t,K$){if(!$t)return this.$L;var Y$=this.clone(),W$=Be($t,K$,!0);return W$&&(Y$.$L=W$),Y$},my.clone=function(){return Lr.w(this.$d,this)},my.toDate=function(){return new Date(this.valueOf())},my.toJSON=function(){return this.isValid()?this.toISOString():null},my.toISOString=function(){return this.$d.toISOString()},my.toString=function(){return this.$d.toUTCString()},yy}(),by=_y.prototype;return Ke.prototype=by,[["$ms",g],["$s",v],["$m",b],["$H",$],["$W",y],["$M",C],["$y",N],["$D",W]].forEach(function(yy){by[yy[1]]=function(my){return this.$g(my,yy[0],yy[1])}}),Ke.extend=function(yy,my){return yy.$i||(yy(my,_y,Ke),yy.$i=!0),Ke},Ke.locale=Be,Ke.isDayjs=Re,Ke.unix=function(yy){return Ke(1e3*yy)},Ke.en=Se[ge],Ke.Ls=Se,Ke.p={},Ke})})(w7);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var __={pagination:{itemsPerPage:"{size} /",jumpTo:"",page:"",total:" {total} "},cascader:{empty:"",loadingText:"",placeholder:""},calendar:{yearSelection:"{year} ",monthSelection:"{month} ",yearRadio:"",monthRadio:"",hideWeekend:"",showWeekend:"",today:"",thisMonth:"",week:",,,,,,",cellMonth:"1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10 ,11 ,12 "},transfer:{title:"{checked} / {total} ",empty:"",placeholder:""},timePicker:{dayjsLocale:"zh-cn",now:"",confirm:"",anteMeridiem:"",postMeridiem:"",placeholder:""},dialog:{confirm:"",cancel:""},drawer:{confirm:"",cancel:""},popconfirm:{confirm:{content:""},cancel:{content:""}},table:{empty:"",loadingText:"",loadingMoreText:"",filterInputPlaceholder:"",sortAscendingOperationText:"",sortCancelOperationText:"",sortDescendingOperationText:"",clearFilterResultButtonText:"",columnConfigButtonText:"",columnConfigTitleText:"",columnConfigDescriptionText:"",confirmText:"",cancelText:"",resetText:"",selectAllText:"",searchResultText:"{result} {count} "},select:{empty:"",loadingText:"",placeholder:""},tree:{empty:""},treeSelect:{empty:"",loadingText:"",placeholder:""},datePicker:{dayjsLocale:"zh-cn",placeholder:{date:"",month:"",year:"",quarter:"",week:""},weekdays:["","","","","","",""],months:["1 ","2 ","3 ","4 ","5 ","6 ","7 ","8 ","9 ","10 ","11 ","12 "],quarters:["","","",""],rangeSeparator:" - ",direction:"ltr",format:"YYYY-MM-DD",dayAriaLabel:"",weekAbbreviation:"",yearAriaLabel:"",monthAriaLabel:"",confirm:"",selectTime:"",selectDate:"",nextYear:"",preYear:"",nextMonth:"",preMonth:"",preDecade:"",nextDecade:"",now:""},upload:{sizeLimitMessage:" {sizeLimit}",cancelUploadText:"",triggerUploadText:{fileInput:"",image:"",normal:"",reupload:"",continueUpload:"",delete:"",uploading:""},dragger:{dragDropText:"",draggingText:"",clickAndDragText:""},file:{fileNameText:"",fileSizeText:"",fileStatusText:"",fileOperationText:"",fileOperationDateText:""},progress:{uploadingText:"",waitingText:"",failText:"",successText:""}},form:{errorMessage:{date:"${name}",url:"${name}",required:"${name}",max:"${name} ${validate} ",min:"${name} ${validate} ",len:"${name} ${validate}",enum:"${name}${validate}",idcard:"${name}",telnumber:"${name}",pattern:"${name}",validator:"${name}",boolean:"${name}",number:"${name}"},colonText:""},input:{placeholder:""},list:{loadingText:"",loadingMoreText:""},alert:{expandText:"",collapseText:""},anchor:{copySuccessText:"",copyText:""},colorPicker:{swatchColorTitle:"",recentColorTitle:"",clearConfirmText:""},guide:{finishButtonProps:{content:"",theme:"primary"},nextButtonProps:{content:"",theme:"primary"},skipButtonProps:{content:"",theme:"default"},prevButtonProps:{content:"",theme:"default"}},image:{errorText:"",loadingText:""},imageViewer:{errorText:"",mirrorTipText:"",rotateTipText:"",originalSizeTipText:""},typography:{expandText:"",collapseText:"",copiedText:""},rate:{rateText:["","","","",""]},empty:{titleText:{maintenance:"",success:"",fail:"",empty:"",networkError:""}},descriptions:{colonText:""}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var qs=function(s){return s.ripple="ripple",s.expand="expand",s.fade="fade",s}(qs||{}),w_=qf(_7,__),C_=Symbol("configProvide"),C7=function(s,l){return y7(s,l,function(c,d){if(at(c))return d})};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var xd=ref();function Mt(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,l=arguments.length>1?arguments[1]:void 0,c=getCurrentInstance()?inject(C_,null):xd,d=computed(function(){return(c==null?void 0:c.value)||w_}),f=computed(function(){return Object.assign({},d.value[s],l)}),g=computed(function(){return d.value.classPrefix}),v=function(b){for(var $=arguments.length,y=new Array($>1?$-1:0),x=1;x<$;x++)y[x-1]=arguments[x];var C=y[0];if(Qe(b)){if(!C)return b;var E=/\{\s*([\w-]+)\s*\}/g,N=b.replace(E,function(W,q){return C?String(C[q]):""});return N}return rt(b)?y.length?b.apply(void 0,y):b(h):""};return{t:v,global:f,globalConfig:f,classPrefix:g}}var k7=function(s){var l=Pr(w_),c=computed(function(){return C7(l,s.globalConfig)});return provide(C_,c),xd.value||(xd.value=c.value),c};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function we(s){var l=Mt("classPrefix"),c=l.classPrefix;return computed(function(){return s?"".concat(c.value,"-").concat(s):c.value})}function Ft(){var s=Mt("classPrefix"),l=s.classPrefix;return{SIZE:computed(function(){return{small:"".concat(l.value,"-size-s"),medium:"".concat(l.value,"-size-m"),large:"".concat(l.value,"-size-l"),default:"",xs:"".concat(l.value,"-size-xs"),xl:"".concat(l.value,"-size-xl"),block:"".concat(l.value,"-size-full-width")}}),STATUS:computed(function(){return{loading:"".concat(l.value,"-is-loading"),loadMore:"".concat(l.value,"-is-load-more"),disabled:"".concat(l.value,"-is-disabled"),focused:"".concat(l.value,"-is-focused"),success:"".concat(l.value,"-is-success"),error:"".concat(l.value,"-is-error"),warning:"".concat(l.value,"-is-warning"),selected:"".concat(l.value,"-is-selected"),active:"".concat(l.value,"-is-active"),checked:"".concat(l.value,"-is-checked"),current:"".concat(l.value,"-is-current"),hidden:"".concat(l.value,"-is-hidden"),visible:"".concat(l.value,"-is-visible"),expanded:"".concat(l.value,"-is-expanded"),indeterminate:"".concat(l.value,"-is-indeterminate")}})}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var $7=defineComponent({name:"TLoadingGradient",setup:function(){var s=we();return onMounted(function(){var l=getCurrentInstance().refs.circle;nextTick(function(){LP(l)})}),{classPrefix:s}},render:function(){var s=this.classPrefix,l="".concat(s,"-loading__gradient"),c=[l,"".concat(s,"-icon-loading")];return createVNode("svg",{class:c,viewBox:"0 0 12 12",version:"1.1",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg"},[createVNode("foreignObject",{x:"0",y:"0",width:"12",height:"12"},[createVNode("div",{class:"".concat(l,"-conic"),ref:"circle"},null)])])}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var S7=function(s,l,c,d){var f=(c-l)/2,g=s/(d/2);return g<1?f*g*g*g+l:(g-=2,f*(g*g*g+2)+l)};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Ys={exports:{}},ei={exports:{}};(function(){var s,l,c,d,f,g;typeof performance<"u"&&performance!==null&&performance.now?ei.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(ei.exports=function(){return(s()-f)/1e6},l=process.hrtime,s=function(){var v;return v=l(),v[0]*1e9+v[1]},d=s(),g=process.uptime()*1e9,f=d-g):Date.now?(ei.exports=function(){return Date.now()-c},c=Date.now()):(ei.exports=function(){return new Date().getTime()-c},c=new Date().getTime())}).call(y_);var x7=ei.exports,cr=typeof window>"u"?y_:window,ul=["moz","webkit"],Xa="AnimationFrame",oo=cr["request"+Xa],gi=cr["cancel"+Xa]||cr["cancelRequest"+Xa];for(var Uo=0;!oo&&Uo<ul.length;Uo++)oo=cr[ul[Uo]+"Request"+Xa],gi=cr[ul[Uo]+"Cancel"+Xa]||cr[ul[Uo]+"CancelRequest"+Xa];if(!oo||!gi){var $c=0,Em=0,Gr=[],O7=1e3/60;oo=function(s){if(Gr.length===0){var l=x7(),c=Math.max(0,O7-(l-$c));$c=c+l,setTimeout(function(){var d=Gr.slice(0);Gr.length=0;for(var f=function(){if(!d[g].cancelled)try{d[g].callback($c)}catch(v){setTimeout(function(){throw v},0)}},g=0;g<d.length;g++)f()},Math.round(c))}return Gr.push({handle:++Em,callback:s,cancelled:!1}),Em},gi=function(s){for(var l=0;l<Gr.length;l++)Gr[l].handle===s&&(Gr[l].cancelled=!0)}}Ys.exports=function(s){return oo.call(cr,s)};Ys.exports.cancel=function(){gi.apply(cr,arguments)};Ys.exports.polyfill=function(s){s||(s=cr),s.requestAnimationFrame=oo,s.cancelAnimationFrame=gi};var Sc=Ys.exports,zi=typeof window>"u",E7=function(s){return(s||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},Zs=function(){return!zi&&document.addEventListener?function(s,l,c,d){s&&l&&c&&s.addEventListener(l,c,d)}:function(s,l,c){s&&l&&c&&s.attachEvent("on".concat(l),c)}}(),bi=function(){return!zi&&document.removeEventListener?function(s,l,c,d){s&&l&&s.removeEventListener(l,c,d)}:function(s,l,c){s&&l&&s.detachEvent("on".concat(l),c)}}();function A7(s,l,c,d){var f=rt(c)?c:c.handleEvent,g=function(v){f(v),bi(s,l,g,d)};Zs(s,l,g,d)}function k_(s,l){if(!s||!l)return!1;if(l.indexOf(" ")!==-1)throw new Error("className should not contain space.");return s.classList?s.classList.contains(l):" ".concat(s.className," ").indexOf(" ".concat(l," "))>-1}function Od(s,l){if(s){for(var c=s.className,d=(l||"").split(" "),f=0,g=d.length;f<g;f++){var v=d[f];v&&(s.classList?s.classList.add(v):k_(s,v)||(c+=" ".concat(v)))}s.classList||(s.className=c)}}function Ed(s,l){if(!(!s||!l)){for(var c=l.split(" "),d=" ".concat(s.className," "),f=0,g=c.length;f<g;f++){var v=c[f];v&&(s.classList?s.classList.remove(v):k_(s,v)&&(d=d.replace(" ".concat(v," ")," ")))}s.classList||(s.className=E7(d))}}var Xf=function(s,l){var c=rt(s)?s(l):s;return c?Qe(c)?document.querySelector(c):c instanceof HTMLElement?c:document.body:document.body},$_=function(){};function S_(s){return s&&s===s.window}function T7(s,l){if(zi||!s)return 0;var c="scrollTop",d=0;return S_(s)?d=s.pageYOffset:s instanceof Document?d=s.documentElement[c]:s&&(d=s[c]),d}function P7(s,l){var c=l.container,d=c===void 0?window:c,f=l.duration,g=f===void 0?450:f,v=l.easing,b=v===void 0?S7:v,$=T7(d),y=Date.now();return new Promise(function(x){var C=function(){var E=Date.now(),N=E-y,W=b(Math.min(N,g),$,s,g);S_(d)?d.scrollTo(window.pageXOffset,W):d instanceof Document||d.constructor.name==="HTMLDocument"?d.documentElement.scrollTop=W:d.scrollTop=W,N<g?Sc(C):Sc(x)};Sc(C)})}var M7=function(s){if(!(s instanceof HTMLFormElement))throw new Error("target must be HTMLFormElement");var l=document.createElement("input");l.type="submit",l.hidden=!0,s.appendChild(l),l.click(),s.removeChild(l)},I7=jy,N7=Di,j7=Pi,D7=sn,B7=Ii,F7=Mi,L7=Rs,R7=Ls,z7="[object Map]",V7="[object Set]",H7=Object.prototype,U7=H7.hasOwnProperty;function K7(s){if(s==null)return!0;if(B7(s)&&(D7(s)||typeof s=="string"||typeof s.splice=="function"||F7(s)||R7(s)||j7(s)))return!s.length;var l=N7(s);if(l==z7||l==V7)return!s.size;if(L7(s))return!I7(s).length;for(var c in s)if(U7.call(s,c))return!1;return!0}var W7=K7;const Ql=ot(W7);function G7(s,l,c){var d=-1,f=s.length;l<0&&(l=-l>f?0:f+l),c=c>f?f:c,c<0&&(c+=f),f=l>c?0:c-l>>>0,l>>>=0;for(var g=Array(f);++d<f;)g[d]=s[d+l];return g}var x_=G7,q7=x_;function Y7(s,l,c){var d=s.length;return c=c===void 0?d:c,!l&&c>=d?s:q7(s,l,c)}var Z7=Y7,X7="\\ud800-\\udfff",J7="\\u0300-\\u036f",Q7="\\ufe20-\\ufe2f",eN="\\u20d0-\\u20ff",tN=J7+Q7+eN,nN="\\ufe0e\\ufe0f",rN="\\u200d",aN=RegExp("["+rN+X7+tN+nN+"]");function oN(s){return aN.test(s)}var O_=oN;function iN(s){return s.split("")}var lN=iN,E_="\\ud800-\\udfff",sN="\\u0300-\\u036f",uN="\\ufe20-\\ufe2f",cN="\\u20d0-\\u20ff",dN=sN+uN+cN,fN="\\ufe0e\\ufe0f",vN="["+E_+"]",Ad="["+dN+"]",Td="\\ud83c[\\udffb-\\udfff]",pN="(?:"+Ad+"|"+Td+")",A_="[^"+E_+"]",T_="(?:\\ud83c[\\udde6-\\uddff]){2}",P_="[\\ud800-\\udbff][\\udc00-\\udfff]",mN="\\u200d",M_=pN+"?",I_="["+fN+"]?",hN="(?:"+mN+"(?:"+[A_,T_,P_].join("|")+")"+I_+M_+")*",gN=I_+M_+hN,bN="(?:"+[A_+Ad+"?",Ad,T_,P_,vN].join("|")+")",yN=RegExp(Td+"(?="+Td+")|"+bN+gN,"g");function _N(s){return s.match(yN)||[]}var wN=_N,CN=lN,kN=O_,$N=wN;function SN(s){return kN(s)?$N(s):CN(s)}var xN=SN,ON=Z7,EN=O_,AN=xN,TN=Fi;function PN(s){return function(l){l=TN(l);var c=EN(l)?AN(l):void 0,d=c?c[0]:l.charAt(0),f=c?ON(c,1).join(""):l.slice(1);return d[s]()+f}}var MN=PN,IN=MN,NN=IN("toUpperCase"),jN=NN,DN=Fi,BN=jN;function FN(s){return BN(DN(s).toLowerCase())}var LN=FN;function RN(s,l,c,d){var f=-1,g=s==null?0:s.length;for(d&&g&&(c=s[++f]);++f<g;)c=l(c,s[f],f,s);return c}var zN=RN;function VN(s){return function(l){return s==null?void 0:s[l]}}var HN=VN,UN=HN,KN={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},WN=UN(KN),GN=WN,qN=GN,YN=Fi,ZN=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,XN="\\u0300-\\u036f",JN="\\ufe20-\\ufe2f",QN="\\u20d0-\\u20ff",ej=XN+JN+QN,tj="["+ej+"]",nj=RegExp(tj,"g");function rj(s){return s=YN(s),s&&s.replace(ZN,qN).replace(nj,"")}var aj=rj,oj=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function ij(s){return s.match(oj)||[]}var lj=ij,sj=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function uj(s){return sj.test(s)}var cj=uj,N_="\\ud800-\\udfff",dj="\\u0300-\\u036f",fj="\\ufe20-\\ufe2f",vj="\\u20d0-\\u20ff",pj=dj+fj+vj,j_="\\u2700-\\u27bf",D_="a-z\\xdf-\\xf6\\xf8-\\xff",mj="\\xac\\xb1\\xd7\\xf7",hj="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",gj="\\u2000-\\u206f",bj=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",B_="A-Z\\xc0-\\xd6\\xd8-\\xde",yj="\\ufe0e\\ufe0f",F_=mj+hj+gj+bj,L_="[']",Am="["+F_+"]",_j="["+pj+"]",R_="\\d+",wj="["+j_+"]",z_="["+D_+"]",V_="[^"+N_+F_+R_+j_+D_+B_+"]",Cj="\\ud83c[\\udffb-\\udfff]",kj="(?:"+_j+"|"+Cj+")",$j="[^"+N_+"]",H_="(?:\\ud83c[\\udde6-\\uddff]){2}",U_="[\\ud800-\\udbff][\\udc00-\\udfff]",Va="["+B_+"]",Sj="\\u200d",Tm="(?:"+z_+"|"+V_+")",xj="(?:"+Va+"|"+V_+")",Pm="(?:"+L_+"(?:d|ll|m|re|s|t|ve))?",Mm="(?:"+L_+"(?:D|LL|M|RE|S|T|VE))?",K_=kj+"?",W_="["+yj+"]?",Oj="(?:"+Sj+"(?:"+[$j,H_,U_].join("|")+")"+W_+K_+")*",Ej="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Aj="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Tj=W_+K_+Oj,Pj="(?:"+[wj,H_,U_].join("|")+")"+Tj,Mj=RegExp([Va+"?"+z_+"+"+Pm+"(?="+[Am,Va,"$"].join("|")+")",xj+"+"+Mm+"(?="+[Am,Va+Tm,"$"].join("|")+")",Va+"?"+Tm+"+"+Pm,Va+"+"+Mm,Aj,Ej,R_,Pj].join("|"),"g");function Ij(s){return s.match(Mj)||[]}var Nj=Ij,jj=lj,Dj=cj,Bj=Fi,Fj=Nj;function Lj(s,l,c){return s=Bj(s),l=c?void 0:l,l===void 0?Dj(s)?Fj(s):jj(s):s.match(l)||[]}var Rj=Lj,zj=zN,Vj=aj,Hj=Rj,Uj="[']",Kj=RegExp(Uj,"g");function Wj(s){return function(l){return zj(Hj(Vj(l).replace(Kj,"")),s,"")}}var Jf=Wj,Gj=LN,qj=Jf,Yj=qj(function(s,l,c){return l=l.toLowerCase(),s+(c?Gj(l):l)}),Zj=Yj;const io=ot(Zj);var Xj=Jf,Jj=Xj(function(s,l,c){return s+(c?"-":"")+l.toLowerCase()}),Qj=Jj;const Oo=ot(Qj);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Eo(s){var l;return jt(s)&&"defaultNode"in s?l=s.defaultNode:(isVNode$1(s)||Qe(s))&&(l=s),l}function eD(s){var l=[],c=function(d){if(at(d))return d.forEach(function(f){if(f.children&&at(f.children)){if(f.type!==Fragment$1)return;c(f.children)}else l.push(f)}),l};return c(s)}function Xs(s){return jt(s)&&"params"in s?s.params:{}}function tD(s){return jt(s)&&"slotFirst"in s?s.slotFirst:{}}function Im(s,l,c){var d,f,g,v,b=(d=(f=s.$slots)[io(c)])===null||d===void 0?void 0:d.call(f,l);return b||(b=(g=(v=s.$slots)[Oo(c)])===null||g===void 0?void 0:g.call(v,l),b)?b:null}var ur=function(s,l,c){var d=Xs(c),f=Eo(c),g;if(l in s&&(g=s[l]),!(g===!1||g===null)){if(g===!0&&f)return Im(s,d,l)||f;if(rt(g))return g(h,d);var v=[void 0,d,""].includes(g);return v&&(s.$slots[io(l)]||s.$slots[Oo(l)])?Im(s,d,l):g}},nD=function(s,l,c){var d=Eo(c);return ur(s,l,c)||d},rD=function(s,l,c,d){var f=Xs(d),g=Eo(d),v=f?{params:f}:void 0,b=ur(s,l,v),$=ur(s,c,v),y=Ql(b)?$:b;return Ql(y)?g:y};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var aD={attach:{type:[String,Function],default:""},content:{type:[String,Function]},default:{type:[String,Function]},delay:{type:Number,default:0},fullscreen:Boolean,indicator:{type:[Boolean,Function],default:!0},inheritColor:Boolean,loading:{type:Boolean,default:!0},preventScrollThrough:{type:Boolean,default:!0},showOverlay:{type:Boolean,default:!0},size:{type:String,default:"medium"},text:{type:[String,Function]},zIndex:{type:Number}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Js=function(s,l){var c=rt(s)?computed(s):ref(s),d=rt(l)?computed(l):ref(l),f=ref(),g=function(){f.value=$_()||Xf(c.value,d.value)};return onMounted(function(){return g()}),watch([c,d],function(){return g()}),f};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var oD=function(){return{name:we("loading"),centerClass:we("loading--center"),fullscreenClass:we("loading__fullscreen"),lockClass:we("loading--lock"),overlayClass:we("loading__overlay"),relativeClass:we("loading__parent"),fullClass:we("loading--full"),inheritColorClass:we("loading--inherit-color")}},Pd=defineComponent({name:"TLoading",inheritAttrs:!1,props:aD,setup:function(s,l){var c=l.slots,d=ref(!1),f=oD(),g=f.name,v=f.centerClass,b=f.fullscreenClass,$=f.lockClass,y=f.overlayClass,x=f.relativeClass,C=f.fullClass,E=f.inheritColorClass,N=we(),W=Ft(),q=W.SIZE,Y=function(){d.value=!1;var yy=setTimeout(function(){d.value=!0,clearTimeout(yy)},s.delay)},re=Js(function(){return s.attach}),se=computed(function(){return!!(!s.delay||s.delay&&d.value)}),de=computed(function(){var yy={};return s.zIndex!==void 0&&(yy.zIndex=s.zIndex),["small","medium","large"].includes(s.size)||(yy["font-size"]=s.size),yy}),he=computed(function(){return!!(s.default||c.default||s.content||c.content)}),ge=computed(function(){return s.preventScrollThrough&&s.fullscreen}),Se=computed(function(){return!!(s.text||c.text)}),Ae=computed(function(){return he.value&&s.loading&&se.value}),Re=computed(function(){return s.fullscreen&&s.loading&&se.value}),Be=computed(function(){return s.attach&&s.loading&&se.value}),Ke=computed(function(){return s.attach&&s.loading&&se.value}),Lr=computed(function(){var yy=[v.value,q.value[s.size],ne({},E.value,s.inheritColor)],my=[g.value,b.value,v.value,y.value];return{baseClasses:yy,attachClasses:yy.concat([g.value,C.value,ne({},y.value,s.showOverlay)]),withContentClasses:yy.concat([g.value,C.value,ne({},y.value,s.showOverlay)]),fullScreenClasses:my,normalClasses:yy.concat([g.value])}}),_y=toRefs(s),by=_y.loading;return watch([by],function(yy){var my=je(yy,1),$t=my[0];$t?(Y(),ge.value&&Od(document.body,$.value)):ge.value&&Ed(document.body,$.value)}),onMounted(function(){s.delay&&Y()}),{classPrefix:N,relativeClass:x,delayShowLoading:d,styles:de,showText:Se,hasContent:he,classes:Lr,lockFullscreen:ge,showWrapLoading:Ae,showNormalLoading:Be,showFullScreenLoading:Re,showAttachedLoading:Ke,teleportElement:re}},render:function(){var s=this,l=this.classes,c=l.fullScreenClasses,d=l.baseClasses,f=l.withContentClasses,g=l.attachClasses,v=l.normalClasses,b=createVNode($7,{size:this.size},null),$=this.loading&&ur(this,"indicator",b),y=this.showText&&createVNode("div",{class:"".concat(this.classPrefix,"-loading__text")},[ur(this,"text")]);return this.fullscreen?!this.showFullScreenLoading||!this.loading?null:createVNode(Teleport,{disabled:!this.attach||!this.teleportElement,to:this.teleportElement},{default:function(){return[createVNode("div",mergeProps({class:c,style:s.styles},s.$attrs),[createVNode("div",{class:d},[$,y])])]}}):this.hasContent?createVNode("div",mergeProps({class:this.relativeClass},this.$attrs),[rD(this,"default","content"),this.showWrapLoading&&createVNode("div",{class:f,style:this.styles},[$,y])]):this.attach?!this.showAttachedLoading||!this.loading?null:createVNode(Teleport,{disabled:!this.attach||!this.teleportElement,to:this.teleportElement},{default:function(){return[createVNode("div",mergeProps({class:g,style:s.styles},s.$attrs),[$,y])]}}):this.loading?createVNode("div",mergeProps({class:v,style:this.styles},this.$attrs),[$,y]):null}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Nm(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function iD(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Nm(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Nm(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var Ka=null;function lD(s){var l=qf({fullscreen:!1,attach:"body",loading:!0,preventScrollThrough:!0},s);return l}function jm(s){var l=lD(s);if(l.fullscreen&&Ka)return Ka;var c=defineComponent({setup:function(){var x=reactive(l);return{loadingOptions:x}},render:function(){return h(Pd,iD({},this.loadingOptions))}}),d=Xf(l.fullscreen?"body":l.attach),f=createApp(c),g=f.mount(document.createElement("div")),v=we("loading__parent--relative").value,b=we("loading--lock"),$=l.preventScrollThrough&&l.fullscreen;$&&Od(document.body,b.value),d?Od(d,v):console.error("attach is not exist");var y={hide:function(){g.loading=!1,Ed(d,v),Ed(document.body,b.value),f.unmount()}};return y}function G_(s){if(s===!0)return Ka=jm({fullscreen:!0,loading:!0,attach:"body",preventScrollThrough:!0}),Ka;if(s===!1){var l;(l=Ka)===null||l===void 0||l.hide(),Ka=null;return}return jm(s)}var q_=G_;q_.install=function(s){s.config.globalProperties.$loading=G_};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Md=Symbol("TdLoading"),Dm=function(s,l){var c=l.modifiers,d=c.fullscreen,f=c.inheritColor,g={attach:function(){return s},fullscreen:d??!1,inheritColor:f??!1,loading:l.value};jt(l.value)&&dA(l.value,function(v,b){g[b]=v}),s[Md]={options:g,instance:q_(g)}},sD={mounted:function(s,l){l.value&&Dm(s,l)},updated:function(s,l){var c=s[Md],d=l.value,f=l.oldValue;if(!mA(d,f)){var g,v=(g=d==null?void 0:d.loading)!==null&&g!==void 0?g:d;v?Dm(s,l):c==null||c.instance.hide()}},unmounted:function(s){var l;(l=s[Md])===null||l===void 0||l.instance.hide()}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function ze(s,l,c){var d=s;return d.install=function(f,g){f.component(l||g||d.name,s),c&&f.directive(c.name,c.comp)},d}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Qs=ze(Pd,Pd.name,{name:"loading",comp:sD});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var uD={block:Boolean,content:{type:[String,Function]},default:{type:[String,Function]},disabled:{type:Boolean,default:void 0},ghost:Boolean,href:{type:String,default:""},icon:{type:Function},loading:Boolean,loadingProps:{type:Object},shape:{type:String,default:"rectangle",validator:function(s){return s?["rectangle","square","round","circle"].includes(s):!0}},size:{type:String,default:"medium",validator:function(s){return s?["extra-small","small","medium","large"].includes(s):!0}},suffix:{type:Function},tag:{type:String,validator:function(s){return s?["button","a","div"].includes(s):!0}},theme:{type:String,validator:function(s){return s?["default","primary","danger","warning","success"].includes(s):!0}},type:{type:String,default:"button",validator:function(s){return s?["submit","reset","button"].includes(s):!0}},variant:{type:String,default:"base",validator:function(s){return s?["base","outline","dashed","text"].includes(s):!0}},onClick:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var cD=qs.expand,dD=qs.ripple,fD=qs.fade;function vD(){var s=Mt("animation"),l=s.globalConfig,c=function(d){var f,g,v=l.value;return v&&!((f=v.exclude)!==null&&f!==void 0&&f.includes(d))&&((g=v.include)===null||g===void 0?void 0:g.includes(d))};return{keepExpand:c(cD),keepRipple:c(dD),keepFade:c(fD)}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Bm(s,l){var c=Object.keys(l);c.forEach(function(d){s.style[d]=l[d]})}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var xc=200,pD="rgba(0, 0, 0, 0)",mD="rgba(0, 0, 0, 0.35)",hD=function(s,l){var c;if(s!=null&&(c=s.dataset)!==null&&c!==void 0&&c.ripple){var d=s.dataset.ripple;return d}var f=getComputedStyle(s).getPropertyValue("--ripple-color");return f||mD};function eu(s,l){var c=ref(null),d=we(),f=vD(),g=f.keepRipple,v=function(b){var $=s.value,y=hD($);if(!(b.button!==0||!s||!g)&&!($.classList.contains("".concat(d.value,"-is-active"))||$.classList.contains("".concat(d.value,"-is-disabled"))||$.classList.contains("".concat(d.value,"-is-checked"))||$.classList.contains("".concat(d.value,"-is-loading")))){var x=getComputedStyle($),C=parseInt(x.borderWidth,10),E=C>0?C:0,N=$.offsetWidth,W=$.offsetHeight;c.value.parentNode===null&&(Bm(c.value,{position:"absolute",left:"".concat(0-E,"px"),top:"".concat(0-E,"px"),width:"".concat(N,"px"),height:"".concat(W,"px"),borderRadius:x.borderRadius,pointerEvents:"none",overflow:"hidden"}),$.appendChild(c.value));var q=document.createElement("div");Bm(q,{marginTop:"0",marginLeft:"0",right:"".concat(N,"px"),width:"".concat(N+20,"px"),height:"100%",transition:"transform ".concat(xc,"ms cubic-bezier(.38, 0, .24, 1), background ").concat(xc*2,"ms linear"),transform:"skewX(-8deg)",pointerEvents:"none",position:"absolute",zIndex:0,backgroundColor:y,opacity:"0.9"});for(var Y=new WeakMap,re=$.children.length,se=0;se<re;++se){var de=$.children[se];de.style.zIndex===""&&de!==c.value&&(de.style.zIndex="1",Y.set(de,!0))}var he=$.style.position?$.style.position:getComputedStyle($).position;(he===""||he==="static")&&($.style.position="relative"),c.value.insertBefore(q,c.value.firstChild),setTimeout(function(){q.style.transform="translateX(".concat(N,"px)")},0);var ge=function(){q.style.backgroundColor=pD,s.value&&(s.value.removeEventListener("pointerup",ge,!1),s.value.removeEventListener("pointerleave",ge,!1),setTimeout(function(){q.remove(),c.value.children.length===0&&c.value.remove()},xc*2+100))};s.value.addEventListener("pointerup",ge,!1),s.value.addEventListener("pointerleave",ge,!1)}};onMounted(function(){var b=s==null?void 0:s.value;b&&(c.value=document.createElement("div"),b.addEventListener("pointerdown",v,!1))}),onUnmounted(function(){var b;s==null||(b=s.value)===null||b===void 0||b.removeEventListener("pointerdown",v,!1)})}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Fm(s,l,c){var d,f,g,v,b=(d=(f=s.slots)[io(l)])===null||d===void 0?void 0:d.call(f,c);return b&&b.filter(function($){return $.type.toString()!=="Symbol(v-cmt)"}).length||(b=(g=(v=s.slots)[Oo(l)])===null||g===void 0?void 0:g.call(v,c),b&&b.filter(function($){return $.type.toString()!=="Symbol(v-cmt)"}).length)?b:null}function Lm(s){if([void 0,null,""].includes(s))return!0;var l=s instanceof Array?s:[s],c=l.filter(function(d){var f;return(d==null||(f=d.type)===null||f===void 0?void 0:f.toString())!=="Symbol(Comment)"});return!c.length}var Ye=function(){var s=getCurrentInstance();return function(l,c){var d=Xs(c),f=Eo(c),g=tD(c),v;if(Object.keys(s.props).includes(l)&&(v=s.props[l]),!(v===!1||v===null)){if(v===!0)return Fm(s,l,d)||f;if(rt(v))return v(h,d);var b=[void 0,d,""].includes(v);return(b||g)&&(s.slots[io(l)]||s.slots[Oo(l)])?Fm(s,l,d):v}}},Qf=function(){var s=Ye();return function(l,c){var d=Eo(c);return s(l,c)||d}},Xt=function(){var s=Ye();return function(l,c,d){var f=Xs(d),g=Eo(d),v=f?{params:f}:void 0,b=s(l,v),$=s(c,v),y=Lm(b)?$:b;return Lm(y)?g:y}},gD=_r,bD=Tn,yD="[object Boolean]";function _D(s){return s===!0||s===!1||bD(s)&&gD(s)==yD}var wD=_D;const nn=ot(wD);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Jt(s){var l=getCurrentInstance(),c=computed(function(){return l.props.disabled}),d=inject("formDisabled",Object.create(null));return computed(function(){var f,g,v;return nn(s==null||(f=s.beforeDisabled)===null||f===void 0?void 0:f.value)?s.beforeDisabled.value:nn(c.value)?c.value:nn(s==null||(g=s.afterDisabled)===null||g===void 0?void 0:g.value)?s.afterDisabled.value:nn((v=d.disabled)===null||v===void 0?void 0:v.value)?d.disabled.value:!1})}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Rm(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function cl(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Rm(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Rm(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var CD=defineComponent({name:"TButton",props:uD,setup:function(s,l){var c=l.attrs,d=l.slots,f=Ye(),g=Xt(),v=we("button"),b=Ft(),$=b.STATUS,y=b.SIZE,x=ref();eu(x);var C=Jt(),E=computed(function(){var W=s.theme,q=s.variant;return W||(q==="base"?"primary":"default")}),N=computed(function(){return["".concat(v.value),"".concat(v.value,"--variant-").concat(s.variant),"".concat(v.value,"--theme-").concat(E.value),ne(ne(ne(ne(ne(ne({},y.value[s.size],s.size!=="medium"),$.value.disabled,C.value),$.value.loading,s.loading),"".concat(v.value,"--shape-").concat(s.shape),s.shape!=="rectangle"),"".concat(v.value,"--ghost"),s.ghost),y.value.block,s.block)]});return function(){var W=g("default","content"),q=s.loading?createVNode(Qs,cl({inheritColor:!0},s.loadingProps),null):f("icon"),Y=q&&!W,re=s.suffix||d.suffix?createVNode("span",{className:"".concat(v.value,"__suffix")},[f("suffix")]):null;W=W?createVNode("span",{class:"".concat(v.value,"__text")},[W]):"",q&&(W=[q,W]),re&&(W=[W].concat(re));var se=function(){return!s.tag&&s.href?"a":s.tag||"button"},de={class:[].concat(wt(N.value),[ne({},"".concat(v.value,"--icon-only"),Y)]),type:s.type,disabled:C.value||s.loading,href:s.href,tabindex:C.value?void 0:"0"};return h(se(),cl(cl(cl({ref:x},c),de),{},{onClick:s.onClick}),[W])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Tt=ze(CD);function vt(s,l,c){return l in s?Object.defineProperty(s,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[l]=c,s}function zm(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Vm(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?zm(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):zm(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function kD(s){var l=["fillOpacity","fillRule","clipRule"];return l.includes(s)?s.replace(/([a-z0-9]|(?=[A-Z]))([A-Z])/g,"$1-$2").toLowerCase():s}function pt(s,l){var c=Object.keys(s.attrs).reduce((d,f)=>(d[kD(f)]=s.attrs[f],d),{});return h(s.tag,Vm(Vm({},c),l),(s.children||[]).map(d=>pt(d,{})))}var $D="t",SD="zh-CN",xD={classPrefix:$D,locale:SD};function OD(){var{classPrefix:s}=xD;return{SIZE:{default:"",xs:"".concat(s,"-size-xs"),small:"".concat(s,"-size-s"),medium:"".concat(s,"-size-m"),large:"".concat(s,"-size-l"),xl:"".concat(s,"-size-xl"),block:"".concat(s,"-size-full-width")},STATUS:{loading:"".concat(s,"-is-loading"),disabled:"".concat(s,"-is-disabled"),focused:"".concat(s,"-is-focused"),success:"".concat(s,"-is-success"),error:"".concat(s,"-is-error"),warning:"".concat(s,"-is-warning"),selected:"".concat(s,"-is-selected"),active:"".concat(s,"-is-active"),checked:"".concat(s,"-is-checked"),current:"".concat(s,"-is-current"),hidden:"".concat(s,"-is-hidden"),visible:"".concat(s,"-is-visible"),expanded:"".concat(s,"-is-expanded"),indeterminate:"".concat(s,"-is-indeterminate")}}}function bt(s){var l=OD().SIZE,c=computed(()=>s.value in l?l[s.value]:""),d=computed(()=>s.value===void 0||s.value in l?{}:{fontSize:s.value});return{style:d,className:c}}function Hm(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Um(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Hm(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Hm(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var ED={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M13 4v7h7v2h-7v7h-2v-7H4v-2h7V4h2z"}}]},Y_=defineComponent({name:"AddIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-add",f.value]),b=computed(()=>Um(Um({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(ED,$.value)}});function Km(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Wm(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Km(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Km(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var AD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M4 4h16v2H4V4zm8 3.59l6.91 6.91-1.41 1.41-4.5-4.5V21h-2v-9.59l-4.5 4.5-1.41-1.41L12 7.59z"}}]},TD=defineComponent({name:"BacktopIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-backtop",f.value]),b=computed(()=>Wm(Wm({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(AD,$.value)}});function Gm(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function qm(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Gm(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Gm(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var PD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 26 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M4 1.59l6.17 6.17 7.07 7.07L23.41 21 22 22.41l-2.97-2.96A12.5 12.5 0 011.08 12.3L1 12l.1-.3c.77-2.4 2.24-4.5 4.18-6.02L2.59 3 4 1.59zM6.7 7.1A10.53 10.53 0 003.1 12a10.5 10.5 0 0014.45 5.97l-1.8-1.8a5 5 0 01-6.93-6.93L6.7 7.11zm3.6 3.6a3 3 0 004 4l-4-4zM13 5c-.58 0-1.14.05-1.7.14l-.98.16L10 3.32l.99-.16A12.5 12.5 0 0124.9 11.7l.1.31-.1.3c-.41 1.3-1.03 2.5-1.82 3.58l-.59.8-1.61-1.18.59-.8c.6-.82 1.08-1.73 1.42-2.7A10.5 10.5 0 0013 5zm.51 1.93l.96.29a5 5 0 013.31 3.31l.3.96-1.92.58-.3-.95a3 3 0 00-1.98-1.99l-.95-.3.58-1.9z"}}]},MD=defineComponent({name:"BrowseOffIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-browse-off",f.value]),b=computed(()=>qm(qm({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(PD,$.value)}});function Ym(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Zm(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Ym(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Ym(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var ID={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"g",attrs:{clipPath:"url(#clip0_8726_7319)"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2.1 12a10.5 10.5 0 0019.8 0 10.5 10.5 0 00-19.8 0zm-2.01-.3a12.5 12.5 0 0123.82 0l.1.3-.1.3a12.5 12.5 0 01-23.82 0l-.1-.3.1-.3zM12 9a3 3 0 100 6 3 3 0 000-6zm-5 3a5 5 0 1110 0 5 5 0 01-10 0z"}}]}]},ND=defineComponent({name:"BrowseIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-browse",f.value]),b=computed(()=>Zm(Zm({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(ID,$.value)}});function Xm(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Jm(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Xm(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Xm(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var jD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 23a11 11 0 100-22 11 11 0 000 22zM7.5 10.59l3 3 6-6L17.91 9l-7.41 7.41L6.09 12l1.41-1.41z"}}]},tu=defineComponent({name:"CheckCircleFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-check-circle-filled",f.value]),b=computed(()=>Jm(Jm({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(jD,$.value)}});function Qm(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function eh(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Qm(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Qm(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var DD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M17.5 8.09l-5.5 5.5-5.5-5.5L5.09 9.5 12 16.41l6.91-6.91-1.41-1.41z"}}]},Z_=defineComponent({name:"ChevronDownIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-chevron-down",f.value]),b=computed(()=>eh(eh({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(DD,$.value)}});function th(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function nh(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?th(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):th(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var BD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15.91 17.5l-5.5-5.5 5.5-5.5-1.41-1.41L7.59 12l6.91 6.91 1.41-1.41z"}}]},FD=defineComponent({name:"ChevronLeftIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-chevron-left",f.value]),b=computed(()=>nh(nh({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(BD,$.value)}});function rh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function ah(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?rh(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):rh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var LD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M8.09 17.5l5.5-5.5-5.5-5.5L9.5 5.09 16.41 12 9.5 18.91 8.09 17.5z"}}]},RD=defineComponent({name:"ChevronRightIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-chevron-right",f.value]),b=computed(()=>ah(ah({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(LD,$.value)}});function oh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function ih(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?oh(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):oh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var zD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M17.5 15.91l-5.5-5.5-5.5 5.5-1.41-1.41L12 7.59l6.91 6.91-1.41 1.41z"}}]},VD=defineComponent({name:"ChevronUpIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-chevron-up",f.value]),b=computed(()=>ih(ih({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(zD,$.value)}});function lh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function sh(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?lh(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):lh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var HD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 23a11 11 0 100-22 11 11 0 000 22zM8.82 7.4L12 10.6l3.18-3.19 1.42 1.42L13.4 12l3.19 3.18-1.42 1.42L12 13.4 8.82 16.6 7.4 15.18 10.6 12 7.4 8.82 8.82 7.4z"}}]},ev=defineComponent({name:"CloseCircleFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-close-circle-filled",f.value]),b=computed(()=>sh(sh({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(HD,$.value)}});function uh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function ch(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?uh(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):uh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var UD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M7.05 5.64L12 10.59l4.95-4.95 1.41 1.41L13.41 12l4.95 4.95-1.41 1.41L12 13.41l-4.95 4.95-1.41-1.41L10.59 12 5.64 7.05l1.41-1.41z"}}]},Ao=defineComponent({name:"CloseIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-close",f.value]),b=computed(()=>ch(ch({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(UD,$.value)}});function dh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function fh(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?dh(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):dh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var KD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M7.5 1h9v3H22v2h-2.03l-.5 17H4.53l-.5-17H2V4h5.5V1zm2 3h5V3h-5v1zM6.03 6l.44 15h11.06l.44-15H6.03zM13 8v11h-2V8h2z"}}]},WD=defineComponent({name:"DeleteIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-delete",f.value]),b=computed(()=>fh(fh({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(KD,$.value)}});function vh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function ph(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?vh(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):vh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var GD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M13 3v9.59l3.5-3.5 1.41 1.41L12 16.41 6.09 10.5 7.5 9.09l3.5 3.5V3h2zM4.5 14v5h15v-5h2v7h-19v-7h2z"}}]},qD=defineComponent({name:"DownloadIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-download",f.value]),b=computed(()=>ph(ph({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(GD,$.value)}});function mh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function hh(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?mh(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):mh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var YD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 1a11 11 0 110 22 11 11 0 010-22zm-1 13h2V6.5h-2V14zm2 1.5h-2v2h2v-2z"}}]},nu=defineComponent({name:"ErrorCircleFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-error-circle-filled",f.value]),b=computed(()=>hh(hh({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(YD,$.value)}});function gh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function bh(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?gh(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):gh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var ZD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 23a11 11 0 100-22 11 11 0 000 22zm-.17-11.11c.43-.53.97-.97 1.4-1.32A2 2 0 0012 7a2 2 0 00-1.89 1.33l-.33.95L7.9 8.6l.34-.94a4 4 0 116.24 4.47 7 7 0 00-1.1 1.01c-.27.34-.37.61-.37.85v1.25h-2V14c0-.87.39-1.57.83-2.11zM11 18.25v-2h2v2h-2z"}}]},XD=defineComponent({name:"HelpCircleFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-help-circle-filled",f.value]),b=computed(()=>bh(bh({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(ZD,$.value)}});function yh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function _h(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?yh(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):yh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var JD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2 2h20v10h-2V4H4v9.59l5-5L14.41 14 13 15.41l-4-4-5 5V20h8v2H2V2zm13.55 5a1 1 0 100 2 1 1 0 000-2zm-3 1a3 3 0 116 0 3 3 0 01-6 0zm3.62 6.76L19 17.59l2.83-2.83 1.41 1.41L20.41 19l2.83 2.83-1.41 1.41L19 20.41l-2.83 2.83-1.41-1.41L17.59 19l-2.83-2.83 1.41-1.41z"}}]},X_=defineComponent({name:"ImageErrorIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-image-error",f.value]),b=computed(()=>_h(_h({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(JD,$.value)}});function wh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Ch(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?wh(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):wh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var QD={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M2 2h20v20H2V2zm2 18h13.59L9 11.41l-5 5V20zm16-.41V4H4v9.59l5-5 11 11zM15.55 7a1 1 0 100 2 1 1 0 000-2zm-3 1a3 3 0 116 0 3 3 0 01-6 0z"}}]},J_=defineComponent({name:"ImageIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-image",f.value]),b=computed(()=>Ch(Ch({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(QD,$.value)}});function kh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function $h(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?kh(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):kh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var e9={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M12 23a11 11 0 100-22 11 11 0 000 22zM11 8.5v-2h2v2h-2zm2 1.5v7.5h-2V10h2z"}}]},tv=defineComponent({name:"InfoCircleFilledIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-info-circle-filled",f.value]),b=computed(()=>$h($h({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(e9,$.value)}});function Sh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function xh(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Sh(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Sh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var t9={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M13 2v20h-2V2h2zM9 4.64V18.5H1.3L9 4.64zm6 0l7.7 13.86H15V4.64zM4.7 16.5H7v-4.14L4.7 16.5zM17 12.36v4.14h2.3L17 12.36z"}}]},n9=defineComponent({name:"MirrorIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-mirror",f.value]),b=computed(()=>xh(xh({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(t9,$.value)}});function Oh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Eh(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Oh(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Oh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var r9={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M4 11h16v2H4v-2z"}}]},a9=defineComponent({name:"RemoveIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-remove",f.value]),b=computed(()=>Eh(Eh({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(r9,$.value)}});function Ah(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Th(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Ah(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Ah(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var o9={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M4 2v9a9 9 0 019 9h9v2H2V2h2zm0 18h7a7 7 0 00-7-7v7z"}}]},i9=defineComponent({name:"RotationIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-rotation",f.value]),b=computed(()=>Th(Th({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(o9,$.value)}});function Ph(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Mh(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Ph(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Ph(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var l9={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15.1 5.9a6.5 6.5 0 10-9.2 9.2 6.5 6.5 0 009.2-9.2zM4.49 4.5a8.5 8.5 0 0112.69 11.27l5.34 5.35-1.41 1.41-5.35-5.34A8.5 8.5 0 014.5 4.49zM11.5 6.5v3h3v2h-3v3h-2v-3h-3v-2h3v-3h2z"}}]},s9=defineComponent({name:"ZoomInIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-zoom-in",f.value]),b=computed(()=>Mh(Mh({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(l9,$.value)}});function Ih(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Nh(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Ih(Object(c),!0).forEach(function(d){vt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Ih(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var u9={tag:"svg",attrs:{fill:"none",viewBox:"0 0 24 24",width:"1em",height:"1em"},children:[{tag:"path",attrs:{fill:"currentColor",d:"M15.1 5.9a6.5 6.5 0 10-9.2 9.2 6.5 6.5 0 009.2-9.2zM4.49 4.5a8.5 8.5 0 0112.69 11.27l5.34 5.35-1.41 1.41-5.35-5.34A8.5 8.5 0 014.5 4.49zM6.5 11.5v-2h8v2h-8z"}}]},c9=defineComponent({name:"ZoomOutIcon",props:{size:{type:String},onClick:{type:Function}},setup(s,l){var{attrs:c}=l,d=computed(()=>s.size),{className:f,style:g}=bt(d),v=computed(()=>["t-icon","t-icon-zoom-out",f.value]),b=computed(()=>Nh(Nh({},g.value),c.style)),$=computed(()=>({class:v.value,style:b.value,onClick:y=>{var x;return(x=s.onClick)===null||x===void 0?void 0:x.call(s,{e:y})}}));return()=>pt(u9,$.value)}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var d9={align:{type:String,default:"center",validator:function(s){return s?["left","right","center"].includes(s):!0}},content:{type:[String,Function]},dashed:Boolean,default:{type:[String,Function]},layout:{type:String,default:"horizontal",validator:function(s){return s?["horizontal","vertical"].includes(s):!0}},theme:{type:String,validator:function(s){return s?["horizontal","vertical"].includes(s):!0}}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function jh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function f9(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?jh(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):jh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var v9=defineComponent({name:"TDivider",props:f9({},d9),setup:function(s){var l=we("divider"),c=Xt();return function(){var d=s.layout,f=s.dashed,g=s.align,v=c("default","content"),b=["".concat(l.value),["".concat(l.value,"--").concat(d)],ne(ne(ne({},"".concat(l.value,"--dashed"),!!f),"".concat(l.value,"--with-text"),!!v),"".concat(l.value,"--with-text-").concat(g),!!v)];return createVNode("div",{class:b},[v&&createVNode("span",{class:"".concat(l.value,"__inner-text")},[v])])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var es=ze(v9);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var p9={align:{type:String,validator:function(s){return s?["start","end","center","baseline"].includes(s):!0}},breakLine:Boolean,direction:{type:String,default:"horizontal",validator:function(s){return s?["vertical","horizontal"].includes(s):!0}},separator:{type:[String,Function]},size:{type:[String,Number,Array],default:"medium"}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function nv(){var s=getCurrentInstance();return function(l,c){var d,f;c||(c=s.slots);var g=((d=c)===null||d===void 0||(f=d.default)===null||f===void 0?void 0:f.call(d))||[];return eD(g).filter(function(v){var b;return(b=v.type.name)===null||b===void 0?void 0:b.endsWith(l)})}}function Q_(){var s=getCurrentInstance();return function(){var l,c=s.slots,d=(c==null||(l=c.default)===null||l===void 0?void 0:l.call(c))||[];return d.filter(function(f){return Zt(f.type)==="symbol"&&!f.children?!1:f.type!==Comment}).map(function(f){return f.children&&at(f.children)&&f.type===Fragment$1?f.children:f}).flat()}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Dh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Bh(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Dh(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Dh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var Fh={small:"8px",medium:"16px",large:"24px"},m9=DP(),h9=defineComponent({name:"TSpace",props:Bh(Bh({},p9),{},{forceFlexGapPolyfill:Boolean}),setup:function(s){var l=we("space"),c=Ye(),d=Q_(),f=computed(function(){return s.forceFlexGapPolyfill||m9}),g=computed(function(){var b="";at(s.size)?b=s.size.map(function(N){return Vt(N)?"".concat(N,"px"):Qe(N)&&Fh[N]||N}).join(" "):Qe(s.size)?b=Fh[s.size]||s.size:Vt(s.size)&&(b="".concat(s.size,"px"));var $={};if(f.value){var y=b.split(" "),x=je(y,2),C=x[0],E=x[1];$["--td-space-column-gap"]=C,$["--td-space-row-gap"]=E||C}else $.gap=b;return $});function v(){var b=d(),$=c("separator");return b.map(function(y,x){var C=x+1!==b.length&&$;return createVNode(Fragment$1,null,[createVNode("div",{class:"".concat(l.value,"-item")},[y]),C&&createVNode("div",{class:"".concat(l.value,"-item-separator")},[$])])})}return function(){var b=["".concat(l.value),ne(ne(ne(ne({},"".concat(l.value,"-align-").concat(s.align),s.align),"".concat(l.value,"-").concat(s.direction),s.direction),"".concat(l.value,"--break-line"),s.breakLine),"".concat(l.value,"--polyfill"),f.value)];return createVNode("div",{class:b,style:g.value},[v()])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Lh=ze(h9);function g9(s){return s==null}var b9=g9;const Id=ot(b9);function Rh(s,l,c,d,f,g,v){try{var b=s[g](v),$=b.value}catch(y){return void c(y)}b.done?l($):Promise.resolve($).then(d,f)}function Yt(s){return function(){var l=this,c=arguments;return new Promise(function(d,f){var g=s.apply(l,c);function v($){Rh(g,d,f,v,b,"next",$)}function b($){Rh(g,d,f,v,b,"throw",$)}v(void 0)})}}var ew={exports:{}},tw={exports:{}};(function(s){function l(c){"@babel/helpers - typeof";return s.exports=l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},s.exports.__esModule=!0,s.exports.default=s.exports,l(c)}s.exports=l,s.exports.__esModule=!0,s.exports.default=s.exports})(tw);var y9=tw.exports;(function(s){var l=y9.default;function c(){s.exports=c=function(){return f},s.exports.__esModule=!0,s.exports.default=s.exports;var d,f={},g=Object.prototype,v=g.hasOwnProperty,b=Object.defineProperty||function(W$,U$,hy){W$[U$]=hy.value},$=typeof Symbol=="function"?Symbol:{},y=$.iterator||"@@iterator",x=$.asyncIterator||"@@asyncIterator",C=$.toStringTag||"@@toStringTag";function E(W$,U$,hy){return Object.defineProperty(W$,U$,{value:hy,enumerable:!0,configurable:!0,writable:!0}),W$[U$]}try{E({},"")}catch{E=function(W$,U$,hy){return W$[U$]=hy}}function N(W$,U$,hy,G$){var ky=U$&&U$.prototype instanceof he?U$:he,$y=Object.create(ky.prototype),rS=new K$(G$||[]);return b($y,"_invoke",{value:by(W$,hy,rS)}),$y}function W(W$,U$,hy){try{return{type:"normal",arg:W$.call(U$,hy)}}catch(G$){return{type:"throw",arg:G$}}}f.wrap=N;var q="suspendedStart",Y="suspendedYield",re="executing",se="completed",de={};function he(){}function ge(){}function Se(){}var Ae={};E(Ae,y,function(){return this});var Re=Object.getPrototypeOf,Be=Re&&Re(Re(Y$([])));Be&&Be!==g&&v.call(Be,y)&&(Ae=Be);var Ke=Se.prototype=he.prototype=Object.create(Ae);function Lr(W$){["next","throw","return"].forEach(function(U$){E(W$,U$,function(hy){return this._invoke(U$,hy)})})}function _y(W$,U$){function hy(ky,$y,rS,lS){var bS=W(W$[ky],W$,$y);if(bS.type!=="throw"){var IS=bS.arg,BS=IS.value;return BS&&l(BS)=="object"&&v.call(BS,"__await")?U$.resolve(BS.__await).then(function(MS){hy("next",MS,rS,lS)},function(MS){hy("throw",MS,rS,lS)}):U$.resolve(BS).then(function(MS){IS.value=MS,rS(IS)},function(MS){return hy("throw",MS,rS,lS)})}lS(bS.arg)}var G$;b(this,"_invoke",{value:function(ky,$y){function rS(){return new U$(function(lS,bS){hy(ky,$y,lS,bS)})}return G$=G$?G$.then(rS,rS):rS()}})}function by(W$,U$,hy){var G$=q;return function(ky,$y){if(G$===re)throw Error("Generator is already running");if(G$===se){if(ky==="throw")throw $y;return{value:d,done:!0}}for(hy.method=ky,hy.arg=$y;;){var rS=hy.delegate;if(rS){var lS=yy(rS,hy);if(lS){if(lS===de)continue;return lS}}if(hy.method==="next")hy.sent=hy._sent=hy.arg;else if(hy.method==="throw"){if(G$===q)throw G$=se,hy.arg;hy.dispatchException(hy.arg)}else hy.method==="return"&&hy.abrupt("return",hy.arg);G$=re;var bS=W(W$,U$,hy);if(bS.type==="normal"){if(G$=hy.done?se:Y,bS.arg===de)continue;return{value:bS.arg,done:hy.done}}bS.type==="throw"&&(G$=se,hy.method="throw",hy.arg=bS.arg)}}}function yy(W$,U$){var hy=U$.method,G$=W$.iterator[hy];if(G$===d)return U$.delegate=null,hy==="throw"&&W$.iterator.return&&(U$.method="return",U$.arg=d,yy(W$,U$),U$.method==="throw")||hy!=="return"&&(U$.method="throw",U$.arg=new TypeError("The iterator does not provide a '"+hy+"' method")),de;var ky=W(G$,W$.iterator,U$.arg);if(ky.type==="throw")return U$.method="throw",U$.arg=ky.arg,U$.delegate=null,de;var $y=ky.arg;return $y?$y.done?(U$[W$.resultName]=$y.value,U$.next=W$.nextLoc,U$.method!=="return"&&(U$.method="next",U$.arg=d),U$.delegate=null,de):$y:(U$.method="throw",U$.arg=new TypeError("iterator result is not an object"),U$.delegate=null,de)}function my(W$){var U$={tryLoc:W$[0]};1 in W$&&(U$.catchLoc=W$[1]),2 in W$&&(U$.finallyLoc=W$[2],U$.afterLoc=W$[3]),this.tryEntries.push(U$)}function $t(W$){var U$=W$.completion||{};U$.type="normal",delete U$.arg,W$.completion=U$}function K$(W$){this.tryEntries=[{tryLoc:"root"}],W$.forEach(my,this),this.reset(!0)}function Y$(W$){if(W$||W$===""){var U$=W$[y];if(U$)return U$.call(W$);if(typeof W$.next=="function")return W$;if(!isNaN(W$.length)){var hy=-1,G$=function ky(){for(;++hy<W$.length;)if(v.call(W$,hy))return ky.value=W$[hy],ky.done=!1,ky;return ky.value=d,ky.done=!0,ky};return G$.next=G$}}throw new TypeError(l(W$)+" is not iterable")}return ge.prototype=Se,b(Ke,"constructor",{value:Se,configurable:!0}),b(Se,"constructor",{value:ge,configurable:!0}),ge.displayName=E(Se,C,"GeneratorFunction"),f.isGeneratorFunction=function(W$){var U$=typeof W$=="function"&&W$.constructor;return!!U$&&(U$===ge||(U$.displayName||U$.name)==="GeneratorFunction")},f.mark=function(W$){return Object.setPrototypeOf?Object.setPrototypeOf(W$,Se):(W$.__proto__=Se,E(W$,C,"GeneratorFunction")),W$.prototype=Object.create(Ke),W$},f.awrap=function(W$){return{__await:W$}},Lr(_y.prototype),E(_y.prototype,x,function(){return this}),f.AsyncIterator=_y,f.async=function(W$,U$,hy,G$,ky){ky===void 0&&(ky=Promise);var $y=new _y(N(W$,U$,hy,G$),ky);return f.isGeneratorFunction(U$)?$y:$y.next().then(function(rS){return rS.done?rS.value:$y.next()})},Lr(Ke),E(Ke,C,"Generator"),E(Ke,y,function(){return this}),E(Ke,"toString",function(){return"[object Generator]"}),f.keys=function(W$){var U$=Object(W$),hy=[];for(var G$ in U$)hy.push(G$);return hy.reverse(),function ky(){for(;hy.length;){var $y=hy.pop();if($y in U$)return ky.value=$y,ky.done=!1,ky}return ky.done=!0,ky}},f.values=Y$,K$.prototype={constructor:K$,reset:function(W$){if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,this.tryEntries.forEach($t),!W$)for(var U$ in this)U$.charAt(0)==="t"&&v.call(this,U$)&&!isNaN(+U$.slice(1))&&(this[U$]=d)},stop:function(){this.done=!0;var W$=this.tryEntries[0].completion;if(W$.type==="throw")throw W$.arg;return this.rval},dispatchException:function(W$){if(this.done)throw W$;var U$=this;function hy(bS,IS){return $y.type="throw",$y.arg=W$,U$.next=bS,IS&&(U$.method="next",U$.arg=d),!!IS}for(var G$=this.tryEntries.length-1;G$>=0;--G$){var ky=this.tryEntries[G$],$y=ky.completion;if(ky.tryLoc==="root")return hy("end");if(ky.tryLoc<=this.prev){var rS=v.call(ky,"catchLoc"),lS=v.call(ky,"finallyLoc");if(rS&&lS){if(this.prev<ky.catchLoc)return hy(ky.catchLoc,!0);if(this.prev<ky.finallyLoc)return hy(ky.finallyLoc)}else if(rS){if(this.prev<ky.catchLoc)return hy(ky.catchLoc,!0)}else{if(!lS)throw Error("try statement without catch or finally");if(this.prev<ky.finallyLoc)return hy(ky.finallyLoc)}}}},abrupt:function(W$,U$){for(var hy=this.tryEntries.length-1;hy>=0;--hy){var G$=this.tryEntries[hy];if(G$.tryLoc<=this.prev&&v.call(G$,"finallyLoc")&&this.prev<G$.finallyLoc){var ky=G$;break}}ky&&(W$==="break"||W$==="continue")&&ky.tryLoc<=U$&&U$<=ky.finallyLoc&&(ky=null);var $y=ky?ky.completion:{};return $y.type=W$,$y.arg=U$,ky?(this.method="next",this.next=ky.finallyLoc,de):this.complete($y)},complete:function(W$,U$){if(W$.type==="throw")throw W$.arg;return W$.type==="break"||W$.type==="continue"?this.next=W$.arg:W$.type==="return"?(this.rval=this.arg=W$.arg,this.method="return",this.next="end"):W$.type==="normal"&&U$&&(this.next=U$),de},finish:function(W$){for(var U$=this.tryEntries.length-1;U$>=0;--U$){var hy=this.tryEntries[U$];if(hy.finallyLoc===W$)return this.complete(hy.completion,hy.afterLoc),$t(hy),de}},catch:function(W$){for(var U$=this.tryEntries.length-1;U$>=0;--U$){var hy=this.tryEntries[U$];if(hy.tryLoc===W$){var G$=hy.completion;if(G$.type==="throw"){var ky=G$.arg;$t(hy)}return ky}}throw Error("illegal catch attempt")},delegateYield:function(W$,U$,hy){return this.delegate={iterator:Y$(W$),resultName:U$,nextLoc:hy},this.method==="next"&&(this.arg=d),de}},f}s.exports=c,s.exports.__esModule=!0,s.exports.default=s.exports})(ew);var _9=ew.exports,Il=_9(),w9=Il;try{regeneratorRuntime=Il}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=Il:Function("r","regeneratorRuntime = r")(Il)}const Xe=ot(w9);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Qn(s){var l=Mt("icon"),c=l.globalConfig,d={};return Object.keys(s).forEach(function(f){var g;d[f]=((g=c.value)===null||g===void 0?void 0:g[f])||s[f]}),d}var rn="top",xn="bottom",On="right",an="left",rv="auto",Vi=[rn,xn,On,an],lo="start",yi="end",C9="clippingParents",nw="viewport",Ko="popper",k9="reference",zh=Vi.reduce(function(s,l){return s.concat([l+"-"+lo,l+"-"+yi])},[]),rw=[].concat(Vi,[rv]).reduce(function(s,l){return s.concat([l,l+"-"+lo,l+"-"+yi])},[]),$9="beforeRead",S9="read",x9="afterRead",O9="beforeMain",E9="main",A9="afterMain",T9="beforeWrite",P9="write",M9="afterWrite",I9=[$9,S9,x9,O9,E9,A9,T9,P9,M9];function Xn(s){return s?(s.nodeName||"").toLowerCase():null}function pn(s){if(s==null)return window;if(s.toString()!=="[object Window]"){var l=s.ownerDocument;return l&&l.defaultView||window}return s}function ha(s){var l=pn(s).Element;return s instanceof l||s instanceof Element}function Sn(s){var l=pn(s).HTMLElement;return s instanceof l||s instanceof HTMLElement}function av(s){if(typeof ShadowRoot>"u")return!1;var l=pn(s).ShadowRoot;return s instanceof l||s instanceof ShadowRoot}function N9(s){var l=s.state;Object.keys(l.elements).forEach(function(c){var d=l.styles[c]||{},f=l.attributes[c]||{},g=l.elements[c];!Sn(g)||!Xn(g)||(Object.assign(g.style,d),Object.keys(f).forEach(function(v){var b=f[v];b===!1?g.removeAttribute(v):g.setAttribute(v,b===!0?"":b)}))})}function j9(s){var l=s.state,c={popper:{position:l.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(l.elements.popper.style,c.popper),l.styles=c,l.elements.arrow&&Object.assign(l.elements.arrow.style,c.arrow),function(){Object.keys(l.elements).forEach(function(d){var f=l.elements[d],g=l.attributes[d]||{},v=Object.keys(l.styles.hasOwnProperty(d)?l.styles[d]:c[d]),b=v.reduce(function($,y){return $[y]="",$},{});!Sn(f)||!Xn(f)||(Object.assign(f.style,b),Object.keys(g).forEach(function($){f.removeAttribute($)}))})}}const D9={name:"applyStyles",enabled:!0,phase:"write",fn:N9,effect:j9,requires:["computeStyles"]};function Zn(s){return s.split("-")[0]}var da=Math.max,ts=Math.min,so=Math.round;function Nd(){var s=navigator.userAgentData;return s!=null&&s.brands&&Array.isArray(s.brands)?s.brands.map(function(l){return l.brand+"/"+l.version}).join(" "):navigator.userAgent}function aw(){return!/^((?!chrome|android).)*safari/i.test(Nd())}function uo(s,l,c){l===void 0&&(l=!1),c===void 0&&(c=!1);var d=s.getBoundingClientRect(),f=1,g=1;l&&Sn(s)&&(f=s.offsetWidth>0&&so(d.width)/s.offsetWidth||1,g=s.offsetHeight>0&&so(d.height)/s.offsetHeight||1);var v=ha(s)?pn(s):window,b=v.visualViewport,$=!aw()&&c,y=(d.left+($&&b?b.offsetLeft:0))/f,x=(d.top+($&&b?b.offsetTop:0))/g,C=d.width/f,E=d.height/g;return{width:C,height:E,top:x,right:y+C,bottom:x+E,left:y,x:y,y:x}}function ov(s){var l=uo(s),c=s.offsetWidth,d=s.offsetHeight;return Math.abs(l.width-c)<=1&&(c=l.width),Math.abs(l.height-d)<=1&&(d=l.height),{x:s.offsetLeft,y:s.offsetTop,width:c,height:d}}function ow(s,l){var c=l.getRootNode&&l.getRootNode();if(s.contains(l))return!0;if(c&&av(c)){var d=l;do{if(d&&s.isSameNode(d))return!0;d=d.parentNode||d.host}while(d)}return!1}function pr(s){return pn(s).getComputedStyle(s)}function B9(s){return["table","td","th"].indexOf(Xn(s))>=0}function zr(s){return((ha(s)?s.ownerDocument:s.document)||window.document).documentElement}function ru(s){return Xn(s)==="html"?s:s.assignedSlot||s.parentNode||(av(s)?s.host:null)||zr(s)}function Vh(s){return!Sn(s)||pr(s).position==="fixed"?null:s.offsetParent}function F9(s){var l=/firefox/i.test(Nd()),c=/Trident/i.test(Nd());if(c&&Sn(s)){var d=pr(s);if(d.position==="fixed")return null}var f=ru(s);for(av(f)&&(f=f.host);Sn(f)&&["html","body"].indexOf(Xn(f))<0;){var g=pr(f);if(g.transform!=="none"||g.perspective!=="none"||g.contain==="paint"||["transform","perspective"].indexOf(g.willChange)!==-1||l&&g.willChange==="filter"||l&&g.filter&&g.filter!=="none")return f;f=f.parentNode}return null}function Hi(s){for(var l=pn(s),c=Vh(s);c&&B9(c)&&pr(c).position==="static";)c=Vh(c);return c&&(Xn(c)==="html"||Xn(c)==="body"&&pr(c).position==="static")?l:c||F9(s)||l}function iv(s){return["top","bottom"].indexOf(s)>=0?"x":"y"}function si(s,l,c){return da(s,ts(l,c))}function L9(s,l,c){var d=si(s,l,c);return d>c?c:d}function iw(){return{top:0,right:0,bottom:0,left:0}}function lw(s){return Object.assign({},iw(),s)}function sw(s,l){return l.reduce(function(c,d){return c[d]=s,c},{})}var R9=function(s,l){return s=typeof s=="function"?s(Object.assign({},l.rects,{placement:l.placement})):s,lw(typeof s!="number"?s:sw(s,Vi))};function z9(s){var l,c=s.state,d=s.name,f=s.options,g=c.elements.arrow,v=c.modifiersData.popperOffsets,b=Zn(c.placement),$=iv(b),y=[an,On].indexOf(b)>=0,x=y?"height":"width";if(!(!g||!v)){var C=R9(f.padding,c),E=ov(g),N=$==="y"?rn:an,W=$==="y"?xn:On,q=c.rects.reference[x]+c.rects.reference[$]-v[$]-c.rects.popper[x],Y=v[$]-c.rects.reference[$],re=Hi(g),se=re?$==="y"?re.clientHeight||0:re.clientWidth||0:0,de=q/2-Y/2,he=C[N],ge=se-E[x]-C[W],Se=se/2-E[x]/2+de,Ae=si(he,Se,ge),Re=$;c.modifiersData[d]=(l={},l[Re]=Ae,l.centerOffset=Ae-Se,l)}}function V9(s){var l=s.state,c=s.options,d=c.element,f=d===void 0?"[data-popper-arrow]":d;f!=null&&(typeof f=="string"&&(f=l.elements.popper.querySelector(f),!f)||ow(l.elements.popper,f)&&(l.elements.arrow=f))}const H9={name:"arrow",enabled:!0,phase:"main",fn:z9,effect:V9,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function co(s){return s.split("-")[1]}var U9={top:"auto",right:"auto",bottom:"auto",left:"auto"};function K9(s,l){var c=s.x,d=s.y,f=l.devicePixelRatio||1;return{x:so(c*f)/f||0,y:so(d*f)/f||0}}function Hh(s){var l,c=s.popper,d=s.popperRect,f=s.placement,g=s.variation,v=s.offsets,b=s.position,$=s.gpuAcceleration,y=s.adaptive,x=s.roundOffsets,C=s.isFixed,E=v.x,N=E===void 0?0:E,W=v.y,q=W===void 0?0:W,Y=typeof x=="function"?x({x:N,y:q}):{x:N,y:q};N=Y.x,q=Y.y;var re=v.hasOwnProperty("x"),se=v.hasOwnProperty("y"),de=an,he=rn,ge=window;if(y){var Se=Hi(c),Ae="clientHeight",Re="clientWidth";if(Se===pn(c)&&(Se=zr(c),pr(Se).position!=="static"&&b==="absolute"&&(Ae="scrollHeight",Re="scrollWidth")),Se=Se,f===rn||(f===an||f===On)&&g===yi){he=xn;var Be=C&&Se===ge&&ge.visualViewport?ge.visualViewport.height:Se[Ae];q-=Be-d.height,q*=$?1:-1}if(f===an||(f===rn||f===xn)&&g===yi){de=On;var Ke=C&&Se===ge&&ge.visualViewport?ge.visualViewport.width:Se[Re];N-=Ke-d.width,N*=$?1:-1}}var Lr=Object.assign({position:b},y&&U9),_y=x===!0?K9({x:N,y:q},pn(c)):{x:N,y:q};if(N=_y.x,q=_y.y,$){var by;return Object.assign({},Lr,(by={},by[he]=se?"0":"",by[de]=re?"0":"",by.transform=(ge.devicePixelRatio||1)<=1?"translate("+N+"px, "+q+"px)":"translate3d("+N+"px, "+q+"px, 0)",by))}return Object.assign({},Lr,(l={},l[he]=se?q+"px":"",l[de]=re?N+"px":"",l.transform="",l))}function W9(s){var l=s.state,c=s.options,d=c.gpuAcceleration,f=d===void 0?!0:d,g=c.adaptive,v=g===void 0?!0:g,b=c.roundOffsets,$=b===void 0?!0:b,y={placement:Zn(l.placement),variation:co(l.placement),popper:l.elements.popper,popperRect:l.rects.popper,gpuAcceleration:f,isFixed:l.options.strategy==="fixed"};l.modifiersData.popperOffsets!=null&&(l.styles.popper=Object.assign({},l.styles.popper,Hh(Object.assign({},y,{offsets:l.modifiersData.popperOffsets,position:l.options.strategy,adaptive:v,roundOffsets:$})))),l.modifiersData.arrow!=null&&(l.styles.arrow=Object.assign({},l.styles.arrow,Hh(Object.assign({},y,{offsets:l.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:$})))),l.attributes.popper=Object.assign({},l.attributes.popper,{"data-popper-placement":l.placement})}const G9={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:W9,data:{}};var dl={passive:!0};function q9(s){var l=s.state,c=s.instance,d=s.options,f=d.scroll,g=f===void 0?!0:f,v=d.resize,b=v===void 0?!0:v,$=pn(l.elements.popper),y=[].concat(l.scrollParents.reference,l.scrollParents.popper);return g&&y.forEach(function(x){x.addEventListener("scroll",c.update,dl)}),b&&$.addEventListener("resize",c.update,dl),function(){g&&y.forEach(function(x){x.removeEventListener("scroll",c.update,dl)}),b&&$.removeEventListener("resize",c.update,dl)}}const Y9={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:q9,data:{}};var Z9={left:"right",right:"left",bottom:"top",top:"bottom"};function Nl(s){return s.replace(/left|right|bottom|top/g,function(l){return Z9[l]})}var X9={start:"end",end:"start"};function Uh(s){return s.replace(/start|end/g,function(l){return X9[l]})}function lv(s){var l=pn(s),c=l.pageXOffset,d=l.pageYOffset;return{scrollLeft:c,scrollTop:d}}function sv(s){return uo(zr(s)).left+lv(s).scrollLeft}function J9(s,l){var c=pn(s),d=zr(s),f=c.visualViewport,g=d.clientWidth,v=d.clientHeight,b=0,$=0;if(f){g=f.width,v=f.height;var y=aw();(y||!y&&l==="fixed")&&(b=f.offsetLeft,$=f.offsetTop)}return{width:g,height:v,x:b+sv(s),y:$}}function Q9(s){var l,c=zr(s),d=lv(s),f=(l=s.ownerDocument)==null?void 0:l.body,g=da(c.scrollWidth,c.clientWidth,f?f.scrollWidth:0,f?f.clientWidth:0),v=da(c.scrollHeight,c.clientHeight,f?f.scrollHeight:0,f?f.clientHeight:0),b=-d.scrollLeft+sv(s),$=-d.scrollTop;return pr(f||c).direction==="rtl"&&(b+=da(c.clientWidth,f?f.clientWidth:0)-g),{width:g,height:v,x:b,y:$}}function uv(s){var l=pr(s),c=l.overflow,d=l.overflowX,f=l.overflowY;return/auto|scroll|overlay|hidden/.test(c+f+d)}function uw(s){return["html","body","#document"].indexOf(Xn(s))>=0?s.ownerDocument.body:Sn(s)&&uv(s)?s:uw(ru(s))}function ui(s,l){var c;l===void 0&&(l=[]);var d=uw(s),f=d===((c=s.ownerDocument)==null?void 0:c.body),g=pn(d),v=f?[g].concat(g.visualViewport||[],uv(d)?d:[]):d,b=l.concat(v);return f?b:b.concat(ui(ru(v)))}function jd(s){return Object.assign({},s,{left:s.x,top:s.y,right:s.x+s.width,bottom:s.y+s.height})}function eB(s,l){var c=uo(s,!1,l==="fixed");return c.top=c.top+s.clientTop,c.left=c.left+s.clientLeft,c.bottom=c.top+s.clientHeight,c.right=c.left+s.clientWidth,c.width=s.clientWidth,c.height=s.clientHeight,c.x=c.left,c.y=c.top,c}function Kh(s,l,c){return l===nw?jd(J9(s,c)):ha(l)?eB(l,c):jd(Q9(zr(s)))}function tB(s){var l=ui(ru(s)),c=["absolute","fixed"].indexOf(pr(s).position)>=0,d=c&&Sn(s)?Hi(s):s;return ha(d)?l.filter(function(f){return ha(f)&&ow(f,d)&&Xn(f)!=="body"}):[]}function nB(s,l,c,d){var f=l==="clippingParents"?tB(s):[].concat(l),g=[].concat(f,[c]),v=g[0],b=g.reduce(function($,y){var x=Kh(s,y,d);return $.top=da(x.top,$.top),$.right=ts(x.right,$.right),$.bottom=ts(x.bottom,$.bottom),$.left=da(x.left,$.left),$},Kh(s,v,d));return b.width=b.right-b.left,b.height=b.bottom-b.top,b.x=b.left,b.y=b.top,b}function cw(s){var l=s.reference,c=s.element,d=s.placement,f=d?Zn(d):null,g=d?co(d):null,v=l.x+l.width/2-c.width/2,b=l.y+l.height/2-c.height/2,$;switch(f){case rn:$={x:v,y:l.y-c.height};break;case xn:$={x:v,y:l.y+l.height};break;case On:$={x:l.x+l.width,y:b};break;case an:$={x:l.x-c.width,y:b};break;default:$={x:l.x,y:l.y}}var y=f?iv(f):null;if(y!=null){var x=y==="y"?"height":"width";switch(g){case lo:$[y]=$[y]-(l[x]/2-c[x]/2);break;case yi:$[y]=$[y]+(l[x]/2-c[x]/2);break}}return $}function _i(s,l){l===void 0&&(l={});var c=l,d=c.placement,f=d===void 0?s.placement:d,g=c.strategy,v=g===void 0?s.strategy:g,b=c.boundary,$=b===void 0?C9:b,y=c.rootBoundary,x=y===void 0?nw:y,C=c.elementContext,E=C===void 0?Ko:C,N=c.altBoundary,W=N===void 0?!1:N,q=c.padding,Y=q===void 0?0:q,re=lw(typeof Y!="number"?Y:sw(Y,Vi)),se=E===Ko?k9:Ko,de=s.rects.popper,he=s.elements[W?se:E],ge=nB(ha(he)?he:he.contextElement||zr(s.elements.popper),$,x,v),Se=uo(s.elements.reference),Ae=cw({reference:Se,element:de,strategy:"absolute",placement:f}),Re=jd(Object.assign({},de,Ae)),Be=E===Ko?Re:Se,Ke={top:ge.top-Be.top+re.top,bottom:Be.bottom-ge.bottom+re.bottom,left:ge.left-Be.left+re.left,right:Be.right-ge.right+re.right},Lr=s.modifiersData.offset;if(E===Ko&&Lr){var _y=Lr[f];Object.keys(Ke).forEach(function(by){var yy=[On,xn].indexOf(by)>=0?1:-1,my=[rn,xn].indexOf(by)>=0?"y":"x";Ke[by]+=_y[my]*yy})}return Ke}function rB(s,l){l===void 0&&(l={});var c=l,d=c.placement,f=c.boundary,g=c.rootBoundary,v=c.padding,b=c.flipVariations,$=c.allowedAutoPlacements,y=$===void 0?rw:$,x=co(d),C=x?b?zh:zh.filter(function(W){return co(W)===x}):Vi,E=C.filter(function(W){return y.indexOf(W)>=0});E.length===0&&(E=C);var N=E.reduce(function(W,q){return W[q]=_i(s,{placement:q,boundary:f,rootBoundary:g,padding:v})[Zn(q)],W},{});return Object.keys(N).sort(function(W,q){return N[W]-N[q]})}function aB(s){if(Zn(s)===rv)return[];var l=Nl(s);return[Uh(s),l,Uh(l)]}function oB(s){var l=s.state,c=s.options,d=s.name;if(!l.modifiersData[d]._skip){for(var f=c.mainAxis,g=f===void 0?!0:f,v=c.altAxis,b=v===void 0?!0:v,$=c.fallbackPlacements,y=c.padding,x=c.boundary,C=c.rootBoundary,E=c.altBoundary,N=c.flipVariations,W=N===void 0?!0:N,q=c.allowedAutoPlacements,Y=l.options.placement,re=Zn(Y),se=re===Y,de=$||(se||!W?[Nl(Y)]:aB(Y)),he=[Y].concat(de).reduce(function($y,rS){return $y.concat(Zn(rS)===rv?rB(l,{placement:rS,boundary:x,rootBoundary:C,padding:y,flipVariations:W,allowedAutoPlacements:q}):rS)},[]),ge=l.rects.reference,Se=l.rects.popper,Ae=new Map,Re=!0,Be=he[0],Ke=0;Ke<he.length;Ke++){var Lr=he[Ke],_y=Zn(Lr),by=co(Lr)===lo,yy=[rn,xn].indexOf(_y)>=0,my=yy?"width":"height",$t=_i(l,{placement:Lr,boundary:x,rootBoundary:C,altBoundary:E,padding:y}),K$=yy?by?On:an:by?xn:rn;ge[my]>Se[my]&&(K$=Nl(K$));var Y$=Nl(K$),W$=[];if(g&&W$.push($t[_y]<=0),b&&W$.push($t[K$]<=0,$t[Y$]<=0),W$.every(function($y){return $y})){Be=Lr,Re=!1;break}Ae.set(Lr,W$)}if(Re)for(var U$=W?3:1,hy=function($y){var rS=he.find(function(lS){var bS=Ae.get(lS);if(bS)return bS.slice(0,$y).every(function(IS){return IS})});if(rS)return Be=rS,"break"},G$=U$;G$>0;G$--){var ky=hy(G$);if(ky==="break")break}l.placement!==Be&&(l.modifiersData[d]._skip=!0,l.placement=Be,l.reset=!0)}}const iB={name:"flip",enabled:!0,phase:"main",fn:oB,requiresIfExists:["offset"],data:{_skip:!1}};function Wh(s,l,c){return c===void 0&&(c={x:0,y:0}),{top:s.top-l.height-c.y,right:s.right-l.width+c.x,bottom:s.bottom-l.height+c.y,left:s.left-l.width-c.x}}function Gh(s){return[rn,On,xn,an].some(function(l){return s[l]>=0})}function lB(s){var l=s.state,c=s.name,d=l.rects.reference,f=l.rects.popper,g=l.modifiersData.preventOverflow,v=_i(l,{elementContext:"reference"}),b=_i(l,{altBoundary:!0}),$=Wh(v,d),y=Wh(b,f,g),x=Gh($),C=Gh(y);l.modifiersData[c]={referenceClippingOffsets:$,popperEscapeOffsets:y,isReferenceHidden:x,hasPopperEscaped:C},l.attributes.popper=Object.assign({},l.attributes.popper,{"data-popper-reference-hidden":x,"data-popper-escaped":C})}const sB={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:lB};function uB(s,l,c){var d=Zn(s),f=[an,rn].indexOf(d)>=0?-1:1,g=typeof c=="function"?c(Object.assign({},l,{placement:s})):c,v=g[0],b=g[1];return v=v||0,b=(b||0)*f,[an,On].indexOf(d)>=0?{x:b,y:v}:{x:v,y:b}}function cB(s){var l=s.state,c=s.options,d=s.name,f=c.offset,g=f===void 0?[0,0]:f,v=rw.reduce(function(x,C){return x[C]=uB(C,l.rects,g),x},{}),b=v[l.placement],$=b.x,y=b.y;l.modifiersData.popperOffsets!=null&&(l.modifiersData.popperOffsets.x+=$,l.modifiersData.popperOffsets.y+=y),l.modifiersData[d]=v}const dB={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:cB};function fB(s){var l=s.state,c=s.name;l.modifiersData[c]=cw({reference:l.rects.reference,element:l.rects.popper,strategy:"absolute",placement:l.placement})}const vB={name:"popperOffsets",enabled:!0,phase:"read",fn:fB,data:{}};function pB(s){return s==="x"?"y":"x"}function mB(s){var l=s.state,c=s.options,d=s.name,f=c.mainAxis,g=f===void 0?!0:f,v=c.altAxis,b=v===void 0?!1:v,$=c.boundary,y=c.rootBoundary,x=c.altBoundary,C=c.padding,E=c.tether,N=E===void 0?!0:E,W=c.tetherOffset,q=W===void 0?0:W,Y=_i(l,{boundary:$,rootBoundary:y,padding:C,altBoundary:x}),re=Zn(l.placement),se=co(l.placement),de=!se,he=iv(re),ge=pB(he),Se=l.modifiersData.popperOffsets,Ae=l.rects.reference,Re=l.rects.popper,Be=typeof q=="function"?q(Object.assign({},l.rects,{placement:l.placement})):q,Ke=typeof Be=="number"?{mainAxis:Be,altAxis:Be}:Object.assign({mainAxis:0,altAxis:0},Be),Lr=l.modifiersData.offset?l.modifiersData.offset[l.placement]:null,_y={x:0,y:0};if(Se){if(g){var by,yy=he==="y"?rn:an,my=he==="y"?xn:On,$t=he==="y"?"height":"width",K$=Se[he],Y$=K$+Y[yy],W$=K$-Y[my],U$=N?-Re[$t]/2:0,hy=se===lo?Ae[$t]:Re[$t],G$=se===lo?-Re[$t]:-Ae[$t],ky=l.elements.arrow,$y=N&&ky?ov(ky):{width:0,height:0},rS=l.modifiersData["arrow#persistent"]?l.modifiersData["arrow#persistent"].padding:iw(),lS=rS[yy],bS=rS[my],IS=si(0,Ae[$t],$y[$t]),BS=de?Ae[$t]/2-U$-IS-lS-Ke.mainAxis:hy-IS-lS-Ke.mainAxis,MS=de?-Ae[$t]/2+U$+IS+bS+Ke.mainAxis:G$+IS+bS+Ke.mainAxis,zS=l.elements.arrow&&Hi(l.elements.arrow),LS=zS?he==="y"?zS.clientTop||0:zS.clientLeft||0:0,nS=(by=Lr==null?void 0:Lr[he])!=null?by:0,Z$=K$+BS-nS-LS,dS=K$+MS-nS,ES=si(N?ts(Y$,Z$):Y$,K$,N?da(W$,dS):W$);Se[he]=ES,_y[he]=ES-K$}if(b){var wy,tS=he==="x"?rn:an,yS=he==="x"?xn:On,Q$=Se[ge],eS=ge==="y"?"height":"width",cS=Q$+Y[tS],wS=Q$-Y[yS],xS=[rn,an].indexOf(re)!==-1,OS=(wy=Lr==null?void 0:Lr[ge])!=null?wy:0,mS=xS?cS:Q$-Ae[eS]-Re[eS]-OS+Ke.altAxis,pS=xS?Q$+Ae[eS]+Re[eS]-OS-Ke.altAxis:wS,fC=N&&xS?L9(mS,Q$,pS):si(N?mS:cS,Q$,N?pS:wS);Se[ge]=fC,_y[ge]=fC-Q$}l.modifiersData[d]=_y}}const hB={name:"preventOverflow",enabled:!0,phase:"main",fn:mB,requiresIfExists:["offset"]};function gB(s){return{scrollLeft:s.scrollLeft,scrollTop:s.scrollTop}}function bB(s){return s===pn(s)||!Sn(s)?lv(s):gB(s)}function yB(s){var l=s.getBoundingClientRect(),c=so(l.width)/s.offsetWidth||1,d=so(l.height)/s.offsetHeight||1;return c!==1||d!==1}function _B(s,l,c){c===void 0&&(c=!1);var d=Sn(l),f=Sn(l)&&yB(l),g=zr(l),v=uo(s,f,c),b={scrollLeft:0,scrollTop:0},$={x:0,y:0};return(d||!d&&!c)&&((Xn(l)!=="body"||uv(g))&&(b=bB(l)),Sn(l)?($=uo(l,!0),$.x+=l.clientLeft,$.y+=l.clientTop):g&&($.x=sv(g))),{x:v.left+b.scrollLeft-$.x,y:v.top+b.scrollTop-$.y,width:v.width,height:v.height}}function wB(s){var l=new Map,c=new Set,d=[];s.forEach(function(g){l.set(g.name,g)});function f(g){c.add(g.name);var v=[].concat(g.requires||[],g.requiresIfExists||[]);v.forEach(function(b){if(!c.has(b)){var $=l.get(b);$&&f($)}}),d.push(g)}return s.forEach(function(g){c.has(g.name)||f(g)}),d}function CB(s){var l=wB(s);return I9.reduce(function(c,d){return c.concat(l.filter(function(f){return f.phase===d}))},[])}function kB(s){var l;return function(){return l||(l=new Promise(function(c){Promise.resolve().then(function(){l=void 0,c(s())})})),l}}function $B(s){var l=s.reduce(function(c,d){var f=c[d.name];return c[d.name]=f?Object.assign({},f,d,{options:Object.assign({},f.options,d.options),data:Object.assign({},f.data,d.data)}):d,c},{});return Object.keys(l).map(function(c){return l[c]})}var qh={placement:"bottom",modifiers:[],strategy:"absolute"};function Yh(){for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];return!l.some(function(d){return!(d&&typeof d.getBoundingClientRect=="function")})}function SB(s){s===void 0&&(s={});var l=s,c=l.defaultModifiers,d=c===void 0?[]:c,f=l.defaultOptions,g=f===void 0?qh:f;return function(v,b,$){$===void 0&&($=g);var y={placement:"bottom",orderedModifiers:[],options:Object.assign({},qh,g),modifiersData:{},elements:{reference:v,popper:b},attributes:{},styles:{}},x=[],C=!1,E={state:y,setOptions:function(q){var Y=typeof q=="function"?q(y.options):q;W(),y.options=Object.assign({},g,y.options,Y),y.scrollParents={reference:ha(v)?ui(v):v.contextElement?ui(v.contextElement):[],popper:ui(b)};var re=CB($B([].concat(d,y.options.modifiers)));return y.orderedModifiers=re.filter(function(se){return se.enabled}),N(),E.update()},forceUpdate:function(){if(!C){var q=y.elements,Y=q.reference,re=q.popper;if(Yh(Y,re)){y.rects={reference:_B(Y,Hi(re),y.options.strategy==="fixed"),popper:ov(re)},y.reset=!1,y.placement=y.options.placement,y.orderedModifiers.forEach(function(Re){return y.modifiersData[Re.name]=Object.assign({},Re.data)});for(var se=0;se<y.orderedModifiers.length;se++){if(y.reset===!0){y.reset=!1,se=-1;continue}var de=y.orderedModifiers[se],he=de.fn,ge=de.options,Se=ge===void 0?{}:ge,Ae=de.name;typeof he=="function"&&(y=he({state:y,options:Se,name:Ae,instance:E})||y)}}}},update:kB(function(){return new Promise(function(q){E.forceUpdate(),q(y)})}),destroy:function(){W(),C=!0}};if(!Yh(v,b))return E;E.setOptions($).then(function(q){!C&&$.onFirstUpdate&&$.onFirstUpdate(q)});function N(){y.orderedModifiers.forEach(function(q){var Y=q.name,re=q.options,se=re===void 0?{}:re,de=q.effect;if(typeof de=="function"){var he=de({state:y,name:Y,instance:E,options:se}),ge=function(){};x.push(he||ge)}})}function W(){x.forEach(function(q){return q()}),x=[]}return E}}var xB=[Y9,vB,G9,D9,dB,iB,hB,H9,sB],OB=SB({defaultModifiers:xB}),EB=Ln,AB=function(){return EB.Date.now()},TB=AB,PB=/\s/;function MB(s){for(var l=s.length;l--&&PB.test(s.charAt(l)););return l}var IB=MB,NB=IB,jB=/^\s+/;function DB(s){return s&&s.slice(0,NB(s)+1).replace(jB,"")}var BB=DB,FB=BB,Zh=ln,LB=Ws,Xh=NaN,RB=/^[-+]0x[0-9a-f]+$/i,zB=/^0b[01]+$/i,VB=/^0o[0-7]+$/i,HB=parseInt;function UB(s){if(typeof s=="number")return s;if(LB(s))return Xh;if(Zh(s)){var l=typeof s.valueOf=="function"?s.valueOf():s;s=Zh(l)?l+"":l}if(typeof s!="string")return s===0?s:+s;s=FB(s);var c=zB.test(s);return c||VB.test(s)?HB(s.slice(2),c?2:8):RB.test(s)?Xh:+s}var KB=UB,WB=ln,Oc=TB,Jh=KB,GB="Expected a function",qB=Math.max,YB=Math.min;function ZB(s,l,c){var d,f,g,v,b,$,y=0,x=!1,C=!1,E=!0;if(typeof s!="function")throw new TypeError(GB);l=Jh(l)||0,WB(c)&&(x=!!c.leading,C="maxWait"in c,g=C?qB(Jh(c.maxWait)||0,l):g,E="trailing"in c?!!c.trailing:E);function N(Se){var Ae=d,Re=f;return d=f=void 0,y=Se,v=s.apply(Re,Ae),v}function W(Se){return y=Se,b=setTimeout(re,l),x?N(Se):v}function q(Se){var Ae=Se-$,Re=Se-y,Be=l-Ae;return C?YB(Be,g-Re):Be}function Y(Se){var Ae=Se-$,Re=Se-y;return $===void 0||Ae>=l||Ae<0||C&&Re>=g}function re(){var Se=Oc();if(Y(Se))return se(Se);b=setTimeout(re,q(Se))}function se(Se){return b=void 0,E&&d?N(Se):(d=f=void 0,v)}function de(){b!==void 0&&clearTimeout(b),y=0,d=$=f=b=void 0}function he(){return b===void 0?v:se(Oc())}function ge(){var Se=Oc(),Ae=Y(Se);if(d=arguments,f=this,$=Se,Ae){if(b===void 0)return W($);if(C)return clearTimeout(b),b=setTimeout(re,l),N($)}return b===void 0&&(b=setTimeout(re,l)),v}return ge.cancel=de,ge.flush=he,ge}var dw=ZB;const fw=ot(dw);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function XB(){var s=Mt(),l=s.classPrefix,c={small:"".concat(l.value,"-size-s"),medium:"".concat(l.value,"-size-m"),large:"".concat(l.value,"-size-l"),default:"",xs:"".concat(l.value,"-size-xs"),xl:"".concat(l.value,"-size-xl"),block:"".concat(l.value,"-size-full-width")},d={loading:"".concat(l.value,"-is-loading"),loadMore:"".concat(l.value,"-is-load-more"),disabled:"".concat(l.value,"-is-disabled"),focused:"".concat(l.value,"-is-focused"),success:"".concat(l.value,"-is-success"),error:"".concat(l.value,"-is-error"),warning:"".concat(l.value,"-is-warning"),selected:"".concat(l.value,"-is-selected"),active:"".concat(l.value,"-is-active"),checked:"".concat(l.value,"-is-checked"),current:"".concat(l.value,"-is-current"),hidden:"".concat(l.value,"-is-hidden"),visible:"".concat(l.value,"-is-visible"),expanded:"".concat(l.value,"-is-expanded"),indeterminate:"".concat(l.value,"-is-indeterminate")};return{classPrefix:l,sizeClassNames:c,statusClassNames:d,classNames:{size:c,status:d}}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function ga(s,l,c,d){var f=getCurrentInstance(),g=f.emit,v=f.vnode,b=ref(),$=v.props||{},y=Object.prototype.hasOwnProperty.call($,d)||Object.prototype.hasOwnProperty.call($,Oo(d));return y?[s,function(x){g("update:".concat(d),x);for(var C=arguments.length,E=new Array(C>1?C-1:0),N=1;N<C;N++)E[N-1]=arguments[N];c==null||c.apply(void 0,[x].concat(E))}]:(b.value=l,[b,function(x){b.value=x;for(var C=arguments.length,E=new Array(C>1?C-1:0),N=1;N<C;N++)E[N-1]=arguments[N];c==null||c.apply(void 0,[x].concat(E))}])}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var JB="t-display-none-element-refresh";function QB(){var s=ref(0);provide(JB,s),onUpdated(function(){s.value+=1})}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Qh(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function eg(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Qh(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Qh(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var eF=function(s){var l=s.data,c=s.container,d=s.fixedHeight,f=d===void 0?!1:d,g=s.lineHeight,v=g===void 0?30:g,b=s.bufferSize,$=b===void 0?20:b,y=s.threshold,x=y===void 0?100:y,C=reactive({visibleData:[],cachedHeight:[],cachedScrollY:[]}),E=computed(function(){return l.value.length>x}),N=ref(0),W=new Map,q=0,Y=0,re=0,se=0,de=0,he=0,ge=function(){l.value.forEach(function(yy,my){yy.$index=my,f&&(C.cachedScrollY[my]=my*v)}),f||(C.cachedScrollY[l.value.length-1]=void 0)};ge();var Se=computed(function(){var yy=C.cachedHeight,my=yy.length;if(my){var $t=yy.reduce(function(Y$,W$){return Y$+W$||v},0);if(yy.length===l.value.length)return $t;var K$=$t/yy.length;return $t+(l.value.length-yy.length)*K$}return E.value?l.value.length*v:0}),Ae=computed(function(){var yy=C.visibleData,my=yy[0];return my?yy.length===1?0:C.cachedScrollY[my.$index]:0}),Re=function(){he=Math.min(de+q+$*2,l.value.length),C.visibleData=l.value.slice(de,he)},Be=function(){var yy,my=W.get(re);if(my){var $t=my==null||(yy=my.getBoundingClientRect())===null||yy===void 0?void 0:yy.height;C.cachedScrollY[re]=c.value.scrollTop-se,C.cachedHeight[re]=$t;for(var K$=re+1;K$<=((Y$=C.visibleData[C.visibleData.length-1])===null||Y$===void 0?void 0:Y$.$index);K$++){var Y$,W$=W.get(K$),U$=(W$==null?void 0:W$.getBoundingClientRect())||{},hy=U$.height;C.cachedHeight[K$]=hy;var G$=C.cachedScrollY[K$-1]+C.cachedHeight[K$-1];C.cachedScrollY.splice(K$,1,G$)}for(var ky=re-1;ky>=(($y=C.visibleData[0])===null||$y===void 0?void 0:$y.$index);ky--){var $y,rS=W.get(ky),lS=(rS==null?void 0:rS.getBoundingClientRect())||{},bS=lS.height;C.cachedHeight[ky]=bS;var IS=C.cachedScrollY[ky+1]-C.cachedHeight[ky];C.cachedScrollY.splice(ky,1,IS)}if(C.cachedScrollY[0]>0){for(var BS=C.cachedScrollY[0],MS=Math.min(he,l.value.length),zS=0;zS<MS;zS++)C.cachedScrollY.splice(zS,1,C.cachedScrollY[zS]-BS);var LS=C.cachedScrollY[re-1]?C.cachedScrollY[re-1]+se:se;c.value.scrollTop=LS,Y=LS}if(C.cachedScrollY[de]<0){var nS=C.cachedHeight.slice(0,Math.max(0,re)).reduce(function(Z$,dS){return Z$+dS},0)+se;c.value.scrollTop=nS,Y=nS,nS===0&&(re=0,se=0)}nextTick(function(){var Z$=c.value,dS=Z$.scrollTop,ES=Z$.scrollHeight,wy=Z$.clientHeight;if(dS+wy===ES)for(var tS=he-1;tS>=de;tS--)tS===he-1?C.cachedScrollY.splice(tS,1,ES.value-C.cachedHeight[tS]):C.cachedScrollY.splice(tS,1,C.cachedScrollY[tS+1]-C.cachedHeight[tS])})}},Ke=function(){if(E.value){var yy=c.value.scrollTop,my=yy-Y;Y=yy,my+=se;var $t=re;if(my){if(my>=0){for(;$t<l.value.length&&my>(C.cachedHeight[$t]||v);)C.cachedHeight[$t]||(C.cachedHeight[$t]=v),my-=C.cachedHeight[$t],$t++;$t>=l.value.length?(re=l.value.length-1,se=0):(re=$t,se=my);var K$=c.value,Y$=K$.clientHeight,W$=K$.scrollHeight;yy+Y$===W$&&(re=l.value.length-q+1),de<=re-$&&(de=Math.min(l.value.length-q,re-$),de<0&&(de=0))}else{for(;my<0;)$t--,C.cachedHeight[$t]||(C.cachedHeight[$t]=v),my+=C.cachedHeight[$t];$t<0?(re=0,se=0):(re=$t,se=my),Be(),de>re-$&&(de=Math.max(0,re-$))}Re()}}};!f&&watch(N,Be,{flush:"post"});var Lr=function(){E.value&&N.value++};watch(l,function(){ge(),C.visibleData=[],C.cachedScrollY=[],C.cachedHeight=[],Y=0,re=0,se=0,de=0,W.clear(),l.value.length<=x?C.visibleData=l.value:Re(),c.value&&(c.value.scrollTop=0)});var _y=!1,by=function(){_y&&(q=Math.ceil(c.value.offsetHeight/v),Re())};return onMounted(function(){if(!(!window||!window.IntersectionObserver)){var yy=new window.IntersectionObserver(function(my){var $t=my[0];($t.isIntersecting||$t.intersectionRatio)&&(_y=!0,E.value&&by(),yy.unobserve(c.value))});c.value&&yy.observe(c.value)}}),eg(eg({trs:W,scrollHeight:Se},toRefs(C)),{},{translateY:Ae,handleScroll:Ke,handleRowMounted:Lr,refreshContainer:by,fixedHeight:f,calculateScrollY:Be})};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Lt(s,l,c,d){var f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"value",g=getCurrentInstance(),v=g.emit,b=g.vnode,$=ref(),y=b.props||{},x=Object.prototype.hasOwnProperty.call(y,"modelValue")||Object.prototype.hasOwnProperty.call(y,"model-value"),C=Object.prototype.hasOwnProperty.call(y,f)||Object.prototype.hasOwnProperty.call(y,Oo(f));return x?[l,function(E){v("update:modelValue",E);for(var N=arguments.length,W=new Array(N>1?N-1:0),q=1;q<N;q++)W[q-1]=arguments[q];d==null||d.apply(void 0,[E].concat(W))}]:C?[s,function(E){v("update:".concat(f),E);for(var N=arguments.length,W=new Array(N>1?N-1:0),q=1;q<N;q++)W[q-1]=arguments[q];d==null||d.apply(void 0,[E].concat(W))}]:($.value=c,[$,function(E){$.value=E;for(var N=arguments.length,W=new Array(N>1?N-1:0),q=1;q<N;q++)W[q-1]=arguments[q];d==null||d.apply(void 0,[E].concat(W))}])}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var fl=new Set,fo={warn:function(s,l){console.warn("TDesign ".concat(s," Warn: ").concat(l))},warnOnce:function(s,l){var c="TDesign ".concat(s," Warn: ").concat(l);fl.has(c)||(fl.add(c),console.warn(c))},error:function(s,l){console.error("TDesign ".concat(s," Error: ").concat(l))},errorOnce:function(s,l){var c="TDesign ".concat(s," Error: ").concat(l);fl.has(c)||(fl.add(c),console.error(c))},info:function(s,l){console.info("TDesign ".concat(s," Info: ").concat(l))}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function tF(s){return new Promise(function(l){if(!s){l("");return}var c=new FileReader;c.readAsDataURL(s),c.onload=function(d){var f;l((f=d.target)===null||f===void 0?void 0:f.result)}})}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function ns(s){var l=ref("");return watch([s],function(c,d){var f=je(c,1),g=f[0],v=je(d,1),b=v[0];if(b!==g){if(typeof g=="string"){l.value=g;return}tF(g).then(function($){l.value=$})}},{immediate:!0}),{previewUrl:l}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var cv={attach:{type:[String,Function],default:"body"},content:{type:[String,Function]},default:{type:[String,Function]},delay:{type:[Number,Array]},destroyOnClose:Boolean,disabled:Boolean,hideEmptyPopup:Boolean,overlayClassName:{type:[String,Object,Array]},overlayInnerClassName:{type:[String,Object,Array]},overlayInnerStyle:{type:[Boolean,Object,Function]},overlayStyle:{type:[Boolean,Object,Function]},placement:{type:String,default:"top"},popperOptions:{type:Object},showArrow:Boolean,trigger:{type:String,default:"hover",validator:function(s){return s?["hover","click","focus","mousedown","context-menu"].includes(s):!0}},triggerElement:{type:[String,Function]},visible:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultVisible:Boolean,zIndex:{type:Number},onOverlayClick:Function,onScroll:Function,onScrollToBottom:Function,onVisibleChange:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function au(s,l){if(!(typeof window>"u")){var c=window&&window.ResizeObserver;if(c){var d=null,f=function(){!d||!s.value||(d.unobserve(s.value),d.disconnect(),d=null)},g=function(v){d=new ResizeObserver(l),d.observe(v)};s&&watch(s,function(v){f(),v&&g(v)},{immediate:!0,flush:"post"}),onBeforeUnmount(function(){f()})}}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function nF(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!isVNode$1(s)}function vw(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],l=[];return s.forEach(function(c){at(c)?l.push.apply(l,wt(c)):c.type===Fragment$1?l.push.apply(l,wt(vw(c.children))):l.push(c)}),l.filter(function(c){return!(c&&(c.type===Comment||c.type===Fragment$1&&c.children.length===0||c.type===Text$3&&c.children.trim()===""))})}function rF(s,l){return!s&&!l?!1:!!(!s||!l||["width","height","x","y"].some(function(c){return s[c]!==l[c]}))}function pw(s){var l=getCurrentInstance(),c=ref();return onMounted(function(){c.value=s(l)}),onUpdated(function(){var d=s(l);c.value!==d&&(c.value=d)}),c}var aF=defineComponent({name:"TPopupTrigger",props:{forwardRef:Function},emits:["resize"],setup:function(s,l){var c=l.emit,d=l.slots,f=pw(function(v){var b=v.parent.vnode;return b.el.nextElementSibling}),g=ref();return watch(f,function(){var v;(v=s.forwardRef)===null||v===void 0||v.call(s,f.value)}),au(f,function(v){var b=je(v,1),$=b[0].contentRect;g.value=$}),watch(g,function(v,b){rF(v,b)&&c("resize")}),function(){var v,b,$=vw((v=d.default)===null||v===void 0?void 0:v.call(d));return $.length>1||((b=$[0])===null||b===void 0?void 0:b.type)===Text$3?createVNode("span",null,[$]):$[0]}}}),oF=defineComponent({name:"TPopupContent",emits:["resize"],setup:function(s,l){var c=l.emit,d=l.slots,f=pw(function(g){return g.vnode.el.children[0]});return au(f,function(){c("resize")}),function(){return createVNode("div",{style:"position: absolute; top: 0px; left: 0px; width: 100%"},[d.default()])}}}),iF=defineComponent({name:"TPopupContainer",inheritAttrs:!1,props:{parent:Object,visible:Boolean,attach:cv.attach,forwardRef:Function},emits:["resize","contentMounted"],setup:function(s,l){var c=l.emit,d=l.attrs,f=l.slots,g=l.expose,v=ref(),b=ref(!1);function $(){c("resize")}return onMounted(function(){requestAnimationFrame(function(){b.value=s.visible})}),watch(function(){return s.visible},function(y){y&&(b.value=s.visible)}),g({unmountContent:function(){b.value=!1}}),function(){var y,x=function(){return $_()||Xf(s.attach,v.value)};return createVNode(Fragment$1,null,[createVNode(aF,{class:d.class,forwardRef:function(C){s.forwardRef(C),v.value=C},onResize:$},nF(y=f.default())?y:{default:function(){return[y]}}),b.value&&createVNode(Teleport,{disabled:!x(),to:x()},{default:function(){return[createVNode(oF,{onResize:$,onVnodeMounted:function(){return c("contentMounted")}},{default:function(){return[f.content&&f.content()]}})]}})])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function tg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Ec(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?tg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):tg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function lF(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!isVNode$1(s)}var mw="data-td-popup",Dd="data-td-popup-parent";function Ac(s,l){var c=[],d=[Dd,mw];if(!s)return c;return l&&d.unshift(d.pop()),f(s),c;function f(g){var v=document.querySelectorAll("[".concat(d[0],'="').concat(g,'"]'));v.forEach(function(b){c.push(b);var $=b.getAttribute(d[1]);$&&$!==g&&f($)})}}var ng=Symbol();function sF(s){return s.replace(/-(left|top)$/,"-start").replace(/-(right|bottom)$/,"-end")}function uF(s){var l=[];return{add:function(c,d){c&&(Zs(s.value,c,d),l.push(function(){bi(s.value,c,d)}))},clean:function(){l.forEach(function(c){return c==null?void 0:c()}),l.length=0}}}var cF=defineComponent({name:"TPopup",props:Ec(Ec({},cv),{},{expandAnimation:{type:Boolean}}),setup:function(s,l){var c,d=l.expose,f=toRefs(s),g=f.visible,v=f.modelValue,b=Lt(g,v,s.defaultVisible,s.onVisibleChange,"visible"),$=je(b,2),y=$[0],x=$[1],C=Ye(),E=Xt(),N,W,q,Y=ref(null),re=ref(null),se=ref(null),de=ref(null),he=ref(!1),ge=typeof process<"u"&&(c=define_process_env_default)!==null&&c!==void 0&&c.TEST?"":Date.now().toString(36),Se=inject(ng,void 0);provide(ng,{id:ge,assertMouseLeave:hy});var Ae=we("popup"),Re=Ft(),Be=Re.STATUS,Ke=computed(function(){var lS,bS,IS=s.trigger!=="hover"?[0,0]:[].concat((lS=s.delay)!==null&&lS!==void 0?lS:[250,150]);return{show:IS[0],hide:(bS=IS[1])!==null&&bS!==void 0?bS:IS[0]}}),Lr=uF(Y);watch(function(){return[s.trigger,Y.value]},function(){Y.value&&(Lr.clean(),Lr.add({hover:"mouseenter",focus:"focusin","context-menu":"contextmenu",click:"click"}[s.trigger],function(lS){if(!s.disabled){if(lS.type==="contextmenu"&&lS.preventDefault(),(lS.type==="click"||lS.type==="contextmenu")&&y.value){K$(lS);return}$t(lS)}}),Lr.add({hover:"mouseleave",focus:"focusout"}[s.trigger],K$))}),watch(function(){return[s.overlayStyle,s.overlayInnerStyle,re.value]},function(){by(),yy()}),watch(function(){return s.placement},function(){my(),yy()}),watch(function(){return y.value},function(lS){if(lS){Zs(document,"mousedown",U$,!0),s.trigger==="focus"&&A7(Y.value,"keydown",function(bS){var IS,BS=typeof process<"u"&&(IS=define_process_env_default)!==null&&IS!==void 0&&IS.TEST?"27":"Escape";bS.code===BS&&K$(bS)});return}bi(document,"mousedown",U$,!0)}),onUnmounted(function(){my(),Y$(),bi(document,"mousedown",U$,!0)}),d({update:yy,getOverlay:function(){return re.value},getOverlayState:function(){return{hover:he.value}},close:function(){return K$()}});function _y(){var lS=s.overlayStyle;if(!(!Y.value||!re.value)){if(rt(lS))return lS(Y.value,re.value);if(jt(lS))return lS}}function by(){var lS=s.overlayInnerStyle;!Y.value||!re.value||(rt(lS)?ao(re.value,lS(Y.value,re.value)):jt(lS)&&ao(re.value,lS))}function yy(){if(!(!se.value||!y.value)){if(N){if(Y.value.getRootNode()instanceof ShadowRoot)N.state.elements.reference=Y.value,N.update();else{for(var lS=Y.value.getBoundingClientRect(),bS=Y.value;bS&&bS!==document.body;)bS=bS.parentElement;var IS=bS!==document.body||lS.width===0&&lS.height===0;IS?x(!1,{trigger:W$({type:"mouseenter"})}):(N.state.elements.reference=Y.value,N.update())}return}N=OB(Y.value,se.value,Ec({placement:sF(s.placement),onFirstUpdate:function(){nextTick(yy)}},s.popperOptions))}}function my(){if(N){var lS;(lS=N)===null||lS===void 0||lS.destroy(),N=null}if(s.destroyOnClose){var bS;(bS=de.value)===null||bS===void 0||bS.unmountContent()}}function $t(lS){Y$(),W=setTimeout(function(){x(!0,{trigger:W$(lS)})},Ke.value.show)}function K$(lS){Y$(),q=setTimeout(function(){x(!1,{trigger:W$(lS),e:lS})},Ke.value.hide)}function Y$(){clearTimeout(W),clearTimeout(q)}function W$(lS){switch(lS==null?void 0:lS.type){case"mouseenter":return"trigger-element-hover";case"mouseleave":return"trigger-element-hover";case"focusin":return"trigger-element-focus";case"focusout":return"trigger-element-blur";case"click":return"trigger-element-click";case"context-menu":case"keydown":return"keydown-esc";case"mousedown":return"document";default:return"trigger-element-close"}}function U$(lS){var bS,IS;if(!((bS=se.value)!==null&&bS!==void 0&&bS.contains(lS.target))&&!((IS=Y.value)!==null&&IS!==void 0&&IS.contains(lS.target))){var BS=Ac(ge).find(function(MS){return MS.contains(lS.target)});BS&&Ac(BS.getAttribute(Dd),!0).some(function(MS){return MS===se.value})||K$(lS)}}function hy(lS){if(he.value=!1,!(s.trigger!=="hover"||Y.value.contains(lS.target))){var bS=Ac(ge).some(function(IS){var BS=IS.getBoundingClientRect();return lS.x>BS.x&&lS.x<BS.x+BS.width&&lS.y>BS.y&&lS.y<BS.y+BS.height});bS||(K$(lS),Se==null||Se.assertMouseLeave(lS))}}function G$(){he.value=!0,y.value&&s.trigger==="hover"&&Y$()}function ky(lS){var bS;(bS=s.onOverlayClick)===null||bS===void 0||bS.call(s,{e:lS})}var $y=inject("updateScrollTop",void 0);function rS(lS){var bS,IS=lS.target,BS=IS.scrollTop,MS=IS.clientHeight,zS=IS.scrollHeight,LS=fw(function(nS){var Z$;return(Z$=s.onScrollToBottom)===null||Z$===void 0?void 0:Z$.call(s,{e:nS})},100);MS+Math.floor(BS)===zS&&LS(lS),(bS=s.onScroll)===null||bS===void 0||bS.call(s,{e:lS})}return watch(function(){return[y.value,re.value]},function(){y.value&&re.value&&$y&&($y==null||$y(re.value))}),function(){var lS=C("content"),bS=s.hideEmptyPopup&&["",void 0,null].includes(lS),IS=y.value||!s.destroyOnClose?withDirectives(createVNode("div",mergeProps(ne(ne({},mw,ge),Dd,Se==null?void 0:Se.id),{class:[Ae.value,s.overlayClassName],ref:function(BS){return se.value=BS},style:[{zIndex:s.zIndex},_y(),bS&&{visibility:"hidden"}],onClick:ky,onMouseenter:G$,onMouseleave:hy}),[createVNode("div",{class:["".concat(Ae.value,"__content"),ne(ne(ne({},"".concat(Ae.value,"__content--text"),Qe(s.content)),"".concat(Ae.value,"__content--arrow"),s.showArrow),Be.value.disabled,s.disabled),s.overlayInnerClassName],ref:re,onScroll:rS},[lS,s.showArrow&&createVNode("div",{class:"".concat(Ae.value,"__arrow")},null)])]),[[vShow,y.value]]):null;return createVNode(iF,{ref:function(BS){return de.value=BS},forwardRef:function(BS){return Y.value=BS},onContentMounted:function(){if(y.value){yy();var BS=setTimeout(function(){by(),clearTimeout(BS)},60)}},onResize:function(){y.value&&yy()},visible:y.value,attach:s.attach},{content:function(){return createVNode(Transition$1,{name:"".concat(Ae.value,"--animation").concat(s.expandAnimation?"-expand":""),appear:!0,onEnter:yy,onAfterLeave:my},lF(IS)?IS:{default:function(){return[IS]}})},default:function(){return E("default","triggerElement")}})}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Pn=ze(cF);function dF(s){var l=s==null?0:s.length;return l?s[l-1]:void 0}var fF=dF,vF=Gs,pF=x_;function mF(s,l){return l.length<2?s:vF(s,pF(l,0,-1))}var hF=mF,gF=$o,bF=fF,yF=hF,_F=So;function wF(s,l){return l=gF(l,s),s=yF(s,l),s==null||delete s[_F(bF(l))]}var CF=wF,kF=o_;function $F(s){return kF(s)?void 0:s}var SF=$F,rg=bo,xF=Pi,OF=sn,ag=rg?rg.isConcatSpreadable:void 0;function EF(s){return OF(s)||xF(s)||!!(ag&&s&&s[ag])}var AF=EF,TF=Lf,PF=AF;function hw(s,l,c,d,f){var g=-1,v=s.length;for(c||(c=PF),f||(f=[]);++g<v;){var b=s[g];l>0&&c(b)?l>1?hw(b,l-1,c,d,f):TF(f,b):d||(f[f.length]=b)}return f}var MF=hw,IF=MF;function NF(s){var l=s==null?0:s.length;return l?IF(s,1):[]}var jF=NF,DF=jF,BF=u_,FF=c_;function LF(s){return FF(BF(s,void 0,DF),s+"")}var gw=LF,RF=Bi,zF=b_,VF=CF,HF=$o,UF=xo,KF=SF,WF=gw,GF=Yf,qF=1,YF=2,ZF=4,XF=WF(function(s,l){var c={};if(s==null)return c;var d=!1;l=RF(l,function(g){return g=HF(g,s),d||(d=g.length>1),g}),UF(s,GF(s),c),d&&(c=zF(c,qF|YF|ZF,KF));for(var f=l.length;f--;)VF(c,l[f]);return c}),JF=XF;const ba=ot(JF);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var QF={delay:{type:Number},destroyOnClose:{type:Boolean,default:!0},duration:{type:Number},placement:{type:String,default:"top"},showArrow:{type:Boolean,default:!0},theme:{type:String,default:"default",validator:function(s){return s?["default","primary","success","danger","warning","light"].includes(s):!0}}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var eL=function(){var s=ref(0),l=ref(0),c=function(d){s.value=d.clientX,l.value=d.clientY};return zi||(onMounted(function(){window.addEventListener("mousemove",c,{passive:!0})}),onUnmounted(function(){window.removeEventListener("mousemove",c)})),{x:s,y:l}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function og(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Ma(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?og(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):og(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var tL=defineComponent({name:"TTooltip",props:Ma(Ma({},cv),QF),setup:function(s,l){var c=ref(null),d=ref(null),f=toRefs(s),g=f.visible,v=f.modelValue,b=Lt(g,v,s.defaultVisible,s.onVisibleChange,"visible"),$=je(b,2),y=$[0],x=$[1],C=getCurrentInstance(),E=ref(s.visible||s.defaultVisible),N=we(),W=Ye(),q=Xt(),Y=eL(),re=Y.x,se=ref(re.value);onMounted(function(){s.duration&&E.value&&(c.value=setTimeout(function(){x(!1,{}),clearTimeout(c.value),c.value=null},s.duration))});var de=function(Re,Be){c.value&&(Be==null?void 0:Be.trigger)!=="document"||(Re&&(se.value=re.value),x(Re,Be))},he=computed(function(){return["".concat(N.value,"-tooltip"),ne({},"".concat(N.value,"-tooltip--").concat(s.theme),s.theme),s.overlayClassName]}),ge=computed(function(){return Ma(Ma({},(C==null?void 0:C.vnode.props)||{}),{},{placement:s.placement==="mouse"?"bottom-left":s.placement,showArrow:s.placement==="mouse"?!1:s.showArrow,overlayClassName:he.value,onVisibleChange:de,disabled:s.disabled})}),Se=computed(function(){if(s.placement!=="mouse"||se.value===0)return s.overlayInnerStyle;var Re=function(Be){return{transform:"translateX(".concat(se.value-Be.getBoundingClientRect().left,"px)")}};return s.overlayInnerStyle?function(Be,Ke){return Ma(Ma({},Re(Be)),rt(s.overlayInnerStyle)?s.overlayInnerStyle(Be,Ke):s.overlayInnerStyle)}:Re});watch(function(){return E.value},function(){c.value&&!E.value&&(clearTimeout(c.value),c.value=null)});var Ae=function(){var Re,Be;(Re=d.value)===null||Re===void 0||(Be=Re.update)===null||Be===void 0||Be.call(Re)};return l.expose({updatePopper:Ae}),function(){var Re=W("content");return!Re&&!s.content?q("default","triggerElement"):createVNode(Pn,mergeProps(ba(ge.value,["content","default"]),{ref:d,overlayInnerStyle:Se.value,visible:y.value}),{default:function(){return[q("default","triggerElement")]},content:function(){return Re}})}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Ja=ze(tL);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var nL={active:Boolean,content:{type:[String,Function],default:""},disabled:Boolean,divider:Boolean,prefixIcon:{type:Function},theme:{type:String,default:"default",validator:function(s){return s?["default","success","warning","error"].includes(s):!0}},value:{type:[String,Number,Object]},onClick:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function ig(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function rL(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?ig(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):ig(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function dv(s,l){for(var c=rL({},s),d=0;d<l.length;d++){var f=l[d];delete c[f]}return c}function lg(s){return Vt(s)?"".concat(s,"px"):s}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function sg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function ug(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?sg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):sg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var Bd=defineComponent({name:"TDropdownItem",props:ug(ug({},nL),{},{maxColumnWidth:{type:[String,Number],default:100},minColumnWidth:{type:[String,Number],default:10},isSubmenu:Boolean}),setup:function(s){var l=Ye(),c=Xt(),d=ref();eu(s.isSubmenu?null:d);var f=l("prefixIcon"),g=we("dropdown__item"),v=function(b){var $;s.disabled||($=s.onClick)===null||$===void 0||$.call(s,s.value,{e:b})};return function(){var b=c("default","content"),$=[g.value,"".concat(g.value,"--theme-").concat(s.theme),ne(ne({},"".concat(g.value,"--active"),s.active),"".concat(g.value,"--disabled"),s.disabled)];return createVNode("li",{class:$,onClick:v,style:{maxWidth:lg(s.maxColumnWidth),minWidth:lg(s.minColumnWidth)},ref:d},[s.prefixIcon?createVNode("div",{class:"".concat(g.value,"-icon")},[f]):null,b])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var bw={direction:{type:String,default:"right",validator:function(s){return s?["left","right"].includes(s):!0}},disabled:Boolean,hideAfterItemClick:{type:Boolean,default:!0},maxColumnWidth:{type:[String,Number],default:100},maxHeight:{type:Number,default:300},minColumnWidth:{type:[String,Number],default:10},options:{type:Array,default:function(){return[]}},panelBottomContent:{type:[String,Function]},panelTopContent:{type:[String,Function]},placement:{type:String,default:"bottom-left",validator:function(s){return s?["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","left-top","left-bottom","right-top","right-bottom"].includes(s):!0}},popupProps:{type:Object},trigger:{type:String,default:"hover",validator:function(s){return s?["hover","click","focus","context-menu"].includes(s):!0}},onClick:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function cg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function dg(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?cg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):cg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var yw=defineComponent({name:"TDropdownMenu",props:dg({},bw),setup:function(s){var l=we("dropdown"),c=we("dropdown__menu"),d=reactive({}),f=ref(null),g=ref(),v=ref(!1),b=Qn({ChevronRightIcon:RD}),$=b.ChevronRightIcon,y=function(N){var W,q,Y=N.data,re=N.context;Y==null||(W=Y.onClick)===null||W===void 0||W.call(Y,Y,re),(q=s.onClick)===null||q===void 0||q.call(s,Y,re)},x=function(N,W){var q=N.target.scrollTop;d[W]=q};onMounted(function(){if(g.value){var N,W=parseInt((N=window)===null||N===void 0?void 0:N.getComputedStyle(g.value).height,10);W>=s.maxHeight&&(v.value=!0)}f.value=document.querySelector(".".concat(l.value,"__item")).scrollHeight+2});var C=function(N){return rt(N)?N(h):N},E=function(N,W){var q,Y=[],re;return(q=N.forEach)===null||q===void 0||q.call(N,function(se,de){var he=dg({},se),ge=de-Math.ceil(d[W]/f.value),Se=ge>=0?ge:de;he.children?(he.children=E(he.children,W+1),re=createVNode("div",{key:de},[createVNode(Bd,{style:he.style,class:["".concat(l.value,"__item"),"".concat(l.value,"__item--suffix"),he.class],value:he.value,theme:he.theme,active:he.active,prefixIcon:he.prefixIcon,disabled:he.disabled,minColumnWidth:s.minColumnWidth,maxColumnWidth:s.maxColumnWidth,isSubmenu:!0},{default:function(){return[createVNode("div",{class:"".concat(l.value,"__item-content")},[createVNode("span",{class:"".concat(l.value,"__item-text")},[C(he.content)]),createVNode($,{class:"".concat(l.value,"__item-direction"),size:"16"},null)]),createVNode("div",{class:["".concat(l.value,"__submenu-wrapper"),ne({},"".concat(l.value,"__submenu-wrapper--").concat(s.direction),s.direction)],style:{position:"absolute",top:"".concat(Se*f.value,"px")}},[createVNode("div",{class:["".concat(l.value,"__submenu"),ne({},"".concat(l.value,"__submenu--disabled"),he.disabled)],style:{position:"static",maxHeight:"".concat(s.maxHeight,"px")},onScroll:function(Ae){return x(Ae,W+1)}},[createVNode("ul",null,[he.children])])])]}}),he.divider?createVNode(es,null,null):null])):re=createVNode("div",{key:de},[createVNode(Bd,{style:he.style,class:["".concat(l.value,"__item"),he.class],value:he.value,theme:he.theme,active:he.active,prefixIcon:he.prefixIcon,disabled:he.disabled,minColumnWidth:s.minColumnWidth,maxColumnWidth:s.maxColumnWidth,onClick:he.disabled||he.children?function(){return null}:function(Ae,Re){return y({data:he,context:Re})}},{default:function(){return[createVNode("span",{class:"".concat(l.value,"__item-text")},[C(he.content)])]}}),he.divider?createVNode(es,null,null):null]),Y.push(re)}),Y};return function(){return createVNode("div",{class:[c.value,"".concat(c.value,"--").concat(s.direction),ne({},"".concat(c.value,"--overflow"),v.value)],style:{maxHeight:"".concat(s.maxHeight,"px")},ref:g,onScroll:function(N){return x(N,0)}},[E(s.options,0)])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function fg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Tc(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?fg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):fg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var jl=function(s){var l,c,d;if(!s)return[];if(((l=s[0])===null||l===void 0||(l=l.type)===null||l===void 0?void 0:l.name)==="TDropdownMenu"){var f,g,v=(f=s[0])===null||f===void 0||(f=f.children)===null||f===void 0||(g=f.default)===null||g===void 0?void 0:g.call(f);if(at(v))return jl(v)}return at(s)?(s=s.reduce(function(b,$){return b=b.concat(at($.children)?$.children:$),b},[]),s.map(function(b){var $,y,x,C,E,N,W,q,Y,re,se=($=b.children)===null||$===void 0||(y=$.content)===null||y===void 0?void 0:y.call($),de=((x=b.children)===null||x===void 0||(C=x.prefixIcon)===null||C===void 0?void 0:C.call(x))||((E=b.children)===null||E===void 0||(N=E["prefix-icon"])===null||N===void 0?void 0:N.call(E)),he=(W=b.children)===null||W===void 0||(q=W.default)===null||q===void 0?void 0:q.call(W),ge=he==null||(Y=he.filter)===null||Y===void 0?void 0:Y.call(he,function(Re){var Be;return!["TDropdownMenu","TDropdownItem"].includes((Be=Re.type)===null||Be===void 0?void 0:Be.name)}),Se=he==null||(re=he.filter)===null||re===void 0?void 0:re.call(he,function(Re){var Be;return!Qe(Re.children)&&["TDropdownMenu","TDropdownItem"].includes((Be=Re.type)===null||Be===void 0?void 0:Be.name)}),Ae=Object.keys(b.props||{}).reduce(function(Re,Be){var Ke;return b.props[Be]===""&&((Ke=b.type)===null||Ke===void 0?void 0:Ke.name)==="TDropdownItem"&&["active","divider","disabled"].includes(Be)?Re[io(Be)]=!0:Re[io(Be)]=b.props[Be],Re},{});return Tc(Tc(Tc({content:se||ge||he},Ae),de?{prefixIcon:function(){return de}}:{}),{},{children:(Se==null?void 0:Se.length)>0?jl(Se):null})}).filter(function(b){return!!b.content})):at((c=s[0])===null||c===void 0?void 0:c.children)?jl((d=s[0])===null||d===void 0?void 0:d.children):[]};function aL(s){var l,c,d,f,g=nv(),v=getCurrentInstance(),b=((l=g("DropdownMenu"))===null||l===void 0||(l=l[0])===null||l===void 0||(l=l.children)===null||l===void 0||(c=l.default)===null||c===void 0?void 0:c.call(l))||((d=v.slots)===null||d===void 0||(f=d.dropdown)===null||f===void 0?void 0:f.call(d)),$=computed(function(){return s.options&&s.options.length>0?s.options:jl(b)});return $}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function vg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Pc(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?vg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):vg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var oL=defineComponent({name:"TDropdown",props:bw,setup:function(s,l){var c=l.attrs,d=Ye(),f=we("dropdown"),g=ref(null),v=ref(!1),b=computed(function(){var x,C,E=(x=s.popupProps)===null||x===void 0?void 0:x.delay;return Vt(E)?E+10:at(E)?((C=E[1])!==null&&C!==void 0?C:E[0])+10:160}),$=function(x,C){var E;if(s.hideAfterItemClick){var N,W,q,Y;setTimeout(function(){return v.value=!1},b.value),(N=s.popupProps)===null||N===void 0||(W=N.onVisibleChange)===null||W===void 0||W.call(N,!1,C),(q=s.popupProps)===null||q===void 0||(Y=q["on-visible-change"])===null||Y===void 0||Y.call(q,!1,C)}s==null||(E=s.onClick)===null||E===void 0||E.call(s,x,C)},y=function(x,C){var E,N,W,q;v.value=x,(E=s.popupProps)===null||E===void 0||(N=E.onVisibleChange)===null||N===void 0||N.call(E,x,C),(W=s.popupProps)===null||W===void 0||(q=W["on-visible-change"])===null||q===void 0||q.call(W,x,C)};return function(){var x,C,E=(x=d("default"))===null||x===void 0?void 0:x[0],N=aL(s),W=Pc(Pc(Pc({},c),{},{disabled:s.disabled,placement:s.placement,trigger:s.trigger},ba(s.popupProps,["onVisibleChange","on-visible-change"])),{},{overlayInnerClassName:[f.value,(C=s.popupProps)===null||C===void 0?void 0:C.overlayInnerClassName]});return createVNode(Pn,mergeProps({destroyOnClose:!0,ref:g,visible:v.value,onVisibleChange:y,expandAnimation:!0},W),{default:function(){return[E]},content:function(){return createVNode(Fragment$1,null,[d("panelTopContent"),createVNode(yw,mergeProps(ba(s,"onClick"),{options:N.value,onClick:$}),null),d("panelBottomContent")])}})}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Ui=ze(oL),Vr=ze(Bd),wr=ze(yw);function fv(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function pg(s,l){for(var c=0;c<l.length;c++){var d=l[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(s,xy(d.key),d)}}function vv(s,l,c){return l&&pg(s.prototype,l),c&&pg(s,c),Object.defineProperty(s,"prototype",{writable:!1}),s}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var iL=defineComponent({name:"TFakeArrow",props:{isActive:{type:Boolean},overlayClassName:{type:[String,Object,Array]},overlayStyle:{type:Object||String}},setup:function(s){var l=we("fake-arrow"),c=computed(function(){return[l.value,ne({},"".concat(l.value,"--active"),s.isActive),s.overlayClassName]});return{classes:c}},render:function(){return createVNode("svg",{class:this.classes,width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:this.overlayStyle},[createVNode("path",{d:"M3.75 5.7998L7.99274 10.0425L12.2361 5.79921",stroke:"black","stroke-opacity":"0.9","stroke-width":"1.3"},null)])}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var lL={align:{type:String,default:"left",validator:function(s){return s?["left","center","right"].includes(s):!0}},allowInputOverMax:Boolean,autoWidth:Boolean,autocomplete:{type:String,default:void 0},autofocus:Boolean,borderless:Boolean,clearable:Boolean,disabled:{type:Boolean,default:void 0},format:{type:Function},inputClass:{type:[String,Object,Array]},label:{type:[String,Function]},maxcharacter:{type:Number},maxlength:{type:[String,Number]},name:{type:String,default:""},placeholder:{type:String,default:void 0},prefixIcon:{type:Function},readonly:{type:Boolean,default:void 0},showClearIconOnEmpty:Boolean,showLimitNumber:Boolean,size:{type:String,default:"medium",validator:function(s){return s?["small","medium","large"].includes(s):!0}},spellCheck:Boolean,status:{type:String,default:void 0,validator:function(s){return s?["default","success","warning","error"].includes(s):!0}},suffix:{type:[String,Function]},suffixIcon:{type:Function},tips:{type:[String,Function]},type:{type:String,default:"text",validator:function(s){return s?["text","number","url","tel","password","search","submit","hidden"].includes(s):!0}},value:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},defaultValue:{type:[String,Number]},onBlur:Function,onChange:Function,onClear:Function,onClick:Function,onCompositionend:Function,onCompositionstart:Function,onEnter:Function,onFocus:Function,onKeydown:Function,onKeypress:Function,onKeyup:Function,onMouseenter:Function,onMouseleave:Function,onPaste:Function,onValidate:Function,onWheel:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Ki(s){var l=getCurrentInstance(),c=computed(function(){return l.props.readonly}),d=inject("formReadonly",Object.create(null));return computed(function(){var f,g,v;return nn(s==null||(f=s.beforeReadonly)===null||f===void 0?void 0:f.value)?s.beforeReadonly.value:nn(c==null?void 0:c.value)?c.value:nn(s==null||(g=s.afterReadonly)===null||g===void 0?void 0:g.value)?s.afterReadonly.value:nn((v=d.readonly)===null||v===void 0?void 0:v.value)?d.readonly.value:!1})}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var _w=function(){var s=we();return computed(function(){var l="".concat(s.value,"-form"),c="".concat(s.value,"-input"),d="".concat(s.value,"-is");return{form:l,label:"".concat(l,"__label"),labelTop:"".concat(l,"__label--top"),inline:"".concat(l,"-inline"),formItem:"".concat(l,"__item"),formItemWithHelp:"".concat(l,"__item-with-help"),formItemWithExtra:"".concat(l,"__item-with-extra"),controls:"".concat(l,"__controls"),controlsContent:"".concat(l,"__controls-content"),status:"".concat(l,"__status"),extra:"".concat(c,"__extra"),help:"".concat(c,"__help"),success:"".concat(d,"-success"),successBorder:"".concat(l,"--success-border"),error:"".concat(d,"-error"),warning:"".concat(d,"-warning")}})},or=function(s){return s.TO_BE_VALIDATED="not",s.SUCCESS="success",s.FAIL="fail",s}(or||{}),ww=Symbol("FormProvide"),pv=Symbol("FormItemProvide");/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Cw(s){var l=function(v){var b=s.value,$=b.allowInputOverMax,y=b.maxlength,x=b.maxcharacter;if(!(y||x)||$||!v)return v;if(y)return FP(v,y);if(x){var C=ca(v,x);if(jt(C))return C.characters}},c=computed(function(){var v=s.value,b=v.maxlength,$=v.maxcharacter,y=v.value;if(Vt(y))return String(y);if(b&&$&&fo.warn("Input","Pick one of maxlength and maxcharacter please."),b){var x=y!=null&&y.length?BP(y):0;return"".concat(x,"/").concat(b)}return $?"".concat(ca(y||""),"/").concat($):""}),d=computed(function(){if(c.value){var v=c.value.split("/"),b=je(v,2),$=b[0],y=b[1];return Number($)>Number(y)?"error":""}return""}),f=computed(function(){var v=s.value.status;return v||d.value}),g=function(){var v,b;(v=(b=s.value).onValidate)===null||v===void 0||v.call(b,{error:d.value?"exceed-maximum":void 0})};return watch(d,g),onMounted(function(){d.value&&g()}),{tStatus:f,limitNumber:c,getValueByLimitNumber:l}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Dl(s,l){return l==="number"?s||s===0?Number(s):void 0:s}function sL(s,l){var c=toRefs(s),d=c.value,f=c.modelValue,g=ref(),v=ref(!1),b=ref(),$=ref(null),y=ref(),x=Jt(),C=Lt(d,f,s.defaultValue,s.onChange),E=je(C,2),N=E[0],W=E[1],q=ref(!1),Y=ref(!1),re=ref(s.type),se=ref(null),de=computed(function(){return{value:[void 0,null].includes(N.value)?void 0:String(N.value),status:s.status,maxlength:Number(s.maxlength),maxcharacter:s.maxcharacter,allowInputOverMax:s.allowInputOverMax,onValidate:s.onValidate}}),he=Cw(de),ge=he.limitNumber,Se=he.getValueByLimitNumber,Ae=he.tStatus,Re=computed(function(){return(N.value&&!x.value&&s.clearable&&!s.readonly||s.showClearIconOnEmpty)&&q.value}),Be=function(){var $y;Y.value=!0,($y=se.value)===null||$y===void 0||$y.focus()},Ke=function(){var $y;Y.value=!1,($y=se.value)===null||$y===void 0||$y.blur()},Lr=function($y){var rS;q.value&&Y.value||(g.value=N.value,!s.disabled&&(Y.value=!0,(rS=s.onFocus)===null||rS===void 0||rS.call(s,N.value,{e:$y})))},_y=function($y){var rS,lS=$y.e,bS=s.type==="number"?void 0:"";W(bS,{e:lS,trigger:"clear"}),(rS=s.onClear)===null||rS===void 0||rS.call(s,{e:lS})},by=function($y){y.value=$y.target},yy=function(){if(!x.value){var $y=re.value==="password"?"text":"password";re.value=$y}},my=function(){var $y=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",rS=se.value;if(rS){var lS=String($y);rS.value&&rS.value!==lS&&(rS.value=lS)}},$t=function($y){var rS,lS=$y.target,bS=lS.value;s.type!=="number"&&typeof N.value=="string"&&bS.length>((rS=N.value)===null||rS===void 0?void 0:rS.length)&&(bS=Se(bS)),W(Dl(bS,s.type),{e:$y,trigger:"input"}),nextTick(function(){my(N.value)})},K$=function($y){var rS=$y.inputType&&$y.inputType==="insertCompositionText",lS=$y.currentTarget.value;if(rS||v.value){b.value=lS;return}$t($y)},Y$=function(){var $y,rS=y.value;if(!rS||!rS.tagName||!(($y=$.value)!==null&&$y!==void 0&&$y.$el)||!["path","svg"].includes(rS.tagName))return!1;for(;rS;){var lS;if(((lS=$.value)===null||lS===void 0?void 0:lS.$el)===rS)return!0;rS=rS.parentNode}return!1},W$=inject(pv,void 0),U$=function($y){if(Y$())Be();else{var rS;s.format&&(g.value=typeof N.value=="number"||s.type==="number"?N.value:s.format(N.value)),Y.value=!1,(rS=s.onBlur)===null||rS===void 0||rS.call(s,N.value,{e:$y}),W$==null||W$.handleBlur()}},hy=function($y){var rS;v.value=!1,b.value="",$t($y),(rS=s.onCompositionend)===null||rS===void 0||rS.call(s,String(N.value),{e:$y})},G$=function($y){var rS;v.value=!0;var lS=$y.currentTarget.value;b.value=lS,(rS=s.onCompositionstart)===null||rS===void 0||rS.call(s,String(N.value),{e:$y})},ky=function($y){var rS,lS;(rS=se.value)===null||rS===void 0||rS.focus(),(lS=s.onClick)===null||lS===void 0||lS.call(s,{e:$y})};return watch(function(){return s.autofocus},function($y){$y===!0&&nextTick(function(){var rS;(rS=se.value)===null||rS===void 0||rS.focus()})},{immediate:!0}),watch(N,function($y,rS){var lS=s.type==="number";rS===void 0&&s.format&&typeof $y!="number"&&!lS?g.value=s.format($y):g.value=$y;var bS=typeof $y=="number"?$y:Se($y);bS!==$y&&!lS&&W(bS,{trigger:"initial"})},{immediate:!0}),watch(function(){return s.type},function($y){re.value=$y},{immediate:!0}),l({inputRef:se,focus:Be,blur:Ke}),{isHover:q,focused:Y,renderType:re,showClear:Re,inputRef:se,clearIconRef:$,inputValue:g,isComposition:v,compositionValue:b,limitNumber:ge,tStatus:Ae,emitFocus:Lr,formatAndEmitBlur:U$,onHandleCompositionend:hy,onHandleCompositionstart:G$,onRootClick:ky,emitPassword:yy,handleInput:K$,emitClear:_y,onClearIconMousedown:by,innerValue:N}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function uL(s,l){var c=function(x){if(!s.disabled){var C=x.code,E=Dl(x.currentTarget.value,s.type);if(/enter/i.test(C)||/enter/i.test(x.key)){var N;(N=s.onEnter)===null||N===void 0||N.call(s,E,{e:x})}else{var W;(W=s.onKeydown)===null||W===void 0||W.call(s,E,{e:x})}}},d=function(x){var C;if(!s.disabled){var E=Dl(x.currentTarget.value,s.type);(C=s.onKeyup)===null||C===void 0||C.call(s,E,{e:x})}},f=function(x){var C;if(!s.disabled){var E=Dl(x.currentTarget.value,s.type);(C=s.onKeypress)===null||C===void 0||C.call(s,E,{e:x})}},g=function(x){var C;if(!s.disabled){var E=x.clipboardData||window.clipboardData;(C=s.onPaste)===null||C===void 0||C.call(s,{e:x,pasteValue:E==null?void 0:E.getData("text/plain")})}},v=function(x){return l.value=x},b=function(x){var C;return(C=s.onWheel)===null||C===void 0?void 0:C.call(s,{e:x})},$=function(x){var C;v(!0),(C=s.onMouseenter)===null||C===void 0||C.call(s,{e:x})},y=function(x){var C;v(!1),(C=s.onMouseleave)===null||C===void 0||C.call(s,{e:x})};return{isHover:l,handleKeydown:c,handleKeyUp:d,handleKeypress:f,onHandlePaste:g,onHandleMousewheel:b,onInputMouseenter:$,onInputMouseleave:y}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var cL=100;function dL(s,l,c){var d=toRefs(s),f=d.autoWidth,g=d.placeholder,v=ref(null),b=ref(null),$=function(){if(!(!v.value||!l.value)){var x=v.value.getBoundingClientRect(),C=x.width;l.value.style.width="".concat(C||0,"px")}};au(l,function(){f.value&&(b.value=setTimeout(function(){$(),clearTimeout(b.value)},cL))}),onBeforeUnmount(function(){clearTimeout(b.value)});var y=function(){watch([c,g],function(){f.value&&nextTick(function(){$()})},{immediate:!0})};return onMounted(function(){f.value&&y()}),{inputPreRef:v}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var fL=["isHover","tStatus","inputRef","renderType","showClear","focused","inputValue","isComposition","compositionValue","innerValue","limitNumber"];function mg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function hg(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?mg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):mg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function gg(s){var l={};return Object.keys(s).forEach(function(c){ma(s[c])||(l[c]=s[c])}),l}var vL=defineComponent({name:"TInput",props:hg(hg({},lL),{},{showInput:{type:Boolean,default:!0},keepWrapperWidth:{type:Boolean,default:!1}}),setup:function(s,l){var c=l.expose,d=Mt("input"),f=d.globalConfig,g=Qn({BrowseIcon:ND,BrowseOffIcon:MD,CloseCircleFilledIcon:ev}),v=g.BrowseIcon,b=g.BrowseOffIcon,$=g.CloseCircleFilledIcon,y=Ki(),x=Jt(),C=we("input"),E=we("input__wrap"),N=we("input__tips"),W=Ft(),q=W.STATUS,Y=W.SIZE,re=we(),se=Ye(),de=sL(s,c),he=de.isHover,ge=de.tStatus,Se=de.inputRef,Ae=de.renderType,Re=de.showClear,Be=de.focused,Ke=de.inputValue,Lr=de.isComposition,_y=de.compositionValue,by=de.innerValue,yy=de.limitNumber,my=Ri(de,fL),$t=dL(s,Se,by),K$=$t.inputPreRef,Y$=uL(s,he),W$=computed(function(){var ky;return(ky=s.placeholder)!==null&&ky!==void 0?ky:f.value.placeholder}),U$=computed(function(){var ky;return gg({autofocus:s.autofocus,disabled:x.value,readonly:y.value,placeholder:W$.value,name:s.name||void 0,type:Ae.value,autocomplete:(ky=s.autocomplete)!==null&&ky!==void 0?ky:f.value.autocomplete||void 0,unselectable:y.value?"on":void 0,spellcheck:s.spellCheck})}),hy=computed(function(){return[E.value,ne({},"".concat(C.value,"--auto-width"),s.autoWidth&&!s.keepWrapperWidth)]}),G$=gg({onFocus:my.emitFocus,onBlur:my.formatAndEmitBlur,onKeydown:Y$.handleKeydown,onKeyup:Y$.handleKeyUp,onKeypress:Y$.handleKeypress,onPaste:Y$.onHandlePaste,onCompositionend:my.onHandleCompositionend,onCompositionstart:my.onHandleCompositionstart});return function(){var ky,$y,rS=se("prefixIcon"),lS=se("suffixIcon"),bS=se("passwordIcon"),IS=se("label",{silent:!0}),BS=se("suffix"),MS=yy.value&&s.showLimitNumber?createVNode("div",{class:["".concat(re.value,"-input__limit-number"),ne({},"".concat(re.value,"-is-disabled"),x.value)]},[yy.value]):null,zS=IS?createVNode("div",{class:"".concat(C.value,"__prefix")},[IS]):null,LS=BS||MS?createVNode("div",{class:"".concat(C.value,"__suffix")},[BS,MS]):null;if(s.type==="password"){var nS=[ne({},"".concat(C.value,"__suffix-clear"),!x.value)];Ae.value==="password"?lS=createVNode(b,{class:nS,onClick:my.emitPassword},null):Ae.value==="text"&&(lS=createVNode(v,{class:nS,onClick:my.emitPassword},null))}Re.value&&(s.type==="password"?bS=createVNode($,{ref:my.clearIconRef,class:"".concat(C.value,"__suffix-clear"),onClick:my.emitClear,onMousedown:my.onClearIconMousedown},null):lS=createVNode($,{ref:my.clearIconRef,class:"".concat(C.value,"__suffix-clear"),onClick:my.emitClear,onMousedown:my.onClearIconMousedown},null));var Z$=[C.value,s.inputClass,ne(ne(ne(ne(ne(ne(ne(ne(ne(ne({},Y.value[s.size],s.size!=="medium"),q.value.disabled,x.value),q.value.focused,x.value?!1:Be.value),"".concat(re.value,"-is-").concat(ge.value),ge.value&&ge.value!=="default"),"".concat(re.value,"-align-").concat(s.align),s.align!=="left"),"".concat(re.value,"-is-readonly"),y.value),"".concat(C.value,"--prefix"),rS||zS),"".concat(C.value,"--suffix"),lS||LS),"".concat(C.value,"--borderless"),s.borderless),"".concat(C.value,"--focused"),Be.value)],dS=se("tips"),ES=[N.value,"".concat(re.value,"-tips"),"".concat(re.value,"-is-").concat(ge.value||"default")];return withDirectives(createVNode("div",{class:hy.value},[createVNode("div",{class:Z$,onClick:my.onRootClick,onMouseenter:Y$.onInputMouseenter,onMouseleave:Y$.onInputMouseleave,onWheel:Y$.onHandleMousewheel},[rS?createVNode("span",{class:["".concat(C.value,"__prefix"),"".concat(C.value,"__prefix-icon")]},[rS]):null,zS,createVNode("input",mergeProps({class:["".concat(C.value,"__inner"),ne({},"".concat(C.value,"--soft-hidden"),!s.showInput)]},U$.value,G$,{ref:Se,value:Lr.value?(ky=_y.value)!==null&&ky!==void 0?ky:"":($y=Ke.value)!==null&&$y!==void 0?$y:"",onInput:function(wy){return my.handleInput(wy)}}),null),s.autoWidth&&createVNode("span",{ref:K$,class:"".concat(re.value,"-input__input-pre")},[by.value||W$.value]),LS,bS?createVNode("span",{class:["".concat(C.value,"__suffix"),"".concat(C.value,"__suffix-icon"),"".concat(C.value,"__clear")]},[bS]):null,lS?createVNode("span",{class:["".concat(C.value,"__suffix"),"".concat(C.value,"__suffix-icon"),ne({},"".concat(C.value,"__clear"),Re.value)]},[lS]):null]),dS&&createVNode("div",{class:ES},[dS])]),[[vShow,s.type!=="hidden"]])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var pL={separate:Boolean};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var mL=defineComponent({name:"TInputGroup",props:pL,setup:function(s){var l=we("input-group"),c=Ye(),d=computed(function(){return[l.value,ne({},"".concat(l.value,"--separate"),s.separate)]});return function(){return createVNode("div",{class:d.value},[c("default")])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var er=ze(vL);ze(mL);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var hL={align:{type:String,validator:function(s){return s?["left","center","right"].includes(s):!0}},allowInputOverLimit:{type:Boolean,default:!0},autoWidth:Boolean,decimalPlaces:{type:Number,default:void 0},disabled:{type:Boolean,default:void 0},format:{type:Function},inputProps:{type:Object},label:{type:[String,Function]},largeNumber:Boolean,max:{type:[String,Number],default:1/0},min:{type:[String,Number],default:-1/0},placeholder:{type:String,default:void 0},readonly:{type:Boolean,default:void 0},size:{type:String,default:"medium",validator:function(s){return s?["small","medium","large"].includes(s):!0}},status:{type:String,default:"default",validator:function(s){return s?["default","success","warning","error"].includes(s):!0}},step:{type:[String,Number],default:1},suffix:{type:[String,Function]},theme:{type:String,default:"row",validator:function(s){return s?["column","row","normal"].includes(s):!0}},tips:{type:[String,Function]},value:{type:[String,Number],default:void 0},modelValue:{type:[String,Number],default:void 0},defaultValue:{type:[String,Number]},onBlur:Function,onChange:Function,onEnter:Function,onFocus:Function,onKeydown:Function,onKeypress:Function,onKeyup:Function,onValidate:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Qa(s){return new Array(s).fill(0).join("")}function kw(s){if(!s)return!0;if(Vt(s))return!Number.isNaN(s);var l=/^[0-9|e|E|-]+\.*[0-9|e|E|-]*$/.test(s);if(!l)return!1;for(var c=0,d=0,f=0,g=0,v=s.length;g<v;g++)if(s[g]==="."&&(f+=1,f>1)||/(e|E)+/.test(s[g])&&(c+=1,c>1)||s[g]==="-"&&(d+=1,d>2))return!1;return!0}function dn(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return s.indexOf(".")!==-1?(fo.error("InputNumber","num is not a integer number."),s):!s||s==="0"&&l?"":s==="0"?s:(l?s.replace(/0+$/,""):s.replace(/^0+/,""))||"0"}function Mc(s,l){for(var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,d=dn(s,c),f=dn(l,c),g=d.length>f.length,v=g?d:f,b=g?f:d,$=[],y=[],x=c?0:v.length-b.length,C=c?b.length:v.length,E=C-1;E>=0;E--){var N=E-x,W=Number(v[E])+(Number(b[N])||0)+(y[E]||0);W>=10&&(y[E-1]=1),$.unshift(String(W%10))}return y[-1]&&$.unshift("1"),c?$.concat(v.slice(C,v.length)).join(""):$.join("")}function vo(s,l){var c=s.split("."),d=je(c,2),f=d[0],g=f===void 0?"0":f,v=d[1],b=v===void 0?"0":v,$=l.split("."),y=je($,2),x=y[0],C=x===void 0?"0":x,E=y[1],N=E===void 0?"0":E,W=Mc(g,C);if(b==="0"&&N==="0")return W;var q=dn(b,!0),Y=dn(N,!0),re=Mc(q,Y,!0),se=re.length;return se>q.length&&se>Y.length?[dn(Mc(W,"1")),dn(re.slice(1),!0)].filter(function(de){return de}).join("."):[dn(W),dn(re,!0)].filter(function(de){return de}).join(".")}function $w(s,l){var c=dn(s),d=dn(l);if(c.length===d.length){for(var f=0,g=c.length;f<g;f++){if(c[f]>d[f])return 1;if(c[f]<d[f])return-1}return 0}return c.length>d.length?1:-1}function Sw(s,l){for(var c=s&&s!=="0"?s.replace(/0+$/,""):"0",d=l&&l!=="0"?l.replace(/0+$/,""):"0",f=Math.max(c.length,d.length),g=0,v=f;g<v;g++){if((c[g]||0)>(d[g]||0))return 1;if((c[g]||0)<(d[g]||0))return-1}return 0}function Fd(s){var l=s.split("e"),c=je(l,2),d=c[0],f=c[1];if(!f)return s;var g=s.split("."),v=je(g,2),b=v[0],$=v[1],y=$===void 0?"":$,x=Number(f),C=y.split("e"),E=je(C,1),N=E[0];if(x>N.length){var W=Qa(x-N.length);return d.replace(/(^0+|\.)/g,"")+W}var q=b.replace(/^0+/,"")+N.slice(0,x),Y=N.slice(x);return Y?[q,Y].join("."):q}function gL(s,l){var c=Fd(s).split("."),d=je(c,2),f=d[0],g=d[1],v=Fd(l).split("."),b=je(v,2),$=b[0],y=b[1],x=$w(f.replace("-",""),$.replace("-","")),C=f.includes("-"),E=$.includes("-");return C&&!E?-1:!C&&E?1:C&&E?x===0?0:x>0?-1:1:x===0?Sw(g,y):x}function bg(s){return[-1/0,1/0].includes(Number(s))}function yg(s){return Number(s)<Number.MAX_SAFE_INTEGER&&Number(s)>Number.MIN_SAFE_INTEGER}function ya(s,l,c){var d=yg(s)&&yg(l)&&!c,f=bg(s)||bg(l);return d||f?Number(s)===Number(l)?0:Number(s)>Number(l)?1:-1:gL(String(s),String(l))}function Wo(s,l,c){if(s===l)return"0";for(var d=c||{},f=d.decimal,g=d.stayZero,v=dn(s),b=dn(l),$=$w(v,b)>0,y=$?v:b,x=$?b:v,C=[],E=[],N=f?0:y.length-x.length,W=f?x.length:y.length,q=W-1;q>=0;q--){var Y=q-N,re=Number(y[q])-(Number(x[Y])||0)-(E[q]||0);re<0&&(E[q-1]=1,re+=10),C.unshift(String(re))}if(f)return C.concat(y.slice(W,y.length)).join("");var se=C.join("");return g||(se=se.replace(/^0+/,"")),dn($?se:"-".concat(se))}function rs(s,l){if(s===l)return"0";var c=ya(s,l,!0)>0,d=c?s:l,f=c?l:s,g=d.split("."),v=je(g,2),b=v[0],$=v[1],y=$===void 0?"0":$,x=f.split("."),C=je(x,2),E=C[0],N=C[1],W=N===void 0?"0":N,q=Wo(b,E);if(y==="0"&&W==="0")return c?q:"-".concat(q);var Y="",re=y;y.length<W.length&&(re="".concat(y).concat(Qa(W.length-y.length))),Sw(re,W)>=0?Y=Wo(re,W,{decimal:!0}):(y.length<W.length||y==="0"?(Y=Wo("1".concat(re),W,{stayZero:!0}),Y=Qa(W.length-Y.length)+Y):Y=Wo(y,W,{decimal:!0}),q=Wo(q,"1"));var se=Y?[q,Y].join("."):q;return c?se:"-".concat(se)}function bL(s,l){var c=s[0]==="-",d=l[0]==="-";if(c&&!d){var f=vo(s.slice(1),l);return"-".concat(f)}return c&&d?rs(l.slice(1),s.slice(1)):!c&&d?vo(s,l.slice(1)):rs(s,l)}function yL(s,l){var c=s[0]==="-",d=l[0]==="-";if(c&&!d)return rs(l,s.slice(1));if(c&&d){var f=vo(l.slice(1),s.slice(1));return"-".concat(f)}return!c&&d?rs(s,l.slice(1)):vo(s,l)}function as(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!c)return Number(s).toFixed(l);if(!Qe(s))return String(s);var d=s.split("."),f=je(d,2),g=f[0],v=f[1];if(!v)return l?[s,Qa(l)].join("."):s;if(l===0)return Number(v[0])>=5?vo(g,"1"):g;var b=v.slice(0,l);if(v.length<l)b+=Qa(l-v.length);else{var $,y=($=b.match(/^0+/))===null||$===void 0?void 0:$[0].length,x=Number(v[l])>=5;b=x?vo(b,"1"):b,y&&x&&y+b.length>=l&&(b="".concat(Qa(l-b.length)).concat(b))}return[g,b].join(".")}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function _L(s,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!s&&s!==0?!0:c&&Qe(s)?ya(s,l,c)<0:s<l}function wL(s,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!s&&s!==0?!0:c&&Qe(s)?ya(s,l,c)>0:s>l}function CL(s,l){if(s!==""){var c=l.max,d=l.min,f=l.lastValue,g=l.largeNumber;return kw(s)?g&&(Qe(c)||c===1/0)&&(Qe(d)||d===-1/0)?ya(c,s,g)<0?c:ya(d,s,g)>0?d:s:Math.max(Number(d),Math.min(Number(c),Number(s))):f}}function wi(s,l){var c,d;if(!s||!l)return(s||0)+(l||0);var f=((c=s.toString().split(".")[1])===null||c===void 0?void 0:c.length)||0,g=((d=l.toString().split(".")[1])===null||d===void 0?void 0:d.length)||0;if(!f&&!g)return s+l;var v=s,b=l,$=Math.abs(f-g),y=Math.pow(10,Math.max(f,g));if($>0){var x=Math.pow(10,$);f>g?(v=Number(s.toString().replace(".","")),b=Number(l.toString().replace(".",""))*x):(v=Number(s.toString().replace(".",""))*x,b=Number(l.toString().replace(".","")))}else v=Number(s.toString().replace(".","")),b=Number(l.toString().replace(".",""));return(v+b)/y}function Ci(s,l){var c,d;if(!s||!l)return(s||0)-(l||0);var f=((c=s.toString().split(".")[1])===null||c===void 0?void 0:c.length)||0,g=((d=l.toString().split(".")[1])===null||d===void 0?void 0:d.length)||0,v=Math.pow(10,Math.max(f,g)),b=f>=g?f:g;return Number(((s*v-l*v)/v).toFixed(b))}function kL(s,l){return s<0&&l>0?Ci(l,Math.abs(s)):s<0&&l<0?wi(Math.abs(s),Math.abs(l))*-1:s>0&&l<0?Ci(s,Math.abs(l)):wi(s,l)}function $L(s,l){return s<0&&l>0?wi(Math.abs(s),l)*-1:s<0&&l<0?Ci(Math.abs(l),Math.abs(s)):s>0&&l<0?wi(s,Math.abs(l)):Ci(s,l)}function SL(s){var l=s.op,c=s.step,d=s.lastValue,f=s.max,g=s.min,v=s.largeNumber;if(c<=0)return fo.error("InputNumber","step must be larger than 0."),d;var b=Vt(c)?String(c):c,$;return l==="add"?v&&Qe(d)?$=yL(String(d),String(b)):$=kL(Number(d||0),Number(c)):l==="reduce"&&(v&&Qe(d)?$=bL(String(d),String(b)):$=$L(Number(d||0),Number(c))),ma(d)&&($=CL($,{max:f,min:g,lastValue:d,largeNumber:v})),v?$:Number($)}function Ic(s){var l=s.largeNumber,c=s.value,d=s.max,f=s.min;if(!(ma(c)||ma(l))){l&&Vt(c)&&fo.warn("InputNumber","largeNumber value must be a string.");var g;return ya(c,d,l)>0?g="exceed-maximum":ya(c,f,l)<0?g="below-minimum":g=void 0,g}}var xL=["-",".","e","E","+"];function OL(s,l){var c;if(["",null,void 0].includes(s))return!0;if(s.slice(0,2)==="00"||((c=s.match(/\./g))===null||c===void 0?void 0:c.length)>1)return!1;var d=s.slice(1);if(/(\+|-)/.test(d)&&!/e+/i.test(d))return!1;var f=l&&kw(s)||!Number.isNaN(Number(s));return!(!f&&!xL.includes(s.slice(-1))||/e/i.test(s)&&!/\de/i.test(s))}function EL(s,l){return parseFloat(s)!==l&&!Number.isNaN(Number(s))}function Nc(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!(["",null,void 0].includes(s)||!/\d+/.test(s))){var c=l.decimalPlaces,d=l.largeNumber,f=l.isToFixed,g=s.replace(/[.|+|\-|e]$/,"");return d&&(g=Fd(g)),c!==void 0&&(g=as(g,c,d)),d||f?g:parseFloat(g)}}function AL(s){var l=/^[-+]?\d{1,3}(,\d{3})*(\.(\d*))?$/;return l.test(s)?s.replace(/,/g,""):s}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function TL(s){var l=XB(),c=l.classPrefix,d=l.sizeClassNames,f=l.statusClassNames,g=toRefs(s),v=g.value,b=g.modelValue,$=g.max,y=g.min,x=Lt(v,b,s.defaultValue,s.onChange),C=je(x,2),E=C[0],N=C[1],W=ref(),q=ref(""),Y=Jt(),re=Ki(),se=ref(),de=computed(function(){return Y.value||!wL(E.value,s.min,s.largeNumber)}),he=computed(function(){return Y.value||!_L(E.value,s.max,s.largeNumber)}),ge=computed(function(){return["".concat(c.value,"-input-number"),d[s.size],ne(ne(ne(ne({},f.disabled,Y.value),"".concat(c.value,"-is-controls-right"),s.theme==="column"),"".concat(c.value,"-input-number--").concat(s.theme),s.theme),"".concat(c.value,"-input-number--auto-width"),s.autoWidth)]}),Se=computed(function(){return["".concat(c.value,"-input-number__decrease"),ne({},f.disabled,de.value)]}),Ae=computed(function(){return["".concat(c.value,"-input-number__increase"),ne({},f.disabled,he.value)]}),Re=function(G$){var ky;if(!G$&&G$!==0)return"";var $y=G$||G$===0?String(G$):"";if(!((ky=W.value)!==null&&ky!==void 0&&(ky=ky.inputRef)!==null&&ky!==void 0&&ky.contains(document.activeElement))){var rS=Nc($y,{decimalPlaces:s.decimalPlaces,largeNumber:s.largeNumber,isToFixed:!0});$y=rS||rS===0?String(rS):"",s.format&&($y=String(s.format(G$,{fixedNumber:$y})))}return $y};watch(E,function(G$){var ky=s.largeNumber,$y=s.decimalPlaces,rS=[void 0,null].includes(G$)?"":String(G$);if(!ky&&!Number.isNaN(q.value)){parseFloat(q.value)!==G$&&(q.value=Re(rS));var lS=Number(as(rS,$y,ky));$y!==void 0&&![void 0,null].includes(G$)&&Number(lS)!==Number(E.value)&&N(lS,{type:"props",e:void 0})}ky&&(q.value=Re(rS),$y!==void 0&&as(rS,$y,ky)!==G$&&N(q.value,{type:"props",e:void 0}))},{immediate:!0}),watch([E,$,y],function(){var G$;if(![void 0,"",null].includes(E.value)){var ky=s.max,$y=s.min,rS=s.largeNumber,lS=Ic({value:E.value,largeNumber:rS,max:ky,min:$y});se.value=lS,(G$=s.onValidate)===null||G$===void 0||G$.call(s,{error:lS})}},{immediate:!0});var Be=function(G$){var ky=SL({op:G$,step:s.step,max:s.max,min:s.min,lastValue:E.value,largeNumber:s.largeNumber}),$y=s.largeNumber,rS=s.max,lS=s.min,bS=Ic({value:ky,largeNumber:$y,max:rS,min:lS});return{overLimit:bS,newValue:ky}},Ke=function(G$){if(!(de.value||re.value)){var ky=Be("reduce");ky.overLimit&&!s.allowInputOverLimit||N(ky.newValue,{type:"reduce",e:G$})}},Lr=function(G$){if(!(he.value||re.value)){var ky=Be("add");ky.overLimit&&!s.allowInputOverLimit||N(ky.newValue,{type:"add",e:G$})}},_y=function(G$,ky){var $y=ky.e,rS=AL(G$);if(OL(rS,s.largeNumber)){if(q.value=rS,s.largeNumber){N(rS,{type:"input",e:$y});return}if(EL(String(rS),Number(E.value))){var lS=rS===""?void 0:Number(rS);N(lS,{type:"input",e:$y})}}},by=function(G$,ky){var $y,rS=s.largeNumber,lS=s.max,bS=s.min,IS=s.decimalPlaces;if(!s.allowInputOverLimit&&E.value!==void 0){var BS=Ic({value:E.value,largeNumber:rS,max:lS,min:bS});if(BS==="below-minimum"){var MS;N(bS,{type:"blur",e:ky.e}),(MS=s.onBlur)===null||MS===void 0||MS.call(s,bS,ky);return}if(BS==="exceed-maximum"){var zS;N(lS,{type:"blur",e:ky.e}),(zS=s.onBlur)===null||zS===void 0||zS.call(s,lS,ky);return}}var LS=Nc(G$,{decimalPlaces:IS,largeNumber:rS});q.value=Re(LS),LS!==E.value&&N(LS,{type:"blur",e:ky.e}),($y=s.onBlur)===null||$y===void 0||$y.call(s,LS,ky)},yy=function(G$,ky){var $y;q.value=E.value||E.value===0?String(E.value):"",($y=s.onFocus)===null||$y===void 0||$y.call(s,G$,ky)},my=function(G$,ky){var $y;if(!Y.value){var rS=ky.e,lS={ArrowUp:Lr,ArrowDown:Ke},bS=rS.code||rS.key;lS[bS]!==void 0&&lS[bS](rS),($y=s.onKeydown)===null||$y===void 0||$y.call(s,G$,ky)}},$t=function(G$,ky){var $y;($y=s.onKeyup)===null||$y===void 0||$y.call(s,G$,ky)},K$=function(G$,ky){var $y;($y=s.onKeypress)===null||$y===void 0||$y.call(s,G$,ky)},Y$=function(G$,ky){var $y;q.value=Re(G$);var rS=Nc(G$,{decimalPlaces:s.decimalPlaces,largeNumber:s.largeNumber});rS!==G$&&String(rS)!==G$&&N(rS,{type:"enter",e:ky.e}),($y=s.onEnter)===null||$y===void 0||$y.call(s,rS,ky)},W$=function(){W.value.focus()},U$=function(){W.value.blur()},hy={onBlur:by,onFocus:yy,onKeydown:my,onKeyup:$t,onKeypress:K$,onEnter:Y$,onClick:W$};return{classPrefix:c,wrapClasses:ge,reduceClasses:Se,addClasses:Ae,tDisabled:Y,isError:se,listeners:hy,userInput:q,tValue:E,inputRef:W,focus:W$,blur:U$,handleReduce:Ke,handleAdd:Lr,onInnerInputChange:_y,isReadonly:re}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function _g(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function PL(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?_g(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):_g(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var ML=defineComponent({name:"TInputNumber",props:hL,setup:function(s,l){var c=Ye(),d=Qn({AddIcon:Y_,RemoveIcon:a9,ChevronDownIcon:Z_,ChevronUpIcon:VD}),f=d.AddIcon,g=d.RemoveIcon,v=d.ChevronDownIcon,b=d.ChevronUpIcon,$=TL(s),y=$.inputRef;return l.expose(PL({},$)),function(){var x=s.theme==="column"?createVNode(v,{size:s.size},null):createVNode(g,{size:s.size},null),C=s.theme==="column"?createVNode(b,{size:s.size},null):createVNode(f,{size:s.size},null),E=$.isError.value?"error":s.status,N=$.classPrefix.value,W=c("tips");return createVNode("div",{class:$.wrapClasses.value},[s.theme!=="normal"&&createVNode(Tt,{class:$.reduceClasses.value,disabled:$.tDisabled.value,onClick:$.handleReduce,variant:"outline",shape:"square",icon:function(){return x}},null),createVNode(er,mergeProps({ref:y,disabled:$.tDisabled.value,readonly:$.isReadonly.value,autocomplete:"off",placeholder:s.placeholder,unselectable:$.isReadonly.value?"on":"off",autoWidth:s.autoWidth,align:s.align||(s.theme==="row"?"center":void 0),status:E,label:s.label,suffix:s.suffix},$.listeners,s.inputProps,{value:$.userInput.value,onChange:$.onInnerInputChange}),l.slots),s.theme!=="normal"&&createVNode(Tt,{class:$.addClasses.value,disabled:$.tDisabled.value,onClick:$.handleAdd,variant:"outline",shape:"square",icon:function(){return C}},null),W&&createVNode("div",{class:"".concat(N,"-input__tips ").concat(N,"-tips ").concat(N,"-is-").concat(E)},[W])])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Cr=ze(ML),IL=Gf,NL=$o,jL=Bs,wg=ln,DL=So;function BL(s,l,c,d){if(!wg(s))return s;l=NL(l,s);for(var f=-1,g=l.length,v=g-1,b=s;b!=null&&++f<g;){var $=DL(l[f]),y=c;if($==="__proto__"||$==="constructor"||$==="prototype")return s;if(f!=v){var x=b[$];y=d?d(x,$,b):void 0,y===void 0&&(y=wg(x)?x:jL(l[f+1])?[]:{})}IL(b,$,y),b=b[$]}return s}var xw=BL,FL=Gs,LL=xw,RL=$o;function zL(s,l,c){for(var d=-1,f=l.length,g={};++d<f;){var v=l[d],b=FL(s,v);c(b,v)&&LL(g,RL(v,s),b)}return g}var Ow=zL,VL=Ow,HL=Zy;function UL(s,l){return VL(s,l,function(c,d){return HL(s,d)})}var KL=UL,WL=KL,GL=gw,qL=GL(function(s,l){return s==null?{}:WL(s,l)}),YL=qL;const Ew=ot(YL);function ZL(s,l,c,d){for(var f=s.length,g=c+(d?1:-1);d?g--:++g<f;)if(l(s[g],g,s))return g;return-1}var XL=ZL;function JL(s){return s!==s}var QL=JL;function eR(s,l,c){for(var d=c-1,f=s.length;++d<f;)if(s[d]===l)return d;return-1}var tR=eR,nR=XL,rR=QL,aR=tR;function oR(s,l,c){return l===l?aR(s,l,c):nR(s,rR,c)}var iR=oR,lR=iR;function sR(s,l){var c=s==null?0:s.length;return!!c&&lR(s,l,0)>-1}var uR=sR;function cR(s,l,c){for(var d=-1,f=s==null?0:s.length;++d<f;)if(c(l,s[d]))return!0;return!1}var dR=cR,fR=Dy,vR=uR,pR=dR,mR=Bi,hR=Fs,Cg=By,gR=Math.min;function bR(s,l,c){for(var d=c?pR:vR,f=s[0].length,g=s.length,v=g,b=Array(g),$=1/0,y=[];v--;){var x=s[v];v&&l&&(x=mR(x,hR(l))),$=gR(x.length,$),b[v]=!c&&(l||f>=120&&x.length>=120)?new fR(v&&x):void 0}x=s[0];var C=-1,E=b[0];e:for(;++C<f&&y.length<$;){var N=x[C],W=l?l(N):N;if(N=c||N!==0?N:0,!(E?Cg(E,W):d(y,W,c))){for(v=g;--v;){var q=b[v];if(!(q?Cg(q,W):d(s[v],W,c)))continue e}E&&E.push(W),y.push(N)}}return y}var yR=bR,_R=r_;function wR(s){return _R(s)?s:[]}var CR=wR,kR=Bi,$R=yR,SR=d_,xR=CR,OR=SR(function(s){var l=kR(s,xR);return l.length&&l[0]===s[0]?$R(l):[]}),ER=OR;const Ld=ot(ER);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var AR={allowInput:Boolean,autoWidth:Boolean,autofocus:Boolean,borderless:Boolean,clearable:Boolean,collapsedItems:{type:Function},disabled:{type:Boolean,default:void 0},inputProps:{type:Object},inputValue:{type:[String,Number],default:void 0},defaultInputValue:{type:[String,Number]},keys:{type:Object},label:{type:[String,Function]},loading:Boolean,minCollapsedNum:{type:Number,default:0},multiple:Boolean,panel:{type:[String,Function]},placeholder:{type:String,default:""},popupProps:{type:Object},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:Boolean,prefixIcon:{type:Function},readonly:Boolean,reserveKeyword:Boolean,size:{type:String,default:"medium",validator:function(s){return s?["small","medium","large"].includes(s):!0}},status:{type:String,default:"default",validator:function(s){return s?["default","success","warning","error"].includes(s):!0}},suffix:{type:[String,Function]},suffixIcon:{type:Function},tag:{type:[String,Function]},tagInputProps:{type:Object},tagProps:{type:Object},tips:{type:[String,Function]},value:{type:[String,Number,Boolean,Object,Array,Date],default:void 0},valueDisplay:{type:[String,Function]},onBlur:Function,onClear:Function,onEnter:Function,onFocus:Function,onInputChange:Function,onMouseenter:Function,onMouseleave:Function,onPaste:Function,onPopupVisibleChange:Function,onTagChange:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var TR=["tips"];function kg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Wt(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?kg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):kg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var PR=["status","clearable","disabled","label","placeholder","readonly","prefixIcon","suffix","suffixIcon","onPaste","onMouseenter","onMouseleave","size","autofocus"],MR={label:"label",value:"value",children:"children"};function IR(s,l){var c=Wt(Wt({},MR),l);return jt(s)?s[c.label]:s}function NR(s,l,c){var d,f=toRefs(s),g=f.value,v=f.keys,b=f.inputValue,$=we(),y=ref(s.autofocus),x=ref(),C=ga(b,(d=s.defaultInputValue)!==null&&d!==void 0?d:"",s.onInputChange,"inputValue"),E=je(C,2),N=E[0],W=E[1],q=Ye(),Y=Jt(),re=computed(function(){return Wt(Wt({},Ew(s,PR)),{},{disabled:Y.value})}),se=function(Re){var Be,Ke;Re==null||(Be=Re.e)===null||Be===void 0||Be.stopPropagation(),(Ke=s.onClear)===null||Ke===void 0||Ke.call(s,Re),W("",{trigger:"clear"})},de=function(Re,Be){s.allowInput&&W(Re,Wt(Wt({},Be),{},{trigger:Be.trigger||"input"}))},he=function(Re){var Be,Ke=q("valueDisplay"),Lr=Re&&s.allowInput?N.value:IR(g.value,v.value),_y=ge(Ke,Re),by=Wt(Wt({},re.value),{},{value:Se(Ke,Lr,Re),label:_y.length?function(){return _y}:void 0,autoWidth:s.autoWidth,readonly:!s.allowInput||s.readonly,placeholder:Ae(Ke),suffixIcon:!Y.value&&s.loading?function(){return createVNode(Qs,{loading:!0,size:"small"},null)}:s.suffixIcon,showClearIconOnEmpty:!!(s.clearable&&(N.value||Lr)&&!Y.value&&!s.readonly)},s.inputProps),yy=l.slots;yy.tips;var my=Ri(yy,TR),$t=Re?["".concat($.value,"-input--focused"),"".concat($.value,"-is-focused"),by==null?void 0:by.inputClass]:by==null?void 0:by.inputClass,K$=function(U$,hy){var G$;(G$=s.onEnter)===null||G$===void 0||G$.call(s,g.value,Wt(Wt({},hy),{},{inputValue:U$}))},Y$=function(U$,hy){var G$,ky,$y=(G$=c.value)===null||G$===void 0?void 0:G$.getOverlayState();y.value||$y!=null&&$y.hover||(y.value=!0,(ky=s.onFocus)===null||ky===void 0||ky.call(s,g.value,Wt(Wt({},hy),{},{inputValue:U$})))},W$=function(U$,hy){var G$,ky,$y=(G$=c.value)===null||G$===void 0?void 0:G$.getOverlayState();$y!=null&&$y.hover||(y.value=!1,(ky=s.onBlur)===null||ky===void 0||ky.call(s,g.value,Wt(Wt({},hy),{},{inputValue:U$})))};return createVNode(er,mergeProps({ref:x,style:(Be=l.attrs)===null||Be===void 0?void 0:Be.style},Wt({onChange:de,onClear:se,onEnter:K$,onFocus:Y$,onBlur:W$},by),{inputClass:$t}),my)},ge=function(Re,Be){var Ke=q("label");if(!Ke&&!Re)return[];if(Re){var Lr,_y;if((Lr=s.valueDisplayOptions)!==null&&Lr!==void 0&&Lr.usePlaceholder&&!g.value||(_y=s.valueDisplayOptions)!==null&&_y!==void 0&&_y.useInputDisplay&&Be)return[Ke]}return[Ke,Re]},Se=function(Re,Be,Ke){if(Re){var Lr,_y;if(!((Lr=s.valueDisplayOptions)!==null&&Lr!==void 0&&Lr.useInputDisplay)||(_y=s.valueDisplayOptions)!==null&&_y!==void 0&&_y.useInputDisplay&&!Ke)return}return Be},Ae=function(Re){if(Re){var Be,Ke;if(!((Be=s.valueDisplayOptions)!==null&&Be!==void 0&&Be.usePlaceholder)||(Ke=s.valueDisplayOptions)!==null&&Ke!==void 0&&Ke.usePlaceholder&&g.value)return""}return s.placeholder};return{inputRef:x,isSingleFocus:y,commonInputProps:re,singleInputValue:N,onInnerClear:se,renderSelectSingle:he}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var jR={autoWidth:Boolean,borderless:Boolean,clearable:Boolean,collapsedItems:{type:Function},disabled:{type:Boolean,default:void 0},dragSort:Boolean,excessTagsDisplayType:{type:String,default:"break-line",validator:function(s){return s?["scroll","break-line"].includes(s):!0}},inputProps:{type:Object},inputValue:{type:[String,Number],default:void 0},defaultInputValue:{type:[String,Number],default:""},label:{type:[String,Function]},max:{type:Number},minCollapsedNum:{type:Number,default:0},placeholder:{type:String,default:void 0},prefixIcon:{type:Function},readonly:{type:Boolean,default:void 0},size:{type:String,default:"medium",validator:function(s){return s?["small","medium","large"].includes(s):!0}},status:{type:String,validator:function(s){return s?["default","success","warning","error"].includes(s):!0}},suffix:{type:[String,Function]},suffixIcon:{type:Function},tag:{type:[String,Function]},tagProps:{type:Object},tips:{type:[String,Function]},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:function(){return[]}},valueDisplay:{type:[String,Function]},onBlur:Function,onChange:Function,onClear:Function,onClick:Function,onDragSort:Function,onEnter:Function,onFocus:Function,onInputChange:Function,onMouseenter:Function,onMouseleave:Function,onPaste:Function,onRemove:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function DR(s){var l=ref(),c=toRefs(s),d=c.excessTagsDisplayType,f=c.readonly,g=c.disabled,v=ref(0),b=ref(),$=ref(),y=ref(!1),x=function(he){var ge=he.children[0];b.value=ge},C=function(){v.value=b.value.scrollWidth-b.value.clientWidth},E=function(he){var ge;rt((ge=b.value)===null||ge===void 0?void 0:ge.scroll)&&b.value.scroll({left:he,behavior:"smooth"})},N=function(){C(),E(v.value),setTimeout(function(){y.value=!0},200)},W=function(){E(0)},q=function(he){var ge=he.e;if(!(f.value||g.value)&&b.value)if(ge.deltaX>0){var Se=Math.min(b.value.scrollLeft+120,v.value);E(Se)}else{var Ae=Math.max(b.value.scrollLeft-120,0);E(Ae)}},Y=function(){d.value==="scroll"&&($.value=setTimeout(function(){N(),clearTimeout($.value)},100))},re=function(){d.value==="scroll"&&(y.value=!1,E(0),clearTimeout($.value))},se=function(){var he,ge=(he=l.value)===null||he===void 0?void 0:he.$el;ge&&x(ge)},de=function(){clearTimeout($.value)};return onMounted(se),onUnmounted(de),{tagInputRef:l,scrollElement:b,scrollDistance:v,scrollTo:E,scrollToRight:N,scrollToLeft:W,updateScrollElement:x,updateScrollDistance:C,onWheel:q,scrollToRightOnEnter:Y,scrollToLeftOnLeave:re,isScrollable:y}}function os$1(s){"@babel/helpers - typeof";return os$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},os$1(s)}var BR=/^\s+/,FR=/\s+$/;function ke(s,l){if(s=s||"",l=l||{},s instanceof ke)return s;if(!(this instanceof ke))return new ke(s,l);var c=LR(s);this._originalInput=s,this._r=c.r,this._g=c.g,this._b=c.b,this._a=c.a,this._roundA=Math.round(100*this._a)/100,this._format=l.format||c.format,this._gradientType=l.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=c.ok}ke.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var s=this.toRgb();return(s.r*299+s.g*587+s.b*114)/1e3},getLuminance:function(){var s=this.toRgb(),l,c,d,f,g,v;return l=s.r/255,c=s.g/255,d=s.b/255,l<=.03928?f=l/12.92:f=Math.pow((l+.055)/1.055,2.4),c<=.03928?g=c/12.92:g=Math.pow((c+.055)/1.055,2.4),d<=.03928?v=d/12.92:v=Math.pow((d+.055)/1.055,2.4),.2126*f+.7152*g+.0722*v},setAlpha:function(s){return this._a=Aw(s),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var s=Sg(this._r,this._g,this._b);return{h:s.h*360,s:s.s,v:s.v,a:this._a}},toHsvString:function(){var s=Sg(this._r,this._g,this._b),l=Math.round(s.h*360),c=Math.round(s.s*100),d=Math.round(s.v*100);return this._a==1?"hsv("+l+", "+c+"%, "+d+"%)":"hsva("+l+", "+c+"%, "+d+"%, "+this._roundA+")"},toHsl:function(){var s=$g(this._r,this._g,this._b);return{h:s.h*360,s:s.s,l:s.l,a:this._a}},toHslString:function(){var s=$g(this._r,this._g,this._b),l=Math.round(s.h*360),c=Math.round(s.s*100),d=Math.round(s.l*100);return this._a==1?"hsl("+l+", "+c+"%, "+d+"%)":"hsla("+l+", "+c+"%, "+d+"%, "+this._roundA+")"},toHex:function(s){return xg(this._r,this._g,this._b,s)},toHexString:function(s){return"#"+this.toHex(s)},toHex8:function(s){return HR(this._r,this._g,this._b,this._a,s)},toHex8String:function(s){return"#"+this.toHex8(s)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(ft(this._r,255)*100)+"%",g:Math.round(ft(this._g,255)*100)+"%",b:Math.round(ft(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(ft(this._r,255)*100)+"%, "+Math.round(ft(this._g,255)*100)+"%, "+Math.round(ft(this._b,255)*100)+"%)":"rgba("+Math.round(ft(this._r,255)*100)+"%, "+Math.round(ft(this._g,255)*100)+"%, "+Math.round(ft(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:tz[xg(this._r,this._g,this._b,!0)]||!1},toFilter:function(s){var l="#"+Og(this._r,this._g,this._b,this._a),c=l,d=this._gradientType?"GradientType = 1, ":"";if(s){var f=ke(s);c="#"+Og(f._r,f._g,f._b,f._a)}return"progid:DXImageTransform.Microsoft.gradient("+d+"startColorstr="+l+",endColorstr="+c+")"},toString:function(s){var l=!!s;s=s||this._format;var c=!1,d=this._a<1&&this._a>=0,f=!l&&d&&(s==="hex"||s==="hex6"||s==="hex3"||s==="hex4"||s==="hex8"||s==="name");return f?s==="name"&&this._a===0?this.toName():this.toRgbString():(s==="rgb"&&(c=this.toRgbString()),s==="prgb"&&(c=this.toPercentageRgbString()),(s==="hex"||s==="hex6")&&(c=this.toHexString()),s==="hex3"&&(c=this.toHexString(!0)),s==="hex4"&&(c=this.toHex8String(!0)),s==="hex8"&&(c=this.toHex8String()),s==="name"&&(c=this.toName()),s==="hsl"&&(c=this.toHslString()),s==="hsv"&&(c=this.toHsvString()),c||this.toHexString())},clone:function(){return ke(this.toString())},_applyModification:function(s,l){var c=s.apply(null,[this].concat([].slice.call(l)));return this._r=c._r,this._g=c._g,this._b=c._b,this.setAlpha(c._a),this},lighten:function(){return this._applyModification(GR,arguments)},brighten:function(){return this._applyModification(qR,arguments)},darken:function(){return this._applyModification(YR,arguments)},desaturate:function(){return this._applyModification(UR,arguments)},saturate:function(){return this._applyModification(KR,arguments)},greyscale:function(){return this._applyModification(WR,arguments)},spin:function(){return this._applyModification(ZR,arguments)},_applyCombination:function(s,l){return s.apply(null,[this].concat([].slice.call(l)))},analogous:function(){return this._applyCombination(QR,arguments)},complement:function(){return this._applyCombination(XR,arguments)},monochromatic:function(){return this._applyCombination(ez,arguments)},splitcomplement:function(){return this._applyCombination(JR,arguments)},triad:function(){return this._applyCombination(Eg,[3])},tetrad:function(){return this._applyCombination(Eg,[4])}};ke.fromRatio=function(s,l){if(os$1(s)=="object"){var c={};for(var d in s)s.hasOwnProperty(d)&&(d==="a"?c[d]=s[d]:c[d]=ti(s[d]));s=c}return ke(s,l)};function LR(s){var l={r:0,g:0,b:0},c=1,d=null,f=null,g=null,v=!1,b=!1;return typeof s=="string"&&(s=oz(s)),os$1(s)=="object"&&(rr(s.r)&&rr(s.g)&&rr(s.b)?(l=RR(s.r,s.g,s.b),v=!0,b=String(s.r).substr(-1)==="%"?"prgb":"rgb"):rr(s.h)&&rr(s.s)&&rr(s.v)?(d=ti(s.s),f=ti(s.v),l=VR(s.h,d,f),v=!0,b="hsv"):rr(s.h)&&rr(s.s)&&rr(s.l)&&(d=ti(s.s),g=ti(s.l),l=zR(s.h,d,g),v=!0,b="hsl"),s.hasOwnProperty("a")&&(c=s.a)),c=Aw(c),{ok:v,format:s.format||b,r:Math.min(255,Math.max(l.r,0)),g:Math.min(255,Math.max(l.g,0)),b:Math.min(255,Math.max(l.b,0)),a:c}}function RR(s,l,c){return{r:ft(s,255)*255,g:ft(l,255)*255,b:ft(c,255)*255}}function $g(s,l,c){s=ft(s,255),l=ft(l,255),c=ft(c,255);var d=Math.max(s,l,c),f=Math.min(s,l,c),g,v,b=(d+f)/2;if(d==f)g=v=0;else{var $=d-f;switch(v=b>.5?$/(2-d-f):$/(d+f),d){case s:g=(l-c)/$+(l<c?6:0);break;case l:g=(c-s)/$+2;break;case c:g=(s-l)/$+4;break}g/=6}return{h:g,s:v,l:b}}function zR(s,l,c){var d,f,g;s=ft(s,360),l=ft(l,100),c=ft(c,100);function v(y,x,C){return C<0&&(C+=1),C>1&&(C-=1),C<1/6?y+(x-y)*6*C:C<1/2?x:C<2/3?y+(x-y)*(2/3-C)*6:y}if(l===0)d=f=g=c;else{var b=c<.5?c*(1+l):c+l-c*l,$=2*c-b;d=v($,b,s+1/3),f=v($,b,s),g=v($,b,s-1/3)}return{r:d*255,g:f*255,b:g*255}}function Sg(s,l,c){s=ft(s,255),l=ft(l,255),c=ft(c,255);var d=Math.max(s,l,c),f=Math.min(s,l,c),g,v,b=d,$=d-f;if(v=d===0?0:$/d,d==f)g=0;else{switch(d){case s:g=(l-c)/$+(l<c?6:0);break;case l:g=(c-s)/$+2;break;case c:g=(s-l)/$+4;break}g/=6}return{h:g,s:v,v:b}}function VR(s,l,c){s=ft(s,360)*6,l=ft(l,100),c=ft(c,100);var d=Math.floor(s),f=s-d,g=c*(1-l),v=c*(1-f*l),b=c*(1-(1-f)*l),$=d%6,y=[c,v,g,g,b,c][$],x=[b,c,c,v,g,g][$],C=[g,g,b,c,c,v][$];return{r:y*255,g:x*255,b:C*255}}function xg(s,l,c,d){var f=[Dn(Math.round(s).toString(16)),Dn(Math.round(l).toString(16)),Dn(Math.round(c).toString(16))];return d&&f[0].charAt(0)==f[0].charAt(1)&&f[1].charAt(0)==f[1].charAt(1)&&f[2].charAt(0)==f[2].charAt(1)?f[0].charAt(0)+f[1].charAt(0)+f[2].charAt(0):f.join("")}function HR(s,l,c,d,f){var g=[Dn(Math.round(s).toString(16)),Dn(Math.round(l).toString(16)),Dn(Math.round(c).toString(16)),Dn(Tw(d))];return f&&g[0].charAt(0)==g[0].charAt(1)&&g[1].charAt(0)==g[1].charAt(1)&&g[2].charAt(0)==g[2].charAt(1)&&g[3].charAt(0)==g[3].charAt(1)?g[0].charAt(0)+g[1].charAt(0)+g[2].charAt(0)+g[3].charAt(0):g.join("")}function Og(s,l,c,d){var f=[Dn(Tw(d)),Dn(Math.round(s).toString(16)),Dn(Math.round(l).toString(16)),Dn(Math.round(c).toString(16))];return f.join("")}ke.equals=function(s,l){return!s||!l?!1:ke(s).toRgbString()==ke(l).toRgbString()};ke.random=function(){return ke.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function UR(s,l){l=l===0?0:l||10;var c=ke(s).toHsl();return c.s-=l/100,c.s=ou(c.s),ke(c)}function KR(s,l){l=l===0?0:l||10;var c=ke(s).toHsl();return c.s+=l/100,c.s=ou(c.s),ke(c)}function WR(s){return ke(s).desaturate(100)}function GR(s,l){l=l===0?0:l||10;var c=ke(s).toHsl();return c.l+=l/100,c.l=ou(c.l),ke(c)}function qR(s,l){l=l===0?0:l||10;var c=ke(s).toRgb();return c.r=Math.max(0,Math.min(255,c.r-Math.round(255*-(l/100)))),c.g=Math.max(0,Math.min(255,c.g-Math.round(255*-(l/100)))),c.b=Math.max(0,Math.min(255,c.b-Math.round(255*-(l/100)))),ke(c)}function YR(s,l){l=l===0?0:l||10;var c=ke(s).toHsl();return c.l-=l/100,c.l=ou(c.l),ke(c)}function ZR(s,l){var c=ke(s).toHsl(),d=(c.h+l)%360;return c.h=d<0?360+d:d,ke(c)}function XR(s){var l=ke(s).toHsl();return l.h=(l.h+180)%360,ke(l)}function Eg(s,l){if(isNaN(l)||l<=0)throw new Error("Argument to polyad must be a positive number");for(var c=ke(s).toHsl(),d=[ke(s)],f=360/l,g=1;g<l;g++)d.push(ke({h:(c.h+g*f)%360,s:c.s,l:c.l}));return d}function JR(s){var l=ke(s).toHsl(),c=l.h;return[ke(s),ke({h:(c+72)%360,s:l.s,l:l.l}),ke({h:(c+216)%360,s:l.s,l:l.l})]}function QR(s,l,c){l=l||6,c=c||30;var d=ke(s).toHsl(),f=360/c,g=[ke(s)];for(d.h=(d.h-(f*l>>1)+720)%360;--l;)d.h=(d.h+f)%360,g.push(ke(d));return g}function ez(s,l){l=l||6;for(var c=ke(s).toHsv(),d=c.h,f=c.s,g=c.v,v=[],b=1/l;l--;)v.push(ke({h:d,s:f,v:g})),g=(g+b)%1;return v}ke.mix=function(s,l,c){c=c===0?0:c||50;var d=ke(s).toRgb(),f=ke(l).toRgb(),g=c/100,v={r:(f.r-d.r)*g+d.r,g:(f.g-d.g)*g+d.g,b:(f.b-d.b)*g+d.b,a:(f.a-d.a)*g+d.a};return ke(v)};ke.readability=function(s,l){var c=ke(s),d=ke(l);return(Math.max(c.getLuminance(),d.getLuminance())+.05)/(Math.min(c.getLuminance(),d.getLuminance())+.05)};ke.isReadable=function(s,l,c){var d=ke.readability(s,l),f,g;switch(g=!1,f=iz(c),f.level+f.size){case"AAsmall":case"AAAlarge":g=d>=4.5;break;case"AAlarge":g=d>=3;break;case"AAAsmall":g=d>=7;break}return g};ke.mostReadable=function(s,l,c){var d=null,f=0,g,v,b,$;c=c||{},v=c.includeFallbackColors,b=c.level,$=c.size;for(var y=0;y<l.length;y++)g=ke.readability(s,l[y]),g>f&&(f=g,d=ke(l[y]));return ke.isReadable(s,d,{level:b,size:$})||!v?d:(c.includeFallbackColors=!1,ke.mostReadable(s,["#fff","#000"],c))};var Rd=ke.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},tz=ke.hexNames=nz(Rd);function nz(s){var l={};for(var c in s)s.hasOwnProperty(c)&&(l[s[c]]=c);return l}function Aw(s){return s=parseFloat(s),(isNaN(s)||s<0||s>1)&&(s=1),s}function ft(s,l){rz(s)&&(s="100%");var c=az(s);return s=Math.min(l,Math.max(0,parseFloat(s))),c&&(s=parseInt(s*l,10)/100),Math.abs(s-l)<1e-6?1:s%l/parseFloat(l)}function ou(s){return Math.min(1,Math.max(0,s))}function un(s){return parseInt(s,16)}function rz(s){return typeof s=="string"&&s.indexOf(".")!=-1&&parseFloat(s)===1}function az(s){return typeof s=="string"&&s.indexOf("%")!=-1}function Dn(s){return s.length==1?"0"+s:""+s}function ti(s){return s<=1&&(s=s*100+"%"),s}function Tw(s){return Math.round(parseFloat(s)*255).toString(16)}function Ag(s){return un(s)/255}var Nn=function(){var s="[-\\+]?\\d+%?",l="[-\\+]?\\d*\\.\\d+%?",c="(?:"+l+")|(?:"+s+")",d="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?",f="[\\s|\\(]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")[,|\\s]+("+c+")\\s*\\)?";return{CSS_UNIT:new RegExp(c),rgb:new RegExp("rgb"+d),rgba:new RegExp("rgba"+f),hsl:new RegExp("hsl"+d),hsla:new RegExp("hsla"+f),hsv:new RegExp("hsv"+d),hsva:new RegExp("hsva"+f),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function rr(s){return!!Nn.CSS_UNIT.exec(s)}function oz(s){s=s.replace(BR,"").replace(FR,"").toLowerCase();var l=!1;if(Rd[s])s=Rd[s],l=!0;else if(s=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var c;return(c=Nn.rgb.exec(s))?{r:c[1],g:c[2],b:c[3]}:(c=Nn.rgba.exec(s))?{r:c[1],g:c[2],b:c[3],a:c[4]}:(c=Nn.hsl.exec(s))?{h:c[1],s:c[2],l:c[3]}:(c=Nn.hsla.exec(s))?{h:c[1],s:c[2],l:c[3],a:c[4]}:(c=Nn.hsv.exec(s))?{h:c[1],s:c[2],v:c[3]}:(c=Nn.hsva.exec(s))?{h:c[1],s:c[2],v:c[3],a:c[4]}:(c=Nn.hex8.exec(s))?{r:un(c[1]),g:un(c[2]),b:un(c[3]),a:Ag(c[4]),format:l?"name":"hex8"}:(c=Nn.hex6.exec(s))?{r:un(c[1]),g:un(c[2]),b:un(c[3]),format:l?"name":"hex"}:(c=Nn.hex4.exec(s))?{r:un(c[1]+""+c[1]),g:un(c[2]+""+c[2]),b:un(c[3]+""+c[3]),a:Ag(c[4]+""+c[4]),format:l?"name":"hex8"}:(c=Nn.hex3.exec(s))?{r:un(c[1]+""+c[1]),g:un(c[2]+""+c[2]),b:un(c[3]+""+c[3]),format:l?"name":"hex"}:!1}function iz(s){var l,c;return s=s||{level:"AA",size:"small"},l=(s.level||"AA").toUpperCase(),c=(s.size||"small").toLowerCase(),l!=="AA"&&l!=="AAA"&&(l="AA"),c!=="small"&&c!=="large"&&(c="small"),{level:l,size:c}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var lz={closable:Boolean,color:{type:String,default:""},content:{type:[String,Function]},default:{type:[String,Function]},disabled:Boolean,icon:{type:Function,default:void 0},maxWidth:{type:[String,Number]},shape:{type:String,default:"square",validator:function(s){return s?["square","round","mark"].includes(s):!0}},size:{type:String,default:"medium",validator:function(s){return s?["small","medium","large"].includes(s):!0}},theme:{type:String,default:"default",validator:function(s){return s?["default","primary","warning","danger","success"].includes(s):!0}},variant:{type:String,default:"dark",validator:function(s){return s?["dark","light","outline","light-outline"].includes(s):!0}},onClick:Function,onClose:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Tg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function sz(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Tg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Tg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var Pw=defineComponent({name:"TTag",props:lz,setup:function(s){var l=Mt("tag"),c=l.globalConfig,d=we("tag"),f=Qn({CloseIcon:Ao}),g=f.CloseIcon,v=Ye(),b=Xt(),$=Ft(),y=$.SIZE,x=computed(function(){return["".concat(d.value),"".concat(d.value,"--").concat(s.theme),"".concat(d.value,"--").concat(s.variant),ne(ne(ne(ne({},"".concat(d.value,"--ellipsis"),s.maxWidth),"".concat(d.value,"--close"),s.closable),"".concat(d.value,"--disabled"),s.disabled),y.value[s.size],s.size!=="medium"),s.shape!=="square"&&"".concat(d.value,"--").concat(s.shape)]}),C=computed(function(){var q=s.maxWidth,Y=E();return s.maxWidth?sz({maxWidth:isNaN(Number(q))?String(q):"".concat(q,"px")},Y):Y}),E=function(){var q=s.color,Y=s.variant;if(!q)return{};var re=ke(q).getLuminance(),se={color:re>.5?"black":"white"};if((Y==="outline"||Y==="light-outline")&&(se.borderColor=q),Y!=="outline"){var de=function(){var he=ke(q).toRgb(),ge=he.r,Se=he.g,Ae=he.b;return"rgba(".concat(ge,", ").concat(Se,", ").concat(Ae,", 0.1)")};se.backgroundColor=Y==="dark"?q:de()}return Y!=="dark"&&(se.color=q),se},N=function(q){var Y;s.disabled||(Y=s.onClick)===null||Y===void 0||Y.call(s,{e:q})},W=function(){if(!s.closable)return null;var q="".concat(d.value,"__icon-close");return c.value.closeIcon?h(c.value.closeIcon(h),{class:q}):createVNode(g,{onClick:function(Y){var re,se=Y.e;se.stopPropagation(),(re=s.onClose)===null||re===void 0||re.call(s,{e:se})},class:q},null)};return function(){var q=W(),Y=b("default","content"),re=v("icon"),se=Qe(Y)?Y:"",de=se&&s.maxWidth?se:void 0;return createVNode("div",{class:x.value,style:C.value,onClick:N},[re,createVNode("span",{class:"".concat(d.value,"--text"),title:de},[Y]),!s.disabled&&q])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var uz={checked:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultChecked:Boolean,checkedProps:{type:Object},content:{type:[String,Number,Array,Function]},default:{type:[String,Function]},disabled:Boolean,size:{type:String,default:"medium",validator:function(s){return s?["small","medium","large"].includes(s):!0}},uncheckedProps:{type:Object},value:{type:[String,Number]},onChange:Function,onClick:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var cz=/^Space$/i,dz=/^Enter$/i,is=/^(Enter|Space)$/i;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Pg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Mg(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Pg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Pg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function fz(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!isVNode$1(s)}var Mw=defineComponent({name:"TCheckTag",props:uz,setup:function(s){var l=we("tag"),c=Ft(),d=c.SIZE,f=Xt(),g=toRefs(s),v=g.checked,b=g.modelValue,$=Lt(v,b,s.defaultChecked,s.onChange,"checked"),y=je($,2),x=y[0],C=y[1],E=computed(function(){return["".concat(l.value),"".concat(l.value,"--check"),d.value[s.size],ne(ne({},"".concat(l.value,"--checked"),x.value),"".concat(l.value,"--disabled"),s.disabled)]}),N=computed(function(){var se=Mg({theme:"primary"},s.checkedProps),de=Mg({},s.uncheckedProps);return x.value?se:de}),W=function(se){var de=se.e;if(!s.disabled){var he;(he=s.onClick)===null||he===void 0||he.call(s,{e:de}),C(!x.value,{e:de,value:s.value})}},q=function(se){var de,he=se.code||((de=se.key)===null||de===void 0?void 0:de.trim()),ge=cz.test(he)||dz.test(he);ge&&(se.preventDefault(),C(!x.value,{e:se,value:s.value}))},Y=function(se){se.currentTarget.addEventListener("keydown",q)},re=function(se){se.currentTarget.removeEventListener("keydown",q)};return function(){var se=f("default","content");return createVNode(Pw,mergeProps({class:E.value,disabled:s.disabled,tabindex:s.disabled?void 0:"0",onFocus:Y,onBlur:re},N.value,{onClick:W}),fz(se)?se:{default:function(){return[se]}})}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var vz={checkedProps:{type:Object},multiple:Boolean,options:{type:Array},uncheckedProps:{type:Object},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:function(){return[]}},onChange:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function pz(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!isVNode$1(s)}var mz=defineComponent({name:"TCheckTagGroup",props:vz,setup:function(s,l){var c=toRefs(s),d=c.value,f=c.modelValue,g=c.options,v=we("check-tag-group"),b=computed(function(){return[v.value]}),$=Lt(d,f,s.defaultValue,s.onChange),y=je($,2),x=y[0],C=y[1],E=function(W,q){var Y=q.value;if(W)s.multiple?C(x.value.concat(Y),{e:q.e,type:"check",value:Y}):C([Y],{e:q.e,type:"check",value:Y});else{var re=[];s.multiple&&(re=x.value.filter(function(se){return se!==Y})),C(re,{e:q.e,type:"uncheck",value:Y})}},N=function(W){return l.slots.option?l.slots.option(W):l.slots.label?l.slots.label(W):W.label?rt(W.label)?W.label(h):W.label:W.content&&rt(W.content)?W.content(h):W.default&&rt(W.default)?W.default(h):W.value};return function(){return createVNode("div",{class:b.value},[(g.value||[]).map(function(W){var q;return createVNode(Mw,{key:W.value,value:W.value,checkedProps:s.checkedProps,uncheckedProps:s.uncheckedProps,checked:x.value.includes(W.value),onChange:E,disabled:W.disabled,size:W.size,"data-value":W.value},pz(q=N(W))?q:{default:function(){return[q]}})})])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Ig=ze(Pw);ze(Mw);ze(mz);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Ng(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Ia(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Ng(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Ng(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function hz(s){var l=Ye(),c=we(),d=toRefs(s),f=d.value,g=d.modelValue,v=d.onRemove,b=d.max,$=d.minCollapsedNum,y=d.size,x=d.tagProps,C=d.getDragProps,E=Lt(f,g,s.defaultValue||[],s.onChange),N=je(E,2),W=N[0],q=N[1],Y=ref(),re=Jt(),se=Ki(),de=function(Be){var Ke,Lr=wt(W.value),_y=Lr.splice(Be.index,1),by=je(_y,1),yy=by[0];q(Lr,Ia(Ia({trigger:"tag-remove"},Be),{},{item:yy})),(Ke=v.value)===null||Ke===void 0||Ke.call(v,Ia(Ia({},Be),{},{item:yy,trigger:"tag-remove",value:Lr}))},he=function(Be){q([],{trigger:"clear",e:Be.e})},ge=function(Be,Ke){var Lr,_y,by=Be?String(Be).trim():"",yy=b&&((Lr=W.value)===null||Lr===void 0?void 0:Lr.length)>=b.value,my=W.value;!yy&&by&&(my=W.value instanceof Array?W.value.concat(String(by)):[by],q(my,{trigger:"enter",index:my.length-1,item:by,e:Ke.e})),s==null||(_y=s.onEnter)===null||_y===void 0||_y.call(s,my,Ia(Ia({},Ke),{},{inputValue:Be}))},Se=function(Be){!W.value||!W.value.length||(Y.value=Be)},Ae=function(Be,Ke){var Lr=Ke.e;if(!(!W.value||!W.value.length||Lr.key==="Process")){var _y=/(Backspace|NumpadDelete)/i.test(Lr.code)||/(Backspace|NumpadDelete)/i.test(Lr.key);if(!Be&&_y){var by,yy=W.value.length-1,my=W.value[yy],$t="backspace",K$=W.value.slice(0,-1);q(K$,{e:Lr,index:yy,item:my,trigger:$t}),(by=v.value)===null||by===void 0||by.call(v,{e:Lr,index:yy,item:my,trigger:$t,value:K$})}Y.value=Be}},Re=function(Be){var Ke,Lr=Be.displayNode,_y=Be.label,by=$.value?W.value.slice(0,$.value):W.value,yy=Lr?[Lr]:(by==null||(Ke=by.map)===null||Ke===void 0?void 0:Ke.call(by,function(K$,Y$){var W$,U$=l("tag",{params:{value:K$}});return createVNode(Ig,mergeProps({key:"".concat(K$).concat(Y$),size:y.value,disabled:re.value,onClose:function(hy){return de({e:hy.e,index:Y$})},closable:!se.value&&!re.value},(W$=C.value)===null||W$===void 0?void 0:W$.call(C,Y$,K$),x.value),{default:function(){return[U$??K$]}})}))||[];if([null,void 0,""].includes(_y)||yy.unshift(createVNode("div",{class:"".concat(c.value,"-tag-input__prefix"),key:"label"},[_y])),by.length!==(W.value||[]).length){var my=W.value.length-by.length,$t=l("collapsedItems",{params:{value:W.value,count:W.value.length-$.value,collapsedTags:W.value.slice($.value,W.value.length),collapsedSelectedItems:W.value.slice($.value,W.value.length),onClose:de}});yy.push($t??createVNode(Ig,mergeProps({key:"more",size:y.value},x.value),{default:function(){return["+",my]}}))}return yy};return{tagValue:W,clearAll:he,onClose:de,onInnerEnter:ge,onInputBackspaceKeyUp:Se,onInputBackspaceKeyDown:Ae,renderLabel:Re}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function gz(s){var l=s.disabled,c=s.readonly,d=s.onMouseenter,f=s.onMouseleave,g=ref(!1),v=function($){c||l||(g.value=!0,d==null||d($))},b=function($){c||l||(g.value=!1,f==null||f($))};return{isHover:g,addHover:v,cancelHover:b}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function bz(s){var l=s.sortOnDraggable,c=s.onDragSort,d=s.onDragOverCheck,f=ref(-1),g=ref(null),v=ref(null),b=reactive({nodeX:0,nodeWidth:0,mouseX:0}),$=function(N,W,q){if(N.preventDefault(),!(f.value===W||f.value===-1)){var Y=N.target;if(!(d!=null&&d.targetClassNameRegExp&&!(d!=null&&d.targetClassNameRegExp.test(Y.className)))){if(d!=null&&d.x&&Y){if(!b.nodeWidth)return;var re=Y.getBoundingClientRect(),se=re.x,de=re.width,he=se+de/2,ge=N.clientX-(b.mouseX-b.nodeX),Se=ge+b.nodeWidth,Ae=!1;if(ge>se&&ge<se+de?Ae=ge<he:Ae=Se>he,!Ae)return}c==null||c({currentIndex:f.value,current:g,target:q,targetIndex:W}),f.value=W}}};if(!l)return{};function y(N,W,q){f.value=W,g.value=q;var Y=N.target;if(d&&Y){var re=Y.getBoundingClientRect(),se=re.x,de=re.width;b.nodeX=se,b.nodeWidth=de,b.mouseX=N.clientX}}function x(){v.value=!0}function C(){v.value,v.value=!1,f.value=-1,g.value=null}function E(N,W){return l?{draggable:!0,onDragstart:function(q){y(q,N,W)},onDragover:function(q){$(q,N,W)},onDrop:function(){x()},onDragend:function(){C()}}:{}}return{onDragStart:y,onDragOver:$,onDrop:x,onDragEnd:C,getDragProps:E,dragging:f.value!==-1}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function jg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function qr(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?jg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):jg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var yz=function(){return{NAME_CLASS:we("tag-input"),CLEAR_CLASS:we("tag-input__suffix-clear"),BREAK_LINE_CLASS:we("tag-input--break-line")}},_z=defineComponent({name:"TTagInput",props:qr({},jR),setup:function(s){var l=yz(),c=l.NAME_CLASS,d=l.CLEAR_CLASS,f=l.BREAK_LINE_CLASS,g=Qn({CloseCircleFilledIcon:ev}),v=g.CloseCircleFilledIcon,b=Jt(),$=Ki(),y=toRefs(s),x=y.inputValue,C=y.inputProps,E=ga(x,s.defaultInputValue,s.onInputChange,"inputValue"),N=je(E,2),W=N[0],q=N[1],Y=toRefs(s),re=Y.excessTagsDisplayType,se=Y.clearable,de=Y.placeholder,he=gz({readonly:$.value,disabled:b.value,onMouseenter:s.onMouseenter,onMouseleave:s.onMouseleave}),ge=he.isHover,Se=he.addHover,Ae=he.cancelHover,Re=ref(!1),Be=Mt(),Ke=Be.classPrefix,Lr=ref(!1),_y=bz(qr(qr({},s),{},{sortOnDraggable:s.dragSort,onDragOverCheck:{x:!0,targetClassNameRegExp:new RegExp("^".concat(Ke.value,"-tag"))}})),by=_y.getDragProps,yy=DR(s),my=yy.scrollToRight,$t=yy.onWheel,K$=yy.scrollToRightOnEnter,Y$=yy.scrollToLeftOnLeave,W$=yy.tagInputRef,U$=yy.isScrollable,hy=hz(reactive(qr(qr({},toRefs(s)),{},{getDragProps:by}))),G$=hy.tagValue,ky=hy.onInnerEnter,$y=hy.onInputBackspaceKeyUp,rS=hy.onInputBackspaceKeyDown,lS=hy.clearAll,bS=hy.renderLabel,IS=hy.onClose,BS=computed(function(){var xS=!(at(G$.value)&&G$.value.length);return[c.value,ne(ne(ne({},f.value,re.value==="break-line"),"".concat(Ke.value,"-is-empty"),xS),"".concat(Ke.value,"-tag-input--with-tag"),!xS)]}),MS=computed(function(){var xS;return(xS=G$.value)!==null&&xS!==void 0&&xS.length?"":de.value}),zS=computed(function(){var xS;return!!(!$.value&&!b.value&&se.value&&ge.value&&(!((xS=G$.value)===null||xS===void 0)&&xS.length||W.value))}),LS=function(xS,OS){var mS,pS;(mS=OS.e)===null||mS===void 0||(pS=mS.preventDefault)===null||pS===void 0||pS.call(mS),q("",{e:OS.e,trigger:"enter"}),!Re.value&&ky(xS,OS),nextTick(function(){my(),Re.value=!1})},nS=function(xS,OS){var mS,pS;Re.value=!0,(mS=C.value)===null||mS===void 0||(pS=mS.onCompositionstart)===null||pS===void 0||pS.call(mS,xS,OS)},Z$=function(xS,OS){var mS,pS;Re.value=!1,(mS=C.value)===null||mS===void 0||(pS=mS.onCompositionend)===null||pS===void 0||pS.call(mS,xS,OS)},dS=function(xS){var OS;b.value||(Lr.value=!0,W$.value.focus(),(OS=s.onClick)===null||OS===void 0||OS.call(s,xS))},ES=function(xS){var OS;lS(xS),q("",{e:xS.e,trigger:"clear"}),(OS=s.onClear)===null||OS===void 0||OS.call(s,xS)},wy=function(){W$.value.focus()},tS=function(){W$.value.blur()},yS=function(xS){Se(xS),K$()},Q$=function(xS){Ae(xS),Y$()},eS=function(xS,OS){var mS;Lr.value||(Lr.value=!0,(mS=s.onFocus)===null||mS===void 0||mS.call(s,G$.value,{e:OS.e,inputValue:xS}))},cS=function(xS,OS){var mS;Lr.value=!1,q("",{e:OS.e,trigger:"blur"}),(mS=s.onBlur)===null||mS===void 0||mS.call(s,G$.value,{e:OS.e,inputValue:xS})},wS=function(xS,OS){q(xS,qr(qr({},OS),{},{trigger:"input"}))};return watch(function(){return U$.value},function(xS){if(s.excessTagsDisplayType==="scroll"){var OS="".concat(Ke.value,"-input__prefix"),mS=W$.value.$el.querySelector(".".concat(OS));xS?mS.classList.add("".concat(OS,"--scrollable")):mS.classList.remove("".concat(OS,"--scrollable"))}}),{CLEAR_CLASS:d,CloseCircleFilledIcon:v,tagValue:G$,tInputValue:W,isHover:ge,tagInputPlaceholder:MS,showClearIcon:zS,tagInputRef:W$,classPrefix:Ke,isFocused:Lr,focus:wy,blur:tS,setTInputValue:q,onMouseEnter:yS,onMouseLeave:Q$,onInnerFocus:eS,onInnerBlur:cS,onInnerChange:wS,addHover:Se,cancelHover:Ae,onInputEnter:LS,onInnerEnter:ky,onInputBackspaceKeyUp:$y,onInputBackspaceKeyDown:rS,renderLabel:bS,onWheel:$t,scrollToRightOnEnter:K$,scrollToLeftOnLeave:Y$,onClick:dS,onClearClick:ES,onClose:IS,onInputCompositionstart:nS,onInputCompositionend:Z$,classes:BS,isDisabled:b,isReadonly:$}},render:function(){var s=this,l,c=this.CloseCircleFilledIcon,d=this.showClearIcon?createVNode(c,{class:this.CLEAR_CLASS,onClick:this.onClearClick},null):ur(this,"suffixIcon"),f=ur(this,"prefixIcon"),g="".concat(this.classPrefix,"-tag-input__with-suffix-icon");d&&!this.classes.includes(g)&&this.classes.push(g);var v=ur(this,"valueDisplay",{params:{value:this.tagValue,onClose:function(x){return s.onClose({index:x})}}}),b=ur(this,"label",{silent:!0}),$=this.inputProps,y=this.isReadonly||($==null?void 0:$.readonly);return createVNode(er,mergeProps({ref:"tagInputRef",borderless:this.borderless,readonly:y,showInput:!y||!this.tagValue||!((l=this.tagValue)!==null&&l!==void 0&&l.length),value:this.tInputValue,autoWidth:!0,size:this.size,disabled:this.isDisabled,label:function(){return s.renderLabel({displayNode:v,label:b})},class:this.classes,tips:this.tips,status:this.status,placeholder:this.tagInputPlaceholder,suffix:this.suffix,suffixIcon:function(){return d},prefixIcon:function(){return f},keepWrapperWidth:!this.autoWidth,onWheel:this.onWheel,onChange:this.onInnerChange,onPaste:this.onPaste,onEnter:this.onInputEnter,onKeyup:this.onInputBackspaceKeyUp,onKeydown:this.onInputBackspaceKeyDown,onMouseenter:this.onMouseEnter,onMouseleave:this.onMouseLeave,onFocus:this.onInnerFocus,onBlur:this.onInnerBlur,onClick:this.onClick,onCompositionstart:this.onInputCompositionstart,onCompositionend:this.onInputCompositionend},this.inputProps),{suffix:this.$slots.suffix})}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var wz=ze(_z);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Cz=["tips"];function Dg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function In(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Dg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Dg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var kz={label:"label",key:"key",children:"children"};function $z(s,l,c){var d=toRefs(s),f=d.inputValue,g=we(),v=ref(),b=ref(s.autofocus),$=ga(f,s.defaultInputValue,s.onInputChange,"inputValue"),y=je($,2),x=y[0],C=y[1],E=Jt(),N=computed(function(){return In(In({},kz),s.keys)}),W=computed(function(){return s.value instanceof Array?s.value.map(function(Se){return jt(Se)?Se[N.value.label]:Se}):jt(s.value)?[s.value[N.value.label]]:[s.value]}),q=computed(function(){return!W.value||!W.value.length?s.placeholder:""}),Y=function(Se,Ae){var Re;if(Ae.trigger==="tag-remove"){var Be;(Be=Ae.e)===null||Be===void 0||Be.stopPropagation()}(Re=s.onTagChange)===null||Re===void 0||Re.call(s,Se,Ae)},re=function(Se,Ae){Ae.trigger==="enter"||Ae.trigger==="blur"||C(Se,{trigger:Ae.trigger,e:Ae.e})},se=function(Se,Ae){var Re,Be,Ke=(Re=c.value)===null||Re===void 0?void 0:Re.getOverlayState();Ke!=null&&Ke.hover||(b.value=!1,(Be=s.onBlur)===null||Be===void 0||Be.call(s,s.value,In(In({},Ae),{},{tagInputValue:Se})))},de=function(Se,Ae){var Re,Be,Ke=(Re=c.value)===null||Re===void 0?void 0:Re.getOverlayState();if(!(b.value||Ke!=null&&Ke.hover)){b.value=!0;var Lr=In(In({},Ae),{},{tagInputValue:Se});(Be=s.onFocus)===null||Be===void 0||Be.call(s,s.value,Lr)}},he=function(Se,Ae){var Re,Be=In(In({},Ae),{},{tagInputValue:Se});(Re=s.onEnter)===null||Re===void 0||Re.call(s,s.value,Be)},ge=function(Se){var Ae=In(In({},Se.commonInputProps),{},{tagProps:s.tagProps,label:s.label,autoWidth:s.autoWidth,readonly:s.readonly,placeholder:q.value,minCollapsedNum:s.minCollapsedNum,collapsedItems:s.collapsedItems,tag:s.tag,value:W.value,valueDisplay:s.valueDisplay,inputValue:Se.popupVisible&&Se.allowInput?x.value:"",inputProps:In({readonly:!s.allowInput||s.readonly,inputClass:ne({},"".concat(g.value,"-input--focused"),Se.popupVisible)},s.inputProps),suffixIcon:!E.value&&s.loading?function(){return createVNode(Qs,{loading:!0,size:"small"},null)}:s.suffixIcon},s.tagInputProps),Re=l.slots;Re.tips;var Be=Ri(Re,Cz);return createVNode(wz,mergeProps({ref:v},Ae,{onInputChange:re,onChange:Y,onClear:Se.onInnerClear,onBlur:se,onEnter:he,onFocus:de}),Be)};return{tags:W,tPlaceholder:q,tagInputRef:v,isMultipleFocus:b,multipleInputValue:x,renderSelectMultiple:ge}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Bg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Fg(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Bg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Bg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var Sz=1e3,xz=0;function Oz(s){var l=toRefs(s),c=l.popupProps,d=l.autoWidth,f=ref(!1),g=Jt(),v=function(x,C){var E=C.scrollHeight>C.offsetHeight?xz:0,N=C.offsetWidth+E>=x.offsetWidth?C.offsetWidth:x.offsetWidth,W={};return c.value&&Zt(c.value.overlayInnerStyle)==="object"&&!c.value.overlayInnerStyle.width&&(W=c.value.overlayInnerStyle),Fg({width:"".concat(Math.min(N,Sz),"px")},W)},b=function(x,C){if(!(g.value||s.readonly)){var E=C.trigger==="trigger-element-click"&&s.allowInput?!0:x;if(s.popupVisible!==E){var N;f.value=E,(N=s.onPopupVisibleChange)===null||N===void 0||N.call(s,E,C)}}},$=function(x,C){var E;return Fg({width:"".concat(Math.max(x.offsetWidth,C.offsetWidth),"px")},(E=c.value)===null||E===void 0?void 0:E.overlayInnerStyle)},y=computed(function(){var x,C={},E=((x=c.value)===null||x===void 0?void 0:x.overlayInnerStyle)||{};return rt(E)||jt(E)&&E.width?C=E:d.value?C=$:C=v,C});return{tOverlayInnerStyle:y,innerPopupVisible:f,onInnerPopupVisibleChange:b}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Lg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function ar(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Lg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Lg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var Ez=function(){return{NAME_CLASS:we("select-input"),BASE_CLASS_BORDERLESS:we("select-input--borderless"),BASE_CLASS_MULTIPLE:we("select-input--multiple"),BASE_CLASS_POPUP_VISIBLE:we("select-input--popup-visible"),BASE_CLASS_EMPTY:we("select-input--empty")}},Az=defineComponent({name:"TSelectInput",props:ar(ar({},AR),{},{valueDisplayOptions:{type:Object}}),setup:function(s,l){var c=Ez(),d=c.NAME_CLASS,f=c.BASE_CLASS_BORDERLESS,g=c.BASE_CLASS_MULTIPLE,v=c.BASE_CLASS_POPUP_VISIBLE,b=c.BASE_CLASS_EMPTY,$=we(),y=Ye(),x=ref(),C=ref(),E=toRefs(s),N=E.multiple,W=E.value,q=E.popupVisible,Y=E.borderless,re=Oz(s),se=re.tOverlayInnerStyle,de=re.innerPopupVisible,he=re.onInnerPopupVisibleChange,ge=NR(s,l,C),Se=ge.isSingleFocus,Ae=ge.commonInputProps,Re=ge.onInnerClear,Be=ge.renderSelectSingle,Ke=$z(s,l,C),Lr=Ke.isMultipleFocus,_y=Ke.tagInputRef,by=Ke.renderSelectMultiple,yy=computed(function(){return s.multiple?Lr.value:Se.value}),my=computed(function(){var Y$;return["".concat(d.value),ne(ne(ne(ne({},g.value,N.value),f.value,Y.value),v.value,(Y$=q.value)!==null&&Y$!==void 0?Y$:de.value),b.value,W.value instanceof Array?!W.value.length:!W.value)]}),$t=function(Y$){var W$,U$=Y$.code||((W$=Y$.key)===null||W$===void 0?void 0:W$.trim());if(/(ArrowDown|ArrowUp)/.test(U$)&&!q.value){var hy,G$=ar(ar({},l),{},{trigger:"trigger-element-focus"});(hy=s.onPopupVisibleChange)===null||hy===void 0||hy.call(s,!0,G$)}};watch([yy],function(Y$){var W$=je(Y$,1),U$=W$[0];q.value||(U$?x.value.addEventListener("keydown",$t):x.value.removeEventListener("keydown",$t))}),onMounted(function(){!q.value&&yy&&x.value.addEventListener("keydown",$t)}),onBeforeUnmount(function(){x.value.removeEventListener("keydown",$t)});var K$=function(Y$){var W$,U$;(W$=Y$.e)===null||W$===void 0||W$.stopPropagation(),!(Y$.e.target.tabIndex>=0)&&s.multiple&&((U$=_y.value)===null||U$===void 0||U$.focus())};return{classPrefix:$,NAME_CLASS:d,innerPopupVisible:de,commonInputProps:Ae,tOverlayInnerStyle:se,selectInputRef:x,popupRef:C,classes:my,onInnerClear:Re,renderTNodeJSX:y,renderSelectSingle:Be,renderSelectMultiple:by,onOverlayClick:K$,onInnerPopupVisibleChange:he}},render:function(){var s,l,c=this,d={visible:(s=this.popupVisible)!==null&&s!==void 0?s:this.innerPopupVisible},f=createVNode(Pn,mergeProps({ref:"popupRef",trigger:((l=this.popupProps)===null||l===void 0?void 0:l.trigger)||"click",placement:"bottom-left"},d,{content:this.panel,hideEmptyPopup:!0},ar(ar({onVisibleChange:this.onInnerPopupVisibleChange,onOverlayClick:this.onOverlayClick},this.popupProps),{},{overlayInnerStyle:this.tOverlayInnerStyle})),ar({default:function(){return[c.multiple?c.renderSelectMultiple({commonInputProps:c.commonInputProps,onInnerClear:c.onInnerClear,popupVisible:d.visible,allowInput:c.allowInput}):c.renderSelectSingle(d.visible)]}},ar(ar({},this.$slots),{},{content:this.$slots.panel}))),g=this.renderTNodeJSX("tips"),v=["".concat(this.classPrefix,"-input__tips"),"".concat(this.classPrefix,"-tips"),"".concat(this.classPrefix,"-is-").concat(this.status)];return createVNode("div",{ref:"selectInputRef",class:this.classes},[f,g&&createVNode("div",{class:v},[g])])}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Tz=ze(Az);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Pz={checkAll:Boolean,content:{type:[String,Function]},default:{type:[String,Function]},disabled:Boolean,label:{type:String,default:""},title:{type:String,default:""},value:{type:[String,Number]}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Mz={checkAll:Boolean,checked:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultChecked:Boolean,default:{type:[String,Function]},disabled:{type:Boolean,default:void 0},readonly:{type:Boolean,default:void 0},indeterminate:Boolean,label:{type:[String,Function]},lazyLoad:Boolean,name:{type:String,default:""},value:{type:[String,Number,Boolean]},onChange:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Iw=Symbol("CheckboxGroupProvide");/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Nw(s,l,c,d){if(typeof window>"u")return null;if(!window||!window.IntersectionObserver)return c(),null;var f=null;try{f=new window.IntersectionObserver(function(g){var v=g[0];v.isIntersecting&&(c(),f.unobserve(s))},{rootMargin:"0px 0px ".concat(d,"px 0px"),root:l}),f.observe(s)}catch(g){console.error(g),c()}return f}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Iz(s,l){var c=ref(),d=ref(!0),f=function(){if(l.value){d.value=!1;var g=Nw(s.value,null,function(){d.value=!0},0);c.value=g}};return onMounted(f),watch([l,s],f),onBeforeUnmount(function(){l.value&&c.value.unobserve(s.value)}),{showCheckbox:d}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Nz(s){var l=function(f){var g=is.test(f.key)||is.test(f.code);if(g){f.preventDefault();var v=f.currentTarget.querySelector("input"),b=v.disabled;!b&&s(f)}},c=function(f){f.currentTarget.addEventListener("keydown",l)},d=function(f){f.currentTarget.removeEventListener("keydown",l)};return{onCheckboxFocus:c,onCheckboxBlur:d}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Rg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function zg(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Rg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Rg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var jw=defineComponent({name:"TCheckbox",props:zg(zg({},Mz),{},{needRipple:Boolean,stopLabelTrigger:Boolean,index:Number,data:Object}),setup:function(s){var l=ref();s.needRipple&&eu(l);var c=Ft(),d=c.STATUS,f=toRefs(s),g=f.checked,v=f.modelValue,b=f.lazyLoad,$=Lt(g,v,s.defaultChecked,s.onChange,"checked"),y=je($,2),x=y[0],C=y[1],E=inject(Iw,void 0),N=ref();watch(function(){return[s.name,E==null?void 0:E.value.name].join("_")},function(){var $t=s.name||(E==null?void 0:E.value.name);$t&&(N.value=$t)},{immediate:!0});var W=ref(!1),q=function(){var $t=s.value,K$=s.checkAll;return K$?E==null?void 0:E.value.isCheckAll:E!=null&&E.value?E.value.checkedValues.includes($t):x.value};watch(function(){var $t;return[x.value,E==null?void 0:E.value.isCheckAll,E==null||($t=E.value.checkedValues)===null||$t===void 0?void 0:$t.join(",")]},function(){W.value=q()},{immediate:!0});var Y=computed(function(){return!s.checkAll&&!W.value&&E!==null&&E!==void 0&&E.value.maxExceeded?!0:null}),re=computed(function(){return E==null?void 0:E.value.disabled}),se=Jt({beforeDisabled:Y,afterDisabled:re}),de=computed(function(){return E==null?void 0:E.value.readonly}),he=Ki({afterReadonly:de}),ge=ref(!1);watch(function(){return[s.checkAll,s.indeterminate,E==null?void 0:E.value.indeterminate]},function(){ge.value=s.checkAll?E==null?void 0:E.value.indeterminate:s.indeterminate},{immediate:!0});var Se=we("checkbox"),Ae=ref({});watch([W,se,ge],function(){Ae.value=["".concat(Se.value),ne(ne(ne({},d.value.checked,W.value),d.value.disabled,se.value),d.value.indeterminate,ge.value)]},{immediate:!0});var Re=function($t){if(!he.value){var K$=!W.value;C(K$,{e:$t}),E!=null&&E.value.handleCheckboxChange&&E.value.onCheckedChange({checked:K$,checkAll:s.checkAll,e:$t,option:s})}},Be=Xt(),Ke=function($t){s.stopLabelTrigger&&$t.preventDefault()},Lr=Iz(l,b),_y=Lr.showCheckbox,by=Nz(Re),yy=by.onCheckboxFocus,my=by.onCheckboxBlur;return function(){return createVNode("label",{ref:l,class:Ae.value,tabindex:se.value?void 0:"0",onFocus:yy,onBlur:my},[_y.value?[createVNode("input",{type:"checkbox",tabindex:"-1",class:"".concat(Se.value,"__former"),disabled:se.value,readonly:he.value,indeterminate:ge.value,name:N.value,value:s.value?s.value:void 0,checked:W.value,onChange:Re,key:"input"},null),createVNode("span",{class:"".concat(Se.value,"__input"),key:"input-span"},null),createVNode("span",{class:"".concat(Se.value,"__label"),key:"label",onClick:Ke},[Be("default","label")])]:null])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var jz={disabled:{type:Boolean,default:void 0},readonly:{type:Boolean,default:void 0},lazyLoad:Boolean,max:{type:Number,default:void 0},name:{type:String,default:""},options:{type:Array},value:{type:Array,default:void 0},modelValue:{type:Array,default:void 0},defaultValue:{type:Array,default:function(){return[]}},onChange:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Dz=defineComponent({name:"TCheckboxGroup",props:jz,setup:function(s){var l=we("checkbox-group"),c=Ye(),d=Array.isArray,f=toRefs(s),g=f.value,v=f.modelValue,b=Lt(g,v,s.defaultValue,s.onChange),$=je(b,2),y=$[0],x=$[1],C=ref([]),E=computed(function(){if(!d(y.value))return 0;var Se=C.value.map(function(Re){return Re.value}),Ae=Ld(y.value,Se);return Ae.length}),N=computed(function(){var Se=C.value.filter(function(Re){return!Re.disabled&&!Re.readonly&&!Re.checkAll}).map(function(Re){return Re.value}),Ae=Ld(Se,y.value);return Ae.length===Se.length}),W=computed(function(){return!N.value&&E.value<C.value.length&&E.value!==0}),q=computed(function(){return!ma(s.max)&&y.value.length===s.max});watchEffect(function(){if(!s.options)return[];C.value=s.options.map(function(Se){return jt(Se)?Se:{label:String(Se),value:Se}})});var Y=function(){for(var Se=new Set,Ae=0,Re=C.value.length;Ae<Re;Ae++){var Be=C.value[Ae];if(!Be.checkAll&&!Be.disabled&&!Be.readonly&&(Se.add(Be.value),q.value))break}return wt(Se)},re=function(Se,Ae){var Re=Se?Y():[];x(Re,{e:Ae.e,type:Se?"check":"uncheck",current:void 0,option:void 0})},se=function(Se){var Ae=Se.option.value;if(!d(y.value)){console.warn("TDesign CheckboxGroup Warn: `value` must be an array, instead of ".concat(Zt(y.value)));return}var Re=wt(y.value);if(Se.checked)Re.push(Ae);else{var Be=Re.indexOf(Ae);Re.splice(Be,1)}x(Re,{e:Se.e,current:Se.option.value,option:Se.option,type:Se.checked?"check":"uncheck"})},de=function(Se){var Ae=Se.checked,Re=Se.checkAll,Be=Se.e;Re?re(Ae,{e:Be}):se(Se)},he=nv(),ge=function(){var Se=he("Checkbox"),Ae=[];return Se==null||Se.forEach(function(Re){var Be=Re.props;Be&&((Be["check-all"]===""||Be["check-all"]===!0)&&(Be.checkAll=!0),Ae.push(Be))}),Ae};return provide(Iw,computed(function(){return{name:s.name,isCheckAll:N.value,checkedValues:y.value||[],maxExceeded:q.value,disabled:s.disabled,readonly:s.readonly,indeterminate:W.value,handleCheckboxChange:se,onCheckedChange:de}})),function(){var Se,Ae=null;if((Se=s.options)!==null&&Se!==void 0&&Se.length){var Re;Ae=(Re=C.value)===null||Re===void 0?void 0:Re.map(function(Ke,Lr){var _y;return createVNode(jw,mergeProps({key:"".concat(Ke.value||"").concat(Lr),lazyLoad:s.lazyLoad},Ke,{index:Lr,checked:(_y=y.value)===null||_y===void 0?void 0:_y.includes(Ke.value),data:Ke}),null)})}else{var Be=c("default");C.value=ge(),Ae=Be}return createVNode("div",{class:l.value,role:"group","aria-label":"checkbox-group"},[Ae])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var iu=ze(jw);ze(Dz);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Bz(s,l){var c=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=Fz(s))||l){c&&(s=c);var d=0,f=function(){};return{s:f,n:function(){return d>=s.length?{done:!0}:{done:!1,value:s[d++]}},e:function($){throw $},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g,v=!0,b=!1;return{s:function(){c=c.call(s)},n:function(){var $=c.next();return v=$.done,$},e:function($){b=!0,g=$},f:function(){try{v||c.return==null||c.return()}finally{if(b)throw g}}}}function Fz(s,l){if(s){if(typeof s=="string")return Vg(s,l);var c={}.toString.call(s).slice(8,-1);return c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set"?Array.from(s):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Vg(s,l):void 0}}function Vg(s,l){(l==null||l>s.length)&&(l=s.length);for(var c=0,d=Array(l);c<l;c++)d[c]=s[c];return d}var lu=Symbol("selectProvide"),zd=function(s,l){var c=l.value.get(s);return(c==null?void 0:c.label)||(s==null?void 0:s.toString())},Lz=function(s,l){var c=[],d=Bz(s),f;try{for(d.s();!(f=d.n()).done;){var g=f.value,v=zd(g,l);v&&c.push(v)}}catch(b){d.e(b)}finally{d.f()}return c},Dw=function(s,l){var c=Pr(s),d=c.indexOf(l);return d<0?c.push(l):c.splice(d,1),{value:c,isCheck:d<0}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Hg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Ug(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Hg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Hg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function Rz(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!isVNode$1(s)}var Vd=defineComponent({name:"TOption",props:Ug(Ug({},Pz),{},{createAble:Boolean,multiple:Boolean,index:Number,rowIndex:Number,trs:Map,scrollType:String,isVirtual:Boolean,bufferSize:Number,checkAll:Boolean}),emits:["row-mounted"],setup:function(s,l){var c=inject(lu),d=Jt(),f=computed(function(){return c.value.max!==0&&c.value.max<=c.value.selectValue.length}),g=computed(function(){return d.value||s.multiple&&f.value&&!N.value&&!c.value.isCheckAll}),v=Xt(),b=we("select"),$=Ft(),y=$.STATUS,x=$.SIZE,C=ref(),E=ref(!1),N=computed(function(){return c.value.isCheckAll&&!s.disabled?!0:s.multiple?c.value.selectValue.includes(s.value):c.value.selectValue===s.value}),W=computed(function(){return s.checkAll?c.value.indeterminate:!1}),q=computed(function(){return["".concat(b.value,"-option"),[x.value[c.value.size]],ne(ne(ne({},y.value.disabled,g.value),y.value.selected,N.value),"".concat(b.value,"-option__hover"),(E.value||c.value.hoverIndex===s.index)&&!g.value)]}),Y=computed(function(){return s.label||s.value}),re=function(de){if(!(s.disabled||g.value)){if(s.multiple){se(!N.value,{e:de}),de.preventDefault();return}if(s.createAble){var he,ge;if((he=(ge=c.value).handleCreate)===null||he===void 0||he.call(ge,s.value),c.value.multiple){c.value.handleValueChange([].concat(wt(c.value.selectValue),[s.value]),{selectedOptions:c.value.getSelectedOptions(),trigger:"check",e:de});return}}var Se=c.value.getSelectedOptions(s.value);c.value.handleValueChange(s.value,{option:Se==null?void 0:Se[0],selectedOptions:Se,trigger:"check",e:de}),c.value.handlePopupVisibleChange(!1,{e:de})}},se=function(de,he){if(s.checkAll){c.value.onCheckAllChange(de);return}var ge=Dw(c.value.selectValue,s.value),Se=c.value.getSelectedOptions(ge.value);c.value.handleValueChange(ge.value,{option:Se.find(function(Ae){return Ae.value===s.value}),selectedOptions:Se,trigger:de?"check":"uncheck",e:he.e}),c.value.reserveKeyword||c.value.handlerInputChange("")};return onMounted(function(){var de=s.trs,he=s.rowIndex,ge=s.isVirtual;ge&&(de.set(he,C.value),l.emit("row-mounted"))}),onBeforeUnmount(function(){if(s.isVirtual){var de=s.trs,he=s.rowIndex;de.delete(he)}}),eu(C),function(){var de=v("default","content")||Y.value;return createVNode("li",{ref:C,class:q.value,title:s.title||"".concat(Y.value),onMouseenter:function(){return E.value=!0},onMouseleave:function(){return E.value=!1},onClick:re},[c&&s.multiple?createVNode(iu,{checked:N.value,disabled:g.value,onChange:se,indeterminate:W.value},Rz(de)?de:{default:function(){return[de]}}):createVNode("span",null,[de])])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var zz={divider:{type:Boolean,default:!0},label:{type:String,default:""}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Kg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Vz(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Kg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Kg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var Bw=defineComponent({name:"TOptionGroup",props:Vz({},zz),setup:function(s){var l=inject(lu),c=we("select-option-group"),d=Ft(),f=d.SIZE,g=Ye(),v=computed(function(){return[c.value,f.value[l.value.size],ne({},"".concat(c.value,"__divider"),s.divider)]});return function(){return createVNode("li",{class:v.value},[createVNode("div",{class:"".concat(c.value,"__header")},[s.label]),g("default")])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var cn={autoWidth:Boolean,autofocus:Boolean,borderless:Boolean,clearable:Boolean,collapsedItems:{type:Function},creatable:Boolean,disabled:{type:Boolean,default:void 0},empty:{type:[String,Function]},filter:{type:Function},filterable:Boolean,inputProps:{type:Object},inputValue:{type:[String,Number],default:void 0},defaultInputValue:{type:[String,Number]},keys:{type:Object},label:{type:[String,Function]},loading:Boolean,loadingText:{type:[String,Function]},max:{type:Number,default:0},minCollapsedNum:{type:Number,default:0},multiple:Boolean,options:{type:Array},panelBottomContent:{type:[String,Function]},panelTopContent:{type:[String,Function]},placeholder:{type:String,default:void 0},popupProps:{type:Object},popupVisible:{type:Boolean,default:void 0},defaultPopupVisible:Boolean,prefixIcon:{type:Function},readonly:Boolean,reserveKeyword:Boolean,scroll:{type:Object},selectInputProps:{type:Object},showArrow:{type:Boolean,default:!0},size:{type:String,default:"medium",validator:function(s){return s?["small","medium","large"].includes(s):!0}},status:{type:String,default:"default",validator:function(s){return s?["default","success","warning","error"].includes(s):!0}},suffix:{type:[String,Function]},suffixIcon:{type:Function},tagInputProps:{type:Object},tagProps:{type:Object},tips:{type:[String,Function]},value:{type:[String,Number,Boolean,Object,Array],default:void 0},modelValue:{type:[String,Number,Boolean,Object,Array],default:void 0},defaultValue:{type:[String,Number,Boolean,Object,Array],default:void 0},valueDisplay:{type:[String,Function]},valueType:{type:String,default:"value",validator:function(s){return s?["value","object"].includes(s):!0}},onBlur:Function,onChange:Function,onClear:Function,onCreate:Function,onEnter:Function,onFocus:Function,onInputChange:Function,onPopupVisibleChange:Function,onRemove:Function,onSearch:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Hz=function(s){var l,c,d,f,g,v=computed(function(){var Re,Be,Ke;return((Re=s.scroll)===null||Re===void 0?void 0:Re.type)==="virtual"&&((Be=s.options.value)===null||Be===void 0?void 0:Be.length)>(((Ke=s.scroll)===null||Ke===void 0?void 0:Ke.threshold)||100)}),b=((l=s.scroll)===null||l===void 0?void 0:l.type)==="virtual"?eF({container:s.popupContentRef,data:s.options,fixedHeight:((c=s.scroll)===null||c===void 0?void 0:c.isFixedRowHeight)||!1,lineHeight:((d=s.scroll)===null||d===void 0?void 0:d.rowHeight)||28,bufferSize:((f=s.scroll)===null||f===void 0?void 0:f.bufferSize)||20,threshold:((g=s.scroll)===null||g===void 0?void 0:g.threshold)||100}):{},$=b.trs,y=$===void 0?null:$,x=b.visibleData,C=x===void 0?null:x,E=b.handleScroll,N=E===void 0?null:E,W=b.scrollHeight,q=W===void 0?null:W,Y=b.translateY,re=Y===void 0?null:Y,se=b.handleRowMounted,de=se===void 0?null:se,he=-1,ge=function(Re){if(v.value){var Be=Re.target,Ke=Be.scrollTop;Math.abs(he-Ke)>5?(N(),he=Ke):he=-1}};onMounted(function(){var Re;(Re=s.popupContentRef.value)===null||Re===void 0||Re.addEventListener("scroll",ge)}),onBeforeUnmount(function(){var Re;(Re=s.popupContentRef.value)===null||Re===void 0||Re.removeEventListener("scroll",ge)});var Se=computed(function(){return{position:"absolute",width:"1px",height:"1px",transition:"transform 0.2s",transform:"translate(0, ".concat(q.value,"px)"),"-ms-transform":"translate(0, ".concat(q.value,"px)"),"-moz-transform":"translate(0, ".concat(q.value,"px)"),"-webkit-transform":"translate(0, ".concat(q.value,"px)")}}),Ae=computed(function(){return{transform:"translate(0, ".concat(re.value,"px)"),"-ms-transform":"translate(0, ".concat(re.value,"px)"),"-moz-transform":"translate(0, ".concat(re.value,"px)"),"-webkit-transform":"translate(0, ".concat(re.value,"px)")}});return{trs:y,scrollHeight:q,translateY:re,visibleData:C,handleRowMounted:de,isVirtual:v,cursorStyle:Se,panelStyle:Ae}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Uz(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!isVNode$1(s)}var Kz=defineComponent({name:"TSelectPanel",props:{inputValue:cn.inputValue,panelTopContent:cn.panelTopContent,panelBottomContent:cn.panelBottomContent,empty:cn.empty,creatable:cn.creatable,loading:cn.loading,loadingText:cn.loadingText,multiple:cn.multiple,filterable:cn.filterable,filter:cn.filter,scroll:cn.scroll,size:cn.size},setup:function(s,l){var c=l.expose,d=we("select"),f=Ye(),g=Qf(),v=Mt("select"),b=v.t,$=v.globalConfig,y=inject(lu),x=ref(null),C=computed(function(){return y.value.popupContentRef.value}),E=computed(function(){return s.creatable&&s.filterable&&s.inputValue}),N=computed(function(){return y.value.displayOptions}),W=Hz({scroll:s.scroll,popupContentRef:C,options:N}),q=W.trs,Y=W.visibleData,re=W.handleRowMounted,se=W.isVirtual,de=W.panelStyle,he=W.cursorStyle,ge=computed(function(){return!N.value.length}),Se=function(){return createVNode("ul",{class:["".concat(d.value,"__create-option"),"".concat(d.value,"__list")]},[createVNode(Vd,{value:s.inputValue,label:"".concat(s.inputValue),createAble:!0,class:"".concat(d.value,"__create-option--special")},null)])},Ae=function(Ke){return createVNode("ul",{class:"".concat(d.value,"__list")},[Ke.map(function(Lr,_y){var by,yy;if(Lr.group){var my;return createVNode(Bw,{label:Lr.group,divider:Lr.divider},Uz(my=Ae(Lr.children))?my:{default:function(){return[my]}})}return createVNode(Vd,mergeProps(ba(Lr,"index","$index","className","tagName"),se.value?{rowIndex:Lr.$index,trs:q,scrollType:(by=s.scroll)===null||by===void 0?void 0:by.type,isVirtual:se.value,bufferSize:(yy=s.scroll)===null||yy===void 0?void 0:yy.bufferSize,key:"".concat(Lr.$index||"","_").concat(_y)}:{key:"".concat(_y,"_").concat(Lr.value)},{index:_y,multiple:s.multiple,onRowMounted:re}),Lr.slots)})])},Re=computed(function(){return{small:"s",medium:"m",large:"l"}[y.value.size]});c({innerRef:x,visibleData:Y,isVirtual:se,displayOptions:N});var Be=function(Ke,Lr){return createVNode("div",{ref:x,class:["".concat(d.value,"__dropdown-inner"),"".concat(d.value,"__dropdown-inner--size-").concat(Re.value)],style:Lr},[E.value&&Se(),s.loading&&g("loadingText",{defaultNode:createVNode("div",{class:"".concat(d.value,"__loading-tips")},[b($.value.loadingText)])}),!s.loading&&ge.value&&!E.value&&g("empty",{defaultNode:createVNode("div",{class:"".concat(d.value,"__empty")},[b($.value.empty)])}),!ge.value&&!s.loading&&Ae(Ke)])};return{renderPanel:Be,panelStyle:de,cursorStyle:he,isVirtual:se,displayOptions:N,visibleData:Y,renderTNodeJSX:f}},render:function(){return this.isVirtual?createVNode(Fragment$1,null,[this.renderTNodeJSX("panelTopContent"),createVNode("div",null,[createVNode("div",{style:this.cursorStyle},null),this.renderPanel(this.visibleData,this.panelStyle)]),this.renderTNodeJSX("panelBottomContent")]):createVNode(Fragment$1,null,[this.renderTNodeJSX("panelTopContent"),this.renderPanel(this.displayOptions),this.renderTNodeJSX("panelBottomContent")])}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function vl(s,l){var c=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=Wz(s))||l){c&&(s=c);var d=0,f=function(){};return{s:f,n:function(){return d>=s.length?{done:!0}:{done:!1,value:s[d++]}},e:function($){throw $},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g,v=!0,b=!1;return{s:function(){c=c.call(s)},n:function(){var $=c.next();return v=$.done,$},e:function($){b=!0,g=$},f:function(){try{v||c.return==null||c.return()}finally{if(b)throw g}}}}function Wz(s,l){if(s){if(typeof s=="string")return Wg(s,l);var c={}.toString.call(s).slice(8,-1);return c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set"?Array.from(s):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?Wg(s,l):void 0}}function Wg(s,l){(l==null||l>s.length)&&(l=s.length);for(var c=0,d=Array(l);c<l;c++)d[c]=s[c];return d}function Gg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function bn(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Gg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Gg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var Gz=function(s,l,c){var d=nv(),f=ref([]),g=computed(function(){var y,x=0,C=((y=s.options)===null||y===void 0?void 0:y.map(function(Ke){var Lr=function(_y){var by=l.value,yy=by.value,my=by.label,$t=by.disabled,K$=bn(bn({},_y),{},{index:x,label:sr(_y,my),value:sr(_y,yy),disabled:sr(_y,$t)});return x++,K$};return Ke.group&&Ke.children?bn(bn({},Ke),{},{children:Ke.children.map(function(_y){return Lr(_y)})}):Lr(Ke)}))||[],E=d("Option"),N=d("OptionGroup");if(at(N)){var W=vl(N),q;try{for(W.s();!(q=W.n()).done;){var Y,re=q.value,se=bn(bn({group:(Y=re.props)===null||Y===void 0?void 0:Y.label},re.props),{},{children:[]}),de=d("Option",re.children);if(at(de)){var he=vl(de),ge;try{for(he.s();!(ge=he.n()).done;){var Se=ge.value;se.children.push(bn(bn({},Se.props),{},{slots:Se.children,index:x})),x++}}catch(Ke){he.e(Ke)}finally{he.f()}C.push(se)}}}catch(Ke){W.e(Ke)}finally{W.f()}}if(at(E)){var Ae=vl(E),Re;try{for(Ae.s();!(Re=Ae.n()).done;){var Be=Re.value;C.push(bn(bn({},Be.props),{},{slots:Be.children,index:x})),x++}}catch(Ke){Ae.e(Ke)}finally{Ae.f()}}return C}),v=computed(function(){var y=[],x=function(C){var E=vl(C),N;try{for(E.s();!(N=E.n()).done;){var W=N.value;W.group?x(W.children):y.push(W)}}catch(q){E.e(q)}finally{E.f()}};return x(g.value),y}),b=computed(function(){var y=new Map;return f.value.concat(v.value).forEach(function(x){y.set(x.value,x)}),y}),$=computed(function(){if(s.onSearch&&s.filterable||!c.value||!(s.filterable||rt(s.filter)))return g.value;var y=function(C){var E,N;return rt(s.filter)?s.filter("".concat(c.value),C):((E=C.label)===null||E===void 0||(N=E.toLowerCase)===null||N===void 0?void 0:N.call(E).indexOf("".concat(c.value).toLowerCase()))>-1},x=[];return g.value.forEach(function(C){C.group&&C.children&&x.push(bn(bn({},C),{},{children:C.children.filter(y)})),y(C)&&x.push(C)}),x});return{options:g,optionsMap:b,optionsList:v,optionsCache:f,displayOptions:$}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function qz(s){var l=s.displayOptions,c=s.optionsList,d=s.innerPopupVisible,f=s.setInnerPopupVisible,g=s.selectPanelRef,v=s.isFilterable,b=s.isRemoteSearch,$=s.getSelectedOptions,y=s.setInnerValue,x=s.innerValue,C=s.popupContentRef,E=s.multiple,N=s.max,W=ref(-1),q=ref([]),Y=ref([]),re=we(),se=function(de){var he,ge,Se=l.value.length,Ae=W.value;switch(de.code){case"ArrowUp":de.preventDefault(),W.value===-1?Ae=0:W.value===0||W.value>l.value.length-1?Ae=Se-1:Ae--,(he=c.value[Ae])!==null&&he!==void 0&&he.disabled&&Ae--,W.value=Ae;break;case"ArrowDown":de.preventDefault(),W.value===-1||W.value>=Se-1?Ae=0:Ae++,(ge=c.value[Ae])!==null&&ge!==void 0&&ge.disabled&&Ae++,W.value=Ae;break;case"Enter":if(W.value===-1)break;var Re=g.value.isVirtual&&v.value&&Y.value.length?Y.value:b.value?c.value:q.value;if(Re.length||(Re=c.value),!d.value){f(!0,{e:de});break}if(E){var Be;if(W.value===-1)return;var Ke=(Be=Re[W.value])===null||Be===void 0?void 0:Be.value;if(!Ke)return;var Lr=Dw(x.value,Ke);if(N>0&&Lr.value.length>N)return;var _y=$(Lr.value);y(Lr.value,{option:_y.find(function(yy){return yy.value==Ke}),selectedOptions:_y,trigger:Lr.isCheck?"check":"uncheck",e:de}),q.value=[]}else{var by=$(Re[W.value].value);y(Re[W.value].value,{option:by==null?void 0:by[0],selectedOptions:$(Re[W.value].value),trigger:"check",e:de}),f(!1,{e:de})}break;case"Escape":f(!1,{e:de});break}};return watch(d,function(de){de&&(W.value=-1,Y.value=[],q.value=[])}),watch(W,function(de){var he,ge=(he=g.value)===null||he===void 0||(he=he.innerRef)===null||he===void 0?void 0:he.querySelector(".".concat(re.value,"-select-option")).clientHeight,Se=ge*de;C.value.scrollTo({top:Se,behavior:"smooth"})}),{hoverIndex:W,handleKeyDown:se,virtualFilteredOptions:Y,filteredOptions:q}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Yz=["overlayClassName"];function Zz(s,l){var c=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=Xz(s))||l){c&&(s=c);var d=0,f=function(){};return{s:f,n:function(){return d>=s.length?{done:!0}:{done:!1,value:s[d++]}},e:function($){throw $},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g,v=!0,b=!1;return{s:function(){c=c.call(s)},n:function(){var $=c.next();return v=$.done,$},e:function($){b=!0,g=$},f:function(){try{v||c.return==null||c.return()}finally{if(b)throw g}}}}function Xz(s,l){if(s){if(typeof s=="string")return qg(s,l);var c={}.toString.call(s).slice(8,-1);return c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set"?Array.from(s):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?qg(s,l):void 0}}function qg(s,l){(l==null||l>s.length)&&(l=s.length);for(var c=0,d=Array(l);c<l;c++)d[c]=s[c];return d}function Yg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Hn(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Yg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Yg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var Jz=defineComponent({name:"TSelect",props:Hn(Hn({},cn),{},{valueDisplayOptions:{type:Object}}),setup:function(s,l){var c=l.slots,d=we(),f=Jt(),g=Ye(),v=we("select"),b=Mt("select"),$=b.globalConfig,y=b.t,x=toRefs(s),C=x.popupVisible,E=x.inputValue,N=x.modelValue,W=x.value,q=ga(E,s.defaultInputValue,s.onInputChange,"inputValue"),Y=je(q,2),re=Y[0],se=Y[1],de=Lt(W,N,s.defaultValue,s.onChange),he=je(de,2),ge=he[0],Se=he[1],Ae=ref(null),Re=ref(null),Be=computed(function(){var pS,fC,US;return{label:((pS=s.keys)===null||pS===void 0?void 0:pS.label)||"label",value:((fC=s.keys)===null||fC===void 0?void 0:fC.value)||"value",disabled:((US=s.keys)===null||US===void 0?void 0:US.disabled)||"disabled"}}),Ke=Gz(s,Be,re),Lr=Ke.optionsMap,_y=Ke.optionsList,by=Ke.optionsCache,yy=Ke.displayOptions,my=computed(function(){return ge.value===void 0?s.multiple?[]:void 0:s.valueType==="object"?s.multiple?ge.value.map(function(pS){return pS[Be.value.value]}):ge.value[Be.value.value]:ge.value}),$t=function(pS,fC){if(s.valueType==="object"){var US=Be.value,Iye=US.value,$ye=US.label,Rye=function(Uye){if(Uye!==void 0){var DS=Lr.value.get(Uye);return ne(ne({},Iye,sr(DS,Iye)),$ye,sr(DS,$ye))}};pS=s.multiple?pS.map(function(Uye){return Rye(Uye)}):Rye(pS)}pS!==ge.value&&Se(pS,Hn({selectedOptions:MS(pS)},fC))},K$=ga(C,!1,function(pS,fC){var US;(US=s.onPopupVisibleChange)===null||US===void 0||US.call(s,pS,fC)},"popupVisible"),Y$=je(K$,2),W$=Y$[0],U$=Y$[1],hy=computed(function(){var pS;return(pS=!s.multiple&&W$.value&&zd(my.value,Lr)||s.placeholder)!==null&&pS!==void 0?pS:y($.value.placeholder)}),G$=computed(function(){return s.multiple?Lz(my.value,Lr):zd(my.value,Lr)}),ky=computed(function(){var pS=s.multiple&&at(my.value)?my.value.map(function(Iye){var $ye;return{value:Iye,label:($ye=Lr.value.get(Iye))===null||$ye===void 0?void 0:$ye.label}}):my.value,fC={value:pS,onClose:s.multiple?function(Iye){return lS(Iye)}:function(){}};if(s.minCollapsedNum&&s.multiple){var US;return Hn(Hn({},fC),{},{displayValue:pS==null||(US=pS.slice)===null||US===void 0?void 0:US.call(pS,0,s.minCollapsedNum)})}return fC}),$y=computed(function(){return!!(s.filterable||$.value.filterable||rt(s.filter))}),rS=computed(function(){return!!((s.filterable||$.value.filterable)&&rt(s.onSearch))}),lS=function(pS,fC){var US,Iye=Pr(my.value),$ye=Iye[pS];Iye.splice(pS,1),$t(Iye,{selectedOptions:MS(Iye),trigger:"tag-remove",e:fC}),(US=s.onRemove)===null||US===void 0||US.call(s,{value:$ye,data:Lr.value.get($ye),e:fC})},bS=function(){var pS;re.value&&((pS=s.onCreate)===null||pS===void 0||pS.call(s,re.value),se(""))},IS=computed(function(){var pS;return(pS=Re.value)===null||pS===void 0?void 0:pS.popupRef.getOverlay()}),BS=computed(function(){return _y.value.filter(function(pS){return!pS.disabled&&!pS["check-all"]&&!pS.checkAll})}),MS=function(){var pS=arguments.length>0&&arguments[0]!==void 0?arguments[0]:my.value;return _y.value.filter(function(fC){if(!fC.checkAll)return at(pS)?pS.includes(fC.value):pS===fC.value})},zS=qz({displayOptions:yy,optionsList:_y,innerPopupVisible:W$,setInnerPopupVisible:U$,selectPanelRef:Ae,isFilterable:$y,isRemoteSearch:rS,getSelectedOptions:MS,setInnerValue:$t,innerValue:my,popupContentRef:IS,multiple:s.multiple,max:s.max}),LS=zS.hoverIndex,nS=zS.virtualFilteredOptions,Z$=zS.handleKeyDown,dS=zS.filteredOptions,ES=function(pS){if(s.multiple){var fC=pS?BS.value.map(function(US){return US.value}):[];$t(fC,{selectedOptions:MS(fC),trigger:pS?"check":"clear"})}},wy=computed(function(){var pS=BS.value.map(function(US){return US.value}),fC=Ld(my.value,pS);return fC.length}),tS=computed(function(){return wy.value===BS.value.length}),yS=computed(function(){return!tS.value&&wy.value!==0}),Q$=computed(function(){return{max:s.max,multiple:s.multiple,hoverIndex:LS.value,selectValue:my.value,reserveKeyword:s.reserveKeyword,handleValueChange:$t,handlerInputChange:se,handlePopupVisibleChange:U$,handleCreate:bS,size:s.size,popupContentRef:IS,indeterminate:yS.value,isCheckAll:tS.value,onCheckAllChange:ES,getSelectedOptions:MS,displayOptions:yy.value}});provide(lu,Q$);var eS=function(){!s.multiple&&at(ge.value)&&Se(void 0,{selectedOptions:[],trigger:"default"}),s.multiple&&!at(ge.value)&&Se([],{selectedOptions:[],trigger:"default"})},cS=fw(function(pS,fC){var US,Iye=fC.e;(US=s.onSearch)===null||US===void 0||US.call(s,"".concat(pS),{e:Iye})},300),wS=function(pS,fC){pS&&!W$.value&&U$(!0,{e:fC.e}),se(pS),cS("".concat(pS),{e:fC.e}),nextTick(function(){var US,Iye;nS.value=(US=Ae.value)===null||US===void 0?void 0:US.visibleData,dS.value=(Iye=Ae.value)===null||Iye===void 0?void 0:Iye.displayOptions})},xS=function(pS,fC){U$(pS,fC),pS&&fC.trigger==="trigger-element-click"&&se("")},OS=function(pS){if(s.multiple){var fC=[],US=Zz(pS||[]),Iye;try{for(US.s();!(Iye=US.n()).done;){var $ye=Iye.value,Rye=Lr.value.get($ye);Rye&&fC.push(Rye)}}catch(DS){US.e(DS)}finally{US.f()}by.value=Array.from(new Set([].concat(fC,wt(by.value))))}else{var Uye=Lr.value.get(pS);Uye&&(by.value=Array.from(new Set([Uye].concat(wt(by.value)))))}};watch(ge,function(pS){eS(),nextTick(function(){OS(pS)})},{immediate:!0}),watch(function(){return s.multiple},function(){eS()});var mS=function(pS){var fC;if(Ae.value){var US=(fC=Ae.value)===null||fC===void 0||(fC=fC.innerRef)===null||fC===void 0?void 0:fC.querySelector(".".concat(d.value,"-is-selected"));nextTick(function(){if(US&&pS){var Iye=getComputedStyle(US),$ye=Iye.paddingBottom,Rye=getComputedStyle(pS),Uye=Rye.marginBottom,DS=parseInt($ye,10)+parseInt(Uye,10),HS=US.offsetTop-pS.offsetTop-(pS.clientHeight-US.clientHeight)+DS;pS.scrollTop=HS}})}};return provide("updateScrollTop",mS),function(){var pS=s.popupProps||{},fC=pS.overlayClassName,US=Ri(pS,Yz);return createVNode("div",{class:"".concat(v.value,"__wrap")},[createVNode(Tz,mergeProps({autoWidth:s.autoWidth,readonly:s.readonly,borderless:s.borderless,multiple:s.multiple,clearable:s.clearable,loading:s.loading,status:s.status,tips:s.tips,minCollapsedNum:s.minCollapsedNum,autofocus:s.autofocus,suffix:s.suffix,valueDisplayOptions:s.valueDisplayOptions},{ref:Re,class:v.value,value:G$.value,disabled:f.value,popupVisible:W$.value,inputValue:W$.value?re.value:"",placeholder:"".concat(hy.value),allowInput:$y.value,"collapsed-items":s.collapsedItems,inputProps:Hn(Hn({size:s.size,autofocus:s.autofocus},s.inputProps),{},{onkeydown:Z$}),tagInputProps:Hn({size:s.size},s.tagInputProps),onTagChange:function(Iye,$ye){lS($ye.index)},tagProps:Hn({},s.tagProps),popupProps:Hn({overlayClassName:["".concat(v.value,"__dropdown"),fC]},US),label:s.label,prefixIcon:s.prefixIcon,suffix:s.suffix,suffixIcon:function(){return s.suffixIcon||c.suffixIcon?g("suffixIcon"):s.showArrow&&createVNode(iL,{overlayClassName:"".concat(v.value,"__right-icon"),isActive:W$.value},null)},valueDisplay:function(){return g("valueDisplay",{params:ky.value})},onPopupVisibleChange:xS,onInputChange:wS,onClear:function(Iye){var $ye,Rye=Iye.e;$t(s.multiple?[]:void 0,{option:null,selectedOptions:MS(s.multiple?[]:void 0),trigger:"clear",e:Rye}),($ye=s.onClear)===null||$ye===void 0||$ye.call(s,{e:Rye})},onEnter:function(Iye,$ye){var Rye=$ye.e;setTimeout(function(){var Uye;(Uye=s.onEnter)===null||Uye===void 0||Uye.call(s,{inputValue:"".concat(re.value),e:Rye,value:my.value}),bS()},0)},onBlur:function(Iye,$ye){var Rye,Uye=$ye.e;(Rye=s.onBlur)===null||Rye===void 0||Rye.call(s,{e:Uye,value:my.value})},onFocus:function(Iye,$ye){var Rye,Uye=$ye.e;(Rye=s.onFocus)===null||Rye===void 0||Rye.call(s,{e:Uye,value:my.value})}},s.selectInputProps),{label:c.label,prefixIcon:c.prefixIcon,suffix:c.suffix,panel:function(){return createVNode(Kz,mergeProps({ref:Ae},Ew(s,["size","multiple","empty","loading","loadingText","filterable","creatable","panelTopContent","panelBottomContent","filter","scroll"]),{inputValue:re.value}),c)},collapsedItems:c.collapsedItems})])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Wi=ze(Jz),Gi=ze(Vd),Qz=ze(Bw);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var eV={container:{type:[String,Function],default:"body"},content:{type:[String,Function]},default:{type:[String,Function]},duration:{type:Number,default:200},offset:{type:Array,default:function(){return["24px","80px"]}},shape:{type:String,default:"square",validator:function(s){return s?["circle","square"].includes(s):!0}},size:{type:String,default:"medium",validator:function(s){return s?["medium","small"].includes(s):!0}},target:{type:[String,Function],default:"body"},theme:{type:String,default:"light",validator:function(s){return s?["light","primary","dark"].includes(s):!0}},visibleHeight:{type:[String,Number],default:"200px"},onClick:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var tV=defineComponent({name:"TBackTop",props:eV,setup:function(s){var l=ref(!1),c=ref(null),d=we("back-top"),f=Mt("alert"),g=f.classPrefix,v=Qn({BacktopIcon:TD}),b=v.BacktopIcon,$=Xt(),y=function(x){return typeof x=="string"&&(typeof document>"u"?"undefined":Zt(document))!==void 0?x==="body"?document:document.querySelector(x):typeof x=="function"?x():null};return onMounted(function(){c.value=y(s.container);var x;if(typeof s.visibleHeight=="string"?x=Number(s.visibleHeight.replace("px","")):x=s.visibleHeight,x===0){l.value=!0;return}var C;c.value.scrollTop===void 0?C=document.documentElement:C=c.value,c.value.onscroll=function(){var E,N=(E=C)===null||E===void 0?void 0:E.scrollTop;N>=x&&(l.value=!0),N<x&&l.value&&(l.value=!1)}}),onBeforeUnmount(function(){c.value.onscroll=null}),function(){var x=s.theme,C=s.shape,E=s.size,N=s.target,W=s.duration,q=s.offset,Y=s.container,re=Q_(),se=re();se.length<1&&(se=null);var de=computed(function(){return ne(ne(ne(ne(ne(ne({},d.value,!0),"".concat(d.value,"--theme-").concat(x),!0),"".concat(d.value,"--").concat(C),!0),"".concat(d.value,"--show"),l.value),"".concat(g.value,"-size-s"),E==="small"),"".concat(g.value,"-size-m"),E==="medium")}),he=createVNode(Fragment$1,null,[createVNode(b,{class:"".concat(d.value,"__icon"),size:"24"},null),createVNode("span",{class:"".concat(d.value,"__text")},[createTextVNode("TOP")])]),ge=function(){if(N===Y||N==="body"||!N)return 0;var Re=y(N);if(!Re)return 0;var Be=Re.getBoundingClientRect().y;return Be},Se=function(Re){var Be,Ke=ge();P7(Ke,{container:c.value,duration:W}),(Be=s.onClick)===null||Be===void 0||Be.call(s,{e:Re})},Ae=computed(function(){return{insetInlineEnd:q[0],insetBlockEnd:q[1]}});return createVNode("button",{type:"button",class:de.value,style:Ae.value,onClick:Se},[$("content","default",he)])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var nV=ze(tV),rV=xw;function aV(s,l,c){return s==null?s:rV(s,l,c)}var oV=aV;const Zg=ot(oV);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Hd={exports:{}},po={exports:{}};(function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=c;function c(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=arguments.length>1?arguments[1]:void 0;for(var g in f)typeof d[g]>"u"&&(d[g]=f[g]);return d}s.exports=l.default,s.exports.default=l.default})(po,po.exports);(function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=W;var c=d(po.exports);function d(q){return q&&q.__esModule?q:{default:q}}function f(q,Y){return b(q)||v(q,Y)||y(q,Y)||g()}function g(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v(q,Y){var re=q==null?null:typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(re!=null){var se,de,he,ge,Se=[],Ae=!0,Re=!1;try{if(he=(re=re.call(q)).next,Y!==0)for(;!(Ae=(se=he.call(re)).done)&&(Se.push(se.value),Se.length!==Y);Ae=!0);}catch(Be){Re=!0,de=Be}finally{try{if(!Ae&&re.return!=null&&(ge=re.return(),Object(ge)!==ge))return}finally{if(Re)throw de}}return Se}}function b(q){if(Array.isArray(q))return q}function $(q,Y){var re=typeof Symbol<"u"&&q[Symbol.iterator]||q["@@iterator"];if(!re){if(Array.isArray(q)||(re=y(q))||Y){re&&(q=re);var se=0,de=function(){};return{s:de,n:function(){return se>=q.length?{done:!0}:{done:!1,value:q[se++]}},e:function(Ae){throw Ae},f:de}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var he=!0,ge=!1,Se;return{s:function(){re=re.call(q)},n:function(){var Ae=re.next();return he=Ae.done,Ae},e:function(Ae){ge=!0,Se=Ae},f:function(){try{!he&&re.return!=null&&re.return()}finally{if(ge)throw Se}}}}function y(q,Y){if(q){if(typeof q=="string")return x(q,Y);var re=Object.prototype.toString.call(q).slice(8,-1);if(re==="Object"&&q.constructor&&(re=q.constructor.name),re==="Map"||re==="Set")return Array.from(q);if(re==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(re))return x(q,Y)}}function x(q,Y){(Y==null||Y>q.length)&&(Y=q.length);for(var re=0,se=new Array(Y);re<Y;re++)se[re]=q[re];return se}var C={format:"YYYY/MM/DD",delimiters:["/","-"],strictMode:!1};function E(q){return/(^(y{4}|y{2})[.\/-](m{1,2})[.\/-](d{1,2})$)|(^(m{1,2})[.\/-](d{1,2})[.\/-]((y{4}|y{2})$))|(^(d{1,2})[.\/-](m{1,2})[.\/-]((y{4}|y{2})$))/gi.test(q)}function N(q,Y){for(var re=[],se=Math.min(q.length,Y.length),de=0;de<se;de++)re.push([q[de],Y[de]]);return re}function W(q,Y){if(typeof Y=="string"?Y=(0,c.default)({format:Y},C):Y=(0,c.default)(Y,C),typeof q=="string"&&E(Y.format)){var re=Y.delimiters.find(function(my){return Y.format.indexOf(my)!==-1}),se=Y.strictMode?re:Y.delimiters.find(function(my){return q.indexOf(my)!==-1}),de=N(q.split(se),Y.format.toLowerCase().split(re)),he={},ge=$(de),Se;try{for(ge.s();!(Se=ge.n()).done;){var Ae=f(Se.value,2),Re=Ae[0],Be=Ae[1];if(Re.length!==Be.length)return!1;he[Be.charAt(0)]=Re}}catch(my){ge.e(my)}finally{ge.f()}var Ke=he.y;if(Ke.startsWith("-"))return!1;if(he.y.length===2){var Lr=parseInt(he.y,10);if(isNaN(Lr))return!1;var _y=new Date().getFullYear()%100;Lr<_y?Ke="20".concat(he.y):Ke="19".concat(he.y)}var by=he.m;he.m.length===1&&(by="0".concat(he.m));var yy=he.d;return he.d.length===1&&(yy="0".concat(he.d)),new Date("".concat(Ke,"-").concat(by,"-").concat(yy,"T00:00:00.000Z")).getUTCDate()===+he.d}return Y.strictMode?!1:Object.prototype.toString.call(q)==="[object Date]"&&isFinite(q)}s.exports=l.default,s.exports.default=l.default})(Hd,Hd.exports);var iV=Zf(Hd.exports),Ud={exports:{}},_a={exports:{}};(function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=d;function c(f){"@babel/helpers - typeof";return c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},c(f)}function d(f){var g=typeof f=="string"||f instanceof String;if(!g){var v=c(f);throw f===null?v="null":v==="object"&&(v=f.constructor.name),new TypeError("Expected a string but received a ".concat(v))}}s.exports=l.default,s.exports.default=l.default})(_a,_a.exports);var Kd={exports:{}};(function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=g;var c=d(_a.exports);function d(v){return v&&v.__esModule?v:{default:v}}function f(v){"@babel/helpers - typeof";return f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},f(v)}function g(v,b){(0,c.default)(v);var $,y;f(b)==="object"?($=b.min||0,y=b.max):($=arguments[1],y=arguments[2]);var x=encodeURI(v).split(/%..|./).length-1;return x>=$&&(typeof y>"u"||x<=y)}s.exports=l.default,s.exports.default=l.default})(Kd,Kd.exports);var ls={exports:{}};(function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=v;var c=f(_a.exports),d=f(po.exports);function f(b){return b&&b.__esModule?b:{default:b}}var g={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function v(b,$){(0,c.default)(b),$=(0,d.default)($,g),$.allow_trailing_dot&&b[b.length-1]==="."&&(b=b.substring(0,b.length-1)),$.allow_wildcard===!0&&b.indexOf("*.")===0&&(b=b.substring(2));var y=b.split("."),x=y[y.length-1];return $.require_tld&&(y.length<2||!$.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(x)||/\s/.test(x))||!$.allow_numeric_tld&&/^\d+$/.test(x)?!1:y.every(function(C){return!(C.length>63&&!$.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(C)||/[\uff01-\uff5e]/.test(C)||/^-|-$/.test(C)||!$.allow_underscores&&/_/.test(C))})}s.exports=l.default,s.exports.default=l.default})(ls,ls.exports);var ss={exports:{}};(function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=y;var c=d(_a.exports);function d(x){return x&&x.__esModule?x:{default:x}}var f="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",g="(".concat(f,"[.]){3}").concat(f),v=new RegExp("^".concat(g,"$")),b="(?:[0-9a-fA-F]{1,4})",$=new RegExp("^("+"(?:".concat(b,":){7}(?:").concat(b,"|:)|")+"(?:".concat(b,":){6}(?:").concat(g,"|:").concat(b,"|:)|")+"(?:".concat(b,":){5}(?::").concat(g,"|(:").concat(b,"){1,2}|:)|")+"(?:".concat(b,":){4}(?:(:").concat(b,"){0,1}:").concat(g,"|(:").concat(b,"){1,3}|:)|")+"(?:".concat(b,":){3}(?:(:").concat(b,"){0,2}:").concat(g,"|(:").concat(b,"){1,4}|:)|")+"(?:".concat(b,":){2}(?:(:").concat(b,"){0,3}:").concat(g,"|(:").concat(b,"){1,5}|:)|")+"(?:".concat(b,":){1}(?:(:").concat(b,"){0,4}:").concat(g,"|(:").concat(b,"){1,6}|:)|")+"(?::((?::".concat(b,"){0,5}:").concat(g,"|(?::").concat(b,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function y(x){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(0,c.default)(x),C=String(C),C?C==="4"?v.test(x):C==="6"?$.test(x):!1:y(x,4)||y(x,6)}s.exports=l.default,s.exports.default=l.default})(ss,ss.exports);(function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=re;var c=b(_a.exports),d=b(Kd.exports),f=b(ls.exports),g=b(ss.exports),v=b(po.exports);function b(se){return se&&se.__esModule?se:{default:se}}var $={allow_display_name:!1,allow_underscores:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0,blacklisted_chars:"",ignore_max_length:!1,host_blacklist:[],host_whitelist:[]},y=/^([^\x00-\x1F\x7F-\x9F\cX]+)</i,x=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,C=/^[a-z\d]+$/,E=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,N=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A1-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,W=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,q=254;function Y(se){var de=se.replace(/^"(.+)"$/,"$1");if(!de.trim())return!1;var he=/[\.";<>]/.test(de);if(he){if(de===se)return!1;var ge=de.split('"').length===de.split('\\"').length;if(!ge)return!1}return!0}function re(se,de){if((0,c.default)(se),de=(0,v.default)(de,$),de.require_display_name||de.allow_display_name){var he=se.match(y);if(he){var ge=he[1];if(se=se.replace(ge,"").replace(/(^<|>$)/g,""),ge.endsWith(" ")&&(ge=ge.slice(0,-1)),!Y(ge))return!1}else if(de.require_display_name)return!1}if(!de.ignore_max_length&&se.length>q)return!1;var Se=se.split("@"),Ae=Se.pop(),Re=Ae.toLowerCase();if(de.host_blacklist.includes(Re)||de.host_whitelist.length>0&&!de.host_whitelist.includes(Re))return!1;var Be=Se.join("@");if(de.domain_specific_validation&&(Re==="gmail.com"||Re==="googlemail.com")){Be=Be.toLowerCase();var Ke=Be.split("+")[0];if(!(0,d.default)(Ke.replace(/\./g,""),{min:6,max:30}))return!1;for(var Lr=Ke.split("."),_y=0;_y<Lr.length;_y++)if(!C.test(Lr[_y]))return!1}if(de.ignore_max_length===!1&&(!(0,d.default)(Be,{max:64})||!(0,d.default)(Ae,{max:254})))return!1;if(!(0,f.default)(Ae,{require_tld:de.require_tld,ignore_max_length:de.ignore_max_length,allow_underscores:de.allow_underscores})){if(!de.allow_ip_domain)return!1;if(!(0,g.default)(Ae)){if(!Ae.startsWith("[")||!Ae.endsWith("]"))return!1;var by=Ae.slice(1,-1);if(by.length===0||!(0,g.default)(by))return!1}}if(Be[0]==='"')return Be=Be.slice(1,Be.length-1),de.allow_utf8_local_part?W.test(Be):E.test(Be);for(var yy=de.allow_utf8_local_part?N:x,my=Be.split("."),$t=0;$t<my.length;$t++)if(!yy.test(my[$t]))return!1;return!(de.blacklisted_chars&&Be.search(new RegExp("[".concat(de.blacklisted_chars,"]+"),"g"))!==-1)}s.exports=l.default,s.exports.default=l.default})(Ud,Ud.exports);var lV=Zf(Ud.exports),Wd={exports:{}};(function(s,l){Object.defineProperty(l,"__esModule",{value:!0}),l.default=re;var c=v(_a.exports),d=v(ls.exports),f=v(ss.exports),g=v(po.exports);function v(se){return se&&se.__esModule?se:{default:se}}function b(se,de){return E(se)||C(se,de)||y(se,de)||$()}function $(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function y(se,de){if(se){if(typeof se=="string")return x(se,de);var he=Object.prototype.toString.call(se).slice(8,-1);if(he==="Object"&&se.constructor&&(he=se.constructor.name),he==="Map"||he==="Set")return Array.from(se);if(he==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(he))return x(se,de)}}function x(se,de){(de==null||de>se.length)&&(de=se.length);for(var he=0,ge=new Array(de);he<de;he++)ge[he]=se[he];return ge}function C(se,de){var he=se==null?null:typeof Symbol<"u"&&se[Symbol.iterator]||se["@@iterator"];if(he!=null){var ge,Se,Ae,Re,Be=[],Ke=!0,Lr=!1;try{if(Ae=(he=he.call(se)).next,de!==0)for(;!(Ke=(ge=Ae.call(he)).done)&&(Be.push(ge.value),Be.length!==de);Ke=!0);}catch(_y){Lr=!0,Se=_y}finally{try{if(!Ke&&he.return!=null&&(Re=he.return(),Object(Re)!==Re))return}finally{if(Lr)throw Se}}return Be}}function E(se){if(Array.isArray(se))return se}var N={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},W=/^\[([^\]]+)\](?::([0-9]+))?$/;function q(se){return Object.prototype.toString.call(se)==="[object RegExp]"}function Y(se,de){for(var he=0;he<de.length;he++){var ge=de[he];if(se===ge||q(ge)&&ge.test(se))return!0}return!1}function re(se,de){if((0,c.default)(se),!se||/[\s<>]/.test(se)||se.indexOf("mailto:")===0||(de=(0,g.default)(de,N),de.validate_length&&se.length>=2083)||!de.allow_fragments&&se.includes("#")||!de.allow_query_components&&(se.includes("?")||se.includes("&")))return!1;var he,ge,Se,Ae,Re,Be,Ke,Lr;if(Ke=se.split("#"),se=Ke.shift(),Ke=se.split("?"),se=Ke.shift(),Ke=se.split("://"),Ke.length>1){if(he=Ke.shift().toLowerCase(),de.require_valid_protocol&&de.protocols.indexOf(he)===-1)return!1}else{if(de.require_protocol)return!1;if(se.slice(0,2)==="//"){if(!de.allow_protocol_relative_urls)return!1;Ke[0]=se.slice(2)}}if(se=Ke.join("://"),se==="")return!1;if(Ke=se.split("/"),se=Ke.shift(),se===""&&!de.require_host)return!0;if(Ke=se.split("@"),Ke.length>1){if(de.disallow_auth||Ke[0]===""||(ge=Ke.shift(),ge.indexOf(":")>=0&&ge.split(":").length>2))return!1;var _y=ge.split(":"),by=b(_y,2),yy=by[0],my=by[1];if(yy===""&&my==="")return!1}Ae=Ke.join("@"),Be=null,Lr=null;var $t=Ae.match(W);if($t?(Se="",Lr=$t[1],Be=$t[2]||null):(Ke=Ae.split(":"),Se=Ke.shift(),Ke.length&&(Be=Ke.join(":"))),Be!==null&&Be.length>0){if(Re=parseInt(Be,10),!/^[0-9]+$/.test(Be)||Re<=0||Re>65535)return!1}else if(de.require_port)return!1;return de.host_whitelist?Y(Se,de.host_whitelist):Se===""&&!de.require_host?!0:!(!(0,f.default)(Se)&&!(0,d.default)(Se,de)&&(!Lr||!(0,f.default)(Lr,6))||(Se=Se||Lr,de.host_blacklist&&Y(Se,de.host_blacklist)))}s.exports=l.default,s.exports.default=l.default})(Wd,Wd.exports);var sV=Zf(Wd.exports);function Xg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Jg(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Xg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Xg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function Fw(s){var l=Object.prototype.toString.call(s),c={Date:"[object Date]"};return l===c.Date?!1:jt(s)?Ql(s):["",void 0,null].includes(s)}var uV={date:iV,url:sV,email:lV,required:function(s){return!Fw(s)},whitespace:function(s){return!(/^\s+$/.test(s)||s==="")},boolean:function(s){return nn(s)},max:function(s,l){return Vt(s)?s<=l:ca(s)<=l},min:function(s,l){return Vt(s)?s>=l:ca(s)>=l},len:function(s,l){return ca(String(s))===l},number:function(s){return Vt(s)},enum:function(s,l){return l.includes(s)},idcard:function(s){return/^(\d{18,18}|\d{15,15}|\d{17,17}x)$/i.test(s)},telnumber:function(s){return/^1[3-9]\d{9}$/.test(s)},pattern:function(s,l){return l.test(s)},validator:function(s,l){return l(s)}};function cV(s,l){return Gd.apply(this,arguments)}function Gd(){return Gd=Yt(Xe.mark(function s(l,c){var d,f,g,v,b,$,y;return Xe.wrap(function(x){for(;;)switch(x.prev=x.next){case 0:d={result:!0},f=Object.keys(c),b=0;case 3:if(!(b<f.length)){x.next=15;break}if($=f[b],!(!c.required&&Fw(l)&&!c.validator)){x.next=7;break}return x.abrupt("return",d);case 7:if(y=uV[$],!(y&&(c[$]||c[$]===0))){x.next=12;break}return g=c[$]===!0?void 0:c[$],v=y,x.abrupt("break",15);case 12:b++,x.next=3;break;case 15:if(!v){x.next=23;break}return x.next=18,v(l,g);case 18:if(d=x.sent,!nn(d)){x.next=21;break}return x.abrupt("return",Jg(Jg({},c),{},{result:d}));case 21:if(!jt(d)){x.next=23;break}return x.abrupt("return",d);case 23:return x.abrupt("return",d);case 24:case"end":return x.stop()}},s)})),Gd.apply(this,arguments)}function dV(s,l){return qd.apply(this,arguments)}function qd(){return qd=Yt(Xe.mark(function s(l,c){var d,f;return Xe.wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return d=c.map(function(v){return cV(l,v)}),g.next=3,Promise.all(d);case 3:return f=g.sent,g.abrupt("return",f);case 5:case"end":return g.stop()}},s)})),qd.apply(this,arguments)}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var fV={for:{type:String,default:""},help:{type:[String,Function]},label:{type:[String,Function],default:""},labelAlign:{type:String,validator:function(s){return s?["left","right","top"].includes(s):!0}},labelWidth:{type:[String,Number]},name:{type:String,default:""},requiredMark:{type:Boolean,default:void 0},rules:{type:Array},showErrorMessage:{type:Boolean,default:void 0},status:{type:String,default:""},statusIcon:{type:[Boolean,Function],default:void 0},successBorder:Boolean,tips:{type:[String,Function]}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function vV(s,l){return s.replace(/\${(.*?)}/g,function(c,d){return l[d.trim()]||""})}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Qg(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function jc(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Qg(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Qg(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function Lw(s,l){return l?"".concat(s,"__").concat(l).replace(/(\[|\]\.)/g,"_"):""}var pV=defineComponent({name:"TFormItem",props:jc({},fV),setup:function(s,l){var c=l.slots,d=Ye(),f=_w(),g=Mt("form"),v=g.globalConfig,b=Qn({CheckCircleFilledIcon:tu,CloseCircleFilledIcon:ev,ErrorCircleFilledIcon:nu}),$=b.CheckCircleFilledIcon,y=b.CloseCircleFilledIcon,x=b.ErrorCircleFilledIcon,C=inject(ww,void 0),E=we(),N=we("form-item"),W=computed(function(){var wy,tS,yS=(wy=(tS=s.requiredMark)!==null&&tS!==void 0?tS:C==null?void 0:C.requiredMark)!==null&&wy!==void 0?wy:v.value.requiredMark,Q$=U$.value.filter(function(eS){return eS.required}).length>0;return yS??Q$}),q=computed(function(){return c.label||s.label}),Y=computed(function(){return!!(C!=null&&C.colon&&q.value)}),re=we("form__label"),se=computed(function(){return Id(s.labelAlign)?C==null?void 0:C.labelAlign:s.labelAlign}),de=computed(function(){return Id(s.labelWidth)?C==null?void 0:C.labelWidth:s.labelWidth}),he=computed(function(){return[f.value.label,ne(ne(ne(ne(ne({},"".concat(re.value,"--required"),W.value),"".concat(re.value,"--colon"),Y.value),"".concat(re.value,"--top"),q.value&&(se.value==="top"||!de.value)),"".concat(re.value,"--left"),se.value==="left"&&de.value),"".concat(re.value,"--right"),se.value==="right"&&de.value)]}),ge=function(){if(Number(de.value)!==0){var wy={};return de.value&&se.value!=="top"&&(Vt(de.value)?wy={width:"".concat(de.value,"px")}:wy={width:de.value}),createVNode("div",{class:he.value,style:wy},[createVNode("label",{for:s.for||null},[d("label")])])}},Se=function(){var wy=function(eS){return createVNode("span",{class:f.value.status},[createVNode(eS,null,null)])},tS=Lr.value;if(by.value===or.SUCCESS)return wy($);if(tS!=null&&tS[0]){var yS=tS[0].type||"error",Q$={error:y,warning:x}[yS]||$;return wy(Q$)}return null},Ae=function(){var wy=s.statusIcon;if(wy!==!1){var tS=d("statusIcon",{defaultNode:Se()});if(tS)return createVNode("span",{class:f.value.status},[tS]);if(tS!==!1&&(tS=C==null?void 0:C.renderContent("statusIcon",{defaultNode:Se(),params:s}),tS))return tS}},Re=computed(function(){if(!zS.value)return"";if(by.value===or.SUCCESS)return s.successBorder?[f.value.success,f.value.successBorder].join(" "):f.value.success;if(Lr.value.length){var wy=Lr.value[0].type||"error";return wy==="error"?f.value.error:f.value.warning}}),Be=computed(function(){return[f.value.controls,Re.value]}),Ke=computed(function(){var wy={};return de.value&&se.value!=="top"&&(Vt(de.value)?wy={marginLeft:"".concat(de.value,"px")}:wy={marginLeft:de.value}),wy}),Lr=ref([]),_y=ref([]),by=ref(or.TO_BE_VALIDATED),yy=ref(!1),my=ref(!1),$t=function(){my.value=!1,Lr.value=[],_y.value=[],by.value=or.TO_BE_VALIDATED},K$=function(){var wy=Object.prototype.toString.call(sr(C==null?void 0:C.data,s.name)),tS;return wy==="[object String]"&&(tS=""),wy==="[object Array]"&&(tS=[]),wy==="[object Object]"&&(tS={}),tS},Y$=function(){var wy=Yt(Xe.mark(function tS(){var yS,Q$=arguments;return Xe.wrap(function(eS){for(;;)switch(eS.prev=eS.next){case 0:if(yS=Q$.length>0&&Q$[0]!==void 0?Q$[0]:C==null?void 0:C.resetType,s.name){eS.next=3;break}return eS.abrupt("return");case 3:return yS==="empty"?Zg(C==null?void 0:C.data,s.name,K$()):yS==="initial"&&Zg(C==null?void 0:C.data,s.name,lS.value),eS.next=6,nextTick();case 6:yy.value?my.value=!0:$t();case 7:case"end":return eS.stop()}},tS)}));return function(){return wy.apply(this,arguments)}}(),W$=computed(function(){var wy;return(wy=C==null?void 0:C.errorMessage)!==null&&wy!==void 0?wy:v.value.errorMessage}),U$=computed(function(){var wy;if((wy=s.rules)!==null&&wy!==void 0&&wy.length)return s.rules;if(!s.name)return[];var tS="".concat(s.name).lastIndexOf(".")||-1,yS="".concat(s.name).slice(tS+1);return sr(C==null?void 0:C.rules,s.name)||sr(C==null?void 0:C.rules,yS)||[]}),hy=function(){var wy=Yt(Xe.mark(function tS(yS){var Q$,eS;return Xe.wrap(function(cS){for(;;)switch(cS.prev=cS.next){case 0:if(eS={successList:[],errorList:[],rules:[],resultList:[],allowSetValue:!1},eS.rules=yS==="all"?U$.value:U$.value.filter(function(wS){return(wS.trigger||"change")===yS}),!(U$.value.length&&!((Q$=eS.rules)!==null&&Q$!==void 0&&Q$.length))){cS.next=4;break}return cS.abrupt("return",eS);case 4:return eS.allowSetValue=!0,cS.next=7,dV(rS.value,eS.rules);case 7:return eS.resultList=cS.sent,eS.errorList=eS.resultList.filter(function(wS){return wS.result!==!0}).map(function(wS){return Object.keys(wS).forEach(function(xS){if(!wS.message&&W$.value[xS]){var OS=Qe(s.label)?s.label:s.name;wS.message=vV(W$.value[xS],{name:OS,validate:wS[xS]})}}),wS}),eS.successList=eS.resultList.filter(function(wS){return wS.result===!0&&wS.message&&wS.type==="success"}),cS.abrupt("return",eS);case 11:case"end":return cS.stop()}},tS)}));return function(tS){return wy.apply(this,arguments)}}(),G$=function(){var wy=Yt(Xe.mark(function tS(yS,Q$){var eS,cS,wS,xS,OS,mS;return Xe.wrap(function(pS){for(;;)switch(pS.prev=pS.next){case 0:return yy.value=!0,MS.value=Q$,pS.next=4,hy(yS);case 4:return eS=pS.sent,cS=eS.successList,wS=eS.errorList,xS=eS.rules,OS=eS.resultList,mS=eS.allowSetValue,mS&&(_y.value=cS,Lr.value=wS),xS.length&&(by.value=wS.length?or.FAIL:or.SUCCESS),my.value&&$t(),yy.value=!1,pS.abrupt("return",ne({},s.name,wS.length===0?!0:OS));case 15:case"end":return pS.stop()}},tS)}));return function(tS,yS){return wy.apply(this,arguments)}}(),ky=function(){var wy=Yt(Xe.mark(function tS(yS){var Q$,eS,cS;return Xe.wrap(function(wS){for(;;)switch(wS.prev=wS.next){case 0:return wS.next=2,hy(yS);case 2:return Q$=wS.sent,eS=Q$.errorList,cS=Q$.resultList,wS.abrupt("return",ne({},s.name,eS.length===0?!0:cS));case 6:case"end":return wS.stop()}},tS)}));return function(tS){return wy.apply(this,arguments)}}(),$y=function(wy){!wy&&!at(wy)||(wy.length===0&&(Lr.value=[],by.value=or.SUCCESS),Lr.value=wy.map(function(tS){return jc(jc({},tS),{},{result:!1})}),by.value=or.FAIL)},rS=computed(function(){return(C==null?void 0:C.data)&&sr(C==null?void 0:C.data,s.name)}),lS=ref(void 0),bS=toRefs(s),IS=bS.name,BS=reactive({name:IS,resetHandler:$t,resetField:Y$,validate:G$,validateOnly:ky,setValidateMessage:$y});onMounted(function(){lS.value=Pr(rS.value),C==null||C.children.push(BS)}),onBeforeUnmount(function(){C&&(C.children=C==null?void 0:C.children.filter(function(wy){return wy!==BS}))}),watch(rS,Yt(Xe.mark(function wy(){return Xe.wrap(function(tS){for(;;)switch(tS.prev=tS.next){case 0:return tS.next=2,G$("change");case 2:case"end":return tS.stop()}},wy)})),{deep:!0}),watch(function(){return[s.name,JSON.stringify(s.rules)].join(",")},function(){G$("change")});var MS=ref(void 0),zS=computed(function(){return nn(MS.value)?MS.value:nn(s.showErrorMessage)?s.showErrorMessage:C==null?void 0:C.showErrorMessage}),LS=computed(function(){return[f.value.formItem,Lw(N.value,s.name),ne(ne({},f.value.formItemWithHelp,nS.value),f.value.formItemWithExtra,Z$.value)]}),nS=computed(function(){var wy=d("help");return wy?createVNode("div",{class:f.value.help},[wy]):null}),Z$=computed(function(){var wy,tS=function(Q$){return createVNode("div",{class:f.value.extra,title:Q$},[Q$])},yS=Lr.value;return zS.value&&yS!==null&&yS!==void 0&&(wy=yS[0])!==null&&wy!==void 0&&wy.message?tS(yS[0].message):_y.value.length?tS(_y.value[0].message):null}),dS=computed(function(){var wy=d("tips");if(!wy)return null;var tS=["".concat(N.value,"-tips"),"".concat(E.value,"-tips"),"".concat(E.value,"-is-").concat(s.status||"default")];return createVNode("div",{class:tS},[wy])}),ES=function(){var wy=Yt(Xe.mark(function tS(){return Xe.wrap(function(yS){for(;;)switch(yS.prev=yS.next){case 0:return yS.next=2,G$("blur");case 2:case"end":return yS.stop()}},tS)}));return function(){return wy.apply(this,arguments)}}();return provide(pv,{handleBlur:ES}),function(){return createVNode("div",{class:LS.value},[ge(),createVNode("div",{class:Be.value,style:Ke.value},[createVNode("div",{class:f.value.controlsContent},[d("default"),Ae()]),nS.value,dS.value,Z$.value])])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var mV={colon:Boolean,data:{type:Object,default:function(){return{}}},disabled:{type:Boolean,default:void 0},errorMessage:{type:Object},formControlledComponents:{type:Array},labelAlign:{type:String,default:"right",validator:function(s){return s?["left","right","top"].includes(s):!0}},labelWidth:{type:[String,Number],default:"100px"},layout:{type:String,default:"vertical",validator:function(s){return s?["vertical","inline"].includes(s):!0}},preventSubmitDefault:{type:Boolean,default:!0},readonly:{type:Boolean,default:void 0},requiredMark:{type:Boolean,default:void 0},resetType:{type:String,default:"empty",validator:function(s){return s?["empty","initial"].includes(s):!0}},rules:{type:Object},scrollToFirstError:{type:String,validator:function(s){return s?["","smooth","auto"].includes(s):!0}},showErrorMessage:{type:Boolean,default:!0},statusIcon:{type:[Boolean,Function],default:void 0},submitWithWarningMessage:Boolean,onReset:Function,onSubmit:Function,onValidate:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function eb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function hV(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?eb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):eb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var gV=defineComponent({name:"TForm",props:hV({},mV),setup:function(s,l){var c=l.expose,d=Ye(),f=toRefs(s),g=f.disabled,v=f.readonly;provide("formDisabled",{disabled:g}),provide("formReadonly",{readonly:v});var b=ref(null),$=ref([]),y=toRefs(s),x=y.showErrorMessage,C=y.labelWidth,E=y.labelAlign,N=y.data,W=y.colon,q=y.requiredMark,Y=y.rules,re=y.errorMessage,se=y.resetType;provide(ww,reactive({showErrorMessage:x,labelWidth:C,labelAlign:E,data:N,colon:W,requiredMark:q,rules:Y,errorMessage:re,resetType:se,children:$,renderContent:d}));var de=we("form"),he=_w(),ge=computed(function(){return[he.value.form,ne({},"".concat(de.value,"-inline"),s.layout==="inline")]}),Se=we("form-item"),Ae=function(hy){if(nn(hy))return"";var G$=Object.keys(hy),ky=je(G$,1),$y=ky[0];if(s.scrollToFirstError){var rS=Lw(Se.value,$y);Re(rS)}var lS=hy[$y];return at(lS)?lS.filter(function(bS){return!bS.result})[0].message:""},Re=function(hy){var G$=b.value.getElementsByClassName(hy),ky=je(G$,1),$y=ky[0],rS=s.scrollToFirstError;rS&&$y&&$y.scrollIntoView({behavior:rS})},Be=function(hy,G$){return!G$||!at(G$)?!0:G$.indexOf("".concat(hy))!==-1},Ke=function(hy){var G$=hy.reduce(function(ky,$y){return Object.assign(ky||{},$y)},{});return Object.keys(G$).forEach(function(ky){G$[ky]===!0&&delete G$[ky]}),Ql(G$)?!0:G$},Lr=function(){var hy=Yt(Xe.mark(function G$(ky){var $y,rS,lS,bS,IS,BS,MS,zS,LS,nS;return Xe.wrap(function(Z$){for(;;)switch(Z$.prev=Z$.next){case 0:return rS=ky||{},lS=rS.fields,bS=rS.trigger,IS=bS===void 0?"all":bS,BS=rS.showErrorMessage,MS=$.value.filter(function(dS){return rt(dS.validate)&&Be(String(dS.name),lS)}).map(function(dS){return dS.validate(IS,BS)}),Z$.next=4,Promise.all(MS);case 4:return zS=Z$.sent,LS=Ke(zS),nS=Ae(LS),($y=s.onValidate)===null||$y===void 0||$y.call(s,{validateResult:LS,firstError:nS}),Z$.abrupt("return",LS);case 9:case"end":return Z$.stop()}},G$)}));return function(G$){return hy.apply(this,arguments)}}(),_y=function(){var hy=Yt(Xe.mark(function G$(ky){var $y,rS,lS,bS,IS,BS;return Xe.wrap(function(MS){for(;;)switch(MS.prev=MS.next){case 0:return $y=ky||{},rS=$y.fields,lS=$y.trigger,bS=lS===void 0?"all":lS,IS=$.value.filter(function(zS){return rt(zS.validateOnly)&&Be(String(zS.name),rS)}).map(function(zS){return zS.validateOnly(bS)}),MS.next=4,Promise.all(IS);case 4:return BS=MS.sent,MS.abrupt("return",Ke(BS));case 6:case"end":return MS.stop()}},G$)}));return function(G$){return hy.apply(this,arguments)}}(),by=ref(),yy=function(hy){s.preventSubmitDefault&&hy&&(hy.preventDefault(),hy.stopPropagation()),Lr(by.value).then(function(G$){var ky;(ky=s.onSubmit)===null||ky===void 0||ky.call(s,{validateResult:G$,firstError:Ae(G$),e:hy})}),by.value=void 0},my=function(){var hy=Yt(Xe.mark(function G$(ky){return Xe.wrap(function($y){for(;;)switch($y.prev=$y.next){case 0:by.value=ky,M7(b.value);case 2:case"end":return $y.stop()}},G$)}));return function(G$){return hy.apply(this,arguments)}}(),$t=ref(),K$=function(hy){var G$;s.preventSubmitDefault&&hy&&(hy.preventDefault(),hy.stopPropagation()),$.value.filter(function(ky){var $y;return rt(ky.resetField)&&Be(String(ky.name),($y=$t.value)===null||$y===void 0?void 0:$y.fields)}).forEach(function(ky){var $y;return ky.resetField(($y=$t.value)===null||$y===void 0?void 0:$y.type)}),$t.value=void 0,(G$=s.onReset)===null||G$===void 0||G$.call(s,{e:hy})},Y$=function(hy){$t.value=hy,b.value.reset()},W$=function(hy){$.value.forEach(function(G$){rt(G$.resetHandler)&&Be(String(G$.name),hy)&&G$.resetHandler()})},U$=function(hy){var G$=Object.keys(hy);if(G$.length){var ky=$.value.filter(function($y){return rt($y.setValidateMessage)&&G$.includes("".concat($y.name))}).map(function($y){return $y.setValidateMessage(hy[$y.name])});Promise.all(ky)}};return c({validate:Lr,submit:my,reset:Y$,clearValidate:W$,setValidateMessage:U$,validateOnly:_y}),function(){return createVNode("form",{ref:b,class:ge.value,onSubmit:function(hy){return yy(hy)},onReset:function(hy){return K$(hy)}},[d("default")])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var mv=ze(gV),hv=ze(pV);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Rw={allowUncheck:Boolean,checked:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultChecked:Boolean,default:{type:[String,Function]},disabled:{type:Boolean,default:void 0},label:{type:[String,Function]},name:{type:String,default:""},readonly:Boolean,value:{type:[String,Number,Boolean],default:void 0},onChange:Function,onClick:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var zw=Symbol("RadioGroupProvide"),Vw=Symbol("RadioButtonProvide");/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function tb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function bV(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?tb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):tb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function yV(s){var l={};return Object.keys(s).forEach(function(c){ma(s[c])||(l[c]=s[c])}),l}var gv=defineComponent({name:"TRadio",inheritAttrs:!1,props:bV({},Rw),setup:function(s,l){var c=l.attrs,d=ref(),f=toRefs(s),g=f.checked,v=f.modelValue,b=Lt(g,v,s.defaultChecked,s.onChange,"checked"),$=je(b,2),y=$[0],x=$[1],C=computed(function(){return E?s.value===E.value:y.value}),E=inject(zw,void 0),N=computed(function(){return!!(s.allowUncheck||E!=null&&E.allowUncheck)}),W=function(by){by.stopPropagation()},q=function(by){var yy;if(!(de.value||s.readonly)&&((yy=s.onClick)===null||yy===void 0||yy.call(s,{e:by}),!(C.value&&!N.value)))if(E){var my=C.value&&N.value?void 0:s.value;E.setValue(my,{e:by})}else{var $t=N.value?!C.value:!0;x($t,{e:by})}},Y=computed(function(){return yV({focus:c.onFocus,blur:c.onBlur,keydown:c.onKeydown,keyup:c.onKeyup,keypresss:c.onKeypresss})}),re=computed(function(){var by=[].concat(wt(Object.keys(Y.value)),["input","change"]).map(function(yy){return"on".concat(yy[0].toUpperCase()).concat(yy.slice(1))});return dv(c,by)}),se=computed(function(){return E==null?void 0:E.disabled}),de=Jt({afterDisabled:se}),he=computed(function(){return{name:E?E.name:s.name,checked:C.value,disabled:de.value,readonly:s.readonly,value:s.value}}),ge=Ft(),Se=ge.STATUS,Ae=inject(Vw,void 0),Re=we("radio-button"),Be=we("radio"),Ke=computed(function(){return Ae?Re.value:Be.value}),Lr=computed(function(){return["".concat(Ke.value),ne(ne({},Se.value.checked,he.value.checked),Se.value.disabled,he.value.disabled)]}),_y=Xt();return function(){return createVNode("label",mergeProps({ref:d,class:Lr.value},re.value,{tabindex:de.value?void 0:"0",onClick:q}),[createVNode("input",mergeProps({type:"radio",class:"".concat(Ke.value,"__former")},Y.value,he.value,{onClick:W,tabindex:"-1","data-value":Qe(s.value)?"'".concat(s.value,"'"):s.value,"data-allow-uncheck":N.value||void 0}),null),createVNode("span",{class:"".concat(Ke.value,"__input")},null),createVNode("span",{class:"".concat(Ke.value,"__label")},[_y("default","label")])])}}}),_V=dw,wV=ln,CV="Expected a function";function kV(s,l,c){var d=!0,f=!0;if(typeof s!="function")throw new TypeError(CV);return wV(c)&&(d="leading"in c?!!c.leading:d,f="trailing"in c?!!c.trailing:f),_V(s,l,{leading:d,maxWait:l,trailing:f})}var $V=kV;const Hw=ot($V);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var SV={allowUncheck:Boolean,disabled:{type:Boolean,default:void 0},name:{type:String,default:""},options:{type:Array},size:{type:String,default:"medium",validator:function(s){return s?["small","medium","large"].includes(s):!0}},value:{type:[String,Number,Boolean],default:void 0},modelValue:{type:[String,Number,Boolean],default:void 0},defaultValue:{type:[String,Number,Boolean]},variant:{type:String,default:"outline",validator:function(s){return s?["outline","primary-filled","default-filled"].includes(s):!0}},onChange:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function xV(s,l){var c=function(d){var f=is.test(d.key)||is.test(d.code);if(f){d.preventDefault();var g=d.target.querySelector("input");if(!g)return;var v=g.dataset;if(g.checked&&v.allowUncheck)l(void 0,{e:d});else{var b=isNaN(Number(v.value))?v.value:Number(v.value);b=Qe(b)&&{true:!0,false:!1}[b]||b,b=Qe(b)&&b[0]==="'"?b.replace(/'/g,""):b,l(b,{e:d})}}};onMounted(function(){Zs(s.value,"keydown",c)}),onBeforeMount(function(){bi(s.value,"keydown",c)})}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var OV=["window"],EV=typeof window<"u"?window:void 0;function AV(s){var l,c=unref(s);return(l=c==null?void 0:c.$el)!==null&&l!==void 0?l:c}function TV(s){return getCurrentScope()?(onScopeDispose(s),!0):!1}function Uw(s,l){var c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},d=c.window,f=d===void 0?EV:d,g=Ri(c,OV),v,b=f&&"MutationObserver"in f,$=function(){v&&(v.disconnect(),v=void 0)},y=watch(function(){return AV(s)},function(C){$(),b&&f&&C&&(v=new MutationObserver(l),v.observe(C,g))},{immediate:!0}),x=function(){$(),y()};return TV(x),{isSupported:b,stop:x}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function nb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Dc(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?nb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):nb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var PV=defineComponent({name:"TRadioGroup",props:Dc({},SV),setup:function(s){var l=toRefs(s),c=l.value,d=l.modelValue,f=Lt(c,d,s.defaultValue,s.onChange),g=je(f,2),v=g[0],b=g[1],$=ref(),y=we("radio-button"),x=Ft(),C=x.STATUS,E=x.SIZE;xV($,b);var N=computed(function(){return".".concat(y.value,".").concat(C.value.checked)}),W=ref({width:"0px",height:"0px",left:"0px",top:"0px","transition-property":"none"}),q=function(){var Ke=document.createElement("div");Ke.setAttribute("style","position: absolute; visibility: hidden;"),Ke.appendChild($.value.cloneNode(!0)),document.body.appendChild(Ke);var Lr=Ke.querySelector(N.value),_y=Lr.offsetWidth,by=Lr.offsetHeight,yy=Lr.offsetLeft,my=Lr.offsetTop;W.value=Dc(Dc({},W.value),{},{width:"".concat(_y,"px"),height:"".concat(by,"px"),left:"".concat(yy,"px"),top:"".concat(my,"px")}),document.body.removeChild(Ke)},Y=function(){var Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(s.variant!=="outline"){var Lr=$.value.querySelector(N.value),_y=Ke?"none":"all";if(!Lr){W.value={"transition-property":_y,width:"0px",height:"9px",left:"0px",top:"0px"};return}var by=Lr.offsetWidth,yy=Lr.offsetHeight,my=Lr.offsetLeft,$t=Lr.offsetTop;by?W.value={"transition-property":_y,width:"".concat(by,"px"),height:"".concat(yy,"px"),left:"".concat(my,"px"),top:"".concat($t,"px")}:q()}},re;watch(v,Yt(Xe.mark(function Ke(){return Xe.wrap(function(Lr){for(;;)switch(Lr.prev=Lr.next){case 0:return Lr.next=2,nextTick();case 2:Y();case 3:case"end":return Lr.stop()}},Ke)}))),onMounted(function(){Y(!0),au($,Hw(Yt(Xe.mark(function Lr(){return Xe.wrap(function(_y){for(;;)switch(_y.prev=_y.next){case 0:return _y.next=2,nextTick();case 2:Y();case 3:case"end":return _y.stop()}},Lr)})),300));var Ke=$.value.querySelector("".concat(N.value," .").concat(y.value,"__label"));Ke&&(re=Uw(Ke,function(Lr){Lr.forEach(function(_y){_y.type==="characterData"&&Y()})},{attributes:!0,childList:!0,characterData:!0,subtree:!0}))}),onUnmounted(function(){var Ke;(Ke=re)===null||Ke===void 0||Ke.stop()});var se=toRefs(s),de=se.name,he=se.disabled;provide(zw,reactive({name:de,disabled:he,value:v,allowUncheck:s.allowUncheck,setValue:b}));var ge=we("radio-group"),Se=Qf(),Ae=function(){if(s.variant.includes("filled")&&!Id(v.value))return createVNode("div",{style:W.value,class:"".concat(ge.value,"__bg-block")},null)},Re=function(){var Ke;return(Ke=s.options)===null||Ke===void 0?void 0:Ke.map(function(Lr){var _y=Lr;return(Vt(Lr)||Qe(Lr))&&(_y={value:Lr,label:Lr.toString()}),createVNode(gv,{key:"radio-group-options-".concat(_y.value,"-").concat(Math.random()),name:s.name,checked:v.value===_y.value,disabled:"disabled"in _y?_y.disabled:s.disabled,value:_y.value},{default:function(){return[rt(_y.label)?_y.label(h):_y.label]}})})},Be=computed(function(){return["".concat(ge.value),E.value[s.size],ne(ne(ne({},"".concat(ge.value,"__outline"),s.variant==="outline"),"".concat(ge.value,"--filled"),s.variant.includes("filled")),"".concat(ge.value,"--primary-filled"),s.variant==="primary-filled")]});return function(){return createVNode("div",{ref:$,class:Be.value},[Se("default")||Re(),Ae()])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function rb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Bc(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?rb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):rb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function MV(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!isVNode$1(s)}var IV=defineComponent({name:"TRadioButton",inheritAttrs:!1,props:Bc({},Rw),setup:function(s,l){var c=l.attrs;provide(Vw,reactive({}));var d=computed(function(){var g=Bc(Bc({},s),dv(c,Object.keys(c).filter(function(v){return v.startsWith("on")})));return g}),f=Xt();return function(){var g;return createVNode(gv,d.value,MV(g=f("default","label"))?g:{default:function(){return[g]}})}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */ze(gv);var Kw=ze(PV),Ww=ze(IV);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var NV={disabled:{type:Boolean,default:void 0},inputNumberProps:{type:[Boolean,Object],default:!1},label:{type:[String,Boolean,Function],default:!0},layout:{type:String,default:"horizontal",validator:function(s){return s?["vertical","horizontal"].includes(s):!0}},marks:{type:[Object,Array]},max:{type:Number,default:100},min:{type:Number,default:0},range:Boolean,showStep:Boolean,step:{type:Number,default:1},tooltipProps:{type:Object},value:{type:[Number,Array],default:void 0},modelValue:{type:[Number,Array],default:void 0},defaultValue:{type:[Number,Array],default:0},onChange:Function,onChangeEnd:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Yd=function(s,l){return l?{top:"calc(".concat(100-s,"% - 1px)")}:{left:"".concat(s,"%")}},ab=function(s,l){return l==="first"?s instanceof Array?s[0]:s:s instanceof Array?s[1]:0},jV=function(s,l){if(!s)return String(l);if(Qe(s)){var c=String(l);try{var d=/\${value}%/g,f=d.test(s);if(f)c=s.replace(d,String(l));else throw c=s,new Error}catch{console.warn("fail to parse label prop, please pass string such as '${value}%'")}return c}return s};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function ob(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Na(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?ob(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):ob(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var DV={visible:!1,trigger:"hover",showArrow:!0,overlayInnerStyle:void 0,overlayClassName:void 0,attach:"body",theme:"default"},BV=function(s){var l=ref(),c=computed({get:function(){return!!s.value.tooltipProps},set:function(b){return b}}),d=ref(Na({},DV)),f=function(b){c.value&&(d.value.visible=b)},g=Ye(),v=computed(function(){var b=s.value,$=b.vertical,y=b.tooltipProps,x=b.label,C=b.value,E=b.position,N=b.range,W=$?"right":"top",q=function(){return x===!0?String(C):typeof x=="string"?jV(x,C):g("label",{params:N?{value:C,position:E}:{value:C}})}();return y instanceof Object?(y!=null&&y.placement||(d.value.placement=W),y.content&&(q=y.content),Na(Na(Na({},d.value),y),{},{content:q})):Na(Na({},d.value),{},{placement:W,content:q})});return{tooltipRef:l,tooltipProps:v,toggleTooltip:f,showTooltip:c}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Gw=Symbol("sliderProps");/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Zd=defineComponent({name:"TSliderButton",props:{value:{type:[Number],default:0},vertical:{type:Boolean,default:!1},tooltipProps:{type:[Boolean,Object],default:!0},label:{type:[String,Boolean,Function]},range:{type:Boolean,default:!1},position:{type:String}},emits:["input","mouseup"],setup:function(s,l){var c=we("slider__button"),d=computed(function(){return s}),f=BV(d),g=f.tooltipRef,v=f.tooltipProps,b=f.toggleTooltip,$=f.showTooltip,y=inject(Gw),x=ref(),C=ref(!1),E=reactive({dragging:!1,isClick:!1,startX:0,startY:0,startPos:0,newPos:null}),N=computed(function(){return Number(y.max)-Number(y.min)}),W=computed(function(){return"".concat((s.value-y.min)/N.value*100,"%")}),q=computed(function(){return y.step}),Y=computed(function(){return s.vertical?{bottom:W.value}:{left:W.value}});watchEffect(function(){y.toggleDragging(E.dragging)});var re=function(Ke){var Lr=Ke;if(!(Lr===null||Number.isNaN(Lr))){Lr>100?Lr=100:Lr<0&&(Lr=0);var _y=100*q.value/N.value,by=Math.round(Lr/_y),yy=by*_y*N.value*.01;yy+=y.min,yy=Number(parseFloat("".concat(yy)).toFixed(y.precision)),l.emit("input",yy),nextTick(function(){var my,$t;g.value&&((my=($t=g.value).updatePopper)===null||my===void 0||my.call($t))})}},se=function(){x.value.focus(),b(!0)},de=function(){E.dragging||b(!1)},he=function(Ke){E.dragging=!0,E.isClick=!0;var Lr=Ke.type,_y=Ke.clientY,by=Ke.clientX;if(Lr==="touchstart"){var yy=Ke.touches,my=[yy[0].clientY,yy[0].clientX];_y=my[0],by=my[1]}s.vertical?E.startY=_y:E.startX=by,E.startPos=parseFloat(W.value),E.newPos=E.startPos},ge=function(Ke){var Lr=Ke;if(E.dragging){C.value=!0,E.isClick=!1,y!=null&&y.resetSize&&rt(y==null?void 0:y.resetSize)&&y.resetSize();var _y=0,by=y.sliderSize;s.vertical?_y=E.startY-Lr.clientY:_y=Lr.clientX-E.startX,_y=_y/by*100,E.newPos=E.startPos+_y,re(E.newPos)}},Se=function(){E.dragging&&(setTimeout(function(){E.dragging=!1,b(!1),E.isClick||re(E.newPos),C.value&&l.emit("mouseup"),C.value=!1},0),window.removeEventListener("mousemove",ge),window.removeEventListener("touchmove",ge),window.removeEventListener("mouseup",Se),window.removeEventListener("touchend",Se),window.removeEventListener("contextmenu",Se))};function Ae(Ke){y.disabled||(Ke.preventDefault(),he(Ke),window.addEventListener("mousemove",ge),window.addEventListener("mouseup",Se),window.addEventListener("touchmove",ge),window.addEventListener("touchend",Se),window.addEventListener("contextmenu",Se))}var Re=function(Ke){if(!y.disabled){var Lr=q.value/N.value*100;Ke==="sub"&&(Lr=-Lr),E.newPos=parseFloat(W.value)+Lr,re(E.newPos)}},Be=function(Ke){var Lr=Ke.code;Ke.preventDefault(),(Lr==="ArrowDown"||Lr==="ArrowLeft")&&Re("sub"),(Lr==="ArrowUp"||Lr==="ArrowRight")&&Re("add")};return l.expose({setPosition:re}),function(){return createVNode("div",{ref:x,class:"".concat(c.value,"-wrapper"),style:Y.value,tabindex:"0","show-tooltip":$.value,disabled:y.disabled,onmouseenter:se,onmouseleave:de,onmousedown:Ae,onTouchstart:Ae,onfocus:se,onblur:de,onKeydown:Be},[createVNode(Ja,mergeProps({ref:g,hideEmptyPopup:!0,disabled:!$.value},v.value),{default:function(){return[createVNode("div",{class:[c.value,ne({},"".concat(c.value,"--dragging"),E.dragging)]},null)]}})])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var FV=defineComponent({name:"TSliderMark",props:{mark:{type:[Object,Array,String,Number]},point:{type:Number},onClickMarkPoint:{type:Function,default:function(){}}},setup:function(s){var l=we("slider__mark"),c=function(d){var f;d.stopPropagation(),s==null||(f=s.onClickMarkPoint)===null||f===void 0||f.call(s,s.point)};return function(){return createVNode("div",{class:"".concat(l.value,"-text"),onClick:c},[s.mark])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var LV=function(s){var l=s.value.prefixName,c=computed(function(){var f=s.value;if(!f.marks)return[];var g=[];if(at(f.marks)){var v=Pr(f.marks).sort(function(y,x){return y-x}),b=Math.max.apply(Math,wt(v).concat([f.max])),$=Math.min.apply(Math,wt(v).concat([f.min]));$<f.min&&fo.errorOnce("TSlider","marks min value should >= props min"),b>f.max&&fo.errorOnce("TSlider","marks max value should <= props max"),v.forEach(function(y){g.push({point:y,position:(y-$)/(b-$)*100,mark:y})})}else Object.keys(f.marks).map(parseFloat).sort(function(y,x){return y-x}).filter(function(y){return y<=f.max&&y>=f.min}).forEach(function(y){var x={point:y,position:(y-f.min)*100/(f.max-f.min),mark:f.marks[y]};g.push(x)});return g}),d=function(f){return c.value.length?createVNode("div",null,[createVNode("div",{class:"".concat(l,"__stops")},[c.value.map(function(g,v){return g.position===0||g.position===100?null:createVNode("div",{class:"".concat(l,"__stop ").concat(l,"__mark-stop"),style:Yd(g.position,s.value.vertical),key:v},null)})]),createVNode("div",{class:"".concat(l,"__mark")},[c.value.map(function(g,v){return createVNode(FV,{mark:g.mark,point:g.point,key:v,style:Yd(g.position,s.value.vertical),onClickMarkPoint:f},null)})])]):null};return d};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function ib(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function lb(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?ib(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):ib(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var RV=function(s){var l=s.value.prefixName,c=computed(function(){var g,v={format:void 0,placeholder:"",theme:"column",decimalPlaces:((g=s.value.step.toString().split(".")[1])===null||g===void 0?void 0:g.length)||0},b=s.value;if(!nn(b.inputNumberProps)){var $,y=($=b.inputNumberProps)===null||$===void 0?void 0:$.theme;v=lb(lb({},v),ba(b.inputNumberProps,"onChange")),["column","row","normal"].includes(y)&&(v.theme=y)}return v}),d=computed(function(){return["".concat(l,"__input"),{"is-vertical":s.value.vertical}]}),f=function(g,v){var b=function($,y){var x,C;$!==void 0&&!isNaN($)&&v($),(x=s.value)===null||x===void 0||(x=x.inputNumberProps)===null||x===void 0||(C=x.onChange)===null||C===void 0||C.call(x,$,y)};return createVNode(Cr,mergeProps(c.value,{class:d.value,value:g,step:s.value.step,onChange:b,disabled:s.value.disabled,min:s.value.min,max:s.value.max}),null)};return f};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function sb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function zV(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?sb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):sb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var VV=defineComponent({name:"TSlider",model:{prop:"value",event:"change"},props:zV({},NV),setup:function(s){var l=Jt(),c=we("slider"),d=Ft(),f=d.STATUS,g=toRefs(s),v=g.value,b=g.modelValue,$=Lt(v,b,s.defaultValue,s.onChange),y=je($,2),x=y[0],C=y[1],E=ref(),N=ref(),W=ref(),q=ref(),Y=ref(ab(x.value,"first")),re=ref(ab(x.value,"second")),se=ref(!1),de=ref(1),he=computed(function(){return s.layout==="vertical"}),ge=computed(function(){return["".concat(c.value,"__container"),{"is-vertical":he.value}]}),Se=computed(function(){return["".concat(c.value),ne(ne(ne({"is-vertical":he.value},"".concat(c.value,"--with-input"),s.inputNumberProps),"".concat(c.value,"--vertical"),he.value),f.value.disabled,l.value)]}),Ae=computed(function(){return["".concat(c.value,"__rail"),{"show-input":s.inputNumberProps,disabled:l.value}]}),Re=computed(function(){return he.value?{height:"100%"}:{}}),Be=computed(function(){var Z$=s.range?"".concat(100*(Lr.value-s.min)/Ke.value,"%"):"0%",dS=s.range?_y.value-Lr.value:Y.value-s.min,ES="".concat(100*dS/Ke.value,"%");return he.value?{height:ES,bottom:Z$}:{width:ES,left:Z$}}),Ke=computed(function(){return s.max-s.min}),Lr=computed(function(){return Math.min(Y.value,re.value)}),_y=computed(function(){return Math.max(Y.value,re.value)}),by=computed(function(){if(!s.showStep||s.min>s.max)return[];if(s.step===0)return console.warn("[Element Warn][Slider]step should not be 0."),[];for(var Z$=Ke.value/s.step,dS=100*s.step/Ke.value,ES=[],wy=1;wy<Z$;wy++)ES.push(wy*dS);if(s.range){var tS=ES.filter(function(yS){return yS<100*(Lr.value-s.min)/Ke.value||s.step>100*(_y.value-s.max)/Ke.value});return tS}return ES.filter(function(yS){return yS>100*(Y.value-s.min)/Ke.value})}),yy=computed(function(){var Z$=[s.min,s.max,s.step].map(function(dS){var ES="".concat(dS).split(".");return ES[1]?ES[1].length:0});return Math.max.apply(null,Z$)}),my=function(Z$){var dS=[s.min,s.max],ES=dS[0],wy=dS[1];if(ES>wy){console.warn("[Slider] max should be greater than min.");return}if(s.range&&at(Z$)){var tS=[Math.min.apply(Math,wt(Z$)),Math.max.apply(Math,wt(Z$))],yS=tS[0],Q$=tS[1];yS>wy&&(yS=Y.value),yS<ES&&(yS=ES),Q$<ES&&(Q$=re.value),Q$>wy&&(Q$=wy);var eS=[yS,Q$];return Y.value=eS[0],re.value=eS[1],[yS,Q$]}var cS=Z$;return cS<ES&&(cS=ES),cS>wy&&(cS=wy),cS},$t=function(Z$){var dS=Z$;dS===void 0&&(s.range?dS=[Y.value,re.value]:dS=Y.value);var ES=my(dS);C(ES)},K$=function(){N.value&&(de.value=N.value["client".concat(he.value?"Height":"Width")])},Y$=ref(!1),W$=function(){var Z$;s.range?(at(x.value)?(Y.value=Math.max(s.min||0,x.value[0]),re.value=Math.min(s.max||100,x.value[1])):(Y.value=s.min||0,re.value=s.max||100),Z$="".concat(Y.value,"-").concat(re.value)):(Vt(x.value)?Y.value=Math.min(s.max,Math.max(s.min,x.value)):Y.value=s.min,Z$=String(Y.value)),E.value&&E.value.setAttribute("aria-valuetext",Z$),K$(),window.addEventListener("resize",K$)},U$=function(Z$){var dS=Z$*Ke.value/100;if(dS=s.min+dS,!s.range&&W.value){W.value.setPosition(Z$);return}var ES;Math.abs(Lr.value-dS)<Math.abs(_y.value-dS)?ES=Y.value<re.value?"button1":"button2":ES=Y.value>re.value?"button1":"button2",ES==="button1"&&W.value&&W.value.setPosition(Z$),ES==="button2"&&q.value&&q.value.setPosition(Z$)},hy=function(){var Z$=s.range?[Y.value,re.value]:Y.value;return my(Z$)},G$=function(Z$){var dS;if(!(l.value||se.value)&&N.value){K$();var ES=0;if(he.value){var wy=N.value.getBoundingClientRect().bottom;ES=(wy-Z$.clientY)/de.value*100,U$(ES)}else{var tS=N.value.getBoundingClientRect().left;ES=(Z$.clientX-tS)/de.value*100,U$(ES)}var yS=hy();(dS=s.onChangeEnd)===null||dS===void 0||dS.call(s,yS)}},ky=function(Z$){var dS;if(!(l.value||se.value)){K$();var ES=Number(Z$/Ke.value*100);U$(ES),$t(Z$);var wy=hy();(dS=s.onChangeEnd)===null||dS===void 0||dS.call(s,wy)}};watch(function(){return x.value},function(Z$){if(se.value!==!0)if(at(Z$)&&s.range){var dS=je(Z$,2);Y.value=dS[0],re.value=dS[1]}else Y.value=Z$}),watch([Y,re,se],function(Z$,dS){Z$[0]!==dS[0]&&(s.range?$t([Lr.value,_y.value]):$t(Y.value)),Z$[1]!==dS[1]&&s.range&&$t([Lr.value,_y.value]),Z$[2]!==dS[2]&&Z$[2]===!1&&W$()}),onMounted(function(){W$(),Y$.value=!0}),onBeforeUnmount(function(){window.removeEventListener("resize",K$)});var $y=computed(function(){return{max:s.max,min:s.min,marks:s.marks,vertical:he.value,prefixName:c.value}}),rS=LV($y),lS=computed(function(){return{max:s.max,min:s.min,inputNumberProps:s.inputNumberProps,step:s.step,prefixName:c.value,vertical:he.value,disabled:l.value}}),bS=RV(lS),IS=function(){var Z$=my(Y.value),dS=function(tS){Y.value=my(tS)},ES=my(re.value),wy=function(tS){re.value=my(tS)};return createVNode("div",{class:["".concat(c.value,"__input-container"),{"is-vertical":he.value}]},[bS(Z$,dS),s.range&&createVNode("div",{class:"".concat(c.value,"__center-line")},null),s.range&&bS(ES,wy)])},BS=function(Z$){se.value=Z$},MS=toRefs(s),zS=MS.min,LS=MS.max,nS=MS.step;return provide(Gw,reactive({min:zS,max:LS,step:nS,dragging:se,toggleDragging:BS,precision:yy,disabled:l,resetSize:K$,sliderSize:de})),function(){return createVNode("div",{class:ge.value,ref:E},[createVNode("div",{class:Se.value,role:"slider","aria-valuemin":s.min,"aria-valuemax":s.max,"aria-orientation":s.layout,"aria-disabled":l.value,"tooltip-props":s.tooltipProps},[createVNode("div",{class:Ae.value,style:Re.value,onClick:G$,ref:N},[createVNode("div",{class:"".concat(c.value,"__track"),style:Be.value},null),createVNode(Zd,{vertical:he.value,value:Y.value,ref:W,disabled:l.value,range:s.range,position:"start","tooltip-props":s.tooltipProps,label:s.label,onInput:function(Z$){Y.value=Z$},onMouseup:function(){var Z$,dS=hy();(Z$=s.onChangeEnd)===null||Z$===void 0||Z$.call(s,dS)}},null),s.range&&createVNode(Zd,{vertical:he.value,value:re.value,ref:q,disabled:l.value,label:s.label,range:s.range,position:"end","tooltip-props":s.tooltipProps,onInput:function(Z$){re.value=Z$},onMouseup:function(){var Z$,dS=hy();(Z$=s.onChangeEnd)===null||Z$===void 0||Z$.call(s,dS)}},null),s.showStep&&createVNode("div",{class:"".concat(c.value,"__stops")},[by.value.map(function(Z$,dS){return Z$.position===0||Z$.position===100?null:createVNode("div",{class:"".concat(c.value,"__stop"),key:dS,style:Yd(Z$,he.value)},null)})]),rS(ky)])]),Y$.value&&s.inputNumberProps&&IS()])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var qw=ze(VV);ze(Zd);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var yn,HV=`
  min-height:0 !important;
  max-height:none !important;
  height:0 !important;
  visibility:hidden !important;
  overflow-y:hidden !important;
  position:absolute !important;
  z-index:-1000 !important;
  top:0 !important;
  right:0 !important
`,UV=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","font-variant","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function KV(s){if(!(typeof window>"u"||!s)){var l=window.getComputedStyle(s),c=l.getPropertyValue("box-sizing")||l.getPropertyValue("-moz-box-sizing")||l.getPropertyValue("-webkit-box-sizing"),d=parseFloat(l.getPropertyValue("padding-bottom"))+parseFloat(l.getPropertyValue("padding-top")),f=parseFloat(l.getPropertyValue("border-bottom-width"))+parseFloat(l.getPropertyValue("border-top-width")),g=UV.map(function(v){return"".concat(v,":").concat(l.getPropertyValue(v))}).join(";");return{sizingStyle:g,paddingSize:d,borderSize:f,boxSizing:c}}}function ub(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,c=arguments.length>2&&arguments[2]!==void 0?arguments[2]:null;yn||(yn=document.createElement("textarea"),document.body.appendChild(yn));var d=KV(s),f=d.paddingSize,g=d.borderSize,v=d.boxSizing,b=d.sizingStyle;yn.setAttribute("style","".concat(b,";").concat(HV)),yn.value=s.value||s.placeholder||"";var $=yn.scrollHeight,y={};v==="border-box"?$+=g:v==="content-box"&&($-=f),yn.value="";var x=yn.scrollHeight-f;if(l!==null){var C=x*l;v==="border-box"&&(C=C+f+g),$=Math.max(C,$),y.minHeight="".concat(C,"px")}if(c!==null){var E=x*c;v==="border-box"&&(E=E+f+g),$=Math.min(E,$)}return y.height="".concat($,"px"),yn.parentNode&&yn.parentNode.removeChild(yn),yn=null,y}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var WV={allowInputOverMax:{type:Boolean,default:!1},autofocus:Boolean,autosize:{type:[Boolean,Object],default:!1},disabled:{type:Boolean,default:void 0},maxcharacter:{type:Number},maxlength:{type:[Number,String]},name:{type:String,default:""},placeholder:{type:String,default:void 0},readonly:Boolean,status:{type:String,validator:function(s){return["default","success","warning","error"].includes(s)}},tips:{type:[String,Function]},value:{type:[String,Number]},modelValue:{type:[String,Number]},defaultValue:{type:[String,Number]},onBlur:Function,onChange:Function,onFocus:Function,onKeydown:Function,onKeypress:Function,onKeyup:Function,onValidate:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function cb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function GV(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?cb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):cb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function db(s){var l={};return Object.keys(s).forEach(function(c){ma(s[c])||(l[c]=s[c])}),l}var qV=defineComponent({name:"TTextarea",inheritAttrs:!1,props:GV({},WV),setup:function(s,l){var c=l.attrs,d=l.expose,f=we(),g=we("textarea"),v=computed(function(){return"".concat(g.value,"__tips")}),b=computed(function(){return"".concat(g.value,"__limit")}),$=toRefs(s),y=$.value,x=$.modelValue,C=Lt(y,x,s.defaultValue,s.onChange),E=je(C,2),N=E[0],W=E[1],q=Jt(),Y=ref({}),re=ref(),se=ref(!1),de=ref(!1),he=function(){var lS;return(lS=re.value)===null||lS===void 0?void 0:lS.focus()},ge=function(){var lS;return(lS=re.value)===null||lS===void 0?void 0:lS.blur()},Se=function(){var lS;if(s.autosize===!0)Y.value=ub(re.value);else if(s.autosize&&Zt(s.autosize)==="object"){var bS=s.autosize,IS=bS.minRows,BS=bS.maxRows;Y.value=ub(re.value,IS,BS)}else c.rows?Y.value={height:"auto",minHeight:"auto"}:c.style&&(lS=re.value)!==null&&lS!==void 0&&(lS=lS.style)!==null&&lS!==void 0&&lS.height&&(Y.value={height:re.value.style.height})},Ae=function(){var lS=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",bS=re.value,IS=String(lS);bS&&bS.value!==IS&&(bS.value=IS,N.value=IS)},Re=function(lS){var bS=lS.target,IS=bS.value;if(s.maxcharacter&&s.maxcharacter>=0){var BS=ca(IS,s.maxcharacter);IS=Zt(BS)==="object"&&BS.characters}!de.value&&W(IS,{e:lS}),nextTick(function(){return Ae(IS)}),Se()},Be=function(lS){Re(lS)},Ke=function(){de.value=!0},Lr=function(lS){de.value=!1,Re(lS)},_y=function(lS,bS){var IS;if(!q.value){var BS="on".concat(lS[0].toUpperCase()).concat(lS.slice(1));(IS=s[BS])===null||IS===void 0||IS.call(s,N.value,{e:bS})}},by=function(lS){_y("keydown",lS)},yy=function(lS){_y("keyup",lS)},my=function(lS){_y("keypress",lS)},$t=function(lS){var bS;Se(),!q.value&&(se.value=!0,(bS=s.onFocus)===null||bS===void 0||bS.call(s,N.value,{e:lS}))},K$=inject(pv,void 0),Y$=function(lS){var bS;Se(),se.value=!1,(bS=s.onBlur)===null||bS===void 0||bS.call(s,N.value,{e:lS}),K$==null||K$.handleBlur()},W$=computed(function(){return[g.value,ne(ne({},"".concat(f.value,"-is-disabled"),q.value),"".concat(f.value,"-is-readonly"),s.readonly)]}),U$=computed(function(){return db({autofocus:s.autofocus,disabled:q.value,readonly:s.readonly,placeholder:s.placeholder,maxlength:!s.allowInputOverMax&&s.maxlength||void 0,name:s.name||void 0})}),hy=computed(function(){var lS=ca(String(N.value||""));return Zt(lS)==="object"?lS.length:lS}),G$=computed(function(){return{value:[void 0,null].includes(N.value)?void 0:String(N.value),status:s.status,maxlength:Number(s.maxlength),maxcharacter:s.maxcharacter,allowInputOverMax:s.allowInputOverMax,onValidate:s.onValidate}}),ky=Cw(G$),$y=ky.tStatus;watch(function(){return N.value},function(){return Se()}),watch(re,function(lS){lS&&Se()}),watch(function(){return s.autofocus},function(lS){lS&&re.value.focus()}),watch(Y,function(lS){var bS=c.style;ao(re.value,qf(bS,lS))}),watch(N,function(){nextTick(function(){return Se()})}),watch(function(){return s.autosize},Se,{deep:!0}),d({focus:he,blur:ge}),onMounted(function(){Se()});var rS=Ye();return function(){var lS,bS=db({onFocus:$t,onBlur:Y$,onKeydown:by,onKeyup:yy,onKeypress:my}),IS=Ft(),BS=IS.STATUS,MS=computed(function(){return["".concat(g.value,"__inner"),ne(ne(ne(ne({},"".concat(f.value,"-is-").concat($y.value),$y.value),BS.value.disabled,q.value),BS.value.focused,se.value),"".concat(f.value,"-resize-none"),Zt(s.autosize)==="object"),"narrow-scrollbar"]}),zS=rS("tips"),LS=zS&&createVNode("div",{class:"".concat(v.value," ").concat(g.value,"__tips--").concat(s.status||"normal")},[zS]),nS=s.maxcharacter&&createVNode("span",{class:b.value},["".concat(hy.value,"/").concat(s.maxcharacter)])||!s.maxcharacter&&s.maxlength&&createVNode("span",{class:b.value},["".concat(N.value?(lS=String(N.value))===null||lS===void 0?void 0:lS.length:0,"/").concat(s.maxlength)]);return createVNode("div",mergeProps({class:W$.value},dv(c,["style"])),[createVNode("textarea",mergeProps({onInput:Be,onCompositionstart:Ke,onCompositionend:Lr,ref:re,value:N.value,class:MS.value},bS,U$.value),null),LS||nS?createVNode("div",{class:["".concat(g.value,"__info_wrapper"),ne({},"".concat(g.value,"__info_wrapper_align"),!LS)]},[LS,nS]):null])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Hr=ze(qV);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var To={borderless:Boolean,clearable:Boolean,closeBtn:{type:[String,Boolean,Function],default:!0},colorModes:{type:Array,default:function(){return["monochrome","linear-gradient"]}},disabled:Boolean,enableAlpha:Boolean,enableMultipleGradient:{type:Boolean,default:!0},format:{type:String,default:"RGB",validator:function(s){return s?["RGB","RGBA","HSL","HSLA","HSB","HSV","HSVA","HEX","CMYK","CSS"].includes(s):!0}},inputProps:{type:Object},multiple:Boolean,popupProps:{type:Object},recentColors:{type:Array,default:void 0},defaultRecentColors:{type:Array,default:function(){return[]}},selectInputProps:{type:Object},showPrimaryColorPreview:{type:Boolean,default:!0},size:{type:String,default:"medium",validator:function(s){return s?["small","medium","large"].includes(s):!0}},swatchColors:{type:Array},value:{type:String,default:void 0},modelValue:{type:String,default:void 0},defaultValue:{type:String,default:""},onChange:Function,onPaletteBarChange:Function,onRecentColorsChange:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var fb=100,Fc={monochrome:"","linear-gradient":""},YV="#001F97",vb="linear-gradient(90deg, rgba(241,29,0,1) 0%, rgba(73,106,220,1) 100%);",ZV=["#ECF2FE","#D4E3FC","#BBD3FB","#96BBF8","#699EF5","#4787F0","#266FE8","#0052D9","#0034B5","#001F97","#FDECEE","#F9D7D9","#F8B9BE","#F78D94","#F36D78","#E34D59","#C9353F","#B11F26","#951114","#680506","#FEF3E6","#F9E0C7","#F7C797","#F2995F","#ED7B2F","#D35A21","#BA431B","#9E3610","#842B0B","#5A1907","#E8F8F2","#BCEBDC","#85DBBE","#48C79C","#00A870","#078D5C","#067945","#056334","#044F2A","#033017"],pb=230,mb=168,hb=186,Lc=176;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var XV=["HEX","RGB","HSL","HSV","CMYK","CSS"];/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var JV="color-picker",Rn=function(s){var l=we(JV);return computed(function(){return l.value})};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function gb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function bb(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?gb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):gb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function QV(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!isVNode$1(s)}var eH=defineComponent({name:"PanelHeader",props:bb(bb({},To),{},{mode:{type:String,default:"color"},togglePopup:{type:Function},onModeChange:{type:Function,default:function(){return function(){}}}}),setup:function(s){var l=Rn(),c=ref(s.mode),d=function(f){return s.onModeChange(f)};return watch(function(){return s.mode},function(f){return c.value=f}),{baseClassName:l,modeValue:c,handleModeChange:d}},render:function(){var s,l,c,d=this;if(((l=this.colorModes)===null||l===void 0?void 0:l.length)===1)return null;var f=this.baseClassName;return createVNode("div",{class:"".concat(f,"__head")},[createVNode("div",{class:"".concat(f,"__mode")},[((c=this.colorModes)===null||c===void 0?void 0:c.length)===1?Fc[this.colorModes[0]]:createVNode(Kw,{variant:"default-filled",size:"small",modelValue:d.modeValue,"onUpdate:modelValue":function(g){return d.modeValue=g},onChange:this.handleModeChange},QV(s=Object.keys(Fc).map(function(g){return createVNode(Ww,{key:g,value:g},{default:function(){return[Fc[g]]}})}))?s:{default:function(){return[s]}})])])}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var tH=function(s,l,c){var d=0,f=0,g=0,v=0,b=parseInt("".concat(s).replace(/\s/g,""),10),$=parseInt("".concat(l).replace(/\s/g,""),10),y=parseInt("".concat(c).replace(/\s/g,""),10);if(b===0&&$===0&&y===0)return v=1,[0,0,0,1];d=1-b/255,f=1-$/255,g=1-y/255;var x=Math.min(d,Math.min(f,g));return d=(d-x)/(1-x),f=(f-x)/(1-x),g=(g-x)/(1-x),v=x,[d,f,g,v]},nH=function(s,l,c,d){var f=s/100,g=l/100,v=c/100,b=d/100;f=f*(1-b)+b,g=g*(1-b)+b,v=v*(1-b)+b;var $=1-f,y=1-g,x=1-v;return $=Math.round(255*$),y=Math.round(255*y),x=Math.round(255*x),{r:$,g:y,b:x}},rH=/cmyk\((\d+%?),(\d+%?),(\d+%?),(\d+%?)\)/,pl=function(s){return Math.max(0,Math.min(255,parseInt(s,10)))},aH=function(s){if(/cmyk/i.test(s)){var l=s.replace(/\s/g,""),c=l.match(rH),d=pl(c[1]),f=pl(c[2]),g=pl(c[3]),v=pl(c[4]),b=nH(d,f,g,v),$=b.r,y=b.g,x=b.b;return"rgb(".concat($,", ").concat(y,", ").concat(x,")")}return s};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var ja=function(s,l){for(var c="",d=0;d<s.length;d++)Qe(s[d])?c+=s[d]:c+=s[d].source;return new RegExp(c,l)},oH=function(){var s="gi",l=/(?:[+-]?\d*\.?\d+)(?:deg|grad|rad|turn)/,c=/to\s+((?:(?:left|right|top|bottom)(?:\s+(?:top|bottom|left|right))?))/,d=/\s*,\s*/,f=/#(?:[a-f0-9]{6}|[a-f0-9]{3})/,g=/\(\s*(?:\d{1,3}\s*,\s*){2}\d{1,3}\s*\)/,v=/\(\s*(?:\d{1,3}\s*,\s*){2}\d{1,3}\s*,\s*\d*\.?\d+\)/,b=/(?:[+-]?\d*\.?\d+)(?:%|[a-z]+)?/,$=/[_a-z-][_a-z0-9-]*/,y=ja(["(?:",f,"|","(?:rgb|hsl)",g,"|","(?:rgba|hsla)",v,"|",$,")"],""),x=ja([y,"(?:\\s+",b,"(?:\\s+",b,")?)?"],""),C=ja(["(?:",x,d,")*",x],""),E=ja(["(?:(",l,")|",c,")"],""),N=ja(["(?:(",E,")",d,")?(",C,")"],s),W=ja(["\\s*(",y,")","(?:\\s+","(",b,"))?","(?:",d,"\\s*)?"],s);return{gradientSearch:N,colorStopSearch:W}},iH=function(s,l){var c,d,f;s.gradientSearch.lastIndex=0;var g=s.gradientSearch.exec(l);if(!ym(g))for(c={original:g[0],colorStopList:[]},g[1]&&(c.line=g[1]),g[2]&&(c.angle=g[2]),g[3]&&(c.sideCorner=g[3]),s.colorStopSearch.lastIndex=0,d=s.colorStopSearch.exec(g[4]);!ym(d);)f={color:d[1]},d[2]&&(f.position=d[2]),c.colorStopList.push(f),d=s.colorStopSearch.exec(g[4]);return c},lH=oH(),yb=/.*gradient\s*\(((?:\([^)]*\)|[^)(]*)*)\)/gim,Yw=function(s){return yb.lastIndex=0,yb.exec(s)},sH={top:0,right:90,bottom:180,left:270,"top left":225,"left top":225,"top right":135,"right top":135,"bottom left":315,"left bottom":315,"bottom right":45,"right bottom":45},us=function(s){var l=Yw(s);if(!l)return!1;var c={points:[],degree:0},d=iH(lH,l[1]);if(d.original.trim()!==l[1].trim())return!1;var f=d.colorStopList.map(function(v){var b=v.color,$=v.position,y=Object.create(null);return y.color=ke(b).toRgbString(),y.left=parseFloat($),y});c.points=f;var g=parseInt(d.angle,10);return Number.isNaN(g)&&(g=sH[d.sideCorner]||90),c.degree=g,c};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Xd;function _b(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function wb(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?_b(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):_b(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var xt=Math.round,Rc=function(s){return ke(s).toRgb()},uH=function(s){return ke(s).toHsv()},cH=function(s){return ke(s).toHsl()},cs=function(s){var l=s.points,c=s.degree,d=l.sort(function(f,g){return f.left-g.left}).map(function(f){return"".concat(f.color," ").concat(Math.round(f.left*100)/100,"%")});return"linear-gradient(".concat(c,"deg,").concat(d.join(","),")")},dH=function(){return(1+Math.random()*4294967295).toString(16)},Zw=function(s,l){return{id:dH(),left:s,color:l}},Bn=function(){function s(l){fv(this,s),ne(this,"states",{s:100,v:100,h:100,a:1}),ne(this,"originColor",void 0),ne(this,"isGradient",void 0),ne(this,"gradientStates",{colors:[],degree:0,selectedId:null,css:""}),this.update(l)}return vv(s,[{key:"update",value:function(l){if(l!==this.originColor){if(this.isGradient){var c=ke(l).toHsv();this.states=c,this.updateCurrentGradientColor();return}this.originColor=l,this.isGradient=!1;var d=us(l),f=l;if(d){var g,v;this.isGradient=!0;var b=d,$=b.points.map(function(y){return Zw(y.left,y.color)});this.gradientStates={colors:$,degree:b.degree,selectedId:((g=$[0])===null||g===void 0?void 0:g.id)||null},this.gradientStates.css=this.linearGradient,f=(v=this.gradientSelectedPoint)===null||v===void 0?void 0:v.color}this.updateStates(f)}}},{key:"saturation",get:function(){return this.states.s},set:function(l){this.states.s=Math.max(0,Math.min(100,l)),this.updateCurrentGradientColor()}},{key:"value",get:function(){return this.states.v},set:function(l){this.states.v=Math.max(0,Math.min(100,l)),this.updateCurrentGradientColor()}},{key:"hue",get:function(){return this.states.h},set:function(l){this.states.h=Math.max(0,Math.min(360,l)),this.updateCurrentGradientColor()}},{key:"alpha",get:function(){return this.states.a},set:function(l){this.states.a=Math.max(0,Math.min(1,Math.round(l*100)/100)),this.updateCurrentGradientColor()}},{key:"rgb",get:function(){var l=Rc(this.states),c=l.r,d=l.g,f=l.b;return"rgb(".concat(xt(c),", ").concat(xt(d),", ").concat(xt(f),")")}},{key:"rgba",get:function(){var l=Rc(this.states),c=l.r,d=l.g,f=l.b,g=l.a;return"rgba(".concat(xt(c),", ").concat(xt(d),", ").concat(xt(f),", ").concat(g,")")}},{key:"hsv",get:function(){var l=this.getHsva(),c=l.h,d=l.s,f=l.v;return"hsv(".concat(c,", ").concat(d,"%, ").concat(f,"%)")}},{key:"hsva",get:function(){var l=this.getHsva(),c=l.h,d=l.s,f=l.v,g=l.a;return"hsva(".concat(c,", ").concat(d,"%, ").concat(f,"%, ").concat(g,")")}},{key:"hsl",get:function(){var l=this.getHsla(),c=l.h,d=l.s,f=l.l;return"hsl(".concat(c,", ").concat(d,"%, ").concat(f,"%)")}},{key:"hsla",get:function(){var l=this.getHsla(),c=l.h,d=l.s,f=l.l,g=l.a;return"hsla(".concat(c,", ").concat(d,"%, ").concat(f,"%, ").concat(g,")")}},{key:"hex",get:function(){return ke(this.states).toHexString()}},{key:"hex8",get:function(){return ke(this.states).toHex8String()}},{key:"cmyk",get:function(){var l=this.getCmyk(),c=l.c,d=l.m,f=l.y,g=l.k;return"cmyk(".concat(c,", ").concat(d,", ").concat(f,", ").concat(g,")")}},{key:"css",get:function(){return this.isGradient?this.linearGradient:this.rgba}},{key:"linearGradient",get:function(){var l=this.gradientColors,c=this.gradientDegree;return cs({points:l,degree:c})}},{key:"gradientColors",get:function(){return this.gradientStates.colors},set:function(l){this.gradientStates.colors=l,this.gradientStates.css=this.linearGradient}},{key:"gradientSelectedId",get:function(){return this.gradientStates.selectedId},set:function(l){var c;l!==this.gradientSelectedId&&(this.gradientStates.selectedId=l,this.updateStates((c=this.gradientSelectedPoint)===null||c===void 0?void 0:c.color))}},{key:"gradientDegree",get:function(){return this.gradientStates.degree},set:function(l){this.gradientStates.degree=Math.max(0,Math.min(360,l)),this.gradientStates.css=this.linearGradient}},{key:"gradientSelectedPoint",get:function(){var l=this.gradientColors,c=this.gradientSelectedId;return l.find(function(d){return d.id===c})}},{key:"getFormatsColorMap",value:function(){return{HEX:this.hex,CMYK:this.cmyk,RGB:this.rgb,RGBA:this.rgba,HSL:this.hsl,HSLA:this.hsla,HSV:this.hsv,HSVA:this.hsva,CSS:this.css,HEX8:this.hex8}}},{key:"updateCurrentGradientColor",value:function(){var l=this.isGradient,c=this.gradientColors,d=this.gradientSelectedId,f=c.length,g=this.gradientSelectedPoint;if(!l||f===0||!g)return!1;var v=c.findIndex(function($){return $.id===d}),b=wb(wb({},g),{},{color:this.rgba});return c.splice(v,1,b),this.gradientColors=c,this}},{key:"updateStates",value:function(l){var c=ke(aH(l)),d=c.toHsv();this.states=d}},{key:"getRgba",value:function(){var l=Rc(this.states),c=l.r,d=l.g,f=l.b,g=l.a;return{r:xt(c),g:xt(d),b:xt(f),a:g}}},{key:"getCmyk",value:function(){var l=this.getRgba(),c=l.r,d=l.g,f=l.b,g=tH(c,d,f),v=je(g,4),b=v[0],$=v[1],y=v[2],x=v[3];return{c:xt(b*100),m:xt($*100),y:xt(y*100),k:xt(x*100)}}},{key:"getHsva",value:function(){var l=uH(this.states),c=l.h,d=l.s,f=l.v,g=l.a;return c=xt(c),d=xt(d*100),f=xt(f*100),g*=1,{h:c,s:d,v:f,a:g}}},{key:"getHsla",value:function(){var l=cH(this.states),c=l.h,d=l.s,f=l.l,g=l.a;return c=xt(c),d=xt(d*100),f=xt(f*100),g*=1,{h:c,s:d,l:f,a:g}}},{key:"equals",value:function(l){return ke.equals(this.rgba,l)}}],[{key:"isValid",value:function(l){return us(l)?!0:ke(l).isValid()}},{key:"hsva2color",value:function(l,c,d,f){return ke({h:l,s:c,v:d,a:f}).toHsvString()}},{key:"hsla2color",value:function(l,c,d,f){return ke({h:l,s:c,l:d,a:f}).toHslString()}},{key:"rgba2color",value:function(l,c,d,f){return ke({r:l,g:c,b:d,a:f}).toHsvString()}},{key:"hex2color",value:function(l,c){var d=ke(l);return d.setAlpha(c),d.toHexString()}},{key:"object2color",value:function(l,c){if(c==="CMYK"){var d=l.c,f=l.m,g=l.y,v=l.k;return"cmyk(".concat(d,", ").concat(f,", ").concat(g,", ").concat(v,")")}var b=ke(l,{format:c});return b.toRgbString()}}])}();Xd=Bn;ne(Bn,"isGradientColor",function(s){return!!Yw(s)});ne(Bn,"compare",function(s,l){var c=Xd.isGradientColor(s),d=Xd.isGradientColor(l);if(c&&d){var f=cs(us(s)),g=cs(us(l));return f===g}return!c&&!d?ke.equals(s,l):!1});var fH=["alpha","css","hex","hex8","hsl","hsla","hsv","hsva","rgb","rgba","saturation","value","isGradient"],Cb=function(s){if(!s)return null;var l=Object.create(null);return fH.forEach(function(c){return l[c]=s[c]}),s.isGradient&&(l.linearGradient=s.linearGradient),l};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function kb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function $b(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?kb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):kb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function vH(s,l){pH(s,l),l.add(s)}function pH(s,l){if(l.has(s))throw new TypeError("Cannot initialize the same private elements twice on an object")}function eo(s,l,c){if(typeof s=="function"?s===l:s.has(l))return arguments.length<3?l:c;throw new TypeError("Private element is not present on this object")}var mH={start:function(s,l){},drag:function(s,l){},end:function(s,l){}},aa=new WeakSet,Xw=function(){function s(l,c){fv(this,s),vH(this,aa),ne(this,"dragging",!1),ne(this,"$el",void 0),ne(this,"props",void 0),ne(this,"handles",void 0),this.$el=l,this.props=$b($b({},mH),c),this.handles={start:eo(aa,this,hH).bind(this),drag:eo(aa,this,gH).bind(this),end:eo(aa,this,bH).bind(this)},this.$el.addEventListener("mousedown",this.handles.start,!1)}return vv(s,[{key:"destroy",value:function(){this.$el.removeEventListener("mousedown",this.handles.start,!1),window.removeEventListener("mousemove",this.handles.drag,!1),window.removeEventListener("mouseup",this.handles.end,!1),window.removeEventListener("contextmenu",this.handles.end,!1)}}])}();function hH(s){this.dragging||(window.addEventListener("mousemove",this.handles.drag,!1),window.addEventListener("mouseup",this.handles.end,!1),window.addEventListener("contextmenu",this.handles.end,!1),this.dragging=!0,this.props.start(eo(aa,this,bv).call(this,s),s))}function gH(s){this.dragging&&this.props.drag(eo(aa,this,bv).call(this,s),s)}function bH(s){var l=this;setTimeout(function(){l.dragging=!1,l.props.end(eo(aa,l,bv).call(l,s),s)},0),window.removeEventListener("mousemove",this.handles.drag,!1),window.removeEventListener("mouseup",this.handles.end,!1),window.removeEventListener("contextmenu",this.handles.end,!1)}function bv(s){var l=this.$el.getBoundingClientRect(),c=s,d=c.clientX-l.left,f=c.clientY-l.top;return{y:Math.min(Math.max(0,f),l.height),x:Math.min(Math.max(0,d),l.width)}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var qi={disabled:Boolean,color:{type:Object},onChange:{type:Function,default:function(){return function(){}}}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Sb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function xb(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Sb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Sb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var yH=["delete","backspace"],_H=defineComponent({name:"LinearGradient",inheritAttrs:!1,props:xb(xb({},qi),{},{enableMultipleGradient:{type:Boolean,default:!0}}),setup:function(s){var l=Rn(),c=Ft(),d=c.STATUS,f=d.value,g=ref(null),v=reactive({left:0,width:Lc}),b=ref(!1),$=ref(!1),y=ref(s.color.gradientDegree),x=ref(s.color.gradientSelectedId),C=ref(Pr(s.color.gradientColors));watch(function(){return s.color.gradientDegree},function(Se){return y.value=Se}),watch(function(){return s.color.gradientSelectedId},function(Se){return x.value=Se}),watch(function(){return s.color.gradientColors},function(Se){C.value=Pr(Se)},{deep:!0});var E=function(Se,Ae,Re){s.disabled||s.onChange({key:Se,payload:Ae,addUsedColor:Re})},N=function(Se){s.disabled||Se===s.color.gradientDegree||(y.value=Se,E("degree",Se,!0))},W=function(Se){s.disabled||(x.value=Se,E("selectedId",Se))},q=function(Se,Ae){s.disabled||(C.value=Se,E("colors",Se,Ae))},Y=function(Se){var Ae=C.value.findIndex(function(Ke){return Ke.id===x.value});if(Ae!==-1){var Re=C.value[Ae];Se=Math.max(0,Math.min(v.width,Se));var Be=Se/v.width*100;C.value.splice(Ae,1,{color:Re.color,left:Be,id:Re.id}),q(C.value)}},re=function(Se){var Ae=g.value.getBoundingClientRect();v.left=Ae.left,v.width=Ae.width||Lc,!(b.value||s.disabled)&&($.value=!1,b.value=!0,W(Se),g.value.focus(),window.addEventListener("mousemove",se,!1),window.addEventListener("mouseup",de,!1),window.addEventListener("contextmenu",de,!1))},se=function(Se){if(!(!b.value||s.disabled)){var Ae=Se.clientX-v.left;$.value=!0,Y(Ae)}},de=function(){b.value&&(setTimeout(function(){b.value=!1},0),$.value&&(q(C.value,!0),$.value=!1),window.removeEventListener("mousemove",se,!1),window.removeEventListener("mouseup",de,!1),window.removeEventListener("contextmenu",de,!1))},he=function(Se){if(!s.disabled){var Ae=C.value,Re=Ae.findIndex(function(Lr){return Lr.id===x.value}),Be=Ae.length;if(yH.includes(Se.key.toLocaleLowerCase())&&Be>2&&Re>=0&&Re<=Be-1){Ae.splice(Re,1),Ae[Re]||(Re=Ae[Re+1]?Re+1:Ae[Re-1]?Re-1:0);var Ke=Ae[Re];q(Ae,!0),W(Ke==null?void 0:Ke.id)}}},ge=function(Se){if(!(s.disabled||!s.enableMultipleGradient)){var Ae=Se.clientX-v.left;Ae=Math.max(0,Math.min(v.width,Ae));var Re=Ae/v.width*100,Be=Zw(Re,s.color.rgba);C.value.push(Be),q(C.value,!0),W(Be.id)}};return onMounted(function(){var Se=g.value.getBoundingClientRect();v.left=Se.left,v.width=Se.width||Lc}),onBeforeUnmount(function(){window.removeEventListener("mousemove",se,!1),window.removeEventListener("mouseup",de,!1),window.removeEventListener("contextmenu",de,!1)}),{baseClassName:l,statusClassNames:f,refSlider:g,degree:y,selectedId:x,colors:C,handleDegreeChange:N,handleStart:re,handleMove:se,handleEnd:de,handleKeyup:he,handleThumbBarClick:ge}},render:function(){var s=this,l=this.color,c=l.linearGradient,d=l.gradientColors,f=this.colors,g=this.selectedId,v=this.degree,b=this.disabled,$=this.baseClassName,y=this.statusClassNames,x=cs({points:d,degree:90});return createVNode("div",{class:"".concat($,"__gradient")},[createVNode("div",{class:"".concat($,"__gradient-slider")},[createVNode("div",{class:["".concat($,"__slider"),"".concat($,"--bg-alpha")],onKeyup:this.handleKeyup,tabindex:0,ref:"refSlider"},[createVNode("ul",{class:"gradient-thumbs",onClick:this.handleThumbBarClick,style:{background:x}},[f.map(function(C){var E="".concat(Math.round(C.left*100)/100,"%");return createVNode("li",{class:["".concat($,"__thumb"),"gradient-thumbs__item",g===C.id?y.active:""],key:C.id,title:"".concat(C.color," ").concat(E),style:{color:C.color,left:E},onClick:function(N){return N.stopPropagation()},onMousedown:function(){return s.handleStart(C.id)}},[createVNode("span",{class:["gradient-thumbs__item-inner","".concat($,"--bg-alpha")]},null)])})])])]),createVNode("div",{class:"".concat($,"__gradient-degree"),title:"".concat(v,"deg")},[createVNode(Cr,{size:"small",theme:"normal",min:0,max:360,step:1,format:function(C){return"".concat(C,"")},modelValue:s.degree,"onUpdate:modelValue":function(C){return s.degree=C},onBlur:this.handleDegreeChange,onEnter:this.handleDegreeChange,disabled:b},null)]),createVNode("div",{class:["".concat($,"__gradient-preview"),"".concat($,"--bg-alpha")]},[createVNode("span",{class:"preview-inner",style:{background:c}},null)])])}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Ob(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function wH(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Ob(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Ob(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var CH=defineComponent({name:"SaturationPanel",props:wH({},qi),setup:function(s){var l=Rn(),c=ref(null),d=ref(null),f=ref(null),g=reactive({width:pb,height:mb}),v=computed(function(){var C=s.color,E=C.saturation,N=C.value,W=g.width,q=g.height,Y=Math.round((1-N)*q),re=Math.round(E*W);return{color:s.color.rgb,left:"".concat(re,"px"),top:"".concat(Y,"px")}}),b=function(C){var E=g.width,N=g.height,W=C.x,q=C.y,Y=Math.round(W/E*100),re=Math.round((1-q/N)*100);return{saturation:Y,value:re}},$=function(C,E){if(!s.disabled){var N=b(C),W=N.saturation,q=N.value;s.onChange({saturation:W/100,value:q/100,addUsedColor:E})}},y=function(C){s.disabled||nextTick(function(){$(C,!0)})},x=computed(function(){return"hsl(".concat(s.color.hue,", 100%, 50%)")});return onMounted(function(){g.width=c.value.offsetWidth||pb,g.height=c.value.offsetHeight||mb,f.value=new Xw(c.value,{start:function(){g.width=c.value.offsetWidth,g.height=c.value.offsetHeight},drag:function(C){$(C)},end:y})}),onBeforeUnmount(function(){f.value.destroy()}),{baseClassName:l,refThumb:d,refPanel:c,styles:v,panelBackground:x}},render:function(){var s=this.baseClassName,l=this.styles,c=this.panelBackground;return createVNode("div",{class:["".concat(s,"__saturation")],ref:"refPanel",style:{background:c}},[createVNode("span",{class:["".concat(s,"__thumb")],role:"slider",tabindex:0,ref:"refThumb",style:l},null)])}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Eb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Ab(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Eb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Eb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var Jw=defineComponent({name:"ColorSlider",props:Ab(Ab({},qi),{},{className:{type:String,default:""},value:{type:Number,default:0},maxValue:{type:Number,default:360},railStyle:{type:Object},type:{type:String,default:"hue"}}),setup:function(s){var l=Rn(),c=ref(null),d=ref(null),f=ref(null),g=reactive({width:hb}),v=computed(function(){var y=g.width;if(y){var x=Math.round(s.value/s.maxValue*100);return{left:"".concat(x,"%"),color:s.color.rgb}}}),b=function(y,x){if(!s.disabled){var C=g.width,E=y.x,N=Math.round(E/C*s.maxValue*100)/100;s.onChange(N,x)}},$=function(y){s.disabled||b(y,!0)};return onMounted(function(){g.width=c.value.offsetWidth||hb,f.value=new Xw(c.value,{start:function(){g.width=c.value.offsetWidth},drag:function(y){b(y)},end:$})}),onBeforeUnmount(function(){f.value.destroy()}),{baseClassName:l,refThumb:d,refPanel:c,styles:v}},render:function(){var s=this.baseClassName,l=this.className,c=this.railStyle,d=this.styles,f=this.type,g=this.color,v={background:"linear-gradient(90deg, rgba(0,0,0,.0) 0%, rgba(0,0,0,.0) 93%, ".concat(g.rgb," 93%, ").concat(g.rgb," 100%)")};return createVNode("div",{class:["".concat(s,"__slider-wrapper"),"".concat(s,"__slider-wrapper--").concat(f,"-type")]},[f==="alpha"&&createVNode("div",{className:"".concat(s,"__slider-padding"),style:v},null),createVNode("div",{class:["".concat(s,"__slider"),l],ref:"refPanel"},[createVNode("div",{class:"".concat(s,"__rail"),style:c},null),createVNode("span",{class:["".concat(s,"__thumb")],role:"slider",tabindex:0,ref:"refThumb",style:d},null)])])}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Tb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function kH(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Tb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Tb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var $H=defineComponent({name:"HueSlider",inheritAttrs:!1,props:kH({},qi),setup:function(){var s=Rn();return{baseClassName:s}},render:function(){return createVNode(Jw,{class:"".concat(this.baseClassName,"__hue"),color:this.color,value:this.color.hue,onChange:this.onChange,disabled:this.disabled,type:"hue"},null)}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var SH=defineComponent({name:"AlphaSlider",inheritAttrs:!1,props:{color:{type:Object},disabled:{type:Boolean,default:!1},onChange:{type:Function,default:function(){return function(){}}}},setup:function(s){var l=Rn(),c=function(f,g){s.onChange(f/100,g)},d=computed(function(){return{background:"linear-gradient(to right, rgba(0, 0, 0, 0), ".concat(s.color.rgb,")")}});return{baseClassName:l,railStyle:d,handleChange:c}},render:function(){var s=this.baseClassName;return createVNode(Jw,{class:["".concat(s,"__alpha"),"".concat(s,"--bg-alpha")],color:this.color,value:this.color.alpha*100,onChange:this.handleChange,"rail-style":this.railStyle,"max-value":100,disabled:this.disabled,type:"alpha"},null)}}),xH=Jf,OH=xH(function(s,l,c){return s+(c?" ":"")+l.toUpperCase()}),EH=OH;const AH=ot(EH);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var TH={RGB:[{key:"r",min:0,max:255,type:"inputNumber"},{key:"g",min:0,max:255,type:"inputNumber"},{key:"b",min:0,max:255,type:"inputNumber"}],HSV:[{key:"h",min:0,max:360,type:"inputNumber"},{key:"s",min:0,max:100,type:"inputNumber"},{key:"v",min:0,max:100,type:"inputNumber"}],HSL:[{key:"h",min:0,max:360,type:"inputNumber"},{key:"s",min:0,max:100,type:"inputNumber"},{key:"l",min:0,max:100,type:"inputNumber"}],CMYK:[{key:"c",min:0,max:255,type:"inputNumber"},{key:"m",min:0,max:255,type:"inputNumber"},{key:"y",min:0,max:255,type:"inputNumber"},{key:"k",min:0,max:255,type:"inputNumber"}],CSS:[{key:"css",type:"input",flex:3}],HEX:[{key:"hex",type:"input",flex:3}]};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Pb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function zc(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Pb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Pb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var PH=defineComponent({name:"FormatInputs",inheritAttrs:!1,props:zc(zc({},To),{},{color:{type:Object},onInputChange:{type:Function,default:function(){return function(){}}}}),setup:function(s){var l=computed(function(){var $=wt(TH[s.format]);return s.enableAlpha&&$.push({type:"inputNumber",key:"a",min:0,max:100,format:function(y){return"".concat(y,"%")},flex:1.15}),$}),c=reactive({}),d=reactive({}),f=function($){var y=s.color;return $==="encode"?{HSV:y.getHsva(),HSL:y.getHsla(),RGB:y.getRgba(),CMYK:y.getCmyk(),CSS:{css:y.css},HEX:{hex:y.hex}}:{HSV:Bn.object2color(c,"HSV"),HSL:Bn.object2color(c,"HSL"),RGB:Bn.object2color(c,"RGB"),CMYK:Bn.object2color(c,"CMYK"),CSS:c.css,HEX:c.hex}},g=function(){var $=s.format,y=s.color,x=f("encode")[$];x.a=Math.round(y.alpha*100),Object.keys(x).forEach(function(C){c[C]=x[C],d[C]=x[C]})};g();var v=Hw(g,100);watch(function(){var $=s.color,y=$.saturation,x=$.hue,C=$.value,E=$.alpha,N=$.css;return[y,x,C,E,N,s.format]},v);var b=function($,y){if(y!==d[$]){var x=f("decode")[s.format];s.onInputChange(x,c.a/100,$,y)}};return{modelValue:c,inputConfigs:l,handleChange:b}},render:function(){var s=this,l=zc({},this.inputProps||{});return createVNode("div",{class:"input-group"},[this.inputConfigs.map(function(c){return createVNode("div",{class:"input-group__item",key:c.key,style:{flex:c.flex||1}},[c.type==="input"?createVNode(er,mergeProps(l,{align:"center",size:"small",disabled:s.disabled,modelValue:s.modelValue[c.key],"onUpdate:modelValue":function(d){return s.modelValue[c.key]=d},maxlength:s.format==="HEX"?9:void 0,title:s.modelValue[c.key],onBlur:function(d){return s.handleChange(c.key,d)},onEnter:function(d){return s.handleChange(c.key,d)}}),null):createVNode(Cr,mergeProps(l,{align:"center",size:"small",disabled:s.disabled,modelValue:s.modelValue[c.key],"onUpdate:modelValue":function(d){return s.modelValue[c.key]=d},title:s.modelValue[c.key],min:c.min,max:c.max,step:1,format:c.format,theme:"normal",onBlur:function(d){return s.handleChange(c.key,d)},onEnter:function(d){return s.handleChange(c.key,d)}}),null)])})])}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Mb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Da(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Mb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Mb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function MH(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!isVNode$1(s)}var IH=defineComponent({name:"FormatPanel",inheritAttrs:!1,props:Da(Da({},To),{},{color:{type:Object},onModeChange:{type:Function,default:function(){return function(){}}},onInputChange:{type:Function,default:function(){return function(){}}}}),setup:function(s){var l=Rn(),c=ref(s.format);watch(function(){return[s.format]},function(){return c.value=s.format});var d=function(f){c.value=f,s.onModeChange(f)};return{formatModel:c,baseClassName:l,handleModeChange:d}},render:function(){var s=this,l,c=wt(XV),d=this.baseClassName,f=this.handleModeChange,g=Da(Da({},this.$props),{},{format:this.formatModel}),v=Da({},this.selectInputProps||{});return createVNode("div",{class:"".concat(d,"__format")},[createVNode("div",{class:"".concat(d,"__format--item")},[createVNode(Wi,mergeProps({size:"small",class:"".concat(d,"__format-mode-select")},v,{popupProps:Da({overlayClassName:"".concat(d,"__select-options")},v.popupProps),modelValue:s.formatModel,"onUpdate:modelValue":function(b){return s.formatModel=b},onChange:f}),MH(l=c.map(function(b){return createVNode(Gi,{key:b,value:b,label:AH(b),style:{fontSize:"12px"}},null)}))?l:{default:function(){return[l]}})]),createVNode("div",{class:"".concat(d,"__format--item")},[createVNode(PH,g,null)])])}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Ib(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Nb(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Ib(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Ib(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var jb=defineComponent({name:"SwatchesPanel",props:Nb(Nb({},qi),{},{colors:{type:Array,default:function(){return[]}},title:{type:String,default:""},editable:{type:Boolean,default:!1},onSetColor:{type:Function,default:function(){return function(){}}},handleAddColor:{type:Function,default:function(){return function(){}}}}),setup:function(s){var l=Rn(),c=Qn({DeleteIcon:WD,AddIcon:Y_}),d=c.DeleteIcon,f=c.AddIcon,g=Ft(),v=g.STATUS,b=v.value,$=ref(!1),y=function(W){$.value=W},x=function(W){return s.onSetColor(W)},C=function(W){return Bn.compare(W,s.color.css)},E=computed(function(){return s.colors.findIndex(function(W){return C(W)})}),N=function(){var W=wt(s.colors),q=E.value;q>-1?W.splice(q,1):W.length=0,s.onChange(W),y(!1)};return{baseClassName:l,DeleteIcon:d,AddIcon:f,statusClassNames:b,selectedColorIndex:E,visiblePopConfirm:$,setVisiblePopConfirm:y,handleClick:x,isEqualCurrentColor:C,handleRemoveColor:N}},render:function(){var s=this,l=this.baseClassName,c=this.DeleteIcon,d=this.AddIcon,f=this.statusClassNames,g=this.title,v=this.editable,b="".concat(l,"__swatches"),$=function(){return v?createVNode("div",{class:"".concat(b,"--actions")},[createVNode("span",{role:"button",class:"".concat(l,"__icon"),onClick:function(){return s.handleAddColor()}},[createVNode(d,null,null)]),s.colors.length>0?createVNode("span",{role:"button",class:"".concat(l,"__icon"),onClick:function(){return s.handleRemoveColor()}},[createVNode(c,null,null)]):null]):null};return createVNode("div",{class:b},[createVNode("h3",{class:"".concat(b,"--title")},[createVNode("span",null,[g]),$()]),createVNode("ul",{class:["".concat(b,"--items"),"narrow-scrollbar"]},[this.colors.map(function(y){return createVNode("li",{class:["".concat(b,"--item"),s.isEqualCurrentColor(y)&&v?f.active:""],title:y,key:y,onClick:function(){s.disabled||s.handleClick(y)}},[createVNode("div",{class:["".concat(b,"--color"),"".concat(l,"--bg-alpha")]},[createVNode("span",{class:"".concat(b,"--inner"),style:{background:y}},null)])])})])])}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Db(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Bb(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Db(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Db(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var Qw=defineComponent({name:"ColorPanel",props:Bb(Bb({},To),{},{togglePopup:{type:Function}}),setup:function(s){var l,c=Rn(),d=Ft(),f=d.STATUS,g=Mt("colorPicker"),v=g.t,b=g.globalConfig,$=f.value,y=toRefs(s),x=y.value,C=y.modelValue,E=y.recentColors,N=Lt(x,C,s.defaultValue,s.onChange),W=je(N,2),q=W[0],Y=W[1],re=computed(function(){return de.value?vb:YV}),se=ref(((l=s.colorModes)===null||l===void 0?void 0:l.length)===1?s.colorModes[0]:"monochrome"),de=computed(function(){return se.value==="linear-gradient"}),he=ref(new Bn(q.value||re.value)),ge=function(){return he.value.update(q.value||re.value)},Se=ref(he.value.isGradient?"CSS":"RGB"),Ae=ga(E,s.defaultRecentColors,s.onRecentColorsChange,"recentColors"),Re=je(Ae,2),Be=Re[0],Ke=Re[1],Lr=function(){return se.value==="linear-gradient"?he.value.linearGradient:he.value.getFormatsColorMap()[s.format]||he.value.css},_y=function(){if(!(Be.value===null||Be.value===!1)){var ky=Pr(Be.value)||[],$y=he.value.isGradient?he.value.linearGradient:he.value.rgba,rS=ky.indexOf($y);rS>-1&&ky.splice(rS,1),ky.unshift($y),ky.length>fb&&(ky.length=fb),by(ky)}},by=function(ky){Ke(ky)},yy=function(ky){Y(Lr(),{color:Cb(he.value),trigger:ky||"palette-saturation-brightness"})};watch(function(){return[s.defaultValue,s.enableAlpha]},ge),watch(function(){return q.value},function(ky){ky!==Lr()&&(ge(),se.value=he.value.isGradient?"linear-gradient":"monochrome")});var my=function(ky){se.value=ky,ky==="linear-gradient"?he.value.update(he.value.gradientColors.length>0?he.value.linearGradient:vb):he.value.update(he.value.rgba),yy()},$t=function(ky){return Se.value=ky},K$=function(ky){var $y=ky.saturation,rS=ky.value,lS=he.value,bS=lS.saturation,IS=lS.value,BS="palette-saturation-brightness";if(rS!==IS&&$y!==bS)he.value.saturation=$y,he.value.value=rS,BS="palette-saturation-brightness";else if($y!==bS)he.value.saturation=$y,BS="palette-saturation";else if(rS!==IS)he.value.value=rS,BS="palette-brightness";else return;he.value.update(he.value.rgba),yy(BS)},Y$=function(ky){var $y;he.value.hue=ky,yy("palette-hue-bar"),($y=s.onPaletteBarChange)===null||$y===void 0||$y.call(s,{color:Cb(he.value)})},W$=function(ky){he.value.alpha=ky,yy("palette-alpha-bar")},U$=function(ky,$y){he.value.update(ky),he.value.alpha=$y,yy("input")},hy=function(ky){var $y=ky.key,rS=ky.payload,lS="palette-saturation-brightness";switch($y){case"degree":he.value.gradientDegree=rS,lS="input";break;case"selectedId":he.value.gradientSelectedId=rS;break;case"colors":he.value.gradientColors=rS;break}yy(lS)},G$=function(ky,$y){var rS=Bn.isGradientColor($y);rS?s.colorModes.includes("linear-gradient")?(se.value="linear-gradient",he.value.update($y),he.value.updateCurrentGradientColor()):console.warn(""):se.value==="linear-gradient"?(he.value.updateStates($y),he.value.updateCurrentGradientColor()):he.value.update($y),yy()};return{baseClassName:c,statusClassNames:$,t:v,globalConfig:b,color:he,mode:se,formatModel:Se,recentlyUsedColors:Be,isGradient:de,addRecentlyUsedColor:_y,handleModeChange:my,handleSatAndValueChange:K$,handleHueChange:Y$,handleAlphaChange:W$,handleGradientChange:hy,handleSetColor:G$,handleFormatModeChange:$t,handleInputChange:U$,handleRecentlyUsedColorsChange:by}},render:function(){var s,l=this,c=this.t,d=this.baseClassName,f=this.statusClassNames,g=this.globalConfig,v=this.recentColors,b=this.swatchColors,$=this.showPrimaryColorPreview,y=this.isGradient,x={color:this.color,disabled:this.disabled},C=v!==null&&v!==!1,E=b;E===void 0&&(E=wt(ZV));var N=((s=E)===null||s===void 0?void 0:s.length)>0,W=function(){return!N&&!C?null:createVNode(Fragment$1,null,[createVNode("div",{class:"".concat(d,"__swatches-wrap")},[C?createVNode(jb,mergeProps(x,{title:c(g.recentColorTitle),editable:!0,colors:l.recentlyUsedColors,handleAddColor:l.addRecentlyUsedColor,onSetColor:function(q){return l.handleSetColor("used",q)},onChange:l.handleRecentlyUsedColorsChange}),null):null,N?createVNode(jb,mergeProps(x,{title:c(g.swatchColorTitle),colors:E,onSetColor:function(q){return l.handleSetColor("system",q)}}),null):null])])};return createVNode("div",{class:["".concat(d,"__panel"),this.disabled?f.disabled:!1]},[createVNode(eH,mergeProps(this.$props,{mode:this.mode,onModeChange:this.handleModeChange}),null),createVNode("div",{class:["".concat(d,"__body")]},[y?createVNode(_H,mergeProps(x,{onChange:this.handleGradientChange,enableMultipleGradient:this.enableMultipleGradient}),null):null,createVNode(CH,mergeProps(x,{onChange:this.handleSatAndValueChange}),null),createVNode("div",{class:["".concat(d,"__sliders-wrapper")]},[createVNode("div",{class:["".concat(d,"__sliders")]},[createVNode($H,mergeProps(x,{onChange:this.handleHueChange}),null),this.enableAlpha?createVNode(SH,mergeProps(x,{onChange:this.handleAlphaChange}),null):null]),$?createVNode("div",{class:["".concat(d,"__sliders-preview"),"".concat(d,"--bg-alpha")]},[createVNode("span",{class:"".concat(d,"__sliders-preview-inner"),style:{background:y?this.color.linearGradient:this.color.rgba}},null)]):null]),createVNode(IH,mergeProps(this.$props,{color:this.color,format:this.formatModel,onModeChange:this.handleFormatModeChange,onInputChange:this.handleInputChange}),null),W()])])}}),NH=Bi,jH=Xy,DH=Ow,BH=Yf;function FH(s,l){if(s==null)return{};var c=NH(BH(s),function(d){return[d]});return l=jH(l),DH(s,c,function(d,f){return l(d,f[0])})}var LH=FH;const RH=ot(LH);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Fb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Vc(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Fb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Fb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var zH=defineComponent({name:"TColorPickerPanel",inheritAttrs:!1,props:Vc({},To),setup:function(s,l){var c=l.attrs,d=computed(function(){return RH(Vc(Vc({},s),c),function(g){return g!==void 0})}),f=we();return function(){return createVNode(Qw,mergeProps(d.value,{popupProps:null,"close-btn":!1,class:"".concat(f.value,"-is-inline")}),null)}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var VH=defineComponent({name:"DefaultTrigger",inheritAttrs:!1,props:{color:{type:String,default:""},disabled:{type:Boolean,default:!1},borderless:{type:Boolean,default:!1},clearable:{type:Boolean,default:!1},inputProps:{type:Object,default:function(){return{autoWidth:!0}}},onTriggerChange:{type:Function,default:function(){return function(){}}},size:{type:String,default:"medium"}},setup:function(s){var l=Rn(),c=ref(s.color),d=Ft(),f=d.SIZE;watch(function(){return[s.color]},function(){return c.value=s.color});var g=function(v){v!==s.color&&(v&&!Bn.isValid(v)?c.value=s.color:c.value=v,s.onTriggerChange(c.value))};return{baseClassName:l,value:c,handleChange:g,sizeClassNames:f}},render:function(){var s=this,l=this.baseClassName,c=this.sizeClassNames,d={label:function(){return createVNode("div",{class:["".concat(l,"__trigger--default__color"),"".concat(l,"--bg-alpha")]},[createVNode("span",{class:["color-inner",ne({},c[s.size],s.size!=="medium")],style:{background:s.value}},null)])}};return createVNode(er,mergeProps({borderless:this.borderless,clearable:this.clearable,size:this.size,modelValue:s.value,"onUpdate:modelValue":function(f){return s.value=f},disabled:this.disabled,onBlur:this.handleChange},this.inputProps),d)}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Lb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function ml(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Lb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Lb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var HH=defineComponent({name:"TColorPicker",props:ml({},To),setup:function(s){var l=Rn(),c=ref(!1),d=function(N){return c.value=N},f=toRefs(s),g=f.value,v=f.modelValue,b=Lt(g,v,s.defaultValue,s.onChange),$=je(b,2),y=$[0],x=$[1],C=ref(),E=function(){if(s.disabled)return null;var N=ml({},s);return delete N.onChange,createVNode(Qw,mergeProps(N,{disabled:s.disabled,value:y.value,togglePopup:d,onChange:function(W,q){return x(W,q)}}),null)};return{baseClassName:l,innerValue:y,visible:c,refTrigger:C,renderPopupContent:E,setVisible:d,setInnerValue:x}},render:function(){var s=this,l=this.popupProps,c=this.baseClassName,d=ml(ml({placement:"bottom-left"},l||{}),{},{trigger:"click",attach:"body",overlayClassName:[c],visible:this.visible,overlayInnerStyle:{padding:0},onVisibleChange:function(f,g){g.trigger==="document"&&s.setVisible(!1)}});return createVNode(Pn,mergeProps(d,{content:this.renderPopupContent}),{default:function(){return[createVNode("div",{class:"".concat(c,"__trigger"),onClick:function(){return s.setVisible(!s.visible)},ref:"refTrigger"},[nD(s,"default",createVNode(VH,{borderless:s.borderless,color:s.innerValue,disabled:s.disabled,clearable:s.clearable,"input-props":s.inputProps,onTriggerChange:s.setInnerValue,size:s.size},null))])]}})}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var eC=ze(zH);ze(HH);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var UH={alt:{type:String,default:""},error:{type:[String,Function]},fallback:{type:String,default:""},fit:{type:String,default:"fill",validator:function(s){return s?["contain","cover","fill","none","scale-down"].includes(s):!0}},gallery:Boolean,lazy:Boolean,loading:{type:[String,Function]},overlayContent:{type:[String,Function]},overlayTrigger:{type:String,default:"always",validator:function(s){return s?["always","hover"].includes(s):!0}},placeholder:{type:[String,Function]},position:{type:String,default:"center"},referrerpolicy:{type:String,default:"strict-origin-when-cross-origin",validator:function(s){return s?["no-referrer","no-referrer-when-downgrade","origin","origin-when-cross-origin","same-origin","strict-origin","strict-origin-when-cross-origin","unsafe-url"].includes(s):!0}},shape:{type:String,default:"square",validator:function(s){return s?["circle","round","square"].includes(s):!0}},src:{type:[String,Object]},srcset:{type:Object},onError:Function,onLoad:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var KH=defineComponent({name:"TImage",props:UH,setup:function(s){var l=ref(null),c=ref(null),d=null,f=toRefs(s),g=f.src,v=Ye();onMounted(function(){var yy;if((yy=c.value)!==null&&yy!==void 0&&yy.complete&&!s.lazy&&re(),!(!s.lazy||!l.value)){var my=Nw(l.value,null,W,0);d=my}}),onUnmounted(function(){l.value&&d&&d.unobserve(l.value)});var b=Mt("image"),$=b.classPrefix,y=b.globalConfig,x=ref(g.value);watch([g,y],function(yy){var my=je(yy,2),$t=my[0],K$=my[1],Y$=K$||{},W$=Y$.replaceImageSrc,U$=rt(W$)?W$(s):$t;U$===x.value&&x.value||(x.value=U$)},{immediate:!0});var C=ns(x),E=C.previewUrl;watch([E],function(){se.value=!1,q.value=!1});var N=ref(!s.lazy),W=function(){N.value=!0},q=ref(!1),Y=function(yy){var my;q.value=!0,(my=s.onLoad)===null||my===void 0||my.call(s,{e:yy})},re=function(){var yy=new Event("load");Object.defineProperty(yy,"target",{value:c.value,enumerable:!0}),Y(yy)},se=ref(!1),de=function(yy){var my;se.value=!0,(my=s.onError)===null||my===void 0||my.call(s,{e:yy}),s.fallback&&(x.value=s.fallback,se.value=!1)},he=computed(function(){return s.overlayTrigger==="hover"}),ge=computed(function(){return["".concat($.value,"-image"),"".concat($.value,"-image--fit-").concat(s.fit),"".concat($.value,"-image--position-").concat(s.position)]}),Se=ref(!he.value),Ae=function(){he.value&&(Se.value=!Se.value)},Re=function(){var yy=v("placeholder");return yy?createVNode("div",{class:"".concat($.value,"-image__placeholder")},[yy]):null},Be=function(){return s.gallery?createVNode("div",{class:"".concat($.value,"-image__gallery-shadow")},null):null},Ke=function(){var yy=by("overlayContent");return yy?createVNode("div",{class:["".concat($.value,"-image__overlay-content"),!Se.value&&"".concat($.value,"-image__overlay-content--hidden")]},[yy]):null};function Lr(){return createVNode("picture",null,[Object.entries(s.srcset).map(function(yy){var my=je(yy,2),$t=my[0],K$=my[1];return createVNode("source",{type:$t,srcset:K$},null)}),_y()])}function _y(){var yy=Qe(x.value)?x.value:E.value;return createVNode("img",{ref:c,src:yy,onError:de,onLoad:Y,class:ge.value,alt:s.alt,referrerpolicy:s.referrerpolicy},null)}var by=Qf();return function(){return createVNode("div",mergeProps({ref:l,class:["".concat($.value,"-image__wrapper"),"".concat($.value,"-image__wrapper--shape-").concat(s.shape),s.gallery&&"".concat($.value,"-image__wrapper--gallery"),he.value&&"".concat($.value,"-image__wrapper--need-hover")],onMouseenter:Ae,onMouseleave:Ae},ba(s,["src","alt","fit","position","shape","placeholder","loading","error","overlayTrigger","overlayContent","lazy","gallery","onLoad","onError"])),[Re(),Be(),(se.value||!N.value)&&createVNode("div",{class:"".concat($.value,"-image")},null),!(se.value||!N.value)&&(s.srcset&&Object.keys(s.srcset).length?Lr():_y()),!(se.value||!N.value)&&!q.value&&createVNode("div",{class:"".concat($.value,"-image__loading")},[v("loading")||createVNode(Lh,{direction:"vertical",size:8,align:"center"},{default:function(){return[createVNode(J_,{size:"24px"},null),Qe(s.loading)?s.loading:y.value.loadingText]}})]),se.value&&createVNode("div",{class:"".concat($.value,"-image__error")},[by("error",{defaultNode:createVNode(Lh,{direction:"vertical",size:8,align:"center"},{default:function(){return[createVNode(X_,{size:"24px"},null),Qe(s.error)?s.error:y.value.errorText]}})})]),Ke()])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var WH=ze(KH);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var GH={actions:{type:Array},author:{type:[String,Function]},avatar:{type:[String,Object,Function]},content:{type:[String,Function]},datetime:{type:[String,Function]},quote:{type:[String,Function]},reply:{type:[String,Function]}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function qH(s){return typeof s=="function"||Object.prototype.toString.call(s)==="[object Object]"&&!isVNode$1(s)}var YH=defineComponent({name:"TComment",props:GH,setup:function(){var s=we("comment"),l=Ye();return function(){var c=l("reply"),d=l("author"),f=l("datetime"),g=l("quote"),v=l("actions"),b=l("content"),$=l("avatar"),y=computed(function(){return d||f}),x=c?createVNode("div",{class:"".concat(s.value,"__reply")},[c]):null,C=g?createVNode("div",{class:"".concat(s.value,"__quote")},[g]):null,E=$?createVNode("div",{class:"".concat(s.value,"__avatar")},[Qe($)?createVNode("img",{src:$,alt:"",class:"".concat(s.value,"__avatar-image")},null):$]):null,N=y.value&&createVNode("div",{class:"".concat(s.value,"__author")},[d&&createVNode("span",{class:"".concat(s.value,"__name")},[d]),f&&createVNode("span",{class:"".concat(s.value,"__time")},[f])]),W=function(){return!v||!v.length?null:createVNode("div",{class:"".concat(s.value,"__actions")},[(at(v)?v:[v]).map(function(Y,re){return createVNode(Tt,{key:"action-".concat(re),size:"small",variant:"text"},qH(Y)?Y:{default:function(){return[Y]}})})])},q=createVNode("div",{class:"".concat(s.value,"__content")},[N,createVNode("div",{class:"".concat(s.value,"__detail")},[b]),C,W()]);return createVNode("div",{class:s.value},[createVNode("div",{class:"".concat(s.value,"__inner")},[E,q]),x])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var tC=ze(YH);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var ZH=1e3,XH=5e3,JH=1,QH=vv(function s(){var l=this;fv(this,s),ne(this,"popupStack",{popup:new Set,dialog:new Set,message:new Set}),ne(this,"getNextZIndex",function(c){var d=c==="message"?Array.from(l.popupStack.message).pop()||XH:Array.from(l.popupStack.popup).pop()||ZH;return d+JH}),ne(this,"add",function(c){var d=l.getNextZIndex(c);return l.popupStack[c].add(d),c==="dialog"&&l.popupStack.popup.add(d),d}),ne(this,"delete",function(c,d){l.popupStack[d].delete(c),d==="dialog"&&l.popupStack.popup.delete(c)}),ne(this,"isLastDialog",function(c){return l.popupStack.dialog.size>1?c===Array.from(l.popupStack.dialog).pop():!0})}),Hc=new QH;function nC(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.visible,d=l.runOnMounted,f=ref(0),g=function(){f.value=Hc.add(s)},v=function(){Hc.delete(f.value,s)},b=function(){return Hc.isLastDialog(f.value)};return watch(function(){return c==null?void 0:c.value},function($){$?g():v()},{immediate:!0}),d&&(onMounted(function(){g()}),onBeforeUnmount(function(){v()})),{zIndex:readonly(f),open:g,close:v,isLastDialog:b}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Rb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function eU(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Rb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Rb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function tU(s){var l=ref(s),c=function(f){var g=f.pageX,v=f.pageY,b=l.value,$=b.translateX,y=b.translateY,x=function(E){var N=E.pageX,W=E.pageY;l.value={translateX:$+N-g,translateY:y+W-v}},C=function(){document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",x),document.addEventListener("mouseup",C)},d=function(){l.value=eU({},s)};return{transform:l,mouseDownHandler:c,resetTransform:d}}function nU(){var s=ref(1),l=function(){s.value*=-1},c=function(){s.value=1};return{mirror:s,onMirror:l,resetMirror:c}}function rU(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{max:2,min:.5,step:.5},l=s.max,c=s.min,d=s.step,f=s.defaultScale,g=ref(f??1),v=function(){var x=wi(g.value,d);y(x)},b=function(){var x=Ci(g.value,d);y(x)},$=function(){g.value=f??1},y=function(x){var C=x;x<c&&(C=c),x>l&&(C=l),g.value=C};return watch(function(){return s},function(){return $()}),{scale:g,onZoomIn:v,onZoomOut:b,resetScale:$}}function aU(){var s=ref(0),l=90,c=function(){s.value+=l},d=function(){s.value=0};return{rotate:s,onRotate:c,resetRotate:d}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var rC=defineComponent({name:"TImageItem",props:{rotate:Number,scale:Number,mirror:Number,src:[String,Object],placementSrc:[String,Object],isSvg:Boolean},setup:function(s){var l=toRefs(s),c=l.src,d=l.placementSrc,f=l.isSvg,g=we(),v=ref(!1),b=ref(!1),$=tU({translateX:0,translateY:0}),y=$.transform,x=$.mouseDownHandler,C=Mt("imageViewer"),E=C.globalConfig,N=E.value.errorText,W=ref(),q=computed(function(){return{transform:"rotate(".concat(s.rotate,"deg) scale(").concat(s.scale,")"),display:!s.placementSrc||b.value?"block":"none"}}),Y=computed(function(){return{transform:"rotate(".concat(s.rotate,"deg) scale(").concat(s.scale,")"),display:b.value?"none":"block"}}),re=computed(function(){var Re=y.value,Be=Re.translateX,Ke=Re.translateY;return{transform:"translate(".concat(Be,"px, ").concat(Ke,"px) scale(").concat(s.mirror,", 1)")}}),se=function(){v.value=!1,b.value=!1,f.value&&de(ge.value)},de=function(){var Re=Yt(Xe.mark(function Be(Ke){var Lr,_y,by,yy,my,$t,K$,Y$,W$,U$,hy,G$,ky;return Xe.wrap(function($y){for(;;)switch($y.prev=$y.next){case 0:return $y.next=2,fetch(Ke);case 2:if(_y=$y.sent,_y.ok){$y.next=6;break}throw v.value=!0,new Error("Failed to fetch SVG: ".concat(_y.statusText));case 6:return $y.next=8,_y.text();case 8:by=$y.sent,yy=W.value,yy.innerHTML="",(Lr=yy.classList)===null||Lr===void 0||Lr.add("".concat(g.value,"-image-viewer__modal-image-svg")),my=yy.attachShadow({mode:"closed"}),$t=document.createElement("div"),$t.style.background="transparent",$t.innerHTML=by,my.appendChild($t),K$=$t.querySelector("svg"),K$&&(Y$=K$.getAttribute("viewBox"),Y$?(W$=Y$.split(/[\s\,]/).filter(function(rS){return rS}).map(parseFloat),U$=W$[2],hy=W$[3],$t.style.width="".concat(U$,"px"),$t.style.height="".concat(hy,"px")):(G$=K$.getBBox(),ky="".concat(G$.x," ").concat(G$.y," ").concat(G$.width," ").concat(G$.height),K$.setAttribute("viewBox",ky),$t.style.width="".concat(G$.width,"px"),$t.style.height="".concat(G$.height,"px"))),b.value=!0;case 20:case"end":return $y.stop()}},Be)}));return function(Be){return Re.apply(this,arguments)}}(),he=ns(c),ge=he.previewUrl,Se=ns(d),Ae=Se.previewUrl;return watch([ge,Ae],function(){se()}),onMounted(Yt(Xe.mark(function Re(){return Xe.wrap(function(Be){for(;;)switch(Be.prev=Be.next){case 0:if(!f.value){Be.next=3;break}return Be.next=3,de(ge.value);case 3:case"end":return Be.stop()}},Re)}))),function(){return createVNode("div",{class:"".concat(g.value,"-image-viewer__modal-pic")},[createVNode("div",{class:"".concat(g.value,"-image-viewer__modal-box"),style:re.value},[v.value&&createVNode("div",{class:"".concat(g.value,"-image-viewer__img-error")},[createVNode("div",{class:"".concat(g.value,"-image-viewer__img-error-content")},[createVNode(X_,{size:"4em"},null),createVNode("div",{class:"".concat(g.value,"-image-viewer__img-error-text")},[N])])]),!v.value&&!!s.placementSrc&&Ae.value&&createVNode("img",{class:"".concat(g.value,"-image-viewer__modal-image"),onMousedown:function(Re){Re.stopPropagation(),x(Re)},src:Ae.value,style:Y.value,alt:"image",draggable:"false"},null),!v.value&&ge.value&&!f.value&&createVNode("img",{class:"".concat(g.value,"-image-viewer__modal-image"),onMousedown:function(Re){Re.stopPropagation(),x(Re)},src:ge.value,onLoad:function(){return b.value=!0},onError:function(){return v.value=!0},style:q.value,alt:"image",draggable:"false"},null),!v.value&&ge.value&&f.value&&createVNode("div",{ref:W,class:"".concat(g.value,"-image-viewer__modal-image"),onMousedown:function(Re){Re.stopPropagation(),x(Re)},"data-alt":"svg",style:q.value,draggable:"false"},null)])])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var ir=defineComponent({name:"TImageModalIcon",props:{disabled:Boolean,onClick:Function,label:String,icon:Function},setup:function(s){var l=we(),c=Ye(),d=computed(function(){return["".concat(l.value,"-image-viewer__modal-icon"),ne({},"".concat(l.value,"-is-disabled"),s.disabled)]});return function(){return createVNode("div",{class:d.value,onClick:s.onClick},[c("icon"),s.label&&createVNode("span",{class:"".concat(l.value,"-image-viewer__modal-icon-label")},[s.label])])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var oU={attach:{type:[String,Function]},body:{type:[String,Function]},cancelBtn:{type:[String,Object,Function,null]},closeBtn:{type:[String,Boolean,Function],default:!0},closeOnEscKeydown:{type:Boolean,default:void 0},closeOnOverlayClick:{type:Boolean,default:void 0},confirmBtn:{type:[String,Object,Function,null]},confirmLoading:{type:Boolean,default:void 0},confirmOnEnter:Boolean,default:{type:[String,Function]},destroyOnClose:Boolean,dialogClassName:{type:String,default:""},dialogStyle:{type:Object},draggable:Boolean,footer:{type:[Boolean,Function],default:!0},header:{type:[String,Boolean,Function],default:!0},mode:{type:String,default:"modal",validator:function(s){return s?["modal","modeless","normal","full-screen"].includes(s):!0}},placement:{type:String,default:"top",validator:function(s){return s?["top","center"].includes(s):!0}},preventScrollThrough:{type:Boolean,default:!0},showInAttachedElement:Boolean,showOverlay:{type:Boolean,default:!0},theme:{type:String,default:"default",validator:function(s){return s?["default","info","warning","danger","success"].includes(s):!0}},top:{type:[String,Number]},visible:Boolean,width:{type:[String,Number]},zIndex:{type:Number},onCancel:Function,onClose:Function,onCloseBtnClick:Function,onClosed:Function,onConfirm:Function,onEscKeydown:Function,onOpened:Function,onOverlayClick:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function zb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Ba(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?zb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):zb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function aC(s){var l=getCurrentInstance(),c=Ye(),d=function($){var y,x=$.globalConfirm,C=$.theme,E=$.globalConfirmBtnTheme,N=((y=ba(E,["info"]))===null||y===void 0?void 0:y[C])||"primary",W={theme:N,size:$.size,onClick:function(q){s.confirmBtnAction(q)}};return Qe(x)?W.content=x:jt(x)&&(W=Ba(Ba({},W),x)),W},f=function($){var y=$.globalCancel,x={theme:"default",size:$.size,onClick:function(C){s.cancelBtnAction(C)}};return Qe(y)?x.content=y:jt(y)&&(x=Ba(Ba({},x),y)),x},g=function($,y){var x=y.defaultButtonProps,C=y.className,E=y.confirmLoading,N=x;return Qe($)?N.content=$:jt($)&&(N=Ba(Ba({},N),$)),E!==void 0&&(N.loading=E),createVNode(Tt,mergeProps({class:C},N),null)},v=function($){var y=$.confirmBtn,x=$.className,C=$.confirmLoading;if(y===null)return null;y&&l.slots.confirmBtn&&console.warn("Both $props.confirmBtn and $scopedSlots.confirmBtn exist, $props.confirmBtn is preferred.");var E=d($);return!y&&!l.slots.confirmBtn?createVNode(Tt,mergeProps({class:x,loading:C},E),null):y&&["string","object"].includes(Zt(y))?g(y,{defaultButtonProps:E,className:x,confirmLoading:C}):c("confirmBtn")},b=function($){var y=$.cancelBtn,x=$.className;if(y===null)return null;y&&l.slots.cancelBtn&&console.warn("Both $props.cancelBtn and $scopedSlots.cancelBtn exist, $props.cancelBtn is preferred.");var C=f($);return!y&&!l.slots.cancelBtn?createVNode(Tt,mergeProps({class:x},C),null):y&&["string","object"].includes(Zt(y))?g(y,{defaultButtonProps:C}):c("cancelBtn")};return{getConfirmBtn:v,getCancelBtn:b}}function iU(s){var l=!1,c=!1,d=function(v){l&&c&&s(v),l=!1,c=!1},f=function(v){l=v.target===v.currentTarget},g=function(v){c=v.target===v.currentTarget};return{onClick:d,onMousedown:f,onMouseup:g}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function oC(){var s=document.createElement("div");s.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(s);var l=s.offsetWidth-s.clientWidth;return document.body.removeChild(s),l}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Vb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Hb(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Vb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Vb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function Ub(s){return Number.isNaN(Number(s))?s:"".concat(Number(s),"px")}var ci,lU=function(s){ci={x:s.clientX,y:s.clientY},setTimeout(function(){ci=null},100)};typeof window<"u"&&window.document&&window.document.documentElement&&document.documentElement.addEventListener("click",lU,!0);function sU(s){var l=s,c=window.innerWidth||document.documentElement.clientWidth,d=window.innerHeight||document.documentElement.clientHeight;l.addEventListener("mousedown",function(f){var g=f.clientX-l.offsetLeft,v=f.clientY-l.offsetTop,b=l.offsetWidth,$=l.offsetHeight;if(b>c||$>d)return;function y(C){var E=C.clientX-g,N=C.clientY-v;E<0&&(E=0),N<0&&(N=0),c-l.offsetWidth-E<0&&(E=c-l.offsetWidth),d-l.offsetHeight-N<0&&(N=d-l.offsetHeight),l.style.position="absolute",l.style.left="".concat(E,"px"),l.style.top="".concat(N,"px")}function x(){document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",x)}document.addEventListener("mousemove",y),document.addEventListener("mouseup",x),document.addEventListener("dragend",x)})}var uU=1,cU=defineComponent({name:"TDialog",directives:{draggable:function(s,l){s&&l&&l.value&&sU(s)}},inheritAttrs:!1,props:oU,emits:["update:visible"],setup:function(s,l){var c=this,d=we("dialog"),f=we(),g=Xt(),v=Ye(),b=ref(null),$=Mt("dialog"),y=$.globalConfig,x=Qn({CloseIcon:Ao,InfoCircleFilledIcon:tv,CheckCircleFilledIcon:tu,ErrorCircleFilledIcon:nu}),C=x.CloseIcon,E=x.InfoCircleFilledIcon,N=x.CheckCircleFilledIcon,W=x.ErrorCircleFilledIcon,q=function(wy){var tS;(tS=s.onConfirm)===null||tS===void 0||tS.call(s,{e:wy})},Y=function(wy){var tS;(tS=s.onCancel)===null||tS===void 0||tS.call(s,{e:wy}),nS({e:wy,trigger:"cancel"})},re=aC({confirmBtnAction:q,cancelBtnAction:Y}),se=re.getConfirmBtn,de=re.getCancelBtn,he=Js(function(){return s.attach});QB();var ge=ref(),Se=ref(),Ae=computed(function(){return s.mode==="modal"}),Re=computed(function(){return s.mode==="modeless"}),Be=computed(function(){return s.mode==="normal"}),Ke=computed(function(){return s.mode==="full-screen"}),Lr=computed(function(){return s.visible}),_y=computed(function(){return["".concat(d.value,"__mask"),!s.showOverlay&&"".concat(f.value,"-is-hidden")]}),by=computed(function(){return Be.value?[]:Ke.value?["".concat(d.value,"__position_fullscreen")]:["".concat(d.value,"__position"),!!s.top&&"".concat(d.value,"--top"),"".concat(s.placement&&!s.top?"".concat(d.value,"--").concat(s.placement):"")]}),yy=computed(function(){return[!Be.value&&"".concat(d.value,"__wrap")]}),my=computed(function(){if(Ke.value)return{};var wy=s.top,tS={};if(wy!==void 0){var yS=Ub(wy);tS={paddingTop:yS}}return tS}),$t=computed(function(){var wy=["".concat(d.value),"".concat(d.value,"__modal-").concat(s.theme),Re.value&&s.draggable&&"".concat(d.value,"--draggable"),s.dialogClassName];return Ke.value?wy.push("".concat(d.value,"__fullscreen")):wy.push.apply(wy,["".concat(d.value,"--default"),"".concat(d.value,"--").concat(s.placement)]),wy}),K$=computed(function(){return Ke.value?Hb({},s.dialogStyle):Hb({width:Ub(s.width)},s.dialogStyle)}),Y$=nC("dialog",{visible:Lr}),W$=Y$.isLastDialog;watch(function(){return s.visible},function(wy){if(wy){var tS;(Ae.value&&!s.showInAttachedElement||Ke.value)&&(s.preventScrollThrough&&document.body.appendChild(Se.value),nextTick(function(){ci&&b.value&&(b.value.style.transformOrigin="".concat(ci.x-b.value.offsetLeft,"px ").concat(ci.y-b.value.offsetTop,"px"))})),(tS=document.activeElement)===null||tS===void 0||tS.blur()}else hy();G$(wy)});function U$(){var wy,tS;(wy=Se.value.parentNode)===null||wy===void 0||(tS=wy.removeChild)===null||tS===void 0||tS.call(wy,Se.value)}function hy(){clearTimeout(ge.value),ge.value=setTimeout(function(){U$()},150)}var G$=function(wy){wy?(document.addEventListener("keydown",$y),s.confirmOnEnter&&document.addEventListener("keydown",ky)):(document.removeEventListener("keydown",$y),s.confirmOnEnter&&document.removeEventListener("keydown",ky))},ky=function(wy){var tS=wy.target;if(tS.tagName.toLowerCase()!=="input"){var yS=wy.code;if((yS==="Enter"||yS==="NumpadEnter")&&W$()){var Q$;(Q$=s.onConfirm)===null||Q$===void 0||Q$.call(s,{e:wy})}}},$y=function(wy){if(wy.code==="Escape"&&W$()){var tS,yS;(tS=s.onEscKeydown)===null||tS===void 0||tS.call(s,{e:wy}),((yS=s.closeOnEscKeydown)!==null&&yS!==void 0?yS:y.value.closeOnEscKeydown)&&nS({e:wy,trigger:"esc"})}},rS=function(wy){var tS;if(s.showOverlay&&((tS=s.closeOnOverlayClick)!==null&&tS!==void 0?tS:y.value.closeOnOverlayClick)){var yS;(yS=s.onOverlayClick)===null||yS===void 0||yS.call(s,{e:wy}),nS({e:wy,trigger:"overlay"})}},lS=iU(rS),bS=lS.onClick,IS=lS.onMousedown,BS=lS.onMouseup,MS=function(wy){var tS;(tS=s.onCloseBtnClick)===null||tS===void 0||tS.call(s,{e:wy}),nS({trigger:"close-btn",e:wy})},zS=function(){var wy;(wy=s.onOpened)===null||wy===void 0||wy.call(s)},LS=function(){var wy;Re.value&&s.draggable&&b.value&&(b.value.style.position="relative",b.value.style.left="unset",b.value.style.top="unset"),(wy=s.onClosed)===null||wy===void 0||wy.call(s)},nS=function(wy){var tS;(tS=s.onClose)===null||tS===void 0||tS.call(s,wy),l.emit("update:visible",!1)},Z$=function(wy){var tS,yS=(tS=c._events)===null||tS===void 0?void 0:tS[wy];return!!(yS!=null&&yS.length)},dS=function(){var wy={info:createVNode(E,{class:"".concat(f.value,"-is-info")},null),warning:createVNode(W,{class:"".concat(f.value,"-is-warning")},null),danger:createVNode(W,{class:"".concat(f.value,"-is-error")},null),success:createVNode(N,{class:"".concat(f.value,"-is-success")},null)};return wy[s.theme]},ES=function(){var wy=createVNode("h5",{class:"title"},null),tS=createVNode(C,null,null),yS=g("default","body"),Q$=createVNode("div",null,[de({cancelBtn:s.cancelBtn,globalCancel:y.value.cancel,className:"".concat(d.value,"__cancel")}),se({theme:s.theme,confirmBtn:s.confirmBtn,globalConfirm:y.value.confirm,globalConfirmBtnTheme:y.value.confirmBtnTheme,className:"".concat(d.value,"__confirm"),confirmLoading:s.confirmLoading})]),eS=Ke.value?["".concat(d.value,"__header"),"".concat(d.value,"__header--fullscreen")]:"".concat(d.value,"__header"),cS=Ke.value?["".concat(d.value,"__close"),"".concat(d.value,"__close--fullscreen")]:"".concat(d.value,"__close"),wS=s.theme==="default"?["".concat(d.value,"__body")]:["".concat(d.value,"__body__icon")],xS=v("footer",Q$);Ke.value&&xS?wS.push("".concat(d.value,"__body--fullscreen")):Ke.value&&wS.push("".concat(d.value,"__body--fullscreen--without-footer"));var OS=Ke.value?["".concat(d.value,"__footer"),"".concat(d.value,"__footer--fullscreen")]:"".concat(d.value,"__footer"),mS=function(pS){Re.value&&s.draggable&&pS.stopPropagation()};return createVNode("div",{class:yy.value},[createVNode("div",{class:by.value,style:my.value,onClick:bS,onMousedown:IS,onMouseup:BS},[withDirectives(createVNode("div",{key:"dialog",class:$t.value,style:K$.value,ref:b},[createVNode("div",{class:eS,onMousedown:mS},[createVNode("div",{class:"".concat(d.value,"__header-content")},[dS(),v("header",wy)]),s.closeBtn?createVNode("span",{class:cS,onClick:MS},[v("closeBtn",tS)]):null]),createVNode("div",{class:wS,onMousedown:mS},[yS]),xS&&createVNode("div",{class:OS,onMousedown:mS},[xS])]),[[resolveDirective("draggable"),Re.value&&s.draggable]])])])};return onMounted(function(){var wy=document.documentElement.scrollHeight>document.documentElement.clientHeight,tS=wy?oC():0;Se.value=document.createElement("style"),Se.value.dataset.id="td_dialog_".concat(+new Date,"_").concat(uU+=1),Se.value.innerHTML=`
        html body {
          overflow-y: hidden;
          width: calc(100% - `.concat(tS,`px);
        }
      `)}),onBeforeUnmount(function(){G$(!1),U$()}),{COMPONENT_NAME:d,isModal:Ae,isModeLess:Re,isFullScreen:Ke,maskClass:_y,dialogClass:$t,dialogStyle:K$,dialogEle:b,afterEnter:zS,afterLeave:LS,hasEventOn:Z$,renderDialog:ES,teleportElement:he}},render:function(){var s=this,l=this.COMPONENT_NAME,c=(this.isModal||this.isFullScreen)&&createVNode("div",{key:"mask",class:this.maskClass},null),d=this.renderDialog(),f=[c,d],g={zIndex:this.zIndex},v=["".concat(l,"__ctx"),ne(ne(ne({},"".concat(l,"__ctx--fixed"),this.isModal||this.isFullScreen),"".concat(l,"__ctx--absolute"),this.isModal&&this.showInAttachedElement),"".concat(l,"__ctx--modeless"),this.isModeLess)];return createVNode(Teleport,{disabled:!this.attach||!this.teleportElement,to:this.teleportElement},{default:function(){return[createVNode(Transition$1,{duration:300,name:"".concat(l,"-zoom__vue"),onAfterEnter:s.afterEnter,onAfterLeave:s.afterLeave},{default:function(){return[(!s.destroyOnClose||s.visible)&&withDirectives(createVNode("div",mergeProps({class:v,style:g},s.$attrs),[f]),[[vShow,s.visible]])]}})]}})}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var iC=ze(cU);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var ni={attach:{type:[String,Function],default:"body"},closeBtn:{type:[Boolean,Function],default:!0},closeOnEscKeydown:{type:Boolean,default:!0},closeOnOverlay:Boolean,draggable:{type:Boolean,default:void 0},imageScale:{type:Object},images:{type:Array,default:function(){return[]}},index:{type:Number,default:void 0},defaultIndex:{type:Number,default:0},mode:{type:String,default:"modal",validator:function(s){return s?["modal","modeless"].includes(s):!0}},navigationArrow:{type:[Boolean,Function],default:!0},showOverlay:{type:Boolean,default:void 0},title:{type:[String,Function]},trigger:{type:[String,Function]},viewerScale:{type:Object},visible:{type:Boolean,default:void 0},modelValue:{type:Boolean,default:void 0},defaultVisible:Boolean,zIndex:{type:Number},onClose:Function,onIndexChange:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Kb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function dU(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Kb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Kb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var fU=function(s){var l,c,d,f=new Image,g=(s==null||(l=s.split)===null||l===void 0||(l=l.call(s,"?"))===null||l===void 0||(l=l[0])===null||l===void 0||(c=l.split)===null||c===void 0||(c=c.call(l,"#"))===null||c===void 0||(c=c[0])===null||c===void 0||(d=c.split)===null||d===void 0?void 0:d.call(c,"/").pop())||Math.random().toString(32).slice(2);f.setAttribute("crossOrigin","anonymous"),f.onload=function(){var v=document.createElement("canvas");v.width=f.width,v.height=f.height;var b=v.getContext("2d");b.drawImage(f,0,0,f.width,f.height),v.toBlob(function($){var y=URL.createObjectURL($),x=document.createElement("a");x.download=g,x.href=y,x.click(),x.remove(),URL.revokeObjectURL(y)})},f.src=s},vU=function(s){return!!s&&!Qe(s)&&!(s instanceof File)},pU=function(s){return at(s)?s.map(function(l){return vU(l)?dU({download:!0,thumbnail:l.mainImage},l):{mainImage:l,thumbnail:l,download:!0}}):[]},mU=function(s){return s.showOverlay!==void 0?s.showOverlay:s.mode==="modal"};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var lC=defineComponent({name:"TImageViewerUtils",props:{scale:Number,onRotate:Function,onZoomIn:Function,onZoomOut:Function,onMirror:Function,onReset:Function,currentImage:{type:Object,default:function(){return{}}}},setup:function(s){var l=we(),c=computed(function(){return s.currentImage.mainImage}),d=ns(c),f=d.previewUrl,g=Mt("imageViewer"),v=g.globalConfig;return function(){return createVNode("div",{class:"".concat(l.value,"-image-viewer__utils")},[createVNode("div",{class:"".concat(l.value,"-image-viewer__utils-content")},[createVNode(Ja,{overlayClassName:"".concat(l.value,"-image-viewer__utils--tip"),content:v.value.mirrorTipText,destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default"},{default:function(){return[createVNode(ir,{onClick:s.onMirror,icon:function(){return createVNode(n9,{size:"medium"},null)}},null)]}}),createVNode(Ja,{overlayClassName:"".concat(l.value,"-image-viewer__utils--tip"),content:v.value.rotateTipText,destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default"},{default:function(){return[createVNode(ir,{onClick:s.onRotate,icon:function(){return createVNode(i9,{size:"medium"},null)}},null)]}}),createVNode(ir,{icon:function(){return createVNode(c9,{size:"medium"},null)},onClick:s.onZoomOut},null),createVNode(ir,{class:"".concat(l.value,"-image-viewer__utils-scale"),size:"medium",label:"".concat(as(String(s.scale*100)),"%")},null),createVNode(ir,{icon:function(){return createVNode(s9,{size:"medium"},null)},onClick:s.onZoomIn},null),createVNode(Ja,{overlayClassName:"".concat(l.value,"-image-viewer__utils--tip"),content:v.value.originalSizeTipText,destroyOnClose:!0,placement:"top",showArrow:!0,theme:"default"},{default:function(){return[createVNode("div",{class:"".concat(l.value,"-image-viewer__modal-icon")},[createVNode(ir,{icon:function(){return createVNode(J_,{size:"medium"},null)},onClick:s.onReset},null)])]}}),s.currentImage.download&&createVNode(ir,{icon:function(){return createVNode(qD,{size:"medium"},null)},onClick:function(){fU(f.value)}},null)])])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var hU=defineComponent({name:"TImageViewerModal",props:{zIndex:Number,visible:Boolean,index:Number,images:ni.images,scale:Number,rotate:Number,mirror:Number,title:ni.title,currentImage:{type:Object,default:function(){return{}}},onRotate:Function,onZoomIn:Function,onZoomOut:Function,onMirror:Function,onReset:Function,onClose:ni.onClose,draggable:{type:Boolean,default:!0},viewerScale:{type:Object,default:function(){return{}}},showOverlay:Boolean,closeBtn:ni.closeBtn},setup:function(s){var l=we(),c=Ye(),d=computed(function(){return{minWidth:s.viewerScale.minWidth,minHeight:s.viewerScale.minHeight}});return function(){return createVNode(iC,{destroyOnClose:!0,attach:"body",onClose:s.onClose,visible:s.visible,placement:"center",mode:"modeless",width:1e3,cancelBtn:null,confirmBtn:null,draggable:s.draggable,zIndex:s.zIndex,showOverlay:s.showOverlay,class:"".concat(l.value,"-image-viewer__dialog"),header:c("title",""),footer:function(){return createVNode("div",{class:"".concat(l.value,"-image-viewer-mini__footer")},[createVNode(lC,{onZoomIn:s.onZoomIn,onZoomOut:s.onZoomOut,scale:s.scale,currentImage:s.currentImage,onRotate:s.onRotate,onMirror:s.onMirror,onReset:s.onReset},null)])}},{default:function(){return[createVNode("div",{class:"".concat(l.value,"-image-viewer-mini__content"),style:d.value},[createVNode(rC,{rotate:s.rotate,scale:s.scale,mirror:s.mirror,src:s.currentImage.mainImage,placementSrc:s.currentImage.thumbnail,isSvg:s.currentImage.isSvg},null)])]}})}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Ha=function(s){return s.left="ArrowLeft",s.up="ArrowUp",s.right="ArrowRight",s.down="ArrowDown",s.esc="Escape",s}(Ha||{});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Wb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function gU(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Wb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Wb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var bU=defineComponent({name:"TImageViewer",props:gU({},ni),setup:function(s){var l,c=we(),d=we("image-viewer"),f=Ye(),g=ref(!0),v=computed(function(){return mU(s)}),b=toRefs(s),$=b.index,y=b.visible,x=b.modelValue,C=ga($,(l=s.defaultIndex)!==null&&l!==void 0?l:0,s.onIndexChange,"index"),E=je(C,2),N=E[0],W=E[1],q=Lt(y,x,s.defaultVisible,function(){},"visible"),Y=je(q,2),re=Y[0],se=Y[1],de=ref(!0),he=ref(),ge=Js(function(){return s.attach}),Se=computed(function(){return[d.value,"".concat(d.value,"-preview-image"),ne({},"".concat(c.value,"-is-hide"),!re.value)]}),Ae=computed(function(){return["".concat(c.value,"-image-viewer__modal-header"),ne({},"".concat(c.value,"-is-show"),g.value)]}),Re=computed(function(){var cS;return(cS=s.zIndex)!==null&&cS!==void 0?cS:2600}),Be=function(){g.value=!g.value},Ke=nU(),Lr=Ke.mirror,_y=Ke.onMirror,by=Ke.resetMirror,yy=rU(s.imageScale),my=yy.scale,$t=yy.onZoomIn,K$=yy.onZoomOut,Y$=yy.resetScale,W$=aU(),U$=W$.rotate,hy=W$.onRotate,G$=W$.resetRotate,ky=function(){by(),Y$(),G$()},$y=computed(function(){return pU(s.images)}),rS=computed(function(){var cS;return(cS=$y.value[N.value])!==null&&cS!==void 0?cS:{mainImage:""}}),lS=nC("dialog",{visible:re}),bS=lS.isLastDialog,IS=function(){var cS=N.value-1;ky(),W(cS<0?0:cS,{trigger:"prev"})},BS=function(){var cS=N.value+1;ky(),W(cS>=$y.value.length?N.value:cS,{trigger:"next"})},MS=function(cS){W(cS,{trigger:"current"})},zS=function(){se(!0)},LS=function(cS){var wS;se(!1),(wS=s.onClose)===null||wS===void 0||wS.call(s,cS)},nS=function(cS){LS({e:cS,trigger:"close-btn"})},Z$=function(cS){s.closeOnOverlay&&LS({e:cS,trigger:"overlay"})},dS=function(cS){switch(cS.stopPropagation(),cS.code){case Ha.left:IS();break;case Ha.right:BS();break;case Ha.up:$t();break;case Ha.down:K$();break;case Ha.esc:s.closeOnEscKeydown&&bS()&&LS({e:cS,trigger:"esc"});break}},ES=ref();watch(function(){return re.value},function(cS){clearTimeout(he.value),cS?(de.value=!1,nextTick().then(function(){var wS,xS;(wS=ES.value)===null||wS===void 0||(xS=wS.focus)===null||xS===void 0||xS.call(wS)}),ky()):he.value=setTimeout(function(){de.value=!0},200)});var wy=function(cS){cS.preventDefault();var wS=cS.deltaY;wS>0?K$():$t()},tS=computed(function(){return{transform:"translateX(calc(-".concat(N.value," * (40px / 9 * 16 + 4px)))")}}),yS=function(){return createVNode("div",{class:Ae.value},[createVNode(ir,{icon:function(){return createVNode(Z_,null,null)},class:"".concat(d.value,"__header-pre-bt"),onClick:Be},null),createVNode("div",{class:"".concat(d.value,"__header-prev")},[createVNode("div",{class:"".concat(d.value,"__header-trans"),style:tS.value},[$y.value.map(function(cS,wS){return createVNode("div",{key:wS,class:["".concat(d.value,"__header-box"),ne({},"".concat(c.value,"-is-active"),wS===N.value)]},[createVNode(WH,{src:cS.thumbnail||cS.mainImage,error:"",className:"".concat(d.value,"__header-img"),onClick:function(){return MS(wS)}},null)])})])])])},Q$=function(cS){var wS=cS==="prev"?0:180,xS=f("navigationArrow",createVNode(FD,{style:{transform:"rotate(".concat(wS,"deg)")},size:"24px"},null));return createVNode(ir,{class:"".concat(d.value,"__modal-").concat(cS,"-bt"),onClick:cS==="prev"?IS:BS,icon:function(){return xS}},null)},eS=function(){if(s.closeBtn!==!1)return createVNode("div",{class:["".concat(d.value,"__modal-icon"),"".concat(d.value,"__modal-close-bt")],onClick:nS},[f("closeBtn",createVNode(Ao,{size:"24px"},null))])};return function(){return s.mode==="modeless"?createVNode(Fragment$1,null,[f("trigger",{params:{open:zS}}),createVNode(hU,{zIndex:Re.value,visible:re.value,index:N.value,images:$y.value,scale:my.value,rotate:U$.value,mirror:Lr.value,currentImage:rS.value,onRotate:hy,onZoomIn:$t,onZoomOut:K$,onMirror:_y,onReset:ky,onClose:LS,draggable:s.draggable,showOverlay:v.value,title:s.title},null)]):createVNode(Fragment$1,null,[f("trigger",{params:{open:zS}}),createVNode(Teleport,{disabled:!s.attach||!ge.value,to:ge.value},{default:function(){return[createVNode(Transition$1,null,{default:function(){return[(re.value||!de.value)&&withDirectives(createVNode("div",{ref:ES,class:Se.value,style:{zIndex:Re.value},onWheel:wy,tabindex:-1,onKeydown:dS},[!!v.value&&createVNode("div",{class:"".concat(d.value,"__modal-mask"),onClick:Z$},null),$y.value.length>1&&createVNode(Fragment$1,null,[yS(),createVNode("div",{class:"".concat(d.value,"__modal-index")},[s.title&&f("title"),"".concat(N.value+1,"/").concat($y.value.length)]),Q$("prev"),Q$("next")]),eS(),createVNode(lC,{onZoomIn:$t,onZoomOut:K$,onMirror:_y,onReset:ky,onRotate:hy,scale:my.value,currentImage:rS.value},null),createVNode(rC,{scale:my.value,rotate:U$.value,mirror:Lr.value,src:rS.value.mainImage,placementSrc:rS.value.thumbnail,isSvg:rS.value.isSvg},null)]),[[vShow,re.value]])]}})]}})])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var sC=ze(bU);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var yU={alpha:{type:Number,default:1},content:{type:[String,Function]},default:{type:[String,Function]},height:{type:Number},isRepeat:{type:Boolean,default:!0},lineSpace:{type:Number,default:16},movable:Boolean,moveInterval:{type:Number,default:3e3},offset:{type:Array},removable:{type:Boolean,default:!0},rotate:{type:Number,default:-22},watermarkContent:{type:[Object,Array]},width:{type:Number},x:{type:Number},y:{type:Number},zIndex:{type:Number}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Gb(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function _U(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?Gb(Object(c),!0).forEach(function(d){ne(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):Gb(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function wU(s,l){var c=s.width,d=s.height,f=s.gapX,g=s.gapY,v=s.offsetLeft,b=s.offsetTop,$=s.rotate,y=s.alpha,x=s.watermarkContent,C=s.lineSpace,E=document.createElement("canvas"),N=E.getContext("2d");if(!N){console.warn("Canvas, "),l("");return}var W=window.devicePixelRatio||1,q=(f+c)*W,Y=(g+d)*W;E.width=q,E.height=Y,E.style.width="".concat(f+c,"px"),E.style.height="".concat(g+d,"px"),N.translate(v*W,b*W),N.rotate(Math.PI/180*Number($)),N.globalAlpha=y;var re=c*W,se=d*W;N.fillStyle="transparent",N.fillRect(0,0,re,se);var de=Array.isArray(x)?x:[_U({},x)],he=0;de.forEach(function(ge){if(ge.url){var Se=ge.url,Ae=ge.isGrayscale,Re=Ae===void 0?!1:Ae;ge.top=he,he+=d;var Be=new Image;Be.crossOrigin="anonymous",Be.referrerPolicy="no-referrer",Be.src=Se,Be.onload=function(){if(N.drawImage(Be,0,ge.top*W,c*W,d*W),Re){for(var U$=N.getImageData(0,0,N.canvas.width,N.canvas.height),hy=U$.data,G$=0;G$<hy.length;G$+=4){var ky=(hy[G$]+hy[G$+1]+hy[G$+2])/3;hy[G$]=ky,hy[G$+1]=ky,hy[G$+2]=ky}N.putImageData(U$,0,0)}l(E.toDataURL())}}else if(ge.text){var Ke=ge.text,Lr=ge.fontColor,_y=Lr===void 0?"rgba(0, 0, 0, 0.1)":Lr,by=ge.fontSize,yy=by===void 0?16:by,my=ge.fontFamily,$t=my===void 0?void 0:my,K$=ge.fontWeight,Y$=K$===void 0?"normal":K$;ge.top=he,he+=C;var W$=Number(yy)*W;N.font="normal normal ".concat(Y$," ").concat(W$,"px/").concat(se,"px ").concat($t),N.textAlign="start",N.textBaseline="top",N.fillStyle=_y,N.fillText(Ke,0,ge.top*W)}}),l(E.toDataURL())}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function CU(){var s=Math.floor(Math.random()*4),l=Math.floor(Math.random()*70)+30,c=0,d=95,f=90,g=`
  @keyframes watermark {
    0%   {left: `.concat(s===1?f:s===3?c:l,"%; top: ").concat(s===0?c:s===2?d:l,`%;}
    25% {left: `).concat(s===0?f:s===2?c:100-l,"%; top: ").concat(s===1?d:s===3?c:l,`%;}
    50% {left: `).concat(s===1?c:s===3?f:100-l,"%; top: ").concat(s===0?d:s===2?c:100-l,`%; transform: translateX(-100%);}
    75% {left: `).concat(s===0?c:s===2?f:l,"%; top: ").concat(s===1?c:s===3?d:100-l,`%;}
    100% {left: `).concat(s===1?f:s===3?c:l,"%; top: ").concat(s===0?c:s===2?d:l,`%;}
  }
  `);return g}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var kU=function(s){var l=document.createElement("style"),c=null;document.head.appendChild(l),c=l.sheet,c.insertRule(s,c.cssRules.length)};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function $U(s,l){var c=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!c){if(Array.isArray(s)||(c=SU(s))||l){c&&(s=c);var d=0,f=function(){};return{s:f,n:function(){return d>=s.length?{done:!0}:{done:!1,value:s[d++]}},e:function($){throw $},f}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var g,v=!0,b=!1;return{s:function(){c=c.call(s)},n:function(){var $=c.next();return v=$.done,$},e:function($){b=!0,g=$},f:function(){try{v||c.return==null||c.return()}finally{if(b)throw g}}}}function SU(s,l){if(s){if(typeof s=="string")return qb(s,l);var c={}.toString.call(s).slice(8,-1);return c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set"?Array.from(s):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?qb(s,l):void 0}}function qb(s,l){(l==null||l>s.length)&&(l=s.length);for(var c=0,d=Array(l);c<l;c++)d[c]=s[c];return d}var xU=defineComponent({name:"TWatermark",props:yU,setup:function(s){var l=ref(""),c=shallowRef(),d=shallowRef(),f=reactive(s.offset||[]),g=computed(function(){return s.movable?0:s.x}),v=computed(function(){return s.movable?0:s.y}),b=computed(function(){return s.movable?0:s.rotate}),$=computed(function(){return s.movable?"no-repeat":s.isRepeat?"repeat":"no-repeat"}),y=computed(function(){return f[0]||g.value/2}),x=computed(function(){return f[1]||v.value/2}),C=computed(function(){return{width:s.width,height:s.height,rotate:b.value,lineSpace:s.lineSpace,alpha:s.alpha,gapX:g.value,gapY:v.value,watermarkContent:s.watermarkContent,offsetLeft:y.value,offsetTop:x.value}}),E=function(){d.value&&(d.value.remove(),d.value=null)},N=function(){if(wU(C.value,function(q){var Y;E(),l.value=q,d.value=document.createElement("div"),ao(d.value,{zIndex:s.zIndex,position:"absolute",left:0,right:0,top:0,bottom:0,width:"100%",height:"100%",backgroundSize:"".concat(g.value+s.width,"px"),pointerEvents:"none",backgroundRepeat:$.value,backgroundImage:"url('".concat(l.value,"')"),animation:s.movable?"watermark infinite ".concat(s.moveInterval*4/60,"s"):"none"}),(Y=c.value)===null||Y===void 0||Y.append(d.value)}),s.movable){var W=CU();kU(W)}};return onMounted(function(){N(),Uw(c.value,function(W){if(!(s.removable||!d.value)){var q=$U(W),Y;try{for(q.s();!(Y=q.n()).done;){var re=Y.value,se=Array.from(re.removedNodes).includes(d.value),de=re.type==="attributes"&&d.value===re.target;if(se||de){N();break}}}catch(he){q.e(he)}finally{q.f()}}},{attributes:!0,childList:!0,characterData:!0,subtree:!0})}),watch(function(){return s},N,{deep:!0,flush:"post"}),{gapX:g,gapY:v,backgroundRepeat:$,backgroundImage:l,watermarkRef:c,watermarkContentRef:d,bgImageOptions:C}},render:function(){var s=we("watermark"),l=Xt();return createVNode("div",{style:{position:"relative",overflow:"hidden",width:"100%"},class:s.value,ref:"watermarkRef"},[l("default","content")])}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var OU=ze(xU);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var EU={attach:{type:[String,Function]},body:{type:[String,Function]},cancelBtn:{type:[String,Object,Function]},closeBtn:{type:[String,Boolean,Function]},closeOnEscKeydown:{type:Boolean,default:void 0},closeOnOverlayClick:{type:Boolean,default:void 0},confirmBtn:{type:[String,Object,Function]},default:{type:[String,Function]},destroyOnClose:Boolean,footer:{type:[Boolean,Function],default:!0},header:{type:[String,Boolean,Function],default:!0},mode:{type:String,default:"overlay",validator:function(s){return s?["overlay","push"].includes(s):!0}},placement:{type:String,default:"right",validator:function(s){return s?["left","right","top","bottom"].includes(s):!0}},preventScrollThrough:{type:Boolean,default:!0},showInAttachedElement:Boolean,showOverlay:{type:Boolean,default:!0},size:{type:String,default:void 0},sizeDraggable:{type:[Boolean,Object],default:!1},visible:Boolean,zIndex:{type:Number},onCancel:Function,onClose:Function,onCloseBtnClick:Function,onConfirm:Function,onEscKeydown:Function,onOverlayClick:Function,onSizeDragEnd:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function AU(s,l){return typeof s=="boolean"?{allowSizeDraggable:s,max:l.max,min:l.min}:{allowSizeDraggable:!0,max:s.max,min:s.min}}function hl(s,l,c){return Math.min(Math.max(s,l),c)}function TU(s,l){var c=l.x,d=l.y,f=l.max,g=l.min,v=l.maxWidth,b=l.maxHeight,$;switch(s){case"right":$=hl(v-c,g,f);break;case"left":$=hl(c,g,f);break;case"top":$=hl(d,g,f);break;case"bottom":$=hl(b-d,g,f);break;default:return $}return $}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var PU=function(s){var l=ref(!1),c=ref(null),d=function(){document.addEventListener("mouseup",f,!0),document.addEventListener("mousemove",g,!0),l.value=!0},f=function(){document.removeEventListener("mouseup",f,!0),document.removeEventListener("mousemove",g,!0),l.value=!1},g=function(b){var $,y=b.x,x=b.y,C=document.documentElement.clientHeight,E=document.documentElement.clientWidth,N=8,W=8,q=s.placement==="left"||s.placement==="right"?E:C,Y=s.placement==="left"||s.placement==="right"?W:N,re=AU(s.sizeDraggable,{max:q,min:Y}),se=re.allowSizeDraggable,de=re.max,he=re.min;if(!(!se||!l.value)){var ge=TU(s.placement,{x:y,y:x,maxWidth:E,maxHeight:C,max:de,min:he});typeof ge>"u"||(c.value="".concat(ge,"px"),($=s.onSizeDragEnd)===null||$===void 0||$.call(s,{e:b,size:ge}))}},v=computed(function(){var b=["right","left"].includes(s.placement),$={left:"right",right:"left",top:"bottom",bottom:"top"};return ne(ne(ne(ne({zIndex:1,position:"absolute",background:"transparent"},$[s.placement],0),"width",b?"16px":"100%"),"height",b?"100%":"16px"),"cursor",b?"col-resize":"row-resize")});return{draggedSizeValue:c,enableDrag:d,draggableLineStyles:v}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var MU=1,IU=defineComponent({name:"TDrawer",inheritAttrs:!1,props:EU,emits:["update:visible"],setup:function(s,l){var c=ref(!1),d=ref(!1),f=ref(),g=ref(),v=Mt("drawer"),b=v.globalConfig,$=Qn({CloseIcon:Ao}),y=$.CloseIcon,x=Ye(),C=Xt(),E=we("drawer"),N=PU(s),W=N.draggedSizeValue,q=N.enableDrag,Y=N.draggableLineStyles,re=Js(function(){return s.attach}),se=function(ky){var $y;($y=s.onConfirm)===null||$y===void 0||$y.call(s,{e:ky})},de=function(ky){var $y;($y=s.onCancel)===null||$y===void 0||$y.call(s,{e:ky}),G$({trigger:"cancel",e:ky})},he=aC({confirmBtnAction:se,cancelBtnAction:de}),ge=he.getConfirmBtn,Se=he.getCancelBtn,Ae=ref(null),Re=computed(function(){return[E.value,"".concat(E.value,"--").concat(s.placement),ne(ne(ne({},"".concat(E.value,"--open"),d.value),"".concat(E.value,"--attach"),s.showInAttachedElement),"".concat(E.value,"--without-mask"),!s.showOverlay)]}),Be=computed(function(){var ky;if(W.value)return W.value;var $y=(ky=s.size)!==null&&ky!==void 0?ky:b.value.size,rS=isNaN(Number($y))?$y:"".concat($y,"px");return{small:"300px",medium:"500px",large:"760px"}[$y]||rS}),Ke=computed(function(){return{transform:d.value?"translateX(0)":void 0,width:["left","right"].includes(s.placement)?Be.value:"",height:["top","bottom"].includes(s.placement)?Be.value:""}}),Lr=computed(function(){return["".concat(E.value,"__content-wrapper"),"".concat(E.value,"__content-wrapper--").concat(s.placement)]}),_y=computed(function(){return Ae.value&&Ae.value.parentNode}),by=computed(function(){return[s.mode,s.placement].join()}),yy=computed(function(){return{display:"flex",justifyContent:s.placement==="right"?"flex-start":"flex-end"}}),my=function(ky){var $y;if((($y=s.closeOnEscKeydown)!==null&&$y!==void 0?$y:b.value.closeOnEscKeydown)&&ky.key==="Escape"&&d.value){var rS;(rS=s.onEscKeydown)===null||rS===void 0||rS.call(s,{e:ky}),G$({trigger:"esc",e:ky})}},$t=function(){clearTimeout(g.value),g.value=setTimeout(function(){var ky,$y;(ky=f.value)===null||ky===void 0||(ky=ky.parentNode)===null||ky===void 0||($y=ky.removeChild)===null||$y===void 0||$y.call(ky,f.value)},150)},K$=function(){s.mode==="push"&&nextTick(function(){_y.value&&(_y.value.style.cssText="transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;")})},Y$=function(){if(_y.value&&!(s.mode!=="push"||!_y.value)){var ky={left:"margin: 0 0 0 ".concat(Be.value),right:"margin: 0 0 0 -".concat(Be.value),top:"margin: ".concat(Be.value," 0 0 0"),bottom:"margin: -".concat(Be.value," 0 0 0")}[s.placement];d.value?_y.value.style.cssText+=ky:_y.value.style.cssText=_y.value.style.cssText.replace(/margin:.+;/,"")}},W$=function(){var ky=ge({confirmBtn:s.confirmBtn,globalConfirm:b.value.confirm,className:"".concat(E.value,"__confirm")}),$y=Se({cancelBtn:s.cancelBtn,globalCancel:b.value.cancel,className:"".concat(E.value,"__cancel")});return createVNode("div",{style:yy.value},[s.placement==="right"?ky:null,$y,s.placement!=="right"?ky:null])};watch(by,function(){K$()},{immediate:!0}),watch(function(){return s.visible},function(ky){zi||(ky?!s.showInAttachedElement&&s.preventScrollThrough&&f.value&&document.head.appendChild(f.value):$t(),s.destroyOnClose?ky?(c.value=!1,setTimeout(function(){d.value=!0})):(d.value=!1,setTimeout(function(){c.value=!0},200)):c.value===!0&&ky?(c.value=!1,setTimeout(function(){d.value=!0})):d.value=ky)},{immediate:!0});var U$=function(ky){var $y;($y=s.onCloseBtnClick)===null||$y===void 0||$y.call(s,{e:ky}),G$({trigger:"close-btn",e:ky})},hy=function(ky){var $y,rS;($y=s.onOverlayClick)===null||$y===void 0||$y.call(s,{e:ky}),((rS=s.closeOnOverlayClick)!==null&&rS!==void 0?rS:b.value.closeOnOverlayClick)&&G$({trigger:"overlay",e:ky})},G$=function(ky){var $y;($y=s.onClose)===null||$y===void 0||$y.call(s,ky),l.emit("update:visible",!1)};return onUpdated(function(){Y$()}),onMounted(function(){var ky=document.documentElement.scrollHeight>document.documentElement.clientHeight,$y=ky?oC():0;f.value=document.createElement("style"),f.value.dataset.id="td_drawer_".concat(+new Date,"_").concat(MU+=1),f.value.innerHTML=`
        html body {
          overflow-y: hidden;
          transition: margin 300ms cubic-bezier(0.7, 0.3, 0.1, 1) 0s;
          `.concat(s.mode==="push"?"":"width: calc(100% - ".concat($y,"px);"),`
        }
      `),d.value&&!s.showInAttachedElement&&s.preventScrollThrough&&document.head.appendChild(f.value),window.addEventListener("keydown",my)}),onBeforeUnmount(function(){$t(),window.removeEventListener("keydown",my)}),function(){if(!c.value){var ky=C("body","default"),$y=x("header"),rS=W$();return createVNode(Teleport,{disabled:!s.attach||!re.value,to:re.value},{default:function(){return[createVNode("div",mergeProps({ref:Ae,class:Re.value,style:{zIndex:s.zIndex},onKeydown:my,tabindex:0},l.attrs),[s.showOverlay&&createVNode("div",{class:"".concat(E.value,"__mask"),onClick:hy},null),createVNode("div",{class:Lr.value,style:Ke.value},[$y&&createVNode("div",{class:"".concat(E.value,"__header")},[$y]),s.closeBtn&&createVNode("div",{class:"".concat(E.value,"__close-btn"),onClick:U$},[x("closeBtn",createVNode(y,null,null))]),createVNode("div",{class:["".concat(E.value,"__body"),"narrow-scrollbar"]},[ky]),s.footer&&createVNode("div",{class:"".concat(E.value,"__footer")},[x("footer",rS)]),s.sizeDraggable&&createVNode("div",{style:Y.value,onMousedown:q},null)])])]}})}}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var NU=ze(IU);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var jU={globalConfig:Object},DU=defineComponent({name:"TConfigProvider",props:jU,setup:function(s){k7(s);var l=Ye();return function(){return createVNode(Fragment$1,null,[l("default")])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var BU=ze(DU);const FU=["width","height"],LU=["xlink:href","fill"],tt={__name:"icon",props:{name:{type:String,required:!0},size:{type:String,default:"1em"},color:{type:String,default:"currentcolor"}},setup(s){const l=s;return(c,d)=>(openBlock(),createElementBlock("svg",{class:"umo-icon","aria-hidden":"true",width:s.size,height:s.size},[createBaseVNode("use",{"xlink:href":`#umo-icon-${l.name}`,fill:s.color},null,8,LU)],8,FU))}},wn=s=>{if(!s)return"";const l=/macintosh|mac os x/gi.test(navigator.userAgent);let c=s;return l&&(c=c.replace(/ctrl/gi,"").replace(/shift/gi,"").replace(/alt/gi,"").replace(/Enter/gi,"Return").replace(/Backspace/gi,"Delete")),c},RU={ribbon:"",classic:"",toggle:"",show:"",hide:"",source:"",base:"",insert:"",table:"",tools:"",page:"",export:""},zU={align:{title:"",left:"",center:"",right:"",justify:"",distributed:""},bgColor:"",bold:"",clearFormat:"",code:"",color:"",fontFamily:{text:"",all:"",recent:"",used:"",unsupport:""},fontSize:{text:"",increase:"",decrease:"",default:"","42pt":"","36pt":"","26pt":"","24pt":"","22pt":"","18pt":"","16pt":"","15pt":"","14pt":"","12pt":"","10_5pt":"","9pt":"","7_5pt":"","6_5pt":""},formatPainter:{text:"",tip:" ESC "},heading:{text:" {level}",paragraph:"",tip:""},highlight:{text:"",clear:"",yellowBg:"",purpleBg:"",greenBg:"",blueBg:"",red:"",green:""},indent:"",italic:"",lineHeight:{text:"",default:" ()"},outdent:"",margin:{text:"",top:"",bottom:"",default:"",reset:""},importWord:{text:" Word",loadScript:{title:"",message:""},limitSize:" 5MB",converting:"Word...",convertError:" Word ",importError:" Word "},markdown:{text:"Markdown",enable:" Markdown ",disable:" Markdown ",message:"",toggle:""},quote:"",redo:"",selectAll:"",strike:"",subscript:"",superscript:"",underline:"",undo:""},VU={audio:"",codeBlock:"",date:"",emoji:"",file:"",hardBreak:"",hr:{text:"",title:"",color:"",signle:"",double:"",dotted:"",dashed:"",dashedDouble:"",signleBold:"",doubleBoldTop:"",doubleBoldBottom:"",wavy:""},image:"",link:{text:"",title:"",insert:"",hrefText:"",hrefTextTip:"",href:"",hrefTip:" http://  https:// "},math:"",symbol:"",template:"",textBox:"",toc:"",video:"",web:{text:"",insert:"",title:"",tip:"",placeholder:" http://  https:// "}},HU={addColumnAfter:"()",addColumnBefore:"()",addRowAfter:"()",addRowBefore:"()",borderColor:"",cellAlign:{text:"",tip:"",lt:"",ct:"",rt:"",jt:"",lm:"",cm:"",rm:"",jm:"",lb:"",cb:"",rb:"",jb:""},cellBgColor:{text:"",tip:""},deleteColumn:{text:"",title:"",message:"",delete:"",success:""},deleteRow:{text:"",title:"",message:"",delete:"",success:""},delete:{text:"",title:"",message:"",delete:"",success:""},fix:{text:"",tip:""},insert:{text:"",tip:"",property:"",withHeader:"",rows:":",cols:":",create:""},mergeCells:"",nextCell:"",prevCell:"",splitCell:"",toggleHeaderCell:"",toggleHeaderRow:"",toggleHeaderColumn:""},UU={barcode:{text:"",edit:"",title:"",format:"",font:"",lineColor:"",bgColor:"",more:"",width:"",height:"",margin:"",displayValue:"",displayValueText:"",textContent:"",textContentTip:"",textPosition:"",top:"",bottom:"",textMargin:"",fontSize:"",placeholder:"",error:"",preview:"",renderError:"",notEmpty:""},chineseCase:{text:"",tip:""},diagrams:{text:"",edit:"",loading:"..."},mermaid:{text:"Mermaid",edit:" Mermaid",placeholder:" Mermaid ",preview:"",notEmpty:"Mermaid "},mindMap:"",qrcode:{text:"",edit:"",level:"",levelL:"",levelM:"",levelQ:"",levelH:"",padding:"",paddingTip:"",width:"",widthTip:"",color:"",bgColor:"",placeholder:"",preview:"",renderError:"",notEmpty:""},seal:{text:"",title:"",insert:"",tip:"",insertTip:"",converting1:"...",converting2:": {ppercentage}%",converting3:"...",convertError:"",notEmpty:""},signature:{text:"",title:"",clear:"",lineWidth:"",tip:"",notEmpty:""}},KU={bg:{text:"",custom:"",default:"",color1:"",color2:"",color3:"",color4:"",color5:""},break:"",footer:{show:"",hide:""},header:{show:"",hide:""},lineNumber:"",margin:"",orientation:{text:"",landscape:"",portrait:""},preview:"",size:{text:"",cm:"",custom:""},watermark:{text:"",fontFamily:"",fontSize:"",fontColor:"",content:"",type:"",compact:"",spacious:"",clear:""}},WU={bullet:{text:"",disc:"",circle:"",square:""},ordered:{text:"",property:"",startAt:":",decimal:"",decimalLeadingZero:" 0 ",lowerRoman:"",upperRoman:"",lowerLatin:"",upperLatin:"",tradChineseInformal:"",simpChineseFormal:""},task:{text:"",split:"",sink:"",lift:""}},GU={default:"",standard:"",recent:"",more:""},qU={insert:"",select:"",template:"",toogleNode:"",common:"",clearFormat:"",duplicate:"",copy:"",cut:"",delete:""},YU={code:{copy:{text:"",success:""},languages:"",lineNumbers:"",themes:{text:"",light:"",dark:""},wordWrap:""},delete:"",file:{download:""},image:{open:"",draggable:"",flipX:"",flipY:"",preview:"",proportion:"",removeBg:"",removingBg:"...",reset:"",rotateCC:"90",rotateC:"90"}},ZU={text:"AI ",placeholder:"...",send:"",exit:" AI ",commands:"",result:"AI ",replace:"",insertAfter:"",insertBelow:"",copy:"",copySuccess:"",rewrite:"",delete:"",error:{title:"",message:"AI "}},XU={text:"/"},JU={title:"",size:{text:"",width:":",height:":",custom:""},margin:{text:"",default:"",narrow:"",moderate:"",wide:"",top:":",right:":",bottom:":",left:":"}},QU={loading:"..."},eK={untitled:""},tK={text:"",title:"",searchText:"",replaceText:"",caseSensitive:"()",search:"",replace:"",replaceAll:""},nK={title:"",show:"",hide:"",empty:""},rK={enable:"",disable:""},aK={title:"",disable:"",toggle:""},oK={title:"",text:"",commonlyUsed:"",copy:"",paste:"",pasteAsText:"",paragraph:"",hardBreak:"",format:"",page:"",pageZoomIn:"",pageZoomOut:"",pageZoomReset:"",pageAutoWidth:"",markdown:"Markdown "},iK={title:"",message:"",confirm:""},lK={title:"",message:"",reset:""},sK="",uK="Umo Editor",cK={characters:"",title:"",input:"",selection:"",limit:"",currentPage:"",totalPage:""},dK={title:"",disable:"",laserPointer:"",exit:""},fK={title:"",disable:""},vK={zoomIn:"",zoomOut:"",level:"",autoWidth:"",autoWidthError:"",reset:" 100%"},pK={codeBlock:{menu:""},image:{loading:"...",error:""},textBox:{tip:""}},mK={uploading:"...",download:"",limit:"{filename} {size}MB ",notAllow:{title:"",message:""}},hK={text:"",saved:"",unsaved:"",network:"",online:"",offline:"",saving:"...",savedAt:"",savedAtText:"{time}",failed:"",success:"",error:"",cache:{text:"",error:{title:"",message:""}}},gK={text:"",title:"",message:" ",confirm:""},bK={justNow:"",past:"{n}",yesterday:"",day:"{n} ",hour:"{n} ",minute:"{n} ",second:"{n} "},yK={cancel:""},_K={toolbar:RU,base:zU,insert:VU,table:HU,tools:UU,page:KU,export:{embed:{text:"Embed",title:"Embed ",tip:" iframe ",copy:"",copied:""},image:{text:"",jpg:"JPG ",png:"PNG ",error:{title:"",message:""}},share:{text:"",tip:"",copy:"",copied:""},pdf:{text:"PDF",title:" PDF ",message:" PDF  - PDF ",confirm:""},text:""},list:WU,colorPicker:GU,blockMenu:qU,bubbleMenu:YU,assistant:ZU,comment:XU,pageOptions:JU,source:QU,document:eK,search:tK,toc:nK,spellcheck:rK,pagination:aK,shortcut:oK,changeLocale:iK,resetAll:lK,feedback:sK,poweredBy:uK,wordCount:cK,preview:dK,fullscreen:fK,zoom:vK,node:pK,file:mK,save:hK,print:gK,time:bK,dialog:yK},wK={ribbon:"Professional",classic:"Classic",toggle:"Toolbar",show:"Show Toolbar",hide:"Hide Toolbar",source:"Edit Source Code",base:"Home",insert:"Insert",table:"Table",tools:"Tools",page:"Page",export:"Export"},CK={align:{title:"Alignment",left:"Left",center:"Center",right:"Right",justify:"Justify",distributed:"Distributed"},bgColor:"Background Color of Text",bold:"Bold",clearFormat:"Clear Text Formatting",code:"Code",color:"Font Color",fontFamily:{text:"Select Font",all:"Common Fonts",recent:"Recently Used",used:"Used Fonts",unsupport:"This font may not display properly, possibly due to it not being installed on this device"},fontSize:{text:"Font Size",increase:"Increase Font Size",decrease:"Decrease Font Size",default:"Default","42pt":"First","36pt":"Sub-first","26pt":"First Level","24pt":"Sub-first Level","22pt":"Second Level","18pt":"Sub-second Level","16pt":"Third Level","15pt":"Sub-third Level","14pt":"Fourth Level","12pt":"Sub-fourth Level","10_5pt":"Fifth Level","9pt":"Sub-fifth Level","7_5pt":"Sub-sixth Level","6_5pt":"Default"},formatPainter:{text:"Format Painter",tip:"Format Painter: Double click to reuse, press ESC to exit"},heading:{text:"Title {level}",paragraph:"Normal",tip:"Set heading, can generate document map based on headings"},highlight:{text:"Highlight",clear:"Clear Highlight",yellowBg:"Yellow Background",purpleBg:"Purple Background",greenBg:"Green Background",blueBg:"Blue Background",red:"Red Text",green:"Green Text"},indent:"Increase Indent",italic:"Italic",lineHeight:{text:"Line Height",default:" (Default)"},outdent:"Decrease Indent",margin:{text:"Vertical Spacing",top:"Top",bottom:"Bottom",default:"Default",reset:"Auto Spacing"},importWord:{text:"Import Word",loadScript:{title:"Error Message",message:"Loading the transformed script, please try again later."},limitSize:"File size cannot exceed 5MB.",converting:"Converting Word document, please wait...",convertError:"Error parsing Word document",importError:"Error importing Word document"},markdown:{text:"Markdown",enable:"Enable Markdown",disable:"Disable Markdown",message:"This action will reset the editor, and after switching, current history will be lost, unable to undo, etc. Confirm now?",toggle:"Switch Now"},quote:"Quote",redo:"Redo",selectAll:"Select All",strike:"Strikethrough",subscript:"Subscript",superscript:"Superscript",underline:"Underline",undo:"Undo"},kK={audio:"Audio",codeBlock:"Code Block",date:"Chinese Date",emoji:"Emoji",file:"File",hardBreak:"Line Break",hr:{text:"Divider",title:"Divider Style",color:"Divider Color",signle:"Single Line",double:"Double Thin Lines",dotted:"Dotted Line",dashed:"Dashed Line",dashedDouble:"Double Dashed Line",signleBold:"Thick Line",doubleBoldTop:"Thick & Thin Lines (Top)",doubleBoldBottom:"Thin & Thick Lines (Bottom)",wavy:"Wavy Line"},image:"Image",link:{text:"Link",title:"Insert Link",insert:"Insert",hrefText:"Link Text:",hrefTextTip:"Enter or select link text",href:"Link URL:",hrefTip:"Enter the link URL, usually starting with http:// or https://"},math:"Mathematics",symbol:"Symbol",template:"Template",textBox:"Text Box",toc:"Document Map",video:"Video",web:{text:"Web Page",insert:"Insert",title:"Insert Web Page",tip:"Some web pages may not support embedding.",placeholder:"Enter a web address, starting with http:// or https://"}},$K={addColumnAfter:"Insert Column After",addColumnBefore:"Insert Column Before",addRowAfter:"Insert Row Below",addRowBefore:"Insert Row Above",borderColor:"Border Color",cellAlign:{text:"Alignment",tip:"Cell Alignment",lt:"Top Left",ct:"Top Center",rt:"Top Right",jt:"Top Justify",lm:"Middle Left",cm:"Middle Center",rm:"Middle Right",jm:"Middle Justify",lb:"Bottom Left",cb:"Bottom Center",rb:"Bottom Right",jb:"Bottom Justify"},cellBgColor:{text:"Background",tip:"Cell Background Color"},deleteColumn:{text:"Delete Column",title:"Delete Table Column",message:"This operation will delete the selected table column. Continue?",delete:"Delete Now",success:"Deleted Successfully"},deleteRow:{text:"Delete Row",title:"Delete Table Row",message:"This operation will delete the selected table row. Continue?",delete:"Delete Now",success:"Deleted Successfully"},delete:{text:"Delete Table",title:"Delete Current Table",message:"This operation will delete the selected table. Continue?",delete:"Delete Now",success:"Deleted Successfully"},fix:{text:"Fix Table",tip:"Click to automatically fix table when it's disordered"},insert:{text:"Insert Table",tip:"Insert New Table",property:"Table Properties",withHeader:"Include Header",rows:"Number of Rows:",cols:"Number of Columns:",create:"Create Table"},mergeCells:"Merge Cells",nextCell:"Next Cell",prevCell:"Previous Cell",splitCell:"Split Cell",toggleHeaderCell:"Header Cell",toggleHeaderRow:"Header Row",toggleHeaderColumn:"Header Column"},SK={barcode:{text:"Barcode",edit:"Edit Barcode",title:"Barcode",format:"Format",font:"Font Style",lineColor:"Barcode & Text Color",bgColor:"Barcode Background Color",more:"More",width:"Width:",height:"Height:",margin:"Margin:",displayValue:"Display Text",displayValueText:"Show Text",textContent:"Text Content:",textContentTip:"Overrides barcode content text",textPosition:"Text Position:",top:"Top",bottom:"Bottom",textMargin:"Vertical Distance:",fontSize:"Font Size:",placeholder:"Enter content to convert into barcode",error:"Your input may not comply with the current barcode standard constraints, please check.",preview:"Preview",renderError:"No preview available",notEmpty:"Barcode content cannot be empty"},chineseCase:{text:"Chinese Case",tip:"Chinese Case Conversion"},diagrams:{text:"Diagram",edit:"Edit Diagram",loading:"Loading..."},mermaid:{text:"Mermaid",edit:"Edit Mermaid",placeholder:"Enter Mermaid code",preview:"Preview",notEmpty:"Mermaid content cannot be empty"},mindMap:"Mind Map",qrcode:{text:"QR Code",edit:"Edit QR Code",level:"QR Code Error Correction Level",levelL:"Low",levelM:"Medium",levelQ:"Quartile",levelH:"High",padding:"padding:",paddingTip:"white space padding",width:"Size:",widthTip:"QR Code size in pixels",color:"QR Code Color",bgColor:"Color of background",placeholder:"Enter content to convert into QR Code",preview:"Preview",renderError:"QR Code generation failed",notEmpty:"QR Code content cannot be empty"},seal:{text:"Official Seal",title:"Insert Official Seal",insert:"Insert",tip:"Select a photocopy or photo of a solid-color background seal; it will be automatically extracted. All operations are completed locally without sending data to the server, so feel free to use.",insertTip:"Click here to select seal image",converting1:"Loading component...",converting2:"Loading component: {percentage}%",converting3:"Extracting image, please wait...",convertError:"Electronic seal extraction failed, please retry",notEmpty:"Please select a seal"},signature:{text:"E-Signature",title:"Insert Electronic Signature",clear:"Clear",lineWidth:"Pen Thickness",tip:"Please sign in the this area",notEmpty:"No signature detected"}},xK={bg:{text:"Background",custom:"Custom Page Background",default:"Default",color1:`Eye-friendly
Green`,color2:`Elegant
Yellow`,color3:`Cloudy
Blue`,color4:"Sky Blue",color5:`Dark Night
Black`},break:"Page Break",footer:{show:"Show Footer",hide:"Hide Footer"},header:{show:"Show Header",hide:"Hide Header"},lineNumber:"Line Numbers",margin:"Margins",orientation:{text:"Orientation",landscape:"Landscape",portrait:"Portrait"},preview:"Presentation",size:{text:"Size",cm:"CM",custom:"Custom Settings"},watermark:{text:"Watermark",fontFamily:"Watermark Font",fontSize:"Watermark Size",fontColor:"Watermark Color",content:"Watermark Text",type:"Watermark Style",compact:"Compact",spacious:"Spacious",clear:"Remove Watermark"}},OK={bullet:{text:"Bulleted List",disc:"Filled Circle",circle:"Open Circle",square:"Filled Square"},ordered:{text:"Numbered List",property:"List Properties",startAt:"Starting Number:",decimal:"Numbers",decimalLeadingZero:"Numbers with Leading Zero",lowerRoman:"Lowercase Roman Numerals",upperRoman:"Uppercase Roman Numerals",lowerLatin:"Lowercase Alphabet",upperLatin:"Uppercase Alphabet",tradChineseInformal:"Traditional Chinese Counting",simpChineseFormal:"Formal Uppercase Chinese Counting"},task:{text:"To-Do List",split:"Add Task",sink:"Convert to Sub-task",lift:"Remove as Task"}},EK={default:"Default Color",standard:"Standard Colors",recent:"Recently Used",more:"More Colors"},AK={insert:"Insert Content",select:"Insert Node",template:"Insert Template",toogleNode:"Switch Block Type",common:"Common actions",clearFormat:"Clear formatting",duplicate:"Duplicate",copy:"Copy",cut:"Cut",delete:"Delete"},TK={code:{copy:{text:"Copy Code",success:"Code copied to clipboard"},languages:"Languages",lineNumbers:"Show Line Numbers",themes:{text:"Theme",light:"Light Theme",dark:"Dark Theme"},wordWrap:"Word Wrap"},delete:"Delete",file:{download:"Download File"},image:{open:"Open in a new window",draggable:"Image Floating",flipX:"Flip Horizontally",flipY:"Flip Vertically",preview:"Preview Image",proportion:"Lock Image Aspect Ratio",removeBg:"Remove Image Background",removingBg:"Removing Image Background...",reset:"Reset Image Position",rotateCC:"Rotate Counter-Clockwise 90",rotateC:"Rotate Clockwise 90"}},PK={text:"AI Assistant",placeholder:"Enter or select a command...",send:"Send",exit:"Exit AI Assistant",commands:"Common Commands:",result:"AI Generation Result:",replace:"Replace",insertAfter:"Insert After",insertBelow:"Insert Below",copy:"Copy Generated Result",copySuccess:"Result copied to clipboard",rewrite:"Rewrite",delete:"Delete Result",error:{title:"Error Message",message:"An error occurred with the AI Document Assistant result. Please try again!"}},MK={text:"Comment"},IK={title:"Page Settings",size:{text:"Page Size",width:"Width:",height:"Height:",custom:"Custom"},margin:{text:"Page Margins",default:"Default",narrow:"Narrow",moderate:"Moderate",wide:"Wide",top:"Top:",right:"Right:",bottom:"Bottom:",left:"Left:"}},NK={loading:"Loading Source Editor..."},jK={untitled:"Untitled Document"},DK={text:"Search",title:"Search and Replace",searchText:"Search...",replaceText:"Replace...",caseSensitive:"Case Sensitive",search:"Search",replace:"Replace",replaceAll:"Replace All"},BK={title:"Document Map",show:"Document Map",hide:"Hide Document Map",empty:"No Document Map Available"},FK={enable:"Enable Spell Check",disable:"Disable Spell Check"},LK={title:"Page Break",disable:"Exit Page Break",toggle:"Double Click to Switch Paging"},RK={title:"Keyboard Shortcuts",text:"Text",commonlyUsed:"Common",copy:"Copy",paste:"Paste",pasteAsText:"Paste as Plain Text",paragraph:"Insert New Paragraph",hardBreak:"Line Break",format:"Text",page:"Page",pageZoomIn:"Zoom In",pageZoomOut:"Zoom Out",pageZoomReset:"Reset Zoom to Default",pageAutoWidth:"Fit to Best Width",markdown:"Markdown"},zK={title:"Switch Language",message:"After changing the language, the page will refresh. Please save your document content first. Are you sure you want to switch now?",confirm:"Switch Now"},VK={title:"Reset Editor",message:"This action will clear all editor settings and current content, and refresh the page. It's recommended to save your content before resetting. Are you sure you want to reset now?",reset:"Reset Now"},HK="Feedback",UK="Powered by Umo Editor",KK={characters:"Characters",title:"Document Statistics",input:"Characters Typed",selection:"Selected Characters",limit:"Character Limit",currentPage:"Current Page",totalPage:"Total Pages"},WK={title:"Presentation",disable:"Exit Presentation",laserPointer:"Laser Pointer",exit:"Exit"},GK={title:"Fullscreen",disable:"Exit Fullscreen"},qK={zoomIn:"Zoom In",zoomOut:"Zoom Out",level:"Zoom Level: ",autoWidth:"Best Fit Width",autoWidthError:"Error calculating automatic page width",reset:"Back to 100%"},YK={codeBlock:{menu:"Menu"},image:{loading:"Loading image...",error:"Image load failed"},textBox:{tip:"Double-click to edit"}},ZK={uploading:"Uploading file...",download:"Download File",limit:'File "{filename}" exceeds the limit of {size}MB',notAllow:{title:"Error Message",message:"Insertion of this file type is not allowed in the current document."}},XK={text:"Save",saved:"Saved",unsaved:"Unsaved",network:"Network Status:",online:"Online",offline:"Offline",saving:"Saving document...",savedAt:"Saved at:",savedAtText:"Saved at {time}",failed:"Failed to save document",success:"Document saved successfully",error:"Error saving document",cache:{text:"Restore from Cache",error:{title:"Error Message",message:"There is no content in the cache!"}}},JK={text:"Print",title:"Print Document",message:"Before printing the document, please ensure that all images on the pages have finished loading. If node backgrounds are not displayed, please check the 'Background graphics' option in the print dialog box.",confirm:"Print Now"},QK={justNow:"Just now",past:"{n} ago",yesterday:"Yesterday",day:"{n} days",hour:"{n} hours",minute:"{n} minutes",second:"{n} seconds"},eW={cancel:"Cancel"},tW={toolbar:wK,base:CK,insert:kK,table:$K,tools:SK,page:xK,export:{embed:{text:"Embed",title:"Embed Code",tip:"After copying, manually adjust the iframe width and height for optimal viewing.",copy:"Copy",copied:"Code copied to clipboard"},image:{text:"Image",jpg:"JPG",png:"PNG",error:{title:"Error Message",message:"Failed to export image, please try again or refresh the page."}},share:{text:"Share",tip:"Copy the link and send it to those you want to share with.",copy:"Copy Link",copied:"Link copied to clipboard"},pdf:{text:"PDF Document",title:"Export PDF Document",message:"Before exporting the PDF document, make sure that all images on the pages have finished loading. Then, in the print dialog box that appears, select 'Printer - Save as PDF', and click 'Save' button to save the document. If node backgrounds are not displayed, please check the 'Background graphics' option in the print dialog box.",confirm:"I Understand"},text:"Text"},list:OK,colorPicker:EK,blockMenu:AK,bubbleMenu:TK,assistant:PK,comment:MK,pageOptions:IK,source:NK,document:jK,search:DK,toc:BK,spellcheck:FK,pagination:LK,shortcut:RK,changeLocale:zK,resetAll:VK,feedback:HK,poweredBy:UK,wordCount:KK,preview:WK,fullscreen:GK,zoom:qK,node:YK,file:ZK,save:XK,print:JK,time:QK,dialog:eW},to={editorKey:"default",locale:"zh-CN",theme:"light",height:"100%",dicts:{fonts:[{label:{en_US:"Default Font",zh_CN:""},value:null},{label:{en_US:"Songti",zh_CN:""},value:"SimSun"},{label:{en_US:"Heiti",zh_CN:""},value:"SimHei"},{label:{en_US:"Kaiti",zh_CN:""},value:"KaiTi"},{label:{en_US:"Kaiti GB2312",zh_CN:"_GB2312"},value:"KaiTi_GB2312"},{label:{en_US:"Fangsong",zh_CN:""},value:"FangSong"},{label:{en_US:"Fangsong GB2312",zh_CN:"_GB2312"},value:"FangSong_GB2312"},{label:{en_US:"STSong",zh_CN:""},value:"STSong"},{label:{en_US:"STFangsong",zh_CN:""},value:"STFangsong"},{label:{en_US:"FZ Fangsong Simplified",zh_CN:""},value:"FZFangSong-Z02S"},{label:{en_US:"FZ Xiaobiao Song",zh_CN:""},value:"FZXiaoBiaoSong-B05S"},{label:{en_US:"Microsoft Yahei",zh_CN:""},value:"Microsoft Yahei"},{label:"Arial",value:"Arial"},{label:"Times New Roman",value:"Times New Roman"},{label:"Verdana",value:"Verdana"},{label:"Helvetica",value:"Helvetica"},{label:"Calibri",value:"Calibri"},{label:"Cambria",value:"Cambria"},{label:"Tahoma",value:"Tahoma"},{label:"Georgia",value:"Georgia"},{label:"Comic Sans MS",value:"Comic Sans MS"},{label:"Impact",value:"Impact"}],colors:["#FFF","#000","#4A5366","#3B74EC","#45A2EF","#529867","#CD4A3F","#EA8D40","#EEC543","#8E45D0","#F2F2F2","#7F7F7F","#F4F5F7","#CBDCFC","#E8F6FE","#EDFAF2","#FCEAE9","#FDF3EC","#FEF9E5","#FAECFE","#EEE","#595959","#C6CAD2","#CEEBFD","#CBDCFC","#CBE9D7","#F7CBC9","#FADDC7","#FDEEB5","#EBCAFC","#BFBFBF","#3F3F3F","#828B9D","#A0BEFA","#A7DCFC","#A6D5B8","#F2A19C","#F5BC8C","#FBE281","#CB94F9","#A5A5A5","#262626","#363B44","#2452B2","#3473A1","#417A53","#922B22","#AD642A","#9E8329","#57297D","#939393","#0D0D0D","#25272E","#15316A","#1C415A","#284D34","#511712","#573213","#635217","#36194E"],lineHeights:[{label:{en_US:"Single",zh_CN:""},value:1},{label:{en_US:"1.5 Line Spacing",zh_CN:"1.5 "},value:1.5,default:!0},{label:{en_US:"Double",zh_CN:"2 "},value:2},{label:{en_US:"2.5 Line Spacing",zh_CN:"2.5 "},value:2.5},{label:{en_US:"Triple",zh_CN:"3 "},value:3}],symbols:[{label:{en_US:"Plain Text",zh_CN:""},items:""},{label:{en_US:"Currency Symbols",zh_CN:""},items:"$"},{label:{en_US:"Mathematical Symbols",zh_CN:""},items:"<>"},{label:{en_US:"Arrows",zh_CN:""},items:""},{label:{en_US:"Latin Script",zh_CN:""},items:""}],emojis:[{label:{en_US:"Emotions & People",zh_CN:""},items:"                                                                                                                                                                 "},{label:{en_US:"Animals & Nature",zh_CN:""},items:"                                                                                                                                               "},{label:{en_US:"Food & Drink",zh_CN:""},items:"                                                                                                        "},{label:{en_US:"Activities",zh_CN:""},items:"                                                                   "},{label:{en_US:"Travel & Places",zh_CN:""},items:"                                                                                                                                                 "},{label:{en_US:"Objects",zh_CN:""},items:"                                                                                                                                         "},{label:{en_US:"Symbols",zh_CN:""},items:"         # * 0 1 2 3 4 5 6 7 8 9                                                           "},{label:{en_US:"Flags",zh_CN:""},items:"                                                                                                                                                                          "}],pageSizes:[{label:"A4",width:21,height:29.4,default:!0},{label:"A3",width:29.7,height:42},{label:"A5",width:14.8,height:21},{label:"B5",width:17.6,height:25},{label:{en_US:"No. 5 Envelope",zh_CN:"5"},width:10.9,height:12.9},{label:{en_US:"No. 6 Envelope",zh_CN:"6"},width:11.9,height:22.9},{label:{en_US:"No. 7 Envelope",zh_CN:"7"},width:16.1,height:22.8},{label:{en_US:"No. 9 Envelope",zh_CN:"9"},width:22.8,height:32.3},{label:{en_US:"Legal Paper",zh_CN:""},width:21.5,height:33.5},{label:{en_US:"Letter Paper",zh_CN:""},width:21.5,height:27.9}]},toolbar:{defaultMode:"ribbon",enableSourceEditor:!1,menus:["base","insert","table","tools","page","export"],disableMenuItems:[],importWord:{enabled:!0,options:{},useCustomMethod:!1}},page:{defaultMargin:{left:3.18,right:3.18,top:2.54,bottom:2.54},defaultOrientation:"portrait",defaultBackground:"#fff",watermark:{type:"compact",alpha:.2,fontColor:"#000",fontSize:16,fontFamily:"SimSun",fontWeight:"normal",text:""},nodesComputedOption:{types:[],nodesComputed:{}}},document:{title:"",content:"",placeholder:{en_US:"Please enter the document content...",zh_CN:"..."},enableSpellcheck:!0,enableMarkdown:!0,enableBubbleMenu:!0,enableBlockMenu:!0,enableComment:!1,readOnly:!1,autofocus:!0,characterLimit:0,typographyRules:{},editorProps:{},parseOptions:{preserveWhitespace:"full"},autoSave:{enabled:!0,interval:3e5}},assistant:{enabled:!1,maxlength:100,commands:[{label:{en_US:"Continuation",zh_CN:""},value:{en_US:"Continuation",zh_CN:""}},{label:{en_US:"Rewrite",zh_CN:""},value:{en_US:"Rewrite",zh_CN:""}},{label:{en_US:"Abbreviation",zh_CN:""},value:{en_US:"Abbreviation",zh_CN:""}},{label:{en_US:"Expansion",zh_CN:""},value:{en_US:"Expansion",zh_CN:""}},{label:{en_US:"Polish",zh_CN:""},value:{en_US:"Polish",zh_CN:""}},{label:{en_US:"Proofread",zh_CN:""},value:{en_US:"Proofread",zh_CN:""}},{label:{en_US:"Translate",zh_CN:""},value:{en_US:"Translate to chinese",zh_CN:""},autoSend:!1}]},templates:[],cdnUrl:"https://unpkg.com/@umoteam/editor-external@latest",shareUrl:(location==null?void 0:location.href)||"",diagrams:{domain:"https://embed.diagrams.net",params:{}},file:{allowedMimeTypes:[],maxSize:1024*1024*100},user:{},extensions:[],translations:{en_US:{},zh_CN:{}},async onSave(s,l,c){throw new Error('Key "onSave": Please set the save method')},async onFileUpload(s){throw s?new Error('Key "onFileUpload": Please set the upload method'):new Error("File not found")},onFileDelete(s,l){console.error("The file has been deleted. Please configure the onFileDelete to completely delete the file from the server.")},async onAssistant(s,l){throw new Error('Key "onAssistant": Please set the onAssistant method')},async onCustomImportWordMethod(s){throw new Error('Key "onCustomImportWordMethod": Please set the onAssistant method')}},nW=Object.keys(to),gl=s=>{if(typeof s=="number")return isFinite(s);if(typeof s=="string"){const l=parseFloat(s);return!isNaN(l)&&isFinite(l)&&s===l.toString()}return!1},Yr=s=>{if(typeof s=="string"&&s.length>0)return!0;if(typeof s=="object"&&s!==null){for(let l in s)if(!["en_US","zh_CN"].includes(l))return!1;return!0}return!1},bl=s=>s.constructor.name==="AsyncFunction"||Promise.resolve(s)instanceof Promise,rW=new ObjectSchema({editorKey:{merge:"replace",validate:"string!",required:!1},locale:{merge:"replace",validate(s){if(s&&!["en-US","zh-CN"].includes(s))throw new Error('Key "locale": must be one of "en-US" or "zh-CN".')},required:!1},theme:{merge:"replace",validate(s){if(s&&!["dark","light","auto"].includes(s))throw new Error('Key "theme": must be one of "dark", "light" or "auto".')},required:!1},height:{merge:"replace",validate:"string!",required:!1},dicts:{required:!1,merge:"replace",validate:"object",schema:{fonts:{merge:"replace",validate(s){if(s&&!Array.isArray(s))throw new Error('Key "dicts": Key "fonts" must be a array.');s.forEach(l=>{if(!l.label||!l.value&&l.value!==null)throw new Error('Key "dicts": Key "fonts" must be a array of objects with "label" and "value" properties.')})},required:!1},colors:{merge:"replace",validate:"array",required:!1},lineHeights:{merge:"replace",validate(s){if(s&&!Array.isArray(s))throw new Error('Key "dicts": Key "lineHeights": must be a array.');if(!s.find(l=>l.default))throw new Error('Key "dicts": Key "lineHeights": please set a default value.');s.forEach((l,c)=>{if(!l.label||!l.value&&l.value!==null)throw new Error(`Key "dicts": Key "lineHeights[${c}]": must be a array of objects with "label" and "value" properties.`);if(!Yr(l.label))throw new Error(`Key "dicts": Key "lineHeights[${c}]": Key "label" must be string, or a object with "en_US" and "zh_CN" properties.`)})},required:!1},symbols:{merge:"replace",validate(s){if(s&&!Array.isArray(s))throw new Error('Key "dicts": Key "symbols" must be a array.');s.forEach((l,c)=>{if(!l.label||typeof l.items!="string")throw new Error(`Key "dicts": Key "symbols[${c}]": must be a array of objects with "label" and "items" properties.`);if(!Yr(l.label))throw new Error(`Key "dicts": Key "symbols[${c}]": Key "label" must be string, or a object with "en_US" and "zh_CN" properties.`)})},required:!1},emojis:{merge:"replace",validate(s){if(s&&!Array.isArray(s))throw new Error('Key "dicts": Key "emojis" must be a array.');s.forEach((l,c)=>{if(!l.label||typeof l.items!="string")throw new Error(`Key "dicts": Key "emojis[${c}]": must be a array of objects with "label" and "value" properties.`);if(!Yr(l.label))throw new Error(`Key "dicts": Key "emojis[${c}]": Key "label" must be string, or a object with "en_US" and "zh_CN" properties.`)})},required:!1},pageSizes:{merge:"replace",validate(s){if(s&&!Array.isArray(s))throw new Error('Key "dicts": Key "pageSizes": must be a array.');if(!s.find(l=>l.default))throw new Error('Key "dicts": Key "pageSizes": please set a default value.');s.forEach((l,c)=>{if(!l.label||l.label==="")throw new Error(`Key "dicts": Key "pageSizes[${c}]" Key: "label" cannot be empty.`);if(!Yr(l.label))throw new Error(`Key "dicts": Key "pageSizes[${c}]": Key "label" must be string, or a object with "en_US" and "zh_CN" properties.`);if(!gl(l.width))throw new Error(`Key "dicts": Key "pageSizes[${c}]" Key: "width" must be a number.`);if(!gl(l.height))throw new Error(`Key "dicts": Key "pageSizes[${c}]" Key: "height" must be a number.`)})},required:!1}}},toolbar:{required:!1,merge:"replace",validate:"object",schema:{defaultMode:{merge:"replace",validate(s){if(s&&!["classic","ribbon"].includes(s))throw new Error('Key "toolbar": Key "defaultMode" must be one of "classic" or "ribbon".')},required:!1},enableSourceEditor:{merge:"replace",validate:"boolean",required:!1},menus:{merge:"replace",validate(s){var l;const c=(l=to==null?void 0:to.toolbar)==null?void 0:l.menus;if(s&&!Array.isArray(s))throw new Error('Key "toolbar": Key "menus" must be a array.');if(!s.includes("base"))throw new Error('Key "toolbar": Key "menus" should at least contain "base".');if(!s.every(d=>c==null?void 0:c.includes(d)))throw new Error(`Key "toolbar": Key "menus" the array items of toolbar.menus must contain only one or multiple of ${JSON.stringify(c)}.`)},required:!1},disableMenuItems:{merge:"replace",validate(s){if(s&&!Array.isArray(s))throw new Error('Key "toolbar": Key "disableMenuItems" must be a array.')},required:!1},importWord:{merge:"replace",validate:"object",required:!1}}},page:{merge:"replace",validate:"object",required:!1,schema:{defaultMargin:{required:!1,merge:"replace",validate:"object",schema:{left:{merge:"replace",validate:"number",required:!1},right:{merge:"replace",validate:"number",required:!1},top:{merge:"replace",validate:"number",required:!1},bottom:{merge:"replace",validate:"number",required:!1}}},defaultOrientation:{merge:"replace",validate(s){if(s&&!["portrait","landscape"].includes(s))throw new Error('Key "page": Key "defaultOrientation" must be one of "portrait" or "landscape".')},required:!1},defaultBackground:{merge:"replace",validate:"string",required:!1},watermark:{required:!1,merge:"replace",validate:"object",schema:{type:{merge:"replace",validate(s){if(s&&!["compact","spacious"].includes(s))throw new Error('Key "watermark": Key "type" must be one of "compact" or "spacious".')},required:!1},alpha:{merge:"replace",validate:"number",required:!1},fontColor:{merge:"replace",validate:"string",required:!1},fontFamily:{merge:"replace",validate(s){if(s!==null&&typeof s!="string")throw new Error('Key "watermark": Key "fontFamily" must be a string.')},required:!1},fontSize:{merge:"replace",validate:"number",required:!1},fontWeight:{merge:"replace",validate:"string",required:!1},text:{merge:"replace",validate:"string",required:!1}}},nodesComputedOption:{merge:"replace",validate:"object",required:!1,schema:{types:{merge:"replace",validate(s){},required:!1},nodesComputed:{merge:"replace",validate(s){},required:!1}}}}},document:{merge:"replace",validate:"object",required:!1,schema:{title:{merge:"replace",validate:"string",required:!1},content:{merge:"replace",validate(){},required:!1},placeholder:{merge:"replace",validate(s){if(!Yr(s))throw new Error('Key "document": Key "title": Key "label" must be string, or a object with "en_US" and "zh_CN" properties.')},required:!1},enableSpellcheck:{merge:"replace",validate:"boolean",required:!1},enableMarkdown:{merge:"replace",validate:"boolean",required:!1},enableBubbleMenu:{merge:"replace",validate:"boolean",required:!1},enableBlockMenu:{merge:"replace",validate:"boolean",required:!1},enableComment:{merge:"replace",validate:"boolean",required:!1},readOnly:{merge:"replace",validate:"boolean",required:!1},autofocus:{merge:"replace",validate(s){if(!["start","end","all",!0,!1,null].includes(s)&&!gl(s))throw new Error('Key "document": Key "autofocus" must be one of "start", "end", "all", Number, true, false, null.')},required:!1},characterLimit:{merge:"replace",validate:"number",required:!1},typographyRules:{merge:"replace",validate:"object",required:!1},editorProps:{merge:"replace",validate:"object",required:!1},parseOptions:{merge:"replace",validate:"object",required:!1},autoSave:{required:!1,merge:"replace",validate:"object",schema:{enabled:{merge:"replace",validate:"boolean",required:!1},interval:{merge:"replace",validate:"number",required:!1}}}}},assistant:{merge:"replace",validate:"object",required:!1,schema:{enabled:{merge:"replace",validate:"boolean",required:!1},maxlength:{merge:"replace",validate(s){if(!gl(s)||!Number.isInteger(s)||s<=0)throw new Error('Key "assistant": Key "maxlength" must be a number.')},required:!1},commands:{merge:"replace",validate(s){if(s&&!Array.isArray(s))throw new Error('Key "assistant": Key "commands" must be a array.');s.forEach((l,c)=>{if(!l.label||!l.value)throw new Error('Key "assistant": Key "commands" must be a array of objects with "label" and "value" properties.');if(!Yr(l.label))throw new Error(`Key "assistant": Key "commands[${c}]": Key "label" must be string, or a object with "en_US" and "zh_CN" properties.`);if(!Yr(l.value))throw new Error(`Key "assistant": Key "commands[${c}]": Key "value" must be string, or a object with "en_US" and "zh_CN" properties.`)})},required:!1}}},shareUrl:{merge:"replace",validate:"string",required:!1},templates:{merge:"replace",validate(s){if(s&&!Array.isArray(s))throw new Error('Key "templates": Key "menus" must be a array.');s.forEach((l,c)=>{if(!l.title||l.title==="")throw new Error(`Key "templates[${c}]": Key "title" cannot be empty.`);if(!l.content||l.content==="")throw new Error(`Key "templates[${c}]": Key "content" cannot be empty.`)})},required:!1},cdnUrl:{merge:"replace",validate:"string",required:!1},diagrams:{merge:"assign",validate:"object",required:!1},file:{required:!1,merge:"replace",validate:"object",schema:{allowedMimeTypes:{merge:"replace",validate:"array",required:!1},maxSize:{merge:"replace",validate:"number",required:!1}}},user:{merge:"assign",validate:"object",required:!1},extensions:{merge:"replace",validate:"array",required:!1},translations:{merge:"replace",validate:"object",required:!1},onSave:{merge:"replace",validate(s){if(!bl(s))throw new Error('Key "onSave" must be a async function.')},required:!1},onFileUpload:{merge:"replace",validate(s){if(!bl(s))throw new Error('Key "onFileUpload" must be a async function.')},required:!1},onFileDelete:{merge:"replace",validate(s){if(typeof s!="function"&&s.constructor.name!=="AsyncFunction")throw new Error('Key "onFileDelete" must be a function.')},required:!1},onAssistant:{merge:"replace",validate(s){if(!bl(s))throw new Error('Key "onAssistant" must be a async function.')},required:!1},onCustomImportWordMethod:{merge:"replace",validate(s){if(!bl(s))throw new Error('Key "onCustomImportWordMethod" must be a async function.')},required:!1}}),fa=(s=8)=>Math.random().toString(36).substring(2,s+2);var ht;(function(s){s.Attribute="attribute",s.Pseudo="pseudo",s.PseudoElement="pseudo-element",s.Tag="tag",s.Universal="universal",s.Adjacent="adjacent",s.Child="child",s.Descendant="descendant",s.Parent="parent",s.Sibling="sibling",s.ColumnCombinator="column-combinator"})(ht||(ht={}));var Cn;(function(s){s.Any="any",s.Element="element",s.End="end",s.Equals="equals",s.Exists="exists",s.Hyphen="hyphen",s.Not="not",s.Start="start"})(Cn||(Cn={}));const Yb=/^[^\\#]?(?:\\(?:[\da-f]{1,6}\s?|.)|[\w\-\u00b0-\uFFFF])+/,aW=/\\([\da-f]{1,6}\s?|(\s)|.)/gi,oW=new Map([[126,Cn.Element],[94,Cn.Start],[36,Cn.End],[42,Cn.Any],[33,Cn.Not],[124,Cn.Hyphen]]),iW=new Set(["has","not","matches","is","where","host","host-context"]);function lW(s){switch(s.type){case ht.Adjacent:case ht.Child:case ht.Descendant:case ht.Parent:case ht.Sibling:case ht.ColumnCombinator:return!0;default:return!1}}const sW=new Set(["contains","icontains"]);function uW(s,l,c){const d=parseInt(l,16)-65536;return d!==d||c?l:d<0?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,d&1023|56320)}function Go(s){return s.replace(aW,uW)}function Uc(s){return s===39||s===34}function Zb(s){return s===32||s===9||s===10||s===12||s===13}function cW(s){const l=[],c=uC(l,`${s}`,0);if(c<s.length)throw new Error(`Unmatched selector: ${s.slice(c)}`);return l}function uC(s,l,c){let d=[];function f(E){const N=l.slice(c+E).match(Yb);if(!N)throw new Error(`Expected name, found ${l.slice(c)}`);const[W]=N;return c+=E+W.length,Go(W)}function g(E){for(c+=E;c<l.length&&Zb(l.charCodeAt(c));)c++}function v(){c+=1;const E=c;let N=1;for(;N>0&&c<l.length;c++)l.charCodeAt(c)===40&&!b(c)?N++:l.charCodeAt(c)===41&&!b(c)&&N--;if(N)throw new Error("Parenthesis not matched");return Go(l.slice(E,c-1))}function b(E){let N=0;for(;l.charCodeAt(--E)===92;)N++;return(N&1)===1}function $(){if(d.length>0&&lW(d[d.length-1]))throw new Error("Did not expect successive traversals.")}function y(E){if(d.length>0&&d[d.length-1].type===ht.Descendant){d[d.length-1].type=E;return}$(),d.push({type:E})}function x(E,N){d.push({type:ht.Attribute,name:E,action:N,value:f(1),namespace:null,ignoreCase:"quirks"})}function C(){if(d.length&&d[d.length-1].type===ht.Descendant&&d.pop(),d.length===0)throw new Error("Empty sub-selector");s.push(d)}if(g(0),l.length===c)return c;e:for(;c<l.length;){const E=l.charCodeAt(c);switch(E){case 32:case 9:case 10:case 12:case 13:{(d.length===0||d[0].type!==ht.Descendant)&&($(),d.push({type:ht.Descendant})),g(1);break}case 62:{y(ht.Child),g(1);break}case 60:{y(ht.Parent),g(1);break}case 126:{y(ht.Sibling),g(1);break}case 43:{y(ht.Adjacent),g(1);break}case 46:{x("class",Cn.Element);break}case 35:{x("id",Cn.Equals);break}case 91:{g(1);let N,W=null;l.charCodeAt(c)===124?N=f(1):l.startsWith("*|",c)?(W="*",N=f(2)):(N=f(0),l.charCodeAt(c)===124&&l.charCodeAt(c+1)!==61&&(W=N,N=f(1))),g(0);let q=Cn.Exists;const Y=oW.get(l.charCodeAt(c));if(Y){if(q=Y,l.charCodeAt(c+1)!==61)throw new Error("Expected `=`");g(2)}else l.charCodeAt(c)===61&&(q=Cn.Equals,g(1));let re="",se=null;if(q!=="exists"){if(Uc(l.charCodeAt(c))){const ge=l.charCodeAt(c);let Se=c+1;for(;Se<l.length&&(l.charCodeAt(Se)!==ge||b(Se));)Se+=1;if(l.charCodeAt(Se)!==ge)throw new Error("Attribute value didn't end");re=Go(l.slice(c+1,Se)),c=Se+1}else{const ge=c;for(;c<l.length&&(!Zb(l.charCodeAt(c))&&l.charCodeAt(c)!==93||b(c));)c+=1;re=Go(l.slice(ge,c))}g(0);const he=l.charCodeAt(c)|32;he===115?(se=!1,g(1)):he===105&&(se=!0,g(1))}if(l.charCodeAt(c)!==93)throw new Error("Attribute selector didn't terminate");c+=1;const de={type:ht.Attribute,name:N,action:q,value:re,namespace:W,ignoreCase:se};d.push(de);break}case 58:{if(l.charCodeAt(c+1)===58){d.push({type:ht.PseudoElement,name:f(2).toLowerCase(),data:l.charCodeAt(c)===40?v():null});continue}const N=f(1).toLowerCase();let W=null;if(l.charCodeAt(c)===40)if(iW.has(N)){if(Uc(l.charCodeAt(c+1)))throw new Error(`Pseudo-selector ${N} cannot be quoted`);if(W=[],c=uC(W,l,c+1),l.charCodeAt(c)!==41)throw new Error(`Missing closing parenthesis in :${N} (${l})`);c+=1}else{if(W=v(),sW.has(N)){const q=W.charCodeAt(0);q===W.charCodeAt(W.length-1)&&Uc(q)&&(W=W.slice(1,-1))}W=Go(W)}d.push({type:ht.Pseudo,name:N,data:W});break}case 44:{C(),d=[],g(1);break}default:{if(l.startsWith("/*",c)){const q=l.indexOf("*/",c+2);if(q<0)throw new Error("Comment was not terminated");c=q+2,d.length===0&&g(0);break}let N=null,W;if(E===42)c+=1,W="*";else if(E===124){if(W="",l.charCodeAt(c+1)===124){y(ht.ColumnCombinator),g(2);break}}else if(Yb.test(l.slice(c)))W=f(0);else break e;l.charCodeAt(c)===124&&l.charCodeAt(c+1)!==124&&(N=W,l.charCodeAt(c+1)===42?(W="*",c+=2):W=f(1)),d.push(W==="*"?{type:ht.Universal,namespace:N}:{type:ht.Tag,name:W,namespace:N})}}}return C(),c}function dW(s,l,c,d){if(typeof l=="function")return l({props:{...c,children:d},attrs:c,children:d,h:s.h,context:s});{let f=!0,g;if(l?l.toLowerCase()==="fragment"?(g=s.document.createDocumentFragment(),f=!1):g=s.document.createElement(l):g=s.document.createElement("div"),c&&f){const v=g;for(let[b,$]of Object.entries(c)){b=b.toString();const y=b.toLowerCase();y==="classname"?v.className=$:y==="on"?Object.entries($).forEach(([x,C])=>{v.setAttribute(`on${x}`,String(C))}):$!==!1&&$!=null&&($===!0?v.setAttribute(b,b):v.setAttribute(b,$.toString()))}}if(d)for(const v of d){const b=Array.isArray(v)?[...v]:[v];for(const $ of b)$&&$!==!1&&$!=null&&(typeof $!="object"?g.appendChild(s.document.createTextNode($.toString())):g.appendChild($))}return g}}function cC(s,l,...c){return typeof s=="object"&&(s="fragment",c=s.children,l=s.attrs),Array.isArray(l)?(c=[l],l={}):l?l.attrs&&(l={...l.attrs,...l},delete l.attrs):l={},{tag:s,attrs:l,children:typeof c[0]=="string"?c:c.flat(Number.POSITIVE_INFINITY)}}function fW(s){return s.h=function(l,c,...d){const{tag:f,attrs:g,children:v}=cC(l,c,d);return dW(s,f,g,v)},s.h}function Jd(s){return s.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&apos;").replace(/"/g,"&quot;").replace(/\xA0/g,"&nbsp;").replace(/\xAD/g,"&shy;")}var Xb={};function vW(s){let l=Xb[s];return l==null&&(l=cW(s),Xb[s]=l),l}function pW(s,l,{debug:c=!1}={}){for(const d of vW(s)){const f=(g,v)=>{var b,$,y,x;let C=!1;for(const E of v){const{type:N,name:W,action:q,value:Y,_ignoreCase:re=!0,data:se}=E;if(N==="attribute")q==="equals"?C=g.getAttribute(W)===Y:q==="start"?C=!!((b=g.getAttribute(W))!=null&&b.startsWith(Y)):q==="end"?C=!!(($=g.getAttribute(W))!=null&&$.endsWith(Y)):q==="element"?W==="class"?C=g.classList.contains(Y):C=!!((y=g.getAttribute(W))!=null&&y.includes(Y)):q==="exists"?C=g.hasAttribute(W):q==="any"?C=!!((x=g.getAttribute(W))!=null&&x.includes(Y)):console.warn("Unknown CSS selector action",q);else if(N==="tag")C=g.tagName===W.toUpperCase();else if(N==="universal")C=!0;else if(N==="pseudo"){if(W==="not"){let de=!0;se.forEach(he=>{f(g,he)||(de=!1)}),C=!de}}else console.warn("Unknown CSS selector type",N,s,v);if(!C)break}return C};if(f(l,d))return!0}return!1}var mW=Symbol.for("nodejs.util.inspect.custom"),Jb={fontWeight:"bold"},Qb={fontStyle:"italic"},e1={backgroundColor:"rgb(255, 250, 165)"},t1={textDecorations:"underline"},Kc={textDecorations:"line-through"},hW={b:Jb,strong:Jb,em:Qb,i:Qb,mark:e1,u:t1,a:t1,s:Kc,del:Kc,ins:e1,strike:Kc};function gW(s){return s.toLowerCase().replace(/[^a-z0-9]+(.)/gi,(l,c)=>c.toUpperCase())}var kr=class Nxe{constructor(){this.append=this.appendChild,this._parentNode=null,this._childNodes=[]}get nodeType(){return console.error("Subclasses should define nodeType!"),0}get nodeName(){return console.error("Subclasses should define nodeName!"),""}get nodeValue(){return null}cloneNode(l=!1){const c=new this.constructor;return l&&(c._childNodes=this._childNodes.map(d=>d.cloneNode(!0)),c._fixChildNodesParent()),c}_fixChildNodesParent(){this._childNodes.forEach(l=>l._parentNode=this)}insertBefore(l,c){if(l!==c){let d=c?this._childNodes.indexOf(c):0;d<0&&(d=0),this._childNodes.splice(d,0,l),this._fixChildNodesParent()}}appendChild(l){if(l!=null){if(l===this){console.warn("Cannot appendChild to self");return}if(l instanceof yv&&console.warn("No defined how to append a document to a node!",l),l instanceof vC)for(const c of[...l._childNodes])this.appendChild(c);else if(Array.isArray(l))for(const c of[...l])this.appendChild(c);else if(l instanceof Nxe)l.remove(),this._childNodes.push(l);else try{const c=typeof l=="string"?l:JSON.stringify(l,null,2);this._childNodes.push(new ri(c))}catch(c){console.error(`The data ${l} to be added to ${this.render()} is problematic: ${c}`)}this._fixChildNodesParent()}}removeChild(l){const c=this._childNodes.indexOf(l);c>=0&&(l._parentNode=null,this._childNodes.splice(c,1),this._fixChildNodesParent())}remove(){var l;return(l=this==null?void 0:this.parentNode)==null||l.removeChild(this),this}replaceChildren(...l){this._childNodes=l.map(c=>typeof c=="string"?new ri(c):c.remove()),this._fixChildNodesParent()}replaceWith(...l){const c=this._parentNode;if(c){const d=this._indexInParent();d>=0&&(l=l.map(f=>typeof f=="string"?new ri(f):f.remove()),c._childNodes.splice(d,1,...l),this._parentNode=null,c._fixChildNodesParent())}}_indexInParent(){return this._parentNode?this._parentNode.childNodes.indexOf(this):-1}get parentNode(){return this._parentNode}get childNodes(){return this._childNodes||[]}get children(){return this._childNodes||[]}get firstChild(){return this._childNodes[0]}get lastChild(){return this._childNodes[this._childNodes.length-1]}get nextSibling(){const l=this._indexInParent();return l!=null&&this.parentNode.childNodes[l+1]||null}get previousSibling(){const l=this._indexInParent();return l>0&&this.parentNode.childNodes[l-1]||null}flatten(){const l=[];this instanceof Un&&l.push(this);for(const c of this._childNodes)l.push(...c.flatten());return l}flattenNodes(){const l=[];l.push(this);for(const c of this._childNodes)l.push(...c.flattenNodes());return l}render(){return""}get textContent(){return this._childNodes.map(l=>l.textContent).join("")}set textContent(l){this._childNodes=[],l&&this.appendChild(new ri(l.toString()))}contains(l){return l===this?!0:this._childNodes.some(c=>c.contains(l))}get ownerDocument(){var l;return this.nodeType===Nxe.DOCUMENT_NODE||this.nodeType===Nxe.DOCUMENT_FRAGMENT_NODE?this:(l=this==null?void 0:this._parentNode)==null?void 0:l.ownerDocument}toString(){return`${this.nodeName}`}[mW](){return`${this.constructor.name} "${this.render()}"`}};kr.ELEMENT_NODE=1;kr.TEXT_NODE=3;kr.CDATA_SECTION_NODE=4;kr.PROCESSING_INSTRUCTION_NODE=7;kr.COMMENT_NODE=8;kr.DOCUMENT_NODE=9;kr.DOCUMENT_TYPE_NODE=10;kr.DOCUMENT_FRAGMENT_NODE=11;var wa=kr,ri=class extends wa{get nodeType(){return wa.TEXT_NODE}get nodeName(){return"#text"}get nodeValue(){return this._text||""}get textContent(){return this.nodeValue}constructor(s=""){super(),this._text=s}render(){var s;const l=(s=this.parentNode)==null?void 0:s.tagName;return l==="SCRIPT"||l==="STYLE"?this._text:Jd(this._text)}cloneNode(s=!1){const l=super.cloneNode(s);return l._text=this._text,l}},dC=class extends wa{getElementById(s){return this.flatten().find(l=>l._attributes.id===s)}getElementsByClassName(s){return this.flatten().filter(l=>l.classList.contains(s))}matches(s){return pW(s,this)}querySelectorAll(s){return this.flatten().filter(l=>l.matches(s))}querySelector(s){return this.flatten().find(l=>l.matches(s))}parent(s){var l;return this.matches(s)?this:this.parentNode==null?null:(l=this.parentNode)==null?void 0:l.parent(s)}handle(s,l){let c=0;for(const d of this.querySelectorAll(s))l(d,c++)}},Un=class extends dC{get nodeType(){return wa.ELEMENT_NODE}get nodeName(){return this._nodeName}constructor(s="div",l={}){super(),this._originalTagName=s,this._nodeName=(s||"").toUpperCase(),this._attributes=l||{},this._styles=null}cloneNode(s=!1){const l=super.cloneNode(s);return l._originalTagName=this._originalTagName,l._nodeName=this._nodeName,l._attributes=Object.assign({},this._attributes),l}get attributes(){return Object.entries(this._attributes).map(([s,l])=>({name:s,value:l}))}get attributesObject(){return{...this._attributes}}_findAttributeName(s){const l=s.toLowerCase();return Object.keys(this._attributes).find(c=>l===c.toLowerCase())||null}setAttribute(s,l){this.removeAttribute(s),this._attributes[s]=l,this._styles=null}getAttribute(s){const l=this._findAttributeName(s),c=l?this._attributes[l]:null;return c==null?null:typeof c=="string"?c:""}removeAttribute(s){this._findAttributeName(String(s))&&delete this._attributes[s]}hasAttribute(s){const l=this._findAttributeName(s);return l?this._attributes[l]!=null:!1}get style(){if(this._styles==null){const s=Object.assign({},hW[this.tagName.toLowerCase()]||{}),l=this.getAttribute("style");if(l){let c;const d=/\s*([\w-]+)\s*:\s*([^;]+)/g;for(;c=d.exec(l);){const f=c[1],g=c[2].trim();s[f]=g,s[gW(f)]=g}}this._styles=s}return this._styles}get tagName(){return this._nodeName}setTagName(s){this._nodeName=s.toUpperCase()}get id(){return this._attributes.id||null}set id(s){s==null?delete this._attributes.id:this._attributes.id=s}get src(){return this._attributes.src}set src(s){s==null?delete this._attributes.src:this._attributes.src=s}getElementsByTagName(s){s=s.toUpperCase();const l=this.flatten();return s!=="*"?l.filter(c=>c.tagName===s):l}setInnerHTML(s){}get innerHTML(){return this._childNodes.map(s=>s.render(su)).join("")}set innerHTML(s){this.setInnerHTML(s)}get outerHTML(){return this.render(ds)}get className(){return this._attributes.class||""}set className(s){Array.isArray(s)?s=s.filter(l=>!!l).join(" "):typeof s=="object"&&(s=Object.entries(s).filter(([l,c])=>!!c).map(([l,c])=>l).join(" ")),this._attributes.class=s}get classList(){const s=String(this.className??"").trim().split(/\s+/g)||[];return{contains(l){return s.includes(l)},add:l=>{s.includes(l)||(s.push(l),this.className=s)},remove:l=>{const c=s.indexOf(l);c>=0&&(s.splice(c,1),this.className=s)}}}render(s=ds){return s(this._originalTagName||this.tagName,this._attributes,this._childNodes.map(l=>l.render(s)).join(""))}},bW=class L3e extends wa{get nodeName(){return super.nodeName}get nodeValue(){return super.nodeValue}get nodeType(){return L3e.DOCUMENT_TYPE_NODE}render(){return"<!DOCTYPE html>"}},vC=class F3e extends dC{get nodeType(){return wa.DOCUMENT_FRAGMENT_NODE}get nodeName(){return"#document-fragment"}render(l=ds){return this._childNodes.map(c=>c.render(l)||[]).join("")}get innerHTML(){return this._childNodes.map(l=>l.render(su)).join("")}createElement(l,c={}){return new Un(l,c)}createDocumentFragment(){return new F3e}createTextNode(l){return new ri(l)}},yv=class extends vC{get nodeType(){return wa.DOCUMENT_NODE}get nodeName(){return"#document"}get documentElement(){return this.firstChild}render(s=ds){let l=super.render(s);return this.docType&&(l=this.docType.render()+l),l}},yW=class extends yv{constructor(s=!1){if(super(),this.docType=new bW,!s){const l=new Un("html"),c=new Un("body"),d=new Un("head"),f=new Un("title");l.appendChild(d),d.appendChild(f),l.appendChild(c),this.appendChild(l)}}get body(){let s=this.querySelector("body");if(!s){let l=this.querySelector("html");l||(l=new Un("html"),this.appendChild(l)),s=new Un("body"),l.appendChild(l)}return s}get title(){var s;return((s=this.querySelector("title"))==null?void 0:s.textContent)||""}set title(s){const l=this.querySelector("title");l&&(l.textContent=s)}get head(){let s=this.querySelector("head");if(!s){let l=this.querySelector("html");l||(l=new Un("html"),this.appendChild(l)),s=new Un("head"),l.insertBefore(l)}return s}};function _W(){return new yv}function wW(){return new yW}var CW=_W();fW({document:CW});var kW={},$W=kW.hasOwnProperty;function SW(s,l){return $W.call(s,l)}var xW=["area","base","br","col","embed","hr","img","input","keygen","link","meta","param","source","track","wbr","command"];function mC(s,l,c={},d){const f=!(typeof d=="string"&&d===""||Array.isArray(d)&&(d.length===0||d.length===1&&d[0]==="")||d==null),g=[];if(l=l.replace(/__/g,":"),l!=="noop"&&l!==""){l!=="cdata"?g.push(`<${l}`):g.push("<![CDATA[");for(let v in c)if(v&&SW(c,v)){const b=c[v];if(v==="html")continue;v.toLowerCase()==="classname"&&(v="class"),v=v.replace(/__/g,":"),b===!0?g.push(` ${v}`):v==="style"&&typeof b=="object"?g.push(` ${v}="${Object.keys(b).filter($=>b[$]!=null).map($=>{let y=b[$];return y=typeof y=="number"?`${y}px`:y,`${$.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${y}`}).join(";")}"`):b!==!1&&b!=null&&g.push(` ${v}="${Jd(b.toString())}"`)}if(l!=="cdata"){if(s&&!f)return g.push(" />"),g.join("");g.push(">")}if(!s&&xW.includes(l))return g.join("")}if(f){if(typeof d=="string")g.push(d);else if(d&&d.length>0){for(let v of d)if(v!=null&&v!==!1){Array.isArray(v)||(v=[v]);for(const b of v)b.startsWith("<")&&b.endsWith(">")||l==="script"||l==="style"?g.push(b):g.push(Jd(b.toString()))}}}return c.html&&g.push(c.html),l!=="noop"&&l!==""&&(l!=="cdata"?g.push(`</${l}>`):g.push("]]>")),g.join("")}function su(s,l,...c){const{tag:d,attrs:f,children:g}=cC(s,l,c);return mC(!1,d,f,g)}var ds=mC.bind(null,!1);su.firstLine="<!DOCTYPE html>";su.html=!0;function OW(s,l,c){return DOMSerializer.fromSchema(l).serializeFragment(s.content,{document:wW()}).render()}function uu(s,l){const c=Node$2.fromJSON(l,s);return OW(c,l)}function n1(s,l){let c=s.type.create(s.attrs,l,s.marks);const d=uu(cu(c),s.type.schema);return hC(d,s.attrs.id)}function EW(s,l,c){const{height:d}=kn(l);let f=s.lastChild,g=s.childCount,v=null;const b=s.content.content;for(let x=g-1;x>=0&&!v;x--){f=b[x];let C=x?b.slice(0,x):[];if(f!=null&&f.isText){let E=f.text,N=E.length-1;for(;N;){let W=E==null?void 0:E.slice(0,N),q=n1(s,[...C,c.schema.text(W,f==null?void 0:f.marks)]);if(d>q&&!c.isOverflow(q)){v={i:x,calculateLength:N};break}N-=1}}else{let E=n1(s,C);if(d>E&&!c.isOverflow(E)){v={i:x,calculateLength:0};break}}}let $=!0,y=0;return v&&s.descendants((x,C,E,N)=>{if(!$)return $;N==v.i&&(y=C+v.calculateLength+1,$=!1)}),y}function AW(s,l){const c=document.getElementById(s.attrs.id)||on.getElementById(s.attrs.id);if(!c)return null;const d=kn(c);let f=s.lastChild,g=s.childCount,v=s.content.content.slice(0,g);if(!f)return!1;f.isText&&v.push(l.text("gg"));const b=uu(cu(s.type.create(s.attrs,v,s.marks)),l);return hC(b,s.attrs.id,!1)>d}function r1(s,l,c){const d=l;if(!d)return null;const f=d.offsetWidth,g=uu(cu(s),c.schema),{width:v}=PW(g,!1);return f>=v?null:EW(s,l,c)||null}function cu(s){return{type:"doc",content:[s.toJSON()]}}let ta=null;var on=null;class TW{constructor(){mt(this,"arrDPI",[]);const l=[];if(window.screen.deviceXDPI)l.push(window.screen.deviceXDPI),l.push(window.screen.deviceYDPI);else{const c=document.createElement("DIV");c.style.cssText="width:1in;height:1in;position:absolute;left:0px;top:0px;z-index:-99;visibility:hidden",document.body.appendChild(c),l.push(c.offsetWidth),l.push(c.offsetHeight),c&&c.parentNode&&c.parentNode.removeChild(c)}this.arrDPI=l}pxConversionMm(l){const c=l/this.arrDPI[0]*25.4;return Number(c.toFixed())}mmConversionPx(l){const c=l/25.4*this.arrDPI[0];return Number(c.toFixed())}cmConversionPx(l){const c=l*10/25.4*this.arrDPI[0];return Number(c.toFixed())}}let Or=null;function _v(s=!1){if(s&&vn.clear(),!s&&vn.has("pageOption"))return vn.get("pageOption");Or||(Or=new TW);const{page:l}=ie(),{right:c,left:d,bottom:f,top:g}=l.value.margin,v=()=>{const{width:x,height:C}=l.value.size;return{width:l.value.orientation==="portrait"?x:C,height:l.value.orientation==="portrait"?C:x}},{width:b,height:$}=v();let y={bodyHeight:Or.cmConversionPx($-f-g),bodyWidth:Or.cmConversionPx(b-c-d),right:Or.cmConversionPx(c),left:Or.cmConversionPx(d),bottom:Or.cmConversionPx(f),top:Or.cmConversionPx(g)};return vn.set("pageOption",y),y}const vn=new Map;function hC(s,l,c=!0){if(c&&vn.has(s))return vn.get(s);const d=on.getElementById("computeddiv");if(d){d.innerHTML="<p>&nbsp;</p>"+s;const f=on.getElementById(l),{height:g}=kn(f);return d.innerHTML="&nbsp;",c&&vn.set(s,g),g}return 0}function PW(s,l=!0){if(l&&vn.has(s))return vn.get(s);const c=on.getElementById("computedspan");if(s==" "&&(s="&nbsp;"),c){c.innerHTML=s;const d=c.getBoundingClientRect().width,f=c.getBoundingClientRect().height;return l&&vn.set(s,{height:f,width:d}),c.innerHTML="&nbsp;",{height:f,width:d}}return 0}function MW(){if(vn.has("defaultheight"))return vn.get("defaultheight");const s=on.getElementById("computedspan"),{height:l}=kn(s);return vn.set("defaultheight",l),l}function kn(s){const l=window.getComputedStyle(s)||ta.contentWindow.getComputedStyle(s),c=l.getPropertyValue("margin-top"),d=l.getPropertyValue("margin-bottom"),f=parseFloat(c)+parseFloat(d);return{margin:f,height:f+s.offsetHeight+parseFloat(l.borderWidth)}}function IW(s){let l=[];return s.descendants(c=>{c.isTextblock&&c.childCount==0&&l.push(c.attrs.id)}),l}function NW(s,l){s.attrs.id||(s.attrs.id=Mr());const c=uu(cu(s),l),d=on.getElementById("computeddiv");let f=IW(s);return d&&(d.innerHTML="<p><br class='ProseMirror-trailingBreak'></p>"+c,f.forEach(g=>{const v=on.getElementById(g);v&&(v.innerHTML="<br class='ProseMirror-trailingBreak'>")})),on.getElementById(s.attrs.id)}function jW(){const s=on.getElementById("computeddiv");s.innerHTML=""}function DW(){const{container:s}=ie(),l=document.querySelector(`${s}-computediframe`);l&&(document.body.removeChild(l),ta=null,on=null)}function BW(){DW(),LW()}function FW(){_v(!0);const{page:s}=ie(),l=()=>{const{width:y,height:x}=s.value.size;return{width:s.value.orientation==="portrait"?y:x,height:s.value.orientation==="portrait"?x:y}},{width:c,height:d}=l(),{right:f,left:g,bottom:v,top:b}=s.value.margin;let $=on.getElementById("computeddiv");on.getElementsByClassName("umo-page-watermark")[0].setAttribute("style",`width: ${c+"cm"};height: ${d+"cm"}`),$.setAttribute("style",`padding-top: ${b+"cm"};padding-right:  ${f+"cm"};padding-bottom: ${v+"cm"} ;padding-left:${g+"cm"};min-height: ${d-b-v+"cm"}`)}function LW(){const s=VW(),{container:l}=ie();ta=s,ta.setAttribute("id",`${l.replace("#","")}-computediframe`),ta.setAttribute("class","umo-editor-page-computed"),on=ta.contentDocument||ta.contentWindow.document,HW(on),UW(s,["header","iframe","footer"]),RW(s),zW(s)}function RW(s){const l=(s.contentDocument||s.contentWindow.document).getElementsByClassName("umo-page-node-content")[0];l.setAttribute("id","computeddiv"),l.innerHTML="";let c=l.parentNode.parentNode,d=l.parentNode;for(;c.lastChild!=d;)c.removeChild(c.lastChild)}function zW(s){const l=s.contentDocument||s.contentWindow.document,c=l.getElementsByClassName("ProseMirror")[0],d=l.createElement("p");d.setAttribute("id","computedspan"),d.setAttribute("style","display: inline-block"),d.innerHTML="<br class='ProseMirror-trailingBreak'>",c.appendChild(d),c.setAttribute("contenteditable","false")}function VW(){const s=document.createElement("iframe");return document.body.appendChild(s),s}function HW(s){const l=document.getElementsByTagName("link");for(let c=0;c<l.length;c++)if(l[c].rel==="stylesheet"){const d=s.createElement("link");d.rel="stylesheet",d.type="text/css",d.href=l[c].href,s.head.appendChild(d)}document.querySelectorAll("style").forEach(c=>{const d=s.createElement("style");d.textContent=c.textContent,s.head.appendChild(d)}),document.querySelectorAll("[style]").forEach(c=>{const d=c.getAttribute("style")||"";s.createElement(c.tagName).setAttribute("style",d)})}function UW(s,l){const c=document.body.innerHTML,d=new RegExp(`<(${l.join("|")})[^>]*>.*?</\\1>`,"g"),f=c.replace(d,""),g=document.createDocumentFragment(),v=document.createElement("body");v.innerHTML=f,g.appendChild(v);const b=s.contentDocument||s.contentWindow.document;b.adoptNode(g),b.body.parentNode.replaceChild(g,b.body)}function Mr(){return Math.random().toString(36).substring(2,10)}const KW=(s,l)=>c=>GW(d=>WW(s,d),l)(c),WW=(s,l)=>Array.isArray(s)&&s.indexOf(l.type)>-1||l.type===s,GW=(s,l)=>c=>{const d=YW(s)(c);if(d)return qW(d.pos,l)},qW=(s,l)=>{const c=l(s),d=c.node.childNodes[c.offset];return c.node.nodeType===Node$2.TEXT_NODE?c.node.parentNode:!d||d.nodeType===Node$2.TEXT_NODE?c.node:d},YW=s=>({$from:l})=>ZW(l,s),ZW=(s,l)=>{for(let c=s.depth;c>0;c--){const d=s.node(c);if(l(d))return{pos:c>0?s.before(c):0,start:s.start(c),depth:c,node:d}}},ie=createGlobalState(()=>{const s=ref(fa()),l=ref(to),c=ref(to.page),d=ref(),f=ref({enabled:!1,once:!0,marks:[]}),g=ref(!1),v=ref(!1),b=ref(!1),$=ref([]),y=ref(!1),x=ref(!1),C=ref(null),E=ref(!1),N=ref(!1),W=ref(!1),q=ref(!0),Y=ref(!0),re=ref(!1),se=Se=>{const Ae=(Se==null?void 0:Se.value)||Se;return l.value=rW.merge(l.value,Object.keys(Ae).reduce((Re,Be)=>(Ae[Be]!==void 0&&(Re[Be]=Ae[Be]),Re),{})),l.value},de=({enabled:Se,once:Ae,marks:Re})=>{f.value.enabled=Se,f.value.once=Ae,f.value.marks=Re};watch(()=>l.value.page,({defaultBackground:Se,defaultMargin:Ae,defaultOrientation:Re,watermark:Be})=>{c.value={size:l.value.dicts.pageSizes.find(Ke=>Ke.default),margin:Ae,background:Se,orientation:Re,watermark:Be,header:!0,footer:!0,showLineNumber:!1,showToc:!1,pagination:!0,zoomLevel:100,autoWidth:!1,preview:{enabled:!1,laserPointer:!0}}},{immediate:!0,once:!0}),watch(()=>[c.value.size,c.value.margin,c.value.orientation],Se=>{var Ae;(Ae=d.value)==null||Ae.commands.autoPaging(!1),FW(),setTimeout(()=>{var Re;(Re=d.value)==null||Re.commands.autoPaging(!0)},1e3)},{deep:!0});const he=Se=>d.value=Se,ge=()=>{d.value=null,$.value=[],x.value=!1,C.value=null,re.value=!0};return watch(()=>{var Se;return(Se=l.value.document)==null?void 0:Se.readOnly},async Se=>{var Ae;(Ae=d.value)==null||Ae.setEditable(!Se),s.value=fa()}),{toolbarKey:s,container:`#umo-editor-${fa(4)}`,options:l,page:c,editor:d,painter:f,blockMenu:g,assistantBox:v,commentBox:b,tableOfContents:$,imagePreview:y,searchReplace:x,savedAt:C,printing:E,exportImage:N,exportPDF:W,hidePageHeader:q,hidePageFooter:Y,editorDestroyed:re,setOptions:se,setEditor:he,setPainter:de,resetStore:ge}}),{options:gC}=ie(),a1=s=>{var l;const c=(l=gC.value.translations)==null?void 0:l[s];return typeof c=="object"?c:{}},Qd=(s,...l)=>((typeof s!="object"||s===null)&&(s={}),l.forEach(c=>{c!==null&&typeof c=="object"&&Object.keys(c).forEach(d=>{c[d]&&typeof c[d]=="object"?(s[d]||(s[d]=Array.isArray(c[d])?[]:{}),Qd(s[d],c[d])):s[d]=c[d]})}),s),zt=createI18n({legacy:!1,locale:gC.value.locale||"zh-CN",defaultLocale:"zh-CN",messages:{"en-US":Qd(tW,a1("en_US")),"zh-CN":Qd(_K,a1("zh_CN"))}}),Je=(s,l)=>{const{options:c}=ie();let d=null;switch(s){case"toolbar":d={mode:c.value.toolbar.defaultMode,show:!0};break;case"document":const{id:f,title:g,content:v,enableMarkdown:b,enableSpellcheck:$}=c.value.document;d={id:f,title:g,content:v,markdown:b,spellcheck:$};break;case"recent":d={fonts:[],colors:[]};break;case"print":d={singleColumn:!0,showPageNumber:!0};break;case"locale":d=zt.global.locale.value;break;default:throw new Error("[useStorage]",{cause:"Key is not valid"})}return useStorage(`umo-editor:${l||c.value.editorKey}:${s}`,d)},J=zt.global.t,mr=s=>{const l=zt.global.locale.value.replace("-","_");if(typeof s=="string")return s;if(typeof s=="object")return s[l]},Fe=(s,l)=>{const c=s.__vccOpts||s;for(const[d,f]of l)c[d]=f;return c},XW={class:"keyboard-shortcuts"},JW={class:"keyboard-shortcuts-title"},QW={class:"keyboard-shortcuts"},eG=["innerHTML"],tG={class:"keyboard-shortcut"},nG={key:0},rG=["textContent"],aG={__name:"shortcuts",setup(s){const l=Je("document"),c=ref([{title:J("shortcut.commonlyUsed"),items:[{label:J("shortcut.copy"),keys:["Ctrl","C"]},{label:J("shortcut.paste"),keys:["Ctrl","V"]},{label:J("shortcut.pasteAsText"),keys:["Ctrl","Shift","V"]},{label:J("base.undo"),keys:["Ctrl","Z"]},{label:J("base.redo"),keys:["Ctrl","Y"]},{label:J("base.redo"),keys:["Ctrl","A"]},{label:J("search.text"),keys:["Ctrl","F"]},{label:J("shortcut.paragraph"),keys:["Enter"]},{label:J("shortcut.hardBreak"),keys:["Shift","Enter"]},{label:J("save.text"),keys:["Ctrl","S"]},{label:J("print.text"),keys:["Ctrl","P"]}]},{title:J("shortcut.format"),items:[{icon:"bold",tag:"b",label:J("base.bold"),keys:["Ctrl","B"]},{icon:"italic",tag:"i",label:J("base.italic"),keys:["Ctrl","I"]},{icon:"underline",tag:"u",label:J("base.underline"),keys:["Ctrl","U"]},{icon:"strike",tag:"s",label:J("base.strike"),keys:["Ctrl","Shift","X"]},{icon:"indent",label:J("base.indent"),keys:["Tab"]},{icon:"outdent",label:J("base.outdent"),keys:["Shift","Tab"]}]},{title:J("shortcut.page"),items:[{label:J("page.break"),keys:["Ctrl","Enter"]},{label:J("shortcut.pageZoomIn"),keys:["Ctrl","+"]},{label:J("shortcut.pageZoomOut"),keys:["Ctrl","-"]},{label:J("shortcut.pageZoomReset"),keys:["Ctrl","1"]},{label:J("shortcut.pageAutoWidth"),keys:["Ctrl","0"]},{label:J("preview.title"),keys:["F5"]},{label:J("fullscreen.title"),keys:["F11"]}]}]);return l.value.markdown&&c.value.push({title:J("shortcut.markdown"),items:[{html:"H<sub>1</sub>",tag:"b",className:"heading1",label:J("base.heading.text",{level:1}),keys:["#",""]},{html:"H<sub>2</sub>",tag:"b",className:"heading2",label:J("base.heading.text",{level:2}),keys:["##",""]},{html:"H<sub>3</sub>",tag:"b",className:"heading3",label:J("base.heading.text",{level:3}),keys:["###",""]},{html:"H<sub>4</sub>",tag:"b",className:"heading4",label:J("base.heading.text",{level:4}),keys:["####",""]},{html:"H<sub>5</sub>",tag:"b",className:"heading5",label:J("base.heading.text",{level:5}),keys:["#####",""]},{html:"H<sub>6</sub>",tag:"b",className:"heading6",label:J("base.heading.text",{level:6}),keys:["######",""]},{icon:"bold",tag:"b",label:J("base.bold"),keys:["**","TEXT","**"]},{icon:"italic",tag:"i",label:J("base.italic"),keys:["*","TEXT","*"]},{icon:"strike",tag:"s",label:J("base.strike"),keys:["~~","TEXT","~~"]},{icon:"subscript",tag:"sub",label:J("base.subscript"),keys:["~","TEXT","~"]},{icon:"superscript",tag:"sup",label:J("base.superscript"),keys:["^","TEXT","^"]},{icon:"bullet-list",label:` ${J("list.bullet.text")}`,keys:["*",""]},{icon:"ordered-list",label:`1. ${J("list.ordered.text")}`,keys:["1.",""]},{icon:"task-list",label:J("list.task.text"),keys:["[ ]",""]},{icon:"quote",tag:"blockquote",label:J("base.quote"),keys:[">",""]},{icon:"code",tag:"code",label:J("base.code"),keys:["`","TEXT","`"]},{icon:"math",label:J("insert.math"),keys:["$","TEXT","$"]},{icon:"highlight",tag:"mark",label:J("base.highlight.text"),keys:["==","TEXT","=="]},{icon:"hr",label:J("insert.hr.text"),keys:["---","Enter"]}]}),(d,f)=>{const g=tt;return openBlock(),createElementBlock("div",XW,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(c.value,(v,b)=>(openBlock(),createElementBlock(Fragment$1,{key:b},[createBaseVNode("div",JW,toDisplayString$1(v.title),1),createBaseVNode("ul",QW,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(v.items,($,y)=>(openBlock(),createElementBlock("li",{key:y},[createBaseVNode("span",{class:normalizeClass($.className?"keyboard-shortcut-"+$.className:"")},[$.icon?(openBlock(),createBlock(g,{key:0,name:$.icon},null,8,["name"])):$.html?(openBlock(),createElementBlock("span",{key:1,class:"shortcut-icon",innerHTML:$.html},null,8,eG)):createCommentVNode("",!0),$.tag?(openBlock(),createBlock(resolveDynamicComponent($.tag),{key:2},{default:withCtx(()=>[createTextVNode(toDisplayString$1($.label),1)]),_:2},1024)):(openBlock(),createElementBlock("span",{key:3,class:normalizeClass($.className||"")},toDisplayString$1($.label),3))],2),createBaseVNode("div",tG,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList($.keys,x=>(openBlock(),createElementBlock(Fragment$1,{key:x},[x!=="TEXT"?(openBlock(),createElementBlock("kbd",nG,toDisplayString$1(unref(wn)(x)),1)):(openBlock(),createElementBlock("span",{key:1,textContent:toDisplayString$1(d.t("shortcut.text"))},null,8,rG))],64))),128))])]))),128))])],64))),128))])}}},oG=Fe(aG,[["__scopeId","data-v-1213c973"]]),Oa={__name:"tooltip",props:{content:{}},setup(s){const{container:l}=ie();return(c,d)=>{const f=Ja;return openBlock(),createBlock(f,{content:s.content,theme:"light",placement:"top",attach:unref(l),"show-arrow":!1,"destroy-on-close":""},{default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},8,["content","attach"])}}},Wn=(s,l)=>{hotkeys.filter=()=>!0,hotkeys(s,c=>(c.preventDefault(),l(),!1))};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function ef(s,l){(l==null||l>s.length)&&(l=s.length);for(var c=0,d=Array(l);c<l;c++)d[c]=s[c];return d}function bC(s,l){if(s){if(typeof s=="string")return ef(s,l);var c={}.toString.call(s).slice(8,-1);return c==="Object"&&s.constructor&&(c=s.constructor.name),c==="Map"||c==="Set"?Array.from(s):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?ef(s,l):void 0}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function iG(s){if(Array.isArray(s))return ef(s)}function lG(s){if(typeof Symbol<"u"&&s[Symbol.iterator]!=null||s["@@iterator"]!=null)return Array.from(s)}function sG(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yC(s){return iG(s)||lG(s)||bC(s)||sG()}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Bt(s){"@babel/helpers - typeof";return Bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},Bt(s)}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function uG(s,l){if(Bt(s)!="object"||!s)return s;var c=s[Symbol.toPrimitive];if(c!==void 0){var d=c.call(s,l||"default");if(Bt(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(l==="string"?String:Number)(s)}function cG(s){var l=uG(s,"string");return Bt(l)=="symbol"?l:l+""}function nt(s,l,c){return(l=cG(l))in s?Object.defineProperty(s,l,{value:c,enumerable:!0,configurable:!0,writable:!0}):s[l]=c,s}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Wa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function dG(s){var l=Bt(s);return s!=null&&(l=="object"||l=="function")}var Dt=dG;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var fG=Bt(Wa)=="object"&&Wa&&Wa.Object===Object&&Wa,_C=fG,vG=_C,pG=(typeof self>"u"?"undefined":Bt(self))=="object"&&self&&self.Object===Object&&self,mG=vG||pG||Function("return this")(),tr=mG,hG=tr,gG=hG.Symbol,Po=gG,o1=Po,wC=Object.prototype,bG=wC.hasOwnProperty,yG=wC.toString,qo=o1?o1.toStringTag:void 0;function _G(s){var l=bG.call(s,qo),c=s[qo];try{s[qo]=void 0;var d=!0}catch{}var f=yG.call(s);return d&&(l?s[qo]=c:delete s[qo]),f}var wG=_G,CG=Object.prototype,kG=CG.toString;function $G(s){return kG.call(s)}var SG=$G,i1=Po,xG=wG,OG=SG,EG="[object Null]",AG="[object Undefined]",l1=i1?i1.toStringTag:void 0;function TG(s){return s==null?s===void 0?AG:EG:l1&&l1 in Object(s)?xG(s):OG(s)}var Ur=TG;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var PG=Ur,MG=Dt,IG="[object AsyncFunction]",NG="[object Function]",jG="[object GeneratorFunction]",DG="[object Proxy]";function BG(s){if(!MG(s))return!1;var l=PG(s);return l==NG||l==jG||l==IG||l==DG}var Jn=BG;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var FG=tr,LG=FG["__core-js_shared__"],RG=LG,Wc=RG,s1=function(){var s=/[^.]+$/.exec(Wc&&Wc.keys&&Wc.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}();function zG(s){return!!s1&&s1 in s}var VG=zG,HG=Function.prototype,UG=HG.toString;function KG(s){if(s!=null){try{return UG.call(s)}catch{}try{return s+""}catch{}}return""}var CC=KG,WG=Jn,GG=VG,qG=Dt,YG=CC,ZG=/[\\^$.*+?()[\]{}|]/g,XG=/^\[object .+?Constructor\]$/,JG=Function.prototype,QG=Object.prototype,eq=JG.toString,tq=QG.hasOwnProperty,nq=RegExp("^"+eq.call(tq).replace(ZG,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function rq(s){if(!qG(s)||GG(s))return!1;var l=WG(s)?nq:XG;return l.test(YG(s))}var aq=rq;function oq(s,l){return s==null?void 0:s[l]}var iq=oq,lq=aq,sq=iq;function uq(s,l){var c=sq(s,l);return lq(c)?c:void 0}var Ea=uq,cq=Ea,dq=tr,fq=cq(dq,"Map"),wv=fq;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var vq=Ea,pq=function(){try{var s=vq(Object,"defineProperty");return s({},"",{}),s}catch{}}(),kC=pq;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function mq(s,l){return s===l||s!==s&&l!==l}var Yi=mq;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var u1=kC;function hq(s,l,c){l=="__proto__"&&u1?u1(s,l,{configurable:!0,enumerable:!0,value:c,writable:!0}):s[l]=c}var du=hq,gq=du,bq=Yi,yq=Object.prototype,_q=yq.hasOwnProperty;function wq(s,l,c){var d=s[l];(!(_q.call(s,l)&&bq(d,c))||c===void 0&&!(l in s))&&gq(s,l,c)}var $C=wq;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Cq(){this.__data__=[],this.size=0}var kq=Cq,$q=Yi;function Sq(s,l){for(var c=s.length;c--;)if($q(s[c][0],l))return c;return-1}var fu=Sq,xq=fu,Oq=Array.prototype,Eq=Oq.splice;function Aq(s){var l=this.__data__,c=xq(l,s);if(c<0)return!1;var d=l.length-1;return c==d?l.pop():Eq.call(l,c,1),--this.size,!0}var Tq=Aq,Pq=fu;function Mq(s){var l=this.__data__,c=Pq(l,s);return c<0?void 0:l[c][1]}var Iq=Mq,Nq=fu;function jq(s){return Nq(this.__data__,s)>-1}var Dq=jq,Bq=fu;function Fq(s,l){var c=this.__data__,d=Bq(c,s);return d<0?(++this.size,c.push([s,l])):c[d][1]=l,this}var Lq=Fq,Rq=kq,zq=Tq,Vq=Iq,Hq=Dq,Uq=Lq;function Mo(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var d=s[l];this.set(d[0],d[1])}}Mo.prototype.clear=Rq;Mo.prototype.delete=zq;Mo.prototype.get=Vq;Mo.prototype.has=Hq;Mo.prototype.set=Uq;var vu=Mo,Kq=Ea,Wq=Kq(Object,"create"),pu=Wq,c1=pu;function Gq(){this.__data__=c1?c1(null):{},this.size=0}var qq=Gq;function Yq(s){var l=this.has(s)&&delete this.__data__[s];return this.size-=l?1:0,l}var Zq=Yq,Xq=pu,Jq="__lodash_hash_undefined__",Qq=Object.prototype,eY=Qq.hasOwnProperty;function tY(s){var l=this.__data__;if(Xq){var c=l[s];return c===Jq?void 0:c}return eY.call(l,s)?l[s]:void 0}var nY=tY,rY=pu,aY=Object.prototype,oY=aY.hasOwnProperty;function iY(s){var l=this.__data__;return rY?l[s]!==void 0:oY.call(l,s)}var lY=iY,sY=pu,uY="__lodash_hash_undefined__";function cY(s,l){var c=this.__data__;return this.size+=this.has(s)?0:1,c[s]=sY&&l===void 0?uY:l,this}var dY=cY,fY=qq,vY=Zq,pY=nY,mY=lY,hY=dY;function Io(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var d=s[l];this.set(d[0],d[1])}}Io.prototype.clear=fY;Io.prototype.delete=vY;Io.prototype.get=pY;Io.prototype.has=mY;Io.prototype.set=hY;var gY=Io,d1=gY,bY=vu,yY=wv;function _Y(){this.size=0,this.__data__={hash:new d1,map:new(yY||bY),string:new d1}}var wY=_Y;function CY(s){var l=Bt(s);return l=="string"||l=="number"||l=="symbol"||l=="boolean"?s!=="__proto__":s===null}var kY=CY,$Y=kY;function SY(s,l){var c=s.__data__;return $Y(l)?c[typeof l=="string"?"string":"hash"]:c.map}var mu=SY,xY=mu;function OY(s){var l=xY(this,s).delete(s);return this.size-=l?1:0,l}var EY=OY,AY=mu;function TY(s){return AY(this,s).get(s)}var PY=TY,MY=mu;function IY(s){return MY(this,s).has(s)}var NY=IY,jY=mu;function DY(s,l){var c=jY(this,s),d=c.size;return c.set(s,l),this.size+=c.size==d?0:1,this}var BY=DY,FY=wY,LY=EY,RY=PY,zY=NY,VY=BY;function No(s){var l=-1,c=s==null?0:s.length;for(this.clear();++l<c;){var d=s[l];this.set(d[0],d[1])}}No.prototype.clear=FY;No.prototype.delete=LY;No.prototype.get=RY;No.prototype.has=zY;No.prototype.set=VY;var Cv=No;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var HY=9007199254740991;function UY(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=HY}var kv=UY,KY=Jn,WY=kv;function GY(s){return s!=null&&WY(s.length)&&!KY(s)}var Zi=GY;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function qY(s){return s!=null&&Bt(s)=="object"}var zn=qY;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function YY(s){return function(l){return s(l)}}var $v=YY;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Ir={exports:{}};function ZY(){return!1}var XY=ZY;(function(s,l){var c=tr,d=XY,f=l&&!l.nodeType&&l,g=f&&!0&&s&&!s.nodeType&&s,v=g&&g.exports===f,b=v?c.Buffer:void 0,$=b?b.isBuffer:void 0,y=$||d;s.exports=y})(Ir,Ir.exports);Ir.exports;var JY=Ur,QY=kv,eZ=zn,tZ="[object Arguments]",nZ="[object Array]",rZ="[object Boolean]",aZ="[object Date]",oZ="[object Error]",iZ="[object Function]",lZ="[object Map]",sZ="[object Number]",uZ="[object Object]",cZ="[object RegExp]",dZ="[object Set]",fZ="[object String]",vZ="[object WeakMap]",pZ="[object ArrayBuffer]",mZ="[object DataView]",hZ="[object Float32Array]",gZ="[object Float64Array]",bZ="[object Int8Array]",yZ="[object Int16Array]",_Z="[object Int32Array]",wZ="[object Uint8Array]",CZ="[object Uint8ClampedArray]",kZ="[object Uint16Array]",$Z="[object Uint32Array]",ct={};ct[hZ]=ct[gZ]=ct[bZ]=ct[yZ]=ct[_Z]=ct[wZ]=ct[CZ]=ct[kZ]=ct[$Z]=!0;ct[tZ]=ct[nZ]=ct[pZ]=ct[rZ]=ct[mZ]=ct[aZ]=ct[oZ]=ct[iZ]=ct[lZ]=ct[sZ]=ct[uZ]=ct[cZ]=ct[dZ]=ct[fZ]=ct[vZ]=!1;function SZ(s){return eZ(s)&&QY(s.length)&&!!ct[JY(s)]}var xZ=SZ,mo={exports:{}};(function(s,l){var c=_C,d=l&&!l.nodeType&&l,f=d&&!0&&s&&!s.nodeType&&s,g=f&&f.exports===d,v=g&&c.process,b=function(){try{var $=f&&f.require&&f.require("util").types;return $||v&&v.binding&&v.binding("util")}catch{}}();s.exports=b})(mo,mo.exports);mo.exports;var OZ=xZ,EZ=$v,f1=mo.exports,v1=f1&&f1.isTypedArray,AZ=v1?EZ(v1):OZ,hu=AZ,TZ=Object.prototype;function PZ(s){var l=s&&s.constructor,c=typeof l=="function"&&l.prototype||TZ;return s===c}var gu=PZ;function MZ(s,l){return function(c){return s(l(c))}}var SC=MZ;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var IZ=Ur,NZ=zn,jZ="[object Arguments]";function DZ(s){return NZ(s)&&IZ(s)==jZ}var BZ=DZ,p1=BZ,FZ=zn,xC=Object.prototype,LZ=xC.hasOwnProperty,RZ=xC.propertyIsEnumerable,zZ=p1(function(){return arguments}())?p1:function(s){return FZ(s)&&LZ.call(s,"callee")&&!RZ.call(s,"callee")},Xi=zZ;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var VZ=Array.isArray,hn=VZ;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var HZ=9007199254740991,UZ=/^(?:0|[1-9]\d*)$/;function KZ(s,l){var c=Bt(s);return l=l??HZ,!!l&&(c=="number"||c!="symbol"&&UZ.test(s))&&s>-1&&s%1==0&&s<l}var Sv=KZ;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function WZ(s,l){for(var c=-1,d=Array(s);++c<s;)d[c]=l(c);return d}var GZ=WZ,qZ=GZ,YZ=Xi,ZZ=hn,XZ=Ir.exports,JZ=Sv,QZ=hu,eX=Object.prototype,tX=eX.hasOwnProperty;function nX(s,l){var c=ZZ(s),d=!c&&YZ(s),f=!c&&!d&&XZ(s),g=!c&&!d&&!f&&QZ(s),v=c||d||f||g,b=v?qZ(s.length,String):[],$=b.length;for(var y in s)(l||tX.call(s,y))&&!(v&&(y=="length"||f&&(y=="offset"||y=="parent")||g&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||JZ(y,$)))&&b.push(y);return b}var OC=nX,rX=vu;function aX(){this.__data__=new rX,this.size=0}var oX=aX;function iX(s){var l=this.__data__,c=l.delete(s);return this.size=l.size,c}var lX=iX;function sX(s){return this.__data__.get(s)}var uX=sX;function cX(s){return this.__data__.has(s)}var dX=cX,fX=vu,vX=wv,pX=Cv,mX=200;function hX(s,l){var c=this.__data__;if(c instanceof fX){var d=c.__data__;if(!vX||d.length<mX-1)return d.push([s,l]),this.size=++c.size,this;c=this.__data__=new pX(d)}return c.set(s,l),this.size=c.size,this}var gX=hX,bX=vu,yX=oX,_X=lX,wX=uX,CX=dX,kX=gX;function jo(s){var l=this.__data__=new bX(s);this.size=l.size}jo.prototype.clear=yX;jo.prototype.delete=_X;jo.prototype.get=wX;jo.prototype.has=CX;jo.prototype.set=kX;var bu=jo,$X=tr,SX=$X.Uint8Array,EC=SX,ki={exports:{}};(function(s,l){var c=tr,d=l&&!l.nodeType&&l,f=d&&!0&&s&&!s.nodeType&&s,g=f&&f.exports===d,v=g?c.Buffer:void 0,b=v?v.allocUnsafe:void 0;function $(y,x){if(x)return y.slice();var C=y.length,E=b?b(C):new y.constructor(C);return y.copy(E),E}s.exports=$})(ki,ki.exports);ki.exports;var m1=EC;function xX(s){var l=new s.constructor(s.byteLength);return new m1(l).set(new m1(s)),l}var xv=xX,OX=xv;function EX(s,l){var c=l?OX(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.length)}var AC=EX;function AX(s,l){var c=-1,d=s.length;for(l||(l=Array(d));++c<d;)l[c]=s[c];return l}var TC=AX,TX=Dt,h1=Object.create,PX=function(){function s(){}return function(l){if(!TX(l))return{};if(h1)return h1(l);s.prototype=l;var c=new s;return s.prototype=void 0,c}}(),MX=PX,IX=SC,NX=IX(Object.getPrototypeOf,Object),Ov=NX,jX=MX,DX=Ov,BX=gu;function FX(s){return typeof s.constructor=="function"&&!BX(s)?jX(DX(s)):{}}var PC=FX,LX=$C,RX=du;function zX(s,l,c,d){var f=!c;c||(c={});for(var g=-1,v=l.length;++g<v;){var b=l[g],$=d?d(c[b],s[b],b,c,s):void 0;$===void 0&&($=s[b]),f?RX(c,b,$):LX(c,b,$)}return c}var Do=zX;function VX(s){var l=[];if(s!=null)for(var c in Object(s))l.push(c);return l}var HX=VX,UX=Dt,KX=gu,WX=HX,GX=Object.prototype,qX=GX.hasOwnProperty;function YX(s){if(!UX(s))return WX(s);var l=KX(s),c=[];for(var d in s)d=="constructor"&&(l||!qX.call(s,d))||c.push(d);return c}var ZX=YX,XX=OC,JX=ZX,QX=Zi;function eJ(s){return QX(s)?XX(s,!0):JX(s)}var Ji=eJ;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function tJ(s){return s}var Ev=tJ;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function nJ(s,l,c){switch(c.length){case 0:return s.call(l);case 1:return s.call(l,c[0]);case 2:return s.call(l,c[0],c[1]);case 3:return s.call(l,c[0],c[1],c[2])}return s.apply(l,c)}var rJ=nJ,aJ=rJ,g1=Math.max;function oJ(s,l,c){return l=g1(l===void 0?s.length-1:l,0),function(){for(var d=arguments,f=-1,g=g1(d.length-l,0),v=Array(g);++f<g;)v[f]=d[l+f];f=-1;for(var b=Array(l+1);++f<l;)b[f]=d[f];return b[l]=c(v),aJ(s,this,b)}}var MC=oJ;function iJ(s){return function(){return s}}var lJ=iJ,sJ=lJ,b1=kC,uJ=Ev,cJ=b1?function(s,l){return b1(s,"toString",{configurable:!0,enumerable:!1,value:sJ(l),writable:!0})}:uJ,dJ=cJ,fJ=800,vJ=16,pJ=Date.now;function mJ(s){var l=0,c=0;return function(){var d=pJ(),f=vJ-(d-c);if(c=d,f>0){if(++l>=fJ)return arguments[0]}else l=0;return s.apply(void 0,arguments)}}var hJ=mJ,gJ=dJ,bJ=hJ,yJ=bJ(gJ),IC=yJ;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var _J=Zi,wJ=zn;function CJ(s){return wJ(s)&&_J(s)}var kJ=CJ,$J=Ev,SJ=MC,xJ=IC;function OJ(s,l){return xJ(SJ(s,l,$J),s+"")}var EJ=OJ;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var AJ=Ur,TJ=Ov,PJ=zn,MJ="[object Object]",IJ=Function.prototype,NJ=Object.prototype,NC=IJ.toString,jJ=NJ.hasOwnProperty,DJ=NC.call(Object);function BJ(s){if(!PJ(s)||AJ(s)!=MJ)return!1;var l=TJ(s);if(l===null)return!0;var c=jJ.call(l,"constructor")&&l.constructor;return typeof c=="function"&&c instanceof c&&NC.call(c)==DJ}var jC=BJ;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var FJ=Yi,LJ=Zi,RJ=Sv,zJ=Dt;function VJ(s,l,c){if(!zJ(c))return!1;var d=Bt(l);return(d=="number"?LJ(c)&&RJ(l,c.length):d=="string"&&l in c)?FJ(c[l],s):!1}var HJ=VJ;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var UJ={classPrefix:"t",animation:{include:["ripple","expand","fade"],exclude:[]},calendar:{firstDayOfWeek:1,fillWithZero:!0,controllerConfig:void 0},icon:{},input:{autocomplete:""},dialog:{closeOnEscKeydown:!0,closeOnOverlayClick:!0,confirmBtnTheme:{default:"primary",info:"primary",warning:"primary",danger:"primary",success:"primary"}},message:{},popconfirm:{confirmBtnTheme:{default:"primary",warning:"primary",danger:"primary"}},table:{expandIcon:void 0,sortIcon:void 0,filterIcon:void 0,treeExpandAndFoldIcon:void 0,hideSortTips:!1,size:"medium"},select:{clearIcon:void 0,filterable:!1},drawer:{closeOnEscKeydown:!0,closeOnOverlayClick:!0,size:"small"},tree:{folderIcon:void 0},datePicker:{firstDayOfWeek:1},steps:{checkIcon:void 0,errorIcon:void 0},tag:{closeIcon:void 0},form:{requiredMark:void 0},empty:{titleText:{maintenance:void 0,success:void 0,fail:void 0,empty:void 0,networkError:void 0},image:{maintenance:void 0,success:void 0,fail:void 0,empty:void 0,networkError:void 0}}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var KJ={pagination:{itemsPerPage:"{size} /",jumpTo:"",page:"",total:" {total} "},cascader:{empty:"",loadingText:"",placeholder:""},calendar:{yearSelection:"{year} ",monthSelection:"{month} ",yearRadio:"",monthRadio:"",hideWeekend:"",showWeekend:"",today:"",thisMonth:"",week:",,,,,,",cellMonth:"1 ,2 ,3 ,4 ,5 ,6 ,7 ,8 ,9 ,10 ,11 ,12 "},transfer:{title:"{checked} / {total} ",empty:"",placeholder:""},timePicker:{dayjsLocale:"zh-cn",now:"",confirm:"",anteMeridiem:"",postMeridiem:"",placeholder:""},dialog:{confirm:"",cancel:""},drawer:{confirm:"",cancel:""},popconfirm:{confirm:{content:""},cancel:{content:""}},table:{empty:"",loadingText:"",loadingMoreText:"",filterInputPlaceholder:"",sortAscendingOperationText:"",sortCancelOperationText:"",sortDescendingOperationText:"",clearFilterResultButtonText:"",columnConfigButtonText:"",columnConfigTitleText:"",columnConfigDescriptionText:"",confirmText:"",cancelText:"",resetText:"",selectAllText:"",searchResultText:"{result} {count} "},select:{empty:"",loadingText:"",placeholder:""},tree:{empty:""},treeSelect:{empty:"",loadingText:"",placeholder:""},datePicker:{dayjsLocale:"zh-cn",placeholder:{date:"",month:"",year:"",quarter:"",week:""},weekdays:["","","","","","",""],months:["1 ","2 ","3 ","4 ","5 ","6 ","7 ","8 ","9 ","10 ","11 ","12 "],quarters:["","","",""],rangeSeparator:" - ",direction:"ltr",format:"YYYY-MM-DD",dayAriaLabel:"",weekAbbreviation:"",yearAriaLabel:"",monthAriaLabel:"",confirm:"",selectTime:"",selectDate:"",nextYear:"",preYear:"",nextMonth:"",preMonth:"",preDecade:"",nextDecade:"",now:""},upload:{sizeLimitMessage:" {sizeLimit}",cancelUploadText:"",triggerUploadText:{fileInput:"",image:"",normal:"",reupload:"",continueUpload:"",delete:"",uploading:""},dragger:{dragDropText:"",draggingText:"",clickAndDragText:""},file:{fileNameText:"",fileSizeText:"",fileStatusText:"",fileOperationText:"",fileOperationDateText:""},progress:{uploadingText:"",waitingText:"",failText:"",successText:""}},form:{errorMessage:{date:"${name}",url:"${name}",required:"${name}",max:"${name} ${validate} ",min:"${name} ${validate} ",len:"${name} ${validate}",enum:"${name}${validate}",idcard:"${name}",telnumber:"${name}",pattern:"${name}",validator:"${name}",boolean:"${name}",number:"${name}"},colonText:""},input:{placeholder:""},list:{loadingText:"",loadingMoreText:""},alert:{expandText:"",collapseText:""},anchor:{copySuccessText:"",copyText:""},colorPicker:{swatchColorTitle:"",recentColorTitle:"",clearConfirmText:""},guide:{finishButtonProps:{content:"",theme:"primary"},nextButtonProps:{content:"",theme:"primary"},skipButtonProps:{content:"",theme:"default"},prevButtonProps:{content:"",theme:"default"}},image:{errorText:"",loadingText:""},imageViewer:{errorText:"",mirrorTipText:"",rotateTipText:"",originalSizeTipText:""},typography:{expandText:"",collapseText:"",copiedText:""},rate:{rateText:["","","","",""]},empty:{titleText:{maintenance:"",success:"",fail:"",empty:"",networkError:""}},descriptions:{colonText:""}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function WJ(s){return function(l,c,d){for(var f=-1,g=Object(l),v=d(l),b=v.length;b--;){var $=v[s?b:++f];if(c(g[$],$,g)===!1)break}return l}}var GJ=WJ,qJ=GJ,YJ=qJ(),DC=YJ,ZJ=du,XJ=Yi;function JJ(s,l,c){(c!==void 0&&!XJ(s[l],c)||c===void 0&&!(l in s))&&ZJ(s,l,c)}var BC=JJ;function QJ(s,l){if(!(l==="constructor"&&typeof s[l]=="function")&&l!="__proto__")return s[l]}var FC=QJ,eQ=Do,tQ=Ji;function nQ(s){return eQ(s,tQ(s))}var rQ=nQ,y1=BC,aQ=ki.exports,oQ=AC,iQ=TC,lQ=PC,_1=Xi,w1=hn,sQ=kJ,uQ=Ir.exports,cQ=Jn,dQ=Dt,fQ=jC,vQ=hu,C1=FC,pQ=rQ;function mQ(s,l,c,d,f,g,v){var b=C1(s,c),$=C1(l,c),y=v.get($);if(y){y1(s,c,y);return}var x=g?g(b,$,c+"",s,l,v):void 0,C=x===void 0;if(C){var E=w1($),N=!E&&uQ($),W=!E&&!N&&vQ($);x=$,E||N||W?w1(b)?x=b:sQ(b)?x=iQ(b):N?(C=!1,x=aQ($,!0)):W?(C=!1,x=oQ($,!0)):x=[]:fQ($)||_1($)?(x=b,_1(b)?x=pQ(b):(!dQ(b)||cQ(b))&&(x=lQ($))):C=!1}C&&(v.set($,x),f(x,$,d,g,v),v.delete($)),y1(s,c,x)}var hQ=mQ,gQ=bu,bQ=BC,yQ=DC,_Q=hQ,wQ=Dt,CQ=Ji,kQ=FC;function LC(s,l,c,d,f){s!==l&&yQ(l,function(g,v){if(f||(f=new gQ),wQ(g))_Q(s,l,v,c,LC,d,f);else{var b=d?d(kQ(s,v),g,v+"",s,l,f):void 0;b===void 0&&(b=g),bQ(s,v,b)}},CQ)}var RC=LC,$Q=EJ,SQ=HJ;function xQ(s){return $Q(function(l,c){var d=-1,f=c.length,g=f>1?c[f-1]:void 0,v=f>2?c[2]:void 0;for(g=s.length>3&&typeof g=="function"?(f--,g):void 0,v&&SQ(c[0],c[1],v)&&(g=f<3?void 0:g,f=1),l=Object(l);++d<f;){var b=c[d];b&&s(l,b,d,g)}return l})}var zC=xQ,OQ=RC,EQ=zC,AQ=EQ(function(s,l,c){OQ(s,l,c)}),VC=AQ,TQ=RC,PQ=zC;PQ(function(s,l,c,d){TQ(s,l,c,d)});var yu=function(s){return s.ripple="ripple",s.expand="expand",s.fade="fade",s}(yu||{}),MQ=VC(UJ,KJ),IQ=Symbol("configProvide");/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var NQ=Ea,jQ=tr,DQ=NQ(jQ,"Set"),BQ=DQ;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var FQ=SC,LQ=FQ(Object.keys,Object),RQ=LQ,zQ=gu,VQ=RQ,HQ=Object.prototype,UQ=HQ.hasOwnProperty;function KQ(s){if(!zQ(s))return VQ(s);var l=[];for(var c in Object(s))UQ.call(s,c)&&c!="constructor"&&l.push(c);return l}var HC=KQ,WQ=Ea,GQ=tr,qQ=WQ(GQ,"DataView"),YQ=qQ,ZQ=Ea,XQ=tr,JQ=ZQ(XQ,"Promise"),QQ=JQ,eee=Ea,tee=tr,nee=eee(tee,"WeakMap"),ree=nee,tf=YQ,nf=wv,rf=QQ,af=BQ,of=ree,UC=Ur,Bo=CC,k1="[object Map]",aee="[object Object]",$1="[object Promise]",S1="[object Set]",x1="[object WeakMap]",O1="[object DataView]",oee=Bo(tf),iee=Bo(nf),lee=Bo(rf),see=Bo(af),uee=Bo(of),ea=UC;(tf&&ea(new tf(new ArrayBuffer(1)))!=O1||nf&&ea(new nf)!=k1||rf&&ea(rf.resolve())!=$1||af&&ea(new af)!=S1||of&&ea(new of)!=x1)&&(ea=function(s){var l=UC(s),c=l==aee?s.constructor:void 0,d=c?Bo(c):"";if(d)switch(d){case oee:return O1;case iee:return k1;case lee:return $1;case see:return S1;case uee:return x1}return l});var Qi=ea;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function cee(s,l){for(var c=-1,d=l.length,f=s.length;++c<d;)s[f+c]=l[c];return s}var Av=cee;function dee(s,l){for(var c=-1,d=s==null?0:s.length,f=0,g=[];++c<d;){var v=s[c];l(v,c,s)&&(g[f++]=v)}return g}var fee=dee;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var vee=OC,pee=HC,mee=Zi;function hee(s){return mee(s)?vee(s):pee(s)}var el=hee,gee=Av,bee=hn;function yee(s,l,c){var d=l(s);return bee(s)?d:gee(d,c(s))}var KC=yee;function _ee(){return[]}var WC=_ee,wee=fee,Cee=WC,kee=Object.prototype,$ee=kee.propertyIsEnumerable,E1=Object.getOwnPropertySymbols,See=E1?function(s){return s==null?[]:(s=Object(s),wee(E1(s),function(l){return $ee.call(s,l)}))}:Cee,Tv=See,xee=KC,Oee=Tv,Eee=el;function Aee(s){return xee(s,Eee,Oee)}var GC=Aee;function Tee(s,l){for(var c=-1,d=s==null?0:s.length;++c<d&&l(s[c],c,s)!==!1;);return s}var Pee=Tee,Mee=Do,Iee=el;function Nee(s,l){return s&&Mee(l,Iee(l),s)}var jee=Nee,Dee=Do,Bee=Ji;function Fee(s,l){return s&&Dee(l,Bee(l),s)}var Lee=Fee,Ree=Do,zee=Tv;function Vee(s,l){return Ree(s,zee(s),l)}var Hee=Vee,Uee=Av,Kee=Ov,Wee=Tv,Gee=WC,qee=Object.getOwnPropertySymbols,Yee=qee?function(s){for(var l=[];s;)Uee(l,Wee(s)),s=Kee(s);return l}:Gee,qC=Yee,Zee=Do,Xee=qC;function Jee(s,l){return Zee(s,Xee(s),l)}var Qee=Jee,ete=KC,tte=qC,nte=Ji;function rte(s){return ete(s,nte,tte)}var YC=rte,ate=Object.prototype,ote=ate.hasOwnProperty;function ite(s){var l=s.length,c=new s.constructor(l);return l&&typeof s[0]=="string"&&ote.call(s,"index")&&(c.index=s.index,c.input=s.input),c}var lte=ite,ste=xv;function ute(s,l){var c=l?ste(s.buffer):s.buffer;return new s.constructor(c,s.byteOffset,s.byteLength)}var cte=ute,dte=/\w*$/;function fte(s){var l=new s.constructor(s.source,dte.exec(s));return l.lastIndex=s.lastIndex,l}var vte=fte,A1=Po,T1=A1?A1.prototype:void 0,P1=T1?T1.valueOf:void 0;function pte(s){return P1?Object(P1.call(s)):{}}var mte=pte,hte=xv,gte=cte,bte=vte,yte=mte,_te=AC,wte="[object Boolean]",Cte="[object Date]",kte="[object Map]",$te="[object Number]",Ste="[object RegExp]",xte="[object Set]",Ote="[object String]",Ete="[object Symbol]",Ate="[object ArrayBuffer]",Tte="[object DataView]",Pte="[object Float32Array]",Mte="[object Float64Array]",Ite="[object Int8Array]",Nte="[object Int16Array]",jte="[object Int32Array]",Dte="[object Uint8Array]",Bte="[object Uint8ClampedArray]",Fte="[object Uint16Array]",Lte="[object Uint32Array]";function Rte(s,l,c){var d=s.constructor;switch(l){case Ate:return hte(s);case wte:case Cte:return new d(+s);case Tte:return gte(s,c);case Pte:case Mte:case Ite:case Nte:case jte:case Dte:case Bte:case Fte:case Lte:return _te(s,c);case kte:return new d;case $te:case Ote:return new d(s);case Ste:return bte(s);case xte:return new d;case Ete:return yte(s)}}var zte=Rte,Vte=Qi,Hte=zn,Ute="[object Map]";function Kte(s){return Hte(s)&&Vte(s)==Ute}var Wte=Kte,Gte=Wte,qte=$v,M1=mo.exports,I1=M1&&M1.isMap,Yte=I1?qte(I1):Gte,Zte=Yte,Xte=Qi,Jte=zn,Qte="[object Set]";function ene(s){return Jte(s)&&Xte(s)==Qte}var tne=ene,nne=tne,rne=$v,N1=mo.exports,j1=N1&&N1.isSet,ane=j1?rne(j1):nne,one=ane,ine=bu,lne=Pee,sne=$C,une=jee,cne=Lee,dne=ki.exports,fne=TC,vne=Hee,pne=Qee,mne=GC,hne=YC,gne=Qi,bne=lte,yne=zte,_ne=PC,wne=hn,Cne=Ir.exports,kne=Zte,$ne=Dt,Sne=one,xne=el,One=Ji,Ene=1,Ane=2,Tne=4,ZC="[object Arguments]",Pne="[object Array]",Mne="[object Boolean]",Ine="[object Date]",Nne="[object Error]",XC="[object Function]",jne="[object GeneratorFunction]",Dne="[object Map]",Bne="[object Number]",JC="[object Object]",Fne="[object RegExp]",Lne="[object Set]",Rne="[object String]",zne="[object Symbol]",Vne="[object WeakMap]",Hne="[object ArrayBuffer]",Une="[object DataView]",Kne="[object Float32Array]",Wne="[object Float64Array]",Gne="[object Int8Array]",qne="[object Int16Array]",Yne="[object Int32Array]",Zne="[object Uint8Array]",Xne="[object Uint8ClampedArray]",Jne="[object Uint16Array]",Qne="[object Uint32Array]",lt={};lt[ZC]=lt[Pne]=lt[Hne]=lt[Une]=lt[Mne]=lt[Ine]=lt[Kne]=lt[Wne]=lt[Gne]=lt[qne]=lt[Yne]=lt[Dne]=lt[Bne]=lt[JC]=lt[Fne]=lt[Lne]=lt[Rne]=lt[zne]=lt[Zne]=lt[Xne]=lt[Jne]=lt[Qne]=!0;lt[Nne]=lt[XC]=lt[Vne]=!1;function Fl(s,l,c,d,f,g){var v,b=l&Ene,$=l&Ane,y=l&Tne;if(c&&(v=f?c(s,d,f,g):c(s)),v!==void 0)return v;if(!$ne(s))return s;var x=wne(s);if(x){if(v=bne(s),!b)return fne(s,v)}else{var C=gne(s),E=C==XC||C==jne;if(Cne(s))return dne(s,b);if(C==JC||C==ZC||E&&!f){if(v=$||E?{}:_ne(s),!b)return $?pne(s,cne(v,s)):vne(s,une(v,s))}else{if(!lt[C])return f?s:{};v=yne(s,C,b)}}g||(g=new ine);var N=g.get(s);if(N)return N;g.set(s,v),Sne(s)?s.forEach(function(Y){v.add(Fl(Y,l,c,Y,s,g))}):kne(s)&&s.forEach(function(Y,re){v.set(re,Fl(Y,l,c,re,s,g))});var W=y?$?hne:mne:$?One:xne,q=x?void 0:W(s);return lne(q||s,function(Y,re){q&&(re=Y,Y=s[re]),sne(v,re,Fl(Y,l,c,re,s,g))}),v}var ere=Fl;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var tre="__lodash_hash_undefined__";function nre(s){return this.__data__.set(s,tre),this}var rre=nre;function are(s){return this.__data__.has(s)}var ore=are,ire=Cv,lre=rre,sre=ore;function fs(s){var l=-1,c=s==null?0:s.length;for(this.__data__=new ire;++l<c;)this.add(s[l])}fs.prototype.add=fs.prototype.push=lre;fs.prototype.has=sre;var ure=fs;function cre(s,l){return s.has(l)}var dre=cre;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function fre(s){var l=-1,c=Array(s.size);return s.forEach(function(d){c[++l]=d}),c}var vre=fre;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function pre(s,l){for(var c=-1,d=s==null?0:s.length;++c<d;)if(l(s[c],c,s))return!0;return!1}var mre=pre,hre=ure,gre=mre,bre=dre,yre=1,_re=2;function wre(s,l,c,d,f,g){var v=c&yre,b=s.length,$=l.length;if(b!=$&&!(v&&$>b))return!1;var y=g.get(s),x=g.get(l);if(y&&x)return y==l&&x==s;var C=-1,E=!0,N=c&_re?new hre:void 0;for(g.set(s,l),g.set(l,s);++C<b;){var W=s[C],q=l[C];if(d)var Y=v?d(q,W,C,l,s,g):d(W,q,C,s,l,g);if(Y!==void 0){if(Y)continue;E=!1;break}if(N){if(!gre(l,function(re,se){if(!bre(N,se)&&(W===re||f(W,re,c,d,g)))return N.push(se)})){E=!1;break}}else if(!(W===q||f(W,q,c,d,g))){E=!1;break}}return g.delete(s),g.delete(l),E}var QC=wre;function Cre(s){var l=-1,c=Array(s.size);return s.forEach(function(d,f){c[++l]=[f,d]}),c}var kre=Cre,D1=Po,B1=EC,$re=Yi,Sre=QC,xre=kre,Ore=vre,Ere=1,Are=2,Tre="[object Boolean]",Pre="[object Date]",Mre="[object Error]",Ire="[object Map]",Nre="[object Number]",jre="[object RegExp]",Dre="[object Set]",Bre="[object String]",Fre="[object Symbol]",Lre="[object ArrayBuffer]",Rre="[object DataView]",F1=D1?D1.prototype:void 0,Gc=F1?F1.valueOf:void 0;function zre(s,l,c,d,f,g,v){switch(c){case Rre:if(s.byteLength!=l.byteLength||s.byteOffset!=l.byteOffset)return!1;s=s.buffer,l=l.buffer;case Lre:return!(s.byteLength!=l.byteLength||!g(new B1(s),new B1(l)));case Tre:case Pre:case Nre:return $re(+s,+l);case Mre:return s.name==l.name&&s.message==l.message;case jre:case Bre:return s==l+"";case Ire:var b=xre;case Dre:var $=d&Ere;if(b||(b=Ore),s.size!=l.size&&!$)return!1;var y=v.get(s);if(y)return y==l;d|=Are,v.set(s,l);var x=Sre(b(s),b(l),d,f,g,v);return v.delete(s),x;case Fre:if(Gc)return Gc.call(s)==Gc.call(l)}return!1}var Vre=zre,L1=GC,Hre=1,Ure=Object.prototype,Kre=Ure.hasOwnProperty;function Wre(s,l,c,d,f,g){var v=c&Hre,b=L1(s),$=b.length,y=L1(l),x=y.length;if($!=x&&!v)return!1;for(var C=$;C--;){var E=b[C];if(!(v?E in l:Kre.call(l,E)))return!1}var N=g.get(s),W=g.get(l);if(N&&W)return N==l&&W==s;var q=!0;g.set(s,l),g.set(l,s);for(var Y=v;++C<$;){E=b[C];var re=s[E],se=l[E];if(d)var de=v?d(se,re,E,l,s,g):d(re,se,E,s,l,g);if(!(de===void 0?re===se||f(re,se,c,d,g):de)){q=!1;break}Y||(Y=E=="constructor")}if(q&&!Y){var he=s.constructor,ge=l.constructor;he!=ge&&"constructor"in s&&"constructor"in l&&!(typeof he=="function"&&he instanceof he&&typeof ge=="function"&&ge instanceof ge)&&(q=!1)}return g.delete(s),g.delete(l),q}var Gre=Wre,qc=bu,qre=QC,Yre=Vre,Zre=Gre,R1=Qi,z1=hn,V1=Ir.exports,Xre=hu,Jre=1,H1="[object Arguments]",U1="[object Array]",yl="[object Object]",Qre=Object.prototype,K1=Qre.hasOwnProperty;function eae(s,l,c,d,f,g){var v=z1(s),b=z1(l),$=v?U1:R1(s),y=b?U1:R1(l);$=$==H1?yl:$,y=y==H1?yl:y;var x=$==yl,C=y==yl,E=$==y;if(E&&V1(s)){if(!V1(l))return!1;v=!0,x=!1}if(E&&!x)return g||(g=new qc),v||Xre(s)?qre(s,l,c,d,f,g):Yre(s,l,$,c,d,f,g);if(!(c&Jre)){var N=x&&K1.call(s,"__wrapped__"),W=C&&K1.call(l,"__wrapped__");if(N||W){var q=N?s.value():s,Y=W?l.value():l;return g||(g=new qc),f(q,Y,c,d,g)}}return E?(g||(g=new qc),Zre(s,l,c,d,f,g)):!1}var tae=eae,nae=tae,W1=zn;function e2(s,l,c,d,f){return s===l?!0:s==null||l==null||!W1(s)&&!W1(l)?s!==s&&l!==l:nae(s,l,c,d,e2,f)}var Pv=e2,rae=Pv;function aae(s,l){return rae(s,l)}var oae=aae;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var iae=Ur,lae=zn,sae="[object Symbol]";function uae(s){return Bt(s)=="symbol"||lae(s)&&iae(s)==sae}var Mv=uae;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function cae(s,l){for(var c=-1,d=s==null?0:s.length,f=Array(d);++c<d;)f[c]=l(s[c],c,s);return f}var t2=cae,G1=Po,dae=t2,fae=hn,vae=Mv,pae=1/0,q1=G1?G1.prototype:void 0,Y1=q1?q1.toString:void 0;function n2(s){if(typeof s=="string")return s;if(fae(s))return dae(s,n2)+"";if(vae(s))return Y1?Y1.call(s):"";var l=s+"";return l=="0"&&1/s==-pae?"-0":l}var mae=n2,hae=mae;function gae(s){return s==null?"":hae(s)}var tl=gae;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var bae=hn,yae=Mv,_ae=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wae=/^\w*$/;function Cae(s,l){if(bae(s))return!1;var c=Bt(s);return c=="number"||c=="symbol"||c=="boolean"||s==null||yae(s)?!0:wae.test(s)||!_ae.test(s)||l!=null&&s in Object(l)}var Iv=Cae,r2=Cv,kae="Expected a function";function Nv(s,l){if(typeof s!="function"||l!=null&&typeof l!="function")throw new TypeError(kae);var c=function(){var d=arguments,f=l?l.apply(this,d):d[0],g=c.cache;if(g.has(f))return g.get(f);var v=s.apply(this,d);return c.cache=g.set(f,v)||g,v};return c.cache=new(Nv.Cache||r2),c}Nv.Cache=r2;var $ae=Nv,Sae=$ae,xae=500;function Oae(s){var l=Sae(s,function(d){return c.size===xae&&c.clear(),d}),c=l.cache;return l}var Eae=Oae,Aae=Eae,Tae=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Pae=/\\(\\)?/g,Mae=Aae(function(s){var l=[];return s.charCodeAt(0)===46&&l.push(""),s.replace(Tae,function(c,d,f,g){l.push(f?g.replace(Pae,"$1"):d||c)}),l}),Iae=Mae,Nae=hn,jae=Iv,Dae=Iae,Bae=tl;function Fae(s,l){return Nae(s)?s:jae(s,l)?[s]:Dae(Bae(s))}var _u=Fae,Lae=Mv,Rae=1/0;function zae(s){if(typeof s=="string"||Lae(s))return s;var l=s+"";return l=="0"&&1/s==-Rae?"-0":l}var nl=zae,Vae=_u,Hae=nl;function Uae(s,l){l=Vae(l,s);for(var c=0,d=l.length;s!=null&&c<d;)s=s[Hae(l[c++])];return c&&c==d?s:void 0}var jv=Uae;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Kae=jv;function Wae(s,l,c){var d=s==null?void 0:Kae(s,l);return d===void 0?c:d}var Gae=Wae;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function qae(s,l){return s!=null&&l in Object(s)}var Yae=qae,Zae=_u,Xae=Xi,Jae=hn,Qae=Sv,eoe=kv,toe=nl;function noe(s,l,c){l=Zae(l,s);for(var d=-1,f=l.length,g=!1;++d<f;){var v=toe(l[d]);if(!(g=s!=null&&c(s,v)))break;s=s[v]}return g||++d!=f?g:(f=s==null?0:s.length,!!f&&eoe(f)&&Qae(v,f)&&(Jae(s)||Xae(s)))}var roe=noe,aoe=Yae,ooe=roe;function ioe(s,l){return s!=null&&ooe(s,l,aoe)}var loe=ioe;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function soe(s){return function(l){return l==null?void 0:l[s]}}var uoe=soe;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function coe(s){if(Array.isArray(s))return s}function doe(s,l){var c=s==null?null:typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(c!=null){var d,f,g,v,b=[],$=!0,y=!1;try{if(g=(c=c.call(s)).next,l!==0)for(;!($=(d=g.call(c)).done)&&(b.push(d.value),b.length!==l);$=!0);}catch(x){y=!0,f=x}finally{try{if(!$&&c.return!=null&&(v=c.return(),Object(v)!==v))return}finally{if(y)throw f}}return b}}function foe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function voe(s,l){return coe(s)||doe(s,l)||bC(s,l)||foe()}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Z1(s,l){var c=Object.keys(l);c.forEach(function(d){s.style[d]=l[d]})}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var poe=Ur,moe=hn,hoe=zn,goe="[object String]";function boe(s){return typeof s=="string"||!moe(s)&&hoe(s)&&poe(s)==goe}var va=boe;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function yoe(){if(typeof navigator>"u"||!navigator)return Number.MAX_SAFE_INTEGER;var s=navigator,l=s.userAgent,c=l.indexOf("compatible")>-1&&l.indexOf("MSIE")>-1,d=l.indexOf("Trident")>-1&&l.indexOf("rv:11.0")>-1;if(c){var f=new RegExp("MSIE (\\d+\\.\\d+);"),g=l.match(f);if(!g)return-1;var v=parseFloat(g[1]);return v<7?6:v}return d?11:Number.MAX_SAFE_INTEGER}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function X1(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function _l(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?X1(Object(c),!0).forEach(function(d){nt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):X1(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function _oe(s){var l,c,d,f={};if(!(!s||typeof window>"u")){var g=(l=window)===null||l===void 0||(c=l.getComputedStyle)===null||c===void 0?void 0:c.call(l,s),v=g.color,b=g.fontSize,$=(d=window)===null||d===void 0||(d=d.navigator)===null||d===void 0?void 0:d.userAgent,y=/Safari/.test($)&&!/Chrome/.test($),x=/(?=.*iPhone)[?=.*MicroMessenger]/.test($)&&!/Chrome/.test($);if((y||x)&&(f={transformOrigin:"0px 0px",transform:"scale(".concat(parseInt(b,10)/12,")")}),v&&yoe()>11){var C=v.match(/[\d.]+/g),E=C?"rgba(".concat(C[0],", ").concat(C[1],", ").concat(C[2],", 0)"):"";Z1(s,_l(_l({},f),{},{background:"conic-gradient(from 90deg at 50% 50%,".concat(E," 0deg, ").concat(v," 360deg)")}))}else Z1(s,_l(_l({},f),{},{background:""}))}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var woe=ref();function rl(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:void 0,l=arguments.length>1?arguments[1]:void 0,c=getCurrentInstance()?inject(IQ,null):woe,d=computed(function(){return(c==null?void 0:c.value)||MQ}),f=computed(function(){return Object.assign({},d.value[s],l)}),g=computed(function(){return d.value.classPrefix}),v=function(b){for(var $=arguments.length,y=new Array($>1?$-1:0),x=1;x<$;x++)y[x-1]=arguments[x];var C=y[0];if(va(b)){if(!C)return b;var E=/\{\s*([\w-]+)\s*\}/g,N=b.replace(E,function(W,q){return C?String(C[q]):""});return N}return Jn(b)?y.length?b.apply(void 0,y):b(h):""};return{t:v,global:f,globalConfig:f,classPrefix:g}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Ot(s){var l=rl("classPrefix"),c=l.classPrefix;return computed(function(){return s?"".concat(c.value,"-").concat(s):c.value})}function a2(){var s=rl("classPrefix"),l=s.classPrefix;return{SIZE:computed(function(){return{small:"".concat(l.value,"-size-s"),medium:"".concat(l.value,"-size-m"),large:"".concat(l.value,"-size-l"),default:"",xs:"".concat(l.value,"-size-xs"),xl:"".concat(l.value,"-size-xl"),block:"".concat(l.value,"-size-full-width")}}),STATUS:computed(function(){return{loading:"".concat(l.value,"-is-loading"),loadMore:"".concat(l.value,"-is-load-more"),disabled:"".concat(l.value,"-is-disabled"),focused:"".concat(l.value,"-is-focused"),success:"".concat(l.value,"-is-success"),error:"".concat(l.value,"-is-error"),warning:"".concat(l.value,"-is-warning"),selected:"".concat(l.value,"-is-selected"),active:"".concat(l.value,"-is-active"),checked:"".concat(l.value,"-is-checked"),current:"".concat(l.value,"-is-current"),hidden:"".concat(l.value,"-is-hidden"),visible:"".concat(l.value,"-is-visible"),expanded:"".concat(l.value,"-is-expanded"),indeterminate:"".concat(l.value,"-is-indeterminate")}})}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Coe=defineComponent({name:"TLoadingGradient",setup:function(){var s=Ot();return onMounted(function(){var l=getCurrentInstance().refs.circle;nextTick(function(){_oe(l)})}),{classPrefix:s}},render:function(){var s=this.classPrefix,l="".concat(s,"-loading__gradient"),c=[l,"".concat(s,"-icon-loading")];return createVNode("svg",{class:c,viewBox:"0 0 12 12",version:"1.1",width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg"},[createVNode("foreignObject",{x:"0",y:"0",width:"12",height:"12"},[createVNode("div",{class:"".concat(l,"-conic"),ref:"circle"},null)])])}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Dv={exports:{}},ai={exports:{}};(function(){var s,l,c,d,f,g;typeof performance<"u"&&performance!==null&&performance.now?ai.exports=function(){return performance.now()}:typeof process<"u"&&process!==null&&process.hrtime?(ai.exports=function(){return(s()-f)/1e6},l=process.hrtime,s=function(){var v;return v=l(),v[0]*1e9+v[1]},d=s(),g=process.uptime()*1e9,f=d-g):Date.now?(ai.exports=function(){return Date.now()-c},c=Date.now()):(ai.exports=function(){return new Date().getTime()-c},c=new Date().getTime())}).call(Wa);var koe=ai.exports,dr=typeof window>"u"?Wa:window,wl=["moz","webkit"],no="AnimationFrame",ho=dr["request"+no],$i=dr["cancel"+no]||dr["cancelRequest"+no];for(var Yo=0;!ho&&Yo<wl.length;Yo++)ho=dr[wl[Yo]+"Request"+no],$i=dr[wl[Yo]+"Cancel"+no]||dr[wl[Yo]+"CancelRequest"+no];if(!ho||!$i){var Yc=0,J1=0,Zr=[],$oe=1e3/60;ho=function(s){if(Zr.length===0){var l=koe(),c=Math.max(0,$oe-(l-Yc));Yc=c+l,setTimeout(function(){var d=Zr.slice(0);Zr.length=0;for(var f=function(){if(!d[g].cancelled)try{d[g].callback(Yc)}catch(v){setTimeout(function(){throw v},0)}},g=0;g<d.length;g++)f()},Math.round(c))}return Zr.push({handle:++J1,callback:s,cancelled:!1}),J1},$i=function(s){for(var l=0;l<Zr.length;l++)Zr[l].handle===s&&(Zr[l].cancelled=!0)}}Dv.exports=function(s){return ho.call(dr,s)};Dv.exports.cancel=function(){$i.apply(dr,arguments)};Dv.exports.polyfill=function(s){s||(s=dr),s.requestAnimationFrame=ho,s.cancelAnimationFrame=$i};var Soe=function(s){return(s||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")};function o2(s,l){if(!s||!l)return!1;if(l.indexOf(" ")!==-1)throw new Error("className should not contain space.");return s.classList?s.classList.contains(l):" ".concat(s.className," ").indexOf(" ".concat(l," "))>-1}function lf(s,l){if(s){for(var c=s.className,d=(l||"").split(" "),f=0,g=d.length;f<g;f++){var v=d[f];v&&(s.classList?s.classList.add(v):o2(s,v)||(c+=" ".concat(v)))}s.classList||(s.className=c)}}function sf(s,l){if(!(!s||!l)){for(var c=l.split(" "),d=" ".concat(s.className," "),f=0,g=c.length;f<g;f++){var v=c[f];v&&(s.classList?s.classList.remove(v):o2(s,v)&&(d=d.replace(" ".concat(v," ")," ")))}s.classList||(s.className=Soe(d))}}var wu=function(s,l){var c=Jn(s)?s(l):s;return c?va(c)?document.querySelector(c):c instanceof HTMLElement?c:document.body:document.body},xoe=function(){};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Ooe=HC,Eoe=Qi,Aoe=Xi,Toe=hn,Poe=Zi,Moe=Ir.exports,Ioe=gu,Noe=hu,joe="[object Map]",Doe="[object Set]",Boe=Object.prototype,Foe=Boe.hasOwnProperty;function Loe(s){if(s==null)return!0;if(Poe(s)&&(Toe(s)||typeof s=="string"||typeof s.splice=="function"||Moe(s)||Noe(s)||Aoe(s)))return!s.length;var l=Eoe(s);if(l==joe||l==Doe)return!s.size;if(Ioe(s))return!Ooe(s).length;for(var c in s)if(Foe.call(s,c))return!1;return!0}var Q1=Loe;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function Roe(s,l,c){var d=-1,f=s.length;l<0&&(l=-l>f?0:f+l),c=c>f?f:c,c<0&&(c+=f),f=l>c?0:c-l>>>0,l>>>=0;for(var g=Array(f);++d<f;)g[d]=s[d+l];return g}var i2=Roe;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var zoe=i2;function Voe(s,l,c){var d=s.length;return c=c===void 0?d:c,!l&&c>=d?s:zoe(s,l,c)}var Hoe=Voe,Uoe="\\ud800-\\udfff",Koe="\\u0300-\\u036f",Woe="\\ufe20-\\ufe2f",Goe="\\u20d0-\\u20ff",qoe=Koe+Woe+Goe,Yoe="\\ufe0e\\ufe0f",Zoe="\\u200d",Xoe=RegExp("["+Zoe+Uoe+qoe+Yoe+"]");function Joe(s){return Xoe.test(s)}var l2=Joe;function Qoe(s){return s.split("")}var eie=Qoe,s2="\\ud800-\\udfff",tie="\\u0300-\\u036f",nie="\\ufe20-\\ufe2f",rie="\\u20d0-\\u20ff",aie=tie+nie+rie,oie="\\ufe0e\\ufe0f",iie="["+s2+"]",uf="["+aie+"]",cf="\\ud83c[\\udffb-\\udfff]",lie="(?:"+uf+"|"+cf+")",u2="[^"+s2+"]",c2="(?:\\ud83c[\\udde6-\\uddff]){2}",d2="[\\ud800-\\udbff][\\udc00-\\udfff]",sie="\\u200d",f2=lie+"?",v2="["+oie+"]?",uie="(?:"+sie+"(?:"+[u2,c2,d2].join("|")+")"+v2+f2+")*",cie=v2+f2+uie,die="(?:"+[u2+uf+"?",uf,c2,d2,iie].join("|")+")",fie=RegExp(cf+"(?="+cf+")|"+die+cie,"g");function vie(s){return s.match(fie)||[]}var pie=vie,mie=eie,hie=l2,gie=pie;function bie(s){return hie(s)?gie(s):mie(s)}var yie=bie;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function _ie(s,l,c,d){var f=-1,g=s==null?0:s.length;for(d&&g&&(c=s[++f]);++f<g;)c=l(c,s[f],f,s);return c}var wie=_ie;function Cie(s){return function(l){return s==null?void 0:s[l]}}var kie=Cie,$ie=kie,Sie={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},xie=$ie(Sie),Oie=xie,Eie=Oie,Aie=tl,Tie=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pie="\\u0300-\\u036f",Mie="\\ufe20-\\ufe2f",Iie="\\u20d0-\\u20ff",Nie=Pie+Mie+Iie,jie="["+Nie+"]",Die=RegExp(jie,"g");function Bie(s){return s=Aie(s),s&&s.replace(Tie,Eie).replace(Die,"")}var Fie=Bie,Lie=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;function Rie(s){return s.match(Lie)||[]}var zie=Rie,Vie=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;function Hie(s){return Vie.test(s)}var Uie=Hie,p2="\\ud800-\\udfff",Kie="\\u0300-\\u036f",Wie="\\ufe20-\\ufe2f",Gie="\\u20d0-\\u20ff",qie=Kie+Wie+Gie,m2="\\u2700-\\u27bf",h2="a-z\\xdf-\\xf6\\xf8-\\xff",Yie="\\xac\\xb1\\xd7\\xf7",Zie="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Xie="\\u2000-\\u206f",Jie=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",g2="A-Z\\xc0-\\xd6\\xd8-\\xde",Qie="\\ufe0e\\ufe0f",b2=Yie+Zie+Xie+Jie,y2="[']",e0="["+b2+"]",ele="["+qie+"]",_2="\\d+",tle="["+m2+"]",w2="["+h2+"]",C2="[^"+p2+b2+_2+m2+h2+g2+"]",nle="\\ud83c[\\udffb-\\udfff]",rle="(?:"+ele+"|"+nle+")",ale="[^"+p2+"]",k2="(?:\\ud83c[\\udde6-\\uddff]){2}",$2="[\\ud800-\\udbff][\\udc00-\\udfff]",Ua="["+g2+"]",ole="\\u200d",t0="(?:"+w2+"|"+C2+")",ile="(?:"+Ua+"|"+C2+")",n0="(?:"+y2+"(?:d|ll|m|re|s|t|ve))?",r0="(?:"+y2+"(?:D|LL|M|RE|S|T|VE))?",S2=rle+"?",x2="["+Qie+"]?",lle="(?:"+ole+"(?:"+[ale,k2,$2].join("|")+")"+x2+S2+")*",sle="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ule="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",cle=x2+S2+lle,dle="(?:"+[tle,k2,$2].join("|")+")"+cle,fle=RegExp([Ua+"?"+w2+"+"+n0+"(?="+[e0,Ua,"$"].join("|")+")",ile+"+"+r0+"(?="+[e0,Ua+t0,"$"].join("|")+")",Ua+"?"+t0+"+"+n0,Ua+"+"+r0,ule,sle,_2,dle].join("|"),"g");function vle(s){return s.match(fle)||[]}var ple=vle,mle=zie,hle=Uie,gle=tl,ble=ple;function yle(s,l,c){return s=gle(s),l=c?void 0:l,l===void 0?hle(s)?ble(s):mle(s):s.match(l)||[]}var _le=yle,wle=wie,Cle=Fie,kle=_le,$le="[']",Sle=RegExp($le,"g");function xle(s){return function(l){return wle(kle(Cle(l).replace(Sle,"")),s,"")}}var O2=xle;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Ole=Hoe,Ele=l2,Ale=yie,Tle=tl;function Ple(s){return function(l){l=Tle(l);var c=Ele(l)?Ale(l):void 0,d=c?c[0]:l.charAt(0),f=c?Ole(c,1).join(""):l.slice(1);return d[s]()+f}}var Mle=Ple,Ile=Mle,Nle=Ile("toUpperCase"),jle=Nle,Dle=tl,Ble=jle;function Fle(s){return Ble(Dle(s).toLowerCase())}var Lle=Fle,Rle=Lle,zle=O2,Vle=zle(function(s,l,c){return l=l.toLowerCase(),s+(c?Rle(l):l)}),Cu=Vle;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Hle=O2,Ule=Hle(function(s,l,c){return s+(c?"-":"")+l.toLowerCase()}),ku=Ule;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function $u(s){var l;return Dt(s)&&"defaultNode"in s?l=s.defaultNode:(isVNode$1(s)||va(s))&&(l=s),l}function Su(s){return Dt(s)&&"params"in s?s.params:{}}function Kle(s){return Dt(s)&&"slotFirst"in s?s.slotFirst:{}}function a0(s,l,c){var d,f,g,v,b=(d=(f=s.$slots)[Cu(c)])===null||d===void 0?void 0:d.call(f,l);return b||(b=(g=(v=s.$slots)[ku(c)])===null||g===void 0?void 0:g.call(v,l),b)?b:null}var vs=function(s,l,c){var d=Su(c),f=$u(c),g;if(l in s&&(g=s[l]),!(g===!1||g===null)){if(g===!0&&f)return a0(s,d,l)||f;if(Jn(g))return g(h,d);var v=[void 0,d,""].includes(g);return v&&(s.$slots[Cu(l)]||s.$slots[ku(l)])?a0(s,d,l):g}},Wle=function(s,l,c,d){var f=Su(d),g=$u(d),v=f?{params:f}:void 0,b=vs(s,l,v),$=vs(s,c,v),y=Q1(b)?$:b;return Q1(y)?g:y};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Gle={attach:{type:[String,Function],default:""},content:{type:[String,Function]},default:{type:[String,Function]},delay:{type:Number,default:0},fullscreen:Boolean,indicator:{type:[Boolean,Function],default:!0},inheritColor:Boolean,loading:{type:Boolean,default:!0},preventScrollThrough:{type:Boolean,default:!0},showOverlay:{type:Boolean,default:!0},size:{type:String,default:"medium"},text:{type:[String,Function]},zIndex:{type:Number}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var E2=function(s,l){var c=Jn(s)?computed(s):ref(s),d=Jn(l)?computed(l):ref(l),f=ref(),g=function(){f.value=xoe()||wu(c.value,d.value)};return onMounted(function(){return g()}),watch([c,d],function(){return g()}),f};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var qle=function(){return{name:Ot("loading"),centerClass:Ot("loading--center"),fullscreenClass:Ot("loading__fullscreen"),lockClass:Ot("loading--lock"),overlayClass:Ot("loading__overlay"),relativeClass:Ot("loading__parent"),fullClass:Ot("loading--full"),inheritColorClass:Ot("loading--inherit-color")}},df=defineComponent({name:"TLoading",inheritAttrs:!1,props:Gle,setup:function(s,l){var c=l.slots,d=ref(!1),f=qle(),g=f.name,v=f.centerClass,b=f.fullscreenClass,$=f.lockClass,y=f.overlayClass,x=f.relativeClass,C=f.fullClass,E=f.inheritColorClass,N=Ot(),W=a2(),q=W.SIZE,Y=function(){d.value=!1;var yy=setTimeout(function(){d.value=!0,clearTimeout(yy)},s.delay)},re=E2(function(){return s.attach}),se=computed(function(){return!!(!s.delay||s.delay&&d.value)}),de=computed(function(){var yy={};return s.zIndex!==void 0&&(yy.zIndex=s.zIndex),["small","medium","large"].includes(s.size)||(yy["font-size"]=s.size),yy}),he=computed(function(){return!!(s.default||c.default||s.content||c.content)}),ge=computed(function(){return s.preventScrollThrough&&s.fullscreen}),Se=computed(function(){return!!(s.text||c.text)}),Ae=computed(function(){return he.value&&s.loading&&se.value}),Re=computed(function(){return s.fullscreen&&s.loading&&se.value}),Be=computed(function(){return s.attach&&s.loading&&se.value}),Ke=computed(function(){return s.attach&&s.loading&&se.value}),Lr=computed(function(){var yy=[v.value,q.value[s.size],nt({},E.value,s.inheritColor)],my=[g.value,b.value,v.value,y.value];return{baseClasses:yy,attachClasses:yy.concat([g.value,C.value,nt({},y.value,s.showOverlay)]),withContentClasses:yy.concat([g.value,C.value,nt({},y.value,s.showOverlay)]),fullScreenClasses:my,normalClasses:yy.concat([g.value])}}),_y=toRefs(s),by=_y.loading;return watch([by],function(yy){var my=voe(yy,1),$t=my[0];$t?(Y(),ge.value&&lf(document.body,$.value)):ge.value&&sf(document.body,$.value)}),onMounted(function(){s.delay&&Y()}),{classPrefix:N,relativeClass:x,delayShowLoading:d,styles:de,showText:Se,hasContent:he,classes:Lr,lockFullscreen:ge,showWrapLoading:Ae,showNormalLoading:Be,showFullScreenLoading:Re,showAttachedLoading:Ke,teleportElement:re}},render:function(){var s=this,l=this.classes,c=l.fullScreenClasses,d=l.baseClasses,f=l.withContentClasses,g=l.attachClasses,v=l.normalClasses,b=createVNode(Coe,{size:this.size},null),$=this.loading&&vs(this,"indicator",b),y=this.showText&&createVNode("div",{class:"".concat(this.classPrefix,"-loading__text")},[vs(this,"text")]);return this.fullscreen?!this.showFullScreenLoading||!this.loading?null:createVNode(Teleport,{disabled:!this.attach||!this.teleportElement,to:this.teleportElement},{default:function(){return[createVNode("div",mergeProps({class:c,style:s.styles},s.$attrs),[createVNode("div",{class:d},[$,y])])]}}):this.hasContent?createVNode("div",mergeProps({class:this.relativeClass},this.$attrs),[Wle(this,"default","content"),this.showWrapLoading&&createVNode("div",{class:f,style:this.styles},[$,y])]):this.attach?!this.showAttachedLoading||!this.loading?null:createVNode(Teleport,{disabled:!this.attach||!this.teleportElement,to:this.teleportElement},{default:function(){return[createVNode("div",mergeProps({class:g,style:s.styles},s.$attrs),[$,y])]}}):this.loading?createVNode("div",mergeProps({class:v,style:this.styles},this.$attrs),[$,y]):null}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function o0(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Yle(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?o0(Object(c),!0).forEach(function(d){nt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):o0(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var Ga=null;function Zle(s){var l=VC({fullscreen:!1,attach:"body",loading:!0,preventScrollThrough:!0},s);return l}function i0(s){var l=Zle(s);if(l.fullscreen&&Ga)return Ga;var c=defineComponent({setup:function(){var x=reactive(l);return{loadingOptions:x}},render:function(){return h(df,Yle({},this.loadingOptions))}}),d=wu(l.fullscreen?"body":l.attach),f=createApp(c),g=f.mount(document.createElement("div")),v=Ot("loading__parent--relative").value,b=Ot("loading--lock"),$=l.preventScrollThrough&&l.fullscreen;$&&lf(document.body,b.value),d?lf(d,v):console.error("attach is not exist");var y={hide:function(){g.loading=!1,sf(d,v),sf(document.body,b.value),f.unmount()}};return y}function A2(s){if(s===!0)return Ga=i0({fullscreen:!0,loading:!0,attach:"body",preventScrollThrough:!0}),Ga;if(s===!1){var l;(l=Ga)===null||l===void 0||l.hide(),Ga=null;return}return i0(s)}var T2=A2;T2.install=function(s){s.config.globalProperties.$loading=A2};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Xle=DC,Jle=el;function Qle(s,l){return s&&Xle(s,l,Jle)}var ese=Qle,tse=bu,nse=Pv,rse=1,ase=2;function ose(s,l,c,d){var f=c.length,g=f,v=!d;if(s==null)return!g;for(s=Object(s);f--;){var b=c[f];if(v&&b[2]?b[1]!==s[b[0]]:!(b[0]in s))return!1}for(;++f<g;){b=c[f];var $=b[0],y=s[$],x=b[1];if(v&&b[2]){if(y===void 0&&!($ in s))return!1}else{var C=new tse;if(d)var E=d(y,x,$,s,l,C);if(!(E===void 0?nse(x,y,rse|ase,d,C):E))return!1}}return!0}var ise=ose,lse=Dt;function sse(s){return s===s&&!lse(s)}var P2=sse,use=P2,cse=el;function dse(s){for(var l=cse(s),c=l.length;c--;){var d=l[c],f=s[d];l[c]=[d,f,use(f)]}return l}var fse=dse;function vse(s,l){return function(c){return c==null?!1:c[s]===l&&(l!==void 0||s in Object(c))}}var M2=vse,pse=ise,mse=fse,hse=M2;function gse(s){var l=mse(s);return l.length==1&&l[0][2]?hse(l[0][0],l[0][1]):function(c){return c===s||pse(c,s,l)}}var bse=gse,yse=Pv,_se=Gae,wse=loe,Cse=Iv,kse=P2,$se=M2,Sse=nl,xse=1,Ose=2;function Ese(s,l){return Cse(s)&&kse(l)?$se(Sse(s),l):function(c){var d=_se(c,s);return d===void 0&&d===l?wse(c,s):yse(l,d,xse|Ose)}}var Ase=Ese,Tse=jv;function Pse(s){return function(l){return Tse(l,s)}}var Mse=Pse,Ise=uoe,Nse=Mse,jse=Iv,Dse=nl;function Bse(s){return jse(s)?Ise(Dse(s)):Nse(s)}var Fse=Bse,Lse=bse,Rse=Ase,zse=Ev,Vse=hn,Hse=Fse;function Use(s){return typeof s=="function"?s:s==null?zse:Bt(s)=="object"?Vse(s)?Rse(s[0],s[1]):Lse(s):Hse(s)}var Kse=Use,Wse=du,Gse=ese,qse=Kse;function Yse(s,l){var c={};return l=qse(l),Gse(s,function(d,f,g){Wse(c,l(d,f,g),d)}),c}var Zse=Yse,ff=Symbol("TdLoading"),l0=function(s,l){var c=l.modifiers,d=c.fullscreen,f=c.inheritColor,g={attach:function(){return s},fullscreen:d??!1,inheritColor:f??!1,loading:l.value};Dt(l.value)&&Zse(l.value,function(v,b){g[b]=v}),s[ff]={options:g,instance:T2(g)}},Xse={mounted:function(s,l){l.value&&l0(s,l)},updated:function(s,l){var c=s[ff],d=l.value,f=l.oldValue;if(!oae(d,f)){var g,v=(g=d==null?void 0:d.loading)!==null&&g!==void 0?g:d;v?l0(s,l):c==null||c.instance.hide()}},unmounted:function(s){var l;(l=s[ff])===null||l===void 0||l.instance.hide()}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function I2(s,l,c){var d=s;return d.install=function(f,g){f.component(l||g||d.name,s),c&&f.directive(c.name,c.comp)},d}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var N2=I2(df,df.name,{name:"loading",comp:Xse});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Jse={block:Boolean,content:{type:[String,Function]},default:{type:[String,Function]},disabled:{type:Boolean,default:void 0},ghost:Boolean,href:{type:String,default:""},icon:{type:Function},loading:Boolean,loadingProps:{type:Object},shape:{type:String,default:"rectangle",validator:function(s){return s?["rectangle","square","round","circle"].includes(s):!0}},size:{type:String,default:"medium",validator:function(s){return s?["extra-small","small","medium","large"].includes(s):!0}},suffix:{type:Function},tag:{type:String,validator:function(s){return s?["button","a","div"].includes(s):!0}},theme:{type:String,validator:function(s){return s?["default","primary","danger","warning","success"].includes(s):!0}},type:{type:String,default:"button",validator:function(s){return s?["submit","reset","button"].includes(s):!0}},variant:{type:String,default:"base",validator:function(s){return s?["base","outline","dashed","text"].includes(s):!0}},onClick:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Qse=yu.expand,eue=yu.ripple,tue=yu.fade;function nue(){var s=rl("animation"),l=s.globalConfig,c=function(d){var f,g,v=l.value;return v&&!((f=v.exclude)!==null&&f!==void 0&&f.includes(d))&&((g=v.include)===null||g===void 0?void 0:g.includes(d))};return{keepExpand:c(Qse),keepRipple:c(eue),keepFade:c(tue)}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function s0(s,l){var c=Object.keys(l);c.forEach(function(d){s.style[d]=l[d]})}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Zc=200,rue="rgba(0, 0, 0, 0)",aue="rgba(0, 0, 0, 0.35)",oue=function(s,l){var c;if(s!=null&&(c=s.dataset)!==null&&c!==void 0&&c.ripple){var d=s.dataset.ripple;return d}var f=getComputedStyle(s).getPropertyValue("--ripple-color");return f||aue};function iue(s,l){var c=ref(null),d=Ot(),f=nue(),g=f.keepRipple,v=function(b){var $=s.value,y=oue($);if(!(b.button!==0||!s||!g)&&!($.classList.contains("".concat(d.value,"-is-active"))||$.classList.contains("".concat(d.value,"-is-disabled"))||$.classList.contains("".concat(d.value,"-is-checked"))||$.classList.contains("".concat(d.value,"-is-loading")))){var x=getComputedStyle($),C=parseInt(x.borderWidth,10),E=C>0?C:0,N=$.offsetWidth,W=$.offsetHeight;c.value.parentNode===null&&(s0(c.value,{position:"absolute",left:"".concat(0-E,"px"),top:"".concat(0-E,"px"),width:"".concat(N,"px"),height:"".concat(W,"px"),borderRadius:x.borderRadius,pointerEvents:"none",overflow:"hidden"}),$.appendChild(c.value));var q=document.createElement("div");s0(q,{marginTop:"0",marginLeft:"0",right:"".concat(N,"px"),width:"".concat(N+20,"px"),height:"100%",transition:"transform ".concat(Zc,"ms cubic-bezier(.38, 0, .24, 1), background ").concat(Zc*2,"ms linear"),transform:"skewX(-8deg)",pointerEvents:"none",position:"absolute",zIndex:0,backgroundColor:y,opacity:"0.9"});for(var Y=new WeakMap,re=$.children.length,se=0;se<re;++se){var de=$.children[se];de.style.zIndex===""&&de!==c.value&&(de.style.zIndex="1",Y.set(de,!0))}var he=$.style.position?$.style.position:getComputedStyle($).position;(he===""||he==="static")&&($.style.position="relative"),c.value.insertBefore(q,c.value.firstChild),setTimeout(function(){q.style.transform="translateX(".concat(N,"px)")},0);var ge=function(){q.style.backgroundColor=rue,s.value&&(s.value.removeEventListener("pointerup",ge,!1),s.value.removeEventListener("pointerleave",ge,!1),setTimeout(function(){q.remove(),c.value.children.length===0&&c.value.remove()},Zc*2+100))};s.value.addEventListener("pointerup",ge,!1),s.value.addEventListener("pointerleave",ge,!1)}};onMounted(function(){var b=s==null?void 0:s.value;b&&(c.value=document.createElement("div"),b.addEventListener("pointerdown",v,!1))}),onUnmounted(function(){var b;s==null||(b=s.value)===null||b===void 0||b.removeEventListener("pointerdown",v,!1)})}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function u0(s,l,c){var d,f,g,v,b=(d=(f=s.slots)[Cu(l)])===null||d===void 0?void 0:d.call(f,c);return b&&b.filter(function($){return $.type.toString()!=="Symbol(v-cmt)"}).length||(b=(g=(v=s.slots)[ku(l)])===null||g===void 0?void 0:g.call(v,c),b&&b.filter(function($){return $.type.toString()!=="Symbol(v-cmt)"}).length)?b:null}function c0(s){if([void 0,null,""].includes(s))return!0;var l=s instanceof Array?s:[s],c=l.filter(function(d){var f;return(d==null||(f=d.type)===null||f===void 0?void 0:f.toString())!=="Symbol(Comment)"});return!c.length}var al=function(){var s=getCurrentInstance();return function(l,c){var d=Su(c),f=$u(c),g=Kle(c),v;if(Object.keys(s.props).includes(l)&&(v=s.props[l]),!(v===!1||v===null)){if(v===!0)return u0(s,l,d)||f;if(Jn(v))return v(h,d);var b=[void 0,d,""].includes(v);return(b||g)&&(s.slots[Cu(l)]||s.slots[ku(l)])?u0(s,l,d):v}}},Bv=function(){var s=al();return function(l,c,d){var f=Su(d),g=$u(d),v=f?{params:f}:void 0,b=s(l,v),$=s(c,v),y=c0(b)?$:b;return c0(y)?g:y}};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var lue=Ur,sue=zn,uue="[object Boolean]";function cue(s){return s===!0||s===!1||sue(s)&&lue(s)==uue}var Cl=cue;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function due(s){var l=getCurrentInstance(),c=computed(function(){return l.props.disabled}),d=inject("formDisabled",Object.create(null));return computed(function(){var f;return Cl(void 0)?s.beforeDisabled.value:Cl(c.value)?c.value:Cl(void 0)?s.afterDisabled.value:Cl((f=d.disabled)===null||f===void 0?void 0:f.value)?d.disabled.value:!1})}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function d0(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function kl(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?d0(Object(c),!0).forEach(function(d){nt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):d0(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var fue=defineComponent({name:"TButton",props:Jse,setup:function(s,l){var c=l.attrs,d=l.slots,f=al(),g=Bv(),v=Ot("button"),b=a2(),$=b.STATUS,y=b.SIZE,x=ref();iue(x);var C=due(),E=computed(function(){var W=s.theme,q=s.variant;return W||(q==="base"?"primary":"default")}),N=computed(function(){return["".concat(v.value),"".concat(v.value,"--variant-").concat(s.variant),"".concat(v.value,"--theme-").concat(E.value),nt(nt(nt(nt(nt(nt({},y.value[s.size],s.size!=="medium"),$.value.disabled,C.value),$.value.loading,s.loading),"".concat(v.value,"--shape-").concat(s.shape),s.shape!=="rectangle"),"".concat(v.value,"--ghost"),s.ghost),y.value.block,s.block)]});return function(){var W=g("default","content"),q=s.loading?createVNode(N2,kl({inheritColor:!0},s.loadingProps),null):f("icon"),Y=q&&!W,re=s.suffix||d.suffix?createVNode("span",{className:"".concat(v.value,"__suffix")},[f("suffix")]):null;W=W?createVNode("span",{class:"".concat(v.value,"__text")},[W]):"",q&&(W=[q,W]),re&&(W=[W].concat(re));var se=function(){return!s.tag&&s.href?"a":s.tag||"button"},de={class:[].concat(yC(N.value),[nt({},"".concat(v.value,"--icon-only"),Y)]),type:s.type,disabled:C.value||s.loading,href:s.href,tabindex:C.value?void 0:"0"};return h(se(),kl(kl(kl({ref:x},c),de),{},{onClick:s.onClick}),[W])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Xc=I2(fue);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var vue=["info","success","warning","error","question","loading"],_n="32px",j2={top:{top:_n,left:"50%",transform:"translateX(-50%)"},center:{left:"50%",top:"50%",transform:"translateX(-50%) translateY(-50%)"},left:{left:_n,top:"50%",transform:"translateY(-50%)"},bottom:{bottom:_n,left:"50%",transform:"translateX(-50%)"},right:{right:_n,top:"50%",transform:"translateY(-50%)",display:"flex",flexDirection:"column",alignItems:"flex-end"},"top-left":{left:_n,top:_n},"top-right":{right:_n,top:_n,display:"flex",flexDirection:"column",alignItems:"flex-end"},"bottom-right":{right:_n,bottom:_n,display:"flex",flexDirection:"column",alignItems:"flex-end"},"bottom-left":{left:_n,bottom:_n}},D2=Object.keys(j2);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var pue={closeBtn:{type:[String,Boolean,Function],default:void 0},content:{type:[String,Function]},duration:{type:Number,default:3e3},icon:{type:[Boolean,Function],default:!0},theme:{type:String,default:"info",validator:function(s){return s?["info","success","warning","error","question","loading"].includes(s):!0}},onClose:Function,onCloseBtnClick:Function,onDurationEnd:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function B2(s){var l=rl("icon"),c=l.globalConfig,d={};return Object.keys(s).forEach(function(f){var g;d[f]=((g=c.value)===null||g===void 0?void 0:g[f])||s[f]}),d}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var F2={duration:200,easing:"linear"};function mue(s,l){if(s){var c=(s==null?void 0:s.offsetWidth)||0,d=(s==null?void 0:s.offsetHeight)||0,f=gue(l,c,d);if(f){var g=f[f.length-1];L2(s,g),s.animate&&s.animate(f,F2)}}}function hue(s,l,c){if(s){var d=(s==null?void 0:s.offsetHeight)||0,f=bue(l,d);if(!f)return c();var g=f[f.length-1];L2(s,g);var v=s.animate&&s.animate(f,F2);v?v.onfinish=function(){s.style.display="none",c()}:(s.style.display="none",c())}}function L2(s,l){for(var c=Object.keys(l),d=0;d<c.length;d+=1){var f=c[d];s.style[f]=l[f]}}function gue(s,l,c){if(!D2.includes(s))return null;if(["top-left","left","bottom-left"].includes(s))return[{opacity:0,marginLeft:"-".concat(l,"px")},{opacity:1,marginLeft:"0"}];if(["top-right","right","bottom-right"].includes(s))return[{opacity:0,marginRight:"-".concat(l,"px")},{opacity:1,marginRight:"0"}];if(["top","center"].includes(s))return[{opacity:0,marginTop:"-".concat(c,"px")},{opacity:1,marginTop:"0"}];if(["bottom"].includes(s))return[{opacity:0,transform:"translate3d(0, ".concat(c,"px, 0)")},{opacity:1,transform:"translate3d(0, 0, 0)"}]}function bue(s,l){if(!D2.includes(s))return null;if(["bottom-left","bottom","bottom-right"].includes(s)){var c="".concat(l,"px");return[{opacity:1,marginTop:"0px"},{opacity:0,marginTop:c}]}var d="-".concat(l,"px");return[{opacity:1,marginTop:"0px"},{opacity:0,marginTop:d}]}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function f0(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function v0(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?f0(Object(c),!0).forEach(function(d){nt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):f0(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var yue=defineComponent({name:"TMessage",props:v0(v0({},pue),{},{placement:String}),setup:function(s,l){var c=l.slots,d=l.expose,f=Ot("message"),g=B2({InfoCircleFilledIcon:tv,CheckCircleFilledIcon:tu,ErrorCircleFilledIcon:nu,HelpCircleFilledIcon:XD,CloseIcon:Ao}),v=g.InfoCircleFilledIcon,b=g.CheckCircleFilledIcon,$=g.ErrorCircleFilledIcon,y=g.HelpCircleFilledIcon,x=g.CloseIcon,C=Ot(),E=al(),N=Bv(),W=ref(null),q=ref(null),Y=computed(function(){var Se={};return vue.forEach(function(Ae){return Se["".concat(C.value,"-is-").concat(Ae)]=s.theme===Ae}),[f.value,Se,nt({},"".concat(C.value,"-is-closable"),s.closeBtn||c.closeBtn)]}),re=function(Se){var Ae,Re;(Ae=s.onClose)===null||Ae===void 0||Ae.call(s,{trigger:"close-click",e:Se}),(Re=s.onCloseBtnClick)===null||Re===void 0||Re.call(s,{e:Se})},se=function(){s.duration&&clearTimeout(q.value)},de=function(){s.duration&&(q.value=Number(setTimeout(function(){se();var Se=W.value;hue(Se,s.placement,function(){var Ae,Re;(Ae=s.onClose)===null||Ae===void 0||Ae.call(s,{trigger:"duration-end"}),(Re=s.onDurationEnd)===null||Re===void 0||Re.call(s)})},s.duration)))},he=function(){var Se=createVNode(x,null,null);return createVNode("span",{class:"".concat(f.value,"__close"),onClick:re},[E("closeBtn",Se)])},ge=function(){if(s.icon!==!1){if(Jn(s.icon))return s.icon(h);if(c.icon)return c.icon(null);var Se={info:v,success:b,warning:$,error:$,question:y,loading:N2}[s.theme];return createVNode(Se,null,null)}};return onBeforeMount(function(){s.duration&&de()}),onMounted(function(){var Se=W.value;mue(Se,s.placement)}),d({close:re}),function(){return createVNode("div",{ref:W,class:Y.value,onMouseenter:se,onMouseleave:de},[ge(),N("content","default"),he()])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function p0(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function Fa(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?p0(Object(c),!0).forEach(function(d){nt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):p0(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var vf=6e3,_ue=function(){var s=0;return function(){return s+=1,s}}(),wue=defineComponent({name:"TMessageList",props:{zIndex:{type:Number,default:0},placement:{type:String,default:""}},setup:function(s,l){var c=l.expose,d=Ot("message__list"),f=ref([]),g=ref([]),v=computed(function(){return Fa(Fa({},j2[s.placement]),{},{zIndex:s.zIndex!==vf?s.zIndex:vf})}),b=function(W){var q=Fa(Fa({},W),{},{key:_ue()});return f.value.push(q),q.key},$=function(W){f.value.splice(W,1)},y=function(){f.value=[]},x=function(W){if(W)return isNaN(Number(W))?W:"".concat(W,"px")},C=function(W){return W.offset&&{position:"relative",left:x(W.offset[0]),top:x(W.offset[1])}},E=function(W,q){return Fa(Fa({},q),{},{onCloseBtnClick:function(Y){return q.onCloseBtnClick&&q.onCloseBtnClick(Y),$(W)},onDurationEnd:function(){return q.onDurationEnd&&q.onDurationEnd(),$(W)}})},N=function(W){W&&g.value.push(W)};return c({add:b,removeAll:y,list:f,messageList:g}),function(){if(f.value.length)return createVNode("div",{class:d.value,style:v.value},[f.value.map(function(W,q){return createVNode(yue,mergeProps({key:W.key,style:C(W),ref:N},E(q,W)),null)})])}}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function m0(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function pf(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?m0(Object(c),!0).forEach(function(d){nt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):m0(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var na=new Map;function Cue(s){var l=pf({duration:3e3,attach:"body",zIndex:vf,placement:"top"},s);return l.content=s.content,l}var kue=function(s){var l=Cue(s),c=l.attach,d=l.placement,f=wu(c);na.get(f)||na.set(f,{});var g=na.get(f)[d],v;if(g)v=g.add(l);else{var b=document.createElement("div"),$=createApp(wue,{zIndex:l.zIndex,placement:l.placement}).mount(b);v=$.add(l),na.get(f)[d]=$,f.appendChild(b)}return new Promise(function(y){var x=na.get(f)[d];nextTick(function(){var C=x.messageList;y(C==null?void 0:C.find(function(E){var N;return((N=E.$)===null||N===void 0||(N=N.vnode)===null||N===void 0?void 0:N.key)===v}))})})},Ar=function(s,l,c){var d={theme:s};return va(l)?d.content=l:Dt(l)&&!(l instanceof Array)&&(d=pf(pf({},d),l)),(c||c===0)&&(d.duration=c),kue(d)},ps={info:function(s,l){return Ar("info",s,l)},success:function(s,l){return Ar("success",s,l)},warning:function(s,l){return Ar("warning",s,l)},error:function(s,l){return Ar("error",s,l)},question:function(s,l){return Ar("question",s,l)},loading:function(s,l){return Ar("loading",s,l)},close:function(s){s.then(function(l){return l==null?void 0:l.close()})},closeAll:function(){na instanceof Map&&na.forEach(function(s){Object.keys(s).forEach(function(l){var c=s[l];c.list=[]})})}},Fv=Ar;Fv.install=function(s){s.config.globalProperties.$message=Ar,Object.keys(ps).forEach(function(l){s.config.globalProperties.$message[l]=ps[l]})};Object.keys(ps).forEach(function(s){Fv[s]=ps[s]});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var $ue="t-display-none-element-refresh";function Sue(){var s=ref(0);provide($ue,s),onUpdated(function(){s.value+=1})}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function xue(s){var l=s==null?0:s.length;return l?s[l-1]:void 0}var Oue=xue;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var h0=Po,Eue=Xi,Aue=hn,g0=h0?h0.isConcatSpreadable:void 0;function Tue(s){return Aue(s)||Eue(s)||!!(g0&&s&&s[g0])}var Pue=Tue,Mue=Av,Iue=Pue;function R2(s,l,c,d,f){var g=-1,v=s.length;for(c||(c=Iue),f||(f=[]);++g<v;){var b=s[g];l>0&&c(b)?l>1?R2(b,l-1,c,d,f):Mue(f,b):d||(f[f.length]=b)}return f}var Nue=R2,jue=Nue;function Due(s){var l=s==null?0:s.length;return l?jue(s,1):[]}var Bue=Due,Fue=Bue,Lue=MC,Rue=IC;function zue(s){return Rue(Lue(s,void 0,Fue),s+"")}var Vue=zue;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var Hue=jv,Uue=i2;function Kue(s,l){return l.length<2?s:Hue(s,Uue(l,0,-1))}var Wue=Kue,Gue=_u,que=Oue,Yue=Wue,Zue=nl;function Xue(s,l){return l=Gue(l,s),s=Yue(s,l),s==null||delete s[Zue(que(l))]}var Jue=Xue,Que=jC;function ece(s){return Que(s)?void 0:s}var tce=ece,nce=t2,rce=ere,ace=Jue,oce=_u,ice=Do,lce=tce,sce=Vue,uce=YC,cce=1,dce=2,fce=4,vce=sce(function(s,l){var c={};if(s==null)return c;var d=!1;l=nce(l,function(g){return g=oce(g,s),d||(d=g.length>1),g}),ice(s,uce(s),c),d&&(c=rce(c,cce|dce|fce,lce));for(var f=l.length;f--;)ace(c,l[f]);return c}),z2=vce;/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function pce(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function mce(s,l,c){return Object.defineProperty(s,"prototype",{writable:!1}),s}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var hce=1e3,gce=5e3,bce=1,yce=mce(function s(){var l=this;pce(this,s),nt(this,"popupStack",{popup:new Set,dialog:new Set,message:new Set}),nt(this,"getNextZIndex",function(c){var d=c==="message"?Array.from(l.popupStack.message).pop()||gce:Array.from(l.popupStack.popup).pop()||hce;return d+bce}),nt(this,"add",function(c){var d=l.getNextZIndex(c);return l.popupStack[c].add(d),c==="dialog"&&l.popupStack.popup.add(d),d}),nt(this,"delete",function(c,d){l.popupStack[d].delete(c),d==="dialog"&&l.popupStack.popup.delete(c)}),nt(this,"isLastDialog",function(c){return l.popupStack.dialog.size>1?c===Array.from(l.popupStack.dialog).pop():!0})}),Jc=new yce;function _ce(s){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.visible,d=l.runOnMounted,f=ref(0),g=function(){f.value=Jc.add(s)},v=function(){Jc.delete(f.value,s)},b=function(){return Jc.isLastDialog(f.value)};return watch(function(){return c==null?void 0:c.value},function($){$?g():v()},{immediate:!0}),d&&(onMounted(function(){g()}),onBeforeUnmount(function(){v()})),{zIndex:readonly(f),open:g,close:v,isLastDialog:b}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var wce={attach:{type:[String,Function]},body:{type:[String,Function]},cancelBtn:{type:[String,Object,Function,null]},closeBtn:{type:[String,Boolean,Function],default:!0},closeOnEscKeydown:{type:Boolean,default:void 0},closeOnOverlayClick:{type:Boolean,default:void 0},confirmBtn:{type:[String,Object,Function,null]},confirmLoading:{type:Boolean,default:void 0},confirmOnEnter:Boolean,default:{type:[String,Function]},destroyOnClose:Boolean,dialogClassName:{type:String,default:""},dialogStyle:{type:Object},draggable:Boolean,footer:{type:[Boolean,Function],default:!0},header:{type:[String,Boolean,Function],default:!0},mode:{type:String,default:"modal",validator:function(s){return s?["modal","modeless","normal","full-screen"].includes(s):!0}},placement:{type:String,default:"top",validator:function(s){return s?["top","center"].includes(s):!0}},preventScrollThrough:{type:Boolean,default:!0},showInAttachedElement:Boolean,showOverlay:{type:Boolean,default:!0},theme:{type:String,default:"default",validator:function(s){return s?["default","info","warning","danger","success"].includes(s):!0}},top:{type:[String,Number]},visible:Boolean,width:{type:[String,Number]},zIndex:{type:Number},onCancel:Function,onClose:Function,onCloseBtnClick:Function,onClosed:Function,onConfirm:Function,onEscKeydown:Function,onOpened:Function,onOverlayClick:Function};/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function b0(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function La(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?b0(Object(c),!0).forEach(function(d){nt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):b0(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function Cce(s){var l=getCurrentInstance(),c=al(),d=function($){var y,x=$.globalConfirm,C=$.theme,E=$.globalConfirmBtnTheme,N=((y=z2(E,["info"]))===null||y===void 0?void 0:y[C])||"primary",W={theme:N,size:$.size,onClick:function(q){s.confirmBtnAction(q)}};return va(x)?W.content=x:Dt(x)&&(W=La(La({},W),x)),W},f=function($){var y=$.globalCancel,x={theme:"default",size:$.size,onClick:function(C){s.cancelBtnAction(C)}};return va(y)?x.content=y:Dt(y)&&(x=La(La({},x),y)),x},g=function($,y){var x=y.defaultButtonProps,C=y.className,E=y.confirmLoading,N=x;return va($)?N.content=$:Dt($)&&(N=La(La({},N),$)),E!==void 0&&(N.loading=E),createVNode(Xc,mergeProps({class:C},N),null)},v=function($){var y=$.confirmBtn,x=$.className,C=$.confirmLoading;if(y===null)return null;y&&l.slots.confirmBtn&&console.warn("Both $props.confirmBtn and $scopedSlots.confirmBtn exist, $props.confirmBtn is preferred.");var E=d($);return!y&&!l.slots.confirmBtn?createVNode(Xc,mergeProps({class:x,loading:C},E),null):y&&["string","object"].includes(Bt(y))?g(y,{defaultButtonProps:E,className:x,confirmLoading:C}):c("confirmBtn")},b=function($){var y=$.cancelBtn,x=$.className;if(y===null)return null;y&&l.slots.cancelBtn&&console.warn("Both $props.cancelBtn and $scopedSlots.cancelBtn exist, $props.cancelBtn is preferred.");var C=f($);return!y&&!l.slots.cancelBtn?createVNode(Xc,mergeProps({class:x},C),null):y&&["string","object"].includes(Bt(y))?g(y,{defaultButtonProps:C}):c("cancelBtn")};return{getConfirmBtn:v,getCancelBtn:b}}function kce(s){var l=!1,c=!1,d=function(v){l&&c&&s(v),l=!1,c=!1},f=function(v){l=v.target===v.currentTarget},g=function(v){c=v.target===v.currentTarget};return{onClick:d,onMousedown:f,onMouseup:g}}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function $ce(){var s=document.createElement("div");s.style.cssText="width: 99px; height: 99px; overflow: scroll; position: absolute; top: -9999px;",document.body.appendChild(s);var l=s.offsetWidth-s.clientWidth;return document.body.removeChild(s),l}/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function y0(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function _0(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?y0(Object(c),!0).forEach(function(d){nt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):y0(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}function w0(s){return Number.isNaN(Number(s))?s:"".concat(Number(s),"px")}var di,Sce=function(s){di={x:s.clientX,y:s.clientY},setTimeout(function(){di=null},100)};typeof window<"u"&&window.document&&window.document.documentElement&&document.documentElement.addEventListener("click",Sce,!0);function xce(s){var l=s,c=window.innerWidth||document.documentElement.clientWidth,d=window.innerHeight||document.documentElement.clientHeight;l.addEventListener("mousedown",function(f){var g=f.clientX-l.offsetLeft,v=f.clientY-l.offsetTop,b=l.offsetWidth,$=l.offsetHeight;if(b>c||$>d)return;function y(C){var E=C.clientX-g,N=C.clientY-v;E<0&&(E=0),N<0&&(N=0),c-l.offsetWidth-E<0&&(E=c-l.offsetWidth),d-l.offsetHeight-N<0&&(N=d-l.offsetHeight),l.style.position="absolute",l.style.left="".concat(E,"px"),l.style.top="".concat(N,"px")}function x(){document.removeEventListener("mousemove",y),document.removeEventListener("mouseup",x)}document.addEventListener("mousemove",y),document.addEventListener("mouseup",x),document.addEventListener("dragend",x)})}var Oce=1,Ece=defineComponent({name:"TDialog",directives:{draggable:function(s,l){s&&l&&l.value&&xce(s)}},inheritAttrs:!1,props:wce,emits:["update:visible"],setup:function(s,l){var c=this,d=Ot("dialog"),f=Ot(),g=Bv(),v=al(),b=ref(null),$=rl("dialog"),y=$.globalConfig,x=B2({CloseIcon:Ao,InfoCircleFilledIcon:tv,CheckCircleFilledIcon:tu,ErrorCircleFilledIcon:nu}),C=x.CloseIcon,E=x.InfoCircleFilledIcon,N=x.CheckCircleFilledIcon,W=x.ErrorCircleFilledIcon,q=function(wy){var tS;(tS=s.onConfirm)===null||tS===void 0||tS.call(s,{e:wy})},Y=function(wy){var tS;(tS=s.onCancel)===null||tS===void 0||tS.call(s,{e:wy}),nS({e:wy,trigger:"cancel"})},re=Cce({confirmBtnAction:q,cancelBtnAction:Y}),se=re.getConfirmBtn,de=re.getCancelBtn,he=E2(function(){return s.attach});Sue();var ge=ref(),Se=ref(),Ae=computed(function(){return s.mode==="modal"}),Re=computed(function(){return s.mode==="modeless"}),Be=computed(function(){return s.mode==="normal"}),Ke=computed(function(){return s.mode==="full-screen"}),Lr=computed(function(){return s.visible}),_y=computed(function(){return["".concat(d.value,"__mask"),!s.showOverlay&&"".concat(f.value,"-is-hidden")]}),by=computed(function(){return Be.value?[]:Ke.value?["".concat(d.value,"__position_fullscreen")]:["".concat(d.value,"__position"),!!s.top&&"".concat(d.value,"--top"),"".concat(s.placement&&!s.top?"".concat(d.value,"--").concat(s.placement):"")]}),yy=computed(function(){return[!Be.value&&"".concat(d.value,"__wrap")]}),my=computed(function(){if(Ke.value)return{};var wy=s.top,tS={};if(wy!==void 0){var yS=w0(wy);tS={paddingTop:yS}}return tS}),$t=computed(function(){var wy=["".concat(d.value),"".concat(d.value,"__modal-").concat(s.theme),Re.value&&s.draggable&&"".concat(d.value,"--draggable"),s.dialogClassName];return Ke.value?wy.push("".concat(d.value,"__fullscreen")):wy.push.apply(wy,["".concat(d.value,"--default"),"".concat(d.value,"--").concat(s.placement)]),wy}),K$=computed(function(){return Ke.value?_0({},s.dialogStyle):_0({width:w0(s.width)},s.dialogStyle)}),Y$=_ce("dialog",{visible:Lr}),W$=Y$.isLastDialog;watch(function(){return s.visible},function(wy){if(wy){var tS;(Ae.value&&!s.showInAttachedElement||Ke.value)&&(s.preventScrollThrough&&document.body.appendChild(Se.value),nextTick(function(){di&&b.value&&(b.value.style.transformOrigin="".concat(di.x-b.value.offsetLeft,"px ").concat(di.y-b.value.offsetTop,"px"))})),(tS=document.activeElement)===null||tS===void 0||tS.blur()}else hy();G$(wy)});function U$(){var wy,tS;(wy=Se.value.parentNode)===null||wy===void 0||(tS=wy.removeChild)===null||tS===void 0||tS.call(wy,Se.value)}function hy(){clearTimeout(ge.value),ge.value=setTimeout(function(){U$()},150)}var G$=function(wy){wy?(document.addEventListener("keydown",$y),s.confirmOnEnter&&document.addEventListener("keydown",ky)):(document.removeEventListener("keydown",$y),s.confirmOnEnter&&document.removeEventListener("keydown",ky))},ky=function(wy){var tS=wy.target;if(tS.tagName.toLowerCase()!=="input"){var yS=wy.code;if((yS==="Enter"||yS==="NumpadEnter")&&W$()){var Q$;(Q$=s.onConfirm)===null||Q$===void 0||Q$.call(s,{e:wy})}}},$y=function(wy){if(wy.code==="Escape"&&W$()){var tS,yS;(tS=s.onEscKeydown)===null||tS===void 0||tS.call(s,{e:wy}),((yS=s.closeOnEscKeydown)!==null&&yS!==void 0?yS:y.value.closeOnEscKeydown)&&nS({e:wy,trigger:"esc"})}},rS=function(wy){var tS;if(s.showOverlay&&((tS=s.closeOnOverlayClick)!==null&&tS!==void 0?tS:y.value.closeOnOverlayClick)){var yS;(yS=s.onOverlayClick)===null||yS===void 0||yS.call(s,{e:wy}),nS({e:wy,trigger:"overlay"})}},lS=kce(rS),bS=lS.onClick,IS=lS.onMousedown,BS=lS.onMouseup,MS=function(wy){var tS;(tS=s.onCloseBtnClick)===null||tS===void 0||tS.call(s,{e:wy}),nS({trigger:"close-btn",e:wy})},zS=function(){var wy;(wy=s.onOpened)===null||wy===void 0||wy.call(s)},LS=function(){var wy;Re.value&&s.draggable&&b.value&&(b.value.style.position="relative",b.value.style.left="unset",b.value.style.top="unset"),(wy=s.onClosed)===null||wy===void 0||wy.call(s)},nS=function(wy){var tS;(tS=s.onClose)===null||tS===void 0||tS.call(s,wy),l.emit("update:visible",!1)},Z$=function(wy){var tS,yS=(tS=c._events)===null||tS===void 0?void 0:tS[wy];return!!(yS!=null&&yS.length)},dS=function(){var wy={info:createVNode(E,{class:"".concat(f.value,"-is-info")},null),warning:createVNode(W,{class:"".concat(f.value,"-is-warning")},null),danger:createVNode(W,{class:"".concat(f.value,"-is-error")},null),success:createVNode(N,{class:"".concat(f.value,"-is-success")},null)};return wy[s.theme]},ES=function(){var wy=createVNode("h5",{class:"title"},null),tS=createVNode(C,null,null),yS=g("default","body"),Q$=createVNode("div",null,[de({cancelBtn:s.cancelBtn,globalCancel:y.value.cancel,className:"".concat(d.value,"__cancel")}),se({theme:s.theme,confirmBtn:s.confirmBtn,globalConfirm:y.value.confirm,globalConfirmBtnTheme:y.value.confirmBtnTheme,className:"".concat(d.value,"__confirm"),confirmLoading:s.confirmLoading})]),eS=Ke.value?["".concat(d.value,"__header"),"".concat(d.value,"__header--fullscreen")]:"".concat(d.value,"__header"),cS=Ke.value?["".concat(d.value,"__close"),"".concat(d.value,"__close--fullscreen")]:"".concat(d.value,"__close"),wS=s.theme==="default"?["".concat(d.value,"__body")]:["".concat(d.value,"__body__icon")],xS=v("footer",Q$);Ke.value&&xS?wS.push("".concat(d.value,"__body--fullscreen")):Ke.value&&wS.push("".concat(d.value,"__body--fullscreen--without-footer"));var OS=Ke.value?["".concat(d.value,"__footer"),"".concat(d.value,"__footer--fullscreen")]:"".concat(d.value,"__footer"),mS=function(pS){Re.value&&s.draggable&&pS.stopPropagation()};return createVNode("div",{class:yy.value},[createVNode("div",{class:by.value,style:my.value,onClick:bS,onMousedown:IS,onMouseup:BS},[withDirectives(createVNode("div",{key:"dialog",class:$t.value,style:K$.value,ref:b},[createVNode("div",{class:eS,onMousedown:mS},[createVNode("div",{class:"".concat(d.value,"__header-content")},[dS(),v("header",wy)]),s.closeBtn?createVNode("span",{class:cS,onClick:MS},[v("closeBtn",tS)]):null]),createVNode("div",{class:wS,onMousedown:mS},[yS]),xS&&createVNode("div",{class:OS,onMousedown:mS},[xS])]),[[resolveDirective("draggable"),Re.value&&s.draggable]])])])};return onMounted(function(){var wy=document.documentElement.scrollHeight>document.documentElement.clientHeight,tS=wy?$ce():0;Se.value=document.createElement("style"),Se.value.dataset.id="td_dialog_".concat(+new Date,"_").concat(Oce+=1),Se.value.innerHTML=`
        html body {
          overflow-y: hidden;
          width: calc(100% - `.concat(tS,`px);
        }
      `)}),onBeforeUnmount(function(){G$(!1),U$()}),{COMPONENT_NAME:d,isModal:Ae,isModeLess:Re,isFullScreen:Ke,maskClass:_y,dialogClass:$t,dialogStyle:K$,dialogEle:b,afterEnter:zS,afterLeave:LS,hasEventOn:Z$,renderDialog:ES,teleportElement:he}},render:function(){var s=this,l=this.COMPONENT_NAME,c=(this.isModal||this.isFullScreen)&&createVNode("div",{key:"mask",class:this.maskClass},null),d=this.renderDialog(),f=[c,d],g={zIndex:this.zIndex},v=["".concat(l,"__ctx"),nt(nt(nt({},"".concat(l,"__ctx--fixed"),this.isModal||this.isFullScreen),"".concat(l,"__ctx--absolute"),this.isModal&&this.showInAttachedElement),"".concat(l,"__ctx--modeless"),this.isModeLess)];return createVNode(Teleport,{disabled:!this.attach||!this.teleportElement,to:this.teleportElement},{default:function(){return[createVNode(Transition$1,{duration:300,name:"".concat(l,"-zoom__vue"),onAfterEnter:s.afterEnter,onAfterLeave:s.afterLeave},{default:function(){return[(!s.destroyOnClose||s.visible)&&withDirectives(createVNode("div",mergeProps({class:v,style:g},s.$attrs),[f]),[[vShow,s.visible]])]}})]}})}});/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */function C0(s,l){var c=Object.keys(s);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(s);l&&(d=d.filter(function(f){return Object.getOwnPropertyDescriptor(s,f).enumerable})),c.push.apply(c,d)}return c}function oi(s){for(var l=1;l<arguments.length;l++){var c=arguments[l]!=null?arguments[l]:{};l%2?C0(Object(c),!0).forEach(function(d){nt(s,d,c[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(s,Object.getOwnPropertyDescriptors(c)):C0(Object(c)).forEach(function(d){Object.defineProperty(s,d,Object.getOwnPropertyDescriptor(c,d))})}return s}var xu=function(s){var l=oi({},s),c=document.createElement("div"),d=ref(!1),f=l.className,g=l.style,v=f,b=function(N,W){if(N){if(v&&v!==N){var q;(q=c.firstElementChild.classList).remove.apply(q,yC(v.split(" ").map(function(Y){return Y.trim()})))}N.split(" ").forEach(function(Y){c.firstElementChild.classList.add(Y.trim())})}W&&(c.firstElementChild.style.cssText+=W),v=N},$=defineComponent({setup:function(N,W){var q=W.expose,Y=ref(l);onMounted(function(){d.value=!0,document.activeElement.blur(),nextTick(function(){b(f,g)})});var re=function(se){Y.value=oi(oi({},l),se)};return q({update:re}),function(){var se=l.onClose||function(){d.value=!1};return delete l.className,delete l.style,h(Ece,oi({onClose:se,visible:d.value},Y.value))}}}),y=createApp($),x=y.mount(c),C=wu(l.attach);C?C.appendChild(c):console.error("attach is not exist");var E={show:function(){d.value=!0},hide:function(){d.value=!1},update:function(N){x.update(z2(N,["className","style"])),b(N.className,N.style)},destroy:function(){d.value=!1,setTimeout(function(){y.unmount(),c.remove()},300)},setConfirmLoading:function(N){x.update({confirmLoading:N})}};return E},Ace=function(s){return xu(s)},Tce=function(s){var l=oi({},s);return l.cancelBtn=null,xu(l)},ms={confirm:Ace,alert:Tce},Ou=xu;Ou.install=function(s){s.config.globalProperties.$dialog=xu,Object.keys(ms).forEach(function(l){s.config.globalProperties.$dialog[l]=ms[l]})};Object.keys(ms).forEach(function(s){Ou[s]=ms[s]});const{container:Lv}=ie(),Fo=s=>Ou.alert({attach:Lv,placement:"center",...s}),Nr=s=>Ou.confirm({attach:Lv,placement:"center",preventScrollThrough:!1,cancelBtn:J("dialog.cancel"),...s}),qe=(s,l)=>{const c=typeof l=="string"?{content:l}:l;return Fv[s]({attach:Lv,...c})},Rv=s=>(pushScopeId("data-v-7c4465fe"),s=s(),popScopeId(),s),Pce={key:0,class:"umo-status-bar"},Mce={class:"umo-status-bar-left"},Ice=Rv(()=>createBaseVNode("div",{class:"bar-split"},null,-1)),Nce=Rv(()=>createBaseVNode("div",{class:"umo-status-bar-split"},null,-1)),jce={key:0},Dce={key:0,class:"umo-word-count-detail"},Bce={class:"umo-word-count-title"},Fce={key:0},Lce={class:"umo-status-bar-right"},Rce=Rv(()=>createBaseVNode("div",{class:"umo-status-bar-split"},null,-1)),zce={class:"umo-zoom-level-bar"},Vce={key:1,class:"umo-preview-bar"},Hce={class:"umo-shortcuts-drawer-header"},Uce={__name:"index",setup(s){const{container:l,options:c,page:d,editor:f}=ie(),g=Je("document"),v=ref(!1),b=inject("reset"),$=()=>{d.value.pagination=!d.value.pagination;const ge=f.value.state.tr.setMeta("splitPage",!1);f.value.view.dispatch(ge)};let y=ref(!1);const x=computed(()=>{const{state:ge}=f.value;if(ge){const{selection:Se}=ge;return ge.doc.textBetween(Se.from,Se.to,"").length}return 0});let C=ref({});onMounted(()=>{C.value=useFullscreen(document.querySelector(l)),Wn("f11, command+f11",C.value.toggle)});const E=async()=>{d.value.showToc=!1,d.value.preview.enabled=!d.value.preview.enabled,d.value.preview.enabled&&(document.querySelector(`${l} .umo-zoomable-container`).scrollTop=0)};onMounted(()=>Wn("f5",E)),watch(()=>d.value.preview.enabled,ge=>{ge?(C.value.enter(),Y(!1,10)):(C.value.exit(),q())}),watch(()=>C.value.isFullscreen,ge=>{ge||(d.value.preview.enabled=!1)},{deep:!0});const N=()=>{d.value.zoomLevel<500&&(d.value.zoomLevel=d.value.zoomLevel+10,d.value.autoWidth=!1)},W=()=>{d.value.zoomLevel>20&&(d.value.zoomLevel=d.value.zoomLevel-10,d.value.autoWidth=!1)},q=()=>{d.value.zoomLevel=100,d.value.autoWidth=!1};Wn("ctrl+-,command+-",W),Wn("ctrl+=,command+=",N),Wn("ctrl+1,command+1",q);const Y=(ge,Se=50)=>{if(ge&&d.value.autoWidth){q();return}try{const Ae=document.querySelector(`${l} .umo-zoomable-container`),Re=Ae.querySelector(".umo-page-content"),Be=Ae.clientWidth,Ke=Re.clientWidth;d.value.zoomLevel=parseInt((Be-Se*2)/Ke*100),d.value.autoWidth=!0}catch(Ae){d.value.autoWidth=!1,qe("error",J("zoom.autoWidthError")),console.warn("Page auto width calculation error",Ae)}};Wn("ctrl+0,command+0",Y),watch(()=>d.value.showToc,()=>{d.value.autoWidth&&Y()});const re=[{content:" ",value:"zh-CN"},{content:" English",value:"en-US"}],se=inject("setLocale"),de=computed(()=>re.find(ge=>ge.value===zt.global.locale.value).content),he=({value:ge})=>{if(zt.global.locale.value===ge)return;const Se=Nr({theme:"warning",header:J("changeLocale.title"),body:J("changeLocale.message"),confirmBtn:{theme:"warning",content:J("changeLocale.confirm")},onConfirm(){Se.destroy(),setTimeout(()=>se(ge),300)}})};return(ge,Se)=>{const Ae=tt,Re=Tt,Be=Oa,Ke=Pn,Lr=qw,_y=Ui,by=oG,yy=NU;return openBlock(),createElementBlock(Fragment$1,null,[unref(d).preview.enabled?(openBlock(),createElementBlock("div",Vce,[createBaseVNode("div",{class:normalizeClass(["item",{active:unref(d).preview.laserPointer}]),onClick:Se[6]||(Se[6]=my=>unref(d).preview.laserPointer=!unref(d).preview.laserPointer)},[createVNode(Ae,{name:"laser-pointer"}),createTextVNode(" "+toDisplayString$1(ge.t("preview.laserPointer")),1)],2),createBaseVNode("div",{class:"item",onClick:E},[createVNode(Ae,{name:"exit"}),createTextVNode(" "+toDisplayString$1(ge.t("preview.exit")),1)])])):(openBlock(),createElementBlock("div",Pce,[createBaseVNode("div",Mce,[createVNode(Be,{content:unref(d).showToc?ge.t("toc.hide"):ge.t("toc.show")},{default:withCtx(()=>[createVNode(Re,{class:normalizeClass(["umo-status-bar-button",{active:unref(d).showToc}]),variant:"text",size:"small",onClick:Se[0]||(Se[0]=my=>unref(d).showToc=!unref(d).showToc)},{default:withCtx(()=>[createVNode(Ae,{name:"toc",color:"red"})]),_:1},8,["class"])]),_:1},8,["content"]),unref(c).document.enableSpellcheck?(openBlock(),createBlock(Be,{key:0,content:unref(g).spellcheck?ge.t("spellcheck.disable"):ge.t("spellcheck.enable")},{default:withCtx(()=>[createVNode(Re,{class:normalizeClass(["umo-status-bar-button",{active:unref(g).spellcheck}]),variant:"text",size:"small",onClick:Se[1]||(Se[1]=my=>unref(g).spellcheck=!unref(g).spellcheck)},{default:withCtx(()=>[createVNode(Ae,{name:"spellcheck",color:"red"})]),_:1},8,["class"])]),_:1},8,["content"])):createCommentVNode("",!0),createVNode(Be,{content:unref(d).pagination?ge.t("pagination.disable"):ge.t("pagination.title")},{default:withCtx(()=>[createVNode(Re,{class:normalizeClass(["umo-status-bar-button",{active:unref(d).pagination}]),variant:"text",size:"small",onClick:$},{default:withCtx(()=>[createVNode(Ae,{name:"page-break"})]),_:1},8,["class"])]),_:1},8,["content"]),createVNode(Be,{content:ge.t("shortcut.title")},{default:withCtx(()=>[createVNode(Re,{class:"umo-status-bar-button",variant:"text",size:"small",onClick:Se[2]||(Se[2]=my=>v.value=!0)},{default:withCtx(()=>[createVNode(Ae,{name:"shortcut"})]),_:1})]),_:1},8,["content"]),createVNode(Be,{content:ge.t("resetAll.title")},{default:withCtx(()=>[createVNode(Re,{class:"umo-status-bar-button",variant:"text",size:"small",onClick:unref(b)},{default:withCtx(()=>[createVNode(Ae,{name:"clear-cache"})]),_:1},8,["onClick"])]),_:1},8,["content"]),Ice,createVNode(Be,{content:ge.t("poweredBy")},{default:withCtx(()=>[createVNode(Re,{class:"umo-status-bar-button",variant:"text",size:"small",href:`https://editor.umodoc.com/${unref(zt).global.locale.value==="zh-CN"?"cn":"en"}/docs`,target:"_blank"},{default:withCtx(()=>[createVNode(Ae,{name:"home-page"})]),_:1},8,["href"])]),_:1},8,["content"]),createVNode(Be,{content:ge.t("feedback")},{default:withCtx(()=>[createVNode(Re,{class:"umo-status-bar-button",variant:"text",size:"small",href:"https://github.com/umodoc/editor/issues",target:"_blank"},{default:withCtx(()=>[createVNode(Ae,{name:"message"})]),_:1})]),_:1},8,["content"]),Nce,unref(f)?(openBlock(),createBlock(Ke,{key:1,modelValue:unref(y),"onUpdate:modelValue":Se[3]||(Se[3]=my=>isRef(y)?y.value=my:y=my),trigger:"click",placement:"top-left"},{content:withCtx(()=>{var my;return[unref(y)?(openBlock(),createElementBlock("div",Dce,[createBaseVNode("div",Bce,toDisplayString$1(ge.t("wordCount.title")),1),createBaseVNode("ul",null,[createBaseVNode("li",null,[createTextVNode(toDisplayString$1(ge.t("wordCount.input"))+" ",1),createBaseVNode("span",null,toDisplayString$1(unref(f).storage.characterCount.characters()),1)]),createBaseVNode("li",null,[createTextVNode(toDisplayString$1(ge.t("wordCount.selection"))+" ",1),createBaseVNode("span",null,toDisplayString$1(unref(x)),1)]),unref(c).document.characterLimit>0?(openBlock(),createElementBlock("li",Fce,[createTextVNode(toDisplayString$1(ge.t("wordCount.limit"))+" ",1),createBaseVNode("span",null,toDisplayString$1(unref(c).document.characterLimit),1)])):createCommentVNode("",!0),createBaseVNode("li",null,[createTextVNode(toDisplayString$1(ge.t("wordCount.currentPage"))+" ",1),createBaseVNode("span",null,toDisplayString$1((my=unref(f))==null?void 0:my.getAttributes("page").pageNumber),1)]),createBaseVNode("li",null,[createTextVNode(toDisplayString$1(ge.t("wordCount.totalPage"))+" ",1),createBaseVNode("span",null,toDisplayString$1(unref(f).$nodes("page").length),1)])])])):createCommentVNode("",!0)]}),default:withCtx(()=>[createVNode(Re,{class:"umo-status-bar-button auto-width word-count",variant:"text",size:"small"},{default:withCtx(()=>[unref(x)>0?(openBlock(),createElementBlock("span",jce,toDisplayString$1(unref(x))+"/ ",1)):createCommentVNode("",!0),createBaseVNode("span",null,toDisplayString$1(unref(f).storage.characterCount.characters()),1),createTextVNode(" "+toDisplayString$1(ge.t("wordCount.characters"))+" ",1),createVNode(Ae,{name:"arrow-down"})]),_:1})]),_:1},8,["modelValue"])):createCommentVNode("",!0)]),createBaseVNode("div",Lce,[createVNode(Be,{content:`${unref(d).preview.enabled?ge.t("preview.disable"):ge.t("preview.title")} (F5)`},{default:withCtx(()=>[createVNode(Re,{class:normalizeClass(["umo-status-bar-button",{active:unref(d).preview.enabled}]),variant:"text",size:"small",onClick:E},{default:withCtx(()=>[createVNode(Ae,{name:"preview"})]),_:1},8,["class"])]),_:1},8,["content"]),createVNode(Be,{content:`${unref(C).isFullscreen?ge.t("fullscreen.disable"):ge.t("fullscreen.title")} (F11 / +F11)`},{default:withCtx(()=>[createVNode(Re,{class:"umo-status-bar-button",variant:"text",size:"small",onClick:unref(C).toggle},{default:withCtx(()=>[createVNode(Ae,{name:unref(C).isFullscreen?"full-screen-exit":"full-screen"},null,8,["name"])]),_:1},8,["onClick"])]),_:1},8,["content"]),Rce,createBaseVNode("div",zce,[createVNode(Be,{content:`${ge.t("zoom.zoomOut")} (${unref(wn)("Ctrl-")})`},{default:withCtx(()=>[createVNode(Re,{class:"umo-status-bar-button",variant:"text",size:"small",disabled:unref(d).zoomLevel<=20,onClick:W},{default:withCtx(()=>[createVNode(Ae,{name:"minus"})]),_:1},8,["disabled"])]),_:1},8,["content"]),createVNode(Lr,{modelValue:unref(d).zoomLevel,"onUpdate:modelValue":Se[4]||(Se[4]=my=>unref(d).zoomLevel=my),class:"umo-zoom-level-slider",min:20,max:500,step:10,"tooltip-props":{showArrow:!1,theme:"light",popperOptions:{modifiers:[{name:"offset",options:{offset:[0,2]}}]}},label:ge.t("zoom.level")+"${value}%%"},null,8,["modelValue","label"]),createVNode(Be,{content:`${ge.t("zoom.zoomIn")} (${unref(wn)("Ctrl+")})`},{default:withCtx(()=>[createVNode(Re,{class:"umo-status-bar-button",variant:"text",size:"small",disabled:unref(d).zoomLevel>=500,onClick:N},{default:withCtx(()=>[createVNode(Ae,{name:"plus"})]),_:1},8,["disabled"])]),_:1},8,["content"]),createVNode(Be,{content:`${ge.t("zoom.autoWidth")} (${unref(wn)("Ctrl0")})`},{default:withCtx(()=>[createVNode(Re,{class:normalizeClass(["umo-status-bar-button",{active:unref(d).autoWidth}]),variant:"text",size:"small",onClick:Se[5]||(Se[5]=my=>Y(!0))},{default:withCtx(()=>[createVNode(Ae,{name:"auto-width"})]),_:1},8,["class"])]),_:1},8,["content"]),createVNode(Be,{content:`${ge.t("zoom.reset")} (${unref(wn)("Ctrl1")})`},{default:withCtx(()=>[createVNode(Re,{class:"umo-status-bar-button auto-width",variant:"text",size:"small",onClick:q},{default:withCtx(()=>[createTextVNode(toDisplayString$1(unref(d).zoomLevel)+"% ",1)]),_:1})]),_:1},8,["content"])]),createVNode(_y,{attach:unref(l),options:re,placement:"top-left",trigger:"click",onClick:he},{default:withCtx(()=>[createVNode(Re,{class:"umo-status-bar-button auto-width umo-lang-button",variant:"text",size:"small",textContent:toDisplayString$1(unref(de)),onClick:q},null,8,["textContent"])]),_:1},8,["attach"])])])),createVNode(yy,{visible:v.value,"onUpdate:visible":Se[7]||(Se[7]=my=>v.value=my),attach:unref(l),size:"320px",footer:!1,"close-btn":!0,"destroy-on-close":"","show-in-attached-element":""},{header:withCtx(()=>[createBaseVNode("div",Hce,[createVNode(Ae,{name:"shortcut"}),createTextVNode(" "+toDisplayString$1(ge.t("shortcut.title")),1)])]),default:withCtx(()=>[createVNode(by)]),_:1},8,["visible","attach"])],64)}}},Kce=Fe(Uce,[["__scopeId","data-v-7c4465fe"]]),Wce={class:"umo-source-editor"},Gce=["textContent"],qce={__name:"source",setup(s){var l;const{options:c,editor:d}=ie(),f=Je("document");loader$n.config({paths:{vs:`${c.value.cdnUrl}/libs/monaco-editor/min/vs`},"vs/nls":{availableLanguages:{"*":"zh-cn"}}});const g={fontSize:14,formatOnType:!0,formatOnPaste:!0,lineNumbersMinChars:3,minimap:{enabled:!1},wordWrap:"on",scrollbar:{verticalScrollbarSize:5,horizontalScrollbarSize:5,scrollbarVisibility:"auto",horizontal:"hidden"}},v=ref(((l=d.value)==null?void 0:l.getHTML())||f.value.content),b=async y=>{setTimeout(()=>{y.getAction("editor.action.formatDocument").run()},200)},$=()=>{f.value.content=v.value};return(y,x)=>(openBlock(),createElementBlock("div",Wce,[createVNode(unref(MonacoEditor),{value:v.value,"onUpdate:value":x[0]||(x[0]=C=>v.value=C),options:g,language:"html",onMount:b,onChange:$},{loading:withCtx(()=>[createBaseVNode("span",{class:"umo-source-editor-loading",textContent:toDisplayString$1(y.t("source.loading"))},null,8,Gce)]),_:1},8,["value"])]))}},Yce=Fe(qce,[["__scopeId","data-v-eba71f83"]]),Zce=["srcdoc"],Xce={__name:"print",setup(s){const{container:l,options:c,editor:d,page:f,printing:g,exportPDF:v}=ie();let b=ref(),$=ref("");const y=()=>{let q="";return document.querySelectorAll("link, style").forEach(Y=>q+=Y.outerHTML+`
`),q},x=()=>{var q;return((q=document.querySelector("#sprite-plyr"))==null?void 0:q.innerHTML)||""},C=()=>{let q="";return document.querySelectorAll(`${l} .umo-page-node-view`).forEach(Y=>{q+=Y.outerHTML}),q},E=computed(()=>c.value.dicts.lineHeights.find(q=>q.default).value),N=()=>{const{orientation:q,size:Y,background:re}=f.value;return`
    <!DOCTYPE html>
    <html lang="zh-CN" theme-mode="${c.value.theme}">
    <head>
      <title>${c.value.document.title}</title>
      <meta charset="UTF-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      ${y()}
      <style>
      body{
        overflow: auto;
        height: auto;
      }
      @page {
        size: ${q==="portrait"?Y.width:Y.height}cm ${q==="portrait"?Y.height:Y.width}cm; 
        margin:0;
        background: ${re};
      }
      </style>
    </head>
    <body class="is-print">
      <div id="sprite-plyr" style="display: none;">
      ${x()}
      </div>
      <div class="umo-editor-container" style="line-height: ${E.value};" aria-expanded="false">
        <div class="tiptap umo-editor" translate="no">
          ${C()}
        </div>
      </div>
    </body>
    </html>`},W=async()=>{d.value.commands.blur(),$.value=N();const q=Nr({theme:"info",header:g.value?J("print.title"):J("export.pdf.title"),body:g.value?J("print.message"):J("export.pdf.message"),confirmBtn:g.value?J("print.confirm"):J("export.pdf.confirm"),onConfirm(){q.destroy(),setTimeout(()=>{b.value.contentWindow.print()},300)},onClosed(){g.value=!1,v.value=!1}})};return watch(()=>[g.value,v.value],q=>{(q[0]||q[1])&&W()}),(q,Y)=>(openBlock(),createElementBlock("iframe",{ref_key:"iframeRef",ref:b,class:"umo-print-iframe",srcdoc:unref($)},null,8,Zce))}},Jce=Fe(Xce,[["__scopeId","data-v-f6ba21fb"]]),Mn={__name:"modal",props:{visible:{type:Boolean,default:!1}},setup(s){const{container:l}=ie();return(c,d)=>{const f=tt,g=iC;return openBlock(),createBlock(g,mergeProps({visible:s.visible,attach:unref(l),"prevent-scroll-through":!1,placement:"center",draggable:"","destroy-on-close":""},c.$attrs),{header:withCtx(()=>[c.$attrs.icon?(openBlock(),createBlock(f,{key:0,name:c.$attrs.icon},null,8,["name"])):createCommentVNode("",!0),createBaseVNode("span",null,toDisplayString$1(c.$attrs.header),1)]),default:withCtx(()=>[renderSlot(c.$slots,"default")]),_:3},16,["visible","attach"])}}},Qce={class:"umo-search-replace-container"},ede={class:"umo-search-text"},tde={class:"umo-replace-text"},nde={class:"umo-advanced-options"},rde={class:"umo-button-actions"},ade={__name:"search-replace",setup(s){const{editor:l,searchReplace:c}=ie();let d=ref(""),f=ref(""),g=ref(!1);Wn("ctrl+f, command+f",()=>c.value=!0);const v=computed(()=>{var W,q,Y;return((Y=(q=(W=l.value)==null?void 0:W.storage)==null?void 0:q.searchAndReplace)==null?void 0:Y.results.length)||0}),b=()=>{d.value="",f.value="",l.value.commands.resetIndex()},$=(W=!1)=>{l.value&&(W&&l.value.commands.resetIndex(),l.value.commands.setSearchTerm(d.value),l.value.commands.setReplaceTerm(f.value),l.value.commands.setCaseSensitive(g.value))},y=()=>{if(!l.value)return;const{results:W,resultIndex:q}=l.value.storage.searchAndReplace,Y=W[q];if(!Y)return;l.value.commands.setTextSelection(Y);const{node:re}=l.value.view.domAtPos(l.value.state.selection.anchor);re&&re.scrollIntoView({behavior:"smooth",block:"center"})};watch(()=>d.value.trim(),(W,q)=>{W||b(),W!==q&&$(!0)}),watch(()=>f.value.trim(),(W,q)=>W===q?null:$()),watch(()=>g.value,(W,q)=>W===q?null:$(!0));const x=()=>{var W;(W=l.value)==null||W.commands.nextSearchResult(),y()},C=()=>{var W;(W=l.value)==null||W.commands.previousSearchResult(),y()},E=()=>{var W;(W=l.value)==null||W.commands.replace(),y()},N=()=>{var W;return(W=l.value)==null?void 0:W.commands.replaceAll()};return watch(()=>c.value,()=>b()),(W,q)=>{const Y=er,re=tt,se=Tt,de=iu,he=Mn;return openBlock(),createBlock(he,{visible:unref(c),icon:"search-replace",header:W.t("search.title"),footer:!1,class:"umo-search-replace-dialog",width:"420px",mode:"modeless","z-index":200,onClose:q[3]||(q[3]=ge=>c.value=!1)},{default:withCtx(()=>[createBaseVNode("div",Qce,[createBaseVNode("div",ede,[createVNode(Y,{modelValue:unref(d),"onUpdate:modelValue":q[0]||(q[0]=ge=>isRef(d)?d.value=ge:d=ge),placeholder:W.t("search.searchText"),clearable:"",autofocus:"",onEnter:x},{suffix:withCtx(()=>{var ge,Se,Ae;return[createTextVNode(toDisplayString$1(unref(d)!==""&&unref(v)!==0?((Ae=(Se=(ge=unref(l))==null?void 0:ge.storage)==null?void 0:Se.searchAndReplace)==null?void 0:Ae.resultIndex)+1:0)+" / "+toDisplayString$1(unref(v)),1)]}),_:1},8,["modelValue","placeholder"]),createVNode(se,{disabled:unref(v)===0,shape:"square",variant:"text",onClick:x},{default:withCtx(()=>[createVNode(re,{name:"arrow-down",class:"icon-next"})]),_:1},8,["disabled"]),createVNode(se,{disabled:unref(v)===0,shape:"square",variant:"text",onClick:C},{default:withCtx(()=>[createVNode(re,{name:"arrow-down",class:"icon-prev"})]),_:1},8,["disabled"])]),createBaseVNode("div",tde,[createVNode(Y,{modelValue:unref(f),"onUpdate:modelValue":q[1]||(q[1]=ge=>isRef(f)?f.value=ge:f=ge),placeholder:W.t("search.replaceText"),clearable:""},null,8,["modelValue","placeholder"])]),createBaseVNode("div",nde,[createVNode(de,{modelValue:unref(g),"onUpdate:modelValue":q[2]||(q[2]=ge=>isRef(g)?g.value=ge:g=ge)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(W.t("search.caseSensitive")),1)]),_:1},8,["modelValue"])]),createBaseVNode("div",rde,[createVNode(se,{disabled:unref(v)===0,theme:"default",variant:"text",textContent:toDisplayString$1(W.t("search.replace")),onClick:E},null,8,["disabled","textContent"]),createVNode(se,{disabled:unref(v)===0,theme:"default",variant:"text",textContent:toDisplayString$1(W.t("search.replaceAll")),onClick:N},null,8,["disabled","textContent"]),createVNode(se,{disabled:unref(v)===0,theme:"primary",textContent:toDisplayString$1(W.t("search.search")),onClick:x},null,8,["disabled","textContent"])])])]),_:1},8,["visible","header"])}}},ode=Fe(ade,[["__scopeId","data-v-063ddf03"]]),zv=s=>(pushScopeId("data-v-d02f5622"),s=s(),popScopeId(),s),ide={class:"umo-comment-header"},lde=zv(()=>createBaseVNode("div",{class:"umo-comment-header-quote"}," Umo Editor  Vue3  Tiptap  ",-1)),sde={class:"umo-comment-header-actions"},ude={class:"umo-comment-body"},cde={key:0,class:"umo-comment-divider"},dde=zv(()=>createBaseVNode("div",{class:"umo-comment-reply-info"}," @, ",-1)),fde=zv(()=>createBaseVNode("div",{class:"umo-comment-reply-detail"}," , ",-1)),vde={__name:"panel",props:{active:{type:Boolean,default:!1},done:{type:Boolean,default:!1}},emits:["done"],setup(s,{emit:l}){const c=l;let d=ref("");const f=()=>{c("done")},g=()=>{console.log("edit")},v=()=>{console.log("reply")},b=()=>{console.log("delete")};return($,y)=>{const x=tt,C=Tt,E=Oa,N=Hr,W=tC,q=Pn;return openBlock(),createElementBlock("div",{class:normalizeClass(["umo-comment-container",{active:s.active,done:s.done}])},[createBaseVNode("div",ide,[lde,createBaseVNode("div",sde,[createVNode(E,{content:""},{default:withCtx(()=>[createVNode(C,{class:normalizeClass({done:s.done}),size:"small",shape:"square",variant:"text",onClick:f},{default:withCtx(()=>[createVNode(x,{name:"check"})]),_:1},8,["class"])]),_:1})])]),createBaseVNode("div",ude,[createVNode(W,{class:"umo-comment-item",avatar:"https://tdesign.gtimg.com/site/avatar.jpg",author:"",datetime:"16:38",content:","},createSlots({actions:withCtx(()=>[createVNode(E,{content:""},{default:withCtx(()=>[createBaseVNode("span",{onClick:g},[createVNode(x,{name:"edit"})])]),_:1}),createVNode(E,{content:""},{default:withCtx(()=>[createBaseVNode("span",{onClick:v},[createVNode(x,{name:"reply"})])]),_:1}),createVNode(E,{content:""},{default:withCtx(()=>[createBaseVNode("span",{onClick:b},[createVNode(x,{name:"node-delete"})])]),_:1})]),_:2},[s.active?{name:"reply",fn:withCtx(()=>[createVNode(N,{class:"umo-comment-reply",modelValue:unref(d),"onUpdate:modelValue":y[0]||(y[0]=Y=>isRef(d)?d.value=Y:d=Y),size:"small",placeholder:"Enter , Shift+Enter ",autosize:"",autofocus:""},null,8,["modelValue"])]),key:"0"}:void 0]),1024),s.active?createCommentVNode("",!0):(openBlock(),createElementBlock("div",cde," 2 ")),createVNode(W,{class:"umo-comment-item",avatar:"https://tdesign.gtimg.com/site/avatar.jpg",author:"",datetime:"16:38",content:"2222222"},{quote:withCtx(()=>[createVNode(q,null,{content:withCtx(()=>[fde]),default:withCtx(()=>[dde]),_:1})]),_:1}),s.active?(openBlock(),createBlock(N,{key:1,class:"umo-comment-reply",modelValue:unref(d),"onUpdate:modelValue":y[1]||(y[1]=Y=>isRef(d)?d.value=Y:d=Y),size:"small",placeholder:"Enter , Shift+Enter ",autosize:"",autofocus:""},null,8,["modelValue"])):createCommentVNode("",!0)])],2)}}},pde=Fe(vde,[["__scopeId","data-v-d02f5622"]]),{container:mde,editor:Qc}=ie(),hde=()=>{const s=document.querySelector(`${mde} .umo-page-node-content .umo-node-focused`);if(s===null)return{offsetTop:null,offsetLeft:null};let{offsetTop:l,offsetLeft:c}=s;return l=s.tagName==="DIV"?l-8:l-5,Qc.value.isActive("horizontalRule")||Qc.value.isActive("table"),Qc.value.isActive("pagination"),{offsetTop:l,offsetLeft:c}},gde=s=>(pushScopeId("data-v-05d76f24"),s=s(),popScopeId(),s),bde={key:0,class:"umo-comments-group-container"},yde={class:"umo-comments-group-header"},_de={class:"umo-comments-group-header-title"},wde=gde(()=>createBaseVNode("span",null," /  (3)",-1)),Cde={class:"umo-comments-group-header-actions"},kde={class:"umo-comments-group-body"},$de={__name:"comments",setup(s){ie();let l=ref(!1),c=ref(0);return(d,f)=>{const g=tt,v=Tt,b=Oa,$=pde;return unref(l)?(openBlock(),createElementBlock("div",bde,[createBaseVNode("div",{style:normalizeStyle(`transform: translateY(${unref(c)}px);`)},[createBaseVNode("div",yde,[createBaseVNode("div",_de,[createVNode(g,{name:"comment"}),wde]),createBaseVNode("div",Cde,[createVNode(b,{content:""},{default:withCtx(()=>[createVNode(v,{size:"small",shape:"square",variant:"text",onClick:f[0]||(f[0]=y=>isRef(l)?l.value=!1:l=!1)},{default:withCtx(()=>[createVNode(g,{name:"close"})]),_:1})]),_:1})])]),createBaseVNode("div",kde,[createVNode($,{active:!0}),createVNode($,{done:!0}),createVNode($)])],4)])):createCommentVNode("",!0)}}},Sde=Fe($de,[["__scopeId","data-v-05d76f24"]]),xde={class:"umo-button-content"},Ode=["innerHTML"],Ede={class:"umo-button-text"},Ade={key:1,class:"umo-button-kbd"},Tde=["innerHTML"],Pde={class:"umo-button-text"},Mde={key:1,class:"umo-button-kbd"},Ide={class:"umo-button-icon-arrow umo-button-handle"},Nde=["innerHTML"],jde={class:"umo-button-text"},Dde={key:1,class:"umo-button-kbd"},Bde={key:2,class:"umo-button-icon-arrow"},Fde={key:0,class:"umo-button-icon-arrow"},Lde=["innerHTML"],Rde={class:"umo-button-text"},zde={key:1,class:"umo-button-kbd"},Vde={class:"umo-button-content"},Hde=["innerHTML"],Ude={class:"umo-button-text"},Kde={key:1,class:"umo-button-kbd"},Wde={key:2,class:"umo-button-icon-arrow"},Gde={key:0,class:"umo-button-icon-arrow"},qde={__name:"button",props:{menuType:{type:String,default:"button"},huge:{type:Boolean,default:!1},ico:{type:String,default:void 0},text:{type:String,default:""},hideText:{type:Boolean,default:!1},tooltip:{type:[String,Boolean],default:void 0},shortcut:{type:String,default:void 0},shortcutText:{type:String,default:void 0},selectOptions:{type:Array},selectValue:{type:[String,Number],default:""},popupVisible:{type:Boolean,default:!1},popupHandle:{type:String},menuActive:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["toggle-popup"],setup(s,{emit:l}){const c=s,d=l,f=useAttrs(),{container:g,editor:v}=ie(),b=Je("toolbar"),$=(...Y)=>{f.onMenuClickThrough?f.onMenuClickThrough(...Y):f.onMenuClick&&f.onMenuClick(...Y)};let y=ref(!1),x=ref(!1);const C=Y=>{x.value=Y},E=()=>c.tooltip===!1?"":c.huge&&c.tooltip?`${c.tooltip}${c.shortcut?` (${wn(c.shortcut)})`:""}`:c.text?`${c.tooltip||c.text}${c.shortcut?` (${wn(c.shortcut)})`:""}`:"";watch(()=>c.popupVisible,Y=>{x.value=Y});const N=ref(null),W=ref(null),q=Y=>{d("toggle-popup",Y)};return onClickOutside(W,()=>{d("toggle-popup",!1)},{ignore:[N,".umo-popup"]}),(Y,re)=>{const se=tt,de=Tt,he=Ui,ge=Wi,Se=Pn,Ae=Ja;return openBlock(),createBlock(Ae,{content:E,visible:unref(y)&&!unref(x),theme:"light",placement:"top",attach:unref(g),"show-arrow":!1,"destroy-on-close":""},{default:withCtx(()=>{var Re,Be,Ke,Lr,_y;return[createBaseVNode("div",{class:"umo-menu-button-wrap",onClick:re[3]||(re[3]=by=>isRef(y)?y.value=!1:y=!1),onMouseover:re[4]||(re[4]=by=>isRef(y)?y.value=!0:y=!0),onMouseleave:re[5]||(re[5]=by=>isRef(y)?y.value=!1:y=!1)},[s.menuType==="button"?(openBlock(),createBlock(de,mergeProps({key:0,class:["umo-menu-button",{huge:s.huge&&unref(b).mode==="ribbon","show-text":!s.hideText,active:s.menuActive&&((Re=unref(v))==null?void 0:Re.isEditable)!==!1}],shape:"square",variant:"text",size:"small",disabled:s.disabled||((Be=unref(v))==null?void 0:Be.isEditable)===!1,onClick:$},unref(f)),{default:withCtx(()=>{var by;return[createBaseVNode("div",xde,[renderSlot(Y.$slots,"default",{},void 0,!0),s.ico?(openBlock(),createElementBlock(Fragment$1,{key:0},[(by=s.ico)!=null&&by.startsWith("<")?(openBlock(),createElementBlock("span",{key:0,class:"icon-svg",innerHTML:s.ico},null,8,Ode)):(openBlock(),createBlock(se,{key:1,class:"umo-button-icon",name:s.ico},null,8,["name"]))],64)):createCommentVNode("",!0),createBaseVNode("p",Ede,toDisplayString$1(s.text),1),s.shortcutText?(openBlock(),createElementBlock("kbd",Ade,toDisplayString$1(unref(wn)(s.shortcutText)),1)):createCommentVNode("",!0)])]}),_:3},16,["class","disabled"])):s.menuType==="dropdown"?(openBlock(),createElementBlock(Fragment$1,{key:1},[s.popupHandle==="arrow"?(openBlock(),createBlock(de,mergeProps({key:0,class:["umo-menu-button has-arrow",{huge:s.huge&&unref(b).mode==="ribbon","show-text":!s.hideText,active:unref(x)}],variant:"text",size:"small"},unref(f),{disabled:s.disabled||((Ke=unref(v))==null?void 0:Ke.isEditable)===!1}),{default:withCtx(()=>{var by;return[createBaseVNode("div",{class:"umo-button-content",onClick:$},[renderSlot(Y.$slots,"default",{},void 0,!0),s.ico?(openBlock(),createElementBlock(Fragment$1,{key:0},[(by=s.ico)!=null&&by.startsWith("<")?(openBlock(),createElementBlock("span",{key:0,class:"icon-svg",innerHTML:s.ico},null,8,Tde)):(openBlock(),createBlock(se,{key:1,class:"umo-button-icon",name:s.ico},null,8,["name"]))],64)):createCommentVNode("",!0),createBaseVNode("p",Pde,toDisplayString$1(s.text),1),s.shortcutText?(openBlock(),createElementBlock("kbd",Mde,toDisplayString$1(unref(wn)(s.shortcutText)),1)):createCommentVNode("",!0)]),createVNode(he,mergeProps(unref(f),{trigger:"click",size:"small",options:s.selectOptions,"popup-props":{overlayClassName:unref(f)["overlay-class-name"],popperOptions:{modifiers:[{name:"offset",options:{offset:[-22,0]}}]},onVisibleChange:C,destroyOnClose:!0,attach:unref(g)},onClick:unref(f).onChange}),{default:withCtx(()=>[createBaseVNode("span",Ide,[createVNode(se,{name:"arrow-down"})]),s.selectOptions?createCommentVNode("",!0):renderSlot(Y.$slots,"dropmenu",{key:0},void 0,!0)]),_:3},16,["options","popup-props","onClick"])]}),_:3},16,["class","disabled"])):(openBlock(),createBlock(he,mergeProps({key:1},unref(f),{trigger:"click",size:"small",options:s.selectOptions,"popup-props":{overlayClassName:unref(f)["overlay-class-name"],onVisibleChange:C,destroyOnClose:!0,attach:unref(g)},onClick:unref(f).onChange}),{default:withCtx(()=>{var by;return[createVNode(de,mergeProps({class:["umo-menu-button has-arrow",{huge:s.huge&&unref(b).mode==="ribbon","show-text":!s.hideText,active:unref(x)}],variant:"text",size:"small"},unref(f),{disabled:s.disabled||((by=unref(v))==null?void 0:by.isEditable)===!1}),{default:withCtx(()=>{var yy;return[createBaseVNode("div",{class:"umo-button-content",onClick:$},[renderSlot(Y.$slots,"default",{},void 0,!0),s.ico?(openBlock(),createElementBlock(Fragment$1,{key:0},[(yy=s.ico)!=null&&yy.startsWith("<")?(openBlock(),createElementBlock("span",{key:0,class:"icon-svg",innerHTML:s.ico},null,8,Nde)):(openBlock(),createBlock(se,{key:1,class:"umo-button-icon",name:s.ico},null,8,["name"]))],64)):createCommentVNode("",!0),createBaseVNode("p",jde,toDisplayString$1(s.text),1),s.shortcutText?(openBlock(),createElementBlock("kbd",Dde,toDisplayString$1(unref(wn)(s.shortcutText)),1)):createCommentVNode("",!0),unref(b).mode==="ribbon"?(openBlock(),createElementBlock("span",Bde,[createVNode(se,{name:"arrow-down"})])):createCommentVNode("",!0)]),unref(b).mode==="classic"?(openBlock(),createElementBlock("span",Fde,[createVNode(se,{name:"arrow-down"})])):createCommentVNode("",!0)]}),_:3},16,["class","disabled"]),s.selectOptions?createCommentVNode("",!0):renderSlot(Y.$slots,"dropmenu",{key:0},void 0,!0)]}),_:3},16,["options","popup-props","onClick"]))],64)):s.menuType==="select"?(openBlock(),createBlock(ge,mergeProps({key:2,size:"small",placement:"bottom-left","on-popup-visible-change":C,value:s.selectValue,"popup-props":{destroyOnClose:!0,attach:unref(g)}},unref(f),{options:s.selectOptions,disabled:s.disabled||((Lr=unref(v))==null?void 0:Lr.isEditable)===!1,onChange:$}),{default:withCtx(()=>[renderSlot(Y.$slots,"default",{},void 0,!0)]),_:3},16,["value","popup-props","options","disabled"])):s.menuType==="popup"?(openBlock(),createElementBlock(Fragment$1,{key:3},[s.popupHandle==="arrow"?(openBlock(),createBlock(de,mergeProps({key:0,class:["umo-menu-button has-arrow",{"show-text":!s.hideText,active:s.popupVisible}],variant:"text",size:"small"},unref(f),{disabled:s.disabled||((_y=unref(v))==null?void 0:_y.isEditable)===!1}),{default:withCtx(()=>{var by;return[createBaseVNode("div",{class:"umo-button-content",onClick:$},[renderSlot(Y.$slots,"default",{},void 0,!0),s.ico?(openBlock(),createElementBlock(Fragment$1,{key:0},[(by=s.ico)!=null&&by.startsWith("<")?(openBlock(),createElementBlock("span",{key:0,class:"icon-svg",innerHTML:s.ico},null,8,Lde)):(openBlock(),createBlock(se,{key:1,class:"umo-button-icon",name:s.ico},null,8,["name"]))],64)):createCommentVNode("",!0),createBaseVNode("p",Rde,toDisplayString$1(s.text),1),s.shortcutText?(openBlock(),createElementBlock("kbd",zde,toDisplayString$1(unref(wn)(s.shortcutText)),1)):createCommentVNode("",!0)]),createVNode(Se,mergeProps({attach:unref(g),trigger:"click",placement:"bottom-left"},unref(f),{visible:s.popupVisible,"popper-options":{modifiers:[{name:"offset",options:{offset:[-22,0]}}]}}),{content:withCtx(()=>[createBaseVNode("div",{class:"umo-popup-content",ref_key:"popupContentRef",ref:W},[renderSlot(Y.$slots,"content",{},void 0,!0)],512)]),default:withCtx(()=>[unref(b).mode==="ribbon"?(openBlock(),createElementBlock("span",{key:0,ref_key:"popupHandleRef",ref:N,class:"umo-button-icon-arrow umo-button-handle",onClick:re[0]||(re[0]=yy=>q())},[createVNode(se,{name:"arrow-down"})],512)):createCommentVNode("",!0),unref(b).mode==="classic"?(openBlock(),createElementBlock("span",{key:1,ref_key:"popupHandleRef",ref:N,class:"umo-button-icon-arrow umo-button-handle",onClick:re[1]||(re[1]=yy=>q())},[createVNode(se,{name:"arrow-down"})],512)):createCommentVNode("",!0)]),_:3},16,["attach","visible"])]}),_:3},16,["class","disabled"])):(openBlock(),createBlock(Se,{key:1,attach:unref(g),trigger:"click",placement:"bottom-left",visible:s.popupVisible},{content:withCtx(()=>[createBaseVNode("div",{class:"umo-popup-content",ref_key:"popupContentRef",ref:W},[renderSlot(Y.$slots,"content",{},void 0,!0)],512)]),default:withCtx(()=>{var by;return[createVNode(de,mergeProps({ref_key:"popupHandleRef",ref:N,class:["umo-menu-button has-arrow",{huge:s.huge&&unref(b).mode==="ribbon","show-text":!s.hideText,active:s.popupVisible}],variant:"text",size:"small"},unref(f),{disabled:s.disabled||((by=unref(v))==null?void 0:by.isEditable)===!1,onClick:re[2]||(re[2]=yy=>q())}),{default:withCtx(()=>{var yy;return[createBaseVNode("div",Vde,[renderSlot(Y.$slots,"default",{},void 0,!0),s.ico?(openBlock(),createElementBlock(Fragment$1,{key:0},[(yy=s.ico)!=null&&yy.startsWith("<")?(openBlock(),createElementBlock("span",{key:0,class:"icon-svg",innerHTML:s.ico},null,8,Hde)):(openBlock(),createBlock(se,{key:1,class:"umo-button-icon",name:s.ico},null,8,["name"]))],64)):createCommentVNode("",!0),createBaseVNode("p",Ude,toDisplayString$1(s.text),1),s.shortcutText?(openBlock(),createElementBlock("kbd",Kde,toDisplayString$1(unref(wn)(s.shortcutText)),1)):createCommentVNode("",!0),unref(b).mode==="ribbon"?(openBlock(),createElementBlock("span",Wde,[createVNode(se,{name:"arrow-down"})])):createCommentVNode("",!0)]),unref(b).mode==="classic"?(openBlock(),createElementBlock("span",Gde,[createVNode(se,{name:"arrow-down"})])):createCommentVNode("",!0)]}),_:3},16,["class","disabled"])]}),_:3},8,["attach","visible"]))],64)):renderSlot(Y.$slots,"default",{key:4},void 0,!0)],32)]}),_:3},8,["visible","attach"])}}},ce=Fe(qde,[["__scopeId","data-v-2048d50b"]]),hs="paragraph",Rt="page",mf="Extend",Eu="Node",Yde=Eu+mf,V2="heading",Vv="bulletList",H2="listItem",U2="taskList",Zde="taskItem",Hv="orderedList",Uv="table",Xde="tableHeader",K2="tableRow",Jde="textBox",W2="image",G2="iframe",Qde="file",q2="codeBlock",efe="audio",Y2="toc",Z2="video",tfe="horizontalrule",nfe="pagination",Kv=[Uv,Hv,Vv,U2],rfe=Extension.create({name:"selection",addProseMirrorPlugins(){const{editor:s}=this;return[new Plugin({key:new PluginKey("selection"),props:{decorations(l){return l.selection.empty||s.isFocused===!0?null:DecorationSet.create(l.doc,[Decoration.inline(l.selection.from,l.selection.to,{class:"umo-text-selection"})])}}})]},addCommands(){return{setCurrentNodeSelection:()=>({editor:s,chain:l})=>{var c;let d=findParentNode(b=>Kv.includes(b.type.name))(s.state.selection);if(d)return l().setNodeSelection(d.pos).run();const{$anchor:f,node:g}=s.state.selection,v=(c=g==null?void 0:g.attrs)!=null&&c.vnode?f.pos:f.pos-f.parentOffset-1;return l().setNodeSelection(v).run()},deleteSelectionNode:()=>({editor:s,chain:l})=>{const c=Ht(s);if(!c)return!1;if(c.attrs.vnode){if(s.isActive("image")||s.isActive("video")||s.isActive("audio")||s.isActive("file")){const{options:d}=ie(),{id:f,src:g}=c;d.value.onFileDelete(f,g)}return l().focus().deleteSelection().run(),!0}return s.isActive("table")?(l().focus().deleteTable().run(),!0):l().focus().deleteNode(c.type.name).run()}}}});function Ht(s){const{node:l}=s.state.selection;if(l)return l;let c=findParentNode(f=>Kv.includes(f.type.name))(s.state.selection);const{$anchor:d}=s.state.selection;return c?d.node(c.depth):(s.commands.selectParentNode(),s.state.selection.node)}function Au(s){const{from:l,to:c,empty:d}=s.state.selection;return d?"":s.state.doc.textBetween(l,c,"")}const afe={__name:"common",setup(s){const{container:l,editor:c,blockMenu:d}=ie();let f=ref(!1);const g=()=>{c.value.chain().focus().setCurrentNodeSelection().unsetAllMarks().run()},v=()=>{c.value.commands.setCurrentNodeSelection(),document.execCommand("copy")},b=()=>{c.value.commands.setCurrentNodeSelection(),document.execCommand("cut")},$=()=>{const x=Ht(c.value),C=()=>{let N=0;return c.value.state.doc.descendants((W,q)=>{W==x&&(N=q+W.nodeSize)}),N},E=x.type.create({...x.attrs,id:fa()},x.content,x.marks);c.value.commands.insertContentAt(C(),E.toJSON())},y=()=>{var x;(x=c.value)==null||x.chain().focus().deleteSelectionNode().run()};return(x,C)=>{const E=ce,N=Vr,W=wr,q=Ui;return openBlock(),createBlock(q,{attach:`${unref(l)} .umo-page-container`,placement:"bottom-right","overlay-class-name":"umo-block-menu-dropdown",trigger:"click","destroy-on-close":!1,"popup-props":{onVisibleChange(Y){unref(c).commands.focus(),d.value=Y,isRef(f)?f.value=Y:f=Y}}},{default:withCtx(()=>[createVNode(E,{class:"umo-block-menu-button","menu-active":unref(f),ico:"block-menu","hide-text":""},null,8,["menu-active"]),createVNode(W,null,{default:withCtx(()=>[createVNode(N,{class:"umo-block-menu-group-name",disabled:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(x.t("blockMenu.common")),1)]),_:1}),createVNode(N,null,{default:withCtx(()=>[createVNode(E,{ico:"node-clear-format",text:x.t("blockMenu.clearFormat"),tooltip:!1,onMenuClick:g},null,8,["text"])]),_:1}),createVNode(N,{divider:""},{default:withCtx(()=>[createVNode(E,{ico:"node-duplicate",text:x.t("blockMenu.duplicate"),tooltip:!1,onMenuClick:$},null,8,["text"])]),_:1}),createVNode(N,null,{default:withCtx(()=>[createVNode(E,{ico:"node-copy",text:x.t("blockMenu.copy"),tooltip:!1,onMenuClick:v},null,8,["text"])]),_:1}),createVNode(N,null,{default:withCtx(()=>[createVNode(E,{ico:"node-cut",text:x.t("blockMenu.cut"),tooltip:!1,onMenuClick:b},null,8,["text"])]),_:1}),createVNode(N,{class:"umo-delete-node"},{default:withCtx(()=>[createVNode(E,{ico:"node-delete-2",text:x.t("blockMenu.delete"),tooltip:!1,onMenuClick:y},null,8,["text"])]),_:1})]),_:1})]),_:1},8,["attach","popup-props"])}}},ofe={class:"umo-mermaid-container"},ife={class:"umo-mermaid-render"},lfe=["textContent"],sfe=["innerHTML"],ufe=`graph TB
a-->b`,cfe={__name:"mermaid",props:{content:{type:String}},setup(s){const l=s;let c=ref(!1);const{editor:d}=ie(),f=()=>{mermaid.initialize({darkMode:!1,startOnLoad:!1,fontSize:12,theme:"base"})},g=()=>{c.value=!0,f()};let v=ref(""),b=ref("");const $=ref(),y=async()=>{try{const{svg:C}=await mermaid.render("mermaid-svg",v.value);b.value=C}catch{b.value=""}};watch(()=>c.value,C=>{C&&(v.value=l.content||ufe)},{immediate:!0}),watch(()=>v.value,async()=>{c.value&&(await nextTick(),y())},{immediate:!0});const x=()=>{var C;if(v.value===""){qe("error",J("tools.mermaid.notEmpty"));return}const E=$.value.querySelector("svg"),N=E.width.animVal.value,W=E.height.animVal.value,q=i$1(b.value);(!l.content||l.content&&l.content!==v.value)&&((C=d.value)==null||C.chain().focus().setImage({type:"mermaid",src:q,content:v.value,width:N,height:W},!!l.content).run()),c.value=!1};return(C,E)=>{const N=Hr,W=Mn,q=ce;return openBlock(),createBlock(q,{ico:s.content?"edit":"mermaid",text:s.content?C.t("tools.mermaid.edit"):C.t("tools.mermaid.text"),huge:"",onMenuClick:g},{default:withCtx(()=>[createVNode(W,{visible:unref(c),icon:"mermaid",header:s.content?C.t("tools.mermaid.edit"):C.t("tools.mermaid.text"),width:"960px",onConfirm:x,onClose:E[1]||(E[1]=Y=>isRef(c)?c.value=C.flase:c=C.flase)},{default:withCtx(()=>[createBaseVNode("div",ofe,[createVNode(N,{class:"umo-mermaid-code",modelValue:unref(v),"onUpdate:modelValue":E[0]||(E[0]=Y=>isRef(v)?v.value=Y:v=Y),autofocus:"",placeholder:C.t("tools.mermaid.placeholder")},null,8,["modelValue","placeholder"]),createBaseVNode("div",ife,[createBaseVNode("div",{class:"umo-mermaid-title",textContent:toDisplayString$1(C.t("tools.mermaid.preview"))},null,8,lfe),createBaseVNode("div",{class:"umo-mermaid-svg narrow-scrollbar",ref_key:"mermaidRef",ref:$,innerHTML:unref(b)},null,8,sfe)])])]),_:1},8,["visible","header"])]),_:1},8,["ico","text"])}}},Tu=Fe(cfe,[["__scopeId","data-v-687c8459"]]),dfe={"zh-CN":"zh","en-US":"en"};class ffe{constructor({domain:l,params:c,container:d}){mt(this,"domain","https://embed.diagrams.net"),mt(this,"params",{ui:"atlas",proto:"json",libraries:1,configure:1,noSaveBtn:1}),mt(this,"xml",null),mt(this,"format","xmlsvg"),this.domain=l??this.domain,this.params=Object.assign(c||{},this.params),this.container=d,this.handleuseMessageEvent=f=>{if(this.frame!==void 0&&f.source===this.frame.contentWindow&&f.data.length>0)try{const g=JSON.parse(f.data);g&&this.handleuseMessage(g)}catch(g){console.error(g)}}}edit(l){let c=this.format;return l.substring(0,15)==="data:image/png;"?c="xmlpng":l.substring(0,19)==="data:image/svg+xml;"&&(c="xmlsvg"),this.startEditing(l,c),this}createFrame(){const l=Object.keys(this.params).map(f=>f+"="+this.params[f]).join("&"),c=dfe[zt.global.locale.value],d=document.createElement("iframe");return d.setAttribute("class","umo-diagrams-iframe"),d.setAttribute("src",`${this.domain}?${l}&lang=${c}`),d}postMessage(l){this.frame&&this.frame.contentWindow.postMessage(JSON.stringify(l),"*")}handleuseMessage(l){l.event==="configure"?this.configureEditor():l.event==="init"?this.initializeEditor():l.event==="save"&&(this.export(l.data),this.xml=l.xml,l.exit?l.event="exit":this.postMessage({action:"status",messageKey:"allChangesSaved",modified:!1})),l.event==="exit"&&(this.format!=="xml"&&this.xml&&this.postMessage({action:"export",format:this.format,xml:this.xml,spinKey:"export"}),this.stopEditing(l))}startEditing(l,c){this.frame||(window.addEventListener("message",this.handleuseMessageEvent),this.format=c??this.format,this.data=l,this.frame=this.createFrame(),document.querySelector(this.container).appendChild(this.frame))}stopEditing(){window.removeEventListener("message",this.handleuseMessageEvent),this.frame=void 0}initializeEditor(){this.postMessage({action:"load",autosave:0,saveAndExit:"1",modified:"unsavedChanges",xml:this.data})}configureEditor(){this.postMessage({action:"configure",config:this.params.configure})}export(l){return l}}const vfe={key:0,class:"umo-diagrams-loading"},pfe=createBaseVNode("div",{class:"umo-diagrams-container"},null,-1),Pu={__name:"diagrams",props:{content:{type:String}},setup(s){const l=s,{container:c,options:d,editor:f}=ie();let g=ref(!1),v=ref(!1);const b=new ffe({domain:d.value.diagrams.domain,params:d.value.diagrams.params,container:`${c} .umo-diagrams-container`}),$=()=>{b.edit(l.content||"")};let y=ref({});const x=C=>{if((C==null?void 0:C.type)!=="message"&&(C==null?void 0:C.origin)!==d.value.diagrams.domain)return;const{event:E,bounds:N,data:W}=C;if(E==="load"&&(v.value=!1),E==="export"){const{width:q,height:Y}=N;(!l.content||l.content&&l.content!==W)&&(y.value={type:"diagrams",src:W,width:q,height:Y,content:W}),g.value=!1;return}E==="exit"&&(g.value=!1)};return watch(()=>g.value,C=>{var E;if(!C){window.removeEventListener("message",x),b.stopEditing(),y.value.type&&((E=f.value)==null||E.chain().focus().setImage(y.value,!!l.content).run());return}v.value=!0,window.addEventListener("message",x),y.value={}}),onBeforeMount(()=>{window.addEventListener("message",x)}),(C,E)=>{const N=Qs,W=Mn,q=ce;return openBlock(),createBlock(q,{ico:s.content?"edit":"diagrams",text:s.content?C.t("tools.diagrams.edit"):C.t("tools.diagrams.text"),huge:"",onMenuClick:E[1]||(E[1]=Y=>isRef(g)?g.value=!0:g=!0)},{default:withCtx(()=>[createVNode(W,{visible:unref(g),icon:"diagrams",header:s.content?C.t("tools.diagrams.edit"):C.t("tools.diagrams.text"),footer:!1,class:"umo-diagrams-dialog",mode:"full-screen",onOpened:$,onClose:E[0]||(E[0]=Y=>isRef(g)?g.value=!1:g=!1)},{default:withCtx(()=>[unref(v)?(openBlock(),createElementBlock("div",vfe,[createVNode(N,{text:C.t("tools.diagrams.loading"),size:"small"},null,8,["text"])])):createCommentVNode("",!0),pfe]),_:1},8,["visible","header"])]),_:1},8,["ico","text"])}}},mfe=["textContent"],hfe={class:"umo-seal-uploader"},gfe={key:0},bfe=["src"],yfe={__name:"seal",setup(s){let l=ref(!1);const{options:c,editor:d}=ie();let f=ref(null),g=ref(null),v=ref(null);const b=async()=>{const{open:y,onChange:x}=useFileDialog({accept:"image/png,image/jpeg",multiple:!1,reset:!0});y(),x(async C=>{if(C&&(v.value=C[0],!!v.value))try{f.value=null,g.value=J("tools.seal.converting1");const E=await removeBackground(v.value,{publicPath:`${c.value.cdnUrl}/libs/imgly/background-removal-data/`,progress:(N,W,q)=>{N.startsWith("fetch")?g.value=J("tools.seal.converting2",{ppercentage:(W/q*100).toFixed(1)}):g.value=J("tools.seal.converting3")}});f.value=URL.createObjectURL(E)}catch{qe("error",J("tools.seal.convertError")),f.value=null}finally{g.value=null}})},$=()=>{var y;if(!f.value){qe("error",J("tools.seal.notEmpty"));return}(y=d.value)==null||y.chain().focus().setImage({type:"seal",src:f.value,width:150,draggable:!0,rotatable:!0,file:v.value}).run(),l.value=!1,f.value=null,g.value=null};return(y,x)=>{const C=Mn,E=ce;return unref(removeBackground)?(openBlock(),createBlock(E,{key:0,ico:"seal",text:y.t("tools.seal.text"),huge:"",onMenuClick:x[1]||(x[1]=N=>isRef(l)?l.value=!0:l=!0)},{default:withCtx(()=>[createVNode(C,{visible:unref(l),icon:"seal",header:y.t("tools.seal.title"),width:"480px","confirm-btn":y.t("tools.seal.insert"),onConfirm:$,onClose:x[0]||(x[0]=N=>isRef(l)?l.value=!1:l=!1)},{default:withCtx(()=>[createBaseVNode("div",{class:"umo-seal-container",onClick:b},[createBaseVNode("div",{class:"umo-seal-tip",textContent:toDisplayString$1(y.t("tools.seal.tip"))},null,8,mfe),createBaseVNode("div",hfe,[unref(f)?(openBlock(),createElementBlock("img",{key:1,class:"umo-seal-img",src:unref(f)},null,8,bfe)):(openBlock(),createElementBlock("span",gfe,toDisplayString$1(unref(g)?unref(g):y.t("tools.seal.insertTip")),1))])])]),_:1},8,["visible","header","confirm-btn"])]),_:1},8,["text"])):createCommentVNode("",!0)}}},Wv=Fe(yfe,[["__scopeId","data-v-d996b14a"]]),_fe=s=>(pushScopeId("data-v-4b36cad4"),s=s(),popScopeId(),s),wfe={class:"umo-color-picker-container"},Cfe={class:"umo-color-picker-default-button"},kfe={class:"umo-color-picker-group"},$fe=["onClick"],Sfe=["textContent"],xfe={class:"umo-color-picker-group"},Ofe=["onClick"],Efe=["textContent"],Afe={key:1,class:"umo-color-picker-group"},Tfe=["onClick"],Pfe=_fe(()=>createBaseVNode("div",{class:"umo-color-picker-divider"},null,-1)),Mfe={class:"umo-color-picker-more-menu"},Ife=["textContent"],Nfe={class:"umo-color-picker-more-arrow"},jfe={__name:"color-picker",props:{defaultColor:{type:String,default:"#000"}},emits:["change"],setup(s,{emit:l}){const c=s,d=l,{editor:f,container:g,options:v}=ie(),b=Je("recent"),$=["#B12318","#EB3323","#F6C143","#FFFE55","#A0CD63","#4FAD5B","#4CAFEA","#2D70BA","#06215C","#68389B"],y=ref(c.defaultColor),x=ref(!1),C=(N,W)=>{W&&W.trigger!=="palette-saturation-brightness"||(b.value.colors.forEach((q,Y)=>{q===N&&b.value.colors.splice(Y,1)}),b.value.colors.unshift(N),b.value.colors.length>10&&b.value.colors.splice(10,1),d("change",N))};watch(()=>x.value,N=>{N&&f.value.commands.focus(void 0,{scrollIntoView:!1})});const E=N=>{C(N),d("change",N)};return(N,W)=>{const q=Tt,Y=tt,re=eC,se=Pn;return openBlock(),createElementBlock("div",wfe,[createBaseVNode("div",Cfe,[createVNode(q,{theme:"default",variant:"outline",size:"small",block:"",textContent:toDisplayString$1(N.t("colorPicker.default")),onClick:W[0]||(W[0]=de=>E(y.value))},null,8,["textContent"])]),createBaseVNode("div",kfe,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(v).dicts.colors,(de,he)=>(openBlock(),createElementBlock("div",{class:"umo-color-picker-item",key:he,style:normalizeStyle({backgroundColor:de}),onClick:ge=>E(de)},null,12,$fe))),128))]),createBaseVNode("div",{class:"umo-color-picker-group-title",textContent:toDisplayString$1(N.t("colorPicker.standard"))},null,8,Sfe),createBaseVNode("div",xfe,[(openBlock(),createElementBlock(Fragment$1,null,renderList($,(de,he)=>createBaseVNode("div",{class:"umo-color-picker-item",key:he,style:normalizeStyle({backgroundColor:de}),onClick:ge=>E(de)},null,12,Ofe)),64))]),unref(b).colors.length>0?(openBlock(),createElementBlock("div",{key:0,class:"umo-color-picker-group-title",textContent:toDisplayString$1(N.t("colorPicker.recent"))},null,8,Efe)):createCommentVNode("",!0),unref(b).colors.length>0?(openBlock(),createElementBlock("div",Afe,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(b).colors,(de,he)=>(openBlock(),createElementBlock("div",{class:"umo-color-picker-item",key:he,style:normalizeStyle({backgroundColor:de}),onClick:ge=>E(de)},null,12,Tfe))),128))])):createCommentVNode("",!0),Pfe,createVNode(se,{attach:unref(g),trigger:"click",placement:"right-bottom",onVisibleChange:W[2]||(W[2]=de=>x.value=de)},{content:withCtx(()=>[createVNode(re,{modelValue:y.value,"onUpdate:modelValue":W[1]||(W[1]=de=>y.value=de),size:"small","color-modes":["monochrome"],"swatch-colors":[],"enable-alpha":"",onChange:C},null,8,["modelValue"])]),default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["umo-color-picker-more",{active:x.value}])},[createBaseVNode("div",Mfe,[createVNode(Y,{style:normalizeStyle({color:y.value}),name:"palette-color"},null,8,["style"]),createBaseVNode("span",{textContent:toDisplayString$1(N.t("colorPicker.more"))},null,8,Ife)]),createBaseVNode("div",Nfe,[createVNode(Y,{name:"arrow-down"})])],2)]),_:1},8,["attach"])])}}},Mu=Fe(jfe,[["__scopeId","data-v-4b36cad4"]]);function Qt(){const s=ref(!1);return{popupVisible:s,togglePopup:l=>{s.value=l!==void 0?l:!s.value}}}const Dfe={__name:"color",props:{text:{type:String,default:J("base.color")},modeless:{type:Boolean,default:!1},defaultColor:{type:String,default:"#000"}},emits:["change"],setup(s,{emit:l}){const c=s,d=l;let{popupVisible:f,togglePopup:g}=Qt();const{editor:v}=ie();let b=ref();const $=y=>{var x,C;if(b.value=y,f.value=!1,c.modeless){d("change",b.value);return}y!==""?(x=v.value)==null||x.chain().focus().setColor(y).run():(C=v.value)==null||C.chain().focus().unsetColor().run()};return(y,x)=>{const C=Mu,E=ce;return openBlock(),createBlock(E,{ico:"color",text:s.text,"menu-type":"popup","popup-handle":"arrow","hide-text":"","popup-visible":unref(f),onTogglePopup:unref(g),onMenuClick:x[0]||(x[0]=N=>$(unref(b)))},{content:withCtx(()=>[createVNode(C,{"default-color":s.defaultColor,onChange:$},null,8,["default-color"])]),default:withCtx(()=>{var N,W;return[createBaseVNode("div",{class:"umo-current-color",style:normalizeStyle({background:((W=(N=unref(v))==null?void 0:N.getAttributes("textStyle"))==null?void 0:W.color)||unref(b)})},null,4)]}),_:1},8,["text","popup-visible","onTogglePopup"])}}},Aa=Fe(Dfe,[["__scopeId","data-v-dd3a4430"]]),Bfe={class:"umo-signature-toolbar"},Ffe=["data-tip"],Lfe={__name:"signature",setup(s){const{editor:l}=ie();let c=ref(!1),d=ref("#000"),f=ref(5);const g=ref([{content:"2",value:2},{content:"3",value:3},{content:"4",value:4},{content:"5",value:5},{content:"6",value:6},{content:"7",value:7},{content:"8",value:8}]),v=ref(null),b=()=>{v.value.reset()},$=C=>{d.value=C},y=({value:C})=>{f.value=C},x=async()=>{var C;try{const E=await v.value.generate();(C=l.value)==null||C.chain().focus().setImage({type:"signature",src:E,width:80,draggable:!0}).run(),c.value=!1}catch{qe("error",J("tools.signature.notEmpty"))}};return watch(()=>c.value,C=>{C||b()}),(C,E)=>{const N=tt,W=ce,q=Aa,Y=Mn;return openBlock(),createBlock(W,{ico:"signature",text:C.t("tools.signature.text"),huge:"",onMenuClick:E[2]||(E[2]=re=>isRef(c)?c.value=!0:c=!0)},{default:withCtx(()=>[createVNode(Y,{visible:unref(c),"onUpdate:visible":E[0]||(E[0]=re=>isRef(c)?c.value=re:c=re),icon:"signature",header:C.t("tools.signature.title"),width:"642px",onConfirm:x,onClose:E[1]||(E[1]=re=>isRef(c)?c.value=!1:c=!1)},{default:withCtx(()=>[createBaseVNode("div",Bfe,[createVNode(W,{text:C.t("tools.signature.clear"),onMenuClick:b},{default:withCtx(()=>[createVNode(N,{name:"clear-format"})]),_:1},8,["text"]),createVNode(q,{modeless:"","default-color":"#000",onChange:$}),createVNode(W,{text:C.t("tools.signature.lineWidth"),"menu-type":"dropdown","select-options":g.value,onChange:y},{default:withCtx(()=>[createVNode(N,{name:"highlight"})]),_:1},8,["text","select-options"])]),createBaseVNode("div",{class:"umo-signature-container","data-tip":C.t("tools.signature.tip")},[createVNode(unref(vueEsign),{ref_key:"signatureRef",ref:v,"line-color":unref(d),"line-width":unref(f),width:600,height:200,"is-crop":"",format:"image/png"},null,8,["line-color","line-width"])],8,Ffe)]),_:1},8,["visible","header"])]),_:1},8,["text"])}}},Gv=Fe(Lfe,[["__scopeId","data-v-a3ccc4e7"]]),Iu={__name:"align-right",setup(s){const{editor:l}=ie(),c=()=>{var d,f,g,v;(d=l.value)!=null&&d.can().chain().focus().setTextAlign("right").run()&&((f=l.value)==null||f.chain().focus().setTextAlign("right").run()),(g=l.value)!=null&&g.can().chain().focus().setNodeAlign("flex-end").run()&&((v=l.value)==null||v.chain().focus().setNodeAlign("flex-end").run())};return(d,f)=>{var g,v,b,$;const y=ce;return openBlock(),createBlock(y,{ico:"align-right",text:d.t("base.align.right"),shortcut:"Ctrl+Shift+R","hide-text":"","menu-active":((g=unref(l))==null?void 0:g.isActive({textAlign:"right"}))||((v=unref(l))==null?void 0:v.isActive({nodeAlign:"flex-end"})),disabled:!((b=unref(l))!=null&&b.can().chain().focus().setTextAlign("right").run())&&!(($=unref(l))!=null&&$.can().chain().focus().setNodeAlign("flex-end").run()),onMenuClick:c},null,8,["text","menu-active","disabled"])}}},Nu={__name:"align-center",setup(s){const{editor:l}=ie(),c=()=>{var d,f,g,v;(d=l.value)!=null&&d.can().chain().focus().setTextAlign("center").run()&&((f=l.value)==null||f.chain().focus().setTextAlign("center").run()),(g=l.value)!=null&&g.can().chain().focus().setNodeAlign("center").run()&&((v=l.value)==null||v.chain().focus().setNodeAlign("center").run())};return(d,f)=>{var g,v,b,$;const y=ce;return openBlock(),createBlock(y,{text:d.t("base.align.center"),ico:"align-center",shortcut:"Ctrl+Shift+E","hide-text":"","menu-active":((g=unref(l))==null?void 0:g.isActive({textAlign:"center"}))||((v=unref(l))==null?void 0:v.isActive({nodeAlign:"center"})),disabled:!((b=unref(l))!=null&&b.can().chain().focus().setTextAlign("center").run())&&!(($=unref(l))!=null&&$.can().chain().focus().setNodeAlign("center").run()),onMenuClick:c},null,8,["text","menu-active","disabled"])}}},ju={__name:"align-left",setup(s){const{editor:l}=ie(),c=()=>{var d,f,g,v;(d=l.value)!=null&&d.can().chain().focus().setTextAlign("left").run()&&((f=l.value)==null||f.chain().focus().setTextAlign("left").run()),(g=l.value)!=null&&g.can().chain().focus().setNodeAlign("flex-start").run()&&((v=l.value)==null||v.chain().focus().setNodeAlign("flex-start").run())};return(d,f)=>{var g,v,b,$;const y=ce;return openBlock(),createBlock(y,{ico:"align-left",text:d.t("base.align.left"),shortcut:"Ctrl+Shift+L","hide-text":"","menu-active":((g=unref(l))==null?void 0:g.isActive({textAlign:"left"}))||((v=unref(l))==null?void 0:v.isActive({nodeAlign:"flex-start"})),disabled:!((b=unref(l))!=null&&b.can().chain().focus().setTextAlign("left").run())&&!(($=unref(l))!=null&&$.can().chain().focus().setNodeAlign("left").run()),onMenuClick:c},null,8,["text","menu-active","disabled"])}}},Du={__name:"italic",setup(s){const{editor:l}=ie();return(c,d)=>{var f,g;const v=ce;return openBlock(),createBlock(v,{text:c.t("base.italic"),ico:"italic",shortcut:"Ctrl+I","hide-text":"","menu-active":(f=unref(l))==null?void 0:f.isActive("italic"),disabled:!((g=unref(l))!=null&&g.can().chain().focus().toggleItalic().run()),onMenuClick:d[0]||(d[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().toggleItalic().run()})},null,8,["text","menu-active","disabled"])}}},ol={__name:"bold",setup(s){const{editor:l}=ie();return(c,d)=>{var f,g;const v=ce;return openBlock(),createBlock(v,{ico:"bold",text:c.t("base.bold"),shortcut:"Ctrl+B","hide-text":"","menu-active":(f=unref(l))==null?void 0:f.isActive("bold"),disabled:!((g=unref(l))!=null&&g.can().chain().focus().toggleBold().run()),onMenuClick:d[0]||(d[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().toggleBold().run()})},null,8,["text","menu-active","disabled"])}}},Rfe={__name:"background-color",props:{text:{type:String,default:J("base.bgColor")},modeless:{type:Boolean,default:!1},defaultColor:{type:String,default:""}},emits:["change"],setup(s,{emit:l}){const c=s,d=l;let{popupVisible:f,togglePopup:g}=Qt();const{editor:v}=ie();let b=ref();const $=y=>{var x,C;if(b.value=y,f.value=!1,c.modeless){d("change",b.value);return}y!==""?(x=v.value)==null||x.chain().focus().setHighlight({color:y}).run():(C=v.value)==null||C.chain().focus().unsetHighlight().run()};return(y,x)=>{const C=tt,E=Mu,N=ce;return openBlock(),createBlock(N,{text:s.text,"menu-type":"popup","popup-handle":"arrow","hide-text":"","popup-visible":unref(f),onTogglePopup:unref(g)},{content:withCtx(()=>[createVNode(E,{"default-color":s.defaultColor,onChange:$},null,8,["default-color"])]),default:withCtx(()=>{var W,q;return[createVNode(C,{name:"background-color",class:"umo-icon-background-color",style:normalizeStyle({background:((q=(W=unref(v))==null?void 0:W.getAttributes("highlight"))==null?void 0:q.color)||unref(b)})},null,8,["style"])]}),_:1},8,["text","popup-visible","onTogglePopup"])}}},il=Fe(Rfe,[["__scopeId","data-v-b5df965f"]]),zfe={class:"umo-barcode-container"},Vfe={class:"umo-barcode-toolbar"},Hfe={class:"umo-barcode-toolbar-more"},Ufe={class:"umo-barcode-code"},Kfe=["textContent"],Wfe={class:"umo-barcode-render"},Gfe=["textContent"],qfe={class:"umo-barcode-svg narrow-scrollbar"},Yfe=["textContent"],Zfe={__name:"barcode",props:{content:{type:String}},setup(s){let{popupVisible:l,togglePopup:c}=Qt(),d=ref(!1);const{container:f,options:g,editor:v}=ie(),b=[{label:"CODE128",value:"CODE128"},{label:"CODE128 A",value:"CODE128A"},{label:"CODE128 B",value:"CODE128B"},{label:"CODE128 C",value:"CODE128C"},{label:"EAN13",value:"EAN13"},{label:"UPC",value:"UPC"},{label:"CODE39",value:"CODE39"},{label:"ITF14",value:"ITF14"},{label:"ITF",value:"ITF"},{label:"MSI",value:"MSI"},{label:"MSI10",value:"MSI10"},{label:"MSI11",value:"MSI11"},{label:"MSI1010",value:"MSI1010"},{label:"MSI1110",value:"MSI1110"},{label:"Pharmacode",value:"Pharmacode"}],$=g.value.dicts.fonts.map(se=>({label:mr(se.label),value:se.value})),y=[{label:J("tools.barcode.bottom"),value:"bottom"},{label:J("tools.barcode.top"),value:"top"}],x={content:"",width:2,height:100,font:null,format:"CODE128",lineColor:"#000",background:"",fontOptions:"",displayValue:!0,textAlign:"center",textPosition:"bottom",fontSize:20,textMargin:2,margin:10,text:void 0};let C=ref({...x}),E=ref(!1);const N=se=>{let de=C.value.fontOptions.split(" ");de.includes(se)?de=de.filter(he=>he!==se):de.push(se),C.value.fontOptions=de.join(" ").trim()};let W=ref(!1);const q=ref(null),Y=async()=>{try{await nextTick(),fS(`${f} #barcode`,C.value.content,C.value),W.value=!1}catch{W.value=!0}};watch(()=>d.value,se=>{se&&(C.value=s.content?JSON.parse(s.content):{...x},setTimeout(()=>E.value=!1,200))},{immediate:!0}),watch(()=>C.value,()=>{d.value&&(E.value=!0,Y())},{immediate:!0,deep:!0});const re=()=>{var se;if(W.value){qe("error",J("tools.barcode.renderError"));return}if(C.value.content===""){qe("error",J("tools.barcode.notEmpty"));return}const de=q.value.width.animVal.value,he=q.value.height.animVal.value;E.value&&((se=v.value)==null||se.chain().focus().setImage({type:"barcode",src:i$1(q.value.outerHTML),content:JSON.stringify(C.value),width:de,height:he},!!s.content).run()),d.value=!1};return(se,de)=>{const he=ce,ge=es,Se=Aa,Ae=il,Re=ol,Be=Du,Ke=ju,Lr=Nu,_y=Iu,by=tt,yy=qw,my=hv,$t=iu,K$=Hr,Y$=Wi,W$=mv,U$=er,hy=Mn;return openBlock(),createBlock(he,{ico:s.content?"edit":"barcode",text:s.content?se.t("tools.barcode.edit"):se.t("tools.barcode.text"),huge:"",onMenuClick:de[19]||(de[19]=G$=>isRef(d)?d.value=!0:d=!0)},{default:withCtx(()=>[createVNode(hy,{visible:unref(d),icon:"barcode",header:se.t("tools.barcode.title"),width:"720px",onConfirm:re,onClose:de[18]||(de[18]=G$=>isRef(d)?d.value=!1:d=!1)},{default:withCtx(()=>[createBaseVNode("div",zfe,[createBaseVNode("div",Vfe,[createVNode(he,{style:{width:"126px"},text:se.t("tools.barcode.format"),"select-options":b,"menu-type":"select","select-value":unref(C).format,onMenuClick:de[0]||(de[0]=G$=>unref(C).format=G$)},null,8,["text","select-value"]),createVNode(ge,{layout:"vertical"}),createVNode(he,{style:{width:"114px"},text:se.t("tools.barcode.font"),"select-options":unref($),"menu-type":"select","select-value":unref(C).font,onMenuClick:de[1]||(de[1]=G$=>unref(C).font=G$)},null,8,["text","select-options","select-value"]),createVNode(ge,{layout:"vertical"}),createVNode(Se,{text:se.t("tools.barcode.lineColor"),"default-color":unref(C).lineColor,modeless:"",onChange:de[2]||(de[2]=G$=>unref(C).lineColor=G$)},null,8,["text","default-color"]),createVNode(Ae,{text:se.t("tools.barcode.bgColor"),"default-color":unref(C).background,modeless:"",onChange:de[3]||(de[3]=G$=>unref(C).background=G$)},null,8,["text","default-color"]),createVNode(ge,{layout:"vertical"}),createVNode(Re,{"menu-active":unref(C).fontOptions.includes("bold"),onMenuClickThrough:de[4]||(de[4]=G$=>N("bold"))},null,8,["menu-active"]),createVNode(Be,{"menu-active":unref(C).fontOptions.includes("italic"),onMenuClickThrough:de[5]||(de[5]=G$=>N("italic"))},null,8,["menu-active"]),createVNode(ge,{layout:"vertical"}),createVNode(Ke,{"menu-active":unref(C).textAlign==="left",onMenuClickThrough:de[6]||(de[6]=G$=>unref(C).textAlign="left")},null,8,["menu-active"]),createVNode(Lr,{"menu-active":unref(C).textAlign==="center",onMenuClickThrough:de[7]||(de[7]=G$=>unref(C).textAlign="center")},null,8,["menu-active"]),createVNode(_y,{"menu-active":unref(C).textAlign==="right",onMenuClickThrough:de[8]||(de[8]=G$=>unref(C).textAlign="right")},null,8,["menu-active"]),createVNode(ge,{layout:"vertical"}),createVNode(he,{text:se.t("tools.barcode.more"),"menu-type":"popup","popup-visible":unref(l),onTogglePopup:unref(c)},{content:withCtx(()=>[createBaseVNode("div",Hfe,[createVNode(W$,{size:"small","label-align":"left"},{default:withCtx(()=>[createVNode(my,{label:se.t("tools.barcode.width")},{default:withCtx(()=>[createVNode(yy,{modelValue:unref(C).width,"onUpdate:modelValue":de[9]||(de[9]=G$=>unref(C).width=G$),min:1,max:4,step:1,"tooltip-props":{showArrow:!1,theme:"light"}},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(my,{label:se.t("tools.barcode.height")},{default:withCtx(()=>[createVNode(yy,{modelValue:unref(C).height,"onUpdate:modelValue":de[10]||(de[10]=G$=>unref(C).height=G$),min:10,max:200,step:1,"tooltip-props":{showArrow:!1,theme:"light"}},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(my,{label:se.t("tools.barcode.margin")},{default:withCtx(()=>[createVNode(yy,{modelValue:unref(C).margin,"onUpdate:modelValue":de[11]||(de[11]=G$=>unref(C).margin=G$),min:0,max:25,step:1,"tooltip-props":{showArrow:!1,theme:"light"}},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(ge),createVNode(my,{label:se.t("tools.barcode.displayValue")},{default:withCtx(()=>[createVNode($t,{modelValue:unref(C).displayValue,"onUpdate:modelValue":de[12]||(de[12]=G$=>unref(C).displayValue=G$)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(se.t("tools.barcode.displayValueText")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"]),createVNode(my,{label:se.t("tools.barcode.textContent"),help:se.t("tools.barcode.textContentTip")},{default:withCtx(()=>[createVNode(K$,{modelValue:unref(C).text,"onUpdate:modelValue":de[13]||(de[13]=G$=>unref(C).text=G$),autosize:"",maxlength:"100"},null,8,["modelValue"])]),_:1},8,["label","help"]),createVNode(my,{label:se.t("tools.barcode.textPosition")},{default:withCtx(()=>[createVNode(Y$,{modelValue:unref(C).textPosition,"onUpdate:modelValue":de[14]||(de[14]=G$=>unref(C).textPosition=G$),options:y,"popup-props":{destroyOnClose:!0,attach:unref(f)}},null,8,["modelValue","popup-props"])]),_:1},8,["label"]),createVNode(my,{label:se.t("tools.barcode.textMargin")},{default:withCtx(()=>[createVNode(yy,{modelValue:unref(C).textMargin,"onUpdate:modelValue":de[15]||(de[15]=G$=>unref(C).textMargin=G$),min:-15,max:40,step:1,"tooltip-props":{showArrow:!1,theme:"light"}},null,8,["modelValue"])]),_:1},8,["label"]),createVNode(my,{label:se.t("tools.barcode.fontSize")},{default:withCtx(()=>[createVNode(yy,{modelValue:unref(C).fontSize,"onUpdate:modelValue":de[16]||(de[16]=G$=>unref(C).fontSize=G$),min:8,max:36,step:1,"tooltip-props":{showArrow:!1,theme:"light"}},null,8,["modelValue"])]),_:1},8,["label"])]),_:1})])]),default:withCtx(()=>[createVNode(by,{name:"setting"})]),_:1},8,["text","popup-visible","onTogglePopup"])]),createBaseVNode("div",Ufe,[createVNode(U$,{modelValue:unref(C).content,"onUpdate:modelValue":de[17]||(de[17]=G$=>unref(C).content=G$),maxlength:"44","show-limit-number":"",autofocus:"",clearable:"",placeholder:se.t("tools.barcode.placeholder"),status:unref(W)&&unref(C).content!==""?"error":""},{prefixIcon:withCtx(()=>[createVNode(by,{name:"barcode"})]),_:1},8,["modelValue","placeholder","status"]),unref(W)&&unref(C).content?(openBlock(),createElementBlock("div",{key:0,class:"umo-barcode-error",textContent:toDisplayString$1(se.t("tools.barcode.error"))},null,8,Kfe)):createCommentVNode("",!0)]),createBaseVNode("div",Wfe,[createBaseVNode("div",{class:"umo-barcode-title",textContent:toDisplayString$1(se.t("tools.barcode.preview"))},null,8,Gfe),createBaseVNode("div",qfe,[unref(W)?(openBlock(),createElementBlock("div",{key:0,class:"umo-barcode-empty",textContent:toDisplayString$1(se.t("tools.barcode.renderError"))},null,8,Yfe)):createCommentVNode("",!0),withDirectives((openBlock(),createElementBlock("svg",{ref_key:"barcodeSvgRef",ref:q,id:"barcode"},null,512)),[[vShow,!unref(W)]])])])])]),_:1},8,["visible","header"])]),_:1},8,["ico","text"])}}},Bu=Fe(Zfe,[["__scopeId","data-v-563e909f"]]),Xfe={class:"umo-qrcode-container"},Jfe={class:"umo-qrcode-toolbar"},Qfe=["textContent"],eve=["textContent"],tve={class:"umo-qrcode-code"},nve=["textContent"],rve={class:"umo-qrcode-render"},ave=["textContent"],ove={class:"umo-qrcode-svg narrow-scrollbar"},ive=["textContent"],lve=["innerHTML"],sve={__name:"qrcode",props:{content:{type:String}},setup(s){let l=ref(!1);const{editor:c}=ie(),d=async()=>{x(),l.value=!0},f=[{label:J("tools.qrcode.levelL"),value:"L"},{label:J("tools.qrcode.levelM"),value:"M"},{label:J("tools.qrcode.levelQ"),value:"Q"},{label:J("tools.qrcode.levelH"),value:"H"}],g={ecl:"M",padding:1,width:256,height:256,color:"#000000",background:"#ffffff",content:"",xmlDeclaration:!1,join:!0,pretty:!1,container:"svg-viewbox"};let v=ref({...g}),b=ref(!1),$=ref(null),y=ref(!1);const x=()=>{try{$.value=null,v.value.height=v.value.width;const E=new vS(v.value);$.value=E.svg(),y.value=!1}catch{$.value=null,y.value=!0}};watch(()=>l.value,E=>{E&&(v.value=s.content?JSON.parse(s.content):{...g},setTimeout(()=>b.value=!1,200))},{immediate:!0}),watch(()=>v.value,()=>{l.value&&(b.value=!0,x())},{immediate:!0,deep:!0});const C=()=>{var E;if(y.value||!$.value){qe("error",J("tools.qrcode.renderError"));return}if(v.value.content===""){qe("error",J("tools.qrcode.notEmpty"));return}const{width:N,height:W}=v.value,q=i$1($.value);b.value&&((E=c.value)==null||E.chain().focus().setImage({type:"qrcode",src:q,content:JSON.stringify(v.value),width:N,height:W},!!s.content).run()),l.value=!1};return(E,N)=>{const W=ce,q=Cr,Y=es,re=Aa,se=il,de=Hr,he=Mn;return openBlock(),createBlock(W,{ico:s.content?"edit":"qrcode",text:s.content?E.t("tools.qrcode.edit"):E.t("tools.qrcode.text"),huge:"",onMenuClick:d},{default:withCtx(()=>[createVNode(he,{visible:unref(l),icon:"qrcode",header:s.content?E.t("tools.qrcode.edit"):E.t("tools.qrcode.text"),width:"695px",onConfirm:C,onClose:N[6]||(N[6]=ge=>isRef(l)?l.value=!1:l=!1)},{default:withCtx(()=>[createBaseVNode("div",Xfe,[createBaseVNode("div",Jfe,[createVNode(W,{style:{width:"126px"},text:E.t("tools.qrcode.level"),"select-options":f,"menu-type":"select","select-value":unref(v).ecl,onMenuClick:N[0]||(N[0]=ge=>unref(v).ecl=ge)},null,8,["text","select-value"]),createVNode(W,{"menu-type":"input",tooltip:E.t("tools.qrcode.paddingTip")},{default:withCtx(()=>[createVNode(q,{modelValue:unref(v).padding,"onUpdate:modelValue":N[1]||(N[1]=ge=>unref(v).padding=ge),size:"small",theme:"normal",max:10,min:0,"allow-input-over-limit":!1,placeholder:""},{label:withCtx(()=>[createBaseVNode("span",{textContent:toDisplayString$1(E.t("tools.qrcode.padding"))},null,8,Qfe)]),_:1},8,["modelValue"])]),_:1},8,["tooltip"]),createVNode(W,{"menu-type":"input",tooltip:E.t("tools.qrcode.widthTip")},{default:withCtx(()=>[createVNode(q,{modelValue:unref(v).width,"onUpdate:modelValue":N[2]||(N[2]=ge=>unref(v).width=ge),size:"small",theme:"normal",max:1024,min:64,"allow-input-over-limit":!1,placeholder:""},{label:withCtx(()=>[createBaseVNode("span",{textContent:toDisplayString$1(E.t("tools.qrcode.width"))},null,8,eve)]),_:1},8,["modelValue"])]),_:1},8,["tooltip"]),createVNode(Y,{layout:"vertical"}),createVNode(re,{text:E.t("tools.qrcode.color"),"default-color":unref(v).color,modeless:"",onChange:N[3]||(N[3]=ge=>unref(v).color=ge)},null,8,["text","default-color"]),createVNode(se,{text:E.t("tools.qrcode.bgColor"),"default-color":unref(v).background,modeless:"",onChange:N[4]||(N[4]=ge=>unref(v).background=ge)},null,8,["text","default-color"])]),createBaseVNode("div",tve,[createVNode(de,{modelValue:unref(v).content,"onUpdate:modelValue":N[5]||(N[5]=ge=>unref(v).content=ge),maxlength:"200","show-limit-number":"",autofocus:"",autosize:"",placeholder:E.t("tools.qrcode.placeholder")},null,8,["modelValue","placeholder"]),unref(y)&&unref(v).content!==""?(openBlock(),createElementBlock("div",{key:0,class:"umo-barcode-error",textContent:toDisplayString$1(E.t("tools.qrcode.renderError"))},null,8,nve)):createCommentVNode("",!0)]),createBaseVNode("div",rve,[createBaseVNode("div",{class:"umo-qrcode-title",textContent:toDisplayString$1(E.t("tools.qrcode.preview"))},null,8,ave),createBaseVNode("div",ove,[unref($)?(openBlock(),createElementBlock("div",{key:1,class:"umo-svg-render",innerHTML:unref($)},null,8,lve)):(openBlock(),createElementBlock("div",{key:0,class:"umo-qrcode-empty",textContent:toDisplayString$1(E.t("tools.qrcode.notEmpty"))},null,8,ive))])])])]),_:1},8,["visible","header"])]),_:1},8,["ico","text"])}}},Fu=Fe(sve,[["__scopeId","data-v-a19299f5"]]),uve={class:"umo-web-page-container"},cve=["textContent"],dve={__name:"web-page",setup(s){const{editor:l}=ie();let c=ref(!1),d=ref(""),f=ref(!1);const g=()=>{var v;if(l.value){if(d.value===""||!d.value.startsWith("http://")&&!d.value.startsWith("https://")){f.value=!0;return}(v=l.value)==null||v.chain().focus().setParagraph().setIframe({src:d.value}).run(),f.value=!1,c.value=!1}};return watch(()=>c.value,v=>{v||(d.value="",f.value=!1)}),(v,b)=>{const $=er,y=Mn,x=ce;return openBlock(),createBlock(x,{ico:"web-page",text:v.t("insert.web.text"),huge:"",onMenuClick:b[2]||(b[2]=C=>isRef(c)?c.value=!0:c=!0)},{default:withCtx(()=>[createVNode(y,{visible:unref(c),icon:"web-page",header:v.t("insert.web.title"),width:"480px",confirmBtn:v.t("insert.web.insert"),onConfirm:g,onClose:b[1]||(b[1]=C=>isRef(c)?c.value=!1:c=!1)},{default:withCtx(()=>[createBaseVNode("div",uve,[createBaseVNode("div",{class:"umo-web-page-tip",textContent:toDisplayString$1(v.t("insert.web.tip"))},null,8,cve),createVNode($,{modelValue:unref(d),"onUpdate:modelValue":b[0]||(b[0]=C=>isRef(d)?d.value=C:d=C),modelModifiers:{trim:!0},status:unref(f)?"error":"default",type:"url",clearable:"",placeholder:v.t("insert.web.placeholder")},null,8,["modelValue","status","placeholder"])])]),_:1},8,["visible","header","confirmBtn"])]),_:1},8,["text"])}}},qv=Fe(dve,[["__scopeId","data-v-c5b503ed"]]),Yv={__name:"text-box",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"text-box",text:c.t("insert.textBox"),huge:"",onMenuClick:d[0]||(d[0]=g=>{var v;return(v=unref(l))==null?void 0:v.chain().focus().setTextBox().run()})},null,8,["text"])}}},Zv={__name:"toc",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"toc",text:c.t("insert.toc"),huge:"",onMenuClick:d[0]||(d[0]=g=>{var v;return(v=unref(l))==null?void 0:v.chain().focus().addTableOfContents().run()})},null,8,["text"])}}},Xv={__name:"code-block",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"code-block",text:c.t("insert.codeBlock"),shortcut:"Ctrl+Alt+C",huge:"",onMenuClick:d[0]||(d[0]=g=>unref(l).chain().focus().setCodeBlock().run())},null,8,["text"])}}},Jv={__name:"file",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"file",text:c.t("insert.file"),huge:"",onMenuClick:d[0]||(d[0]=g=>unref(l).chain().focus().selectFiles("file").run())},null,8,["text"])}}},Qv={__name:"audio",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"audio",text:c.t("insert.audio"),huge:"",onMenuClick:d[0]||(d[0]=g=>unref(l).chain().focus().selectFiles("audio").run())},null,8,["text"])}}},ep={__name:"video",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"video",text:c.t("insert.video"),huge:"",onMenuClick:d[0]||(d[0]=g=>unref(l).chain().focus().selectFiles("video").run())},null,8,["text"])}}},tp={__name:"image",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"image",text:c.t("insert.image"),huge:"",onMenuClick:d[0]||(d[0]=g=>unref(l).chain().focus().selectFiles("image").run())},null,8,["text"])}}},fve={class:"umo-dropdown-item-label"},vve={class:"umo-heading"},pve={class:"icon-heading"},mve={__name:"node",setup(s){const{container:l,options:c,editor:d,blockMenu:f,assistantBox:g}=ie();let v=ref(!1);const b=ref([1,2,3,4,5,6]),$=E=>c.value.toolbar.disableMenuItems.includes(E),y=()=>{g.value=!0,d.value.commands.selectParentNode(),d.value.commands.focus();const{from:E,to:N}=d.value.state.selection;d.value.commands.setTextSelection({from:E,to:N})},x=({content:E})=>{!E||!d.value||d.value.commands.insertContent(E)},C=(E,N={})=>{var W,q,Y,re,se,de,he;switch((W=d.value)==null||W.chain().focus().run(),E){case"paragraph":(q=d.value)==null||q.commands.setParagraph();break;case"heading":(Y=d.value)==null||Y.commands.setHeading(N);break;case"orderedList":(re=d.value)==null||re.commands.toggleOrderedList();break;case"bulletList":(se=d.value)==null||se.commands.toggleBulletList();break;case"taskList":(de=d.value)==null||de.commands.toggleTaskList();break;case"blockquote":(he=d.value)==null||he.commands.toggleBlockquote();break}};return(E,N)=>{const W=ce,q=Vr,Y=tp,re=ep,se=Qv,de=Jv,he=Xv,ge=Zv,Se=Yv,Ae=qv,Re=Fu,Be=Bu,Ke=Gv,Lr=Wv,_y=Pu,by=Tu,yy=wr,my=Ui;return openBlock(),createBlock(my,{attach:`${unref(l)} .umo-page-container`,placement:"bottom-right","overlay-class-name":"umo-block-menu-dropdown",trigger:"click","destroy-on-close":!1,"popup-props":{onVisibleChange($t){unref(d).commands.focus(),f.value=$t,isRef(v)?v.value=$t:v=$t}}},{default:withCtx(()=>[createVNode(W,{class:"umo-block-menu-button","menu-active":unref(v),ico:"block-add","hide-text":""},null,8,["menu-active"]),createVNode(yy,null,{default:withCtx(()=>{var $t,K$,Y$,W$,U$,hy,G$,ky;return[unref(c).assistant.enabled&&(($t=unref(d))!=null&&$t.isActive("paragraph")||(K$=unref(d))!=null&&K$.isActive("heading"))&&(hy=(U$=(W$=(Y$=unref(d))==null?void 0:Y$.state)==null?void 0:W$.selection)==null?void 0:U$.$from)!=null&&hy.nodeAfter?(openBlock(),createBlock(q,{key:0,divider:""},{default:withCtx(()=>[createVNode(W,{ico:"assistant",text:E.t("assistant.text"),tooltip:!1,onMenuClick:y},null,8,["text"])]),_:1})):createCommentVNode("",!0),createVNode(q,{class:"umo-block-menu-group-name",disabled:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(E.t("blockMenu.insert")),1)]),_:1}),createVNode(q,{divider:((G$=unref(c).templates)==null?void 0:G$.length)===0},{default:withCtx(()=>[createVNode(W,{ico:"node-add",text:E.t("blockMenu.select"),tooltip:!1},null,8,["text"]),createVNode(yy,{"overlay-class-name":"umo-block-menu-dropdown"},{default:withCtx(()=>[createVNode(q,null,{default:withCtx(()=>[createVNode(W,{ico:"table",text:E.t("table.insert.text"),tooltip:!1,onMenuClick:N[0]||(N[0]=$y=>{var rS;return(rS=unref(d))==null?void 0:rS.chain().focus().insertTable().run()})},null,8,["text"])]),_:1}),createVNode(q,null,{default:withCtx(()=>[createVNode(Y,{huge:!1,tooltip:!1})]),_:1}),createVNode(q,null,{default:withCtx(()=>[$("video")?createCommentVNode("",!0):(openBlock(),createBlock(re,{key:0,huge:!1,tooltip:!1}))]),_:1}),createVNode(q,null,{default:withCtx(()=>[$("audio")?createCommentVNode("",!0):(openBlock(),createBlock(se,{key:0,huge:!1,tooltip:!1}))]),_:1}),createVNode(q,null,{default:withCtx(()=>[$("file")?createCommentVNode("",!0):(openBlock(),createBlock(de,{key:0,huge:!1,tooltip:!1}))]),_:1}),createVNode(q,null,{default:withCtx(()=>[$("code-block")?createCommentVNode("",!0):(openBlock(),createBlock(he,{key:0,huge:!1,shortcutText:"Ctrl+Alt+C",tooltip:!1}))]),_:1}),createVNode(q,null,{default:withCtx(()=>[createVNode(W,{ico:"hr",text:E.t("insert.hr.text"),tooltip:!1,onMenuClick:N[1]||(N[1]=$y=>unref(d).chain().focus().setHr({type:"signle"}).run())},null,8,["text"])]),_:1}),createVNode(q,null,{default:withCtx(()=>[createVNode(ge,{huge:!1,tooltip:!1})]),_:1}),createVNode(q,null,{default:withCtx(()=>[createVNode(Se,{huge:!1,tooltip:!1})]),_:1}),createVNode(q,null,{default:withCtx(()=>[createVNode(Ae,{huge:!1,tooltip:!1})]),_:1}),createVNode(q,null,{default:withCtx(()=>[createVNode(Re,{huge:!1,tooltip:!1})]),_:1}),createVNode(q,null,{default:withCtx(()=>[createVNode(Be,{huge:!1,tooltip:!1})]),_:1}),createVNode(q,null,{default:withCtx(()=>[$("signature")?createCommentVNode("",!0):(openBlock(),createBlock(Ke,{key:0,huge:!1,tooltip:!1}))]),_:1}),createVNode(q,null,{default:withCtx(()=>[$("seal")?createCommentVNode("",!0):(openBlock(),createBlock(Lr,{key:0,huge:!1,tooltip:!1}))]),_:1}),createVNode(q,null,{default:withCtx(()=>[$("diagrams")?createCommentVNode("",!0):(openBlock(),createBlock(_y,{key:0,huge:!1,tooltip:!1}))]),_:1}),createVNode(q,null,{default:withCtx(()=>[$("mermaid")?createCommentVNode("",!0):(openBlock(),createBlock(by,{key:0,huge:!1,tooltip:!1}))]),_:1})]),_:1})]),_:1},8,["divider"]),unref(c).templates.length>0?(openBlock(),createBlock(q,{key:1,divider:""},{default:withCtx(()=>[createVNode(W,{ico:"template",text:E.t("blockMenu.template"),tooltip:!1},null,8,["text"]),createVNode(yy,{"overlay-class-name":"umo-block-menu-dropdown"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(c).templates,$y=>(openBlock(),createBlock(q,{key:$y.value,value:$y.value,divider:$y.divider,onClick:rS=>x($y)},{default:withCtx(()=>[createBaseVNode("div",fve,toDisplayString$1($y.title),1)]),_:2},1032,["value","divider","onClick"]))),128))]),_:1})]),_:1})):createCommentVNode("",!0),createVNode(q,{class:"umo-block-menu-group-name",disabled:""},{default:withCtx(()=>[createTextVNode(toDisplayString$1(E.t("blockMenu.toogleNode")),1)]),_:1}),createVNode(q,{disabled:(ky=unref(d))==null?void 0:ky.isActive("paragraph")},{default:withCtx(()=>[createVNode(W,{ico:"paragraph",text:E.t("base.heading.paragraph"),tooltip:!1,"shortcut-text":"ctrl+alt+0",onMenuClick:N[2]||(N[2]=$y=>C("paragraph"))},null,8,["text"])]),_:1},8,["disabled"]),createVNode(q,null,{default:withCtx(()=>[createVNode(W,{ico:"heading",text:E.t("base.heading.text"),tooltip:!1},null,8,["text"]),createVNode(yy,{"overlay-class-name":"umo-block-menu-dropdown"},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(b.value,$y=>{var rS;return openBlock(),createBlock(q,{key:$y.level,disabled:(rS=unref(d))==null?void 0:rS.isActive("heading",{level:$y})},{default:withCtx(()=>[createVNode(W,{tooltip:!1,"shortcut-text":`ctrl+alt+${$y}`,onMenuClick:lS=>C("heading",{level:$y})},{default:withCtx(()=>[createBaseVNode("span",vve,[createBaseVNode("span",pve,"H"+toDisplayString$1($y),1),createTextVNode(" "+toDisplayString$1(E.t("base.heading.text",{level:$y})),1)])]),_:2},1032,["shortcut-text","onMenuClick"])]),_:2},1032,["disabled"])}),128))]),_:1})]),_:1}),createVNode(q,null,{default:withCtx(()=>{var $y;return[createVNode(W,{ico:"ordered-list-2",text:E.t("list.ordered.text"),tooltip:!1,"shortcut-text":"Ctrl+Shift+7","menu-active":($y=unref(d))==null?void 0:$y.isActive("orderedList"),onMenuClick:N[3]||(N[3]=rS=>C("orderedList"))},null,8,["text","menu-active"])]}),_:1}),createVNode(q,null,{default:withCtx(()=>{var $y;return[createVNode(W,{ico:"bullet-list-2",text:E.t("list.bullet.text"),tooltip:!1,"shortcut-text":"Ctrl+Shift+8","menu-active":($y=unref(d))==null?void 0:$y.isActive("bulletList"),onMenuClick:N[4]||(N[4]=rS=>C("bulletList"))},null,8,["text","menu-active"])]}),_:1}),createVNode(q,null,{default:withCtx(()=>{var $y;return[createVNode(W,{ico:"task-list-2",text:E.t("list.task.text"),tooltip:!1,"shortcut-text":"Ctrl+Shift+9","menu-active":($y=unref(d))==null?void 0:$y.isActive("taskList"),onMenuClick:N[5]||(N[5]=rS=>C("taskList"))},null,8,["text","menu-active"])]}),_:1}),createVNode(q,null,{default:withCtx(()=>{var $y;return[createVNode(W,{ico:"quote",text:E.t("base.quote"),tooltip:!1,"shortcut-text":"Ctrl+Shift+B","menu-active":($y=unref(d))==null?void 0:$y.isActive("blockquote"),onMenuClick:N[6]||(N[6]=rS=>C("blockquote"))},null,8,["text","menu-active"])]}),_:1})]}),_:1})]),_:1},8,["attach","popup-props"])}}},hve={__name:"index",setup(s){const{page:l,editor:c}=ie();let d=ref(!1),f=ref(0);const g=()=>{const{offsetTop:v}=hde();v!==null&&(d.value=!0,f.value=v)};return watch(c,v=>{v?(c.value.on("selectionUpdate",g),c.value.on("focus",g)):d.value=!1},{immediate:!0}),watch(()=>l.value.pagination,g),(v,b)=>{const $=mve,y=afe;return unref(d)?(openBlock(),createElementBlock("div",{key:0,class:"umo-block-menu-hander",style:normalizeStyle(`transform: translate(${unref(l).margin.left}cm, ${unref(f)}px);`)},[createVNode($),createVNode(y)],4)):createCommentVNode("",!0)}}},gve="data:image/svg+xml,%3csvg%20viewBox='0%200%201024%201024'%20xmlns='http://www.w3.org/2000/svg'%20width='96'%20height='96'%3e%3cpath%20d='M422.366%200H597.68c228.053%2052.738%20368.84%20193.524%20422.35%20422.35v175.315C998.802%20693.244%20956.304%20778.24%20892.53%20852.67a4855.035%204855.035%200%200%200-239.066-99.61c-39.255-18.751-53.87-49.296-43.829-91.643a507.776%20507.776%200%200%201%2071.72-79.688c36.705-90.495%2044.674-183.468%2023.907-278.91-77.314-124.913-182.24-155.458-314.77-91.643-40.467%2029.78-68.358%2068.293-83.674%20115.549-11.65%2087.984-1.028%20172.988%2031.876%20255.004a507.776%20507.776%200%200%201%2071.72%2079.688c6.016%2022.337%203.362%2043.59-7.97%2063.751A4279.22%204279.22%200%200%201%20127.519%20852.67C63.743%20778.24%2021.245%20693.244.016%20597.665V422.35C53.526%20193.524%20194.313%2052.738%20422.366%200z'%20fill='%23DEDFE0'%20opacity='.989'/%3e%3cpath%20d='M892.53%20852.67c-80.606%2086.788-178.886%20142.57-294.85%20167.346H422.367c-115.963-24.776-214.243-80.558-294.848-167.347a4279.22%204279.22%200%200%200%20274.926-127.502c11.331-20.16%2013.985-41.414%207.968-63.75a507.776%20507.776%200%200%200-71.72-79.69c-32.903-82.015-43.525-167.019-31.875-255.003%2015.316-47.256%2043.207-85.77%2083.673-115.549%20132.53-63.815%20237.457-33.27%20314.77%2091.642%2020.768%2095.443%2012.799%20188.416-23.906%20278.91a507.776%20507.776%200%200%200-71.72%2079.69c-10.04%2042.346%204.574%2072.89%2043.829%2091.641a4855.035%204855.035%200%200%201%20239.066%2099.611z'%20fill='%23F4F4F8'/%3e%3c/svg%3e",bve={class:"umo-comment-container"},yve={class:"umo-comment-form"},_ve={class:"umo-comment-buttons"},wve={__name:"input",props:{user:{type:Object,default:()=>({})}},setup(s){const{options:l,editor:c,commentBox:d}=ie();let f=ref("");const g=()=>{console.log(f.value),v()},v=()=>{d.value=!1,c.value.commands.focus()};return(b,$)=>{const y=Hr,x=Tt,C=tC;return openBlock(),createElementBlock("div",bve,[createVNode(C,{avatar:s.user.avatarUrl||unref(l).user.avatarUrl||unref(gve),author:s.user.nickName||unref(l).user.nickName||""},{content:withCtx(()=>[createBaseVNode("div",yve,[createVNode(y,{modelValue:unref(f),"onUpdate:modelValue":$[0]||($[0]=E=>isRef(f)?f.value=E:f=E),size:"small",placeholder:"",autosize:"",autofocus:""},null,8,["modelValue"]),createBaseVNode("div",_ve,[createVNode(x,{class:"umo-comment-button",disabled:unref(f)==="",onClick:g},{default:withCtx(()=>[createTextVNode("  ")]),_:1},8,["disabled"]),createVNode(x,{theme:"default",class:"umo-comment-button",variant:"text",onClick:v},{default:withCtx(()=>[createTextVNode("  ")]),_:1})])])]),_:1},8,["avatar","author"])])}}},Cve=Fe(wve,[["__scopeId","data-v-16b04e9f"]]),kve={class:"umo-assistant-container"},$ve={class:"umo-assistant-input"},Sve={class:"ai-icon"},xve={key:0,class:"submit"},Ove=["textContent"],Eve={class:"umo-assistant-result"},Ave={class:"close"},Tve={class:"commands-container"},Pve=["textContent"],Mve={class:"commands"},Ive={key:0,class:"result-container"},Nve=["textContent"],jve=["innerHTML"],Dve={class:"actions"},Bve={key:0,class:"main"},Fve={class:"secondary"},Lve={__name:"input",setup(s){const{options:l,editor:c,assistantBox:d}=ie(),f=ref(null);let g=ref(""),v=ref({prompt:"",content:"",error:!1}),b=ref(!1);const $=async()=>{b.value=!0,v.value.error=!1,v.value.prompt="",v.value.content="";const re={lang:zt.global.locale.value,input:Au(c.value),command:g.value,output:"rich-text"},se={html:c.value.getHTML(),text:c.value.getText(),json:c.value.getJSON()};try{const de=await l.value.onAssistant(re,se),he=()=>{v.value.content.startsWith("[ERROR]: ")&&(v.value.error=!0,v.value.content=v.value.content.replace("[ERROR]: ",""))};if(de instanceof ReadableStream){const ge=new WritableStream({write(Se){he(),v.value.content+=Se},close(){b.value=!1,v.value.command=g.value}});de.pipeTo(ge);return}if(typeof de=="string"){b.value=!1,v.value.command=g.value,he(),v.value.content=de;return}console.error("onAssistant method returns data in an incorrect format, it can be a ReadableStream or plain text.")}catch(de){console.error(de);const he=Fo({theme:"warning",header:J("assistant.error.title"),body:J("assistant.error.message"),onConfirm(){he.destroy()}});d.value=!1}},y=({value:re,autoSend:se})=>{g.value=mr(re),v.value.command=mr(re),v.value.content="",f.value.focus(),se!==!1&&$()},x=()=>{d.value=!1,c.value.commands.focus()},C=()=>{c.value.chain().insertContent(v.value.content).run(),x()},E=()=>{const{to:re}=c.value.state.selection;c.value.chain().insertContentAt(re,v.value.content).focus().run(),x()},N=()=>{c.value.commands.selectParentNode();const{to:re}=c.value.state.selection;c.value.chain().insertContentAt(re,v.value.content).focus().run(),x()},W=()=>{const{copy:re}=useClipboard({source:ref(v.value.content)});re(),qe("success",J("assistant.copySuccess"))},q=()=>{g.value=v.value.command,$()},Y=()=>{g.value="",v.value.prompt="",v.value.content=""};return(re,se)=>{const de=tt,he=Hr,ge=Tt,Se=Oa;return openBlock(),createElementBlock("div",kve,[createBaseVNode("div",$ve,[createBaseVNode("div",Sve,[createVNode(de,{name:"assistant"})]),createVNode(he,{ref_key:"inputRef",ref:f,class:"input",modelValue:unref(g),"onUpdate:modelValue":se[0]||(se[0]=Ae=>isRef(g)?g.value=Ae:g=Ae),maxlength:unref(l).assistant.maxlength,readonly:unref(b),autocomplete:"false",placeholder:re.t("assistant.placeholder"),autosize:""},null,8,["modelValue","maxlength","readonly","placeholder"]),unref(g)!==""?(openBlock(),createElementBlock("div",xve,[createVNode(ge,{theme:"primary",disabled:unref(b),loading:unref(b),onClick:$},{default:withCtx(()=>[unref(b)?createCommentVNode("",!0):(openBlock(),createElementBlock("span",{key:0,textContent:toDisplayString$1(re.t("assistant.send"))},null,8,Ove))]),_:1},8,["disabled","loading"])])):createCommentVNode("",!0)]),createBaseVNode("div",Eve,[createBaseVNode("div",Ave,[createVNode(Se,{content:re.t("assistant.exit")},{default:withCtx(()=>[unref(b)?createCommentVNode("",!0):(openBlock(),createBlock(ge,{key:0,size:"small",variant:"text",shape:"square",theme:"default",onClick:x},{default:withCtx(()=>[createVNode(de,{name:"exit",size:"14"})]),_:1}))]),_:1},8,["content"])]),createBaseVNode("div",Tve,[createBaseVNode("div",{class:"title",textContent:toDisplayString$1(re.t("assistant.commands"))},null,8,Pve),createBaseVNode("div",Mve,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(l).assistant.commands,(Ae,Re)=>(openBlock(),createBlock(ge,{key:Re,size:"small",variant:"outline",theme:"default",textContent:toDisplayString$1(re.l(Ae.label)),onClick:Be=>y(Ae)},null,8,["textContent","onClick"]))),128))])]),unref(v).content!==""?(openBlock(),createElementBlock("div",Ive,[createBaseVNode("div",{class:"title",textContent:toDisplayString$1(re.t("assistant.result"))},null,8,Nve),createBaseVNode("div",{class:normalizeClass(["result umo-editor-container",{error:unref(v).error}]),innerHTML:unref(v).content},null,10,jve),createBaseVNode("div",Dve,[unref(v).error?createCommentVNode("",!0):(openBlock(),createElementBlock("div",Bve,[createVNode(ge,{theme:"primary",onClick:C},{default:withCtx(()=>[createVNode(de,{name:"check"}),createTextVNode(" "+toDisplayString$1(re.t("assistant.replace")),1)]),_:1}),createVNode(ge,{variant:"outline",theme:"default",onClick:E},{default:withCtx(()=>[createVNode(de,{name:"table-add-column-before"}),createTextVNode(" "+toDisplayString$1(re.t("assistant.insertAfter")),1)]),_:1}),createVNode(ge,{variant:"outline",theme:"default",onClick:N},{default:withCtx(()=>[createVNode(de,{name:"table-add-row-after"}),createTextVNode(" "+toDisplayString$1(re.t("assistant.insertBelow")),1)]),_:1})])),createBaseVNode("div",Fve,[unref(v).error?createCommentVNode("",!0):(openBlock(),createBlock(Se,{key:0,content:re.t("assistant.copy")},{default:withCtx(()=>[createVNode(ge,{variant:"text",shape:"square",theme:"default",onClick:W},{default:withCtx(()=>[createVNode(de,{name:"copy"})]),_:1})]),_:1},8,["content"])),createVNode(Se,{content:re.t("assistant.rewrite")},{default:withCtx(()=>[createVNode(ge,{variant:"text",shape:"square",theme:"default",onClick:q},{default:withCtx(()=>[createVNode(de,{name:"reload"})]),_:1})]),_:1},8,["content"]),createVNode(Se,{content:re.t("assistant.delete")},{default:withCtx(()=>[createVNode(ge,{variant:"text",shape:"square",theme:"default",onClick:Y},{default:withCtx(()=>[createVNode(de,{name:"node-delete"})]),_:1})]),_:1},8,["content"])])])])):createCommentVNode("",!0)])])}}},Rve=Fe(Lve,[["__scopeId","data-v-a002bdbc"]]),zve={__name:"comment",setup(s){const{editor:l,commentBox:c}=ie(),d=()=>{c.value=!0,l.value.commands.focus()};return(f,g)=>{const v=ce;return openBlock(),createBlock(v,{ico:"comment",text:f.t("comment.text"),onMenuClick:d},null,8,["text"])}}},Vve=["textContent"],Hve={__name:"highlight",setup(s){const{editor:l}=ie(),c=[{label:J("base.highlight.yellowBg"),value:1,bgcolor:"#ffff8a"},{label:J("base.highlight.greenBg"),value:2,bgcolor:"#a7ffa7"},{label:J("base.highlight.purpleBg"),value:3,bgcolor:"#e6afff"},{label:J("base.highlight.blueBg"),value:4,bgcolor:"#83d3ff",divider:!0},{label:J("base.highlight.red"),value:5,color:"#e71313"},{label:J("base.highlight.green"),value:6,color:"#128a00",divider:!0}];let d=ref({});const f=v=>{var b,$;v.bgcolor&&((b=l.value)==null||b.chain().focus().setHighlight({color:v.bgcolor}).run()),v.color&&(($=l.value)==null||$.chain().focus().setColor(v.color).run()),d.value=v},g=()=>{var v,b;(v=l.value)==null||v.chain().focus().unsetHighlight().run(),(b=l.value)==null||b.chain().focus().unsetColor().run(),d.value={}};return(v,b)=>{const $=tt,y=Vr,x=wr,C=ce;return openBlock(),createBlock(C,{text:v.t("base.highlight.text"),shortcut:"Ctrl+Shift+H","menu-type":"dropdown","popup-handle":"arrow","hide-text":"","overlay-class-name":"umo-highlight-dropdown",onMenuClick:b[1]||(b[1]=E=>f(unref(d)))},{dropmenu:withCtx(()=>[createVNode(x,null,{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment$1,null,renderList(c,E=>createVNode(y,{class:"umo-text-highlight-menu",key:E.value,value:E.value,style:normalizeStyle({backgroundColor:E.bgcolor,color:E.color}),divider:E.divider,onClick:N=>f(E)},{default:withCtx(()=>[createVNode($,{name:"highlight"}),createBaseVNode("span",null,toDisplayString$1(E.label),1)]),_:2},1032,["value","style","divider","onClick"])),64)),createVNode(y,{class:"umo-text-highlight-menu umo-clear-format-menu",onClick:b[0]||(b[0]=E=>g())},{default:withCtx(()=>[createVNode($,{name:"clear-format"}),createBaseVNode("span",{textContent:toDisplayString$1(v.t("base.highlight.clear"))},null,8,Vve)]),_:1})]),_:1})]),default:withCtx(()=>[createVNode($,{name:"highlight",class:"umo-icon-highlight",style:normalizeStyle({backgroundColor:unref(d).bgcolor,color:unref(d).color})},null,8,["style"])]),_:1},8,["text"])}}},np=Fe(Hve,[["__scopeId","data-v-f78bb77d"]]),X2={__name:"align-distributed",setup(s){const{editor:l}=ie();return(c,d)=>{var f,g;const v=ce;return openBlock(),createBlock(v,{ico:"align-distributed",text:c.t("base.align.distributed"),shortcut:"Ctrl+Shift+D","hide-text":"","menu-active":(f=unref(l))==null?void 0:f.isActive({textAlign:"distributed"}),disabled:!((g=unref(l))!=null&&g.can().chain().focus().setTextAlign("distributed").run()),onMenuClick:d[0]||(d[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().setTextAlign("distributed").run()})},null,8,["text","menu-active","disabled"])}}},J2={__name:"align-justify",setup(s){const{editor:l}=ie();return(c,d)=>{var f,g;const v=ce;return openBlock(),createBlock(v,{ico:"align-justify",text:c.t("base.align.justify"),shortcut:"Ctrl+Shift+J","hide-text":"","menu-active":(f=unref(l))==null?void 0:f.isActive({textAlign:"justify"}),disabled:!((g=unref(l))!=null&&g.can().chain().focus().setTextAlign("justify").run()),onMenuClick:d[0]||(d[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().setTextAlign("justify").run()})},null,8,["text","menu-active","disabled"])}}},Uve={class:"umo-text-align-group"},Kve={__name:"align-dropdown",setup(s){let{popupVisible:l,togglePopup:c}=Qt();const{editor:d}=ie(),f=computed(()=>!d.value||d.value.isActive({textAlign:"justify"})?"left":d.value.isActive({textAlign:"center"})?"center":d.value.isActive({textAlign:"right"})?"right":d.value.isActive({textAlign:"justify"})?"justify":"left");return(g,v)=>{var b;const $=ju,y=Nu,x=Iu,C=J2,E=X2,N=ce;return openBlock(),createBlock(N,{ico:`align-${unref(f)}`,text:g.t("base.align.title"),"menu-type":"popup","hide-text":"",disabled:!((b=unref(d))!=null&&b.can().chain().focus().setTextAlign("center").run()),"popup-visible":unref(l),onTogglePopup:unref(c)},{content:withCtx(()=>[createBaseVNode("div",Uve,[createVNode($),createVNode(y),createVNode(x),createVNode(C),createVNode(E)])]),_:1},8,["ico","text","disabled","popup-visible","onTogglePopup"])}}},Q2=Fe(Kve,[["__scopeId","data-v-c7742986"]]),rp={__name:"strike",setup(s){const{editor:l}=ie();return(c,d)=>{var f,g;const v=ce;return openBlock(),createBlock(v,{ico:"strike",text:c.t("base.strike"),shortcut:"Ctrl+Shift+X","hide-text":"","menu-active":(f=unref(l))==null?void 0:f.isActive("strike"),disabled:!((g=unref(l))!=null&&g.can().chain().focus().toggleStrike().run()),onMenuClick:d[0]||(d[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().toggleStrike().run()})},null,8,["text","menu-active","disabled"])}}},ap={__name:"underline",setup(s){const{editor:l}=ie();return(c,d)=>{var f,g;const v=ce;return openBlock(),createBlock(v,{ico:"underline",text:c.t("base.underline"),shortcut:"Ctrl+U","hide-text":"","menu-active":(f=unref(l))==null?void 0:f.isActive("underline"),disabled:!((g=unref(l))!=null&&g.can().chain().focus().toggleUnderline().run()),onMenuClick:d[0]||(d[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().toggleUnderline().run()})},null,8,["text","menu-active","disabled"])}}},op={__name:"font-size",props:{select:{type:Boolean,default:!0}},setup(s){const{editor:l}=ie();Je("toolbar");const c=[{label:J("base.fontSize.default"),value:"14px",order:4},{label:J("base.fontSize.42pt"),value:"42pt",order:20},{label:J("base.fontSize.36pt"),value:"36pt",order:19},{label:J("base.fontSize.26pt"),value:"26pt",order:16},{label:J("base.fontSize.24pt"),value:"24pt",order:15},{label:J("base.fontSize.22pt"),value:"22pt",order:14},{label:J("base.fontSize.18pt"),value:"18pt",order:11},{label:J("base.fontSize.16pt"),value:"16pt",order:10},{label:J("base.fontSize.15pt"),value:"15pt",order:9},{label:J("base.fontSize.14pt"),value:"14pt",order:7},{label:J("base.fontSize.12pt"),value:"12pt",order:4},{label:J("base.fontSize.10_5pt"),value:"10.5pt",order:1},{label:J("base.fontSize.9pt"),value:"9pt",order:3},{label:J("base.fontSize.7_5pt"),value:"7.5pt",order:1},{label:J("base.fontSize.6_5pt"),value:"6.5pt",order:0},{label:"10",value:"10px",order:1},{label:"11",value:"11px",order:2},{label:"12",value:"12px",order:3},{label:"16",value:"16px",order:5},{label:"18",value:"18px",order:6},{label:"20",value:"20px",order:8},{label:"22",value:"22px",order:10},{label:"24",value:"24px",order:11},{label:"26",value:"26px",order:12},{label:"28",value:"28px",order:13},{label:"32",value:"32px",order:15},{label:"36",value:"36px",order:17},{label:"42",value:"42px",order:18},{label:"48",value:"48px",order:19},{label:"72",value:"72px",order:21},{label:"96",value:"96px",order:22}],d=v=>{l.value.chain().focus().setFontSize(v).run()},f=()=>{const{fontSize:v}=l.value.getAttributes("textStyle");if(v){const b=c.find(({value:y})=>y===v);if(!b)return;const $=c.find(({order:y})=>y===b.order+1);$&&d($.value)}else d("16px")},g=()=>{const{fontSize:v}=l.value.getAttributes("textStyle");if(v){const b=c.find(({value:y})=>y===v);if(!b)return;const $=c.find(({order:y})=>y===b.order-1);$&&d($.value)}else d("14px")};return(v,b)=>{var $;const y=ce;return openBlock(),createElementBlock(Fragment$1,null,[s.select?(openBlock(),createBlock(y,mergeProps({key:0,text:v.t("base.fontSize.text"),"menu-type":"select","hide-text":"",style:{width:"80px"},"select-options":c,"select-value":(($=unref(l))==null?void 0:$.getAttributes("textStyle").fontSize)||"14px"},v.$attrs,{placeholder:v.t("base.fontSize.text"),filterable:"",onMenuClick:d}),null,16,["text","select-value","placeholder"])):createCommentVNode("",!0),createVNode(y,{ico:"font-size-increase",text:v.t("base.fontSize.increase"),"hide-text":"",onMenuClick:f},null,8,["text"]),createVNode(y,{ico:"font-size-decrease",text:v.t("base.fontSize.increase"),"hide-text":"",onMenuClick:g},null,8,["text"])],64)}}},Wve={__name:"assistant",setup(s){const{editor:l,assistantBox:c}=ie(),d=()=>{c.value=!0,l.value.commands.focus()};return(f,g)=>{const v=ce;return openBlock(),createBlock(v,{ico:"assistant",text:f.t("assistant.text"),onMenuClick:d},null,8,["text"])}}},Gve={__name:"copy",setup(s){const{editor:l}=ie(),c=()=>{const d=Ht(l.value),{copy:f}=useClipboard({source:ref(d.attrs.code)});f(),qe("success",J("bubbleMenu.code.copy.success"))};return(d,f)=>{const g=ce;return openBlock(),createBlock(g,{ico:"copy",text:d.t("bubbleMenu.code.copy.text"),onMenuClick:c},null,8,["text"])}}},qve={__name:"word-wrap",setup(s){const{editor:l}=ie(),c=()=>{const d=Ht(l.value);l.value.commands.updateAttributes(d.type,{wordWrap:!d.attrs.wordWrap})};return(d,f)=>{var g,v;const b=ce;return openBlock(),createBlock(b,{text:d.t("bubbleMenu.code.wordWrap"),ico:"code-word-wrap","menu-active":(v=(g=unref(l))==null?void 0:g.getAttributes("codeBlock"))==null?void 0:v.wordWrap,onMenuClick:c},null,8,["text","menu-active"])}}},Yve={__name:"line-numbers",setup(s){const{editor:l}=ie(),c=()=>{const d=Ht(l.value);l.value.commands.updateAttributes(d.type,{lineNumbers:!d.attrs.lineNumbers})};return(d,f)=>{var g,v;const b=ce;return openBlock(),createBlock(b,{text:d.t("bubbleMenu.code.lineNumbers"),ico:"code-line-number","menu-active":(v=(g=unref(l))==null?void 0:g.getAttributes("codeBlock"))==null?void 0:v.lineNumbers,onMenuClick:c},null,8,["text","menu-active"])}}},Zve={__name:"themes",setup(s){const{editor:l}=ie(),c=[{label:J("bubbleMenu.code.themes.dark"),value:"dark"},{label:J("bubbleMenu.code.themes.light"),value:"light"}],d=f=>{const g=Ht(l.value);l.value.commands.updateAttributes(g.type,{theme:f})};return(f,g)=>{var v,b;const $=ce;return openBlock(),createBlock($,{text:f.t("bubbleMenu.code.themes.text"),"menu-type":"select",style:{width:"100px"},"select-options":c,"select-value":(b=(v=unref(l))==null?void 0:v.getAttributes("codeBlock"))==null?void 0:b.theme,onMenuClick:d},null,8,["text","select-value"])}}};var $l={},Fn=Symbol(),pa=Symbol(),ip=s=>typeof s=="string"?$e[s]:s,$e={plain:$l,plaintext:$l,text:$l,txt:$l},lp=(s,l)=>(l[pa]||Lu)(s,l),Lu=(s,l)=>{for(var c=[s],d,f=[],g=0;d=ip(l[Fn]);)delete l[Fn],Object.assign(l,d);for(nk(s,l,c,0);f[g++]=c[0],c=c[1];);return f},k0="</span>",Sl="",Zo="",ek=s=>{for(var l="",c=s.length,d=0;d<c;)l+=tk(s[d++]);return l},tk=s=>{if(s instanceof qa){var{type:l,alias:c,content:d}=s,f=Sl,g=Zo,v=`<span class="token ${l+(c?" "+c:"")+(l=="keyword"&&typeof d=="string"?" keyword-"+d:"")}">`;Zo+=k0,Sl+=v;var b=tk(d);return Sl=f,Zo=g,v+b+k0}return typeof s!="string"?ek(s):(s=s.replace(/&/g,"&amp;").replace(/</g,"&lt;"),Zo&&s.includes(`
`)?s.replace(/\n/g,Zo+`
`+Sl):s)},nk=(s,l,c,d,f)=>{for(var g in l)if(l[g])for(var v=0,b=l[g],$=Array.isArray(b)?b:[b];v<$.length;++v){if(f&&f[0]==g&&f[1]==v)return;for(var y=$[v],x=y.pattern||y,C=ip(y.inside),E=y.lookbehind,N=y.greedy&&x.global,W=y.alias,q=c,Y=d;q&&(!f||Y<f[2]);Y+=q[0].length,q=q[1]){var re=q[0],se=0,de,he;if(!(re instanceof qa)){if(x.lastIndex=N?Y:0,de=x.exec(N?s:re),de&&E&&de[1]&&(he=de[1].length,de.index+=he,de[0]=de[0].slice(he)),N){if(!de)break;if(de[0]){for(var ge=de.index,Se=ge+de[0].length,Ae;ge>=Y+(Ae=q[0].length);q=q[1],Y+=Ae);if(q[0]instanceof qa)continue;for(var Re=q,b=Y;(b+=Re[0].length)<Se;Re=Re[1],se++);re=s.slice(Y,b),de.index-=Y}}if(de&&de[0]){for(var ge=de.index,Be=de[0],Ke=re.slice(ge+Be.length),Lr=Y+re.length,_y=new qa(g,C?lp(Be,C):Be,Be,W),by=q,yy=0,my;by=by[1],yy++<se;);Ke&&(!by||by[0]instanceof qa?by=[Ke,by]:by[0]=Ke+by[0]),Y+=ge,q[0]=ge?re.slice(0,ge):_y,ge?q=q[1]=[_y,by]:q[1]=by,se&&(nk(s,l,q,Y,my=[g,v,Lr]),Lr=my[2]),f&&Lr>f[2]&&(f[2]=Lr)}}}}};function qa(s,l,c,d){this.type=s,this.content=l,this.alias=d,this.length=c.length}const Xve={__name:"languages",setup(s){const{editor:l}=ie(),c=Object.keys($e).map(f=>({label:f,value:f})),d=f=>{const g=Ht(l.value);l.value.commands.updateAttributes(g.type,{language:f})};return(f,g)=>{var v,b;const $=ce;return openBlock(),createBlock($,{text:f.t("bubbleMenu.code.languages"),"menu-type":"select",style:{width:"120px"},"select-options":unref(c),"select-value":(b=(v=unref(l))==null?void 0:v.getAttributes("codeBlock"))==null?void 0:b.language,filterable:"",onMenuClick:d},null,8,["text","select-options","select-value"])}}},sp={__name:"split-cell",setup(s){const{editor:l}=ie(),c=Je("toolbar");return(d,f)=>{var g;const v=ce;return openBlock(),createBlock(v,{ico:"table-split-cell",text:d.t("table.splitCell"),"hide-text":unref(c).mode==="classic",disabled:!((g=unref(l))!=null&&g.can().splitCell()),onMenuClick:f[0]||(f[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().splitCell().run()})},null,8,["text","hide-text","disabled"])}}},up={__name:"merge-cells",setup(s){const{editor:l}=ie(),c=Je("toolbar");return(d,f)=>{var g;const v=ce;return openBlock(),createBlock(v,{ico:"table-merge-cell",text:d.t("table.mergeCells"),"hide-text":unref(c).mode==="classic",disabled:!((g=unref(l))!=null&&g.can().mergeCells()),onMenuClick:f[0]||(f[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().mergeCells().run()})},null,8,["text","hide-text","disabled"])}}},cp={__name:"delete-column",setup(s){const{editor:l}=ie(),c=Je("toolbar"),d=()=>{const f=Nr({theme:"danger",header:J("table.deleteColumn.title"),body:J("table.deleteColumn.message"),confirmBtn:{theme:"danger",content:J("table.deleteColumn.delete")},onConfirm(){var g;(g=l.value)==null||g.chain().focus().deleteColumn().run(),qe("success",J("table.deleteColumn.success")),f.destroy()}})};return(f,g)=>{var v;const b=ce;return openBlock(),createBlock(b,{ico:"table-delete-column",text:f.t("table.deleteColumn.text"),"hide-text":unref(c).mode==="classic",disabled:!((v=unref(l))!=null&&v.can().deleteColumn()),onMenuClick:d},null,8,["text","hide-text","disabled"])}}},dp={__name:"delete-row",setup(s){const{editor:l}=ie(),c=Je("toolbar"),d=()=>{const f=Nr({theme:"danger",header:J("table.deleteRow.title"),body:J("table.deleteRow.message"),confirmBtn:{theme:"danger",content:J("table.deleteRow.delete")},onConfirm(){var g;(g=l.value)==null||g.chain().focus().deleteRow().run(),qe("success",J("table.deleteRow.success")),f.destroy()}})};return(f,g)=>{var v;const b=ce;return openBlock(),createBlock(b,{ico:"table-delete-row",text:f.t("table.deleteRow.text"),"hide-text":unref(c).mode==="classic",disabled:!((v=unref(l))!=null&&v.can().deleteRow()),onMenuClick:d},null,8,["text","hide-text","disabled"])}}},fp={__name:"add-column-after",setup(s){const{editor:l}=ie(),c=Je("toolbar");return(d,f)=>{var g;const v=ce;return openBlock(),createBlock(v,{ico:"table-add-column-after",text:d.t("table.addColumnAfter"),"hide-text":unref(c).mode==="classic",disabled:!((g=unref(l))!=null&&g.can().addColumnAfter()),onMenuClick:f[0]||(f[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().addColumnAfter().run()})},null,8,["text","hide-text","disabled"])}}},vp={__name:"add-column-before",setup(s){const{editor:l}=ie(),c=Je("toolbar");return(d,f)=>{var g;const v=ce;return openBlock(),createBlock(v,{ico:"table-add-column-before",text:d.t("table.addColumnBefore"),"hide-text":unref(c).mode==="classic",disabled:!((g=unref(l))!=null&&g.can().addColumnBefore()),onMenuClick:f[0]||(f[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().addColumnBefore().run()})},null,8,["text","hide-text","disabled"])}}},pp={__name:"add-row-after",setup(s){const{editor:l}=ie(),c=Je("toolbar");return(d,f)=>{var g;const v=ce;return openBlock(),createBlock(v,{ico:"table-add-row-after",text:d.t("table.addRowAfter"),"hide-text":unref(c).mode==="classic",disabled:!((g=unref(l))!=null&&g.can().addRowAfter()),onMenuClick:f[0]||(f[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().addRowAfter().run()})},null,8,["text","hide-text","disabled"])}}},mp={__name:"add-row-before",setup(s){const{editor:l}=ie(),c=Je("toolbar");return(d,f)=>{var g;const v=ce;return openBlock(),createBlock(v,{ico:"table-add-row-after",text:d.t("table.addRowBefore"),"hide-text":unref(c).mode==="classic",disabled:!((g=unref(l))!=null&&g.can().addRowBefore()),onMenuClick:f[0]||(f[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().addRowBefore().run()})},null,8,["text","hide-text","disabled"])}}},hp={__name:"cells-background",emits:["change"],setup(s,{emit:l}){let{popupVisible:c,togglePopup:d}=Qt();const{editor:f}=ie(),g=v=>{var b;c.value=!1;const $=v===""?null:v;(b=f.value)==null||b.chain().focus().setCellAttribute("backgroundColor",$).run()};return(v,b)=>{var $;const y=Mu,x=ce;return openBlock(),createBlock(x,{ico:"table-cells-background",text:v.t("table.cellBgColor.text"),tooltip:v.t("table.cellBgColor.tip"),"menu-type":"popup",huge:"",disabled:!(($=unref(f))!=null&&$.can().setCellAttribute("backgroundColor")),"popup-visible":unref(c),onTogglePopup:unref(d)},{content:withCtx(()=>[createVNode(y,{"default-color":"",onChange:g})]),_:1},8,["text","tooltip","disabled","popup-visible","onTogglePopup"])}}},gp={__name:"cells-align",setup(s){const{editor:l}=ie(),c=[{content:J("table.cellAlign.lt"),value:"left-top"},{content:J("table.cellAlign.ct"),value:"center-top"},{content:J("table.cellAlign.rt"),value:"right-top"},{content:J("table.cellAlign.jt"),value:"justify-top",divider:!0},{content:J("table.cellAlign.lm"),value:"left-middle"},{content:J("table.cellAlign.cm"),value:"center-middle"},{content:J("table.cellAlign.rm"),value:"right-middle"},{content:J("table.cellAlign.jm"),value:"justify-middle",divider:!0},{content:J("table.cellAlign.lb"),value:"left-bottom"},{content:J("table.cellAlign.cb"),value:"center-bottom"},{content:J("table.cellAlign.rb"),value:"right-bottom"},{content:J("table.cellAlign.jb"),value:"justify-bottom"}],d=({value:f})=>{var g;(g=l.value)==null||g.chain().focus().setCellAttribute("align",f).run()};return(f,g)=>{var v;const b=ce;return openBlock(),createBlock(b,{ico:"table-cells-align",text:f.t("table.cellAlign.text"),tooltip:f.t("table.cellAlign.tip"),"menu-type":"dropdown",huge:"","select-options":c,disabled:!((v=unref(l))!=null&&v.can().setCellAttribute("align")),onChange:d},null,8,["text","tooltip","disabled"])}}},Jve={__name:"download",setup(s){const{editor:l}=ie(),c=()=>{const d=Ht(l.value),f=document.createElement("a");f.href=d.attrs.url,f.download=d.attrs.name,document.body.appendChild(f),f.click(),document.body.removeChild(f)};return(d,f)=>{const g=ce;return openBlock(),createBlock(g,{ico:"download",text:d.t("bubbleMenu.file.download"),onMenuClick:c},null,8,["text"])}}},Qve={__name:"node-delete",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"node-delete",text:c.t("bubbleMenu.delete"),shortcut:"Backspace",onMenuClick:d[0]||(d[0]=g=>{var v;return(v=unref(l))==null?void 0:v.chain().focus().deleteSelectionNode().run()})},null,8,["text"])}}},epe={__name:"edit",setup(s){const{editor:l}=ie(),c=computed(()=>{var f,g;return(g=(f=l.value)==null?void 0:f.getAttributes("image"))==null?void 0:g.type}),d=computed(()=>{var f,g;return(g=(f=l.value)==null?void 0:f.getAttributes("image"))==null?void 0:g.content});return(f,g)=>{const v=Fu,b=Bu,$=Pu,y=Tu;return openBlock(),createElementBlock(Fragment$1,null,[unref(c)==="qrcode"?(openBlock(),createBlock(v,{key:0,content:unref(d)},null,8,["content"])):createCommentVNode("",!0),unref(c)==="barcode"?(openBlock(),createBlock(b,{key:1,content:unref(d)},null,8,["content"])):createCommentVNode("",!0),unref(c)==="diagrams"?(openBlock(),createBlock($,{key:2,content:unref(d)},null,8,["content"])):createCommentVNode("",!0),unref(c)==="mermaid"?(openBlock(),createBlock(y,{key:3,content:unref(d)},null,8,["content"])):createCommentVNode("",!0)],64)}}},tpe={__name:"open",setup(s){const{editor:l}=ie(),c=()=>{const d=Ht(l.value),f=document.createElement("a");f.href=d.attrs.src,f.target="_blank",document.body.appendChild(f),f.click(),document.body.removeChild(f)};return(d,f)=>{const g=ce;return openBlock(),createBlock(g,{ico:"image-open",text:d.t("bubbleMenu.image.open"),onMenuClick:c},null,8,["text"])}}},npe={__name:"preview",setup(s){const{editor:l}=ie(),c=ref(!1);return(d,f)=>{var g;const v=ce,b=sC;return openBlock(),createElementBlock(Fragment$1,null,[createVNode(v,{ico:"image-preview",text:d.t("bubbleMenu.image.preview"),onMenuClick:f[0]||(f[0]=$=>c.value=!c.value)},null,8,["text"]),createVNode(b,{visible:c.value,"onUpdate:visible":f[1]||(f[1]=$=>c.value=$),images:[(g=unref(l))==null?void 0:g.getAttributes("image").src]},null,8,["visible","images"])],64)}}},rpe={__name:"remove-background",setup(s){const{options:l,editor:c}=ie();let d=ref(!1);const f=async()=>{const g=Ht(c.value),{src:v}=g.attrs;d.value=!0;const b=await removeBackground(v,{publicPath:`${l.value.cdnUrl}/libs/imgly/background-removal-data/`}),$=new File([b],`${fa(10)}.png`,{type:"image/png"});c.value.commands.updateAttributes(g.type,{src:URL.createObjectURL(b),uploaded:!1,file:$}),d.value=!1,console.log("ok")};return(g,v)=>{const b=tt,$=ce;return openBlock(),createBlock($,{text:unref(d)?g.t("bubbleMenu.image.removingBg"):g.t("bubbleMenu.image.removeBg"),disabled:unref(d),onMenuClick:f},{default:withCtx(()=>[unref(d)?(openBlock(),createBlock(b,{key:1,class:"umo-image-loading",name:"loading"})):(openBlock(),createBlock(b,{key:0,name:"image-remove-background"}))]),_:1},8,["text","disabled"])}}},ape=Fe(rpe,[["__scopeId","data-v-78ce4c34"]]),ope={__name:"reset",setup(s){const{editor:l}=ie(),c=()=>{const d=Ht(l.value);l.value.commands.updateAttributes(d.type,{top:0,left:0,angle:0,flipX:!1,flipy:!1})};return(d,f)=>{const g=ce;return openBlock(),createBlock(g,{ico:"image-reset",text:d.t("bubbleMenu.image.reset"),onMenuClick:c},null,8,["text"])}}},ipe={__name:"draggable",setup(s){const{editor:l}=ie(),c=()=>{const d=Ht(l.value);l.value.commands.updateAttributes(d.type,{draggable:!d.attrs.draggable})};return(d,f)=>{var g,v;const b=ce;return openBlock(),createBlock(b,{ico:"image-draggable",text:d.t("bubbleMenu.image.draggable"),"menu-active":(v=(g=unref(l))==null?void 0:g.getAttributes("image"))==null?void 0:v.draggable,onMenuClick:c},null,8,["text","menu-active"])}}},lpe={__name:"proportion",setup(s){const{editor:l}=ie(),c=()=>{const d=Ht(l.value);l.value.commands.updateAttributes(d.type,{equalProportion:!d.attrs.equalProportion})};return(d,f)=>{var g,v;const b=ce;return openBlock(),createBlock(b,{ico:"equal-proportion",text:d.t("bubbleMenu.image.proportion"),"menu-active":(v=(g=unref(l))==null?void 0:g.getAttributes("image"))==null?void 0:v.equalProportion,onMenuClick:c},null,8,["text","menu-active"])}}},spe={__name:"flip",setup(s){const{editor:l}=ie(),c=d=>{const f=Ht(l.value),{flipX:g,flipY:v}=f.attrs;d==="flipX"&&l.value.commands.updateAttributes(f.type,{flipX:!g}),d==="flipY"&&l.value.commands.updateAttributes(f.type,{flipY:!v})};return(d,f)=>{var g,v,b,$;const y=ce,x=tt;return openBlock(),createElementBlock(Fragment$1,null,[createVNode(y,{ico:"image-flip",text:d.t("bubbleMenu.image.flipX"),"menu-active":(v=(g=unref(l))==null?void 0:g.getAttributes("image"))==null?void 0:v.flipY,onMenuClick:f[0]||(f[0]=C=>c("flipY"))},null,8,["text","menu-active"]),createVNode(y,{text:d.t("bubbleMenu.image.flipY"),"menu-active":($=(b=unref(l))==null?void 0:b.getAttributes("image"))==null?void 0:$.flipX,onMenuClick:f[1]||(f[1]=C=>c("flipX"))},{default:withCtx(()=>[createVNode(x,{name:"image-flip",style:{transform:"rotate(90deg)"}})]),_:1},8,["text","menu-active"])],64)}}},en=s=>(pushScopeId("data-v-5e179d50"),s=s(),popScopeId(),s),upe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),cpe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),dpe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),fpe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),vpe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),ppe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),mpe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),hpe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),gpe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),bpe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),ype=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),_pe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),wpe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),Cpe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),kpe=en(()=>createBaseVNode("div",{class:"umo-bubble-menu-divider"},null,-1)),$pe={__name:"menus",setup(s){const{options:l,editor:c}=ie();return(d,f)=>{var g,v,b,$,y,x,C,E,N,W,q,Y,re,se,de,he,ge,Se,Ae,Re,Be,Ke,Lr;const _y=ju,by=Nu,yy=Iu,my=spe,$t=lpe,K$=ipe,Y$=ope,W$=ape,U$=npe,hy=tpe,G$=epe,ky=Qve,$y=Jve,rS=gp,lS=hp,bS=mp,IS=pp,BS=vp,MS=fp,zS=dp,LS=cp,nS=up,Z$=sp,dS=Xve,ES=Zve,wy=Yve,tS=qve,yS=Gve,Q$=Wve,eS=op,cS=ol,wS=Du,xS=ap,OS=rp,mS=Q2,pS=Aa,fC=il,US=np,Iye=zve;return(g=unref(c))!=null&&g.isActive("toc")||(v=unref(c))!=null&&v.isActive("pagination")||(b=unref(c))!=null&&b.isActive("horizontalRule")||($=unref(c))!=null&&$.getAttributes("image").error?(openBlock(),createElementBlock(Fragment$1,{key:0},[],64)):(y=unref(c))!=null&&y.isActive("image")&&!((x=unref(c))!=null&&x.getAttributes("image").error)?(openBlock(),createElementBlock(Fragment$1,{key:1},[createVNode(_y),createVNode(by),createVNode(yy),upe,createVNode(my),createVNode($t),createVNode(K$),createVNode(Y$),cpe,((E=(C=unref(c))==null?void 0:C.getAttributes("image"))==null?void 0:E.type)==="image"||["image/png","image/jpeg"].includes((W=(N=unref(c))==null?void 0:N.getAttributes("image"))==null?void 0:W.type)?(openBlock(),createBlock(W$,{key:0})):createCommentVNode("",!0),((Y=(q=unref(c))==null?void 0:q.getAttributes("image"))==null?void 0:Y.type)==="image"||["image/png","image/jpeg"].includes((se=(re=unref(c))==null?void 0:re.getAttributes("image"))==null?void 0:se.type)?(openBlock(),createBlock(U$,{key:1})):createCommentVNode("",!0),createVNode(hy),dpe,createVNode(G$),createVNode(ky)],64)):(de=unref(c))!=null&&de.isActive("video")||(he=unref(c))!=null&&he.isActive("audio")||(ge=unref(c))!=null&&ge.isActive("file")||(Se=unref(c))!=null&&Se.isActive("iframe")?(openBlock(),createElementBlock(Fragment$1,{key:2},[createVNode(_y),createVNode(by),createVNode(yy),fpe,(Ae=unref(c))!=null&&Ae.isActive("file")||(Re=unref(c))!=null&&Re.isActive("video")||(Be=unref(c))!=null&&Be.isActive("audio")?(openBlock(),createBlock($y,{key:0})):createCommentVNode("",!0),createVNode(ky)],64)):(Ke=unref(c))!=null&&Ke.isActive("table")?(openBlock(),createElementBlock(Fragment$1,{key:3},[createVNode(rS),createVNode(lS),vpe,createVNode(bS),createVNode(IS),createVNode(BS),createVNode(MS),ppe,createVNode(zS),createVNode(LS),mpe,createVNode(nS),createVNode(Z$)],64)):(Lr=unref(c))!=null&&Lr.isActive("codeBlock")?(openBlock(),createElementBlock(Fragment$1,{key:4},[createVNode(dS),createVNode(ES),hpe,createVNode(wy),createVNode(tS),gpe,createVNode(yS),createVNode(ky)],64)):(openBlock(),createElementBlock(Fragment$1,{key:5},[unref(l).assistant.enabled?(openBlock(),createElementBlock(Fragment$1,{key:0},[createVNode(Q$),bpe],64)):createCommentVNode("",!0),createVNode(eS,{select:!1}),ype,createVNode(cS),createVNode(wS),createVNode(xS),createVNode(OS),_pe,createVNode(mS),wpe,createVNode(pS),createVNode(fC),createVNode(US),Cpe,unref(l).document.enableComment?(openBlock(),createElementBlock(Fragment$1,{key:1},[createVNode(Iye),kpe],64)):createCommentVNode("",!0),renderSlot(d.$slots,"bubble_menu",{},void 0,!0)],64))}}},Spe=Fe($pe,[["__scopeId","data-v-5e179d50"]]),xpe={class:"umo-editor-bubble-menu-container"},Ope={__name:"index",setup(s){const{options:l,editor:c,painter:d,blockMenu:f,assistantBox:g,commentBox:v}=ie();let b=ref(null);const $=ref({appendTo:"parent",maxWidth:580,zIndex:99,onShow(y){b.value=y},onHide(){g.value=!1,v.value=!1},onDestroy(){b.value=null}});return watch(()=>[g.value,v.value],y=>{var x;(x=b.value)==null||x.setProps({placement:y.includes(!0)?"bottom":"top"})}),(y,x)=>{const C=Spe,E=Rve,N=Cve;return openBlock(),createElementBlock("div",xpe,[withDirectives(createVNode(unref(BubbleMenu),{class:normalizeClass(["umo-editor-bubble-menu",{assistant:unref(g)}]),editor:unref(c),"tippy-options":$.value},{default:withCtx(()=>[unref(l).document.enableBubbleMenu&&!unref(g)&&!unref(v)?(openBlock(),createBlock(C,{key:0},{bubble_menu:withCtx(W=>[renderSlot(y.$slots,"bubble_menu",normalizeProps(guardReactiveProps(W)))]),_:3})):createCommentVNode("",!0),unref(l).assistant.enabled&&unref(g)?(openBlock(),createBlock(E,{key:1})):createCommentVNode("",!0),unref(l).document.enableComment&&unref(v)?(openBlock(),createBlock(N,{key:2})):createCommentVNode("",!0)]),_:3},8,["class","editor","tippy-options"]),[[vShow,!unref(f)&&!unref(d).enabled&&!unref(c).isEmpty]])])}}},Epe=Extension.create({name:"placeholder",addOptions(){return{types:["paragraph"],placeholder:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{placeholder:{default:this.options.placeholder,parseHTML:s=>s.getAttribute("data-placeholder"),renderHTML:({placeholder:s})=>({"data-placeholder":s})}}}]}}),{painter:ed,setPainter:td}=ie(),Ape=Extension.create({name:"painter",addCommands(){return{setFormatPainter:s=>({editor:l,view:c})=>{const{tr:d}=c.state,f=l.state.selection.$head.marks();return td({enabled:!0,once:s,marks:[...f]}),c.dispatch(d.setMeta("painterAction",{type:"start",marks:f})),!0},unsetFormatPainter:()=>({view:s})=>{const{tr:l}=s.state;return td({enabled:!1,once:!0,marks:[]}),s.dispatch(l.setMeta("painterAction",{type:"end"})),!0}}},addProseMirrorPlugins(){return[new Plugin({key:new PluginKey("format-painter"),state:{init:()=>[],apply(s,l){const c=s.getMeta("painterAction");return(c==null?void 0:c.type)==="start"?l=c.marks:(c==null?void 0:c.type)==="end"&&(l=[]),l}},props:{handleDOMEvents:{mousedown(s,l){const c=this.getState(s.state);if(!c||c.length===0)return!1;const d=()=>{if(document.removeEventListener("mouseup",d),!ed.value.enabled)return;const{dispatch:f}=s;let{tr:g,selection:v}=s.state;g=g.removeMark(v.from,v.to);for(let $ of c)$.type.name!=="link"&&(g=g.addMark(v.from,v.to,$));const{once:b}=ed.value;b?(td({enabled:!1,once:b,marks:[]}),f(g.setMeta("painterAction",{type:"end"}))):f(g.setMeta("painterAction",{type:"start",marks:ed.value.marks}))};return document.addEventListener("mouseup",d),!0}}}})]}}),Tpe=Extension.create({name:"fontSize",addOptions(){return{types:["textStyle"],defaultFontSize:"14px"}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:this.options.defaultFontSize,parseHTML:s=>s.style.fontSize||this.options.defaultFontSize,renderHTML:s=>s.fontSize===this.options.defaultFontSize?{}:{style:`font-size: ${s.fontSize}`}}}}]},addCommands(){return{setFontSize:s=>({chain:l})=>l().setMark("textStyle",{fontSize:s}).run(),unsetFontSize:()=>({chain:s})=>s().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),Ppe=BulletList.extend({content:"listItem*",addAttributes(){var s;return{...(s=this.parent)==null?void 0:s.call(this),listStyleType:{default:"disc",parseHTML:l=>l.style["list-style-type"]||"disc",renderHTML:({listStyleType:l})=>({style:`list-style-type: ${l}`})}}}}),Mpe=OrderedList.extend({content:"listItem*",addAttributes(){var s;return{...(s=this.parent)==null?void 0:s.call(this),listType:{default:"decimal",parseHTML:l=>l.style["list-style-type"]||"decimal",renderHTML:({listType:l})=>({style:`list-style-type: ${l}`})}}}}),nd="indent-",Ipe=Extension.create({name:"indent",addOptions(){return{types:["heading","listItem","taskItem","paragraph"],minLevel:0,maxLevel:5}},addGlobalAttributes(){return[{types:this.options.types,attributes:{indent:{default:null,renderHTML:s=>s.indent?s.indent>this.options.minLevel?{class:`${nd}${s.indent}`}:{}:{},parseHTML:s=>{let l="";if(s.classList.forEach(c=>{c.indexOf(nd)===0&&(l=c)}),l){const c=parseInt(l.slice(nd.length),7);return c&&c>this.options.minLevel?c:null}return null}}}}]},addCommands(){const s=(d,f,g)=>{var v;const b=((v=d==null?void 0:d.doc)==null?void 0:v.nodeAt(f))||null;if(b){const $=(b.attrs.indent||0)+g,{minLevel:y,maxLevel:x}=this.options;let C=$;if($<y?C=y:$>x&&(C=x),C!==b.attrs.indent){const{indent:E,...N}=b.attrs,W=C>y?{...N,indent:C}:N;return d.setNodeMarkup(f,b.type,W,b.marks)}}return d},l=(d,f)=>{const{doc:g,selection:v}=d;if(g&&v&&(v instanceof TextSelection||v instanceof AllSelection)){const{from:b,to:$}=v;g.nodesBetween(b,$,(y,x)=>this.options.types.includes(y.type.name)?(d=s(d,x,f),!1):!0)}return d},c=d=>()=>({tr:f,state:g,dispatch:v})=>{const{selection:b}=g;return f=f.setSelection(b),f=l(f,d),f.docChanged?(v==null||v(f),!0):!1};return{indent:c(1),outdent:c(-1)}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.indent(),"Shift-Tab":()=>this.editor.commands.outdent()}}}),Npe=TextAlign.extend({addOptions(){var s;return{...(s=this.parent)==null?void 0:s.call(this),types:["heading","paragraph"],alignments:["left","center","right","justify","distributed"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:s=>s.style.textAlignLast?"distributed":s.style.textAlign||this.options.defaultAlignment,renderHTML:s=>s.textAlign===this.options.defaultAlignment?{}:s.textAlign==="distributed"?{style:"text-align-last: justify"}:{style:`text-align: ${s.textAlign}`}}}}]},addKeyboardShortcuts(){var s;return{...(s=this.parent)==null?void 0:s.call(this),"Mod-Shift-d":()=>this.editor.commands.setTextAlign("distributed")}}}),jpe=Extension.create({name:"nodeAlign",addOptions(){return{defaultAlignment:"center",alignments:["flex-start","center","flex-end"],types:["image","video","audio","iframe","file"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{nodeAlign:{default:this.options.defaultAlignment,parseHTML:s=>s.style.justifyContent||this.options.defaultAlignment,renderHTML:s=>s.nodeAlign===this.options.defaultAlignment?{}:{style:`justify-content: ${s.nodeAlign}`}}}}]},addCommands(){return{setNodeAlign:s=>({commands:l})=>this.options.alignments.includes(s)?this.options.types.every(c=>l.updateAttributes(c,{nodeAlign:s})):!1,unsetNodeAlign:()=>({commands:s})=>this.options.types.every(l=>s.resetAttributes(l,"nodeAlign"))}}}),Dpe=TaskList.extend({content:"taskItem*"}),Bpe=Extension.create({name:"lineHeight",addOptions(){return{types:[],defaultLineHeight:1.5}},addGlobalAttributes(){return[{types:this.options.types,attributes:{lineHeight:{default:this.options.defaultLineHeight,parseHTML:s=>s.style.lineHeight||this.options.defaultLineHeight,renderHTML:s=>({style:`line-height: ${s.lineHeight}`})}}}]},addCommands(){return{setLineHeight:s=>({commands:l})=>this.options.types.every(c=>l.updateAttributes(c,{lineHeight:s})),unsetLineHeight:()=>({commands:s})=>this.options.types.every(l=>s.resetAttributes(l,"lineHeight"))}}}),Fpe=Extension.create({name:"margin",addOptions(){return{types:["heading","paragraph","audio","codeBlock","file","iframe","image","toc","video","horizontalRule","table","bulletList","orderedList","taskList"],margin:{top:0,bottom:0}}},addGlobalAttributes(){return[{types:this.options.types,attributes:{margin:{default:{},parseHTML:s=>{const{marginTop:l,marginBottom:c}=s.style;if(l===""&&c===""||l==="0px"&&c==="0px")return{};let d={top:"0px",bottom:"0px"};return l&&l!=="0px"&&(d.top=l.replace(/px/g,"")),c&&c!=="0px"&&(d.bottom=c.replace(/px/g,"")),d},renderHTML:({margin:s})=>{if(!Object.keys(s).length)return{};const{top:l,bottom:c}=s;let d="";return l&&l!==""&&(d+=`margin-top: ${l}px;`),c&&c!==""&&(d+=`margin-bottom: ${c}px;`),{style:d}}}}}]},addCommands(){return{setMargin:s=>({editor:l,commands:c})=>this.options.types.every(d=>{const{margin:f}=l.getAttributes(d);return c.updateAttributes(d,{margin:Object.assign({},f,s)})}),unsetMargin:()=>({commands:s})=>this.options.types.every(l=>s.resetAttributes(l,"margin"))}}}),Lpe=(s,l,c)=>RegExp(l?s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"):s,c?"gu":"gui");function Rpe(s,l,c,d){const f=[],g=[];let v=[],b=0;if(!l)return{decorationsToReturn:DecorationSet.empty,results:[]};s==null||s.descendants(($,y)=>{$.isText?v[b]?v[b]={text:v[b].text+$.text,pos:v[b].pos}:v[b]={text:`${$.text}`,pos:y}:b+=1}),v=v.filter(Boolean);for(const $ of v){const{text:y,pos:x}=$,C=Array.from(y.matchAll(l)).filter(([E])=>E.trim());for(const E of C){if(E[0]==="")break;E.index!==void 0&&g.push({from:x+E.index,to:x+E.index+E[0].length})}}for(let $=0;$<g.length;$+=1){const y=g[$],x=$===d?`${c} ${c}-current`:c,C=Decoration.inline(y.from,y.to,{class:x});f.push(C)}return{decorationsToReturn:DecorationSet.create(s,f),results:g}}const zpe=(s,l,{state:c,dispatch:d})=>{if(!l[0])return;const{from:f,to:g}=l[0];d&&d(c.tr.insertText(s,f,g))},Vpe=(s,l,c,d)=>{const f=l+1;if(!d[f])return null;const{from:g,to:v}=d[l],b=v-g-s.length+c,{from:$,to:y}=d[f];return d[f]={to:y-b,from:$-b},[b,d]},Hpe=(s,l,{tr:c,dispatch:d})=>{let f=0,g=l.slice();if(g.length){for(let v=0;v<g.length;v+=1){const{from:b,to:$}=g[v];c.insertText(s,b,$);const y=Vpe(s,v,f,g);y&&(f=y[0],g=y[1])}d(c)}},Upe=new PluginKey("searchAndReplacePlugin"),Kpe=Extension.create({name:"searchAndReplace",addOptions(){return{searchResultClass:"search-result",disableRegex:!0}},addStorage(){return{searchTerm:"",replaceTerm:"",results:[],lastSearchTerm:"",caseSensitive:!1,lastCaseSensitive:!1,resultIndex:0,lastResultIndex:0}},addCommands(){return{setSearchTerm:s=>({editor:l})=>(l.storage.searchAndReplace.searchTerm=s,!1),setReplaceTerm:s=>({editor:l})=>(l.storage.searchAndReplace.replaceTerm=s,!1),setCaseSensitive:s=>({editor:l})=>(l.storage.searchAndReplace.caseSensitive=s,!1),resetIndex:()=>({editor:s})=>(s.storage.searchAndReplace.resultIndex=0,!1),nextSearchResult:()=>({editor:s})=>{const{results:l,resultIndex:c}=s.storage.searchAndReplace,d=c+1;return l[d]?s.storage.searchAndReplace.resultIndex=d:s.storage.searchAndReplace.resultIndex=0,!1},previousSearchResult:()=>({editor:s})=>{const{results:l,resultIndex:c}=s.storage.searchAndReplace,d=c-1;return l[d]?s.storage.searchAndReplace.resultIndex=d:s.storage.searchAndReplace.resultIndex=l.length-1,!1},replace:()=>({editor:s,state:l,dispatch:c})=>{const{replaceTerm:d,results:f}=s.storage.searchAndReplace;return zpe(d,f,{state:l,dispatch:c}),!1},replaceAll:()=>({editor:s,tr:l,dispatch:c})=>{const{replaceTerm:d,results:f}=s.storage.searchAndReplace;return Hpe(d,f,{tr:l,dispatch:c}),!1}}},addProseMirrorPlugins(){const s=this.editor,{searchResultClass:l,disableRegex:c}=this.options,d=v=>s.storage.searchAndReplace.lastSearchTerm=v,f=v=>s.storage.searchAndReplace.lastCaseSensitive=v,g=v=>s.storage.searchAndReplace.lastResultIndex=v;return[new Plugin({key:Upe,state:{init:()=>DecorationSet.empty,apply({doc:v,docChanged:b},$){const{searchTerm:y,lastSearchTerm:x,caseSensitive:C,lastCaseSensitive:E,resultIndex:N,lastResultIndex:W}=s.storage.searchAndReplace;if(!b&&x===y&&E===C&&W===N)return $;if(d(y),f(C),g(N),!y)return s.storage.searchAndReplace.results=[],DecorationSet.empty;const{decorationsToReturn:q,results:Y}=Rpe(v,Lpe(y,c,C),l,N);return s.storage.searchAndReplace.results=Y,q}},props:{decorations(v){return this.getState(v)}}})]}}),Wpe=["src"],Gpe={key:0,class:"uploading"},qpe=createBaseVNode("span",null,null,-1),Ype=[qpe],Zpe={__name:"node-view",props:nodeViewProps,setup(s){const{options:l,editor:c}=ie(),{imagePreview:d}=ie(),{isLoading:f,error:g}=useImage({src:s.node.attrs.src}),v=ref(null),b=ref(null);let $=ref(!1),y=ref(0),x=ref(200);const C=computed(()=>{const{nodeAlign:de,margin:he}=s.node.attrs,ge=he!=null&&he.top&&(he==null?void 0:he.top)!==""?he.top+"px":void 0,Se=he!=null&&he.bottom&&(he==null?void 0:he.bottom)!==""?he.bottom+"px":void 0;return{"justify-content":de,marginTop:ge,marginBottom:Se}}),E=async()=>{if(!(s.node.attrs.uploaded||!s.node.attrs.file))try{const{id:de,url:he}=await l.value.onFileUpload(s.node.attrs.file);v.value&&s.updateAttributes({id:de,src:he,file:null,uploaded:!0})}catch(de){qe("error",de.message)}},N=()=>{if(s.node.attrs.width===null){const{clientWidth:de,clientHeight:he}=b.value;y.value=v.value.$el.clientWidth;const ge=de/he;x.value=v.value.$el.clientWidth/ge,s.updateAttributes({width:parseInt(200*ge)})}},W=({angle:de})=>{s.updateAttributes({angle:de})},q=({width:de,height:he})=>{s.updateAttributes({width:parseInt(de),height:parseInt(he)})},Y=()=>{c.value.commands.autoPaging(!1)},re=()=>{c.value.commands.autoPaging()},se=({left:de,top:he})=>{s.updateAttributes({left:de,top:he})};return onClickOutside(v,()=>$.value=!1),watch(()=>s.node.attrs.equalProportion,async()=>{await nextTick();const de=b.value.offsetWidth,he=b.value.offsetHeight;s.updateAttributes({width:de,height:he})}),watch(()=>s.node.attrs.src,async de=>{if(s.node.attrs.uploaded===!1&&!g.value){if(de!=null&&de.startsWith("data:image")){const he=de.split(";")[0].split(":")[1];let ge=he.split("/")[1];ge==="jpeg"&&(ge="jpg"),ge==="svg+xml"&&(ge="svg");const Se=fa(10),Ae=await cjs.base64ToFile(de,`${Se}.${ge}`,{type:he});s.updateAttributes({file:Ae})}await nextTick(),E()}},{immediate:!0}),watch(()=>g.value,({type:de})=>{s.updateAttributes({error:de==="error"})}),(de,he)=>{const ge=tt;return openBlock(),createBlock(unref(NodeViewWrapper),{ref_key:"containerRef",ref:v,class:"umo-node-view",id:de.node.attrs.id,style:normalizeStyle(C.value),onDblclick:he[1]||(he[1]=Se=>d.value=de.node.attrs.src)},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["umo-node-container umo-select-outline umo-node-image",{"is-loading":de.node.attrs.src&&unref(f),"is-error":de.node.attrs.src&&unref(g),"is-draggable":de.node.attrs.draggable,"umo-hover-shadow":!unref(l).document.readOnly}])},[de.node.attrs.src&&unref(f)?(openBlock(),createElementBlock("div",{key:0,class:"loading",style:normalizeStyle({height:`${de.node.attrs.height}px`})},[createVNode(ge,{name:"loading",class:"loading-icon"}),createTextVNode(" "+toDisplayString$1(de.t("node.image.loading")),1)],4)):de.node.attrs.src&&unref(g)?(openBlock(),createElementBlock("div",{key:1,class:"error",style:normalizeStyle({height:`${de.node.attrs.height}px`})},[createVNode(ge,{name:"image-failed",class:"error-icon"}),createTextVNode(" "+toDisplayString$1(de.t("node.image.error")),1)],4)):(openBlock(),createBlock(unref(be),{key:2,selected:unref($),rotatable:!0,boundary:!1,draggable:!!de.node.attrs.draggable&&!unref(l).document.readOnly,disabled:unref(l).document.readOnly,angle:de.node.attrs.angle,width:Number(de.node.attrs.width),height:Number(de.node.attrs.height),left:Number(de.node.attrs.left),top:Number(de.node.attrs.top),"min-width":14,"min-height":14,"max-width":unref(y),"max-height":de.node.attrs.equalProportion?unref(x):void 0,"z-index":10,"equal-proportion":de.node.attrs.equalProportion,onRotate:W,onResize:q,onResizeStart:Y,onResizeEnd:re,onDrag:se,onClick:he[0]||(he[0]=Se=>isRef($)?$.value=!0:$=!0)},{default:withCtx(()=>[createBaseVNode("img",{ref_key:"imageRef",ref:b,src:de.node.attrs.src,style:normalizeStyle({transform:de.node.attrs.flipX||de.node.attrs.flipY?`rotateX(${de.node.attrs.flipX?"180":"0"}deg) rotateY(${de.node.attrs.flipY?"180":"0"}deg)`:"none"}),loading:"lazy",onLoad:N},null,44,Wpe),!de.node.attrs.uploaded&&de.node.attrs.file!==null?(openBlock(),createElementBlock("div",Gpe,Ype)):createCommentVNode("",!0)]),_:1},8,["selected","draggable","disabled","angle","width","height","left","top","max-width","max-height","equal-proportion"]))],2)]),_:1},8,["id","style"])}}},$0=Image$1.extend({atom:!0,addAttributes(){return{vnode:{default:!0},id:{default:null},type:{default:"image"},file:{default:null},src:{default:null},content:{default:null},width:{default:null},height:{default:200},left:{default:0},top:{default:0},angle:{default:null},draggable:{default:!1},rotatable:{default:!1},equalProportion:{default:!0},flipX:{default:!1},flipY:{default:!1},uploaded:{default:!1},error:{default:!1}}},parseHTML(){return[{tag:"img"}]},addNodeView(){return VueNodeViewRenderer(Zpe)},addCommands(){return{setImage:(s,l)=>({commands:c,editor:d})=>l?c.insertContent({type:this.name,attrs:s}):c.insertContentAt(d.state.selection.anchor,{type:this.name,attrs:s})}}}),Xpe={"zh-CN":{restart:"",rewind:" {seektime} ",play:"",pause:"",fastForward:" {seektime} ",seekLabel:"{currentTime} / {duration}",played:"",buffered:"",currentTime:"",duration:"",volume:"",mute:"",unmute:"",enableCaptions:"",disableCaptions:"",download:"",enterFullscreen:"",exitFullscreen:"",captions:"",settings:"",pip:"",menuBack:"",seek:"",speed:"",normal:"",quality:"",loop:"",start:"",end:"",all:"",reset:"",disabled:"",enabled:""},"en-US":{restart:"Restart",rewind:"Rewind {seektime}s",play:"Play",pause:"Pause",fastForward:"Forward {seektime}s",seek:"Seek",seekLabel:"{currentTime} of {duration}",played:"Played",buffered:"Buffered",currentTime:"Current time",duration:"Duration",volume:"Volume",mute:"Mute",unmute:"Unmute",enableCaptions:"Enable captions",disableCaptions:"Disable captions",download:"Download",enterFullscreen:"Enter fullscreen",exitFullscreen:"Exit fullscreen",frameTitle:"Player for {title}",captions:"Captions",settings:"Settings",pip:"PIP",menuBack:"Go back to previous menu",speed:"Speed",normal:"Normal",quality:"Quality",loop:"Loop",start:"Start",end:"End",all:"All",reset:"Reset",disabled:"Disabled",enabled:"Enabled"}},rk=s=>new Plyr(s,{i18n:Xpe[zt.global.locale.value],settings:[],tooltips:{controls:!0},storage:{key:"umo-editor:player"},disableContextMenu:!1}),Jpe={class:"umo-node-container umo-hover-shadow umo-node-video"},Qpe=["src"],eme={key:0,class:"uploading"},tme={__name:"node-view",props:nodeViewProps,setup(s){const{options:l,editor:c}=ie(),d=ref(null);let f=ref(!1);const g=ref(null);let v=ref(null),b=ref(0),$=ref(0);const y=computed(()=>{const{nodeAlign:W,margin:q}=s.node.attrs,Y=q!=null&&q.top&&(q==null?void 0:q.top)!==""?q.top+"px":void 0,re=q!=null&&q.bottom&&(q==null?void 0:q.bottom)!==""?q.bottom+"px":void 0;return{"justify-content":W,marginTop:Y,marginBottom:re}});onMounted(async()=>{if(await nextTick(),v.value=rk(g.value),s.node.attrs.uploaded===!1&&s.node.attrs.file)try{const{url:W}=await l.value.onFileUpload(s.node.attrs.file);d.value&&s.updateAttributes({src:W,file:null,uploaded:!0})}catch(W){qe("error",W.message)}});const x=()=>{if(s.node.attrs.width===null){const{clientWidth:W,clientHeight:q}=g.value;b.value=d.value.$el.clientWidth;const Y=W/q;$.value=d.value.$el.clientWidth/Y,s.updateAttributes({width:parseInt(200*Y)})}},C=({width:W,height:q})=>{s.updateAttributes({width:W,height:q})},E=()=>{c.value.commands.autoPaging(!1)},N=()=>{c.value.commands.autoPaging()};return onBeforeUnmount(()=>{var W;v.value&&((W=v.value)==null||W.destroy())}),onClickOutside(d,()=>f.value=!1),(W,q)=>(openBlock(),createBlock(unref(NodeViewWrapper),{ref_key:"containerRef",ref:d,class:"umo-node-view",id:W.node.attrs.id,style:normalizeStyle(y.value)},{default:withCtx(()=>[createBaseVNode("div",Jpe,[createVNode(unref(be),{selected:unref(f),rotatable:!1,boundary:!1,width:Number(W.node.attrs.width),height:Number(W.node.attrs.height),"min-width":300,"min-height":200,"max-width":unref(b),"max-height":unref($),"equal-proportion":!0,onResize:C,onResizeStart:E,onResizeEnd:N,onClick:q[0]||(q[0]=Y=>isRef(f)?f.value=!0:f=!0)},{default:withCtx(()=>[createBaseVNode("video",{ref_key:"videoRef",ref:g,src:W.node.attrs.src,preload:"metadata",controls:"",crossorigin:"",onCanplay:x},null,40,Qpe),!W.node.attrs.uploaded&&W.node.attrs.file!==null?(openBlock(),createElementBlock("div",eme)):createCommentVNode("",!0)]),_:1},8,["selected","width","height","max-width","max-height"])])]),_:1},8,["id","style"]))}},nme=Node$1.create({name:"video",group:"block",atom:!0,addAttributes(){return{id:{default:null},file:{default:null},src:{default:null},width:{default:null},height:{default:200},draggable:{default:!1},uploaded:{default:!1}}},parseHTML(){return[{tag:"video"}]},renderHTML({HTMLAttributes:s}){return["video",mergeAttributes(s)]},addNodeView(){return VueNodeViewRenderer(tme)},addCommands(){return{setVideo:s=>({commands:l,editor:c})=>l.insertContentAt(c.state.selection.anchor,{type:this.name,attrs:s})}}}),rme={class:"umo-node-container umo-hover-shadow umo-select-outline umo-node-audio"},ame=["src"],ome={key:0,class:"uploading"},ime={__name:"node-view",props:nodeViewProps,setup(s){const{options:l}=ie(),c=ref(null),d=ref(null);let f=ref(null),g=ref(!1);const v=computed(()=>{const{nodeAlign:b,margin:$}=s.node.attrs,y=$!=null&&$.top&&($==null?void 0:$.top)!==""?$.top+"px":void 0,x=$!=null&&$.bottom&&($==null?void 0:$.bottom)!==""?$.bottom+"px":void 0;return{"justify-content":b,marginTop:y,marginBottom:x}});return onMounted(async()=>{if(f.value=rk(d.value),s.node.attrs.uploaded===!1&&s.node.attrs.file)try{const{url:b}=await l.value.onFileUpload(s.node.attrs.file);c.value&&s.updateAttributes({src:b,file:null,uploaded:!0})}catch(b){qe("error",b.message)}}),onBeforeUnmount(()=>{var b;f.value&&((b=f.value)==null||b.destroy())}),onClickOutside(c,()=>g.value=!1),(b,$)=>(openBlock(),createBlock(unref(NodeViewWrapper),{ref_key:"containerRef",ref:c,class:"umo-node-view",id:b.node.attrs.id,style:normalizeStyle(v.value)},{default:withCtx(()=>[createBaseVNode("div",rme,[createBaseVNode("audio",{ref_key:"audiorRef",ref:d,src:b.node.attrs.src,controls:"",crossorigin:""},null,8,ame),!b.node.attrs.uploaded&&b.node.attrs.file!==null?(openBlock(),createElementBlock("div",ome)):createCommentVNode("",!0)])]),_:1},8,["id","style"]))}},lme=Node$1.create({name:"audio",group:"block",atom:!0,addAttributes(){return{vnode:{default:!0},id:{default:null},file:{default:null},src:{default:null},uploaded:{default:!1}}},parseHTML(){return[{tag:"audio"}]},renderHTML({HTMLAttributes:s}){return["audio",mergeAttributes(s)]},addNodeView(){return VueNodeViewRenderer(ime)},addCommands(){return{setAudio:s=>({commands:l,editor:c})=>l.insertContentAt(c.state.selection.anchor,{type:this.name,attrs:s})}}});function ak(s,l,c){for(let d=0;;d++){if(d==s.childCount||d==l.childCount)return s.childCount==l.childCount?null:c;let f=s.child(d),g=l.child(d);if(f==g){c+=f.nodeSize;continue}if(!f.sameMarkup(g))return c;if(f.isText&&f.text!=g.text){for(let v=0;f.text[v]==g.text[v];v++)c++;return c}if(f.content.size||g.content.size){let v=ak(f.content,g.content,c+1);if(v!=null)return v}c+=f.nodeSize}}function ok(s,l,c,d){for(let f=s.childCount,g=l.childCount;;){if(f==0||g==0)return f==g?null:{a:c,b:d};let v=s.child(--f),b=l.child(--g),$=v.nodeSize;if(v==b){c-=$,d-=$;continue}if(!v.sameMarkup(b))return{a:c,b:d};if(v.isText&&v.text!=b.text){let y=0,x=Math.min(v.text.length,b.text.length);for(;y<x&&v.text[v.text.length-y-1]==b.text[b.text.length-y-1];)y++,c--,d--;return{a:c,b:d}}if(v.content.size||b.content.size){let y=ok(v.content,b.content,c-1,d-1);if(y)return y}c-=$,d-=$}}class gt{constructor(l,c){if(this.content=l,this.size=c||0,c==null)for(let d=0;d<l.length;d++)this.size+=l[d].nodeSize}nodesBetween(l,c,d,f=0,g){for(let v=0,b=0;b<c;v++){let $=this.content[v],y=b+$.nodeSize;if(y>l&&d($,f+b,g||null,v)!==!1&&$.content.size){let x=b+1;$.nodesBetween(Math.max(0,l-x),Math.min($.content.size,c-x),d,f+x)}b=y}}descendants(l){this.nodesBetween(0,this.size,l)}textBetween(l,c,d,f){let g="",v=!0;return this.nodesBetween(l,c,(b,$)=>{let y=b.isText?b.text.slice(Math.max(l,$)-$,c-$):b.isLeaf?f?typeof f=="function"?f(b):f:b.type.spec.leafText?b.type.spec.leafText(b):"":"";b.isBlock&&(b.isLeaf&&y||b.isTextblock)&&d&&(v?v=!1:g+=d),g+=y},0),g}append(l){if(!l.size)return this;if(!this.size)return l;let c=this.lastChild,d=l.firstChild,f=this.content.slice(),g=0;for(c.isText&&c.sameMarkup(d)&&(f[f.length-1]=c.withText(c.text+d.text),g=1);g<l.content.length;g++)f.push(l.content[g]);return new gt(f,this.size+l.size)}cut(l,c=this.size){if(l==0&&c==this.size)return this;let d=[],f=0;if(c>l)for(let g=0,v=0;v<c;g++){let b=this.content[g],$=v+b.nodeSize;$>l&&((v<l||$>c)&&(b.isText?b=b.cut(Math.max(0,l-v),Math.min(b.text.length,c-v)):b=b.cut(Math.max(0,l-v-1),Math.min(b.content.size,c-v-1))),d.push(b),f+=b.nodeSize),v=$}return new gt(d,f)}cutByIndex(l,c){return l==c?gt.empty:l==0&&c==this.content.length?this:new gt(this.content.slice(l,c))}replaceChild(l,c){let d=this.content[l];if(d==c)return this;let f=this.content.slice(),g=this.size+c.nodeSize-d.nodeSize;return f[l]=c,new gt(f,g)}addToStart(l){return new gt([l].concat(this.content),this.size+l.nodeSize)}addToEnd(l){return new gt(this.content.concat(l),this.size+l.nodeSize)}eq(l){if(this.content.length!=l.content.length)return!1;for(let c=0;c<this.content.length;c++)if(!this.content[c].eq(l.content[c]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(l){let c=this.content[l];if(!c)throw new RangeError("Index "+l+" out of range for "+this);return c}maybeChild(l){return this.content[l]||null}forEach(l){for(let c=0,d=0;c<this.content.length;c++){let f=this.content[c];l(f,d,c),d+=f.nodeSize}}findDiffStart(l,c=0){return ak(this,l,c)}findDiffEnd(l,c=this.size,d=l.size){return ok(this,l,c,d)}findIndex(l,c=-1){if(l==0)return xl(0,l);if(l==this.size)return xl(this.content.length,l);if(l>this.size||l<0)throw new RangeError(`Position ${l} outside of fragment (${this})`);for(let d=0,f=0;;d++){let g=this.child(d),v=f+g.nodeSize;if(v>=l)return v==l||c>0?xl(d+1,v):xl(d,f);f=v}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(l=>l.toJSON()):null}static fromJSON(l,c){if(!c)return gt.empty;if(!Array.isArray(c))throw new RangeError("Invalid input for Fragment.fromJSON");return new gt(c.map(l.nodeFromJSON))}static fromArray(l){if(!l.length)return gt.empty;let c,d=0;for(let f=0;f<l.length;f++){let g=l[f];d+=g.nodeSize,f&&g.isText&&l[f-1].sameMarkup(g)?(c||(c=l.slice(0,f)),c[c.length-1]=g.withText(c[c.length-1].text+g.text)):c&&c.push(g)}return new gt(c||l,d)}static from(l){if(!l)return gt.empty;if(l instanceof gt)return l;if(Array.isArray(l))return this.fromArray(l);if(l.attrs)return new gt([l],l.nodeSize);throw new RangeError("Can not convert "+l+" to a Fragment"+(l.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}gt.empty=new gt([],0);const rd={index:0,offset:0};function xl(s,l){return rd.index=s,rd.offset=l,rd}class sme extends Error{}class Et{constructor(l,c,d){this.content=l,this.openStart=c,this.openEnd=d}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(l,c){let d=lk(this.content,l+this.openStart,c);return d&&new Et(d,this.openStart,this.openEnd)}removeBetween(l,c){return new Et(ik(this.content,l+this.openStart,c+this.openStart),this.openStart,this.openEnd)}eq(l){return this.content.eq(l.content)&&this.openStart==l.openStart&&this.openEnd==l.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let l={content:this.content.toJSON()};return this.openStart>0&&(l.openStart=this.openStart),this.openEnd>0&&(l.openEnd=this.openEnd),l}static fromJSON(l,c){if(!c)return Et.empty;let d=c.openStart||0,f=c.openEnd||0;if(typeof d!="number"||typeof f!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Et(gt.fromJSON(l,c.content),d,f)}static maxOpen(l,c=!0){let d=0,f=0;for(let g=l.firstChild;g&&!g.isLeaf&&(c||!g.type.spec.isolating);g=g.firstChild)d++;for(let g=l.lastChild;g&&!g.isLeaf&&(c||!g.type.spec.isolating);g=g.lastChild)f++;return new Et(l,d,f)}}Et.empty=new Et(gt.empty,0,0);function ik(s,l,c){let{index:d,offset:f}=s.findIndex(l),g=s.maybeChild(d),{index:v,offset:b}=s.findIndex(c);if(f==l||g.isText){if(b!=c&&!s.child(v).isText)throw new RangeError("Removing non-flat range");return s.cut(0,l).append(s.cut(c))}if(d!=v)throw new RangeError("Removing non-flat range");return s.replaceChild(d,g.copy(ik(g.content,l-f-1,c-f-1)))}function lk(s,l,c,d){let{index:f,offset:g}=s.findIndex(l),v=s.maybeChild(f);if(g==l||v.isText)return s.cut(0,l).append(c).append(s.cut(l));let b=lk(v.content,l-g-1,c);return b&&s.replaceChild(f,v.copy(b))}const sk=65535,uk=Math.pow(2,16);function ume(s,l){return s+l*uk}function S0(s){return s&sk}function cme(s){return(s-(s&sk))/uk}const ck=1,dk=2,Ll=4,fk=8;class x0{constructor(l,c,d){this.pos=l,this.delInfo=c,this.recover=d}get deleted(){return(this.delInfo&fk)>0}get deletedBefore(){return(this.delInfo&(ck|Ll))>0}get deletedAfter(){return(this.delInfo&(dk|Ll))>0}get deletedAcross(){return(this.delInfo&Ll)>0}}class fn{constructor(l,c=!1){if(this.ranges=l,this.inverted=c,!l.length&&fn.empty)return fn.empty}recover(l){let c=0,d=S0(l);if(!this.inverted)for(let f=0;f<d;f++)c+=this.ranges[f*3+2]-this.ranges[f*3+1];return this.ranges[d*3]+c+cme(l)}mapResult(l,c=1){return this._map(l,c,!1)}map(l,c=1){return this._map(l,c,!0)}_map(l,c,d){let f=0,g=this.inverted?2:1,v=this.inverted?1:2;for(let b=0;b<this.ranges.length;b+=3){let $=this.ranges[b]-(this.inverted?f:0);if($>l)break;let y=this.ranges[b+g],x=this.ranges[b+v],C=$+y;if(l<=C){let E=y?l==$?-1:l==C?1:c:c,N=$+f+(E<0?0:x);if(d)return N;let W=l==(c<0?$:C)?null:ume(b/3,l-$),q=l==$?dk:l==C?ck:Ll;return(c<0?l!=$:l!=C)&&(q|=fk),new x0(N,q,W)}f+=x-y}return d?l+f:new x0(l+f,0,null)}touches(l,c){let d=0,f=S0(c),g=this.inverted?2:1,v=this.inverted?1:2;for(let b=0;b<this.ranges.length;b+=3){let $=this.ranges[b]-(this.inverted?d:0);if($>l)break;let y=this.ranges[b+g],x=$+y;if(l<=x&&b==f*3)return!0;d+=this.ranges[b+v]-y}return!1}forEach(l){let c=this.inverted?2:1,d=this.inverted?1:2;for(let f=0,g=0;f<this.ranges.length;f+=3){let v=this.ranges[f],b=v-(this.inverted?g:0),$=v+(this.inverted?0:g),y=this.ranges[f+c],x=this.ranges[f+d];l(b,b+y,$,$+x),g+=x-y}}invert(){return new fn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(l){return l==0?fn.empty:new fn(l<0?[0,-l,0]:[0,0,l])}}fn.empty=new fn([]);const ad=Object.create(null);class Ut{getMap(){return fn.empty}merge(l){return null}static fromJSON(l,c){if(!c||!c.stepType)throw new RangeError("Invalid input for Step.fromJSON");let d=ad[c.stepType];if(!d)throw new RangeError(`No step type ${c.stepType} defined`);return d.fromJSON(l,c)}static jsonID(l,c){if(l in ad)throw new RangeError("Duplicate use of step JSON ID "+l);return ad[l]=c,c.prototype.jsonID=l,c}}class Ct{constructor(l,c){this.doc=l,this.failed=c}static ok(l){return new Ct(l,null)}static fail(l){return new Ct(null,l)}static fromReplace(l,c,d,f){try{return Ct.ok(l.replace(c,d,f))}catch(g){if(g instanceof sme)return Ct.fail(g.message);throw g}}}function bp(s,l,c){let d=[];for(let f=0;f<s.childCount;f++){let g=s.child(f);g.content.size&&(g=g.copy(bp(g.content,l,g))),g.isInline&&(g=l(g,c,f)),d.push(g)}return gt.fromArray(d)}class oa extends Ut{constructor(l,c,d){super(),this.from=l,this.to=c,this.mark=d}apply(l){let c=l.slice(this.from,this.to),d=l.resolve(this.from),f=d.node(d.sharedDepth(this.to)),g=new Et(bp(c.content,(v,b)=>!v.isAtom||!b.type.allowsMarkType(this.mark.type)?v:v.mark(this.mark.addToSet(v.marks)),f),c.openStart,c.openEnd);return Ct.fromReplace(l,this.from,this.to,g)}invert(){return new ia(this.from,this.to,this.mark)}map(l){let c=l.mapResult(this.from,1),d=l.mapResult(this.to,-1);return c.deleted&&d.deleted||c.pos>=d.pos?null:new oa(c.pos,d.pos,this.mark)}merge(l){return l instanceof oa&&l.mark.eq(this.mark)&&this.from<=l.to&&this.to>=l.from?new oa(Math.min(this.from,l.from),Math.max(this.to,l.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(l,c){if(typeof c.from!="number"||typeof c.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new oa(c.from,c.to,l.markFromJSON(c.mark))}}Ut.jsonID("addMark",oa);class ia extends Ut{constructor(l,c,d){super(),this.from=l,this.to=c,this.mark=d}apply(l){let c=l.slice(this.from,this.to),d=new Et(bp(c.content,f=>f.mark(this.mark.removeFromSet(f.marks)),l),c.openStart,c.openEnd);return Ct.fromReplace(l,this.from,this.to,d)}invert(){return new oa(this.from,this.to,this.mark)}map(l){let c=l.mapResult(this.from,1),d=l.mapResult(this.to,-1);return c.deleted&&d.deleted||c.pos>=d.pos?null:new ia(c.pos,d.pos,this.mark)}merge(l){return l instanceof ia&&l.mark.eq(this.mark)&&this.from<=l.to&&this.to>=l.from?new ia(Math.min(this.from,l.from),Math.max(this.to,l.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(l,c){if(typeof c.from!="number"||typeof c.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ia(c.from,c.to,l.markFromJSON(c.mark))}}Ut.jsonID("removeMark",ia);class la extends Ut{constructor(l,c){super(),this.pos=l,this.mark=c}apply(l){let c=l.nodeAt(this.pos);if(!c)return Ct.fail("No node at mark step's position");let d=c.type.create(c.attrs,null,this.mark.addToSet(c.marks));return Ct.fromReplace(l,this.pos,this.pos+1,new Et(gt.from(d),0,c.isLeaf?0:1))}invert(l){let c=l.nodeAt(this.pos);if(c){let d=this.mark.addToSet(c.marks);if(d.length==c.marks.length){for(let f=0;f<c.marks.length;f++)if(!c.marks[f].isInSet(d))return new la(this.pos,c.marks[f]);return new la(this.pos,this.mark)}}return new Si(this.pos,this.mark)}map(l){let c=l.mapResult(this.pos,1);return c.deletedAfter?null:new la(c.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(l,c){if(typeof c.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new la(c.pos,l.markFromJSON(c.mark))}}Ut.jsonID("addNodeMark",la);class Si extends Ut{constructor(l,c){super(),this.pos=l,this.mark=c}apply(l){let c=l.nodeAt(this.pos);if(!c)return Ct.fail("No node at mark step's position");let d=c.type.create(c.attrs,null,this.mark.removeFromSet(c.marks));return Ct.fromReplace(l,this.pos,this.pos+1,new Et(gt.from(d),0,c.isLeaf?0:1))}invert(l){let c=l.nodeAt(this.pos);return!c||!this.mark.isInSet(c.marks)?this:new la(this.pos,this.mark)}map(l){let c=l.mapResult(this.pos,1);return c.deletedAfter?null:new Si(c.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(l,c){if(typeof c.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Si(c.pos,l.markFromJSON(c.mark))}}Ut.jsonID("removeNodeMark",Si);class lr extends Ut{constructor(l,c,d,f=!1){super(),this.from=l,this.to=c,this.slice=d,this.structure=f}apply(l){return this.structure&&hf(l,this.from,this.to)?Ct.fail("Structure replace would overwrite content"):Ct.fromReplace(l,this.from,this.to,this.slice)}getMap(){return new fn([this.from,this.to-this.from,this.slice.size])}invert(l){return new lr(this.from,this.from+this.slice.size,l.slice(this.from,this.to))}map(l){let c=l.mapResult(this.from,1),d=l.mapResult(this.to,-1);return c.deletedAcross&&d.deletedAcross?null:new lr(c.pos,Math.max(c.pos,d.pos),this.slice)}merge(l){if(!(l instanceof lr)||l.structure||this.structure)return null;if(this.from+this.slice.size==l.from&&!this.slice.openEnd&&!l.slice.openStart){let c=this.slice.size+l.slice.size==0?Et.empty:new Et(this.slice.content.append(l.slice.content),this.slice.openStart,l.slice.openEnd);return new lr(this.from,this.to+(l.to-l.from),c,this.structure)}else if(l.to==this.from&&!this.slice.openStart&&!l.slice.openEnd){let c=this.slice.size+l.slice.size==0?Et.empty:new Et(l.slice.content.append(this.slice.content),l.slice.openStart,this.slice.openEnd);return new lr(l.from,this.to,c,this.structure)}else return null}toJSON(){let l={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(l.slice=this.slice.toJSON()),this.structure&&(l.structure=!0),l}static fromJSON(l,c){if(typeof c.from!="number"||typeof c.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new lr(c.from,c.to,Et.fromJSON(l,c.slice),!!c.structure)}}Ut.jsonID("replace",lr);class fi extends Ut{constructor(l,c,d,f,g,v,b=!1){super(),this.from=l,this.to=c,this.gapFrom=d,this.gapTo=f,this.slice=g,this.insert=v,this.structure=b}apply(l){if(this.structure&&(hf(l,this.from,this.gapFrom)||hf(l,this.gapTo,this.to)))return Ct.fail("Structure gap-replace would overwrite content");let c=l.slice(this.gapFrom,this.gapTo);if(c.openStart||c.openEnd)return Ct.fail("Gap is not a flat range");let d=this.slice.insertAt(this.insert,c.content);return d?Ct.fromReplace(l,this.from,this.to,d):Ct.fail("Content does not fit in gap")}getMap(){return new fn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(l){let c=this.gapTo-this.gapFrom;return new fi(this.from,this.from+this.slice.size+c,this.from+this.insert,this.from+this.insert+c,l.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(l){let c=l.mapResult(this.from,1),d=l.mapResult(this.to,-1),f=this.from==this.gapFrom?c.pos:l.map(this.gapFrom,-1),g=this.to==this.gapTo?d.pos:l.map(this.gapTo,1);return c.deletedAcross&&d.deletedAcross||f<c.pos||g>d.pos?null:new fi(c.pos,d.pos,f,g,this.slice,this.insert,this.structure)}toJSON(){let l={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(l.slice=this.slice.toJSON()),this.structure&&(l.structure=!0),l}static fromJSON(l,c){if(typeof c.from!="number"||typeof c.to!="number"||typeof c.gapFrom!="number"||typeof c.gapTo!="number"||typeof c.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new fi(c.from,c.to,c.gapFrom,c.gapTo,Et.fromJSON(l,c.slice),c.insert,!!c.structure)}}Ut.jsonID("replaceAround",fi);function hf(s,l,c){let d=s.resolve(l),f=c-l,g=d.depth;for(;f>0&&g>0&&d.indexAfter(g)==d.node(g).childCount;)g--,f--;if(f>0){let v=d.node(g).maybeChild(d.indexAfter(g));for(;f>0;){if(!v||v.isLeaf)return!0;v=v.firstChild,f--}}return!1}class vi extends Ut{constructor(l,c,d){super(),this.pos=l,this.attr=c,this.value=d}apply(l){let c=l.nodeAt(this.pos);if(!c)return Ct.fail("No node at attribute step's position");let d=Object.create(null);for(let g in c.attrs)d[g]=c.attrs[g];d[this.attr]=this.value;let f=c.type.create(d,null,c.marks);return Ct.fromReplace(l,this.pos,this.pos+1,new Et(gt.from(f),0,c.isLeaf?0:1))}getMap(){return fn.empty}invert(l){return new vi(this.pos,this.attr,l.nodeAt(this.pos).attrs[this.attr])}map(l){let c=l.mapResult(this.pos,1);return c.deletedAfter?null:new vi(c.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(l,c){if(typeof c.pos!="number"||typeof c.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new vi(c.pos,c.attr,c.value)}}Ut.jsonID("attr",vi);class gs extends Ut{constructor(l,c){super(),this.attr=l,this.value=c}apply(l){let c=Object.create(null);for(let f in l.attrs)c[f]=l.attrs[f];c[this.attr]=this.value;let d=l.type.create(c,l.content,l.marks);return Ct.ok(d)}getMap(){return fn.empty}invert(l){return new gs(this.attr,l.attrs[this.attr])}map(l){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(l,c){if(typeof c.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new gs(c.attr,c.value)}}Ut.jsonID("docAttr",gs);let xi=class extends Error{};xi=function s(l){let c=Error.call(this,l);return c.__proto__=s.prototype,c};xi.prototype=Object.create(Error.prototype);xi.prototype.constructor=xi;xi.prototype.name="TransformError";const O0={ai:["ai","eps"],app:["app"],axure:["rp"],book:["mobi","oeb","lit","xeb","ebx","rb","pdb","epub","azw3","hlp","chm","wdl","ceb","abm","pdg","caj"],css:["css","less","sass"],dmg:["dmg"],excel:["csv","fods","ods","ots","xls","xlsm","xlsx","xlt","xltm","xltx","et","ett"],exe:["exe"],html:["htm","html","mht"],img:["png","bmp","jpg","jpeg","gif","webp","tga","exif","fpx","svg","hdri","raw","ico","jfif","dib","pbm","pgm","ppm","rgb"],java:["jar","java"],js:["js","jsx","ts","tsx"],json:["json"],keynote:["key"],md:["md","markdown"],music:["au","aif","aiff","aifc","rmi","mp3","mid","cda","wav","wma","ra","ram","snd","mida","ogg","ape","flac","aac"],numbers:["numbers"],pages:["pages"],pdf:["pdf"],php:["php"],pkg:["pkg"],ppt:["fodp","odp","otp","pot","potm","potx","pps","ppsm","ppsx","ppt","pptm","pptx","dps","dpt","wpp"],psd:["psd"],python:["python"],sh:["sh"],sketch:["sketch"],sql:["sql"],text:["text","txt"],video:["mp4","avi","mov","rmvb","rm","flv","mpeg","wmv","mkv"],vue:["vue"],word:["doc","docm","docx","dot","dotm","dotx","epub","fodt","odt","ott","rtf","wps","wpt"],xmind:["xmind"],zip:["zip","rar","tar","gz","gzip","uue","bz2","iso","7z","z","ace","lzh","arj","cab"],font:["eot","otf","fon","font","ttf","ttc","woff","woff2"]},dme=s=>{const l=s.split(".");return l[l.length-1]},fme=s=>{const l=dme(s);for(const c of Object.keys(O0))if(O0[c].includes(l))return c;return"common"},vme={class:"umo-node-container hover-shadow umo-select-outline umo-node-file"},pme={class:"umo-file-icon"},mme=["src"],hme={class:"umo-file-info"},gme=["title"],bme={class:"umo-file-meta"},yme={class:"umo-file-action"},_me=["title"],wme=["href","download","title"],Cme={__name:"node-view",props:nodeViewProps,setup(s){const{options:l}=ie(),c=ref(null);let d=ref();const f=computed(()=>{const{nodeAlign:g,margin:v}=s.node.attrs,b=v!=null&&v.top&&(v==null?void 0:v.top)!==""?v.top+"px":void 0,$=v!=null&&v.bottom&&(v==null?void 0:v.bottom)!==""?v.bottom+"px":void 0;return{"justify-content":g,marginTop:b,marginBottom:$}});return onMounted(async()=>{let g=fme(s.node.attrs.name);if(d.value=`${l.value.cdnUrl}/icons/file/${g}.svg`,s.node.attrs.uploaded===!1&&s.node.attrs.file)try{const{id:v,url:b}=await l.value.onFileUpload(s.node.attrs.file);c.value&&s.updateAttributes({id:v,url:b,file:null,uploaded:!0})}catch(v){qe("error",v.message)}}),(g,v)=>{const b=tt;return openBlock(),createBlock(unref(NodeViewWrapper),{ref_key:"containerRef",ref:c,class:"umo-node-view",id:g.node.attrs.id,style:normalizeStyle(f.value)},{default:withCtx(()=>[createBaseVNode("div",vme,[createBaseVNode("div",pme,[createBaseVNode("img",{src:unref(d),class:"icon-file"},null,8,mme)]),createBaseVNode("div",hme,[createBaseVNode("div",{class:"umo-file-name",title:g.node.attrs.name},toDisplayString$1(g.node.attrs.name),9,gme),createBaseVNode("div",bme,toDisplayString$1(unref(prettyBytes)(g.node.attrs.size)),1)]),createBaseVNode("div",yme,[!g.node.attrs.uploaded&&g.node.attrs.file!==null?(openBlock(),createElementBlock("div",{key:0,class:"umo-action-item",title:g.t("file.uploading")},[createVNode(b,{class:"loading",name:"loading"})],8,_me)):(openBlock(),createElementBlock("a",{key:1,href:g.node.attrs.url,download:g.node.attrs.name,target:"_blank",class:"umo-action-item",title:g.t("file.download")},[createVNode(b,{name:"download"})],8,wme))])])]),_:1},8,["id","style"])}}},{options:gf}=ie(),pi={image:["image/jpeg","image/png","image/gif","image/webp","image/svg+xml","image/apng"],video:["video/mp4","video/webm","video/ogg"],audio:["audio/mp3","audio/wav","audio/ogg","audio/aac","audio/flac"]},kme=s=>{const l=gf.value.file.allowedMimeTypes;if(s==="file"&&l.length===0)return"";if(!s||!["image","video","audio"].includes(s))return l.toString();let c=[...l];return c.includes(`${s}/*`)||l.length===0?c=pi[s]:c.filter(d=>d.startsWith(s)).length>0?c=l.filter(d=>pi[s].includes(d)):c=["notAllow"],c.length===0?"":c.toString()},$me=Node$1.create({name:"file",group:"block",atom:!0,addAttributes(){return{vnode:{default:!0},id:{default:null},file:{default:null},url:{default:null},name:{default:null},type:{default:null},size:{default:null},uploaded:{default:!1}}},parseHTML(){return[{tag:"file"}]},renderHTML({HTMLAttributes:s}){return["file",mergeAttributes(this.options.HTMLAttributes,s)]},addNodeView(){return VueNodeViewRenderer(Cme)},addCommands(){return{setFile:s=>({commands:l,editor:c})=>l.insertContentAt(c.state.selection.anchor,{type:this.name,attrs:s}),insertFile:({file:s,pos:l})=>({editor:c,commands:d})=>{const{type:f,name:g,size:v}=s,{maxSize:b}=gf.value.file;if(b!==0&&v>b)return qe("error",J("file.limit",{filename:s.name,size:b/1024/1024})),!1;const $=l||c.state.selection.anchor;let y="file";return f.startsWith("image/")&&pi.image.includes(f)&&(y="image"),f.startsWith("video/")&&pi.video.includes(f)&&(y="video"),f.startsWith("audio/")&&pi.audio.includes(f)&&(y="audio"),d.insertContentAt($,{type:y,attrs:{[y==="file"?"url":"src"]:URL.createObjectURL(s),name:g,type:f,size:v,file:s}})},selectFiles:s=>({editor:l})=>{const c=kme(s);if(!c&&c!==""||c==="notAllow"){const v=Fo({theme:"danger",header:J("file.notAllow.title"),body:J("file.notAllow.message"),placement:"center",onConfirm(){v.destroy()}});return!1}const{open:d,onChange:f}=useFileDialog({accept:c,reset:!0});d();let g=!1;return f(v=>{const b=Array.from(v||[]);b&&b.forEach($=>{g=l.chain().focus().insertFile({file:$}).run()})}),g}}},onTransaction({transaction:s}){s.steps.forEach(l=>{l instanceof lr&&l.slice.size===0&&s.before.content.cut(l.from,l.to).content.forEach(c=>{c.content.forEach(d=>{if(["image","video","audio","file"].includes(d.attrs.type)){const{id:f,src:g,url:v}=d.attrs;gf.value.onFileDelete(f,g||v)}})})})}}),Sme=(s,l,...c)=>{var d;let f,g,v=[],b,$="",y,x=!1,C=!1,E=!0,N=[],W,q=0;const Y=Ome(),re=Y.firstChild,se=re.children,de=se[0],he=de.firstChild,ge={language:"text",value:$},Se=new Set(c),Ae={},Re=W$=>{if(Object.assign(ge,W$),$=W$.value??$,f=ge.language,!$e[f])throw Error(`Language '${f}' has no grammar.`);W=!!ge.readOnly,Y.style.tabSize=ge.tabSize||2,he.inputMode=W?"none":"",he.setAttribute("aria-readonly",W),Lr(),Ke(),(g!=(g=$e[f])||$!=he.value)&&(my(),he.value=$,he.selectionEnd=0,Be())},Be=()=>{N=lp($=he.value,g),$t("tokenize",N,f,$);let W$=ek(N).split(`
`),U$=0,hy=q,G$=q=W$.length;for(;W$[U$]==v[U$]&&U$<G$;)++U$;for(;G$&&W$[--G$]==v[--hy];);if(U$==G$&&U$==hy)se[U$+1].innerHTML=W$[U$]+`
`;else{let ky=hy<U$?hy:U$-1,$y=ky,rS="";for(;$y<G$;)rS+=`<div class=pce-line aria-hidden=true>${W$[++$y]}
</div>`;for($y=G$<U$?G$:U$-1;$y<hy;$y++)se[U$+1].remove();for(rS&&se[ky+1].insertAdjacentHTML("afterend",rS),$y=ky+1;$y<q;)se[++$y].setAttribute("data-line",$y);Y.style.setProperty("--number-width",Math.ceil(Math.log10(q+1))+".001ch")}$t("update",$),K$(!0),E&&setTimeout(setTimeout,0,()=>E=!0),v=W$,E=!1},Ke=W$=>{(W$||Se).forEach(U$=>{typeof U$=="object"?(U$.update(Y$,ge),W$&&Se.add(U$)):(U$(Y$,ge),W$||Se.delete(U$))})},Lr=([W$,U$]=_y())=>{Y.className=`prism-code-editor language-${f}${ge.lineNumbers==!1?"":" show-line-numbers"} pce-${ge.wordWrap?"":"no"}wrap${ge.rtl?" pce-rtl":""} pce-${W$<U$?"has":"no"}-selection${C?" pce-focus":""}${W?" pce-readonly":""}`},_y=()=>[he.selectionStart,he.selectionEnd,he.selectionDirection],by={Escape(){he.blur()}},yy={},my=()=>Rl&&!C&&qt(Y$,"focus",W$=>{let U$=W$.relatedTarget;U$?U$.focus():he.blur()},{once:!0}),$t=(W$,...U$)=>{var hy,G$;(hy=Ae[W$])==null||hy.forEach(ky=>ky.apply(Y$,U$)),(G$=ge["on"+W$[0].toUpperCase()+W$.slice(1)])==null||G$.apply(Y$,U$)},K$=W$=>{if(W$||E){const U$=_y(),hy=se[y=pk($,0,U$[U$[2]<"f"?0:1])];hy!=b&&(b==null||b.classList.remove("active-line"),hy.classList.add("active-line"),b=hy),Lr(U$),$t("selectionChange",U$,$)}},Y$={scrollContainer:Y,wrapper:re,overlays:de,textarea:he,get activeLine(){return b},get activeLineNumber(){return y},get value(){return $},options:ge,get focused(){return C},get removed(){return x},get tokens(){return N},inputCommandMap:yy,keyCommandMap:by,extensions:{},setOptions:Re,update:Be,getSelection:_y,setSelection(W$,U$=W$,hy){my(),he.setSelectionRange(W$,U$,hy),K$(!0)},addExtensions(...W$){Ke(W$)},addListener(W$,U$){(Ae[W$]||(Ae[W$]=new Set)).add(U$)},removeListener(W$,U$){var hy;(hy=Ae[W$])==null||hy.delete(U$)},remove(){Y.remove(),x=!0}};return qt(Y$,"keydown",W$=>{var U$;(U$=by[W$.key])!=null&&U$.call(by,W$,_y(),$)&&Gt(W$)}),qt(Y$,"beforeinput",W$=>{var U$;(W||W$.inputType=="insertText"&&(U$=yy[W$.data])!=null&&U$.call(yy,W$,_y(),$))&&Gt(W$)}),qt(Y$,"input",Be),qt(Y$,"blur",()=>{mi=null,C=!1,Lr()}),qt(Y$,"focus",()=>{mi=K$,C=!0,Lr()}),qt(Y$,"selectionchange",W$=>{K$(),Gt(W$)}),(d=xme(s))==null||d.append(Y),l&&Re(l),Y$},E0=document.createElement("div"),Ru=s=>{E0.innerHTML=s;const l=E0.firstChild;return()=>l.cloneNode(!0)},qt=(s,l,c,d)=>s.textarea.addEventListener(l,c,d),xme=s=>typeof s=="string"?document.querySelector(s):s,vk=navigator.userAgent,bs=/Mac|iPhone|iPod|iPad/i.test(navigator.platform),ys=/Chrome\//.test(vk),Rl=!ys&&/AppleWebKit\//.test(vk),pk=(s,l=0,c=1/0)=>{let d=1;for(;(l=s.indexOf(`
`,l)+1)&&l<=c;d++);return d},od={},Ome=Ru("<div><div class=pce-wrapper><div class=pce-overlays><textarea spellcheck=false autocapitalize=off autocomplete=off>"),Gt=s=>{s.preventDefault(),s.stopImmediatePropagation()};let mi;document.addEventListener("selectionchange",()=>mi==null?void 0:mi());const Eme=(s=!0,l="([{",c=")]}")=>{let d,f;const g=[],v=C=>{C.extensions.matchBrackets=v,C.addListener("tokenize",y),s&&C.tokens[0]?C.update():y(C.tokens)},b=v.brackets=[],$=v.pairs=[],y=C=>{if($.length=b.length=f=d=0,x(C,0),s)for(let E=0,N;N=b[E];){let W=N[0].alias;N[0].alias=(W?W+" ":"")+`bracket-${E++in $?"level-"+N[2]%12:"error"}`}},x=(C,E)=>{let N,W=0;for(;N=C[W++];){let q=N.length;if(typeof N!="string"){let Y=N.content;if(Array.isArray(Y))x(Y,E);else if((N.alias||N.type)=="punctuation"){let re=A0(Y,l,q-1),se=re||A0(Y,c,q-1);if(se){if(b[d]=[N,E,0,Y,!!re,E+q],re)g[f++]=[d,re];else for(let de=f;de;){let[he,ge]=g[--de];se==ge&&($[$[d]=he]=d,b[d][2]=b[he][2]=f=de,de=0)}d++}}}E+=q}};return v},A0=(s,l,c)=>l.indexOf(s[0])+1||c&&l.indexOf(s[c])+1,Ame=(s,l,c=0)=>{const d=s.scrollContainer.style,f=document.documentElement.style;d.scrollPaddingBlock=f.scrollPaddingBlock=`${c}px ${ys&&!l.textContent?l.offsetHeight:0}px`,l.scrollIntoView({block:"nearest"}),d.scrollPaddingBlock=f.scrollPaddingBlock=""},_s=(s,l)=>l?s.lastIndexOf(`
`,l-1)+1:0,zu=(s,l)=>(l=s.indexOf(`
`,l))+1?l:s.length,Tme=(s,l,c)=>(s.addListener(l,c),()=>s.removeListener(l,c)),Pme=(s,l)=>parseFloat(getComputedStyle(s)[l]);let Ya;const Xo=s=>s.replace(/[$+?|.^*()[\]{}\\]/g,"\\$&"),bf=(s,l)=>s.slice(_s(s,l),l),Er=(s,l,c=l)=>[s.slice(l=_s(s,l),c=zu(s,c)).split(`
`),l,c],ws=(s,l,c=0,d=c,f=s.getSelection()[0])=>{var g;const v=s.value,b=s.wrapper.children[pk(v,0,f)],$=document.createTreeWalker(b,5);let y=$.lastChild(),x=zu(v,f)+1-f-y.length;for(;-x<=d&&(y=$.previousNode());)if(!y.lastChild&&(x-=y.length||0,x<=c)){for(;y!=b;y=y.parentNode)if((g=y.matches)!=null&&g.call(y,l))return y}},id=(s,l)=>{var c;return((c=ws(s,'[class*="language-"]',0,0,l))==null?void 0:c.className.match(/language-(\S*)/)[1])||s.options.language},tn=(s,l,c,d,f,g)=>{if(s.options.readOnly)return;Ya=s.getSelection(),d??(d=c);let v=s.textarea,b=s.value,$=ys&&!b[d??Ya[1]]&&/\n$/.test(l)&&/^$|\n$/.test(b),y;s.focused||v.focus(),c!=null&&v.setSelectionRange(c,d),f!=null&&(y=Tme(s,"update",()=>{v.setSelectionRange(f,g??f,Ya[2]),y()})),Rl||v.dispatchEvent(new InputEvent("beforeinput",{data:l})),ys||Rl?($&&(v.selectionEnd--,l=l.slice(0,-1)),Rl&&(l+=`
`),document.execCommand(l?"insertHTML":"delete",!1,l.replace(/&/g,"&amp;").replace(/</g,"&lt;")),$&&v.selectionStart++):document.execCommand(l?"insertText":"delete",!1,l),Ya=0},ii=s=>s.altKey+s.ctrlKey*2+s.metaKey*4+s.shiftKey*8,Mme="xml,rss,atom,jsx,tsx,xquery,actionscript".split(","),Ime=/^(?:area|base|w?br|col|embed|hr|img|input|link|meta|source|track)$/i,Nme=s=>{let l=[],c,d=[],f,g,v=[],b=(y,x,C)=>{c=C,d.length=l.length=f=g=0,$(y,x,0)},$=(y,x,C)=>{let E=Mme.includes(x),N=0,W=y.length;for(;N<W;){const q=y[N++],Y=q.content,re=q.length;if(Array.isArray(Y))if(q.type=="tag"&&c[C]=="<"){const se=Y[0].length,de=Y[2]?c.substr(C+se,Y[1].length):"",he=Y[Y.length-1].length<2&&(E||!Ime.test(de));if(Y[2]&&E&&$(Y,x,C),he)if(se>1)for(let ge=g;ge;)de==v[--ge][1]&&(l[l[f]=v[g=ge][0]]=f,ge=0);else v[g++]=[f,de];d[f++]=[q,C,C+re,de,se>1,he]}else{let se=q.alias||q.type;$(Y,se.slice(0,9)=="language-"?se.slice(9):x,C)}C+=re}};return s.addListener("tokenize",b),b(s.tokens,s.options.language,s.value),{tags:d,pairs:l}},jme=(s,l)=>{for(let c=0,d=l.length;c<d;c++)if(l[c][1]<=s&&l[c][2]>=s)return c},Dme=()=>s=>{var l;let c,d;const{tags:f,pairs:g}=(l=s.extensions).matchTags||(l.matchTags=Nme(s)),v=b=>[c,d].forEach($=>{$&&$.classList.toggle("active-tagname",!b)});s.addListener("selectionChange",([b,$])=>{let y,x,C;b==$&&s.focused&&(C=jme(b,f),C+1&&(C=g[C],C+1&&(y=ws(s,".tag>.tag"))&&(x=ws(s,".tag>.tag",2,0,f[C][1])))),c!=y&&(v(!0),c=y,d=x,v())})},Bme=Ru("<div class=guide-indents style=left:var(--padding-left);bottom:auto;right:auto> "),Fme=Ru("<div style=width:1px;position:absolute;background:var(--bg-guide-indent)>"),Lme=()=>{let s,l=0,c,d=-1,f;const g=[],v=[],b=Bme(),$=[],y=N=>{c=[];const W=C(N.split(`
`)),q=W.length;for(let Y=0,re=[],se=W[0];se;Y++){const de=(g[Y]||(g[Y]=Fme())).style,[he,ge,Se]=se,Ae=v[Y];se=W[Y+1],he!=(Ae==null?void 0:Ae[0])&&(de.top=he+"00%"),ge!=(Ae==null?void 0:Ae[1])&&(de.height=ge+"00%"),Se!=(Ae==null?void 0:Ae[2])&&(de.left=Se*100+"%");const Re=re[0]!=he&&(se==null?void 0:se[0])!=he,Be=re[0]+re[1]!=he+ge&&(se==null?void 0:se[0])+(se==null?void 0:se[1])!=he+ge;for(let Ke=-Re,Lr=ge+Be;Ke<Lr;Ke++)c[Ke+he]=Y;re=v[Y]=W[Y]}for(let Y=l;Y>q;)g[--Y].remove();b.append(...g.slice(l,l=q))},x=()=>{const N=c[f.activeLineNumber-1]??-1;N!=d&&(d>-1&&(g[d].className=""),N>-1&&(g[N].className="active")),d=N},C=N=>{const W=N.length,q=[],Y=[];for(let re=0,se=-1,de=0,he=0;;de++){const ge=de==W,Se=ge?0:$[de]=E(N[de]);if(Se<0)se<0&&(se=de);else{for(let Ae=Se;Ae<re;Ae++)q[Ae][1]=(se<0||Ae==Se&&!ge?de:se)-q[Ae][0];for(let Ae=re;Ae<Se;)Y[he++]=q[Ae]=[se<0||Ae>re?de:se,0,Ae++*s];se=-1,re=Se}if(ge)break}return $.length=W,Y},E=N=>{let W=N.search(/\S/),q=0;if(W<0)return W;for(let Y=0;Y<W;)q+=N[Y++]=="	"?s-q%s:1;return Math.ceil(q/s)};return{lines:b.children,indentLevels:$,update(N,W){f||(f=N,N.extensions.indentGuides=this,N.overlays.append(b),N.addListener("update",y),N.addListener("selectionChange",x)),b.style.display=W.wordWrap?"none":"",s!=(s=W.tabSize||2)&&(y(N.value),x())}}},Rme=()=>s=>{let l,c,d,f=-1,g=[],v=()=>{c||(c=s.extensions.matchBrackets);let[y,x]=s.getSelection(),C=y==x&&s.focused&&c&&b(x)||-1;if(C!=f){if($(),C+1){let E=l[d[C]],N=l[C];g=[E,N].map(W=>ws(s,".punctuation",0,-1,W[1])),g[0]!=g[1]&&E[1]+E[3].length==N[1]&&(g[0].textContent+=g[1].textContent,g[1].textContent="",g[1]=g[0]),$(!0)}else g=[];f=C}},b=y=>{var x;({brackets:l,pairs:d}=c);for(let C=0,E;E=l[++C];)if(!E[4]&&E[5]>=y&&((x=l[d[C]])==null?void 0:x[1])<=y)return C},$=y=>g.forEach(x=>x.classList.toggle("active-bracket",!!y));qt(s,"focus",v),qt(s,"blur",v),s.addListener("selectionChange",v),s.addListener("update",()=>{$(),f=-1})},zme=Ru("<div style=position:absolute;top:0;opacity:0;padding:inherit> <span><span></span> "),Vme=()=>{let s,l=" ",c=" ";const d=zme(),[f,g]=d.childNodes,[v,b]=g.childNodes,$=C=>{let{value:E,activeLine:N}=s,W=C[C[2]<"f"?0:1],q=bf(E,W),Y=E.slice(W,zu(E,W));!q&&!Y&&(Y=" "),l!=q&&(f.data=l=q),c!=Y&&(b.data=c=Y),d.parentNode!=N&&N.prepend(d)},y=()=>Ame(s,v),x=C=>{C.addListener("selectionChange",$),s=C,C.extensions.cursor=x,qt(C,"input",E=>{/history/.test(E.inputType)&&y()}),C.activeLine&&$(C.getSelection())};return x.getPosition=()=>{const C=v.getBoundingClientRect(),E=s.overlays.getBoundingClientRect();return{top:C.y-E.y,bottom:E.bottom-C.bottom,left:C.x-E.x,right:E.right-C.x,height:C.height}},x.scrollIntoView=y,x.element=v,x};let yf=!1;const T0=navigator.clipboard,sa=bs?4:2,Hme=s=>yf=s,Xr=s=>s.search(/\S|$/),Ume=(s=['""',"''","``","()","[]","{}"],l=/([^$\w'"`]["'`]|.[[({])[.,:;\])}>\s]|.[[({]`/s)=>(c,d)=>{let f;const{keyCommandMap:g,inputCommandMap:v,getSelection:b,scrollContainer:$}=c,y=({insertSpaces:q=!0,tabSize:Y}=d)=>[q?" ":"	",q?Y||2:1],x=()=>{var q;return!d.readOnly&&!((q=c.extensions.cursor)!=null&&q.scrollIntoView())},C=([q,Y],[re,se],de,he)=>(q<Y||!he&&l.test((de[Y-1]||" ")+re+(de[Y]||" ")))&&!tn(c,re+de.slice(q,Y)+se,null,null,q+1,Y+1),E=([q,Y],re,se)=>q==Y&&se[Y]==re&&!c.setSelection(q+1),N=(q,Y,re,se,de,he)=>{let ge=Y.join(`
`);if(ge!=q.join(`
`)){const Se=q.length-1,Ae=Y[Se],Re=q[Se],Be=Re.length-Ae.length,Ke=Y[0].length-q[0].length,Lr=re+Xr((Ke<0?Y:q)[0]),_y=se-Re.length+Xr(Be>0?Ae:Re),by=re-se+ge.length+Be,yy=Lr>de?de:Math.max(Lr,de+Ke),my=he+re-se+ge.length;tn(c,ge,re,se,yy,he<_y?my+Be:Math.max(_y+by,my))}},W=(q,Y,re,se,de,he,ge,Se)=>{N(Y,Y.map(q?Ae=>Ae.slice(Xr(Ae)?Se-Xr(Ae)%Se:0):Ae=>Ae&&ge.repeat(Se-Xr(Ae)%Se)+Ae),re,se,de,he)};v["<"]=(q,Y,re)=>C(Y,"<>",re,!0),s.forEach(([q,Y])=>{const re=q==Y;v[q]=(se,de,he)=>(re&&E(de,Y,he)||C(de,q+Y,he))&&x(),re||(v[Y]=(se,de,he)=>E(de,Y,he)&&x())}),v[">"]=(q,Y,re)=>{var se,de;const he=(de=(se=od[id(c)])==null?void 0:se.autoCloseTags)==null?void 0:de.call(se,Y,re,c);he&&(tn(c,">"+he,null,null,Y[0]+1),Gt(q))},g.Tab=(q,[Y,re],se)=>{if(yf||d.readOnly||ii(q)&6)return;const[de,he]=y(d),ge=q.shiftKey,[Se,Ae,Re]=Er(se,Y,re);return Y<re||ge?W(ge,Se,Ae,Re,Y,re,de,he):tn(c,de.repeat(he-(Y-Ae)%he)),x()},g.Enter=(q,Y,re)=>{var se,de,he;const ge=ii(q)&7;if(!ge||ge==sa){ge&&(Y[0]=Y[1]=Er(re,Y[1])[2]);const[Se,Ae]=y(),[Re,Be]=Y,Ke=(se=od[id(c)])==null?void 0:se.autoIndent,Lr=Math.floor(Xr(bf(re,Re))/Ae)*Ae,_y=(de=Ke==null?void 0:Ke[0])!=null&&de.call(Ke,Y,re,c)?Ae:0,by=(he=Ke==null?void 0:Ke[1])==null?void 0:he.call(Ke,Y,re,c),yy=`
`+Se.repeat(Lr+_y)+(by?`
`+Se.repeat(Lr):"");if(yy[1]||re[Be])return tn(c,yy,Re,Be,Re+Lr+_y+1),x()}},g.Backspace=(q,[Y,re],se)=>{if(Y==re){const de=bf(se,Y),he=d.tabSize||2,ge=s.includes(se.slice(Y-1,Y+1)),Se=/[^ ]/.test(de)?0:(de.length-1)%he+1;if(ge||Se>1)return tn(c,"",Y-(ge?1:Se),Y+ge),x()}};for(let q=0;q<2;q++)g[q?"ArrowDown":"ArrowUp"]=(Y,[re,se],de)=>{const he=ii(Y);if(he==1){const ge=q?re:_s(de,re)-1,Se=q?de.indexOf(`
`,se)+1:se;if(ge>-1&&Se>0){const[Ae,Re,Be]=Er(de,ge,Se),Ke=Ae[q?"pop":"shift"](),Lr=(Ke.length+1)*(q?1:-1);Ae[q?"unshift":"push"](Ke),tn(c,Ae.join(`
`),Re,Be,re+Lr,se+Lr)}return x()}else if(he==9){const[ge,Se,Ae]=Er(de,re,se),Re=ge.join(`
`),Be=q?Re.length+1:0;return tn(c,Re+`
`+Re,Se,Ae,re+Be,se+Be),x()}else if(he==2&&!bs)return $.scrollBy(0,Pme($,"lineHeight")*(q?1:-1)),!0};qt(c,"keydown",q=>{var Y;const re=ii(q),se=q.keyCode,[de,he,ge]=b();if(re==sa&&(se==221||se==219))W(se==219,...Er(c.value,de,he),de,he,...y()),x(),Gt(q);else if(re==(bs?10:2)&&se==77)Hme(!yf),Gt(q);else if(se==191&&re==sa||se==65&&re==9){const Se=c.value,Ae=re==9,Re=Ae?de:_s(Se,de),Be=od[id(c,Re)]||{},{line:Ke,block:Lr}=((Y=Be.getComments)==null?void 0:Y.call(Be,c,Re,Se))||Be.comments||{},[_y,by,yy]=Er(Se,de,he),my=_y.length-1;if(Ae){if(Lr){const[$t,K$]=Lr,Y$=Se.slice(de,he),W$=Se.slice(0,de).search(Xo($t)+" ?$"),U$=RegExp("^ ?"+Xo(K$)).test(Se.slice(he));W$+1&&U$?tn(c,Y$,W$,he+ +(Se[he]==" ")+K$.length,W$,W$+he-de):tn(c,`${$t} ${Y$} ${K$}`,de,he,de+$t.length+1,he+$t.length+1),x(),Gt(q)}}else if(Ke){const $t=Xo(Ke),K$=RegExp(`^\\s*(${$t} ?|$)`),Y$=RegExp($t+" ?"),W$=!/\S/.test(Se.slice(by,yy)),U$=_y.map(_y.every(hy=>K$.test(hy))&&!W$?hy=>hy.replace(Y$,""):hy=>W$||/\S/.test(hy)?hy.replace(/^\s*/,`$&${Ke} `):hy);N(_y,U$,by,yy,de,he),x(),Gt(q)}else if(Lr){const[$t,K$]=Lr,Y$=Xr(_y[0]),W$=_y[0].startsWith($t,Y$)&&_y[my].endsWith(K$),U$=_y.slice();U$[0]=_y[0].replace(W$?RegExp(Xo($t)+" ?"):/(?=\S)|$/,W$?"":$t+" ");let hy=U$[0].length-_y[0].length;U$[my]=W$?U$[my].replace(RegExp(`( ?${Xo(K$)})?$`),""):U$[my]+" "+K$;let G$=U$.join(`
`),ky=Y$+by,$y=ky>de?de:Math.max(de+hy,ky),rS=ky>he-(de!=he)?he:Math.min(Math.max(ky,he+hy),by+G$.length);tn(c,G$,by,yy,$y,Math.max($y,rS)),x(),Gt(q)}}else if(re==8+sa&&se==75){const Se=c.value,[Ae,Re,Be]=Er(Se,de,he),Ke=ge>"f"?he-Be+Ae.pop().length:de-Re,Lr=zu(Se,Be+1)-Be-1;tn(c,"",Re-!!Re,Be+!Re,Re+Math.min(Ke,Lr)),x(),Gt(q)}}),["copy","cut","paste"].forEach(q=>qt(c,q,Y=>{const[re,se]=b();if(re==se&&T0){const[[de],he,ge]=Er(c.value,re,se);q=="paste"?Y.clipboardData.getData("text/plain")==f&&(tn(c,f+`
`,he,he,re+f.length+1),x(),Gt(Y)):(T0.writeText(f=de),q=="cut"&&(tn(c,"",he,ge+1),x()),Gt(Y))}}))},Kme=(s=999)=>{let l=0,c,d,f=!1,g,v,b,$,y,x;const C=[],E=q=>{q>=s&&(q--,C.shift()),C.splice(l=q,s,[c.value,x(),x()])},N=q=>{var Y;C[q]&&(y.value=C[q][0],y.setSelectionRange(...C[q][q<l?2:1]),c.update(),(Y=c.extensions.cursor)==null||Y.scrollIntoView(),l=q,d=!1)},W=(q,Y)=>{q.extensions.history=W,c=q,x=q.getSelection,y||E(0),y=q.textarea,q.addListener("selectionChange",()=>{d=f,f=!1}),qt(q,"beforeinput",re=>{let se=re.data,de=re.inputType,he=re.timeStamp;/history/.test(de)?(N(l+(de[7]=="U"?-1:1)),Gt(re)):($=d&&(g==de||he-b<99&&de.slice(-4)=="Drop")&&!Ya&&(se!=" "||v==se))||(C[l][2]=Ya||x()),f=!0,v=se,b=he,g=de}),qt(q,"input",()=>E(l+!$)),qt(q,"keydown",re=>{if(!Y.readOnly){const se=ii(re),de=re.keyCode,he=se==sa&&de==90,ge=se==sa+8&&de==90||!bs&&se==sa&&de==89;he?(N(l-1),Gt(re)):ge&&(N(l+1),Gt(re))}})};return W.clear=()=>{E(0),d=!1},W.has=q=>l+q in C,W.go=q=>N(l+q),W};var Cs="\\b(?:BASH(?:OPTS|_ALIASES|_ARG[CV]|_CMDS|_COMPLETION_COMPAT_DIR|_LINENO|_REMATCH|_SOURCE|_VERSINFO|_VERSION)?|COLORTERM|COLUMNS|COMP_WORDBREAKS|DBUS_SESSION_BUS_ADDRESS|DEFAULTS_PATH|DESKTOP_SESSION|DIRSTACK|DISPLAY|E?UID|GDMSESSION|GDM_LANG|GNOME_KEYRING_CONTROL|GNOME_KEYRING_PID|GPG_AGENT_INFO|GROUPS|HISTCONTROL|HISTFILE|HISTFILESIZE|HISTSIZE|HOME|HOSTNAME|HOSTTYPE|IFS|INSTANCE|JOB|LANG|LANGUAGE|LC_(?:ADDRESS|ALL|IDENTIFICATION|MEASUREMENT|MONETARY|NAME|NUMERIC|PAPER|TELEPHONE|TIME)|LESSCLOSE|LESSOPEN|LINES|LOGNAME|LS_COLORS|MACHTYPE|MAILCHECK|MANDATORY_PATH|NO_AT_BRIDGE|OLDPWD|OPTERR|OPTIND|ORBIT_SOCKETDIR|OSTYPE|PAPERSIZE|PATH|PIPESTATUS|PPID|PS[1-4]|PWD|RANDOM|REPLY|SECONDS|SELINUX_INIT|SESSION|SESSIONTYPE|SESSION_MANAGER|SHELL|SHELLOPTS|SHLVL|SSH_AUTH_SOCK|TERM|UPSTART_EVENTS|UPSTART_INSTANCE|UPSTART_JOB|UPSTART_SESSION|USER|WINDOWID|XAUTHORITY|XDG_(?:CONFIG_DIRS|CURRENT_DESKTOP|DATA_DIRS|GREETER_DATA_DIR|MENU_PREFIX|RUNTIME_DIR|SEAT|SEAT_PATH|SESSION_DESKTOP|SESSION_ID|SESSION_PATH|SESSION_TYPE|VTNR)|XMODIFIERS)\\b",_f={pattern:/(^(["']?)\w+\2)[ 	]+\S.*/,lookbehind:!0,alias:"punctuation"},mk={variable:/^\$\(|^`|\)$|`$/},Ol={bash:_f,environment:{pattern:RegExp("\\$"+Cs),alias:"constant"},variable:[{pattern:/\$?\(\([^]*?\)\)/g,greedy:!0,inside:{variable:[{pattern:/(^\$[^]+)../,lookbehind:!0},/^\$\(\(/],number:/\b0x[a-fA-F\d]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:[Ee]-?\d+)?/,operator:/--|\+\+|&&|\|\||(?:\*\*|<<|>>|[%&|^!=<>/*+-])=?|[?:~]/,punctuation:/\(\(?|\)\)?|,|;/}},{pattern:/\$\((?:[^()]|\([^)]*\))*\)|`[^`]+`/g,greedy:!0,inside:mk},{pattern:/\$\{[^}]*\}/g,greedy:!0,inside:{operator:/:[?=+-]?|[!/]|##?|%%?|\^\^?|,,?/,punctuation:/[[\]]/,environment:{pattern:RegExp("(\\{)"+Cs),lookbehind:!0,alias:"constant"}}},/\$(?:\w+|[#?*!@$])/],entity:/\\(?:[abceEfnrtv\\"]|O?[0-7]{1,3}|U[a-fA-F\d]{8}|u[a-fA-F\d]{4}|x[a-fA-F\d]{1,2})/},Wme=_f.inside=$e.sh=$e.shell=$e.bash={shebang:{pattern:/^#!\s*\/.*/,alias:"important"},comment:{pattern:/(^|[^"{\\$])#.*/,lookbehind:!0},"function-name":[{pattern:/(\bfunction\s+)[\w-]+(?=(?:\s*\(?:\s*\))?\s*\{)/,lookbehind:!0,alias:"function"},{pattern:/\b[\w-]+(?=\s*\(\s*\)\s*\{)/,alias:"function"}],"for-or-select":{pattern:/(\b(?:for|select)\s+)\w+(?=\s+in\s)/,lookbehind:!0,alias:"variable"},"assign-left":{pattern:/(^|[\s;|&]|[<>]\()\w+(?:\.\w+)*(?=\+?=)/,lookbehind:!0,alias:"variable",inside:{environment:{pattern:RegExp("(^|[\\s;|&]|[<>]\\()"+Cs),lookbehind:!0,alias:"constant"}}},parameter:{pattern:/(^|\s)-{1,2}(?:\w+:[+-]?)?\w+(?:\.\w+)*(?![^\s=])/,lookbehind:!0,alias:"variable"},string:[{pattern:/((?:^|[^<])<<-?\s*)(\w+)\s[^]*?\n\2/g,lookbehind:!0,greedy:!0,inside:Ol},{pattern:/((?:^|[^<])<<-?\s*)(["'])(\w+)\2\s[^]*?\n\3/g,lookbehind:!0,greedy:!0,inside:{bash:_f}},{pattern:/(^|[^\\](?:\\\\)*)"(?:\\[^]|\$\([^)]+\)|\$(?!\()|`[^`]+`|[^\\"`$])*"/g,lookbehind:!0,greedy:!0,inside:Ol},{pattern:/(^|[^$\\])'[^']*'/g,lookbehind:!0,greedy:!0},{pattern:/\$'(?:\\[^]|[^\\'])*'/g,greedy:!0,inside:{entity:Ol.entity}}],environment:{pattern:RegExp("\\$?"+Cs),alias:"constant"},variable:Ol.variable,function:{pattern:/(^|[\s;|&]|[<>]\()(?:add|apropos|apt|apt-cache|apt-get|aptitude|aspell|automysqlbackup|basename|bash|bc|bconsole|bg|bzip2|cal|cargo|cat|c?fdisk|chgrp|chkconfig|chmod|chown|chroot|cksum|clear|cmp|column|comm|composer|cron|crontab|c?split|curl|cut|date|dc|dd|ddrescue|debootstrap|df|diff3?|dig|dircolors|dirname|dirs?|dmesg|docker|docker-compose|du|[ef]?grep|eject|env|ethtool|expand|expect|expr|fdformat|fg|file|find|fmt|fold|format|free|fsck|fuser|g?awk|git|g?parted|groupadd|groupdel|groupmod|groups|grub-mkconfig|halt|head|hg|history|host|hostname|iconv|id|ifconfig|ifdown|ifup|import|install|ip|java|jobs|join|killall|less|link|ln|logname|logrotate|look|lpc|lprint[dq]?|lprm?|ls|lsof|lynx|make|man|mc|mdadm|mkconfig|mkdir|mke2fs|mkfifo|mkfs|mkisofs|mknod|mkswap|mm?v|more|most|mtools|m?tr|mutt|nano|nc|netstat|nice|nl|node|nohup|notify-send|nslookup|op|open|passwd|paste|pathchk|ping|p?kill|p?npm|podman|podman-compose|popd|pr|printcap|printenv|ps|pushd|pv|quota|quotacheck|quotactl|ra[mr]|reboot|remsync|rename|renice|rev|rmdir|rp?m|r?sync|[sr]?cp|screen|sdiff|se[dq]|sendmail|service|s?ftp|shellcheck|shuf|shutdown|sleep|s?locate|[sz]?sh|stat|strace|sudo|sum?|suspend|swapon|sysctl|tac|tail|tar|tee|time|timeout|h?top|touch|traceroute|t?sort|tty|u?mount|uname|unexpand|uniq|units|unrar|unshar|unzip|update-grub|uptime|useradd|userdel|usermod|users|uudecode|uuencode|v|vcpkg|vdir|vim?|virsh|vmstat|wait|watch|wc|wget|whereis|which|who|whoami|write|xargs|xdg-open|yarn|yes|zenity|g?zip|zsh|zypper)(?=$|[)\s;|&])/,lookbehind:!0},keyword:{pattern:/(^|[\s;|&]|[<>]\()(?:case|do|done|elif|else|esac|fi|for|function|if|in|select|then|until|while)(?=$|[)\s;|&])/,lookbehind:!0},builtin:{pattern:/(^|[\s;|&]|[<>]\()(?:\.|:|alias|bind|break|builtin|caller|cd|command|continue|declare|echo|enable|eval|exec|exit|export|getopts|hash|help|[ls]et|local|logout|mapfile|printf|pwd|read|readarray|readonly|return|shift|shopt|source|test|times|trap|type|typeset|ulimit|umask|unalias|unset)(?=$|[)\s;|&])/,lookbehind:!0,alias:"class-name"},boolean:{pattern:/(^|[\s;|&]|[<>]\()(?:false|true)(?=$|[)\s;|&])/,lookbehind:!0},"file-descriptor":{pattern:/\B&\d\b/,alias:"important"},operator:{pattern:/\d?<>|>\||\+=|=[=~]?|!=?|<<[<-]?|[&\d]?>>|\d[<>]&?|[<>][&=]?|&[>&]?|\|[&|]?/,inside:{"file-descriptor":{pattern:/^\d/,alias:"important"}}},punctuation:/\$?\(\(?|\)\)?|\.\.|[[\]{};\\]/,number:{pattern:/(^|\s)(?:[1-9]\d*|0)(?:[.,]\d+)?\b/,lookbehind:!0}};["comment","function-name","for-or-select","assign-left","parameter","string","environment","function","keyword","builtin","boolean","file-descriptor","operator","punctuation","number"].forEach(s=>mk[s]=Wme[s]);var hk=/(?:"(?:\\[^]|[^\\\n"])*"|'(?:\\[^]|[^\\\n'])*')/g,El=hk.source,P0={rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^)]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}};P0[Fn]=$e.css={comment:/\/\*[^]*?\*\//,atrule:{pattern:RegExp(`@[\\w-](?:[^;{\\s"']|\\s+(?!\\s)|${El})*?(?:;|(?=\\s*\\{))`),inside:P0},url:{pattern:RegExp(`\\burl\\((?:${El}|(?:[^\\\\
"')=]|\\\\[^])*)\\)`,"gi"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+El+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|${El})*(?=\\s*\\{)`),lookbehind:!0},string:{pattern:hk,greedy:!0},property:{pattern:/(^|[^-\w\xa0-\uffff])(?!\d)(?:(?!\s)[-\w\xa0-\uffff])+(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z\d])[-a-z\d]+(?=\()/i,lookbehind:!0},punctuation:/[(){},:;]/};var zl=(s,l)=>{if(l.has(s))return l.get(s);var c=s,d=Gme.call(s).slice(8,-1);if(d=="Object"){l.set(s,c={});for(var f in s)c[f]=zl(s[f],l);s[Fn]&&(c[Fn]=zl(s[Fn],l)),s[pa]&&(c[pa]=s[pa])}else if(d=="Array"){l.set(s,c=[]);for(var g=0,v=s.length;g<v;g++)c[g]=zl(s[g],l)}return c},yp=s=>zl(s,new Map),Kr=(s,l)=>Object.assign(yp($e[s]),l),yt=(s,l,c)=>{var d={};for(var f in s)d[f]=s[f],delete s[f];for(var f in d)f==l&&Object.assign(s,c),c.hasOwnProperty(f)||(s[f]=d[f])},Gme={}.toString,ks=$e.css,M0={pattern:/(\b\d+)(?:%|[a-z]+(?![\w-]))/,lookbehind:!0},I0={pattern:/(^|[^\w.-])-?(?:\d+(?:\.\d+)?|\.\d+)/,lookbehind:!0};ks.selector.inside=ks.atrule.inside["selector-function-argument"].inside={"pseudo-element":/:(?:after|before|first-letter|first-line|selection)|::[-\w]+/,"pseudo-class":/:[-\w]+/,class:/\.[-\w]+/,id:/#[-\w]+/,attribute:{pattern:/\[(?:[^[\]"']|(["'])(?:\\[^]|(?!\1)[^\\\n])*\1)*\]/g,greedy:!0,inside:{punctuation:/^\[|\]$/,"case-sensitivity":{pattern:/(\s)[si]$/i,lookbehind:!0,alias:"keyword"},namespace:{pattern:/^(\s*)(?:(?!\s)[-*\w\xa0-\uffff])*\|(?!=)/,lookbehind:!0,inside:{punctuation:/\|$/}},"attr-name":{pattern:/^(\s*)(?:(?!\s)[-\w\xa0-\uffff])+/,lookbehind:!0},"attr-value":{pattern:/(=\s*)(?:(?!\s)[-\w\xa0-\uffff])+(?=\s*$)|(["'])(?:\\[^]|(?!\2)[^\\\n])*\2/,lookbehind:!0},operator:/[|~*^$]?=/}},"n-th":[{pattern:/(\(\s*)[+-]?\d*[\dn](?:\s*[+-]\s*\d+)?(?=\s*\))/,lookbehind:!0,inside:{number:/[\dn]+/,operator:/[+-]/}},{pattern:/(\(\s*)(?:even|odd)(?=\s*\))/i,lookbehind:!0}],combinator:/>|\+|~|\|\|/,punctuation:/[(),]/};yt(ks,"property",{variable:{pattern:/(^|[^-\w\xa0-\uffff])--(?!\d)(?:(?!\s)[-\w\xa0-\uffff])*/i,lookbehind:!0}});yt(ks,"function",{operator:{pattern:/(\s)[/*+-](?!\S)/,lookbehind:!0},hexcode:{pattern:/\B#[a-f\d]{3,8}\b/i,alias:"color"},color:[{pattern:/(^|[^\w-])(?:(?:alice|cadet|cornflower|deepsky|dodger|midnight|powder|royal|sky|steel)blue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blueviolet|brown|burlywood|chartreuse|chocolate|coral|cornsilk|crimson|(?:dark)?(?:blue|cyan|goldenrod|gr[ae]y|green|khaki|magenta|olivegreen|orange|orchid|red|salmon|seagreen|slateblue|slategr[ae]y|turquoise|violet)|deeppink|dimgr[ae]y|firebrick|floralwhite|(?:forest|lawn|lime|pale|spring)green|fuchsia|gainsboro|ghostwhite|gold|greenyellow|honeydew|hotpink|indianred|indigo|ivory|lavender|lavenderblush|lemonchiffon|light(?:blue|coral|cyan|goldenrodyellow|gr[ae]y|green|pink|salmon|seagreen|skyblue|slategr[ae]y|steelblue|yellow)|lime|linen|maroon|medium(?:aquamarine|blue|orchid|purple|seagreen|slateblue|springgreen|turquoise|violetred)|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orangered|palegoldenrod|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|purple|rebeccapurple|rosybrown|saddlebrown|sandybrown|seashell|sienna|silver|snow|tan|teal|thistle|tomato|transparent|wheat|white|whitesmoke|yellow|yellowgreen)(?![\w-])/i,lookbehind:!0},{pattern:/\b(?:hsl|rgb)\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*\)\B|\b(?:hsl|rgb)a\(\s*\d{1,3}\s*,\s*\d{1,3}%?\s*,\s*\d{1,3}%?\s*,\s*(?:0|0?\.\d+|1)\s*\)\B/i,inside:{function:/^[^(]+/,unit:M0,number:I0,punctuation:/[(),]/}}],entity:/\\[a-f\d]{1,8}/i,unit:M0,number:I0});$e.ini={comment:{pattern:/(^[ \f	\v]*)[#;].*/m,lookbehind:!0},section:{pattern:/(^[ \f	\v]*)\[[^\n\]]*\]?/m,lookbehind:!0,inside:{"section-name":{pattern:/(^\[[ \f	\v]*)[^ \f	\v\]]+(?:[ \f	\v]+[^ \f	\v\]]+)*/,lookbehind:!0,alias:"selector"},punctuation:/[[\]]/}},key:{pattern:/(^[ \f	\v]*)[^ \f\n	\v=]+(?:[ \f	\v]+[^ \f\n	\v=]+)*(?=[ \f	\v]*=)/m,lookbehind:!0,alias:"attr-name"},value:{pattern:/(=[ \f	\v]*)[^ \f\n	\v]+(?:[ \f	\v]+[^ \f\n	\v]+)*/,lookbehind:!0,alias:"attr-value",inside:{"inner-value":{pattern:/^(["']).+(?=\1$)/,lookbehind:!0}}},punctuation:/=/};var Wr=()=>({pattern:/\/\/.*|\/\*[^]*?(?:\*\/|$)/g,greedy:!0}),_p=()=>({pattern:/(["'])(?:\\[^]|(?!\1)[^\\\n])*\1/g,greedy:!0}),gk=/\b0x[a-f\d]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,Lo=/[()[\]{}.,:;]/,mn=/\b(?:false|true)\b/,ld={"interpolation-punctuation":{pattern:/^\$\{?|\}$/,alias:"punctuation"},expression:{pattern:/[^]+/}};ld.expression.inside=$e.kts=$e.kt=$e.kotlin={"string-literal":[{pattern:/"""(?:[^$]|\$(?:(?!\{)|\{[^{}]*\}))*?"""/,alias:"multiline",inside:{interpolation:{pattern:/\$(?:[a-z_]\w*|\{[^{}]*\})/i,inside:ld},string:/[^]+/}},{pattern:/"(?:\\.|[^\\\n"$]|\$(?:(?!\{)|\{[^{}]*\}))*"/,alias:"singleline",inside:{interpolation:{pattern:/((?:^|[^\\])(?:\\\\)*)\$(?:[a-z_]\w*|\{[^{}]*\})/i,lookbehind:!0,inside:ld},string:/[^]+/}}],char:{pattern:/'(?:[^\\\n']|\\(?:.|u[a-fA-F\d]{0,4}))'/g,greedy:!0},comment:Wr(),annotation:{pattern:/\B@(?:\w+:)?(?:[A-Z]\w*|\[[^\]]+\])/,alias:"builtin"},keyword:{pattern:/(^|[^.])\b(?:abstract|actual|annotation|as|break|by|catch|class|companion|const|constructor|continue|crossinline|data|do|dynamic|else|enum|expect|external|final|finally|for|fun|get|if|import|in|infix|init|inline|inner|interface|internal|is|lateinit|noinline|null|object|open|operator|out|override|package|private|protected|public|reified|return|sealed|set|super|suspend|tailrec|this|throw|to|try|typealias|val|var|vararg|when|where|while)\b/,lookbehind:!0},boolean:mn,label:{pattern:/\b\w+@|@\w+/,alias:"symbol"},function:{pattern:/(?:`[^\n`]+`|\b\w+)(?=\s*\()|(\.)(?:`[^\n`]+`|\w+)(?=\s*\{)/g,lookbehind:!0,greedy:!0},number:/\b(?:0[xX][a-fA-F\d]+(?:_[a-fA-F\d]+)*|0[bB][01]+(?:_[01]+)*|\d+(?:_\d+)*(?:\.\d+(?:_\d+)*)?(?:[eE][+-]?\d+(?:_\d+)*)?[fFL]?)\b/,operator:/--|\+\+|&&|\|\||->|[!=]==|!!|[%!=<>/*+-]=?|[?:]:?|\.\.|\b(?:and|inv|shl|u?shr|x?or)\b/,punctuation:Lo};var bk=[{pattern:/&[a-z\d]{1,8};/i,alias:"named-entity"},/&#x?[a-f\d]{1,8};/i],qme={pattern:/<\/?(?!\d)[^\s/=>$<%]+(?:\s(?:\s*[^\s/=>]+(?:\s*=\s*(?!\s)(?:"[^"]*"|'[^']*'|[^\s"'=>]+(?=[\s>]))?|(?=[\s/>])))+)?\s*\/?>/g,greedy:!0,inside:{punctuation:/^<\/?|\/?>$/,tag:{pattern:/^\S+/,inside:{namespace:/^[^:]+:/}},"attr-value":[{pattern:/(=\s*)(?:"[^"]*"|'[^']*'|[^\s"'=>]+)/g,lookbehind:!0,greedy:!0,inside:{punctuation:/^["']|["']$/,entity:bk}}],"attr-equals":/=/,"attr-name":{pattern:/\S+/,inside:{namespace:/^[^:]+:/}}}};$e.rss=$e.atom=$e.ssml=$e.xml={comment:{pattern:/<!--(?:(?!<!--)[^])*?-->/g,greedy:!0},prolog:{pattern:/<\?[^]+?\?>/g,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/gi,greedy:!0,inside:{"internal-subset":{pattern:/(\[)[^]+(?=\]\s*>$)/,lookbehind:!0,inside:"xml"},string:/"[^"]*"|'[^']*'/,punctuation:/^<!|[>[\]]/,"doctype-tag":/^DOCTYPE/i,name:/\S+/}},cdata:{pattern:/<!\[CDATA\[[^]*?\]\]>/gi,greedy:!0},tag:qme,entity:bk,"markup-bracket":{pattern:/[()[\]{}]/,alias:"punctuation"}};var wf=(s,l)=>(s["language-"+l]={pattern:/[^]+/,inside:l},s),N0=(s,l)=>({pattern:RegExp(`(<${s}[^>]*>)(?!</${s}>)(?:<!\\[CDATA\\[(?:[^\\]]|\\](?!\\]>))*\\]\\]>|(?!<!\\[CDATA\\[)[^])+?(?=</${s}>)`,"gi"),lookbehind:!0,greedy:!0,inside:wf({"included-cdata":{pattern:/<!\[CDATA\[[^]*?\]\]>/i,inside:wf({cdata:/^<!\[CDATA\[|\]\]>$/i},l)}},l)}),j0=(s,l)=>({pattern:RegExp(`((?:^|["'\\s])(?:${s})\\s*=\\s*)(?:"[^"]*"|'[^']*'|[^\\s"'=>]+)`,"gi"),lookbehind:!0,greedy:!0,inside:wf({punctuation:/^["']|["']$/},l)}),yk=$e.svg=$e.mathml=$e.html=$e.markup=yp($e.xml);yk.tag.inside["attr-value"].unshift(j0("style","css"),j0("on[a-z]+","javascript"));yt(yk,"cdata",{style:N0("style","css"),script:N0("script","javascript")});$e.r={comment:/#.*/,string:{pattern:/(["'])(?:\\.|(?!\1)[^\\\n])*\1/g,greedy:!0},"percent-operator":{pattern:/%[^%\s]*%/,alias:"operator"},boolean:/\b(?:FALSE|TRUE)\b/,ellipsis:/\.\.(?:\.|\d+)/,number:[/\b(?:Inf|NaN)\b/,/(?:\b0x[a-fA-F\d]+(?:\.\d*)?|\b\d+(?:\.\d*)?|\B\.\d+)(?:[EePp][+-]?\d+)?[iL]?/],keyword:/\b(?:NA|NA_character_|NA_complex_|NA_integer_|NA_real_|NULL|break|else|for|function|if|in|next|repeat|while)\b/,operator:/->>?|<=|<<?-|[!=<>]=?|::?|&&?|\|\|?|[~^$@/*+-]/,punctuation:/[()[\]{},;]/};$e.basic={comment:{pattern:/(?:!|rem\b).+/i,inside:{keyword:/^rem/i}},string:{pattern:/"(?:""|[#$%&'().,:;\w ?^!=<>/*+-])*"/g,greedy:!0},number:/(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,keyword:/\b(?:as|beep|bload|bsave|call absolute|call|case|chain|chdir|clear|close|cls|com|common|const|data|declare|def(?: fn| seg|dbl|int|[ls]ng|str)|dim|do|double|else|elseif|environ|erase|error|exit|field|files|for|function|get|gosub|goto|if|input|integer|ioctl|key|kill|line input|locate|lock|long|loop|[lr]set|mkdir|name|next|off|on(?: com| error| key| timer)?|open|option base|[op]ut|poke|read|redim|rem|restore|resume|return|rmdir|run|select case|shared|shell|single|sleep|static|step|stop|string|sub|swap|system|then|timer|to|troff|tron|type|unlock|until|using|view print|wait|w?end|while|write)(?:\$|\b)/i,function:/\b(?:abs|access|a?cos|angle|area|arithmetic|array|a?sin|ask|atn?|base|begin|break|cause|ceil|chr|clip|collate|color|co[nst]|cosh|csc|date|datum|debug|decimal|de[fgt]|degrees|delete|device|display|dot|elapsed|eps|erasable|exline|exp|external|extype|filetype|fixed|fp|go|graph|handler|idn|image|int?|internal|ip|is|keyed|[lu]bound|[lu]case|left|le[nt]|length|lines?|log2?|log10|[lr]trim|margin|ma[tx]|maxnum|mi[dn]|missing|mod|native|nul|numeric|of|option|ord|organization|outin|output|pi|pointer|points?|pos|print|program|prompt|rad|radians|randomize|record|recsize|rectype|relative|remainder|repeat|rest|retry|rewrite|right|rnd|round|same|se[ct]|select|sequential|setter|sgn|sinh|size|skip|s[qt]r|standard|status|stream|style|tab|tanh?|template|text|there|time|timeout|trace|transform|truncate|use|val|variable|viewport|when|window|with|zer|zonewidth)(?:\$|\b)/i,operator:/<=|<>|>=|[&^=<>/*+-]|\b(?:and|eqv|imp|not|x?or)\b/i,punctuation:/[(),:;]/};$e.vbnet=Kr("basic",{comment:{pattern:/(?:!|'|rem\b).*/i,inside:{keyword:/^rem/i}},string:{pattern:/(^|[^"])"(?:""|[^"])*"(?!")/g,lookbehind:!0,greedy:!0},keyword:/(?:\b(?:addhandler|addressof|alias|and|andalso|as|beep|bload|boolean|bsave|byref|byval|call absolute|call|case|catch|cbool|c?byte|cc?har|c?date|cdbl|cdec|chain|chdir|cu?int|class|clear|close|cls|cobj|com|common|const|continue|c?sbyte|c?u?short|c?sng|cstr|c?type|cu?lng|data|decimal|declare|def(?: fn| seg|dbl|int|lng|sng|str)|default|delegate|dim|directcast|do|double|else|elseif|enum|environ|erase|error|event|exit|false|true|field|files|finally|for each|for|friend|function|[gls]et|gettype|getxmlnamespace|global|gosub|goto|handles|i[fns]|implements|imports|inherits|input|interface|ioctl|isnot|key|kill|lib|like|line input|locate|lock|loop|[lr]set|me|mkdir|mod|module|mustinherit|mustoverride|mybase|myclass|name|namespace|narrowing|new|next|not|nothing|notinheritable|notoverridable|object|off?|on (?:com|error|key|timer)|on|open|operator|option base|option|optional|orelse|out|overloads|overridable|overrides|paramarray|partial|poke|private|property|protected|public|put|raiseevent|read|readonly|redim|removehandler|restore|resume|return|rmdir|run|select case|select|shadows|shared|shell|single|sleep|static|step|stop|string|structure|sub|swap|synclock|system|[tw]hen|throw|timer|to|troff|tron|try|trycast|typeof|u?integer|u?long|unlock|until|using|view print|wait|w?end|while|widening|with|withevents|write|writeonly|x?or)|\B#(?:const|else|elseif|end|if))(?:\$|\b)/i,punctuation:/[(){},:;]/});var D0={pattern:/'(?:\\[^]|[^\\\n']){0,32}'/g,greedy:!0},B0={pattern:/\/\/(?:[^\\\n]|\\\n?)*|\/\*[^]*?(?:\*\/|$)/g,greedy:!0},F0={pattern:/"(?:\\[^]|[^\\\n"])*"/g,greedy:!0},L0={pattern:/\S[^]*/};L0.inside=$e.c={comment:B0,char:D0,macro:{pattern:/(^[ 	]*)#\s*[a-z](?:[^\\\n/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\[^])*/img,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},F0],char:D0,comment:B0,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=\n)/,expression:L0}},string:F0,"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([^]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[a-f\d]+(?:\.[a-f\d]*)?|\.[a-f\d]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/->|([&|:+-])\1|[?:~]|>>=?|<<=?|[%&|^!=<>/*+-]=?/,punctuation:Lo};yt($e.opencl=Kr("c",{keyword:/\b(?:(?:__)?(?:constant|global|kernel|local|private|read_only|read_write|write_only)|__attribute__|auto|(?:bool|u?(?:char|int|long|short)|half|quad)(?:2|3|4|8|16)?|break|case|complex|const|continue|(?:double|float)(?:16(?:x(?:1|2|4|8|16))?|1x(?:1|2|4|8|16)|2(?:x(?:1|2|4|8|16))?|3|4(?:x(?:1|2|4|8|16))?|8(?:x(?:1|2|4|8|16))?)?|default|do|else|enum|extern|for|goto|if|imaginary|inline|packed|pipe|register|restrict|return|signed|sizeof|static|struct|switch|typedef|uniform|union|unsigned|void|volatile|while)\b/,number:/(?:\b0x(?:[a-f\d]+(?:\.[a-f\d]*)?|\.[a-f\d]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[fuhl]{0,4}/i,boolean:mn,"constant-opencl-kernel":{pattern:/\b(?:CHAR_(?:BIT|MAX|MIN)|CLK_(?:ADDRESS_(?:CLAMP(?:_TO_EDGE)?|NONE|REPEAT)|FILTER_(?:LINEAR|NEAREST)|(?:GLOBAL|LOCAL)_MEM_FENCE|NORMALIZED_COORDS_(?:FALSE|TRUE))|CL_(?:BGRA|(?:HALF_)?FLOAT|INTENSITY|LUMINANCE|A?R?G?B?[Ax]?|(?:(?:UN)?SIGNED|[US]NORM)_(?:INT(?:8|16|32))|UNORM_(?:INT_101010|SHORT_(?:555|565)))|(?:DBL|FLT|HALF)_(?:DIG|EPSILON|(?:MAX|MIN)(?:(?:_10)?_EXP)?|MANT_DIG)|FLT_RADIX|HUGE_VALF?|(?:INT|LONG|SCHAR|SHRT)_(?:MAX|MIN)|INFINITY|MAXFLOAT|M_(?:[12]_PI|2_SQRTPI|E|LN2|LN10|LOG2E?|LOG10E?|PI(?:_[24])?|SQRT(?:1_2|2))(?:_F|_H)?|NAN|(?:UCHAR|UINT|ULONG|USHRT)_MAX)\b/,alias:"constant"}}),"class-name",{"builtin-type":{pattern:/\b(?:_cl_(?:command_queue|context|device_id|event|kernel|mem|platform_id|program|sampler)|cl_(?:image_format|mem_fence_flags)|clk_event_t|event_t|image(?:1d_(?:array_|buffer_)?t|2d_(?:array_(?:depth_|msaa_depth_|msaa_)?|depth_|msaa_depth_|msaa_)?t|3d_t)|ndrange_t|ptrdiff_t|queue_t|reserve_id_t|sampler_t|size_t|u?intptr_t)\b/,alias:"keyword"}});var Cf={"type-opencl-host":{pattern:/\b(?:cl_(?:GLenum|GLint|GLuin|addressing_mode|bitfield|bool|buffer_create_type|build_status|channel_(?:order|type)|(?:u?(?:char|int|long|short)|double|float)(?:[2348]|16)?|command_(?:queue(?:_info|_properties)?|type)|context(?:_info|_properties)?|device_(?:exec_capabilities|fp_config|id|info|local_mem_type|mem_cache_type|type)|(?:event|sampler)(?:_info)?|filter_mode|half|image_info|kernel(?:_info|_work_group_info)?|map_flags|mem(?:_flags|_info|_object_type)?|platform_(?:id|info)|profiling_info|program(?:_build_info|_info)?))\b/,alias:"keyword"},"boolean-opencl-host":{pattern:/\bCL_(?:FALSE|TRUE)\b/,alias:"boolean"},"constant-opencl-host":{pattern:/\bCL_(?:A|ABGR|ADDRESS_(?:CLAMP(?:_TO_EDGE)?|MIRRORED_REPEAT|NONE|REPEAT)|ARGB|BLOCKING|BUFFER_CREATE_TYPE_REGION|BUILD_(?:ERROR|IN_PROGRESS|NONE|PROGRAM_FAILURE|SUCCESS)|COMMAND_(?:ACQUIRE_GL_OBJECTS|BARRIER|COPY_(?:BUFFER(?:_RECT|_TO_IMAGE)?|IMAGE(?:_TO_BUFFER)?)|FILL_(?:BUFFER|IMAGE)|MAP(?:_BUFFER|_IMAGE)|MARKER|MIGRATE(?:_SVM)?_MEM_OBJECTS|NATIVE_KERNEL|NDRANGE_KERNEL|READ_(?:BUFFER(?:_RECT)?|IMAGE)|RELEASE_GL_OBJECTS|SVM_(?:FREE|MAP|MEMCPY|MEMFILL|UNMAP)|TASK|UNMAP_MEM_OBJECT|USER|WRITE_(?:BUFFER(?:_RECT)?|IMAGE))|COMPILER_NOT_AVAILABLE|COMPILE_PROGRAM_FAILURE|COMPLETE|CONTEXT_(?:DEVICES|INTEROP_USER_SYNC|NUM_DEVICES|PLATFORM|PROPERTIES|REFERENCE_COUNT)|DEPTH(?:_STENCIL)?|DEVICE_(?:ADDRESS_BITS|AFFINITY_DOMAIN_(?:L[1-4]_CACHE|NEXT_PARTITIONABLE|NUMA)|AVAILABLE|BUILT_IN_KERNELS|COMPILER_AVAILABLE|DOUBLE_FP_CONFIG|ENDIAN_LITTLE|ERROR_CORRECTION_SUPPORT|EXECUTION_CAPABILITIES|EXTENSIONS|GLOBAL_(?:MEM_(?:CACHELINE_SIZE|CACHE_SIZE|CACHE_TYPE|SIZE)|VARIABLE_PREFERRED_TOTAL_SIZE)|HOST_UNIFIED_MEMORY|IL_VERSION|IMAGE(?:2D_MAX_(?:HEIGHT|WIDTH)|3D_MAX_(?:DEPTH|HEIGHT|WIDTH)|_BASE_ADDRESS_ALIGNMENT|_MAX_ARRAY_SIZE|_MAX_BUFFER_SIZE|_PITCH_ALIGNMENT|_SUPPORT)|LINKER_AVAILABLE|LOCAL_MEM_SIZE|LOCAL_MEM_TYPE|MAX_(?:CLOCK_FREQUENCY|COMPUTE_UNITS|CONSTANT_ARGS|CONSTANT_BUFFER_SIZE|GLOBAL_VARIABLE_SIZE|MEM_ALLOC_SIZE|NUM_SUB_GROUPS|ON_DEVICE_(?:EVENTS|QUEUES)|PARAMETER_SIZE|PIPE_ARGS|READ_IMAGE_ARGS|READ_WRITE_IMAGE_ARGS|SAMPLERS|WORK_GROUP_SIZE|WORK_ITEM_DIMENSIONS|WORK_ITEM_SIZES|WRITE_IMAGE_ARGS)|MEM_BASE_ADDR_ALIGN|MIN_DATA_TYPE_ALIGN_SIZE|NAME|NATIVE_VECTOR_WIDTH_(?:CHAR|DOUBLE|FLOAT|HALF|INT|LONG|SHORT)|NOT_(?:AVAILABLE|FOUND)|OPENCL_C_VERSION|PARENT_DEVICE|PARTITION_(?:AFFINITY_DOMAIN|BY_AFFINITY_DOMAIN|BY_COUNTS|BY_COUNTS_LIST_END|EQUALLY|FAILED|MAX_SUB_DEVICES|PROPERTIES|TYPE)|PIPE_MAX_(?:ACTIVE_RESERVATIONS|PACKET_SIZE)|PLATFORM|PREFERRED_(?:GLOBAL_ATOMIC_ALIGNMENT|INTEROP_USER_SYNC|LOCAL_ATOMIC_ALIGNMENT|PLATFORM_ATOMIC_ALIGNMENT|VECTOR_WIDTH_(?:CHAR|DOUBLE|FLOAT|HALF|INT|LONG|SHORT))|PRINTF_BUFFER_SIZE|PROFILE|PROFILING_TIMER_RESOLUTION|QUEUE_(?:ON_(?:DEVICE_(?:MAX_SIZE|PREFERRED_SIZE|PROPERTIES)|HOST_PROPERTIES)|PROPERTIES)|REFERENCE_COUNT|SINGLE_FP_CONFIG|SUB_GROUP_INDEPENDENT_FORWARD_PROGRESS|SVM_(?:ATOMICS|CAPABILITIES|COARSE_GRAIN_BUFFER|FINE_GRAIN_BUFFER|FINE_GRAIN_SYSTEM)|TYPE(?:_ACCELERATOR|_ALL|_CPU|_CUSTOM|_DEFAULT|_GPU)?|VENDOR(?:_ID)?|VERSION)|DRIVER_VERSION|EVENT_(?:COMMAND_(?:EXECUTION_STATUS|QUEUE|TYPE)|CONTEXT|REFERENCE_COUNT)|EXEC_(?:KERNEL|NATIVE_KERNEL|STATUS_ERROR_FOR_EVENTS_IN_WAIT_LIST)|FILTER_(?:LINEAR|NEAREST)|FLOAT|FP_(?:CORRECTLY_ROUNDED_DIVIDE_SQRT|DENORM|FMA|INF_NAN|ROUND_TO_INF|ROUND_TO_NEAREST|ROUND_TO_ZERO|SOFT_FLOAT)|GLOBAL|HALF_FLOAT|IMAGE_(?:ARRAY_SIZE|BUFFER|DEPTH|ELEMENT_SIZE|FORMAT|FORMAT_MISMATCH|FORMAT_NOT_SUPPORTED|HEIGHT|NUM_MIP_LEVELS|NUM_SAMPLES|ROW_PITCH|SLICE_PITCH|WIDTH)|INTENSITY|INVALID_(?:ARG_INDEX|ARG_SIZE|ARG_VALUE|BINARY|BUFFER_SIZE|BUILD_OPTIONS|COMMAND_QUEUE|COMPILER_OPTIONS|CONTEXT|DEVICE|DEVICE_PARTITION_COUNT|DEVICE_QUEUE|DEVICE_TYPE|EVENT|EVENT_WAIT_LIST|GLOBAL_OFFSET|GLOBAL_WORK_SIZE|GL_OBJECT|HOST_PTR|IMAGE_DESCRIPTOR|IMAGE_FORMAT_DESCRIPTOR|IMAGE_SIZE|KERNEL|KERNEL_ARGS|KERNEL_DEFINITION|KERNEL_NAME|LINKER_OPTIONS|MEM_OBJECT|MIP_LEVEL|OPERATION|PIPE_SIZE|PLATFORM|PROGRAM|PROGRAM_EXECUTABLE|PROPERTY|QUEUE_PROPERTIES|SAMPLER|VALUE|WORK_DIMENSION|WORK_GROUP_SIZE|WORK_ITEM_SIZE)|KERNEL_(?:ARG_(?:ACCESS_(?:NONE|QUALIFIER|READ_ONLY|READ_WRITE|WRITE_ONLY)|ADDRESS_(?:CONSTANT|GLOBAL|LOCAL|PRIVATE|QUALIFIER)|INFO_NOT_AVAILABLE|NAME|TYPE_(?:CONST|NAME|NONE|PIPE|QUALIFIER|RESTRICT|VOLATILE))|ATTRIBUTES|COMPILE_NUM_SUB_GROUPS|COMPILE_WORK_GROUP_SIZE|CONTEXT|EXEC_INFO_SVM_FINE_GRAIN_SYSTEM|EXEC_INFO_SVM_PTRS|FUNCTION_NAME|GLOBAL_WORK_SIZE|LOCAL_MEM_SIZE|LOCAL_SIZE_FOR_SUB_GROUP_COUNT|MAX_NUM_SUB_GROUPS|MAX_SUB_GROUP_SIZE_FOR_NDRANGE|NUM_ARGS|PREFERRED_WORK_GROUP_SIZE_MULTIPLE|PRIVATE_MEM_SIZE|PROGRAM|REFERENCE_COUNT|SUB_GROUP_COUNT_FOR_NDRANGE|WORK_GROUP_SIZE)|LINKER_NOT_AVAILABLE|LINK_PROGRAM_FAILURE|LOCAL|LUMINANCE|MAP_(?:FAILURE|READ|WRITE|WRITE_INVALIDATE_REGION)|MEM_(?:ALLOC_HOST_PTR|ASSOCIATED_MEMOBJECT|CONTEXT|COPY_HOST_PTR|COPY_OVERLAP|FLAGS|HOST_NO_ACCESS|HOST_PTR|HOST_READ_ONLY|HOST_WRITE_ONLY|KERNEL_READ_AND_WRITE|MAP_COUNT|OBJECT_(?:ALLOCATION_FAILURE|BUFFER|IMAGE1D|IMAGE1D_ARRAY|IMAGE1D_BUFFER|IMAGE2D|IMAGE2D_ARRAY|IMAGE3D|PIPE)|OFFSET|READ_ONLY|READ_WRITE|REFERENCE_COUNT|SIZE|SVM_ATOMICS|SVM_FINE_GRAIN_BUFFER|TYPE|USES_SVM_POINTER|USE_HOST_PTR|WRITE_ONLY)|MIGRATE_MEM_OBJECT_(?:CONTENT_UNDEFINED|HOST)|MISALIGNED_SUB_BUFFER_OFFSET|NONE|NON_BLOCKING|OUT_OF_(?:HOST_MEMORY|RESOURCES)|PIPE_(?:MAX_PACKETS|PACKET_SIZE)|PLATFORM_(?:EXTENSIONS|HOST_TIMER_RESOLUTION|NAME|PROFILE|VENDOR|VERSION)|PROFILING_(?:COMMAND_(?:COMPLETE|END|QUEUED|START|SUBMIT)|INFO_NOT_AVAILABLE)|PROGRAM_(?:BINARIES|BINARY_SIZES|BINARY_TYPE(?:_COMPILED_OBJECT|_EXECUTABLE|_LIBRARY|_NONE)?|BUILD_(?:GLOBAL_VARIABLE_TOTAL_SIZE|LOG|OPTIONS|STATUS)|CONTEXT|DEVICES|IL|KERNEL_NAMES|NUM_DEVICES|NUM_KERNELS|REFERENCE_COUNT|SOURCE)|QUEUED|QUEUE_(?:CONTEXT|DEVICE|DEVICE_DEFAULT|ON_DEVICE|ON_DEVICE_DEFAULT|OUT_OF_ORDER_EXEC_MODE_ENABLE|PROFILING_ENABLE|PROPERTIES|REFERENCE_COUNT|SIZE)|RA?|READ_(?:ONLY|WRITE)_CACHE|RG|RGB[Ax]?|RG?x|RUNNING|SAMPLER_(?:ADDRESSING_MODE|CONTEXT|FILTER_MODE|LOD_MAX|LOD_MIN|MIP_FILTER_MODE|NORMALIZED_COORDS|REFERENCE_COUNT)|(?:UN)?SIGNED_INT(?:8|16|32)|SNORM_INT(?:8|16)|SUBMITTED|SUCCESS|UNORM_INT(?:8|16|24|_101010|_101010_2)|UNORM_SHORT_5[56]5|VERSION_(?:1_[012]|2_[01])|s?BGRA|sRGB[Ax]?)\b/,alias:"constant"},"function-opencl-host":{pattern:/\bcl(?:BuildProgram|CloneKernel|CompileProgram|Create(?:Buffer|CommandQueue(?:WithProperties)?|Context|ContextFromType|Image|Image[23]D|Kernel|KernelsInProgram|Pipe|ProgramWith(?:Binary|BuiltInKernels|IL|Source)|Sampler|SamplerWithProperties|SubBuffer|SubDevices|UserEvent)|Enqueue(?:(?:Barrier|Marker)(?:WithWaitList)?|Copy(?:Buffer(?:Rect|ToImage)?|Image(?:ToBuffer)?)|(?:Fill|Map)(?:Buffer|Image)|MigrateMemObjects|NDRangeKernel|NativeKernel|(?:Read|Write)(?:Buffer(?:Rect)?|Image)|SVM(?:Free|Map|MemFill|Memcpy|MigrateMem|Unmap)|Task|UnmapMemObject|WaitForEvents)|Finish|Flush|Get(?:CommandQueueInfo|ContextInfo|Device(?:AndHostTimer|IDs|Info)|Event(?:Profiling)?Info|ExtensionFunctionAddress(?:ForPlatform)?|HostTimer|ImageInfo|Kernel(?:ArgInfo|Info|SubGroupInfo|WorkGroupInfo)|MemObjectInfo|PipeInfo|Platform(?:IDs|Info)|Program(?:Build)?Info|SamplerInfo|SupportedImageFormats)|LinkProgram|(?:Release|Retain)(?:CommandQueue|Context|Device|Event|Kernel|MemObject|Program|Sampler)|SVM(?:Alloc|Free)|Set(?:CommandQueueProperty|DefaultDeviceCommandQueue|EventCallback|Kernel|Kernel(?:Arg(?:SVMPointer)?|ExecInfo)|MemObjectDestructorCallback|UserEventStatus)|Unload(?:Platform)?Compiler|WaitForEvents)\b/,alias:"function"}};yt($e.c,"keyword",Cf);$e.cpp&&(Cf["type-opencl-host-cpp"]={pattern:/\b(?:Buffer|BufferGL|BufferRenderGL|CommandQueue|Context|Device|DeviceCommandQueue|EnqueueArgs|Event|Image(?:[123]D|[12]DArray|1DBuffer|[23]DGL|Format|GL)?|Kernel|KernelFunctor|LocalSpaceArg|Memory|NDRange|Pipe|Platform|Program|SVMAllocator|SVMTrait(?:Atomic|Coarse|Fine|ReadOnly|ReadWrite|WriteOnly)|Sampler|UserEvent)\b/,alias:"keyword"},yt($e.cpp,"keyword",Cf));var Yme=$e.diff={coord:/^(?:\*{3}|-{3}|\+{3}|\d).*$|^@@.*@@$/m},sd={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};for(var Ra in sd){var ud=Ra.split("-")[0];Yme[Ra]={pattern:RegExp("^(?:["+sd[Ra]+`].*$
?)+`,"m"),alias:ud!=Ra?ud:Ra=="diff"?"bold":void 0,inside:{prefix:{pattern:RegExp("^["+sd[Ra]+"]","mg"),greedy:!0,alias:ud}}}}var cd=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|opens?|package|permits|private|protected|provides|public|record(?!\s*[()[\]{}%~.,:;?%&|^=<>/*+-])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throws?|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,li="(?:[a-z]\\w*\\s*\\.\\s*)*(?:[A-Z]\\w*\\s*\\.\\s*)*",kf={pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},$f={namespace:kf,punctuation:/\./},R0={pattern:RegExp(`(^|[^\\w.])${li}[A-Z](?:[\\d_A-Z]*[a-z]\\w*)?\\b`),lookbehind:!0,inside:$f};$e.java={"doc-comment":{pattern:/\/\*\*(?!\/)[^]*?(?:\*\/|$)/g,greedy:!0,alias:"comment",inside:"javadoc"},comment:Wr(),"triple-quoted-string":{pattern:/"""[ 	]*\n(?:\\.|[^\\])*?"""/g,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^\\\n']){1,6}'/g,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\\n"])*"/g,lookbehind:!0,greedy:!0},annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":R0,keyword:cd,punctuation:/[().,:<>]/,operator:/[?&|]/}},import:[{pattern:RegExp(`(\\bimport\\s+)${li}(?:[A-Z]\\w*|\\*)(?=\\s*;)`),lookbehind:!0,inside:{namespace:kf,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(`(\\bimport\\s+static\\s+)${li}(?:\\w+|\\*)(?=\\s*;)`),lookbehind:!0,alias:"static",inside:{namespace:kf,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(`(\\b(?:exports|import(?:\\s+static)?|module|opens?|package|provides|requires|to|transitive|uses|with)\\s+)(?!${cd.source})[a-z]\\w*(?:\\.[a-z]\\w*)*\\.?`),lookbehind:!0,inside:{punctuation:/\./}},"class-name":[R0,{pattern:RegExp(`(^|[^\\w.])${li}[A-Z]\\w*(?=\\s+\\w+\\s*[;,=()]|\\s*(?:\\[[\\s,]*\\]\\s*)?::\\s*new\\b)`),lookbehind:!0,inside:$f},{pattern:RegExp(`(\\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\\s+)${li}[A-Z]\\w*\\b`),lookbehind:!0,inside:$f}],keyword:cd,boolean:mn,function:{pattern:/\b\w+(?=\()|(::\s*)[a-z_]\w*/,lookbehind:!0},number:/\b0b[01][01_]*l?\b|\b0x(?:\.[a-f\d_p+-]+|[a-f\d_]+(?:\.[a-f\d_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,constant:/\b[A-Z][A-Z_\d]+\b/,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[%&|^!=<>/*+-]=?)/m,lookbehind:!0},punctuation:Lo};yt($e.less=Kr("css",{comment:Wr(),atrule:{pattern:/@[\w-](?:\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{punctuation:/[():]/}},selector:{pattern:/(?:@\{[\w-]+\}|[^{};\s@])(?:@\{[\w-]+\}|\((?:[^(){}]|\([^(){}]*\))*\)|[^(){};@\s]|\s+(?!\s))*?(?=\s*\{)/,inside:{variable:/@+[\w-]+/}},property:/(?:@\{[\w-]+\}|[\w-])+(?:\+_?)?(?=\s*:)/,operator:/[/*+-]/}),"property",{variable:[{pattern:/@[\w-]+\s*:/,inside:{punctuation:/:/}},/@@?[\w-]+/],"mixin-usage":{pattern:/([{;]\s*)[.#](?!\d)[\w-].*?(?=[(;])/,lookbehind:!0,alias:"function"}});$e.objc=$e.objectivec=Kr("c",{string:{pattern:/@?"(?:\\[^]|[^\\\n"])*"/g,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int?|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|==?|>>?=?|<<?=?|&&?|\|\|?|[~^@%?/*]/});delete $e.objc["class-name"];var _k={pattern:/^(..)[^]+(?=.)/,lookbehind:!0},dd="(?:([^a-zA-Z\\d\\s{(\\[<=])(?:\\\\[\\s\\S]|(?!\\1)[^\\\\])*\\1|\\((?:\\\\[\\s\\S]|[^\\\\()]|\\((?:\\\\[\\s\\S]|[^\\\\()])*\\))*\\)|\\{(?:\\\\[\\s\\S]|[^\\\\{}]|\\{(?:\\\\[\\s\\S]|[^\\\\{}])*\\})*\\}|\\[(?:\\\\[\\s\\S]|[^\\\\[\\]]|\\[(?:\\\\[\\s\\S]|[^\\\\[\\]])*\\])*\\]|<(?:\\\\[\\s\\S]|[^\\\\<>]|<(?:\\\\[\\s\\S]|[^\\\\<>])*>)*>)",z0=`(?:"(?:\\\\.|[^\\\\
"])*"|(?:\\b(?!\\d)\\w+|[^\\s\0-\\x7f]+)[?!]?|\\$.)`,Jr={pattern:/((?:^|[^\\])(?:\\\\)*)#\{(?:[^{}]|\{[^}]*\})*\}/,lookbehind:!0,inside:{content:_k,delimiter:{pattern:/.+/,alias:"punctuation"}}};_k.inside=$e.rb=$e.ruby={comment:{pattern:/#.*|^=begin\s[^]*?^=end/mg,greedy:!0},"string-literal":[{pattern:RegExp("%[qQiIwWs]?"+dd,"g"),greedy:!0,inside:{interpolation:Jr,string:/[^]+/}},{pattern:/(["'])(?:#\{[^}]+\}|#(?!\{)|\\[^]|(?!\1)[^\\#\n])*\1/g,greedy:!0,inside:{interpolation:Jr,string:/[^]+/}},{pattern:/<<[-~]?([a-z_]\w*)\n(?:.*\n)*?[ 	]*\1/gi,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?[a-z_]\w*|\b[a-z_]\w*$/i,inside:{symbol:/\w+/,punctuation:/^<<[-~]?/}},interpolation:Jr,string:/[^]+/}},{pattern:/<<[-~]?'([a-z_]\w*)'\n(?:.*\n)*?[ 	]*\1/gi,alias:"heredoc-string",greedy:!0,inside:{delimiter:{pattern:/^<<[-~]?'[a-z_]\w*'|\b[a-z_]\w*$/i,inside:{symbol:/\w+/,punctuation:/^<<[-~]?'|'$/}},string:/[^]+/}}],"command-literal":[{pattern:RegExp("%x"+dd,"g"),greedy:!0,inside:{interpolation:Jr,command:{pattern:/[^]+/,alias:"string"}}},{pattern:/`(?:#\{[^}]+\}|#(?!\{)|\\[^]|[^\\`#\n])*`/g,greedy:!0,inside:{interpolation:Jr,command:{pattern:/[^]+/,alias:"string"}}}],"class-name":{pattern:/(\b(?:class|module)\s+|\bcatch\s+\()[\w.\\]+|\b[A-Z_]\w*(?=\s*\.\s*new\b)/,lookbehind:!0,inside:{punctuation:/[.\\]/}},"regex-literal":[{pattern:RegExp(`%r${dd}[egimnosux]{0,6}`,"g"),greedy:!0,inside:{interpolation:Jr,regex:/[^]+/}},{pattern:/(^|[^/])\/(?!\/)(?:\[[^\n\]]+\]|\\.|[^\\\n/[])+\/[egimnosux]{0,6}(?=\s*(?:$|[\n,.;})#]))/g,lookbehind:!0,greedy:!0,inside:{interpolation:Jr,regex:/[^]+/}}],variable:/[@$]+(?!\d)\w+(?:[?!]|\b)/,symbol:[{pattern:RegExp("(^|[^:]):"+z0,"g"),lookbehind:!0,greedy:!0},{pattern:RegExp(`([
{(,][ 	]*)`+z0+"(?=:(?!:))","g"),lookbehind:!0,greedy:!0}],"method-definition":{pattern:/(\bdef\s+)\w+(?:\s*\.\s*\w+)?/,lookbehind:!0,inside:{function:/\b\w+$/,keyword:/^self\b/,"class-name":/^\w+/,punctuation:/\./}},keyword:/\b(?:BEGIN|END|alias|and|begin|break|case|class|def|define_method|defined|do|each|else|elsif|end|ensure|extend|f?or|if|in|include|module|new|next|nil|not|prepend|private|protected|public|raise|redo|require|rescue|retry|return|self|super|[tw]hen|throw|undef|unless|until|while|yield)\b/,boolean:mn,builtin:/\b(?:Array|Bignum|Binding|Class|Continuation|Dir|Exception|FalseClass|File|Fixnum|Float|Hash|IO|Integer|MatchData|Method|Module|NilClass|Numeric|Object|Proc|Range|Regexp|Stat|String|Struct|Symbol|TMS|Thread|ThreadGroup|Time|TrueClass)\b/,constant:/\b[A-Z][A-Z\d_]*(?:[?!]|\b)/,number:gk,"double-colon":{pattern:/::/,alias:"punctuation"},operator:/\.{2,3}|&\.|===|<?=>|[!=]?~|(?:&&|\|\||<<|>>|\*\*|[%&|^!=<>/*+-])=?|[?:]/,punctuation:/[()[\]{}.,;]/};$e.sql={comment:/\/\*[^]*?\*\/|(?:--|\/\/|#).*/,variable:[{pattern:/@(["'`])(?:\\[^]|(?!\1)[^\\])+\1/g,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])(["'])(?:\\[^]|(?!\2)[^\\]|\2\2)*\2/g,lookbehind:!0,greedy:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[^]|[^\\`]|``)*`/g,lookbehind:!0,greedy:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:avg|count|first|format|last|[lu]case|len|max|mi[dn]|mod|now|round|sum)(?=\s*\()/i,keyword:/\b(?:action|add|after|algorithm|alter|analyze|any|apply|asc?|authorization|auto_increment|backup|bdb|begin|berkeleydb|bigint|binary|bit|blob|bool|boolean|break|browse|[br]tree|bulk|by|c?all|cascaded?|case|chain|character|charset|check(?:point)?|close|clustered|coalesce|collate|columns?|comment|commit(?:ted)?|compute|connect|consistent|constraint|contains(?:table)?|continue|convert|create|cross|current(?:_date|_time|_timestamp|_user)?|cursor|cycle|data(?:bases?)?|date(?:time)?|day|dbcc|deallocate|dec|decimal|declare|default|definer|delayed|delete|delimiters?|deny|desc|describe|deterministic|disable|discard|disk|distinct|distinctrow|distributed|do|double|drop|dummy|dump(?:file)?|duplicate|else(?:if)?|enable|enclosed|end|engine|enum|errlvl|errors|escaped?|except|exec(?:ute)?|exists|exit|explain|extended|fetch|fields|file|fillfactor|first|fixed|float|following|for each row|for|force|foreign|freetexttable|freetext|from|full|function|geometry(?:collection)?|global|goto|grant|group|handler|hash|having|holdlock|hour|identity(?:col|_insert)?|if|ignore|import|index|infile|inner|innodb|inout|insert|integer|intersect|interval|into?|invoker|isolation|iterate|join|keys?|kill|language|last|leave|left|level|limit|lineno|lines|linestring|load|local|lock|long(?:blob|text)|loop|matched|match|(?:medium|tiny)(?:blob|int|text)|merge|middleint|minute|mode|modifies|modify|month|multi(?:linestring|point|polygon)|national|natural|n?char|next|no|nonclustered|nullif|numeric|off?|offsets?|on|open(?:datasource|query|rowset)?|optimize|option(?:ally)?|order|out(?:er|file)?|over|partial|partition|percent|pivot|plan|point|polygon|preceding|precision|prepare|prev|primary|print|privileges|proc(?:edure)?|public|purge|quick|raiserror|reads?|real|reconfigure|references|release|rename|repeat(?:able)?|replace|replication|require|resignal|restore|restrict|returning|returns?|revoke|right|rollback|routine|row(?:count|guidcol|s)?|rule|savepoint|save|schema|second|select|serializable|serial|session_user|session|setuser|set|share|show|shutdown|simple|smallint|snapshot|some|soname|sql|start(?:ing)?|statistics|status|striped|system_user|tables?|tablespace|temp(?:orary|table)?|terminated|textsize|text|[tw]hen|timestamp|time|top?|transactions?|tran|trigger|truncate|tsequal|types?|unbounded|uncommitted|undefined|union|unique|unlock|unpivot|unsigned|updatetext|update|usage|user?|using|values?|var(?:binary|char|character|ying)|view|waitfor|warnings|where|while|with(?: rollup|in)?|work|writetext|write|year)\b/i,boolean:/\b(?:false|true|null)\b/i,number:/\b0x[a-f\d]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[=%~^/*+-]|&&?|\|\|?|!=?|<<|<=?>?|>[>=]?|\b(?:and|between|div|[ir]?like|in|is|not|x?or|regexp|sounds like)\b/i,punctuation:/[()[\].,;`]/};$e.wasm={comment:/\(;[^]*?;\)|;;.*/,string:{pattern:/"(?:\\[^]|[^\\"])*"/g,greedy:!0},keyword:[{pattern:/\b(?:align|offset)=/,inside:{operator:/=/}},{pattern:/\b(?:(?:[fi]32|[fi]64)(?:\.(?:abs|a[dn]d|ceil|clz|const|convert_[su]\/i(?:32|64)|copysign|ctz|demote\/f64|div(?:_[su])?|eqz?|extend_[su]\/i32|floor|ge(?:_[su])?|gt(?:_[su])?|le(?:_[su])?|load(?:(?:8|16|32)_[su])?|lt(?:_[su])?|max|min|mul|neg?|nearest|popcnt|promote\/f32|reinterpret\/[fi](?:32|64)|rem_[su]|rot[lr]|shl|shr_[su]|sqrt|store(?:8|16|32)?|sub|trunc(?:_[su]\/f(?:32|64))?|wrap\/i64|x?or))?|memory\.(?:grow|size))\b/,inside:{punctuation:/\./}},/\b(?:anyfunc|block|br(?:_if|_table)?|call(?:_indirect)?|data|drop|elem|else|end|export|func|get_(?:global|local)|global|if|import|local|loop|memory|module|mut|nop|offset|param|result|return|select|set_(?:global|local)|start|table|tee_local|then|type|unreachable)\b/],variable:/\$[\w!#$%&'*./:<=>?@\\^`|~+-]+/,number:/[+-]?\b(?:\d(?:_?\d)*(?:\.\d(?:_?\d)*)?(?:[eE][+-]?\d(?:_?\d)*)?|0x[a-fA-F\d](?:_?[a-fA-F\d])*(?:\.[a-fA-F\d](?:_?[\da-fA-D])*)?(?:[pP][+-]?\d(?:_?\d)*)?)\b|\binf\b|\bnan(?::0x[a-fA-F\d](?:_?[\da-fA-D])*)?\b/,punctuation:/[()]/};var Ro=(s,l)=>{for(var c=0;c<l;c++)s=s.replace(/<self>/g,`(?:${s})`);return s.replace(/<self>/g,"[]")},Kt=(s,l)=>s.replace(/<(\d+)>/g,(c,d)=>`(?:${l[+d]})`),Ge=(s,l,c)=>RegExp(Kt(s,l),c),Sf=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,go=$e.cpp=Kr("c",{"class-name":[{pattern:RegExp(`(\\b(?:class|concept|enum|struct|typename)\\s+)(?!${Sf.source})\\w+`),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[a-z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:Sf,number:{pattern:/(?:\b0b[01']+|\b0x(?:[a-f\d']+(?:\.[a-f\d']*)?|\.[a-f\d']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/gi,greedy:!0},operator:/->|--|\+\+|&&|\|\||[?:~]|<=>|>>=?|<<=?|[%&|^!=<>/*+-]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|x?or|x?or_eq)\b/,boolean:mn});yt(go,"string",{module:{pattern:Ge(`(\\b(?:import|module)\\s+)(?:"(?:\\\\[\\s\\S]|[^\\\\
"])*"|<[^<>
]*>|<0>(?:\\s*:\\s*<0>)?|:\\s*<0>)`,[`\\b(?!${Sf.source})\\w+(?:\\s*\\.\\s*\\w+)*\\b`],"g"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][^]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([^]*?\)\1"/g,greedy:!0,alias:"string"}});yt(go,"keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[^]+/,alias:"class-name",inside:go}}}});yt(go,"operator",{"double-colon":{pattern:/::/,alias:"punctuation"}});var wk=Object.assign({},go);yt(go,"class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/g,lookbehind:!0,greedy:!0,inside:wk}});yt(wk,"double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i});$e.go={comment:Wr(),char:{pattern:/'(?:\\.|[^\\\n']){0,10}'/g,greedy:!0},string:{pattern:/(^|[^\\])"(?:\\.|[^\\\n"])*"|`[^`]*`/g,lookbehind:!0,greedy:!0},keyword:/\b(?:break|case|chan|const|continue|default|defer|else|fallthrough|for|func|go(?:to)?|if|import|interface|map|package|range|return|select|struct|switch|type|var)\b/,boolean:/\b(?:_|false|true|iota|nil)\b/,function:/\b\w+(?=\()/,number:[/\b0(?:b[01_]+|o[0-7_]+)i?\b/i,/\b0x(?:[a-f\d_]+(?:\.[a-f\d_]*)?|\.[a-f\d_]+)(?:p[+-]?\d+(?:_\d+)*)?i?(?!\w)/i,/(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?[\d_]+)?i?(?!\w)/i],operator:/--|\+\+|&&|\|\||&\^=?|<-|<<=?|>>=?|[%&|^!=<>/*+-]=?|:=|\.{3}/,punctuation:Lo,builtin:/\b(?:append|bool|byte|cap|close|complex|complex(?:64|128)|copy|delete|error|float(?:32|64)|u?int(?:8|16|32|64)?|imag|len|make|new|panic|print(?:ln)?|real|recover|rune|string|uintptr)\b/};var fd={};$e.js=$e.javascript=Object.assign(fd,{"doc-comment":{pattern:/\/\*\*(?!\/)[^]*?(?:\*\/|$)/g,greedy:!0,alias:"comment",inside:"jsdoc"},comment:Wr(),hashbang:{pattern:/^#!.*/g,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[^]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})*\}|(?!\$\{)[^\\`])*`/g,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\\\)*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})*\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},[Fn]:fd}},string:/[^]+/}},"string-property":{pattern:/((?:^|[,{])[ 	]*)(["'])(?:\\[^]|(?!\2)[^\\\n])*\2(?=\s*:)/mg,lookbehind:!0,greedy:!0,alias:"property"},string:_p(),regex:{pattern:/((?:^|[^$\w\xa0-\uffff"'`.)\]\s]|\b(?:return|yield))\s*)\/(?:(?:\[(?:\\.|[^\\\n\]])*\]|\\.|[^\\\n/[])+\/[dgimyus]{0,7}|(?:\[(?:\\.|[^\\\n[\]]|\[(?:\\.|[^\\\n[\]]|\[(?:\\.|[^\\\n[\]])*\])*\])*\]|\\.|[^\\\n/[])+\/[dgimyus]{0,7}v[dgimyus]{0,7})(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?!\/\*|[^()[\]{}.,:;?`\n%&|^!=<>/*+-]))/g,lookbehind:!0,greedy:!0,inside:{"regex-flags":/\w+$/,"regex-delimiter":/^\/|\/$/,"regex-source":{pattern:/.+/,alias:"language-regex",inside:"regex"}}},"class-name":[{pattern:/(\b(?:class|extends|implements|instanceof|interface|new)\s+)(?!\d)(?:(?!\s)[$\w.\xa0-\uffff])+/,lookbehind:!0,inside:{punctuation:/\./}},{pattern:/(^|[^$\w\xa0-\uffff]|\s)(?![a-z\d])(?:(?!\s)[$\w\xa0-\uffff])+(?=\.(?:constructor|prototype)\b)/,lookbehind:!0}],"function-variable":{pattern:/#?(?!\d)(?:(?!\s)[$\w\xa0-\uffff])+(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^)]*\))*\)|(?!\d)(?:(?!\s)[$\w\xa0-\uffff])+)\s*=>))/,alias:"function",inside:{"maybe-class-name":/^[A-Z].*/}},parameter:[/(function(?:\s+(?!\d)(?:(?!\s)[$\w\xa0-\uffff])+)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,/(^|[^$\w\xa0-\uffff]|\s)(?!\d)(?:(?!\s)[$\w\xa0-\uffff])+(?=\s*=>)/,/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|continue|default|do|else|finally|for|if|return|switch|throw|try|while|yield|class|const|debugger|delete|enum|extends|function|[gs]et|export|from|import|implements|in|instanceof|interface|let|new|null|of|package|private|protected|public|static|super|this|typeof|undefined|var|void|with)(?![$\w\xa0-\uffff]))(?:(?!\d)(?:(?!\s)[$\w\xa0-\uffff])+\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/].map(s=>({pattern:s,lookbehind:!0,inside:fd})),constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/,keyword:[{pattern:/(^|[^.]|\.{3}\s*)\b(?:as|assert(?=\s*\{)|export|from(?!\s*[^\s"'])|import)\b/,alias:"module",lookbehind:!0},{pattern:/(^|[^.]|\.{3}\s*)\b(?:await|break|case|catch|continue|default|do|else|finally|for|if|return|switch|throw|try|while|yield)\b/,alias:"control-flow",lookbehind:!0},{pattern:/(^|[^.]|\.{3}\s*)\b(?:async(?!\s*[^\s($\w\xa0-\uffff])|class|const|debugger|delete|enum|extends|function|[gs]et(?!\s*[^\s#[$\w\xa0-\uffff])|implements|in|instanceof|interface|let|new|null|of|package|private|protected|public|static|super|this|typeof|undefined|var|void|with)\b/,lookbehind:!0}],boolean:mn,function:{pattern:/#?(?!\d)(?:(?!\s)[$\w\xa0-\uffff])+(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,inside:{"maybe-class-name":/^[A-Z].*/}},number:{pattern:/(^|[^$\w])(?:NaN|Infinity|0[bB][01]+(?:_[01]+)*n?|0[oO][0-7]+(?:_[0-7]+)*n?|0[xX][a-fA-F\d]+(?:_[a-fA-F\d]+)*n?|\d+(?:_\d+)*n|(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?)(?![$\w])/,lookbehind:!0},"literal-property":{pattern:/([\n,{][ 	]*)(?!\d)(?:(?!\s)[$\w\xa0-\uffff])+(?=\s*:)/,lookbehind:!0,alias:"property"},operator:[{pattern:/=>/,alias:"arrow"},/--|\+\+|(?:\*\*|&&|\|\||[!=]=|>>>?|<<|[%&|^!=<>/*+-]|\?\?)=?|\.{3}|\?(?!\.)|~|:/],"property-access":{pattern:/(\.\s*)#?(?!\d)(?:(?!\s)[$\w\xa0-\uffff])+/,lookbehind:!0,inside:{"maybe-class-name":/^[A-Z].*/}},"maybe-class-name":{pattern:/(^|[^$\w\xa0-\uffff])[A-Z][$\w\xa0-\uffff]+/,lookbehind:!0},punctuation:/\?\.|[()[\]{}.,:;]/});var Zme=s=>(l,c)=>{for(var d=ip(s),f="",g=[],v=0,b=Lu(l,c),$=0,y=b.length,W=0;$<y;){var x=b[$++],C=x.length,E=x.type;E&&E.slice(0,6)!="ignore"?(g[v++]=[W,x],f+=" ".repeat(C)):f+=l.slice(W,W+C),W+=C}var N=0,W=0,q=re=>{for(var se=0;N<v&&se<re.length;se++){var de=re[se],he=de.content;if(Array.isArray(he))q(he);else{for(var ge=de.length,Se=[],Ae,Re,Be=0,Ke=W;[Ae,Re]=g[N],Ae>=W&&Ae<W+ge&&(Ke<Ae&&(Se[Be++]=f.slice(Ke,Ae)),Ke=Ae+Re.length,Se[Be++]=Re,++N!=v););W+=ge,Be&&(Ke<W&&(Se[Be++]=f.slice(Ke,W)),he?de.content=Se:(re.splice(se,1,...Se),se+=Be-1))}}},Y=d?lp(f,d):[f];return q(Y),Y},Ck=$e.js,wp=Ck["template-string"],Xme=wp.pattern.source,Jme=wp.inside.interpolation.pattern,za=(s,l)=>({pattern:RegExp("((?:"+l+")\\s*)"+Xme,"g"),lookbehind:!0,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},["language-"+s]:{pattern:/[^]+/,inside:{interpolation:{pattern:Jme,lookbehind:!0,alias:"language-javascript",inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},[Fn]:"js"}},[pa]:Zme(s)}}}});Ck["template-string"]=[za("css","\\b(?:styled(?:\\([^)]*\\))?(?:\\s*\\.\\s*\\w+(?:\\([^)]*\\))*)*|css(?:\\s*\\.\\s*(?:global|resolve))?|createGlobalStyle|keyframes)"),za("html","\\bhtml|\\.\\s*(?:inner|outer)HTML\\s*\\+?="),za("svg","\\bsvg"),za("markdown","\\b(?:markdown|md)"),za("graphql","\\b(?:gql|graphql(?:\\s*\\.\\s*experimental)?)"),za("sql","\\bsql"),wp];var Vl="\\s|//.*(?!.)|/\\*(?:[^*]|\\*(?!/))*\\*/",xf="\\{(?:[^{}]|\\{(?:[^{}]|\\{[^}]*\\})*\\})*\\}",V0=Kt("\\{<0>*\\.{3}(?:[^{}]|<1>)*\\}",[Vl,xf]),H0=s=>s&&(!s.type||s.type=="plain-text"),Qme=(s,l,c)=>{for(var d=0,f=[],g=0;d<s.length;d++){var v=s[d],b=v.length,$=v.type,y=!$,x,C,E,N,W;$&&(W=v.content,$=="tag"?(E=W[0].length,C=W[2]?l.substr(c+E,W[1].length):"",E>1?g&&f[g-1][0]==C&&g--:W[W.length-1].length<2&&(f[g++]=[C,0])):g&&$=="punctuation"?(x=f[g-1],W=="{"?x[1]++:x[1]&&W=="}"?x[1]--:y=!"}()[]".includes(W)):y=!0),y&&g&&!f[g-1][1]&&(E=c,H0(s[d+1])&&(b+=s[d+1].length,s.splice(d+1,1)),H0(s[d-1])&&(E-=s[--d].length,s.splice(d,1)),N=l.slice(E,c+b),s[d]=new qa("plain-text",N,N)),c+=b}return s},kk=(s,l)=>{yt($e[l]=s=yp(s),"regex",{tag:{pattern:Ge(`</?(?:(?!\\d)[^\\s/=><%]+(?:<0>(?:<0>*(?:[^\\s<>/={*]+(?:<0>*=<0>*(?!\\s)(?:"[^"]*"|'[^']*'|<1>)?|(?=[\\s/>]))|<2>))+)?<0>*/?)?>`,[Vl,xf,V0],"g"),greedy:!0,inside:{punctuation:/^<\/?|\/?>$/,tag:{pattern:/^[^\s/]+/,inside:{namespace:/^[^:]+:/,"class-name":/^[A-Z]\w*(?:\.[A-Z]\w*)*$/}},script:{pattern:Ge("(=<0>*)<1>",[Vl,xf]),lookbehind:!0,alias:l="language-"+l,inside:s},spread:{pattern:RegExp(V0),alias:l,inside:s},"attr-value":{pattern:Ge(`(=<0>*)(?:"[^"]*"|'[^']*')`,[Vl]),lookbehind:!0,inside:{punctuation:/^["']|["']$/}},comment:s.comment,"attr-equals":/=/,"attr-name":{pattern:/\S+/,inside:{namespace:/^[^:]+:/}}}}}),s[pa]=(c,d)=>Qme(Lu(c,d),c,0)};kk($e.js,"jsx");$e.lua={comment:/^#!.+|--(?:\[(=*)\[[^]*?\]\1\]|.*)/m,string:{pattern:/(["'])(?:(?!\1)[^\\\n]|\\z\s|\\[^z])*\1|\[(=*)\[[^]*?\]\2\]/g,greedy:!0},number:/\b0x[a-f\d]+(?:\.[a-f\d]*)?(?:p[+-]?\d+)?\b|\b\d+(?:\.\B|(?:\.\d*)?(?:e[+-]?\d+)?\b)|\B\.\d+(?:e[+-]?\d+)?\b/i,keyword:/\b(?:and|break|do|else|elseif|end|false|true|f?or|function|goto|if|in|local|nil|not|repeat|return|then|until|while)\b/,function:/(?!\d)\w+(?=\s*(?:[({]))/,operator:{pattern:/[%&|^#*+-]|\/\/?|<[<=]?|>[>=]?|[=~]=?|(^|[^.])\.\.(?!\.)/,lookbehind:!0},punctuation:/[()[\]{},;]|\.+|:+/};var Al="(?:\\((?:\\\\[\\s\\S]|[^\\\\()])*\\)|\\{(?:\\\\[\\s\\S]|[^\\\\{}])*\\}|\\[(?:\\\\[\\s\\S]|[^\\\\[\\]])*\\]|<(?:\\\\[\\s\\S]|[^\\\\<>])*>)",U0="(?![a-zA-Zd])\\s*(?:([^a-zA-Zd\\s{([<])(?:\\\\[^]|(?!\\1)[^\\\\])*\\1|([a-zA-Zd])(?:\\\\[^]|(?!\\2)[^\\\\])*\\2";$e.perl={comment:[{pattern:/(^\s*)=\w[^]*?=cut.*/mg,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\$])#.*/g,lookbehind:!0,greedy:!0}],string:{pattern:RegExp(`\\bq[qwx]?${U0}|${Al})|("|\`)(?:\\\\[^]|(?!\\3)[^\\\\])*\\3|'(?:\\\\.|[^\\\\
'])*'`,"g"),greedy:!0},regex:[{pattern:RegExp(`\\b(?:m|qr)${U0}|${Al})[msixpodualngc]*`,"g"),greedy:!0},{pattern:RegExp(`(^|[^-])\\b(?:s|tr|y)(?![a-zA-Zd])\\s*(?:([^a-zA-Zd\\s{([<])(?:\\\\[^]|(?!\\2)[^\\\\])*\\2(?:\\\\[^]|(?!\\2)[^\\\\])*\\2|([a-zA-Zd])(?:\\\\[^]|(?!\\3)[^\\\\])*\\3(?:\\\\[^]|(?!\\3)[^\\\\])*\\3|${Al}\\s*${Al})[msixpodualngcer]*`,"g"),lookbehind:!0,greedy:!0},{pattern:/\/(?:\\.|[^\\\n/])*\/[msixpodualngc]*(?=\s*(?:$|[\n,.;})&|*~<>!?^+-]|(?:and|cmp|eq|[gl][et]|ne|not|x|x?or)\b))/g,greedy:!0}],variable:/[&*$@%](?:\{\^[A-Z]+\}|\^[A-Z_]|#?(?=\{)|#?(?:(?:::)*'?(?!\d)[$\w]+(?![$\w]))+(?:::)*|\d+)|(?!%=)[$@%][!"#$%&'*,./:;<=>?@()[\]{}||^_`|~+-]/,filehandle:{pattern:/<(?![<=])\S*?>|\b_\b/,alias:"symbol"},"v-string":{pattern:/v\d+(?:\.\d+)*|\d+(?:\.\d+){2,}/,alias:"string"},function:{pattern:/(\bsub[ 	]+)\w+/,lookbehind:!0},keyword:/\b(?:any|break|continue|default|delete|die|do|else|elsif|eval|for|foreach|given|goto|if|last|local|my|next|our|package|print|redo|require|return|say|state|sub|switch|undef|unless|until|use|when|while)\b/,number:/\b(?:0x[a-fA-F\d](?:_?[a-fA-F\d])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)\b/,operator:/-[rwxoRWXOezsfdlpSbctugkTBMAC]\b|->|=>|=~|~~|<=>?|!~|--|\+\+|(?:\*\*|\/\/|&&|\|\||<<|>>|[~%&|^!=<>/*+-])=?|\.(?:=|\.\.?)?|[\\?]|\bx(?:=|\b)|\b(?:and|cmp|eq|[gl][et]|ne|not|x?or)\b/,punctuation:/[()[\]{},:;]/};var K0={"format-spec":{pattern:/(:)[^(){}:]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"}};K0[Fn]=$e.py=$e.python={comment:{pattern:/#.*/g,greedy:!0},"string-interpolation":{pattern:/(?:fr?|rf)(?:("""|''')[^]*?\1|(["'])(?:\\[^]|(?!\2)[^\\\n])*\2)/gi,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})*\}/,lookbehind:!0,inside:K0},string:/[^]+/}},"triple-quoted-string":{pattern:/(?:br?|rb?|u)?("""|''')[^]*?\1/gi,greedy:!0,alias:"string"},string:{pattern:/(?:br?|rb?|u)?(["'])(?:\\[^]|(?!\1)[^\\\n])*\1/gi,greedy:!0},function:{pattern:/((?:^|\s)def[ 	]+)(?!\d)\w+(?=\s*\()/,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[ 	]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:"annotation punctuation",inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|de[fl]|elif|else|except|exec|finally|f?or|from|global|i[fns]|import|lambda|match|nonlocal|not|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|ma[px]|memoryview|min|next|object|oct|open|ord|pow|property|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|x?range|zip)\b/,boolean:/\b(?:False|True|None)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f\d])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/!=|:=|\*\*=?|\/\/=?|<>|>>|<<|[%=<>/*+-]=?|[&|^~]/,punctuation:Lo};var ehe=Ro("/\\*(?:[^*/]|\\*(?!/)|/(?!\\*)|<self>)*\\*/",2),W0={pattern:/b?"(?:\\[^]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/g,greedy:!0},G0={"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"}};G0[Fn]=$e.rust={comment:{pattern:RegExp("//.*|"+ehe,"g"),greedy:!0},string:W0,char:{pattern:/b?'(?:\\(?:x[0-7][a-fA-F\d]|u\{(?:[a-fA-F\d]_*){1,6}\}|.)|[^\\\n	'])'/g,greedy:!0},attribute:{pattern:/#!?\[(?:[^[\]"]|"(?:\\[^]|[^\\"])*")*\]/g,greedy:!0,alias:"attr-name",inside:{string:W0}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/g,lookbehind:!0,greedy:!0,inside:G0},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield|bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/,function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[a-fA-F\d](?:_?[a-fA-F\d])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:mn,punctuation:/->|\.\.=|\.{1,3}|::|[()[\]{},:;]/,operator:/&&|\|\||=>|>>=?|<<=?|[%&|^!=<>/*+-]=?|[@?]/};var q0=$e.swift={comment:{pattern:/\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\//g,greedy:!0},"string-literal":[{pattern:/(^|[^"#])(?:"(?:\\(?:\((?:[^()]|\([^)]*\))*\)|[^(])|[^\\\n"])*"|"""(?:\\(?:\((?:[^()]|\([^)]*\))*\)|[^(])|[^\\"]|"(?!""))*""")(?!["#])/g,lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))+(?=\))/,lookbehind:!0},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=\n)/,string:/[^]+/}},{pattern:/(^|[^"#])(#+)(?:"(?:\\(?:#+\((?:[^()]|\([^)]*\))*\)|[^#])|[^\\\n])*?"|"""(?:\\(?:#+\((?:[^()]|\([^)]*\))*\)|[^#])|[^\\])*?""")\2/g,lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))+(?=\))/,lookbehind:!0},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[^]+/}}],directive:{pattern:/#(?:(?:elseif|if)\b(?:[ 	]*(?:![ 	]*)?(?:\b\w+\b(?:[ 	]*\((?:[^()]|\([^)]*\))*\))?|\((?:[^()]|\([^)]*\))*\))(?:[ 	]*(?:&&|\|\|))?)+|(?:else|endif)\b)/,alias:"property",inside:{"directive-name":/^#\w+/,boolean:mn,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b(?!\d)\w+(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|[Pp]rotocol|[Ss]elf|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|[gs]et|guard|higherThan|i[fns]|import|indirect|infix|init|inout|internal|isolated|lazy|lef?t|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|public|repeat|required|rethrows|return|right|safe|some|static|struct|subscript|super|switch|throws?|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:mn,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f\d_]+(?:\.[a-f\dp_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[~?%&|^!=<>/*+-]+|\.[.~?%&|^!=<>/*+-]+/,punctuation:/[()[\]{}.,:;\\]/};q0["string-literal"].forEach(s=>{s.inside.interpolation.inside=q0});$e.clike={comment:Wr(),string:_p(),"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:mn,function:/\b\w+(?=\()/,number:gk,operator:/[!=]==|[!=<>]=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:Lo};var Vu=s=>`\\b(?:${s})\\b`,$k="bool|char|decimal|double|dynamic|float|object|s?byte|string|u?int|u?long|u?short|var|void",Hu="class|enum|interface|record|struct",Sk="add|alias|and|ascending|async|await|by|descending|from(?!\\s*[^\\s\\w])|[gls]et|global|group|into|init(?=\\s*;)|join|nameof|not|notnull|on|or|orderby|partial|remove|select|unmanaged|value|when|where|with(?=\\s*{)",Cp="abstract|as|[bc]ase|break|catch|checked|const|continue|default|delegate|do|else|event|explicit|extern|finally|fixed|for|foreach|goto|i[fns]|implicit|internal|lock|namespace|new|null|operator|out|override|params|private|protected|public|readonly|ref|return|sealed|sizeof|stackalloc|static|switch|this|throw|try|typeof|unchecked|unsafe|using|virtual|volatile|while|yield",xk=Vu(Hu),$s=RegExp(Vu($k+"|"+Hu+"|"+Sk+"|"+Cp)),the=Vu(Hu+"|"+Sk+"|"+Cp),nhe=Vu($k+"|"+Hu+"|"+Cp),Ss=Ro("<(?:[^<>;=*/%&|^+-]|<self>)*>",2),Hl=Ro("\\((?:[^()]|<self>)*\\)",2),Yn="@?\\b(?!\\d)\\w+\\b",xs=Kt("<0>(?:\\s*<1>)?",[Yn,Ss]),Ca=Kt("(?!<0>)<1>(?:\\s*\\.\\s*<1>)*",[the,xs]),kp="\\[\\s*(?:,\\s*)*\\]",rhe=Kt("<0>(?:\\s*(?:\\?\\s*)?<1>)*(?:\\s*\\?)?",[Ca,kp]),ahe=Kt("[^()[\\],;%&|^=<>/*+-]|<0>|<1>|<2>",[Ss,Hl,kp]),ohe=Kt("\\(<0>+(?:,<0>+)+\\)",[ahe]),Za=Kt("(?:<0>|<1>)(?:\\s*(?:\\?\\s*)?<2>)*(?:\\s*\\?)?",[ohe,Ca,kp]),jn={keyword:$s,punctuation:/[()[\].,:<>?]/},Ok=`'(?:\\\\.|[^
'\\\\]|\\\\[Uux][a-fA-F\\d]{1,8})'`,Ek=`"(?:\\\\.|[^\\\\
"])*"`,ihe='@"(?:""|\\\\[\\s\\S]|[^\\\\"])*"(?!")',jr=$e.dotnet=$e.cs=$e.csharp=Kr("clike",{string:[{pattern:Ge("(^|[^$\\\\])<0>",[ihe],"g"),lookbehind:!0,greedy:!0},{pattern:Ge("(^|[^@$\\\\])<0>",[Ek],"g"),lookbehind:!0,greedy:!0}],"class-name":[{pattern:Ge("(\\busing\\s+static\\s+)<0>(?=\\s*;)",[Ca]),lookbehind:!0,inside:jn},{pattern:Ge("(\\busing\\s+<0>\\s*=\\s*)<1>(?=\\s*;)",[Yn,Za]),lookbehind:!0,inside:jn},{pattern:Ge("(\\busing\\s+)<0>(?=\\s*=)",[Yn]),lookbehind:!0},{pattern:Ge("(\\b<0>\\s+)<1>",[xk,xs]),lookbehind:!0,inside:jn},{pattern:Ge("(\\bcatch\\s*\\(\\s*)<0>",[Ca]),lookbehind:!0,inside:jn},{pattern:Ge("(\\bwhere\\s+)<0>",[Yn]),lookbehind:!0},{pattern:Ge("(\\b(?:is(?:\\s+not)?|as)\\s+)<0>",[rhe]),lookbehind:!0,inside:jn},{pattern:Ge("\\b<0>(?=\\s+(?!<1>|with\\s*\\{)<2>(?:\\s*[=,:;{)\\]]|\\s+(?:in|when)\\b))",[Za,nhe,Yn]),inside:jn}],keyword:$s,number:/(?:\b0(?:x[a-f\d_]*[a-f\d]|b[01_]*[01])|(?:\B\.\d+(?:_+\d+)*|\b\d+(?:_+\d+)*(?:\.\d+(?:_+\d+)*)?)(?:e[+-]?\d+(?:_+\d+)*)?)(?:[dflmu]|lu|ul)?\b/i,operator:/[=-]>|([&|+-])\1|~|\?\?=?|>>=?|<<=?|[%&|^!=<>/*+-]=?/,punctuation:/\?\.?|::|[()[\]{}.,:;]/});yt(jr,"number",{range:{pattern:/\.\./,alias:"operator"}});yt(jr,"punctuation",{"named-parameter":{pattern:Ge("([(,]\\s*)<0>(?=\\s*:)",[Yn]),lookbehind:!0,alias:"punctuation"}});yt(jr,"class-name",{namespace:{pattern:Ge("(\\b(?:namespace|using)\\s+)<0>(?:\\s*\\.\\s*<0>)*(?=\\s*[;{])",[Yn]),lookbehind:!0,inside:{punctuation:/\./}},"type-expression":{pattern:Ge("(\\b(?:default|sizeof|typeof)\\s*\\(\\s*(?!\\s))(?:[^()\\s]|\\s(?!\\s)|<0>)+(?=\\s*\\))",[Hl]),lookbehind:!0,alias:"class-name",inside:jn},"return-type":{pattern:Ge("<0>(?=\\s+(?:<1>\\s*(?:=>|[({]|\\.\\s*this\\s*\\[)|this\\s*\\[))",[Za,Ca]),alias:"class-name",inside:jn},"constructor-invocation":{pattern:Ge("(\\bnew\\s+)<0>(?=\\s*[[({])",[Za]),lookbehind:!0,alias:"class-name",inside:jn},"generic-method":{pattern:Ge("<0>\\s*<1>(?=\\s*\\()",[Yn,Ss]),inside:{function:Ge("^<0>",[Yn]),generic:{pattern:RegExp(Ss),alias:"class-name",inside:jn}}},"type-list":{pattern:Ge("\\b((?:<0>\\s+<1>|record\\s+<1>\\s*<5>|where\\s+<2>)\\s*:\\s*)(?:<3>|<4>|<1>\\s*<5>|<6>)(?:\\s*,\\s*(?:<3>|<4>|<6>))*(?=\\s*(?:where|[{;]|=>|$))",[xk,xs,Yn,Za,$s.source,Hl,"\\bnew\\s*\\(\\s*\\)"]),lookbehind:!0,inside:{"record-arguments":{pattern:Ge("(^(?!new\\s*\\()<0>\\s*)<1>",[xs,Hl],"g"),lookbehind:!0,greedy:!0,inside:jr},keyword:$s,"class-name":{pattern:RegExp(Za,"g"),greedy:!0,inside:jn},punctuation:/[(),]/}},preprocessor:{pattern:/(^[ 	]*)#.*/m,lookbehind:!0,alias:"property",inside:{directive:{pattern:/(#)\b(?:define|elif|else|endif|endregion|error|if|line|nullable|pragma|region|undef|warning)\b/,lookbehind:!0,alias:"keyword"}}}});var Ak=Ek+"|"+Ok,Tk=Kt(`/(?![*/])|//[^
]*
|/\\*(?:[^*]|\\*(?!/))*\\*/|<0>`,[Ak]),Pk=Ro(Kt(`[^()"'/]|<0>|\\(<self>*\\)`,[Tk]),2),Y0="\\b(?:assembly|event|field|method|module|param|property|return|type)\\b",lhe=Kt("<0>(?:\\s*\\(<1>*\\))?",[Ca,Pk]),$p=`:[^
}]+`,Mk=Ro(Kt(`[^()"'/]|<0>|\\(<self>*\\)`,[Tk]),2),Z0=Kt("\\{(?!\\{)(?:(?![}:])<0>)*<1>?\\}",[Mk,$p]),Ik=Ro(Kt(`[^()"'/]|/(?!\\*)|/\\*(?:[^*]|\\*(?!/))*\\*/|<0>|\\(<self>*\\)`,[Ak]),2),X0=Kt("\\{(?!\\{)(?:(?![}:])<0>)*<1>?\\}",[Ik,$p]),J0=(s,l)=>({interpolation:{pattern:Ge("((?:^|[^{])(?:\\{\\{)*)<0>",[s]),lookbehind:!0,inside:{"format-string":{pattern:Ge("(^\\{(?:(?![}:])<0>)*)<1>(?=\\}$)",[l,$p]),lookbehind:!0,inside:{punctuation:/^:/}},punctuation:/^\{|\}$/,expression:{pattern:/[^]+/,alias:"language-csharp",inside:jr}}},string:/[^]+/});yt(jr,"class-name",{attribute:{pattern:Ge("((?:^|[^\\s\\w>)?])\\s*\\[\\s*)(?:<0>\\s*:\\s*)?<1>(?:\\s*,\\s*<1>)*(?=\\s*\\])",[Y0,lhe],"g"),lookbehind:!0,greedy:!0,inside:{target:{pattern:Ge("^<0>(?=\\s*:)",[Y0]),alias:"keyword"},"attribute-arguments":{pattern:Ge("\\(<0>*\\)",[Pk]),inside:jr},"class-name":{pattern:RegExp(Ca),inside:{punctuation:/\./}},punctuation:/[,:]/}}});yt(jr,"string",{"interpolation-string":[{pattern:Ge('(^|[^\\\\])(?:\\$@|@\\$)"(?:""|\\\\[\\s\\S]|\\{\\{|<0>|[^\\\\{"])*"',[Z0],"g"),lookbehind:!0,greedy:!0,inside:J0(Z0,Mk)},{pattern:Ge('(^|[^@\\\\])\\$"(?:\\\\.|\\{\\{|<0>|[^\\\\"{])*"',[X0],"g"),lookbehind:!0,greedy:!0,inside:J0(X0,Ik)}],char:{pattern:RegExp(Ok,"g"),greedy:!0}});$e.graphql={comment:/#.*/,description:{pattern:/(?:"""(?:[^"]|"(?!""))*"""|"(?:\\.|[^\\\n"])*")(?=\s*[a-z_])/gi,greedy:!0,alias:"string",inside:{"language-markdown":{pattern:/("(?!")|""")[^]+(?=\1)/,lookbehind:!0,inside:"md"}}},string:{pattern:/"""[^]*?"""|"(?:\\.|[^\\\n"])*"/g,greedy:!0},number:/(?:\B-|\b)\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,boolean:mn,variable:/\$[a-z_]\w*/i,directive:{pattern:/@[a-z_]\w*/i,alias:"function"},"attr-name":{pattern:/\b[a-z_]\w*(?=\s*(?:\((?:[^()"]|"(?:\\.|[^\\\n"])*")*\))?:)/gi,greedy:!0},"atom-input":{pattern:/\b[A-Z]\w*Input\b/,alias:"class-name"},scalar:/\b(?:Boolean|Float|ID|Int|String)\b/,constant:/\b[A-Z][A-Z_\d]*\b/,"class-name":{pattern:/(\b(?:enum|implements|interface|on|scalar|type|union)\s+|&\s*|:\s*|\[)[A-Z_]\w*/,lookbehind:!0},fragment:{pattern:/(\bfragment\s+|\.{3}\s*(?!on\b))(?!\d)\w+/,lookbehind:!0,alias:"function"},"definition-mutation":{pattern:/(\bmutation\s+)(?!\d)\w+/,lookbehind:!0,alias:"function"},"definition-query":{pattern:/(\bquery\s+)(?!\d)\w+/,lookbehind:!0,alias:"function"},keyword:/\b(?:directive|enum|extend|fragment|implements|input|interface|mutation|on|query|repeatable|scalar|schema|subscription|type|union)\b/,operator:/[&|!=]|\.{3}/,"property-query":/\w+(?=\s*\()/,object:/\w+(?=\s*\{)/,punctuation:/[()[\]{},:!=]/,property:/\w+/,[pa](s,l){for(var c=Lu(s,l),d=c.filter(({type:q})=>q&&q!="comment"&&q!="scalar"),f=d.length,g=0,v=q=>{for(var Y=0;Y<q.length;Y++)if(g+Y==f||d[g+Y].type!=q[Y])return!0},b=(q,Y)=>{for(var re=1,se=g;se<f;se++){var de=d[se],he=de.content;if(de.type=="punctuation"){if(q==he)re++;else if(Y==he&&!--re)return se}}};g<f;){var $=d[g++];if($.type=="keyword"&&$.content=="mutation"){var y=[];if(!v(["definition-mutation","punctuation"])&&d[g+1].content=="("){g+=2;var x=b("(",")");if(!x)continue;for(;g<x;g++){var C=d[g];C.type=="variable"&&(C.alias="variable-input",y.push(C.content))}g=x+1}if(!v(["punctuation","property-query"])&&d[g].content=="{"&&(d[++g].alias="property-mutation",y[0])){var E=b("{","}");if(E)for(var N=g;N<E;N++){var W=d[N];W.type=="variable"&&y.indexOf(W.content)>=0&&(W.alias="variable-input")}}}}return c}};$e.webmanifest=$e.json={property:{pattern:/"(?:\\.|[^\\\n"])*"(?=\s*:)/g,greedy:!0},string:{pattern:/"(?:\\.|[^\\\n"])*"/g,greedy:!0},comment:Wr(),number:/-?\b\d+(?:\.\d+)?(?:e[+-]?\d+)?\b/i,operator:/:/,punctuation:/[[\]{},]/,boolean:mn,null:{pattern:/\bnull\b/,alias:"keyword"}};$e.makefile={comment:/#(?:\\[^]|[^\\\n])*/,string:_p(),"builtin-target":{pattern:/\.[A-Z][^:#=\s]+(?=\s*:(?!=))/,alias:"builtin"},target:{pattern:/^(?:[^:=\s]|[ 	]+(?![\s:]))+(?=\s*:(?!=))/m,alias:"symbol",inside:{variable:/\$+(?:(?!\$)[^(){}:#=\s]+|(?=[({]))/}},variable:/\$+(?:(?!\$)[^(){}:#=\s]+|\([@*%<^+?][DF]\)|(?=[({]))/,keyword:/-include\b|\b(?:define|else|endef|endif|export|ifn?def|ifn?eq|override|private|s?include|undefine|unexport|vpath)\b/,function:{pattern:/(\()(?:abspath|addsuffix|and|basename|call|dir|error|eval|file|filter(?:-out)?|findstring|firstword|flavor|foreach|guile|if|info|join|lastword|load|notdir|or|origin|patsubst|realpath|shell|sort|strip|subst|suffix|value|warning|wildcard|word(?:list|s)?)(?=[ 	])/,lookbehind:!0},operator:/(?:::|[?:+!])?=|[|@]/,punctuation:/[:;(){}]/};var Sp=$e.scss=Kr("css",{comment:Wr(),atrule:{pattern:/@[\w-](?:\([^()]+\)|[^()\s]|\s+(?!\s))*?(?=\s+[{;])/,inside:{rule:/@[\w-]+/,[Fn]:"scss"}},url:/(?:[-a-z]+-)?url(?=\()/i,selector:{pattern:/(?!\s)[^@;(){}]?(?:[^@;(){}\s]|\s+(?!\s)|#\{\$[-\w]+\})+(?=\s*\{(?:\}|\s|[^}][^:{}]*[:{][^}]))/,inside:{parent:{pattern:/&/,alias:"important"},placeholder:/%[-\w]+/,variable:/\$[-\w]+|#\{\$[-\w]+\}/}},property:{pattern:/(?:[-\w]|\$[-\w]|#\{\$[-\w]+\})+(?=\s*:)/,inside:{variable:/\$[-\w]+|#\{\$[-\w]+\}/}}});yt(Sp,"atrule",{keyword:[/@(?:content|debug|each|else(?: if)?|extend|for|forward|function|if|import|include|mixin|return|use|warn|while)\b/i,{pattern:/( )(?:from|through)(?= )/,lookbehind:!0}]});yt(Sp,"important",{variable:/\$[-\w]+|#\{\$[-\w]+\}/});yt(Sp,"function",{"module-modifier":{pattern:/\b(?:as|hide|show|with)\b/i,alias:"keyword"},placeholder:{pattern:/%[-\w]+/,alias:"selector"},statement:{pattern:/\B!(?:default|optional)\b/i,alias:"keyword"},boolean:mn,null:{pattern:/\bnull\b/,alias:"keyword"},operator:{pattern:/(\s)(?:[%/*+-]|[!=]=|[<>]=?|and|not|or)(?!\S)/,lookbehind:!0}});var Nk={pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\d)(?:(?!\s)[$\w\xa0-\uffff])+(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/g,lookbehind:!0,greedy:!0},zo=$e.ts=$e.typescript=Kr("js",{"class-name":Nk});yt(zo,"operator",{builtin:/\b(?:Array|Function|Promise|any|boolean|never|number|string|symbol|unknown)\b/});zo.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b|\b(?:asserts|infer|interface|module|namespace|type)\b(?!\s*[^\s{_$a-zA-Z\xa0-\uffff])|\btype(?=\s*\*)/);delete zo.parameter;delete zo["literal-property"];var xp=Nk.inside=Object.assign({},zo);delete xp["class-name"];delete xp["maybe-class-name"];yt(zo,"function",{decorator:{pattern:/@[$\w\xa0-\uffff]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/.+/}},"generic-function":{pattern:/#?(?!\d)(?:(?!\s)[$\w\xa0-\uffff])+\s*<(?:[^<>=]|=[^<]|=?<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/g,greedy:!0,inside:{generic:{pattern:/<[^]+/,alias:"class-name",inside:xp},function:/\S+/}}});kk($e.ts,"tsx");var Of=$e.tsx.tag,jk="(?:^|(";try{RegExp("(?<=)"),jk+="?<="}catch{Of.lookbehind=!0}Of.pattern=RegExp(jk+`[^\\w$])|(?=</))${Of.pattern.source}`,"g");var Ef=/[*&][^\s[\]{},]+/,Af=/!(?:<[\w%#;/?:@&=$,.!~*'()[\]+-]+>|(?:[a-zA-Z\d-]*!)?[\w%#;/?:@&=$.~*'()+-]+)?/,Tf=`(?:${Af.source}(?:[ 	]+${Ef.source})?|${Ef.source}(?:[ 	]+${Af.source})?)`,she=Kt("(?:[^\\s\0-\\x08\\x0e-\\x1f!\"#%&'*,:>?@[\\]{}`|\\x7f-\\x84\\x86-\\x9f\\ud800-\\udfff\\ufffe\\uffff-]|[?:-]<0>)(?:[ 	]*(?:(?![#:])<0>|:<0>))*",["[^\\s\0-\\x08\\x0e-\\x1f,[\\]{}\\x7f-\\x84\\x86-\\x9f\\ud800-\\udfff\\ufffe\\uffff]"]),Q0=`"(?:\\\\.|[^\\\\
"])*"|'(?:\\\\.|[^\\\\
'])*'`,Jo=(s,l)=>Ge(`([:,[{-]\\s*(?:\\s<0>[ 	]+)?)<1>(?=[ 	]*(?:$|,|\\]|\\}|(?:
\\s*)?#))`,[Tf,s],l);$e.yml=$e.yaml={scalar:{pattern:Ge(`([:-]\\s*(?:\\s<0>[ 	]+)?[|>])[ 	]*(?:(
[ 	]+)\\S.*(?:\\2.+)*)`,[Tf]),lookbehind:!0,alias:"string"},comment:/#.*/,key:{pattern:Ge(`((?:^|[:,[{
?-])[ 	]*(?:<0>[ 	]+)?)<1>(?=\\s*:\\s)`,[Tf,"(?:"+she+"|"+Q0+")"],"g"),lookbehind:!0,greedy:!0,alias:"atrule"},directive:{pattern:/(^[ 	]*)%.+/m,lookbehind:!0,alias:"important"},datetime:{pattern:Jo("\\d{4}-\\d\\d?-\\d\\d?(?:[tT]|[ 	]+)\\d\\d?:\\d\\d:\\d\\d(?:\\.\\d*)?(?:[ 	]*(?:Z|[+-]\\d\\d?(?::\\d\\d)?))?|\\d{4}-\\d\\d-\\d\\d|\\d\\d?:\\d\\d(?::\\d\\d(?:\\.\\d*)?)?","m"),lookbehind:!0,alias:"number"},boolean:{pattern:Jo("false|true","im"),lookbehind:!0,alias:"important"},null:{pattern:Jo("null|~","im"),lookbehind:!0,alias:"important"},string:{pattern:Jo(Q0,"mg"),lookbehind:!0,greedy:!0},number:{pattern:Jo("[+-]?(?:0x[a-f\\d]+|0o[0-7]+|(?:\\d+(?:\\.\\d*)?|\\.\\d+)(?:e[+-]?\\d+)?|\\.inf|\\.nan)","im"),lookbehind:!0},tag:Af,important:Ef,punctuation:/---|[:[\]{},|>?-]|\.{3}/};var ey={pattern:/\\[\\()[\]{}^$+*?|.]/,alias:"escape"},Ul=/\\(?:x[a-fA-F\d]{2}|u[a-fA-F\d]{4}|u\{[a-fA-F\d]+\}|0[0-7]{0,2}|[123][0-7]{2}|c[a-zA-Z]|.)/,uhe={pattern:/\.|\\[wsd]|\\p\{[^{}]+\}/i,alias:"class-name"},che={pattern:/\\[wsd]|\\p\{[^{}]+\}/i,alias:"class-name"},ty="(?:[^\\\\-]|"+Ul.source+")",dhe=RegExp(ty+"-"+ty),ny={pattern:/(<|')[^<>']+(?=[>']$)/,lookbehind:!0,alias:"variable"};$e.regex={"char-class":{pattern:/((?:^|[^\\])(?:\\\\)*)\[(?:\\[^]|[^\\\]])*\]/,lookbehind:!0,inside:{"char-class-punctuation":{pattern:/^.|.$/g,greedy:!0,alias:"punctuation"},"char-class-negation":{pattern:/^\^/,alias:"operator"},range:{pattern:dhe,inside:{escape:Ul,"range-punctuation":{pattern:/-/,alias:"operator"}}},"special-escape":ey,"char-set":che,escape:Ul}},"special-escape":ey,"char-set":uhe,backreference:[{pattern:/\\(?![123][0-7]{2})[1-9]/,alias:"keyword"},{pattern:/\\k<[^<>']+>/,alias:"keyword",inside:{"group-name":ny}}],anchor:{pattern:/[$^]|\\[ABbGZz]/,alias:"function"},escape:Ul,group:[{pattern:/(\()\?(?:<[^<>']+>|'[^<>']+'|[>:]|<?[!=]|[idmnsuxU]+(?:-[idmnsuxU]+)?:?)/,lookbehind:!0,inside:{"group-name":ny}},{pattern:/[()]/,alias:"punctuation"}],quantifier:{pattern:/(?:[+*?]|\{\d+(?:,\d*)?\})[?+]?/,alias:"number"},alternation:{pattern:/\|/,alias:"keyword"}};const fhe=["textContent"],vhe={__name:"node-view",props:nodeViewProps,setup(s){const{options:l}=ie(),c=ref(null),d=ref(s.node.attrs.code);let f=ref(null);return computed(()=>{const{margin:g}=s.node.attrs,v=g!=null&&g.top&&(g==null?void 0:g.top)!==""?g.top+"px":void 0,b=g!=null&&g.bottom&&(g==null?void 0:g.bottom)!==""?g.bottom+"px":void 0;return{marginTop:v,marginBottom:b}}),onMounted(()=>{f.value=Sme(c.value,{readOnly:l.value.document.readOnly,language:s.node.attrs.language,tabSize:2,lineNumbers:s.node.attrs.lineNumbers,wordWrap:s.node.attrs.wordWrap,value:d.value,focusd:!0,onUpdate(g){s.updateAttributes({code:g})}}),f.value.addExtensions(Eme(),Dme(),Lme(),Rme(),Vme(),Ume(),Kme())}),onBeforeUnmount(()=>{var g;(g=f.value)==null||g.remove()}),watch(()=>l.value.document.readOnly,g=>{f.value.setOptions({readOnly:g})}),watch(()=>[s.node.attrs.language,s.node.attrs.lineNumbers,s.node.attrs.wordWrap],()=>{f.value.setOptions(s.node.attrs)}),(g,v)=>(openBlock(),createBlock(unref(NodeViewWrapper),{class:"umo-node-view",id:g.node.attrs.id},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["umo-node-container umo-hover-shadow umo-select-outline umo-node-code-block",g.node.attrs.theme]),ref_key:"containerRef",ref:c},[unref(l).document.readOnly?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:"umo-show-code-block-toolbar",textContent:toDisplayString$1(g.t("node.codeBlock.menu"))},null,8,fhe))],2)]),_:1},8,["id"]))}},phe=Node$1.create({name:"codeBlock",group:"block",atom:!0,addAttributes(){return{vnode:{default:!0},code:{default:""},language:{default:"plaintext"},theme:{default:"light"},lineNumbers:{default:!0},wordWrap:{default:!1}}},parseHTML(){return[{tag:"pre"}]},renderHTML({HTMLAttributes:s}){return["pre",mergeAttributes(this.options.HTMLAttributes,s)]},addNodeView(){return VueNodeViewRenderer(vhe)},addCommands(){return{setCodeBlock:s=>({commands:l})=>l.insertContent({type:this.name,attrs:s})}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.setCodeBlock()}}}),mhe={class:"umo-node-container umo-node-text-box"},hhe={__name:"node-view",props:nodeViewProps,setup(s){const{options:l}=ie(),c=ref(null);let d=ref(!1);const f=ref(!1),g=({angle:$})=>{s.updateAttributes({angle:$})},v=({width:$,height:y})=>{s.updateAttributes({width:$,height:y})},b=({left:$,top:y})=>{s.updateAttributes({left:$,top:y})};return onClickOutside(c,()=>d.value=!1),($,y)=>(openBlock(),createBlock(unref(NodeViewWrapper),{ref_key:"containerRef",ref:c,class:"umo-node-view",id:$.node.attrs.id,onDblclickCapture:y[2]||(y[2]=x=>f.value=!0)},{default:withCtx(()=>[createBaseVNode("div",mhe,[createVNode(unref(be),{selected:unref(d),disabled:f.value,draggable:!unref(l).document.readOnly,rotatable:!0,boundary:!1,angle:$.node.attrs.angle,width:$.node.attrs.width,height:$.node.attrs.height,left:$.node.attrs.left,top:$.node.attrs.top,"min-width":14,"min-height":14,title:$.t("node.textBox.tip"),onRotate:g,onResize:v,onDrag:b,onBlur:y[0]||(y[0]=x=>f.value=!1),onClick:y[1]||(y[1]=x=>isRef(d)?d.value=!0:d=!0)},{default:withCtx(()=>[createVNode(unref(NodeViewContent),{class:"umo-node-text-box-content"})]),_:1},8,["selected","disabled","draggable","angle","width","height","left","top","title"])])]),_:1},8,["id"]))}},ghe=Node$1.create({name:"textBox",group:"block",content:"inline*",addAttributes(){return{vnode:{default:!0},width:{default:200},height:{default:40},angle:{default:null},left:{default:0},top:{default:0},draggable:{default:!0},rotatable:{default:!0}}},parseHTML(){return[{tag:"text-box"}]},renderHTML({HTMLAttributes:s}){return["text-box",mergeAttributes(s),0]},addNodeView(){return VueNodeViewRenderer(hhe)},addCommands(){return{setTextBox:s=>({commands:l})=>l.insertContent({type:this.name,attrs:s})}}}),bhe=HorizontalRule.extend({addOptions(){return{HTMLAttributes:{class:"umo-page-divider","data-line-number":!1}}},parseHTML(){return[{tag:"hr"}]},addAttributes(){return{"data-type":{parseHTML:s=>s.getAttribute("data-type")||"signle"},color:{parseHTML:s=>s.getAttribute("data-color"),renderHTML:s=>({"data-color":s.color,style:`color: ${s.color||"inherit"}`})}}},addCommands(){return{setHr:({type:s,color:l})=>({chain:c,state:d})=>{const{$to:f}=d.selection,g=c();return f.parentOffset===0?g.insertContentAt(Math.max(f.pos-2,0),{type:this.name,attrs:{"data-type":s,color:l}}):g.insertContent({type:this.name,attrs:{"data-type":s,color:l}}),g.command(({tr:v,dispatch:b})=>{var $;if(b){const{$to:y}=v.selection,x=y.end();if(y.nodeAfter)y.nodeAfter.isTextblock?v.setSelection(TextSelection.create(v.doc,y.pos+1)):y.nodeAfter.isBlock?v.setSelection(NodeSelection.create(v.doc,y.pos)):v.setSelection(TextSelection.create(v.doc,y.pos));else{const C=($=y.parent.type.contentMatch.defaultType)===null||$===void 0?void 0:$.create();C&&(v.insert(x,C),v.setSelection(TextSelection.create(v.doc,x+1)))}v.scrollIntoView()}return!0}).run()}}},addInputRules(){return[nodeInputRule({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),yhe={class:"umo-node-container umo-hover-shadow umo-select-outline umo-node-iframe"},_he=["src"],whe={__name:"node-view",props:nodeViewProps,setup(s){const{editor:l}=ie(),c=ref(null);let d=ref(!1),f=ref(0);const g=computed(()=>{const{nodeAlign:y,margin:x}=s.node.attrs,C=x!=null&&x.top&&(x==null?void 0:x.top)!==""?x.top+"px":void 0,E=x!=null&&x.bottom&&(x==null?void 0:x.bottom)!==""?x.bottom+"px":void 0;return{"justify-content":y,marginTop:C,marginBottom:E}});onMounted(()=>{const y=c.value.$el.offsetWidth;f.value=y,s.node.attrs.width===null&&s.updateAttributes({width:y})});const v=({width:y,height:x})=>{s.updateAttributes({width:y,height:x})},b=()=>{l.value.commands.autoPaging(!1)},$=()=>{l.value.commands.autoPaging()};return onClickOutside(c,()=>d.value=!1),(y,x)=>(openBlock(),createBlock(unref(NodeViewWrapper),{ref_key:"containerRef",ref:c,class:"umo-node-view",id:y.node.attrs.id,style:normalizeStyle(g.value)},{default:withCtx(()=>[createBaseVNode("div",yhe,[createVNode(unref(be),{selected:unref(d),rotatable:!1,width:y.node.attrs.width,height:y.node.attrs.height,"min-width":400,"min-height":200,"max-width":unref(f),onResize:v,onResizeStart:b,onResizeEnd:$,onClick:x[0]||(x[0]=C=>isRef(d)?d.value=!0:d=!0)},{default:withCtx(()=>[createBaseVNode("iframe",{src:y.node.attrs.src},null,8,_he)]),_:1},8,["selected","width","height","max-width"])])]),_:1},8,["id","style"]))}},Che=Node$1.create({name:"iframe",inline:!1,group:"block",atom:!0,addAttributes(){return{vnode:{default:!0},src:{default:null},width:{default:400},height:{default:200}}},parseHTML(){return[{tag:"iframe"}]},renderHTML({HTMLAttributes:s}){return["iframe",mergeAttributes(this.options.HTMLAttributes,s)]},addNodeView(){return VueNodeViewRenderer(whe)},addCommands(){return{setIframe:s=>({commands:l})=>l.insertContent({type:this.name,attrs:s})}}}),khe=s=>{const{regex:l,katexOptions:c={},editor:d,shouldRender:f}=s;return new Plugin({key:new PluginKey("mathematics"),state:{init:()=>DecorationSet.empty,apply(g,v,b,$){const{selection:y}=$,x=[];return $.doc.descendants((C,E)=>{const N=f($,E,C);if(C.isText&&C.text&&N){let W;for(;W=l.exec(C.text);){const q=E+W.index,Y=q+W[0].length,re=W[1];if(re){const se=y.$from.pos-y.$to.pos,de=y.$anchor.pos>=q&&y.$anchor.pos<=Y,he=y.$from.pos>=q&&y.$to.pos<=Y,ge=se===0&&de||he;ge&&d.isEditable||x.push(Decoration.widget(q,()=>{const Se=document.createElement("span");Se.classList.add("Tiptap-mathematics-render"),d.isEditable&&Se.classList.add("Tiptap-mathematics-render--editable");try{katex.render(re,Se,c)}catch{Se.innerHTML=re}return Se})),x.push(Decoration.inline(q,Y,{class:ge&&d.isEditable?"Tiptap-mathematics-editor":"Tiptap-mathematics-editor Tiptap-mathematics-editor--hidden",style:ge&&d.isEditable?void 0:"display: inline-block; height: 0; opacity: 0; overflow: hidden; position: absolute; width: 0;"}))}}}}),x.length>0?DecorationSet.create($.doc,x):DecorationSet.empty}},props:{decorations(g){return this.getState(g)}}})},$he=(s,l)=>s.doc.resolve(l).parent.type.name!=="codeBlock",ry=Extension.create({name:"Mathematics",addOptions:()=>({regex:/\$([^\$]*)\$/gi,katexOptions:void 0,shouldRender:$he}),addProseMirrorPlugins(){return[khe({...this.options,editor:this.editor})]}}),She=Table.extend({content:"tableRow*"}),xhe=TableCell.extend({addAttributes(){var s;return{...(s=this.parent)==null?void 0:s.call(this),align:{default:null,parseHTML:l=>l.getAttribute("data-align"),renderHTML:({align:l})=>({"data-align":l})},backgroundColor:{default:null,parseHTML:l=>l.getAttribute("data-bg-color"),renderHTML:({backgroundColor:l})=>{const c={"data-bg-color":l};return l&&(c.style=`background-color: ${l}`),c}}}}}),Ohe=TableHeader.extend({addAttributes(){var s;return{...(s=this.parent)==null?void 0:s.call(this),align:{default:null,parseHTML:l=>l.getAttribute("data-align"),renderHTML:({align:l})=>({"data-align":l})},backgroundColor:{default:null,parseHTML:l=>l.getAttribute("data-bg-color"),renderHTML:({backgroundColor:l})=>{const c={"data-bg-color":l};return l&&(c.style=`background-color: ${l}`),c}}}}}),Ehe={class:"umo-node-container umo-hover-shadow umo-select-outline umo-node-toc"},Ahe=["textContent"],The={key:0,class:"umo-node-toc-body"},Phe=["onClick"],Mhe=["textContent"],Ihe={__name:"node-view",props:nodeViewProps,setup(s){const{editor:l,tableOfContents:c}=ie(),d=computed(()=>{const{margin:g}=s.node.attrs,v=g!=null&&g.top&&(g==null?void 0:g.top)!==""?g.top+"px":void 0,b=g!=null&&g.bottom&&(g==null?void 0:g.bottom)!==""?g.bottom+"px":void 0;return{marginTop:v,marginBottom:b}}),f=g=>{const v=l.value.view.dom.querySelector(`[data-toc-id="${g}"`);v.scrollIntoView();const b=l.value.view.posAtDOM(v,0),$=l.value.view.state.tr;$.setSelection(new TextSelection($.doc.resolve(b))),l.value.view.dispatch($),l.value.view.focus()};return(g,v)=>(openBlock(),createBlock(unref(NodeViewWrapper),{class:"umo-node-view",id:g.node.attrs.id,style:normalizeStyle(d.value)},{default:withCtx(()=>[createBaseVNode("div",Ehe,[createBaseVNode("p",{class:"umo-node-toc-head",textContent:toDisplayString$1(g.t("toc.title"))},null,8,Ahe),unref(c)&&unref(c).length>0?(openBlock(),createElementBlock("ul",The,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(c),b=>(openBlock(),createElementBlock("li",{class:normalizeClass(["umo-node-toc-item",`level-${b.level}`]),key:b.id},[createBaseVNode("a",{onClick:$=>f(b.id)},toDisplayString$1(b.textContent),9,Phe)],2))),128))])):(openBlock(),createElementBlock("div",{key:1,class:"umo-node-toc-empty",textContent:toDisplayString$1(g.t("toc.empty"))},null,8,Mhe))])]),_:1},8,["id","style"]))}},Nhe=Node$1.create({name:"toc",group:"block",atom:!0,addAttributes(){return{vnode:{default:!0}}},parseHTML(){return[{tag:"toc"}]},renderHTML({HTMLAttributes:s}){return["toc",mergeAttributes(this.options.HTMLAttributes,s)]},addNodeView(){return VueNodeViewRenderer(Ihe)},addGlobalAttributes(){return[{types:["heading"],attributes:{}}]},addCommands(){return{addTableOfContents:()=>({editor:s})=>s.chain().focus().insertContent({type:this.name}).run()}}}),vd=(s,l,c,d,f)=>{const{height:g,margin:v}=kn(f);return s.isOverflow(g)?(s.addHeight(v),!0):(s.addHeight(g),!1)};let pd=1;const ay=(s,l,c,d,f)=>{const g=s.splitResolve(c),{height:v,margin:b}=kn(f);if(s.isOverflow(v)){if(v>s.getHeight())return s.addHeight(b),!0;(d==null?void 0:d.firstChild)==l?s.setBoundary(g[g.length-2][2],g.length-2):s.setBoundary(c,g.length-1)}else s.addHeight(v);return!1},jhe={[Hv]:vd,[Vv]:vd,[H2]:ay,[U2]:vd,[Zde]:ay,[K2]:(s,l,c,d,f)=>{const g=s.splitResolve(c);if(s.isOverflow(0))return pd>1?(pd=1,s.setBoundary(g[g.length-2][2],g.length-2)):(s.setBoundary(c,g.length-1),pd+=1),!1;const{height:v}=kn(f);if(s.isOverflow(v)){if(v>s.getHeight())return s.addHeight(v),!1;(d==null?void 0:d.firstChild)==l?s.setBoundary(g[g.length-2][2],g.length-2):s.setBoundary(c,g.length-1)}else s.addHeight(v);return!1},[Uv]:(s,l,c,d,f)=>{const{height:g,margin:v}=kn(f);return s.isOverflow(g)?(s.addHeight(v),!0):(s.addHeight(g),!1)},[V2]:(s,l,c,d,f)=>{const{height:g}=kn(f);if(!s.isOverflow(g))return s.addHeight(g),!1;const v=s.splitResolve(c);if(g>s.getHeight()){const b=r1(l,f,s);if(b)return s.setBoundary(c+b,v.length),!1}else s.setBoundary(c,v.length-1);return!1},[hs]:(s,l,c,d,f)=>{const{height:g}=kn(f);if(!s.isOverflow(g))return s.addHeight(g),!1;const v=s.splitResolve(c);if(g>s.getDefaultHeight()){const b=r1(l,f,s);if(b)return s.setBoundary(c+b,v.length),!1}return(d==null?void 0:d.firstChild)==l?(s.setBoundary(v[v.length-2][2],v.length-2),!1):(s.setBoundary(c,v.length-1),!1)},[Rt]:(s,l,c,d,f,g,v,b)=>g==b&&(d==null?void 0:d.type.name)=="doc",default:(s,l,c,d,f)=>{const{height:g}=kn(f);if(!s.isOverflow(g))return s.addHeight(g),!1;const v=s.splitResolve(c);if((d==null?void 0:d.firstChild)==l){const b=s.splitResolve(c+l.nodeSize);return s.setBoundary(c+l.nodeSize,b.length-1),!1}return s.setBoundary(c,v.length-1),!1}};var ua,Oi,Ei,ro,Ai;class Dhe{constructor(l,c,d,f){nr(this,ua),nr(this,Oi,0),nr(this,Ei,null),nr(this,ro,0),nr(this,Ai,0),mt(this,"attributes",{}),mt(this,"schema"),Sr(this,ua,c),Sr(this,ro,d),Sr(this,Ai,f),this.schema=l}getDoc(){return gn(this,ua)}getHeight(){return gn(this,ro)}getDefaultHeight(){return gn(this,Ai)}isOverflow(l){return gn(this,Oi)+l>=gn(this,ro)}addHeight(l){Sr(this,Oi,gn(this,Oi)+l)}setBoundary(l,c){Sr(this,Ei,{pos:l,depth:c})}pageBoundary(){return gn(this,Ei)}splitResolve(l){const c=gn(this,ua).resolve(l).path,d=[];if(c.length<=3)return c;const f=3;for(let g=0;g<c.length;g+=f)d.push(c.slice(g,g+f));return d}lastPage(){return gn(this,ua).lastChild}}ua=new WeakMap,Oi=new WeakMap,Ei=new WeakMap,ro=new WeakMap,Ai=new WeakMap;class Bhe{constructor(l,c,d,f){mt(this,"nodesComputed"),mt(this,"state"),mt(this,"tr"),mt(this,"pageState"),mt(this,"editor"),mt(this,"restDomIds",[]),mt(this,"forcePageId"),mt(this,"startIndex"),this.editor=l,this.nodesComputed=c,this.tr=f.tr,this.state=f,this.pageState=d,this.restDomIds=[],this.forcePageId=null,this.startIndex=0}run(){const{selection:l,doc:c}=this.state,{inserting:d,deleting:f,runState:g,initSplit:v,splitPage:b}=this.pageState;return g?(this.prepare(),b?this.forceSplit():v?this.initComputed():!d&&f&&l.$head.node(1)===c.lastChild?this.tr:((d||f)&&(performance.now(),this.computed(),this.checkNodeAndFix()),this.tr)):null}prepare(){const{doc:l}=this.tr,{selection:c}=this.state;this.startIndex=l.content.findIndex(c.head).index}computed(){const l=this.tr,c=this.startIndex+1;return l.doc.childCount>1&&l.doc.content.childCount!=c&&this.mergeDocument(),this.splitDocument(),this.tr}initComputed(){return this.mergeDefaultDocument(1),this.splitDocument(),this.tr}splitDocument(){const{schema:l}=this.state;for(;;){const c=this.getNodeHeight();if(!c)return;const d=getNodeType(Rt,l);this.lift({pos:c.pos,depth:c.depth,typesAfter:[{type:d}],schema:l}),this.startIndex+=1}}mergeDefaultDocument(l){var c,d,f,g,v,b,$,y,x,C,E,N,W,q;const Y=this.tr;if(this.forcePageId)for(;;){const re=Y.doc.content.content.slice(0,l).map(ge=>ge.nodeSize).reduce((ge,Se)=>ge+Se,0);let se=1;if(Y.doc.child(l).attrs.id==this.forcePageId)break;const de=Y.doc.content.child(l-1),he=Y.doc.content.child(l);(((c=he==null?void 0:he.firstChild)==null?void 0:c.type)==((d=de==null?void 0:de.lastChild)==null?void 0:d.type)||(f=he==null?void 0:he.firstChild)!=null&&f.type.name.includes(mf))&&(v=(g=he==null?void 0:he.firstChild)==null?void 0:g.attrs)!=null&&v.extend&&(se=2,this.restDomIds.push(($=(b=de==null?void 0:de.lastChild)==null?void 0:b.attrs)==null?void 0:$.id)),Y.join(re,se)}else for(;Y.doc.content.childCount>l;){const re=Y.doc.content.lastChild?Y.doc.content.lastChild.nodeSize:0;let se=1;if(Y.doc.content.lastChild!=Y.doc.content.firstChild){const de=Y.doc.content.child(Y.doc.content.childCount-2),he=Y.doc.content.lastChild;(((y=he==null?void 0:he.firstChild)==null?void 0:y.type)==((x=de==null?void 0:de.lastChild)==null?void 0:x.type)||(C=he==null?void 0:he.firstChild)!=null&&C.type.name.includes(mf))&&(N=(E=he==null?void 0:he.firstChild)==null?void 0:E.attrs)!=null&&N.extend&&(se=2,this.restDomIds.push((q=(W=de==null?void 0:de.lastChild)==null?void 0:W.attrs)==null?void 0:q.id))}Y.join(Y.doc.content.size-re,se)}this.tr=Y}mergeDocument(){const l=this.tr;let c=null;for(let d=this.startIndex+1;d<l.doc.content.childCount;d++){const f=l.doc.content.child(d);if(f.attrs.force){c=f.attrs.id;break}}this.forcePageId=c,this.mergeDefaultDocument(this.startIndex+1)}forceSplit(){const{selection:l,schema:c}=this.state,{$anchor:d}=l,f={pos:d.pos,depth:d.depth};let g=findParentNode(b=>Kv.includes(b.type.name))(l);g&&(f.pos=g.start,f.depth=g.depth);const v=getNodeType(Rt,c);return this.lift({pos:f.pos,depth:f.depth,typesAfter:[{type:v}],schema:c,force:!0}),this.tr}lift({pos:l,depth:c=1,typesAfter:d,schema:f,force:g=!1}){const v=this.tr,b=v.doc.resolve(l);let $=Fragment.empty,y=Fragment.empty;for(let x=b.depth,C=b.depth-c,E=c-1;x>C;x--,E--){$=Fragment.from(b.node(x).copy($));const N=d&&d[E],W=b.node(x);let q=b.node(x).copy(y);if(q&&q.attrs.id){let Y={};q.attrs.extend==!1&&(Y={extend:!0});const re=Object.assign({},W.attrs,{id:Mr(),...Y});q=f.nodes[W.type.name].createAndFill(re,y)}y=Fragment.from(N?N.type.create({id:Mr(),pageNumber:(q==null?void 0:q.attrs.pageNumber)+1,force:g},y):q)}v.step(new ReplaceStep(l,l,new Slice($.append(y),c,c))),this.tr=v}checkNodeAndFix(){let l=this.tr;const{doc:c}=l,{schema:d}=this.state;let f=null;return c.descendants((g,v,b,$)=>{if(g.type===d.nodes[hs]&&g.attrs.extend==!0)if(f==null)f=g;else{const y=l.mapping.map(v);return f.type==d.nodes[hs]||(l=l.step(new ReplaceStep(y-1,y+1,Slice.empty))),!1}if(g.type===d.nodes[Yde])return f=null,!0}),this.tr=l,this.tr}getNodeHeight(){const l=this.tr.doc,{bodyOptions:c}=this.pageState,d=new Dhe(this.state.schema,l,c==null?void 0:c.bodyHeight,MW()),f=this.nodesComputed,g=this.restDomIds,v=this.forcePageId,b=this.startIndex;let $=!1;return l.descendants((y,x,C,E)=>{if($||y.attrs.id==v)return $=!0,!1;if(!d.pageBoundary()){let N=document.getElementById(y.attrs.id);return(g.includes(y.attrs.id)||!N&&y.type.name!=Rt)&&(N=NW(y,this.state.schema)),(f[y.type.name]||f.default)(d,y,x,C,N,b,v,E)}return!1}),d.pageBoundary()?d.pageBoundary():null}}class Op{constructor(l,c,d,f,g,v=!0){mt(this,"bodyOptions"),mt(this,"deleting"),mt(this,"inserting"),mt(this,"splitPage"),mt(this,"initSplit"),mt(this,"scrollHeight",0),mt(this,"runState"),this.bodyOptions=_v(),this.deleting=l,this.inserting=c,this.splitPage=d,this.initSplit=f,this.scrollHeight=g,this.runState=v}transform(l){const c=l.getMeta("splitPage")||!1,d=l.getMeta("initSplit")||!1;let f=l.getMeta("deleting")||!1,g=l.getMeta("inserting")||!1,v=l.getMeta("runState");this.runState==!1&&v==!0&&(g=!0),v=typeof v>"u"?this.runState:v;const b=l.getMeta("scrollHeight")||this.scrollHeight;return new Op(f,g,c,d,b,v)}}let Pf=!1;function Fhe(s){let l=0;const c=s.children;for(let d=0;d<c.length;d++){const f=c[d],{height:g}=kn(f);l+=g}return l}var Os,Ti,Es;class Lhe{constructor(l,c=".umo-page-node-content"){nr(this,Os),nr(this,Ti),nr(this,Es,[W2,G2,q2,Y2,Z2]),Sr(this,Os,l),Sr(this,Ti,c)}isOverflown(l){const{bodyHeight:c}=_v();return l>c}checkCriticalPoint(l){const{childCount:c,firstChild:d}=l;return!!(c==1&&(d==null?void 0:d.type.name)=="table"&&d.childCount==1||d&&c==1&&gn(this,Es).includes(d.type.name))}update(l,c){if(Pf)return;const{selection:d,schema:f,tr:g}=l.state;if(l.state.doc.eq(c.doc))return;const v=l.domAtPos.bind(l),b=Dk.getState(c).scrollHeight;let $=!1;const y=KW(f.nodes[Rt],v)(d);if(!y)return;const x=y.querySelector(gn(this,Ti));if(x){let C=Fhe(x);$=l.state.doc.nodeSize<c.doc.nodeSize?b>C:!1,g.setMeta("scrollHeight",C);const E=this.isOverflown(C);if(E){const N=findParentNode(W=>W.type.name==Rt)(d);if(N&&this.checkCriticalPoint(N.node))return}(E||$)&&(E&&g.setMeta("inserting",E),$&&g.setMeta("deleting",!0)),l.dispatch(g)}}}Os=new WeakMap,Ti=new WeakMap,Es=new WeakMap;const Dk=new PluginKey("pagination"),Rhe=(s,l)=>(BW(),new Plugin({key:Dk,view:()=>new Lhe(s),state:{init:()=>new Op(!1,!1,!1,!1,0,!0),apply:(c,d)=>d.transform(c)},appendTransaction([c],d,f){return jW(),new Bhe(s,{...jhe,...l},this.getState(f),f).run()},props:{handleDOMEvents:{compositionstart(c,d){Pf=!0},compositionend(c,d){Pf=!1}},transformPasted(c,d){return c.content.descendants(f=>{f.attrs.id=Mr()}),c}}})),oy=new PluginKey("attrkey"),zhe=s=>new Plugin({key:oy,state:{init:()=>!1,apply:(l,c)=>l.getMeta("initSplit")},appendTransaction(l,c,d){const f=d.tr;let g=!1;return(oy.getState(d)||l.some(v=>v.docChanged))&&d.doc.descendants((v,b)=>{const $=v.attrs;s.includes(v.type.name)&&!$.id&&(f.setNodeMarkup(b,void 0,{...$,id:Mr()}),g=!0)}),g?f:null}});function iy(s,l){const c=s.storedMarks||s.selection.$to.parentOffset&&s.selection.$from.marks();if(c){const d=c.filter(f=>l==null?void 0:l.includes(f.type.name));s.tr.ensureMarks(d)}}const Vhe=({keepMarks:s=!0}={})=>({tr:l,state:c,dispatch:d,editor:f})=>{const{selection:g,doc:v}=l,{$from:b,$to:$}=g,y=f.extensionManager.attributes,x=Kl(y,b.node().type.name,b.node().attrs);if(x.id=Mr(),x.extend&&(x.extend=!1),g instanceof NodeSelection&&g.node.isBlock)return!b.parentOffset||!canSplit(v,b.pos)?!1:(d&&(s&&iy(c,f.extensionManager.splittableMarks),l.split(b.pos).scrollIntoView()),!0);if(!b.parent.isBlock)return!1;if(d){const C=$.parentOffset===$.parent.content.size;g instanceof TextSelection&&l.deleteSelection();const E=b.depth===0?void 0:defaultBlockAt(b.node(-1).contentMatchAt(b.indexAfter(-1)));let N=C&&E?[{type:E,attrs:x}]:void 0,W=canSplit(l.doc,l.mapping.map(b.pos),1,N);if(!N&&!W&&canSplit(l.doc,l.mapping.map(b.pos),1,E?[{type:E}]:void 0)&&(W=!0,N=E?[{type:E,attrs:x}]:void 0),W&&(N||(N=[{type:b.node().type,attrs:x}]),l.split(l.mapping.map(b.pos),1,N),E&&!C&&!b.parentOffset&&b.parent.type!==E)){const q=l.mapping.map(b.before()),Y=l.doc.resolve(q);b.node(-1).canReplaceWith(Y.index(),Y.index()+1,E)&&l.setNodeMarkup(l.mapping.map(b.before()),E)}s&&iy(c,f.extensionManager.splittableMarks),l.scrollIntoView()}return!0},Hhe=s=>({tr:l,state:c,dispatch:d,editor:f})=>{const g=getNodeType(s,c.schema),{$from:v,$to:b}=c.selection,$=c.selection.node;if($&&$.isBlock||v.depth<2||!v.sameParent(b))return!1;const y=v.node(-1);if(y.type!==g)return!1;const x=f.extensionManager.attributes;if(v.parent.content.size===0&&v.node(-1).childCount===v.indexAfter(-1)){if(v.depth===2||v.node(-3).type!==g||v.index(-2)!==v.node(-2).childCount-1)return!1;if(d){let q=Fragment.empty;const Y=v.index(-1)?1:v.index(-2)?2:3;for(let Se=v.depth-Y;Se>=v.depth-3;Se-=1)q=Fragment.from(v.node(Se).copy(q));const re=v.indexAfter(-1)<v.node(-2).childCount?1:v.indexAfter(-2)<v.node(-3).childCount?2:3,se=Kl(x,v.node().type.name,v.node().attrs),de=g.contentMatch.defaultType.createAndFill(se)||void 0;q=q.append(Fragment.from(g.createAndFill(null,de)||void 0));const he=v.before(v.depth-(Y-1));l.replace(he,v.after(-re),new Slice(q,4-Y,0));let ge=-1;l.doc.nodesBetween(he,l.doc.content.size,(Se,Ae)=>{if(ge>-1)return!1;Se.isTextblock&&Se.content.size===0&&(ge=Ae+1)}),ge>-1&&l.setSelection(TextSelection.near(l.doc.resolve(ge))),l.scrollIntoView()}return!0}const C=b.pos===v.end()?y.contentMatchAt(0).defaultType:null,E=Kl(x,y.type.name,y.attrs),N=Kl(x,v.node().type.name,v.node().attrs);E.id=Mr(),N.id=Mr(),l.delete(v.pos,b.pos);const W=C?[{type:g,attrs:E},{type:C,attrs:N}]:[{type:g,attrs:E}];if(!canSplit(l.doc,v.pos,2))return!1;if(d){const{selection:q,storedMarks:Y}=c,{splittableMarks:re}=f.extensionManager,se=Y||q.$to.parentOffset&&q.$from.marks();if(l.split(v.pos,2,W).scrollIntoView(),!se||!d)return!0;const de=se.filter(he=>re.includes(he.type.name));l.ensureMarks(de)}return!0},Uu=s=>(pushScopeId("data-v-44488f44"),s=s(),popScopeId(),s),Uhe=["title"],Khe={class:"umo-page-node-header",contenteditable:"false"},Whe=Uu(()=>createBaseVNode("div",{class:"umo-page-corner corner-tl",style:{width:"var(--umo-page-margin-left)"}},null,-1)),Ghe={class:"umo-page-node-header-content"},qhe=Uu(()=>createBaseVNode("div",{class:"umo-page-corner corner-tr",style:{width:"var(--umo-page-margin-right)"}},null,-1)),Yhe={class:"umo-page-node-footer",contenteditable:"false"},Zhe=Uu(()=>createBaseVNode("div",{class:"umo-page-corner corner-bl",style:{width:"var(--umo-page-margin-left)"}},null,-1)),Xhe={class:"umo-page-node-footer-content"},Jhe=Uu(()=>createBaseVNode("div",{class:"umo-page-corner corner-br",style:{width:"var(--umo-page-margin-right)"}},null,-1)),Qhe={__name:"node-view",props:nodeViewProps,setup(s){const{page:l,exportImage:c}=ie(),d=ref(null),f=computed(()=>{const{width:v,height:b}=l.value.size;return{width:l.value.orientation==="portrait"?v:b,height:l.value.orientation==="portrait"?b:v}}),g=ref({x:0,height:0});return watch(()=>l.value.watermark,({type:v})=>{v==="compact"?(g.value.width=320,g.value.y=240):(g.value.width=480,g.value.y=360)},{deep:!0,immediate:!0}),(v,b)=>{const $=OU;return openBlock(),createBlock(unref(NodeViewWrapper),{ref_key:"containerRef",ref:d,class:normalizeClass(["umo-page-node-view",{"no-shadow":unref(c)}]),id:v.node.attrs.id,style:normalizeStyle({"--umo-page-background":unref(l).background,"--umo-page-margin-top":unref(l).margin.top+"cm","--umo-page-margin-bottom":unref(l).margin.bottom+"cm","--umo-page-margin-left":unref(l).margin.left+"cm","--umo-page-margin-right":unref(l).margin.right+"cm","--umo-page-width":f.value.width+"cm","--umo-page-height":f.value.height+"cm"})},{default:withCtx(()=>[v.node.attrs.pageNumber>1?(openBlock(),createElementBlock("div",{key:0,class:"umo-page-node-view-handler",title:v.t("pagination.toggle"),onDblclick:b[0]||(b[0]=y=>unref(l).pagination=!unref(l).pagination)},null,40,Uhe)):createCommentVNode("",!0),createVNode($,mergeProps({class:"umo-page-watermark",alpha:unref(l).watermark.alpha},g.value,{"watermark-content":unref(l).watermark}),{default:withCtx(()=>[createBaseVNode("div",Khe,[Whe,createBaseVNode("div",Ghe,[unref(l).header?(openBlock(),createBlock(resolveDynamicComponent(v.node.attrs.slots.page_header),{key:0,"page-number":v.node.attrs.pageNumber,"total-pages":v.editor.$nodes("page").length},null,8,["page-number","total-pages"])):createCommentVNode("",!0)]),qhe]),createVNode(unref(NodeViewContent),{class:"umo-page-node-content",style:normalizeStyle({height:f.value.height-unref(l).margin.top-unref(l).margin.bottom+"cm"})},null,8,["style"]),createBaseVNode("div",Yhe,[Zhe,createBaseVNode("div",Xhe,[unref(l).footer?(openBlock(),createBlock(resolveDynamicComponent(v.node.attrs.slots.page_footer),{key:0,"page-number":v.node.attrs.pageNumber,"total-pages":v.editor.$nodes("page").length},null,8,["page-number","total-pages"])):createCommentVNode("",!0)]),Jhe])]),_:1},16,["alpha","watermark-content"])]),_:1},8,["id","class","style"])}}},ege=Fe(Qhe,[["__scopeId","data-v-44488f44"]]),ly=[V2,hs,Vv,H2,Hv,Uv,K2,Eu,Jde,W2,G2,Qde,q2,efe,Y2,Z2,tfe,nfe,Xde,Rt],tge=Node$1.create({priority:2,name:`${Rt}`,content:"block*",group:`${Rt}`,isolating:!0,selectable:!1,draggable:!1,isLeaf:!0,addOptions(){return{SystemAttributes:{},nodesComputed:{},View:VueNodeViewRenderer(ege),types:[],slots:{}}},addAttributes(){return{HTMLAttributes:{},id:{default:null},pageNumber:{default:1},force:{default:!1},slots:{default:this.options.slots,renderHTML:()=>({})}}},parseHTML(){return[{tag:"page"}]},renderHTML({node:s,HTMLAttributes:l}){return["page",mergeAttributes(l),0]},addCommands(){return{splitBlock:Vhe,splitListItem:Hhe,autoPaging:(s=!0)=>({tr:l,state:c,dispatch:d,editor:f})=>(d&&l.setMeta("runState",s),!0),setPageBreak:()=>({tr:s,state:l,dispatch:c,editor:d})=>(c&&s.setMeta("splitPage",!0),!0)}},addGlobalAttributes(){return[{types:ly.concat(this.options.types||[]),attributes:{id:{default:null},extend:{default:!1}}}]},addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:l})=>{const{selection:c,doc:d}=l,{empty:f,$anchor:g}=c,{pos:v,parent:b}=g,$=Selection$2.atStart(d).from===v;return!f||!$||!b.type.isTextblock||b.textContent.length?!1:s.clearNodes()}),()=>sy(s),()=>s.joinBackward(),()=>s.selectNodeBackward(),()=>s.command(({editor:l,tr:c})=>{const{selection:d,doc:f}=c,{$anchor:g}=d,{pos:v}=g;if(f.childCount==1)return!1;if(Selection$2.atEnd(f).from===v&&!g.parentOffset)return s.deleteNode(Rt);const b=findParentNode($=>$.type.name===Rt)(d);if(b){if(!b.node.firstChild)return s.deleteNode(Rt);const $=b.node.firstChild.type;if(b.start+Selection$2.atStart(b.node).from===v){const y=TextSelection.create(f,b.start-2,b.start-2),x=findParentNode(C=>C.type.name===Rt)(y);if(x){const C=Selection$2.atEnd(x.node).from+x.start,E=TextSelection.create(f,C,C);if($==x.node.lastChild.type){const N=E.$anchor.parent;return AW(N,l.schema)?c.setSelection(E):c.step(new ReplaceStep(C,v,Slice.empty)),!0}c.setSelection(E)}return!0}}return!1})]),Delete:()=>this.editor.commands.first(({commands:s})=>[()=>sy(s),()=>s.command(({tr:l})=>{const{selection:c,doc:d}=l,{$anchor:f}=c,g=f.node(),v=findParentNode(b=>b.type.name===Eu)(c);return v&&v.start+Selection$2.atStart(v.node).from===f.pos&&v.node.childCount==1&&g.content.size==0?!0:s.joinForward()}),()=>s.selectNodeForward(),()=>s.command(({tr:l})=>{const{selection:c,doc:d}=l,{$anchor:f}=c,{pos:g}=f;if(d.childCount==1)return!1;if(Selection$2.atEnd(d).from===g)return s.deleteNode(Rt);const v=findParentNode(b=>b.type.name===Rt)(c);if(v&&v.start+Selection$2.atEnd(v.node).from===g){const b=TextSelection.create(d,g+2,g+2),$=findParentNode(y=>y.type.name===Rt)(b);if($){const y=Selection$2.atStart($.node).from+$.start,x=TextSelection.create(d,y,y);if(findParentNode(C=>C.attrs.extend)(x))return l.step(new ReplaceStep(g,y,Slice.empty)),!0}}return!1})]),Tab:()=>this.editor.commands.first(({commands:s})=>[()=>!0]),"Mod-Enter":()=>this.editor.commands.setPageBreak()}},addProseMirrorPlugins(){return[zhe(ly.concat(this.options.types||[]))]},addNodeView(){return this.options.View}});function Kl(s,l,c){return Object.fromEntries(Object.entries(c).filter(([d])=>{const f=s.find(g=>g.type===l&&g.name===d);return f?f.attribute.keepOnSplit:!1}))}const sy=s=>s.command(({tr:l})=>{const{selection:c,doc:d}=l,f=findChildrenInRange(d,{from:c.from,to:c.to},g=>g.type.name==Eu);for(let g=0;g<f.length;g++){const v=f[g],b=v.pos+v.node.nodeSize;if(c.from<v.pos||c.to>b)return!0}return s.deleteSelection()});var It=[];for(var md=0;md<256;++md)It.push((md+256).toString(16).slice(1));function nge(s,l=0){return(It[s[l+0]]+It[s[l+1]]+It[s[l+2]]+It[s[l+3]]+"-"+It[s[l+4]]+It[s[l+5]]+"-"+It[s[l+6]]+It[s[l+7]]+"-"+It[s[l+8]]+It[s[l+9]]+"-"+It[s[l+10]]+It[s[l+11]]+It[s[l+12]]+It[s[l+13]]+It[s[l+14]]+It[s[l+15]]).toLowerCase()}var Tl,rge=new Uint8Array(16);function age(){if(!Tl&&(Tl=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Tl))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Tl(rge)}var oge=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const uy={randomUUID:oge};function Mf(s,l,c){if(uy.randomUUID&&!l&&!s)return uy.randomUUID();s=s||{};var d=s.random||(s.rng||age)();return d[6]=d[6]&15|64,d[8]=d[8]&63|128,nge(d)}const ige=({getId:s,anchorTypes:l=["heading"]})=>new Plugin({key:new PluginKey("tableOfContent"),appendTransaction(c,d,f){const g=f.tr;let v=!1;if(c.some(b=>b.docChanged)){const b=[];f.doc.descendants(($,y)=>{const x=$.attrs["data-toc-id"];if(l.includes($.type.name)&&$.textContent.length!==0){if(x==null||b.includes(x)){let C="";C=s?s($.textContent):Mf(),g.setNodeMarkup(y,void 0,{...$.attrs,"data-toc-id":C,id:C}),v=!0}b.push(x)}})}return v?g:null}}),cy=(s,l)=>{let c=1;const d=l.at(-1),f=[...l].reverse().find(v=>v.originalLevel<=s.node.attrs.level),g=(f==null?void 0:f.level)||1;return c=s.node.attrs.level>((d==null?void 0:d.originalLevel)||1)?((d==null?void 0:d.level)||1)+1:s.node.attrs.level<((d==null?void 0:d.originalLevel)||1)?g:(d==null?void 0:d.level)||1,c},dy=(s,l)=>{const c=l.at(-1);return c?((c==null?void 0:c.itemIndex)||1)+1:1},lge=(s,l,c)=>{var d,f;const g=c||s.node.attrs.level||1;let v=1;const b=l.filter($=>$.level<=g);return v=((d=b.at(-1))===null||d===void 0?void 0:d.level)===g?(((f=b.at(-1))===null||f===void 0?void 0:f.itemIndex)||1)+1:1,v},Bk=(s,l)=>{const{editor:c}=l,d=[],f=[];let g=null;if(c.state.doc.descendants((v,b)=>{var $;!(($=l.anchorTypes)===null||$===void 0)&&$.includes(v.type.name)&&d.push({node:v,pos:b})}),d.forEach(v=>{const b=c.view.domAtPos(v.pos+1).node;l.storage.scrollPosition>=b.offsetTop&&(g=v.node.attrs["data-toc-id"],f.push(v.node.attrs["data-toc-id"]))}),s=s.map(v=>({...v,isActive:v.id===g,isScrolledOver:f.includes(v.id)})),l.onUpdate){const v=l.storage.content.length===0;l.onUpdate(s,v)}return s},fy=s=>{const{editor:l,onUpdate:c}=s,d=[];let f=[];const g=[];if(l.state.doc.descendants((v,b)=>{var $;!(($=s.anchorTypes)===null||$===void 0)&&$.includes(v.type.name)&&d.push({node:v,pos:b})}),d.forEach((v,b)=>{if(v.node.textContent.length===0)return;const $=l.view.domAtPos(v.pos+1).node,y=s.storage.scrollPosition>=$.offsetTop;g.push($);const x=v.node.attrs.level,C=d[b-1],E=s.getLevelFn(v,f),N=s.getIndexFn(v,f,E);f=C?[...f,{itemIndex:N,id:v.node.attrs["data-toc-id"],originalLevel:x,level:E,textContent:v.node.textContent,pos:v.pos,editor:l,isActive:!1,isScrolledOver:!1,node:v.node,dom:$}]:[...f,{itemIndex:N,id:v.node.attrs["data-toc-id"],originalLevel:x,level:E,textContent:v.node.textContent,pos:v.pos,editor:l,isActive:!1,isScrolledOver:y,node:v.node,dom:$}]}),f=Bk(f,s),c){const v=s.storage.content.length===0;c(f,v)}s.storage.anchors=g,s.storage.content=f,l.state.tr.setMeta("toc",f),l.view.dispatch(l.state.tr)},sge=Extension.create({name:"tableOfContents",addStorage:()=>({content:[],anchors:[],scrollHandler:()=>null,scrollPosition:0}),addGlobalAttributes(){return[{types:this.options.anchorTypes||["headline"],attributes:{id:{default:null,renderHTML:s=>({id:s.id}),parseHTML:s=>s.id||null},"data-toc-id":{default:null,renderHTML:s=>({"data-toc-id":s["data-toc-id"]}),parseHTML:s=>s.dataset.tocId||null}}}]},addOptions:()=>({onUpdate:()=>{},getId:s=>Mf(),scrollParent:typeof window<"u"?()=>window:void 0,anchorTypes:["heading"]}),onUpdate(){var s;fy({editor:this.editor,storage:this.storage,onUpdate:(s=this.options.onUpdate)===null||s===void 0?void 0:s.bind(this),getIndexFn:this.options.getIndex||dy,getLevelFn:this.options.getLevel||cy,anchorTypes:this.options.anchorTypes})},onCreate(){var s;const{tr:l}=this.editor.state,c=[];if(this.options.scrollParent&&typeof this.options.scrollParent!="function"&&console.warn("[Tiptap Table of Contents Deprecation Notice]: The 'scrollParent' option must now be provided as a callback function that returns the 'scrollParent' element. The ability to pass this option directly will be deprecated in future releases."),this.editor.state.doc.descendants((f,g)=>{var v;const b=f.attrs["data-toc-id"];if(!((v=this.options.anchorTypes)===null||v===void 0)&&v.includes(f.type.name)&&f.textContent.length!==0){if(b==null||c.includes(b)){let $="";$=this.options.getId?this.options.getId(f.textContent):Mf(),l.setNodeMarkup(g,void 0,{...f.attrs,"data-toc-id":$,id:$})}c.push(b)}}),this.editor.view.dispatch(l),fy({editor:this.editor,storage:this.storage,onUpdate:(s=this.options.onUpdate)===null||s===void 0?void 0:s.bind(this),getIndexFn:this.options.getIndex||dy,getLevelFn:this.options.getLevel||cy,anchorTypes:this.options.anchorTypes}),this.storage.scrollHandler=()=>{var f;if(!this.options.scrollParent)return;const g=typeof this.options.scrollParent=="function"?this.options.scrollParent():this.options.scrollParent,v=g instanceof HTMLElement?g.scrollTop:g.scrollY;this.storage.scrollPosition=v||0;const b=Bk(this.storage.content,{editor:this.editor,anchorTypes:this.options.anchorTypes,storage:this.storage,onUpdate:(f=this.options.onUpdate)===null||f===void 0?void 0:f.bind(this)});this.storage.content=b},!this.options.scrollParent)return;const d=typeof this.options.scrollParent=="function"?this.options.scrollParent():this.options.scrollParent;d&&d.addEventListener("scroll",this.storage.scrollHandler)},onDestroy(){if(!this.options.scrollParent)return;const s=typeof this.options.scrollParent=="function"?this.options.scrollParent():this.options.scrollParent;s&&s.removeEventListener("scroll",this.storage.scrollHandler)},addProseMirrorPlugins(){return[ige({getId:this.options.getId,anchorTypes:this.options.anchorTypes})]}}),uge=s=>{const{key:l,editor:c,onPaste:d,onDrop:f,allowedMimeTypes:g}=s;return new Plugin({key:l||new PluginKey("fileHandler"),props:{handleDrop(v,b){var $;const{dataTransfer:y}=b;if(!f||!(($=y==null?void 0:y.files)!=null&&$.length))return;const x=v.posAtCoords({left:b.clientX,top:b.clientY});let C=Array.from(y.files);g.length>0&&(C=C.filter(E=>!!(g.includes(E.type)||g.includes(`${E.type.split("/")[0]}/*`)))),C.length!==0&&f(c,C,(x===null?void 0:x.pos)||0),b.preventDefault(),b.stopPropagation()},handlePaste(v,b){var $;const{clipboardData:y}=b;if(!d||!(($=y==null?void 0:y.files)!=null&&$.length))return;let x=Array.from(y.files);const C=y.getData("text/html");g.length>0&&(x=x.filter(E=>!!(g.includes(E.type)||g.includes(`${E.type.split("/")[0]}/*`)))),x.length!==0&&d(c,x,C),b.preventDefault(),b.stopPropagation()}}})},cge=Extension.create({name:"fileHandler",addOptions:()=>({onPaste:void 0,onDrop:void 0,allowedMimeTypes:[]}),addProseMirrorPlugins(){return[uge({key:new PluginKey(this.name),editor:this.editor,allowedMimeTypes:this.options.allowedMimeTypes,onDrop:this.options.onDrop,onPaste:this.options.onPaste})]}}),dge={__name:"index",setup(s){const{options:l,container:c,editor:d,page:f,painter:g,blockMenu:v,tableOfContents:b,setEditor:$,editorDestroyed:y}=ie(),x=Je("document");let C=!0;(!l.value.document.enableMarkdown||!x.value.markdown)&&(C=[$0,ry,Typography]);const E=computed(()=>l.value.dicts.lineHeights.find(Y=>Y.default).value),N=new Editor({editable:!l.value.document.readOnly,autofocus:l.value.document.autofocus,content:l.value.document.content,enableInputRules:C,enablePasteRules:C,editorProps:{attributes:{class:"umo-editor"},...l.value.document.editorProps},parseOptions:l.value.document.parseOptions,extensions:[StarterKit.configure({document:!1,bold:!1,bulletList:!1,orderedList:!1,codeBlock:!1,horizontalRule:!1,gapcursor:!0,dropcursor:!1}),Document$1.extend({content:"page+"}),tge.configure({types:l.value.page.nodesComputedOption.types||[],slots:useSlots()}),Epe.configure({placeholder:mr(l.value.document.placeholder)}),FocusClasses.configure({className:"umo-node-focused",mode:"all"}),Ape,FontFamily,Tpe,Bold.extend({renderHTML:({HTMLAttributes:Y})=>["b",Y,0]}),Underline,Subscript,Superscript,Color,TextStyle,Highlight.configure({multicolor:!0}),Ppe,Mpe,Ipe,Npe,jpe,TaskItem.configure({nested:!0}),Dpe.configure({HTMLAttributes:{class:"umo-task-list"}}),Bpe.configure({types:["heading","paragraph"],defaultLineHeight:E.value}),Fpe,Kpe.configure({searchResultClass:"umo-search-result"}),Link,$0,nme,lme,$me,ghe,phe,bhe,Che,ry,She.configure({allowTableNodeSelection:!0}),TableRow,Ohe,xhe,Nhe,rfe,sge.configure({getIndex:lge,onUpdate:Y=>{b.value=Y},scrollParent:()=>document.querySelector(`${c} .umo-zoomable-container`),getId:()=>fa(6)}),Typography.configure(l.value.document.typographyRules),CharacterCount.configure({limit:l.value.document.characterLimit!==0?l.value.document.characterLimit:void 0}),cge.configure({allowedMimeTypes:l.value.file.allowedMimeTypes,onPaste(Y,re,se){re.forEach(de=>Y.commands.insertFile({file:de}))},onDrop:(Y,re,se)=>{re.forEach(de=>Y.commands.insertFile({file:de,pos:se}))}}),Dropcursor.configure({color:"var(--umo-primary-color)"}),...l.value.extensions],onCreate({editor:Y}){q(Y)},onUpdate({editor:Y}){x.value.content=Y.getHTML(),q(Y)}});$(N);let W=ref(!1);const q=Y=>{Y.isEmpty&&Y.state.doc.content.size<=4?(W.value=!0,Y.chain().setContent(`<p data-placeholder="${mr(l.value.document.placeholder)}"></p>`).focus(3).run()):W.value=!1};return onMounted(()=>{if(document.querySelector("#katex-style")===null&&!l.value.toolbar.disableMenuItems.includes("math")){const Y=document.createElement("link");Y.href=`${l.value.cdnUrl}/libs/katex/katex.min.css`,Y.rel="stylesheet",Y.id="katex-style",document.querySelector("head").append(Y)}}),window.addEventListener("load",function(){
  //setTimeout(function(){N.registerPlugin(Rhe(d,l.value.page.nodesComputedOption.nodesComputed||{}))},1000000),
  setTimeout(()=>{const Y=N.state.tr.setMeta("initSplit",!0);N.view.dispatch(Y)},500)}),onBeforeUnmount(()=>N.destroy()),(Y,re)=>{const se=Ope,de=hve;return openBlock(),createElementBlock(Fragment$1,null,[createVNode(unref(EditorContent),{class:normalizeClass(["umo-editor-container",{"is-empty":unref(W),"show-line-number":unref(f).showLineNumber,"format-painter":unref(g).enabled,"disable-page-break":!unref(f).pagination}]),editor:unref(d),style:normalizeStyle({lineHeight:E.value}),spellcheck:unref(l).document.enableSpellcheck&&unref(x).spellcheck},null,8,["class","editor","style","spellcheck"]),unref(d)&&!unref(f).preview.enabled&&!unref(y)?(openBlock(),createBlock(se,{key:0})):createCommentVNode("",!0),unref(l).document.enableBlockMenu&&!unref(f).preview.enabled&&unref(d)&&!unref(y)?(openBlock(),createBlock(de,{key:1})):createCommentVNode("",!0)],64)}}},fge={class:"umo-toc-container"},vge={class:"umo-toc-title"},pge={class:"umo-toc-content umo-scrollbar"},mge=["textContent"],hge=["data-heading","onClick"],gge={class:"umo-toc-text"},bge={__name:"toc",setup(s){const{container:l,editor:c,tableOfContents:d}=ie(),f=g=>{if(!c.value)return;const v=d.value.find(x=>x.isActive===!0);v&&(v.isActive=!1),g.isActive=!0;const b=c.value.view.dom.querySelector(`[data-toc-id="${g.id}"`);document.querySelector(`${l} .umo-zoomable-container`).scrollTo({top:b.offsetTop+10});const $=c.value.view.posAtDOM(b,0),y=c.value.view.state.tr;y.setSelection(new TextSelection(y.doc.resolve($))),c.value.view.dispatch(y),c.value.view.focus()};return(g,v)=>{const b=tt;return openBlock(),createElementBlock("div",fge,[createBaseVNode("div",vge,[createVNode(b,{class:"icon-toc",name:"toc"}),createTextVNode(" "+toDisplayString$1(g.t("toc.title"))+" ",1),createBaseVNode("div",{class:"umo-dialog__close",onClick:v[0]||(v[0]=$=>g.$emit("close"))},[createVNode(b,{name:"close"})])]),createBaseVNode("div",pge,[unref(d).length===0?(openBlock(),createElementBlock("div",{key:0,class:"umo-toc-empty",textContent:toDisplayString$1(g.t("toc.empty"))},null,8,mge)):(openBlock(!0),createElementBlock(Fragment$1,{key:1},renderList(unref(d),($,y)=>(openBlock(),createElementBlock("div",{class:normalizeClass(["umo-toc-item",{active:$.isActive,["level-"+$.level]:!0}]),key:$.id,"data-heading":"H"+$.originalLevel,onClick:x=>f($)},[createBaseVNode("div",gge,toDisplayString$1($.textContent),1)],10,hge))),128))])])}}},yge=Fe(bge,[["__scopeId","data-v-8b99114d"]]),_ge={class:"umo-page-container"},wge={class:"umo-zoomable-container umo-scrollbar"},Cge={__name:"page",setup(s){const l=ie(),{container:c,page:d,imagePreview:f}=ie(),g=computed(()=>{const{width:E,height:N}=d.value.size;return{width:d.value.orientation==="portrait"?E:N,height:d.value.orientation==="portrait"?N:E}}),v=computed(()=>`calc(${g.value.width+"cm"} * ${d.value.zoomLevel/100})`);let b=ref();const $=()=>{const E=document.querySelector(`${c} .umo-page-content`);if(!E){console.warn("The element <.umo-page-content> does not exist.");return}b.value=E.clientHeight*d.value.zoomLevel/100+"px"};watch(()=>[d.value.zoomLevel,d.value.size,d.value.orientation,d.value.pagination],async()=>{await nextTick(),setTimeout(()=>$(),100)},{immediate:!0,deep:!0}),watch(()=>{var E;return(E=l.editor.value)==null?void 0:E.getHTML()},()=>$());let y=ref([]),x=ref(0),C=ref(!1);return watch(()=>f.value,E=>{E?(document.querySelectorAll(`${c} .umo-page-content img:not(.icon)`).forEach(N=>{const W=N.getAttribute("src");W&&y.value.push(W)}),x.value=images.findIndex(N=>N===E),C.value=!0):(y.value=[],x.value=0,C.value=!1)}),(E,N)=>{const W=yge,q=dge,Y=Sde,re=sC,se=nV,de=ode,he=Jce;return openBlock(),createElementBlock("div",_ge,[unref(d).showToc?(openBlock(),createBlock(W,{key:0,onClose:N[0]||(N[0]=ge=>unref(d).showToc=!1)})):createCommentVNode("",!0),createBaseVNode("div",wge,[createBaseVNode("div",{class:"umo-zoomable-content",style:normalizeStyle({width:v.value,height:unref(b)})},[createBaseVNode("div",{class:"umo-page-content",style:normalizeStyle({width:g.value.width+"cm",transform:`scale(${unref(d).zoomLevel/100})`})},[createVNode(q,null,{page_header:withCtx(ge=>[renderSlot(E.$slots,"page_header",normalizeProps(guardReactiveProps(ge)),void 0,!0)]),page_footer:withCtx(ge=>[renderSlot(E.$slots,"page_footer",normalizeProps(guardReactiveProps(ge)),void 0,!0)]),bubble_menu:withCtx(ge=>[renderSlot(E.$slots,"bubble_menu",normalizeProps(guardReactiveProps(ge)),void 0,!0)]),_:3})],4),createVNode(Y)],4)]),createVNode(re,{modelValue:unref(C),"onUpdate:modelValue":N[1]||(N[1]=ge=>isRef(C)?C.value=ge:C=ge),images:unref(y),index:unref(x),onClose:N[2]||(N[2]=ge=>f.value=!1)},null,8,["modelValue","images","index"]),createVNode(se,{container:`${unref(c)} .umo-zoomable-container`,"visible-height":800,size:"small",offset:["25px","30px"]},null,8,["container"]),createVNode(de),createVNode(he)])}}},kge=Fe(Cge,[["__scopeId","data-v-421d320c"]]),$ge={},Sge={class:"umo-source-container"},xge={class:"umo-source-title"};function Oge(s,l){const c=tt;return openBlock(),createElementBlock("div",Sge,[createBaseVNode("h3",xge,[createVNode(c,{name:"code",class:"icon-source"}),createTextVNode(" "+toDisplayString$1(s.t("toolbar.source")),1)])])}const Ege=Fe($ge,[["render",Oge],["__scopeId","data-v-4818ae6e"]]),Age={__name:"scrollable",setup(s,{expose:l}){const c=ref(null),d=ref(null);let f=ref(!0),g=ref(!0);const v=()=>{const{scrollLeft:y,scrollWidth:x,clientWidth:C}=d.value;f.value=y===0,g.value=y+C+1>=x},b=()=>d.value.scrollLeft-=100,$=()=>d.value.scrollLeft+=100;return useResizeObserver(c,()=>{v()}),onMounted(()=>{d.value.addEventListener("scroll",v)}),l({update:()=>{d.value.scrollLeft=0,g.value=!0,v()}}),(y,x)=>{const C=tt;return openBlock(),createElementBlock("div",{ref_key:"wraperRef",ref:c,class:"umo-scrollable-container"},[unref(f)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:0,class:"umo-scrollable-control scrollable-left",onClick:b},[createVNode(C,{name:"arrow-down"})])),createBaseVNode("div",{ref_key:"contentRef",ref:d,class:"umo-scrollable-content"},[renderSlot(y.$slots,"default",{},void 0,!0)],512),unref(g)?createCommentVNode("",!0):(openBlock(),createElementBlock("div",{key:1,class:"umo-scrollable-control scrollable-right",onClick:$},[createVNode(C,{name:"arrow-down"})]))],512)}}},Fk=Fe(Age,[["__scopeId","data-v-f4aaf0d0"]]),Tge={class:"umo-embed-container"},Pge=["textContent"],Mge={__name:"embed",setup(s){const{options:l}=ie();let c=ref(!1);const d=computed(()=>`<iframe src="${l.value.shareUrl}" width="100%" height="720px" frameborder="0" allowfullscreen="true"></iframe>`),f=()=>{const{copy:g}=useClipboard({source:d});g(),qe("success",J("export.embed.copied")),c.value=!1};return(g,v)=>{const b=ce,$=Hr,y=Mn;return openBlock(),createElementBlock(Fragment$1,null,[createVNode(b,{ico:"embed",text:g.t("export.embed.text"),huge:"",onMenuClick:v[0]||(v[0]=x=>isRef(c)?c.value=!0:c=!0)},null,8,["text"]),createVNode(y,{visible:unref(c),icon:"embed",header:g.t("export.embed.title"),width:"460px",confirmBtn:g.t("export.embed.copy"),onConfirm:f,onClose:v[1]||(v[1]=x=>isRef(c)?c.value=!1:c=!1)},{default:withCtx(()=>[createBaseVNode("div",Tge,[createBaseVNode("div",{class:"umo-embed-tip",textContent:toDisplayString$1(g.t("export.embed.tip"))},null,8,Pge),createVNode($,{class:"umo-embed-textarea",value:unref(d),readonly:"",autosize:""},null,8,["value"])])]),_:1},8,["visible","header","confirmBtn"])],64)}}},Lk=Fe(Mge,[["__scopeId","data-v-31ddb518"]]),Ige={class:"umo-share-container"},Nge=["textContent"],jge={__name:"share",setup(s){const{options:l}=ie();let c=ref(!1);const d=()=>{const{copy:f}=useClipboard({source:l.value.shareUrl});f(),qe("success",J("export.share.copied")),c.value=!1};return(f,g)=>{const v=ce,b=Hr,$=Mn;return openBlock(),createElementBlock(Fragment$1,null,[createVNode(v,{ico:"share",text:f.t("export.share.text"),huge:"",onMenuClick:g[0]||(g[0]=y=>isRef(c)?c.value=!0:c=!0)},null,8,["text"]),createVNode($,{visible:unref(c),icon:"share",header:f.t("export.share.text"),width:"420px",confirmBtn:f.t("export.share.copy"),onConfirm:d,onClose:g[1]||(g[1]=y=>isRef(c)?c.value=!1:c=!1)},{default:withCtx(()=>[createBaseVNode("div",Ige,[createBaseVNode("div",{class:"umo-share-tip",textContent:toDisplayString$1(f.t("export.share.tip"))},null,8,Nge),createVNode(b,{class:"umo-share-textarea",value:unref(l).shareUrl,readonly:"",autosize:""},null,8,["value"])])]),_:1},8,["visible","header","confirmBtn"])],64)}}},Rk=Fe(jge,[["__scopeId","data-v-f2e0e340"]]),zk={__name:"text",setup(s){const{options:l,editor:c}=ie(),d=()=>{var f;if(!c.value)return;const g=new Blob([(f=c.value)==null?void 0:f.getText()],{type:"text/plain;charset=utf-8"}),{title:v}=l.value.document,b=v!==""?l.value.document.title:J("document.untitled");FileSaver_minExports.saveAs(g,`${b}.txt`)};return(f,g)=>{const v=ce;return openBlock(),createBlock(v,{ico:"text",text:f.t("export.text"),huge:"",onMenuClick:d},null,8,["text"])}}},Vk={__name:"pdf",setup(s){const{exportPDF:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{text:"PDF",ico:"pdf",huge:"",onMenuClick:d[0]||(d[0]=g=>l.value=!0)})}}},Hk={__name:"image",setup(s){const{container:l,options:c,page:d,exportImage:f}=ie(),g=[{content:J("export.image.png"),value:"png"},{content:J("export.image.jpg"),value:"jpg"}],v=async({content:b,value:$})=>{if(!b)return;const y=d.value.zoomLevel;f.value=!0;try{d.value.zoomLevel=100,await nextTick();const x=document.querySelector(`${l} .umo-page-content`),C=await domToImageMore_minExports.toBlob(x,{scale:devicePixelRatio}),{title:E}=c.value.document,N=E!==""?c.value.document.title:J("document.untitled");FileSaver_minExports.saveAs(C,`${N}${devicePixelRatio>1?"@"+devicePixelRatio+"x":""}.${$}`)}catch{const x=Fo({theme:"warning",header:J("export.image.error.title"),body:J("export.image.error.message"),onConfirm(){x.destroy()}})}finally{d.value.zoomLevel=y,f.value=!1}};return(b,$)=>{const y=ce;return openBlock(),createBlock(y,{ico:"image",text:b.t("export.image.text"),"menu-type":"dropdown",huge:"","select-options":g,onClick:v},null,8,["text"])}}},Uk={__name:"preview",setup(s){const{page:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"preview",text:c.t("page.preview"),shortcut:"F5",huge:"","menu-active":unref(l).preview.enabled,onMenuClick:d[0]||(d[0]=g=>unref(l).preview.enabled=!unref(l).preview.enabled)},null,8,["text","menu-active"])}}},Dge={class:"umo-background-container"},Bge=["onClick"],Fge={class:"umo-background-more-menu"},Lge=["textContent"],Rge={class:"umo-background-more-arrow"},zge={__name:"background",setup(s){let{popupVisible:l,togglePopup:c}=Qt();const{container:d,page:f}=ie(),g=[{label:J("page.bg.default"),value:f.value.defaultBackground},{label:J("page.bg.color1"),value:"rgb(233, 246, 227)"},{label:J("page.bg.color2"),value:"rgb(252, 242, 224)"},{label:J("page.bg.color3"),value:"rgb(237, 244, 255)"},{label:J("page.bg.color4"),value:"rgb(153, 205, 250)"},{label:J("page.bg.color5"),value:"rgb(145, 145, 145)"}],v=ref(!1),b=$=>{f.value.background=$};return($,y)=>{const x=tt,C=eC,E=Pn,N=ce;return openBlock(),createBlock(N,{ico:"page-background",text:$.t("page.bg.text"),huge:"","menu-type":"popup","popup-visible":unref(l),onTogglePopup:unref(c)},{content:withCtx(()=>[createBaseVNode("div",Dge,[(openBlock(),createElementBlock(Fragment$1,null,renderList(g,(W,q)=>createBaseVNode("div",{class:normalizeClass(["umo-background-item",{active:unref(f).background===W.value}]),style:normalizeStyle({backgroundColor:W.value}),key:q,onClick:Y=>b(W.value)},toDisplayString$1(W.label),15,Bge)),64))]),createVNode(E,{attach:unref(d),trigger:"click",placement:"right-bottom",onVisibleChange:y[0]||(y[0]=W=>v.value=W)},{content:withCtx(()=>[createVNode(C,{size:"small","color-modes":["monochrome"],"swatch-colors":[],"enable-alpha":"",onChange:b})]),default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["umo-background-more",{active:v.value}])},[createBaseVNode("div",Fge,[createVNode(x,{name:"palette-color"}),createBaseVNode("span",{textContent:toDisplayString$1($.t("page.bg.custom"))},null,8,Lge)]),createBaseVNode("div",Rge,[createVNode(x,{name:"arrow-down"})])],2)]),_:1},8,["attach"])]),_:1},8,["text","popup-visible","onTogglePopup"])}}},Kk=Fe(zge,[["__scopeId","data-v-afb3f99c"]]),Wk=s=>(pushScopeId("data-v-77bc2856"),s=s(),popScopeId(),s),Vge={class:"umo-watermark-container"},Hge={class:"umo-watermark-toolbar"},Uge=["textContent"],Kge={class:"umo-watermark-type"},Wge=Wk(()=>createBaseVNode("div",{class:"bg"},null,-1)),Gge=["textContent"],qge=Wk(()=>createBaseVNode("div",{class:"bg"},null,-1)),Yge=["textContent"],Zge={__name:"watermark",setup(s){let{popupVisible:l,togglePopup:c}=Qt();const{options:d,page:f}=ie(),g=d.value.dicts.fonts.map(b=>({label:mr(b.label),value:b.value})),v=()=>{f.value.watermark.text="",l.value=!1};return(b,$)=>{const y=ce,x=Cr,C=Aa,E=ol,N=er,W=Tt;return openBlock(),createBlock(y,{ico:"watermark",text:b.t("page.watermark.text"),huge:"","menu-type":"popup","popup-visible":unref(l),onTogglePopup:unref(c)},{content:withCtx(()=>[createBaseVNode("div",Vge,[createBaseVNode("div",Hge,[createVNode(y,{style:{width:"140px"},tooltip:b.t("page.watermark.fontFamily"),"menu-type":"select","select-options":unref(g),"select-value":unref(f).watermark.fontFamily,onMenuClick:$[0]||($[0]=q=>unref(f).watermark.fontFamily=q)},null,8,["tooltip","select-options","select-value"]),createVNode(y,{"menu-type":"input",tooltip:b.t("page.watermark.fontSize")},{default:withCtx(()=>[createVNode(x,{modelValue:unref(f).watermark.fontSize,"onUpdate:modelValue":$[1]||($[1]=q=>unref(f).watermark.fontSize=q),style:{width:"60px"},size:"small",theme:"column",align:"center",max:96,min:12,"allow-input-over-limit":!1,placeholder:""},null,8,["modelValue"])]),_:1},8,["tooltip"]),createVNode(C,{text:b.t("page.watermark.fontColor"),"default-color":unref(f).watermark.fontColor,modeless:"",onChange:$[2]||($[2]=q=>unref(f).watermark.fontColor=q)},null,8,["text","default-color"]),createVNode(E,{"menu-active":unref(f).watermark.fontWeight==="bold",onMenuClickThrough:$[3]||($[3]=q=>unref(f).watermark.fontWeight==="bold"?unref(f).watermark.fontWeight="normal":unref(f).watermark.fontWeight="bold")},null,8,["menu-active"])]),createVNode(N,{modelValue:unref(f).watermark.text,"onUpdate:modelValue":$[4]||($[4]=q=>unref(f).watermark.text=q),modelModifiers:{trim:!0},maxlength:"30",clearable:"",placeholder:b.t("page.watermark.content")},null,8,["modelValue","placeholder"]),createBaseVNode("div",{class:"umo-watermark-type-title",textContent:toDisplayString$1(b.t("page.watermark.type"))},null,8,Uge),createBaseVNode("div",Kge,[createBaseVNode("div",{class:normalizeClass(["item compact",{active:unref(f).watermark.type==="compact"}]),onClick:$[5]||($[5]=q=>unref(f).watermark.type="compact")},[Wge,createBaseVNode("span",{textContent:toDisplayString$1(b.t("page.watermark.compact"))},null,8,Gge)],2),createBaseVNode("div",{class:normalizeClass(["item spacious",{active:unref(f).watermark.type==="spacious"}]),onClick:$[6]||($[6]=q=>unref(f).watermark.type="spacious")},[qge,createBaseVNode("span",{textContent:toDisplayString$1(b.t("page.watermark.spacious"))},null,8,Yge)],2)]),unref(f).watermark.text!==""?(openBlock(),createBlock(W,{key:0,class:"umo-clear-button",block:"",variant:"outline",textContent:toDisplayString$1(b.t("page.watermark.clear")),onClick:v},null,8,["textContent"])):createCommentVNode("",!0)])]),_:1},8,["text","popup-visible","onTogglePopup"])}}},Gk=Fe(Zge,[["__scopeId","data-v-77bc2856"]]),qk={__name:"line-number",setup(s){const{page:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"line-number",text:c.t("page.lineNumber"),"menu-active":unref(l).showLineNumber,huge:"",onMenuClick:d[0]||(d[0]=g=>unref(l).showLineNumber=!unref(l).showLineNumber)},null,8,["text","menu-active"])}}},Yk={__name:"break",setup(s){const{editor:l}=ie(),c=()=>{var d;(d=l.value)==null||d.chain().focus().setPageBreak().run()};return(d,f)=>{const g=ce;return openBlock(),createBlock(g,{ico:"page-break",text:d.t("page.break"),shortcut:"Ctrl+Enter",huge:"",onMenuClick:c},null,8,["text"])}}},Zk={__name:"footer",setup(s){const{page:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"page-footer",text:unref(l).footer?c.t("page.footer.hide"):c.t("page.footer.show"),huge:"",onMenuClick:d[0]||(d[0]=g=>unref(l).footer=!unref(l).footer)},null,8,["text"])}}},Xk={__name:"header",setup(s){const{page:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"page-header",text:unref(l).header?c.t("page.header.hide"):c.t("page.header.show"),huge:"",onMenuClick:d[0]||(d[0]=g=>unref(l).header=!unref(l).header)},null,8,["text"])}}},Xge={class:"label"},Jk={__name:"orientation",setup(s){const{page:l}=ie(),c=[{label:J("page.orientation.landscape"),value:"landscape"},{label:J("page.orientation.portrait"),value:"portrait"}];return(d,f)=>{const g=tt,v=Vr,b=wr,$=ce;return openBlock(),createBlock($,{ico:"page-orientation",text:d.t("page.orientation.text"),"menu-type":"dropdown","overlay-class-name":"umo-page-orientation-dropdown"},{dropmenu:withCtx(()=>[createVNode(b,null,{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment$1,null,renderList(c,(y,x)=>createVNode(v,{key:x,value:y.value,active:unref(l).orientation===y.value,onClick:C=>unref(l).orientation=y.value},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["icon-orientation",{rotate:y.value==="landscape"}])},[createVNode(g,{name:"page"})],2),createBaseVNode("div",Xge,toDisplayString$1(y.label),1)]),_:2},1032,["value","active","onClick"])),64))]),_:1})]),_:1},8,["text"])}}},Jge={class:"umo-page-options-container"},Qge=["textContent"],ebe={class:"desc"},tbe={class:"umo-page-setting"},nbe={class:"item"},rbe={class:"item"},abe={class:"umo-page-margin-inbuilt"},obe=["textContent"],ibe=["textContent"],lbe=["textContent"],sbe=["textContent"],ube={class:"umo-page-setting"},cbe={class:"item"},dbe={class:"item"},fbe={class:"item"},vbe={class:"item"},pbe={__name:"page-options",props:{visible:{type:Boolean,required:!0}},emits:["close"],setup(s,{emit:l}){const c=l,{container:d,options:f,page:g}=ie();let v=ref(JSON.parse(JSON.stringify(g.value)));const b=E=>{v.value.size=f.value.dicts.pageSizes[E]},$=(E,N)=>{if(!E||E<10){v.value.size[N]=10;return}v.value.size.label=J("pageOptions.size.custom")},y=E=>{v.value.margin=E},x=(E,N)=>{if(!E||E<0){v.value.margin[N]=0;return}v.value.margin.layout="custom",y(v.value.margin)},C=()=>{g.value=v.value,c("close")};return(E,N)=>{const W=tt,q=Ww,Y=Kw,re=hv,se=Gi,de=Wi,he=Cr,ge=mv,Se=Mn;return openBlock(),createBlock(Se,{visible:s.visible,icon:"page-margin",header:E.t("pageOptions.title"),width:"460px",onClose:N[17]||(N[17]=Ae=>c("close")),onConfirm:C},{default:withCtx(()=>[createBaseVNode("div",Jge,[createVNode(ge,{"label-align":"left"},{default:withCtx(()=>[createVNode(re,{label:E.t("page.orientation.text")},{default:withCtx(()=>[createVNode(Y,{modelValue:unref(v).orientation,"onUpdate:modelValue":N[0]||(N[0]=Ae=>unref(v).orientation=Ae),variant:"default-filled"},{default:withCtx(()=>[createVNode(q,{value:"landscape"},{default:withCtx(()=>[createVNode(W,{name:"page"}),createTextVNode(" "+toDisplayString$1(E.t("page.orientation.landscape")),1)]),_:1}),createVNode(q,{value:"portrait"},{default:withCtx(()=>[createVNode(W,{class:"icon-rotate",name:"page"}),createTextVNode(" "+toDisplayString$1(E.t("page.orientation.portrait")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"]),createVNode(re,{label:E.t("page.size.text")},{default:withCtx(()=>[createVNode(de,{"popup-props":{overlayClassName:"umo-page-size-select",destroyOnClose:!0,attach:unref(d)},placeholder:"",onChange:b},{valueDisplay:withCtx(()=>[createTextVNode(toDisplayString$1(unref(v).size.label),1)]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(f).dicts.pageSizes,(Ae,Re)=>(openBlock(),createBlock(se,{key:Re,value:Re},{default:withCtx(()=>[createBaseVNode("div",{class:"label",textContent:toDisplayString$1(E.l(Ae.label))},null,8,Qge),createBaseVNode("div",ebe,toDisplayString$1(Ae.width)+toDisplayString$1(E.t("page.size.cm"))+"  "+toDisplayString$1(Ae.height)+toDisplayString$1(E.t("page.size.cm")),1)]),_:2},1032,["value"]))),128))]),_:1},8,["popup-props"])]),_:1},8,["label"]),createVNode(re,{label:E.t("pageOptions.size.text")},{default:withCtx(()=>[createBaseVNode("div",tbe,[createBaseVNode("div",nbe,[createVNode(he,{class:"umo-page-setting-number",modelValue:unref(v).size.width,"onUpdate:modelValue":N[1]||(N[1]=Ae=>unref(v).size.width=Ae),theme:"normal",align:"center",min:10,label:E.t("pageOptions.size.width"),suffix:E.t("page.size.cm"),placeholder:"","allow-input-overLimit":!1,onBlur:N[2]||(N[2]=Ae=>$(Ae,"width"))},null,8,["modelValue","label","suffix"])]),createBaseVNode("div",rbe,[createVNode(he,{class:"umo-page-setting-number",modelValue:unref(v).size.height,"onUpdate:modelValue":N[3]||(N[3]=Ae=>unref(v).size.height=Ae),theme:"normal",align:"center",min:10,label:E.t("pageOptions.size.height"),suffix:E.t("page.size.cm"),placeholder:"","allow-input-overLimit":!1,onBlur:N[4]||(N[4]=Ae=>$(Ae,"height"))},null,8,["modelValue","label","suffix"])])])]),_:1},8,["label"]),createVNode(re,{label:E.t("pageOptions.margin.text"),name:"name"},{default:withCtx(()=>[createBaseVNode("div",null,[createBaseVNode("div",abe,[createBaseVNode("div",{class:normalizeClass(["item",{active:!unref(v).margin.layout}]),textContent:toDisplayString$1(E.t("pageOptions.margin.default")),onClick:N[5]||(N[5]=Ae=>y(unref(f).page.defaultMargin))},null,10,obe),createBaseVNode("div",{class:normalizeClass(["item narrow",{active:unref(v).margin.layout==="narrow"}]),textContent:toDisplayString$1(E.t("pageOptions.margin.narrow")),onClick:N[6]||(N[6]=Ae=>y({left:1.27,right:1.27,top:1.27,bottom:1.27,layout:"narrow"}))},null,10,ibe),createBaseVNode("div",{class:normalizeClass(["item moderate",{active:unref(v).margin.layout==="moderate"}]),textContent:toDisplayString$1(E.t("pageOptions.margin.moderate")),onClick:N[7]||(N[7]=Ae=>y({left:1.91,right:1.91,top:2.54,bottom:2.54,layout:"moderate"}))},null,10,lbe),createBaseVNode("div",{class:normalizeClass(["item wide",{active:unref(v).margin.layout==="wide"}]),textContent:toDisplayString$1(E.t("pageOptions.margin.wide")),onClick:N[8]||(N[8]=Ae=>y({top:2.54,bottom:2.54,left:5.08,right:5.08,layout:"wide"}))},null,10,sbe)]),createBaseVNode("div",ube,[createBaseVNode("div",cbe,[createVNode(he,{class:"umo-page-setting-number",modelValue:unref(v).margin.top,"onUpdate:modelValue":N[9]||(N[9]=Ae=>unref(v).margin.top=Ae),theme:"normal",align:"center",min:0,step:.1,label:E.t("pageOptions.margin.top"),suffix:E.t("page.size.cm"),placeholder:"","allow-input-overLimit":!1,onBlur:N[10]||(N[10]=Ae=>x(Ae,"top"))},null,8,["modelValue","label","suffix"])]),createBaseVNode("div",dbe,[createVNode(he,{class:"umo-page-setting-number",modelValue:unref(v).margin.bottom,"onUpdate:modelValue":N[11]||(N[11]=Ae=>unref(v).margin.bottom=Ae),theme:"normal",align:"center",min:0,step:.1,label:E.t("pageOptions.margin.bottom"),suffix:E.t("page.size.cm"),placeholder:"","allow-input-overLimit":!1,onBlur:N[12]||(N[12]=Ae=>x(Ae,"bottom"))},null,8,["modelValue","label","suffix"])]),createBaseVNode("div",fbe,[createVNode(he,{class:"umo-page-setting-number",modelValue:unref(v).margin.left,"onUpdate:modelValue":N[13]||(N[13]=Ae=>unref(v).margin.left=Ae),theme:"normal",align:"center",min:0,step:.1,label:E.t("pageOptions.margin.left"),suffix:E.t("page.size.cm"),placeholder:"","allow-input-overLimit":!1,onBlur:N[14]||(N[14]=Ae=>x(Ae,"left"))},null,8,["modelValue","label","suffix"])]),createBaseVNode("div",vbe,[createVNode(he,{class:"umo-page-setting-number",modelValue:unref(v).margin.right,"onUpdate:modelValue":N[15]||(N[15]=Ae=>unref(v).margin.right=Ae),theme:"normal",align:"center",min:0,step:.1,label:E.t("pageOptions.margin.right"),suffix:E.t("page.size.cm"),placeholder:"","allow-input-overLimit":!1,onBlur:N[16]||(N[16]=Ae=>x(Ae,"right"))},null,8,["modelValue","label","suffix"])])])])]),_:1},8,["label"])]),_:1})])]),_:1},8,["visible","header"])}}},Qk=Fe(pbe,[["__scopeId","data-v-6e789392"]]),mbe=["textContent"],hbe={class:"desc"},gbe=["textContent"],e$={__name:"size",setup(s){const{options:l,page:c}=ie();let d=ref(!1);return(f,g)=>{const v=Vr,b=wr,$=Qk,y=ce;return openBlock(),createBlock(y,{ico:"page-size",text:f.t("page.size.text"),"menu-type":"dropdown","overlay-class-name":"umo-page-size-dropdown"},{dropmenu:withCtx(()=>[createVNode(b,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(l).dicts.pageSizes,(x,C)=>(openBlock(),createBlock(v,{key:C,value:C,active:unref(c).size.width===x.width,divider:unref(l).dicts.pageSizes.length-1===C,"min-column-width":150,onClick:E=>unref(c).size=x},{default:withCtx(()=>[createBaseVNode("div",{class:"label",textContent:toDisplayString$1(f.l(x.label))},null,8,mbe),createBaseVNode("div",hbe,toDisplayString$1(x.width+f.t("page.size.cm"))+"  "+toDisplayString$1(x.height+f.t("page.size.cm")),1)]),_:2},1032,["value","active","divider","onClick"]))),128)),createVNode(v,{onClick:g[0]||(g[0]=x=>isRef(d)?d.value=!0:d=!0)},{default:withCtx(()=>[createBaseVNode("div",{class:"label",textContent:toDisplayString$1(f.t("page.size.custom"))},null,8,gbe)]),_:1})]),_:1})]),default:withCtx(()=>[createVNode($,{visible:unref(d),onClose:g[1]||(g[1]=x=>isRef(d)?d.value=!1:d=!1)},null,8,["visible"])]),_:1},8,["text"])}}},t$={__name:"margin",setup(s){let l=ref(!1);return(c,d)=>{const f=Qk,g=ce;return openBlock(),createBlock(g,{ico:"page-margin",text:c.t("page.margin"),huge:"",onMenuClick:d[1]||(d[1]=v=>isRef(l)?l.value=!0:l=!0)},{default:withCtx(()=>[createVNode(f,{visible:unref(l),onClose:d[0]||(d[0]=v=>isRef(l)?l.value=!1:l=!1)},null,8,["visible"])]),_:1},8,["text"])}}},n$={__name:"toggle-toc",setup(s){const{page:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"toc",text:c.t("toc.show"),huge:"","menu-active":unref(l).showToc,onMenuClick:d[0]||(d[0]=g=>unref(l).showToc=!unref(l).showToc)},null,8,["text","menu-active"])}}},bbe={class:"label"},ybe={class:"desc"},r$={__name:"chinese-case",setup(s){const{editor:l}=ie(),c=[{label:"  ",desc:"",func(f){const g=f.toString().replaceAll(",","").replaceAll("","").replaceAll(" ","");return Vo.toMoney(g,{unOmitYuan:!0,forceZheng:!0})}},{label:"  ",desc:"",func:f=>Vo.encodeS(f)},{label:"  ",desc:"1.23456789e+21",func:f=>Vo.encodeS(f),divider:!0},{label:"  ",desc:"54,321.00",func(f){const g=f.replaceAll("","").replaceAll("","").replaceAll("",""),v=Vo.decodeB(g).toString().split(".");return v[0]=v[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),v.length===2?v[1]=v[1].padEnd(2,"0"):v.push("00"),""+v.join(".")}},{label:"  ",desc:"54321",func:f=>Vo.decodeS(f)}],d=f=>{try{if(!l.value)return;const g=Au(l.value);if(g==="")return;const v=f(g);if(v==="")throw new Error("");l.value.chain().focus().insertContent(v.toString()).run()}catch{qe("error","")}};return(f,g)=>{const v=Vr,b=wr,$=ce;return openBlock(),createBlock($,{ico:"chinese-case",text:f.t("tools.chineseCase.text"),tooltip:f.t("tools.chineseCase.tip"),"menu-type":"dropdown",huge:"","overlay-class-name":"umo-chinese-case-dropdown"},{dropmenu:withCtx(()=>[createVNode(b,null,{default:withCtx(()=>[(openBlock(),createElementBlock(Fragment$1,null,renderList(c,y=>createVNode(v,{key:y.value,value:y.value,divider:y.divider,onClick:x=>d(y.func)},{default:withCtx(()=>[createBaseVNode("div",bbe,toDisplayString$1(y.label),1),createBaseVNode("div",ybe,toDisplayString$1(y.desc),1)]),_:2},1032,["value","divider","onClick"])),64))]),_:1})]),_:1},8,["text","tooltip"])}}},a$={__name:"delete",setup(s){const{editor:l}=ie(),c=()=>{const d=Nr({theme:"danger",header:J("table.delete.title"),body:J("table.delete.message"),confirmBtn:{theme:"danger",content:J("table.delete.delete")},onConfirm(){var f;(f=l.value)==null||f.chain().focus().deleteTable().run(),qe("success",J("table.delete.success")),d.destroy()}})};return(d,f)=>{var g;const v=ce;return openBlock(),createBlock(v,{ico:"table-delete",text:d.t("table.delete.text"),huge:"",disabled:!((g=unref(l))!=null&&g.can().deleteTable()),onMenuClick:c},null,8,["text","disabled"])}}},o$={__name:"previous-cell",setup(s){const{editor:l}=ie(),c=Je("toolbar");return(d,f)=>{var g;const v=ce;return openBlock(),createBlock(v,{ico:"table-previous-cell",text:d.t("table.prevCell"),shortcut:"Shift+Tab","hide-text":unref(c).mode==="classic",disabled:!((g=unref(l))!=null&&g.can().goToPreviousCell()),onMenuClick:f[0]||(f[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().goToPreviousCell().run()})},null,8,["text","hide-text","disabled"])}}},i$={__name:"next-cell",setup(s){const{editor:l}=ie(),c=Je("toolbar");return(d,f)=>{var g;const v=ce;return openBlock(),createBlock(v,{ico:"table-next-cell",text:d.t("table.nextCell"),shortcut:"Tab","hide-text":unref(c).mode==="classic",disabled:!((g=unref(l))!=null&&g.can().goToNextCell()),onMenuClick:f[0]||(f[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().goToNextCell().run()})},null,8,["text","hide-text","disabled"])}}},l$={__name:"toggle-header-cell",setup(s){const{editor:l}=ie(),c=Je("toolbar");return(d,f)=>{var g;const v=ce;return openBlock(),createBlock(v,{ico:"table-header-cell",text:d.t("table.toggleHeaderCell"),"hide-text":unref(c).mode==="classic",disabled:!((g=unref(l))!=null&&g.can().toggleHeaderCell()),onMenuClick:f[0]||(f[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().toggleHeaderCell().run()})},null,8,["text","hide-text","disabled"])}}},s$={__name:"toggle-header-column",setup(s){const{editor:l}=ie(),c=Je("toolbar");return(d,f)=>{var g;const v=ce;return openBlock(),createBlock(v,{ico:"table-header-column",text:d.t("table.toggleHeaderColumn"),"hide-text":unref(c).mode==="classic",disabled:!((g=unref(l))!=null&&g.can().toggleHeaderColumn()),onMenuClick:f[0]||(f[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().toggleHeaderColumn().run()})},null,8,["text","hide-text","disabled"])}}},u$={__name:"toggle-header-row",setup(s){const{editor:l}=ie(),c=Je("toolbar");return(d,f)=>{var g;const v=ce;return openBlock(),createBlock(v,{ico:"table-header-row",text:d.t("table.toggleHeaderRow"),"hide-text":unref(c).mode==="classic",disabled:!((g=unref(l))!=null&&g.can().toggleHeaderRow()),onMenuClick:f[0]||(f[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().toggleHeaderRow().run()})},null,8,["text","hide-text","disabled"])}}},c$={__name:"fix",setup(s){const{editor:l}=ie();return(c,d)=>{var f;const g=ce;return openBlock(),createBlock(g,{ico:"table-fix",text:c.t("table.fix.text"),tooltip:c.t("table.fix.tip"),huge:"",disabled:!((f=unref(l))!=null&&f.can().fixTables()),onMenuClick:d[0]||(d[0]=v=>{var b;return(b=unref(l))==null?void 0:b.chain().focus().fixTables().run()})},null,8,["text","tooltip","disabled"])}}},_be=["onMouseover"],wbe={class:"umo-table-custom"},Cbe=["textContent"],kbe={__name:"insert",setup(s){let{popupVisible:l,togglePopup:c}=Qt();const{editor:d}=ie(),f=Array.from({length:8},()=>Array.from({length:10},()=>""));let g=ref({rows:0,cols:0}),v=ref(!0);const b=(C,E)=>g.value.rows&&g.value.rows>C&&g.value.cols&&g.value.cols>E,$=(C,E)=>{g.value.rows=C+1,g.value.cols=E+1},y=()=>{g.value.rows=0,g.value.cols=0},x=()=>{var C;const{rows:E,cols:N}=g.value;E===0||E>1e3||N===0||N>30||((C=d.value)==null||C.chain().focus().insertTable({rows:E,cols:N,withHeaderRow:v.value}).run(),l.value=!1)};return(C,E)=>{const N=Cr,W=iu,q=Tt,Y=ce;return openBlock(),createBlock(Y,{ico:"table",text:C.t("table.insert.text"),tooltip:C.t("table.insert.tip"),"menu-type":"popup",huge:"","popup-visible":unref(l),onTogglePopup:unref(c)},{content:withCtx(()=>[createBaseVNode("div",{class:"umo-table-grid",onMouseleave:y},[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(f),(re,se)=>(openBlock(),createElementBlock("div",{key:se,class:"row"},[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(re,(de,he)=>(openBlock(),createElementBlock("div",{key:he,class:normalizeClass(["cell",{selected:b(se,he)}]),onMouseover:ge=>$(se,he),onClick:x},null,42,_be))),128))]))),128))],32),createBaseVNode("div",wbe,[createBaseVNode("div",{class:"umo-table-custom-title",textContent:toDisplayString$1(C.t("table.insert.property"))},null,8,Cbe),createVNode(N,{modelValue:unref(g).rows,"onUpdate:modelValue":E[0]||(E[0]=re=>unref(g).rows=re),theme:"column",align:"right",max:1e3,min:0,label:C.t("table.insert.rows")},null,8,["modelValue","label"]),createVNode(N,{modelValue:unref(g).cols,"onUpdate:modelValue":E[1]||(E[1]=re=>unref(g).cols=re),theme:"column",align:"right",max:30,min:0,label:C.t("table.insert.cols")},null,8,["modelValue","label"]),createVNode(W,{modelValue:unref(v),"onUpdate:modelValue":E[2]||(E[2]=re=>isRef(v)?v.value=re:v=re)},{default:withCtx(()=>[createTextVNode(toDisplayString$1(C.t("table.insert.withHeader")),1)]),_:1},8,["modelValue"]),createVNode(q,{class:"umo-insert-button",block:"",theme:"primary",variant:"base",textContent:toDisplayString$1(C.t("table.insert.create")),onClick:x},null,8,["textContent"])])]),_:1},8,["text","tooltip","popup-visible","onTogglePopup"])}}},d$=Fe(kbe,[["__scopeId","data-v-378339ef"]]),$be={class:"title"},Sbe={key:0,class:"description"},f$={__name:"template",setup(s){const{options:l,editor:c}=ie(),d=({content:f})=>{!f||!c.value||c.value.commands.insertContent(f)};return(f,g)=>{const v=Vr,b=wr,$=ce;return unref(l).templates.length>0?(openBlock(),createBlock($,{key:0,ico:"template",text:f.t("insert.template"),"menu-type":"dropdown",huge:"","overlay-class-name":"umo-templates-dropdown"},{dropmenu:withCtx(()=>[createVNode(b,null,{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(l).templates,y=>(openBlock(),createBlock(v,{key:y.value,value:y.value,divider:y.divider,class:normalizeClass({"has-description":y.description&&y.description!==""}),onClick:x=>d(y)},{default:withCtx(()=>[createBaseVNode("div",$be,toDisplayString$1(y.title),1),y.description&&y.description!==""?(openBlock(),createElementBlock("div",Sbe,toDisplayString$1(y.description),1)):createCommentVNode("",!0)]),_:2},1032,["value","divider","class","onClick"]))),128))]),_:1})]),_:1},8,["text"])):createCommentVNode("",!0)}}},xbe={class:"umo-page-divider-dropdown"},Obe={class:"umo-page-divider-item-title"},Ebe=["textContent"],Abe=["value","title","onClick"],Tbe=["data-type"],Pbe=["textContent"],Mbe={class:"arrow"},Ibe={class:"umo-page-divider-color-picker"},Nbe={__name:"hr",setup(s){let{popupVisible:l,togglePopup:c}=Qt();const{container:d,editor:f}=ie(),g=[{label:J("insert.hr.signle"),value:"signle"},{label:J("insert.hr.double"),value:"double"},{label:J("insert.hr.dotted"),value:"dotted"},{label:J("insert.hr.dashed"),value:"dashed"},{label:J("insert.hr.dashedDouble"),value:"dashed-double"},{label:J("insert.hr.signleBold"),value:"signle-bold"},{label:J("insert.hr.doubleBoldTop"),value:"double-bold-top"},{label:J("insert.hr.doubleBoldBottom"),value:"double-bold-bottom"},{label:J("insert.hr.wavy"),value:"wavy"}];let v=ref("#000"),b=ref(!1);const $=x=>{v.value=x,b.value=!1},y=({value:x})=>{!x||!f.value||(f.value.chain().focus().setHr({type:x,color:v.value}).run(),l.value=!1)};return(x,C)=>{const E=tt,N=Mu,W=Pn,q=ce;return openBlock(),createBlock(q,{ico:"hr",text:x.t("insert.hr.text"),"menu-type":"popup",huge:"","popup-visible":unref(l),onTogglePopup:unref(c)},{content:withCtx(()=>[createBaseVNode("div",xbe,[createBaseVNode("div",Obe,[createBaseVNode("span",{textContent:toDisplayString$1(x.t("insert.hr.title"))},null,8,Ebe)]),(openBlock(),createElementBlock(Fragment$1,null,renderList(g,Y=>createBaseVNode("div",{class:"umo-page-divider-item",key:Y.value,value:Y.value,title:Y.label,onClick:re=>y(Y)},[createBaseVNode("hr",{class:"umo-page-divider","data-type":Y.value,style:normalizeStyle({color:unref(v)})},null,12,Tbe)],8,Abe)),64)),createVNode(W,{modelValue:unref(b),"onUpdate:modelValue":C[0]||(C[0]=Y=>isRef(b)?b.value=Y:b=Y),attach:unref(d),placement:"right-bottom",trigger:"click"},{content:withCtx(()=>[createBaseVNode("div",Ibe,[createVNode(N,{"default-color":"#000",onChange:$})])]),default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["umo-page-divider-item umo-open-color-picker",{active:unref(b)}])},[createBaseVNode("span",{textContent:toDisplayString$1(x.t("insert.hr.color"))},null,8,Pbe),createBaseVNode("div",Mbe,[createVNode(E,{name:"arrow-down"})])],2)]),_:1},8,["modelValue","attach"])])]),_:1},8,["text","popup-visible","onTogglePopup"])}}},v$=Fe(Nbe,[["__scopeId","data-v-6e0c71d1"]]),p$={__name:"hard-break",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"hard-break",text:c.t("insert.hardBreak"),huge:"",shortcut:"Shift+Enter",onMenuClick:d[0]||(d[0]=g=>{var v;return(v=unref(l))==null?void 0:v.chain().focus().setHardBreak().run()})},null,8,["text"])}}},m$={__name:"math",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"math",text:c.t("insert.math"),huge:"",onMenuClick:d[0]||(d[0]=g=>unref(l).chain().focus().insertContent("$\\LaTeX$").run())},null,8,["text"])}}},jbe={class:"umo-emojis-container narrow-scrollbar"},Dbe=["textContent"],Bbe={class:"umo-emojis-group-container"},Fbe=["onClick"],Lbe={__name:"emoji",setup(s){let{popupVisible:l,togglePopup:c}=Qt();const{options:d,editor:f}=ie(),g=v=>{var b;(b=f.value)==null||b.chain().focus().insertContent(v).run(),l.value=!1};return(v,b)=>{const $=ce;return openBlock(),createBlock($,{ico:"emoji",text:v.t("insert.emoji"),"menu-type":"popup",huge:"","popup-visible":unref(l),onTogglePopup:unref(c)},{content:withCtx(()=>[createBaseVNode("div",jbe,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(d).dicts.emojis,(y,x)=>(openBlock(),createElementBlock(Fragment$1,{key:x},[createBaseVNode("div",{class:"umo-emojis-group-title",textContent:toDisplayString$1(v.l(y.label))},null,8,Dbe),createBaseVNode("div",Bbe,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(y.items.split(" "),(C,E)=>(openBlock(),createElementBlock("div",{class:"umo-emojis-group-item",key:E,onClick:N=>g(C)},toDisplayString$1(C),9,Fbe))),128))])],64))),128))])]),_:1},8,["text","popup-visible","onTogglePopup"])}}},h$=Fe(Lbe,[["__scopeId","data-v-9855e75b"]]),g$={__name:"chinese-date",setup(s){const l=v=>useDateFormat(useNow(),v).value,c=v=>{const b=$=>{const y=["","","","","","","","","",""];return $.toString().split("").map(x=>y[x]).join("")};return v.replace(/\d+/g,$=>{if($.length===4||$.length===1)return b($);if($.length===2){const y=$.charAt(0),x=$.charAt(1);return y==="0"?b(y)+"":y==="1"?""+b(x):x==="0"?b(y)+"":b(y)+""+b(x)}return $})},d=[{content:l("YYYYMD")},{content:l("YYYY-M-D")},{content:l("YYYY/M/D")},{content:l("YYYY.M.D")},{content:l("YYYYM")},{content:l("YYYYMD dddd"),divider:!0},{content:c(l("YYYYMD"))},{content:c(l("YYYYM"))},{content:c(l("YYYYMD dddd"))}],{editor:f}=ie(),g=({content:v})=>{var b;v&&((b=f.value)==null||b.chain().focus().insertContent(v).run())};return(v,b)=>{const $=ce;return openBlock(),createBlock($,{ico:"date",text:v.t("insert.date"),"menu-type":"dropdown",huge:"","select-options":d,onClick:g},null,8,["text"])}}},Rbe={class:"umo-symbols-container narrow-scrollbar"},zbe=["textContent"],Vbe={class:"umo-symbols-group-container"},Hbe=["onClick"],Ube={__name:"symbol",setup(s){let{popupVisible:l,togglePopup:c}=Qt();const{options:d,editor:f}=ie(),g=v=>{var b;(b=f.value)==null||b.chain().focus().insertContent(v).run(),l.value=!1};return(v,b)=>{const $=ce;return openBlock(),createBlock($,{ico:"symbol",text:v.t("insert.symbol"),"menu-type":"popup",huge:"","popup-visible":unref(l),onTogglePopup:unref(c)},{content:withCtx(()=>[createBaseVNode("div",Rbe,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(d).dicts.symbols,(y,x)=>(openBlock(),createElementBlock(Fragment$1,{key:x},[createBaseVNode("div",{class:"umo-symbols-group-title",textContent:toDisplayString$1(v.l(y.label))},null,8,zbe),createBaseVNode("div",Vbe,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(y.items.split(""),(C,E)=>(openBlock(),createElementBlock("div",{class:"umo-symbols-group-item",key:E,onClick:N=>g(C)},toDisplayString$1(C),9,Hbe))),128))])],64))),128))])]),_:1},8,["text","popup-visible","onTogglePopup"])}}},b$=Fe(Ube,[["__scopeId","data-v-d839ae45"]]),Kbe={class:"umo-link-container"},Wbe={__name:"link",setup(s){const{editor:l}=ie();let c=ref(!1),d=ref(""),f=ref(""),g=ref({text:!1,href:!1});const v=()=>{var b,$;if(d.value===""){g.value.text=!0;return}if(!f.value.startsWith("http://")&&!f.value.startsWith("https://")&&!f.value.startsWith("ftp://")&&!f.value.startsWith("ftps://")&&!f.value.startsWith("mailto://")){g.value.href=!0;return}g.value.text=!1,g.value.href=!1,(b=l.value)==null||b.commands.setLink({href:f.value,target:"_blank"}),($=l.value)==null||$.chain().focus().insertContent(d.value).run(),c.value=!1};return watch(()=>c.value,b=>{b?(d.value=Au(l.value),f.value=l.value.getAttributes("link").href||""):(d.value="",f.value="",g.value.text=!1,g.value.href=!1)}),(b,$)=>{const y=ce,x=er,C=hv,E=mv,N=Mn;return openBlock(),createElementBlock(Fragment$1,null,[createVNode(y,{ico:"link",text:b.t("insert.link.text"),huge:"",onMenuClick:$[0]||($[0]=W=>isRef(c)?c.value=!0:c=!0)},null,8,["text"]),createVNode(N,{visible:unref(c),icon:"link",header:b.t("insert.link.title"),width:"420px",draggable:"","destroy-on-close":"",confirmBtn:b.t("insert.link.insert"),onConfirm:v,onClose:$[3]||($[3]=W=>isRef(c)?c.value=!1:c=!1)},{default:withCtx(()=>[createBaseVNode("div",Kbe,[createVNode(E,{"label-align":"top"},{default:withCtx(()=>[createVNode(C,{label:b.t("insert.link.hrefText")},{default:withCtx(()=>[createVNode(x,{modelValue:unref(d),"onUpdate:modelValue":$[1]||($[1]=W=>isRef(d)?d.value=W:d=W),modelModifiers:{trim:!0},status:unref(g).text?"error":"default",placeholder:b.t("insert.link.hrefTextTip"),clearable:""},null,8,["modelValue","status","placeholder"])]),_:1},8,["label"]),createVNode(C,{label:b.t("insert.link.href")},{default:withCtx(()=>[createVNode(x,{modelValue:unref(f),"onUpdate:modelValue":$[2]||($[2]=W=>isRef(f)?f.value=W:f=W),status:unref(g).href?"error":"default",type:"url",clearable:"",placeholder:b.t("insert.link.hrefTip")},null,8,["modelValue","status","placeholder"])]),_:1},8,["label"])]),_:1})])]),_:1},8,["visible","header","confirmBtn"])],64)}}},y$=Fe(Wbe,[["__scopeId","data-v-d6532591"]]),_$={__name:"print",setup(s){const{editor:l,printing:c}=ie();return(d,f)=>{var g;const v=ce;return openBlock(),createBlock(v,{text:d.t("print.text"),ico:"print",shortcut:"Ctrl+P",disabled:(g=unref(l))==null?void 0:g.isEmpty,huge:"",onMenuClick:f[0]||(f[0]=b=>c.value=!0)},null,8,["text","disabled"])}}},w$={__name:"search-replace",setup(s){const{searchReplace:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"search-replace",text:c.t("search.text"),shortcut:"Ctrl+F",huge:"",onMenuClick:d[0]||(d[0]=g=>l.value=!0)},null,8,["text"])}}},C$={__name:"markdown",setup(s){const{options:l,editorDestroyed:c}=ie(),d=Je("document"),f=()=>{const g=Nr({theme:"warning",header:d.value.enableMarkdown?J("base.markdown.disable"):J("base.markdown.enable"),body:J("base.markdown.message"),confirmBtn:{theme:"warning",content:J("base.markdown.toggle")},async onConfirm(){d.value.markdown=!d.value.markdown,g.destroy(),await nextTick(),c.value=!0,await nextTick(),c.value=!1}})};return(g,v)=>{const b=ce;return unref(l).document.enableMarkdown?(openBlock(),createBlock(b,{key:0,text:g.t("base.markdown.text"),ico:"markdown",tooltip:unref(l).document.enableMarkdown?g.t("base.markdown.disable"):g.t("base.markdown.enable"),"menu-active":unref(d).markdown,huge:"",onMenuClick:f},null,8,["text","tooltip","menu-active"])):createCommentVNode("",!0)}}},k$={__name:"import-word",setup(s){const{editor:l,options:c}=ie();onMounted(()=>{if(document.querySelector("#mammoth-script")===null&&c.value.toolbar.importWord.enabled){const f=document.createElement("script");f.src=`${c.value.cdnUrl}/libs/mammoth/mammoth.browser.min.js`,f.id="mammoth-script",document.querySelector("head").append(f)}});const d=()=>{if(!mammoth){const v=Fo({theme:"warning",header:J("base.importWord.loadScript.title"),body:J("base.importWord.loadScript.message"),onConfirm(){v.destroy()}});return}const{open:f,onChange:g}=useFileDialog({accept:".docx",reset:!0,multiple:!1});f(),g(async v=>{var b;const $=Array.from(v)[0];if(!$)return;if($.size>1024*1024*5){qe("error",J("base.importWord.limitSize"));return}let y=await qe("loading",J("base.importWord.converting"));if(c.value.toolbar.importWord.useCustomMethod){const N=await c.value.onCustomImportWordMethod($);y.close();try{if(((b=N==null?void 0:N.messages)==null?void 0:b.type)==="error"){useMesssage("error",`${J("base.importWord.convertError")} (${C.message})`);return}N!=null&&N.value?(l.value.commands.setContent(N.value),setTimeout(()=>{l.value.commands.autoPaging()},500)):qe("error",J("base.importWord.importError"))}catch{qe("error",J("base.importWord.importError"))}return}const x=$.arrayBuffer(),{messages:C,value:E}=await mammoth.convertToHtml({arrayBuffer:x},c.value.toolbar.importWord.options);if(y.close(),C.type==="error"){useMesssage("error",`${J("base.importWord.convertError")} (${C.message})`);return}try{let N=new DOMParser().parseFromString(E,"text/html");N.querySelectorAll("img").forEach(q=>{const Y=q.parentElement;Y.tagName==="P"&&(Y.insertAdjacentElement("beforebegin",q),!Y.hasChildNodes()&&Y.textContent===""&&Y.remove())});const W=N.body.innerHTML.toString();l.value.commands.setContent(W),setTimeout(()=>{l.value.commands.autoPaging()},500)}catch{qe("error",J("base.importWord.importError"))}})};return(f,g)=>{const v=ce;return unref(c).toolbar.importWord.enabled?(openBlock(),createBlock(v,{key:0,ico:"word",text:f.t("base.importWord.text"),huge:"",onMenuClick:d},null,8,["text"])):createCommentVNode("",!0)}}},$$={__name:"select-all",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"select-all",text:c.t("base.selectAll"),shortcut:"Ctrl+A","hide-text":"",onMenuClick:d[0]||(d[0]=g=>{var v;return(v=unref(l))==null?void 0:v.chain().focus().selectAll().run()})},null,8,["text"])}}},S$={__name:"code",setup(s){const{editor:l}=ie();return(c,d)=>{var f,g;const v=ce;return openBlock(),createBlock(v,{ico:"code",text:c.t("base.code"),shortcut:"Ctrl+E","hide-text":"","menu-active":(f=unref(l))==null?void 0:f.isActive("code"),disabled:!((g=unref(l))!=null&&g.can().chain().focus().toggleCode().run()),onMenuClick:d[0]||(d[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().toggleCode().run()})},null,8,["text","menu-active","disabled"])}}},x$={__name:"quote",setup(s){const{editor:l}=ie();return(c,d)=>{var f,g;const v=ce;return openBlock(),createBlock(v,{text:c.t("base.quote"),ico:"quote",shortcut:"Ctrl+Shift+B","hide-text":"","menu-active":(f=unref(l))==null?void 0:f.isActive("blockquote"),disabled:!((g=unref(l))!=null&&g.can().chain().focus().toggleBlockquote().run()),onMenuClick:d[0]||(d[0]=b=>{var $;return($=unref(l))==null?void 0:$.chain().focus().toggleBlockquote().run()})},null,8,["text","menu-active","disabled"])}}},Gbe={class:"umo-node-margin-input"},qbe={__name:"margin",setup(s){let{popupVisible:l,togglePopup:c}=Qt();const{editor:d}=ie();let f=ref(""),g=ref("");const v=()=>{var y;if(l.value){const x=Ht(d.value);if(!((y=x==null?void 0:x.attrs)!=null&&y.margin))return;const{margin:C}=x.attrs;C!=null&&C.top&&(f.value=C.top.replace(/px/g,"")),C!=null&&C.bottom&&(g.value=C.bottom.replace(/px/g,""))}else f.value="",g.value=""},b=()=>{var y,x;d.value.commands.setMargin({top:f.value&&f.value!==""?(y=f.value)==null?void 0:y.toString():void 0,bottom:g.value&&g.value!==""?(x=g.value)==null?void 0:x.toString():void 0})};watch(()=>l.value,y=>{v(),!y&&d.value&&d.value.commands.focus()},{immediate:!0});const $=()=>{d.value.commands.unsetMargin(),l.value=!1};return(y,x)=>{const C=Cr,E=Tt,N=ce;return openBlock(),createBlock(N,{ico:"margin",text:y.t("base.margin.text"),"menu-type":"popup","popup-handle":"arrow","hide-text":"","popup-visible":unref(l),onTogglePopup:unref(c),onMenuClick:x[2]||(x[2]=W=>$())},{content:withCtx(()=>[createBaseVNode("div",Gbe,[createVNode(C,{modelValue:unref(f),"onUpdate:modelValue":x[0]||(x[0]=W=>isRef(f)?f.value=W:f=W),theme:"column",align:"left",size:"small",label:`${y.t("base.margin.top")}:`,placeholder:y.t("base.margin.default"),"input-props":{clearable:!0},max:500,min:0,onChange:b},null,8,["modelValue","label","placeholder"]),createVNode(C,{modelValue:unref(g),"onUpdate:modelValue":x[1]||(x[1]=W=>isRef(g)?g.value=W:g=W),theme:"column",align:"left",size:"small",label:`${y.t("base.margin.bottom")}:`,placeholder:y.t("base.margin.default"),"input-props":{clearable:!0},max:500,min:0,onChange:b},null,8,["modelValue","label","placeholder"]),createVNode(E,{variant:"outline",size:"small",onClick:$},{default:withCtx(()=>[createTextVNode(toDisplayString$1(y.t("base.margin.reset")),1)]),_:1})])]),_:1},8,["text","popup-visible","onTogglePopup"])}}},O$=Fe(qbe,[["__scopeId","data-v-45fede4d"]]),E$={__name:"line-height",setup(s){const{options:l,editor:c}=ie(),d=computed(()=>l.value.dicts.lineHeights.map(g=>{var v;return{content:g.default?mr(g.label)+J("base.lineHeight.default"):mr(g.label),value:g.value,active:(v=c.value)==null?void 0:v.isActive({lineHeight:g.value})}})),f=({content:g,value:v})=>{var b;g&&((b=c.value)==null||b.chain().focus().setLineHeight(v).run())};return(g,v)=>{const b=ce;return openBlock(),createBlock(b,{text:g.t("base.lineHeight.text"),ico:"line-height","menu-type":"dropdown","hide-text":"","select-options":unref(d),onClick:f},null,8,["text","select-options"])}}},A$={__name:"outdent",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"outdent",text:c.t("base.outdent"),shortcut:"Shift+Tab","hide-text":"",onMenuClick:d[0]||(d[0]=g=>{var v;return(v=unref(l))==null?void 0:v.chain().focus().outdent().run()})},null,8,["text"])}}},T$={__name:"indent",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{text:c.t("base.indent"),ico:"indent",shortcut:"Tab","hide-text":"",onMenuClick:d[0]||(d[0]=g=>{var v;return(v=unref(l))==null?void 0:v.chain().focus().indent().run()})},null,8,["text"])}}},P$={__name:"task-list",setup(s){const{editor:l}=ie();return(c,d)=>{var f;const g=Vr,v=wr,b=ce;return openBlock(),createBlock(b,{ico:"task-list",text:c.t("list.task.text"),shortcut:"Ctrl+Shift+9","menu-type":"dropdown","popup-handle":"arrow","hide-text":"","menu-active":(f=unref(l))==null?void 0:f.isActive("taskList"),onMenuClick:d[3]||(d[3]=$=>{var y;return(y=unref(l))==null?void 0:y.chain().focus().toggleTaskList().run()})},{dropmenu:withCtx(()=>[createVNode(v,null,{default:withCtx(()=>{var $,y,x;return[createVNode(g,{disabled:!(($=unref(l))!=null&&$.can().splitListItem("taskItem")),onClick:d[0]||(d[0]=C=>{var E;return(E=unref(l))==null?void 0:E.chain().focus().splitListItem("taskItem").run()})},{default:withCtx(()=>[createTextVNode(toDisplayString$1(c.t("list.task.split")),1)]),_:1},8,["disabled"]),createVNode(g,{disabled:!((y=unref(l))!=null&&y.can().sinkListItem("taskItem")),onClick:d[1]||(d[1]=C=>{var E;return(E=unref(l))==null?void 0:E.chain().focus().sinkListItem("taskItem").run()})},{default:withCtx(()=>[createTextVNode(toDisplayString$1(c.t("list.task.sink")),1)]),_:1},8,["disabled"]),createVNode(g,{disabled:!((x=unref(l))!=null&&x.can().liftListItem("taskItem")),onClick:d[2]||(d[2]=C=>{var E;return(E=unref(l))==null?void 0:E.chain().focus().liftListItem("taskItem").run()})},{default:withCtx(()=>[createTextVNode(toDisplayString$1(c.t("list.task.lift")),1)]),_:1},8,["disabled"])]}),_:1})]),_:1},8,["text","menu-active"])}}},Ybe={class:"umo-bullet-list-group"},Zbe=["onClick"],Xbe={__name:"bullet-list",setup(s){let{popupVisible:l,togglePopup:c}=Qt();const{editor:d}=ie(),f=[{label:J("list.bullet.disc"),value:"disc"},{label:J("list.bullet.circle"),value:"circle"},{label:J("list.bullet.square"),value:"square"}];let g=ref("");watch(()=>l.value,b=>{if(b&&d.value){const{listStyleType:$}=d.value.getAttributes("bulletList");g.value=($==null?void 0:$.listStyleType)||$||""}});const v=b=>{var $,y;const x=($=d.value)==null?void 0:$.chain().focus();(y=d.value)!=null&&y.isActive("bulletList")?d.value.getAttributes("bulletList").listStyleType!==b?x.updateAttributes("bulletList",{listStyleType:b}).run():x.toggleBulletList().run():x.toggleBulletList().updateAttributes("bulletList",{listStyleType:b}).run(),g.value=b,l.value=!1};return(b,$)=>{var y;const x=tt,C=Oa,E=ce;return openBlock(),createBlock(E,{ico:"bullet-list",text:b.t("list.bullet.text"),shortcut:"Ctrl+Shift+8","menu-type":"popup","popup-handle":"arrow","hide-text":"","menu-active":(y=unref(d))==null?void 0:y.isActive("bulletList"),"popup-visible":unref(l),onTogglePopup:unref(c),onMenuClick:$[0]||($[0]=N=>v(f[0].value))},{content:withCtx(()=>[createBaseVNode("div",Ybe,[(openBlock(),createElementBlock(Fragment$1,null,renderList(f,N=>createVNode(C,{key:N.value,content:N.label},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["umo-bullet-list-item",{active:unref(g)==N.value}]),onClick:W=>v(N.value)},[createVNode(x,{class:"umo-icon-bullet-list",name:`bullet-list-${N.value}`},null,8,["name"])],10,Zbe)]),_:2},1032,["content"])),64))])]),_:1},8,["text","menu-active","popup-visible","onTogglePopup"])}}},M$=Fe(Xbe,[["__scopeId","data-v-55b64b1d"]]),Jbe=s=>(pushScopeId("data-v-bb566d99"),s=s(),popScopeId(),s),Qbe={class:"umo-ordered-list-group"},e1e=["onClick"],t1e=Jbe(()=>createBaseVNode("div",{class:"umo-ordered-list-divider"},null,-1)),n1e=["textContent"],r1e={class:"umo-ordered-list-properties"},a1e=["textContent"],o1e={__name:"ordered-list",setup(s){let{popupVisible:l,togglePopup:c}=Qt();const{editor:d}=ie(),f=[{label:J("list.ordered.decimal"),value:"decimal"},{label:J("list.ordered.decimalLeadingZero"),value:"decimal-leading-zero"},{label:J("list.ordered.lowerRoman"),value:"lower-roman"},{label:J("list.ordered.upperRoman"),value:"upper-roman"},{label:J("list.ordered.lowerLatin"),value:"lower-latin"},{label:J("list.ordered.upperLatin"),value:"upper-latin"},{label:J("list.ordered.tradChineseInformal"),value:"trad-chinese-informal"},{label:J("list.ordered.simpChineseFormal"),value:"simp-chinese-formal"}];let g=ref("left");watch(()=>l.value,y=>{if(y&&d.value){const{listStyleType:x}=d.value.getAttributes("orderedList");g.value=(x==null?void 0:x.listStyleType)||x||""}});const v=y=>{var x,C;const E=(x=d.value)==null?void 0:x.chain().focus();(C=d.value)!=null&&C.isActive("orderedList")?d.value.getAttributes("orderedList").listStyleType!==y?E.updateAttributes("orderedList",{listStyleType:y}).run():E.toggleOrderedList().run():E.toggleOrderedList().updateAttributes("orderedList",{listStyleType:y}).run(),g.value=y,l.value=!1};let b=ref(1);const $=()=>{var y;d.value&&((y=d.value)==null||y.chain().focus().updateAttributes("orderedList",{start:b.value}).run())};return watch(()=>l.value,y=>{y&&d.value?b.value=d.value.getAttributes("orderedList").start:b.value=1}),(y,x)=>{var C;const E=tt,N=Oa,W=Cr,q=ce;return openBlock(),createBlock(q,{ico:"ordered-list",text:y.t("list.ordered.text"),shortcut:"Ctrl+Shift+7","menu-type":"popup","popup-handle":"arrow","hide-text":"","popup-visible":unref(l),"menu-active":(C=unref(d))==null?void 0:C.isActive("orderedList"),onTogglePopup:unref(c),onMenuClick:x[1]||(x[1]=Y=>v(f[0].value))},{content:withCtx(()=>[createBaseVNode("div",Qbe,[(openBlock(),createElementBlock(Fragment$1,null,renderList(f,Y=>createVNode(N,{key:Y.value,content:Y.label},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["umo-ordered-list-item",{active:unref(g)==Y.value}]),onClick:re=>v(Y.value)},[createVNode(E,{class:"umo-icon-ordered-list",name:`ordered-list-${Y.value}`},null,8,["name"])],10,e1e)]),_:2},1032,["content"])),64))]),t1e,createBaseVNode("div",{class:"umo-ordered-list-title",textContent:toDisplayString$1(y.t("list.ordered.property"))},null,8,n1e),createBaseVNode("div",r1e,[createVNode(W,{modelValue:unref(b),"onUpdate:modelValue":x[0]||(x[0]=Y=>isRef(b)?b.value=Y:b=Y),min:1,align:"left",theme:"column",onChange:$},{label:withCtx(()=>[createBaseVNode("span",{textContent:toDisplayString$1(y.t("list.ordered.startAt"))},null,8,a1e)]),_:1},8,["modelValue"])])]),_:1},8,["text","popup-visible","menu-active","onTogglePopup"])}}},I$=Fe(o1e,[["__scopeId","data-v-bb566d99"]]),N$={__name:"superscript",setup(s){const{editor:l}=ie();return(c,d)=>{var f,g;const v=ce;return openBlock(),createBlock(v,{ico:"superscript",text:c.t("base.superscript"),shortcut:"Ctrl+.","hide-text":"","menu-active":(f=unref(l))==null?void 0:f.isActive("superscript"),disabled:!((g=unref(l))!=null&&g.can().chain().focus().toggleSuperscript().run()),onMenuClick:d[0]||(d[0]=b=>{var $;return($=unref(l))==null?void 0:$.commands.toggleSuperscript()})},null,8,["text","menu-active","disabled"])}}},j$={__name:"subscript",setup(s){const{editor:l}=ie();return(c,d)=>{var f,g;const v=ce;return openBlock(),createBlock(v,{ico:"subscript",text:c.t("base.subscript"),shortcut:"Ctrl+,","hide-text":"","menu-active":(f=unref(l))==null?void 0:f.isActive("subscript"),disabled:!((g=unref(l))!=null&&g.can().chain().focus().toggleSubscript().run()),onMenuClick:d[0]||(d[0]=b=>{var $;return($=unref(l))==null?void 0:$.commands.toggleSubscript()})},null,8,["text","menu-active","disabled"])}}},i1e=["textContent"],l1e=["title"],D$={__name:"font-family",setup(s){const{options:l,editor:c}=ie(),d=Je("toolbar"),f=Je("recent");let g=ref([]);const v=x=>{if(!x)return!0;if(typeof x!="string")return!1;const C="fontname",E="text",N=100,W=100,q=document.createElement("canvas"),Y=q.getContext("2d",{willReadFrequently:!0});q.width=N,q.height=W,Y.textAlign="center",Y.fillStyle="black",Y.textBaseline="middle";const re=se=>{Y.clearRect(0,0,N,W),Y.font=`${W}px ${se}, ${C}`,Y.fillText(E,N/2,W/2);const{data:de}=Y.getImageData(0,0,N,W);return Array.from(de).filter(he=>he!==0)};return re(C).join("")!==re(x).join("")},b=computed(()=>{const x=[{label:J("base.fontFamily.all"),children:l.value.dicts.fonts}],C=E=>E.map(N=>l.value.dicts.fonts.find(({value:W})=>W===N)||{label:N,item:N});return f.value.fonts.length>0&&x.unshift({label:J("base.fontFamily.recent"),children:C(f.value.fonts)}),g.value.length>0&&x.unshift({label:J("base.fontFamily.used"),children:C(g.value)}),x}),$=()=>{const x=JSON.stringify(c.value.getJSON()).match(/"fontFamily":"([^"]+)"/g);x&&x.forEach(C=>{const E=C.replace('"fontFamily":"',"").replace('"',"");g.value.includes(E)||g.value.push(E)})},y=x=>{x&&(f.value.fonts.forEach((C,E)=>{C===x&&f.value.fonts.splice(E,1)}),f.value.fonts.unshift(x),f.value.fonts.length>10&&f.value.fonts.splice(10,1)),c.value.chain().focus().setFontFamily(x).run(),$()};return watch(()=>c.value,x=>{x&&$()}),(x,C)=>{var E;const N=Gi,W=Qz,q=ce;return openBlock(),createBlock(q,{text:x.t("base.fontFamily.text"),"menu-type":"select","hide-text":"","select-value":((E=unref(c))==null?void 0:E.getAttributes("textStyle").fontFamily)||null,style:normalizeStyle({width:unref(d).mode!=="classic"?"144px":"90px"}),filterable:"",onMenuClick:y},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(b),(Y,re)=>(openBlock(),createBlock(W,{key:re,label:Y.label,divider:!1},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(Y.children,se=>(openBlock(),createBlock(N,{class:"umo-font-family-item",value:se.value,key:se.value,label:x.l(se.label)},{default:withCtx(()=>[createBaseVNode("span",{style:normalizeStyle({fontFamily:se.value}),textContent:toDisplayString$1(x.l(se.label))},null,12,i1e),v(se.value)?createCommentVNode("",!0):(openBlock(),createElementBlock("span",{key:0,class:"umo-font-family-unsupport",title:x.t("base.fontFamily.unsupport")},"!",8,l1e))]),_:2},1032,["value","label"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["text","select-value","style"])}}},s1e=["disabled"],u1e={class:"umo-heading-container"},c1e=["onClick"],d1e={class:"subtitle"},f1e=["onClick"],v1e={class:"subtitle"},p1e={__name:"heading",setup(s){let{popupVisible:l}=Qt();const{container:c,editor:d}=ie(),f=Je("toolbar"),g=ref(null),v=ref([{label:J("base.heading.paragraph"),desc:"text",value:"paragraph"}]);for(let y in Array.from({length:6})){const x=Number(y)+1;v.value.push({label:`${J("base.heading.text",{level:x})}`,desc:`h${x}`,value:x})}const b=computed(()=>{var y;const x=C=>{var E;return(E=d.value)==null?void 0:E.isActive("heading",{level:C})};if(d.value){if((y=d.value)!=null&&y.isActive("paragraph"))return"paragraph";if(x(1))return 1;if(x(2))return 2;if(x(3))return 3;if(x(4))return 4;if(x(5))return 5;if(x(6))return 6}return""}),$=y=>{var x,C;y==="paragraph"?(x=d.value)==null||x.chain().focus().setParagraph().run():(C=d.value)==null||C.chain().focus().toggleHeading({level:y}).run(),l.value=!1};return onClickOutside(g,()=>{l.value=!1},{ignore:[".umo-popup"]}),(y,x)=>{var C;const E=tt,N=Pn,W=Gi,q=ce;return unref(f).mode!=="classic"?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["umo-toolbar-headding",{unfold:unref(l)}]),disabled:!((C=unref(d))!=null&&C.isEditable)},[createBaseVNode("div",u1e,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(v.value,(Y,re)=>{var se;return openBlock(),createElementBlock(Fragment$1,{key:Y.value},[re<4?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["card",{active:Y.value===unref(b)&&((se=unref(d))==null?void 0:se.isEditable)}]),onClick:de=>$(Y.value)},[createBaseVNode("div",{class:normalizeClass(["title",Y.desc])},toDisplayString$1(Y.label),3),createBaseVNode("div",d1e,toDisplayString$1(Y.desc),1)],10,c1e)):createCommentVNode("",!0)],64)}),128)),createVNode(N,{attach:unref(c),trigger:"click",placement:"bottom-right","overlay-class-name":"umo-heading-container-popup","destroy-on-close":"",visible:unref(l)},{content:withCtx(()=>[createBaseVNode("div",{ref_key:"popupContentRef",ref:g,class:"umo-heading-container"},[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(v.value,(Y,re)=>{var se;return openBlock(),createElementBlock(Fragment$1,{key:Y.value},[re>=4?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["card",{active:Y.value===unref(b)&&((se=unref(d))==null?void 0:se.isEditable)}]),onClick:de=>$(Y.value)},[createBaseVNode("div",{class:normalizeClass(["title",Y.desc])},toDisplayString$1(Y.label),3),createBaseVNode("div",v1e,toDisplayString$1(Y.desc),1)],10,f1e)):createCommentVNode("",!0)],64)}),128))],512)]),default:withCtx(()=>[createBaseVNode("div",{class:"arrow",onClick:x[0]||(x[0]=Y=>isRef(l)?l.value=!unref(l):l=!unref(l))},[createVNode(E,{name:"arrow-down"})])]),_:1},8,["attach","visible"])])],10,s1e)):(openBlock(),createBlock(q,{key:1,text:y.t("base.heading.tip"),"hide-text":"","menu-type":"select",style:{width:"76px"},placeholder:y.t("base.heading.text"),borderless:"","select-value":unref(b),onMenuClick:$},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(v.value,Y=>(openBlock(),createBlock(W,{class:"umo-heading-select-option",key:Y.value,value:Y.value,label:Y.label},{default:withCtx(()=>[createBaseVNode("div",{class:normalizeClass(["heading-size",Y.desc])},toDisplayString$1(Y.label),3)]),_:2},1032,["value","label"]))),128))]),_:1},8,["text","placeholder","select-value"]))}}},B$=Fe(p1e,[["__scopeId","data-v-7ed2d884"]]),F$={__name:"clear-format",setup(s){const{editor:l}=ie();return(c,d)=>{const f=ce;return openBlock(),createBlock(f,{ico:"clear-format",text:c.t("base.clearFormat"),"hide-text":"",onMenuClick:d[0]||(d[0]=g=>{var v;return(v=unref(l))==null?void 0:v.chain().focus().unsetAllMarks().run()})},null,8,["text"])}}},L$={__name:"format-painter",setup(s){const{editor:l,painter:c}=ie(),d=f=>{c.value.enabled=!c.value.enabled,c.value.enabled&&l.value.chain().focus().setFormatPainter(f).run()};return(f,g)=>{var v,b,$;const y=ce;return openBlock(),createBlock(y,{ico:"format-painter",text:f.t("base.formatPainter.text"),tooltip:f.t("base.formatPainter.tip"),"menu-active":unref(c).enabled,disabled:($=(b=(v=unref(l))==null?void 0:v.state)==null?void 0:b.selection)==null?void 0:$.empty,"hide-text":"",onMenuClick:g[0]||(g[0]=x=>d(!0)),onDblclick:g[1]||(g[1]=x=>d(!1))},null,8,["text","tooltip","menu-active","disabled"])}}},R$={__name:"redo",setup(s){const{editor:l}=ie();return(c,d)=>{var f;const g=ce;return openBlock(),createBlock(g,{ico:"redo",text:c.t("base.redo"),shortcut:"Ctrl+Y / Ctrl+Shift+Z","hide-text":"",disabled:!((f=unref(l))!=null&&f.can().chain().focus().redo().run()),onMenuClick:d[0]||(d[0]=v=>{var b;return(b=unref(l))==null?void 0:b.chain().focus().redo().run()})},null,8,["text","disabled"])}}},z$={__name:"undo",setup(s){const{editor:l}=ie();return(c,d)=>{var f;const g=ce;return openBlock(),createBlock(g,{ico:"undo",text:c.t("base.undo"),shortcut:"Ctrl+Z","hide-text":"",disabled:!((f=unref(l))!=null&&f.can().chain().focus().undo().run()),onMenuClick:d[0]||(d[0]=v=>{var b;return(b=unref(l))==null?void 0:b.chain().focus().undo().run()})},null,8,["text","disabled"])}}},m1e={class:"umo-classic-menu"},h1e={key:0,class:"umo-virtual-group"},g1e={class:"umo-virtual-group"},b1e={class:"umo-virtual-group"},y1e={class:"umo-virtual-group"},_1e={class:"umo-virtual-group"},w1e={class:"umo-virtual-group"},C1e={class:"virtual-group is-slot"},k1e={class:"umo-virtual-group"},$1e={class:"umo-virtual-group"},S1e={class:"umo-virtual-group"},x1e={class:"virtual-group is-slot"},O1e={class:"umo-virtual-group"},E1e={class:"umo-virtual-group"},A1e={class:"umo-virtual-group"},T1e={class:"umo-virtual-group"},P1e={class:"umo-virtual-group"},M1e={class:"umo-virtual-group"},I1e={class:"umo-virtual-group"},N1e={class:"umo-virtual-group"},j1e={class:"virtual-group is-slot"},D1e={class:"umo-virtual-group"},B1e={class:"umo-virtual-group"},F1e={class:"umo-virtual-group"},L1e={class:"umo-virtual-group"},R1e={class:"virtual-group is-slot"},z1e={class:"umo-virtual-group"},V1e={class:"umo-virtual-group"},H1e={class:"virtual-group-row"},U1e={key:0,class:"umo-virtual-group"},K1e={class:"umo-virtual-group"},W1e={class:"umo-virtual-group"},G1e={class:"virtual-group is-slot"},q1e={class:"umo-virtual-group"},Y1e={class:"umo-virtual-group"},Z1e={class:"virtual-group is-slot"},X1e={__name:"classic",props:{menus:{type:Array,required:!0},currentMenu:{type:String,required:!0}},emits:["menu-change"],setup(s,{emit:l}){const c=s,d=l,{container:f,options:g,hidePageHeader:v,hidePageFooter:b}=ie(),$=E=>g.value.toolbar.disableMenuItems.includes(E);let y=ref("");watch(()=>c.currentMenu,async E=>{y.value=E,await nextTick();try{x.value.update()}catch{}},{immediate:!0});const x=ref(),C=async E=>{d("menu-change",E),await nextTick(),x.value.update()};return(E,N)=>{const W=tt,q=Gi,Y=Wi,re=z$,se=R$,de=L$,he=F$,ge=B$,Se=D$,Ae=op,Re=ol,Be=Du,Ke=ap,Lr=rp,_y=j$,by=N$,yy=Aa,my=il,$t=np,K$=I$,Y$=M$,W$=P$,U$=T$,hy=A$,G$=E$,ky=O$,$y=Q2,rS=x$,lS=S$,bS=$$,IS=k$,BS=C$,MS=w$,zS=_$,LS=y$,nS=tp,Z$=ep,dS=Qv,ES=Jv,wy=Xv,tS=b$,yS=g$,Q$=h$,eS=m$,cS=p$,wS=v$,xS=Zv,OS=Yv,mS=f$,pS=qv,fC=d$,US=c$,Iye=gp,$ye=hp,Rye=mp,Uye=pp,DS=vp,HS=fp,Aye=dp,Tye=cp,jye=up,sS=sp,TS=u$,AS=s$,jS=l$,KS=i$,Bye=o$,Kye=a$,swe=Fu,Cwe=Bu,ywe=Gv,hwe=Wv,Vwe=Pu,Owe=Tu,VS=r$,Zye=n$,twe=t$,_we=e$,Hwe=Jk,Pwe=Xk,Jwe=Zk,Nwe=Yk,i2e=qk,Kwe=Gk,Qwe=Kk,e2e=Uk,t2e=Hk,Dye=Vk,CS=zk,Sye=Rk,Mye=Lk,rwe=Fk;return openBlock(),createBlock(rwe,{ref_key:"scrollableRef",ref:x,class:"umo-scrollable-container"},{default:withCtx(()=>[createBaseVNode("div",m1e,[s.menus.length>1?(openBlock(),createElementBlock("div",h1e,[createVNode(Y,{modelValue:unref(y),"onUpdate:modelValue":N[0]||(N[0]=awe=>isRef(y)?y.value=awe:y=awe),"popup-props":{destroyOnClose:!0,attach:unref(f)},size:"small","auto-width":"",borderless:"",onChange:C},{prefixIcon:withCtx(()=>[createVNode(W,{name:"menu"})]),default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(s.menus,awe=>(openBlock(),createBlock(q,{key:awe.value,label:awe.label,value:awe.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","popup-props"])])):createCommentVNode("",!0),unref(y)==="base"?(openBlock(),createElementBlock(Fragment$1,{key:1},[createBaseVNode("div",g1e,[createVNode(re),createVNode(se),createVNode(de),createVNode(he)]),createBaseVNode("div",b1e,[createVNode(ge),createVNode(Se,{borderless:""}),createVNode(Ae,{borderless:""}),createVNode(Re),createVNode(Be),createVNode(Ke),createVNode(Lr),createVNode(_y),createVNode(by),createVNode(yy),createVNode(my),createVNode($t)]),createBaseVNode("div",y1e,[createVNode(K$),createVNode(Y$),createVNode(W$),createVNode(U$),createVNode(hy),createVNode(G$),createVNode(ky),createVNode($y),createVNode(rS),$("code")?createCommentVNode("",!0):(openBlock(),createBlock(lS,{key:0})),createVNode(bS)]),createBaseVNode("div",_1e,[createVNode(IS),createVNode(BS),createVNode(MS)]),createBaseVNode("div",w1e,[$("print")?createCommentVNode("",!0):(openBlock(),createBlock(zS,{key:0}))]),createBaseVNode("div",C1e,[renderSlot(E.$slots,"toolbar_base",{toolbarMode:"classic"},void 0,!0)])],64)):createCommentVNode("",!0),unref(y)==="insert"?(openBlock(),createElementBlock(Fragment$1,{key:2},[createBaseVNode("div",k1e,[createVNode(LS),createVNode(nS),$("video")?createCommentVNode("",!0):(openBlock(),createBlock(Z$,{key:0})),$("audio")?createCommentVNode("",!0):(openBlock(),createBlock(dS,{key:1})),$("file")?createCommentVNode("",!0):(openBlock(),createBlock(ES,{key:2})),$("code")?createCommentVNode("",!0):(openBlock(),createBlock(wy,{key:3})),createVNode(tS),$("chineseDate")?createCommentVNode("",!0):(openBlock(),createBlock(yS,{key:4})),$("emoji")?createCommentVNode("",!0):(openBlock(),createBlock(Q$,{key:5})),$("math")?createCommentVNode("",!0):(openBlock(),createBlock(eS,{key:6}))]),createBaseVNode("div",$1e,[createVNode(cS),createVNode(wS),createVNode(xS),createVNode(OS)]),createBaseVNode("div",S1e,[createVNode(mS),createVNode(pS)]),createBaseVNode("div",x1e,[renderSlot(E.$slots,"toolbar_insert",{toolbarMode:"classic"},void 0,!0)])],64)):createCommentVNode("",!0),unref(y)==="table"?(openBlock(),createElementBlock(Fragment$1,{key:3},[createBaseVNode("div",O1e,[createVNode(fC),createVNode(US)]),createBaseVNode("div",E1e,[createVNode(Iye),createVNode($ye)]),createBaseVNode("div",A1e,[createVNode(Rye,{huge:!1}),createVNode(Uye,{huge:!1}),createVNode(DS,{huge:!1}),createVNode(HS,{huge:!1})]),createBaseVNode("div",T1e,[createVNode(Aye,{huge:!1}),createVNode(Tye,{huge:!1})]),createBaseVNode("div",P1e,[createVNode(jye,{huge:!1}),createVNode(sS,{huge:!1})]),createBaseVNode("div",M1e,[createVNode(TS,{huge:!1}),createVNode(AS,{huge:!1}),createVNode(jS,{huge:!1})]),createBaseVNode("div",I1e,[createVNode(KS,{huge:!1}),createVNode(Bye,{huge:!1})]),createBaseVNode("div",N1e,[createVNode(Kye)]),createBaseVNode("div",j1e,[renderSlot(E.$slots,"toolbar_table",{toolbarMode:"classic"},void 0,!0)])],64)):createCommentVNode("",!0),unref(y)==="tools"?(openBlock(),createElementBlock(Fragment$1,{key:4},[createBaseVNode("div",D1e,[createVNode(swe),createVNode(Cwe)]),createBaseVNode("div",B1e,[$("signature")?createCommentVNode("",!0):(openBlock(),createBlock(ywe,{key:0})),$("seal")?createCommentVNode("",!0):(openBlock(),createBlock(hwe,{key:1}))]),createBaseVNode("div",F1e,[$("diagrams")?createCommentVNode("",!0):(openBlock(),createBlock(Vwe,{key:0})),$("mermaid")?createCommentVNode("",!0):(openBlock(),createBlock(Owe,{key:1}))]),createBaseVNode("div",L1e,[$("chineseCase")?createCommentVNode("",!0):(openBlock(),createBlock(VS,{key:0}))]),createBaseVNode("div",R1e,[renderSlot(E.$slots,"toolbar_tools",{toolbarMode:"classic"},void 0,!0)])],64)):createCommentVNode("",!0),unref(y)==="page"?(openBlock(),createElementBlock(Fragment$1,{key:5},[createBaseVNode("div",z1e,[createVNode(Zye)]),createBaseVNode("div",V1e,[createBaseVNode("div",H1e,[createVNode(twe),createVNode(_we),createVNode(Hwe)])]),!unref(v)||!unref(b)?(openBlock(),createElementBlock("div",U1e,[unref(v)?createCommentVNode("",!0):(openBlock(),createBlock(Pwe,{key:0})),unref(b)?createCommentVNode("",!0):(openBlock(),createBlock(Jwe,{key:1}))])):createCommentVNode("",!0),createBaseVNode("div",K1e,[createVNode(Nwe),createVNode(i2e),createVNode(Kwe),createVNode(Qwe)]),createBaseVNode("div",W1e,[createVNode(e2e)]),createBaseVNode("div",G1e,[renderSlot(E.$slots,"toolbar_page",{toolbarMode:"classic"},void 0,!0)])],64)):createCommentVNode("",!0),unref(y)==="export"?(openBlock(),createElementBlock(Fragment$1,{key:6},[createBaseVNode("div",q1e,[createVNode(t2e),createVNode(Dye),createVNode(CS)]),createBaseVNode("div",Y1e,[$("share")?createCommentVNode("",!0):(openBlock(),createBlock(Sye,{key:0})),$("embed")?createCommentVNode("",!0):(openBlock(),createBlock(Mye,{key:1}))]),createBaseVNode("div",Z1e,[renderSlot(E.$slots,"toolbar_export",{toolbarMode:"classic"},void 0,!0)])],64)):createCommentVNode("",!0)])]),_:3},512)}}},J1e=Fe(X1e,[["__scopeId","data-v-d22395aa"]]),Q1e={class:"umo-ribbon-menu"},e0e={key:0,class:"umo-ribbon-tabs"},t0e=["onClick"],n0e={class:"umo-ribbon-container"},r0e={class:"umo-virtual-group"},a0e={class:"umo-virtual-group-row"},o0e={class:"umo-virtual-group-row"},i0e={class:"umo-virtual-group"},l0e={class:"umo-virtual-group-row"},s0e={class:"umo-virtual-group-row"},u0e={class:"umo-virtual-group"},c0e={class:"umo-virtual-group-row"},d0e={class:"umo-virtual-group-row"},f0e={class:"umo-virtual-group"},v0e={class:"umo-virtual-group"},p0e={class:"umo-virtual-group"},m0e={class:"virtual-group is-slot"},h0e={class:"umo-virtual-group"},g0e={class:"umo-virtual-group"},b0e={class:"umo-virtual-group"},y0e={class:"virtual-group is-slot"},_0e={class:"umo-virtual-group"},w0e={class:"umo-virtual-group"},C0e={class:"umo-virtual-group"},k0e={class:"umo-virtual-group-row"},$0e={class:"umo-virtual-group-row"},S0e={class:"umo-virtual-group"},x0e={class:"umo-virtual-group-row"},O0e={class:"umo-virtual-group-row"},E0e={class:"umo-virtual-group"},A0e={class:"umo-virtual-group-row"},T0e={class:"umo-virtual-group-row"},P0e={class:"umo-virtual-group"},M0e={class:"umo-virtual-group-row"},I0e={class:"umo-virtual-group-row"},N0e={class:"umo-virtual-group"},j0e={class:"virtual-group is-slot"},D0e={class:"umo-virtual-group"},B0e={class:"umo-virtual-group"},F0e={class:"umo-virtual-group"},L0e={class:"umo-virtual-group"},R0e={class:"umo-virtual-group"},z0e={class:"umo-virtual-group"},V0e={class:"umo-virtual-group"},H0e={class:"umo-virtual-group-row"},U0e={class:"umo-virtual-group-row"},K0e={class:"umo-virtual-group-row"},W0e={key:0,class:"umo-virtual-group"},G0e={class:"umo-virtual-group"},q0e={class:"umo-virtual-group"},Y0e={class:"virtual-group is-slot"},Z0e={class:"umo-virtual-group"},X0e={class:"umo-virtual-group"},J0e={class:"virtual-group is-slot"},Q0e={__name:"ribbon",props:{menus:{type:Array,required:!0},currentMenu:{type:String,required:!0}},emits:["menu-change"],setup(s,{emit:l}){const c=l,{options:d,hidePageHeader:f,hidePageFooter:g}=ie(),v=y=>d.value.toolbar.disableMenuItems.includes(y),b=ref(),$=async y=>{c("menu-change",y),await nextTick(),b.value.update()};return(y,x)=>{const C=z$,E=R$,N=L$,W=F$,q=D$,Y=op,re=ol,se=Du,de=ap,he=rp,ge=j$,Se=N$,Ae=Aa,Re=il,Be=np,Ke=I$,Lr=M$,_y=P$,by=T$,yy=A$,my=E$,$t=O$,K$=ju,Y$=Nu,W$=Iu,U$=J2,hy=X2,G$=x$,ky=S$,$y=$$,rS=B$,lS=k$,bS=C$,IS=w$,BS=_$,MS=y$,zS=tp,LS=ep,nS=Qv,Z$=Jv,dS=Xv,ES=b$,wy=g$,tS=h$,yS=m$,Q$=p$,eS=v$,cS=Zv,wS=Yv,xS=f$,OS=qv,mS=d$,pS=c$,fC=gp,US=hp,Iye=mp,$ye=pp,Rye=dp,Uye=vp,DS=fp,HS=cp,Aye=up,Tye=sp,jye=u$,sS=s$,TS=l$,AS=i$,jS=o$,KS=a$,Bye=Fu,Kye=Bu,swe=Gv,Cwe=Wv,ywe=Pu,hwe=Tu,Vwe=r$,Owe=n$,VS=t$,Zye=e$,twe=Jk,_we=Xk,Hwe=Zk,Pwe=Yk,Jwe=qk,Nwe=Gk,i2e=Kk,Kwe=Uk,Qwe=Hk,e2e=Vk,t2e=zk,Dye=Rk,CS=Lk,Sye=Fk;return openBlock(),createElementBlock("div",Q1e,[s.menus.length>1?(openBlock(),createElementBlock("div",e0e,[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(s.menus,Mye=>(openBlock(),createElementBlock("div",{class:normalizeClass(["umo-ribbon-tabs-item",{active:s.currentMenu===Mye.value}]),key:Mye.value,onClick:rwe=>$(Mye.value)},toDisplayString$1(Mye.label),11,t0e))),128))])):createCommentVNode("",!0),createVNode(Sye,{ref_key:"scrollableRef",ref:b,class:"umo-scrollable-container"},{default:withCtx(()=>[createBaseVNode("div",n0e,[s.currentMenu==="base"?(openBlock(),createElementBlock(Fragment$1,{key:0},[createBaseVNode("div",r0e,[createBaseVNode("div",a0e,[createVNode(C),createVNode(E)]),createBaseVNode("div",o0e,[createVNode(N),createVNode(W)])]),createBaseVNode("div",i0e,[createBaseVNode("div",l0e,[createVNode(q),createVNode(Y)]),createBaseVNode("div",s0e,[createVNode(re),createVNode(se),createVNode(de),createVNode(he),createVNode(ge),createVNode(Se),createVNode(Ae),createVNode(Re),createVNode(Be)])]),createBaseVNode("div",u0e,[createBaseVNode("div",c0e,[createVNode(Ke),createVNode(Lr),createVNode(_y),createVNode(by),createVNode(yy),createVNode(my),createVNode($t)]),createBaseVNode("div",d0e,[createVNode(K$),createVNode(Y$),createVNode(W$),createVNode(U$),createVNode(hy),createVNode(G$),v("code")?createCommentVNode("",!0):(openBlock(),createBlock(ky,{key:0})),createVNode($y)])]),createBaseVNode("div",f0e,[createVNode(rS)]),createBaseVNode("div",v0e,[createVNode(lS),createVNode(bS),createVNode(IS)]),createBaseVNode("div",p0e,[v("print")?createCommentVNode("",!0):(openBlock(),createBlock(BS,{key:0}))]),createBaseVNode("div",m0e,[renderSlot(y.$slots,"toolbar_base",{toolbarMode:"ribbon"},void 0,!0)])],64)):createCommentVNode("",!0),s.currentMenu==="insert"?(openBlock(),createElementBlock(Fragment$1,{key:1},[createBaseVNode("div",h0e,[createVNode(MS),createVNode(zS),v("video")?createCommentVNode("",!0):(openBlock(),createBlock(LS,{key:0})),v("audio")?createCommentVNode("",!0):(openBlock(),createBlock(nS,{key:1})),v("file")?createCommentVNode("",!0):(openBlock(),createBlock(Z$,{key:2})),v("code-block")?createCommentVNode("",!0):(openBlock(),createBlock(dS,{key:3})),createVNode(ES),v("chineseDate")?createCommentVNode("",!0):(openBlock(),createBlock(wy,{key:4})),v("emoji")?createCommentVNode("",!0):(openBlock(),createBlock(tS,{key:5})),v("math")?createCommentVNode("",!0):(openBlock(),createBlock(yS,{key:6}))]),createBaseVNode("div",g0e,[createVNode(Q$),createVNode(eS),createVNode(cS),createVNode(wS)]),createBaseVNode("div",b0e,[createVNode(xS),createVNode(OS)]),createBaseVNode("div",y0e,[renderSlot(y.$slots,"toolbar_insert",{toolbarMode:"ribbon"},void 0,!0)])],64)):createCommentVNode("",!0),s.currentMenu==="table"?(openBlock(),createElementBlock(Fragment$1,{key:2},[createBaseVNode("div",_0e,[createVNode(mS),createVNode(pS)]),createBaseVNode("div",w0e,[createVNode(fC),createVNode(US)]),createBaseVNode("div",C0e,[createBaseVNode("div",k0e,[createVNode(Iye),createVNode($ye),createVNode(Rye)]),createBaseVNode("div",$0e,[createVNode(Uye),createVNode(DS),createVNode(HS)])]),createBaseVNode("div",S0e,[createBaseVNode("div",x0e,[createVNode(Aye)]),createBaseVNode("div",O0e,[createVNode(Tye)])]),createBaseVNode("div",E0e,[createBaseVNode("div",A0e,[createVNode(jye),createVNode(sS)]),createBaseVNode("div",T0e,[createVNode(TS)])]),createBaseVNode("div",P0e,[createBaseVNode("div",M0e,[createVNode(AS)]),createBaseVNode("div",I0e,[createVNode(jS)])]),createBaseVNode("div",N0e,[createVNode(KS)]),createBaseVNode("div",j0e,[renderSlot(y.$slots,"toolbar_table",{toolbarMode:"ribbon"},void 0,!0)])],64)):createCommentVNode("",!0),s.currentMenu==="tools"?(openBlock(),createElementBlock(Fragment$1,{key:3},[createBaseVNode("div",D0e,[createVNode(Bye),createVNode(Kye)]),createBaseVNode("div",B0e,[v("signature")?createCommentVNode("",!0):(openBlock(),createBlock(swe,{key:0})),v("seal")?createCommentVNode("",!0):(openBlock(),createBlock(Cwe,{key:1}))]),createBaseVNode("div",F0e,[v("diagrams")?createCommentVNode("",!0):(openBlock(),createBlock(ywe,{key:0})),v("mermaid")?createCommentVNode("",!0):(openBlock(),createBlock(hwe,{key:1}))]),createBaseVNode("div",L0e,[v("chineseCase")?createCommentVNode("",!0):(openBlock(),createBlock(Vwe,{key:0}))]),createBaseVNode("div",R0e,[renderSlot(y.$slots,"toolbar_tools",{toolbarMode:"ribbon"},void 0,!0)])],64)):createCommentVNode("",!0),s.currentMenu==="page"?(openBlock(),createElementBlock(Fragment$1,{key:4},[createBaseVNode("div",z0e,[createVNode(Owe)]),createBaseVNode("div",V0e,[createBaseVNode("div",H0e,[createVNode(VS),createBaseVNode("div",null,[createBaseVNode("div",U0e,[createVNode(Zye)]),createBaseVNode("div",K0e,[createVNode(twe)])])])]),!unref(f)||!unref(g)?(openBlock(),createElementBlock("div",W0e,[unref(f)?createCommentVNode("",!0):(openBlock(),createBlock(_we,{key:0})),unref(g)?createCommentVNode("",!0):(openBlock(),createBlock(Hwe,{key:1}))])):createCommentVNode("",!0),createBaseVNode("div",G0e,[createVNode(Pwe),createVNode(Jwe),createVNode(Nwe),createVNode(i2e)]),createBaseVNode("div",q0e,[createVNode(Kwe)]),createBaseVNode("div",Y0e,[renderSlot(y.$slots,"toolbar_page",{toolbarMode:"ribbon"},void 0,!0)])],64)):createCommentVNode("",!0),s.currentMenu==="export"?(openBlock(),createElementBlock(Fragment$1,{key:5},[createBaseVNode("div",Z0e,[createVNode(Qwe),createVNode(e2e),createVNode(t2e)]),createBaseVNode("div",X0e,[v("share")?createCommentVNode("",!0):(openBlock(),createBlock(Dye,{key:0})),v("embed")?createCommentVNode("",!0):(openBlock(),createBlock(CS,{key:1}))]),createBaseVNode("div",J0e,[renderSlot(y.$slots,"toolbar_export",{toolbarMode:"ribbon"},void 0,!0)])],64)):createCommentVNode("",!0)])]),_:3},512)])}}},eye=Fe(Q0e,[["__scopeId","data-v-edccd6ec"]]),vy=s=>{const l={justNow:J("time.justNow"),past:c=>c.match(/\d/)?J("time.past",{n:c}):c,day:c=>c===1?J("time.yesterday"):J("time.day",{n:c}),hour:c=>J("time.hour",{n:c}),minute:c=>J("time.minute",{n:c}),second:c=>J("time.second",{n:c})};return useTimeAgo(new Date(s),{messages:l}).value.replace(/"/gi,"")},tye={key:0,class:"umo-toolbar-container"},nye={class:"umo-status"},rye={class:"umo-status-saved button-text"},aye=["textContent"],oye=["textContent"],iye={class:"umo-document-status-container umo-status"},lye=["textContent"],sye=["textContent"],uye={class:"umo-document-button-container"},cye={class:"umo-button-text"},dye={__name:"index",emits:["menu-change"],setup(s,{emit:l}){const c=l,{container:d,options:f,editor:g,savedAt:v}=ie(),b=Je("toolbar");let $=ref(!1);const y=useOnline(),x=[{label:J("toolbar.base"),value:"base"},{label:J("toolbar.insert"),value:"insert"},{label:J("toolbar.table"),value:"table"},{label:J("toolbar.tools"),value:"tools"},{label:J("toolbar.page"),value:"page"},{label:J("toolbar.export"),value:"export"}];let C=x;f.value.toolbar.menus&&(C=f.value.toolbar.menus.map(de=>x.filter(he=>he.value===de)[0]));let E=ref(C[0].value);const N=de=>{E.value=de,c("menu-change",de)};watch(()=>{var de;return(de=g.value)==null?void 0:de.isActive("table")},(de,he)=>{de?E.value="table":!de&&he&&(E.value="base")});const W=computed(()=>{const de=[{label:J("toolbar.ribbon"),value:"ribbon",prefixIcon:"toolbar-ribbon"},{label:J("toolbar.classic"),value:"classic",prefixIcon:"toolbar-classic"},{label:J("toolbar.hide"),value:"hideToolbar",prefixIcon:"hide-toolbar"}];return f.value.toolbar.enableSourceEditor&&de.splice(2,0,{label:J("toolbar.source"),value:"source",prefixIcon:"toolbar-source",divider:!0}),de}),q=({value:de})=>{de==="hideToolbar"?b.value.show=!1:(b.value.show=!0,b.value.mode=de)},Y=inject("saveContent"),re=()=>{Y(),$.value=!1},se=()=>{var de;const he=Je("document"),{content:ge}=he.value;if(!ge||ge===""||ge==="<p></p>"){const Se=Fo({theme:"info",header:J("save.cache.error.title"),body:J("save.cache.error.message"),placement:"center",onConfirm(){Se.destroy()}});return}$.value=!1,(de=g.value)==null||de.chain().setContent(ge,!0).focus().run()};return(de,he)=>{var ge;const Se=eye,Ae=J1e,Re=Ege,Be=Tt,Ke=Pn,Lr=tt,_y=wr,by=Ui,yy=Oa;return unref(b).show?(openBlock(),createElementBlock("div",tye,[unref(b).mode==="ribbon"?(openBlock(),createBlock(Se,{key:0,menus:unref(C),"current-menu":unref(E),onMenuChange:N},createSlots({_:2},[renderList(unref(f).toolbar.menus,my=>({name:`toolbar_${my}`,fn:withCtx($t=>[renderSlot(de.$slots,`toolbar_${my}`,normalizeProps(guardReactiveProps($t)),void 0,!0)])}))]),1032,["menus","current-menu"])):createCommentVNode("",!0),unref(b).mode==="classic"?(openBlock(),createBlock(Ae,{key:1,menus:unref(C),"current-menu":unref(E),onMenuChange:N},createSlots({_:2},[renderList(unref(f).toolbar.menus,my=>({name:`toolbar_${my}`,fn:withCtx($t=>[renderSlot(de.$slots,`toolbar_${my}`,normalizeProps(guardReactiveProps($t)),void 0,!0)])}))]),1032,["menus","current-menu"])):createCommentVNode("",!0),unref(b).mode==="source"&&unref(f).toolbar.enableSourceEditor?(openBlock(),createBlock(Re,{key:2})):createCommentVNode("",!0),createBaseVNode("div",{class:normalizeClass(["umo-toolbar-actions",unref(b).mode])},[unref(b).mode!=="source"&&(ge=unref(g))!=null&&ge.isEditable?(openBlock(),createBlock(Ke,{key:0,modelValue:unref($),"onUpdate:modelValue":he[0]||(he[0]=my=>isRef($)?$.value=my:$=my),attach:unref(d),trigger:"click",placement:"bottom-right",onVisibleChange:he[1]||(he[1]=my=>isRef($)?$.value=my:$=my)},{content:withCtx(()=>[createBaseVNode("div",iye,[createBaseVNode("div",null,toDisplayString$1(de.t("save.network"))+" "+toDisplayString$1(unref(y)?de.t("save.online"):de.t("save.offline")),1),createBaseVNode("div",null,[createTextVNode(toDisplayString$1(de.t("save.savedAt"))+" ",1),unref(v)?(openBlock(),createElementBlock("span",{key:0,textContent:toDisplayString$1(de.t("save.savedAtText",{time:unref(vy)(unref(v))}))},null,8,lye)):(openBlock(),createElementBlock("span",{key:1,textContent:toDisplayString$1(de.t("save.unsaved"))},null,8,sye))]),createBaseVNode("div",uye,[createVNode(Be,{size:"small",textContent:toDisplayString$1(de.t("save.text")),onClick:re},null,8,["textContent"]),createVNode(Be,{size:"small",variant:"outline",textContent:toDisplayString$1(de.t("save.cache.text")),onClick:se},null,8,["textContent"])])])]),default:withCtx(()=>[createVNode(Be,{class:normalizeClass(["umo-toolbar-actions-button",{active:unref($)}]),variant:"text",size:"small"},{default:withCtx(()=>[createBaseVNode("span",nye,[createBaseVNode("span",{class:normalizeClass(["umo-status-online",{offline:!unref(y)}])},null,2),createBaseVNode("span",rye,[unref(v)?(openBlock(),createElementBlock("span",{key:0,textContent:toDisplayString$1(de.t("save.savedAtText",{time:unref(vy)(unref(v))}))},null,8,aye)):(openBlock(),createElementBlock("span",{key:1,class:"unsaved",textContent:toDisplayString$1(de.t("save.unsaved"))},null,8,oye))])])]),_:1},8,["class"])]),_:1},8,["modelValue","attach"])):createCommentVNode("",!0),createVNode(by,{trigger:"click",size:"small",placement:"bottom-right","popup-props":{destroyOnClose:!0,attach:unref(d)},onClick:q},{dropdown:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment$1,null,renderList(unref(W),my=>(openBlock(),createBlock(_y,{key:my.value,content:my.label,value:my.value,divider:my.divider,active:my.value===unref(b).mode},{prefixIcon:withCtx(()=>[createVNode(Lr,{name:my.prefixIcon},null,8,["name"])]),_:2},1032,["content","value","divider","active"]))),128))]),default:withCtx(()=>[createVNode(Be,{class:"umo-toolbar-actions-button",variant:"text",size:"small"},{default:withCtx(()=>[createVNode(Lr,{name:"expand-down"}),createBaseVNode("span",cye,toDisplayString$1(de.t("toolbar.toggle")),1)]),_:1})]),_:1},8,["popup-props"])],2)])):(openBlock(),createBlock(yy,{key:1,content:de.t("toolbar.show"),placement:"bottom-right"},{default:withCtx(()=>[createBaseVNode("div",{class:"umo-show-toolbar",onClick:he[2]||(he[2]=my=>unref(b).show=!0)},[createVNode(Lr,{name:"arrow-down"})])]),_:1},8,["content"]))}}},fye=Fe(dye,[["__scopeId","data-v-c9da0fb8"]]);/**
 * tdesign v1.9.9
 * (c) 2024 tdesign
 * @license MIT
 */var vye={pagination:{itemsPerPage:"{size} / page",jumpTo:"Jump to",page:"",total:"{total} items"},cascader:{empty:"Empty Data",loadingText:"loading...",placeholder:"please select"},calendar:{yearSelection:"{year}",monthSelection:"{month}",yearRadio:"year",monthRadio:"month",hideWeekend:"Hide Week",showWeekend:"Show Week",today:"Today",thisMonth:"This Month",week:"Monday,Tuesday,Wedsday,Thuresday,Friday,Saturday,Sunday",cellMonth:"January,February,March,April,May,June,July,August,September,October,November,December"},transfer:{title:"{checked} / {total}",empty:"Empty Data",placeholder:"enter keyword to search"},timePicker:{dayjsLocale:"en",now:"Now",confirm:"Confirm",anteMeridiem:"AM",postMeridiem:"PM",placeholder:"please select"},dialog:{confirm:"Confirm",cancel:"Cancel"},drawer:{confirm:"Confirm",cancel:"Cancel"},popconfirm:{confirm:{content:"OK"},cancel:{content:"Cancel"}},table:{empty:"Empty Data",loadingText:"loading...",loadingMoreText:"loading more",filterInputPlaceholder:"",sortAscendingOperationText:"click to sort ascending",sortCancelOperationText:"click to cancel sorting",sortDescendingOperationText:"click to sort descending",clearFilterResultButtonText:"Clear",columnConfigButtonText:"Column Config",columnConfigTitleText:"Table Column Config",columnConfigDescriptionText:"Please select columns to show them in the table",confirmText:"Confirm",cancelText:"Cancel",resetText:"Reset",selectAllText:"Select All",searchResultText:'Search "{result}". Find {count} items.'},select:{empty:"Empty Data",loadingText:"loading...",placeholder:"please select"},tree:{empty:"Empty Data"},treeSelect:{empty:"Empty Data",loadingText:"loading...",placeholder:"please select"},datePicker:{dayjsLocale:"en",placeholder:{date:"select date",month:"select month",year:"select year",quarter:"select quarter",week:"select week"},weekdays:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],quarters:["Q1","Q2","Q3","Q4"],rangeSeparator:" - ",direction:"ltr",format:"YYYY-MM-DD",dayAriaLabel:"D",yearAriaLabel:"Y",monthAriaLabel:"M",weekAbbreviation:"W",confirm:"Confirm",selectTime:"Select Time",selectDate:"Select Date",nextYear:"Next Year",preYear:"Last Year",nextMonth:"Next Month",preMonth:"Last Month",preDecade:"Last Decade",nextDecade:"Next Decade",now:"Now"},upload:{sizeLimitMessage:"File is too large to upload. {sizeLimit}",cancelUploadText:"Cancel",triggerUploadText:{fileInput:"Upload",image:"Click to upload",normal:"Upload",reupload:"ReUpload",continueUpload:"Continue Upload",delete:"Delete",uploading:"Uploading"},dragger:{dragDropText:"Drop here",draggingText:"Drag file to this area to upload",clickAndDragText:'Click "Upload" or Drag file to this area to upload'},file:{fileNameText:"filename",fileSizeText:"size",fileStatusText:"status",fileOperationText:"operation",fileOperationDateText:"date"},progress:{uploadingText:"Uploading",waitingText:"Waiting",failText:"Failed",successText:"Success"}},form:{errorMessage:{date:"${name} is invalid",url:"${name} is invalid",required:"${name} is required",max:"${name} must be at least ${validate} characters",min:"${name} cannot be longer than ${validate} characters",len:"${name} must be exactly ${validate} characters",enum:"${name} must be one of ${validate}",idcard:"${name} is invalid",telnumber:"${name} is invalid",pattern:"${name} is invalid",validator:"${name} is invalid",boolean:"${name} is not a boolean",number:"${name} must be a number"},colonText:":"},input:{placeholder:"please enter"},list:{loadingText:"loading...",loadingMoreText:"loading more"},alert:{expandText:"expand",collapseText:"collapse"},anchor:{copySuccessText:"copy the link successfully",copyText:"copy link"},colorPicker:{swatchColorTitle:"System Default",recentColorTitle:"Recently Used",clearConfirmText:"Clear recently used colors?"},guide:{finishButtonProps:{content:"Finish",theme:"primary"},nextButtonProps:{content:"Next Step",theme:"primary"},skipButtonProps:{content:"Skip",theme:"default"},prevButtonProps:{content:"Last Step",theme:"default"}},image:{errorText:"unable to load",loadingText:"loading"},imageViewer:{errorText:"unable to load",mirrorTipText:"mirror",rotateTipText:"rotate",originalSizeTipText:"original"},typography:{expandText:"more",collapseText:"collapse",copiedText:"copied"},rate:{rateText:["terrible","disappointed","normal","satisfied","surprised"]},empty:{titleText:{maintenance:"Under Construction",success:"Success",fail:"Failure",empty:"No Data",networkError:"Network Error"}},descriptions:{colonText:":"}};const pye=["id"],mye={class:"umo-toolbar"},hye={class:"umo-main"},gye={key:0,class:"umo-footer"},py=Object.assign({name:"UmoEditor"},{__name:"index",props:nW,emits:["beforeCreate","created","changed","changed:selection","changed:transaction","changed:menu","changed:toolbar","changed:pageSize","changed:pageOrientation","changed:pageMargin","changed:pageBackground","changed:pageShowToc","changed:pagePreview","changed:pageZoom","changed:pageWatermark","changed:locale","changed:theme","contentError","print","focus","blur","saved","destroy"],setup(s,{expose:l,emit:c}){const d=s,f=c;onBeforeMount(()=>N(d));const{container:g,toolbarKey:v,options:b,page:$,tableOfContents:y,savedAt:x,editorDestroyed:C,editor:E,setOptions:N,printing:W,resetStore:q}=ie(),Y=Je("toolbar",d.editorKey),re=Je("document",d.editorKey);watch(()=>d,()=>N(d),{deep:!0}),C.value=!1;const{appContext:se}=getCurrentInstance();se.config.globalProperties.t=zt.global.t,se.config.globalProperties.l=mr;const de=Je("locale");zt.global.locale.value=de.value!==b.value.locale?de.value:b.value.locale;const he=ref({"zh-CN":__,"en-US":vye}),ge=wy=>{if(!["light","dark","auto"].includes(wy))throw new Error('"parmas" must be one of "light", "dark" or "auto".');if(wy!=="auto"){document.querySelector("html").setAttribute("theme-mode",wy),f("changed:theme",wy);return}const tS="(prefers-color-scheme: dark)",yS=window.matchMedia(tS).matches;ge(yS?"dark":"light"),window.matchMedia(tS).addEventListener("change",Q$=>{ge(Q$.matches?"dark":"light")})};onMounted(()=>{ge(b.value.theme)}),watch(()=>b.value.theme,wy=>{ge(wy)});const{hidePageHeader:Se,hidePageFooter:Ae}=ie(),Re=useSlots();Re.page_header&&(Se.value=!1),Re.page_footer&&(Ae.value=!1);const Be=wy=>{if(!wy instanceof Object)throw new Error("parmas must be an object.");if(wy.mode){if(typeof wy.mode!="string")throw new Error('"parmas.size" must be a string.');if(wy.mode&&!["classic","ribbon"].includes(wy.mode))throw new Error('"parmas.mode" must be one of "classic" or "ribbon".');Y.value.mode=wy.mode}if(wy.show!==void 0){if(typeof wy.show!="boolean")throw new Error('"parmas.show" must be a boolean.');Y.value.show=wy.show}},Ke=wy=>{if(!wy instanceof Object)throw new Error("parmas must be an object.");if(wy.size){if(typeof wy.size!="string")throw new Error('"parmas.size" must be a string.');const tS=b.value.dicts.pageSizes.find(yS=>yS.label===wy.size);if(!tS)throw new Error(`"parmas.size" must be one of ${b.value.dicts.pageSizes.map(yS=>yS.label)}.`);$.value.size=tS}if(wy.orientation){if(typeof wy.orientation!="string")throw new Error('"parmas.orientation" must be a string.');if(!["portrait","landscape"].includes(wy.orientation))throw new Error('"parmas.mode" must be one of "portrait" or "landscape".');$.value.orientation=wy.orientation}if(wy.background){if(typeof wy.background!="string")throw new Error('"parmas.background" must be a string.');$.value.background=wy.background}},Lr=wy=>{if(!wy instanceof Object)throw new Error("parmas must be an object.");if(wy.alpha!==void 0){if(typeof wy.alpha!="number")throw new Error('"parmas.alpha" must be a number.');$.value.watermark.alpha=wy.alpha}if(wy.text){if(typeof wy.text!="string")throw new Error('"parmas.text" must be a string.');if(wy.text.length>30)throw new Error('"parmas.text" must be less than 30 characters.');$.value.watermark.text=wy.text}if(wy.type){if(typeof wy.type!="string")throw new Error('"parmas.type" must be a string.');if(!["compact","spacious"].includes(wy.type))throw new Error('"parmas.type" must be one of "compact" or "spacious".');$.value.watermark.type=wy.type}if(wy.fontColor){if(typeof wy.fontColor!="string")throw new Error('"parmas.fontColor" must be a string.');$.value.watermark.fontColor=wy.fontColor}if(wy.fontSize){if(typeof wy.fontSize!="number")throw new Error('"parmas.fontSize" must be a number.');$.value.watermark.fontSize=wy.fontSize}if(wy.fontFamily||wy.fontFamily===null){if(wy.fontFamily!==null&&typeof wy.fontFamily!="string")throw new Error('"parmas.fontFamily" must be a string.');$.value.watermark.fontFamily=wy.fontFamily}if(wy.fontWeight){if(typeof wy.fontWeight!="string")throw new Error('"parmas.fontWeight" must be a string.');if(!["normal","bold","bolder"].includes(wy.fontWeight))throw new Error('"parmas.fontWeight" must be one of "normal", "bold" or "bolder".');$.value.watermark.fontWeight=wy.fontWeight}},_y=wy=>{var tS,yS;if(!wy instanceof Object)throw new Error("parmas must be an object.");if(wy.title){if(typeof wy.title!="string")throw new Error('"parmas.title" must be a string.');const Q$=wy.title!==""?wy.title:J("document.untitled");re.value.title=Q$,b.value.document.title=Q$}if(wy.bubbleMenu!==void 0){if(typeof wy.bubbleMenu!="boolean")throw new Error('"parmas.bubbleMenu" must be a boolean.');b.value.document.bubbleMenu=wy.bubbleMenu}if(wy.blockMenu!==void 0){if(typeof wy.blockMenu!="boolean")throw new Error('"parmas.blockMenu" must be a boolean.');b.value.document.blockMenu=wy.blockMenu}if(wy.markdown!==void 0){if(typeof wy.markdown!="boolean")throw new Error('"parmas.markdown" must be a boolean.');re.value.markdown=wy.markdown}if(wy.spellcheck!==void 0){if(typeof wy.spellcheck!="boolean")throw new Error('"parmas.spellcheck" must be a boolean.');re.value.spellcheck=wy.spellcheck}if(wy.autoSave){if(typeof((tS=wy.autoSave)==null?void 0:tS.enabled)!="boolean")throw new Error('"parmas.autoSave.enabled" must be a boolean.');if(b.value.document.autoSave.enabled=wy.autoSave.enabled,((yS=wy.autoSave)==null?void 0:yS.interval)!=="number")throw new Error('"parmas.autoSave.interval" must be a number.');b.value.document.autoSave.interval=wy.autoSave.interval}},by=(wy,tS={emitUpdate:!0,focusPosition:"start",focusOptions:{scrollIntoView:!0}})=>{if(!E.value)throw new Error("editor is not ready!");E.value.chain().setContent(wy,tS.emitUpdate).focus(tS.focusPosition,tS.focusOptions).run(),setTimeout(()=>{E.value.commands.autoPaging()},200)},yy=wy=>{if(!E.value)throw new Error("editor is not ready!");if(typeof wy!="boolean")throw new Error('"enabled" must be a boolean.');$.value.pagination=wy},my=wy=>{if(!E.value)throw new Error("editor is not ready!");if(typeof wy!="boolean")throw new Error('"enabled" must be a boolean.');E.value.commands.autoPaging(wy)},$t=wy=>{if(!["zh-CN","en-US"].includes(wy))throw new Error('"parmas" must be one of "zh-CN" or "en-US".');if(zt.global.locale.value===wy)return;const tS=Je("locale");tS.value=wy,location.reload()},K$=(wy="html")=>{if(!E.value)throw new Error("editor is not ready!");if(wy==="html")return E.value.getHTML();if(wy==="text")return E.value.getText();if(wy==="json")return E.value.getJSON();throw new Error("format must be html, text or json")},Y$=async(wy="blob")=>{const tS=$.value.zoomLevel;try{$.value.zoomLevel=100;const yS=document.querySelector(`${g} .umo-page-content`);if(wy==="blob")return await domToImageMore_minExports.toBlob(yS);if(wy==="jpeg")return await domToImageMore_minExports.toJpeg(yS);if(wy==="png")return await domToImageMore_minExports.toPng(yS)}catch{throw new Error(J("export.image.error.message"))}finally{$.value.zoomLevel=tS}},W$=()=>K$("text"),U$=()=>K$("html"),hy=()=>K$("json"),G$=async()=>{if(!(Y.value.mode==="source"||b.value.document.readOnly))try{let wy=await qe("loading",{content:J("save.saving"),placement:"bottom",closeBtn:!0,offset:[0,-20]},0);if(!await b.value.onSave({html:E.value.getHTML(),json:E.value.getJSON(),text:E.value.getHTML()},$.value,re.value)){wy.close(),wy=qe("error",{content:J("save.failed"),placement:"bottom",offset:[0,-20]});return}f("saved"),wy.close(),qe("success",{content:J("save.success"),placement:"bottom",offset:[0,-20]});const tS=useTimestamp({offset:0});x.value=tS.value}catch(wy){qe("error",{content:J("save.error"),placement:"bottom",offset:[0,-20]}),console.error(wy.message)}},ky=(wy=100,tS=" ...")=>{const yS=E.value.getText();return yS.length===0?"":yS.substring(0,wy)+tS},$y=()=>zt.global.locale.value,rS=()=>zt,lS=()=>{const{toolbar:wy,document:tS}=b.value;wy.disableMenuItems.includes("print")||E.isEmpty||Y.value.mode!=="source"&&!tS.readOnly&&(W.value=!0)},bS=(wy="start",tS={scrollIntoView:!0})=>E.value.commands.focus(wy,tS),IS=()=>E.value.chain().blur().run(),BS=wy=>{const tS=()=>{localStorage.clear(),location.reload()};if(wy===!0){tS();return}const yS=Nr({theme:"warning",header:J("resetAll.title"),body:J("resetAll.message"),confirmBtn:{theme:"warning",content:J("resetAll.reset")},onConfirm(){yS.destroy(),tS()}})},MS=()=>{E.value.destroy(),q()};l({getOptions:()=>b.value,setOptions:N,setToolbar:Be,setPage:Ke,setWatermark:Lr,setDocument:_y,setContent:by,setLocale:$t,setTheme:ge,getContent:K$,setPagination:yy,autoPagination:my,getImage:Y$,getText:W$,getHTML:U$,getJSON:hy,saveContent:G$,getContentExcerpt:ky,getEditor:()=>E,getTableOfContents:()=>y.value,getSelectionText:()=>Au(E.value),getSelectionNode:()=>Ht(E.value),deleteSelectionNode:()=>{var wy;return(wy=E.value)==null?void 0:wy.commands.deleteSelectionNode()},setCurrentNodeSelection:()=>{var wy;return(wy=E.value)==null?void 0:wy.commands.setCurrentNodeSelection()},getLocale:$y,getI18n:rS,setReadOnly(wy=!0){b.value.document.readOnly=wy},print:lS,focus:bS,blur:IS,reset:BS,useAlert:Fo,useConfirm:Nr,useMessage:qe,destroy:MS});let zS=ref(!1),LS=ref(!0),nS=ref(null);const Z$=()=>{nS.value!==null&&(clearInterval(nS.value),nS.value=null)};watch(()=>zS.value,wy=>{const{autoSave:tS}=b.value.document;if(tS.enabled){if(LS.value){LS.value=!1,setTimeout(()=>zS.value=!1);return}if(!wy){Z$();return}nS.value=setInterval(()=>{G$(),zS.value=!1,Z$()},tS.interval)}}),onBeforeUnmount(()=>{Z$(),MS()}),f("beforeCreate"),watch(()=>E.value,()=>{E.value&&(E.value.on("create",({editor:wy})=>f("created",{editor:wy})),E.value.on("update",({editor:wy})=>{f("changed",{editor:wy}),zS.value=!0}),E.value.on("selectionUpdate",({editor:wy})=>{f("changed:selection",{editor:wy})}),E.value.on("transaction",({editor:wy,transaction:tS})=>f("changed:transaction",{editor:wy,transaction:tS})),E.value.on("focus",({editor:wy,event:tS})=>f("focus",{editor:wy,event:tS})),E.value.on("contentError",({editor:wy,error:tS,disableCollaboration:yS})=>f("contentError",{editor:wy,error:tS,disableCollaboration:yS})),E.value.on("blur",({editor:wy,event:tS})=>f("blur",{editor:wy,event:tS})),E.value.on("destroy",()=>{q(),f("destroy")}))});const dS=wy=>f("changed:menu",wy);watch(()=>Y.value,(wy,tS)=>{f("changed:toolbar",{toolbar:wy,oldToolbar:tS})},{deep:!0}),watch(()=>$.value.size,(wy,tS)=>f("changed:pageSize",{pageSize:wy,oldPageSize:tS}),{deep:!0}),watch(()=>$.value.margin,(wy,tS)=>f("changed:pageMargin",{pageMargin:wy,oldPageMargin:tS}),{deep:!0}),watch(()=>$.value.background,(wy,tS)=>f("changed:pageBackground",{pageBackground:wy,oldPageBackground:tS})),watch(()=>$.value.orientation,(wy,tS)=>f("changed:pageOrientation",{pageOrientation:wy,oldPageOrientation:tS})),watch(()=>$.value.showToc,wy=>f("changed:pageShowToc",wy)),watch(()=>$.value.zoomLevel,(wy,tS)=>f("changed:pageZoom",{zoomLevel:wy,oldZoomLevel:tS})),watch(()=>$.value.preview.enabled,wy=>f("changed:pagePreview",wy)),watch(()=>$.value.watermark,(wy,tS)=>f("changed:pageWatermark",{pageWatermark:wy,oldPageWatermark:tS}),{deep:!0}),watch(()=>W.value,()=>f("print"),{deep:!0}),watch(()=>zt.global.locale.value,(wy,tS)=>{f("changed:locale",{locale:wy,oldLocale:tS})}),provide("saveContent",G$),provide("setLocale",$t),provide("reset",BS);const ES=()=>{var wy;return(wy=E.value)==null?void 0:wy.commands.unsetFormatPainter()};return Wn("ctrl+s,command+s",()=>{G$(),ES()}),Wn("ctrl+p,command+p",()=>{lS(),ES()}),Wn("esc",()=>{$.value.preview.enabled=!1,ES()}),watch(()=>Y.value.mode,wy=>C.value=wy==="source"),(wy,tS)=>{const yS=fye,Q$=kge,eS=Yce,cS=Kce,wS=BU;return openBlock(),createBlock(wS,{"global-config":{...he.value[unref(zt).global.locale.value],classPrefix:"umo"}},{default:withCtx(()=>[createBaseVNode("div",{id:unref(g).substr(1),class:normalizeClass(["umo-editor-container",{"toolbar-classic":unref(Y).mode==="classic","toolbar-ribbon":unref(Y).mode==="ribbon","toolbar-source":unref(Y).mode==="source","preview-mode":unref($).preview.enabled,"laser-pointer":unref($).preview.enabled&&unref($).preview.laserPointer}]),style:normalizeStyle({height:unref(b).height})},[createBaseVNode("header",mye,[(openBlock(),createBlock(yS,{key:unref(v),onMenuChange:dS},createSlots({_:2},[renderList(unref(b).toolbar.menus,xS=>({name:`toolbar_${xS}`,fn:withCtx(OS=>[renderSlot(wy.$slots,`toolbar_${xS}`,normalizeProps(guardReactiveProps(OS)))])}))]),1024))]),createBaseVNode("main",hye,[unref(Y).mode!=="source"?(openBlock(),createBlock(Q$,{key:0},{page_header:withCtx(xS=>[renderSlot(wy.$slots,"page_header",normalizeProps(guardReactiveProps(xS)))]),page_footer:withCtx(xS=>[renderSlot(wy.$slots,"page_footer",normalizeProps(guardReactiveProps(xS)))]),bubble_menu:withCtx(xS=>[renderSlot(wy.$slots,"bubble_menu",normalizeProps(guardReactiveProps(xS)))]),_:3})):(openBlock(),createBlock(eS,{key:1}))]),unref(Y).mode!=="source"?(openBlock(),createElementBlock("footer",gye,[createVNode(cS)])):createCommentVNode("",!0)],14,pye)]),_:3},8,["global-config"])}}});var T=Object.defineProperty,D=(s,l,c)=>l in s?T(s,l,{enumerable:!0,configurable:!0,writable:!0,value:c}):s[l]=c,u=(s,l,c)=>(D(s,typeof l!="symbol"?l+"":l,c),c);/**
* @vue/shared v3.4.27
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const K=Object.assign,P=Array.isArray,U=s=>typeof s=="string",A=s=>{const l=Object.create(null);return c=>l[c]||(l[c]=s(c))},z=/-(\w)/g,w=A(s=>s.replace(z,(l,c)=>c?c.toUpperCase():"")),M=/\B([A-Z])/g,m=A(s=>s.replace(M,"-$1").toLowerCase()),S=s=>{const l=U(s)?Number(s):NaN;return isNaN(l)?s:l};/*! #__NO_SIDE_EFFECTS__ */function k(s,l,c){const d=defineComponent(s);class f extends O{constructor(v){super(d,v,l,c)}}return u(f,"def",d),f}const F=typeof HTMLElement<"u"?HTMLElement:class{};class O extends F{constructor(l,c={},d={shadowRoot:!0},f){super(),u(this,"_instance",null),u(this,"_connected",!1),u(this,"_resolved",!1),u(this,"_numberProps",null),u(this,"_styles"),u(this,"_slots",{}),u(this,"_ob",null),this._def=l,this._props=c,this._config=d,this._root&&f?f(this._createVNode(),this._root):(this._config.shadowRoot!==!1&&this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}get _root(){return this._config.shadowRoot?this.shadowRoot:this}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,nextTick(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),render$4(null,this._root),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let d=0;d<this.attributes.length;d++)this._setAttr(this.attributes[d].name);this._ob=new MutationObserver(d=>{for(const f of d)this._setAttr(f.attributeName)}),this._ob.observe(this,{attributes:!0});const l=(d,f=!1)=>{const{props:g}=d,v=this._collectNestedStyles(d);let b;if(g&&!P(g))for(const $ in g){const y=g[$];(y===Number||y&&y.type===Number)&&($ in this._props&&(this._props[$]=S(this._props[$])),(b||(b=Object.create(null)))[w($)]=!0)}if(this._numberProps=b,f&&this._resolveProps(d),!this._config.shadowRoot){this._slots={};for(const $ of Array.from(this.children)){const y=$.getAttribute("slot")||"default";this._slots[y]||(this._slots[y]=[]),this._slots[y].push(h($.tagName.toLowerCase(),{},$.innerHTML))}this.replaceChildren()}this._applyStyles(v),this._update()},c=this._def.__asyncLoader;c?c().then(d=>l(d,!0)):l(this._def)}_resolveProps(l){const{props:c}=l,d=P(c)?c:Object.keys(c||{});for(const f of Object.keys(this))f[0]!=="_"&&d.includes(f)&&this._setProp(f,this[f],!0,!1);for(const f of d.map(w))Object.defineProperty(this,f,{get(){return this._getProp(f)},set(g){this._setProp(f,g)}})}_setAttr(l){let c=this.hasAttribute(l)?this.getAttribute(l):void 0;const d=w(l);this._numberProps&&this._numberProps[d]&&(c=S(c)),this._setProp(d,c,!1)}_getProp(l){return this._props[l]}_setProp(l,c,d=!0,f=!0){c!==this._props[l]&&(this._props[l]=c,f&&this._instance&&this._update(),d&&(c===!0?this.setAttribute(m(l),""):typeof c=="string"||typeof c=="number"?this.setAttribute(m(l),c+""):c||this.removeAttribute(m(l))))}_update(){render$4(this._createVNode(),this._root)}_createVNode(){const l=createVNode(this._def,K({},this._props),this._slots);return this._instance||(l.ce=c=>{this._instance=c,c.isCE=!0;const d=(g,v)=>{this.dispatchEvent(new CustomEvent(g,{detail:v}))};c.emit=(g,...v)=>{d(g,v),m(g)!==g&&d(m(g),v)};let f=this;for(;f=f&&(f.parentNode||f.host);)if(f instanceof O){c.parent=f._instance,c.provides=f._instance.provides;break}}),l}_applyStyles(l){l&&l.forEach(c=>{const d=document.createElement("style");d.textContent=c,this._root.prepend(d)})}_collectNestedStyles(l){let c=l.styles??[];return l.components&&Object.values(l.components).forEach(d=>{c=c.concat(this._collectNestedStyles(d))}),c}}const umoEditor=k(py,{shadowRoot:!1});window.customElements.define("umo-editor",umoEditor);const app=createApp(py);app.mount("#app");export{constant$1 as $,utils$4 as A,rgba as B,setDiagramTitle as C,getDiagramTitle as D,clear as E,curveBasis as F,parseGenericTypes as G,setupGraphViewbox as H,random as I,define$1 as J,extend$2 as K,Color$2 as L,rgbConvert as M,nogamma as N,hue$1 as O,commonjsGlobal as P,getDefaultExportFromCjs as Q,Rgb as R,Selection$1 as S,dayjs as T,selectSvgElement as U,tau as V,defaultConfig$2 as W,cleanAndMerge as X,parseFontSize as Y,getThemeVariables$2 as Z,getConfig$1 as _,getAccDescription as a,MapCache as a$,interpolateNumber as a0,color as a1,interpolateRgb as a2,interpolateString as a3,hasKatex as a4,calculateMathMLDimensions as a5,ZERO_WIDTH_SPACE as a6,generateId$1 as a7,isObject$3 as a8,setToString as a9,sqrt as aA,min$1 as aB,abs$1 as aC,atan2 as aD,asin as aE,acos as aF,max$1 as aG,Utils as aH,Color$1 as aI,isObjectLike as aJ,baseGetTag as aK,Symbol$1 as aL,arrayLikeKeys as aM,baseKeys as aN,memoize as aO,isArguments as aP,copyObject as aQ,getPrototype as aR,cloneArrayBuffer as aS,cloneTypedArray as aT,getTag as aU,nodeUtil as aV,copyArray as aW,isBuffer$2 as aX,cloneBuffer as aY,initCloneObject as aZ,Stack as a_,overRest as aa,baseRest as ab,isIterateeCall as ac,keysIn as ad,eq$1 as ae,isArrayLike as af,isArray$2 as ag,baseFor as ah,baseAssignValue as ai,identity as aj,isIndex as ak,assignValue as al,baseUnary as am,constant as an,merge$2 as ao,lineBreakRegex as ap,defaultConfig as aq,commonDb as ar,isDark as as,lighten as at,darken as au,pi$3 as av,cos as aw,sin as ax,halfPi as ay,epsilon as az,setAccDescription as b,Uint8Array$1 as b0,isTypedArray as b1,isLength as b2,Set$1 as b3,isArrayLikeObject as b4,isEmpty$3 as b5,decodeEntities as b6,dedent as b7,getConfig as c,sanitizeText$2 as d,assignWithDepth$1 as e,calculateTextWidth as f,getAccTitle as g,select as h,configureSvgSize as i,common$1 as j,calculateTextHeight as k,log$1 as l,dist as m,curveLinear as n,getStylesFromArray as o,evaluate as p,interpolateToCurve as q,renderKatex as r,setAccTitle as s,setupGraphViewbox$1 as t,setConfig as u,root$1 as v,wrapLabel as w,array as x,isPlainObject as y,isFunction$2 as z};
